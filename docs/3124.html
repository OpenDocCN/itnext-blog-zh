<html>
<head>
<title>Kibana 7.x — Options to customize, filter, share and save</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kibana 7.x —定制、过滤、共享和保存选项</h1>
<blockquote>原文：<a href="https://itnext.io/kibana-7-x-options-to-customize-filter-share-and-save-120b8ca5d9a8?source=collection_archive---------0-----------------------#2019-10-08">https://itnext.io/kibana-7-x-options-to-customize-filter-share-and-save-120b8ca5d9a8?source=collection_archive---------0-----------------------#2019-10-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/a534b13ea66c921083cbe9f8171bc3f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HW_x9ZvIbUkyaqHstsB1ig.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">定制、过滤、分享&amp;保存</strong></figcaption></figure><p id="e6cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kibana是一个开源分析和可视化平台，旨在与Elasticsearch合作。Kibana可用于搜索、查看和交互存储在Elasticsearch索引中的数据。然而——Kibana UI是如此健壮和详尽，以至于有多个选项可以定制、过滤(KQL vs Lucene vs DSL)、共享和保存</p><p id="e39b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文旨在介绍如下可用功能:</p><ol class=""><li id="d4f6" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">自定义时间范围</li><li id="1e8b" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">自定义显示</li><li id="0e24" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">Kibana搜索类型(自由形式、基于字段和基于过滤器的搜索类型)</li><li id="8d36" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">对已定义过滤器的可用操作</li><li id="ad18" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">基于过滤器的搜索—可点击的选项</li><li id="f4a2" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">使用Lucene语法的高级搜索(通配符与模糊性)</li><li id="fca7" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">KQL vs Lucene语法</li><li id="1b89" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">DSL匹配与多匹配</li><li id="4a67" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">共享日志—永久链接与CSV报告</li></ol><p id="504e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使文章具有互动性，json文档样本张贴在https://github.com/sandeepmanchi/kibana-7x的<a class="ae ls" href="https://github.com/sandeepmanchi/kibana-7x" rel="noopener ugc nofollow" target="_blank">。下载内容并按照自述文件的说明将这些内容发布到elasticsearch，并使用这些文档在整篇文章中获得互动体验</a></p><h1 id="06cb" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">自定义时间范围:</h1><ul class=""><li id="7ca3" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">默认— Kibana始终显示15分钟前的数据，但这可以自定义</li><li id="d309" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">有两种选择:</li><li id="2957" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">相对:例如，24小时前、30分钟前、10年前</li><li id="9dde" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">绝对:10月5日凌晨01:00到10月5日凌晨03:00</li></ul><h2 id="fa8c" class="mw lu it bd kf mx my dn ly mz na dp mc kr nb nc mg kv nd ne mk kz nf ng mo nh bi translated">示例:</h2><ul class=""><li id="1307" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated"><strong class="ki iu">例1:相对设置</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/35a0ad3a9de271e9a4480c6090a04e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gd68Q5fMDsNq7FmEp-uFWw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">相对设置—例如:2天前</strong></figcaption></figure><ul class=""><li id="6145" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例2:绝对设置</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/eac79b8a493ce1ec9bb82615fb072307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ItTbl50uAQILxFYePJycZQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">绝对设置—示例:选择特定时间段</strong></figcaption></figure><h1 id="b189" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">自定义显示:</h1><p id="e5e7" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">通过将“可用字段”部分的字段添加到“选定字段”部分(在左侧)，可以自定义用户的查看显示</p><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/fd35b9d4cd5ee034580afa385384c444.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*5X_EmjTL2j_VQas2s6iayA.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">点击“添加”将使该字段可用</strong></figcaption></figure><h1 id="67f9" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">基巴纳搜索类型:</h1><ol class=""><li id="facc" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld lj lk ll lm bi translated">自由格式文本</li><li id="dd57" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">基于字段的搜索</li><li id="dd73" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">基于过滤器的搜索</li></ol><h1 id="101a" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">自由格式文本:</h1><ul class=""><li id="138d" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">在文档中所有可能的字段中执行搜索</li><li id="f8eb" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">效率极低；尤其是在搜索大量文档或更长的时间范围时</li></ul><h2 id="8952" class="mw lu it bd kf mx my dn ly mz na dp mc kr nb nc mg kv nd ne mk kz nf ng mo nh bi translated">示例:</h2><ul class=""><li id="c62a" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated"><strong class="ki iu">示例1:搜索单词“system”(不带单引号)</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/bdc70b9428efeb1a6cc5777b33b3bb73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0k8-3vhPoqDkaomI9ne6Zw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">针对整个文档搜索单个单词</strong></figcaption></figure><h1 id="5112" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">基于字段的搜索:</h1><ul class=""><li id="80cd" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">可以使用文档中指定的字段(一个或多个)启动搜索—有点类似于针对表编写具有特定字段的选择查询</li><li id="ceaa" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">在字段之间可以使用AND或OR运算符</li><li id="7346" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">搜索机制可以针对特定领域的全部或部分价值</li></ul><h2 id="8c80" class="mw lu it bd kf mx my dn ly mz na dp mc kr nb nc mg kv nd ne mk kz nf ng mo nh bi translated">示例:</h2><ul class=""><li id="b269" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated"><strong class="ki iu">示例1:搜索值为“弹性”的字段“流派”</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/c5cfe661f2fc15457e9b283c2a1b2be5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RC-2OG3vHjGQXhX49aQKAg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">根据特定字段搜索特定值</strong></figcaption></figure><ul class=""><li id="d11f" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例2:使用AND运算符</strong>搜索多个字段</li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/0a5c1c197cb58e5eddccacd349cf0407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y1Wl3mzILetrmkfwfv4kGw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">使用AND运算符和数字比较搜索多个字段</strong></figcaption></figure><ul class=""><li id="339a" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">例3:用or运算符搜索多个字段</strong></li></ul><p id="b86c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果需要，搜索也可以包括相同的字段类型</p><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/d7bfbf204ea5d80a95af6329179eb10f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*51rdO8B2rTwZsV8MlSR4Bw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">用OR运算符搜索相同字段但不同的值</strong></figcaption></figure><h1 id="f748" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">基于过滤器的搜索:</h1><p id="a68c" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">一种直观的搜索特定字段的方式，用户可以即时访问文档中所有可用的字段，而不必记住或参考示例文档来获取字段名</p><p id="6827" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更多可应用于单个字段的运算符选项:</p><ul class=""><li id="2ed5" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated">是</li><li id="dc0e" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">不是</li><li id="fee5" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">是以下之一</li><li id="d9e4" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">不是其中之一</li><li id="c082" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">存在</li><li id="16a8" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">不存在</li></ul><p id="3fa3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果应用了基于多个过滤器的搜索，则该搜索将作为增量搜索。例如，如果有100条记录，并且用户应用了检索30条记录的过滤器1。现在，如果用户同时应用过滤器2和过滤器1，那么将在检索到的30条记录中进行搜索</p><p id="1158" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">自定义标签可以应用于特定的过滤器类型，以便更直观地阅读</p><p id="582a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以对定义的过滤器执行多种操作，如包括、排除、禁用、启用等。</p><h2 id="f55d" class="mw lu it bd kf mx my dn ly mz na dp mc kr nb nc mg kv nd ne mk kz nf ng mo nh bi translated">示例:</h2><ul class=""><li id="935c" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated"><strong class="ki iu">示例1:直观的字段特定选择</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/e1860c5619f351f75628bf95f366e0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enafPhh04685AU88Ovl8xA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">搜索特定字段</strong></figcaption></figure><ul class=""><li id="e847" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例2:增量搜索—多个过滤器—正面示例</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/6527b2d82f9312880a12c907796dcc85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUWxCDZGwCWp_HLIO8-LaQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">多重过滤器——加法方法</strong></figcaption></figure><ul class=""><li id="a229" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例3:增量搜索—多个过滤器—否定示例</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/5d60211d17607a6137ddb93f72e9726b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aiFhXzbobP5BAM5fIqsvdQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">多重过滤器—加法方法—否定示例</strong></figcaption></figure><ul class=""><li id="a5cf" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例4:为特定过滤器分配自定义标签，以便更直观地阅读</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/de2c50c6effdb9e3ce9af0ee577a2aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*itzisy8OIl_Gdbj_RlF6Ow.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">为过滤器分配自定义标签以提高可读性</strong></figcaption></figure><ul class=""><li id="672c" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例5:使用自定义过滤器的示例2(增量搜索)</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/b3553ed653d2e688f79df7705a09216f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2lBjfFRP5gmA3RsBn6TSw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">使用自定义过滤器的增量/累加搜索</strong></figcaption></figure><h1 id="ffd9" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated"><strong class="ak">已定义过滤器的可用动作:</strong></h1><ul class=""><li id="6833" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">排除结果-将作为NOT运算符工作</li><li id="f6c7" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">一旦排除-将启用“包括结果”选项(这实际上可以删除“非”运算符)</li><li id="3e78" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">暂时禁用-这将从结果中删除过滤器，但从视觉角度来看，过滤器仍然存在(这是为了在尝试不同的搜索时提供更多的可用性，而不是重新创建过滤器)</li><li id="4611" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">一旦禁用，启用选项将被启用</li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/8935907f130c3de1c3f923e823205abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3owRVCm6wdsHTwpB5x9tRQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">特定过滤器的可用选项</strong></figcaption></figure><h1 id="5af1" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">基于过滤器的搜索—可点击的选项:</h1><p id="24c4" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">除了通过选择字段和输入特定值来创建过滤器之外，Kibana还提供了两种方式来执行基于过滤器的搜索，只需点击即可</p><h1 id="8f7a" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">选项1:单击展开的文档</h1><p id="78be" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">有4个选项(从左到右):</p><ol class=""><li id="6a26" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">值过滤器-相当于IS运算符</li><li id="e85b" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">筛选出值-相当于IS NOT运算符</li><li id="db59" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">切换表中的列-将指定字段作为列添加到用户视图中</li><li id="1c8c" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">筛选存在的字段—筛选具有指定字段名的所有文档。当有多个文档结构并且只有一些文档结构具有特定字段时，这很有用</li></ol><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/288db090a628b7656e3c0e3fa67f26e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Au7i5EY4B7cq102LDsWR6g.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">展开文档的可点击选项</strong></figcaption></figure><h1 id="0f69" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">选项2:单击“可用字段”面板(在左侧)</h1><ul class=""><li id="101f" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">选择任意一个字段，然后使用“筛选值”或“筛选出值”</li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/c2d357392e704066af189076177479b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*fMSL7qfU0sV9k8IBBVyrPg.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">可用字段——过滤进去或过滤出来</strong></figcaption></figure><h1 id="6a4b" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">KQL vs Lucene语法</h1><p id="8d68" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">版本5之前的Kibana只支持Lucene查询语法(Apache Lucene专有的→【https://lucene.apache.org/core/2_9_4/queryparsersyntax.html T4】)。从Kibana第6版开始，引入了KQL (Kibana查询语言),从最终用户的角度来看，KQL更加直观，并且不再需要学习显式的编程查询语法。</p><p id="fa28" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有一个简单的例子来说明区别</p><p id="0ce4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> KQL </strong>:</p><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/f6b56a6a8b93677fcdf0731086ea8d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KD8X6iJp4Otyb4dsMnvz2A.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf"> KQL示例——“与”运算符的用法</strong></figcaption></figure><p id="e817" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> Lucene </strong>:</p><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/d9a104c1e01e8e94b746b5a7fffba455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lrl57eg3GUjya7uUNHchIw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf"> Lucene示例——“AND”运算符的用法</strong></figcaption></figure><p id="6e52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">说明高层次差异的有用博客:</p><p id="29bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="https://www.bmc.com/blogs/elasticsearch-lucene-kibana-query-language/" rel="noopener ugc nofollow" target="_blank">https://www . BMC . com/blogs/elastic search-Lucene-ki Bana-query-language/</a></p><h1 id="21c8" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">Kibana搜索—使用Lucene语法的高级搜索</h1><h1 id="4f95" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">通配符/模糊性:</h1><ol class=""><li id="1dce" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld lj lk ll lm bi translated">可以只使用通配符或在开始/中间/结尾使用通配符来搜索字段</li><li id="c985" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">字段可以搜索模糊算子，该模糊算子本质上基于用户指定的距离搜索远离原始单词的单词</li></ol><h2 id="d62b" class="mw lu it bd kf mx my dn ly mz na dp mc kr nb nc mg kv nd ne mk kz nf ng mo nh bi translated">示例:</h2><ul class=""><li id="8ee3" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated"><strong class="ki iu">示例1:字段中的通配符</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/ce9ae2e10585dc9694958d9e74f5d160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rNELbrFsIJ0wfB8qeP9V9A.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">使用通配符搜索</strong></figcaption></figure><ul class=""><li id="78ee" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">示例2:搜索文本中字段的通配符</strong></li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/55763c58e168db53ed0d7965c154a0b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WrjaZQQMXwz1rlFmFC-xig.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">使用通配符与字符串匹配进行搜索</strong></figcaption></figure><ul class=""><li id="6b54" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated"><strong class="ki iu">例3:用模糊算子进行搜索</strong>。当实际信息中有拼写错误时很有用。例如:单词distributed被拼错为distributed。下面的模糊搜索将过滤掉拼写错误的单词</li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/f4383372ea09f298df9be72efdc7dd02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gcMH7FW1cYaWa3Jlb855kQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">距离为&gt; 0 </strong>的模糊搜索</figcaption></figure><p id="f99a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果模糊运算符距离设置为0，则我们无法找到拼写错误的单词</p><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/7652e17fde255038be158b30c2b0b027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4bj1tkVGDO7gFNu8zF2Hw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><strong class="bd kf">距离= 0的模糊搜索</strong></figcaption></figure><h1 id="a7b9" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">基巴纳搜索—使用DSL(领域特定语言)</h1><p id="4f29" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">使用DSL搜索是另一种可能的选择。下面是两个通过DSL进行搜索的流行示例:</p><h1 id="9412" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">使用火柴</h1><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nw"><img src="../Images/b1a8872a8f5f5c70211718c63f281dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZOiqzlaNsiwMdPe596pVw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">匹配示例:使用DSL搜索特定字段的文本</figcaption></figure><h1 id="b54a" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">使用多重匹配</h1><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/958ee0a6614e68bc5da7c4fa27e414eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgjRGQccCYbx6ngrLNQ7cw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">多匹配示例:使用DSL在多个字段中搜索文本</figcaption></figure><h1 id="72f4" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">共享日志:</h1><h1 id="8947" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">永久链接:</h1><ul class=""><li id="c6f4" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">用户可以通过URL共享搜索过滤器的当前实例。它可以是一个复杂的URL，也可以是一个简短的URL</li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/1f9bde2ef03a83a9787344cf83ec27ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X8Cta6DmTHXvTPtYUDJKiQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">通过短URL共享结果的选项</figcaption></figure><h1 id="2583" class="lt lu it bd kf lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">CSV报告:</h1><ul class=""><li id="f0ce" class="le lf it ki b kj mq kn mr kr ms kv mt kz mu ld mv lk ll lm bi translated">保存当前搜索</li><li id="3988" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">共享→生成CSV报告</li><li id="1f19" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">默认情况下，最大大小为10 MB。要将限制增加到10 MB以上，应更改服务器端属性(Kibana.yml上的“xpack . reporting . CSV . maxsize bytes ”)</li></ul><figure class="nj nk nl nm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/d8ae6778e5d98c4f8dfd3d72415aaaaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Npw2jnRjXmHSE4icNy69Iw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">生成CSV的选项—允许共享日志以进行问题报告</figcaption></figure></div></div>    
</body>
</html>