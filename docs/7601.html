<html>
<head>
<title>One story for effortlessly passing Kubernetes interview questions in 2023</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2023年轻松通过Kubernetes面试问题的一个故事</h1>
<blockquote>原文：<a href="https://itnext.io/one-story-for-effortlessly-passing-kubernetes-interview-questions-in-2023-f93e828cee9f?source=collection_archive---------0-----------------------#2022-11-20">https://itnext.io/one-story-for-effortlessly-passing-kubernetes-interview-questions-in-2023-f93e828cee9f?source=collection_archive---------0-----------------------#2022-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ea50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">欢迎来到我的Kubernetes博客。这些博客旨在为您提供有效的Kubernetes知识和工具，提高效率，同时减少压力和交付高质量解决方案的时间。点按“关注”按钮，以便在新故事发布时得到通知。</p><p id="987e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">让我们开始吧……</strong></p><p id="10e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如今，科技公司技术堆栈中最常用的工具之一是Kubernetes。自发布以来，Kubernetes获得了巨大的采用率，推动了其生态系统并增加了用户。2021年，CNCF(云计算原生计算基金会)做了一项<a class="ae km" href="https://www.cncf.io/announcements/2022/02/10/cncf-sees-record-kubernetes-and-container-adoption-in-2021-cloud-native-survey/" rel="noopener ugc nofollow" target="_blank">调查</a>，发现96%的组织(回答了调查)正在他们的技术堆栈中使用或评估Kubernetes。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/64df516591b69e79c92b5622d5188b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MqQQKZ9dcMNhxveG"/></div></div></figure><p id="74e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不言而喻，随着Kubernetes的采用，对技术人员的需求比以往任何时候都高。在这篇博客中，我们将看看面试官最常问的问题以及他们的答案。</p><p id="7e0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">那么我们来看看最常见的Kubernetes面试问题</strong></p><ul class=""><li id="06a7" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated">Kubernetes控制平面组件是什么及其用途？</li><li id="3635" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">什么是工作节点组件及其用途？</li><li id="1f70" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">init容器和sidecar容器有什么区别？</li><li id="4b64" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">部署和状态集之间有什么区别？</li><li id="3f29" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">列出不同的服务类型及其用途</li></ul><p id="5931" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">Kubernetes控制平面组件是什么及其用途？</strong></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ln"><img src="../Images/5b568d0ed97cdc8be2120fe0c7e64472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ZjI7SMPUUgI1Yk4"/></div></div></figure><p id="6184" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Kubernetes控制平面节点是Kubernetes集群操作背后的“大脑”。控制平面节点管理集群中的pod，以及参与集群的工作节点。</p><p id="3f2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Kubernetes控制平面由本地Kubernetes集群上的四个组件和Kubernetes云/混合集群上的五个组件组成。作为群集管理员，出于HA原因，我们希望生产环境中至少有三个控制平面节点。</p><ul class=""><li id="f2a8" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">Kube-api-server</strong>—Kubernetes API服务器验证和配置API对象的数据，包括pod、服务、复制控制器等。API服务器服务于REST操作，并提供集群共享状态的前端，所有其他组件通过它进行交互。</li><li id="c862" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">Kube-controller-manager</strong>—Kubernetes控制器管理器是一个守护程序，嵌入了Kubernetes附带的核心控制循环。在机器人和自动化应用中，控制回路是调节系统状态的非终止回路。Kubernetes目前附带的控制器示例有复制控制器、端点控制器、名称空间控制器和serviceaccounts控制器。</li><li id="c1ec" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">Kube-scheduler</strong>—Kubernetes调度程序是一个控制平面进程，它将pod分配给节点。调度器根据约束和可用资源确定哪些节点是调度队列中每个Pod的有效位置。然后，调度器对每个有效节点进行排序，并将pod绑定到合适的节点。可以有多个调度程序。</li><li id="8133" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir"> Etcd </strong> —开源、分布式、一致的键值存储，用于分布式系统或机器集群的共享配置、服务发现和调度协调。在Kubernetes控制面板中，Etcd用于存储和复制所有的Kubernetes集群状态。</li><li id="ae01" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">云控制器管理器</strong>(用于云提供商)——云控制器管理器提供了Kubernetes集群和云服务API之间的接口。云控制器管理器允许Kubernetes集群提供、监控和删除集群运行所需的云资源。</li></ul><p id="0010" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在大多数控制平面节点关闭的情况下，群集将无法为API请求提供服务，并且群集将不可用。尽管如果工作节点是健康的，pod将继续运行，但是将不能重新调度。</p><p id="ea29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是工作节点组件及其用途？</strong></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lo"><img src="../Images/2cebc397d1509c7d20ec3f2f8068ff05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sHhqJ9YMNgFszhgS"/></div></div></figure><p id="693f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">工作节点负责在集群中托管应用程序单元。虽然可以在控制平面节点中托管适用的pod，但出于安全原因，最佳做法是将pod安排在工作节点上。工作者节点持有允许它们对控制平面请求进行操作的组件。</p><ul class=""><li id="a916" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir"> Kube-proxy </strong> — kube-proxy负责维护节点上的网络规则。网络规则允许从集群内部和外部与您的pod进行网络通信。</li><li id="e50a" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir"> Kubelet </strong> — Kubelet是在每个节点上运行的代理。它负责根据提供的YAML规范创建pod，向API服务器发送pod的健康状态，并提供节点的状态信息，如网络、磁盘空间等。</li></ul><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lp"><img src="../Images/570399812ce83da304d62553ee27a322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F_DXsHSbyUaW4jeb"/></div></div></figure><p id="ff2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">init容器和sidecar容器有什么区别？</strong></p><p id="b626" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">pod最简单的设计是提供pod主要功能的单容器pod，但是如果您想扩展现有的功能而不改变主容器或增加其复杂性，该怎么办呢？</p><p id="2537" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，豆荚可以包裹一个或多个容器。有一种容器设计模式适用于不同的场景，但是这些设计模式的构建块是用init容器和sidecar容器实现的。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lq"><img src="../Images/0799e4b352ab941b49a941bc6e800873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s02fnkb_ALl4Rp0Q"/></div></div></figure><ul class=""><li id="fdcc" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">初始化容器</strong> —初始化容器总是在边车和主应用程序容器之前运行。init容器必须成功运行，然后其他容器才能运行。使用init容器的原因可能是为了多种选择。例如，它可以用来检查应用程序的依赖关系是否可用，设置主容器或副容器环境，等等。</li><li id="3d08" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">边车容器</strong> —边车容器与主应用程序容器平行运行。使用边车集装箱的原因可能有多种。例如，在Istio中，sidecar容器被用作管理主容器的传入流量的代理，它还可以用于日志记录、监控等目的。</li></ul><p id="75e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">初始化环境和拦截容器流量的Istio注入容器示例。</p><pre class="ko kp kq kr gt lr ls lt bn lu lv bi"><span id="7552" class="lw lx iq ls b be ly lz l ma mb">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>name: example<br/>spec:<br/># init container section where you can setup your init containers<br/>  initContainers:<br/>  - name: istio-init<br/>    image: istio/proxyv2:1.11.2<br/>  containers:<br/>  - name: hello<br/>    image: alpine<br/># our sidecar container which will intercept the pod network tarffic<br/>  - name: istio-proxy<br/>    image: istio/proxyv2:1.11.2<br/>    volumeMounts:<br/>    - mountPath: /etc/certs<br/>      name: certs<br/>  volumes:<br/>  - name: certs<br/>    secret:<br/>      secretName: istio-certs</span></pre><p id="044a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">部署和状态集之间有什么区别？</strong></p><p id="8165" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在面试中会遇到的最常见的问题之一。要回答这个问题，我们需要了解每种资源并理解它们的区别。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi mc"><img src="../Images/7e7751dcfb669214dce03b1c84c28c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iAdIX8ckzY1Opb4w"/></div></div></figure><ul class=""><li id="890e" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">部署</strong> —部署是在Kubernetes集群中部署应用程序的最简单和最常用的资源。部署通常用于无状态应用程序，这意味着驻留在pod上的数据将随pod一起删除。如果我们在部署中使用持久性存储，我们将对参与部署的所有pod拥有一个持久性卷声明。部署包装了一个ReplicaSet资源，允许他在版本之间轻松回滚。pod的命名约定设置如下:&lt;部署名称&gt; - &lt;复制集id&gt;-&lt;pod id&gt;。</li><li id="f107" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir"> Statefulset </strong> —随着社区要求能够在Kubernetes集群上托管有状态应用程序，这种资源在Kubernetes 1.9版本中变得稳定。Statefulset不使用Replicaset作为辅助控制器，而是自己管理豆荚。pod的命名约定如下:&lt;状态集名称&gt; -0，&lt;状态集名称&gt; -1。命名约定用于网络标识符和升级控制。Statefulset需要headless服务，为参与Statefulset的pod启用网络识别和DNS解析。Statefulset部署中的每个副本都有自己的持久性卷声明，因此每个pod都有自己的状态。</li></ul><p id="f617" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总之，经验法则是无状态应用程序应该与部署一起部署。部署包装了另一个名为Replicaset的控制器，以便于升级和回滚。Statefulset是出于社区需要而创建的，通常用于有状态的应用程序，如数据库，其中识别集群中的其他副本是至关重要的，并且升级应该优雅地完成。</p><h2 id="8d02" class="md lx iq bd me mf mg dn mh mi mj dp mk jy ml mm mn kc mo mp mq kg mr ms mt mu bi translated"><strong class="ak">列出不同的服务类型及其用途</strong></h2><p id="a94d" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">Kubernetes服务是由选择器选择的一组pod的逻辑抽象。该服务用于设置访问底层pod的策略。</p><p id="57cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的面试中，你可能会被问到以下四种最常见的服务类型。</p><ul class=""><li id="775c" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">cluster IP</strong>—cluster IP类型是默认的服务类型，也是Kubernetes生态系统中最常见的服务。ClusterIP服务具有内部群集IP，并且只能从群集内部访问。</li></ul><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi na"><img src="../Images/0bb1cb46b1b0aa42bf51b50fc2c92713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/0*sTFZ4U-rXAQ3G9m1"/></div></figure><ul class=""><li id="2fb4" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">负载平衡器</strong> —负载平衡器服务类型通过分配负载平衡器用于外部流量访问。为了使用这种类型的服务，需要一个能够分配负载平衡器的支持平台。负载平衡器将异步创建，当负载平衡器的信息可用并分配给服务时，它将在服务上可用。LoadBalancer服务类型也具有ClusterIP，并分配Nodeport来访问服务。</li></ul><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nb"><img src="../Images/fda34b5e003d20d8a48c3a434365b347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jLCqXP0qMwfTDzkb"/></div></div></figure><ul class=""><li id="da99" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">节点端口</strong> —当您想要将服务公开给来自集群的外部流量，并且服务类型负载平衡器不可用时，通常使用节点端口服务类型。使用NodePort服务类型，您将决定一个端口(在3000到32767的可接受范围内),集群中的每个节点都将公开该端口以接收流量并将其转发给服务。NodePort服务类型还具有ClusterIP，允许从集群内部访问该服务。</li></ul><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/8d33572d82c0b41612fc5b7003db3561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/0*o0_s5EMBVTS0Fb_K"/></div></figure><ul class=""><li id="686d" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">无头</strong> —当需要与pod直接通信时，使用无头服务类型。例如，在作为数据库的Statefulset应用程序中，辅助pod需要直接与主pod通信，以便在副本之间复制数据。无头服务允许DNS解析底层pod并通过pod名称访问它们。无头服务是没有clusterIP设置的服务。通过无头服务访问pod的例子如下:&lt; pod-name &gt;。&lt;服务名称&gt;。&lt;命名空间&gt; .svc.cluster.local</li></ul><p id="817a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">结论</strong></p><p id="6f80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Kubernetes是当今行业中使用最多的技术之一，作为一个这样的组织，它正在寻找在该主题上受过教育和有经验的人才。这个故事中回顾的主题是采访中最常被问到的一些问题。虽然这个故事回答了五个主要问题，但是这里写的信息在不同的问题场景中会有所帮助。</p><p id="bcf9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢，如果您有任何问题或需要任何帮助，您可以通过LinkedIn联系我。如果你想对以下评论中的任何主题进行深入的评论，请告诉我，或者直接发邮件给我。</p><p id="a6f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">***********************************************************************</p><p id="0e2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">链接:</p><p id="3bb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="http://www.devunet.com" rel="noopener ugc nofollow" target="_blank">www.devunet.com</a>(访问我公司网站)</p><p id="c84b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://www.linkedin.com/in/dekel-malul/<a class="ae km" href="https://www.linkedin.com/in/dekel-malul/" rel="noopener ugc nofollow" target="_blank">(在Linkedin上联系我)</a></p><p id="1224" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://www.linkedin.com/company/devunet/<a class="ae km" href="https://www.linkedin.com/company/devunet/" rel="noopener ugc nofollow" target="_blank"/>(在Linkedin上关注我们的未来视频)</p></div></div>    
</body>
</html>