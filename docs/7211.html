<html>
<head>
<title>Learning JWT security using KumuluzEE — The finances of a league of the environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用KumuluzEE学习JWT安全——环境联盟的财务</h1>
<blockquote>原文：<a href="https://itnext.io/learning-jwt-security-using-kumuluzee-the-finances-of-a-league-of-the-environment-2f541e99cc90?source=collection_archive---------1-----------------------#2022-07-17">https://itnext.io/learning-jwt-security-using-kumuluzee-the-finances-of-a-league-of-the-environment-2f541e99cc90?source=collection_archive---------1-----------------------#2022-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi jx"><img src="../Images/87593cf9e87ff2eae77518b512f44cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XGYKcQRYqlkiafewOZJbyw.png"/></div></div></figure></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><p id="d1bf" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">如今，我们越来越关注性能，同时，我们想知道系统如何快速可靠地通信。很多时候我们想发送信息，尽可能的保密和安全。敏感数据有时也必须通过网络公开传输，并在网络的另一端触发操作。大多数情况下，我们希望生成会导致数据突变的操作。在这些情况下，我们不仅要保护我们的数据。我们希望确保发送我们的数据所触发的操作是可信的。我们可以通过多种方式保护我们的数据。最常见的是，我们通过<a class="ae lq" href="https://www.cloudflare.com/learning/ssl/transport-layer-security-tls/" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu"/></a><strong class="kl iu"/>(传输层安全)安全连接发送数据。这将确保我们的数据通过网络得到加密。我们使用<strong class="kl iu">证书</strong>在双方之间创建信任关系并实现这一点。</p><p id="396d" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated"><span class="l li lj lk bm ll lm ln lo lp di">在</span>这篇文章中，我想讨论一下<a class="ae lq" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> JWT </strong> </a>标准，并进一步看看我们如何将<a class="ae lq" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> JWT </strong> </a>整合成一个通用的<strong class="kl iu">企业</strong>应用。既然这样，我们就来看看<a class="ae lq" href="https://ee.kumuluz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> KumuluzEE </strong> </a>。</p><p id="1b34" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">让我们来看看一些基本概念。<strong class="kl iu"> JWT </strong>或<strong class="kl iu"> JSON Web Token </strong>，或者更好的说法是<strong class="kl iu"> JavaScript </strong> <strong class="kl iu">对象表示法Web Token </strong>，是在<a class="ae lq" href="https://tools.ietf.org/html/rfc7519" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> RFC7519 </strong> </a>中定义的一个标准。像所有的<a class="ae lq" href="https://en.wikipedia.org/wiki/Request_for_Comments" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> RFC </strong> </a>(征求意见)标准一样，该标准已经由<a class="ae lq" href="https://www.ietf.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> IETF </strong> </a>(互联网工程任务组)定义、编写并发布。它可以有多种定义。一般来说，我们可以说<strong class="kl iu"> JWT </strong>是一种在双方之间传递<strong class="kl iu">债权</strong>的简洁、安全的形式。简化声明的一种方法是将其描述为包含信息的名称/值对。我们需要这些信息来保证我们互联网通信的几个重要方面。我们需要确保我们收到的信息在第一时间得到验证和信任。然后我们需要验证它。基本上就是这样。</p><p id="77fe" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">为了实现这个标准，我们可以使用几个框架来帮助我们实现一个Java企业应用。<a class="ae lq" href="https://spring.io/projects/spring-boot" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu"/></a><strong class="kl iu"/>被广泛使用。很多时候，它也以另一个名称包装在来自某些组织(如银行和其他金融组织)的专有软件中。对于我们的例子，我决定做一些不同的事情。代替<a class="ae lq" href="https://spring.io/projects/spring-boot" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> Spring Boot </strong> </a>，我们来看一个<a class="ae lq" href="https://ee.kumuluz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> KumuluzEE </strong> </a>的例子。关键是要确定JWT到底是什么以及它看起来像什么。Java企业应用程序基本上是可以部署在应用程序服务器中的应用程序，或者只是通过使用嵌入式服务器独立运行。例如，<a class="ae lq" href="https://spring.io/projects/spring-boot" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">【Spring Boot】</strong></a><strong class="kl iu"/>应用程序运行在嵌入式<a class="ae lq" href="http://tomcat.apache.org/" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">Tomcat</strong></a><strong class="kl iu"/>服务器上。在本文中，我们的重点将放在<a class="ae lq" href="https://ee.kumuluz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> KumuluzEE </strong> </a>上。就像<a class="ae lq" href="https://spring.io/projects/spring-boot" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">Spring Boot</strong></a><strong class="kl iu"/>它也包含一个嵌入式服务器。只不过在这种情况下它被称为<a class="ae lq" href="https://www.eclipse.org/jetty/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">突堤</strong> </a>。这与<a class="ae lq" href="https://www.eclipse.org/jetty/documentation/current/framework-weld.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">焊缝</strong> </a>结合使用，以提供<a class="ae lq" href="https://weld.cdi-spec.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> CDI </strong> </a>(上下文依赖注入)。所有的<a class="ae lq" href="https://www.oracle.com/java/technologies/java-ee-glance.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> Java EE </strong> </a>和<a class="ae lq" href="https://jakarta.ee/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> Jakarta EE </strong> </a>技术标准都兼容这个框架。</p><h1 id="3ee3" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">1.例子</h1><p id="b0dc" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">为了举例说明《T2》《JWT》《T3》的基本形式是如何运作的，我必须想出一种方法来展示它。关注安全性的典型例子是银行。然而，制作一个完整的银行应用程序来展示<strong class="kl iu"> JWT </strong>是如何工作的将是浪费时间，并且可能会涉及太多的概念。相反，我做的是一个非常简单的银行系统。我们主要关心的是显示数据如何通过网络流动，以及用户如何访问我们应用程序的某些区域。我也不打算讨论TLS或者我们如何通过网络发送加密信息。我们将继续关注最纯粹的JWT。</p><p id="c02b" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">你的案例是一个捍卫自然和环境的团体所使用的银行系统。这只是展示JWT如何工作的一种有趣的方式。这个自然联盟的主角是露西，她正在成为我所有文章中的常见角色。</p><h1 id="f925" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">2.体系结构</h1><p id="7fe8" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">在我们开始之前，让我们先描绘一下我们正在运行的应用程序。这是一个非常简单的应用程序，但绘制它仍然是一件好事:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/5d0139b5b5aee992574dc652cd9051f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*H_LfZrerJ04MbSHlFR6Hkw.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">基本请求和响应</figcaption></figure><p id="4720" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">这如此简单的原因是因为JWT在每个请求上都得到了检查，并且每个请求都根据公钥得到了验证，所以我们知道只要我们在每个请求上都发送了正确的令牌，我们就能够通过。<strong class="kl iu"/>可以与<a class="ae lq" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> OAuth2 </strong> </a> <strong class="kl iu">，</strong><a class="ae lq" href="https://www.okta.com/products/single-sign-on/" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">Okta SSO</strong></a><strong class="kl iu">，</strong>或任何其他<strong class="kl iu">授权</strong>机制集成。在这种情况下，我们所做的是建立<strong class="kl iu">认证和授权。</strong>在我们的应用程序中，我们将使用<strong class="kl iu"> JWT </strong>，并通过它使用签名来认证我们的消息。不过，我们不会登录到应用程序。相反，我们将在<strong class="kl iu">认证</strong>成功后<strong class="kl iu">授权</strong>用户使用我们的应用。在这一点上，很容易看出<strong class="kl iu"> JWT </strong>的核心实际上是整个应用程序的很小一部分。尽管如此，还是需要添加一些功能。这些就是我们需要的<strong class="kl iu"> <em class="mz">资源</em> </strong> <em class="mz"> </em>:</p><ul class=""><li id="d81a" class="na nb it kl b km kn kq kr ku nc ky nd lc ne lg nf ng nh ni bi translated">平衡系统</li><li id="bcb3" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated">信用制度</li></ul><p id="7012" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">这么说吧，我们的基本系统只登记货币和信用请求。本质上它只会累加值。我们还假设一些人能够获得信贷，而另一些人则不能。一些人将能够储存金钱，其他人将能够获得信贷。</p><h1 id="32a0" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">3.选择技术</h1><p id="1f6a" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated"><span class="l li lj lk bm ll lm ln lo lp di">正如简介中提到的</span>，我们将使用<a class="ae lq" href="https://ee.kumuluz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> KumuluzEE </strong> </a>作为我们的企业应用程序框架，我们将实现一个超基础的应用程序，就像我们可以看到基础的<a class="ae lq" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> JWT </strong> </a>术语和概念一样。</p><p id="63dc" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">确保拥有正确的Java版本。在这个阶段，我们需要安装最少的Java 17 SDK。我们将需要<a class="ae lq" href="https://maven.apache.org/" rel="noopener ugc nofollow" target="_blank"> maven </a>、<a class="ae lq" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> git </a>、一个类似<a class="ae lq" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"> Intellij </a>的Java兼容IDE，以及某种外壳。</p><h1 id="fabe" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">4.设置</h1><p id="7868" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated"><span class="l li lj lk bm ll lm ln lo lp di">按照</span>的顺序开始我们的应用程序，我们有几个<a class="ae lq" href="https://ee.kumuluz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> KumuluzEE </strong> </a>的依赖项。这主要是因为<a class="ae lq" href="https://ee.kumuluz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> KumuluzEE </strong> </a>，就像<a class="ae lq" href="https://spring.io/projects/spring-boot" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">Spring Boot</strong></a><strong class="kl iu"/>需要几个依赖关系。让我们简单地看一下pom文件:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi no"><img src="../Images/f61dbdcd26a79a0a7e31842ede9d157f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pJxLNgKBZmia5ShQS4aFQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">pom依赖性</figcaption></figure><p id="f4a6" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">让我们简单讨论几个依赖项。当你阅读这篇文章时，请从头到尾阅读我们的<strong class="kl iu"> pom.xml </strong>文件。这对于理解下面的解释很重要。</p><p id="6b4b" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">我们需要一个依赖包来使我们的应用程序工作。幸运的是，KumuluzEE为我们提供了<strong class="kl iu"> Microprofile </strong>库，其中包含启动这个应用程序的基本标准包。这些都包含在KumuluzEE-Microprofile库中。为了能够用我们需要的所有<strong class="kl iu"> JWT </strong>参数配置我们的应用程序，我们必须向它添加一个<a class="ae lq" href="https://projects.eclipse.org/projects/technology.microprofile" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">微配置文件</strong> </a>库。同时，我们需要一个<strong class="kl iu"> JSON处理库</strong>。这将是<a class="ae lq" href="https://johnzon.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">约翰逊核心</strong> </a>所做的事情。我们当然需要KumuluzEE的核心来工作。<a class="ae lq" href="https://www.eclipse.org/jetty/" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">Jetty</strong></a><strong class="kl iu"/>是运行<strong class="kl iu"> KumuluzEE </strong>框架的底层服务器。这就是为什么我们在依赖关系中需要它。考虑到我们需要<a class="ae lq" href="https://weld.cdi-spec.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> CDI </strong> </a>，我们还需要一个支持它的库。为了启用我们的<strong class="kl iu"> REST </strong>端点，我们需要<strong class="kl iu"> KumuluzEE </strong>的REST库。为了获得我们的API，我们需要一个<strong class="kl iu"> Geronimo </strong>库。这将确保我们有一个<a class="ae lq" href="https://www.jcp.org/en/jsr/detail?id=374" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">JSR-374</strong></a><strong class="kl iu"/>的实现可用。我们还需要解释我们的<strong class="kl iu"> JWT </strong>和它的<strong class="kl iu"> JSON </strong>格式的内容。</p><p id="f453" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated"><a class="ae lq" href="https://projectlombok.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">龙目</strong> </a>本身并不真的需要。它让一切都变得美丽而闪亮！<a class="ae lq" href="http://logback.qos.ch/setup.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">日志回溯</strong> </a>也很重要，这样我们可以更好地解释日志并理解我们的结果。</p><p id="2df0" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在让我们看看我们的<strong class="kl iu"> <em class="mz">资源</em> </strong>文件夹。</p><p id="65d7" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">首先，让我们先了解我们期望在这个文件夹中找到什么。我们需要用与JWT、Logback相关的东西来配置我们的应用程序，最后，我们需要说一些关于我们将要创建的beans的事情。</p><p id="1b32" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">让我们看看最简单的文件。beans.xml可以在<strong class="kl iu"> META-INF </strong>中找到:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi np"><img src="../Images/bca8f13c7477acf97bd34684bc68a4a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PkFuENBMsAlbYNG-QX_UVg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">beans.xml</figcaption></figure><p id="90e2" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这只是一个典型的，你现在可能会想，有点旧的文件。此时，我们的想法只是让KumuluzEE运行起来。我们确实有一个<strong class="kl iu"> <em class="mz">排除</em> </strong>动作。这告诉<strong class="kl iu"> Weld </strong>在扫描<strong class="kl iu">bean</strong>动作时不要考虑类<strong class="kl iu">账户</strong>。这一点很重要，因为对于我们正在使用的实现，<strong class="kl iu"> Weld </strong>基本上会将每个具有空构造函数的类视为一个bean。稍后我们将会看到为什么我们不希望<strong class="kl iu">帐户</strong>被认为是一个bean。现在让我们记住，我们是在<strong class="kl iu">请求</strong>范围下发出请求的。这是合乎逻辑的，因为每个请求可以有不同的用户。</p><p id="7378" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在我们来看看“<code class="fe nq nr ns nt b"><strong class="kl iu">logback</strong></code><strong class="kl iu">”</strong>是如何实现的。也可以在<strong class="kl iu"> META-INF </strong>中找到:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi nu"><img src="../Images/dc2dee4ee73a6990089d7cffd85499f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x8wyNg5Yu7I4K4dil-UQvQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt"/><code class="fe nq nr ns nt b"><strong class="bd lt">logback.xml</strong></code><strong class="bd lt"/></figcaption></figure><p id="a373" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这只是我们日志的一个非常简单的配置。</p><p id="fc98" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">最后，也许是我们应用程序中最重要的文件。这就是<code class="fe nq nr ns nt b"><strong class="kl iu">config-template</strong></code>。此时，需要注意的是，我在这个项目中创建的一些文件是模板结构的一部分。稍后我会对此进行更多的解释。这个模板文件应该被转换成一个config.yml文件，该文件将被<a class="ae lq" href="https://projects.eclipse.org/projects/technology.microprofile" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu">微文件</strong> </a>读取。该文件位于资源的根目录下:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/6366550ee9f74f5321be24de59b47a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*hGJmEbsjRAdBqCVLwY4dWg.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt"/><code class="fe nq nr ns nt b"><strong class="bd lt">config-template</strong></code><strong class="bd lt"/></figcaption></figure><p id="76e6" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们将在后面看到所有这些属性的确切含义。所有这些都是不言自明的。<code class="fe nq nr ns nt b"><strong class="kl iu">publicKey</strong></code> <strong class="kl iu"> </strong>和<code class="fe nq nr ns nt b"><strong class="kl iu">issuer</strong></code> <strong class="kl iu"> </strong>都是将被替换的参数。我们稍后将对此进行探讨。我们的<strong class="kl iu"> bash </strong>脚本将确保它们被替换。</p><p id="7237" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们几乎准备好开始编码了，但是首先，让我们看看我们的JWT令牌结构。</p><h1 id="9045" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">5.实践代码</h1><p id="9658" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">让我们做一个非常小的应用程序。这一部分将解释如何让我们的应用程序与JWT一起工作。我们想知道的是，我们是否可以指定用户访问我们的一些<strong class="kl iu"> REST </strong>方法，而不是其他方法。</p><p id="cb9a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">开始研究这段代码的方法之一是先看看我们的普通JWT令牌。以下是我们的管理示例:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi nw"><img src="../Images/81a831d8cc7ace7620097a5da7d0f459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pjy4ydu3G0_82a45Fppv8Q.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt"/><code class="fe nq nr ns nt b"><strong class="bd lt">jwt-token-admin.json</strong></code><strong class="bd lt"/></figcaption></figure><p id="f571" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们的<strong class="kl iu"> JSON </strong>中的每一个名字都被称为声明。在我们的示例中，我们看到一些<strong class="kl iu">保留的</strong>声明:</p><ul class=""><li id="ea75" class="na nb it kl b km kn kq kr ku nc ky nd lc ne lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">iss</strong></code><strong class="kl iu"/>—这是令牌的发行者。我们可以为此任意选择一个值。该参数的值必须与我们之前看到的<strong class="kl iu"> config.yml </strong>中要替换的<strong class="kl iu">发行者</strong>变量相匹配。</li><li id="57c2" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">jti</strong></code><strong class="kl iu"/>—这是令牌的唯一标识符。例如，我们可以使用这种声明来防止令牌被使用两次或更多次。</li><li id="4c78" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">sub</strong></code><strong class="kl iu"/>—这是令牌的主题。可以是用户，也可以是我们喜欢的任何东西。重要的是要记住，这也可以用作标识符、键、命名或我们想要的任何东西。</li><li id="230e" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">upn</strong></code><strong class="kl iu"/>—用户主体名称。这用于标识用户正在使用的主体。</li><li id="25ef" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">groups</strong></code><strong class="kl iu"/>—这是当前用户所属的组的数组。本质上，这将决定带有这个令牌的请求能做什么。</li></ul><p id="59ee" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">在我们的令牌中，我们接着看到一些<strong class="kl iu">自定义</strong>声明。我们可以像使用<strong class="kl iu">保留的</strong>声明一样使用它</p><ul class=""><li id="9e42" class="na nb it kl b km kn kq kr ku nc ky nd lc ne lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">user_id</strong></code><strong class="kl iu"/>—我们将用它来设置用户id。</li><li id="be0e" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">access</strong></code><strong class="kl iu"/>—我们将确定用户的访问级别。</li><li id="d693" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">name</strong></code><strong class="kl iu"/>—用户的名字。</li></ul><h1 id="8d62" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">6.实践代码</h1><p id="068f" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">让我们回顾一下到目前为止我们所知道的。我们知道我们将与具有我们已经确定的结构的令牌进行通信。此外，我们已经设置了应用程序的配置，即<code class="fe nq nr ns nt b"><strong class="kl iu">logback</strong></code>配置，最后，我们为企业bean查找设置了一个定制配置。</p><p id="1ee4" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">再来看套餐<strong class="kl iu">型号</strong>。在这里，我们将找到3个类。这些类基本上只是表示帐户的集合以及客户和帐户之间的表示。这样我们可以从看类<strong class="kl iu"><em class="mz">Client.java</em></strong>开始:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/8787fbf6ffa076b5bdb07e027f0a3fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*4m_bX24-ooi87zB9ZkEp-A.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">Client.java</strong></figcaption></figure><p id="18bd" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">第一个模型类是我们客户的代表。我们的委托人只有一个名字。这是由<code class="fe nq nr ns nt b"><strong class="kl iu">jwt</strong></code><strong class="kl iu"/>属性<strong class="kl iu">名称表示的用户名。</strong></p><p id="59f3" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">再进一步，我们有<strong class="kl iu"><em class="mz">Account.java</em></strong>:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/52c445e12e85e545982ec44233679597.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LUr6z-YYe_niRonY8JY6dw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">Account.java</strong></figcaption></figure><p id="090e" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">在这个班里，我们基本上设置了一个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">accountNumber</em></strong></code>，一个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">client</em></strong></code>，一个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">currentValue</em></strong></code> <strong class="kl iu"> <em class="mz"> </em> </strong>，最后一个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">creditValue</em></strong></code>。请注意，我们将所有值默认为0。我们也在用<strong class="kl iu"> <em class="mz"> BigDecimal </em> </strong>，纯粹是因为我们在和钱打交道。钱必须准确，不能遭受系统四舍五入或四舍五入。换句话说，举例来说，这意味着像<strong class="kl iu">0.000000000000000000000000000000000000001</strong>这样的数字必须始终保持该数字。此外，我们希望为我们的客户增值。这就是方法<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">addCurrentValue</em></strong></code>存在的地方。出于同样的原因，我们也会用<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">addCreditValue</em></strong></code> <em class="mz">来充值。</em></p><p id="d3d5" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">最后，在我们的数据设置的最后一部分，我们遇到了类<strong class="kl iu"><em class="mz"/></strong>:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi nz"><img src="../Images/e48c94357c29a8af723b618e130f4732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FaM_MDHDPt0URxc_IX5vFA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">Accounts.java</strong></figcaption></figure><p id="ff73" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这实际上只是我们所有账户的集合。我们将使用它的<strong class="kl iu"> map </strong>内容来模拟数据库的行为。</p><p id="a49a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在我们来看看<strong class="kl iu"> <em class="mz">控制器</em> </strong>包。这是我们创建运行数据模型的应用程序的地方。首先，我们来看看类<strong class="kl iu"> <em class="mz"> BankApplication </em> </strong>:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi oa"><img src="../Images/a9c5a6deabb9bbcdd5f1639a502dff26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhYlSn5grw3OF08-S8Oukw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">BankApplication.java</strong></figcaption></figure><p id="0084" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">就此，我们要说三件重要的事情。使用<strong class="kl iu"> <em class="mz"> LoginConfig </em> </strong>注释，我们根据<strong class="kl iu">微文件</strong>定义它来使用和理解<strong class="kl iu"> JWT </strong>令牌。<strong class="kl iu">T22【应用路径】T23</strong>定义了应用的根。这是应用程序URL的起点。在我们的例子中，它将是<a class="ae lq" href="http://HTTP://localhost:8080" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">HTTP://localhost:8080</strong></a><strong class="kl iu">。</strong>最后，<strong class="kl iu"> <em class="mz">声明角色</em> </strong>定义了我们的应用程序将要使用和接受的角色。在这种情况下，角色和组是可以互换的术语。</p><p id="4264" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">为了使注入有效地工作，我们创建了一个特定的注释来标识帐户映射:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ob"><img src="../Images/88a4934522153c0ff78ac3c190b6ba65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwkV7kDsJXhmvqLLHqYKwA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">AccountsProduct.java</strong></figcaption></figure><p id="206e" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">接下来，我们创建一个缓存对象工厂:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/084eaea997148c7af96bbcd1b259e02f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-A0UIPvkgsnoc2XbMT2ShQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">AccountsFactory.java</strong></figcaption></figure><p id="ed16" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这个工厂是我们禁用查找的原因，专门针对<strong class="kl iu"><em class="mz">【Accounts.java】</em></strong>。我们自己创建聚合器实例，而不是让查找过程创建bean。使用<strong class="kl iu"> <em class="mz">产生</em> </strong>注释，允许我们创建bean。使用我们的自定义注释，<strong class="kl iu"><em class="mz">accounts product</em></strong>，我们使这个bean的使用更加具体。最后，通过使用<strong class="kl iu"> <em class="mz">应用范围</em> </strong>，我们将其范围定义为<strong class="kl iu">应用范围</strong>。换句话说，帐户聚合bean将在整个应用程序中表现为一个<a class="ae lq" href="https://www.tutorialspoint.com/design_pattern/singleton_pattern.htm" rel="noopener ugc nofollow" target="_blank">单例</a>对象。</p><p id="3496" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">createResponse</em></strong></code><strong class="kl iu"><em class="mz">”</em></strong><em class="mz"/>只是一个创建JSON响应的通用方法。</p><p id="d1b2" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们现在需要的是两个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">Resources</em></strong></code><strong class="kl iu"><em class="mz"/></strong>。这与春季的<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">Controllers</em></strong></code><strong class="kl iu"><em class="mz"/></strong>基本相同。这是一个不同的名字，但它有完全相同的用法。</p><p id="3eff" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">让我们来看看AccountsResource.java的<strong class="kl iu"><em class="mz"/></strong>班:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/071893d9af8902b651a99ec7fda9ada5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BB5meqCi4fYie_QYvaJiKQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">AccountsResource.java</strong></figcaption></figure><p id="f92c" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">花点时间更详细地看看这个类。<strong class="kl iu"> <em class="mz"> Path </em> </strong>注释定义了如何从根节点到达这个资源。记住我们使用的是“<strong class="kl iu">/</strong>作为词根。在这种情况下，“<strong class="kl iu">accounts”</strong><em class="mz"/>是我们对该资源的根访问点。我们所有的资源，在我们的例子中只有两个在运行，作用域为<strong class="kl iu"><em class="mz">request resource</em></strong>。带注释<strong class="kl iu">的<em class="mz">产生</em>的</strong>确定对所有请求的所有响应，无论其类型如何，都将采用<strong class="kl iu"> JSON </strong>格式化消息的形式。</p><p id="1af3" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">要注入我们的聚合器，我们只需使用<strong class="kl iu"> <em class="mz">注入</em> </strong>注释和<strong class="kl iu"> <em class="mz">帐户产品</em> </strong>注释的组合:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/9897d42f11104aead8732180f27a8c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*Ysn3LWGKvY1C7PoHJKqFZw.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">账目注入</strong></figcaption></figure><p id="86dc" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这符合我们在工厂中定义的内容。</p><p id="6d65" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">此外，我们还注入了两个重要的安全元素。一个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">principal</em></strong></code>和一个<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">jsonWebToken</em></strong></code>:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi od"><img src="../Images/2a15e9c190141c664f9d26c87c571161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vzcm0bHyjVPE90WagbTy_g.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">委托人和JsonWebToken </strong></figcaption></figure><p id="956c" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated"><strong class="kl iu"> <em class="mz"> JsonWebToken </em> </strong>和<strong class="kl iu"> <em class="mz"> Principal </em> </strong>将是相同的，我们将在我们的日志中看到这一点。</p><p id="2d58" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">在我们的资源中，我们总是可以从带有特定令牌的请求中注入声明:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi oe"><img src="../Images/5ba7732af051d1e571aea0fd74717486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EH5kY4lzoZa0XuKxDVv2FQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">索赔注入</figcaption></figure><p id="4ba1" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这是用<strong class="kl iu"> <em class="mz">注入</em> </strong>和<strong class="kl iu"> <em class="mz">声明</em> </strong>注释的组合来完成的。放置在<strong class="kl iu"> <em class="mz">声明</em> </strong>注释下的名称定义了我们想要注入哪个声明。我们必须小心定义参数的类型。在我们的例子中，r我们只需要<strong class="kl iu"> <em class="mz"> JsonString </em> </strong>和<strong class="kl iu"> <em class="mz"> JsonNumber </em> </strong>类型。</p><p id="29e4" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">首先，让我们看看如何创建<strong class="kl iu">帐户</strong>和<strong class="kl iu">用户</strong>:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi of"><img src="../Images/f45cc4011cad5edae6f45c3fbcfd3ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cUU1Ac7iAE6db5I3VfEpNA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">创建账户和用户</strong></figcaption></figure><p id="3af8" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这里的目的是能够分离方法并给它们不同的权限。在我们的例子中，他们都只是创建一个帐户，但是需要注意的是，只有角色为<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">user</em></strong></code>的用户才能使用<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">createUser</em></strong></code>方法。同样，只有角色为<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">client</em></strong></code> <strong class="kl iu"> <em class="mz"> </em> </strong>和<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">credit</em></strong></code>的用户才能访问方法<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">createAccount</em></strong></code>。</p><p id="3f3c" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在让我们详细看看这个资源的<strong class="kl iu"> <em class="mz"> PUT </em> </strong> request方法:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi og"><img src="../Images/8d05415885b3b362232ac9edda7c6a8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Oi2PjDavO3bgaReSKxplw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">兑现</strong></figcaption></figure><p id="928c" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们知道注释<strong class="kl iu"> <em class="mz"> PUT </em> </strong>表明这个方法只能被类型<strong class="kl iu"> PUT </strong>的请求访问。注解<strong class="kl iu"> <em class="mz">路径</em> </strong>然后告诉<strong class="kl iu"> Jetty </strong>这个方法的路径是一个值。这也被称为<strong class="kl iu">路径参数</strong>。最后，我们可以定义这个方法只允许角色为<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">admin</em></strong></code>或<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">client</em></strong></code>的用户使用。然后通过使用<strong class="kl iu"> <em class="mz"> PathParam </em> </strong>将输入值传递给我们的<strong class="kl iu"> <em class="mz">长值</em> </strong>变量。</p><p id="8877" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">如果我们不定义任何角色，那么任何拥有正确令牌的用户都可以访问这些方法。</p><p id="22a1" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated"><strong class="kl iu"><em class="mz"/></strong>也是以同样的方式实现的:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/db8ac482e2b54a4021cb63b37796d2dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRIJu59raNS22PjcmGAcDg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">CreditResource.java</strong></figcaption></figure><p id="dab3" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">唯一不同的是，我们现在使用的是<strong class="kl iu"> <em class="mz"> admin </em> </strong>和<strong class="kl iu"/>角色和<strong class="kl iu"> <em class="mz"> client </em> </strong>角色，而不是使用角色<strong class="kl iu"> <em class="mz"> admin </em> </strong>和<strong class="kl iu"> <em class="mz">角色。另外，请注意，永远不会在此资源中创建用户帐户。这只能通过账户的<code class="fe nq nr ns nt b"><strong class="kl iu">resource</strong></code>来实现。</em></strong></p><p id="fc30" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在我们知道了代码是如何实现的，让我们首先回顾一下我们在<strong class="kl iu"> REST </strong>服务中提供了哪些方法。</p><h1 id="3de9" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">7.应用程序使用</h1><p id="54c6" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">让我们检查正在使用的服务列表:</p><figure class="jy jz ka kb gt kc"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="ak">所有端点</strong></figcaption></figure><h1 id="0f81" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">8.生成测试环境</h1><p id="28df" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">我在根文件夹中创建了一个bash文件。这个文件叫做<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">setupCertificates.sh”</em></strong></code>。让我们深入了解一下它的功能:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/c1c7d06193cf54bb1790030c0c2bcf2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gCKY4DmriqkxYrDPonoiVQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">环境生成</strong></figcaption></figure><p id="698a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">请按照我解释的文件做。这一点很重要，这样我们才能确切地了解它在做什么。我们首先以PEM格式创建私钥和公钥。然后，我们将私钥用于我们的runnable " <code class="fe nq nr ns nt b"><strong class="kl iu">your-finance-jwt-generator.jar</strong></code> <strong class="kl iu">"。</strong>这是我们的runnable jar，允许快速创建令牌。发行人以后不能更改。最后，它创建一个令牌。稍后我们将看到如何读取这个令牌。该令牌包含3个额外的<strong class="kl iu">标头</strong>声明。这些是“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">kid</em></strong></code><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">typ</em></strong></code><strong class="kl iu"><em class="mz">”</em></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">alg</em></strong></code><strong class="kl iu"><em class="mz"/></strong>。它遵循以下格式:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/299884487a1ba9b74d79f0178092f77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*y9f71Clda48_0a6JCnD5wg.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">JWT的页眉</strong></figcaption></figure><p id="3f85" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">让我们更仔细地看看这些说法</p><ul class=""><li id="09e9" class="na nb it kl b km kn kq kr ku nc ky nd lc ne lg nf ng nh ni bi translated"><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">kid</em></strong></code><strong class="kl iu"><em class="mz">——</em></strong><em class="mz">W</em>works作为提示认领。它表明我们正在使用哪种算法。</li><li id="5639" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">typ</em></strong></code><strong class="kl iu"><em class="mz">——</em></strong>用于声明<a class="ae lq" href="https://tools.ietf.org/html/rfc7519#ref-IANA.MediaTypes" rel="noopener ugc nofollow" target="_blank"> IANA媒体类型</a>。有三个选项<strong class="kl iu">JWT</strong>(JSON Web token)<strong class="kl iu">JWE</strong>(JSON Web加密)<strong class="kl iu"> JWA </strong> (JSON Web算法)。这些类型与我们的实验无关。我们只会看到我们的令牌没有被很好地加密，并且很容易被解密。我们还将看到，虽然我们可以解密令牌，但我们不能轻易篡改来执行其他操作。</li><li id="b118" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu"><em class="mz">"</em></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">alg</em></strong></code><strong class="kl iu"><em class="mz">"</em></strong>—这就是我们如何定义我们想要使用的签名类型。签名可以被认为是一种加密操作，它将确保原始令牌没有被更改并且是可信的。在我们的例子中，我们使用<strong class="kl iu"> RS256 </strong>或者称为<strong class="kl iu"> RSA签名和SHA-256。</strong></li></ul><p id="27a9" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">有了我们的<strong class="kl iu">公共</strong>密钥，我们终于可以用它来改变我们的模板了。新的<strong class="kl iu"> config.yml </strong>文件应该如下所示:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/0b12cda6ee0194c3ad51bf30c6a1081b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oCmYcZbBdF_6nrlQL7M9Vw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt"> config.yml </strong></figcaption></figure><p id="d09b" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">第二步是创建四个文件。对于目录“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">jwt-plain-tokens</em></strong></code><strong class="kl iu"><em class="mz">”</em></strong>中的每个普通令牌，我们将创建四个命令。第一个命令是创建可以有效地使用其帐户进行操作的用户。这些用户具有配置文件“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">admin”</em></strong></code>”、“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">client”</em></strong></code>”和“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">credit”</em></strong></code>”、“T34”。让我们运行文件<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">createAccount.sh</em></strong></code><strong class="kl iu"><em class="mz"/></strong>，以便创建它们。第二个命令将创建尚未拥有任何权限的其余用户。这是文件<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">createUser.sh</em></strong></code><strong class="kl iu"><em class="mz"/></strong>。让我们运行它。现在我们将看到所有用户最终都被创建了。现在让我们来看看关于事务的细节，并看看剩下的两个命令。一个给“<code class="fe nq nr ns nt b"><strong class="kl iu">cashin</strong></code>”<strong class="kl iu">”</strong>，另一个要更多积分。第一个生成的文件是“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">sendMoney.sh</em></strong></code><strong class="kl iu"><em class="mz">”</em></strong>bash脚本。在这里我们可以找到所有对<code class="fe nq nr ns nt b"><strong class="kl iu">cashin</strong></code> <strong class="kl iu">的请求。</strong>在这个文件中，您会发现一个curl请求，向每个用户发送随机的货币数量。让我们看看<strong class="kl iu">管理</strong>案例:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/3fce85dd4970288548d59c17b7ce3a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TsQiuzvz_oNnhnvWDn9L0Q.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt"> sendMoney.sh摘录</strong></figcaption></figure><p id="2d21" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">同样的用户也有分配给他们的信用请求:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ny"><img src="../Images/6037fc4ca8182596b1a3fae9b4d9a1b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JhV6xiPCsvQfsRvSSJfZ6Q.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt"> askCredit.sh摘录</strong></figcaption></figure><p id="bd3e" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">所有我们的角色都是自然联盟的一部分。本质上只是一些人成为这个银行系统的一部分。在这种情况下，他们是在保护环境。这群人做了什么或者他们在故事中的位置与文章并不相关，但就上下文而言，他们参与了保护环境和减缓气候变化影响的行动。我们的一些角色可以做任何事情，一些不能做任何事情，还有一些只能做“T0”或者只是“T1”。还要注意，我正在用<strong class="kl iu"> <em class="mz">混淆</em> </strong>敏感信息。这些令牌通常不应被共享或在特定的<strong class="kl iu"> URL </strong>中可见。是的，它们总是可以通过浏览器开发者控制台获得，但无论如何是为了保护一些正在进行的请求。这是一个被称为“<code class="fe nq nr ns nt b"><strong class="kl iu">security-per-obscurity</strong></code><strong class="kl iu">”</strong>的概念，虽然它在技术上不能阻止用户意识到令牌正在被使用，但它确实起到了<strong class="kl iu">威慑</strong>的作用。</p><p id="c7f9" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">在这两种方法中，当我们存款或申请信贷时，请注意，对于每个请求，我们发送的是1到500之间的随机数。</p><p id="efe0" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们现在差不多准备好开始我们的应用程序了，但是首先，让我们深入一点理论。</p><h1 id="0b27" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">9.JWT代币是如何制作的</h1><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ok"><img src="../Images/8e8537b81b264402cc1fdf1d28333044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X0ytUsMV3T10S5_XKO212w.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">JWT令牌生成概述</figcaption></figure><p id="ef87" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi lh translated">现在我们已经生成了令牌，让我们来看看其中的一个。我将向你们展示一个模糊的令牌，我们将用它来理解这个。</p><p id="f117" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这是我们的信物:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="8d8e" class="op ls it nt b gy oq or l os ot"><strong class="nt iu">FAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKE</strong>.FAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETO.<strong class="nt iu">FAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKENFAKETOKEN</strong></span></pre><p id="6f8a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这里需要注意的是，我们的令牌分为三个部分。</p><ul class=""><li id="c76d" class="na nb it kl b km kn kq kr ku nc ky nd lc ne lg nf ng nh ni bi translated"><strong class="kl iu">头</strong> —这是一个Base64编码的<strong class="kl iu"> JSON </strong>配置头，就像我们上面讨论的一样。</li><li id="8d4b" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated"><strong class="kl iu">有效载荷</strong> —这是一个Base64编码的<strong class="kl iu"> JSON </strong>有效载荷。这是我们定义<strong class="kl iu">保留</strong>和<strong class="kl iu">自定义</strong>声明的地方。我们还可以在这里定义<strong class="kl iu">私有</strong>和<strong class="kl iu">公共</strong>声明。它们都属于海关索赔。简单地说，我们可以对这两个声明做我们想做的事情。然而，公共声明是指在<a class="ae lq" href="https://www.iana.org/assignments/jwt/jwt.xhtml" rel="noopener ugc nofollow" target="_blank"> IANA JSON Web令牌注册中心</a>中定义的声明。为了避免与注册中心冲突，我们以某种方式命名我们的令牌是很重要的。<strong class="kl iu">公开的</strong>权利要求也可以被定义为标准可选的。私人声明没有标准，由我们来定义。</li><li id="0e10" class="na nb it kl b km nj kq nk ku nl ky nm lc nn lg nf ng nh ni bi translated">签名——这是我们可以有点创意的地方。签名是<strong class="kl iu">报头</strong>和<strong class="kl iu">有效载荷</strong>的加密组合。我们决定我们想要使用的算法，令牌的这一位将基本上决定我们发送的消息是否可信。该组合是唯一的，我们的服务器将使用我们创建的“<code class="fe nq nr ns nt b"><strong class="kl iu">public-key”</strong></code>”来确定我们是否匹配。如果你还记得上面的话，我们在例子中使用的是<strong class="kl iu"> RS256 </strong>。</li></ul><p id="8518" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">在我们继续之前，请注意，在我们的示例中，<strong class="kl iu">报头</strong>和<strong class="kl iu">有效载荷</strong>都可以解耦。我们只是“<code class="fe nq nr ns nt b"><strong class="kl iu">can’t</strong></code>”篡改有效载荷或报头，并仍然使其可信。针对恶意令牌的潜在影响的保护只能由我们选择的算法来保护。所以要明智选择。</p><p id="3b20" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">如果你在一个关注绝密信息的组织工作，比如银行，请<strong class="kl iu">不要</strong>做我们将要做的事情。这只是我们在线检查本地生成的令牌内容的一种方式。</p><p id="2cc9" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">首先，让我们去<a class="ae lq" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank">https://jwt.io/</a>并填写我们的<strong class="kl iu"> JWT令牌</strong>。使用您刚刚生成的令牌。</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ou"><img src="../Images/a48472b41f3010b0517307df5edf329f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vMufw4spjfVpo3j7yGJQBg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">使用</strong>【https://jwt.io/】<strong class="bd lt"/><strong class="bd lt">来检查我们令牌的内容</strong></figcaption></figure><p id="a293" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">让我们检查一下这里有什么。这是我们的管理员令牌。在我们的例子中，那个人是“<code class="fe nq nr ns nt b"><strong class="kl iu">Admin”</strong></code>”。我们可以看到我们的参数都是可用的。在我们的列表中我们看到“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">sub</em></strong></code><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">aud</em></strong></code><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">upn</em></strong></code><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">access</em></strong></code><strong class="kl iu"><em class="mz"><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">user_id</em></strong></code></em></strong><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">iss</em></strong></code><strong class="kl iu"><em class="mz"/></strong><code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">name</em></strong></code><strong class="kl iu"><em class="mz"><em class="mz">”我们也有一些额外的索赔。让我们来看看它们:</em></em></strong></p><p id="4c04" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">auth_time</strong></code><strong class="kl iu"/>—这是认证已经发生的时间。我们的令牌已于2022年7月17日星期日16:15:47 <a class="ae lq" href="https://www.epochconverter.com/timezones?q=1658067347" rel="noopener ugc nofollow" target="_blank"> GMT+02:00 </a> DST通过认证</p><p id="f871" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated"><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">iat</strong></code><strong class="kl iu"/>—这是创建令牌的时间。在我们的例子中，这与<strong class="kl iu"> auth_time </strong>同时发生。</p><p id="46dd" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated"><strong class="kl iu">"</strong><code class="fe nq nr ns nt b"><strong class="kl iu">exp</strong></code><strong class="kl iu">"</strong>-这是令牌的到期日期。它将于2022年7月17日星期日16:32:27 <a class="ae lq" href="https://www.epochconverter.com/timezones?q=1658068347" rel="noopener ugc nofollow" target="_blank"> GMT+02:00 </a> DST到期。我们没有在令牌中指定任何到期日期。这意味着JWT使用默认值约15分钟。</p><p id="23cf" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在让我们进行一些测试。</p><h1 id="f2c9" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated"><strong class="ak"> 10。运行应用程序</strong></h1><p id="aacf" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated"><span class="l li lj lk bm ll lm ln lo lp di"> T </span> he代码准备好在<a class="ae lq" href="https://github.com/jesperancinha/your-finance-je" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上使用。如果我们签出代码并用Intellij打开它，我们需要意识到我们不能像运行<a class="ae lq" href="https://spring.io/projects/spring-boot" rel="noopener ugc nofollow" target="_blank"><strong class="kl iu">Spring Boot</strong></a><strong class="kl iu"/>应用程序一样运行这个应用程序。没有<code class="fe nq nr ns nt b"><strong class="kl iu">psvm”</strong></code> <strong class="kl iu"> </strong>让它运行。相反，我们可以直接运行生成的jar，并确保在之前生成一个"<code class="fe nq nr ns nt b"><strong class="kl iu">mvn build”</strong></code>。以下是我目前使用它的方式:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ov"><img src="../Images/7902c01f5cb7cc8a3bdd7dda411f462f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZ0RWZQyjb1Durkbq-i0yg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">运行应用程序的环境设置</strong></figcaption></figure><p id="d63b" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">现在让我们再次运行“<code class="fe nq nr ns nt b"><strong class="kl iu"><em class="mz">setupCertificates.sh”</em></strong></code>脚本。我不知道你花了多少时间来到这里，但很可能15分钟已经过去了。以防万一，再运行一次。</p><p id="1919" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">开始我们的app吧！</p><p id="2e0a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们可以这样开始:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="09b2" class="op ls it nt b gy oq or l os ot">$ mvn clean install<br/>$ java -jar your-financeje-banking/target/your-financeje-banking.jar</span></pre><p id="32d9" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">或者，我们可以通过现成的运行配置来运行它。如果你想了解它所做的一切，事先检查一下<a class="ae lq" href="https://github.com/jesperancinha/your-finance-je" rel="noopener ugc nofollow" target="_blank"> repo </a>和<strong class="kl iu"> Makefile </strong>:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="d271" class="op ls it nt b gy oq or l os ot">$ make dcup-full-action</span></pre><p id="f9ff" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这个脚本将运行两个服务。一个在端口<strong class="kl iu"> 8080 </strong>上，另一个在端口<strong class="kl iu"> 8081 </strong>上。在端口<strong class="kl iu"> 8080 </strong>上，我们将运行该软件的一个版本<strong class="kl iu">，运行我们自己的代码来生成JWT令牌</strong>。在端口8081上，我们将使用由<a class="ae lq" href="https://github.com/AdamBien" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> Adam Bien </strong> </a>创建的<a class="ae lq" href="https://github.com/AdamBien/jwtenizr" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> jwtknizr </strong> </a>生成器运行一个版本。然而，我们将把本文的重点放在运行在端口8080上的服务上。如果您愿意，也可以使用以下工具运行cypress:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="b6dd" class="op ls it nt b gy oq or l os ot">$ make cypress-open</span></pre><p id="7265" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这将打开cypress控制台，您将能够使用您选择的浏览器运行测试。然而，现阶段浏览器选项仍然有限。大多数请求实际上是cypress提供的命令行请求。</p><p id="59cd" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">就目前而言，我们先不要进入<code class="fe nq nr ns nt b"><strong class="kl iu">cypress</strong></code><strong class="kl iu"/>。请转到您的浏览器，前往以下位置:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="2576" class="op ls it nt b gy oq or l os ot"><a class="ae lq" href="http://localhost:8080/accounts/all" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/accounts/all</a></span></pre><p id="8f3a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们应该会得到这样的结果:</p><figure class="jy jz ka kb gt kc gh gi paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="gh gi ow"><img src="../Images/667bd30f52b80095961aef11ff182351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z268qwSjkNAmSC1bWGxyZQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><strong class="bd lt">运行一次</strong> <code class="fe nq nr ns nt b"><strong class="bd lt">askCredit.sh”</strong></code> <strong class="bd lt">和</strong> <code class="fe nq nr ns nt b"><strong class="bd lt">sendMoney.sh”</strong></code> <strong class="bd lt">脚本</strong>后，完成JSON结果</figcaption></figure><p id="262b" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">正如我们所见，<code class="fe nq nr ns nt b"><strong class="kl iu">Malory</strong></code><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">Jack Fallout</strong></code><strong class="kl iu"/><code class="fe nq nr ns nt b"><strong class="kl iu">Jitska</strong></code><strong class="kl iu"/>没有任何信用或金钱。这是因为他们只被赋予了<strong class="kl iu"> <em class="mz">用户</em> </strong>组。还要注意的是，Shikka没有得到积分。“<code class="fe nq nr ns nt b"><strong class="kl iu">Shikka</strong></code> <strong class="kl iu">”，</strong>是我们唯一没有集团<strong class="kl iu"> <em class="mz">信用</em> </strong>的客户。</p><p id="2e40" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">如果我们查看日志，我们可以看到成功的操作采用以下格式:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="8d1d" class="op ls it nt b gy oq or l os ot">Sending money to admin<br/>HTTP/1.1 200 OK<br/>Date: Sun, 17 Jul 2022 15:01:13 GMT<br/>X-Powered-By: KumuluzEE/4.1.0<br/>Content-Type: application/json<br/>Content-Length: 32<br/>Server: Jetty(10.0.9)</span><span id="bc25" class="op ls it nt b gy ox or l os ot">{"balance":212,"client":"Admin"}</span></pre><p id="1565" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">一个<strong class="kl iu"> 200 </strong> <em class="mz"> </em>让我们知道手术成功了。</p><p id="a406" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">在“<code class="fe nq nr ns nt b"><strong class="kl iu">Malory</strong></code><strong class="kl iu">”</strong>“<code class="fe nq nr ns nt b"><strong class="kl iu">Jack Fallout</strong></code><strong class="kl iu">”</strong>”和“<code class="fe nq nr ns nt b"><strong class="kl iu">Jitska</strong></code><strong class="kl iu">”</strong>的情况下，两个操作都失败，然后我们会得到这样的消息:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="4bc6" class="op ls it nt b gy oq or l os ot">Sending money to jitska<br/>HTTP/1.1 403 Forbidden<br/>X-Powered-By: KumuluzEE/4.1.0<br/>Content-Length: 0<br/>Server: Jetty(10.0.9)</span></pre><p id="f625" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">一个<strong class="kl iu"> 403 </strong>让我们知道我们的<strong class="kl iu"> JWT令牌已经被验证</strong>并且是可信的。然而，用户<strong class="kl iu">被禁止执行该操作。</strong>换句话说，他们无权访问指定的方法。</p><p id="107f" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">让我们稍微改变一下我们的代币。如果我们改变<strong class="kl iu"> <em class="mz"> sendMoney.sh </em> </strong>文件的一些令牌。我们应该得到这个:</p><pre class="jy jz ka kb gt ol nt om on aw oo bi"><span id="fa6f" class="op ls it nt b gy oq or l os ot">Sending money to admin<br/>HTTP/1.1 401 Unauthorized<br/>X-Powered-By: KumuluzEE/4.1.0<br/>WWW-Authenticate: Bearer realm="MP-JWT"<br/>Content-Length: 0<br/>Server: Jetty(10.0.9)</span></pre><p id="67bd" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">这个<strong class="kl iu"> 401 </strong>意味着我们的令牌没有被验证。这意味着服务器用来检查我们的令牌是否可信的公钥没有找到匹配。如果公钥不能评估和验证<strong class="kl iu"> JWT </strong>令牌的签名，那么它将拒绝它。</p><p id="8bda" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">概括地说，报头和“<code class="fe nq nr ns nt b"><strong class="kl iu">Payload</strong></code>”<strong class="kl iu">”</strong>没有加密。他们只是基数64 "<code class="fe nq nr ns nt b"><strong class="kl iu">encoded</strong></code><strong class="kl iu"/>。这意味着“<code class="fe nq nr ns nt b"><strong class="kl iu">Decoding</strong></code><strong class="kl iu">”</strong>可以让我们一直窥视里面的有效载荷到底是什么。如果我们希望保护我们的有效负载不被窃听，我们就不应该使用令牌的“<code class="fe nq nr ns nt b"><strong class="kl iu">Payload</strong></code><strong class="kl iu">”</strong>来做其他事情，而应该选择标识参数。当有人得到了<strong class="kl iu"> JWT </strong>令牌时，问题就来了，例如，当<strong class="kl iu"> TLS </strong>隧道已经被攻破，有人能够读取交换消息的内容。当这种情况发生时，还有另一种保护措施。这是签名。唯一能够验证消息进入的是包含<strong class="kl iu">公共</strong>密钥的服务器。这个<strong class="kl iu">公共</strong>密钥，虽然<strong class="kl iu">公共</strong>，但是只允许通过运行<strong class="kl iu">签名</strong>和<code class="fe nq nr ns nt b"><strong class="kl iu">Header + Payload</strong></code>来验证传入的消息。</p><h1 id="8b88" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">11。结论</h1><p id="e72f" class="pw-post-body-paragraph kj kk it kl b km mp ko kp kq mq ks kt ku mr kw kx ky ms la lb lc mt le lf lg im bi lh translated">我们已经到了会议的尾声。感谢您的关注。</p><p id="b77a" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我们可以看到<strong class="kl iu"> JWT </strong>标记是如何紧凑的，并且比它们的XML对应物<strong class="kl iu"> SAML </strong>标记要少得多。我们已经看到创建和使用令牌来获得某些方法所需的某些<strong class="kl iu">授权</strong>是多么容易，以及我们如何通过一个<strong class="kl iu">签名的</strong>令牌来获得授权。</p><p id="1895" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">然而，我发现了解一下JWT是如何运作的非常重要。希望我已经很好地向你介绍了JWT令牌是如何工作的。</p><p id="aa29" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">为了更好地理解所有这些是如何工作的，我建议您尝试一下已经实现的cypress测试。这是一个很好的方式，可以看到请求是如何发出的，我们正在测试什么，以及我们期望什么。然后，您还会更好地理解为什么有些用户可以执行某些操作，而有些用户不能。</p><p id="dad3" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我已经把这个应用程序的所有源代码放到了<a class="ae lq" href="https://github.com/jesperancinha/your-finance-je" rel="noopener ugc nofollow" target="_blank"> <strong class="kl iu"> GitHub </strong> </a>上</p><p id="7692" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我希望你能像我喜欢写这篇文章一样喜欢它。</p><p id="583b" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">我很想听听你的想法，所以请在下面留下你的评论。</p><p id="1604" class="pw-post-body-paragraph kj kk it kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg im bi translated">感谢您的阅读！</p><h1 id="0e3f" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">12.参考</h1><div class="oy oz gp gr pa pb"><a href="https://auth0.com/docs/tokens/concepts/jwt-claims" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">JSON Web令牌声明</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">JSON Web Token (JWT)声明是关于主题的信息片段。例如，一个ID令牌(它是…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">auth0.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://blog.kumuluz.com/product/developers/2017/05/03/microservices-with-java-ee-and-kumuluzee-updated.html" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">使用Java EE和KumuluzEE开发微服务—更新</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">本文通过KumuluzEE探索了微服务与Java EE一起使用的方式。它扩展了…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">blog.kumuluz.com</p></div></div><div class="pk l"><div class="pq l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://ee.kumuluz.com/" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">库穆卢泽</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">什么是KumuluzEE KumuluzEE是一个使用标准Java开发微服务的轻量级框架，Java EE /…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">ee.kumuluz.com</p></div></div><div class="pk l"><div class="pr l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://dzone.com/refcardz/rest-api-security-1?chapter=1" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">REST API安全性— DZone — Refcardz</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">应用程序编程接口(API)是一组明确定义的不同应用程序之间的通信方法</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">dzone.com</p></div></div><div class="pk l"><div class="ps l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://dzone.com/articles/restful-api-security?fromrel=true" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">RESTful API安全性— DZone集成</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">这篇文章是新的DZone集成指南:API设计和管理中的特色。获取更多免费副本…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">dzone.com</p></div></div><div class="pk l"><div class="pt l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://developer.okta.com/blog/2018/10/31/jwts-with-java" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">教程:用Java创建和验证jwt</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">本文探讨了Java应用程序使用jwt进行令牌认证的好处。</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">developer.okta.com</p></div></div><div class="pk l"><div class="pu l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://github.com/oktadeveloper/okta-java-jwt-example" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">okta developer/okta-Java-jwt-example</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">带有Java的JSON Web令牌。通过在…上创建帐户，为oktadeveloper/okta-Java-jwt-example开发做出贡献</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">github.com</p></div></div><div class="pk l"><div class="pv l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-cli.html" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">Spring Boot CLI</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">一旦安装了CLI，就可以通过在命令行键入spring并按Enter来运行它。如果你跑…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">docs.spring.io</p></div></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://blog.payara.fish/java-ee-security-api-jsr-375/soteria-with-jwt-tokens" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">带有JWT令牌的Java EE安全API(JSR 375/索特里亚)</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">Java EE安全API 1.0是Java EE 8的一个新规范，旨在弥补传统上……</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">博客. payara.fish</p></div></div><div class="pk l"><div class="pw l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://github.com/payara/Payara-Examples/tree/master/javaee/security-jwt-example" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">Payara/Payara-示例</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">展示JWT与Java EE Security 1.0 (Soteria RI)集成的示例代码库…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">github.com</p></div></div><div class="pk l"><div class="px l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://antoniogoncalves.org/2016/10/03/securing-jax-rs-endpoints-with-jwt/" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">保护JAX-RS与JWT的端点</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">在这篇博文中，我将向您展示如何使用JJWT库发布和验证带有JAX-RS端点的JSon Web令牌…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">antoniogoncalves.org</p></div></div><div class="pk l"><div class="py l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://gchq.github.io/CyberChef/" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">网络咖啡馆</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">网络瑞士军刀——一个用于加密、编码、压缩和数据分析的网络应用</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">gchq.github.io</p></div></div><div class="pk l"><div class="pz l pm pn po pk pp kh pb"/></div></div></a></div><div class="oy oz gp gr pa pb"><a href="https://projects.eclipse.org/projects/technology.microprofile" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">Eclipse微文件</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">许多创新的“微服务”企业Java环境和框架已经存在于Java生态系统中。这些…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">projects.eclipse.org</p></div></div><div class="pk l"><div class="qa l pm pn po pk pp kh pb"/></div></div></a></div></div></div>    
</body>
</html>