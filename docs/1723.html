<html>
<head>
<title>Running Istio and Kiali on Amazon EKS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在亚马逊EKS上运行Istio和Kiali</h1>
<blockquote>原文：<a href="https://itnext.io/running-istio-and-kiali-on-amazon-eks-a94c21279023?source=collection_archive---------1-----------------------#2019-01-11">https://itnext.io/running-istio-and-kiali-on-amazon-eks-a94c21279023?source=collection_archive---------1-----------------------#2019-01-11</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><p id="ac57" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">前段时间，<a class="ae km" href="https://twitter.com/arungupta/" rel="noopener ugc nofollow" target="_blank"> Arun Gupta </a>询问了在亚马逊EKS上使用<a class="ae km" href="https://www.kiali.io/" rel="noopener ugc nofollow" target="_blank"> Kiali </a>和<a class="ae km" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank"> Istio </a>的步骤。我们交换了一些电子邮件，但最终我没有成功(实际上我成功了，但直到今天才知道:-)</p><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj kn"><img src="../Images/54e3c1b891e8f59f9b8871f5fb6df39d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dn03Sb8xDSueojQPliaRNw.png"/></div></div><figcaption class="kz la gk gi gj lb lc bd b be z dk translated">在亚马逊EKS上运行的Kiali v0.10截图</figcaption></figure><p id="f786" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">与此同时，Arun <a class="ae km" href="https://twitter.com/arungupta/status/1081429871283171329" rel="noopener ugc nofollow" target="_blank">在推特上说他成功了</a>，但是我仍然不知道缺失的部分。因此，我四处查看并找到了他的示例repo，它展示了如何在EKS上安装Istio。我按照步骤操作，在去Istio 1.0.5的途中更新了它，并启用了Kiali。</p><p id="2321" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我还是没有看到基亚利。多逛了一会儿，我找到了<em class="ld"> kubectl port-forward </em>(我通常不使用，所以不习惯，所以之前没看到):</p><pre class="ko kp kq kr gu le lf lg lh aw li bi"><span id="e6be" class="lj lk ir lf b gz ll lm l ln lo"><strong class="lf is">$</strong> kubectl -n istio-system port-forward svc/kiali 20001:20001 &amp;</span></pre><p id="9004" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">这样，Kiali服务/ pod的端口20001被转发到localhost:20001，我们可以在<a class="ae km" href="http://localhost:20001/" rel="noopener ugc nofollow" target="_blank">http://localhost:20001/</a>上轻松访问Kiali</p><p id="c2ff" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我已经对Arun的回购提出了<a class="ae km" href="https://github.com/aws-samples/istio-on-amazon-eks/pull/1" rel="noopener ugc nofollow" target="_blank">拉动请求，以纳入我的发现。1月14日更新:这个现在已经合并了。</a></p><h2 id="6edb" class="lj lk ir bd lp lq lr dn ls lt lu dp lv jz lw lx ly kd lz ma mb kh mc md me mf bi translated">跟随最新的Kiali</h2><p id="d2be" class="pw-post-body-paragraph jo jp ir jq b jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh mk kj kk kl ik bi translated">如果您想了解最新的Kiali开发，您可以编辑部署配置来获取映像的<em class="ld"> :latest </em>标记</p><pre class="ko kp kq kr gu le lf lg lh aw li bi"><span id="af56" class="lj lk ir lf b gz ll lm l ln lo">kubectl<em class="ld"> </em>edit deployment/kiali -n istio-system</span></pre><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div class="gi gj ml"><img src="../Images/646543864de19876ab044070c1bef3f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*A3b5-MtEKoD1PnjIi7srTQ.png"/></div><figcaption class="kz la gk gi gj lb lc bd b be z dk translated">部署描述符摘录</figcaption></figure><p id="3400" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">将<em class="ld"> v0.10 </em>更改为<em class="ld">最新的</em>，并且将策略从<em class="ld">如果不存在</em>更改为<em class="ld">总是。</em><em class="ld"/>后者不建议用于生产，但你也不想跟进那里的开发:-)要获得新版本，只需删除Kiali pod，Kubernetes将会提供最新最棒的版本。</p><pre class="ko kp kq kr gu le lf lg lh aw li bi"><span id="582e" class="lj lk ir lf b gz ll lm l ln lo"><em class="ld">kubectl </em>delete pod -l app=kiali -n istio-system</span></pre><p id="2934" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">刷新Kiali应用程序后，您需要重新启动端口转发，因为它与pod相关联，而旧的Kiali pod已经不存在了。</p><h2 id="ff7b" class="lj lk ir bd lp lq lr dn ls lt lu dp lv jz lw lx ly kd lz ma mb kh mc md me mf bi translated">附言:</h2><p id="62f0" class="pw-post-body-paragraph jo jp ir jq b jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh mk kj kk kl ik bi translated">我的同事<a class="ae km" href="https://medium.com/@jmazzite" rel="noopener"> Mazz </a>告诉我，这也是现在Istio文档中提到的<a class="ae km" href="https://istio.io/docs/tasks/telemetry/kiali/#generating-a-service-graph" rel="noopener ugc nofollow" target="_blank">。在此之上，下一个1.0.x版本的Istio还将引入一个更新版本的Kiali(很可能是v0.12)。</a></p><p id="700b" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">感谢我的同事Joel为我提供了一个比我在帖子中原来的命令更简单的端口转发命令</p></div></div>    
</body>
</html>