<html>
<head>
<title>Google Sign-In As Deep As Possible — iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌登录尽可能深入——iOS</h1>
<blockquote>原文：<a href="https://itnext.io/google-sign-in-as-deep-as-possible-ios-b35e3cf03ecf?source=collection_archive---------4-----------------------#2021-04-26">https://itnext.io/google-sign-in-as-deep-as-possible-ios-b35e3cf03ecf?source=collection_archive---------4-----------------------#2021-04-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="0749" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">谷歌登录可以让用户通过他们的谷歌帐户登录到我们的应用程序。不再需要额外的账号和密码！</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/5fe2a6764e239eface193874d069cc87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*epzfIbskyPsGsUiQ.jpg"/></div></div></figure><p id="4279" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi lr translated">oogle登录是许多现代移动应用程序中的一个著名功能。它提供了一个简洁易用的API，用于将授权过程委托给Google网站和服务器。谷歌为应用开发者处理安全问题。开发人员只需要遵循7个步骤来实现整个登录过程。</p><p id="7499" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在我上次的实现中发现了一个有趣的技巧——<code class="fe ma mb mc md b">AppDelegate</code>中的<code class="fe ma mb mc md b"><a class="ae me" href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623112-application" rel="noopener ugc nofollow" target="_blank">application(_:open:options:)</a></code>函数从未被触发，即使它是官方文档中规定的必需设置。为什么？下面来看看。</p></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h2 id="6472" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤1)通过CocoaPods安装Google Sign-In SDK</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nf"><img src="../Images/b787bae0ccefbc67eff12a6798f2b673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y5XHBoiNxWy1eGWe.png"/></div></div></figure><p id="fe22" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在<code class="fe ma mb mc md b">Podfile</code>添加<code class="fe ma mb mc md b">GoogleSignIn</code>依赖，在终点与<code class="fe ma mb mc md b">pod install</code>一起运行。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><h2 id="0d24" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤2)设置OAuth客户端ID</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ni"><img src="../Images/11507236ebb948ec1aa6ab786fb7f7e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XGXNwrPsz4lwujO-_7dbfQ.png"/></div></div></figure><p id="3a27" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">转到Google云平台控制台并导航到:</p><p id="1ab6" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">API &amp; Services<br/>&gt;凭证<br/> &gt; +创建凭证<br/> &gt; OAuth客户端ID</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nj"><img src="../Images/a7d78f5ec4dfca5b4d7b1ca3e5787a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LOz3jPkwgxP-D39CEyAYBQ.png"/></div></div></figure><p id="7a6e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">填写必要的信息并创建您唯一的客户ID。这是在应用程序启动时初始化GoogleSignIn SDK所必需的，请参考步骤6)。</p><h2 id="a067" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤3)添加谷歌登录按钮</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nk"><img src="../Images/64443b12adc62f14d56680c2e6fb11fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TiCw9OfGLIfRTMS7ihrTMg.png"/></div></div></figure><p id="fb9a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">SDK总共提供了六种类型的Google登录按钮。我们可以通过设置<code class="fe ma mb mc md b">GIDSignInButton</code>的<code class="fe ma mb mc md b">colorScheme</code>和<code class="fe ma mb mc md b">style</code>属性来配置它的外观。</p><p id="a1c7" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">使用<code class="fe ma mb mc md b">GIDSignInButton</code>的一个优点是它有一个默认的触发自动登录功能的内部触发动作。开发人员不需要自己声明点击动作。</p><h2 id="638f" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤4)设置和处理自定义URL方案</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/cef58c90a441720dca4f2c866876e798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ek5F4XXnW_PxLugbwl6k_w.png"/></div></div><figcaption class="nm nn gk gi gj no np bd b be z dk translated">将URL方案添加到项目信息</figcaption></figure><p id="10f7" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">根据<a class="ae me" href="https://developers.google.com/identity/sign-in/ios/start-integrating#add_a_url_scheme_to_your_project" rel="noopener ugc nofollow" target="_blank">官方文档</a>，开发人员必须导航到“<strong class="kx iv">信息</strong>”选项卡的“<strong class="kx iv"> URL类型</strong>”会话，并使用反转的OAuth客户端ID创建一个新的URL类型。例如:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/46527286a809b7e52695260a9192f20f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4aUEAwtgQt8wOJI86oU-wg.png"/></div></div></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><p id="5fab" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">之后，我们需要处理启动我们的应用程序的URL的数据。<code class="fe ma mb mc md b">handle(url: URL)</code>函数为我们检索并处理URL中的有用信息。</p><p id="1f9d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">由于我们的应用程序中可能有多个登录方法，我们应该像这样小心处理它们:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h1 id="adea" class="nr mn iu bd mo ns nt nu mr nv nw nx mu ka ny kb mx kd nz ke na kg oa kh nd ob bi translated">在此深思！🤔</h1><p id="316f" class="pw-post-body-paragraph kv kw iu kx b ky oc jv la lb od jy ld le oe lg lh li of lk ll lm og lo lp lq in bi translated">Xcode项目中URL方案的目的是什么？这个什么时候触发？谁来触发？</p><p id="eb9c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">URL方案是我们应用程序的入口点。例如，如果一个应用程序有一个URL方案<code class="fe ma mb mc md b">com.demoScheme</code>，其他应用程序(例如Safari)可以通过类似<code class="fe ma mb mc md b">com.demoScheme://action</code>的链接启动我们的应用程序。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oh"><img src="../Images/ca8f2b1bd7aa8115aa48e096508c0e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W0npvqh7TSX3msovRCb75w.png"/></div></div></figure><p id="ce8e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">为简单起见，我们的应用程序将认证过程委托给另一个可信任的应用程序，例如脸书、推特、雅虎！以及Instagram app等。在代理获得身份验证状态后，它将数据传递回我们的应用程序以进行进一步的操作。以脸书app为例:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/6b929dcecb8642ec384b24d44f910502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E0N21sPPnCQdiuU6z4cJoQ.png"/></div></div></figure><div class="oj ok gq gs ol om"><a rel="noopener  ugc nofollow" target="_blank" href="/swift-facebook-ios-login-sdk-dada412d8341"><div class="on ab fp"><div class="oo ab op cl cj oq"><h2 class="bd iv gz z fq or fs ft os fv fx it bi translated">Swift —脸书iOS登录SDK</h2><div class="ot l"><h3 class="bd b gz z fq or fs ft os fv fx dk translated">脸书SDK允许用户登录并授予应用程序权限，以便从脸书检索个人信息…</h3></div><div class="ou l"><p class="bd b dl z fq or fs ft os fv fx dk translated">itnext.io</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa kt om"/></div></div></a></div><p id="6a36" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">此时此刻，我们来思考一下哪个app可以为谷歌用户提供授权服务。我已经尝试了<a class="ae me" href="https://apps.apple.com/us/app/google/id284815942" rel="noopener ugc nofollow" target="_blank"> Google </a>、<a class="ae me" href="https://apps.apple.com/us/app/gmail-email-by-google/id422689480" rel="noopener ugc nofollow" target="_blank"> Gmail </a>和<a class="ae me" href="https://apps.apple.com/us/app/youtube-watch-listen-stream/id544007664" rel="noopener ugc nofollow" target="_blank"> YouTube </a>应用程序，但它们都无法完成认证任务。在StackOverflow搜索了一段时间后，得到的答案是…<a class="ae me" href="https://support.google.com/googlecurrents/answer/9195133?hl=en#:~:text=Help%20CenterAnnouncements-,Shutting%20down%20Google%2B%20for%20consumer%20(personal,accounts%20on%20April%202%2C%202019&amp;text=In%20December%202018%2C%20we%20announced,product%20that%20meets%20consumers'%20expectations." rel="noopener ugc nofollow" target="_blank"><strong class="kx iv">自2019年4月</strong></a>起已经终止的“Google+”。换句话说，目前没有更多的应用程序会触发Google身份验证任务的项目URL方案。</p><p id="8870" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">那么，为什么Google仍然在官方文档中保留这个回调，并在我们没有将客户URL方案添加到项目中时抛出一个运行时错误呢？我有一个猜测。谷歌将此作为后备计划，并确认一旦未来发布任何Google+继任者，市场上的每个应用都可以准备就绪。🤔 💰💰💰💰</p><h2 id="a767" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤5)实现GIDSignInDelegate</h2><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><p id="3ece" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">GIDSignInDelegate</code>有两个重要功能:</p><ol class=""><li id="2b8b" class="pb pc iu kx b ky kz lb lc le pd li pe lm pf lq pg ph pi pj bi translated"><code class="fe ma mb mc md b">didSignInFor</code> —当用户完成登录过程或在登录过程中遇到错误时调用</li><li id="1b8b" class="pb pc iu kx b ky pk lb pl le pm li pn lm po lq pg ph pi pj bi translated"><code class="fe ma mb mc md b">didDisconnectWith</code> —当应用程序与用户的谷歌账户断开时调用。如果用户将其从Google帐户网站断开，这将不会被触发。</li></ol><h2 id="c24a" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤6) Google登录基本设置</h2><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><p id="d9b9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我们需要设置Google登录客户端ID(在第2步中检索)，并将<code class="fe ma mb mc md b">GIDSignInDelegate</code>设置为<code class="fe ma mb mc md b">GIDSignIn</code>共享实例，以便正确获得回调。</p><h2 id="56a7" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">步骤7)检索个人信息</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pp"><img src="../Images/933254b1b30e2277b7101ee686df5035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PEj1M1TW9d71r5eNSiRjqA.png"/></div></div></figure><p id="a1a2" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">构建并运行您的应用程序。您将看到以下行为:</p><ol class=""><li id="7ce9" class="pb pc iu kx b ky kz lb lc le pd li pe lm pf lq pg ph pi pj bi translated">谷歌登录对话框显示一条<strong class="kx iv">不可定制的</strong>消息</li><li id="378d" class="pb pc iu kx b ky pk lb pl le pm li pn lm po lq pg ph pi pj bi translated">一个应用内浏览器<code class="fe ma mb mc md b">UIViewController</code>出现了，用户可以登录</li><li id="501a" class="pb pc iu kx b ky pk lb pl le pm li pn lm po lq pg ph pi pj bi translated">无论用户取消还是成功登录，都会在<code class="fe ma mb mc md b">AppDelegate</code>触发<code class="fe ma mb mc md b">didSignInForUser</code></li></ol><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><p id="d14d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">然后我们的服务器可以使用用户的<code class="fe ma mb mc md b">idToken</code>在3600s的有效期内通过下面的公共API检索用户信息:</p><p id="dd9c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><a class="ae me" href="https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=" rel="noopener ugc nofollow" target="_blank">https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=xxxxxxxxx </a></p><blockquote class="pq pr ps"><p id="661a" class="kv kw pt kx b ky kz jv la lb lc jy ld pu lf lg lh pv lj lk ll pw ln lo lp lq in bi translated">要注销一个用户，我们只需要简单地调用<code class="fe ma mb mc md b">GIDSignIn.sharedInstance().signOut()</code></p></blockquote></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h1 id="df62" class="nr mn iu bd mo ns nt nu mr nv nw nx mu ka ny kb mx kd nz ke na kg oa kh nd ob bi translated">高级主题/讨论</h1><h2 id="f87e" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">1)检索额外的范围/权限</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj px"><img src="../Images/69b197ae7fb976ca3d0f82a24c947172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nH-gmjbFneehsj2Mn3vsPA.png"/></div></div></figure><p id="6b0e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">默认情况下，Google SignIn SDK只请求用户的<strong class="kx iv">个人资料</strong>和<strong class="kx iv">电子邮件</strong>。这对于正常的帐户创建已经足够了。然而，如果你的应用程序有一些奇特的功能，需要一些<strong class="kx iv">特殊用户的权限</strong>，你必须在<code class="fe ma mb mc md b">GIDSignIn</code>实例定制<code class="fe ma mb mc md b">scopes</code>字段。这里有一个<a class="ae me" href="https://developers.google.com/identity/protocols/oauth2/scopes" rel="noopener ugc nofollow" target="_blank">链接</a>到完整列表。</p><div class="oj ok gq gs ol om"><a href="https://developers.google.com/identity/protocols/oauth2/scopes" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fp"><div class="oo ab op cl cj oq"><h2 class="bd iv gz z fq or fs ft os fv fx it bi translated">Google APIs的OAuth 2.0范围| Google身份| Google开发者</h2><div class="ot l"><h3 class="bd b gz z fq or fs ft os fv fx dk translated">谷歌致力于促进黑人社区的种族平等。看看如何。</h3></div><div class="ou l"><p class="bd b dl z fq or fs ft os fv fx dk translated">developers.google.com</p></div></div><div class="ov l"><div class="py l ox oy oz ov pa kt om"/></div></div></a></div><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ng nh l"/></div></figure><p id="89b5" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">由于用户的隐私和安全，开发人员必须向Google提交OAuth同意要求，以验证您的应用程序确实需要这种敏感信息。审查过程需要几天时间。详细的步骤指南，请参考这个<a class="ae me" href="https://support.google.com/cloud/answer/7454865?hl=en" rel="noopener ugc nofollow" target="_blank">谷歌链接</a>。</p><p id="93d8" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">用户可以避免登录，因为同意屏幕对新用户来说是压倒性的，或者对为什么要求他们某些权限感到困惑。在任一种情况下，您都可以延迟附加的作用域，并在需要它们之前呈现它们。</p></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h2 id="8f72" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">2)苹果App Store数据披露要求</h2><p id="9e66" class="pw-post-body-paragraph kv kw iu kx b ky oc jv la lb od jy ld le oe lg lh li of lk ll lm og lo lp lq in bi translated">苹果是一家伟大的公司，非常关注用户的隐私。它要求所有应用程序公开收集的用户数据将如何使用。缺少明确的声明会导致苹果在应用审查过程中拒绝接受。因此，Google提供了以下干净的声明，它可以应用于所有使用Google SignIn SDK的应用程序！</p><pre class="kk kl km kn gu pz md qa qb aw qc bi"><span id="e4d5" class="mm mn iu md b gz qd qe l qf qg">To enable your users to sign in quickly and securely, the Google Sign-In for iOS SDK may collect the following:</span><span id="a673" class="mm mn iu md b gz qh qe l qf qg">1. User identifier, to record OAuth grants created with the user’s consent.</span><span id="58d5" class="mm mn iu md b gz qh qe l qf qg">2. IP address, which may be used to estimate the general location of a device for fraud prevention.<br/></span></pre></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h2 id="beb2" class="mm mn iu bd mo mp mq dn mr ms mt dp mu le mv mw mx li my mz na lm nb nc nd ne bi translated">3)“注销”和“断开”有什么区别？</h2><p id="79cd" class="pw-post-body-paragraph kv kw iu kx b ky oc jv la lb od jy ld le oe lg lh li of lk ll lm og lo lp lq in bi translated"><strong class="kx iv">【登出】</strong>是SDK在本地<strong class="kx iv">删除用户档案</strong>的动作。如果用户之前已经向我们的服务器发送了访问令牌，我们的服务器仍然可以代表用户执行任何操作，包括检索用户的配置文件。</p><pre class="kk kl km kn gu pz md qa qb aw qc bi"><span id="0edf" class="mm mn iu md b gz qd qe l qf qg">GIDSignIn.sharedInstance().signOut()</span></pre><p id="7c9f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv">【断开】</strong>是用户想要使我们的服务器已经拥有的访问令牌失效的动作。我们的服务器将不再能够访问用户的信息。</p><pre class="kk kl km kn gu pz md qa qb aw qc bi"><span id="eddd" class="mm mn iu md b gz qd qe l qf qg">GIDSignIn.sharedInstance().disconnect()</span></pre><p id="4ed9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">用户可以在Google主页查看他/她授予Google登录权限的应用程序列表:</p><p id="5ea7" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">管理您的Google帐户<br/> &gt;安全性<br/> &gt;管理第三方访问<br/> &gt;“登录Google”会话</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qi"><img src="../Images/cb0fac0f3a9ab11163368d08162037de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jEy0pRW8O6VLykNjFPtZKA.png"/></div></div></figure></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h1 id="6f60" class="nr mn iu bd mo ns nt nu mr nv nw nx mu ka ny kb mx kd nz ke na kg oa kh nd ob bi translated">摘要</h1><p id="db42" class="pw-post-body-paragraph kv kw iu kx b ky oc jv la lb od jy ld le oe lg lh li of lk ll lm og lo lp lq in bi translated">Google Sign-In SDK是一个易于使用的工具，用于将授权任务委托给Google服务器。一旦用户在显示的应用内浏览器上登录，SDK将返回用户的个人信息，包括名字、姓氏、电子邮件地址和个人资料图像URL等。</p><p id="87aa" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">虽然根据官方文档，我们必须在Xcode项目中设置自定义URL方案，但由于唯一的谷歌授权应用“Google+”已经从2019年开始终止，<code class="fe ma mb mc md b"><a class="ae me" href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623112-application" rel="noopener ugc nofollow" target="_blank">application(_:open:options:)</a></code>将永远不会被触发！</p><p id="1c17" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">该应用程序可以请求额外的用户权限来代表他们执行某些操作。比如YouTube账号，Google云平台，Firebase管理。</p></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><h1 id="5144" class="nr mn iu bd mo ns nt nu mr nv nw nx mu ka ny kb mx kd nz ke na kg oa kh nd ob bi translated">参考</h1><div class="oj ok gq gs ol om"><a href="https://developers.google.com/identity/sign-in/ios/start-integrating" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fp"><div class="oo ab op cl cj oq"><h2 class="bd iv gz z fq or fs ft os fv fx it bi translated">开始将谷歌登录整合到你的iOS应用中</h2><div class="ot l"><h3 class="bd b gz z fq or fs ft os fv fx dk translated">" type": "thumb-down "，" id ":" missingtheinformationneed "，" label ":"缺少我需要的信息" }，{ "type"…</h3></div><div class="ou l"><p class="bd b dl z fq or fs ft os fv fx dk translated">developers.google.com</p></div></div><div class="ov l"><div class="qj l ox oy oz ov pa kt om"/></div></div></a></div><div class="oj ok gq gs ol om"><a rel="noopener  ugc nofollow" target="_blank" href="/swift-facebook-ios-login-sdk-dada412d8341"><div class="on ab fp"><div class="oo ab op cl cj oq"><h2 class="bd iv gz z fq or fs ft os fv fx it bi translated">Swift —脸书iOS登录SDK</h2><div class="ot l"><h3 class="bd b gz z fq or fs ft os fv fx dk translated">脸书SDK允许用户登录并授予应用程序权限，以便从脸书检索个人信息…</h3></div><div class="ou l"><p class="bd b dl z fq or fs ft os fv fx dk translated">itnext.io</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa kt om"/></div></div></a></div><div class="oj ok gq gs ol om"><a href="https://developers.google.com/identity/protocols/oauth2/scopes" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fp"><div class="oo ab op cl cj oq"><h2 class="bd iv gz z fq or fs ft os fv fx it bi translated">Google APIs的OAuth 2.0范围| Google身份| Google开发者</h2><div class="ot l"><h3 class="bd b gz z fq or fs ft os fv fx dk translated">谷歌致力于促进黑人社区的种族平等。看看如何。</h3></div><div class="ou l"><p class="bd b dl z fq or fs ft os fv fx dk translated">developers.google.com</p></div></div><div class="ov l"><div class="py l ox oy oz ov pa kt om"/></div></div></a></div></div><div class="ab cl mf mg hy mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="in io ip iq ir"><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qk"><img src="../Images/e0ee4ec3055a4e60cc523cb4ae195172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pr3p-T_5TVKdD1ed.jpg"/></div></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="ab gv cl ql"><img src="../Images/6b4bd79a25c54205fcd408a05bced170.png" data-original-src="https://miro.medium.com/v2/format:webp/1*eUdSsCq1iuPyBaFWAfLQxg.png"/></div></figure><p id="c70f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">感谢您阅读这篇文章。希望你觉得有趣和有用！欢迎您关注我，并通过以下渠道与我联系:</p><ol class=""><li id="cf23" class="pb pc iu kx b ky kz lb lc le pd li pe lm pf lq pg ph pi pj bi translated"><a class="ae me" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ myrik _ chow</a></li><li id="fd69" class="pb pc iu kx b ky pk lb pl le pm li pn lm po lq pg ph pi pj bi translated"><a class="ae me" href="https://www.youtube.com/channel/UC_UEqZPDms3rtX5W-m9hgxg" rel="noopener ugc nofollow" target="_blank">YouTube @ myrick show</a></li><li id="f39d" class="pb pc iu kx b ky pk lb pl le pm li pn lm po lq pg ph pi pj bi translated"><a class="ae me" href="https://www.linkedin.com/in/myrick-chow-720b34118/" rel="noopener ugc nofollow" target="_blank">LinkedIn @ myrik Chow</a></li></ol></div></div>    
</body>
</html>