<html>
<head>
<title>Learn Flutter complex animations with a real-world example [Part 1]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过真实世界的例子学习复杂的动画[第1部分]</h1>
<blockquote>原文：<a href="https://itnext.io/learn-flutter-complex-animations-with-a-real-world-example-part-1-906b60ecfa77?source=collection_archive---------2-----------------------#2020-10-17">https://itnext.io/learn-flutter-complex-animations-with-a-real-world-example-part-1-906b60ecfa77?source=collection_archive---------2-----------------------#2020-10-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d794378773dbcda3a6955260343577da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fg1jzqkADiiXxdAw"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">凯利·西克玛在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="9866" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本教程中，我们将学习如何基于Arcaweb的徽标，使用Flutter构建一个复杂的动画。</p><p id="6bcb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://www.arcaweb.ch/" rel="noopener ugc nofollow" target="_blank"> Arcaweb </a>是一家瑞士公司，位于提契诺州Agno市中心，是瑞士科技界的活跃分子，为公司和初创企业开发软件解决方案。它的标志呈现三个红色方块和一个旋转的灰色方块；旁边是公司名称，有两种不同的文本格式:</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi le"><img src="../Images/88f29bcaf34d34b3934e0d3cf2ee186c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pAhug9-DJBFbe6liKNakwQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Arcaweb徽标</figcaption></figure><h2 id="baf1" class="lj lk it bd ll lm ln dn lo lp lq dp lr kr ls lt lu kv lv lw lx kz ly lz ma mb bi translated">动画将遵循以下步骤:</h2><p id="75f9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">第一步:四个方块(开始是红色的)将从屏幕的中央出现。这意味着左上角的方块将出现在右下角的内部区域(最靠近中心)；左下方的方块将从右上方的内部区域出现；所以。</p><p id="d34a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二步:文本将淡入(最初是淡出)。右下角的方块将从红色变为灰色，并旋转几度(例如12度)。</p><p id="4048" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我们将要建造的:</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mh"><img src="../Images/36229c425f08921ed0fabb4fad58abf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ydhz3EGzjmWgZ5aOLfiG6A.gif"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">我们将要制作的最终动画</figcaption></figure><h1 id="e749" class="mi lk it bd ll mj mk ml lo mm mn mo lr mp mq mr lu ms mt mu lx mv mw mx ma my bi translated">辅导的</h1><p id="f4d4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">本教程分为两部分:</p><p id="5e1f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/906b60ecfa77" rel="noopener"> —第1部分:设置项目，并制作左上角和右上角方块的动画。</a></p><p id="3449" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/learn-flutter-complex-animations-with-a-real-world-example-part-2-e2ff8d1f785a?source=friends_link&amp;sk=aca25799d1f6a74bfd1f0e9168776530">——第2部分:制作左下方和右下方方块的动画，以及在文本中淡入淡出</a></p><h1 id="0710" class="mi lk it bd ll mj mk ml lo mm mn mo lr mp mq mr lu ms mt mu lx mv mw mx ma my bi translated">让我们开始制作我们的动画吧！</h1><p id="3e87" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><em class="mz">注意:你的机器需要安装Flutter，强烈推荐基础知识。我会尽可能深入地解释每一步，但我可能会错过一些东西，所以大多数你知道最简单的本教程将为你寻找！</em></p><p id="46c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mz">最终结果的源代码可以在Github上找到:</em><a class="ae kf" href="https://github.com/juancurti/flutteranimationtutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/juancurti/flutteranimationtutorial</a></p><h1 id="a5b8" class="mi lk it bd ll mj mk ml lo mm mn mo lr mp mq mr lu ms mt mu lx mv mw mx ma my bi translated">创建项目</h1><p id="4fdb" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">首先，我们需要创建我们的项目。我们可以使用已经创建的项目，因为我们将在单个小部件上工作。</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="cf9a" class="lj lk it nb b gy nf ng l nh ni">flutter create flutteranimationtutorial</span></pre><p id="3e4c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们使用以下命令在lib文件夹中创建新视图:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="791c" class="lj lk it nb b gy nf ng l nh ni">touch lib/logoanimation.dart</span></pre><p id="71da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们将用需要编译的基本代码填充LogoAnimation小部件:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="ff13" class="lj lk it nb b gy nf ng l nh ni">import 'package:flutter/material.dart';</span><span id="1829" class="lj lk it nb b gy nj ng l nh ni">class LogoAnimation extends StatefulWidget {<br/>  LogoAnimation({Key key}) : super(key: key);</span><span id="cf6d" class="lj lk it nb b gy nj ng l nh ni">  @override<br/>  _LogoAnimationState createState() =&gt; _LogoAnimationState();<br/>}</span><span id="b11d" class="lj lk it nb b gy nj ng l nh ni">class _LogoAnimationState extends State&lt;LogoAnimation&gt; {</span><span id="fab7" class="lj lk it nb b gy nj ng l nh ni"> @override<br/> void initState() {<br/>   super.initState();<br/> }</span><span id="d029" class="lj lk it nb b gy nj ng l nh ni"> @override<br/> void dispose() {<br/>   super.dispose();<br/> }</span><span id="da28" class="lj lk it nb b gy nj ng l nh ni"> @override<br/> Widget build(BuildContext context) {<br/>   return Scaffold(<br/>     backgroundColor: Colors.white,<br/>     body: Container()<br/>   );<br/> }</span><span id="797a" class="lj lk it nb b gy nj ng l nh ni">}</span></pre><p id="7b55" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，为了将它包含在我们的应用程序中，让我们从main.dart中调用它，用下面的代码替换main的内容:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="1f70" class="lj lk it nb b gy nf ng l nh ni">import 'package:flutter/material.dart';<br/>import 'package:flutteranimationtutorial/logoanimation.dart';</span><span id="e53d" class="lj lk it nb b gy nj ng l nh ni">void main() {<br/>  runApp(StartApp());<br/>}</span><span id="401d" class="lj lk it nb b gy nj ng l nh ni">class StartApp extends StatelessWidget {</span><span id="08de" class="lj lk it nb b gy nj ng l nh ni">  @override<br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Flutter Animation Tutorial',<br/>      home: LogoAnimation(),<br/>      debugShowCheckedModeBanner: false,<br/>    );<br/>  }<br/>}</span></pre><p id="a543" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，如果我们连接了一个设备，我们会看到一个空的应用程序，上面有一个白色的屏幕:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="a27e" class="lj lk it nb b gy nf ng l nh ni">flutter run</span></pre><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/29aca96b97798cfb75d349a8c801e76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vi0GsOArlEl_lc6eHyyl2A.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">空应用程序</figcaption></figure><h1 id="627e" class="mi lk it bd ll mj mk ml lo mm mn mo lr mp mq mr lu ms mt mu lx mv mw mx ma my bi translated">实现动画</h1><p id="ccc7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">现在我们都设置好了，我们可以开始设计我们的标志了。正如我们所说，我们需要他们从中心变得更大。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/df174319ea7e9bd913843a0bf3d181be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7_wHbO4WYjorg8CqNfM3w.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">解释每个立方体动画的图表</figcaption></figure><p id="5f33" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用AnimatedBilder，我们将改变每个方块的宽度和高度。为了仔细计划我们的动画，我们将使用2行(分别用于左上—右上和左下—右下)。这两行将使用堆栈上的定位部件来定位。</p><p id="1f57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，首先，我们将把我们的容器()替换为一个堆栈小部件:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="892d" class="lj lk it nb b gy nf ng l nh ni">@override<br/>Widget build(BuildContext context) {<br/>  return Scaffold(<br/>    backgroundColor: Colors.white,<br/>    body: Stack(<br/>      children: [],<br/>    )<br/>  );<br/>}</span></pre><p id="2451" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以将小部件添加到堆栈中，我们将从包含两个顶部方块的小部件开始。为了使它居中，我们将使用一行(由容器包裹以指定宽度):</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="152c" class="lj lk it nb b gy nf ng l nh ni">Positioned(<br/>  top: MediaQuery.of(context).size.height * 0.3,<br/>  height: MediaQuery.of(context).size.height * 0.2,<br/>  child: Container(<br/>    width: MediaQuery.of(context).size.width,<br/>    child: Row(<br/>      mainAxisAlignment: MainAxisAlignment.center,<br/>      children: [],<br/>    )<br/>  )<br/>)</span></pre><p id="f2c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一步是添加将容纳我们的正方形的区域，由宽度为8的边框分隔。</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="b90b" class="lj lk it nb b gy nf ng l nh ni">Container(<br/>  width: MediaQuery.of(context).size.width * 0.3,<br/>  height: MediaQuery.of(context).size.width * 0.3,<br/>),<br/>SizedBox(<br/>  width: 8,<br/>),<br/>Container(<br/>  width: MediaQuery.of(context).size.width * 0.3,<br/>  height: MediaQuery.of(context).size.width * 0.3,<br/>),</span></pre><p id="aa5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些不是我们的方块，而是它的容器。在每个容器内，我们将放置一列，以利用<strong class="ki iu">主轴对齐</strong>和<strong class="ki iu">交叉轴对齐</strong>。这样，当我们的方块长大时，它将总是与我们告诉它的位置对齐。例如，为了增大左上角的正方形，我们将mainAxisAlignment设置为end(底部),将crossAxisAlignment设置为end(右侧),这样它将始终与屏幕中心对齐。</p><h2 id="d91f" class="lj lk it bd ll lm ln dn lo lp lq dp lr kr ls lt lu kv lv lw lx kz ly lz ma mb bi translated">在继续之前，让我们开始定义我们的动画</h2><p id="ae69" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">首先，我们需要用<strong class="ki iu"> TickerProviderStateMixin扩展我们的类功能。</strong>你会发现其他教程使用<strong class="ki iu">SingleTickerProviderStateMixin</strong>，但是因为我们要使用不止一个<strong class="ki iu"> AnimationController </strong>我们需要切换到一个可以管理多个动画的。</p><p id="8df1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，让我们将我们的类定义改为:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="db0a" class="lj lk it nb b gy nf ng l nh ni">class _PlaygroundState extends State&lt;Playground&gt; with TickerProviderStateMixin {</span></pre><p id="d1e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们将定义我们的AnimationController和我们的动画<double> (Double，因为我们希望我们的动画值是Double类型，以便在宽度和高度上使用):</double></p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="515f" class="lj lk it nb b gy nf ng l nh ni">AnimationController _squareTopLeftAnimCont;<br/>Animation&lt;double&gt; _squareTopLeftAnim;</span></pre><p id="7348" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们定义一个方法来处理我们的动画，以及在我们不再使用它们时处理它们:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="246f" class="lj lk it nb b gy nf ng l nh ni">void _initAnimations() async {<br/>}</span><span id="3107" class="lj lk it nb b gy nj ng l nh ni"><a class="ae kf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void dispose() {<br/>    _squareTopLeftAnimCont?.dispose();<br/>    super.dispose();<br/>  }</span></pre><p id="03c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们定义我们的第一个动画。我们将设置一个<strong class="ki iu"> AnimationController </strong>(带有我们动画的持续时间，以及需要引用我们的类的vsync，感谢TickerProviderStateMixin)和补间。补间定义初始值和最终值，以及对animationController的引用和曲线动画的类型。</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="4f76" class="lj lk it nb b gy nf ng l nh ni">_squareTopLeftAnimCont = AnimationController(<br/>        duration: const Duration(milliseconds: 300), vsync: this);</span><span id="9fcc" class="lj lk it nb b gy nj ng l nh ni">_squareTopLeftAnim = Tween&lt;double&gt;(begin: 0, end: 300).animate(<br/>        CurvedAnimation(<br/>            parent: _squareTopLeftAnimCont, curve: Curves.bounceOut));</span></pre><h2 id="1983" class="lj lk it bd ll lm ln dn lo lp lq dp lr kr ls lt lu kv lv lw lx kz ly lz ma mb bi translated">动画的帮助方法</h2><p id="3a7b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">由于我们将使用多个动画，并且我们想在某些点上开始它们，我们将利用<strong class="ki iu"> Future.delayed </strong>方法来延迟它们。我们将创建一个助手函数，它将允许我们在毫秒间隔后执行一段代码。在这段代码中，我们将首先检查我们的animationController是否仍然可用(因为在此期间，我们的小部件可能会因为任何原因而被关闭，比如用户导航到新的屏幕)，如果它存在，我们将使用<strong class="ki iu">运行动画。</strong>方法向前()。</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="48b6" class="lj lk it nb b gy nf ng l nh ni">void _executeAnimation({animation: AnimationController, interval: double}) {<br/>    Future.delayed(Duration(milliseconds: interval), () {<br/>      if (animation != null) {<br/>        animation.forward();<br/>      }<br/>    });<br/>  }</span></pre><p id="9144" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们在initAnimations()方法的底部添加一个调用来执行左上角容器的动画，我们仍然需要创建这个容器:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="2b95" class="lj lk it nb b gy nf ng l nh ni">this._executeAnimation(animation: _squareTopLeftAnimCont, interval: 300);</span></pre><h2 id="68ab" class="lj lk it bd ll lm ln dn lo lp lq dp lr kr ls lt lu kv lv lw lx kz ly lz ma mb bi translated">我们的第一个广场</h2><p id="203b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">因此，正如我们所说的，我们将使用所需对齐的列。在内部，我们将对动画使用AnimatedBuilder，构建一个容器，该容器将使用我们的动画值作为大小:</p><p id="c9b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的正方形的原始期望大小是media query . of(context). size . width * 0.3。我们将补间值设置为从0到300，因此要达到0.3的值，我们需要做300 / 1000。我们将增加一点来匹配可能的弹性动画，因此我们将设置1200而不是1000:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="6108" class="lj lk it nb b gy nf ng l nh ni">width: MediaQuery.of(context).size.width * _squareTopLeftAnim.value / 1200,</span></pre><p id="f311" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们要放入行中的第一个立方体如下:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="c651" class="lj lk it nb b gy nf ng l nh ni">Column(<br/> mainAxisAlignment: MainAxisAlignment.end,<br/> crossAxisAlignment: CrossAxisAlignment.end,<br/> children: [<br/>  AnimatedBuilder(<br/>    animation: _squareTopLeftAnim,<br/>    builder: (ctx, ch) =&gt; Container(<br/>     width: MediaQuery.of(context).size.width *<br/>            _squareTopLeftAnim.value /<br/>            1200,<br/>     height: MediaQuery.of(context).size.width *<br/>            _squareTopLeftAnim.value /<br/>            1200,<br/>     decoration: BoxDecoration(<br/>       color: Color.fromRGBO(245, 0, 0, 1),<br/>       boxShadow: [<br/>        BoxShadow(<br/>          color: Colors.black.withOpacity(.5),<br/>          blurRadius: 20.0,<br/>          spreadRadius: 0.0,<br/>          offset: Offset(<br/>           5.0,<br/>           5.0,<br/>          ),<br/>        )<br/>     ]<br/>    )<br/>   )<br/>  )<br/> ],<br/>),</span></pre><p id="f290" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这一点上，如果我们运行我们的项目，我们可以看到我们的第一个广场是动画:</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mh"><img src="../Images/bbabfa144a795edff7bab533933a3bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*c1fkMIzcXxrNSdZu6v6OUg.gif"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">我们的第一个立方体是动画</figcaption></figure><h2 id="4eca" class="lj lk it bd ll lm ln dn lo lp lq dp lr kr ls lt lu kv lv lw lx kz ly lz ma mb bi translated">添加第二个多维数据集</h2><p id="30d4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">现在我们添加了第一个，我们可以添加第二个。如上所述，我们用一个8宽的SizedBox来分隔容器。因此，在这一点上，我们只需要复制我们所做的第一个广场和动画。</p><p id="5691" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们为右上角的动画添加新的变量:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="936f" class="lj lk it nb b gy nf ng l nh ni">AnimationController _squareTopRightAnimCont;<br/>Animation&lt;double&gt; _squareTopRightAnim;</span></pre><p id="4c42" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的_initAnimations中，我们需要设置这些变量并调用动画:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="7034" class="lj lk it nb b gy nf ng l nh ni">_squareTopRightAnimCont = AnimationController(<br/>      duration: const Duration(milliseconds: 300),<br/>      vsync: this,<br/>    );</span><span id="ecf3" class="lj lk it nb b gy nj ng l nh ni">_squareTopRightAnim = Tween&lt;double&gt;(begin: 0, end: 300).animate(<br/>        CurvedAnimation(<br/>            parent: _squareTopRightAnimCont, curve: Curves.bounceOut));</span></pre><p id="643a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在same _initAnimations方法中，让我们在(<strong class="ki iu">重要</strong>)左上一个之后调用executeAnimation:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="b3b5" class="lj lk it nb b gy nf ng l nh ni">//previous animation<br/>this._executeAnimation(animation: _squareTopLeftAnimCont, interval: 300);</span><span id="dfac" class="lj lk it nb b gy nj ng l nh ni">//current animation<br/>this._executeAnimation(animation: _squareTopRightAnimCont, interval: 500);</span></pre><p id="0e88" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们把它也处理掉:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="9606" class="lj lk it nb b gy nf ng l nh ni"><a class="ae kf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void dispose() {<br/>    _squareTopLeftAnimCont?.dispose();<br/>    _squareTopRightAnimCont?.dispose();<br/>    super.dispose();<br/>  }</span></pre><p id="53ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们只需要添加缺失的立方体，就在SizedBox(宽度:8)的下面:</p><pre class="lf lg lh li gt na nb nc nd aw ne bi"><span id="d75b" class="lj lk it nb b gy nf ng l nh ni">Container(<br/>  width: MediaQuery.of(context).size.width * 0.3,<br/>  height: MediaQuery.of(context).size.width * 0.3,<br/>  child: Column(<br/>    mainAxisAlignment: MainAxisAlignment.end,<br/>    crossAxisAlignment: CrossAxisAlignment.start,<br/>    children: [<br/>      AnimatedBuilder(<br/>          animation: _squareTopRightAnim,<br/>          builder: (ctx, ch) =&gt; Container(<br/>                width: MediaQuery.of(context).size.width *<br/>                    _squareTopRightAnim.value /<br/>                    1200,<br/>                height: MediaQuery.of(context).size.width *<br/>                    _squareTopRightAnim.value /<br/>                    1200,<br/>                decoration: BoxDecoration(<br/>                    color: Color.fromRGBO(245, 0, 0, 1),<br/>                    boxShadow: [<br/>                      BoxShadow(<br/>                        color: Colors.black.withOpacity(.5),<br/>                        blurRadius: 20.0,<br/>                        spreadRadius: 0.0,<br/>                        offset: Offset(<br/>                          5.0,<br/>                          5.0,<br/>                        ),<br/>                      )<br/>                    ]),<br/>              ))<br/>    ],<br/>  ),<br/>)</span></pre><p id="bf85" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，如果我们运行我们的应用程序，我们可以看到两个正方形动画:</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mh"><img src="../Images/65bfdb6654a58a2f5b63a0a9ba1e19b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yKkmx0EinB51kxUkG9Fcow.gif"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">2个正方形的Arcaweb徽标动画</figcaption></figure><p id="65cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/e2ff8d1f785a/" rel="noopener">继续第二部分，完成本教程</a></p></div></div>    
</body>
</html>