<html>
<head>
<title>2020 Firebase Emulator UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2020 Firebase仿真器用户界面</h1>
<blockquote>原文：<a href="https://itnext.io/firebase-emulator-suite-6b51446ca2e7?source=collection_archive---------2-----------------------#2020-08-24">https://itnext.io/firebase-emulator-suite-6b51446ca2e7?source=collection_archive---------2-----------------------#2020-08-24</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/4db0ffa4113b5bb77265cb18b23c7e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X88PWT8A7hu_BtDMG-AuiA.png"/></div></div></figure><p id="5260" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi la translated">T2:在部署到Firebase服务器之前，irebase为开发者提供了一个很好的工具来本地测试他们的代码。它总共支持5个Firebase特性:</p><ol class=""><li id="c459" class="lj lk iu ke b kf kg kj kk kn ll kr lm kv ln kz lo lp lq lr bi translated"><a class="ae ls" href="https://firebase.google.com/docs/firestore" rel="noopener ugc nofollow" target="_blank"> Cloud Firestore </a> —一个noSQL数据库</li><li id="3e44" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated"><a class="ae ls" href="https://firebase.google.com/docs/database" rel="noopener ugc nofollow" target="_blank">实时数据库</a>——云火商店的前身</li><li id="374b" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated"><a class="ae ls" href="https://firebase.google.com/docs/functions" rel="noopener ugc nofollow" target="_blank">云功能</a>——一组运行在谷歌服务器上的服务器代码。函数可以由HTTP请求和Firebase事件触发，例如Firestore CRUD、<a class="ae ls" href="https://firebase.google.com/docs/auth" rel="noopener ugc nofollow" target="_blank"> Firebase Auth </a>和<a class="ae ls" href="https://firebase.google.com/docs/storage" rel="noopener ugc nofollow" target="_blank"> Firebase CloudStorage </a>事件等。</li><li id="b5d2" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated"><a class="ae ls" href="https://firebase.google.com/docs/functions/pubsub-events" rel="noopener ugc nofollow" target="_blank">云发布/订阅</a> —可以定期执行的某些服务器功能的调度程序</li><li id="f17c" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated"><a class="ae ls" href="https://firebase.google.com/docs/hosting" rel="noopener ugc nofollow" target="_blank"> Firebase Hosting </a> —托管网页和资产的工具</li></ol><p id="a046" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">通过运行Firebase Emulator UI，您的计算机就变成了一个本地Firebase服务器，您可以立即测试所有代码。不同的模块仿真器在不同的端口上运行，如下所示:</p><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ly"><img src="../Images/431d3b5065774d59556754a9bdc98758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4f9oTAehJA6wngiad5GSKA.png"/></div></div></figure><p id="53af" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在这篇文章中，我将详细介绍Firebase模拟器的设置和一些技巧。开始吧！</p></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><h1 id="99fd" class="mk ml iu bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">6步设置</h1><h2 id="2204" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">步骤1)安装Firebase CLI工具</h2><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="a022" class="ni ml iu nv b gz nz oa l ob oc">npm install -g firebase-tools</span></pre><h2 id="66b8" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">步骤2)仿真器安装</h2><p id="f114" class="pw-post-body-paragraph kc kd iu ke b kf od kh ki kj oe kl km kn of kp kq kr og kt ku kv oh kx ky kz in bi translated">在Firebase项目初始化期间，可以选择和安装“模拟器”。在终端运行以下命令:</p><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="36b3" class="ni ml iu nv b gz nz oa l ob oc">firebase init</span></pre><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj oi"><img src="../Images/a0a44e4b9e4afe78468d9dbf223a11b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOGqj-o0EKatk5Q3pq8Mng.png"/></div></div></figure><h2 id="f221" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">步骤3)选择要在本地模拟的Firebase特性</h2><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div class="gi gj oj"><img src="../Images/31a042c3bead20080662f3f93f8997f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydDi0nlVWUxs-oH-v_GY4w.png"/></div></figure><h2 id="dec2" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">步骤4)为不同的Firebase功能定义端口</h2><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div class="gi gj oj"><img src="../Images/1fd925d08e43f985710fd5803ccd4828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ea46YV1woyYncRm-P4n87Q.png"/></div></figure><h2 id="a486" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">步骤5)启动模拟器</h2><p id="b15f" class="pw-post-body-paragraph kc kd iu ke b kf od kh ki kj oe kl km kn of kp kq kr og kt ku kv oh kx ky kz in bi translated">可以通过以下简单命令使用空数据启动仿真器:</p><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="744e" class="ni ml iu nv b gz nz oa l ob oc">firebase emulators:start</span></pre><p id="6338" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如果你想要一些初始数据，在开始命令中添加<code class="fe ok ol om nv b">--import</code>参数。这将在下一节<strong class="ke iv">“导入和导出模拟数据”</strong>中详细讨论</p><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="d8e6" class="ni ml iu nv b gz nz oa l ob oc">firebase emulators:start --import=./fooSimulatedDataDirectory --export-on-exit</span></pre><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div class="gi gj oj"><img src="../Images/f39036524aaba10a82ea1b9dafa64d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jp9Zd2dtyM-bulqOue1jhg.png"/></div></figure><h2 id="ffad" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">步骤6)使用云函数进行测试</h2><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj on"><img src="../Images/f662100edbb2041e428dcda04d7ea33f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xOKpidm35L8dOL81d2TOfw.png"/></div></div></figure><p id="4491" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如果已经实现了云功能，终端显示的url会更新到新的本地域(<code class="fe ok ol om nv b">localhost:5001</code>)。您可以打一个电话，看到数据实际上传到Firebase模拟器，而不是远程Firebase服务器。</p></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><h1 id="875b" class="mk ml iu bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">港口管理问题</h1><p id="3047" class="pw-post-body-paragraph kc kd iu ke b kf od kh ki kj oe kl km kn of kp kq kr og kt ku kv oh kx ky kz in bi translated">每台计算机的端口有限，Firebase Emulator可能想要使用一个端口(例如Firestore的<code class="fe ok ol om nv b">8080</code>),但它已被其他应用程序使用。此时，Firebase模拟器将失败，并显示以下错误:</p><p id="02ba" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe ok ol om nv b">Error: Could not start Firestore Emulator, port taken.</code></p><p id="e6e4" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">解决办法很简单。只需在终端运行以下命令，所有当前活动的端口信息就会显示出来:</p><p id="5b85" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe ok ol om nv b">sudo lsof -i -n -P | grep TCP</code></p><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj oo"><img src="../Images/a12ce2070b9ac94221c34f5d81c6d30e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PE-UJJedNL8UTpcahV1l_w.png"/></div></div></figure><p id="4504" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">获取特定端口的进程ID后(例如Firestore的<code class="fe ok ol om nv b">8080</code>)。可以通过运行以下命令来停止该过程:</p><p id="8736" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe ok ol om nv b">kill 63550</code></p><p id="7264" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">终于可以成功运行启动Firebase模拟器的命令了！</p><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="99f6" class="ni ml iu nv b gz nz oa l ob oc">firebase emulators:start</span></pre></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><h1 id="6489" class="mk ml iu bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">Firebase仿真器的限制</h1><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj op"><img src="../Images/582f7326e1bc65e9f2c010954de4e835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gu5HIj_wUr8yDbA97pQXPA.png"/></div></div></figure><p id="604c" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">虽然Firebase Emulator可以模拟云Firestore、实时数据库、托管和发布/订阅触发的事件，但它不能模拟以下事件:</p><ol class=""><li id="d6bc" class="lj lk iu ke b kf kg kj kk kn ll kr lm kv ln kz lo lp lq lr bi translated">由Firebase Auth中的用户创建和删除触发</li><li id="7f3c" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated">云存储中的文件上传和删除</li></ol></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><h1 id="971c" class="mk ml iu bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">导入和导出模拟数据</h1><p id="5dae" class="pw-post-body-paragraph kc kd iu ke b kf od kh ki kj oe kl km kn of kp kq kr og kt ku kv oh kx ky kz in bi translated">默认情况下，Firebase Emulator会在关闭后清除所有模拟数据。为了开发和质量保证，经常需要保存模拟数据并与其他团队成员共享。</p><p id="646c" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">因此，我们应该使用以下命令:</p><h2 id="b1c3" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">将数据导出到目录</h2><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="aedc" class="ni ml iu nv b gz nz oa l ob oc">firebase emulators:export ./fooSimulatedDataDirectory</span></pre><h2 id="ceca" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">用初始数据启动仿真器</h2><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="a0dc" class="ni ml iu nv b gz nz oa l ob oc">firebase emulators:start <br/>--import=./fooSimulatedDataDirectory</span></pre><h2 id="c1ce" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">使用初始数据启动模拟器，并在模拟器关闭后导出数据</h2><pre class="lz ma mb mc gu nu nv nw nx aw ny bi"><span id="8c8f" class="ni ml iu nv b gz nz oa l ob oc">firebase emulators:start <br/>--import=./fooSimulatedDataDirectory <br/>--export-on-exit=./newFooSimulatedDataDirectory</span><span id="c19a" class="ni ml iu nv b gz oq oa l ob oc">// If not specifying the export directory, import directory is used.<br/>firebase emulators:start <br/>--import=./fooSimulatedDataDirectory <br/>--export-on-exit</span></pre><p id="4e3d" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><em class="or">参考:</em> <a class="ae ls" href="https://firebase.google.com/docs/emulator-suite/connect_firestore#import_and_export_data" rel="noopener ugc nofollow" target="_blank"> <em class="or"> Firebase官方文档</em> </a></p></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><h1 id="5924" class="mk ml iu bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">摘要</h1><ol class=""><li id="1806" class="lj lk iu ke b kf od kj oe kn os kr ot kv ou kz lo lp lq lr bi translated">Firebase为云Firestore、实时数据库、托管、云功能和发布/订阅提供模拟器。</li><li id="ee77" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated">Firebase Emulator会在每次终止时清除数据。开发人员应该定义导出模拟数据的路径，并在每次启动模拟器时导入数据。</li><li id="cc02" class="lj lk iu ke b kf lt kj lu kn lv kr lw kv lx kz lo lp lq lr bi translated">Firebase Emulator无法模拟云函数的所有功能。它只能模拟云Firestore、实时数据库和Pub/ Sub触发的事件。如果你想测试一些其他的特性，你最好打开另一个Firebase项目进行测试。</li></ol></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><h1 id="0d73" class="mk ml iu bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">参考文献和阅读材料:</h1><h2 id="edd9" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">1.Firebase本地仿真器</h2><div class="ov ow gq gs ox oy"><a href="https://firebase.google.com/docs/functions/local-emulator" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fp"><div class="pa ab pb cl cj pc"><h2 class="bd iv gz z fq pd fs ft pe fv fx it bi translated">本地运行函数| Firebase</h2><div class="pf l"><h3 class="bd b gz z fq pd fs ft pe fv fx dk translated">Firebase CLI包括一个云函数模拟器，可以模拟以下函数类型:HTTPS函数…</h3></div><div class="pg l"><p class="bd b dl z fq pd fs ft pe fv fx dk translated">firebase.google.com</p></div></div></div></a></div><h2 id="1934" class="ni ml iu bd mm nj nk dn mq nl nm dp mu kn nn no my kr np nq nc kv nr ns ng nt bi translated">2.Firebase本地仿真器UI</h2><div class="ov ow gq gs ox oy"><a href="https://firebase.google.com/docs/emulator-suite" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fp"><div class="pa ab pb cl cj pc"><h2 class="bd iv gz z fq pd fs ft pe fv fx it bi translated">Firebase本地仿真器套件简介</h2><div class="pf l"><h3 class="bd b gz z fq pd fs ft pe fv fx dk translated">Firebase Local Emulator Suite是一套高级工具，面向希望在本地构建和测试应用程序的开发人员…</h3></div><div class="pg l"><p class="bd b dl z fq pd fs ft pe fv fx dk translated">firebase.google.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ka oy"/></div></div></a></div></div><div class="ab cl md me hy mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="in io ip iq ir"><figure class="lz ma mb mc gu jv gi gj paragraph-image"><div class="gi gj pn"><img src="../Images/90e402cdc37ac2e08e870d7d6698b385.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*aJNgtG4c8n80MXko.png"/></div></figure><p id="3ceb" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">欢迎您通过<a class="ae ls" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ my rik _ chow</a>关注我，了解更多信息和文章。感谢您阅读这篇文章。祝您愉快！😄</p></div></div>    
</body>
</html>