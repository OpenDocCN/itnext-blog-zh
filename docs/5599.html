<html>
<head>
<title>How to properly internationalize a React application using i18next</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用i18next正确地国际化React应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-properly-internationalize-a-react-application-using-i18next-e7eafa05b943?source=collection_archive---------0-----------------------#2021-04-14">https://itnext.io/how-to-properly-internationalize-a-react-application-using-i18next-e7eafa05b943?source=collection_archive---------0-----------------------#2021-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ed9d510c536970b6a8cd1f6f554076ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnfCAivTwrqeTfs1n89ynQ.jpeg"/></div></div></figure><p id="edf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为使用你的软件的用户克服语言障碍是一个重要的话题。英语不再是互联网的通用语言。<br/>截至【2020年3月，只有25.9%的互联网用户会说英语。<br/>如果没有本地化，你的用户很有可能会跳过你的网站。因此，如果没有多语言网站，你可能会错过一大部分潜在用户。</p><p id="5317" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在JavaScript生态系统中，有很多国际化框架。在这里你可以找到一些关于JavaScript国际化框架的细节。<br/>在本文中，我们将使用<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>框架来国际化一个<a class="ae kw" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React.js </a>应用。</p><h1 id="0ab9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">所以首先:“为什么接下来是i18？”</h1><p id="25e9" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">说到反应本地化。其中最流行的是带有react扩展的<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank">i18 next</a>react-i18 next，理由很充分:</p><p id="2a2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma"> i18next创建于2011年末。它比你现在使用的大多数库都要老，包括你的主要前端技术(react，vue，…)。</em></p><p id="170a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ➡️可持续发展</strong></p><p id="86e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">基于i18next已经开源了多久，没有什么真正的i18n案例不能用i18next解决。</em></p><p id="d419" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ➡️成熟了</strong></p><p id="7732" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma"> i18next可以用在任何javascript中(还有少数非javascript —)。net、elm、iOS、android、ruby、……)环境，用任何UI框架，用任何i18n格式、……</em><a class="ae kw" href="https://www.i18next.com/overview/supported-frameworks" rel="noopener ugc nofollow" target="_blank"><em class="ma">可能性无穷</em> </a> <em class="ma">。</em></p><p id="c2fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ➡️可扩展</strong></p><p id="6734" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与其他常规的18n框架相比，i18next有很多特性和可能性。</p><p id="932d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ➡️有钱</strong></p><p id="fbbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.i18next.com/overview/comparison-to-others" rel="noopener ugc nofollow" target="_blank">在这里</a>你可以找到更多关于i18next为什么特别以及<a class="ae kw" href="https://locize.com/i18next.html#how-does-i18next-work" rel="noopener ugc nofollow" target="_blank">它是如何工作的</a>的信息。</p><h1 id="2ff3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">让我们开始吧…</h1><h1 id="6742" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">先决条件</h1><p id="266e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">确保安装了Node.js和npm。如果你有一些简单的HTML、JavaScript和基本React.js的经验，最好在跳到<a class="ae kw" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank"> react-i18next </a>之前。</p><h1 id="e5f3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">入门指南</h1><p id="1dee" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">拿起你自己的React项目或创建一个新项目，即使用<a class="ae kw" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>。</p><p id="522a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npx create-react-app my-app</code></p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/49b09904b9f846b0944f09e75e66fb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DaNq0erqZRPx2g8pCN-TQQ.jpeg"/></div></div></figure><p id="85ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将根据用户的偏好调整应用程序来检测语言。<br/>我们将创建一个语言切换器，使不同语言之间的内容变化。</p><p id="6d05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们安装一些i18next依赖项:</p><ul class=""><li id="63fe" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated"><a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank">i18下一个</a></li><li id="4ff2" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank">react-i18下一个</a></li><li id="d297" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://github.com/i18next/i18next-browser-languageDetector" rel="noopener ugc nofollow" target="_blank">i18下一个浏览器语言检测器</a></li></ul><p id="9788" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npm install i18next react-i18next i18next-browser-languagedetector</code></p><p id="228f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们准备一个i18n.js文件:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="4c17" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';</span><span id="99cd" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>    },<br/>    resources: {<br/>      en: {<br/>        translation: {<br/>          // here we will place our translations...<br/>        }<br/>      }<br/>    }<br/>  });</span><span id="b132" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="4deb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们将该文件导入到index.js文件中的某个位置:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="2aba" class="nc ky iq me b gy nd ne l nf ng">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';</span><span id="2da2" class="nc ky iq me b gy nh ne l nf ng">// import i18n (needs to be bundled ;))<br/>import './i18n';</span><span id="957b" class="nc ky iq me b gy nh ne l nf ng">ReactDOM.render(<br/>  &lt;React.StrictMode&gt;<br/>    &lt;App /&gt;<br/>  &lt;/React.StrictMode&gt;,<br/>  document.getElementById('root')<br/>);</span></pre><p id="71d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们试着将一些硬编码的文本移到翻译中。</p><p id="36b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们对第一个文本使用了<a class="ae kw" href="https://react.i18next.com/latest/trans-component" rel="noopener ugc nofollow" target="_blank">转换组件</a>，对第二个文本使用了<a class="ae kw" href="https://react.i18next.com/latest/usetranslation-hook" rel="noopener ugc nofollow" target="_blank">使用转换挂钩</a>:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="0bed" class="nc ky iq me b gy nd ne l nf ng">import logo from './logo.svg';<br/>import './App.css';<br/>import { useTranslation, Trans } from 'react-i18next';</span><span id="5b60" class="nc ky iq me b gy nh ne l nf ng">function App() {<br/>  const { t } = useTranslation();</span><span id="8e0e" class="nc ky iq me b gy nh ne l nf ng">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;p&gt;<br/>          &lt;Trans i18nKey="description.part1"&gt;<br/>            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>          &lt;/Trans&gt;<br/>        &lt;/p&gt;<br/>        &lt;a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        &gt;<br/>          {t('description.part2')}<br/>        &lt;/a&gt;<br/>      &lt;/header&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="547b" class="nc ky iq me b gy nh ne l nf ng">export default App;</span></pre><p id="5169" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些文本现在是翻译资源的一部分:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="e396" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';</span><span id="769c" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>    },<br/>    resources: {<br/>      en: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Edit &lt;1&gt;src/App.js&lt;/1&gt; and save to reload.',<br/>            part2: 'Learn React'<br/>          }<br/>        }<br/>      }<br/>    }<br/>  });</span><span id="2f4f" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><h1 id="f72d" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">语言切换器</h1><p id="45d4" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">现在让我们定义一个语言切换器:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="9b8d" class="nc ky iq me b gy nd ne l nf ng">import logo from './logo.svg';<br/>import './App.css';<br/>import { useTranslation, Trans } from 'react-i18next';</span><span id="e61f" class="nc ky iq me b gy nh ne l nf ng">const lngs = {<br/>  en: { nativeName: 'English' },<br/>  de: { nativeName: 'Deutsch' }<br/>};</span><span id="40a0" class="nc ky iq me b gy nh ne l nf ng">function App() {<br/>  const { t, i18n } = useTranslation();</span><span id="9196" class="nc ky iq me b gy nh ne l nf ng">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;div&gt;<br/>          {Object.keys(lngs).map((lng) =&gt; (<br/>            &lt;button key={lng} style={{ fontWeight: i18n.resolvedLanguage === lng ? 'bold' : 'normal' }} type="submit" onClick={() =&gt; i18n.changeLanguage(lng)}&gt;<br/>              {lngs[lng].nativeName}<br/>            &lt;/button&gt;<br/>          ))}<br/>        &lt;/div&gt;<br/>        &lt;p&gt;<br/>          &lt;Trans i18nKey="description.part1"&gt;<br/>            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>          &lt;/Trans&gt;<br/>        &lt;/p&gt;<br/>        &lt;a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        &gt;<br/>          {t('description.part2')}<br/>        &lt;/a&gt;<br/>      &lt;/header&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="d2b7" class="nc ky iq me b gy nh ne l nf ng">export default App;</span></pre><p id="9815" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还为新语言添加了一些翻译:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="e958" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';</span><span id="ac2c" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>    },<br/>    resources: {<br/>      en: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Edit &lt;1&gt;src/App.js&lt;/1&gt; and save to reload.',<br/>            part2: 'Learn React'<br/>          }<br/>        }<br/>      },<br/>      de: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Ändere &lt;1&gt;src/App.js&lt;/1&gt; und speichere um neu zu laden.',<br/>            part2: 'Lerne React'<br/>          }<br/>        }<br/>      }<br/>    }<br/>  });</span><span id="a311" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/eec46cb1749e0a94aa001082e86f0bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2_k_JUnlSgSm5eRt8cQYbA.jpeg"/></div></div></figure><p id="7b64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 🥳太棒了，你刚刚创建了你的第一个语言切换器！</strong></p><p id="1d3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢<a class="ae kw" href="https://github.com/i18next/i18next-browser-languageDetector" rel="noopener ugc nofollow" target="_blank">i18 next-browser-language detector</a>现在它会尝试检测浏览器语言，如果你为它提供了翻译，它会自动使用该语言。在语言切换器中手动选择的语言保存在本地存储中，下次访问该页面时，该语言将被用作首选语言。</p><h1 id="913b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">插值和多元化</h1><p id="2308" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">i18next不仅仅提供标准的i18n特性。<br/>但是它肯定能够处理<a class="ae kw" href="https://www.i18next.com/translation-function/plurals" rel="noopener ugc nofollow" target="_blank">复数</a>和<a class="ae kw" href="https://www.i18next.com/translation-function/interpolation" rel="noopener ugc nofollow" target="_blank">插值</a>。</p><p id="7c18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来数一数语言的每一次变化:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="5be3" class="nc ky iq me b gy nd ne l nf ng">import logo from './logo.svg';<br/>import './App.css';<br/>import { useTranslation, Trans } from 'react-i18next';<br/>import { useState } from 'react';</span><span id="af7c" class="nc ky iq me b gy nh ne l nf ng">const lngs = {<br/>  en: { nativeName: 'English' },<br/>  de: { nativeName: 'Deutsch' }<br/>};</span><span id="3106" class="nc ky iq me b gy nh ne l nf ng">function App() {<br/>  const { t, i18n } = useTranslation();<br/>  const [count, setCounter] = useState(0);</span><span id="c5d6" class="nc ky iq me b gy nh ne l nf ng">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;div&gt;<br/>          {Object.keys(lngs).map((lng) =&gt; (<br/>            &lt;button key={lng} style={{ fontWeight: i18n.resolvedLanguage === lng ? 'bold' : 'normal' }} type="submit" onClick={() =&gt; {<br/>              i18n.changeLanguage(lng);<br/>              setCounter(count + 1);<br/>            }}&gt;<br/>              {lngs[lng].nativeName}<br/>            &lt;/button&gt;<br/>          ))}<br/>        &lt;/div&gt;<br/>        &lt;p&gt;<br/>          &lt;i&gt;{t('counter', { count })}&lt;/i&gt;<br/>        &lt;/p&gt;<br/>        &lt;p&gt;<br/>          &lt;Trans i18nKey="description.part1"&gt;<br/>            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>          &lt;/Trans&gt;<br/>        &lt;/p&gt;<br/>        &lt;a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        &gt;<br/>          {t('description.part2')}<br/>        &lt;/a&gt;<br/>      &lt;/header&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="634c" class="nc ky iq me b gy nh ne l nf ng">export default App;</span></pre><p id="f637" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">…扩展翻译资源:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="e68b" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';</span><span id="31c6" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>    },<br/>    resources: {<br/>      en: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Edit &lt;1&gt;src/App.js&lt;/1&gt; and save to reload.',<br/>            part2: 'Learn React'<br/>          },<br/>          counter_one: 'Changed language just once',<br/>          counter_other: 'Changed language already {{count}} times'<br/>        }<br/>      },<br/>      de: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Ändere &lt;1&gt;src/App.js&lt;/1&gt; und speichere um neu zu laden.',<br/>            part2: 'Lerne React'<br/>          },<br/>          counter_one: 'Die Sprache wurde erst ein mal gewechselt',<br/>          counter_other: 'Die Sprache wurde {{count}} mal gewechselt'<br/>        }<br/>      }<br/>    }<br/>  });</span><span id="995d" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="d517" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基于计数值i18next将选择正确的复数形式。<br/>在<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank">官方i18next文档</a>中阅读更多关于<a class="ae kw" href="https://www.i18next.com/translation-function/plurals" rel="noopener ugc nofollow" target="_blank">复数</a>和<a class="ae kw" href="https://www.i18next.com/translation-function/interpolation" rel="noopener ugc nofollow" target="_blank">插值</a>的信息。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/4acfe98f2e716b35d1b2a5faae2929df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMVdr24KCOgVwFWDQJaqKQ.jpeg"/></div></div></figure><p id="b595" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">💡i18next也能够处理多种复数形式的语言，比如阿拉伯语:</em></p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="a563" class="nc ky iq me b gy nd ne l nf ng">// translation resources:<br/>{<br/>  "key_0": "zero",<br/>  "key_1": "singular",<br/>  "key_2": "two",<br/>  "key_3": "few",<br/>  "key_4": "many",<br/>  "key_5": "other"<br/>}</span><span id="82bf" class="nc ky iq me b gy nh ne l nf ng">// usage:<br/>t('key', {count: 0}); // -&gt; "zero"<br/>t('key', {count: 1}); // -&gt; "singular"<br/>t('key', {count: 2}); // -&gt; "two"<br/>t('key', {count: 3}); // -&gt; "few"<br/>t('key', {count: 4}); // -&gt; "few"<br/>t('key', {count: 5}); // -&gt; "few"<br/>t('key', {count: 11}); // -&gt; "many"<br/>t('key', {count: 99}); // -&gt; "many"<br/>t('key', {count: 100}); // -&gt; "other"</span></pre><h1 id="5dc0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">格式化</h1><p id="214f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">现在，让我们看看如何在<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>和<a class="ae kw" href="https://moment.github.io/luxon" rel="noopener ugc nofollow" target="_blank"> Luxon </a>的帮助下使用不同的日期格式来处理日期和时间。</p><p id="b02e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npm install luxon</code></p><p id="d684" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们希望有一个显示当前日期的页脚:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="91fb" class="nc ky iq me b gy nd ne l nf ng">import './Footer.css';</span><span id="9dff" class="nc ky iq me b gy nh ne l nf ng">const Footer = ({ t }) =&gt; (<br/>  &lt;div className="Footer"&gt;<br/>    &lt;div&gt;{t('footer.date', { date: new Date() })}&lt;/div&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="3704" class="nc ky iq me b gy nh ne l nf ng">export default Footer;</span><span id="7a6a" class="nc ky iq me b gy nh ne l nf ng">// imported in our App.js and used like this<br/>// &lt;Footer t={t} /&gt;</span></pre><p id="281f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">导入luxon并在i18next的插值选项中定义一个格式函数，如<a class="ae kw" href="https://www.i18next.com/translation-function/formatting" rel="noopener ugc nofollow" target="_blank">文档</a>中所述，并添加新的平移键:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="30b6" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import { DateTime } from 'luxon';</span><span id="bbd0" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    },<br/>    resources: {<br/>      en: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Edit &lt;1&gt;src/App.js&lt;/1&gt; and save to reload.',<br/>            part2: 'Learn React'<br/>          },<br/>          counter_one: 'Changed language just once',<br/>          counter_other: 'Changed language already {{count}} times',<br/>          footer: {<br/>            date: 'Today is {{date, DATE_HUGE}}'<br/>          }<br/>        }<br/>      },<br/>      de: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Ändere &lt;1&gt;src/App.js&lt;/1&gt; und speichere um neu zu laden.',<br/>            part2: 'Lerne React'<br/>          },<br/>          counter_one: 'Die Sprache wurde erst ein mal gewechselt',<br/>          counter_other: 'Die Sprache wurde {{count}} mal gewechselt',<br/>          footer: {<br/>            date: 'Heute ist {{date, DATE_HUGE}}'<br/>          }<br/>        }<br/>      }<br/>    }<br/>  });</span><span id="7a1c" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="f992" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">😎酷，现在我们有一个特定语言的日期格式！</strong></p><p id="06c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">英语:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/c5dbb12e75057dd56f321099fc8e89df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQuRKL_vQ1f5t-sScSDWTg.jpeg"/></div></div></figure><p id="7c74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">德语:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/46266e1478d1a58c4bdeac805733d044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzklcUprMYpsX-MqAes5GQ.jpeg"/></div></div></figure><h1 id="c96a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">语境</h1><p id="5a21" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">基于当天时间的特定问候消息怎么样？即早上、晚上等。多亏了i18next的<a class="ae kw" href="https://www.i18next.com/translation-function/context" rel="noopener ugc nofollow" target="_blank">上下文</a>特性，这才成为可能。</p><p id="b5d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一个getGreetingTime函数，并将结果用作页脚翻译的上下文信息:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="56e1" class="nc ky iq me b gy nd ne l nf ng">import { DateTime } from 'luxon';<br/>import './Footer.css';</span><span id="ee43" class="nc ky iq me b gy nh ne l nf ng">const getGreetingTime = (d = DateTime.now()) =&gt; {<br/>    const split_afternoon = 12; // 24hr time to split the afternoon<br/>    const split_evening = 17; // 24hr time to split the evening<br/>    const currentHour = parseFloat(d.toFormat('hh'));</span><span id="68d6" class="nc ky iq me b gy nh ne l nf ng">    if (currentHour &gt;= split_afternoon &amp;&amp; currentHour &lt;= split_evening) {<br/>        return 'afternoon';<br/>    } else if (currentHour &gt;= split_evening) {<br/>        return 'evening';<br/>  }<br/>    return 'morning';<br/>}</span><span id="5b7d" class="nc ky iq me b gy nh ne l nf ng">const Footer = ({ t }) =&gt; (<br/>  &lt;div className="Footer"&gt;<br/>    &lt;div&gt;{t('footer.date', { date: new Date(), context: getGreetingTime() })}&lt;/div&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="28eb" class="nc ky iq me b gy nh ne l nf ng">export default Footer;</span></pre><p id="6304" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并添加一些上下文特定的翻译关键字:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="d779" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import Backend from 'i18next-http-backend';<br/>import { DateTime } from 'luxon';</span><span id="d025" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // i18next-http-backend<br/>  // loads translations from your server<br/>  // https://github.com/i18next/i18next-http-backend<br/>  .use(Backend)<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    },<br/>    resources: {<br/>      en: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Edit &lt;1&gt;src/App.js&lt;/1&gt; and save to reload.',<br/>            part2: 'Learn React'<br/>          },<br/>          counter_one: 'Changed language just once',<br/>          counter_other: 'Changed language already {{count}} times',<br/>          footer: {<br/>            date: 'Today is {{date, DATE_HUGE}}',<br/>            date_morning: 'Good morning! Today is {{date, DATE_HUGE}} | Have a nice day!',<br/>            date_afternoon: 'Good afternoon! It\'s {{date, DATE_HUGE}}',<br/>            date_evening: 'Good evening! Today was the {{date, DATE_HUGE}}'<br/>          }<br/>        }<br/>      },<br/>      de: {<br/>        translation: {<br/>          description: {<br/>            part1: 'Ändere &lt;1&gt;src/App.js&lt;/1&gt; und speichere um neu zu laden.',<br/>            part2: 'Lerne React'<br/>          },<br/>          counter_one: 'Die Sprache wurde erst ein mal gewechselt',<br/>          counter_other: 'Die Sprache wurde {{count}} mal gewechselt',<br/>          footer: {<br/>            date: 'Heute ist {{date, DATE_HUGE}}',<br/>            date_morning: 'Guten Morgen! Heute ist {{date, DATE_HUGE}} | Wünsche einen schönen Tag!',<br/>            date_afternoon: 'Guten Tag! Es ist {{date, DATE_HUGE}}',<br/>            date_evening: 'Guten Abend! Heute war {{date, DATE_HUGE}}'<br/>          }<br/>        }<br/>      }<br/>    }<br/>  });</span><span id="d842" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="e3c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">😁是啊，它的工作！</strong></p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/385336271e83c74625058f69210130ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oW6wzvYjIeraEu-TB7zRbQ.jpeg"/></div></div></figure><h1 id="a250" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">将翻译与代码分开</h1><p id="a2a7" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">将翻译放在我们的i18n.js文件中是可行的，但是不适合翻译人员使用。让我们把翻译从代码中分离出来，放在专用的json文件中。</p><p id="5363" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为这是一个web应用程序，<a class="ae kw" href="https://github.com/i18next/i18next-http-backend" rel="noopener ugc nofollow" target="_blank"> i18next-http-backend </a>将帮助我们这样做。</p><p id="f665" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npm install i18next-http-backend</code></p><p id="2c00" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将翻译移动到公共文件夹:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/bb228e35828274802e38c1d272a33d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*CYzvNUieUbX6KJAiIpnx0Q.jpeg"/></div></figure><p id="c679" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">修改i18n.js文件以使用i18next-http-backend:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="0adc" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import Backend from 'i18next-http-backend';<br/>import { DateTime } from 'luxon';</span><span id="23cc" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // i18next-http-backend<br/>  // loads translations from your server<br/>  // https://github.com/i18next/i18next-http-backend<br/>  .use(Backend)<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    }<br/>  });</span><span id="a7ea" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="cbf3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在翻译是异步加载的，所以确保你用一个<a class="ae kw" href="https://reactjs.org/docs/react-api.html#reactsuspense" rel="noopener ugc nofollow" target="_blank">悬念</a>组件包装你的应用程序来防止这个错误:<code class="fe mb mc md me b">Uncaught Error: App suspended while rendering, but no fallback UI was specified.</code></p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="b119" class="nc ky iq me b gy nd ne l nf ng">import { Suspense } from 'react';</span><span id="2b0b" class="nc ky iq me b gy nh ne l nf ng">function App() {<br/>  // your app's code...<br/>}</span><span id="8052" class="nc ky iq me b gy nh ne l nf ng">// here app catches the suspense from page in case translations are not yet loaded<br/>export default function WrappedApp() {<br/>  return (<br/>    &lt;Suspense fallback="...is loading"&gt;<br/>      &lt;App /&gt;<br/>    &lt;/Suspense&gt;<br/>  );<br/>}</span></pre><p id="ab01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在你的应用看起来还是一样的，但是你的翻译是分开的。如果你想支持一种新的语言，你只需要创建一个新的文件夹和一个新的翻译json文件。<br/>这使您可以将译文发送给一些翻译人员。<br/>或者，如果你正在使用翻译管理系统，你可以<a class="ae kw" href="https://github.com/locize/react-tutorial#use-the-locize-cli" rel="noopener ugc nofollow" target="_blank">用命令行界面</a>同步文件。</p><p id="4eff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">💡顺便说一下:由于i18next </em>的 <a class="ae kw" href="https://www.i18next.com/principles/namespaces" rel="noopener ugc nofollow" target="_blank"> <em class="ma">名称空间</em> </a> <em class="ma">特性，您还可以拥有多个</em><a class="ae kw" href="https://react.i18next.com/guides/multiple-translation-files" rel="noopener ugc nofollow" target="_blank"/><em class="ma">翻译文件</em></p><p id="0480" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma"> 🧑‍💻这第一部分的代码可以在这里找到</em><a class="ae kw" href="https://github.com/locize/react-i18next-example-app/tree/i18next" rel="noopener ugc nofollow" target="_blank"><em class="ma"/></a><em class="ma">。</em></p><h1 id="1b7c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">更好的翻译管理</h1><p id="ea3e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">通过将译文发送给一些译者或翻译机构，你可以更好地控制和直接联系他们。但这也意味着你要做更多的工作。这是一种传统的方式。但是请注意，发送文件总是会产生开销。</p><blockquote class="no np nq"><p id="098c" class="jy jz ma ka b kb kc kd ke kf kg kh ki nr kk kl km ns ko kp kq nt ks kt ku kv ij bi translated">有更好的选择吗？</p></blockquote><h1 id="5375" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">肯定的！</h1><p id="2526" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">i18next有助于翻译应用程序，这很好，但还有更多。</p><ul class=""><li id="c06c" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">您如何整合任何翻译服务/机构？</li><li id="7ae2" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">您如何跟踪新的或删除的内容？</li><li id="addb" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">你如何处理正确的版本控制？</li><li id="bec8" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">如何在不部署整个应用程序的情况下部署翻译更改？</li><li id="6ecb" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">还有更多…</li></ul><p id="e244" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">寻找类似this❓的东西</strong></p><ul class=""><li id="6d1e" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated"><a class="ae kw" href="https://docs.locize.com/integration/instrumenting-your-code#i-18-next" rel="noopener ugc nofollow" target="_blank">易于集成</a></li><li id="9f63" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">持续部署？<a class="ae kw" href="https://locize.com//how-it-works.html#continouslocalization" rel="noopener ugc nofollow" target="_blank">连续定位</a>！</li><li id="9310" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">轻松管理翻译文件</li><li id="02ec" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://docs.locize.com/guides-tips-and-tricks/working-with-translators/localistars" rel="noopener ugc nofollow" target="_blank">订购专业翻译</a></li><li id="f422" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">分析和统计</li><li id="1c98" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://docs.locize.com/whats-inside/cdn-content-delivery-network" rel="noopener ugc nofollow" target="_blank">从我们的内容交付网络(CDN)中获利</a></li><li id="8154" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://docs.locize.com/more/versioning" rel="noopener ugc nofollow" target="_blank">翻译版本</a></li><li id="7a5c" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://docs.locize.com/whats-inside/auto-machine-translation" rel="noopener ugc nofollow" target="_blank">自动按需机器翻译</a></li><li id="b59c" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://docs.locize.com/more/general-questions/how-is-locize-different-from-the-alternatives#service-lock-in" rel="noopener ugc nofollow" target="_blank">无风险:随身携带您的数据</a></li><li id="2c12" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated"><a class="ae kw" href="https://locize.com/pricing.html" rel="noopener ugc nofollow" target="_blank">透明公平的定价</a></li><li id="9496" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">还有更多…</li></ul><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/0137d7bb25fdcffe9e7b4aa38ebb17e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jack6tkcEJjDdoXCUdoqug.jpeg"/></div></div></figure><h1 id="269d" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">这看起来怎么样？</h1><p id="cb12" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">首先你需要在<a class="ae kw" href="https://locize.com/register" rel="noopener ugc nofollow" target="_blank">注册</a>和<a class="ae kw" href="https://docs.locize.com/integration/getting-started/create-a-user-account" rel="noopener ugc nofollow" target="_blank">登录</a>。<br/>然后<a class="ae kw" href="https://docs.locize.com/integration/getting-started/add-a-new-project" rel="noopener ugc nofollow" target="_blank">在locize中创建一个新项目</a>并添加您的翻译。您可以通过使用<a class="ae kw" href="https://github.com/locize/react-tutorial#use-the-locize-cli" rel="noopener ugc nofollow" target="_blank"> cli </a>或者通过<a class="ae kw" href="https://docs.locize.com/more/general-questions/how-to-import-translations-from-a-file" rel="noopener ugc nofollow" target="_blank">导入单个json文件</a>或者通过<a class="ae kw" href="https://docs.locize.com/integration/api#update-remove-translations" rel="noopener ugc nofollow" target="_blank"> API </a>来添加您的翻译。</p><p id="378f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，我们将把<a class="ae kw" href="https://github.com/i18next/i18next-http-backend" rel="noopener ugc nofollow" target="_blank"> i18next-http-backend </a>替换为<a class="ae kw" href="https://github.com/locize/i18next-locize-backend" rel="noopener ugc nofollow" target="_blank"> i18next-locize-backend </a>。</p><p id="8533" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npm install i18next-locize-backend</code></p><p id="fafd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">导入要本地化的翻译后，删除locales文件夹:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/557e0f4dbb670b656066c60419f8959f.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*FmP7vJph9u63xv2oVp09Pw.jpeg"/></div></figure><p id="13f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">修改i18n.js文件以使用i18next-locize-backend，并确保从locize项目中复制项目id和api-key:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="848d" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import Backend from 'i18next-locize-backend';<br/>import { DateTime } from 'luxon';</span><span id="79fd" class="nc ky iq me b gy nh ne l nf ng">const locizeOptions = {<br/>  projectId: '0bbc223a-9aba-4a90-ab93-ab9d7bf7f780',<br/>  apiKey: 'aaad4141-54ba-4625-ae37-657538fe29e7', // YOU should not expose your apps API key to production!!!<br/>  referenceLng: 'en',<br/>};</span><span id="6672" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // i18next-locize-backend<br/>  // loads translations from your project, saves new keys to it (saveMissing: true)<br/>  // https://github.com/locize/i18next-locize-backend<br/>  .use(Backend)<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    },<br/>    backend: locizeOptions<br/>  });</span><span id="bc7a" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="e3f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/locize/i18next-locize-backend" rel="noopener ugc nofollow" target="_blank"> i18next-locize-backend </a>提供了直接从locize检索可用语言的功能，让我们使用它:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="31da" class="nc ky iq me b gy nd ne l nf ng">import logo from './logo.svg';<br/>import './App.css';<br/>import { useTranslation, Trans } from 'react-i18next';<br/>import { useState, Suspense, useEffect } from 'react';<br/>import Footer from './Footer'</span><span id="d9ac" class="nc ky iq me b gy nh ne l nf ng">function App() {<br/>  const { t, i18n } = useTranslation();<br/>  const [count, setCounter] = useState(0);</span><span id="5074" class="nc ky iq me b gy nh ne l nf ng">  const [lngs, setLngs] = useState({ en: { nativeName: 'English' }});</span><span id="dbcd" class="nc ky iq me b gy nh ne l nf ng">  useEffect(() =&gt; {<br/>    i18n.services.backendConnector.backend.getLanguages((err, ret) =&gt; {<br/>      if (err) return // TODO: handle err...<br/>      setLngs(ret);<br/>    });<br/>  }, []);</span><span id="2699" class="nc ky iq me b gy nh ne l nf ng">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;div&gt;<br/>          {Object.keys(lngs).map((lng) =&gt; (<br/>            &lt;button key={lng} style={{ fontWeight: i18n.resolvedLanguage === lng ? 'bold' : 'normal' }} type="submit" onClick={() =&gt; {<br/>              i18n.changeLanguage(lng);<br/>              setCounter(count + 1);<br/>            }}&gt;<br/>              {lngs[lng].nativeName}<br/>            &lt;/button&gt;<br/>          ))}<br/>        &lt;/div&gt;<br/>        &lt;p&gt;<br/>          &lt;i&gt;{t('counter', { count })}&lt;/i&gt;<br/>        &lt;/p&gt;<br/>        &lt;p&gt;<br/>          &lt;Trans i18nKey="description.part1"&gt;<br/>            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>          &lt;/Trans&gt;<br/>        &lt;/p&gt;<br/>        &lt;a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        &gt;<br/>          {t('description.part2')}<br/>        &lt;/a&gt;<br/>      &lt;/header&gt;<br/>      &lt;Footer t={t} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="62f4" class="nc ky iq me b gy nh ne l nf ng">// here app catches the suspense from page in case translations are not yet loaded<br/>export default function WrappedApp() {<br/>  return (<br/>    &lt;Suspense fallback="...is loading"&gt;<br/>      &lt;App /&gt;<br/>    &lt;/Suspense&gt;<br/>  );<br/>}</span></pre><h1 id="7b27" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">保存缺失的翻译</h1><p id="248e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">由于使用了<a class="ae kw" href="https://www.i18next.com/overview/configuration-options#missing-keys" rel="noopener ugc nofollow" target="_blank"> saveMissing功能</a>，在开发应用程序时，新的密钥会自动添加到locize中。</p><p id="ee75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">只需在i18中传递<code class="fe mb mc md me b">saveMissing: true</code>下一个选项:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="3ea7" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import Backend from 'i18next-locize-backend';<br/>import { DateTime } from 'luxon';</span><span id="0bd5" class="nc ky iq me b gy nh ne l nf ng">const locizeOptions = {<br/>  projectId: '0bbc223a-9aba-4a90-ab93-ab9d7bf7f780',<br/>  apiKey: 'aaad4141-54ba-4625-ae37-657538fe29e7', // YOU should not expose your apps API key to production!!!<br/>  referenceLng: 'en',<br/>};</span><span id="2d6b" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // i18next-locize-backend<br/>  // loads translations from your project, saves new keys to it (saveMissing: true)<br/>  // https://github.com/locize/i18next-locize-backend<br/>  .use(Backend)<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    },<br/>    backend: locizeOptions,<br/>    saveMissing: true<br/>  });</span><span id="c397" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="c51d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每次您使用新密钥时，它都会被发送到locize，即:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="b08e" class="nc ky iq me b gy nd ne l nf ng">&lt;div&gt;{t('new.key', 'this will be added automatically')}&lt;/div&gt;</span></pre><p id="94d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将导致如下locize:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/1497295ac07a9805fb5400a20ffe633c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wm7enPe-xWj-wo8BoFiJ5Q.jpeg"/></div></div></figure><h1 id="1544" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">👀但是还有更多…</h1><p id="c512" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">感谢<a class="ae kw" href="https://github.com/locize/locize-lastused" rel="noopener ugc nofollow" target="_blank"> locize-lastused </a>插件，你将能够<a class="ae kw" href="https://docs.locize.com/guides-tips-and-tricks/unused-translations" rel="noopener ugc nofollow" target="_blank">找到并过滤locize哪些键被使用或不再被使用</a>。</p><p id="a379" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<a class="ae kw" href="https://github.com/locize/locize" rel="noopener ugc nofollow" target="_blank"> locize </a>插件的帮助下，你将能够在上下文编辑器的locize <a class="ae kw" href="https://docs.locize.com/more/incontext-editor" rel="noopener ugc nofollow" target="_blank">中使用你的应用。</a></p><p id="7765" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，在<a class="ae kw" href="https://docs.locize.com/whats-inside/auto-machine-translation" rel="noopener ugc nofollow" target="_blank">自动机器翻译工作流程</a>的帮助下，并使用<a class="ae kw" href="https://www.i18next.com/overview/configuration-options#missing-keys" rel="noopener ugc nofollow" target="_blank">保存缺失功能</a>，新键不仅会在开发应用程序时自动定位，还会使用机器翻译自动翻译成目标语言。</p><p id="b1c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">看看这个</em> <a class="ae kw" href="https://youtu.be/VfxBpSXarlU" rel="noopener ugc nofollow" target="_blank"> <em class="ma">视频</em> </a> <em class="ma">看看自动机器翻译工作流程是什么样子的！</em></p><figure class="mg mh mi mj gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="746d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mb mc md me b">npm install locize-lastused locize</code></p><p id="13e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在i18n.js中使用它们:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="7c0e" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import Backend from 'i18next-locize-backend';<br/>import LastUsed from 'locize-lastused';<br/>import { locizePlugin } from 'locize';<br/>import { DateTime } from 'luxon';</span><span id="54ab" class="nc ky iq me b gy nh ne l nf ng">const locizeOptions = {<br/>  projectId: '0bbc223a-9aba-4a90-ab93-ab9d7bf7f780',<br/>  apiKey: 'aaad4141-54ba-4625-ae37-657538fe29e7', // YOU should not expose your apps API key to production!!!<br/>  referenceLng: 'en',<br/>};</span><span id="3d66" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // locize-lastused<br/>  // sets a timestamp of last access on every translation segment on locize<br/>  // -&gt; safely remove the ones not being touched for weeks/months<br/>  // https://github.com/locize/locize-lastused<br/>  .use(LastUsed)<br/>  // locize-editor<br/>  // InContext Editor of locize<br/>  .use(locizePlugin)<br/>  // i18next-locize-backend<br/>  // loads translations from your project, saves new keys to it (saveMissing: true)<br/>  // https://github.com/locize/i18next-locize-backend<br/>  .use(Backend)<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    },<br/>    backend: locizeOptions,<br/>    locizeLastUsed: locizeOptions,<br/>    saveMissing: true<br/>  });</span><span id="4322" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="20cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://docs.locize.com/whats-inside/auto-machine-translation" rel="noopener ugc nofollow" target="_blank">自动机器翻译</a>:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/dcbb0ddb14e83fae024098aa0103ec19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iKraPMlYshjAPIorKPEaEg.jpeg"/></div></div></figure><p id="f5e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://dev.to/adrai/(https://docs.locize.com/guides-tips-and-tricks/unused-translations)" rel="noopener ugc nofollow" target="_blank">上次使用的翻译过滤器</a>:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9467bcde1d9b3fdd4f770f66cc0e99a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*F8DOjbX7ulxJWjLnH6lSTA.jpeg"/></div></figure><p id="ac95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://docs.locize.com/more/incontext-editor" rel="noopener ugc nofollow" target="_blank"> InContext编辑</a>:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/5bbae722e059641c030a908539a91aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6EvMQd0eMDjvc9bQ1j53Q.jpeg"/></div></div></figure><h1 id="f961" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">📦让我们为生产做准备🚀</h1><p id="e9b1" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">现在，我们为<a class="ae kw" href="https://docs.locize.com/guides-tips-and-tricks/going-production" rel="noopener ugc nofollow" target="_blank">投产</a>准备app。</p><p id="8bd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先在locize中，为生产创建一个专用版本。不要启用该版本的自动发布，而是手动发布或通过<a class="ae kw" href="https://docs.locize.com/integration/api#publish-version" rel="noopener ugc nofollow" target="_blank"> API </a>或通过<a class="ae kw" href="https://github.com/locize/locize-cli#publish-version" rel="noopener ugc nofollow" target="_blank"> CLI </a>发布。<br/>最后，<a class="ae kw" href="https://docs.locize.com/more/caching" rel="noopener ugc nofollow" target="_blank">为生产版本启用高速缓存控制最大老化</a>。</p><p id="55b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们利用react-scripts 的<a class="ae kw" href="https://create-react-app.dev/docs/adding-custom-environment-variables/" rel="noopener ugc nofollow" target="_blank">环境特性。</a></p><p id="a775" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一个默认环境文件，一个用于开发，一个用于生产:</p><p id="a6a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">。环境:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="34ff" class="nc ky iq me b gy nd ne l nf ng">SKIP_PREFLIGHT_CHECK=true</span><span id="6c03" class="nc ky iq me b gy nh ne l nf ng">REACT_APP_VERSION=$npm_package_version</span><span id="fe58" class="nc ky iq me b gy nh ne l nf ng"># locize<br/>REACT_APP_LOCIZE_PROJECTID=0bbc223a-9aba-4a90-ab93-ab9d7bf7f780<br/>REACT_APP_LOCIZE_REFLNG=en</span></pre><p id="53c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开发环境:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="4bdc" class="nc ky iq me b gy nd ne l nf ng">REACT_APP_LOCIZE_VERSION=latest<br/>REACT_APP_LOCIZE_APIKEY=aaad4141-54ba-4625-ae37-657538fe29e7</span></pre><p id="b302" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">生产环境:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="d559" class="nc ky iq me b gy nd ne l nf ng">REACT_APP_LOCIZE_VERSION=production</span></pre><p id="c11b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们改编i18n.js文件:</p><pre class="mg mh mi mj gt my me mz na aw nb bi"><span id="659e" class="nc ky iq me b gy nd ne l nf ng">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';<br/>import LanguageDetector from 'i18next-browser-languagedetector';<br/>import Backend from 'i18next-locize-backend';<br/>import LastUsed from 'locize-lastused';<br/>import { locizePlugin } from 'locize';<br/>import { DateTime } from 'luxon';</span><span id="9cdc" class="nc ky iq me b gy nh ne l nf ng">const isProduction = process.env.NODE_ENV === 'production';</span><span id="0aab" class="nc ky iq me b gy nh ne l nf ng">const locizeOptions = {<br/>  projectId: process.env.REACT_APP_LOCIZE_PROJECTID,<br/>  apiKey: process.env.REACT_APP_LOCIZE_APIKEY, // YOU should not expose your apps API key to production!!!<br/>  referenceLng: process.env.REACT_APP_LOCIZE_REFLNG,<br/>  version: process.env.REACT_APP_LOCIZE_VERSION<br/>};</span><span id="1f6e" class="nc ky iq me b gy nh ne l nf ng">if (!isProduction) {<br/>  // locize-lastused<br/>  // sets a timestamp of last access on every translation segment on locize<br/>  // -&gt; safely remove the ones not being touched for weeks/months<br/>  // https://github.com/locize/locize-lastused<br/>  i18n.use(LastUsed);<br/>}</span><span id="44ea" class="nc ky iq me b gy nh ne l nf ng">i18n<br/>  // locize-editor<br/>  // InContext Editor of locize<br/>  .use(locizePlugin)<br/>  // i18next-locize-backend<br/>  // loads translations from your project, saves new keys to it (saveMissing: true)<br/>  // https://github.com/locize/i18next-locize-backend<br/>  .use(Backend)<br/>  // detect user language<br/>  // learn more: https://github.com/i18next/i18next-browser-languageDetector<br/>  .use(LanguageDetector)<br/>  // pass the i18n instance to react-i18next.<br/>  .use(initReactI18next)<br/>  // init i18next<br/>  // for all options read: https://www.i18next.com/overview/configuration-options<br/>  .init({<br/>    debug: true,<br/>    fallbackLng: 'en',<br/>    interpolation: {<br/>      escapeValue: false, // not needed for react as it escapes by default<br/>      format: (value, format, lng) =&gt; {<br/>        if (value instanceof Date) {<br/>          return DateTime.fromJSDate(value).setLocale(lng).toLocaleString(DateTime[format])<br/>        }<br/>        return value;<br/>      }<br/>    },<br/>    backend: locizeOptions,<br/>    locizeLastUsed: locizeOptions,<br/>    saveMissing: !isProduction // you should not use saveMissing in production<br/>  });</span><span id="3fb6" class="nc ky iq me b gy nh ne l nf ng">export default i18n;</span></pre><p id="b275" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，在开发过程中，您将继续保存丢失的键并利用lastused特性。=&gt; npm运行开始</p><p id="adc2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在生产环境中，saveMissing和lastused被禁用，并且api-key也不公开。=&gt; npm运行构建&amp;&amp; npm运行服务</p><p id="d83f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://docs.locize.com/more/caching" rel="noopener ugc nofollow" target="_blank">缓存</a>:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/40d3e97fea0b99851cbce247f6d5a3aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1YW1IQYAW8DpqBMdCJj8UQ.jpeg"/></div></div></figure><p id="6f46" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://docs.locize.com/more/versioning#merging-versions" rel="noopener ugc nofollow" target="_blank">合并版本</a>:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/3aca190020707fba551ffc4a700042dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uJAHHYs9Uw_OqB9Sr351oA.jpeg"/></div></div></figure><p id="37fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma"> 🧑‍💻完整的代码可以在</em>  <em class="ma">这里找到</em> <a class="ae kw" href="https://github.com/locize/react-i18next-example-app" rel="noopener ugc nofollow" target="_blank"> <em class="ma">。</em></a></p><p id="f97e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">查看</em> <a class="ae kw" href="https://www.youtube.com/watch?v=ds-yEEYP1Ks&amp;t=423s" rel="noopener ugc nofollow" target="_blank"> <em class="ma">代码整合部分</em> </a> <em class="ma">在此</em> <a class="ae kw" href="https://www.youtube.com/watch?v=ds-yEEYP1Ks" rel="noopener ugc nofollow" target="_blank"> <em class="ma"> YouTube视频</em> </a> <em class="ma">。</em></p><p id="915d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有一个<a class="ae kw" href="https://youtu.be/SA_9i4TtxLQ" rel="noopener ugc nofollow" target="_blank"> i18next速成视频</a>。</p><figure class="mg mh mi mj gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="b1e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇博文还有一个<a class="ae kw" href="https://www.ibidem-translations.com/edu/translate-react-i18next-app/" rel="noopener ugc nofollow" target="_blank">西班牙语翻译。</a></p><h1 id="5a62" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">🎉🥳祝贺你🎊🎁</h1><p id="1bf3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我希望你已经了解了一些关于<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>、<a class="ae kw" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank"> React.js本地化</a>和<a class="ae kw" href="https://locize.com/" rel="noopener ugc nofollow" target="_blank">现代本地化工作流程</a>的新东西。</p><p id="5a36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以如果你想让你的i18n话题更上一层楼，值得尝试一下<a class="ae kw" href="https://locize.com/" rel="noopener ugc nofollow" target="_blank"> locize </a>。</p><p id="f0dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://locize.com/" rel="noopener ugc nofollow" target="_blank"> locize </a>的创始人也是<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>的创造者。所以使用<a class="ae kw" href="https://locize.com/" rel="noopener ugc nofollow" target="_blank">定位</a>你就直接支持了<a class="ae kw" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>的未来。</p><h1 id="c3ff" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi">👍</h1></div></div>    
</body>
</html>