<html>
<head>
<title>7 React Clean Code Tips You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的7个干净代码技巧</h1>
<blockquote>原文：<a href="https://itnext.io/7-react-clean-code-tips-you-should-know-846b8108fc46?source=collection_archive---------0-----------------------#2022-10-02">https://itnext.io/7-react-clean-code-tips-you-should-know-846b8108fc46?source=collection_archive---------0-----------------------#2022-10-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9e6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我总结了七个实用技巧，供您编写可维护的React代码。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/874decbdb787e383acb82ba70cbfb082.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JTH3evu5jteaC7Ar"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">由<a class="ae lb" href="https://unsplash.com/@abeso?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sebastian Bednarek </a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="39de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lj">更新2022年12月28日，我推出了免费的</em> <a class="ae lb" href="https://icodeit.ck.page/7-day-react-clean-code" rel="noopener ugc nofollow" target="_blank"> <em class="lj"> 7天React Clean Code Challenge</em></a><em class="lj">。在完成挑战的同时，和我一起学习更多实用的技巧。</em></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="a9fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你有兴趣深入研究这个主题，我已经创建了一个免费的在线课程，涵盖了这篇文章中讨论的所有主题。本课程旨在互动、吸引人，并包含实用的技巧和技术。课程结束时，你将对这门学科有一个扎实的理解，并能够在日常生活中运用所学。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="5221" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">1.有意义的名字</h1><blockquote class="mi mj mk"><p id="0836" class="jn jo lj jp b jq jr js jt ju jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj kk ij bi translated"><em class="iq">计算机科学只有两个硬东西:缓存失效和事物命名。</em></p><p id="c6ce" class="jn jo lj jp b jq jr js jt ju jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj kk ij bi translated"><em class="iq"> —菲尔·卡尔顿</em></p></blockquote><p id="2444" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像任何其他编程语言一样，命名总是很难。我们应该尽最大努力给事物命名清楚，不管是函数、变量还是元件。</p><p id="dc85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的名字应该直截了当，简洁直接。例如:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/d87bf35780661f6aab3d8a2abaafe7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LYbjtapvIF2LAWY3EqziuA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在一个组件中同时使用item和todo</figcaption></figure><p id="fa43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有两个概念，它们可能会引起一些混淆:<code class="fe mp mq mr ms b">Todo</code>和<code class="fe mp mq mr ms b">Item</code>。实际上，它们在上下文中是一回事。因此代码可以重构为:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mt"><img src="../Images/e0f24dbbd033453ca56e35b47410b08f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PNx5eOn9n5dc0iIAvDSVVQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">统一到待办事宜以消除混乱</figcaption></figure><p id="96ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，尽量消除名称中的混淆，尤其是那些有消费者的名称(无论是内部的还是外部的)。注意，一旦你的API发布了，就不仅仅是你的了，所以要多注意这些公共API名(组件名、属性名和类型)。</p><h1 id="a3dd" class="lk ll iq bd lm ln mu lp lq lr mv lt lu lv mw lx ly lz mx mb mc md my mf mg mh bi translated">2.可测试的反应代码</h1><p id="61ce" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">传统上，在测试产品代码之前很难建立测试机制。但是有了<code class="fe mp mq mr ms b">jest</code>和<code class="fe mp mq mr ms b">react-testing-library</code>，在你的React项目中就不再是这样了。</p><p id="d644" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，我发现在React中应用测试驱动开发非常容易，因为测试设置过程非常容易。</p><p id="99a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我并不是说你应该用<code class="fe mp mq mr ms b">react-testing-library</code>来代替<code class="fe mp mq mr ms b">cypress</code>或者真正的浏览器测试，但是有了它，你就可以很好地模拟用户实际看到的你的代码。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/5d1770b867509cc86b216a0bbce28639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*90Jp-egw-DwRYf2F81YFMw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用反应测试库进行测试</figcaption></figure><p id="ea2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你在测试你的组件的行为，这就是重点。</p><h1 id="5d50" class="lk ll iq bd lm ln mu lp lq lr mv lt lu lv mw lx ly lz mx mb mc md my mf mg mh bi translated">3.使用钩子</h1><p id="5997" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">所以在React 16.8之前，在组件之间重用有状态逻辑不容易。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/b7564321e7a450f3819b3b69ee351127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3q2K6sUia6Bu4xAz33CXw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">对可重用的逻辑使用钩子</figcaption></figure><p id="638f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在该版本之后使用React，<code class="fe mp mq mr ms b">hooks</code>应该是可重用逻辑的默认选择。说到逻辑，我指的是任何与用户界面无关的代码，比如数据获取、状态管理和数据操作(你甚至可以将这种逻辑放到它们自己的层中，比如我在这里讨论的ACL或数据映射器<a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/the-right-way-to-place-business-logic-in-your-react-application-8bf16145f48d"/>)。</p><h1 id="7387" class="lk ll iq bd lm ln mu lp lq lr mv lt lu lv mw lx ly lz mx mb mc md my mf mg mh bi translated">4.使用组合</h1><p id="853a" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">合成是一项超级强大的技术，就我个人而言，我将它视为专业开发人员和业余开发人员之间的重要分界线，尽管很难定义开发人员在日常工作中掌握合成的能力有多强。</p><p id="6f69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">幸运的是，在React中，使用复合非常简单。如果你已经使用了<code class="fe mp mq mr ms b">children</code>或<code class="fe mp mq mr ms b"><a class="ae lb" href="https://reactjs.org/docs/render-props.html" rel="noopener ugc nofollow" target="_blank">render</a></code>或<a class="ae lb" href="https://reactjs.org/docs/render-props.html" rel="noopener ugc nofollow" target="_blank">道具</a>，你已经在使用构图了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/ac1e1e0074dbceef295ccaebd3e0356c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKWElq7N8FORXEmEwrLyqA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">通用卡组件</figcaption></figure><p id="e1ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用标题作为子项:</p><pre class="km kn ko kp gt ng ms nh ni aw nj bi"><span id="8d40" class="nk ll iq ms b gy nl nm l nn no">&lt;GenericCard&gt;<br/>  &lt;h3&gt;I'm a heading&lt;/h3&gt;<br/>&lt;/GenericCard&gt;</span></pre><p id="096d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者更复合的成分:</p><pre class="km kn ko kp gt ng ms nh ni aw nj bi"><span id="7107" class="nk ll iq ms b gy nl nm l nn no">&lt;GenericCard&gt;<br/>  &lt;section&gt;<br/>    &lt;h3&gt;I'm a heading&lt;/h3&gt;<br/>    &lt;p&gt;I have some additional description&lt;/p&gt;<br/>  &lt;/section&gt;<br/>&lt;/GenericCard&gt;</span></pre><p id="2266" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而<code class="fe mp mq mr ms b">GenericCard</code>对传进来的<code class="fe mp mq mr ms b">children</code>一无所知。</p><h1 id="5154" class="lk ll iq bd lm ln mu lp lq lr mv lt lu lv mw lx ly lz mx mb mc md my mf mg mh bi translated">5.小组件是好组件</h1><p id="19ab" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">这是目前为止我最喜欢的技巧，我认为它与我们这里的大多数技巧都有联系。实际上，如果你在代码中看到数百行，你可能做错了。尽管可能有一些例外，但我发现在大多数情况下，您可以将代码分割成更小的部分来提高质量。</p><p id="ea2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">小意味着一次专注于一件事。因此，组件易于测试、修改和理解。请注意，我并不是说您应该实施一些eslint规则来限制代码行，但是您应该密切关注它:当文件增长时，您应该检查您是否在其中放入了逻辑(这些可以放入一个钩子中)，或者它做了太多的事情(这些可以分解为子组件)等等。</p><h1 id="12f1" class="lk ll iq bd lm ln mu lp lq lr mv lt lu lv mw lx ly lz mx mb mc md my mf mg mh bi translated">6.关注点分离</h1><p id="4f6e" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">在任何React应用程序中，我们都可以将代码分为几类。表示传入数据的视图、<code class="fe mp mq mr ms b">service</code>或<code class="fe mp mq mr ms b">data-provider</code>获取数据并将其转换为视图使用的格式，以及基础设施代码(设置JWT令牌，确保第三方集成等。).</p><p id="2aca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些模块或者层应该是自然拆分到不同的地方，但更多的时候，我看到人们把它们混在一起。在许多React组件中，他们在文件的前半部分做一些数据转换。在其他地方，他们试图从不同的上下文中提取随机的东西，然后进行条件渲染。</p><p id="882e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">抓住诱惑，从创建一个<code class="fe mp mq mr ms b">tsx</code>文件开始，首先考虑它属于哪个类别，在他们自己的模块中进行数据计算，然后在你的React组件中使用它们。</p><h1 id="3d40" class="lk ll iq bd lm ln mu lp lq lr mv lt lu lv mw lx ly lz mx mb mc md my mf mg mh bi translated">7.其他领域的成熟实践</h1><p id="0c07" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">虽然，乍一看，React就像是HTML和JavaScript(有时甚至是CSS)在单个文件中的混合。一旦您熟悉了jsx语法，您很快就会注意到React代码与其他代码没有太大的不同，比如Java或Python。</p><p id="d6eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，定义一个变量，调用一个函数甚至缩进的方式都不一样，只是层次更高。你仍然在处理模块和它们的关系，比如，哪个模块执行什么任务，以及其他模块如何依赖它们。</p><p id="2b54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着我们完全可以借鉴其他领域的经验。就像在面向对象的项目中，我们使用一个接口来分离协议和实现，我们也可以在React中使用(就像在<code class="fe mp mq mr ms b">render</code> props中)。在所有其他编程语言中，我们都有一个单一的责任原则，那么我们为什么不用它来指导我们拆分React组件呢？</p><p id="eee2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，如果您有其他编程语言背景，请尝试寻找机会在React代码中应用这些经过验证的实践。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="fcf8" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">摘要</h1><p id="f996" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">我<a class="ae lb" href="https://icodeit.ck.page/maintainable-react-tips" rel="noopener ugc nofollow" target="_blank">制作了一份关于我们在这里讨论的技巧的小抄</a>，如果你喜欢，可以打印出来。我有一本关于可维护的React的书，你可以从中了解更多。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="8635" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">如果你喜欢阅读，请</strong> <a class="ae lb" href="https://juntao.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">报名参加我的邮件列表</strong> </a> <strong class="jp ir">。我每周通过</strong> <a class="ae lb" href="https://juntao-qiu.medium.com/" rel="noopener"> <strong class="jp ir">博客</strong></a><strong class="jp ir"/><a class="ae lb" href="https://leanpub.com/u/juntao" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">书籍</strong> </a> <strong class="jp ir">和</strong> <a class="ae lb" href="https://www.youtube.com/@icodeit.juntao" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">视频</strong> </a> <strong class="jp ir">分享干净代码和重构技术。</strong></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="15b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢读这篇文章。如果你愿意支持我成为一名作家，可以考虑注册<a class="ae lb" href="https://medium.com/@juntao-qiu/membership" rel="noopener">成为一名媒体成员</a>。每月只需5美元，你就可以无限制地访问我在Medium上的所有文章——以及上述作者和其他人的所有文章！</p></div></div>    
</body>
</html>