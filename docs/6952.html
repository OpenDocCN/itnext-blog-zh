<html>
<head>
<title>Deep Dive in Dart Constructors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入研究Dart构造函数</h1>
<blockquote>原文：<a href="https://itnext.io/deep-dive-in-dart-constructors-51e4c006fb8f?source=collection_archive---------0-----------------------#2022-04-24">https://itnext.io/deep-dive-in-dart-constructors-51e4c006fb8f?source=collection_archive---------0-----------------------#2022-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/bcdca16946154c5f3f3ad740151cbe33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ODofBqu2At3Zy21DWkv7OA.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="7bc0" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">你会发现所有关于构造函数的东西</h2></div><h2 id="0491" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">首先</h2><h1 id="3ba2" class="lp ku je bd kv lq lr ls ky lt lu lv lb kk lw kl lf kn lx ko lj kq ly kr ln lz bi translated">什么是构造函数？</h1><blockquote class="ma"><p id="cd14" class="mb mc je bd md me mf mg mh mi mj mk dk translated">构造函数是一种用于初始化对象的特殊方法。当创建类的对象时，调用构造函数。</p></blockquote><h2 id="c969" class="kt ku je bd kv kw ml dn ky kz mm dp lb lc mn le lf lg mo li lj lk mp lm ln lo bi translated">基本上</h2><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="d974" class="kt ku je mv b gy mz na l nb nc">final ehe = <strong class="mv jf">MyClass();</strong> // Creates an instance</span><span id="cf6f" class="kt ku je mv b gy nd na l nb nc"><strong class="mv jf">class MyClass</strong> <strong class="mv jf">{</strong><br/>  <strong class="mv jf">MyClass();</strong> // Fires immediately when created (this guy is cons.)<br/><strong class="mv jf">}</strong></span></pre><h2 id="755c" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">构造函数中只有一个规则！</h2><p id="5592" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">也就是；</p><blockquote class="ma"><p id="0b15" class="mb mc je bd md me mf mg mh mi mj mk dk translated">与其类名同名！！</p></blockquote><h2 id="8439" class="kt ku je bd kv kw ml dn ky kz mm dp lb lc mn le lf lg mo li lj lk mp lm ln lo bi translated">好的，我们知道了！但是..。</h2><h1 id="552b" class="lp ku je bd kv lq lr ls ky lt lu lv lb kk lw kl lf kn lx ko lj kq ly kr ln lz bi translated">我们到底有什么样的构造函数类型？</h1><h2 id="2a58" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">默认构造函数—类()</h2><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="29f8" class="kt ku je mv b gy mz na l nb nc">// Default Constructor<br/>// Does nothing special</span><span id="3150" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  String name = 'ehe';<br/>  <strong class="mv jf">User();</strong><br/>}</span><span id="3855" class="kt ku je mv b gy nd na l nb nc">///////////////////<br/>// Constructor with parameters<br/>// Gets parameters and assigns to them to their variables </span><span id="9566" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  String name;<br/>  <strong class="mv jf">User(this.name);</strong><br/>}</span><span id="e5a1" class="kt ku je mv b gy nd na l nb nc">///////////////////<br/>// Constructor with the initial method<br/>// Fires the codes immediately</span><span id="4e19" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  String name;<br/>  User(this.name)<strong class="mv jf"> {<br/>    // do some magic<br/>  }</strong><br/>}</span><span id="4bbd" class="kt ku je mv b gy nd na l nb nc">/////////////////<br/>// Constructor with assertion<br/>// Asserts some rules to parameters</span><span id="c486" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  String name;<br/>  User(this.name)<strong class="mv jf"> : assert(name.length &gt; 3);</strong><br/>}</span><span id="7c2c" class="kt ku je mv b gy nd na l nb nc">////////////////<br/>// Constructor with initializer<br/>// You can also initialize the values with customizations tho!</span><span id="e6b1" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  static String uppercase(String e) =&gt; e.toUpperCase();<br/>  String name;<br/>  User(name) <strong class="mv jf">: name = yell(name);<br/>  </strong>static String yell(String e) =&gt; e.toUpperCase();<br/>}</span><span id="9c23" class="kt ku je mv b gy nd na l nb nc">/////////////////////<br/>// Constructor with super()<br/>// you can override the values it extends</span><span id="a10c" class="kt ku je mv b gy nd na l nb nc"><strong class="mv jf">abstract </strong>class<strong class="mv jf"> Person {</strong><br/>  String id;<br/>  <strong class="mv jf">Person(this.id);</strong><br/>}</span><span id="f6b5" class="kt ku je mv b gy nd na l nb nc">class User<strong class="mv jf"> extends Person {</strong><br/>  String name;<br/>  User(this.name,<strong class="mv jf">String id</strong>)<strong class="mv jf"> : super(id);</strong><br/>}</span><span id="0be1" class="kt ku je mv b gy nd na l nb nc">/////////////////////<br/>// Constructor with this()<br/>// you can redirect the values as well</span><span id="68bf" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  String name;<br/>  int salary;</span><span id="c940" class="kt ku je mv b gy nd na l nb nc"><strong class="mv jf">  User(this.name, this.salary);</strong></span><span id="924b" class="kt ku je mv b gy nd na l nb nc"><strong class="mv jf">  User.worker(String name) : this(name, 10);<br/>  User.boss(String name) : this(name, 9999999);</strong><br/>}</span></pre><h2 id="0a71" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">私有构造函数-类。_()</h2><p id="e60b" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">你可以使用_创建私有构造函数，但是这样做有什么好处呢？</p><p id="241a" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">我们来看一个例子！</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="1e5c" class="kt ku je mv b gy mz na l nb nc">class Print {<br/>  static void log(String message) =&gt; print(message);<br/>}</span><span id="b501" class="kt ku je mv b gy nd na l nb nc">Print.log('ehe');</span><span id="62ae" class="kt ku je mv b gy nd na l nb nc">// You want to write an util like this but there is a problem with that, because you can also create an instance which is something we don't want</span><span id="851f" class="kt ku je mv b gy nd na l nb nc">Print(); // it's absolutely unnecassary in this case</span><span id="4109" class="kt ku je mv b gy nd na l nb nc">// How to prevent that? Answer is private constructors!</span><span id="985b" class="kt ku je mv b gy nd na l nb nc">class Print {<br/>  <strong class="mv jf">Print._(); // This one will prevent creating instance</strong><br/>  static void log(String message) =&gt; print(message);<br/>}</span><span id="20c0" class="kt ku je mv b gy nd na l nb nc">Print(); // This will give compile time error now</span><span id="c564" class="kt ku je mv b gy nd na l nb nc">Your instance is safe now!</span></pre><p id="1b66" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">所以基本上你可以阻止创建一个实例！</p><h2 id="696a" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">命名构造函数Class.named()</h2><p id="cc1e" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">您可以在一个<code class="fe ob oc od mv b">class</code>中创建不同类型的实例</p><p id="4419" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">比如说；</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="fe9f" class="kt ku je mv b gy mz na l nb nc">class User {<br/>  String name;<br/>  int salary;<br/>  <strong class="mv jf">User.worker</strong>(this.name) : <strong class="mv jf">salary = 10</strong>;<br/>  <strong class="mv jf">User.boss</strong>(this.name) : <strong class="mv jf">salary = 99999999</strong>;<br/>}</span></pre><h2 id="b076" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">私有命名构造函数-类。_已命名()</h2><p id="a5c0" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">你可以很容易地清洗你的实例！</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="4567" class="kt ku je mv b gy mz na l nb nc">class User {<br/>  String name;<br/>  int salary;<br/>  <strong class="mv jf">User.worker</strong>(this.name) : <strong class="mv jf">salary = 10</strong>;<br/>  <strong class="mv jf">User.boss</strong>(this.name) : <strong class="mv jf">salary = 99999999</strong>;<br/>  <strong class="mv jf">User._mafia</strong>(this.name) : <strong class="mv jf">salary = 9999999999999</strong>;<br/>}</span></pre><p id="fd9a" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">玩笑归玩笑，这还是很有帮助的。</p><p id="4925" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">例如，您可以使用私有构造函数创建单例！</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="5f05" class="kt ku je mv b gy mz na l nb nc">class User {<br/>  <strong class="mv jf">User._privateConstructor();</strong><br/>  <strong class="mv jf">static final User instance = User._privateConstructor(); </strong><br/>}</span></pre><h2 id="005d" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">注意</h2><p id="5b12" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">在一些项目中可以看到<code class="fe ob oc od mv b">_internal</code>键。没什么特别的。<strong class="ng jf"> _internal </strong>构造只是一个名字，通常被赋予类的私有构造函数(名字不一定是<strong class="ng jf">)。_internal </strong>你可以使用任何<strong class="ng jf">类创建私有构造函数。_someName </strong>建设)。</p><h2 id="fa8a" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">Const构造函数— const类()</h2><p id="3673" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">你可以使用<code class="fe ob oc od mv b">const constructor!</code>让你的类不可变</p><blockquote class="ma"><p id="99e7" class="mb mc je bd md me mf mg mh mi mj mk dk translated">const构造函数是一种优化！编译器使对象不可变，为所有的<code class="fe ob oc od mv b">Text('Hi!')</code>对象分配相同的内存部分。—弗兰克·特拉塞</p></blockquote><pre class="oe of og oh oi mu mv mw mx aw my bi"><span id="b6d8" class="kt ku je mv b gy mz na l nb nc"><strong class="mv jf">const</strong> user = User('ehe');</span><span id="09b4" class="kt ku je mv b gy nd na l nb nc">class User {<br/>  final String name;<br/>  <strong class="mv jf">const </strong>User(this.name);<br/>}</span></pre><h2 id="a12f" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">工厂构造函数—工厂类class()</h2><p id="fdd7" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">我们说过构造函数不允许返回。你猜怎么着？</p><p id="5842" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated"><strong class="ng jf">工厂构造者</strong>可以！</p><p id="83b3" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">还有工厂构造函数能做什么？</p><p id="4211" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">您根本不需要创建新的实例！您可以调用另一个构造函数或子类，甚至可以从缓存中返回一个实例！！</p><p id="982e" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">最后，对工厂的小警告！</p><p id="5f8f" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">您不能调用超类构造函数(<code class="fe ob oc od mv b">super()</code>)</p><h2 id="4704" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">简单的例子</h2><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="4c45" class="kt ku je mv b gy mz na l nb nc">class User {<br/>  final String name;<br/>  User(this.name);</span><span id="61bb" class="kt ku je mv b gy nd na l nb nc">  <strong class="mv jf">factory User.fromJson</strong>(Map&lt;String, dynamic&gt; json) {<br/>    <strong class="mv jf">return</strong> <strong class="mv jf">User(json["name"]);</strong><br/>  }<br/>}</span><span id="c6a7" class="kt ku je mv b gy nd na l nb nc">// Singleton Example<br/>class User {<br/>  User._internal();</span><span id="ddc1" class="kt ku je mv b gy nd na l nb nc">  static final User _singleton = Singleton._internal();<br/><br/>  <strong class="mv jf">factory User() =&gt; _singleton;</strong><br/>}</span></pre></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="794b" class="lp ku je bd kv lq oq ls ky lt or lv lb kk os kl lf kn ot ko lj kq ou kr ln lz bi translated">参考</h1><div class="is it gp gr iu ov"><a href="https://flutterigniter.com/deconstructing-dart-constructors/" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jf gy z fp pa fr fs pb fu fw jd bi translated">解构Dart构造函数</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">曾经对Dart构造函数中的神秘语法感到困惑吗？冒号，命名参数，断言，工厂…读这个…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">flutterigniter.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://dash-overflow.net/articles/factory/" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jf gy z fp pa fr fs pb fu fw jd bi translated">“工厂构造函数”和“静态方法”的区别</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">如果您以前使用过Dart，那么您可能听说过factory关键字。也有可能你已经看过…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">dash-overflow.net</p></div></div><div class="pe l"><div class="pk l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://www.freecodecamp.org/news/constructors-in-dart/" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jf gy z fp pa fr fs pb fu fw jd bi translated">Dart中的构造函数——用例及示例</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">我们大多数人都熟悉构造函数的概念。它们允许我们创建类的不同实例…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">www.freecodecamp.org</p></div></div><div class="pe l"><div class="pl l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://stackoverflow.com/questions/52299304/dart-advantage-of-a-factory-constructor-identifier" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jf gy z fp pa fr fs pb fu fw jd bi translated">工厂构造器标识符的优势</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">工厂构造函数的用途之一是，我们可以决定创建哪个实例，在运行时移动所有的逻辑…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">stackoverflow.com</p></div></div><div class="pe l"><div class="pm l pg ph pi pe pj ja ov"/></div></div></a></div><div class="is it gp gr iu ov"><a href="https://dart.dev/guides/language/language-tour#factory-constructors" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jf gy z fp pa fr fs pb fu fw jd bi translated">Dart语言之旅</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">本页将向您展示如何使用Dart的每个主要功能，从变量和运算符到类和库，以及…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">dart.dev</p></div></div><div class="pe l"><div class="pn l pg ph pi pe pj ja ov"/></div></div></a></div></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h2 id="3c1c" class="kt ku je bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">感谢您的阅读！</h2><p id="d6b9" class="pw-post-body-paragraph ne nf je ng b nh ni kf nj nk nl ki nm lc nn no np lg nq nr ns lk nt nu nv mk im bi translated">我试图创造尽可能简单的例子。希望你喜欢。</p><p id="2cc0" class="pw-post-body-paragraph ne nf je ng b nh nw kf nj nk nx ki nm lc ny no np lg nz nr ns lk oa nu nv mk im bi translated">如果你喜欢这篇文章，请点击👏按钮(你知道你可以升到50吗？)</p></div></div>    
</body>
</html>