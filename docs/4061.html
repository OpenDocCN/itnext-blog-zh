<html>
<head>
<title>Android Official Spans All-In-One</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安卓官方横跨一体机</h1>
<blockquote>原文：<a href="https://itnext.io/android-official-spans-all-in-one-6d23167b1bb9?source=collection_archive---------2-----------------------#2020-04-19">https://itnext.io/android-official-spans-all-in-one-6d23167b1bb9?source=collection_archive---------2-----------------------#2020-04-19</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="addf" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">文本可以用跨度来定义应用于特定字符或整个段落的样式。</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/4944d0a7a45f9bd761c19bccd8217f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8XmY9xWsawDd5s5FnzETzg.jpeg"/></div></div></figure><p id="7df1" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi lr translated">在向用户传递信息的应用程序中，ext扮演着重要的角色。一个有吸引力的文本可以抓住用户的眼球，为用户提供更好的用户体验。</p><p id="f89d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">然而，Android中的文本默认为纯文本，这意味着没有标记嵌入其中。那么，如何定制每个文本或每个段落的外观呢？Android提供了特殊的类<code class="fe ma mb mc md b">Spans</code>来定义标记，并提供了<code class="fe ma mb mc md b">SpannableString</code>来链接标记和文本。</p><p id="0164" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">Spans</code>有两种基本类型，它们是<code class="fe ma mb mc md b">CharacterStyle</code>和<code class="fe ma mb mc md b">ParagraphStyle</code>。顾名思义，<code class="fe ma mb mc md b">CharacterStyle</code>是定义单个字符标记的类，<code class="fe ma mb mc md b">ParagraphStyle</code>是用于单个段落的类。</p><p id="28a1" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">有很多官方的<code class="fe ma mb mc md b">Spans</code>，每一个都很有用也很有趣。在这篇文章中，我将列出所有的<code class="fe ma mb mc md b">Spans</code>，并指出它们的特点和棘手之处。希望你对<code class="fe ma mb mc md b">Spans</code>有更好的理解。我将所有的<code class="fe ma mb mc md b">Spans</code>按照它们的特点分成6大类:</p><ol class=""><li id="5228" class="me mf iu kx b ky kz lb lc le mg li mh lm mi lq mj mk ml mm bi translated">文本大小</li><li id="b7ef" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">文本着色</li><li id="0a56" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">文本样式</li><li id="c913" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">可点击的链接</li><li id="ac51" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">领先装饰</li><li id="9eb5" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">其他跨度</li></ol><p id="551d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我在GitHub上创建了一个库<code class="fe ma mb mc md b"><a class="ae ms" href="https://github.com/myrickchow32/MCSpannableStringExtension" rel="noopener ugc nofollow" target="_blank">MCSpannableStringExtension</a></code>,以更方便的方式使用<code class="fe ma mb mc md b">Spans</code>。欢迎大家使用和评论。谢谢你😄。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mt"><img src="../Images/f57c5291d94921e37461a9a26ae52e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEeT6wg1x_MsWxRTJFaMtA.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">根据我自己的观点跨越分组</figcaption></figure></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="a0f0" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">基本的理解力</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="1975" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">SpannableString</code>可以很容易地用一个纯文本(见上面代码的第8行)构建，并用<code class="fe ma mb mc md b">setSpan()</code>设置<code class="fe ma mb mc md b">Spans</code>。</p><p id="e679" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">应用的索引包括起始索引和结束索引。</p><p id="3117" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">每个<code class="fe ma mb mc md b">Spans</code>有4个可用标志，它们定义了当新文本插入到原来的<code class="fe ma mb mc md b">SpannableString</code>中时，如何应用<code class="fe ma mb mc md b">Spans</code>:</p><ol class=""><li id="dc8b" class="me mf iu kx b ky kz lb lc le mg li mh lm mi lq mj mk ml mm bi translated">SPAN _独占_独占</li><li id="1667" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">SPAN_EXCLUSIVE_INCLUSIVE</li><li id="ff27" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">SPAN_INCLUSIVE_EXCLUSIVE</li><li id="c91e" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">SPAN_INCLUSIVE_INCLUSIVE</li><li id="fe4d" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated"><code class="fe ma mb mc md b">0</code>如果<code class="fe ma mb mc md b">SpannableString</code>的内容不可更改</li></ol></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="8078" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">1.文本大小</h1><h2 id="26e2" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">1.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/AbsoluteSizeSpan" rel="noopener ugc nofollow" target="_blank">绝对尺寸跨度</a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ol"><img src="../Images/f42bcbae34be50346774f53a65c2c1ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oeaJWfLQvV-J4ckrZnjCyQ.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">绝对尺寸跨度的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="aa01" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">AbsoluteSizeSpan</code>改变<code class="fe ma mb mc md b">px</code>或<code class="fe ma mb mc md b">dp</code>单位的文本尺寸，但不改变<code class="fe ma mb mc md b">sp</code>单位的文本尺寸。<code class="fe ma mb mc md b">AbsoluteSizeSpan</code>的第二个参数是表示机组是否应该在<code class="fe ma mb mc md b">dp</code>的标志。默认值是使用<code class="fe ma mb mc md b">px</code>。</p><h2 id="cc8d" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">2.相对大小跨度</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj om"><img src="../Images/2bc9d5dbbc11283dc3ccf47f0eaeb804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyoXz8tn7v9TvrwJoHdfSA.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">相对尺寸跨度的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj on"><img src="../Images/9d794b13f28654900e669f18cf17c894.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*c9U-33vd1nfzlC-WwznEaQ.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">系统设置中的字体大小设置</figcaption></figure><p id="3cdc" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">RelativeSizeSpan</code>以倍数增加textSize，而不是特定的<code class="fe ma mb mc md b">px</code>或<code class="fe ma mb mc md b">dp</code>。在这种情况下，在<code class="fe ma mb mc md b">sp</code>中绘制<code class="fe ma mb mc md b">Spanned</code>文本，并可根据系统设置中的用户字体大小偏好进行更改。可以维护一个好的UI。</p><h2 id="a618" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">3.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/ScaleXSpan" rel="noopener ugc nofollow" target="_blank"> ScaleXSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oo"><img src="../Images/dde6968958fa02a049ea2c690eaceb29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pP9r7XsoBGET2XwcHeRv6Q.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">ScaleXSpan的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="37f6" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">ScaleXSpan</code>在水平方向缩放跨区文本。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="b9f0" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">2.文本着色</h1><h2 id="340c" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">1.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/ForegroundColorSpan" rel="noopener ugc nofollow" target="_blank">前景颜色跨度</a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj op"><img src="../Images/7fed0eb98974541f5d7f5dfde163b2b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*evuhOKV1HVq107vj8wd-0g.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">前景色彩跨度插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="b8f0" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">它改变文本颜色。</p><h2 id="1d41" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">2.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/BackgroundColorSpan" rel="noopener ugc nofollow" target="_blank">背景色跨度</a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj op"><img src="../Images/2bff5021a57443d1762337f12cde0868.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*v5ZzX_ia2tWCywxU7YV4jA.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">背景插图ColorSpan</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="e3e0" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">BackgroundColorSpan</code>用背景色突出显示所选文本，这适用于字符级。</p><h2 id="994a" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">3.LineBackgroundSpan(API 29+)</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oq"><img src="../Images/df6b4d685cfe61b75ca855e92ad6f60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBRfj2fhuNEzvX-YiAC9aQ.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">LineBackgroundSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="8b5a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">LineBackgroundSpan</code>仅在Android <code class="fe ma mb mc md b">Q</code> (API 29)或更新版本中可用。高亮显示位于<code class="fe ma mb mc md b">startIndex</code>和<code class="fe ma mb mc md b">endIndex</code>内的整条线。上面的例子显示了发现“修改版本”的情况。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="9536" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">3.文本样式</h1><h2 id="fc85" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">1.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/StyleSpan" rel="noopener ugc nofollow" target="_blank"> StyleSpan </a> —粗体、斜体、粗斜体和普通</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj on"><img src="../Images/99504b86bd1540734d3434b22b537c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*fSWITign1WakdunrI3AmeQ.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">StyleSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="1d82" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">标记可以累积应用，即如果连续设置粗体和斜体<code class="fe ma mb mc md b">StyleSpan</code>，则绘制粗体斜体文本。</p><h2 id="fc16" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">2.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/UnderlineSpan" rel="noopener ugc nofollow" target="_blank"> UnderlineSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj or"><img src="../Images/a577c84b6ce0d4b8ebe58d10ef093858.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*eFjm9rjCVilVz2He0qyr1w.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">下划线插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><h2 id="eaa2" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">3.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/StrikethroughSpan" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">删除线</strong> </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj os"><img src="../Images/2eddb7cbc6fb359b517d9a4ef7a184ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ctzbpo379tWP5UF3DhE9Aw.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">删除线跨度的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><h2 id="f5c7" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">4.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/SuperscriptSpan" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">上标Span </strong> </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ot"><img src="../Images/8ebd59d3e3edd3338e462029b8038bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*UvwX56IuyqcR4Sgjp24B9w.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">上标Span的插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><h2 id="8a4e" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">5.<a class="ae ms" href="http://developer.android.com/reference/android/text/style/SuperscriptSpan" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">下标Span </strong> </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ou"><img src="../Images/6d5708e4034921b75b663856800e15ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*gloBCKswhSGr0YYaOszSQg.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">下标Span的插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><h2 id="990c" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">6.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/AlignmentSpan.Standard" rel="noopener ugc nofollow" target="_blank">校准跨度</a> —正常、居中、相反</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ov"><img src="../Images/bb364b3c55981f89aec4e43d07d281bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*Kqw6e-Qm_F_6WDXqWCP6Dg.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">英语和希伯来语句子书写方向相反</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ow"><img src="../Images/80c430c2d2c596223622d93cc66e3726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SDuGtmIfzzalnIVttH5XBA.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">英语和希伯来语单词对齐示例</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="f240" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">不同的语言有不同的书写方向。例如，英语是从左向右写的，而希伯来语是从右向左写的。因此，<code class="fe ma mb mc md b">ALIGN_NORMAL</code>、<code class="fe ma mb mc md b">ALIGN_CENTER</code>和<code class="fe ma mb mc md b">ALIGN_OPPOSITE</code>这三个对齐选项将导致不同语言的不同布局。</p><blockquote class="ox oy oz"><p id="9f73" class="kv kw pa kx b ky kz jv la lb lc jy ld pb lf lg lh pc lj lk ll pd ln lo lp lq in bi translated">确保TextView的宽度大于其内容，以显示对齐功能，即不要在<code class="fe ma mb mc md b">layout_width</code>属性中使用<code class="fe ma mb mc md b">wrap_content</code>。</p></blockquote><h2 id="f60b" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">7.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/TextAppearanceSpan" rel="noopener ugc nofollow" target="_blank"> TextAppearanceSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pe"><img src="../Images/899cb8160f666dcf2287465d62c69031.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*FvMTtz4HG_e3pnzFNmDJHw.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">文本外观插图Span</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="bfee" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">TextAppearanceSpan</code>是比别人更厉害的<code class="fe ma mb mc md b">Span</code>。它可以直接将在<code class="fe ma mb mc md b">style.xml</code>定义的属性应用到<code class="fe ma mb mc md b">SpannableString</code>。这可以保持整个应用程序中代码的可重用性。</p><h2 id="edb4" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">8.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/TypefaceSpan" rel="noopener ugc nofollow" target="_blank"> TypefaceSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pf"><img src="../Images/0bd04ae297eaced5d78b5e42efc2a85e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0T9DtKl701iBcRElbYIC8Q.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">TypefaceSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="4051" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">TypefaceSpan</code>可以定制跨页文本的字体系列和文本样式(粗体、斜体、粗斜体和普通)。有免费的字体文件可以从网上下载。你可以在<a class="ae ms" href="https://www.fontsquirrel.com/fonts/great-vibes" rel="noopener ugc nofollow" target="_blank">得到一些很棒的共鸣</a>。</p><h2 id="395c" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">9.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/MaskFilterSpan" rel="noopener ugc nofollow" target="_blank">口罩过滤片</a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pg"><img src="../Images/fa8d394b4f51ee66e77f8654262564d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z3Us4wsFZedEGHIcxSlUaw.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">MaskFilterSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="f80f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">MaskFilterSpan</code>对跨区文本应用<code class="fe ma mb mc md b">MaskFilter</code>。<code class="fe ma mb mc md b">BlurMaskFilter</code>是<code class="fe ma mb mc md b">MaskFilter</code>的子类，可以在绘制alpha通道蒙版之前对其执行变换。每个字符的边缘被<code class="fe ma mb mc md b">blurRadius</code>参数模糊化。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="483c" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">4.可点击的链接</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="1e77" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">下面显示的所有可点击的<code class="fe ma mb mc md b">Span</code>都展开<code class="fe ma mb mc md b">ClickableSpan</code>。根据<a class="ae ms" href="https://developer.android.com/reference/android/text/style/ClickableSpan" rel="noopener ugc nofollow" target="_blank">官方文档</a>，必须将<code class="fe ma mb mc md b">TextView</code>的移动方式设置为<code class="fe ma mb mc md b"><a class="ae ms" href="https://developer.android.com/reference/android/text/method/LinkMovementMethod" rel="noopener ugc nofollow" target="_blank">LinkMovementMethod</a></code>才能点击。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="a087" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">此外，可点击链接的默认文本颜色是<code class="fe ma mb mc md b">R.color.colorAccent</code>，开发者可以通过为每个文本视图设置<code class="fe ma mb mc md b">android:textColorLink</code>来定制它。</p><h2 id="5d6b" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">1.<a class="ae ms" href="http://URLSpan" rel="noopener ugc nofollow" target="_blank"> URLSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ph"><img src="../Images/b9efae93faef26d3bc072e3ce7abe3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/0*ltGJOWJUEn7UTIcR.gif"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">URLSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pi"><img src="../Images/51138e8f5c2d2b2f8a2fac30fca2efe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-7fsgWoXmlcSmyz-jl_5w.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">URLSpan的源代码</figcaption></figure><p id="c993" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">根据<a class="ae ms" href="https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/text/style/URLSpan.java" rel="noopener ugc nofollow" target="_blank"> urlSpan源代码</a>的<code class="fe ma mb mc md b">onClick</code>函数，将申请的URL解析为<code class="fe ma mb mc md b">Uri</code>，稍后发送给浏览器。因此，<code class="fe ma mb mc md b">URLSpan</code>构造函数处的<code class="fe ma mb mc md b">url</code>应该以<code class="fe ma mb mc md b">http</code>或<code class="fe ma mb mc md b">https</code>开始，而不是纯域部分，如<code class="fe ma mb mc md b">www.google.com</code>。</p><h2 id="50f1" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">2.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/ClickableSpan" rel="noopener ugc nofollow" target="_blank">可点击面板</a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pj"><img src="../Images/098911f9e602358d51fa016b67e02fd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/1*qtFaXzL-BpGosqs0nHq0uw.gif"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">可点击范围的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="8358" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">ClickableSpan</code>比<code class="fe ma mb mc md b">URLSpan</code>更灵活，开发者可以定义点击跨区字符时调用的<code class="fe ma mb mc md b">onClick</code>回调，例如显示一条<code class="fe ma mb mc md b">Toast</code>消息。</p><h2 id="68ce" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">3.ClickableWithoutUnderlineSpan(自定义Span)</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pk"><img src="../Images/486e9a1c90da28fc36d68e2653805b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/1*-5nG3Ibl7wTVMnecDT12WA.gif"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">无下跨可点击的图示</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pl"><img src="../Images/c0b04d96f7e746e860efb0edefdb7389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*wuOU6eyg2XVM5OAlOAmITQ.png"/></div></figure><p id="c7ca" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">根据<code class="fe ma mb mc md b">ClickableSpan</code>开源代码的第55行，给跨区文本加了下划线。为了让<code class="fe ma mb mc md b">ClickableSpan</code>没有下划线，必须定制<code class="fe ma mb mc md b">ClickableSpan</code>。见下文:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="e918" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">5.领先装饰</h1><h2 id="2d5f" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">1.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/BulletSpan" rel="noopener ugc nofollow" target="_blank"> BulletSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pm"><img src="../Images/139e67e8fb5bcea050658d6b69ea057b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*xn9FvXsuY-AWRXkLto2xOA.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">BulletSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="ffe9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">BulletSpan</code>常见于无序列表。间隙宽度和颜色可以在所有API等级中定制，但子弹半径只能在API 29或更新版本中定制。</p><h2 id="453d" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">2.图像跨度</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pn"><img src="../Images/3c2acd78048626e715081a8a1c1c701c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_AOfM60cDRZC2WX6O4xX8A.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">ImageSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="0b48" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">一个<code class="fe ma mb mc md b">ImageSpan</code>有三个选项，它们是<code class="fe ma mb mc md b">ALIGN_BASELINE</code>、<code class="fe ma mb mc md b">ALIGN_BOTTOM</code>和<code class="fe ma mb mc md b">ALIGN_CENTER</code>。它用一个<code class="fe ma mb mc md b">Drawable</code>替换跨区文本，因此必须在原始文本中添加一个标签<code class="fe ma mb mc md b">CharSequence</code>进行替换。例如:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj po"><img src="../Images/80d3b0899c1521ccfdedb47e13358c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*q9XCy_gJkktLsz5yeBDayg.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">用可抽取标签替换特定标签</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pp"><img src="../Images/4a5f5d89504b46051ef945b952d4b7af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dl13YHzZ0mgzB6RfBa5uhw.png"/></div></div></figure><p id="08bb" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是，根据<code class="fe ma mb mc md b">ImageSpan</code>源代码的第116和117行，图像是根据其内在界限绘制的。因此，在传递给ImageSpan构造函数之前，必须设置drawable <strong class="kx iv">的宽度和高度</strong>！这是开发人员常见的错误。</p><blockquote class="ox oy oz"><p id="874b" class="kv kw pa kx b ky kz jv la lb lc jy ld pb lf lg lh pc lj lk ll pd ln lo lp lq in bi translated">ALIGN_CENTER仅适用于Android Q (API 29 ) <br/>参考:<a class="ae ms" href="https://developer.android.com/reference/android/text/style/DynamicDrawableSpan" rel="noopener ugc nofollow" target="_blank">DynamicDrawableSpan | Android开发者</a></p></blockquote><h2 id="2177" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">3.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/DrawableMarginSpan" rel="noopener ugc nofollow" target="_blank"> DrawableMarginSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pq"><img src="../Images/7db6652297fe5b9b1f53d78d6be91f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96BpUStDL0IgnppIRtGJaA.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">DrawableMarginSpan的插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="a957" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">DrawableMarginSpan</code>看起来与<code class="fe ma mb mc md b">ImageSpan</code>相似，但它是<code class="fe ma mb mc md b">ParagraphStyle</code>的子类。它们有以下不同之处:</p><ol class=""><li id="c5c9" class="me mf iu kx b ky kz lb lc le mg li mh lm mi lq mj mk ml mm bi translated">在<code class="fe ma mb mc md b">DrawableMarginSpan</code>中不能设置垂直对齐，默认情况下，它会将可拖动对象对齐顶部。</li><li id="a212" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">在<code class="fe ma mb mc md b">ImageSpan</code>中不能设置<code class="fe ma mb mc md b">Drawable</code>和文本之间的边距</li></ol><h2 id="3c65" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">4.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/IconMarginSpan" rel="noopener ugc nofollow" target="_blank"> IconMarginSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pr"><img src="../Images/e10d6e4ec98128eb166d7950c8a9cf52.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*Ru8LmZ4_jGVAokZC1U6Sig.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">IconMarginSpan的插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="0062" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">IconMarginSpan</code>与<code class="fe ma mb mc md b">DrawableMarginSpan</code>相似，除了<code class="fe ma mb mc md b">IconMarginSpan</code>是为配合<code class="fe ma mb mc md b">Bitmap</code>而设计的，而<code class="fe ma mb mc md b">DrawableMarginSpan</code>是为<code class="fe ma mb mc md b">Drawable</code>而设计的。</p><h2 id="0724" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">5.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/QuoteSpan" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">报价盘</strong> </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ps"><img src="../Images/80ae6ae95c5012e9663310c2adb15f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*LKI2cGc39mWoZuboijQQYQ.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">QuoteSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><blockquote class="ox oy oz"><p id="30fd" class="kv kw pa kx b ky kz jv la lb lc jy ld pb lf lg lh pc lj lk ll pd ln lo lp lq in bi translated">条带宽度和间隙宽度仅在API 28或更新版本中可用</p><p id="3353" class="kv kw pa kx b ky kz jv la lb lc jy ld pb lf lg lh pc lj lk ll pd ln lo lp lq in bi translated">参考:<a class="ae ms" href="https://developer.android.com/reference/android/text/style/QuoteSpan#QuoteSpan(int,%20int,%20int)" rel="noopener ugc nofollow" target="_blank"> QuoteSpan | Android开发者</a></p></blockquote><h2 id="4e9e" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">6.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/LeadingMarginSpan" rel="noopener ugc nofollow" target="_blank"> LeadingMarginSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pt"><img src="../Images/ff7e362a939673a15399e3bdd03695ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWgUiQJo1MQvZjkhKr89tQ.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">LeadingMarginSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><h2 id="7646" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">7.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/TabStopSpan" rel="noopener ugc nofollow" target="_blank"> TabStopSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pu"><img src="../Images/3c0b61f90bdcef9cdfcc79df77f022c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*d-7CbLjiR8qPO-6rW_Y2Pw.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">TabStopSpan的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="83f9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">TabStopSpan</code>设置跨区文本的制表符长度。因此，<code class="fe ma mb mc md b">\t</code> (tab)必须加在<code class="fe ma mb mc md b">SpannableString</code>的开头，否则，<strong class="kx iv">没有</strong>效果加到字符串上。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="f2bd" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">6.其他跨度</h1><h2 id="8f4c" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">1.管线高度跨度(API 29)</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pv"><img src="../Images/f277a6075d3ae73e325ff3664d50cc00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YSZzykvZd7TsYiGoKf8wUg.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">线条高度跨度的图示</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="8704" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">LineHeightSpan</code>仅在Android <code class="fe ma mb mc md b">Q</code> (API 29)或更新版本中可用。它设置整个段落的行高。</p><h2 id="8eaf" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">2.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/LocaleSpan" rel="noopener ugc nofollow" target="_blank"> LocaleSpan </a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pw"><img src="../Images/44a04fd4d1579b6642f255d741f66636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*nV7P6j8VTxN8HhtbVYMjxQ.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">LocaleSpan插图</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><p id="8d1d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi"><code class="fe ma mb mc md b">LocalSpan</code> changes the spanned text according to the inputted locale. Let’s take “今天下微雨 — Today is a rainy day” as an example. It is a sequence of Chinese characters and there are two variants of Chinese words— Traditional Chinese and Simplified Chinese. The characters would be presented in different layouts (highlighted as blue rectangles at the above screenshot) although they belong to the same unicode.</p><p id="123b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi">For example, the <a class="ae ms" href="https://www.compart.com/en/unicode/U+96E8" rel="noopener ugc nofollow" target="_blank">unicode website of “雨” (U+96E8)</a> would show different versions of “雨” when different language is set in your device. See below for the screenshots:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj px"><img src="../Images/0f73b7758ed3f8c444e36fa22e8dff32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*QhWUEp0t_XsVqykry4jZ4w.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk">Website showing different version of “雨" when different locales are set at the device.</figcaption></figure><h2 id="ca7f" class="nz ng iu bd nh oa ob dn nl oc od dp np le oe of nr li og oh nt lm oi oj nv ok bi translated">3.<a class="ae ms" href="https://developer.android.com/reference/android/text/style/SuggestionSpan" rel="noopener ugc nofollow" target="_blank">建议范围</a></h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj py"><img src="../Images/6190baa535383eb4147d95d9b1d1c903.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*mlFHaSfXmOkjOHIE.gif"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">建议说明Span</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nx ny l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pz"><img src="../Images/6c2c645be4d5cc2cce3ec59b1936ba11.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*p15XEcs7_NtAGFB1C_V2ow.png"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">建议弹出对话框</figcaption></figure><p id="3757" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">当<code class="fe ma mb mc md b">EditText</code>中的跨区文本为双击或单击时，会弹出一个建议对话框，这取决于<code class="fe ma mb mc md b">FLAG_MISSPELLED</code>或<code class="fe ma mb mc md b">FLAG_EASY_CORRECT </code>标志是否在<code class="fe ma mb mc md b">SuggestionSpan</code>处被置位。弹出对话框中显示的建议数量有限制。仅显示前5条建议。</p><p id="8527" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe ma mb mc md b">SuggestionSpan</code>支持3种行为，它们由标志控制(参见上面示例代码的第8行):</p><p id="332e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv"> 1。FLAG_AUTO_CORRECTION(默认)</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qa"><img src="../Images/f04bd63547f26eba648197d71ac71a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDAGn86mf312_A6r57UITg.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">当是FLAG_AUTO_CORRECTION时显示建议弹出对话框的步骤</figcaption></figure><p id="e711" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">用户必须双击跨区文本并点击“替换…”按钮，以显示建议列表。这是默认标志。</p><p id="11ee" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv"> 2。FLAG_EASY_CORRECT </strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj py"><img src="../Images/212f92e21af804114a71b85f1dd65b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*Hq0BhShj6JDjlxG2.gif"/></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">FLAG_EASY_CORRECT时显示建议弹出对话框的图示</figcaption></figure><p id="b12c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">不需要双击跨区文本。建议弹出对话框显示在用户点击跨区单词之后。换句话说，“编辑选项”弹出对话框根本不显示。</p><p id="9c97" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv"> 3。FLAG _拼错</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj qb"><img src="../Images/ee9aca5c01a79a642de9636f7d360228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bCraGQpV2lqP3-IDGPHuyg.png"/></div></div><figcaption class="mu mv gk gi gj mw mx bd b be z dk translated">当出现FLAG _拼写错误时，显示建议弹出对话框的图示</figcaption></figure><p id="37bc" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在建议弹出对话框中增加了一个新选项“<strong class="kx iv">添加到字典</strong>”。用户可以将单词添加到系统词典中以备将来使用。</p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="1ffe" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">摘要</h1><ol class=""><li id="31e1" class="me mf iu kx b ky qc lb qd le qe li qf lm qg lq mj mk ml mm bi translated">Android文本外观可以通过用<code class="fe ma mb mc md b">SpannableString</code>设置文本来定制，它可以嵌入一个定义文本标记的<code class="fe ma mb mc md b">Spans</code>列表。</li><li id="01bf" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated"><code class="fe ma mb mc md b">CharacterSytle</code>定义单个字符的标记,<code class="fe ma mb mc md b">ParagraphStyle</code>定义整个段落的标记。</li><li id="4854" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">Android官方提供了大约30种不同的<code class="fe ma mb mc md b">Spans</code>，主要可以分为6组，包括<code class="fe ma mb mc md b">Text Size</code>、<code class="fe ma mb mc md b">Text Colouring</code>、<code class="fe ma mb mc md b">Text Styling</code>、<code class="fe ma mb mc md b">Clickable Link</code>、<code class="fe ma mb mc md b">Leading Decorations</code>和<code class="fe ma mb mc md b">Other Spans</code>。</li><li id="a557" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated">带有自定义子弹半径的<code class="fe ma mb mc md b">BulletSpan</code>和带有自定义<code class="fe ma mb mc md b">Typeface</code>的<code class="fe ma mb mc md b">TypefaceSpan</code>仅在Android P (API 28)或更新版本中可用</li><li id="9b74" class="me mf iu kx b ky mn lb mo le mp li mq lm mr lq mj mk ml mm bi translated"><code class="fe ma mb mc md b">LineBackgroundSpan</code>和<code class="fe ma mb mc md b">LineHeightSpan</code>只有Android Q (API 29)或更新版本才有。</li></ol></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><h1 id="2c89" class="nf ng iu bd nh ni nj nk nl nm nn no np ka nq kb nr kd ns ke nt kg nu kh nv nw bi translated">参考和更多阅读</h1><ol class=""><li id="1c67" class="me mf iu kx b ky qc lb qd le qe li qf lm qg lq mj mk ml mm bi translated"><strong class="kx iv">跨度详情</strong></li></ol><div class="qh qi gq gs qj qk"><a href="https://medium.com/androiddevelopers/underspanding-spans-1b91008b97e4" rel="noopener follow" target="_blank"><div class="ql ab fp"><div class="qm ab qn cl cj qo"><h2 class="bd iv gz z fq qp fs ft qq fv fx it bi translated">下跨跨度</h2><div class="qr l"><h3 class="bd b gz z fq qp fs ft qq fv fx dk translated">跨度是强大的概念，通过提供对组件的访问，允许在字符或段落级别对文本进行样式化…</h3></div><div class="qs l"><p class="bd b dl z fq qp fs ft qq fv fx dk translated">medium.com</p></div></div><div class="qt l"><div class="qu l qv qw qx qt qy kt qk"/></div></div></a></div><p id="730c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv"> 2。</strong><a class="ae ms" href="https://developer.android.com/reference/android/text/Spanned" rel="noopener ugc nofollow" target="_blank"><strong class="kx iv"/></a><code class="fe ma mb mc md b"><a class="ae ms" href="https://developer.android.com/reference/android/text/Spanned" rel="noopener ugc nofollow" target="_blank"><strong class="kx iv">Spanned</strong></a></code>官方文件</p><p id="caf0" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv"> 3。</strong> <a class="ae ms" href="https://developer.android.com/reference/android/text/style/package-summary" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iv">安卓文字造型官方文档</strong> </a></p></div><div class="ab cl my mz hy na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="in io ip iq ir"><p id="638d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">欢迎您关注我的<a class="ae ms" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ my rik _ chow</a>了解更多信息。感谢您阅读这篇文章。祝您愉快！😄</p></div></div>    
</body>
</html>