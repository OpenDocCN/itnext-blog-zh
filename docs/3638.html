<html>
<head>
<title>Building a reusable dialog module with Angular Material</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用角材料构建可重用的对话框模块</h1>
<blockquote>原文：<a href="https://itnext.io/building-a-reusable-dialog-module-with-angular-material-4ce406117918?source=collection_archive---------0-----------------------#2020-01-22">https://itnext.io/building-a-reusable-dialog-module-with-angular-material-4ce406117918?source=collection_archive---------0-----------------------#2020-01-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="38bd" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">有棱角的手教程</h2><div class=""/><figure class="gl gn ka kb kc kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi jz"><img src="../Images/b7e1cd38f87f4595233df42a86e8e33e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Vh3q9Yc3sOpgyNhqpFw5g.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">照片由<a class="ae ko" href="https://unsplash.com/@lara_far?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">拉拉·法尔</a>在<a class="ae ko" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="5589" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在本教程中，我将向你展示如何为你的角度项目创建一个可重用的对话框模块。</p><h1 id="e202" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">先决条件</h1><ul class=""><li id="4e00" class="ml mm it kr b ks mn kw mo la mp le mq li mr lm ms mt mu mv bi translated">角度7或更高</li><li id="cd77" class="ml mm it kr b ks mw kw mx la my le mz li na lm ms mt mu mv bi translated">角形材料7或更高</li></ul><h1 id="2742" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated"><strong class="ak">创建模块</strong></h1><p id="bcb4" class="pw-post-body-paragraph kp kq it kr b ks mn ku kv kw mo ky kz la nb lc ld le nc lg lh li nd lk ll lm im bi translated">首先，您必须创建一个包含所有文件的文件夹。我选择在这里创建:<code class="fe ne nf ng nh b">app/shared/confirm-dialog</code></p><p id="3692" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">该模块的最终结构如下:</p><figure class="nj nk nl nm gt kd gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/687a8c607e789258eb43a9f91782def8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*JTLPAi7RV6dqHPL58DCTUw.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">模块结构</figcaption></figure><p id="a9be" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们创建第一个文件。</p><p id="94c0" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">从确认组件模板开始，将其命名为<code class="fe ne nf ng nh b">confirm-dialog.component.html</code></p><p id="15c1" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如前所述，我们将使用材料设计组件<code class="fe ne nf ng nh b">Dialog</code>。</p><blockquote class="nn no np"><p id="e283" class="kp kq nq kr b ks kt ku kv kw kx ky kz nr lb lc ld ns lf lg lh nt lj lk ll lm im bi translated">你可以在这里看到更多关于对话框的API <a class="ae ko" href="https://material.angular.io/components/dialog/overview" rel="noopener ugc nofollow" target="_blank">的信息。</a></p></blockquote><p id="7897" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这个组件有几个指令，帮助我们更容易地构建我们的对话内容。下面是材料设计文档中关于它们的一些信息:</p><blockquote class="nn no np"><p id="15bf" class="kp kq nq kr b ks kt ku kv kw kx ky kz nr lb lc ld ns lf lg lh nt lj lk ll lm im bi translated"><code class="fe ne nf ng nh b">mat-dialog-title</code>:对话框标题，应用于标题元素<br/> <code class="fe ne nf ng nh b">&lt;mat-dialog-content&gt;</code>:对话框的主要可滚动内容。<br/> <code class="fe ne nf ng nh b">&lt;mat-dialog-actions&gt;</code>:对话框底部动作按钮的容器。<br/> <code class="fe ne nf ng nh b">mat-dialog-close</code>:添加到<code class="fe ne nf ng nh b">&lt;button&gt;</code>中，使按钮关闭对话框，从绑定值中选择一个结果。</p></blockquote><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="3ccb" class="ny lo it nh b gy nz oa l ob oc">&lt;div class="header"&gt;<br/>    &lt;h1 <strong class="nh jd">mat-dialog-title</strong>&gt;{{ <strong class="nh jd">data.title</strong> } }}&lt;/h1&gt;<br/>&lt;/div&gt;<br/>&lt;div <strong class="nh jd">mat-dialog-content</strong>&gt;<br/>    &lt;p class="dialog-message"&gt;{{ <strong class="nh jd">data.message</strong> }}&lt;/p&gt;<br/>&lt;/div&gt;<br/>&lt;div <strong class="nh jd">mat-dialog-actions</strong>&gt;<br/>    &lt;button class="btn btn-cancel" style="margin-right:10px;" <strong class="nh jd">(click)="cancel()"</strong>&gt;{{ <strong class="nh jd">data.cancelText</strong> }}&lt;/button&gt;<br/>    &lt;button class="btn" <strong class="nh jd">(click)="confirm()"</strong>&gt;{{ <strong class="nh jd">data.confirmText</strong> }}&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="b72e" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">第一个文件准备好了！让我们来写这个组件的功能。创建第二个名为<code class="fe ne nf ng nh b">confirm-dialog.component.ts</code>的文件</p><p id="0059" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">首先添加每个组件中常见的代码部分:导入、组件装饰、类定义。</p><p id="816a" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">请注意<code class="fe ne nf ng nh b">templateUrl</code>添加正确的文件路径！</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="5964" class="ny lo it nh b gy nz oa l ob oc">import { Component } from '@angular/core';</span><span id="4071" class="ny lo it nh b gy od oa l ob oc">@Component({<br/>  selector: 'app-confirm-dialog',<br/>  templateUrl: './confirm-dialog.component.html',<br/>  styles: []<br/>})</span><span id="b885" class="ny lo it nh b gy od oa l ob oc">export class ConfirmDialogComponent {<br/>  constructor(){}<br/>}</span></pre><p id="757d" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然后在构造函数中导入并注入<code class="fe ne nf ng nh b">MAT_DIALOG_DATA</code>令牌，该令牌可用于访问传递给对话框的数据。还要定义数据的格式。</p><p id="f526" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于确认对话框，我们需要一个<code class="fe ne nf ng nh b">title</code>，一个<code class="fe ne nf ng nh b">message</code>和两个按钮:<code class="fe ne nf ng nh b">cancel</code>和<code class="fe ne nf ng nh b">confirm</code>。使用这些参数使组件可重用。</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="78cc" class="ny lo it nh b gy nz oa l ob oc"><strong class="nh jd">import { MAT_DIALOG_DATA } from "@angular/material";</strong></span><span id="aa0c" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">...</strong></span><span id="ff6c" class="ny lo it nh b gy od oa l ob oc">constructor(<strong class="nh jd">@Inject(MAT_DIALOG_DATA) public data: {<br/>                  cancelText: string,<br/>                  confirmText: string,<br/>                  message: string,<br/>                  title: string<br/>              }</strong>){}</span></pre><p id="ab60" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">您还需要导入和注入<code class="fe ne nf ng nh b">MatDialogRef</code>以及对通过<code class="fe ne nf ng nh b">MatDialog</code>服务打开的对话框的引用。</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="fa4b" class="ny lo it nh b gy nz oa l ob oc">import { Component<strong class="nh jd">, Output</strong> } from '@angular/core';<br/>import { MAT_DIALOG_DATA<strong class="nh jd">, </strong><strong class="nh jd">MatDialogRef</strong> } from "@angular/material";</span><span id="cb71" class="ny lo it nh b gy od oa l ob oc">...</span><span id="348a" class="ny lo it nh b gy od oa l ob oc">constructor(@Inject(MAT_DIALOG_DATA) public data: {<br/>                  cancelText: string,<br/>                  confirmText: string,<br/>                  message: string,<br/>                  title: string<br/>              }, <strong class="nh jd">private mdDialogRef: MatDialogRef&lt;ConfirmDialogComponent&gt;</strong>){}</span></pre><p id="e546" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">剩下的就是为组件的行为定义一些方法。点击<code class="fe ne nf ng nh b">confirm</code>或<code class="fe ne nf ng nh b">cancel</code>或关闭按钮或按下ESC键会发生什么？</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="4d15" class="ny lo it nh b gy nz oa l ob oc">...</span><span id="12b7" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">public cancel() {<br/>    this.close(false);<br/>  }</strong></span><span id="4376" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">public close(value) {<br/>    this.mdDialogRef.close(value);<br/>  }</strong></span><span id="80d4" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">public confirm() {<br/>    this.close(true);<br/>  }</strong></span><span id="65ec" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">@HostListener("keydown.esc") <br/>  public onEsc() {<br/>    this.close(false);<br/>  }</strong></span></pre><p id="1846" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在每种情况下，我们都必须返回值，以通知调用者用户是否确认了消息。在<code class="fe ne nf ng nh b">close</code>、<code class="fe ne nf ng nh b">cancel</code>和<code class="fe ne nf ng nh b">ESC</code>情况下发送<code class="fe ne nf ng nh b">false</code>，在<code class="fe ne nf ng nh b">confirm</code>情况下发送<code class="fe ne nf ng nh b">true</code>。</p><p id="2a2e" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">你的文件差不多准备好了！唯一剩下的就是设置一些样式。没有什么花哨的，只是小写/大写一些文字，并使取消按钮红色。</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="a462" class="ny lo it nh b gy nz oa l ob oc">...</span><span id="0a3f" class="ny lo it nh b gy od oa l ob oc">styles: [<strong class="nh jd">`<br/>  .header, .dialog-message {<br/>      text-transform: lowercase;<br/>  }<br/>  .header::first-letter, .dialog-message::first-letter {<br/>      text-transform: uppercase;<br/>  }<br/>  .btn-cancel {<br/>      background-color: red;<br/>      color: #fff;<br/>  }<br/>`</strong>]</span><span id="3702" class="ny lo it nh b gy od oa l ob oc">...</span></pre><p id="5dc6" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">把所有东西放在一起，这就是最后一节课。</p><p id="4a70" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">你可以在这里看到最后一个类<a class="ae ko" href="https://gist.github.com/vadal/3f27158a6c3acffd7dec596393f1c18f" rel="noopener ugc nofollow" target="_blank"/>:</p><figure class="nj nk nl nm gt kd"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">最终确认-dialog.component.ts</figcaption></figure><p id="d5e0" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">确认服务</strong></p><p id="aab4" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们将通过创建可注入服务来继续实现。这将有助于您在任何地方使用该功能！</p><p id="5ab0" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们从添加每个服务中常见的代码部分开始:导入、可注入装饰、类定义。</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="90ef" class="ny lo it nh b gy nz oa l ob oc">import { Injectable } from '@angular/core';</span><span id="158d" class="ny lo it nh b gy od oa l ob oc">@Injectable()</span><span id="8e4a" class="ny lo it nh b gy od oa l ob oc">export class ConfirmDialogService {  <br/>  constructor() { }<br/>}</span></pre><p id="8ef8" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在我们的服务中，我们希望打开一个对话框并获得它的响应。创建两个这样的方法。</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="9be8" class="ny lo it nh b gy nz oa l ob oc">import { Injectable } from '@angular/core';<br/><strong class="nh jd">import { Observable } from 'rxjs';</strong></span><span id="28ed" class="ny lo it nh b gy od oa l ob oc">@Injectable()</span><span id="edf2" class="ny lo it nh b gy od oa l ob oc">export class ConfirmDialogService {  <br/>  constructor() { }  </span><span id="c4dd" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">  public open(options) {}  </strong></span><span id="37c8" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">  public confirmed(): Observable&lt;any&gt; {}</strong></span><span id="2066" class="ny lo it nh b gy od oa l ob oc">}</span></pre><p id="d9c5" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><code class="fe ne nf ng nh b">open</code>方法将使用给定的<code class="fe ne nf ng nh b">options</code>打开一个对话框，因此不需要返回任何内容，但是<code class="fe ne nf ng nh b">confirmed</code>方法必须向调用者返回一个<code class="fe ne nf ng nh b">observable</code>，因为它必须等待响应。下一步是实现这两个方法。</p><p id="d631" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这里最重要的是:</p><ol class=""><li id="2b60" class="ml mm it kr b ks kt kw kx la og le oh li oi lm oj mt mu mv bi translated">定义正确的组件。这将被用作对话框</li><li id="ce6c" class="ml mm it kr b ks mw kw mx la my le mz li na lm oj mt mu mv bi translated">注入材料设计的<code class="fe ne nf ng nh b">MatDialog</code>服务。这将用于打开带有材质设计样式和动画的模式对话框。</li></ol><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="d69c" class="ny lo it nh b gy nz oa l ob oc">...</span><span id="c678" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">import { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';</strong><br/><strong class="nh jd">import { ConfirmDialogComponent } from './confirm-dialog.component';</strong></span><span id="6947" class="ny lo it nh b gy od oa l ob oc">...</span><span id="2573" class="ny lo it nh b gy od oa l ob oc">export class ConfirmDialogService {  <br/>  constructor(<strong class="nh jd">private dialog: MatDialog</strong>) { }</span><span id="a69c" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">  dialogRef: MatDialogRef&lt;ConfirmDialogComponent&gt;;</strong></span><span id="812b" class="ny lo it nh b gy od oa l ob oc">  public open(options) {<br/>    <strong class="nh jd">this.dialogRef = this.dialog.open(ConfirmDialogComponent, {    <br/>         data: {<br/>           title: options.title,<br/>           message: options.message,<br/>           cancelText: options.cancelText,<br/>           confirmText: options.confirmText<br/>         }<br/>    });  </strong><br/>  }</span><span id="9296" class="ny lo it nh b gy od oa l ob oc">  public confirmed(): Observable&lt;any&gt; {}</span><span id="cda6" class="ny lo it nh b gy od oa l ob oc">}</span></pre><blockquote class="nn no np"><p id="7710" class="kp kq nq kr b ks kt ku kv kw kx ky kz nr lb lc ld ns lf lg lh nt lj lk ll lm im bi translated">你可以在这里查看更多关于材质设计的内置对话框服务<a class="ae ko" href="https://material.angular.io/components/dialog/overview" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><p id="7035" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">完成一个，剩下一个！因为我们已经打开了一个对话框，我们可以处理它的响应，所以让我们实现<code class="fe ne nf ng nh b">confirmed</code>方法！</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="7234" class="ny lo it nh b gy nz oa l ob oc">...<br/><strong class="nh jd">import { map, take } from 'rxjs/operators';<br/></strong>...</span><span id="84cc" class="ny lo it nh b gy od oa l ob oc">public confirmed(): Observable&lt;any&gt; {<br/>    <strong class="nh jd"><br/>    return this.dialogRef.afterClosed().pipe(take(1), map(res =&gt; {<br/>        return res;<br/>      }<br/>    ));</strong><br/>  }</span><span id="1efd" class="ny lo it nh b gy od oa l ob oc">...</span></pre><p id="bce1" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们将返回一个可观察对象，当对话框关闭完成时会得到通知。</p><p id="6470" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对话服务准备好了！</p><p id="b193" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这是完整的类。在同一目录下另存为<code class="fe ne nf ng nh b">confirm-dialog.service.ts</code>。</p><p id="0bba" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">你可以在这里看到最后一堂课<a class="ae ko" href="https://gist.github.com/vadal/aa05a37f4d5fcbff231420567b13976d" rel="noopener ugc nofollow" target="_blank"/>:</p><figure class="nj nk nl nm gt kd"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">最终确认-dialog.service.ts</figcaption></figure><h2 id="88c7" class="ny lo it bd lp ok ol dn lt om on dp lx la oo op mb le oq or mf li os ot mj iz bi translated">模块文件</h2><p id="6a63" class="pw-post-body-paragraph kp kq it kr b ks mn ku kv kw mo ky kz la nb lc ld le nc lg lh li nd lk ll lm im bi translated">你可以在这里看到类<a class="ae ko" href="https://gist.github.com/vadal/d82da34e4174bbd7aa43f2cdc59a27d8" rel="noopener ugc nofollow" target="_blank"/>:</p><figure class="nj nk nl nm gt kd"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">最终确认-dialog.module.ts</figcaption></figure><p id="235a" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kr jd">不要忘记将组件添加到entryComponents中！</strong></p><h1 id="5dfa" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">在您的组件中使用它</h1><p id="8ab5" class="pw-post-body-paragraph kp kq it kr b ks mn ku kv kw mo ky kz la nb lc ld le nc lg lh li nd lk ll lm im bi translated">按照以下步骤向组件添加对话框:</p><ol class=""><li id="f7de" class="ml mm it kr b ks kt kw kx la og le oh li oi lm oj mt mu mv bi translated">导入服务<br/> <code class="fe ne nf ng nh b">import { ConfirmDialogService } from 'app/shared/confirm-dialog/confirm-dialog.service';</code></li><li id="b378" class="ml mm it kr b ks mw kw mx la my le mz li na lm oj mt mu mv bi translated">注入服务<br/> <code class="fe ne nf ng nh b">constructor(<strong class="kr jd">private dialogService: ConfirmDialogService</strong>, …)</code></li><li id="ad2b" class="ml mm it kr b ks mw kw mx la my le mz li na lm oj mt mu mv bi translated">准备对话框选项</li></ol><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="6d14" class="ny lo it nh b gy nz oa l ob oc">const options = {<br/>        title: 'CONFIRM.DOWNLOAD.JOB.TITLE',<br/>        message: 'CONFIRM.DOWNLOAD.JOB.MESSAGE',<br/>        cancelText: 'CONFIRM.DOWNLOAD.JOB.CANCELTEXT',<br/>        confirmText: 'CONFIRM.DOWNLOAD.JOB.CONFIRMTEXT'<br/>      };</span></pre><p id="9eae" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">4.打开<br/>对话框<code class="fe ne nf ng nh b"> this.dialogService.open(options);</code></p><p id="90c2" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">5.订阅确认的可观察</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="7e08" class="ny lo it nh b gy nz oa l ob oc">this.dialogService.confirmed().subscribe(confirmed =&gt; {<br/>   if (confirmed) {<br/>     //do something if confirmed is true<br/>   }<br/>});</span></pre><h1 id="3183" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">示例案例</h1><p id="0207" class="pw-post-body-paragraph kp kq it kr b ks mn ku kv kw mo ky kz la nb lc ld le nc lg lh li nd lk ll lm im bi translated">我们希望在单击保存按钮时显示一个确认对话框。<br/>该对话框将包含以下数据:</p><ul class=""><li id="6756" class="ml mm it kr b ks kt kw kx la og le oh li oi lm ms mt mu mv bi translated"><strong class="kr jd">标题:</strong>离开页面？</li><li id="937d" class="ml mm it kr b ks mw kw mx la my le mz li na lm ms mt mu mv bi translated"><strong class="kr jd">消息:</strong>离开此页面，您将永久丢失您的表单更改。</li><li id="fe3e" class="ml mm it kr b ks mw kw mx la my le mz li na lm ms mt mu mv bi translated"><strong class="kr jd">取消文本:</strong>取消</li><li id="2cc5" class="ml mm it kr b ks mw kw mx la my le mz li na lm ms mt mu mv bi translated"><strong class="kr jd">确认正文:</strong>是，离开页面</li></ul><p id="dbf2" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">组件中按钮的模板(html文件)</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="1dc1" class="ny lo it nh b gy nz oa l ob oc">&lt;button (click)="handleClick()"&gt;Save&lt;/button&gt;</span></pre><p id="c7aa" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然后在组件类中实现<code class="fe ne nf ng nh b">handleClick</code>方法。</p><pre class="nj nk nl nm gt nu nh nv nw aw nx bi"><span id="a81f" class="ny lo it nh b gy nz oa l ob oc">import { ConfirmDialogService } from 'app/shared/confirm-dialog/confirm-dialog.service';</span><span id="92c6" class="ny lo it nh b gy od oa l ob oc">...</span><span id="b37b" class="ny lo it nh b gy od oa l ob oc">constructor(private dialogService: ConfirmDialogService) {}</span><span id="c17e" class="ny lo it nh b gy od oa l ob oc">...</span><span id="ca26" class="ny lo it nh b gy od oa l ob oc"><strong class="nh jd">handleClick() {<br/>  const options = {<br/>    title: 'Leave page?',<br/>    message: 'By leaving this page you will permanently lose your form changes.',<br/>    cancelText: 'CANCEL',<br/>    confirmText: 'YES, LEAVE PAGE'<br/>  };<br/>  <br/>  this.dialogService.open(options);<br/>      <br/>  this.dialogService.confirmed().subscribe(confirmed =&gt; {<br/>     if (confirmed) {<br/>          this.saveData();<br/>        }<br/>      });<br/>}</strong></span><span id="e64e" class="ny lo it nh b gy od oa l ob oc">saveData() {<br/>  ...<br/>}</span></pre><p id="c032" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">结果将如下所示:</p><figure class="nj nk nl nm gt kd gh gi paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="gh gi ou"><img src="../Images/ff7ac7df1242cae6cbbfb7f46540b544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H0ysCPlIMGEz3qLXiLFZEQ.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">确认对话框示例</figcaption></figure><h1 id="cbef" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">结论</h1><p id="7a56" class="pw-post-body-paragraph kp kq it kr b ks mn ku kv kw mo ky kz la nb lc ld le nc lg lh li nd lk ll lm im bi translated">构建可重用模块，如本文中的对话框，对开发过程是有益的。减少代码重复、减少测试时间、UI一致性和更干净的编码方式是最重要的好处。</p><p id="d908" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果添加其他对话格式(例如信息模态)，这个模块会变得更加强大。</p><p id="d411" class="pw-post-body-paragraph kp kq it kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我希望你发现这个媒体指南有用！</p></div></div>    
</body>
</html>