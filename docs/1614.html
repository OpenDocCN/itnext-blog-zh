<html>
<head>
<title>Build Web APIs with Aqueduct #3 (video series)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Aqueduct #3构建Web APIs(视频系列)</h1>
<blockquote>原文：<a href="https://itnext.io/build-web-apis-with-aqueduct-3-video-series-13b04e8a326e?source=collection_archive---------6-----------------------#2018-12-11">https://itnext.io/build-web-apis-with-aqueduct-3-video-series-13b04e8a326e?source=collection_archive---------6-----------------------#2018-12-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7a1d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何序列化请求负载和集成PostgreSQL数据库</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/49bb5ea9bfabad79208b4eb0c8ae95bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yroUTlO2XnBpMnYAmk8e3w.png"/></div></div></figure><p id="3c66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这一部分，我们将看看<code class="fe ln lo lp lq b">Serializable</code>类，以及它们如何使我们能够处理请求体的有效载荷。然后，我们将继续设置和集成我们的PostgreSQL数据库。</p><p id="3faa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是该系列的第三个视频:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="00a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">→ <a class="ae lt" href="https://www.youtube.com/watch?v=sXk9nkdSVq4" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">在YouTube上观看</strong> </a></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="6ed0" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">什么是可序列化对象？</h1><p id="1f53" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">这些对象负责对请求的有效负载进行编码和解码。要使用这个类，定义我们的子类并覆盖<code class="fe ln lo lp lq b">asMap()</code>和<code class="fe ln lo lp lq b">readFromMap()</code>方法。</p><pre class="kg kh ki kj gt my lq mz na aw nb bi"><span id="4b00" class="nc mc iq lq b gy nd ne l nf ng">class Read extends Serializable {<br/>  String title;<br/>  String author;<br/>  int year;</span><span id="4402" class="nc mc iq lq b gy nh ne l nf ng">  @override<br/>  Map&lt;String, dynamic&gt; <strong class="lq ir">asMap</strong>() =&gt; <strong class="lq ir">{<br/>    'title': title,<br/>    'author': author,<br/>    'year': year,<br/>  }</strong></span><span id="9b56" class="nc mc iq lq b gy nh ne l nf ng">  @override<br/>  void <strong class="lq ir">readFromMap</strong>(Map&lt;String, dynamic&gt; <strong class="lq ir">requestBody</strong>) {<br/>    <strong class="lq ir">title</strong> = requestBody['title'] <strong class="lq ir">as</strong> String;<br/>    <strong class="lq ir">author</strong> = requestBody['author'] <strong class="lq ir">as</strong> String;<br/>    <strong class="lq ir">year</strong> = requestBody['year'] <strong class="lq ir">as</strong> int;<br/>  }<br/>}</span></pre><p id="7f22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以<code class="fe ln lo lp lq b">asMap()</code>方法接受<code class="fe ln lo lp lq b">Read</code>的实例成员并返回一个<code class="fe ln lo lp lq b">Map</code>结构，这在返回JSON响应时很有用。</p><p id="27b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">readFromMap()</code>用于将请求有效负载键提取到我们的实例属性中。这允许我们将实例绑定到POST请求方法中的<code class="fe ln lo lp lq b">body</code>有效负载参数:</p><pre class="kg kh ki kj gt my lq mz na aw nb bi"><span id="3fbf" class="nc mc iq lq b gy nd ne l nf ng">class ReadsController extends ResourceController {<br/>  ...<br/>  ...<br/>  @Operation.post()<br/>  Future&lt;Response&gt; createNewRead(@<strong class="lq ir">Bind.body</strong>() <strong class="lq ir">Read</strong> body) async {<br/>    ...<br/>  }<br/>  ...<br/>  ...<br/>}</span></pre><p id="b01c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<a class="ae lt" href="http://bit.ly/aqueduct-tutorial-3" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">完整视频</strong> </a>中，进一步了解这是如何工作的，以及我们如何集成一个全功能的PostgreSQL数据库。</p><p id="0724" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">→ <a class="ae lt" href="https://github.com/graphicbeacon/aqueduct-tutorial/tree/part-3" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">获取源代码</strong> </a></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="ae8a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">订阅</strong> <a class="ae lt" href="http://bit.ly/fullstackdart" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">我的YouTube频道</strong> </a>获取更多关于Dart全栈web开发各个方面的视频。</p><p id="570e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">喜欢，分享一下</strong> <a class="ae lt" href="https://twitter.com/creativ_bracket" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">跟我来</strong> </a>😍有关Dart的更多内容。</p><h1 id="1592" class="mb mc iq bd md me ni mg mh mi nj mk ml jw nk jx mn jz nl ka mp kc nm kd mr ms bi translated">进一步阅读</h1><ul class=""><li id="a8d1" class="nn no iq kt b ku mt kx mu la np le nq li nr lm ns nt nu nv bi translated"><a class="ae lt" href="http://aqueduct.io/docs/http/request_and_response/#serializable-objects" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">处理HTTP请求:</strong>可序列化对象</a></li><li id="eaf6" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae lt" href="http://aqueduct.io/docs/tut/executing-queries/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">导水管文件:</strong>从数据库中读取</a></li><li id="e600" class="nn no iq kt b ku nw kx nx la ny le nz li oa lm ns nt nu nv bi translated"><a class="ae lt" href="https://egghead.io/instructors/jermaine-oppong" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">egghead . io上的免费飞镖截屏</strong> </a></li></ul></div></div>    
</body>
</html>