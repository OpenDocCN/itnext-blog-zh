<html>
<head>
<title>Automate repetitive work with PlopJs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PlopJs自动化重复性工作</h1>
<blockquote>原文：<a href="https://itnext.io/automate-repetitive-work-with-plopjs-a20a98e5fa4?source=collection_archive---------5-----------------------#2019-08-19">https://itnext.io/automate-repetitive-work-with-plopjs-a20a98e5fa4?source=collection_archive---------5-----------------------#2019-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="264c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你从事的项目有很多重复的、容易出错的、细致的工作吗？如果是这样，伙计，你需要了解一下<a class="ae kl" href="https://plopjs.com" rel="noopener ugc nofollow" target="_blank"> plopJs </a>。去年，我参与了一个大型的React项目，如果没有它，我们将无法在规定的时间内交付。最近，我加入了一个. Net核心项目，该项目有一个非常面向细节(并且耗时)的架构，其中大量的工作是确保正确的东西被“插”在正确的地方。这时我想起扑通一声，心想嗯…如果我可以生成所有这些样板代码，并节省我的精力来关注真正重要的事情，会怎么样？</p><p id="8f01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="km">所以这里来一个关于plopJs的快速介绍:</em> </strong></p><p id="5c7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="km">什么是扑通？</em>T9】</strong></p><p id="6db7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个快速，强大，最重要的是，易于使用的代码生成器。</p><p id="e3ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它由问题、操作和一个用来生成代码的模板组成。</p><p id="ee9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">问题</em>:你对用户有什么要求？例如，你想创建一个控制器吗？控制器的名称是什么？</p><p id="e912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">动作</em>:你会怎么处理答案？创建一个新文件，修改一个现有文件，创建许多文件？</p><p id="d11e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">模板</em>:这是您想要通过替换一些值来生成的基本代码</p></div><div class="ab cl kn ko hu kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="ij ik il im in"><p id="ee94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，说够了！给我看看代码！</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi ku"><img src="../Images/8b92a53fc59dc17c835a9bdaa0af0608.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*m4Cj8eCfBCBoUf6bn1IfYw.jpeg"/></div></figure><p id="8bae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要安装扑通。</p><p id="73ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在首选命令行上打开项目目录。</p><p id="321b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要在项目上安装它，请使用:</p><pre class="kv kw kx ky gt lc ld le lf aw lg bi"><span id="4ab3" class="lh li iq ld b gy lj lk l ll lm"> <!-- -->$ npm install --save-dev plop</span></pre><p id="6ae1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要全局安装它:</p><pre class="kv kw kx ky gt lc ld le lf aw lg bi"><span id="7a20" class="lh li iq ld b gy lj lk l ll lm">$ npm install -g plop</span></pre><p id="2477" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在在你的文件夹中创建一个新文件，名为<em class="km"> plopfile.js </em>(为什么不具体一点呢？:P)</p><p id="05a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是乐趣的开始。这里是一个基本的扑通发生器，让我们看看:</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="60c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们一行一行地快速浏览一下:</p><p id="71e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第1行:函数接收扑通。</p><p id="1ee2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第3行:调用方法<em class="km"> setGenerator </em>，传递生成器名‘简单文件’和生成器期望的对象。</p><p id="8b32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第4行:设置对象描述，例如生成器将做什么。</p><p id="6ef8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第5行:用你需要的问题设置prompts数组(prompts使用<a class="ae kl" href="https://github.com/SBoudrias/Inquirer.js/" rel="noopener ugc nofollow" target="_blank"> inquirer.js </a>作为其引擎)。</p><p id="004f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第7行:定义题型；它是一个列表，一个输入还是一个检查表？在我们的例子中，它是一个输入类型，因为我们希望存储类型化的值。</p><p id="fcdf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第8行:存储用户输入值的变量名。</p><p id="4b00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第9行:你希望你的问题显示的信息。</p><p id="a92f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来是你想对给出的答案采取的行动。</p><p id="62b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第14行:定义你想采取的行动类型；在本例中，我们使用add，因为我们想要创建一个新文件。它可以是<em class="km"> addMany </em>、<em class="km"> modify </em>或任何其他内置选项。</p><p id="90ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第15行:定义创建新文件的路径和文件名。</p><p id="7d4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第16行:定义你的模板；在我们的例子中，我们正在做一个内嵌模板，它将被嵌入到我们的输出文件中。</p><p id="50f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在完成后，回到你的终端窗口，输入<em class="km">扑通:</em></p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/b79a2ce6617f46ab9d4af5de20249f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*iSEIgjSS0iczgxZbXS7xuw.png"/></div></figure><p id="6420" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它会问你问题并等待你的回答(在我们的例子中，是world)。</p><p id="9a10" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，您将会看到它为您创建了新文件的确认信息。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lq"><img src="../Images/a18f9acba14c5cffaff40a9551ef392d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CMqs0VHg53i_7Gmk7IqxTQ.png"/></div></div></figure><p id="2003" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这样，您已经定义了一个基本的生成器，并且可以使用了。</p><p id="7f5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通常这是不够的。您最终需要的是在单独的文件中实际创建您的生成器，并在plopFile.js中引用它们</p><p id="df0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有一个例子。</p><pre class="kv kw kx ky gt lc ld le lf aw lg bi"><span id="c441" class="lh li iq ld b gy lj lk l ll lm"><strong class="ld ir">const</strong> componentGenerator = require('./component/index.js');</span><span id="4127" class="lh li iq ld b gy lv lk l ll lm"><strong class="ld ir">const</strong> containerGenerator = require('./container/index.js');</span><span id="cda6" class="lh li iq ld b gy lv lk l ll lm"><strong class="ld ir">const</strong> actionGenerator = require('./action/index.js');</span><span id="cc72" class="lh li iq ld b gy lv lk l ll lm"><strong class="ld ir">const</strong> reducerGenerator = require('./reducer/index.js');</span><span id="71f1" class="lh li iq ld b gy lv lk l ll lm"><strong class="ld ir">const</strong> apiGenerator = require('./api/index.js');<br/></span><span id="0fcc" class="lh li iq ld b gy lv lk l ll lm">module.exports = plop <strong class="ld ir">=&gt;</strong> {</span><span id="dcc1" class="lh li iq ld b gy lv lk l ll lm">plop.addHelper('upperCase', text <strong class="ld ir">=&gt;</strong> text.toUpperCase());</span><span id="4f79" class="lh li iq ld b gy lv lk l ll lm">plop.setGenerator('component', componentGenerator);</span><span id="7e23" class="lh li iq ld b gy lv lk l ll lm">plop.setGenerator('container', containerGenerator);</span><span id="59ef" class="lh li iq ld b gy lv lk l ll lm">plop.setGenerator('action', actionGenerator);</span><span id="66cd" class="lh li iq ld b gy lv lk l ll lm">plop.setGenerator('reducer', reducerGenerator);</span><span id="41fd" class="lh li iq ld b gy lv lk l ll lm">plop.setGenerator('api', apiGenerator);</span><span id="6fdd" class="lh li iq ld b gy lv lk l ll lm">};</span></pre><p id="2a9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是项目文件夹的样子，而index.js是我的api生成器，注意api.js.hbs文件，这些是模板，它们使用手柄引擎，这就是为什么扩展<em class="km">。哈佛商学院</em></p><p id="7eee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">免责声明。js在。实际上并不需要hbs，我喜欢它是因为它让我对我要创建的文件有了一定的了解，所以我看着它，看到了一个模板(。hbs)，它将为我创建一个api.js文件。</em></p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/600f21d27b26abe97e63f5b3ed449eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*s3X1BEwAA5ZbrXFrthGYpg.png"/></div></figure><p id="7c16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的plopFile在根目录中，而生成器及其模板被组织到单独的文件夹中。如你所见，对于我的API生成器，我有4个不同的模板，它们是React项目示例的一部分。我还添加了动作文件，修改了actionTypes列表<em class="km">添加了新创建的动作</em>，并添加了API和reducer文件。</p><p id="b759" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，概括地说，通过几个简单的问题，我能够快速生成3个新文件并修改现有文件。当然，他们仍然需要一些小的调整，但大部分和相互引用已经为我创建和定义。</p><p id="5fb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！</p><p id="3610" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我知道你的想法，如果你在评论中有任何问题。</p><p id="4c67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有别忘了查看<a class="ae kl" href="https://plopjs.com/documentation/#getting-started" rel="noopener ugc nofollow" target="_blank">扑通的文档</a>！</p></div></div>    
</body>
</html>