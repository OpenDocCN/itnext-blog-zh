<html>
<head>
<title>Azure / SAML2.0 authentication in OutSystems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">外部系统中的Azure / SAML2.0身份验证</h1>
<blockquote>原文：<a href="https://itnext.io/azure-saml2-0-authentication-in-outsystems-1b94d11b196d?source=collection_archive---------4-----------------------#2020-03-03">https://itnext.io/azure-saml2-0-authentication-in-outsystems-1b94d11b196d?source=collection_archive---------4-----------------------#2020-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5af95614a08c5adb9a7b3a668cb562c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0PRjZw-hgsUDao_12S7yxQ.png"/></div></div></figure><div class=""/><p id="49d1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从版本<a class="ae kw" href="https://www.outsystems.com/downloads/ScreenDetails.aspx?MajorVersion=11&amp;ReleaseId=19322&amp;ComponentName=Platform+Server" rel="noopener ugc nofollow" target="_blank">11 . 0 . 542 . 0</a>(2019 . 7 . CP2)开始，OutSystems支持最终用户使用SAML通过Azure AD(以下简称为AAD)登录web应用程序。这将是我们在现实基础设施中实现基于SAML的认证之旅的第1部分。首先，让我们简单讨论一些基本原则。</p><p id="166d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">身份验证和授权通常组合在一起。这篇文章是关于认证的，因此我们想要定义这两个术语之间的区别。此外，理解本文中描述的变化如何影响用户维护和应用程序访问的处理是至关重要的。这些更改适用于所有(web)应用程序，不包括服务中心和service studio等外部系统模块。</p><p id="fa37" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">认证是指提供证据(如密码)来验证身份的过程。<br/>另一方面，授权是指验证某人或某物(身份)是否被允许访问屏幕或完成任何其他特定动作。</p><p id="29f3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的设置中，AAD将用于认证用户，授权由<a class="ae kw" href="https://www.outsystems.com" rel="noopener ugc nofollow" target="_blank">外部系统</a>的“用户”模块处理。<br/>这意味着您的用户或用户团队的角色分配仍然是在系统外完成的。因此，您可以通过向注册用户授予访问权限而不是授予他们特定于应用程序的角色来简化访问管理。</p><h2 id="9127" class="kx ky jb bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">使用外部身份认证的优点和缺点</h2><p id="9e01" class="pw-post-body-paragraph jy jz jb ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">与在“用户”模块中使用标准方法相比，使用AAD认证用户有几个优点。</p><ul class=""><li id="96dd" class="lv lw jb ka b kb kc kf kg kj lx kn ly kr lz kv ma mb mc md bi translated">从用户的角度来看，最大的优势是他们不必记住特定于外部系统应用程序的密码，而这是最终用户经常抱怨的。例如，通过使用外部认证提供者，用户可以使用他们用于登录他们的工作站和/或电子邮件的相同密码。</li><li id="6574" class="lv lw jb ka b kb me kf mf kj mg kn mh kr mi kv ma mb mc md bi translated">从管理的角度来看，通过一个集中点进行身份验证的优势在于，他们可以更轻松地建立一个强大的密码策略，并确保遵守该策略。除此之外，它还减轻了管理员的工作量，减少了上下车过程中跳过步骤的机会。此外，它还简化了登机和离机过程的审计。</li></ul><h2 id="a82e" class="kx ky jb bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">技术背景</h2><p id="6436" class="pw-post-body-paragraph jy jz jb ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">为了保持简洁，我们将集中讨论与SAML认证相关的核心概念。任何基于SAML的身份验证方法都有3个共享的核心概念。它们如下:</p><ul class=""><li id="bf4f" class="lv lw jb ka b kb kc kf kg kj lx kn ly kr lz kv ma mb mc md bi translated">校长。主体是试图访问资源的某人/某物。这通常是用户试图登录应用程序。</li><li id="08cc" class="lv lw jb ka b kb me kf mf kj mg kn mh kr mi kv ma mb mc md bi translated">在我们的例子中，服务提供者是向委托人(即用户)提供应用程序的外部系统服务器。</li><li id="68d7" class="lv lw jb ka b kb me kf mf kj mg kn mh kr mi kv ma mb mc md bi translated">身份提供者，在本例中，身份提供者可以理解为AAD。它是一个接收来自服务提供商的延期请求并作为认证方的系统。成功认证主体后，它将响应发送给服务提供者。</li></ul><p id="b00e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下面的例子中，*主体的*部分是由用户代理表示的流的开始。用户代理通常是浏览器/网络客户端。</p><figure class="mk ml mm mn gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/a171278a7ac0c0a144d7e4c534e3a437.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7F6LgXOSXWP9Z1FDNKboA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">SAML认证流程wiki</figcaption></figure><h2 id="2aca" class="kx ky jb bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">外部系统实施步骤</h2><p id="d657" class="pw-post-body-paragraph jy jz jb ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">现在我们已经定义了SAML的一些基础知识，我们将介绍如何在您的外部系统环境中实现它。在OutSystems云中实现这一点也是可能的，但是对于这个例子，我们使用了一个简单的设置，包括一个开发、测试和生产环境。其中每个环境都有自己的前端服务器。生存期服务器超出范围。所有这些都作为AWS中的本地安装运行。我们将使用OutSystems版本<a class="ae kw" href="https://www.outsystems.com/downloads/ScreenDetails.aspx?MajorVersion=11&amp;ReleaseId=19341&amp;ComponentName=Platform+Server" rel="noopener ugc nofollow" target="_blank">11 . 0 . 606 . 0</a>(2019年10月发布)。<br/>所有的步骤在每个环境中都是一样的，OutSystems确实提供了足够的<a class="ae kw" href="https://success.outsystems.com/Documentation/11/Developing_an_Application/Secure_the_Application/End-User_Management/End-Users_Authentication/Configure_Azure_AD_Authentication?utm_source=ost-outsystems%20tools&amp;utm_medium=ost-users&amp;utm_campaign=ost-docrouter&amp;utm_content=ost-helpid-30209&amp;utm_term=ost-contextualhelp" rel="noopener ugc nofollow" target="_blank">文档</a>来说明如何实现这些改变。</p><p id="3a6b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一般来说，在外部系统端切换到通过AAD认证只需要三个步骤。<br/>这方面的所有步骤都是通过“用户”模块完成的。<br/>转到您的环境用户模块，点击“配置认证”。然后，在下拉选项中，切换到“Azure AD”</p><figure class="mk ml mm mn gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/4be2048dfbb61b08c7194ee6c6b376cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hP6aOGfimrJqj5UIl7JTTw.png"/></div></div></figure><p id="b3ed" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于大多数设置来说，保留默认设置是一个很好的起点。您可以离开“高级选项”并跳到<br/>“下载SP元数据XML”按钮。您需要将结果文件发送给Azure基础架构的管理员。作为回报，他们可以向您发送另一个xml文件，您可以通过“从IDP/联盟元数据XML上传”<br/>上传该文件。完成这些步骤后，所有使用默认“用户”模块进行用户验证的(web)应用程序会将用户重定向到外部登录提供商。</p><h2 id="bcf2" class="kx ky jb bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">潜在的陷阱</h2><p id="3633" class="pw-post-body-paragraph jy jz jb ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">在开始使用这些设置测试应用程序之前，您必须考虑一些潜在的陷阱。<br/>最重要的问题是，在添加端，用户需要在适当的组/应用程序中才能登录。然而，不能从外部系统方面建立直接控制来实施这一点。这使得测试成为推出这些变化的重要部分。因此，它们应该完全按照您部署应用程序的方式来完成。首先在开发环境中，然后向前。<br/>同样需要注意的是，这些变化仅适用于传统的web应用，不适用于移动或反应式应用。对于这些，您需要使用单独的IDP模块。有关更多信息，请参见下一节。<br/>最后，在撰写本文时，还不支持通过相同的途径认证终身用户。我们预计这将在未来实现。现在，检查<a class="ae kw" href="https://www.outsystems.com/forge/" rel="noopener ugc nofollow" target="_blank">熔炉</a>中的组件可能会有用。</p><h2 id="77d6" class="kx ky jb bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">接下来的步骤</strong></h2><p id="53d1" class="pw-post-body-paragraph jy jz jb ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">虽然这些步骤集中在基础设施部分，但在应用程序级别仍有一些步骤要做。其中一些是强制性的，而另一些可以提高应用程序的可用性。还将深入了解移动设备的具体步骤。我的同事<a class="mt mu ep" href="https://medium.com/u/fc1ad0dcfa97?source=post_page-----1b94d11b196d--------------------------------" rel="noopener" target="_blank">威廉·安图内斯</a>将在本文的<a class="ae kw" href="https://medium.com/@william.antunes/azure-saml2-0-authentication-in-outsystems-part-2-e145f31f4420?source=friends_link&amp;sk=d587058be2be233f7b860316d5615599" rel="noopener">第二部分</a>中解释这一点以及更多。</p></div></div>    
</body>
</html>