<html>
<head>
<title>An AWS Lambda Serverless Journey - Part 1 - What, Why and How do I get started?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS Lambda无服务器之旅-第1部分-什么，为什么以及如何开始？</h1>
<blockquote>原文：<a href="https://itnext.io/an-aws-lambda-serverless-journey-part-1-what-why-and-how-do-i-get-started-7a9f2d60ddbb?source=collection_archive---------5-----------------------#2020-05-06">https://itnext.io/an-aws-lambda-serverless-journey-part-1-what-why-and-how-do-i-get-started-7a9f2d60ddbb?source=collection_archive---------5-----------------------#2020-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/35115e777124c179d7843c6a152bd278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gxz-GjfXj4nzJxU472kvzw.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">自动气象站λ</figcaption></figure><div class=""/><h1 id="dfdf" class="kf kg ji bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">什么</h1><p id="7dfb" class="pw-post-body-paragraph ld le ji lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">如果你还没有听说过无服务器这个词，并且你在IT世界里或者在IT世界附近，那么你一定是把头埋在沙子里了！术语<em class="mb">无服务器</em>用于描述无需配置服务器即可运行的应用程序或基于云的服务。在云竞赛中，像AWS提供的那些服务，使公司不必根据估计的流量或使用情况购买物理计算机资源，并在数据中心管理它们以运行它们的应用程序。然而，开发应用程序的范例仍然与内部应用程序构建非常相似(尽管要快得多)。首先，您需要提供一个服务器(在云中)，然后构建您的应用程序并将其部署在该服务器或服务器集群上。迁移到云的好处是，如果您低估或高估了应用程序对计算资源的需求，云为您提供了一种快速响应应用程序使用需求的方式(弹性地——想象橡皮筋拉伸和收缩以适应需求)。您的应用程序可以根据一组配置向上或向下扩展，并且您的应用程序可以神奇地跟踪一个指标，例如CPU利用率。也就是说，如果CPU利用率达到75%以上，那么另一台服务器会自动神奇地添加到应用集群来处理负载。“功能即服务”将这种反应能力向前推进了一步。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><p id="5b00" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated"><em class="mb">功能即服务</em>是计算领域的最新发展，旨在将计算空闲时间尽可能降至零。这(至少在我看来)类似于微积分对0概念的渐近方法，但是是关于计算空闲时间的。传统的内部解决方案有最多的空闲时间，通过自动扩展的云中弹性计算证明可以减少未使用的服务器上的空闲时间，而F-a-a-S希望使其接近于零。这意味着计算资源(函数)对“事件”做出反应。这可能包括一些客户端调用api、完成一个作业或者将一个文件上传到s3存储桶。一旦函数完成处理，它就会立即关闭。</p><blockquote class="mo"><p id="de54" class="mp mq ji bd mr ms mt mu mv mw mx ma dk translated">您只需为您使用的计算机付费。</p></blockquote></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><p id="7558" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">“Lambda”是AWS的<em class="mb">功能即服务</em>产品，早在2014年就已经首次亮相。依我拙见，它相当漂亮。作为一名Java开发人员，我最近花了大量的时间<a class="ae my" href="https://www.linkedin.com/pulse/micro-degrees-role-quality-certifications-brave-new-world-mitul-patel" rel="noopener ugc nofollow" target="_blank">在AWS平台</a>上获得认证，我开始用Lambda“做点什么”。但是在深入研究Lambda的方法之前，我想先了解一下<em class="mb">功能即服务或</em> F-a-a-S的原因。</p><h1 id="83c8" class="kf kg ji bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">为什么</h1><p id="6afc" class="pw-post-body-paragraph ld le ji lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lf jj">使用F-a-a-S的利弊:</strong></p><ul class=""><li id="ad99" class="mz na ji lf b lg mj lk mk lo nb ls nc lw nd ma ne nf ng nh bi translated">您根本不需要调配和管理任何服务器</li><li id="411d" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">水平缩放是为您管理的，并通过为您的函数接收的每个事件启动一个新的进程来实现。根据过去对流量的估计来确定应用程序的规模并不一定代表未来的需求。有了F-a-a-S，你就没有这个问题了。</li><li id="bf2f" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">如前所述，您只需为您使用的内容付费</li><li id="021a" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">函数可以用所有最流行的语言编写(在本系列中我将使用Java)。</li><li id="f36a" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">F-a-a-s简化了部署。只需将您的代码上传到您的函数中，您就(大部分)完成了。</li><li id="4d6a" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">减少了开发运维人员维护部署环境的需求(不要误解我的意思，我并不主张裁员，尤其是在现在这个时候)</li></ul><p id="d596" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">使用F-a-a-S的缺点:</p><ul class=""><li id="c835" class="mz na ji lf b lg mj lk mk lo nb ls nc lw nd ma ne nf ng nh bi translated">生活中的大多数事情都有约束。例如，AWS Lambda上的函数有15分钟的执行时间限制(在撰写本文时)。这意味着AWS上的F-a-a-S不适合长时间运行的函数。AWS上给定帐户中每个区域所有函数的默认并发限制是1，000。如果你决定将组织中的每一个应用程序都重写为Lambda函数(并且只有一个帐户),你可能会遇到问题！</li><li id="f47c" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">您的应用程序必须是无状态的，并且不是所有的应用程序类型都适合F-a-a-S。添加x +y。这对于所有调用都是一样的。它对请求加法的人一无所知，也不在乎。RESTful API是F-a-a-S的一个很好的候选。在AWS平台上，有很多情况下Lambda函数是计算的好选择。</li><li id="1598" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">存在供应商锁定的可能性。如果有一天你决定从AWS(或另一家厂商)中解脱出来怎么办？你能把你的代码库带走吗？在其他地方会有用吗？如果您使用了正确的技术或框架，答案是肯定的，我将在本系列的第2部分中谈到这一点。</li><li id="1311" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ne nf ng nh bi translated">事情从来没有看起来那么简单(生活中的大多数事情也是如此)！崔琰在这里对λ定价的细微差别进行了令人敬畏的深入探究<a class="ae my" href="https://blog.binaris.com/lambda-pricing-pitfalls/" rel="noopener ugc nofollow" target="_blank">。他是曼宁出版社出版的《生产就绪无服务器》一书的作者。</a></li></ul><h1 id="a0d6" class="kf kg ji bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated"><strong class="ak">该如何</strong></h1><p id="7f3a" class="pw-post-body-paragraph ld le ji lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">如果你像我一样，对开始在AWS Lambda上做一些无服务器开发感兴趣，但不知道从哪里开始，你不可避免地会开始“像疯子一样搜索”。你可能会遇到的第一件事是AWS SAM主页，或者更有可能是serverless.com的T2网站。).像我一样，如果你第一个到达serverless.com，并且是一个勤奋的人，你可能已经喝了他们的清凉饮料，开始干了起来。这没有错。不过，在我开始之前，我想更好地了解一下全局(就像我对大多数事情做的那样)。经过一些研究，这是我开始明白。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><p id="98ba" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">Cloudformation (CFN)是AWS的基础设施即代码产品，允许您在文本文件中指定您希望在AWS平台上创建和/或更新的内容。yaml)并且通过命令行中的几个简单命令，您得到了您所要求的(假设您正确地创作了您的基础设施代码yaml模板…如果您不知道您在做什么，这是一个很大的假设)。为了加快那些对<em class="mb">开发</em>和<em class="mb">部署</em>无服务器应用感兴趣的人的学习曲线，AWS在2016年末推出了SAM(无服务器应用模型)。到2018年4月，它已经被亚马逊开源。这导致第三方创建了几个框架，包括迄今为止最著名的无服务器框架(serverless.com)。这些框架是作为SAM的抽象而编写的。Cloudformation是AWS上<em class="mb">部署</em>的核心，SAM Serverless通过固执己见的配置和简化向最终用户隐藏了一些血淋淋的细节，然后你在互联网上找到的任何第三方框架都是开源SAM框架之上的抽象。</p><blockquote class="mo"><p id="1b93" class="mp mq ji bd mr ms mt mu mv mw mx ma dk translated">为了理解所有这些，我创建了一个漂亮的小图表，类似于AWS喜欢用来分析或比较和对比各种事物的图表。</p></blockquote><figure class="no np nq nr ns iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/3c8e8035b8ae70f15be9d54f1c7b0dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zhx3j1Hz2gtwLPKiO4S3zg.png"/></div></div></figure><p id="cb0e" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">正如您所看到的，在这个心理练习中被认为重要的两个方面是部署中的易用性/复杂性以及对AWS杠杆的可访问性(即，对您正在部署的资源的细粒度控制)。</p><blockquote class="mo"><p id="3aee" class="mp mq ji bd mr ms mt mu mv mw mx ma dk translated">事情越简单，你的控制就越少，控制越多，围绕部署的活动就变得越复杂。</p></blockquote><p id="5254" class="pw-post-body-paragraph ld le ji lf b lg nt li lj lk nu lm ln lo nv lq lr ls nw lu lv lw nx ly lz ma im bi translated">在这种分析中，有两件事情交织在一起，即开发和部署。Cloudformation严格来说是一种在AWS上供应(部署)资源的方法，而SAM和位于AWS SAM之上的第三方框架允许您进行开发和部署。</p><p id="537d" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">对我(和你的组织)来说，从一开始就学习如何在已经专有的平台(AWS)上使用像无服务器框架这样的第三方工具没有什么意义。我的意思是，在被另一方的解决方案束缚住和/或确定有绝对的需求之前，要知道你要做什么。对于像这样的个人冒险来说，影响是很小的，但是对于您的组织来说，在框架选择上的仓促决定可能会产生长期的影响。</p><blockquote class="mo"><p id="2a57" class="mp mq ji bd mr ms mt mu mv mw mx ma dk translated">就像《夺宝奇兵》和《圣杯》一样……如果你必须选择的话。明智地选择。</p></blockquote><p id="e651" class="pw-post-body-paragraph ld le ji lf b lg nt li lj lk nu lm ln lo nv lq lr ls nw lu lv lw nx ly lz ma im bi translated">我决定和SAM一起进行快速本地开发，一旦我的项目在本地运行，我将开发CloudFormation模板，将其部署到AWS。我希望能够完全控制资源调配的各个方面，以便最终能够自动化开发运维。我用的是Java。你问为什么是Java？因为我是一个Java开发者假人。AWS Lambda 使用Java的理由有很多<a class="ae my" href="https://engineering.opsgenie.com/4-advantages-of-using-java-with-aws-lambda-21c0dc539de3" rel="noopener ugc nofollow" target="_blank">，不使用Java的理由很少(即冷启动)。我不打算在这里讨论这个问题。有一个不错的小</a><a class="ae my" href="https://engineering.opsgenie.com/4-advantages-of-using-java-with-aws-lambda-21c0dc539de3" rel="noopener ugc nofollow" target="_blank">帖子</a>报道了Serhat的话题，能给你一些提示吗？</p><h1 id="761f" class="kf kg ji bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated"><strong class="ak">让我们准备好战斗吧！</strong></h1><p id="c3a4" class="pw-post-body-paragraph ld le ji lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">就像在一场精彩的有奖比赛中，对第一轮的期待是它的一半。好吧，我们去追吧。我想介绍的最后一件事是设置您的本地开发工具包，使用Java进行本地AWS Lambda开发。</p><p id="07dd" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">以下是您需要安装的内容:</p><ol class=""><li id="35eb" class="mz na ji lf b lg mj lk mk lo nb ls nc lw nd ma ny nf ng nh bi translated">Java JDK 8或11(对于AWS Lambda上的Java，您有<a class="ae my" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html" rel="noopener ugc nofollow" target="_blank"> 2种选择</a></li><li id="beef" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ny nf ng nh bi translated">Git(如果您想运行示例HelloWorld SAM无服务器应用程序。它在幕后使用Git来下拉它需要的东西。如果你没有安装它，你会得到一个错误)</li><li id="8a76" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ny nf ng nh bi translated">Docker (SAM拉下一个Docker镜像来运行你的无服务器Lambda代码。它被称为lambci/lambda:java8 Docker容器映像)</li><li id="60a1" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ny nf ng nh bi translated">专家</li><li id="79e3" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ny nf ng nh bi translated">AWS帐户和用户(要使用)</li><li id="2621" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ny nf ng nh bi translated">AWS CLI(确保配置并测试)和<a class="ae my" href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html" rel="noopener ugc nofollow" target="_blank"> SAM CLI </a>(注意版本。如果您安装了旧版本的AWS CLI，您将需要特定版本的SAM CLI(我看到的错误告诉我，我需要SAM CLI版本&lt; 0.40，即0.39)。在IntelliJ)中创建示例Hello World无服务器项目时，它会报错。您可以安装最新版本的所有程序，这样您就不用头疼了！我最终做到了。</li><li id="6744" class="mz na ji lf b lg ni lk nj lo nk ls nl lw nm ma ny nf ng nh bi translated">IntelliJ (&gt;&gt; Eclipse IMO)和用于IntelliJ的AWS工具包</li></ol><blockquote class="mo"><p id="c670" class="mp mq ji bd mr ms nz oa ob oc od ma dk translated">运气好的话，谷歌搜索、视频观看、博客阅读等等。您应该能够自己安装所有的先决条件。</p></blockquote><p id="d3d8" class="pw-post-body-paragraph ld le ji lf b lg nt li lj lk nu lm ln lo nv lq lr ls nw lu lv lw nx ly lz ma im bi translated">8.最后，去看这个来自马嘴 (AWS)的短视频<a class="ae my" href="https://youtu.be/xbbkNVr27Is?t=282" rel="noopener ugc nofollow" target="_blank">并跟随。我在他开始谈论在IntelliJ中创建SAM项目的确切时间链接了视频，以省去您不得不听他们闲聊的麻烦(不客气)。不要担心IntelliJ版本(正如他在视频中提到的)。我运行的是IntelliJ IDEA 2020.1(终极版)Build #IU-201.6668.121，构建于2020年4月8日，她用</a><a class="ae my" href="https://aws.amazon.com/intellij/" rel="noopener ugc nofollow" target="_blank"> AWS Toolkit for IntelliJ </a>发出了像小猫一样的咕噜声。如果一切顺利，你应该会在你的彩虹装置的最后看到这一桶金。</p><figure class="of og oh oi gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/4dae6f120597a521ecfac0c9fcaf9b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vfxeb4MzZglaRc2c7lkA9A.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">IntelliJ中的AWS SAM无服务器项目</figcaption></figure><blockquote class="mo"><p id="6447" class="mp mq ji bd mr ms nz oa ob oc od ma dk translated">我希望有人能为我写一篇这样的文章。可惜没人知道，所以我自己解决了。</p></blockquote><p id="b97d" class="pw-post-body-paragraph ld le ji lf b lg nt li lj lk nu lm ln lo nv lq lr ls nw lu lv lw nx ly lz ma im bi translated">无论如何，我希望你发现这非常有用。</p><p id="feea" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">在本系列的第2部分<a class="ae my" href="https://medium.com/@mitulipatel/an-aws-lambda-serverless-journey-part-2-a-serverless-api-in-java-f713d8b80fc6" rel="noopener">中，我们将探索SAM模板的剖析和我利用SAM local和DynamoDB local为一个简单(但并非微不足道)的RESTful API开发的项目。我们将详细介绍它，以及它与我编写的用于将应用程序部署到AWS的Cloudformation模板之间的区别。</a></p><p id="2948" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">直到下一次朋友。</p><p id="066d" class="pw-post-body-paragraph ld le ji lf b lg mj li lj lk mk lm ln lo ml lq lr ls mm lu lv lw mn ly lz ma im bi translated">米图尔</p></div></div>    
</body>
</html>