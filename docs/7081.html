<html>
<head>
<title>My toolbox: Wireshark</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的工具箱:Wireshark</h1>
<blockquote>原文：<a href="https://itnext.io/my-toolbox-wireshark-c4293f216c43?source=collection_archive---------1-----------------------#2022-06-06">https://itnext.io/my-toolbox-wireshark-c4293f216c43?source=collection_archive---------1-----------------------#2022-06-06</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><p id="66c8" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">在我之前的工具箱文章中，我谈到了HttpToolkit，以及看到http请求是多么的棒。还有一个更老的工具，大概是网络调试工具的瑞士军刀(没错，我已经老到对它的前身tcpdump有贡献了)，Wireshark。</p><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj kn"><img src="../Images/eb22720ab66b747d9d192407ba847c16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUHpMxFUHu3wmhh98a7RfA.png"/></div></div></figure><p id="ea42" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">Wireshark直接在运行它的机器的网络层上运行，这一方面意味着您可以“看到”所有正在进行的流量。这也意味着您看不到https连接内部的内容。在这里，HttpToolkit是正确的选择。</p><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj kz"><img src="../Images/d9eb0b54f04a2616b1de92012aa4754c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4mB8uJvuPdFeAf3VNXfVWA.png"/></div></div></figure><p id="d380" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">启动Wireshark后(由于其功能强大，通常需要以特权用户身份完成)，会显示检测到的网络接口列表，并且可以在选定的接口上输入流量过滤器。从上面的截图可以看出，过滤表达式可以相当精细；更多见下文。接口列表还显示了一些关于他们获得的流量的迷你图，这可能是一个很好的提示，看看选择哪一个。本地主机的那个(比如做curl<a class="ae km" href="http://localhost:8085/" rel="noopener ugc nofollow" target="_blank">http://localhost:8085/</a>使用本地主机)标有<em class="la"> Loopback </em>，俗称<em class="la"> lo0 </em>。</p><p id="ac2c" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">录制开始后，顶部会出现一个列表视图，每行显示一个数据包，其中包含源和目的地、使用的IP协议以及数据包的一些解码信息。当你点击一行时，更多的细节会显示在下面的文本视图中。</p><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj lb"><img src="../Images/7bd385173ffb66152a5f5beb9c3a0ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lcfxm58mpnNhCLYZddtW7Q.png"/></div></div></figure><p id="48de" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">您可能已经看到了数据包18–21左边的小括号:这些数据包一起属于一个TCP连接，该连接在线路上被分成多个IP数据包。</p><p id="f732" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">上面的观点可能相当无趣，而且过于冗长。图标下方的文本字段允许应用显示过滤器:</p><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj lc"><img src="../Images/8dceb262f6100acbb1d1d4cd0819d25c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oebv-bI-c39-DvYN26XogQ.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated">过滤得到非200响应的http请求</figcaption></figure><p id="9e2c" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">可能的过滤器项目列表很大。Wireshark有一个向导可以交互式地构建这样的过滤器。不幸的是，它有点隐藏——在之前的截图中，我已经用橙色圆圈标记了要调用它的位置。</p><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj lh"><img src="../Images/fd524627f56ec2d8e92b076019f0f1a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IrZhLWoiY8yAdSr9o9MpvQ.png"/></div></div><figcaption class="ld le gk gi gj lf lg bd b be z dk translated">筛选表达式向导</figcaption></figure><p id="c137" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">最好的方法可能是启动Wireshark并亲自试用。在macOS上，很容易通过<em class="la">brew install-cask wireshark从自制软件安装。</em>您可能还需要安装一个额外的包来更改<em class="la"> bpf </em>的访问权限，bpf是提供过滤的(伪)设备:<em class="la">brew install—cask wireshark-chmodbpf</em></p><h2 id="c120" class="li lj ir bd lk ll lm dn ln lo lp dp lq jz lr ls lt kd lu lv lw kh lx ly lz ma bi translated">TL；博士；医生</h2><p id="8760" class="pw-post-body-paragraph jo jp ir jq b jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh mf kj kk kl ik bi translated">Wireshark是一个超级强大的工具，可以进行各种调试并了解计算机网络层上发生的事情。它的界面可能有点神秘，但值得一试。Wireshark帮助了我很多次，我无法大声称赞它的价值。</p></div></div>    
</body>
</html>