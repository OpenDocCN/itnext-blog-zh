<html>
<head>
<title>Organize your routes with Vue Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue路由器组织您的路线</h1>
<blockquote>原文：<a href="https://itnext.io/vue-router-99e334094362?source=collection_archive---------0-----------------------#2019-03-24">https://itnext.io/vue-router-99e334094362?source=collection_archive---------0-----------------------#2019-03-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5e66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于如何在单页应用程序中组织路线，每个人都有自己的看法——我们没有什么不同😀。</p><p id="ea83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们在当前的项目中使用了<a class="ae kl" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>，所以我们也使用了<a class="ae kl" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue路由器</a>。</p><p id="c609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们想描述一下我们用来组织路由器及其路由的方法。稍后我们可能会改变/改善当前的状态，但现在我将描述现状。</p><h2 id="d364" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">文件夹结构</h2><p id="7ac0" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">我们就如何组织路线进行了几次迭代，我们肯定会再进行几次迭代，直到我们完全满意为止。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/2bad25493f9aac877cc43db7a82bf69c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pj1ezbBzQnG4NHlD0seaWg.png"/></div></div></figure><p id="dc77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们目前使用的文件夹结构非常简单:</p><ul class=""><li id="6158" class="lw lx iq jp b jq jr ju jv jy ly kc lz kg ma kk mb mc md me bi translated"><code class="fe mf mg mh mi b">index.js</code> -定义路线的<code class="fe mf mg mh mi b">beforeEach</code>逻辑</li><li id="2a5c" class="lw lx iq jp b jq mj ju mk jy ml kc mm kg mn kk mb mc md me bi translated"><code class="fe mf mg mh mi b">/routes/public.js</code> —拥有所有公共路线(如<code class="fe mf mg mh mi b">/</code>、<code class="fe mf mg mh mi b">/login</code>、<code class="fe mf mg mh mi b">/registration</code>等)。)</li><li id="7404" class="lw lx iq jp b jq mj ju mk jy ml kc mm kg mn kk mb mc md me bi translated"><code class="fe mf mg mh mi b">/routes/private.js</code> —拥有认证用户的所有路由</li><li id="014f" class="lw lx iq jp b jq mj ju mk jy ml kc mm kg mn kk mb mc md me bi translated"><code class="fe mf mg mh mi b">/routes/index.js</code> -连接所有的<code class="fe mf mg mh mi b">public</code>和<code class="fe mf mg mh mi b">private</code>路线并导出它们</li></ul><p id="8d66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们快速浏览一下每个文件，您会发现它很快就会变得有意义。</p><h2 id="a62f" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">src/路由器/index.js</h2><p id="1330" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated"><code class="fe mf mg mh mi b">index.js</code>只持有一条<code class="fe mf mg mh mi b">root</code>路线(没有也可以走)。在我们的例子中，它是<code class="fe mf mg mh mi b">dashboard</code>路线，用户一旦通过身份验证就被重定向到该路线。</p><p id="85bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的，那么<code class="fe mf mg mh mi b">index.js</code>最重要的部分就是<code class="fe mf mg mh mi b">beforeEach</code>检查。</p><p id="8811" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的应用程序中，我们有两种类型的路由:</p><ul class=""><li id="2f9e" class="lw lx iq jp b jq jr ju jv jy ly kc lz kg ma kk mb mc md me bi translated">严格来说是那些——你必须退出才能访问它们</li><li id="546e" class="lw lx iq jp b jq mj ju mk jy ml kc mm kg mn kk mb mc md me bi translated">那些——你必须通过认证才能访问它们</li></ul><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="e752" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从上面的代码片段中可以看出，我们从本地<code class="fe mf mg mh mi b"><a class="ae kl" href="https://vuex.vuejs.org/" rel="noopener ugc nofollow" target="_blank">Vuex</a></code>存储中读取了身份验证状态。我们需要决定一条路线是否可以被访问的其他信息存储在路线的<a class="ae kl" href="https://router.vuejs.org/guide/advanced/meta.html" rel="noopener ugc nofollow" target="_blank">元字段</a>中:</p><ul class=""><li id="5994" class="lw lx iq jp b jq jr ju jv jy ly kc lz kg ma kk mb mc md me bi translated"><code class="fe mf mg mh mi b">onlyLoggedOut</code> —一条路线只能由未经验证的用户访问</li><li id="a8d6" class="lw lx iq jp b jq mj ju mk jy ml kc mm kg mn kk mb mc md me bi translated"><code class="fe mf mg mh mi b">isPublic</code> -这是一条公共路线，无需认证就可以访问(<code class="fe mf mg mh mi b">/login</code>、<code class="fe mf mg mh mi b">/registration</code>等)。)</li></ul><p id="f023" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只有两种情况(开始时我们希望保持简单):</p><ul class=""><li id="3e1d" class="lw lx iq jp b jq jr ju jv jy ly kc lz kg ma kk mb mc md me bi translated"><code class="fe mf mg mh mi b">!isPublic &amp;&amp; !authenticated</code> —用户不是<code class="fe mf mg mh mi b">authenticated</code>，而是试图访问<code class="fe mf mg mh mi b">private</code>路线——他/她将被重定向到<code class="fe mf mg mh mi b">/login</code>页面，并在成功认证后被重定向到他试图访问的页面</li><li id="272b" class="lw lx iq jp b jq mj ju mk jy ml kc mm kg mn kk mb mc md me bi translated"><code class="fe mf mg mh mi b">authenticated &amp;&amp; onlyLoggedOut</code>-用户是<code class="fe mf mg mh mi b">authenticated</code>，但试图访问<code class="fe mf mg mh mi b">public</code>页面——他将被重定向回<code class="fe mf mg mh mi b">dashboard</code></li></ul><h2 id="ab0c" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">src/router/routes/public.js</h2><p id="02f0" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">我们正在考虑分解路线，并把它们放入各自的文件中，但是，嗯，也许以后吧:)。</p><p id="e7ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，所有的公共路线都在一个文件中，它们都在同一个<code class="fe mf mg mh mi b">meta</code>字段中:</p><pre class="ll lm ln lo gt mq mi mr ms aw mt bi"><span id="b53f" class="km kn iq mi b gy mu mv l mw mx">meta: {<br/>  public: true,<br/>  onlyLoggedOut: true<br/>}</span></pre><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mo mp l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">src/router/routes/public.js</figcaption></figure><p id="05da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了不污染每条路线，我们将在文件的<code class="fe mf mg mh mi b">export</code>部分的所有路线中添加<code class="fe mf mg mh mi b">meta</code>字段。这样，我们就不必考虑将<code class="fe mf mg mh mi b">meta</code>字段添加到每个新添加的路由中。</p><h2 id="2c9e" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">src/router/routes/private.js</h2><p id="b4f4" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">你现在知道该怎么做了。所有的私有路径都在一个文件中，并且<code class="fe mf mg mh mi b">meta</code>字段被添加到<code class="fe mf mg mh mi b">export</code>部分中的每一个路径中。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mo mp l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">src/router/routes/private.js</figcaption></figure><h2 id="d882" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">src/router/routes/index.js</h2><p id="a93a" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">你可能会问<code class="fe mf mg mh mi b">routes/index.js</code>里面有什么。它只是从<code class="fe mf mg mh mi b">public.js</code>和<code class="fe mf mg mh mi b">private.js</code>导入路线并将它们作为一个导出的实用程序文件。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="6515" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个文件不是必需的，你可以直接将<code class="fe mf mg mh mi b">public</code>和<code class="fe mf mg mh mi b">private</code>路线导入到<code class="fe mf mg mh mi b">src/router/index.js</code>中</p><h2 id="75e5" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">下一步是什么</h2><p id="df0c" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">在接下来的几个月里，我们可能会改变并有希望改进我们的路由器设置，我会试着分享我们是如何改变我们的设置以及为什么。现在这个简单的例子可以帮助你开始。</p></div></div>    
</body>
</html>