<html>
<head>
<title>Building a Crypto Price Tracker for Touch Bar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Touch Bar构建加密价格跟踪器</h1>
<blockquote>原文：<a href="https://itnext.io/building-a-crypto-price-tracker-for-touch-bar-317c490e613?source=collection_archive---------1-----------------------#2017-12-21">https://itnext.io/building-a-crypto-price-tracker-for-touch-bar-317c490e613?source=collection_archive---------1-----------------------#2017-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/526d9ffaaaa8489bcd416f6e9f70de45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vj_Kq38OtGY1herMy43CgA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">BTC、瑞士联邦理工学院、DASH、BTG、XMR对美元——使用<a class="ae kc" href="https://chrislennon.github.io/Crypto-Touchbar-App/" rel="noopener ugc nofollow" target="_blank">网络应用</a>生成</figcaption></figure><p id="3662" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fbuilding-a-crypto-price-tracker-for-touch-bar-317c490e613" rel="noopener ugc nofollow" target="_blank"> <em class="lb">点击这里在LinkedIn </em> </a>上分享这篇文章</p><p id="dfa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自从2013年比特币价格飙升以来，我一直在关注加密技术，尽管很有趣，但我从未深入研究过这项技术。2016年底，我看到围绕区块链、比特币和加密货币的炒作再次兴起。我认为比特币的价格上涨就像过山车一样，引发了很多兴趣，无论是在技术社区还是现在的普通大众中，这都要归功于媒体的炒作。</p><figure class="ld le lf lg gt jr gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/90ccfec98889af3e16fcf2e0f333b9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*VPT5nzQIas5wkSCqQahqmA.gif"/></div></figure><p id="ec1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比特币的价格肯定是一路上涨——不管“这是泡沫吗？”你提出的问题——几乎没有一周不出现大幅上涨，不管是上涨还是下跌。</p><p id="5fbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">问题</strong></p><p id="eee5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个月都有大量的硬币爆炸，每一个都有自己的名气，每一个都有相应的价格。ICOs成为一种东西，硬叉子更加流行。这给我带来了一个问题:</p><p id="3020" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我如何跟踪所有这些价格，最好是以一种简单/无干扰的方式？我已经一天多次查看我的手机，在各种货币间切换。与此同时，我开始了一份新工作——虽然我自己并不相信这种宣传——我收到了一台带触控条的新MacBook，这是我从未想过会用到的东西。</strong></p><p id="fef0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着我头脑中的齿轮转动，我发现有些人也有类似的想法——在touch bar上进行价格追踪！我找到的第一个项目是Ryan Gordon的，他最初是受这篇文章的启发。这是一个很好的开始！事实上，我用了几个月的时间来运行我自己定制版本的Ryan的脚本。</p><p id="8370" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后问题出现了，不是脚本的问题，更多的是人们开始在我的设备上看到它，当然，问题开始滚滚而来:</p><ul class=""><li id="3e17" class="lh li iq kf b kg kh kk kl ko lj ks lk kw ll la lm ln lo lp bi translated">我能得到一份拷贝吗？</li><li id="1f9b" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">你能把它换成和这个交易所一起工作吗？</li><li id="c7d3" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">可以加x，y，z币吗？</li></ul><p id="5ee4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于这种情况一个月发生几次，我可以看出，首先，人们想要它——这起初让我感到惊讶。其次，我厌倦了构建json文件、复制和粘贴脚本、摆弄图标——所有这些都是非常手工的。</p><p id="f5d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">解决方案</strong></p><p id="7c36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不得不把自己从大量的工作中拯救出来，所以对我来说很明显，我应该为此建立一个web应用程序，保持它的开源性，并借鉴人们已经完成的关于图标等事物的伟大工作。我也将自己描述为一个黑客(不是媒体意义上的)——更多的是我通过一个解决方案，随着想法的工作和失败而迭代——这意味着我可以快速交付一些东西，但通常带有一点代码味道。</p><p id="a8e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">https://chrislennon.github.io/Crypto-Touchbar-App/出生了。生活在<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上，通过GitHub页面部署以避免主机开销。下面是我在创建这个应用程序时经历的一般步骤和阶段。</p><p id="13eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">为人口建立模板和逻辑</strong></p><p id="7db4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前面的例子都使用了我已经喜欢上的<a class="ae kc" href="https://www.boastr.net/" rel="noopener ugc nofollow" target="_blank"> BetterTouchTool </a>。第一步是创建一个基本模式，允许我导出/导入一个JSON文件，并根据用户想要的硬币填充它。</p><p id="0d46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我已经有了我想要的风格的例子——一个在一个按钮下捕捉所有硬币的组(现在是可选的),每个硬币都有自己的符号，它们的价格，一个简单的指标，它是上涨还是下跌，最后是一个关闭组按钮，以退出硬币组。</p><p id="d9d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些组件中的每一个都是首先在BetterTouchTool中创建的，然后手动调整。</p><p id="8e63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最后使用的模式在<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/blob/master/data/BTTSchema.js" rel="noopener ugc nofollow" target="_blank">中可用。/data/BTTSchema.js </a></p><p id="7569" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步是从硬币列表中填充。对于硬币本身，我识别了一些信息，比如它们的名称、交易所使用的股票代码以及它们的图标。对于传统货币——美元、欧元等，我也需要这个。。/data/coins.js &amp;。/data/fiat.js</p><p id="ab18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在之前的实验中，我已经构建了一个基本的applescript(类似于灵感项目提供的那些程序)。我发现了一个通用的API，它能够处理多种加密货币，也能够转换成多种传统货币——https://www.cryptocompare.com/api/#。</p><p id="235f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这些信息，遍历硬币列表并填充每个硬币所需的部分模式和脚本就变得相当容易了。您可以在<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/blob/master/js/crypto.js" rel="noopener ugc nofollow" target="_blank">的“generateJSON”函数中看到这一点。/js/crypto.js </a>。最初，这只是一个静态数组，没有用户选择—然而，这种情况即将改变。</p><p id="0ea9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">用户选择和用户界面</strong></p><p id="72ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，为了让用户能够创建自己的工具栏，需要一个UI。一个问题是我通常没有时间研究CSS或者样式——但是我理解它的重要性。</p><p id="7a7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我决定从“简单”开始，使用和以前一样的硬币列表迭代出一系列用户可以选择的复选框。在用户选择了他们想要的密码并点击“导出”之后，我选择了选中的复选框，并把这个静态json输入到我上面概述的generateJSON函数中。您可以在<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/blob/master/js/crypto.js" rel="noopener ugc nofollow" target="_blank">的“加载数据”功能中看到复选框和输入的填充。/js/crypto.js </a>。</p><p id="4c2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这样做的时候，我遇到了一些问题，主要是在我的迭代逻辑和缺乏专业知识JS中，我可以看到这个问题，但我没有100%的选择来修复它——恳求一位同事(感谢<a class="ae kc" href="https://github.com/BJJLangedijk" rel="noopener ugc nofollow" target="_blank"> Bart </a>！)他很快提出了一个解决方案。我在每次迭代中覆盖对象，而不是将它克隆到自己的独立版本。几个“let”语句和Object.assign()语句之后，我又回到了正轨。</p><p id="01ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步是整理界面并向用户提供预览。touch bar的预览和主页的布局都有点CSS的味道，但是在我的常驻CSS monkey和GitHub页面大师的指导下(感谢<a class="ae kc" href="https://github.com/ThomasShaped/" rel="noopener ugc nofollow" target="_blank"> Thomas </a>！)我决定实现基本的GitHub pages slate风格(但手动实现，因为它只能通过Jekyll进行markdown ),并为自己创建了一些漂亮的按钮和一个预览触摸栏。这种样式在<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/tree/master/style" rel="noopener ugc nofollow" target="_blank">中可用。/style </a>目录，具体来说就是<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/blob/master/style/styles.css" rel="noopener ugc nofollow" target="_blank">。自定义元素的/style/styles.css </a>。</p><p id="ee5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步是什么？</p><p id="8c59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">老实说。谁知道呢……这是因为我为朋友和同事节省了一些工作，他们想要展示一些东西，我觉得也应该向世界开放。我正在通过我的GitHub <a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/issues" rel="noopener ugc nofollow" target="_blank">问题页面</a>追踪想法和采纳建议，并且当我有时间和灵感的时候，我一直在努力实施它们。</p><p id="4991" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一些已经浮出水面的想法(其中大部分在本文发布之前已经写入了代码):</p><ul class=""><li id="98a7" class="lh li iq kf b kg kh kk kl ko lj ks lk kw ll la lm ln lo lp bi translated">为API价格检查提供用户定义的刷新间隔(完成)</li><li id="aec3" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">提供用户定义的颜色选择器来改变工具栏按钮的颜色(完成)</li><li id="abc0" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">提供切换以启用/禁用硬币分组(完成)</li><li id="bfce" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">从API实现硬币的动态列表(TODO，<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/issues/13" rel="noopener ugc nofollow" target="_blank">有一些问题</a></li><li id="da90" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">整理一些已经发生的“代码进化”:</li><li id="d762" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">将JS重构为对其他开发人员来说更漂亮、更有用的东西</li><li id="d477" class="lh li iq kf b kg lq kk lr ko ls ks lt kw lu la lm ln lo lp bi translated">处理使用SVG图标和base64 PNG(BTT)转换更好</li></ul><p id="0a5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我欢迎评论和建议——请通过<a class="ae kc" href="https://github.com/chrislennon/Crypto-Touchbar-App/issues" rel="noopener ugc nofollow" target="_blank"> GitHub </a>、这篇文章或者<a class="ae kc" href="https://twitter.com/CDLennon" rel="noopener ugc nofollow" target="_blank"> twitter </a>联系。</p><p id="de54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编辑:不敢相信我漏掉了一张最终结果的图！这是我做的一些硬币对美元的出口——现在移到了文章的顶部。</p></div></div>    
</body>
</html>