<html>
<head>
<title>Supporting multiple languages in React Native with Expo’s Localization module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Expo的本地化模块在React Native中支持多种语言</h1>
<blockquote>原文：<a href="https://itnext.io/supporting-multiple-languages-in-react-native-with-expos-localization-module-9611f9e3b6a0?source=collection_archive---------1-----------------------#2018-11-05">https://itnext.io/supporting-multiple-languages-in-react-native-with-expos-localization-module-9611f9e3b6a0?source=collection_archive---------1-----------------------#2018-11-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cc5975056854329fa6211ec6237bf7aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nSzr8tnGo9QEXqhQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@jontyson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔恩·泰森</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的“你好LED标牌”</figcaption></figure></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="f397" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">这是关于使用React Native为</strong><a class="ae kc" href="https://uncovercity.com/" rel="noopener ugc nofollow" target="_blank"><strong class="km ir">uncovercity</strong></a><strong class="km ir">构建iOS和Android应用程序的4篇系列文章中的第三篇。你可以在这里找到其他的:</strong></p><ol class=""><li id="66ad" class="li lj iq km b kn ko kr ks kv lk kz ll ld lm lh ln lo lp lq bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/speeding-up-the-build-of-a-surprise-dinner-app-in-react-native-using-expo-2c18beabaaa7">使用Expo加速React Native中惊喜晚餐应用的构建</a></li><li id="d93e" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/battle-testing-a-ride-sharing-api-and-react-natives-mapview-in-expo-c0ce5d50cbf0?source=your_stories_page---------------------------">在Expo中对战测试拼车API和React Native的MapView</a></li><li id="0aa4" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">在React Native和Expo本地化中支持多语言</li><li id="202c" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated"><a class="ae kc" href="https://medium.com/@marcelkalveram/the-intricacies-of-nesting-navigators-in-react-native-using-react-navigation-fef52ca72964" rel="noopener">使用react-navigation在React Native中嵌套导航器的复杂性</a></li></ol></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="aed9" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">嗨！这是另一篇关于我为惊喜晚餐初创公司<a class="ae kc" href="https://uncovercity.com/" rel="noopener ugc nofollow" target="_blank"> uncovercity </a>开发iOS和Android应用的经历的帖子。今天，我将带领大家完成将应用程序的所有内容(文本、视频、图片)从西班牙语翻译成英语的挑战。</p><p id="9887" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">由于该应用是基于<a class="ae kc" href="https://facebook.github.io/react-native/" rel="noopener ugc nofollow" target="_blank"> React Native </a>和<a class="ae kc" href="https://expo.io/" rel="noopener ugc nofollow" target="_blank"> Expo </a>的，最明显的事情就是在这两个工具的生态系统中寻找一些现有的解决方案。</p><p id="cbb6" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">瞧，Expo有一个<a class="ae kc" href="https://docs.expo.io/versions/v30.0.0/sdk/localization" rel="noopener ugc nofollow" target="_blank">本地化</a>模块。虽然它仍然在<code class="fe lw lx ly lz b">DangerZone</code>(Expo用来对尚未完全批准的功能进行分组的名称空间)中，但我很高兴我的挑战有了一个坚实的起点。</p><blockquote class="ma mb mc"><p id="8079" class="kk kl md km b kn ko kp kq kr ks kt ku me kw kx ky mf la lb lc mg le lf lg lh ij bi translated"><strong class="km ir">重要提示:本文基于世博30.0.0及以下版本。世博网近日发布了</strong><a class="ae kc" href="https://blog.expo.io/expo-sdk-v31-0-0-is-now-available-cad6d0463f49" rel="noopener ugc nofollow" target="_blank"><strong class="km ir">31 . 0 . 0</strong></a><strong class="km ir">版本，其中包含了对</strong> <a class="ae kc" href="https://docs.expo.io/versions/v31.0.0/sdk/localization" rel="noopener ugc nofollow" target="_blank"> <strong class="km ir">汉化</strong> </a> <strong class="km ir">模块的彻底检修。最显著的变化是，您现在可以同步地从您的设备中检索本地化信息，而不是我将在这篇博文</strong>中介绍的异步方式</p></blockquote><p id="9901" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果您已经熟悉了基础知识，您可以直接跳到<a class="ae kc" href="#ddd6" rel="noopener ugc nofollow">常见陷阱</a>，在那里我将讨论一些更高级的本地化主题。</p><blockquote class="ma mb mc"><p id="e045" class="kk kl md km b kn ko kp kq kr ks kt ku me kw kx ky mf la lb lc mg le lf lg lh ij bi translated">如果你在没有Expo的情况下使用React Native，你可以用<a class="ae kc" href="https://github.com/react-community/react-native-languages" rel="noopener ugc nofollow" target="_blank"> react-native-languages </a>得到类似于本地化模块的东西。然而，对于字符串翻译的实际任务，你仍然需要类似于<a class="ae kc" href="https://github.com/i18next/react-i18next" rel="noopener ugc nofollow" target="_blank"> react-i18next </a>的东西。</p></blockquote><h1 id="9cd9" class="mh mi iq bd mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne bi translated">本地化的基础</h1><p id="c74e" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">Expo为这个模块提供的<a class="ae kc" href="https://docs.expo.io/versions/v30.0.0/sdk/localization" rel="noopener ugc nofollow" target="_blank">文档非常简单和复杂(这也是我写这篇文章的动机)。但是实现它实际上非常简单。你需要做的就是:</a></p><ol class=""><li id="8a4c" class="li lj iq km b kn ko kr ks kv lk kz ll ld lm lh ln lo lp lq bi translated">为您想要提供的每种语言创建一个JSON文件</li><li id="a5de" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">使用Expo的<code class="fe lw lx ly lz b">Localizaton</code>模块初始化语言存储</li><li id="c24c" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">设置用户在商店中的当前语言</li><li id="0ad6" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh ln lo lp lq bi translated">将应用中的所有内容替换为应用商店的相应密钥</li></ol><blockquote class="ma mb mc"><p id="d8ba" class="kk kl md km b kn ko kp kq kr ks kt ku me kw kx ky mf la lb lc mg le lf lg lh ij bi translated"><strong class="km ir">要查看下面代码的完整示例，请查看我创建的</strong> <a class="ae kc" href="https://snack.expo.io/@marcelkalveram/localizaton-example" rel="noopener ugc nofollow" target="_blank"> <strong class="km ir">点心</strong> </a> <strong class="km ir">，在这里我从一个单独的文件初始化一个字符串存储，并添加一个小切换按钮在美国英语和西班牙语之间切换。</strong></p></blockquote><p id="7d02" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，让我更详细地向您介绍这些步骤:</p><h2 id="f0b8" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">1.为每种语言创建一个JSON文件</h2><p id="2d5c" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">您需要做的第一件事是将所有可翻译的字符串放入JSON存储中。无论您是在同一个文件中这样做，还是使用<code class="fe lw lx ly lz b">import</code>从一个单独的文件中导入它们，都没有关系。我会在第二步解释为什么我更喜欢后者。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="aff6" class="nk mi iq lz b gy oe of l og oh">const <strong class="lz ir">localizedStrings</strong> = {<br/>  en_GB: { title: "Hello", subtitle: "Welcome" },<br/>  es_ES: { title: "Hola", subtitle: "Bienvenido" }<br/>}</span></pre><p id="ecf9" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个对象的关键字是语言/地区标识符(即代表英语/英国)和一个键的值是所有可翻译的字符串，在商店被初始化后你就可以使用了，例如。如果您的语言设置为西班牙语(<code class="fe lw lx ly lz b">es_ES</code>)，则<code class="fe lw lx ly lz b">localeStore.subtitle</code>将输出“Bienvenido”。</p><h2 id="5bec" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">2.使用Expo的本地化模块初始化商店</h2><p id="c417" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">其次，我们初始化存储并在其上运行初始化逻辑。像这样从Expo导入<code class="fe lw lx ly lz b">Localization</code>模块:</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="7e09" class="nk mi iq lz b gy oe of l og oh">import { DangerZone } from 'expo'<br/>const { <strong class="lz ir">Localization</strong> } = DangerZone</span><span id="0f2f" class="nk mi iq lz b gy oi of l og oh">// localizedStrings is the object we created in step 1<br/>const localeStore = new Localization.LocaleStore(<strong class="lz ir">localizedStrings</strong>)</span></pre><p id="3a5c" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果将这行代码放在本地化字符串所在的位置，会更容易，这样您就可以在任何需要的地方访问它们。因此，不是直接导出JSON对象，而是像这样导出实例化的存储:</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="a619" class="nk mi iq lz b gy oe of l og oh">const localeStore = new Localization.LocaleStore(<strong class="lz ir">localizedStrings</strong>)<br/><strong class="lz ir">export default</strong> localeStore;</span></pre><p id="73dc" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个<code class="fe lw lx ly lz b">localeStore</code>现在给我们提供了两个重要的功能:</p><ul class=""><li id="8f2d" class="li lj iq km b kn ko kr ks kv lk kz ll ld lm lh oj lo lp lq bi translated">设置我们希望向用户显示的当前区域设置(参见下一步)</li><li id="3754" class="li lj iq km b kn lr kr ls kv lt kz lu ld lv lh oj lo lp lq bi translated">像这样在我们的视图中使用本地化的字符串:<code class="fe lw lx ly lz b">{ <strong class="km ir">localeStore</strong>.title }</code></li></ul><h2 id="700a" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">3.设置用户在商店中的当前语言</h2><p id="20f7" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">接下来，我们需要弄清楚用户的首选语言是什么。我们可以使用来自<code class="fe lw lx ly lz b">Localization</code>模块的<code class="fe lw lx ly lz b">getCurrentLocaleAsync</code>函数，它返回一个语言/地区标识符。然后，我们使用<code class="fe lw lx ly lz b">setLocale</code>将这个值传递给我们之前初始化的存储器。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="ec25" class="nk mi iq lz b gy oe of l og oh">import { localeStore } from "./localeStore"<br/>...<br/>constructor() {<br/>  super();<br/>  <strong class="lz ir">Localization.getCurrentLocaleAsync()</strong>.then(currentLocale =&gt; <br/>    <strong class="lz ir">localeStore.setLocale(locale)</strong><br/>  );<br/>}</span></pre><p id="0a0c" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><code class="fe lw lx ly lz b">getCurrentLocaleAsync</code> <strong class="km ir"> </strong>函数以字符串的形式返回用户设备的语言/地区标识符(您现在应该很熟悉了)，即:<code class="fe lw lx ly lz b">en_GB</code>这是一个异步调用，因此我们需要确保无论我们将它放在哪里，它都需要以这种方式执行，要么使用<code class="fe lw lx ly lz b">async</code> / <code class="fe lw lx ly lz b">await</code>要么使用<code class="fe lw lx ly lz b">Promise</code>。</p><blockquote class="ma mb mc"><p id="81f6" class="kk kl md km b kn ko kp kq kr ks kt ku me kw kx ky mf la lb lc mg le lf lg lh ij bi translated">请记住，除了使用<code class="fe lw lx ly lz b"><em class="iq">getCurrentLocaleAsync</em></code>，您还可以通过使用各自的功能<code class="fe lw lx ly lz b"><em class="iq">getCurrentDeviceCountryAsync</em></code>或<code class="fe lw lx ly lz b"><em class="iq">getPreferredLocalesAsync</em></code>来访问设备的<strong class="km ir">国家代码</strong>或<strong class="km ir">首选地区</strong>。</p></blockquote><p id="1ab9" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">除此之外，您可能希望使用某种状态管理解决方案或React Context API来使您的当前区域设置在其他地方可用，而不仅仅是在根组件的状态中。</p><h2 id="de60" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">4.替换所有可翻译的字符串</h2><p id="4ecc" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">最后但同样重要的是，我们需要确保在我们的UI视图中使用来自我们商店的本地化字符串，而不是硬编码的字符串。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="cd46" class="nk mi iq lz b gy oe of l og oh">// we want to replace this...<br/>&lt;Text&gt;<strong class="lz ir">Hello</strong>&lt;/Text&gt;</span><span id="c413" class="nk mi iq lz b gy oi of l og oh">// ...with that:<br/>&lt;Text&gt;<strong class="lz ir">{ localeStore.title }</strong>&lt;/Text&gt;</span></pre><p id="4463" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">就国际化而言，这再简单不过了。对于更高级的翻译功能，比如复数和格式，你可能想使用更完整的库，比如<code class="fe lw lx ly lz b">react-i18next</code>(顺便说一下，<a class="ae kc" href="https://github.com/i18next/react-i18next/tree/master/example/reactnative-expo" rel="noopener ugc nofollow" target="_blank">与Expo的<code class="fe lw lx ly lz b">Localization</code>模块结合使用效果非常好</a>，但是也更复杂)。</p><h1 id="ddd6" class="mh mi iq bd mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne bi translated">常见陷阱及其修复</h1><p id="4e05" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">这听起来很简单。但是有一些不太明显的问题，只有当你构建一个完全本地化的应用程序，有多个屏幕和一点互动时，你才会遇到。</p><h2 id="e633" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">设置和应用默认语言</h2><p id="2c38" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">您可能想知道如果用户的语言不在您的任何翻译文件中，而您在试图设置的<strong class="km ir">区域</strong>不存在的地方做了类似<code class="fe lw lx ly lz b">setLocale(<strong class="km ir">locale</strong>)</code>的事情，会发生什么。</p><p id="77f1" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">或者，如果您想为<code class="fe lw lx ly lz b">en_GB</code>和<code class="fe lw lx ly lz b">en_US</code>提供相同的翻译，但不想复制整个字符串数组，该怎么办？</p><p id="7f66" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">对我来说，最简单的解决方案是根据某些条件显式设置区域设置，而不是盲目地将区域设置传递给商店的<code class="fe lw lx ly lz b">setLocale</code>函数。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="ebdc" class="nk mi iq lz b gy oe of l og oh"><strong class="lz ir">// instead of blindly relying on this...<br/></strong>Localization.getCurrentLocaleAsync().then(currentLocale =&gt; <br/>  localeStore.setLocale(currentLocale)<br/>);</span><span id="3fb8" class="nk mi iq lz b gy oi of l og oh"><strong class="lz ir">// ...make sure to explicitly set one of your existing locales<br/></strong>Localization.getCurrentLocaleAsync().then(currentLocale =&gt; {<br/>  const <strong class="lz ir">locale</strong> = currentLocale.includes('es') ? '<strong class="lz ir">es_ES</strong>' : '<strong class="lz ir">en_GB</strong>'; <br/>  localeStore.setLocale(<strong class="lz ir">locale</strong>)<br/>);</span></pre><p id="30cf" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">除此之外，在我们没有首先指定用户的默认区域设置之前，您可能想要保护您的视图不呈现任何内容:</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="89d6" class="nk mi iq lz b gy oe of l og oh">if (!<strong class="lz ir">this.state.currentLocale</strong>) {<br/>  return;<br/>}</span><span id="f157" class="nk mi iq lz b gy oi of l og oh">return &lt;App /&gt;</span></pre><h2 id="3129" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">在语言之间切换</h2><p id="b4a2" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">现在我们知道了如何设置默认语言，如果用户真的想切换到另一种语言呢？</p><p id="0831" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在<code class="fe lw lx ly lz b">localeStore</code>上调用<code class="fe lw lx ly lz b">setLocale</code>并将我们的状态更新为新的语言应该可以做到:</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="4815" class="nk mi iq lz b gy oe of l og oh">localeStore.setLocale(<strong class="lz ir">newlocale</strong>)</span></pre><p id="55f0" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">遗憾的是，我们的视图不会因此而更新。多么令人失望！</p><p id="9757" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">那是因为<code class="fe lw lx ly lz b">localeStore</code>更新发生在React状态的领域之外，所以React不会重新呈现任何东西。另外，<code class="fe lw lx ly lz b">setLocale</code>是一个异步调用，所以我们希望在更新发生后应用的任何更改都需要在回调函数中进行处理，回调函数将它作为第二个参数。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="32d6" class="nk mi iq lz b gy oe of l og oh">localeStore.setLocale(locale, <br/>  <strong class="lz ir">() =&gt; this.setState(() =&gt; ({ currentLocale: locale })))</strong><br/>});</span></pre><p id="388f" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，我们的组件将对状态变化做出反应并相应地更新。</p><h2 id="4c8f" class="nk mi iq bd mj nl nm dn mn nn no dp mr kv np nq mv kz nr ns mz ld nt nu nd nv bi translated">带反应导航的导航标题</h2><p id="c5a4" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">如果您以前使用过react-navigation，您可能对静态的<code class="fe lw lx ly lz b">navigationOptions</code>对象很熟悉，它允许您修改标题栏的样式和内容。</p><p id="ffb4" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">原来，因为它是一个静态属性，所以你在它里面设置的任何属性都将在我们设置初始语言之前被评估，而不是在实际的屏幕被安装时。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="db6f" class="nk mi iq lz b gy oe of l og oh">static navigationOptions = {<br/>  title: localeStore.title <strong class="lz ir">// this won't re-render</strong><br/>}</span></pre><p id="2045" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这里的解决方案是返回一个返回对象的函数。就像这样，每次我们的应用程序发生状态变化时(就像由<code class="fe lw lx ly lz b">setLocale</code>回调触发的那样)，这些道具也会更新。</p><pre class="nw nx ny nz gt oa lz ob oc aw od bi"><span id="dbab" class="nk mi iq lz b gy oe of l og oh">static navigationOptions = () =&gt; {<br/>  <strong class="lz ir">return {</strong><br/>    title: localeStore.title <strong class="lz ir">// this uses the updated locale</strong><br/>  <strong class="lz ir">}</strong><br/>}</span></pre><h1 id="f909" class="mh mi iq bd mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne bi translated">高级本地化解决方案</h1><p id="7277" class="pw-post-body-paragraph kk kl iq km b kn nf kp kq kr ng kt ku kv nh kx ky kz ni lb lc ld nj lf lg lh ij bi translated">Expo的本地化模块相当有限。它允许您访问用户设备的语言，并允许您基于该语言翻译字符串对象。</p><p id="5ad1" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">对于许多较小的项目来说，这可能就是您所需要的全部。但是，如果你的应用变得比这更复杂，你需要国际化选项，如占位符、多元化和货币/时区格式，你可能需要考虑以下更复杂的解决方案之一:</p><div class="ok ol gp gr om on"><a href="https://github.com/i18next/react-i18next" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">i18next/react-i18next</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">react的国际化做对了。使用i18next i18n生态系统。— i18next/react-i18next</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb jw on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://github.com/fnando/i18n-js" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">fnando/i18n-js</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">这是一个小库，提供Javascript上的I18n翻译。它带有Rails支持。— fnando/i18n-js</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb jw on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://github.com/yahoo/react-intl" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">雅虎/react-国际</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">国际化React应用。这个库提供了React组件和一个API来格式化日期、数字和字符串…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="pd l oy oz pa ow pb jw on"/></div></div></a></div></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="9404" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">有没有把一个React原生app翻译成多国语言的？你的经历是怎样的？您使用了哪些工具，遇到了什么样的问题？</p><p id="dfb4" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">希望你喜欢这篇文章，并发现它很有帮助。如果您有任何反馈，请随时添加评论。谢谢！</p></div></div>    
</body>
</html>