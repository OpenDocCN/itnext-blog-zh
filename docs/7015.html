<html>
<head>
<title>Comprehensive NextCloud installation using Docker Compose the smart way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker Compose the smart way的全面NextCloud安装</h1>
<blockquote>原文：<a href="https://itnext.io/comprehensive-nextcloud-installation-using-docker-compose-the-smart-way-266c19192b37?source=collection_archive---------0-----------------------#2022-05-17">https://itnext.io/comprehensive-nextcloud-installation-using-docker-compose-the-smart-way-266c19192b37?source=collection_archive---------0-----------------------#2022-05-17</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="9d57" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">使用正确的配置设置解决NextCloud部署的几个常见问题</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/33643c3306af7ea70a35d2695829794e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RzqGeAJNfwFz8AsU.jpg"/></div></div></figure><p id="e996" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv"> NextCloud主要专注于存储文件，使其成为等同于Google Drive、Dropbox等的开源软件。除了文件共享之外，它还支持文档编辑、日历、电子邮件等等，与商业云服务相匹配。但是，作为一个开源的自托管服务，你的隐私是受到保护的。</strong></p><p id="0448" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">根据NextCloud用户手册，推荐的安装方法是将它安装在主机系统上，就像Ubuntu上的“快照包”一样。NextCloud将成为一个主机系统服务，通过包管理器管理更新。</p><p id="b28d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我非常喜欢使用Docker的容器化服务，而不是主机系统安装。例如，如果歹徒突破了应用程序安全，容器化限制了对主机系统的损害。容器化的服务也应该更容易安装，因为大部分工作已经由容器作者完成了。但是，并非所有容器化的应用程序都易于安装，正如我们在这里看到的NextCloud就是这种情况。</p><p id="8578" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">本文在Docker中给出了一个完整的NextCloud安装，可以投入生产使用，并解决了几个常见问题。这包括用于数据库的MariaDB实例、用于性能改进的REDIS实例，以及通过正确配置NextCloud Docker容器来解决一些常见问题(超时等)。</p><p id="fd05" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">虽然官方的NextCloud文档没有讨论Docker安装，但Docker Hub上有一个官方支持的Docker容器。该容器的自述文件给出了Docker组合文件的示例，但是这些组合文件有几个问题。这篇文章展示了一个比Docker Hub中显示的更完整的NextCloud合成文件，并讨论了使用NGINX代理管理器为NextCloud配置NGINX代理。</p><p id="ebfd" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">链接:</p><ul class=""><li id="0053" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ma" href="https://hub.docker.com/_/nextcloud/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/_/nextcloud/</a>—next cloud的Docker容器</li><li id="40f8" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><a class="ae ma" href="https://nextcloud.com/" rel="noopener ugc nofollow" target="_blank">https://nextcloud.com/</a>—next cloud主页——官方文档可在网站上找到</li></ul><h1 id="838a" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">NextCloud的基本Docker合成文件</h1><p id="11c1" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">让我们从NextCloud的一个简单的<code class="fe nd ne nf ng b">docker-compose.yml</code>开始，这个简单的<code class="fe nd ne nf ng b">docker-compose.yml</code>来自容器的自述文件中显示的内容。</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="2ac0" class="nl mh iu ng b gz nm nn l no np">version: '3'  </span><span id="f4ee" class="nl mh iu ng b gz nq nn l no np"># volumes: <br/>#   nextcloud: <br/>#   db:</span><span id="b145" class="nl mh iu ng b gz nq nn l no np">services:<br/>   nextcloud_db:<br/>     image: mariadb<br/>     restart: always<br/>     command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW<br/>     networks:<br/>       - cloudnet<br/>     volumes:<br/>       - ./nextcloud-db:/var/lib/mysql<br/>     environment:<br/>       - MYSQL_RANDOM_ROOT_PASSWORD=true<br/>       - MYSQL_PASSWORD=PASSWORD<br/>       - MYSQL_DATABASE=nextcloud<br/>       - MYSQL_USER=nextcloud</span><span id="400a" class="nl mh iu ng b gz nq nn l no np">    nextcloud:<br/>     image: nextcloud:24-apache<br/>     restart: always<br/>     networks:<br/>       - cloudnet<br/>     # ports:<br/>     #  - 8080:80<br/>     volumes:<br/>       - ./nextcloud-docroot:/var/www/html<br/>     environment:<br/>       - NEXTCLOUD_DATA_DIR=/var/www/html/data<br/>       - MYSQL_PASSWORD=PASSWORD-as-above<br/>       - MYSQL_DATABASE=nextcloud<br/>       - MYSQL_USER=nextcloud<br/>       - MYSQL_HOST=nextcloud_db<br/>  networks:<br/>   cloudnet:<br/>     name: cloudnet<br/>     driver: bridge</span></pre><p id="8c12" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这使用了两个服务:1) MariaDB和2) NextCloud。两者的配置都相当简单。<code class="fe nd ne nf ng b">version</code>被设置为<code class="fe nd ne nf ng b">3</code>,因为那是Docker Compose的现代版本。</p><p id="9df2" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">对于<code class="fe nd ne nf ng b">volumes</code>，我使用的是绝对路径名，而不是匿名卷。这是因为我想确定卷存储的文件系统位置。</p><p id="b88d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">容器自述文件中提供的合成文件的另一个问题是，它使用<code class="fe nd ne nf ng b">links</code>来连接容器。这个<code class="fe nd ne nf ng b">links</code>功能已经被否决或取消很多年了。相反，最佳实践是建立一个桥接网络并将容器连接到该网络。</p><p id="6c3e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这就是这里用<code class="fe nd ne nf ng b">cloudnet</code>做的事情。NextCloud服务的所有容器都必须连接到<code class="fe nd ne nf ng b">cloudnet</code>。Docker然后确保每个容器都有一个与容器名称匹配的主机名。因此，在<code class="fe nd ne nf ng b">nextcloud</code>容器中，<code class="fe nd ne nf ng b">MYSQL_HOST</code>变量被设置为<code class="fe nd ne nf ng b">nextcloud_db</code>，因为这是MariaDB容器的容器名和主机名。</p><p id="3821" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在我的例子中，名为<code class="fe nd ne nf ng b">cloudnet</code>的网络是外部管理的。我使用NGINX代理管理器来访问所有服务。因此，N.P.M .容器必须连接到每个部署堆栈的专用网络，在这种情况下，它必须连接到<code class="fe nd ne nf ng b">cloudnet</code>网络。我们稍后将查看N.P.M .配置，但是请注意，它将在端口<code class="fe nd ne nf ng b">80</code>使用<code class="fe nd ne nf ng b">http</code>连接到主机名<code class="fe nd ne nf ng b">nextcloud</code>。</p><p id="cf89" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这个设置有一些潜在的问题，其中一个我还没有解决方案。这些是许多人讨论的常见问题。</p><ul class=""><li id="2d33" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">在安装过程中，当执行NextCloud初始设置时，设置可能会在浏览器中“超时”。我找不到解决办法。推荐的解决方案是取消选中“<em class="nr">安装常用应用</em>”设置，但对于NextCloud v24，该设置根本不存在。我发现在看到超时后，如果你简单地重新加载浏览器窗口，你会看到设置已经完成。</li><li id="b1d0" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">在登录过程中，登录按钮可能会一直旋转。稍后我有一个解决方案。</li></ul><h1 id="dcc8" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">运行NextCloud的初始设置</h1><p id="3d90" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">将<code class="fe nd ne nf ng b">docker-compose.yml</code>保存到一个空目录中，然后运行以下程序:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="cfd9" class="nl mh iu ng b gz nm nn l no np">$ docker network create cloudnet <br/>$ docker-compose up -d</span></pre><p id="d09c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如果你像我一样需要外部管理<code class="fe nd ne nf ng b">cloudnet</code>，第一个命令应该执行一次。否则不运行该命令，只运行<code class="fe nd ne nf ng b">docker-compose</code>。</p><p id="36db" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这意味着你必须安装<code class="fe nd ne nf ng b">docker-compose</code>。然而，请注意Docker团队似乎正计划弃用<code class="fe nd ne nf ng b">docker-compose</code>而支持<code class="fe nd ne nf ng b">docker compose</code>。请注意，新命令中缺少了<code class="fe nd ne nf ng b">-</code>。这个命令<code class="fe nd ne nf ng b">docker compose</code>拥有古老的<code class="fe nd ne nf ng b">docker-compose</code>命令的大部分功能。</p><p id="e580" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><code class="fe nd ne nf ng b">docker compose</code>命令现在可以在本地Docker安装上部署一个<code class="fe nd ne nf ng b">docker-compose.yml</code>。但是，我的部署机器无法更新到最新的Docker版本，我使用<code class="fe nd ne nf ng b">docker-compose</code>而不是<code class="fe nd ne nf ng b">docker compose</code>进行这次部署。</p><p id="faa3" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">运行<code class="fe nd ne nf ng b">docker-compose logs -f</code>将有助于您查看日志。MariaDB容器完成后，您可以进入浏览器窗口。</p><p id="4aac" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">使用上面显示的合成文件，NextCloud将位于端口<code class="fe nd ne nf ng b">80</code>的<code class="fe nd ne nf ng b">http://SERVER</code>上。如果需要，您当然可以使用<code class="fe nd ne nf ng b">ports</code>指令将其重新映射到另一个端口。例如，您可以将服务映射到端口<code class="fe nd ne nf ng b">4080</code>,如下所示:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="3f8e" class="nl mh iu ng b gz nm nn l no np">services:<br/>   ...<br/>   nextcloud:<br/>     ...<br/>     ports:<br/>       - 4080:80<br/>     ...</span></pre><p id="fb94" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在这种情况下，您可以将浏览器连接到<code class="fe nd ne nf ng b"><a class="ae ma" href="http://SERVER:4080." rel="noopener ugc nofollow" target="_blank">http://SERVER:4080</a></code> <a class="ae ma" href="http://SERVER:4080." rel="noopener ugc nofollow" target="_blank">。</a></p><p id="1745" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在浏览器中输入正确的URL。将有框输入管理员用户的用户名，以及密码。在旧版本中，有一个勾号告诉NextCloud安装一些推荐的应用程序，但现在已经没有了。点击安装按钮，并准备等待一段时间。</p><p id="d050" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">同样，我的经验是这一步在浏览器中超时了。我只是重新加载了浏览器窗口，发现NextCloud已经可以使用了。我一直在寻找解决方案，但没有找到有帮助的建议。</p><p id="c4e1" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在设置阶段，您为ADMIN用户提供了用户名和密码。使用该组合登录，您将进入NextCloud。在那里，您可以探索这些功能，更改一些设置，安装NextCloud应用程序，等等。如何使用它取决于您，我们在这里重点关注的是NextCloud的设置。</p><h1 id="bb93" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">处理安装和安全警告</h1><p id="8d57" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">一个非常重要的检查是在<em class="nr">设置</em>区域。在右上角点击按钮，就像这样:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ns"><img src="../Images/5d651207cec0deb123e1cc4228c48540.png" data-original-src="https://miro.medium.com/v2/resize:fit:308/format:webp/0*B_uVp8eB2ETFHwuV.png"/></div></figure><p id="b3e1" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这里有许多有用的选择，但我们感兴趣的是<em class="nr">设置</em>。在“设置”区域，左侧的一列中有一个选项卡列表。向下滚动到<em class="nr">管理</em>部分，点击<em class="nr">概述</em>选项。本页概述了您的NextCloud实例。</p><p id="6bae" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在这个页面上，有一些JavaScript代码将被执行来检查常见问题。它应该显示如下内容:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/9db3e602fb40bbc06e43fd34afa08c4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Jk4hL43ulsR90N0S.png"/></div></div></figure><p id="8365" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">本页显示了几个问题，让我们来解决它们。</p><ul class=""><li id="9726" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><em class="nr">未将“严格传输安全”HTTP头设置为至少“15552000”秒。为了增强安全性，建议按照安全提示中的描述启用HSTS。</em></li><li id="9d81" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><em class="nr">您的web服务器设置不正确，无法解析"/。知名/caldav”。更多信息可以在文档中找到。</em></li><li id="71e5" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><em class="nr">您的web服务器设置不正确，无法解析"/。知名/carddav”。更多信息可以在文档中找到。</em></li></ul><p id="2e6d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这三个问题将在下一节的NGINX代理管理器配置中得到解决。如果你没有使用N.P.M .的话，你需要用其他的方法来解决这些问题。这些消息包含指向文档的链接。</p><p id="f447" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">NGINX代理管理器是一个优秀的工具，用于管理对基于Docker的服务的访问，特别是对于自托管的家庭实验室设置。在我的案例中，我的办公桌上有一个运行多种服务(Gitea、Jenkins等)的英特尔NUC，并使用N.P.M .来简化对这些服务的访问，并帮助在公共互联网上公开它们。</p><p id="833b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是，与我们可以使用默认N.P.M .设置的许多服务不同，NextCloud需要额外的设置。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nu"><img src="../Images/aa233457819bb3c1389d786f04c0303b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/0*DMYwwihjlhEeBu4C.jpg"/></div></figure><p id="ebbd" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这里我们给服务一个域名。接下来，我们描述对后端服务的访问，在本例中，它使用<code class="fe nd ne nf ng b">http</code>来连接端口<code class="fe nd ne nf ng b">80</code>上的<code class="fe nd ne nf ng b">nextcloud</code>容器。我们选择<em class="nr">缓存资产</em>，<em class="nr">阻止常见漏洞利用</em>，以及<em class="nr"> Websocket支持</em>。后者似乎对NextCloud很重要，因为一些按钮似乎依赖于此。</p><p id="aa83" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在SSL选项卡上，我们可以很容易地使用<em class="nr">let Encrypt</em>来配置SSL证书。完成后，选择这些设置:</p><ul class=""><li id="19b6" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><em class="nr">强制SSL </em>将确保每个访问NextCloud的人都将使用HTTPS连接</li><li id="32c1" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><em class="nr"> HTTP/2支持</em>将确保使用该协议</li><li id="c5d4" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">HSTS启用后会修复上面显示的关于HSTS的消息。这是一个将增加安全性的安全协议。</li></ul><p id="4f7d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">要解决<code class="fe nd ne nf ng b">/.well-known/caldav</code>和<code class="fe nd ne nf ng b">/.well-known/carddav</code>的问题，我们必须导航到<em class="nr">自定义位置</em>选项卡。如果你阅读了NextCloud文档，它描述了Apache <code class="fe nd ne nf ng b">.htaccess</code>配置，以及在NGINX配置文件中设置<code class="fe nd ne nf ng b">location</code>指令。对于N.P.M .我们可以使用此<em class="nr">自定义位置</em>选项卡。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nv"><img src="../Images/2f3f63f0d2d19ceeb211f2da8a504d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/0*L7aKXQHFE7MqaRND.png"/></div></figure><p id="2cbf" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这将配置两个URL位置，以便将请求传递给NextCloud实例中的后端URL。以<code class="fe nd ne nf ng b">/.well-known</code>开头的URL位置由互联网标准委员会定义，是一个“众所周知”的URL路径，通过它可以访问特定的服务。NextCloud文档说要将这些位置传递给<code class="fe nd ne nf ng b">/remote.php/dav/</code> URL，为了配置NGINX代理管理器，我们必须输入<code class="fe nd ne nf ng b">nextcloud/remote.php/dav/</code>。</p><p id="bf27" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">有两个位置需要输入，所以点击两次<em class="nr">添加位置</em>按钮。输入如图所示的<code class="fe nd ne nf ng b">/.well-known/caldav</code>和<code class="fe nd ne nf ng b">/.well-known/carddav</code>位置。对于每一个，<em class="nr">方案</em>框将包含字符串<code class="fe nd ne nf ng b">http</code>,<em class="nr">转发主机名/ IP </em>框将包含URL<code class="fe nd ne nf ng b">nextcloud/remote.php/dav/</code>,<em class="nr">转发/端口</em>框将包含<code class="fe nd ne nf ng b">80</code>。在这个框的下面是说明<em class="nr">使用1.1.1.1/path转发子文件夹</em>，这意味着文本以主机名或IP地址开始，然后以任何附加路径继续。主机名是<code class="fe nd ne nf ng b">nextcloud</code>，路径是<code class="fe nd ne nf ng b">/remote.php/dav/</code>。</p><p id="541d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">一旦您保存N.P.M .配置，它将重建NGINX配置文件，然后在NextCloud概述页面中，上述问题将得到解决。然而，还有其他问题需要解决。</p><h1 id="62bf" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">自定义NextCloud配置以避免某些超时情况</h1><p id="45fa" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">N.P.M .代理的这种配置修复了几个问题。但是，我看到了一个与登录相关的问题。我输入我的用户名和密码，点击登录按钮，进度指示器旋转10多分钟没有变化，然后重新加载浏览器显示我实际上登录了。</p><p id="c68d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在N.P.M .的日志中，发现了以下错误:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="1f80" class="nl mh iu ng b gz nm nn l no np">2022/05/14 07:00:06 [error] 965099#965099: *2145208 upstream timed out     (110: Operation timed out) while reading response header from upstream,    client: IP-ADDRESS, server: cloud.DOMAIN,    request: "POST /index.php HTTP/2.0",    upstream: "http://172.20.0.5:80/index.php",    host: "cloud.DOMAIN"</span></pre><p id="7807" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在Reddit上，我发现<a class="ae ma" href="https://www.reddit.com/r/unRAID/comments/l24cix/nextcloud_selfhosted_site_times_out/" rel="noopener ugc nofollow" target="_blank"> <em class="nr"> NextCloud自托管站点超时</em> </a>带有NextCloud配置文件中的一些设置。</p><p id="76a6" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">使用上面的<code class="fe nd ne nf ng b">docker-compose.yml</code>配置文件，<code class="fe nd ne nf ng b">config.php </code>文件在主机文件系统中显示为<code class="fe nd ne nf ng b">nextcloud-docroot/config/config.php</code>，但是受到保护，只有ROOT用户可以编辑该文件。因此，编辑或查看该文件需要主机上的以下命令:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="6e83" class="nl mh iu ng b gz nm nn l no np">$ sudo vi nextcloud-docroot/config/config.php</span></pre><p id="862a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">一个重要的建议是对<code class="fe nd ne nf ng b">config.php</code>的更改:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="f3cb" class="nl mh iu ng b gz nm nn l no np">'trusted_domains' =&gt;<br/> array (<br/>   0 =&gt; '192.168.1.200:444',<br/>   1 =&gt; 'nextcloud.my-domain.com',<br/> ), <br/>'overwrite.cli.url' =&gt; 'https://nextcloud.my-domain.com', <br/>'overwritewebroot' =&gt; '/nextcloud', <br/>'overwritehost' =&gt; 'nextcloud.my-domain.com', <br/>'overwriteprotocol' =&gt; 'https', <br/>'trusted_proxies' =&gt; ['NginxProxyManager'],</span></pre><p id="ea8d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">然而，所有这些变化都可以通过使用<code class="fe nd ne nf ng b">docker-compose.yml</code>中的环境变量来实现。NextCloud容器基于它在环境变量中发现的内容创建了<code class="fe nd ne nf ng b">config.php</code>。</p><p id="23e5" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">因为<code class="fe nd ne nf ng b">config.php</code>只在第一次执行容器时创建，所以<code class="fe nd ne nf ng b">nextcloud-docroot</code>目录一定不在那里。如果该目录缺失，NextCloud将创建该目录，如果该目录存在，容器将跳过目录创建过程。</p><p id="d7fc" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">因此，在编辑<code class="fe nd ne nf ng b">docker-compose.yml</code>之前，运行以下命令:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="9969" class="nl mh iu ng b gz nm nn l no np">$ sudo rm -rf nextcloud-db nextcloud-docroot</span></pre><p id="e1e5" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这将删除数据库目录和NextCloud目录，以便从头开始创建这两个目录。</p><p id="894d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">然后，对<code class="fe nd ne nf ng b">docker-compose.yml</code>进行以下更改:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="a273" class="nl mh iu ng b gz nm nn l no np">services:<br/>   ...<br/>    nextcloud:<br/>     ...<br/>     environment:<br/>       - MYSQL_PASSWORD=PASSWORD<br/>       - MYSQL_DATABASE=nextcloud<br/>       - MYSQL_USER=nextcloud<br/>       - MYSQL_HOST=nextcloud_db<br/>       # - REDIS_HOST=redis<br/>       - APACHE_DISABLE_REWRITE_IP<br/>       - VIRTUAL_HOST=cloud.DOMAIN<br/>       - OVERWRITEPROTOCOL=https<br/>       - TRUSTED_PROXIES=NginxProxyManager<br/>       - OVERWRITECLIURL=http://cloud.DOMAIN</span></pre><p id="6ec2" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我跳过了由<code class="fe nd ne nf ng b">NEXTCLOUD_TRUSTED_DOMAINS</code>环境变量控制的<code class="fe nd ne nf ng b">trusted_domains</code>设置。NextCloud容器自述文件中针对这些设置的文档包括:</p><ul class=""><li id="4a4f" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">NEXTCLOUD_TRUSTED_DOMAINS</code>(默认不设置)可选的空格分隔的域列表</li><li id="80f8" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">APACHE_DISABLE_REWRITE_IP</code>(默认不设置):置1禁用重写IP。</li><li id="ffcb" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">TRUSTED_PROXIES</code>(默认为空):以空格分隔的可信代理列表。IPv4支持CIDR符号。</li><li id="71b5" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">OVERWRITEHOST</code>(默认为空):设置代理的主机名。也可以指定端口。</li><li id="150f" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">OVERWRITEPROTOCOL</code>(默认为空):设置代理的协议，http或https。</li><li id="67cb" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">OVERWRITECLIURL</code>(默认为空):设置代理的cli url(如<code class="fe nd ne nf ng b"><a class="ae ma" href="https://mydnsname.example.com)" rel="noopener ugc nofollow" target="_blank">https://mydnsname.example.com</a></code> <a class="ae ma" href="https://mydnsname.example.com)" rel="noopener ugc nofollow" target="_blank"> ) </a></li><li id="c8dd" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">OVERWRITEWEBROOT</code>(默认为空):设置代理的绝对路径。</li><li id="9b29" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><code class="fe nd ne nf ng b">OVERWRITECONDADDR</code>(默认为空):Regex覆盖依赖于远程地址的值。</li></ul><p id="4aca" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">最好在<code class="fe nd ne nf ng b">docker-compose.yml</code>做这些改动。但是，如果您的NextCloud实例已经完全建立并投入生产使用，从头重新创建它就没有意义了。在这种情况下，最好在<code class="fe nd ne nf ng b">config.php</code>中进行这些更改。</p><h1 id="4b12" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">将REDIS缓存添加到NextCloud设置中</h1><p id="63aa" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">你会注意到我们刚刚展示的环境变量包括<code class="fe nd ne nf ng b">REDIS_HOST</code>。让我们看看如何将REDIS添加到NextCloud中。</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="af88" class="nl mh iu ng b gz nm nn l no np">services:<br/>   ...<br/>    nextcloud:<br/>     ...<br/>     environment:<br/>       ...<br/>       - REDIS_HOST=redis<br/>       ...<br/>   ...<br/>   redis:<br/>     image: redis:alpine<br/>     restart: always<br/>     networks:<br/>       - cloudnet</span></pre><p id="7b81" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">添加REDIS理论上会通过在内存中缓存东西来提高性能。</p><p id="869c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如果您需要安装REDIS，而不删除并重新创建NextCloud安装，那么<code class="fe nd ne nf ng b">config.php</code>中的等效内容大致如下:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="162d" class="nl mh iu ng b gz nm nn l no np">'filelocking.enabled' =&gt; true,<br/>'memcache.distributed' =&gt; '\\OC\\Memcache\\Redis',<br/>'memcache.locking' =&gt; '\\OC\\Memcache\\Redis',<br/>'redis' =&gt;    array (<br/>     'host' =&gt; 'redis',<br/>     'password' =&gt; '',<br/>     'port' =&gt; 6379,<br/>),</span></pre><p id="6b5e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在文档中，给出了使用REDIS的两个目的。第一个是将文件锁定转移到REDIS服务器，因为在数据库中进行锁定非常慢。第二种是在内存中缓存一些数据以提高性能。有关详细信息，请参见:</p><ul class=""><li id="a7c0" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ma" href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_files/files_locking_transactional.html" rel="noopener ugc nofollow" target="_blank">https://docs . next cloud . com/server/latest/admin _ manual/configuration _ files/files _ locking _ transactional . html</a></li><li id="5c1f" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><a class="ae ma" href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/caching_configuration.html" rel="noopener ugc nofollow" target="_blank">https://docs . next cloud . com/server/latest/admin _ manual/configuration _ server/caching _ configuration . html</a></li></ul><h1 id="6f9c" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">配置NextCloud使用GMAIL发送电子邮件</h1><p id="87fd" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">NextCloud发送各种电子邮件，如密码重置和各种通知。这需要有一个SMTP服务器来发送电子邮件。安装自托管SMTP服务器是一项很大的任务，幸运的是，有一种简单的方法。你可能有一个谷歌账户，因此也有一个GMAIL账户。可以将NextCloud配置为使用GMAIL SMTP服务器。</p><p id="c7af" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">另一种方法是，如果你的NextCloud安装在网络托管服务上，你可以使用你的网络托管提供商的SMTP服务器。或者你可以使用付费的SMTP服务。无论你使用的是什么SMTP服务，是GMAIL还是其他，你只需在NextCloud SMTP配置屏幕中输入具体信息。</p><p id="7c8f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">NextCloud文档包括一个关于配置SMTP电子邮件支持的章节<a class="ae ma" href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/email_configuration.html" rel="noopener ugc nofollow" target="_blank"/>。在本教程中，我们将重点介绍如何使用GMAIL的SMTP。这对于小型私有NextCloud实例来说应该没问题，但是对于有几十个或更多用户生成大量电子邮件的实例来说，最好使用另一种SMTP服务。</p><p id="dcd4" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在<em class="nr">管理</em>设置的<em class="nr">基本设置</em>区域，有一个配置SMTP服务器的部分。在此之前，请转到<em class="nr">个人信息</em>选项卡中的<em class="nr">个人</em>区域，并设置您的个人电子邮件地址。回到<em class="nr">基本设置</em>，为SMTP配置添加以下条目:</p><ul class=""><li id="2ff1" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">加密设置为<code class="fe nd ne nf ng b">STARTTLS</code>的发送模式<code class="fe nd ne nf ng b">SMTP</code></li><li id="ddad" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">发件人地址设置为您的电子邮件地址<code class="fe nd ne nf ng b">gmail.com</code></li><li id="4d62" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">认证方法设置为<em class="nr">登录</em>，需要<em class="nr">认证</em></li><li id="52fe" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">服务器地址设置为端口587上的<code class="fe nd ne nf ng b">smtp.gmail.com</code></li><li id="7230" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated">凭证<code class="fe nd ne nf ng b">YOUR-EMAIL@gmail.com</code>，然后对于密码有特殊的考虑。</li></ul><p id="1b01" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">您不能简单地将您的Google帐户密码用作此目的的密码。相反，有必要为你的谷歌账户设置一个<em class="nr">应用密码</em>。参见:【https://support.google.com/accounts/answer/185833 T21】</p><p id="880b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">为此，在登录GMAIL时，点击右上角的身份图标，您会看到一个标有<em class="nr">管理谷歌账户</em>的按钮。点击它，然后选择<em class="nr">安全</em>和<em class="nr">登录谷歌</em>。在该选项下，选择<em class="nr">应用程序密码</em>，这是您设置特定应用程序密码的地方。我所做的是告诉它设备和应用程序是NextCloud。然后它向我显示了一个密码字符串，我将它复制到了NextCloud设置的密码字段中。</p><p id="f0bd" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">完成后，有一个发送测试邮件的按钮。点击它，如果一切正常，你将很快收到一封电子邮件。如果没有，将会有一个错误消息，我发现这个错误消息是很有帮助的指导。以上过程是基于解决了我看到的错误信息。</p><h1 id="cf15" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">使用Cron为NextCloud配置后台作业执行</h1><p id="9e72" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">另一个问题是，NextCloud可以运行后台作业来维护系统。通常这些都是从Cron运行的，Cron是运行后台作业的古老程序。</p><p id="190c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">有一种复杂的方法来设置对NextCloud的Cron支持，即使用一个显式创建的Docker映像。参见:</p><ul class=""><li id="41a0" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ma" href="https://hub.docker.com/r/rcdailey/nextcloud-cronjob/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/r/rcdailey/nextcloud-cronjob/</a></li><li id="1d7b" class="lr ls iu kx b ky mb lb mc le md li me lm mf lq lw lx ly lz bi translated"><a class="ae ma" href="https://github.com/rcdailey/nextcloud-cronjob" rel="noopener ugc nofollow" target="_blank">https://github.com/rcdailey/nextcloud-cronjob</a></li></ul><p id="b5f3" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是，有一种简单得多的方法，那就是在执行NextCloud实例的主机上使用Cron服务。</p><p id="07a9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在我的例子中，Docker环境托管在Ubuntu上，运行在我办公桌上的英特尔NUC上。我已经在使用主机系统Cron服务执行一些后台任务。</p><p id="025a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">运行<code class="fe nd ne nf ng b">crontab -l</code>允许您查看正在运行的Cron作业的当前列表。</p><p id="15a2" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">运行<code class="fe nd ne nf ng b">crontab -e</code>可以编辑crontab文件。</p><p id="42ef" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我将该作业添加到我的crontab文件中:</p><pre class="kk kl km kn gu nh ng ni nj aw nk bi"><span id="b1c6" class="nl mh iu ng b gz nm nn l no np">*/5 * * * * /usr/bin/docker exec -u www-data nextcloud php cron.php</span></pre><p id="da63" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">记住<code class="fe nd ne nf ng b">docker exec</code>在指定的容器中运行命令。添加<code class="fe nd ne nf ng b">-u www-data</code>确保容器内使用的用户ID是正确的。<code class="fe nd ne nf ng b">nextcloud</code>参数标识在其中执行命令的docker容器。要确定容器名称，运行<code class="fe nd ne nf ng b">docker ps -a | grep nextcloud</code>。这个命令的最后一位是要在容器内部执行的shell命令。</p><p id="cf61" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">注意在<code class="fe nd ne nf ng b">nextcloud-docroot</code>目录中有一个文件<code class="fe nd ne nf ng b">cron.php</code>。这样做的目的是每五分钟执行一次PHP脚本。</p><p id="fc7e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在NextCloud设置中，管理员部分的基本设置下，有一个后台作业部分。只需选择<em class="nr"> Cron </em>。</p><h1 id="8469" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">摘要</h1><p id="165b" class="pw-post-body-paragraph kv kw iu kx b ky my jv la lb mz jy ld le na lg lh li nb lk ll lm nc lo lp lq in bi translated">NextCloud是替代许多商业云服务的优秀工具。我们希望设置会更直接，因为这将向更多的人开放它的使用。这就是本文的目标，记录一种简单的NextCloud安装方法，这种方法非常有用。</p><h1 id="d64e" class="mg mh iu bd mi mj mk ml mm mn mo mp mq ka mr kb ms kd mt ke mu kg mv kh mw mx bi translated">关于作者</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nw"><img src="../Images/d0a217f6c2085612c7651a3c3d48d0d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*dnetiuOYvUf74EQq.jpg"/></div></figure><p id="ae90" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><a class="ae ma" href="https://davidherron.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iv">大卫·赫伦</strong> </a> <strong class="kx iv"> </strong>:大卫·赫伦是一名作家和软件工程师，专注于技术的明智使用。他对太阳能、风能和电动汽车等清洁能源技术特别感兴趣。David在硅谷从事了近30年的软件工作，从电子邮件系统到视频流，再到Java编程语言，他已经出版了几本关于Node.js编程和电动汽车的书籍。</p></div><div class="ab cl nx ny hy nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="in io ip iq ir"><p id="0cfa" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><em class="nr">原载于</em><a class="ae ma" href="https://techsparx.com/software-development/docker/self-hosting/nextcloud.html" rel="noopener ugc nofollow" target="_blank"><em class="nr"/></a><em class="nr">。</em></p></div></div>    
</body>
</html>