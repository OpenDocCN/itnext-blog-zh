<html>
<head>
<title>How you can Create Beautiful Cryptocurrency Graphs in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python创建漂亮的加密货币图</h1>
<blockquote>原文：<a href="https://itnext.io/create-beautiful-cryptocurrency-graphs-in-python-bec7b9cbc21a?source=collection_archive---------2-----------------------#2021-04-20">https://itnext.io/create-beautiful-cryptocurrency-graphs-in-python-bec7b9cbc21a?source=collection_archive---------2-----------------------#2021-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d3d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着加密货币开始作为一种规范进入我们的社会，越来越多的人对它们感兴趣。人们与它们进行交易，投资它们，甚至用它们来创造更多的产品。在今天的文章中，我将向你展示如何使用Plotly绘制漂亮的图表来显示关键的价格数据。我们将绘制两个图表:一个是简单的蜡烛图和2个简单的移动平均线，另一个是4种不同的加密货币，以了解它们如何相互关联:</p><ol class=""><li id="ebb0" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">绘制比特币的蜡烛图</li><li id="66f0" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">绘制多个加密货币图</li></ol><p id="32f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开始之前，我们需要熟悉几个术语:</p><p id="122c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是简单均线？</strong></p><p id="f315" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kz">简单移动平均线是可用于显示易变数据</em>的当前趋势的值，其计算方法是将最近价格的总和除以我们计算总和的时间段数。短期平均线，时间周期较短，对市场的变化反应更快。长期平均线的反应要慢得多，但显示了市场更普遍的运行方向。</p><p id="157c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是蜡烛图？</strong></p><p id="35b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kz">蜡烛图是一种能够提供大量价格变动信息的金融图表，</em>如<em class="kz"> </em>某一证券在特定时间段内的开盘价、收盘价、最高价、最低价。</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi la"><img src="../Images/6ac90c7c474e6ad5a93692c15c3ab3aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKUzkAWcVgPZz7rbrIlWLg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated"><a class="ae lq" href="https://www.newtraderu.com/2020/06/01/how-to-read-candlestick-charts/" rel="noopener ugc nofollow" target="_blank">https://www . newtraderu . com/2020/06/01/how-to-read-烛台图表/ </a></figcaption></figure><p id="6c22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lq" href="https://www.investopedia.com/trading/candlestick-charting-what-is-it/" rel="noopener ugc nofollow" target="_blank">这里的</a>是一篇非常好的关于了解烛台以及如何解读其图案的文章，如果你想了解更多信息的话。</p><p id="a32a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还需要安装我们今天将使用的3个不同的库。这可以通过一个简单的命令来完成:</p><pre class="lb lc ld le gt lr ls lt lu aw lv bi"><span id="6ed2" class="lw lx iq ls b gy ly lz l ma mb">pip install pandas pandas-datareader plotly</span></pre><p id="63cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们开始吧，好吗！</p><h1 id="5e7b" class="mc lx iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">绘制比特币的蜡烛图:</h1><p id="f48f" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">为了绘制蜡烛图，我们可以首先将所需的库导入到我们的文件中，并建立我们要查看的加密货币和货币:</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="b76c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果需要，您显然可以将货币兑换成当地货币。</p><p id="01ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要做的第一件事是创建一个函数，我们可以调用它来获取数据。为此，我们将使用<em class="kz"> pandas_datareader </em>库从Yahoo Finance收集数据，并以pandas dataframe对象的形式返回给我们:</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="4c3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在getData函数的前几行中，我们以格式<code class="fe ng nh ni ls b">YYYY-MM-DD</code>计算今天和一年前的日期字符串(这是get_data_yahoo方法所必需的。然后，我们可以使用这两个日期通过pandas_datareader库从Yahoo Finance获取加密货币的历史数据，并将其返回。</p><p id="9172" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的主代码中，我们将创建主图表并在其上绘制数据:</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="bcc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以从刚才创建的函数中获取加密货币数据，并用它来创建蜡烛图。在蜡烛图中，除了与日期相关联的<em class="kz"> x </em>值(由索引指示)之外，有5个不言自明的必需参数。请注意，我们还在同一个图上添加了两个散点图。这些将是我们的简单移动/滚动平均值，并根据我们数据的收盘价计算。我还选择了两种颜色(粉色和蓝色)来区分每条线，尽管图表上会有一个图例，以便您可以检查哪个是哪个。要更改平均值的时间周期，您可以改变滚动方法中“窗口”的整数值。</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="b32c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们可以向图表和轴添加标题，并删除图表底部的范围滑块，因为这不是很有用。最后，在我们展示图表之前，我们添加了一个符号(把它改成你想要的任何货币符号)作为前缀到y轴上的价格数据。</p><p id="417a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行程序时，我们应该看到浏览器打开，屏幕上显示的图形如下:</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi nj"><img src="../Images/78f308b99efa9a70cfca6905224a405f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4sk0TU-WqKRlMatFICz-iw.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">比特币的蜡烛图</figcaption></figure><p id="54f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以使用图表右上方的按钮来放大和缩小、平移图表，甚至将图表保存为图像。</p><h1 id="1d4a" class="mc lx iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">绘制多个加密货币图表:</h1><p id="5153" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">我们将在同一个图表上绘制多个加密货币图表，作为简单的线图，这是因为许多蜡烛图有时会变得相当混乱。从这个图中，我们可以看到不同的加密货币是如何相互关联的。</p><p id="431a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们像以前一样导入相同的库，并再次定义我们的常数。这一次，我们将它们定义为加密货币列表，因为我们将绘制这些内容。我们还可以像以前一样复制相同的getData函数:</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="71ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在代码的主要部分，我们可以获得数据并使用它创建一个字典，关键字是加密货币的名称，值是从getData函数返回的熊猫数据帧:</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="1808" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种语法对您来说可能有点奇怪，但它所做的只是执行与下面3行注释相同的代码。这里使用的技巧叫做字典理解，如果你想了解更多，你可以点击这里的<a class="ae lq" href="https://www.programiz.com/python-programming/dictionary-comprehension" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="3f25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了绘制我们的多个图表，我们可以像以前一样制作一个新的图形，但是这次遍历字典中的每一项，并在图表中添加一个“trace”(本质上是数据)。在这里，我们将使用散点图来绘制我们的数据的收盘价，以简化事情(一个图表上的许多烛台可能会混淆):</p><figure class="lb lc ld le gt lf"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="2786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还可以向轴、图例和图表添加标题。这里我们还更新了我们的y轴，使其成为对数刻度。这是因为BTC的价格比其他地方高得多，如果我们有一个线性标度，那么这将看起来非常奇怪，因为我们会将其他加密货币图视为直线:</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi nj"><img src="../Images/80949d353b2677bb9f24c1846cc447db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Phs1iwaaMI-i16T-CbsNOw.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">具有线性<em class="nk"> y </em>轴的示例关联图</figcaption></figure><p id="9783" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，由于<em class="kz"> y </em>轴的这一变化，要检查加密货币的价格，您必须更加关注图表。</p><p id="c871" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在将<em class="kz"> y </em>轴设置为对数后运行该程序，您应该有望得到如下所示的图形:</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi nj"><img src="../Images/a730295c7dc58bf47cc13f9bbe564755.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Dc3vTCzBG5sMKXSp75vJg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">多个加密货币图表并排显示，以比较相关性</figcaption></figure><p id="8281" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从图表中可以看出，BTC、瑞士联邦理工学院和长期技术学院的趋势非常相似。但是ETH和LTC比BTC和ETH有更强的正相关性，你可以通过观察不同图表中的模式来了解这一点，并了解它们在相互比较中是如何变化的。另一方面，你可以看到BTC和XMR是负相关的，因为XMR在11月25日左右达到峰值，但BTC在那时略有下降。这在交易时非常有用，因为你可以看到哪些加密货币彼此相关，你可以选择它们进行投资。</p><h1 id="f27d" class="mc lx iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">最后的想法</h1><p id="ac9f" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">当我第一次了解Plotly时，我从来没有想到它是如此简单和容易绘制的图形，但不仅仅是普通的图形，还有许多其他功能的美丽精确的图形。注意:请不要把我说的任何话当成财务建议，我不是经济学家，只是个程序员。</p><p id="7159" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望我教了你一些新东西。如果您有任何问题或反馈，请不要犹豫在下面评论，我会尽力回答他们。</p><p id="ef6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读！💖</p></div></div>    
</body>
</html>