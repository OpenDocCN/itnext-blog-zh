<html>
<head>
<title>Sign up with SMS by using Amplify Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Amplify Flutter注册SMS</h1>
<blockquote>原文：<a href="https://itnext.io/mastering-aws-amplifys-sms-flows-in-flutter-part-3-sign-up-flow-d62858f9ebc7?source=collection_archive---------2-----------------------#2022-06-30">https://itnext.io/mastering-aws-amplifys-sms-flows-in-flutter-part-3-sign-up-flow-d62858f9ebc7?source=collection_archive---------2-----------------------#2022-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fd6225d27015bbff028f21ec968bcd0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2yyoC54YD1mrLRJw9Vaiiw.png"/></div></div></figure><p id="5780" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个博客文章系列的前几部分中，您学习了如何创建一个AWS帐户、创建一个Flutter项目以及为您的Flutter项目设置AWS Amplify。</p><p id="07ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是实现注册流程的时候了！</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="b50f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这一系列博客文章中，您将了解到:</p><ul class=""><li id="4ab0" class="ld le iq ka b kb kc kf kg kj lf kn lg kr lh kv li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/@muhammedsalihguler/mastering-aws-amplifys-sms-flows-in-flutter-part-1-aws-setup-ef748798fdbf" rel="noopener">创建AWS账户</a></li><li id="2b36" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/@muhammedsalihguler/mastering-aws-amplifys-sms-flows-in-flutter-part-1-aws-setup-ef748798fdbf" rel="noopener">在您的机器上设置Amplify CLI</a></li><li id="8204" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/@muhammedsalihguler/mastering-aws-amplifys-sms-flows-in-flutter-part-2-project-setup-5197b77317a6" rel="noopener">从Flutter CLI工具创建一个新的Flutter项目</a></li><li id="ae4f" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">通过使用Amplify CLI将AWS Amplify项目初始化到您的颤振项目中</li><li id="1bed" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/@muhammedsalihguler/mastering-aws-amplifys-sms-flows-in-flutter-part-3-sign-up-flow-d62858f9ebc7" rel="noopener">实施电话号码为</a>的注册流程(当前职位)</li><li id="7d2b" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><a class="ae lm" href="https://medium.com/@muhammedsalihguler/mastering-aws-amplifys-sms-flows-in-flutter-part-4-sign-in-flow-18012bb6fb18" rel="noopener">用电话号码实现签到流程</a></li></ul><figure class="ls lt lu lv gt jr"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h1 id="81ac" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">用电话号码和电子邮件确认注册用户</h1><p id="496f" class="pw-post-body-paragraph jy jz iq ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">在<code class="fe nb nc nd ne b">onPressed</code>方法中，您将调用<code class="fe nb nc nd ne b">Amplify.Auth.signUp</code>方法。这将有助于您注册用户，但需要记住一些规则:</p><ul class=""><li id="19f9" class="ld le iq ka b kb kc kf kg kj lf kn lg kr lh kv li lj lk ll bi translated">默认情况下，所有情况下都启用电子邮件验证(除非另有选择)，因此在这种情况下，您需要提供电子邮件地址</li><li id="d4e2" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">如果您不想进行电子邮件验证，您需要启用电话验证</li><li id="dae5" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">在这种情况下，电话号码将作为用户名传递。</li></ul><pre class="ls lt lu lv gt nf ne ng nh aw ni bi"><span id="0842" class="nj lz iq ne b gy nk nl l nm nn">Future&lt;void&gt; _signUpUser(String phoneNumber, String password, String email) async {<br/>    final result = await Amplify.Auth.signUp(<br/>        username: phoneNumber,<br/>        password: password,<br/>        options: CognitoSignUpOptions(<br/>        userAttributes: {<br/>            CognitoUserAttributeKey.email: email,<br/>        },<br/>        ),<br/>    );<br/>    if (result.isSignUpComplete) {<br/>        //TODO: Add Sign In flow<br/>        debugPrint('Sign up is done.');<br/>    } else {<br/>        //TODO: Add confirmation flow<br/>        debugPrint('Confirmation time! Check your email!');<br/>    }<br/>}</span></pre><p id="9cd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该方法将检查用户是否:</p><ul class=""><li id="98bf" class="ld le iq ka b kb kc kf kg kj lf kn lg kr lh kv li lj lk ll bi translated">作为用户名的电话号码，</li><li id="8190" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">电话号码旁边应该有国家代码</li><li id="0919" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">一个合适的电子邮件地址，</li><li id="b24e" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">长密码(最少8个字符)</li></ul><p id="2ab1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">否则，它不会让用户注册。因此，让用户了解这些要求是一个好的做法。</p><p id="ba10" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当帐户需要确认时，用户将会看到一个对话框来输入他们的确认码。代码将被发送到这个迭代的电子邮件地址。</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/119435a197b3bbba5c47175ac5967d12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZV29sr8HI2wHBoEFv_rXKA.jpeg"/></div></div></figure><p id="deb2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在添加确认流程:</p><pre class="ls lt lu lv gt nf ne ng nh aw ni bi"><span id="4b38" class="nj lz iq ne b gy nk nl l nm nn">// Add next to the other controllers at the top of the class<br/>late final TextEditingController _activationCodeController;</span><span id="240e" class="nj lz iq ne b gy np nl l nm nn">// Add next to the other controllers at the initState method<br/>_activationCodeController = TextEditingController();</span><span id="36d5" class="nj lz iq ne b gy np nl l nm nn">// Add next to the other controllers at the dispose method<br/>_activationCodeController.dispose();</span><span id="b087" class="nj lz iq ne b gy np nl l nm nn">...</span><span id="5d5c" class="nj lz iq ne b gy np nl l nm nn">showDialog&lt;void&gt;(<br/>    context: context,<br/>    builder: (context) =&gt; AlertDialog(<br/>        title: const Text('Confirm the user'),<br/>        content: Column(<br/>        mainAxisSize: MainAxisSize.min,<br/>        children: [<br/>            Text('Check your email at $email and enter the code below'),<br/>            OutlinedAutomatedNextFocusableTextFormField(<br/>                controller: _activationCodeController,<br/>                padding: const EdgeInsets.only(top: 16),<br/>                labelText: 'Activation Code',<br/>                inputType: TextInputType.number,<br/>            ),<br/>        ],<br/>        ),<br/>        actions: &lt;Widget&gt;[<br/>        TextButton(<br/>            child: const Text('Dismiss'),<br/>            onPressed: () =&gt; Navigator.of(context).pop(),<br/>        ),<br/>        TextButton(<br/>            child: const Text('Confirm'),<br/>            onPressed: () {<br/>                Amplify.Auth.confirmSignUp(<br/>                    username: phoneNumber,<br/>                    confirmationCode: _activationCodeController.text,<br/>                ).then((result) {<br/>                    if (result.isSignUpComplete) {<br/>                        Navigator.of(context).pop();<br/>                    }<br/>                });<br/>            },<br/>        ),<br/>        ],<br/>    ),<br/>);</span></pre><p id="5bf9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">输入代码后，您可以通过向终端写入<code class="fe nb nc nd ne b">amplify console auth</code>来检查您的用户控制台，并查看确认状态，如下所示:</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/982b5210627c3e7980e9b24cacb9ddab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_z9jHZ3nyZPkYAOOFhV_g.jpeg"/></div></div></figure><p id="5c1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在您已经创建了完整的注册流程，是时候使用电话号码进行确认了！</p><h1 id="48cf" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">用电话号码和电话号码确认注册用户</h1><p id="2ce7" class="pw-post-body-paragraph jy jz iq ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">首先，从删除电子邮件地址验证和添加电话号码验证开始:</p><pre class="ls lt lu lv gt nf ne ng nh aw ni bi"><span id="33bb" class="nj lz iq ne b gy nk nl l nm nn">$ amplify update auth <br/>Using service: Cognito, provided by: awscloudformation<br/>$ What do you want to do? <br/>  Apply default configuration with Social Provider (Federation) <br/>❯ Walkthrough all the auth configurations <br/>  Create or update Cognito user pool groups <br/>  Create or update Admin queries API<br/>  <br/>$ Select the authentication/authorization services that you want to use: (Use arrow<br/> keys)<br/>❯ User Sign-Up, Sign-In, connected with AWS IAM controls (Enables per-user Storage<br/> features for images or other content, Analytics, and more) <br/>  User Sign-Up &amp; Sign-In only (Best used with a cloud API only) <br/>  I want to learn more.  <br/>  <br/>$ Allow unauthenticated logins? (Provides scoped down permissions that you can cont<br/>rol via AWS IAM) (Use arrow keys)<br/>  Yes <br/>❯ No <br/>  I want to learn more. <br/>  <br/>$ Do you want to enable 3rd party authentication providers in your identity pool? <br/>  Yes <br/>❯ No <br/>  I want to learn more. <br/>  <br/>$ Do you want to add User Pool Groups? <br/>  Yes <br/>❯ No <br/>  I want to learn more. <br/>  <br/>$ Do you want to add an admin queries API? <br/>  Yes <br/>❯ No <br/>  I want to learn more.   <br/>  <br/>$ Multifactor authentication (MFA) user login options: (Use arrow keys)<br/>❯ OFF <br/>  - ON (Required for all logins, can not be enabled later) (Disabled)<br/>  OPTIONAL (Individual users can use MFA) <br/>  I want to learn more.<br/>  <br/>$ Email based user registration/forgot password: <br/>  Enabled (Requires per-user email entry at registration) <br/>❯ Disabled (Uses SMS/TOTP as an alternative)</span><span id="9e16" class="nj lz iq ne b gy np nl l nm nn">$ Please specify an SMS verification message: (Your verification code is {####})</span><span id="7f68" class="nj lz iq ne b gy np nl l nm nn">$ Do you want to override the default password policy for this User Pool? (y/N)</span><span id="2137" class="nj lz iq ne b gy np nl l nm nn">$ Specify the app's refresh token expiration period (in days): (30)</span><span id="8676" class="nj lz iq ne b gy np nl l nm nn">$ Do you want to specify the user attributes this app can read and write? (y/N)</span><span id="ad1c" class="nj lz iq ne b gy np nl l nm nn">$ Do you want to enable any of the following capabilities? (Press &lt;space&gt; to select, <br/>&lt;a&gt; to toggle all, &lt;i&gt; to invert selection)<br/>❯◯ Add Google reCaptcha Challenge<br/> ◯ Email Verification Link with Redirect<br/> ◯ Add User to Group<br/> ◯ Email Domain Filtering (denylist)<br/> ◯ Email Domain Filtering (allowlist)<br/> ◯ Custom Auth Challenge Flow (basic scaffolding - not for production)<br/> ◯ Override ID Token Claims<br/> <br/>$ Do you want to use an OAuth flow? <br/>  Yes <br/>❯ No <br/>  I want to learn more.  <br/>  <br/>$ Do you want to configure Lambda Triggers for Cognito? (Y/n)</span></pre><p id="8a54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在通过<code class="fe nb nc nd ne b">amplify push</code>将你的改变推送到云端，然后回到你的代码。</p><pre class="ls lt lu lv gt nf ne ng nh aw ni bi"><span id="30cc" class="nj lz iq ne b gy nk nl l nm nn">showDialog&lt;void&gt;(<br/>    context: context,<br/>    builder: (context) =&gt; AlertDialog(<br/>        title: const Text('Confirm the user'),<br/>        content: Column(<br/>        mainAxisSize: MainAxisSize.min,<br/>        children: [<br/>            const Text('Check your phone number and enter the code below'),<br/>            OutlinedAutomatedNextFocusableTextFormField(<br/>                controller: _activationCodeController,<br/>                padding: const EdgeInsets.only(top: 16),<br/>                labelText: 'Activation Code',<br/>                inputType: TextInputType.number,<br/>            ),<br/>        ],<br/>        ),<br/>        actions: &lt;Widget&gt;[<br/>            TextButton(<br/>                child: const Text('Dismiss'),<br/>                onPressed: () =&gt; Navigator.of(context).pop(),<br/>            ),<br/>            TextButton(<br/>                child: const Text('Confirm'),<br/>                onPressed: () {<br/>                    Amplify.Auth.confirmSignUp(<br/>                        username: phoneNumber,<br/>                        confirmationCode: _activationCodeController.text,<br/>                    ).then((result) {<br/>                        if (result.isSignUpComplete) {<br/>                        Navigator.of(context).pop();<br/>                        }<br/>                    });<br/>                },<br/>            ),<br/>        ],<br/>    ),<br/>);</span></pre><blockquote class="nr ns nt"><p id="08ab" class="jy jz nu ka b kb kc kd ke kf kg kh ki nv kk kl km nw ko kp kq nx ks kt ku kv ij bi translated"><em class="iq">请注意，这并不意味着你不需要电子邮件地址。为了验证用户信息，Amplify会要求提供电子邮件地址或一系列个人信息，如姓名等。为了简单起见，您将在这里继续使用电子邮件。</em></p></blockquote><p id="41e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您再次运行应用程序并注册用户，现在您将不会收到电子邮件。但是您还不会收到短信，因为您还没有设置发送信息的系统。</p><p id="00f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦您启用了基于SMS的身份验证工作流，如果您仔细查看调试控制台，您可能会记得看到如下所示的错误消息:</p><pre class="ls lt lu lv gt nf ne ng nh aw ni bi"><span id="bcf8" class="nj lz iq ne b gy nk nl l nm nn">⚠️ You have enabled SMS based auth workflow. Verify your SNS account mode in the SNS console: <a class="ae lm" href="https://console.aws.amazon.com/sns/v3/home#/mobile/text-messaging" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/sns/v3/home#/mobile/text-messaging</a><br/>If your account is in "Sandbox" mode, you can only send SMS messages to verified recipient phone numbers.</span></pre><p id="9a87" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Amplify使用<strong class="ka ir">简单通知服务(SNS) </strong>提供从发布者到订阅者的消息传递服务。要发送SMS消息，需要在Amazon SNS上拥有一个帐户。</p><h2 id="cfaa" class="nj lz iq bd ma ny nz dn me oa ob dp mi kj oc od mm kn oe of mq kr og oh mu oi bi translated">注册特殊请求国家的电话号码</h2><p id="a2ed" class="pw-post-body-paragraph jy jz iq ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">转到<a class="ae lm" href="https://console.aws.amazon.com/sns/v3/home#/mobile/text-messaging" rel="noopener ugc nofollow" target="_blank">亚马逊社交网络信息页面</a>，在你做任何其他事情之前，检查你是否在页面顶部有如下警告:</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/07acbc8152e48b65171fd715ef11f499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JhFBy8EcMmKZxaMZC3K8iw.jpeg"/></div></div></figure><p id="56dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你这样做了，这意味着在某些国家，你需要拨打号码来发送消息，但如果你没有，这对你来说是个好消息，你可以跳到<strong class="ka ir">注册沙盒目的地的电话号码</strong>部分。</p><p id="d357" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在点击<strong class="ka ir">查看始发号码</strong>按钮。它将引导您进入<a class="ae lm" href="https://eu-west-3.console.aws.amazon.com/sns/v3/home#/mobile/origination-identities" rel="noopener ugc nofollow" target="_blank">始发号码控制台</a>。您可以检查您已有的号码，或者通过点击<strong class="ka ir">精确定位</strong>按钮中的供应号码来创建一个新号码。</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/6b5bd6384fe5398d3fac31b571d00b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EepuFB4dOcSNxXdyxWWORA.jpeg"/></div></div></figure><p id="6c6a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将带你到亚马逊精确定位页面添加数字。如果您的国家不支持发件人id，您必须购买一个始发号码。在精确定位中，点击<strong class="ka ir">请求电话号码</strong>。这将把你带到一个页面，在那里你可以获得一个免费号码发送短信。选择您将发送短信的国家，然后按照提示请求新号码。成功申请免费号码后，您可以返回SNS验证您的电话号码，如下一节所述。</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ok"><img src="../Images/af4e9538d05af46729cafae8b8a22ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-UCDKEUDvfvZLujdBmb9Zw.jpeg"/></div></div></figure><h2 id="3eda" class="nj lz iq bd ma ny nz dn me oa ob dp mi kj oc od mm kn oe of mq kr og oh mu oi bi translated">为特殊请求国家注册发件人id</h2><p id="fa0c" class="pw-post-body-paragraph jy jz iq ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">如果您支持的国家/地区不在电话号码列表中，那么您可以在此处查看<a class="ae lm" href="https://docs.aws.amazon.com/pinpoint/latest/userguide/channels-sms-countries.html" rel="noopener ugc nofollow" target="_blank">国家/地区列表</a>以了解相关要求。例如，像土耳其这样的一些国家要求发送者注册。要求发件人使用预先注册的字母发件人ID。在SMS消息中，<em class="nu">发送者ID </em>是在接收者的设备上显示为消息发送者的名称。对发件人id的支持因国家而异。比如美国的运营商根本不支持发件人id，但是印度的运营商要求发件人使用发件人id。</p><blockquote class="nr ns nt"><p id="1223" class="jy jz nu ka b kb kc kd ke kf kg kh ki nv kk kl km nw ko kp kq nx ks kt ku kv ij bi translated"><em class="iq">如果您需要在印度注册发件人ID，请在<em class="iq">您在支持中心打开案例之前，完成</em> <a class="ae lm" href="https://docs.aws.amazon.com/pinpoint/latest/userguide/channels-sms-senderid-india.html" rel="noopener ugc nofollow" target="_blank"> <em class="iq">印度特殊要求</em> </a> <em class="iq"> </em>中的程序。</em></p></blockquote><p id="aeca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">进入<a class="ae lm" href="https://us-east-1.console.aws.amazon.com/support/home#/case/create?issueType=service-limit-increase" rel="noopener ugc nofollow" target="_blank">服务限制增加支持页面</a>:</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/49c10121eb291c19286f4ebebd6d0070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-x6qPic_YGYMlB8R-RokhQ.jpeg"/></div></div></figure><ul class=""><li id="0edf" class="ld le iq ka b kb kc kf kg kj lf kn lg kr lh kv li lj lk ll bi translated">对于<strong class="ka ir">限制类型</strong>，选择<strong class="ka ir">精确定位短信</strong>。</li><li id="653f" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">(可选)对于<strong class="ka ir">，提供发送短信的网站或应用程序的链接</strong>，提供发送短信的网站、应用程序或服务的信息。</li><li id="74d0" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">(可选)对于<strong class="ka ir">您计划发送什么类型的消息</strong>，选择您计划使用长码发送的消息类型:</li><li id="2041" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><strong class="ka ir">一次性密码</strong> —提供密码的消息，您的客户使用这些密码来验证您的网站或应用程序。</li><li id="b3ec" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><strong class="ka ir">促销</strong>——宣传你的业务或服务的非关键信息，如特价或公告。</li><li id="af52" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated"><strong class="ka ir">交易</strong> —支持客户交易的重要信息消息，如订单确认或账户提醒。交易消息不得包含促销或营销内容。</li><li id="512b" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">(可选)对于<strong class="ka ir">您将从哪个AWS地区发送消息</strong>，选择您将从哪个地区发送消息。</li><li id="ab76" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">(可选)对于<strong class="ka ir">您计划向哪些国家发送消息</strong>，输入您想要购买短代码的国家或地区。</li><li id="f9ad" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">(可选)在<strong class="ka ir">您的客户如何选择接收来自您的消息</strong>中，提供有关您选择加入流程的详细信息。</li><li id="dc4f" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">(可选)在<strong class="ka ir">请提供您计划用于向客户发送消息的消息模板</strong>字段中，包括您将使用的模板。</li></ul><p id="fb03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，填写如下请求信息(您可以根据自己喜欢的地区选择<strong class="ka ir">地区</strong>):</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/3860d758bb680ea3de7d9721a0f87f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1yQOgQIGJXJ4YpLywsoAw.jpeg"/></div></div></figure><p id="e374" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，按如下方式填写案例描述，并提交您的请求:</p><pre class="ls lt lu lv gt nf ne ng nh aw ni bi"><span id="92be" class="nj lz iq ne b gy nk nl l nm nn">Sender id: &lt;SENDER-ID&gt;<br/>SMS Template: &lt;YOUR-MESSAGE&gt; e.g. Your confirmation code is: ####<br/>Planned message count: &lt;ESTIMATED-NUMBER-OF-MESSAGES-TO-SEND&gt;  <br/>User opt-in: &lt;TEXT-TO-EXPLAIN-HOW-USERS-OPT-IN&gt;<br/>Organization name: &lt;NAME&gt;<br/>Organization address: &lt;Address&gt;<br/>Organization country: &lt;Country&gt;<br/>Organization phone number: &lt;PHONE-NUMBER&gt;<br/>Organization website: &lt;URL&gt;</span></pre><p id="a935" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">收到请求后，将在24小时内提供初步答复。</p><p id="50a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取发件人ID的过程完成后，您将会收到通知。当您收到此通知时，请完成本节中的步骤，将Amazon Pinpoint配置为使用您的发件人ID。</p><ul class=""><li id="e197" class="ld le iq ka b kb kc kf kg kj lf kn lg kr lh kv li lj lk ll bi translated">登录AWS管理控制台，打开<a class="ae lm" href="https://console.aws.amazon.com/pinpoint/" rel="noopener ugc nofollow" target="_blank">亚马逊针尖控制台</a>。</li><li id="001a" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">在<strong class="ka ir">所有项目</strong>页面上，选择一个使用短信频道的项目。</li><li id="52a2" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">在导航窗格中的<strong class="ka ir">设置</strong>下，选择<strong class="ka ir">短信和语音</strong>。</li><li id="1055" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">在<strong class="ka ir">短信设置</strong>旁边，选择<strong class="ka ir">编辑</strong>。</li><li id="6bc1" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">在<strong class="ka ir">帐户级别设置</strong>下，对于<strong class="ka ir">默认发件人ID </strong>，键入您的发件人ID。</li><li id="599d" class="ld le iq ka b kb ln kf lo kj lp kn lq kr lr kv li lj lk ll bi translated">选择<strong class="ka ir">保存更改</strong>。</li></ul><h2 id="65d0" class="nj lz iq bd ma ny nz dn me oa ob dp mi kj oc od mm kn oe of mq kr og oh mu oi bi translated">注册沙盒目的地的电话号码</h2><p id="40e5" class="pw-post-body-paragraph jy jz iq ka b kb mw kd ke kf mx kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">如果您的帐户处于沙盒模式，您需要添加一个电话号码并进行验证。转到<strong class="ka ir">沙盒目的地电话号码</strong>部分，点击<strong class="ka ir">添加电话号码</strong>按钮。</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/71cb4b1eef42f108d9e999fc1c00d2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTOplQ1HY9EeyiY-CzFvIw.jpeg"/></div></div></figure><p id="5d74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，添加一个新的电话号码，并用一条消息验证该号码。</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/54a588f1ea7624ec37a20a775d2ac323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Espf3o3_mbCD8aZsYY-7dg.jpeg"/></div></div></figure><p id="7992" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">验证您的号码和验证状态为“已验证”后。现在，您可以从您的应用程序发送消息。再次运行您的应用程序，并尝试创建一个帐户。您现在将收到一个可以使用的验证码。</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi op"><img src="../Images/372e2f9ddd2e6abeb87273e9cbb0dac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gDIlefHZDENw1mF8XrNoug.jpeg"/></div></div></figure><p id="0981" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将其添加到您的确认对话框中以确认用户:</p><figure class="ls lt lu lv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/b23d0e80413160656cd5991c3b855045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YXNAirnWzunp0wYV9MpRYw.jpeg"/></div></div></figure><p id="ded3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您应该已经设置好电话验证了！</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="a262" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一步是用电话号码连接登录流。</p><p id="25e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有关AWS Amplify认证库的更多信息，您可以查看<a class="ae lm" href="https://docs.amplify.aws/lib/auth/getting-started/q/platform/flutter/" rel="noopener ugc nofollow" target="_blank">官方文档</a>，在<a class="ae lm" href="https://t.co/KE3BsVI4eb" rel="noopener ugc nofollow" target="_blank"> Amplify Discord </a>提出您的问题。您也可以通过<a class="ae lm" href="https://github.com/salihgueler/amplify_sms_test" rel="noopener ugc nofollow" target="_blank"> GitHub </a>查看源代码，如果您对放大和抖动主题有任何疑问，请通过DM在<a class="ae lm" href="https://twitter.com/salihgueler" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上发送给我！</p><p id="7e66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下期帖子再见！</p><figure class="ls lt lu lv gt jr"><div class="bz fp l di"><div class="oq lx l"/></div></figure></div></div>    
</body>
</html>