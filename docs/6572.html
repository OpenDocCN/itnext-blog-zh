<html>
<head>
<title>Modern C++ in Advent of Code: Day20</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代C++代码的出现:第20天</h1>
<blockquote>原文：<a href="https://itnext.io/modern-c-in-advent-of-code-day20-be8b657e7f86?source=collection_archive---------2-----------------------#2021-12-20">https://itnext.io/modern-c-in-advent-of-code-day20-be8b657e7f86?source=collection_archive---------2-----------------------#2021-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5762" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天是<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">代码</a>问世的第二十天。今天，我们将阅读并增强一幅黑白图像。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/0091a39ea57e8e1ae53d77844eee6d11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F-dF3lEoqoMVl9nDa0x_mw.png"/></div></div></figure><p id="c9a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一如既往，请先尝试解决问题，然后再看解决方案。对于这个系列的所有文章，<a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">看看这个列表</a>。</p><h1 id="3ee1" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第20天</h1><p id="67ed" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们分两部分接收我们的输入。第一行代表我们的“增强”过滤器，后面是初始图像数据的网格。</p><p id="c427" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天问题的主要复杂性来自应用增强过滤器。对于每个像素，我们查看该像素周围的3×3网格，并将像素视为一个数字中的位(从左到右、从上到下阅读)。例如，这代表<code class="fe mb mc md me b">0b010110001 == 177</code>:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="b672" class="mj kz iq me b gy mk ml l mm mn">.#.<br/>##.<br/>..#</span></pre><p id="c912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，解码的数字表示增强过滤器数据中的位置，它告诉我们该像素在结果图像中应该是开还是关。</p><p id="58b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当应用过滤器时，我们需要一次全部应用，即我们需要生成图像的新实例。此外，该图像表示无限平面的一小部分。该平面从所有像素关闭开始；然而，我们需要小心边界像素，并将滤镜“应用”到无限平面。这听起来可能很疯狂，是的，一般来说确实如此，但是我们的输入表现良好，因此我们将只支持滤波器将零块映射到一个块的情况，即<code class="fe mb mc md me b">0b000000000&lt;-&gt;0b111111111</code>。</p><h2 id="e651" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">图像</h2><p id="9953" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们需要存储过滤器数据和图像数据:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="e20d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于解析和序列化，我们现在可以让范围来承担重任:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="aa88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">行视图(第3行)将跳过最初的空白，逐字符读取直到行尾，并将' # '转换为真值和'.'错误的价值观。</p><h2 id="656d" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">增强？</h2><p id="ebaf" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">解析完输入之后，我们现在可以继续讨论实际的增强功能了。我们将需要两个主要方法，一个从3x3网格构造二进制数，另一个应用过滤器:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="d83a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要在边界上小心，在那里3x3网格将超出我们的图像数据，我们需要使用来自无限平面的值(第8行)。</p><p id="a093" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果可能是每边大一个像素(第14行)。然而，我们不必考虑该区域(第20行)之外的像素，因为均匀无限平面只会影响该边界(因为3x3网格编码)。</p><h2 id="2921" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">增强！</h2><p id="e778" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">完成后，剩下的就是把这些放在一起:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="ce08" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">链接和技术说明</h1><p id="96dd" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">每日解决方案存储库位于:<a class="ae kl" href="https://github.com/HappyCerberus/moderncpp-aoc-2021" rel="noopener ugc nofollow" target="_blank">https://github.com/HappyCerberus/moderncpp-aoc-2021</a>。</p><p id="3755" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看此列表，了解《代码降临日》的其他相关文章。</p><p id="8448" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请不要忘记亲自尝试一下<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">代码</a>的问世。</p><h1 id="1dd7" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">感谢您的阅读</h1><p id="75f2" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">感谢您阅读这篇文章。你喜欢吗？</p><p id="9f5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还在T4的YouTube上发布视频。你有问题吗？在Twitter或LinkedIn上联系我。</p></div></div>    
</body>
</html>