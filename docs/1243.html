<html>
<head>
<title>Install Kubernetes on bare-metal CentOS7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在裸机CentOS7上安装Kubernetes</h1>
<blockquote>原文：<a href="https://itnext.io/install-kubernetes-on-bare-metal-centos7-fba40e9bb3de?source=collection_archive---------0-----------------------#2018-08-21">https://itnext.io/install-kubernetes-on-bare-metal-centos7-fba40e9bb3de?source=collection_archive---------0-----------------------#2018-08-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><blockquote class="jq jr js"><p id="b07f" class="jt ju jv jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr im bi translated">如今，大多数云提供商都提供托管解决方案来在其环境中运行Kubernetes集群。尽管在云中安装Kubernetes非常容易，但仍然需要非基于云的Kubernetes解决方案。<br/>在这篇博客中，我将解释如何使用Ansible和<a class="ae ks" href="https://github.com/kubernetes-incubator/kubespray" rel="noopener ugc nofollow" target="_blank"> kubespray </a>在CentOS7机器上安装Kubernetes集群，这将使我们的工作自动化。</p></blockquote><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/064bafbac6a7e7404dfd5febee81e688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*7IxE5YGoJ0thLLT6QG1d6w.png"/></div></figure><h2 id="da2d" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">服务器设置</h2><p id="633b" class="pw-post-body-paragraph jt ju it jw b jx lx jz ka kb ly kd ke lk lz kh ki lo ma kl km ls mb kp kq kr im bi translated">我们需要创建3台虚拟机，用于创建我们的集群:</p><ul class=""><li id="65a7" class="mc md it jw b jx jy kb kc lk me lo mf ls mg kr mh mi mj mk bi translated">操作系统:CentOS7/RHEL7</li><li id="ac31" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">2048MB内存+ 2个CPU + 20 GB硬盘(最低)/节点</li><li id="a78a" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">互联网接入/ eth0接口</li><li id="dd54" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">具有root权限的用户</li></ul><p id="7358" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">我在本地计算机上创建了3个满足VMware Fusion最低要求的虚拟机。我用过<a class="ae ks" href="https://buildlogs.centos.org/rolling/7/isos/x86_64/CentOS-7-x86_64-Minimal-1805-01.iso" rel="noopener ugc nofollow" target="_blank">CentOS-7-x86 _ 64-Minimal-1805–01 . iso</a>。</p><p id="f40b" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">我创建的用户名为<code class="fe mq mr ms mt b">centos</code>，密码为<code class="fe mq mr ms mt b">supersecret</code>。您可以使用任何用户名/密码，但需要root权限。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi mu"><img src="../Images/290985835ec371d41c4a1cc93493e71f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sp11C3PzUkn5qJxwBQyBpA.png"/></div></div></figure><p id="8fec" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">这个服务器已经预装了<code class="fe mq mr ms mt b">openssh</code>。我第一台服务器的IP是<code class="fe mq mr ms mt b">192.168.140.101</code>。</p><p id="5d8c" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">我们需要确保我们可以通过SSH连接到集群中的每台服务器:</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="ac83" class="lb lc it mt b gy nd ne l nf ng">$ <!-- -->ssh centos@192.168.140.101<br/>centos@192.168.140.101's password:<br/>[centos@localhost ~]$ exit<br/>$ <!-- -->ssh centos@192.168.140.102<br/>centos@192.168.140.102's password:<br/>[centos@localhost ~]$ exit<br/>$ <!-- -->ssh centos@192.168.140.103<br/>centos@192.168.140.103's password:<br/>[centos@localhost ~]$ exit</span></pre><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nh"><img src="../Images/eddd75201fc55f6e9435dd1a026000b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JTwXL9TIV6MGMCGj6j4jg.png"/></div></div></figure><h2 id="6be1" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">服务器配置</h2><p id="a591" class="pw-post-body-paragraph jt ju it jw b jx lx jz ka kb ly kd ke lk lz kh ki lo ma kl km ls mb kp kq kr im bi translated">在我们使用<a class="ae ks" href="https://github.com/kubernetes-incubator/kubespray" rel="noopener ugc nofollow" target="_blank"> kubespray </a>安装Kubernetes集群之前，需要配置我们的3台服务器。有一些先决条件:</p><ul class=""><li id="2a61" class="mc md it jw b jx jy kb kc lk me lo mf ls mg kr mh mi mj mk bi translated">最新的软件包</li><li id="ee1a" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">所有服务器都需要有相同的日期和时间(ntpd)</li><li id="6605" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">禁用防火墙</li><li id="8b0f" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">禁用交换</li><li id="a2c7" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">无密码的sudo</li><li id="fb79" class="mc md it jw b jx ml kb mm lk mn lo mo ls mp kr mh mi mj mk bi translated">无密码SSH(推荐)</li></ul><p id="8b4e" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">我们可以通过在每个服务器或节点上执行所有必要的命令来分别配置每个服务器。但是为了实现这些步骤的自动化，我写了一个基本的<a class="ae ks" href="https://www.ansible.com/" rel="noopener ugc nofollow" target="_blank"> Ansible </a>剧本，可以在我的<a class="ae ks" href="https://github.com/lvthillo/ansible-centos7-kubespray" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。本行动手册将配置我们的CentOS7机器。</p><h2 id="9ac0" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">运行可行的行动手册以满足先决条件</h2><p id="8b67" class="pw-post-body-paragraph jt ju it jw b jx lx jz ka kb ly kd ke lk lz kh ki lo ma kl km ls mb kp kq kr im bi translated">在您的机器上安装Ansible，从这里您将开始行动手册。我在做MacOS。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="dfdf" class="lb lc it mt b gy nd ne l nf ng">$ <!-- -->brew install ansible<br/>$ ansible --version<br/>ansible 2.6.2</span></pre><p id="742c" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">剧本将通过使用公钥来配置无密码SSH。这个public存储在<code class="fe mq mr ms mt b">~/.ssh/id_rsa.pub</code>但是位置可以定制。如博客开头所示:我正在使用用户<code class="fe mq mr ms mt b">centos</code>，它在组<code class="fe mq mr ms mt b">centos</code>中，密码为<code class="fe mq mr ms mt b">supersecret</code>。这些名称也可以定制。</p><p id="3a87" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">现在克隆包含行动手册的存储库。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="9a93" class="lb lc it mt b gy nd ne l nf ng">$ git clone <a class="ae ks" href="https://github.com/lvthillo/ansible-centos7-kubespray.git" rel="noopener ugc nofollow" target="_blank">https://github.com/lvthillo/ansible-centos7-kubespray.git</a><br/>$ cd ansible-centos7-kubespray</span></pre><p id="1f43" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">更新<code class="fe mq mr ms mt b">hosts.ini</code>文件并添加服务器的IP地址。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="4e2a" class="lb lc it mt b gy nd ne l nf ng">[all]<br/>node1 ansible_host=192.168.140.101<br/>node2 ansible_host=192.168.140.102<br/>node3 ansible_host=192.168.140.103</span></pre><p id="64d5" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">现在我们将运行剧本并定义我们的变量。同样，确保您可以与您的用户进行ssh(通过使用密码)。我的命令是这样的(更新变量！):</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="2b03" class="lb lc it mt b gy nd ne l nf ng">$ ansible-playbook -i hosts.ini -u centos -k playbook.yml --extra-vars "ansible_sudo_pass=supersecret user=centos group=centos pubkeypath=~/.ssh/id_rsa.pub"</span></pre><p id="1448" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">剧本将检查<code class="fe mq mr ms mt b">ntpd</code>服务是否正在运行。如果该服务没有运行，这将导致一个错误，该错误将被行动手册忽略。将安装并启用<code class="fe mq mr ms mt b">ntpd</code>服务。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi ni"><img src="../Images/32075e1860229a3c3f7c7e9a4ab1f0c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_y3UMfQ9A23K7ocPvGt48g.png"/></div></div></figure><p id="7e48" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">最后，服务器重新启动，我们的服务器满足了先决条件。</p><h2 id="e2c9" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">运行Ansible Playbook安装Kubernetes</h2><p id="70d0" class="pw-post-body-paragraph jt ju it jw b jx lx jz ka kb ly kd ke lk lz kh ki lo ma kl km ls mb kp kq kr im bi translated">现在我们终于可以安装Kubernetes了。在这里，我们将使用kubespray，它也使用Ansible剧本。我们将使用当前的最新版本(v.2.6.0)。<br/> Kubespray会配置我们的集群，安装Docker，etcd，calico网络插件(默认)，…。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="6038" class="lb lc it mt b gy nd ne l nf ng">$ git clone <a class="ae ks" href="https://github.com/kubernetes-incubator/kubespray" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes-incubator/kubespray</a><br/>$ cd kubespray<br/>$ git checkout v2.6.0</span></pre><p id="1446" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">遵循Kubespray 的<a class="ae ks" href="https://github.com/kubernetes-incubator/kubespray/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> GitHub自述文件中的说明。</a></p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="b239" class="lb lc it mt b gy nd ne l nf ng"># Install dependencies from ``requirements.txt``<br/>$ sudo pip install -r requirements.txt<br/><br/># Copy inventory/sample as inventory/mycluster<br/>$ cp -rfp inventory/sample inventory/mycluster<br/><br/># Update Ansible inventory file with inventory builder<br/>$ declare -a IPS=(192.168.140.101 192.168.140.102 192.168.140.103)<br/>$ CONFIG_FILE=inventory/mycluster/hosts.ini python3 contrib/inventory_builder/inventory.py ${IPS[@]}<br/><br/># Review and change parameters under inventory/mycluster/group_var<br/>$ cat inventory/mycluster/group_vars/all.yml<br/>$ cat inventory/mycluster/group_vars/k8s-cluster.yml</span><span id="7523" class="lb lc it mt b gy nj ne l nf ng"># Optional: modify the hosts.ini file to your needs.<br/>$ vi inventory/mycluster/hosts.ini</span><span id="af09" class="lb lc it mt b gy nj ne l nf ng">[all]<br/>node1   ansible_host=192.168.140.101 ip=192.168.140.101<br/>node2   ansible_host=192.168.140.102 ip=192.168.140.102<br/>node3   ansible_host=192.168.140.103 ip=192.168.140.103</span><span id="5115" class="lb lc it mt b gy nj ne l nf ng"># possible to add additional masters<br/>[kube-master]<br/>node1</span><span id="ee79" class="lb lc it mt b gy nj ne l nf ng">[kube-node]<br/>node2<br/>node3</span><span id="192e" class="lb lc it mt b gy nj ne l nf ng"># possible to add additional etcd's<br/>[etcd]<br/>node1</span><span id="1e8d" class="lb lc it mt b gy nj ne l nf ng">[k8s-cluster:children]<br/>kube-node<br/>kube-master</span><span id="5ad9" class="lb lc it mt b gy nj ne l nf ng">[calico-rr]</span><span id="5583" class="lb lc it mt b gy nj ne l nf ng">[vault]<br/>node1<br/>node2<br/>node3</span><span id="fb41" class="lb lc it mt b gy nj ne l nf ng"># Deploy Kubespray with Ansible Playbook. In my case with the centos user.<br/>$ ansible-playbook -u centos -b -i inventory/mycluster/hosts.ini cluster.yml</span></pre><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nk"><img src="../Images/eba8b6f9808f4463c7bb378b59ed183a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHvz0TC-eSNCH_6VCcSo5A.png"/></div></div></figure><p id="a255" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">在您的本地机器上安装<code class="fe mq mr ms mt b">kubectl</code> CLI。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="8e79" class="lb lc it mt b gy nd ne l nf ng">$ brew install kubernetes-cli</span></pre><p id="3b4c" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">现在配置CLI以使用您的Kubernetes集群。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="9cd1" class="lb lc it mt b gy nd ne l nf ng">$ ssh centos@192.168.140.101 sudo ls /etc/kubernetes/ssl/</span><span id="0c10" class="lb lc it mt b gy nj ne l nf ng">$ ssh centos@192.168.140.101 sudo cat /etc/kubernetes/ssl/admin-node1-key.pem &gt; admin-key.pem</span><span id="62b5" class="lb lc it mt b gy nj ne l nf ng">$ ssh centos@192.168.140.101 sudo cat /etc/kubernetes/ssl/admin-node1.pem &gt; admin.pem</span><span id="8089" class="lb lc it mt b gy nj ne l nf ng">$ ssh centos@192.168.140.101 sudo cat /etc/kubernetes/ssl/ca.pem &gt; ca.pem</span><span id="8482" class="lb lc it mt b gy nj ne l nf ng">$ kubectl config set-cluster default-cluster --server=<a class="ae ks" href="https://192.168.140.101:6443" rel="noopener ugc nofollow" target="_blank">https://192.168.140.101:6443</a> --certificate-authority=ca.pem</span><span id="ee05" class="lb lc it mt b gy nj ne l nf ng">$ kubectl config set-credentials default-admin \<br/>    --certificate-authority=ca.pem \<br/>    --client-key=admin-key.pem \<br/>    --client-certificate=admin.pem</span><span id="6d69" class="lb lc it mt b gy nj ne l nf ng">$ kubectl config set-context default-system --cluster=default-cluster --user=default-admin</span><span id="4881" class="lb lc it mt b gy nj ne l nf ng">$ kubectl config use-context default-system</span><span id="458b" class="lb lc it mt b gy nj ne l nf ng">$ kubectl version</span><span id="3b73" class="lb lc it mt b gy nj ne l nf ng">$ kubectl get pods -n kube-system<br/>NAME                                    READY     STATUS    RESTARTS   AGE<br/>calico-node-cbptm                       1/1       Running   0          9m<br/>calico-node-q5mlp                       1/1       Running   0          9m<br/>calico-node-qtvrf                       1/1       Running   0          9m<br/>kube-apiserver-node1                    1/1       Running   0          9m<br/>kube-controller-manager-node1           1/1       Running   0          10m<br/>kube-dns-69f4c8fc58-mpwz6               3/3       Running   0          9m<br/>kube-dns-69f4c8fc58-zpffn               3/3       Running   0          9m<br/>kube-proxy-node1                        1/1       Running   0          10m<br/>kube-proxy-node2                        1/1       Running   0          10m<br/>kube-proxy-node3                        1/1       Running   0          10m<br/>kube-scheduler-node1                    1/1       Running   0          10m<br/>kubedns-autoscaler-565b49bbc6-227rh     1/1       Running   0          9m<br/>kubernetes-dashboard-6d4dfd56cb-phvzd   1/1       Running   0          9m<br/>nginx-proxy-node2                       1/1       Running   0          10m<br/>nginx-proxy-node3                       1/1       Running   0          10m</span></pre><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nl"><img src="../Images/1afc7fb30bcf22fa91035eba9e0d1ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJ2FQbsvl_HBbG_QVf-h-g.png"/></div></div></figure><h2 id="708c" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在Kubernetes中部署一个基本应用程序</h2><p id="af22" class="pw-post-body-paragraph jt ju it jw b jx lx jz ka kb ly kd ke lk lz kh ki lo ma kl km ls mb kp kq kr im bi translated">通过部署一个非常基本的Python应用程序，我们可以证明Kubernetes集群正在运行和工作。我们将部署两个pod，它们将打印它们的IP和一个NodePort类型的服务。我的<a class="ae ks" href="https://github.com/lvthillo/python-flask-docker" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上有这个应用。</p><p id="6056" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated"><code class="fe mq mr ms mt b">deployment.yaml</code>:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="bab0" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">创建部署和服务。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="09fb" class="lb lc it mt b gy nd ne l nf ng">$ kubectl create -f deployment.yaml<br/>deployment.apps/my-nginx created<br/>service/my-nginx created</span><span id="641d" class="lb lc it mt b gy nj ne l nf ng">$ kubectl get pods -n default<br/>NAME                      READY     STATUS    RESTARTS   AGE<br/>my-app-5c7694f7f8-b4lrm   1/1       Running   0          2m<br/>my-app-5c7694f7f8-p58hj   1/1       Running   0          2m</span><span id="a517" class="lb lc it mt b gy nj ne l nf ng">$ kubectl get svc -n default<br/>NAME         TYPE        CLUSTER-IP       PORT(S)          AGE<br/>kubernetes   ClusterIP   10.233.0.1       443/TCP          37m<br/>my-app       NodePort    10.233.62.17     8080:30956/TCP   2m</span></pre><p id="514d" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">现在访问<a class="ae ks" href="http://192.168.140.101:30956" rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 140 . 101:30956</a>并刷新页面，直到您被路由到另一个pod。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi no"><img src="../Images/f8ae69257855e9686caf1e0508a9931b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZI-iShnBSM_QlEv5DEsAg.png"/></div></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi np"><img src="../Images/087fe2c795059703696a4a7652e07491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkOhhL6ePnJi5fNrkdujxw.png"/></div></div></figure><p id="09ff" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke lk kg kh ki lo kk kl km ls ko kp kq kr im bi translated">豆荚在我们的节点上运行。</p><pre class="ku kv kw kx gt mz mt na nb aw nc bi"><span id="2613" class="lb lc it mt b gy nd ne l nf ng">$ kubectl describe pod my-app-5c7694f7f8-b4lrm | grep ‘Node:’<br/>Node: node3/192.168.140.103<br/>$ kubectl describe pod my-app-5c7694f7f8-p58hj | grep ‘Node:’<br/>Node: node2/192.168.140.102</span></pre><h2 id="8b28" class="lb lc it bd ld le lf dn lg lh li dp lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论</h2><p id="6545" class="pw-post-body-paragraph jt ju it jw b jx lx jz ka kb ly kd ke lk lz kh ki lo ma kl km ls mb kp kq kr im bi translated">我们在三台裸机CentOS7机器上创建了一个Kubernetes集群，其中有一个主节点和两个节点。Kubernetes的安装相当复杂，但是通过使用Ansible和Kubespray，我们能够在不进行大量手动交互的情况下安装集群。不要忘记配置集群的防火墙规则。这超出了本教程的范围。希望你喜欢！</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><a href="https://www.buymeacoffee.com/dZb8fLN"><div class="gh gi nq"><img src="../Images/83dc7212ef8502659c81086ad58b8d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*bk_C8Um34KavCkO2yzMCZg.png"/></div></a><figcaption class="nr ns gj gh gi nt nu bd b be z dk translated">如果真的对你有帮助…:)</figcaption></figure></div></div>    
</body>
</html>