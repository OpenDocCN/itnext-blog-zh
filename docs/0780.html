<html>
<head>
<title>Kube tool in less than 3 min: Heptio Ark</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不到3分钟的Kube工具:Heptio Ark</h1>
<blockquote>原文：<a href="https://itnext.io/kubetool-in-under-5-min-1-ebcf32fa9e81?source=collection_archive---------2-----------------------#2018-05-28">https://itnext.io/kubetool-in-under-5-min-1-ebcf32fa9e81?source=collection_archive---------2-----------------------#2018-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8d0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过这篇文章，我想开始一系列的帖子，目的是在3分钟内介绍Kubernetes开源工具。K8S周围的生态系统变得越来越复杂，很难跟踪每天出现的伟大项目。</p><p id="e539" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这不再是借口了！在每篇文章中，我将提供一个在集群中自动部署该工具的导航图(无论是我的还是其他作者的),以及一个快速采用该工具的简要指南。</p><p id="d77e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我只有3分钟的时间，所以让我们从第一个帖子开始:<a class="ae kl" href="https://github.com/heptio/ark" rel="noopener ugc nofollow" target="_blank"> Heptio Ark </a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/4267889b826aa3077e43c2ad95d82655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ggh-nvb4rZzCWq4UPIS2fw.png"/></div></div></figure><p id="2ff6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Ark是一款开源软件，由Heptio创建，用于轻松管理整个Kubernetes集群的备份和恢复。这包括资源定义和持久性卷。</p><p id="c8c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">GitHub中提供了一个舵图，只需一个命令就可以部署它:【https://github.com/nachomillangarcia/helm-chart-ark<a class="ae kl" href="https://github.com/nachomillangarcia/helm-chart-ark" rel="noopener ugc nofollow" target="_blank"/>。您还需要在您的计算机上安装命令行工具。对于Linux用户:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="ff13" class="ld le iq kz b gy lf lg l lh li">wget https://github.com/heptio/ark/releases/download/v0.8.1/ark-v0.8.1-linux-amd64.tar.gz<br/>tar -xvzf ark-v0.8.1-linux-amd64.tar.gz <br/>sudo mv ark /usr/local/bin/</span></pre><p id="84b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看<a class="ae kl" href="https://github.com/heptio/ark/releases" rel="noopener ugc nofollow" target="_blank">发布页面</a>，获取OSX和Windows的二进制文件</p><p id="ae03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Ark由一个控制器(服务器)和几个代表备份、恢复和时间表的自定义资源定义组成。</p><p id="f22f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">备份可以存储在多个后端(S3、GC存储、Azure存储……)。它们只是一个. tar.gz文件，包含集群中每个资源的JSONs(或者只包含您在创建备份时选择的资源)。</p><p id="2f6c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最好的一点来自它还能在AWS、GC和Azure中创建持久卷的快照。只是魔术，没有其他工具需要有你所有的数据安全！</p><p id="840a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看如何创建备份:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="8d30" class="ld le iq kz b gy lf lg l lh li">ark backup create my-backup-all-cluster</span></pre><p id="b9dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将为群集上的每个资源创建一个，包括永久卷。</p><p id="b7ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以限制某些名称空间、资源类型或标签。要知道<strong class="jp ir"> Ark不允许通过名字</strong>选择，只允许通过标签选择，所以现在是开始标记一切的好时机；)</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="4a9c" class="ld le iq kz b gy lf lg l lh li">ark backup create my-backup-hello --selector app=hello</span></pre><p id="5fa7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将只备份标有app=hello的组件。有关选项的完整列表，请查看命令帮助。</p><p id="07cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，要恢复备份，只需创建一个恢复对象:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="3147" class="ld le iq kz b gy lf lg l lh li">ark restore create  --from-backup my-backup-hello</span></pre><p id="63d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要注意的是<strong class="jp ir">恢复永远不会覆盖任何内容</strong>，这样做没有任何风险。</p><p id="e4cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有许多其他命令和选项，用于列出和检查备份和恢复、创建计划、检查日志等。但是我会让你自己去发现它们:<a class="ae kl" href="https://heptio.github.io/ark/v0.8.1/" rel="noopener ugc nofollow" target="_blank">https://heptio.github.io/ark/v0.8.1/</a></p><p id="5251" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您之前不知道Heptio Ark，或者您是否喜欢它，请告诉我！</p><p id="27bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://ignaciomillan.com" rel="noopener ugc nofollow" target="_blank">ignaciomillan.com</a></p></div></div>    
</body>
</html>