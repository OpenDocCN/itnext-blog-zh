<html>
<head>
<title>How to create a List containing CheckBox fields and KeyNav in 125 lines of code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用125行代码创建包含复选框字段和KeyNav的列表</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-a-list-containing-checkbox-fields-and-keynav-in-125-lines-of-code-88b440de2951?source=collection_archive---------4-----------------------#2021-06-27">https://itnext.io/how-to-create-a-list-containing-checkbox-fields-and-keynav-in-125-lines-of-code-88b440de2951?source=collection_archive---------4-----------------------#2021-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="814c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我只是需要这个小部件来实现<a class="ae kl" href="https://github.com/neomjs/neo" rel="noopener ugc nofollow" target="_blank"> neo.mjs </a>日历。</p><p id="af9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">遵循“应用工作者是主要参与者”的范例，列表存在于应用程序<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/API/Worker" rel="noopener ugc nofollow" target="_blank"> web工作者</a>的范围内。</p><h1 id="f6d0" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">内容</h1><ol class=""><li id="b7ee" class="lk ll iq jp b jq lm ju ln jy lo kc lp kg lq kk lr ls lt lu bi translated">介绍</li><li id="ec3f" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">代码</li><li id="4bd6" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">包含许多项目或经常更改的列表</li><li id="2067" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">日历实施的状态</li><li id="763f" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">在线演示</li><li id="9759" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">最后的想法</li></ol><h1 id="90e7" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">1.介绍</h1><p id="8ce2" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">虽然这个任务一开始听起来并不简单，但实际上使用UI框架很容易实现。</p><p id="1130" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们先快速看一下结果:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h1 id="c715" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">2.代码</h1><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mk mj l"/></div></figure><p id="433a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建新组件时要做的第一件事是选择最合适的基类。我们想创建一个增强列表，所以<a class="ae kl" href="https://github.com/neomjs/neo/blob/dev/src/list/Base.mjs" rel="noopener ugc nofollow" target="_blank">列表。底座</a>是完美的选择。这个基类给了我们一个现成的选择模型和键盘导航。</p><p id="4a9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">日历实现使用一个顶级视图模型，因此我们可以从那里绑定商店。列表不需要自己的视图模型。</p><p id="a3ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们正在覆盖<code class="fe ml mm mn mo b">createItemContent()</code>并为每个记录创建一个复选框字段。创建了field实例后，我们就有了vdom属性，只需返回这个属性，并为编辑图标添加一个I标签。</p><p id="3072" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加一个<code class="fe ml mm mn mo b">destroy()</code>方法也很重要，因为我们确实想销毁复选框字段实例，以避免这种情况下的内存泄漏。</p><p id="bfd5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们向每个复选框添加一个<code class="fe ml mm mn mo b">change</code>监听器，并更新<code class="fe ml mm mn mo b">onCheckBoxChange()</code>中的相关记录字段。日历周视图监听记录更改，并将自动删除非活动日历的事件。</p><p id="c371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我增强了<a class="ae kl" href="https://github.com/neomjs/neo/blob/dev/src/selection/ListModel.mjs" rel="noopener ugc nofollow" target="_blank">选择。ListModel </a>一点，这样我们可以选择在视图类中直接使用<code class="fe ml mm mn mo b">onKeyDownEnter()</code>方法。</p><p id="c991" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们可以使用箭头键浏览我们的复选框列表项目，一旦我们点击“Enter”，我们只需切换复选框选中的配置。这将触发更改事件，并更新我们匹配的日历记录。</p><p id="0408" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">任务完成。</p><h1 id="0115" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">3.包含许多项目或经常更改的列表</h1><p id="ffb5" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">日历列表是相当静态的，因为用户很少会创建新的日历或重新加载列表。</p><p id="78a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于更动态的用例，您确实希望将checkbox实例存储在items数组中。</p><p id="2ca2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，当(重新)加载存储时，您将检查我们是否已经在给定的索引处有了一个checkbox实例，如果有，就用我们在create调用中使用的相同值调用<code class="fe ml mm mn mo b">checkboxInstance.set()</code>(除了模块和侦听器)。</p><p id="eab7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的，尽可能重用JS实例是一种设计模式。</p><p id="77b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用这种方式创建了一个标签来增强小部件。如果您希望看到这种情况发生，请添加评论:</p><div class="mp mq gp gr mr ms"><a href="https://github.com/neomjs/neo/issues/2502" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">calendar.view.calendars.List:将复选框字段存储在items数组中，并在…</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">对于这个相当静态的用例来说并不真正需要，但是这可能是一个很好的学习体验来看看它是如何工作的…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">github.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng nh ms"/></div></div></a></div><p id="c939" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">【<strong class="jp ir">快速更新</strong>已经实现了这个逻辑。你可以把这篇文章里面的要旨版本与:<br/><a class="ae kl" href="https://github.com/neomjs/neo/blob/dev/src/calendar/view/calendars/List.mjs" rel="noopener ugc nofollow" target="_blank">src/calendar/view/calendars/list . mjs</a>进行对比</p><h1 id="ae30" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">4.日历实施的状态</h1><p id="9486" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">完成日历是v2.3版本的主要重点。</p><p id="66d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经有了周、月、年视图的无限滚动。基于拖放的移动或调整操作效果非常好。</p><p id="6a89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">日历是高度配置驱动的，所以你可以用很多方式定制它。这也适用于运行时！</p><p id="a56e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来的步骤是:</p><ol class=""><li id="97a5" class="lk ll iq jp b jq jr ju jv jy ni kc nj kg nk kk lr ls lt lu bi translated">添加编辑表单以添加、编辑或删除日历</li><li id="8df5" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">增强事件编辑表单</li><li id="645a" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">通过拖放添加新事件</li><li id="e43e" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">添加日视图</li><li id="fdc3" class="lk ll iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">使日历完全响应(移动)</li></ol><p id="167b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成后，日历就可以用于您的应用程序了。</p><p id="8e7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我强烈建议深入研究日历代码库:</p><p id="5687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/neomjs/neo/tree/dev/src/calendar" rel="noopener ugc nofollow" target="_blank">https://github.com/neomjs/neo/tree/dev/src/calendar</a></p><p id="366d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">即使是有经验的Javascript开发人员也可以在这里学到很多东西！</p><h1 id="ca14" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">5.在线演示</h1><p id="c032" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这里是在线演示(目前仅<strong class="jp ir">桌面</strong>)。</p><p id="437e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">分销/生产</strong> <br/>基于缩小的webpack构建，不带源地图:<br/><a class="ae kl" href="https://neomjs.github.io/pages/node_modules/neo.mjs/dist/production/examples/calendar/basic/index.html" rel="noopener ugc nofollow" target="_blank">neo.mjs/dist/production/examples/calendar/basic/index.html</a></p><p id="e745" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">开发模式</strong>(仅限Chromium或Safari Tech预览版)<br/>直接在浏览器中运行真正的JS代码，不需要源代码:<br/><a class="ae kl" href="https://neomjs.github.io/pages/node_modules/neo.mjs/examples/calendar/basic/index.html" rel="noopener ugc nofollow" target="_blank">neo.mjs/examples/calendar/basic/index.html</a></p><p id="7a76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提示</strong>:检查DOM。非活动视图将被删除，但您仍然可以在设置菜单中更改它们的状态。更改将被应用到虚拟dom，卡激活将重新装载现有的JS实例。</p><p id="77c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提示2 </strong>:检查开发工具中的源代码(在开发模式下效果最佳)。所有组件都在app worker范围内。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nl"><img src="../Images/3fadd92f5a6a5355224a1242e81bef9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_5mhSJvYtr34BqY5csWEw.png"/></div></div></figure><h1 id="98a8" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">6.最后的想法</h1><p id="1e9f" class="pw-post-body-paragraph jn jo iq jp b jq lm js jt ju ln jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">如果您不熟悉neo项目，您可以在此处找到存储库:</p><div class="mp mq gp gr mr ms"><a href="https://github.com/neomjs/neo" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">近地天体</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">neo.mjs使您能够使用一个以上的CPU创建可扩展的高性能应用程序。不需要照顾一个…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">github.com</p></div></div><div class="nb l"><div class="nr l nd ne nf nb ng nh ms"/></div></div></a></div><p id="7956" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你需要帮助来提高速度，加入slack频道是值得的:</p><div class="mp mq gp gr mr ms"><a href="https://join.slack.com/t/neomjs/shared_invite/zt-6c50ueeu-3E1~M4T9xkNnb~M_prEEOA" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">在Slack上加入neo.mjs</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">Slack是一种与团队沟通的新方式。它比电子邮件更快、更有条理、更安全。</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">join.slack.com</p></div></div><div class="nb l"><div class="ns l nd ne nf nb ng nh ms"/></div></div></a></div><p id="c2e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问候&amp;快乐编码，<br/>托拜厄斯</p></div></div>    
</body>
</html>