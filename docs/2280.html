<html>
<head>
<title>Azure B2C: Customize Layouts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure B2C:自定义布局</h1>
<blockquote>原文：<a href="https://itnext.io/azure-b2c-customize-layouts-8559688237f5?source=collection_archive---------4-----------------------#2019-04-29">https://itnext.io/azure-b2c-customize-layouts-8559688237f5?source=collection_archive---------4-----------------------#2019-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6c01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在帖子<a class="ae kl" href="https://elanderson.net/2019/04/asp-net-core-with-azure-b2c-auth/" rel="noopener ugc nofollow" target="_blank">ASP.NET核心与Azure B2C认证</a>中，我们做了一个设置Azure B2C基础的演练，并创建了一个使用我们新的B2C认证设置的新应用程序。这篇文章将使用相同的设置来展示如何用你自己的自定义页面替换微软提供的注册/登录页面。</p><h2 id="0360" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">自定义页面托管</h2><p id="4d61" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">我们的自定义页面需要与<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank"> CORS </a>启用公共场所托管。如果测试应用程序托管在某个公共的地方，我们可以直接使用它，但是因为它运行在localhost上，所以这不是当前的选项。在这个例子中，我们将使用Azure Blob存储进行托管。</p><p id="f962" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建存储帐户</p><p id="23f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<a class="ae kl" href="https://portal.azure.com" rel="noopener ugc nofollow" target="_blank"> Azure门户</a>选择<strong class="jp ir">存储账户</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/e1055d1064039bae2b9ca17698b77c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/0*PAz1BQJnwt0F5iHR.png"/></div></figure><p id="4bab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">添加</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/36976df9af81a07b6af5cac74847fbdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/format:webp/0*JYTiynlhr_AZkFZh.png"/></div></figure><p id="b5fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，在<strong class="jp ir">创建存储帐户</strong>页面上，我使用了一个新的<strong class="jp ir">资源组</strong>并尝试了<strong class="jp ir">存储帐户名称</strong>，直到我找到一个未使用的。对于其余的字段，我采用默认值，然后单击<strong class="jp ir"> Review + create </strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lt"><img src="../Images/919c73b60a8e5159775da17f22f55b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eguMw-RHyS8vKikk.png"/></div></div></figure><p id="6bcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在“查看+创建”页面上，需要几秒钟来验证帐户。确认后，点击<strong class="jp ir">创建</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/ed659b5facd61e70882db20f7c9999e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/0*dgfGFWN4FrJMrJ6h.png"/></div></figure><p id="489a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">存储部署完成后，单击<strong class="jp ir">转到资源</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/21792333e7c6f706c5814f6f4114f037.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/0*JkaQGidOtWrnat_X.png"/></div></figure><p id="e237" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设置Blob存储</p><p id="b031" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以上将带您进入新存储客户的概述页面。从菜单中选择<strong class="jp ir"> CORS </strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/aa710d77733656ad3fda01270647fde4.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/0*7DYJVaaGJ5RsFs_U.png"/></div></figure><p id="458a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为这只是一个测试，所以我允许<strong class="jp ir"> Blob服务</strong>下的所有内容，对于真正的部署，我建议只允许您期望请求的值。设置好数值后，点击<strong class="jp ir">保存</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/0f90704dae6676edfe5c64e897a1deb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/0*5fRxmEwLZvQPugkg.png"/></div></figure><p id="e779" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到屏幕右侧的存储菜单，选择<strong class="jp ir">斑点</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/4c652ec7df7b5adb0247bdfb85761567.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/0*x0U06UWTsKMNtvAa.png"/></div></figure><p id="5fbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir"> +容器</strong>按钮创建一个新的blob存储容器。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi md"><img src="../Images/21151fdcf67e0180806f6cf5333a90fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/0*RHfe3UzrbdVYNgOj.png"/></div></figure><p id="841d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在新容器中，page输入一个<strong class="jp ir">名</strong>并选择你的<strong class="jp ir">公共访问级别</strong>。我选择最宽松的访问级别，对于生产系统，您需要评估适合您的用例的访问级别。完成后点击<strong class="jp ir">确定</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi me"><img src="../Images/3be33dd50e29ef0c1bbb13ed20281932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/0*Je_ScGyhgP_xoJE6.png"/></div></figure><p id="984f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成后，您将返回到您的容器列表。单击刚刚创建的容器以查看详细信息。</p><p id="53aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建自定义页面</p><p id="c1c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了blob存储，我们需要创建一个HTML页面来代替默认页面。下面是我将要使用的页面的代码。这将是超级丑陋的，因为我不会使用任何造型。</p><pre class="ll lm ln lo gt mf mg mh mi aw mj bi"><span id="0f94" class="km kn iq mg b gy mk ml l mm mn">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Custom Page!&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;h1&gt;Custom Page!&lt;/h1&gt;<br/>    &lt;div id="api"&gt;&lt;/div&gt; <br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="bd22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以让这个页面看起来像你想要的那样，但是它总是需要带有API ID的div，因为Azure将在这里注入实际处理注册/登录的元素。保存您的页面。</p><p id="509a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将自定义页面上载到blob存储</p><p id="4e6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到Azure点击<strong class="jp ir">上传</strong>按钮，然后选择你的文件，点击<strong class="jp ir">上传</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/02ae3564f757d738549a38f283563a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/0*zrmHw64_reTqout4.png"/></div></figure><p id="1ffe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上传后，您将返回到当前容器中的项目列表。单击您刚刚创建的项目。在细节复制的网址，因为我们将需要它给B2C的位置，我们的自定义页面。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/57286f4935044b37989341d4e51accd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/0*YWvxWlHgyRcHmzlX.png"/></div></figure><p id="5cb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">B2C使用自定义页面</p><p id="546a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的门户中，返回Azure广告B2C页面，选择<strong class="jp ir">用户流</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/52727da0087e4fd0e6838b9ed82ee6d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/0*Ia4G8isPdtlVGfJa.png"/></div></figure><p id="51c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择要使用自定义页面的流程。在我们的例子中，我们将使用<strong class="jp ir">注册和登录</strong>的流程。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/9eb16150bc16e06f547e6e41a91ef118.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/0*X1_7wBSW7uZFKEbF.png"/></div></figure><p id="8f7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir">自定义</strong>部分选择<strong class="jp ir">页面布局</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/192122fb37beb232d6aa73286b106be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/0*yq8BmW28L5aBF61Y.png"/></div></figure><p id="aae9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面底部选择<strong class="jp ir">Yes</strong>for<strong class="jp ir">Use custom page content</strong>并将上面指向您的blob的链接粘贴到<strong class="jp ir">custom page URI</strong>字段，然后单击<strong class="jp ir"> Save </strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/9a02db4cab9f453a24aeb4ee0f31489e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/0*hfkanndCFZHydNcW.png"/></div></figure><p id="4cfd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尝试一下</p><p id="8180" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成上述所有设置后，您现在可以使用B2C返回应用程序，点击您的登录链接，您将看到您的自定义页面。这是样本中的一个的样子。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/225c4be9f4de78937f38e90aa71463ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/0*ZGJYH4uS7p-zOH4c.png"/></div></figure><p id="0658" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显然，这个例子很难看，你不会对你的用户这样做，但是它给了你如何使用定制页面的基本概念。</p><h2 id="117c" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="7af5" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">希望以上能帮助你开始定制你的B2C相关页面，给你的用户一个更一致的外观和感觉。上面只上传了一个HTML页面到blob存储器，但是你也可以上传一个CSS文件或者你需要的任何其他资源。此外，不要忘记，如果你的网站是公开访问的资产可以与你的应用程序的其余部分存储在适当的，只是记得配置CORS允许来自Azure的请求。</p><p id="38db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想了解更多关于这个话题的信息，请查阅微软关于这个话题的官方文件。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="9581" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nb">原载于</em> <a class="ae kl" href="https://elanderson.net/2019/04/azure-b2c-customize-layouts/" rel="noopener ugc nofollow" target="_blank"> <em class="nb">埃里克·l·安德森</em> </a> <em class="nb">。</em></p></div></div>    
</body>
</html>