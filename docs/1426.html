<html>
<head>
<title>Facebook Login Using AWS Amplify and Amazon Cognito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Amplify和Amazon Cognito登录脸书</h1>
<blockquote>原文：<a href="https://itnext.io/facebook-login-using-aws-amplify-and-amazon-cognito-4acf74875a04?source=collection_archive---------2-----------------------#2018-10-11">https://itnext.io/facebook-login-using-aws-amplify-and-amazon-cognito-4acf74875a04?source=collection_archive---------2-----------------------#2018-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jn jo jp jq"><div class="bz fp l di"><div class="jr js l"/></div></figure><p id="bb4e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><em class="kr">更新(2018年12月11日):更新了客户端代码，以反映针对iOS (2.7.0+)和AWS Amplify的AWS SDK的最新auth更改。</em></p><p id="f96c" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">我们将继续构建我们的移动认证机制，允许您的用户在支持iOS云的应用中进行认证。在本文中，我们将把<a class="ae ks" href="https://developers.facebook.com/docs/facebook-login" rel="noopener ugc nofollow" target="_blank"> <strong class="jv ir">脸书登录</strong> </a>集成到我们的iOS应用中。在上一篇文章“使用AWS Amplify和Amazon Cognito的iOS基本认证”中，我们使用Amazon Cognito用户池来管理我们的应用程序用户目录，每个用户都创建了一个新帐户，并使用自己的用户名/密码进行认证，这是您的应用程序所独有的。</p><p id="aeae" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">借助脸书登录集成，同一个用户无需通过Cognito用户池创建新账户，只需在您的应用中选择脸书登录按钮，并使用其脸书凭据通过脸书进行身份验证，同时保持在您的应用流程中。</p><h2 id="5108" class="kt ku iq bd kv kw kx dn ky kz la dp lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">提供脸书登录和用户名/密码选项？</h2><p id="7737" class="pw-post-body-paragraph jt ju iq jv b jw lm jy jz ka ln kc kd ke lo kg kh ki lp kk kl km lq ko kp kq ij bi translated">对于大多数应用程序，开发者应该提供一个独特的用户名/密码认证选项，以及一个社交身份登录，如脸书、谷歌或Twitter。为什么？首先，不是每个人都有脸书或社交媒体账户。其次，那些有账户的人可能不愿意把他们的脸书账户和你的应用关联起来。第三，大多数用户不想再创建一个他们不记得的密码。</p><h2 id="f2f7" class="kt ku iq bd kv kw kx dn ky kz la dp lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">开始</h2><p id="740b" class="pw-post-body-paragraph jt ju iq jv b jw lm jy jz ka ln kc kd ke lo kg kh ki lp kk kl km lq ko kp kq ij bi translated">要将脸书登录集成到您的iOS应用中，我们需要您的脸书应用中的应用ID。当我们通过AWS Amplify CLI配置第三方身份验证时，我们将使用脸书应用程序ID。然后，我们将把AWS Mobile SDK与脸书嵌入式SDK集成在一起，以实现更好的开发者集成。</p><h2 id="bf27" class="kt ku iq bd kv kw kx dn ky kz la dp lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">配置脸书应用程序并获取应用程序ID</h2><p id="3046" class="pw-post-body-paragraph jt ju iq jv b jw lm jy jz ka ln kc kd ke lo kg kh ki lp kk kl km lq ko kp kq ij bi translated">注意:创建脸书应用程序的创建和配置步骤是不断变化的，因此请始终参考脸书的官方设置说明。我将当前的流程总结为4个简单的步骤。</p><p id="1565" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">首先，登录<a class="ae ks" href="https://developers.facebook.com/" rel="noopener ugc nofollow" target="_blank">脸书开发者门户</a>。</p><p id="81a2" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">第1步—添加新的脸书应用程序</p><blockquote class="lr ls lt"><p id="c1ab" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">如果您没有注册任何应用程序，请单击绿色的大友好按钮<strong class="jv ir">添加新应用程序</strong>。</p><p id="c603" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">如果你已经注册了一个应用，点击<strong class="jv ir">我的应用</strong>菜单，然后<strong class="jv ir">添加新应用</strong>。</p></blockquote><p id="b8d0" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">创建应用程序后，选择<strong class="jv ir">脸书登录</strong>设置卡。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/f4e3baa848fc75c05af2ef4c0f6f795e.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*qX28OcHDgGgEwTKJdLfd_A.png"/></div></figure><p id="c1e2" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">第2步—选择iOS快速入门。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/db541aeb15d728f2a347d490d9a56e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8AtS_7_tMxcGpQ5EULlfA.png"/></div></div></figure><p id="debb" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">第3步—添加您的捆绑包标识符</p><p id="6da7" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">快速入门包括9个步骤。<strong class="jv ir">仅使用您的捆绑包标识符更新步骤#2，并跳过所有其他步骤</strong>,因为Amplify CLI和AWS Mobile SDK将完成其余工作。</p><p id="3c86" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">第4步—复制应用程序ID</p><p id="173f" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">从脸书门户的当前应用中复制<strong class="jv ir">应用ID </strong>并保存以备后用。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mj"><img src="../Images/f06e7027fa54b7642cfcbb92c3e51f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I7w5zo_1J4f7-YCmwvkjFg.png"/></div></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="ac83" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">使用Amplify CLI从本地项目文件夹初始化云后端</strong></p><p id="fa1a" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">从您的本地环境中，创建或使用您选择的现有Xcode iOS Swift项目，然后在您的iOS项目文件夹的根目录中启动Mac终端。现在，我们将使用下面的Amplify命令初始化我们的AWS后端项目。</p><pre class="ly lz ma mb gt mr ms mt mu aw mv bi"><span id="84b4" class="kt ku iq ms b gy mw mx l my mz">$ amplify init</span></pre><p id="62f3" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">将指导您完成设置项目的过程。<strong class="jv ir">确保在适当的时候选择iOS</strong>。</p><p id="f11e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来，让我们向移动项目添加经过身份验证的访问。我们将遵循AWS文档中的<a class="ae ks" href="https://docs.aws.amazon.com/aws-mobile/latest/developerguide/add-aws-mobile-user-sign-in.html" rel="noopener ugc nofollow" target="_blank">电子邮件&amp;密码</a>选项选项卡中概述的相同流程。</p><pre class="ly lz ma mb gt mr ms mt mu aw mv bi"><span id="b45e" class="kt ku iq ms b gy mw mx l my mz">$ amplify add auth</span></pre><p id="5de8" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">由于我们没有选择默认设置，这里是我在应用程序中使用的值。大多数是您通过输入的默认值，其他的，您有机会命名您的资源。</p><p id="ee5b" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">对于下面的配置，我将通过用户池添加基本身份验证和脸书登录，因为这更容易一步完成，而且为您的用户提供基本登录和社交登录选项也很好。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi na"><img src="../Images/9f19021516cd3d54369427b132d3e6d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lnBGzon45u6Aueu3XrzPSA.png"/></div></div></figure><p id="9df9" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">将本地配置更改推送到您的AWS帐户</p><pre class="ly lz ma mb gt mr ms mt mu aw mv bi"><span id="dfae" class="kt ku iq ms b gy mw mx l my mz">$ amplify push</span></pre><p id="87ea" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">如果你想了解更多关于<em class="kr"> amplify init和amplify add auth </em>的信息，请参阅我之前的博客<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/basic-authentication-for-ios-using-aws-amplify-and-amazon-cognito-233b943222d4">中的内容。</a></p><p id="0c74" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">我们现在有了一个认知用户池、身份池、授权和未授权IAM角色，以及作为身份认证提供商的脸书。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nb"><img src="../Images/29613bf6eb770f5d9806bdb47b6c7764.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-Hq5GYWQ6-pCdSP1TQFhw.png"/></div></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="5997" class="nc ku iq bd kv nd ne nf ky ng nh ni lb nj nk nl le nm nn no lh np nq nr lk ns bi translated">在我们的iOS应用程序中设置脸书登录身份验证</h1><p id="3600" class="pw-post-body-paragraph jt ju iq jv b jw lm jy jz ka ln kc kd ke lo kg kh ki lp kk kl km lq ko kp kq ij bi translated">我们现在要将脸书元数据和URL方案添加到我们iOS项目的info.plist中，添加AWS Mobile SDK依赖项，并为auth集成<em class="kr"> AWSMobileClient </em>，然后实现Mobile SDK提供的auth UI。</p><p id="c0dc" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">将脸书元数据和URL方案添加到您的Xcode项目中<em class="kr"> info.plist: </em> </strong></p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nt"><img src="../Images/b1fa4b65603b1a26aa4ee6ac87517af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOkYjN3iFeGxJ4ZfhPFRHA.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated"><a class="ae ks" href="https://gist.github.com/mobilequickie/0c31f3d59eb93336289b212606fbfb79" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/mobile quickie/0 c 31 f 3d 59 EB 93336289 b 212606 fbfb 79</a></figcaption></figure><p id="870e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">设置AWS Mobile SDK依赖项(Cocoapods) </strong></p><p id="8a5d" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">在这个例子中，我将使用Cocoapods进行依赖管理，因为这是目前推荐的将AWS SDK集成到iOS项目中的方法。关于<a class="ae ks" href="https://cocoapods.org/" rel="noopener ugc nofollow" target="_blank">椰子</a>的更多信息。如果你的应用中还没有pod，你可以简单地运行一个<em class="kr"> $ pod init </em>，它会为你创建一个新的pod文件。有了Podfile之后，向该文件添加以下依赖项。</p><pre class="ly lz ma mb gt mr ms mt mu aw mv bi"><span id="d41a" class="kt ku iq ms b gy mw mx l my mz">$ pod init</span></pre><p id="c53d" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">在您的<em class="kr"> Podfile </em>中，向该文件添加以下依赖项。这包括对1的依赖。Cognito用户池(基本授权)和2。脸书登录和3。用于在一个界面中对用户池和脸书进行身份验证的嵌入式身份验证用户界面。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ny"><img src="../Images/29cf6b45106b0845912c90dd47893a0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhkCKH2D_74IcyUZgJyCcA.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated"><a class="ae ks" href="https://gist.github.com/mobilequickie/7647c7959897cb39d41cb1c26c494809" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/mobile quickie/7647 c 7959897 CB 39d 41 CB 1c 1 c 26 c 494809</a></figcaption></figure><p id="ae02" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">将SDK库引入您的项目:</p><pre class="ly lz ma mb gt mr ms mt mu aw mv bi"><span id="026c" class="kt ku iq ms b gy mw mx l my mz">$ pod install --repo-update</span></pre><p id="b0e5" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">将awsconfiguration.json文件集成到您的iOS项目中</strong></p><p id="0b35" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">当使用AWS Amplify CLI提供后端资源时，它会在iOS Xcode项目的根目录中生成一个名为<em class="kr"> awsconfiguration.json </em>的文件。该文件包含可通过应用程序访问的资源的描述，并在Amplify工具链添加、更新或删除资源时与项目同步。这种配置文件的自动更新是使用Amplify CLI从您的本地移动开发环境中提供AWS资源的巨大好处之一。</p><blockquote class="lr ls lt"><p id="c385" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">您只需要将awsconfiguration.json文件添加到Xcode项目中一次。您可以通过将它拖到Xcode项目管理器中的Finder来完成此操作。</p></blockquote><p id="727f" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">如果要复制文件，系统会提示您。<strong class="jv ir">取消勾选复制项目框</strong>。当情况发生变化时，AWS Amplify CLI会更新该文件。如果您选中目标框，那么您的项目在被复制时可能不会收到更新。如果取消选中该框，则每当您通过Amplify CLI修改项目资源时，该文件都会更新。</p><p id="3690" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">在ViewController中初始化AWSMobileClient</strong></p><p id="cebc" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">在您希望用户注册或登录的根UIViewController或相关屏幕中，添加下图中引用的以下代码:</p><blockquote class="lr ls lt"><p id="dc78" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">1.添加第2行的导入</p><p id="526d" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">2.将<strong class="jv ir">initializeAWSMobileClient()</strong>调用添加到viewDidLoad()的底部，如<strong class="jv ir">第9行</strong>所示</p><p id="6c7a" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">3.将第12–45行的新函数<strong class="jv ir">initializeAWSMobileClient()</strong>添加到视图控制器中。</p></blockquote><p id="2f80" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">注意:showSignIn()函数尚不存在。我们将在下一步中添加它。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nz"><img src="../Images/02ec5c83894fd3919d55857d6effb0f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDZc-I2iOW5PsV-5rrFmjg.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated"><a class="ae ks" href="https://gist.github.com/dennisAWS/8fba1d9dc738141452ceeb9f98992f40" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/dennisAWS/8 FBA 1d 9 DC 738141452 ceeb 9 f 98992 f 40</a></figcaption></figure><p id="3def" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">将插件Auth UI添加到您的ViewController </strong></p><p id="d651" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">将showSignIn()函数添加到与上面相同的视图控制器中。这是允许您的用户注册、登录和重置密码的插件式身份验证用户界面。您可以自定义背景颜色和图像，以匹配您的品牌。当用户注销或用户的刷新令牌过期时，将调用此函数。注意:脸书的刷新令牌通常在60天内有效，没有任何活动，用户池刷新令牌是特定于开发人员的，从1天到365天。</p><blockquote class="lr ls lt"><p id="2724" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">将第12–23行的新函数<strong class="jv ir"> showSignIn() </strong>添加到视图控制器中。</p></blockquote><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/10be938d85bf1d128f361598c411d511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cpyY2GsqodUyOlFjh1H_rw.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated"><a class="ae ks" href="https://gist.github.com/dennisAWS/30e43e3ba8ab7df79a5fe85973d7543e" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/dennisAWS/30 e 43 e 3 ba 8 ab 7 df 79 a5 Fe 85973d 7543 e</a></figcaption></figure><p id="d041" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">警告。需要UINavigationController:auth UI是AWS Mobile SDK的一部分，它要求您的应用程序具有UINavigationController。</p><p id="eee3" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">若要将UINavigationController添加到您的应用程序(如果不存在):</p><blockquote class="lr ls lt"><p id="414d" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated">将UINavigationController添加到您的iOS应用程序:从您的Xcode项目中，选择Storyboard中的ViewController，然后选择菜单选项:</p><p id="ec88" class="jt ju kr jv b jw jx jy jz ka kb kc kd lu kf kg kh lv kj kk kl lw kn ko kp kq ij bi translated"><em class="iq">编辑</em>-&gt;-<em class="iq">嵌入</em>-&gt;-<em class="iq">导航控制器。</em></p></blockquote><p id="9e48" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">构建并运行您的应用</strong></p><p id="b513" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">您应该看到AWS SDK为您的应用程序预建的登录UI，因为用户最初没有经过身份验证。iOS SDK提供了一个标准的默认UI，现在允许用户通过脸书登录<strong class="jv ir">以及<strong class="jv ir">注册(注册)</strong>，触发<strong class="jv ir">忘记密码</strong>功能，当然还有内置的<strong class="jv ir">登录</strong>功能以及默认用户名/电子邮件和密码字段。</strong></p><p id="5e2d" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">点击<strong class="jv ir">继续脸书</strong>按钮。然后，用户被重定向，并被要求使用他们的脸书凭据登录。一旦通过验证，UI对话框将会消失，您现在应该会看到您的视图控制器屏幕。</p><figure class="ly lz ma mb gt jq gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/f753a4f4eb9b5a80279238afae0140b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*s7ySiYlRP-AO_7i_6EbKDA.png"/></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated">AWS Mobile SDK —用户池和脸书的授权用户界面</figcaption></figure><p id="c68a" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">此时，应用程序用户通过脸书进行了身份验证，现在的用户<strong class="jv ir">担任经过身份验证的IAM角色</strong>，并被授予与该角色相关的权限，但是，该角色仍然有一个空访问策略。当用户通过Cognito用户池使用用户名/密码进行身份验证时，我们也经历了同样的过程。这一次，用户通过脸书认证为Cognito身份池的身份提供者。</p><p id="218e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><strong class="jv ir">最后的想法</strong></p><p id="606c" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">Amazon Cognito是所有连接到AWS资源的移动应用的认证和未认证流的默认选择。如果您不需要登录或使用任何其他身份提供者，如脸书，请使用cogn ITO Federated Identities(<strong class="jv ir">cogn ITO Identity Pool</strong>)。</p><p id="fc42" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">对于通过脸书进行身份验证的用户，mobile SDK会将经过身份验证的用户令牌传递(并充当身份管理器)到您的Cognito身份池，以换取该用户调用您的AWS资源的临时AWS凭据。然后，用户访问由<strong class="jv ir"> IAM认证角色</strong>定义。如果用户不进行身份验证，Cognito Identity Pool仍然授予AWS凭证，并且用户的访问由<strong class="jv ir"> IAM未验证角色</strong>定义。</p><p id="bc1f" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">是时候转向谷歌认证了！</p><h2 id="2914" class="kt ku iq bd kv kw kx dn ky kz la dp lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">资源</h2><p id="0545" class="pw-post-body-paragraph jt ju iq jv b jw lm jy jz ka ln kc kd ke lo kg kh ki lp kk kl km lq ko kp kq ij bi translated"><a class="ae ks" href="https://aws-amplify.github.io/media/toolchain?utm_source=da&amp;utm_medium=blog&amp;utm_campaign=denhills&amp;utm_term=ios_native" rel="noopener ugc nofollow" target="_blank"> AWS Amplify </a>(使用Amplify CLI来支持我们的应用程序)</p><p id="ce32" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><a class="ae ks" href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html" rel="noopener ugc nofollow" target="_blank">亚马逊认知用户池</a>(用于基本认证)</p><p id="cf62" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated"><a class="ae ks" href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html" rel="noopener ugc nofollow" target="_blank">亚马逊认知身份池</a>(用于联合基本认证和脸书登录)</p></div></div>    
</body>
</html>