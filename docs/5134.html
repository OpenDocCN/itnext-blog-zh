<html>
<head>
<title>React-static app deployment and CI — Tutorial Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">react-静态应用部署和CI —教程第二部分</h1>
<blockquote>原文：<a href="https://itnext.io/react-static-app-deployment-and-ci-tutorial-part-ii-4b5df0946db2?source=collection_archive---------10-----------------------#2020-12-17">https://itnext.io/react-static-app-deployment-and-ci-tutorial-part-ii-4b5df0946db2?source=collection_archive---------10-----------------------#2020-12-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/bc0aadd601de09f827a7f5119dd82648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*VGCg8TlgrqogTQFVPlkpaw.png"/></div></figure><p id="ed1d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">02使用Firebase和CI的反应-静态-应用程序</p><p id="e4d0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">由于我们已经准备好部署我们的<a class="ae ks" href="https://chrkaatz.medium.com/bootstrap-your-app-with-react-static-and-grommet-fac9c137cc31" rel="noopener">成品应用</a>，我们将把它部署到来自Github的firebase with Continuous Integration(CI ),并且每当我们创建一个Pull请求时也创建预览分支，以便我们可以验证最新的更改。</p><h1 id="8508" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Firebase设置</h1><p id="138c" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">如果你还没有在firebase.google.com<a class="ae ks" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">的账户，就创建一个免费的Firebase账户。</a></p><p id="fafa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦你在你的仪表板上，创建一个新项目，并给它一个有意义的名字——我叫我的:应用程序-引导-教程，在这个阶段，我现在禁用谷歌分析，因为我只是想使用托管功能。</p><h1 id="0072" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">装置</h1><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="81f8" class="mf ku iq mb b gy mg mh l mi mj">$ npm install -g firebase-tools</span></pre><p id="7ecb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下一步，我们需要用firebase登录，并在项目的根目录中初始化项目:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="10be" class="mf ku iq mb b gy mg mh l mi mj">$ firebase login<br/>$ firebase init<br/><br/>You're about to initialize a Firebase project in this directory:<br/><br/>  /Users/ckaatz/development/static-app-tutorial<br/><br/>? Which Firebase CLI features do you want to set up for this folder? Press Space to sele<br/>ct features, then Enter to confirm your choices. Hosting: Configure and deploy Firebase <br/>Hosting sites<br/><br/>=== Project Setup<br/><br/>First, let's associate this project directory with a Firebase project.<br/>You can create multiple project aliases by running firebase use --add, <br/>but for now we'll just set up a default project.<br/><br/>? Please select an option: Use an existing project<br/>? Select a default Firebase project for this directory: app-bootstrap-tutorial (app-boot<br/>strap-tutorial)<br/>i  Using project app-bootstrap-tutorial (app-bootstrap-tutorial)<br/><br/>=== Hosting Setup<br/><br/>Your public directory is the folder (relative to your project directory) that<br/>will contain Hosting assets to be uploaded with firebase deploy. If you<br/>have a build process for your assets, use your build's output directory.<br/><br/>? What do you want to use as your public directory? /dist<br/>? Configure as a single-page app (rewrite all urls to /index.html)? Yes<br/>? Set up automatic builds and deploys with GitHub? Yes<br/>? File /dist/index.html already exists. Overwrite? No<br/>i  Skipping write of /dist/index.html<br/><br/>i  Detected a .git folder at /Users/ckaatz/development/static-app-tutorial<br/>i  Authorizing with GitHub to upload your service account to a GitHub repository's secrets store.<br/><br/>Visit this URL on this device to log in:<br/>https://github.com/login/oauth/authorize?client_id=&lt;REDACTED&gt;<br/><br/>Waiting for authentication...<br/><br/>✔  Success! Logged into GitHub as chrkaatz<br/><br/>? For which GitHub repository would you like to set up a GitHub workflow? (format: user/<br/>repository) chrkaatz/static-app-tutorial<br/><br/>✔  Created service account github-action-XYZ with Firebase Hosting admin permissions.<br/>✔  Uploaded service account JSON to GitHub as secret FIREBASE_SERVICE_ACCOUNT_APP_BOOTSTRAP_TUTORIAL.<br/><br/>? Set up the workflow to run a build script before every deploy? Yes<br/>? What script should be run before every deploy? yarn &amp;&amp; yarn build<br/><br/>✔  Created workflow file /Users/ckaatz/development/static-app-tutorial/.github/workflows/firebase-hosting-pull-request.yml<br/>? Set up automatic deployment to your site's live channel when a PR is merged? Yes<br/>? What is the name of the GitHub branch associated with your site's live channel? main<br/><br/>✔  Created workflow file /Users/ckaatz/development/static-app-tutorial/.github/workflows/firebase-hosting-merge.yml<br/><br/>i  Action required: Visit this URL to revoke authorization for the Firebase CLI GitHub OAuth App:<br/>https://github.com/settings/connections/applications/&lt;REDACTED&gt;<br/>i  Action required: Push any new workflow file(s) to your repo<br/><br/>i  Writing configuration info to firebase.json...<br/>i  Writing project information to .firebaserc...<br/><br/>✔  Firebase initialization complete!</span></pre><p id="de96" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最好的情况是，我们将在一个特性分支中这样做，以测试firebase的预览功能。一旦<a class="ae ks" href="https://github.com/chrkaatz/static-app-tutorial/pull/1" rel="noopener ugc nofollow" target="_blank"> PR </a>被创建，我们将看到Github Actions将开始创建一个预览部署并看到它的url。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/0449683e1d90c8a3932414159a8e21fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBbTT2oVGosbwiU9tZ3Llw.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">拉式请求检查</figcaption></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mt"><img src="../Images/a50d81e652750712673bbe970da34473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V35hFsVYJH5gcJViZ5-Riw.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">运行后预览可用的URL</figcaption></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mu"><img src="../Images/12436043d0d1a2fb4d649d1798f8e6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwpydIoLZuSJvfq-Cr2yIQ.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">也可以在Github操作中找到</figcaption></figure><h1 id="949c" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">海峡群岛</h1><p id="01b3" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">在我们验证了pull请求之后，我们<a class="ae ks" href="https://github.com/chrkaatz/static-app-tutorial/actions/runs/426750576" rel="noopener ugc nofollow" target="_blank">合并</a>它，合并工作流将开始将变更从我们的特性分支部署到生产中。我的可以在<a class="ae ks" href="https://app-bootstrap-tutorial.web.app/" rel="noopener ugc nofollow" target="_blank">app-bootstrap-tutorial . web . app</a>找到</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mv"><img src="../Images/115960f506175ea0ae7d045de3fdd882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gE_9FO9WCGBcQgfjgV2s2w.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">合并后部署</figcaption></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mw"><img src="../Images/0894c3af81b0138de4ff0fe99dd3b335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7iN6qkVHiZmwckejWjKEug.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">Firebase版本概述</figcaption></figure><h1 id="428a" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">附加提示</h1><p id="9c06" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">我建议您将可用于回滚的版本限制在一个可行的数量(我选择了10个)，因为它还会占用firebase上的免费存储空间的预算。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mx"><img src="../Images/f99bece402e4f29a3f6899e259e6fe28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mjoJfgZ7KEiXskc4wzdktQ.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">访问存储设置</figcaption></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi my"><img src="../Images/1bb1afdd2ad110fc6a2b152abe46f386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ltkD1dzfig7NcZhEjlOWyA.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">限制为10</figcaption></figure><p id="1826" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在本教程的下一部分，我们将为我们的应用程序添加PWA ( <a class="ae ks" href="https://en.wikipedia.org/wiki/Progressive_web_applications" rel="noopener ugc nofollow" target="_blank">渐进式web应用程序</a>)功能。</p><h1 id="8cd0" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">密码</h1><p id="128e" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">代码可以在Github<a class="ae ks" href="https://github.com/chrkaatz/static-app-tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/chrkaatz/static-app-tutorial</a>找到，每个教程步骤都有各自的提交和标签与之关联。这一个被标记为<a class="ae ks" href="https://github.com/chrkaatz/static-app-tutorial/releases/tag/02-React-Static-Firebase-and-CI" rel="noopener ugc nofollow" target="_blank">02-反应-静态-火灾基础-和-CI </a>。</p><h1 id="7c4a" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">辅导的</h1><ol class=""><li id="0ac5" class="mz na iq jw b jx lr kb ls kf nb kj nc kn nd kr ne nf ng nh bi translated"><a class="ae ks" href="https://chrkaatz.medium.com/bootstrap-your-app-with-react-static-and-grommet-fac9c137cc31" rel="noopener">第一部分——使用react-static和索环引导您的应用程序</a></li><li id="bc49" class="mz na iq jw b jx ni kb nj kf nk kj nl kn nm kr ne nf ng nh bi translated"><a class="ae ks" href="https://chrkaatz.medium.com/react-static-app-deployment-and-ci-tutorial-part-ii-4b5df0946db2" rel="noopener"> <strong class="jw ir">第二部分—React-静态app部署和CI </strong> </a></li><li id="3762" class="mz na iq jw b jx ni kb nj kf nk kj nl kn nm kr ne nf ng nh bi translated"><a class="ae ks" href="https://chrkaatz.medium.com/react-static-pwa-tutorial-part-iii-ed91e0fa1d10" rel="noopener">第三部分—反应-静态PWA </a></li><li id="f780" class="mz na iq jw b jx ni kb nj kf nk kj nl kn nm kr ne nf ng nh bi translated"><a class="ae ks" href="https://chrkaatz.medium.com/react-static-app-testing-with-cypress-tutorial-part-iv-ad1ad4612fc1" rel="noopener">第四部分——使用Cypress进行React-static app测试</a></li></ol></div></div>    
</body>
</html>