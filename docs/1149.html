<html>
<head>
<title>Beautify your Golang project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">美化您的Golang项目</h1>
<blockquote>原文：<a href="https://itnext.io/beautify-your-golang-project-f795b4b453aa?source=collection_archive---------0-----------------------#2018-07-31">https://itnext.io/beautify-your-golang-project-f795b4b453aa?source=collection_archive---------0-----------------------#2018-07-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2f8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">组织你的golang项目和代码</p><p id="465d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我的上一篇文章中，我创建了一个服务，它是无组织的，只面向初学者。我的动机是提供一个创建REST服务的基本概念，并一步一步地前进。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/568ae9b6b99eba2c44308fab36b37387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vK1rtSjZ33WXtjwr0jLD8g.jpeg"/></div></div></figure><p id="55b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你不熟悉我以前的帖子，你可以通过下面的链接了解功能。这并不难检查一瞥，或者如果你以前有关于建立web API服务的知识，那么你可以处理。</p><div class="la lb gp gr lc ld"><a rel="noopener  ugc nofollow" target="_blank" href="/building-restful-web-api-service-using-golang-chi-mysql-d85f427dee54"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd iu gy z fp li fr fs lj fu fw is bi translated">使用Golang、chi和MySQL构建RESTful web API服务</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">使用go创建您的第一个REST API</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">itnext.io</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr ky ld"/></div></div></a></div><p id="a4ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本教程中，我将展示如何组织一个项目。组织你的代码是很重要的，因为当你想改变你以前代码的一些逻辑时，那么结构良好的项目可以很容易地采用这些改变，并且节省时间。虽然关于项目结构有不同的观点，但我更喜欢4层的结构。您可以从这里替换或修改任何内容。</p><pre class="kp kq kr ks gt ls lt lu lv aw lw bi"><span id="dea9" class="lx ly it lt b gy lz ma l mb mc">project/<br/>    model/<br/>    repository/<br/>    handler/<br/>    driver/<br/>    main.go</span></pre><h2 id="6874" class="lx ly it bd md me mf dn mg mh mi dp mj kb mk ml mm kf mn mo mp kj mq mr ms mt bi translated"><strong class="ak">车型</strong></h2><p id="d41c" class="pw-post-body-paragraph jq jr it js b jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn im bi translated">这一层将存储我们的所有模型结构，并由所有其他层使用。现在我们将移动models/post.go文件上的<code class="fe mz na nb lt b">post</code>模型结构。如果我们有另一个像<code class="fe mz na nb lt b">author</code>这样的模型，那么这些模型也将包含在这一层中。我们还添加了error.go文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nc"><img src="../Images/11d5f19239bd73cdead335b0c9064ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBftTKHMgyj8hP_v3MItnQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">发布模型</figcaption></figure><p id="8983" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">error.go包含您新创建的错误。详情<a class="ae nh" href="https://github.com/s1s1ty/go-mysql-crud/blob/master/models/errors.go" rel="noopener ugc nofollow" target="_blank">你可以在这里</a>了解。</p><h2 id="4aed" class="lx ly it bd md me mf dn mg mh mi dp mj kb mk ml mm kf mn mo mp kj mq mr ms mt bi translated">仓库</h2><p id="6436" class="pw-post-body-paragraph jq jr it js b jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn im bi translated">存储库负责与数据库相关的工作，例如查询、插入/存储或删除。这里没有实现任何业务逻辑。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nc"><img src="../Images/63caf1814dc64818cfe9a106a51eec3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LQXhUFA06pANnEMIj5KM-A.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">回购后</figcaption></figure><p id="9510" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我创建了repository.go进入repository文件夹。这个文件包含了所有与你的存储库相关的接口。如果我们有一个额外的域，例如author或其他，那么接口中的所有author方法都包含在这里。</p><p id="c5b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你注意到上图的左边，我已经创建了一个名为post的文件夹。我们将在<code class="fe mz na nb lt b">post/post_mysql.go</code>文件上实现我们的接口。后缀为什么是MySQL？因为如果我们有另一个数据库用于post repository，如mongo或redis，那么我们将包含post_mongo.go(无论您怎么称呼)并实现mongo相关的查询。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="d291" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">post_mysql.go必须满足PostRepo接口。如果我们想添加任何额外的方法，那么我们必须将它包含到接口中，并在post_mysql.go文件中实现它。</p><h2 id="7307" class="lx ly it bd md me mf dn mg mh mi dp mj kb mk ml mm kf mn mo mp kj mq mr ms mt bi translated">处理者</h2><p id="8fc2" class="pw-post-body-paragraph jq jr it js b jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn im bi translated">基本上，处理程序文件夹可以信任存储库，因为这一层决定了将使用哪个存储库层。任何流程都在这里办理。该层接受请求，调用存储库层，满足业务流程并发送响应。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="066e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">处理程序层还包含几个协议实现，如RPC、REST等，并与不同的文件夹隔离。</p><h2 id="a120" class="lx ly it bd md me mf dn mg mh mi dp mj kb mk ml mm kf mn mo mp kj mq mr ms mt bi translated">驾驶员</h2><p id="11c6" class="pw-post-body-paragraph jq jr it js b jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn im bi translated">在我们的结构中，驱动程序层由我们所有的数据库连接来描述。这一层负责与数据库连接，并将连接对象发送到控制器。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="eb4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里，我们将使用main.go代替控制器，因为我们的服务只有一个包含CRUD操作的域。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="685e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从我们的main.go，我们将提供所有的数据库凭证，并与数据库连接。我们在docker-compose文件中提供的环境变量中读取DB凭据。我们也在这里保持我们所有的路线，但是你可以隔离它。</p><h2 id="f095" class="lx ly it bd md me mf dn mg mh mi dp mj kb mk ml mm kf mn mo mp kj mq mr ms mt bi translated">示例项目</h2><p id="c31f" class="pw-post-body-paragraph jq jr it js b jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn im bi translated">您可以在此查看示例项目<a class="ae nh" href="https://github.com/s1s1ty/go-mysql-crud" rel="noopener ugc nofollow" target="_blank"/></p><pre class="kp kq kr ks gt ls lt lu lv aw lw bi"><span id="0622" class="lx ly it lt b gy lz ma l mb mc"><a class="ae nh" href="https://github.com/s1s1ty/go-mysql-crud" rel="noopener ugc nofollow" target="_blank">https://github.com/s1s1ty/go-mysql-crud</a></span></pre><p id="47f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我也鼓励你添加测试文件。同样，任何设计都不像圣经，我们必须根据我们的项目定义、业务逻辑等来实现它。</p><h2 id="78f0" class="lx ly it bd md me mf dn mg mh mi dp mj kb mk ml mm kf mn mo mp kj mq mr ms mt bi translated">最后</h2><p id="6ea2" class="pw-post-body-paragraph jq jr it js b jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn im bi translated">你可以通过下面的链接了解更多关于这个话题的信息。</p><ul class=""><li id="4d7a" class="nk nl it js b jt ju jx jy kb nm kf nn kj no kn np nq nr ns bi translated"><a class="ae nh" href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank">https://8 thlight . com/blog/uncle-bob/2012/08/13/the-clean-architecture . html</a></li><li id="bda8" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated"><a class="ae nh" href="http://blog.ralch.com/tutorial/design-patterns/golang-design-patterns/" rel="noopener ugc nofollow" target="_blank">http://blog . ral ch . com/tutorial/design-patterns/golang-design-patterns/</a></li><li id="8147" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated"><a class="ae nh" href="https://hackernoon.com/golang-clean-archithecture-efd6d7c43047" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/golang-clean-architecture-EFD 6d 7 c 43047</a></li><li id="8448" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">可以看鲍勃大叔的一个视频，很搞笑。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nj l"/></div></figure><blockquote class="nz oa ob"><p id="5df0" class="jq jr oc js b jt ju jv jw jx jy jz ka od kc kd ke oe kg kh ki of kk kl km kn im bi translated">任何与这篇文章相关的问题，你都可以在评论区或linkedin上问我</p></blockquote><p id="2d51" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，如果你注意到我犯的任何错误，你可以在下面的评论区给我发邮件。也可以在我的GitHub <a class="ae nh" href="https://github.com/s1s1ty/go-mysql-crud" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">资源库</strong> </a> <strong class="js iu">上给我发PR。</strong></p></div></div>    
</body>
</html>