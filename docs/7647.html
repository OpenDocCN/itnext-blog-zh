<html>
<head>
<title>App Bar and Navigation Drawer in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jetpack Compose中的应用程序栏和导航抽屉</h1>
<blockquote>原文：<a href="https://itnext.io/app-bar-and-navigation-drawer-in-jetpack-compose-dc799417e459?source=collection_archive---------0-----------------------#2022-12-08">https://itnext.io/app-bar-and-navigation-drawer-in-jetpack-compose-dc799417e459?source=collection_archive---------0-----------------------#2022-12-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/be4969918815b46a510159f5c125c38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_NDmTOo3ud8WhIQhJR5epg.png"/></div></div></figure><h2 id="0db4" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">开始之前</h2><p id="203c" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">如果你不知道Jetpack Compose中的导航是如何工作的，我建议你先看看这篇博客。</p><div class="lp lq gp gr lr ls"><a href="https://burakdev.medium.com/navigation-with-arguments-in-jetpack-compose-bb98999aa49f" rel="noopener follow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd ir gy z fp lx fr fs ly fu fw ip bi translated">在Jetpack撰写中使用参数导航</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">在Jetpack Compose中使用参数导航非常简单。您可以轻松地在可组合视图之间导航。</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">burakdev.medium.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg jw ls"/></div></div></a></div><h2 id="8777" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">目录</h2><ul class=""><li id="ac11" class="mh mi iq kw b kx ky lb lc kh mj kl mk kp ml lo mm mn mo mp bi translated"><a class="ae mq" href="#e21a" rel="noopener ugc nofollow">应用程序栏</a></li><li id="ebb9" class="mh mi iq kw b kx mr lb ms kh mt kl mu kp mv lo mm mn mo mp bi translated"><a class="ae mq" href="#cc41" rel="noopener ugc nofollow">导航抽屉</a></li><li id="7b32" class="mh mi iq kw b kx mr lb ms kh mt kl mu kp mv lo mm mn mo mp bi translated"><a class="ae mq" href="#3241" rel="noopener ugc nofollow">搜索应用栏</a></li></ul><h1 id="79fc" class="mw jz iq bd ka mx my mz kd na nb nc kg nd ne nf kk ng nh ni ko nj nk nl ks nm bi translated">开始获取</h1><blockquote class="nn no np"><p id="f1a7" class="ku kv nq kw b kx nr kz la lb ns ld le nt nu lg lh nv nw lj lk nx ny lm ln lo ij bi translated">顶部应用程序栏提供与当前屏幕相关的内容和操作。它用于品牌、屏幕标题、导航和动作。欲了解更多信息，您可以点击<a class="ae mq" href="https://m2.material.io/components/app-bars-top" rel="noopener ugc nofollow" target="_blank">链接。</a></p><p id="ee35" class="ku kv nq kw b kx nr kz la lb ns ld le nt nu lg lh nv nw lj lk nx ny lm ln lo ij bi translated">导航抽屉提供对目的地和应用程序功能的访问，如切换帐户。它们可以永久显示在屏幕上，也可以由导航菜单图标控制。</p></blockquote><p id="5eb5" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">在这篇博客中，我们将实现应用程序栏，以前的工具栏，和导航抽屉。</p><h1 id="e21a" class="mw jz iq bd ka mx my mz kd na nb nc kg nd ne nf kk ng nh ni ko nj nk nl ks nm bi translated">先说App Bar</h1><figure class="nz oa ob oc gt jr"><div class="bz fp l di"><div class="od oe l"/></div></figure><figure class="nz oa ob oc gt jr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/17d044b1f4c5f1e1f4a38ea14485cf0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*nyT82AkDc3TJ-x6vO4k9ow.png"/></div></figure><p id="2a71" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">现在，我们已经创建了我们的<code class="fe og oh oi oj b">TopAppBar</code>,让我们检查一下每个参数的作用。</p><p id="a800" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">navigationIcon</code>显示在应用程序栏的开头。这应该是典型的<code class="fe og oh oi oj b">IconButton</code>。</p><p id="4e3d" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">actions</code>显示在应用程序栏的末尾。像<code class="fe og oh oi oj b">navigationIcon</code>，这个大多是<code class="fe og oh oi oj b">IconButton</code>。默认情况下，<code class="fe og oh oi oj b">actions</code>中的布局是<code class="fe og oh oi oj b">Row</code>，因此您可以设置多个<code class="fe og oh oi oj b">IconButton</code>。</p><p id="d5a2" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">title</code>显示在应用程序栏的中央。我们通常使用<code class="fe og oh oi oj b">Text</code>，但是我们也可以使用不同的可组合视图。</p><p id="0403" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">App Bar到此为止。</p><h1 id="cc41" class="mw jz iq bd ka mx my mz kd na nb nc kg nd ne nf kk ng nh ni ko nj nk nl ks nm bi translated">导航抽屉时间！</h1><figure class="nz oa ob oc gt jr"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="0c34" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">让我们一部分一部分来，首先我们创建了<code class="fe og oh oi oj b">scaffoldState</code>和<code class="fe og oh oi oj b">coroutineScope</code>对象。你可以阅读下面的文字，看看我们为什么需要这些。</p><p id="cf10" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><strong class="kw ir">别忘了把</strong> <code class="fe og oh oi oj b"><strong class="kw ir">scaffoldState</strong></code> <strong class="kw ir">递到脚手架上。处理抽屉状态很重要。</strong></p><blockquote class="nn no np"><p id="83e8" class="ku kv nq kw b kx nr kz la lb ns ld le nt nu lg lh nv nw lj lk nx ny lm ln lo ij bi translated">以编程方式打开和关闭抽屉是通过<code class="fe og oh oi oj b"><a class="ae mq" href="https://developer.android.com/reference/kotlin/androidx/compose/material/ScaffoldState" rel="noopener ugc nofollow" target="_blank"><em class="iq">ScaffoldState</em></a></code>完成的，它包括一个<code class="fe og oh oi oj b"><a class="ae mq" href="https://developer.android.com/reference/kotlin/androidx/compose/material/DrawerState" rel="noopener ugc nofollow" target="_blank"><em class="iq">DrawerState</em></a></code>属性，该属性应该通过<code class="fe og oh oi oj b"><em class="iq">scaffoldState</em></code>参数传递给<code class="fe og oh oi oj b"><em class="iq">Scaffold</em></code>。<code class="fe og oh oi oj b"><em class="iq">DrawerState</em></code>提供对<code class="fe og oh oi oj b"><a class="ae mq" href="https://developer.android.com/reference/kotlin/androidx/compose/material/DrawerState#open" rel="noopener ugc nofollow" target="_blank"><em class="iq">open</em></a></code>和<code class="fe og oh oi oj b"><a class="ae mq" href="https://developer.android.com/reference/kotlin/androidx/compose/material/DrawerState#close" rel="noopener ugc nofollow" target="_blank"><em class="iq">close</em></a></code>功能的访问，以及与当前抽屉状态相关的属性。这些暂停函数需要一个<code class="fe og oh oi oj b"><em class="iq">CoroutineScope</em></code>——例如，使用<code class="fe og oh oi oj b"><a class="ae mq" href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary#remembercoroutinescope" rel="noopener ugc nofollow" target="_blank"><em class="iq">rememberCoroutineScope</em></a></code>——并且可以在响应UI事件时被调用。</p></blockquote><p id="e54e" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">在我们的<code class="fe og oh oi oj b">Scaffold</code>中，我们在<code class="fe og oh oi oj b">drawerContent</code>中设置抽屉的内容。这部分大部分由你自己决定，你可以根据自己的需求来改变。</p><p id="ef0e" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">drawerGesturesEnabled</code>用于抽屉页是否可以手势交互。</p><figure class="nz oa ob oc gt jr gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/45396940adccc39f08d53a499fde08e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*5vbFtNxHLDyifnJA7t3wOQ.png"/></div></figure><p id="799a" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">这就是我们的用户界面。我们已经完成了UI，所以让我们检查一下如何打开抽屉。</p><figure class="nz oa ob oc gt jr"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="2da8" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">我们已经创建了应用程序栏并设置了<code class="fe og oh oi oj b">navigationIcon</code>，但是<code class="fe og oh oi oj b">onClick</code>方法为空。现在我们将添加上面的代码，它将打开我们的抽屉。由于<code class="fe og oh oi oj b">open</code>和<code class="fe og oh oi oj b">close</code>方法是挂起函数，我们需要<code class="fe og oh oi oj b">launch</code>和<code class="fe og oh oi oj b">courutineScope</code>在里面调用那些函数。</p><p id="0a6b" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">就是这样！现在，我们有功能的应用程序栏和导航抽屉。</p><h1 id="3241" class="mw jz iq bd ka mx my mz kd na nb nc kg nd ne nf kk ng nh ni ko nj nk nl ks nm bi translated">号外！如何实现搜索App栏？</h1><p id="b82a" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">这其实很简单，但有点棘手。我们需要利用国家。</p><p id="2644" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">首先，我们将创建enum类来处理搜索应用程序栏状态。</p><pre class="nz oa ob oc gt ol oj om bn on oo bi"><span id="14d2" class="op jz iq oj b be oq or l os ot">enum class SearchWidgetState {<br/>    OPENED,<br/>    CLOSED<br/>}</span></pre><p id="bf8e" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">现在我们可以在App Bar的类中创建我们的mutableState对象。</p><pre class="nz oa ob oc gt ol oj om bn on oo bi"><span id="3df9" class="op jz iq oj b be oq or l os ot">var searchWidgetState by remember{ mutableStateOf(SearchWidgetState.CLOSED) }<br/>var searchTextState by remember { mutableStateOf("") }</span></pre><p id="80a1" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">searchWidgetState</code>是管理搜索应用栏的状态。</p><p id="7f61" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">searchTextState</code>是获取/设置搜索文本。</p><figure class="nz oa ob oc gt jr"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="2772" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">在我们的<code class="fe og oh oi oj b">topBar</code>中，我们检查<code class="fe og oh oi oj b">searchWidgetState</code>值并据此显示应用程序栏。要打开<code class="fe og oh oi oj b">SearchAppBar</code>，我们只需将<code class="fe og oh oi oj b">searchWidgetState</code>改为<code class="fe og oh oi oj b">SearchWidgetState.OPENED</code></p><p id="3219" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">现在，让我们检查一下<code class="fe og oh oi oj b">SearchAppBar</code>功能。</p><figure class="nz oa ob oc gt jr"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="0974" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">我们没有使用TopAppBar，因为我们需要更多的灵活性和定制。所以在我们的<code class="fe og oh oi oj b">Surface</code>中，我们有<code class="fe og oh oi oj b">TextField</code>，它需要从用户那里获得输入。我强烈建议您将<code class="fe og oh oi oj b">singleLine</code>设置为true，将<code class="fe og oh oi oj b">maxLines</code>设置为1，以防止多行输入。</p><p id="86c8" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">在<code class="fe og oh oi oj b">onValueChange</code>内部，我们将<code class="fe og oh oi oj b">searchTextState</code>的值设置为用户输入。每当用户输入或删除一些东西时，这个就会被更新。</p><p id="6d29" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated"><code class="fe og oh oi oj b">trailingIcon</code>有1个按钮，用于取消搜索。这个实现取决于你，我更喜欢先检查<code class="fe og oh oi oj b">searchTextState</code>是否为空，这意味着用户是否输入了任何东西。如果有，我们将把<code class="fe og oh oi oj b">searchTextState</code>设置为空字符串，否则我们将把<code class="fe og oh oi oj b">searchWidgetState</code>改为<code class="fe og oh oi oj b">SearchWidgetState.CLOSED</code>并显示我们的主应用程序栏。</p><p id="b0c9" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">就是这样。我希望这是有用的，如果你有任何问题，请随时询问。👋👋</p><figure class="nz oa ob oc gt jr"><div class="bz fp l di"><div class="ou oe l"/></div></figure><p id="e65c" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">来源:</p><ul class=""><li id="9984" class="mh mi iq kw b kx nr lb ns kh ov kl ow kp ox lo mm mn mo mp bi translated"><a class="ae mq" href="https://developer.android.com/jetpack/compose/layouts/material" rel="noopener ugc nofollow" target="_blank">材料成分和布局</a></li><li id="4343" class="mh mi iq kw b kx mr lb ms kh mt kl mu kp mv lo mm mn mo mp bi translated"><a class="ae mq" href="https://m2.material.io/components/app-bars-top/android" rel="noopener ugc nofollow" target="_blank">应用程序栏</a></li><li id="750f" class="mh mi iq kw b kx mr lb ms kh mt kl mu kp mv lo mm mn mo mp bi translated"><a class="ae mq" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#TopAppBar" rel="noopener ugc nofollow" target="_blank">文档</a></li></ul></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><p id="432a" class="pw-post-body-paragraph ku kv iq kw b kx nr kz la lb ns ld le kh nu lg lh kl nw lj lk kp ny lm ln lo ij bi translated">你可以联系我，</p><ul class=""><li id="4748" class="mh mi iq kw b kx nr lb ns kh ov kl ow kp ox lo mm mn mo mp bi translated"><a class="ae mq" href="https://www.linkedin.com/in/burak-fidan/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="e7e5" class="mh mi iq kw b kx mr lb ms kh mt kl mu kp mv lo mm mn mo mp bi translated"><a class="ae mq" href="https://github.com/MrNtlu" rel="noopener ugc nofollow" target="_blank"> Github </a></li><li id="fc91" class="mh mi iq kw b kx mr lb ms kh mt kl mu kp mv lo mm mn mo mp bi translated"><a class="ae mq" href="https://twitter.com/BurakFNtlu" rel="noopener ugc nofollow" target="_blank">推特</a></li></ul></div></div>    
</body>
</html>