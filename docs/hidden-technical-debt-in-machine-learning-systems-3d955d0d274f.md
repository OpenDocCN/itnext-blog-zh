# 机器学习系统中隐藏的技术债务

> 原文：<https://itnext.io/hidden-technical-debt-in-machine-learning-systems-3d955d0d274f?source=collection_archive---------3----------------------->

机器学习系统很棒。目前正在使用许多形状和形式的机器学习算法。不同的聚类模型如 k-means，预测方法如 trees，或更高级的深度学习方法都有技术债务。在传统的软件工程中，技术债务有明显的味道。除了“传统的”软件工程问题，机器学习系统也面临新的挑战。以下段落介绍了在机器学习系统中发现的不同技术债务。

![](img/cc0e946639f84dcdd290bd45d8efc4b3.png)

在 [Unsplash](https://unsplash.com/s/photos/software?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的 [ThisisEngineering RAEng](https://unsplash.com/@thisisengineering?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

# 1.包装

不同软件组件的隔离被认为是一个好的实践。封装对象通过派生未来的变化(不管它们的目标是什么)使代码维护更容易。

**纠缠**
机器学习模型天生就与数据耦合。不同的特征对模型的影响不同。如果单个特征的输入分布发生变化，那么模型输出也容易发生变化。该模型将所有输入相互关联，因此没有任何输入是真正独立的。要解决此问题，建议监控模型的输入要素和输出，以注意随时间发生的变化。如果其中任何一个发生变化，这可能是一个指标，表明是时候更新模型了。

**校正级联**
有时模型并不按照我们想要的方式运行。为了解决这个问题，我们可以添加拟合、校准、试探法或阈值。这些修补程序可以堆积在一个修正层中，该层隐藏了模型无法正确处理的特殊情况。随着层的增加，将模型与其周围的所有东西区分开来变得更加困难。改善系统的小部分可能会导致全球性的损害。解决这个问题的方法是创建一个模型来纠正一切，而不是在上面耦合几个层。

**未声明的客户**
一般来说，谁可以使用模型的输出是没有限制的。通过允许不同的系统使用一个模型的输出，可能会产生意想不到的和很难理解的依赖。有时可能会出现隐藏的反馈循环。为了防止这种更严格的限制，应该设置访问权限来跟踪使用依赖关系。

# 2.数据依赖性

代码依赖可以通过静态分析来研究。但是，没有类似的数据分析工具。这可能导致难以解开的依赖链的累积。

**不稳定的数据依赖性**
数据可以从另一个机器学习系统中消耗，该系统可以随时间而改变。源模型提供了一个结果分布，当模型更新时，结果分布会发生变化。如果是这样的话，下游的车型都会受到影响。这增加了识别变更来源的复杂性。一个解决方案是跟踪每个模型的版本，并专门标记每个模型。然而，这反过来又增加了随着时间的推移维护几个信号的复杂性。

**未充分利用的数据相关性**
未充分利用的数据相关性是给模型带来很少改善的输入信号。此外，这些信号的变化会对最终结果产生意想不到的影响。一个特性在过去是有意义的，但是现在，在没有真正被使用的情况下，它仍然在模型中。导致问题的未充分利用的输入的其他影响可能是相关特征或捆绑特征。以模型复杂性和开销为代价，包含了带来边际性能提升但相关性不明确的特性。

**数据依赖的静态分析**
和传统代码一样，有工具可以对数据进行静态分析。这对于跟踪更改、迁移和强制更新(如果需要)是必不可少的。这可以进行自动检查，以确保正确解析正确的依赖关系树。

# 3.反馈回路

机器学习模型通常会随着时间的推移影响自己的行为。一个隐修会，很难评估它会对模型产生多大的影响。这些反馈循环很难评估和解决，尤其是当它随着时间的推移而发生时。

**直接反馈循环**
模型直接影响自己未来的训练数据。解决这个问题的方法之一是应用随机化。另一种方法是保持部分数据不变。

**隐藏的反馈回路**
直接反馈回路很难识别和修复，隐藏的反馈回路更是如此。隐藏的系统由两个或更多的系统组成，它们通过现实世界相互影响。例如，两家不同的投资公司开发了两种不同的投资算法。他们的行为都受到对方的紧密影响，并可能影响对方的买卖行为。

# 4.机器学习系统反模式

尽管看起来很有趣，但是任何 ML 模型都只是所需代码的一小部分。所有的数据预处理、过滤和后处理都是必需的，但往往没有得到充分重视。

**胶水代码**
将整个系统打包成一个解决方案会抑制改进。这使得单独分析、更新和调整零件变得更加困难。

**管道丛林**
当新的信号和信息源被发现并被随意添加时，就会出现这种反模式。

**死的实验代码路径**
在生产代码中，创建新的执行分支来测试新的假设或者用新的方法进行实验是很常见的。然而，随着时间的推移，这产生了需要废弃的代码复杂性，否则，它会导致致命的错误。定期检查所有分支并删除不使用的分支是良好的编码实践。

抽象债务
在 ML 社区中似乎没有关于正确抽象的共识。Map-reduce 开始成为主要的抽象；然而，参数服务器模式似乎更健壮。

**常见气味**
多语言气味。如果可能的话，避免在同一系统中使用不同的语言。否则，增加了它的复杂性。当生产系统从小原型开始扩展时，就会产生原型气味。原型并不总是反映真实的全尺寸系统。

# 配置债务

机器学习系统的技术债务可能隐藏在配置中。大型系统有许多配置选项，如算法学习设置、预处理和后处理方法、验证程序等。很容易出现配置错误，这至少会导致计算能力的浪费，甚至更糟糕的生产错误。应检测并移除多余的 or 设置。理想情况下，人们可以很容易地想象不同的配置如何影响系统。

# 应对外部世界的变化

机器学习系统通常被开发来与现实世界进行交互。这是有代价的。与现实世界互动的代价是，现实世界的数据显示出很少的稳定性，并且有可能发生变化。

**动态系统中的固定阈值**
通常阈值是手动选择的。然而，这非常耗时并且不可扩展。选择阈值的最佳方法是设置拒绝验证来自动调整值。

**监控与测试**
单元测试用于软件开发，但对于机器学习系统来说很难。如果系统打算随着时间的推移适应新的输入分布，则无法预测固定值。如上所述，可以监控值的输入和输出分布，并在它们发生变化时发出警告。如果发生重大变化，可能值得重新访问，如果有必要，更新系统。也可以设置一些手动限制。防止交易算法将所有资金投资于一只股票，或者防止它将账面价格设定到荒谬的水平，这可能是有意义的。

# ML 相关债务的其他领域

**数据测试债务**
如前所述，至少测试数据中的离群值对于系统的良好运行至关重要。数据分布评估的更高级的方法对于更微妙的变化是有用的。

**再现性债务**
再现性对于现实世界中的 ML 系统使用非常重要。一旦开发完成，模型的表现应该与开发阶段的真实数据相似。

**流程管理债务**
随着系统数量的增加，手动管理变得更加耗时。因此，尝试简化和消除手动步骤并创建更精简的管道非常重要。

**文化债**
工程部门和研究部门之间不应该有硬性的界限。他们应该互动和合作。这有助于降低系统复杂性并提高可重复性；从而导致长期更好的系统健康。

我希望这篇文章能帮助你注意到在 ML 系统中遇到的债务类型，以及如何避免或至少最小化它。

*【1】斯卡利 d .、霍尔特 g .、戈洛文 d .、达维多夫 e .、菲利普斯 t .、埃布纳 d .、乔德里 v .、杨 m .、克雷斯波 J.F. &丹尼森 D. (2015)。机器学习系统中隐藏的技术债务。神经信息处理系统进展，28，2503–2511。*

你喜欢吗？我也在我的 [*个人博客*](https://rocreguant.com/) *上发布视频。你有问题吗？在*[*Twitter*](https://twitter.com/rocreguant)*或*[*LinkedIn*](https://www.linkedin.com/in/rocreguant/)*上打我。本故事最初发表于*[*https://rocreguant . com/hidden-technical-debt-in-machine-learning-systems-paper-summary/2088/*](https://rocreguant.com/hidden-technical-debt-in-machine-learning-systems-paper-summary/2088/)