<html>
<head>
<title>PURE CODE Programmatic Auto Layout with NSLayoutConstraint &amp; UICollectionView &amp; UIStackView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NSLayoutConstraint &amp; UICollectionView &amp; UIStackView的纯代码编程自动布局</h1>
<blockquote>原文：<a href="https://itnext.io/pure-code-programmatic-auto-layout-with-nslayoutconstraint-uicollectionview-uistackview-763009c7c14c?source=collection_archive---------2-----------------------#2019-02-26">https://itnext.io/pure-code-programmatic-auto-layout-with-nslayoutconstraint-uicollectionview-uistackview-763009c7c14c?source=collection_archive---------2-----------------------#2019-02-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/a4249704dfe9957f34005433490d88fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*gP8EJ3To6m0R9Cwi9txnFw.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">照片由Alexandru Acea 提供</figcaption></figure><p id="3ce0" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">如果你厌倦了故事板和框架，你来对地方了。</p><h1 id="8f60" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">资源</h1><p id="7117" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated"><a class="ae mb" href="https://github.com/Maxnelson997/ProgrammaticAutoLayoutwithNSLayoutConstraintYouTubeVideo" rel="noopener ugc nofollow" target="_blank"> <strong class="kc ir">给我密码</strong> </a></p><p id="e2d5" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">通过maxcodes YouTube频道观看这篇文章的视频。T9】</p><h1 id="e4d8" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">左边的这个是我们正在建造的。用纯代码。</h1><p id="9b2e" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">纯代码，就像，只有代码。没有故事板，没有框架，没有废话。</p><p id="85a4" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">所以请阅读下面的内容&amp;让我们开始行动吧！。</p><h1 id="1e0f" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤1-应用程序设置✅</h1><p id="9ef4" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">从一个空的单视图应用程序开始。</p><p id="3993" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">这段代码将覆盖故事板，现在我们已经以编程方式设置了我们的应用程序。将此放入appDelegate.swift文件中。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mc"><img src="../Images/a867aac12689d16cefa3332057ac35b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lg6xztfFQXYjhwQpO5CNVA.png"/></div></div></figure><h1 id="6b3e" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤2-在子视图层次结构✅中用NSLayoutConstraint约束集合视图</h1><p id="bf02" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">在本文中我不会过多解释集合视图。如果您想了解更多关于集合视图的信息，请阅读这篇文章。</p><p id="2fa3" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">然而，我想解释一下这些限制。这就是你如何在没有故事板的情况下做自动布局，这就是你如何用纯代码做自动布局！</p><h2 id="1dfd" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated">说明</h2><p id="8adb" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">要让它工作，您必须添加UIView，在本例中，是将UICollectionView添加到一组子视图中。如果您在将视图添加到视图层次结构之前尝试并激活约束，应用程序将会崩溃，因为如果它不在屏幕上，您就不能约束它。</p><h2 id="f1aa" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated">暗喻</h2><p id="9a85" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">换一种说法:你不能把你的手放在别人的手上，除非他们和你一起在房间里。房间是UIView子视图层次结构，我们的手是顶部、底部、前导或尾随NSLayoutConstraint。</p><h2 id="dc76" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated">约束</h2><p id="a8e6" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">现在，我们有了一个高度为400磅的受约束UICollectionView，以及将其附加到UINavigationController头底部和viewController视图侧面的约束。</p><div class="md me mf mg gt ab cb"><figure class="mx jr my mz na nb nc paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><img src="../Images/ed076b5b50f5419d97a8dff9d4e70398.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*zgXemJgd84QfF_NhI20Xcg.png"/></div></figure><figure class="mx jr nd mz na nb nc paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><img src="../Images/d995f33ec21ff9f441fb1b15845dd595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1434/format:webp/1*qhxfUscIZ9eeosBXjkDXKg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk ne di nf ng translated">将集合视图添加到我们的视图控制器的主视图子视图层次结构中，并激活这些约束。</figcaption></figure></div><h1 id="c9fd" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤3-集合视图委托和数据源方法✅</h1><p id="0837" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">我不会解释这些方法，因为这不是本文的重点。然而，我会在我的YouTube频道上的视频中解释它。无论哪种方式，只需将下面代码放入您的项目中。</p><h2 id="ef85" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated">在集合视图单元格中约束UIImageView的实例。</h2><p id="9d24" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">您还可以看到，在创建imageView之后，我们将它约束到单元格中。这里唯一需要记住的关键事情是。</p><ol class=""><li id="ff7c" class="nh ni iq kc b kd ke kh ki kl nj kp nk kt nl kx nm nn no np bi translated"><strong class="kc ir">将translatesautoresizigmaksintoconstraints设置为false。</strong></li><li id="3dd5" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx nm nn no np bi translated"><strong class="kc ir">在激活约束之前，将受约束的视图添加到子视图层次结构中。</strong></li><li id="8c6e" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx nm nn no np bi translated"><strong class="kc ir">给你的项目添加图片。如果你愿意。</strong> <a class="ae mb" href="https://unsplash.com/@alexacea" rel="noopener ugc nofollow" target="_blank"> <strong class="kc ir">我这里的</strong> </a> <strong class="kc ir">是从</strong><a class="jy jz ep" href="https://medium.com/u/6819467be7b0?source=post_page-----763009c7c14c--------------------------------" rel="noopener" target="_blank"><strong class="kc ir">Alexandru Acea</strong></a><strong class="kc ir">免费得到的。</strong></li></ol><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nv"><img src="../Images/6f77bd493fcdee61846e2f7ff6cf639f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*quczijfyi7kz4vrJPNl3Cg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">集合视图方法和UIImageView自动布局约束</figcaption></figure><h1 id="5c0f" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">很快的。第3步继续。✅</h1><ol class=""><li id="9b27" class="nh ni iq kc b kd lw kh lx kl nw kp nx kt ny kx nm nn no np bi translated"><strong class="kc ir">改变我们的集合视图的背景颜色以清除</strong></li><li id="3a5a" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx nm nn no np bi translated"><strong class="kc ir">将collection.dataSource和collection.delegate设置为self，这样这些方法将为我们的UICollectionView运行。</strong></li></ol><h2 id="4213" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated"><strong class="ak"> <em class="nz">这是你在模拟器里应该看到的。</em>T25】</strong></h2><div class="md me mf mg gt ab cb"><figure class="mx jr oa mz na nb nc paragraph-image"><img src="../Images/93c28d348075d71fd880b5d192f615c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*eVsJCfNrnY9eiHrlAUf4Jg.png"/></figure><figure class="mx jr ob mz na nb nc paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><img src="../Images/1671f5f5eaf97c00624dff5863d5c685.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*n9KOPdW4B1ZRlO8uM2byAA.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk oc di od ng translated">清理&amp; cv数据源/委托方法激活</figcaption></figure></div><h1 id="7764" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤4-向UIStackView ✅添加标签</h1><p id="79e6" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">堆栈视图在每个项目中都很方便，尤其是如果你正在构建一个只有代码的全功能应用程序。这可以说是创建iOS应用程序的最佳方式。</p><p id="0292" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">将此代码添加到您的ViewController.swift的setupUI函数中，位于您的所有collectionView约束的正下方。</p><div class="md me mf mg gt ab cb"><figure class="mx jr oe mz na nb nc paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><img src="../Images/9daa2b573f8f327c11b5faf3b39f92cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*tQNQwTChCmY3ZGG4F1tDRQ.png"/></div></figure><figure class="mx jr of mz na nb nc paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><img src="../Images/0ffc96f042fc8de95b542f80f43bf661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*1ymkb3qI5wh4-WUIhd40Xw.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk og di oh ng translated">ViewController.swift中的setupUI函数</figcaption></figure></div><p id="b680" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">所以，还是老样子</p><ol class=""><li id="7d41" class="nh ni iq kc b kd ke kh ki kl nj kp nk kt nl kx nm nn no np bi translated"><strong class="kc ir">将translatesAutoresizingMaskIntoConstraints设置为false </strong></li><li id="a9c9" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx nm nn no np bi translated"><strong class="kc ir">添加到子视图层次</strong></li><li id="126c" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx nm nn no np bi translated"><strong class="kc ir">创建约束并激活它们</strong></li></ol><h1 id="c478" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">应用程序完成✅</h1><p id="096b" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">你现在知道如何；</p><ul class=""><li id="5a80" class="nh ni iq kc b kd ke kh ki kl nj kp nk kt nl kx oi nn no np bi translated"><strong class="kc ir">从appDelegate而不是storyboards/info.plist设置应用</strong></li><li id="9f7a" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx oi nn no np bi translated"><strong class="kc ir">以编程方式使用自动布局约束。</strong></li><li id="7588" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx oi nn no np bi translated"><strong class="kc ir">子视图层次内的约束视图</strong></li><li id="34a3" class="nh ni iq kc b kd nq kh nr kl ns kp nt kt nu kx oi nn no np bi translated"><strong class="kc ir">使用UICollectionView、UICollectionViewDataSource和UICollectionViewDelegateFlowLayout方法。✅ </strong></li></ul><h1 id="b13b" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">更多资源—高级指南。✅ ✅ ✅ ✅</h1><p id="7b5c" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">如果你想第一个听说有限的免费课程优惠券(每月10英镑)，请随时订阅我的<a class="ae mb" href="https://www.maxcodes.io" rel="noopener ugc nofollow" target="_blank"> <strong class="kc ir">每周开发内容电子邮件列表。</strong> </a></p><p id="86e5" class="pw-post-body-paragraph ka kb iq kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ij bi translated">查看我的课程，了解更多信息！我刚刚发布了一个高级Swift/iOS课程！这里有50张优惠券，专门给我的中等读者！:)</p><h1 id="40a3" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">非常感谢您的阅读！</h1><p id="b6c3" class="pw-post-body-paragraph ka kb iq kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ij bi translated">如果你喜欢这篇文章，请留下掌声，在我的社交账户上关注我。每条推文、youtube订阅、medium clap和Instagram评论都有助于我进一步帮助你完成这些文章和视频。</p><h2 id="9f04" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated"><a class="ae mb" href="http://youtube.com/maxcodes" rel="noopener ugc nofollow" target="_blank"><strong class="ak">YouTube</strong>T3】</a></h2><h2 id="7a7e" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated"><a class="ae mb" href="http://twitter.com/maxcodes1" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">碎碎念</strong> </a></h2><h2 id="04a8" class="ml kz iq bd la mm mn dn le mo mp dp li kl mq mr lm kp ms mt lq kt mu mv lu mw bi translated"><a class="ae mb" href="https://www.udemy.com/tableviews/?couponCode=MEDIUMNINE" rel="noopener ugc nofollow" target="_blank">课程</a></h2></div></div>    
</body>
</html>