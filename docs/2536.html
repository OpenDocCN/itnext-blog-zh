<html>
<head>
<title>Add Application Insights to an Existing ASP.NET Core Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将应用洞察添加到现有的ASP.NET核心应用中</h1>
<blockquote>原文：<a href="https://itnext.io/add-application-insights-to-an-existing-asp-net-core-application-40c4727147b8?source=collection_archive---------5-----------------------#2019-06-10">https://itnext.io/add-application-insights-to-an-existing-asp-net-core-application-40c4727147b8?source=collection_archive---------5-----------------------#2019-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a274" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几年来，我一直在使用Azure的应用服务来托管我正在玩的网络应用。该服务使托管应用程序变得简单。今天我决定试用<a class="ae kl" href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview" rel="noopener ugc nofollow" target="_blank">应用洞察</a>，这是Azure提供的应用性能管理(APM)服务，它与应用服务集成得非常好。事实上，您可以为您的应用服务应用启用应用洞察，而无需进行任何代码更改。</p><p id="a0ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章将介绍如何使用现有的应用服务应用，以及如何实现应用洞察。这篇文章假设你已经有一个Azure账户。如果你没有，你可以注册一个<a class="ae kl" href="https://azure.microsoft.com/en-us/free/" rel="noopener ugc nofollow" target="_blank">免费Azure账户</a>。</p><h2 id="d111" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">示例应用程序和应用程序服务创建</h2><p id="7840" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">如果你在Azure App Service中没有现有的应用程序，这里是我在这篇文章中使用的应用程序的快速浏览。如果您有现有的应用程序，可以跳到下一部分。</p><p id="8698" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从。我使用下面的命令创建了一个<strong class="jp ir"> global.json </strong>目标。NET Core 2.2放在创建应用程序的目录中。你不必做这一步，但我需要它，因为我已经做了。NET Core 3预览版，我希望这篇文章针对当前的生产版本。网芯。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="9c28" class="km kn iq lp b gy lt lu l lv lw">dotnet new globaljson --sdk-version 2.2.105</span></pre><p id="fed0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，运行以下命令，使用React模板创建一个新的ASP.NET核心应用程序。任何一个模板都可以，所以你可以随意使用不同的模板，只要它能给你一个web应用程序。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="ca24" class="km kn iq lp b gy lt lu l lv lw">dotnet new react</span></pre><p id="0c61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在在Visual Studio中打开新项目，右键单击项目文件，然后单击<strong class="jp ir"> Publish </strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/4241b5b928df81c2917331a1dc8c35d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/0*wr_e51Lj7HBQ2213.png"/></div></figure><p id="55ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择<strong class="jp ir">应用服务</strong>然后点击<strong class="jp ir">发布</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/3da89b768641955776fac2e430eec402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g1buk-775NRaa-oD.png"/></div></div></figure><p id="9bf7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个对话框是关于应用服务的设置。除了<strong class="jp ir">资源组</strong>之外，我在很大程度上采用了默认值，我确保仅为该应用程序创建一个资源组，以便于以后清理。选择所有选项后，点击<strong class="jp ir">创建</strong>。请注意，在这个屏幕上有一个设置应用洞察的选项，但是在这篇文章之后，我们将在Azure端处理这个问题。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/d86229039ea689f742a83227e47eeb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*93k6Kw0amr6tm6M9.png"/></div></div></figure><p id="5ed4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部署完成后，您的应用程序应该在浏览器中打开。</p><h2 id="608b" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">从Azure门户添加应用洞察</h2><p id="91fe" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">现在我们有了一个运行在Azure应用服务中的应用程序，我们准备添加应用程序洞察。首先进入Azure门户，从菜单中选择<strong class="jp ir">应用服务</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/66b0c5ae9ff6fa42e4f6f72f4a0eeacf.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/0*J4T5zGj_S6Tlde1P.png"/></div></figure><p id="bd22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从您的应用服务列表中选择您想要添加应用洞察的服务。从菜单中选择<strong class="jp ir">应用洞察</strong>。在详细信息中，点击<strong class="jp ir">打开站点扩展</strong>按钮，根据需要更新应用洞察扩展。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mh"><img src="../Images/702afcde2bd43954004842df51147ceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CyE_QPyrvrUoE2_h.png"/></div></div></figure><p id="4fe1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一个屏幕上，选择您希望部署应用洞察的<strong class="jp ir">位置</strong>。您可以根据构建应用程序的语言来调整要检测的内容，我只是保留了默认值。完成所有选择后，点击<strong class="jp ir">应用</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/cf3307a8753288eaec4f62b59bb5bade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/0*749ZTbvQyBgWfHFT.png"/></div></figure><p id="2f00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您单击“应用”时，您将收到一条警告，提示您的站点必须重新启动。对于一个测试应用程序来说，这没什么大不了的，但是如果您正在使用一个生产应用程序，您可能希望在一个缓慢的时期这样做。点击<strong class="jp ir">是</strong>继续。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/552ceed9cbf18182cbd7bf8ad89b1c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/0*Q2RRkYd2TK86Ehle.png"/></div></figure><p id="90b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">流程完成后，点击<strong class="jp ir">查看应用洞察数据</strong>链接，查看您的应用洞察概览。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mk"><img src="../Images/b63b2a75ddc3f31b315e93601b2ac920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p8zkRwYWqc5FlARR.png"/></div></div></figure><p id="3803" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该概述将通过失败请求、服务器响应时间、服务器请求和可用性的图表，为您提供应用程序运行情况的快速概述。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ml"><img src="../Images/b97d558a459a068a59a688e156ae8fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Rpu193lPzJCnIyQl.png"/></div></div></figure><h2 id="f5ba" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="0e6d" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">希望这将有助于您深入了解应用程序。这篇文章没有介绍Application Insights提供的许多功能，但是应该可以帮助您了解该服务提供的所有功能。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="2dc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mt">原载于</em><a class="ae kl" href="https://elanderson.net/2019/06/add-application-insights-to-an-existing-asp-net-core-application/" rel="noopener ugc nofollow" target="_blank"><em class="mt"/></a><em class="mt">。</em></p></div></div>    
</body>
</html>