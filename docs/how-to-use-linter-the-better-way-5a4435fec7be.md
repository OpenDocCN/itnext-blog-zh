# 如何使用棉绒——更好的方法

> 原文：<https://itnext.io/how-to-use-linter-the-better-way-5a4435fec7be?source=collection_archive---------1----------------------->

![](img/729f4575f23d7f234f8dd354ac3a6143.png)

来自 https://xkcd.com/1285/[的](https://xkcd.com/1285/)

linters 是帮助开发人员提高代码质量甚至发现潜在 bug 的伟大工具。它使用静态分析方法，当与 IDEs 编辑器结合时，可以提供几乎实时的反馈。开发者采用它甚至一些编程语言(例如 Golang)默认嵌入了 linter(如果出现 lint 错误，将拒绝运行)。但有时我们可能没有以最好的方式使用它，我想在这篇文章中分享我的两美分。

# 一目了然

让我们以`eslint`为例演示一下 linter 是如何工作的。当使用 linter 时，它实际上非常简单，您只需要将源代码的路径作为参数传递:

```
$ eslint src/**/*.js
```

当出现错误时，输出可能如下所示:

```
> eslint src/**/*.js 

/home/jeromewu/repos/app/src/App.js 
  10:61  error  'undefinedVar' is not defined  no-undef 

**✖ 1 problem (1 error, 0 warnings)**
```

如果幸运的话，即使出现 lint 错误，您的代码仍然可以工作(即使对于上面的例子，如果您的代码从不执行包含这个未定义变量的代码，它仍然可以工作)。但是建议修复所有 lint 错误以降低风险。

虽然 linter 很有用，但是有时候开发者可能会觉得它很烦人，因为有些 lint 规则不容易遵守，或者你的习惯与规则不同。这也是我认为一些开发者可能误解 linters 的目的的地方。

# 不要只使用棉绒，要学习棉绒规则

在我看来，linters 的目的不是找出我们代码中的问题，让我们的生活变得痛苦，而是帮助我们学习如何根据我们应用的规则来提高代码质量。所以最终的结果应该是我们(作为开发人员)能够编写无 lint 错误的代码，而不用 linters 一直提醒我们。所以对我(和我的团队)来说，linters 的典型工作流程如下:

*   无论我们使用哪种 IDE 或编辑器，安装 linter 插件来获得实时 lint 提示。
*   每当遇到一个 lint 错误，我们不明白为什么，检查网站的解释。(例如。[不-不](https://eslint.org/docs/rules/no-undef)在 eslint)
*   如果有任何规则在我们的用例中不适用，那么对某些文件关闭它或者在配置文件中完全禁用它。(是的，禁用 lint 规则完全没问题，只要您确定这一点)
*   重复上面的步骤，训练我们自己在开发过程中有越来越少的绒毛提示。

有了这样的工作流程和心态，我相信 linters 不再是你的敌人，而是帮助你提高和学习的好伙伴。

# 明智地使用 fix

我发现一些开发者滥用的一点是 linters 中的自动修复功能，对于 eslint，我们只需要在林挺提交文件时添加`--fix`:

```
$ eslint --fix src/**/*.js
```

我知道它非常有用，但最好明智地使用它，否则我们可能会失去学习和提高的机会。因此，如果可能，仅在以下情况下使用`fix`:

*   您工作的代码库不是从零开始的(也就是说，有许多代码不遵循 lint 规则)
*   您正在从一个规则集迁移到另一个规则集，这涉及到更适合自动化处理的变更(例如在 JavaScript 中，有些标准要求行尾有分号，而有些则不要求)
*   任何其他情况都会使手动代码库更新变得不值得和乏味

但是即使对于上面的任何一种情况，记住大多数 lint 修复都不是完美的，所以有时使用 lint 修复会给你的代码库带来错误。这就是为什么要使用 fix，你必须小心，并且在使用之后要做评估，回顾和测试。

我希望你觉得这篇文章有用，并随时留下你的想法作为回应，谢谢你的时间，下次见。😃