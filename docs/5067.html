<html>
<head>
<title>Fix Flutter web loading time with a loading spinner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用加载旋转器固定颤振腹板加载时间</h1>
<blockquote>原文：<a href="https://itnext.io/fix-flutter-web-loading-time-with-a-loading-spinner-c5dd36a29f5b?source=collection_archive---------1-----------------------#2020-12-02">https://itnext.io/fix-flutter-web-loading-time-with-a-loading-spinner-c5dd36a29f5b?source=collection_archive---------1-----------------------#2020-12-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="21f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Flutter Web中添加闪屏或加载微调器。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/57a34896494ad21901df72c1cc910ed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lh_ZhK9JxhRvoXdWrphXaA.png"/></div></div></figure><h1 id="b599" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">介绍</h1><p id="6616" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">除了移动应用程序之外，Flutter还引入了web支持，它可以生成使用标准web技术栈呈现的web内容:HTML、CSS和JavaScript。这样，您可以将用Dart编写的现有Flutter代码编译成一个web项目，该项目可以嵌入到浏览器中，并部署到任何web服务器上。</p><p id="d056" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在写这篇文章的时候(2020年12月)，许多标准的移动Flutter库已经增加了web支持，扩展了我们已经知道的移动应用的功能，现在是web应用。(它也有桌面应用，但这是一个完全不同的话题)</p><p id="af37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了安装Flutter web，正确安装的说明可以在他们的官方文档网站上找到。</p><h2 id="c40a" class="me lb it bd lc mf mg dn lg mh mi dp lk kb mj mk lo kf ml mm ls kj mn mo lw mp bi translated">重要的</h2><p id="ec89" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在开发过程中，web支持目前在测试版渠道中可用。这就是为什么在安装时，我们需要进行切换并启用web支持:</p><pre class="kp kq kr ks gt mq mr ms mt aw mu bi"><span id="e733" class="me lb it mr b gy mv mw l mx my">flutter channel beta<br/>flutter upgrade<br/>flutter config --enable-web</span></pre><p id="aa7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下命令将在web服务器上运行我们的web项目:</p><pre class="kp kq kr ks gt mq mr ms mt aw mu bi"><span id="6718" class="me lb it mr b gy mv mw l mx my">flutter run -d web-server</span></pre><h1 id="fe8e" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">有什么问题？</h1><p id="185c" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在运行某些视图之前，尤其是第一次构建web应用程序时，需要一段时间来加载所有内容:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mz"><img src="../Images/e02989f0046c5e580b4e1ac35495a1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sp2PlqPBIxZky9ODvAAGKA.gif"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">加载不带闪屏的Flutter web项目</figcaption></figure><p id="aee0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将使用CSS制作一个旋转器动画(可以替换为实际的闪屏),如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mz"><img src="../Images/dfe40c31fe7f0b4cd03848b94df9dfd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gS2XESTRvA-9bOEPX3iyjg.gif"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">加载带有闪屏的Flutter web项目</figcaption></figure><h1 id="bf60" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">怎么修</h1><p id="82ee" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">我们将在<strong class="js iu"> web/index.html </strong>中处理Flutter web生成的HTML文件。</p><p id="9506" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们将用下面的代码替换<strong class="js iu"> &lt;正文&gt; </strong>，这里我们只添加了一个带有加载类的Div，包含另一个div wit ha Loader类:</p><pre class="kp kq kr ks gt mq mr ms mt aw mu bi"><span id="d812" class="me lb it mr b gy mv mw l mx my">&lt;body&gt;<br/>&lt;div class="loading"&gt;<br/>  &lt;div class="loader"&gt;&lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;script src="main.dart.js" type="application/javascript"&gt;&lt;/script&gt;<br/>&lt;/body&gt;</span></pre><p id="1503" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我们在我们的&lt;头&gt;的底部添加一个<strong class="js iu"> &lt;样式&gt; </strong>标签:</p><pre class="kp kq kr ks gt mq mr ms mt aw mu bi"><span id="95c3" class="me lb it mr b gy mv mw l mx my">&lt;style&gt;<br/>    .loading {<br/>      display: flex;<br/>      justify-content: center;<br/>      align-items: center;<br/>      margin: 0;<br/>      position: absolute;<br/>      top: 50%;<br/>      left: 50%;<br/>      -ms-transform: translate(-50%, -50%);<br/>      transform: translate(-50%, -50%);<br/>    }<br/>    <br/>    .loader {<br/>      border: 16px solid #f3f3f3;<br/>      border-radius: 50%;<br/>      border: 15px solid ;<br/>      border-top: 16px solid blue;<br/>      border-right: 16px solid white;<br/>      border-bottom: 16px solid blue;<br/>      border-left: 16px solid white;<br/>      width: 120px;<br/>      height: 120px;<br/>      -webkit-animation: spin 2s linear infinite;<br/>      animation: spin 2s linear infinite;<br/>    }<br/>    <br/>    @-webkit-keyframes spin {<br/>      0% {<br/>        -webkit-transform: rotate(0deg);<br/>      }<br/>      100% {<br/>        -webkit-transform: rotate(360deg);<br/>      }<br/>    }<br/>    <br/>    <a class="ae md" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> spin {<br/>      0% {<br/>        transform: rotate(0deg);<br/>      }<br/>      100% {<br/>        transform: rotate(360deg);<br/>      }<br/>    }<br/>  &lt;/style&gt;</span></pre><p id="1714" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">搞定了。当我们用Run命令执行我们的Flutter web应用程序时，我们将能够重新加载屏幕并看到我们的视图:</p><pre class="kp kq kr ks gt mq mr ms mt aw mu bi"><span id="807c" class="me lb it mr b gy mv mw l mx my">flutter run -d web-server</span></pre><h1 id="1e76" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="75b9" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">这个视图将是移动闪屏的“网络等价物”。在Flutter web应用程序的情况下，特别是在闪屏不常见的web应用程序中，我们可以插入一个加载旋转器动画来代替闪屏，就像我们上面做的那样，以产生一种更自然的感觉。这个功能可以扩展到显示图像、执行复杂的动画和执行JS脚本。</p></div></div>    
</body>
</html>