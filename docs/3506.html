<html>
<head>
<title>Build a Compass App in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中构建一个指南针应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-compass-app-in-flutter-b49a78aa951d?source=collection_archive---------2-----------------------#2019-12-29">https://itnext.io/build-a-compass-app-in-flutter-b49a78aa951d?source=collection_archive---------2-----------------------#2019-12-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d32" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何用Dart和Flutter构建一个简单的指南针App</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cfe3c2c2a184375add0272876bfee8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hMVnfTGVnm9nTVk9U-kHQA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">模拟器上指南针应用程序的屏幕截图，0度(N)</figcaption></figure><h2 id="1665" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">介绍</h2><p id="cf28" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi mn translated">在本文中，我们将看看一个用Flutter构建的基本compass应用程序，这是一个用于跨平台UI/UX开发的流行SDK。Flutter为快速原型化新概念和想法，以及将这些原型转化为可靠的生产就绪组件和应用程序提供了强大的功能。</p><p id="bdfc" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">如果你还没有Flutter SDK，从他们的<a class="ae nb" href="https://flutter.dev/docs/get-started/install" rel="noopener ugc nofollow" target="_blank">安装页面</a>为你的操作系统抓取一个副本。这个项目的源代码可以从Github库获得。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="6a78" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">项目设置</h2><p id="f441" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">项目配置包含在标准<strong class="lw iu"> pubspec.yaml </strong>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="a691" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">对于这个项目，导入了<a class="ae nb" href="https://pub.dev/packages/flutter_compass" rel="noopener ugc nofollow" target="_blank"> flutter_compass </a>包，这是一个简单的插件，带有返回0到360°方向的事件流。这些数据将被捕获并用于旋转指南针，使其始终指向北方。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="9882" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">主应用程序文件</h2><p id="4519" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">这个简单应用程序的完整源代码可以在<a class="ae nb" href="https://gist.github.com/kenreilly/9da1b3a71cded9b21db40855fd7d212e" rel="noopener ugc nofollow" target="_blank"> lib/main.dart </a>中找到:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="1b6f" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">Dart数学库和<code class="fe nl nm nn no b">flutter_compass</code>包一起被导入。<code class="fe nl nm nn no b">CompassDemo</code>类构建了一个带有标准标题、主题和主屏幕的<code class="fe nl nm nn no b">MaterialApp</code>，它由一个带有<code class="fe nl nm nn no b">AppBar</code>的<code class="fe nl nm nn no b">Scaffold</code>和一个作为主体的<code class="fe nl nm nn no b">Compass</code>小部件的实例组成。</p><p id="bcd1" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">Compass类本身是一个<a class="ae nb" href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html" rel="noopener ugc nofollow" target="_blank"> StatefulWidget </a>的实现，这个Widget可以保留可变的<a class="ae nb" href="https://api.flutter.dev/flutter/widgets/State-class.html" rel="noopener ugc nofollow" target="_blank">状态</a>数据。这个compass类的state有一个<code class="fe nl nm nn no b">_heading</code>属性和一个用于<code class="fe nl nm nn no b">readout</code>的访问器，它以度数格式的字符串形式返回航向。<code class="fe nl nm nn no b">initState</code>方法在罗盘插件上设置了一个事件监听器，当航向改变时(即用户移动和罗盘角度改变)会调用这个监听器。当插件事件处理程序用新值调用<code class="fe nl nm nn no b">onData</code>时，<code class="fe nl nm nn no b">setState</code>被调用来更新标题并触发组件UI的重绘。</p><p id="6e62" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">使用<code class="fe nl nm nn no b">_style </code>属性上的<code class="fe nl nm nn no b">TextStyle</code>设置读数的样式，小部件的<code class="fe nl nm nn no b">build</code>方法返回一个<a class="ae nb" href="https://www.google.com/search?client=safari&amp;rls=en&amp;q=dart+custompaint&amp;ie=UTF-8&amp;oe=UTF-8" rel="noopener ugc nofollow" target="_blank"> CustomPaint </a>对象，该对象将使用<code class="fe nl nm nn no b">CompassPainter</code>作为前景绘制器来呈现标题的文本读数，以及圆规和指针。</p><p id="b8b4" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated"><code class="fe nl nm nn no b">CompassPainter</code>类是<code class="fe nl nm nn no b">CustomPainter</code>的一个实现，它接受一个<code class="fe nl nm nn no b">angle</code>参数并计算要应用于指南针的旋转(以弧度为单位)。_brush访问器返回一个新的Paint对象，该对象用作要扩展的默认画笔。<code class="fe nl nm nn no b">paint</code>方法为<code class="fe nl nm nn no b">circle</code>和<code class="fe nl nm nn no b">needle</code>定义画笔对象，然后计算<code class="fe nl nm nn no b">radius, center, start,</code>和<code class="fe nl nm nn no b">end</code>值。应用一个<code class="fe nl nm nn no b">translate</code>函数来居中旋转偏移，然后应用一个<code class="fe nl nm nn no b">rotate</code>函数来匹配上面定义的<code class="fe nl nm nn no b">rotation</code>值。使用<code class="fe nl nm nn no b">drawLine</code>和<code class="fe nl nm nn no b">drawCircle</code>绘制罗盘“外壳”和“指针”,这将在旋转的画布上绘制这些内容，使指针指向磁北。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="ca67" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h2><p id="b02d" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">Flutter是一个很棒的SDK，用于构建各种跨平台的应用程序，这些应用程序利用设备硬件来获得丰富的交互体验。这个演示应用程序展示了在一个Dart文件中创建基本的事件驱动的UX是多么容易。</p><p id="3a71" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">感谢您的阅读，祝您的下一个颤振项目好运！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/bbdde12d11bfc2ccd8630eb909a01047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RUIpkwvz2pMC365p7chs9Q.gif"/></div></div></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><blockquote class="nq"><p id="d336" class="nr ns it bd nt nu nv nw nx ny nz mm dk translated">肯尼斯·雷利(8位黑客)是LevelUP的首席技术官</p></blockquote></div></div>    
</body>
</html>