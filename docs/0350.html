<html>
<head>
<title>Thinking in Array/List</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在数组/列表中思考</h1>
<blockquote>原文：<a href="https://itnext.io/thinking-in-array-list-38ff53c1c739?source=collection_archive---------1-----------------------#2018-02-24">https://itnext.io/thinking-in-array-list-38ff53c1c739?source=collection_archive---------1-----------------------#2018-02-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f3d4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">TypeScript/JavaScript中的函数编程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/070823dfede4a9854648843add0849f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZAPxyd_X0HgHPhkVkqbqQ.jpeg"/></div></div></figure><p id="e4b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fthinking-in-array-list-38ff53c1c739" rel="noopener ugc nofollow" target="_blank"> <em class="lo">点击这里在LinkedIn上分享这篇文章</em> </a></p><h1 id="e5f2" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">为什么函数式编程喜欢列表？</h1><p id="d8af" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">你可能听说过这个:</p><blockquote class="mm"><p id="d04a" class="mn mo iq bd mp mq mr ms mt mu mv lm dk translated">Lisp中的一切都是列表！</p></blockquote><p id="6e01" class="pw-post-body-paragraph kr ks iq kt b ku mw jr kw kx mx ju kz la my lc ld le mz lg lh li na lk ll lm ij bi translated">事实是，并不是<em class="lo">一切</em>在函数式编程的世界里都是列表，但是列表起着非常重要的作用。这是为什么呢？</p><p id="7162" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我认为答案在于<strong class="kt ir">简单性</strong>和<strong class="kt ir">可读性</strong>。</p><p id="faf5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们以TypeScript/JavaScript为例。</p><p id="f934" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先让我们看看两个事实:</p><ul class=""><li id="e3d3" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm ng nh ni nj bi translated">一，在TypeScript/JavaScript中，列表就是数组。</li><li id="eef8" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated">数组有一系列预定义的方法，如map，filter，includes等。那些方法就像常识一样，每个熟悉这门语言的人都知道它们的意思。</li></ul><p id="8bc6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">编码时，我们希望<strong class="kt ir">用最少的术语表达最多的信息</strong>。从这个意义上说，如果我们可以用预定义的方法在数组中表达我们的意图，为什么我们需要使用定制的函数/方法呢？</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="c13d" class="lp lq iq bd lr ls nw lu lv lw nx ly lz jw ny jx mb jz nz ka md kc oa kd mf mg bi translated">数组思维的例子</h1><h2 id="b2cc" class="ob lq iq bd lr oc od dn lv oe of dp lz la og oh mb le oi oj md li ok ol mf om bi translated">例1“在任何”</h2><p id="88f2" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">假设您有一张信用卡，该卡有几种状态:活动、损坏、取消和关闭等。要求是当卡状态不是损坏/取消/关闭时允许某些操作。</p><p id="4812" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这可以用“或”<em class="lo">或</em>“| |”(我知道，很难读作‘或或或’:p):</p><pre class="kg kh ki kj gt on oo op oq aw or bi"><span id="c793" class="ob lq iq oo b gy os ot l ou ov">public disallowActon(cardStatus: string): boolean {<br/>  return cardStatus === DAMAGED' || cardStatus === 'CANCELED' || cardStatus === 'CLOSED';<br/>}</span></pre><p id="b0a2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是你可以看到我们在这里和那里写了几个<code class="fe ow ox oy oo b">cardStatus</code>。现实中，你在这里想表达的是，如果我的卡状态是状态中的任意一个<strong class="kt ir">，就不允许。原来，</strong>中的<strong class="kt ir">和<strong class="kt ir">中的</strong>都是数组中预定义的方法:</strong></p><pre class="kg kh ki kj gt on oo op oq aw or bi"><span id="a5cd" class="ob lq iq oo b gy os ot l ou ov">public disallowActon(cardStatus: string): boolean {<br/>  return ['DAMAGED', 'CANCELED', 'CLOSED'].includes(cardStatus);<br/>}</span></pre></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="a046" class="ob lq iq bd lr oc od dn lv oe of dp lz la og oh mb le oi oj md li ok ol mf om bi translated">例2: <strong class="ak">【任意测试】</strong></h2><p id="a12a" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">你正在编写一个验证器来验证一个用户输入地址，规则是，如果任何一个地址字段为空，它就是无效的。</p><p id="3786" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通常我们也可以使用OR语句:</p><pre class="kg kh ki kj gt on oo op oq aw or bi"><span id="6330" class="ob lq iq oo b gy os ot l ou ov">public isValid(address: Address): boolean {<br/>  return address.lineOne === ''<br/>        || address.cityName === ''<br/>        || address.state === ''<br/>        || address.postalCode === '';<br/>}</span></pre><p id="34a5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">话又说回来，在现实中，你这里要表达的是:对于address中的每一个字段，如果<strong class="kt ir">测试</strong>中的任何一个为真(我们也称之为<strong class="kt ir">谓词)，</strong>我们将其标记为无效。结果是我们在数组上有一个预定义的方法:</p><pre class="kg kh ki kj gt on oo op oq aw or bi"><span id="1e1d" class="ob lq iq oo b gy os ot l ou ov">public isValid(address: Address): boolean {<br/>  return [address.lineOne, address.cityName,<br/>          address.state, address.postalCode].some(this.isEmpty);<br/>}</span><span id="afcc" class="ob lq iq oo b gy oz ot l ou ov">private isEmpty(field: string): boolean {<br/>  return field === '';<br/>}</span></pre><p id="deae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上述代码利用了<strong class="kt ir">点自由样式</strong>。如果你对此不熟悉，请查看我的另一篇文章:</p><div class="pa pb gp gr pc pd"><a rel="noopener  ugc nofollow" target="_blank" href="/whats-point-free-style-in-typescript-39337000c8cb"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd ir gy z fp pi fr fs pj fu fw ip bi translated">TypeScript中的点自由样式是什么？</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">Typescript/JavaScript中的函数编程</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">itnext.io</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr kp pd"/></div></div></a></div></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="3b22" class="ob lq iq bd lr oc od dn lv oe of dp lz la og oh mb le oi oj md li ok ol mf om bi translated">示例3:“过滤器”</h2><p id="58cf" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">假设您想打印用空格分隔的用户名。用户可能有中间名，也可能没有。所以你可能会有这样的话:或者郑。</p><p id="b15e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通常这可以使用字符串操作来编写:</p><pre class="kg kh ki kj gt on oo op oq aw or bi"><span id="e30c" class="ob lq iq oo b gy os ot l ou ov">public fullName(nameObj: Name): string {<br/>    let fullName = nameObj.givenName;<br/>    if (nameObj.middleName) {<br/>        fullName += ` ${nameObj.middleName}`;<br/>    }<br/>    fullName += ` ${nameObj.familyName}`;</span><span id="de2d" class="ob lq iq oo b gy oz ot l ou ov">    return fullName;<br/>}</span></pre><p id="9e0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">实际上，这里要表达的是，打印所有姓名字段，排除中间空着的姓名。原来我们在数组上有一个预定义的方法:</p><pre class="kg kh ki kj gt on oo op oq aw or bi"><span id="e67f" class="ob lq iq oo b gy os ot l ou ov">public fullName(nameObj: Name): string {<br/>    return [nameObj.givenName, nameObj.middleName, nameObj.familyName]<br/>           .filter(this.notEmpty)<br/>           .join(' ');<br/>}</span><span id="b1e9" class="ob lq iq oo b gy oz ot l ou ov">private notEmpty(field: string): boolean {<br/>    return field !== '';<br/>}</span></pre></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="7de9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">本文属于TypeScript/JavaScript中</em> <a class="ae ln" href="https://medium.com/@hamxiaoz/functional-programming-in-typescript-javascript-d9d79663bc4" rel="noopener"> <em class="lo">函数式编程系列。</em> </a></p></div></div>    
</body>
</html>