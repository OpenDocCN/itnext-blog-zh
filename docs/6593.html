<html>
<head>
<title>Functional Interfaces in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin中的函数接口</h1>
<blockquote>原文：<a href="https://itnext.io/functional-interfaces-in-kotlin-ec6ab9e472e3?source=collection_archive---------1-----------------------#2021-12-28">https://itnext.io/functional-interfaces-in-kotlin-ec6ab9e472e3?source=collection_archive---------1-----------------------#2021-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/deb6d01a64932373f35235ca1a2fd434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2kvqUm9oHKN7O832A4U6g.png"/></div></div></figure><p id="c5d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，我们几乎都见过Kotlin中类似view.setOnClickListener { }或view.setOnLongClickListener { }的代码，当你点击它查看源代码时，它会向你展示Java OnClickListener接口。但是你问过自己这是什么语法吗？是科特林分机吗？你怎么能这样调用你的自定义监听器呢？在这篇小文章中，你会知道所有这些问题的答案，所以让我们开始吧😋。</p><p id="de1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个语法不是扩展而是SAM转换，但是SAM代表什么？</p><p id="aea5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">SAM代表单个抽象方法接口，它也被称为函数接口，这是一个只有一个非默认方法和任意数量的默认方法的接口，例如在JDK中我们有Runnable类，它只有一个名为run的方法，在Android SDK中我们有OnClickListener、OnLongClickListener…等等。</p><p id="6bd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如何才能创建自定义的功能界面？</p><p id="b382" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Java中声明一个函数接口很容易，例如，你只需要用一个方法创建一个普通的接口。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="3da2" class="lf lg iq lb b gy lh li l lj lk">public interface FunInterface {<br/>    void method();<br/>}</span></pre><p id="1dc5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Kotlin中，从1.4版本开始，你需要声明它是一个有趣的接口，而不仅仅是接口。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="054e" class="lf lg iq lb b gy lh li l lj lk">fun interface FunInterface {<br/>    fun method()<br/>}</span></pre><p id="c981" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，在Kotlin中，你可以使用Java或Kotlin函数接口作为Lambda表达式。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="c8ed" class="lf lg iq lb b gy lh li l lj lk">fun <em class="ll">learnFunInterface</em>(fi : FunInterface) { ... }</span></pre><p id="42ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，你可以将FunInterface作为一个匿名对象传递给这个函数。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="cb6b" class="lf lg iq lb b gy lh li l lj lk"><em class="ll">learnFunInterface</em>(object : FunInterface { <br/>    override fun method() {<br/>        println("Hello") <br/>    } <br/>})</span></pre><p id="6d3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是因为它是函数接口，你可以把它作为lambda { }传递，这就是所谓的SAM转换。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="b4e0" class="lf lg iq lb b gy lh li l lj lk"><em class="ll">learnFunInterface</em> ({ println("Hello") })</span></pre><p id="b48e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">同样，在Kotlin中，如果你的最后一个参数是functional interface，你可以将lambda移出括号( )之外。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="a108" class="lf lg iq lb b gy lh li l lj lk"><em class="ll">learnFunInterface</em> {<br/>    println("Hello")<br/>}</span></pre><p id="9d7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在你可以意识到setOnClickListener { }只是因为这个方法把函数接口OnClickListener作为参数。</p><p id="63f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，如果你的函数接口是像OnClickListener一样用Java编写的，同样的语法也适用于Kotlin。</p><p id="bb7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">额外资源:</p><ul class=""><li id="3f92" class="lm ln iq ka b kb kc kf kg kj lo kn lp kr lq kv lr ls lt lu bi translated"><a class="ae lv" href="https://kotlinlang.org/docs/fun-interfaces.html" rel="noopener ugc nofollow" target="_blank">https://kotlinlang.org/docs/fun-interfaces.html</a></li><li id="4943" class="lm ln iq ka b kb lw kf lx kj ly kn lz kr ma kv lr ls lt lu bi translated"><a class="ae lv" href="https://kotlinlang.org/docs/java-interop.html#sam-conversions" rel="noopener ugc nofollow" target="_blank">https://kot linlang . org/docs/Java-interop . html # Sam-conversions</a></li><li id="7b15" class="lm ln iq ka b kb lw kf lx kj ly kn lz kr ma kv lr ls lt lu bi translated">【https://jorgecastillo.dev/kotlin-sam-conversions T4】</li></ul><p id="d108" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae lv" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> GitHub </strong> </a>，<a class="ae lv" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> LinkedIn </strong> </a>，<a class="ae lv" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Twitter </strong> </a>上找到我。</p><p id="8aa0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受编程😋。</p></div></div>    
</body>
</html>