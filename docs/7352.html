<html>
<head>
<title>Why You Shouldn’t Overlook Day 2 Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你不应该忽视第二天库伯内特斯</h1>
<blockquote>原文：<a href="https://itnext.io/why-you-shouldnt-overlook-day-2-kubernetes-a3e9fa5f542d?source=collection_archive---------6-----------------------#2022-08-29">https://itnext.io/why-you-shouldnt-overlook-day-2-kubernetes-a3e9fa5f542d?source=collection_archive---------6-----------------------#2022-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3506" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">是的，第二天的Kubernetes很有挑战性。介绍克服第二天的现代方法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8152df5efb5b24e181001ae44915de62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u9dVwnZzlZoDKz9V.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">第二天库伯内特斯很有挑战性。这就是为什么你不应该忽视它的含义。照片由亚历山大·巴甫洛夫·博尔莫廷/ Unsplash拍摄。</figcaption></figure><p id="f243" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">决定实现Kubernetes(第0天)然后让您的第一个部署启动并运行(第1天)已经够难了。但接下来的一切，通常被称为第二天Kubernetes。许多组织忽略了这个充满挑战和问题的阶段。</p><p id="a92c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦最初的兴奋消退，第二天就是成败的关键时刻，你的团队需要想出如何长期管理和维护Kubernetes。否则，当您向应用添加功能并增加部署的复杂性时，成本会以昂贵的停机、集成问题和开发速度损失的形式累积起来。</p><p id="59cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我花了一年时间与几十个一流的DevOps团队讨论如何克服工程团队在与Kubernetes争论时面临的一些常见运营挑战。</p><div class="lr ls gp gr lt lu"><a href="https://github.com/pluralsh/plural" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">GitHub - pluralsh/plural:以创纪录的时间在kubernetes上部署开源软件。🚀</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">Plural使您能够在Kubernetes上构建和维护云原生和生产就绪的开源基础设施…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi kp lu"/></div></div></a></div><p id="fed2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是我学到的东西:</p><h1 id="d309" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">为什么解决第二天的Kubernetes是至关重要的</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/86e732cbf2ccd83d799659169c10449a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qSSok3Lt7Ts5pc2j"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">对于大多数工程团队来说，Kubernetes经常让人觉得是个难题。Markus Winkler / Unsplash拍摄的照片</figcaption></figure><p id="1b4a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">第2天Kubernetes介绍了维护集群性能和可靠性的DevOps流程，如监控、测试、操作手册和警报。通常，在最初推动尽快部署Kubernetes时，没有仔细考虑这些操作。毕竟，为了进入<a class="ae nc" href="https://www.plural.sh/blog/kubernetes-statefulsets-are-broken/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>并弄清楚基础知识，比如如何将Docker Compose文件转换成生产K8s服务，有大量的术语和概念要学习。</p><p id="f487" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，在确定初始部署的同时，提前考虑第2天和以后的事情也很重要。与任何开源技术一样，选择自托管Kubernetes而不是托管解决方案可以节省大量成本并提高灵活性，但这也带来了风险。</p><p id="9d4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您的Kubernetes集群没有得到很好的管理、监控或理解，您的工程师可能会花费大量的时间来查找根本原因和修复故障。安全漏洞或治理问题可能会导致公关或合规灾难。由于配置不当，您可能会增加云成本。总的来说，士气可能会受到打击，因为工程师花在编写掌舵图上的时间比他们花在产品功能上的时间还多。</p><h1 id="0032" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">组织在第2天Kubernetes中面临哪些问题？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/56c471e18e91722c6acf804aa10f7eca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IIkZY_god7eO6t6L"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">虽然因组织而异，但您可以将Kubernetes第2天的问题分为以下五个方面。照片由Rob Wicks / Unsplash拍摄</figcaption></figure><p id="b657" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">工程组织在管理K8s时遇到的问题可以分为以下五个方面:</p><h1 id="893a" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">学习曲线和知识转移</h1><p id="1f80" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">无论您是将Kubernetes仅用于您的数据堆栈，还是将您的整个单片系统转换为分布式微服务，您都希望避免只有一两名工程师负责维护您的解决方案的情况。然而，关于K8s有一个陡峭的学习曲线和大量的材料。</p><p id="0ee2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，你不仅要掌握核心的Kubernetes API，还要掌握管理K8s的工具链。不同的工具有如此多的选择(头盔或Kustomize？Terraform还是Ansible？)，你的解决方案往往会非常专业化，让你很难吸收新的工程师或者失去组织中少数工程师的知识。</p><h1 id="4c8e" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">能见度</h1><p id="f25b" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">在大多数情况下，尤其是如果您使用AWS，您不会有内置的Kubernetes仪表板。要了解您的所有资源是什么，您需要使用命令行界面(kubectl)——虽然有些人对此非常熟悉，但大多数人并不熟悉，他们需要可视化界面的好处。</p><h1 id="f151" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">第三方应用集成</h1><p id="8222" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">通常，你在第二天遇到的问题并不是技术上的问题。相反，其他应用程序如何与K8s交互的操作特性会让您头疼。例如，如果您想在Kubernetes上部署Airflow，您可能不知道如何扩展它下面的数据库，或者如何扩展工作人员，要可视化哪些指标，或者要进行哪些CPU/内存权衡。</p><p id="60d4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这种操作知识对于每个应用程序来说都是独一无二的，每当您想在Kubernetes上使用一个新的开源工具时，都必须从头开始学习。任何错误的配置都可能导致比您真正需要花费的更高的云账单。</p><h1 id="1162" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">监控、警报和灾难恢复</h1><p id="a535" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">虽然K8s内置了一些日志记录功能，但在第2天，设置您的日志以连接到一个中央系统(或一组工具)是非常重要的，您可以使用该系统进行观察和报警。记录像Kubernetes这样的动态分布式系统是复杂的。您需要监控多个层(例如节点和集群级别)，每个层都有自己的生命周期和不同种类的日志。</p><p id="e4e8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了日志记录，警报和灾难恢复策略也是第二天Kubernetes的必备条件。同样，由于系统的分布式本质，团队在这里可能会遇到问题。可能并不总是清楚每项服务的所有者是谁，因此值班人员可能不知道在停电的情况下该做什么，甚至不知道该联系谁。</p><h1 id="2ef0" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">安全和治理</h1><p id="76fe" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">从安全角度来看，Kubernetes可能是有益的。如果你有一个使用K8s的整合网络层，你不必担心暴露更多的数据，你可以在潜在的不太安全的第三方应用程序上运行一个额外的安全层。</p><p id="e2e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，您存储秘密和检查漏洞的方式需要适应Kubernetes，如果您是管理分布式系统的新手，这可能特别具有挑战性。此外，您需要设置新的访问控制，以遵循公司在治理和法规遵从性方面的最佳实践。</p><h1 id="8359" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">Kubernetes第二天的解决方案是什么样的</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6d4bd3e524111c2f15759400e50c917c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7D-Jkc_cTGszXnid"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nb">Kubernetes第2天解决方案必须至少涵盖以下六个组成部分。Antonio Janeski / Unsplash拍摄的照片</em></figcaption></figure><p id="58f5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据我的经验，第2天Kubernetes的解决方案至少需要具备以下组件:</p><ul class=""><li id="2899" class="ni nj iq kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated"><strong class="kx ir"> Dashboarding: </strong>为不想使用命令行的人提供的管理资源的可视化界面。</li><li id="6145" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated"><strong class="kx ir">集成测试套件:</strong>当你把一个新版本的包推向生产时，你会想办法自动地把它部署到测试集群中，并运行健康检查以确保一切都运行良好。</li><li id="f19e" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated"><strong class="kx ir">访问控制:</strong>从一个中心位置为您的集群设置访问控制应该很容易，并且审计跟踪应该是固定的。</li><li id="6e1e" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated"><strong class="kx ir">可观察性和警报:</strong>如果出现任何问题，您需要能够快速找到问题的根源，并向正确的人发出警报。</li><li id="f8c6" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated"><strong class="kx ir">灾难恢复操作手册:</strong>出现问题时，您需要操作手册，以便随时待命的任何人都可以快速实施修复。这就引出了最后一点…</li><li id="88d8" class="ni nj iq kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated"><strong class="kx ir">自动化:</strong>很多时候，团队在管理Kubernetes时，最终会重新发明轮子。当您想要在K8s上部署任何东西时，您应该能够快速找到您需要的所有仪表板、所有用于扩展的钩子以及使该过程可重复的交互式操作手册。</li></ul><p id="f61d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">许多公司试图将不同分散的DevOps解决方案中的这些组件串在一起。然而，要有一个真正有效的解决方案，你需要整个套件协同工作。当一个警报触发时，它应该会连接到一个运行手册，并为您指出修复方法。你所有的操作都应该是自动化的——团队中的每个人，而不仅仅是几个工程师，都应该可以访问和使用关于这些操作的知识。</p><p id="239c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要了解Plural如何工作以及我们如何帮助世界各地的工程团队在云生产环境中部署开源应用程序，请查看我们的Github 立即开始。</p><p id="3494" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">加入我们的<a class="ae nc" href="https://discord.gg/pluralsh" rel="noopener ugc nofollow" target="_blank"> Discord channel </a>进行提问、讨论，并与社区的其他成员见面。</p><p id="28b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nw">本文由我们的社区负责人Abhi Vaidyanatha共同撰写。</em></p></div></div>    
</body>
</html>