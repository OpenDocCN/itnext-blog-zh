<html>
<head>
<title>How to listen app’s traffic on a rooted emulator?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在一个有根的模拟器上监听app的流量？</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-listen-apps-traffic-on-a-rooted-emulator-471a842e89bd?source=collection_archive---------2-----------------------#2021-10-07">https://itnext.io/how-to-listen-apps-traffic-on-a-rooted-emulator-471a842e89bd?source=collection_archive---------2-----------------------#2021-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6bca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嘿！我认为会有相当多的人从事与应用程序相关的有趣工作。例如，流量分析，当然是为了测试这些应用！你有一个困难的负担——你需要调试雇主的应用程序的生产组件(但是还有别的方法吗？)——然后你开始寻找解决问题的方法。<br/>而且一路上你会遇到很多问题。我正在写如何解决这些问题。</p><p id="0834" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">传统的方法是从安装一些Charles开始，在其中设置一个代理服务器，并尝试监听流量，但是我们很快就遇到了一个问题—所有合适的现代应用程序都使用HTTPS，因此，您必须在您的设备上安装一个证书，这将允许您监听流量…这就是有趣的地方…</p><p id="4737" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们创建一个清单来指导我们完成这一过程:</p><ul class=""><li id="ec27" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">开始安装模拟器的准备工作</li><li id="9ce5" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">你在这里</li><li id="b09a" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装模拟器</li><li id="4127" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">为MITM安装证书</li><li id="870e" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">检查监听流量的可操作性</li><li id="fe0e" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">失望</li><li id="0bbf" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">获取root访问权限</li><li id="da48" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">将证书传输到系统存储</li><li id="ba0c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">失望(？)</li><li id="2239" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">SSL取消固定</li><li id="e237" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">利润！！！</li></ul><h1 id="a1cb" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装Android模拟器</h1><p id="b572" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我不会描述整个安装过程，我希望你可以做<a class="ae mc" href="https://developer.android.com/studio/run/emulator" rel="noopener ugc nofollow" target="_blank">所有</a>准备<a class="ae mc" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank">步骤</a>发现自己处于这样一种情况，你只需在模拟器中选择某一类型的OS，前面的所有步骤都已经完成。</p><p id="97d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以:</p><ol class=""><li id="412d" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk md kr ks kt bi translated">我们选择任何合适的选项，有一个重要的警告——它必须是一个没有Google Play的程序集，但有Google Play服务(后面会看到)。因此，我们选择没有三角形的设备</li></ol><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi me"><img src="../Images/ab16bf5ae1c7866b42f36f094fc20e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_-kfVqI0HVhO5n76.png"/></div></div></figure><p id="18bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.我们选择任何包含Google Play APIs的感兴趣的图片</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi me"><img src="../Images/92be3b22d73c690b8c198376233668d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FKK4Te2PZuhA-nHu.png"/></div></div></figure><p id="c325" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.将冷启动参数设置为开</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mq"><img src="../Images/9bba9171f3300ff0fe572f8e6e333f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*79nE_U3Vx1gKjmj4.png"/></div></div></figure><p id="2785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成了！</p><ul class=""><li id="b22f" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">安装模拟器</li></ul><h1 id="159d" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装代理嗅探器证书</h1><p id="c806" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我将在任何地方使用Fiddler来监听流量。我将向您展示设置该软件的步骤，根据该步骤，我们将关闭路线图上的另一个项目。</p><p id="ec59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mr">这里我要说一点离题的话——这个程序是付费的，甚至是订阅的，最好的情况下，每月10美元。但是，你将有30天的试用期，之后你需要更多的黄金，所以你可以使用任何其他工具。我尝试使用Postman——它也有代理工具，但是，Postman生成的根证书不适合安装在Android 10/11中。然而，支持服务已经提高了警惕，我希望，在分配的30天试用期内，一切都将正常工作(在Postman中),您将能够使用最方便的(从我的角度来看)工具来解决这个问题。出现这种情况，我会补充这篇文章。现在我们回到在设备(模拟器)上安装证书的过程。</em></p><p id="b2fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要展开提琴手设置中的<strong class="jp ir">高级设置</strong>项，导出根证书。目前，我是一个Windows用户，在这个操作系统上，它会出现在桌面上，将鼠标悬停在问题图标上会显示一个提示。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ms"><img src="../Images/8fe1dd2e686c67e1f8ece1e2cec63e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iBsmORYx8_iH37bh.png"/></div></div></figure><p id="15b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">导出证书后，双手平稳地移动，将它传输到正在运行的仿真器中——文件将位于<code class="fe mt mu mv mw b">.../Downloads</code>文件夹中。之后，您可以立即转到设置并安装我们的证书:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/a5c44f5c6be3ac614b7034592cd69f11.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*8bWE7TJEmNVWv2xG.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8f553e47e36a76318203467f79a50dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*wm6w9aDPiB761htx.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/5b20bf5f355caf0fc49d3666f410d8d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*5kbyVr-PCru66MPS.png"/></div></figure><p id="f824" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧。我们可以在另外一个项目旁边打勾:</p><ul class=""><li id="8919" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">为MITM安装证书</li></ul><h1 id="236c" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">检查是否一切正常</h1><p id="aa4f" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">是时候检查我们的努力是否至少产生了一些有用的结果了。今天实验的试验品是Reddit应用程序，如果我们尝试下载帖子，首先会看到:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/e6cfc3c0f97b257461141a045da7c05f.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*Ihx8roltHriACEMm.png"/></div></figure><p id="6a85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">空虚。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi my"><img src="../Images/08ba9fcaaebfb07bad6e47393bf1fe3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7dqsncFqOR6UG8JF.png"/></div></div></figure><p id="8b75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有Fiddler中无休止的SSL握手尝试。似乎是时候在我们路线图的两点上划一条横线了:</p><ul class=""><li id="2b55" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">检查窃听的可操作性</li><li id="a994" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">失望</li></ul><h1 id="d1b8" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我是root</h1><p id="0891" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">在我看来，是时候告诉我们为什么我们甚至需要一个根了？这都是关于Android 7的臭名昭著的变化，在此之后，用户证书不再被信任。因此，我们需要对我们安装的证书做些什么，以便我们可以使用它来研究我们的工作应用程序的流量。而且这只有在你的设备是rooted的情况下才能做到。还有一个使用模拟器的原因，以及相关的功能:如果没有模拟器，你将不得不有一个持续的根设备，如果它是一个单独的专用智能手机，那么这是没有问题的(嗯，除了充电，逐渐过时和特定型号的限制)，但是，如果你有你的设备，那么根的缺点可能是显着的——不工作的安全系统，损坏的Google Pay或脱落的相机……嗯， 除此之外，模拟器使更改Android版本变得很容易(然而，您将不得不重复这里列出的所有操作，但是您已经有了这篇文章，并且我在没有它的情况下编写所有这些内容)。</p><p id="e31d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们开始吧。多亏了精彩的<a class="ae mc" href="https://github.com/newbit1/rootAVD" rel="noopener ugc nofollow" target="_blank">项目</a>，整个过程简化为只运行一个脚本，只需要一点准备工作。另外，注意控制台中显示的内容，如果您使用的是Windows，那么不要运行<code class="fe mt mu mv mw b">.sh</code>，而是运行<code class="fe mt mu mv mw b">.bat</code>。也许WSL在这里会派上用场，但是我的系统，比方说，有一些WSL不允许使用的功能(如果你知道如何在锐龙5000系列上同时获得WSL和Android模拟器，那么请写一篇评论)…</p><p id="65b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是作品本身:</p><pre class="mf mg mh mi gt mz mw na nb aw nc bi"><span id="f82f" class="nd la iq mw b gy ne nf l ng nh">./rootAVD.sh ~/Library/Android/sdk/system-images/android-30/google_apis/x86_64/ramdisk.img</span></pre><p id="8807" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，您需要重新启动模拟器。对于Windows用户来说，图像的路径应该是这样的:</p><pre class="mf mg mh mi gt mz mw na nb aw nc bi"><span id="f858" class="nd la iq mw b gy ne nf l ng nh">C:\Users\Me\AppData\Local\Android\Sdk\system-images\android-30\google_apis\x86_64\ramdisk.img</span></pre><p id="9dad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在输出中，我们得到一个根，当仿真器重新启动时，它被保存，但是您不应该进行擦除。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/61ac2c5a1bd70bc08f769ff86e3d7993.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*H8YEFfjq9k6lL_9O.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/1d15cf3891b2d4f0e110441eda657fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*Qwtl0niPCzVPrsRk.png"/></div></figure><p id="7c43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们放了一只破晓:</p><ul class=""><li id="fcef" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">获取root访问权限</li></ul><h1 id="b1c8" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">使证书可信</h1><p id="7d36" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">为此，我们需要将它转移到信任存储中。这里我们需要根(不仅在这里，以后也是)。</p><p id="e3ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，我们运行以下命令链:</p><pre class="mf mg mh mi gt mz mw na nb aw nc bi"><span id="e857" class="nd la iq mw b gy ne nf l ng nh">adb shell<br/>su<br/>mkdir -m 700 /data/certs<br/>cp /system/etc/security/cacerts/* /data/certs/<br/>mount -t tmpfs tmpfs /system/etc/security/cacerts<br/>cp /data/misc/user/0/cacerts-added/* /system/etc/security/cacerts/<br/>mv /data/certs/* /system/etc/security/cacerts/<br/>chown root:root /system/etc/security/cacerts/*<br/>chmod 644 /system/etc/security/cacerts/*<br/>chcon u:object_r:system_file:s0 /system/etc/security/cacerts/*</span></pre><p id="3dd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们在系统证书中看到下图:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8d3cece3b63808d072029eef71c7521e.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*k2r27wbvue1BgblJ.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/3e3f2b6f41d165858314d0ed4efeea26.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*tu8oQxkk0-q9I-oB.png"/></div></figure><p id="98f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的证书已成为系统证书，因此我们将关闭另一个项目:</p><ul class=""><li id="6be2" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">将证书传输到系统存储</li></ul><p id="c53b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们马上检查我们的应用程序:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/a38d9084ba0cd6db746a18a784a09d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*aw9C1Cw19NN5e5Et.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ni"><img src="../Images/529484f787d29301e65037b0cac06695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UWcV0xuHnAqVPOgs.png"/></div></div></figure><p id="b8ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧。现在我们可以收听HTTPS交通的任何(或？)来自仿真器的应用程序。让我们尝试另一个应用程序— <strong class="jp ir"> Avito </strong>来巩固结果(这是一个在人与人之间销售东西的俄罗斯应用程序)。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/97f6550b17ddec047caa89285599b54c.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*z7rl13HdKhouzYqG.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/1a9187e46a4bcc8227fbe29a4101d704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/0*jYtiJEiMnDpMltss.png"/></div></figure><p id="e33c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里好像出了点问题。不过，你已经什么都知道了，既然你一开始就看到了一个巨大的剧透，所以我们再放一个daw:</p><ul class=""><li id="0837" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">失望！</li></ul><h1 id="dd17" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">SSL-取消固定</h1><p id="b315" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">这个主题有许多解决方案，但是，通常来说，它们都围绕着一个想法——重新构建您想要研究的应用程序。这种方法非常麻烦、复杂，并且会导致拖延，因此需要某种东西来使一切变得更简单、更通用。这个东西的配方就在这里，免费而且没有短信:</p><ol class=""><li id="f02e" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk md kr ks kt bi translated">由于root的存在，安装Xposed</li><li id="4b07" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">感谢Xposed，我们将安装解除SSL绑定的模块</li><li id="c897" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">利润！！！(这两点看起来很无趣)</li></ol><p id="be8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们按顺序来。</p><h1 id="bf38" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装x曝光</h1><p id="60e4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">考虑到我们最初的计划是监听仿真器上的所有内容和每个人，这一步出现了一些困难——我们需要选择能够在仿真器上工作的软件解决方案的成功组合。由于这篇文章，你将不必花几个小时寻找这些解决方案，只需遵循一个简单的指示:</p><ol class=""><li id="14ac" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk md kr ks kt bi translated">下载最新版本的Magisk模块，并通过Magisk安装</li><li id="d98c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">关闭模拟器，然后再次运行它(这一步模拟重新启动，由于某种原因，对我不起作用，如果对你起作用，可能就足够了)</li><li id="c9f8" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">在Magisk存储库中找到一个名为<code class="fe mt mu mv mw b">Riru - LSPosed</code>的模块并安装它</li><li id="0cb1" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">再次重启模拟器</li><li id="c211" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">打开LSPosed应用程序，您需要在其中安装x posed-module sslunping</li><li id="a2f5" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">我们在这个模块的设置中为所有我们想听的应用程序切换所有寒鸦，并激活模块本身</li><li id="378c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk md kr ks kt bi translated">重启模拟器</li></ol><p id="041c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，您会发现自己处于这样一种情况，您有一个仿真器，它具有:</p><ul class=""><li id="3728" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">完整根目录(Magisk)</li><li id="f847" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">在用户空间安装MITM证书</li><li id="004c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">已安装x已展示(已展示)</li><li id="7250" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">已安装的SSL模块-取消固定</li></ul><p id="2e65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个过程中，有如下一组图片:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/dc1808755686d2fab2ee5eff613bcbfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*QmsUGvzvQ-ymyq5R.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/28835a7ecdc38d4016ec8d9319028e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*Jdznf1xdTiPCnNwe.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/b7cfce9a1ceabc5ea49379c4b07af6c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*chlzWN-0LCpBlW2H.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/48775be352aa3f7c4faa2cf353b999b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*DHx5wPkP12qxvkZr.png"/></div></figure><p id="715f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以诚实地选择:</p><ul class=""><li id="ab4f" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">SSL取消固定</li></ul><p id="6181" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是时候检查这台机车是否运转了:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8ecb124e324c5109ee6047f93421da9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*lNwqWr7_uF318CFm.png"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nk"><img src="../Images/97abba920e9ee43bf3ad6b930ca28496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ozjmUUCgZnJlVShZ.png"/></div></div></figure><p id="95d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作品！我们也可以把最后一个复选框:</p><ul class=""><li id="db2a" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">利润！！！</li></ul><p id="f587" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有哪些细微差别？首先，每次模拟器打开时，都需要再次使证书可信(原则上，在所有这些过程之后，您可以禁用<strong class="jp ir">冷启动</strong>，然后您将不必这样做，但迟早您将不得不“硬”重启模拟器，然后您将不必使用证书)。也许这里有一个永久的解决方案，或者在最坏的情况下，它可以自动化，但我累了。其次，原则上不是所有的应用程序都想在模拟器上运行。最可靠的选择是拥有一套运行不同版本Android的专用手机，所有这些手机都将拥有本手册中的全部工具(略有改动)，但这并不总是可能的。</p><p id="bfe7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我将再次逐点复制整个指令，这样算法本身就很清楚了:</p><ul class=""><li id="bd1f" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">准备(安装Android Studio)以安装/运行仿真器</li><li id="b058" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">用上面定义的参数安装模拟器</li><li id="87db" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">我们通过拖放光标在模拟器上安装我们感兴趣的应用程序，并确保它们在原则上工作，所有这些都不会是徒劳的</li><li id="8739" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">按照上面的说明获取root (Magisk)</li><li id="71ad" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">重启模拟器</li><li id="876f" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装Riru</li><li id="7bf7" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">重启模拟器</li><li id="e94b" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装建议</li><li id="6f0a" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">重启模拟器</li><li id="4541" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装暴露的模块SSLUnpinning</li><li id="6bf2" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">我们把所有的寒鸦放在我们感兴趣的应用程序和模块本身的模块中(打开它)</li><li id="de76" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">关闭模拟器</li><li id="5437" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">关闭冷启动</li><li id="f472" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">打开模拟器</li><li id="dd13" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">在用户空间安装MITM CA-certificate(只安装)</li><li id="4167" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">我们根据上面的说明使证书可信</li><li id="a4ba" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">我们根据上面指定的参数或您自己的参数(取决于您要使用哪种流量分析工具)在模拟器上配置代理</li><li id="05e1" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">分析应用程序的运行</li></ul><p id="18f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在模拟器上安装额外的应用程序，那么您需要在SSLUnpinning(通过LSPosed)中将Daw放在它们前面，并硬重启模拟器，然后在重启后修复证书。在这，一切，直到我们再次见面！</p></div></div>    
</body>
</html>