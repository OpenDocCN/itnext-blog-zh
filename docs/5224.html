<html>
<head>
<title>Android create a custom Color Picker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android创建自定义颜色选择器</h1>
<blockquote>原文：<a href="https://itnext.io/android-create-a-custom-color-picker-d84b32804d1a?source=collection_archive---------3-----------------------#2021-01-15">https://itnext.io/android-create-a-custom-color-picker-d84b32804d1a?source=collection_archive---------3-----------------------#2021-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8d4ed78ee814c0c76b610851ebeb2589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tohCzlzDUT-8Li0d0rmY8g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Android创建自定义颜色选择器</figcaption></figure><p id="d643" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">嗨，我是Amr Hesham，我是一名对android开发和编译器设计感兴趣的软件工程师，去年，我创建了一个简单的计时器应用程序，但我想让用户控制所有的UI颜色，所以我可以制作一个动态的UI颜色支持，例如，用户可以在运行时更改背景，文本，动作栏等颜色，每个用户都应该有自己的主题计时器。</p><p id="f8de" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我将在另一篇文章中描述如何在运行时支持动态UI颜色，例如<a class="ae la" href="https://ask.fm/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Ask.fm </strong> </a>让用户在多个主题之间进行选择，或者像我的应用程序一样让用户自定义每个视图。</p><p id="6588" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我所面临的一个问题是，例如，用一个定制的需求来制作一个定制的颜色选择器对话框。</p><p id="1945" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">-对话框背景颜色应该是动态的，取决于当前用户的选择。<br/> -对话框按钮或视图应该在运行时根据当前用户的选择而改变。<br/> -对话框应以当前用户值作为默认值开始。<br/> -以后我可以很容易地支持一些功能，如饱和度，阿尔法，亮度…等。<br/> -以后我可以轻松支持多种拾取器类型。</p><p id="396f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以我决定创建我的颜色选择器，在这篇文章中，我们将创建一个简单的，你可以根据你的项目需要来改进它。</p><p id="ab48" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们将在活动中创建它，您可以在活动中使用它或将其创建为对话框。</p><p id="bdb4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们将创建<strong class="ke ir"> RGB颜色选择器</strong>，在我们开始之前，你应该知道，要创建一个颜色，我们需要3个值:红色的R值、绿色的G值和蓝色的B值，每个值都在0到255之间，所以我们可以将每个颜色值表示为一个字节或整数。</p><p id="da01" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在xml文件中，我们需要以下视图<br/> - ImageView来显示当前颜色。<br/> - 3个搜索条，每个值一个(R，G，B)。</p><p id="2f96" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以我们的活动XML会是这样的。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="2238" class="lk ll iq lg b gy lm ln l lo lp">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;LinearLayout xmlns:android="<a class="ae la" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    xmlns:app="<a class="ae la" href="http://schemas.android.com/apk/res-auto" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res-auto</a>"<br/>    xmlns:tools="<a class="ae la" href="http://schemas.android.com/tools" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/tools</a>"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".MainActivity"&gt;</span><span id="31da" class="lk ll iq lg b gy lq ln l lo lp">    &lt;ImageView<br/>        android:id="@+id/colorImageView"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="200dp" /&gt;</span><span id="4d61" class="lk ll iq lg b gy lq ln l lo lp">    &lt;SeekBar<br/>        android:id="@+id/seekBarR"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        android:max="255" /&gt;</span><span id="55ff" class="lk ll iq lg b gy lq ln l lo lp">    &lt;SeekBar<br/>        android:id="@+id/seekBarG"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        android:max="255" /&gt;</span><span id="b15e" class="lk ll iq lg b gy lq ln l lo lp">    &lt;SeekBar<br/>        android:id="@+id/seekBarB"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        android:max="255" /&gt;<br/>&lt;/LinearLayout&gt;</span></pre><p id="2c9a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们的活动中，我们将为r，g，b值初始化4个视图和3个整数或字节，然后我们需要为每个SeekBar设置侦听器，这样当用户更改SeekBar值时，我们可以获得新值并用新颜色更新我们的ImageView。</p><p id="3212" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们的SeekBar更改监听器中，我们的工作很简单，我们只需要知道这个事件是针对哪个SeekBar的，就可以知道我们应该更新哪个值。</p><p id="c844" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">更新R、G、B值后，我们现在可以创建一个颜色值，然后使用该颜色更新ImageView背景。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="bb10" class="lk ll iq lg b gy lm ln l lo lp">public class MainActivity extends AppCompatActivity {<br/>    <br/>    private ImageView colorImageView;</span><span id="bc3b" class="lk ll iq lg b gy lq ln l lo lp">    private int redValue = 0;<br/>    private int greenValue = 0;<br/>    private int blueValue = 0;</span><span id="c66b" class="lk ll iq lg b gy lq ln l lo lp">    @Override<br/>    protected void onCreate(Bundle savedInstanceState) {<br/>        super.onCreate(savedInstanceState);<br/>        setContentView(R.layout.activity_main);</span><span id="9985" class="lk ll iq lg b gy lq ln l lo lp">        colorImageView = findViewById(R.id.colorImageView);<br/>        SeekBar seekBarR = findViewById(R.id.seekBarR);<br/>        SeekBar seekBarG = findViewById(R.id.seekBarG);<br/>        SeekBar seekBarB = findViewById(R.id.seekBarB);</span><span id="d333" class="lk ll iq lg b gy lq ln l lo lp">        seekBarR.setOnSeekBarChangeListener(mChangeListener);<br/>        seekBarG.setOnSeekBarChangeListener(mChangeListener);<br/>        seekBarB.setOnSeekBarChangeListener(mChangeListener);<br/>    }</span><span id="3366" class="lk ll iq lg b gy lq ln l lo lp">    private final SeekBar.OnSeekBarChangeListener mChangeListener = <br/>                          new SeekBar.OnSeekBarChangeListener() {<br/>        <a class="ae la" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>        public void onProgressChanged(SeekBar seekBar,<br/>                                      int progress,<br/>                                      boolean fromUser) {<br/>            int viewId = seekBar.getId();<br/>            switch (viewId) {<br/>                case R.id.seekBarR:<br/>                    redValue = progress;<br/>                    break;<br/>                case R.id.seekBarG:<br/>                    greenValue = progress;<br/>                    break;<br/>                case R.id.seekBarB:<br/>                    blueValue = progress;<br/>                    break;<br/>            }<br/>            int color = Color.rgb(redValue, greenValue, blueValue);<br/>            colorImageView.setBackgroundColor(color);<br/>        }<br/>    };<br/>}</span></pre><p id="96cc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">恭喜你，现在我们简单的颜色选择器工作正常👌</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lr"><img src="../Images/54a540fc965ef48748fec98e9ea132a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JvTL7IdVqywudJfsTlGotA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">RGB颜色选择器演示</figcaption></figure><p id="875a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，您可以使用相同的概念来创建许多不同的颜色选择器，例如，您可以轻松地添加一个SeekBar并支持使用alpha创建颜色，您所需要的只是一个变量和SeekBar，然后在侦听器中用Color.argb替换Color.rgb。</p><p id="54fa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在有了我们的颜色选择器，我们可以自由轻松地改变任何东西，比如颜色、属性数量、字体，你还可以添加动画，创建对话框或活动，甚至是小部件。</p><p id="1883" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过学习如何创建这个简单的拾色器的概念，你可以使用这个概念产生很多很多的想法，例如用一些<a class="ae la" href="https://en.wikipedia.org/wiki/Color_theory" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">颜色理论</strong> </a>的知识，你可以创建一个颜色包推荐，这样用户只需选择一种颜色，你就可以建议什么颜色适合这个颜色， 你也可以用一些图像处理的知识来创建一个图像过滤器，而不是将颜色设置为ImageView背景，你将使用它与用户图像来创建一些过滤器，这样你就可以看到它像<a class="ae la" href="https://en.wikipedia.org/wiki/Butterfly_effect" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">蝴蝶效应</strong> </a>小新知识会给你许多项目的想法。</p><p id="94da" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在你可以自由地创建你自己的创造性的颜色选择器。</p><p id="f248" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可以在:<a class="ae la" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Github </strong> </a>，<a class="ae la" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Linkedin </strong> </a>，<a class="ae la" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Twitter </strong> </a>上找到我。</p><p id="5067" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">享受编程😎。</p></div></div>    
</body>
</html>