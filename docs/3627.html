<html>
<head>
<title>Deep dive into WebComponents</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入了解web组件</h1>
<blockquote>原文：<a href="https://itnext.io/deep-dive-into-webcomponents-6b36a4049fbf?source=collection_archive---------3-----------------------#2020-01-20">https://itnext.io/deep-dive-into-webcomponents-6b36a4049fbf?source=collection_archive---------3-----------------------#2020-01-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="b59d" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">制作基于动态组件的web应用程序的原生方式。</h1><h1 id="7d8c" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是WebComponents，我为什么要使用它们？</h1><p id="648f" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">WebComponents让你有可能<strong class="kn ir">创建新的HTML标签</strong>。</p><p id="60f5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">它们不是新的。事实上，它们最早是在2011年发布的，并随着2014年Polymer的发布而大受欢迎。主要的问题是关于浏览器支持，但是现在，它们已经在所有现代浏览器上实现了。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="883f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">WebComponents背后的理念是许多现代web框架成功的一部分:制作可以多次使用的元素<strong class="kn ir"/>。看看webcomponents.org的<a class="ae lv" href="https://www.webcomponents.org/" rel="noopener ugc nofollow" target="_blank">就明白我的意思了。</a></p><p id="93d2" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">WebComponents可以被视为React、Angular或Vue.js的原生版本<strong class="kn ir">。这样，您就不必包含大量代码来使您的web应用程序工作。代码已经构建在浏览器中，随时可以使用，无需担心下载和执行大量的JavaScript。</strong></p><p id="4cdc" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这是最常见的web框架之间的大小比较:</p><ol class=""><li id="74c9" class="lw lx iq kn b ko lj ks lk kw ly la lz le ma li mb mc md me bi translated">普通定制元素→随时可用</li><li id="137a" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">LitElement→～5kb</li><li id="4a8e" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">Vue.js → ~30kb</li><li id="4c4a" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">React.js(带React DOM) → ~110kb</li><li id="6e67" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">AngularJS → ~160kb</li><li id="6d50" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">角度→ ~550kb</li></ol><h1 id="240c" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">我们的第一个web组件！</h1><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/8a8c2026794c5ad73011d142bc46a9b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhzInYmFHKSCTujnJ1AfJg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">index.html</figcaption></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mv"><img src="../Images/7ff1a755e0f89f60f3e77d0e8a74aeb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rbs6vm4zae4fQ38DRf_DuQ.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">时钟元素. js</figcaption></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mw"><img src="../Images/6f0319e03d65ade47d7aee4db3edee05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kahilfdiTOGTmbbDFk-oWw.gif"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">输出</figcaption></figure><h1 id="308c" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是影子DOM？</h1><p id="df5f" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">让我们来谈谈这行代码:</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/20457f025653395c0d1544035c495557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*ewfnzS71TGJgjS20fy3Omg.png"/></div></figure><p id="0a86" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">这就是为什么定制元素在各种web应用程序的开发过程中保持<strong class="kn ir">可重用</strong>的原因。你可以把影子DOM看作是根DOM不能干扰的子DOM。</p><p id="5b5b" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">例如，如果我们在HTML文件中导入一个CSS文件，那么写在其中的规则不会被影子DOM简单地考虑。</p><p id="f3be" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">一个真实的例子可能是社交媒体按钮，如Twitter的Tweet按钮或脸书的like按钮。它们必须是独立的，页面的样式不应该干扰这些元素的样式。</p><p id="a860" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">“模式”属性可以设置为“打开”或“关闭”。<br/>当设置为open时，可以通过HTMLElement的“<strong class="kn ir"> shadowRoot </strong>”属性访问shadow root。否则，如果设置为“closed”,“shadowRoot”属性将为空。注意，<strong class="kn ir">很容易绕过</strong>，因为您仍然可以使用HTMLElement的“_root”属性访问影子根。</p><h1 id="4f7a" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使我们的代码更容易编写和优化</h1><p id="ceb4" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">优化定制元素可能很难。这就是<strong class="kn ir">文学元素</strong>发挥作用的地方。</p><p id="8a79" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">LitElement是Polymer家族的一部分，它通过一组方便的<strong class="kn ir">特性</strong>使定制元素开发<strong class="kn ir">变得更加容易，这些特性将帮助我们编写<strong class="kn ir">更干净的代码</strong>和<strong class="kn ir">优化性能</strong>。</strong></p><h1 id="a340" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">我们的第一个web组件…带LitElement！🔥</h1><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi my"><img src="../Images/c944dcecc78b80e1037d619bf6b3cf7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzfZS5sHL7hEnPSjP42-vw.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">index.html</figcaption></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mz"><img src="../Images/1fb0934ad2f87483348e020256b4aa0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zDcn6z-EymAHIj2lKccsJg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">clock-lit-element.js</figcaption></figure><h1 id="576b" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是'<script type="”module”">'？&lt;/root&gt;</script></h1><p id="8031" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这是我们告诉浏览器我们正在使用<strong class="kn ir"> ES模块</strong>的方式。<br/>实际上，当一个JS文件导入一些其他文件(比如一个库，一个样式表，一个图像，或者其他什么…)时，它必须用<strong class="kn ir"> type="module" </strong>属性导入。在我们的例子中，我们需要它直接从clock-lit-element.js文件导入LitElement。</p><h1 id="92dd" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">“属性”方法</h1><p id="6093" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这个方法允许我们<strong class="kn ir">声明</strong>元素的属性。它们都必须有一个“<strong class="kn ir">类型</strong>属性，可以是“字符串”、“数组”、“对象”等，属性可以声明为<strong class="kn ir">属性</strong>。它们将自动转换为对象属性。例如:</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi na"><img src="../Images/d07ce9de27716acd605143b8c80c78bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lu31iTDFAuJ-w-eqYMWXBQ.png"/></div></div></figure><p id="ba5c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">会自动将“name”属性设置为“Steve”。</p><p id="d1fe" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">每当其中一个属性改变时，它就会调用render方法，并让<strong class="kn ir">有效地更新内容，只更新需要的内容，而不是整个组件。</strong></p><h1 id="193c" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">“风格”方法</h1><p id="09af" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">“styles”方法给了我们一种更干净的方式来声明组件的CSS。</p><p id="e9c9" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">该函数还可以返回一个<strong class="kn ir">数组</strong>，这在我们想要与多个元素共享CSS代码时非常有用。</p><p id="9315" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">例如:</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nb"><img src="../Images/ce6174ca253a66b1fda02a44293b2853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4FbHBMrZm9Wf0wackewcPA.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">基本样式. js</figcaption></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mz"><img src="../Images/4fae8bf34d3f18afdbd800687d5c73d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3y_lOUv2F_bqFwYEIG6ug.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">my-element.js</figcaption></figure><h1 id="6cae" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">“渲染”方法</h1><p id="6e98" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这个方法生成了元素的HTML结构。</p><p id="ce55" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">它必须返回一个由“<strong class="kn ir"> html </strong>函数生成的值。为了描述它是如何工作的，我们必须引入“<strong class="kn ir">字符串文字</strong>”，这是ES6特性集的一个新特性。它们是简单的字符串，必须用<a class="ae lv" href="https://superuser.com/questions/254076/how-do-i-type-the-tick-and-backtick-characters-on-windows" rel="noopener ugc nofollow" target="_blank"> <strong class="kn ir">反斜杠</strong>字符</a>声明。</p><p id="501a" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">当你需要<strong class="kn ir">连接</strong>多个字符串时，这些类型的字符串非常有用。<br/>例如:</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nc"><img src="../Images/811a14497250f541e5e8e9dcc6853af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMykoEWQdysCpnMfJxEw_Q.png"/></div></div></figure><p id="d2e5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">当一个函数在没有括号的情况下使用字符串文字(比如<code class="fe nd ne nf ng b">html`&lt;h1&gt;Test&lt;/h1&gt;`</code>)被调用时，JavaScript传递给函数<strong class="kn ir">两个参数，</strong>静态<strong class="kn ir">字符串和<strong class="kn ir">动态</strong>生成的值。</strong></p><p id="688a" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">LitHtml能够生成<strong class="kn ir">优化的HTML </strong>，只更新需要更新的东西。</p><h1 id="b29c" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">元素间的通信</h1><p id="045d" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了让元素进行通信，我们有两个选项:</p><ul class=""><li id="8577" class="lw lx iq kn b ko lj ks lk kw ly la lz le ma li nh mc md me bi translated">使用元素实例并调用它的<strong class="kn ir">方法。<br/> </strong>该选项仅在对<strong class="kn ir">子</strong>元素进行操作时可用。<br/>举例:</li></ul><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi ni"><img src="../Images/8380b369e7857d73c110cd065dab1d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bMLaeJWLQE8m5HZvpAwnkA.png"/></div></div></figure><ul class=""><li id="2bdf" class="lw lx iq kn b ko lj ks lk kw ly la lz le ma li nh mc md me bi translated">调度一个<strong class="kn ir">全局事件。<br/> </strong>举例:</li></ul><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nj"><img src="../Images/9671213013f8e984255df5aa338aebc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tg3zbkPhls3lClgJ1sz5Rw.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">派遣一个事件</figcaption></figure><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nk"><img src="../Images/455d026655a7898aee5f9efa6303994e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YW3PpTqLoI-fltOWtSO_2Q.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">在事件上做某事</figcaption></figure><h1 id="3b49" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">感谢您的关注！</h1><p id="e578" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><a class="ae lv" href="https://gist.github.com/lobellomatteo/248755ac13f7332b5998bffc4e4598da" rel="noopener ugc nofollow" target="_blank">这里有</a>的公开要点链接，如果你想看的话。😊</p></div></div>    
</body>
</html>