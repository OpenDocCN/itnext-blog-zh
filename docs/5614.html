<html>
<head>
<title>K8s Labels &amp; Annotations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">K8s标签和注释</h1>
<blockquote>原文：<a href="https://itnext.io/k8s-labels-annotations-c61c00237c77?source=collection_archive---------4-----------------------#2021-04-16">https://itnext.io/k8s-labels-annotations-c61c00237c77?source=collection_archive---------4-----------------------#2021-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/e3ccbadf89344433e1bef1b097658016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/0*HiLYcKoshGCLDsg3.jpg"/></div></figure><p id="9d03" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们在文章<a class="ae ks" href="https://sandeepbaldawa.medium.com/k8s-labels-selectors-9ad2fcf78a4e" rel="noopener">这里</a>看到了标签的介绍。在本文中，让我们试着理解标签和注释之间的区别&amp;何时使用一个而不是另一个。</p><p id="11bf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们快速总结一下我们对标签的了解</p><blockquote class="kt ku kv"><p id="ebad" class="ju jv kw jw b jx jy jz ka kb kc kd ke kx kg kh ki ky kk kl km kz ko kp kq kr ij bi translated"><strong class="jw ir">K8s为什么要用标签？</strong></p></blockquote><p id="6943" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">标签允许K8s对一组相关资源进行分组(例如:-所有产品资源)。选择器用于查询这些标签(例如:-获取所有产品资源)。公文<a class="ae ks" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" rel="noopener ugc nofollow" target="_blank">这里</a>。在撰写本文时需要注意的是，下面是在K8s中必须如何定义标签的限制</p><p id="c8ab" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">有效标签值:</p><ul class=""><li id="a830" class="la lb iq jw b jx jy kb kc kf lc kj ld kn le kr lf lg lh li bi translated">必须等于或少于63个字符(不能为空)，</li><li id="0a11" class="la lb iq jw b jx lj kb lk kf ll kj lm kn ln kr lf lg lh li bi translated">必须以字母数字字符([a-z0–9A-Z])开始和结束，</li><li id="0cb8" class="la lb iq jw b jx lj kb lk kf ll kj lm kn ln kr lf lg lh li bi translated">可以包含破折号(-)、下划线(_)、点(。)，以及介于之间的字母数字。</li></ul><blockquote class="kt ku kv"><p id="b305" class="ju jv kw jw b jx jy jz ka kb kc kd ke kx kg kh ki ky kk kl km kz ko kp kq kr ij bi translated">为什么我们现在在K8s中需要一个叫做注释的东西？</p></blockquote><p id="b78b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">注释用于为K8对象添加元数据，K8s并不关心这些。因此，注释中使用的键和值没有限制(不像标签)。</p><blockquote class="kt ku kv"><p id="6d57" class="ju jv kw jw b jx jy jz ka kb kc kd ke kx kg kh ki ky kk kl km kz ko kp kq kr ij bi translated"><strong class="jw ir">但是为什么不能用标签代替注释，为什么要增加更多的复杂性</strong>？</p></blockquote><p id="8761" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果有人想要为其他人添加关于给定资源的信息，并且不希望K8s关心它，注释是最好的工作。另外，注释非常灵活，可以无限制地包含任何内容。</p><p id="018a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">下面是注释</strong>的一个例子</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="c8f8" class="lx ly iq lt b gy lz ma l mb mc">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: annotations-demo<br/>  <strong class="lt ir">annotations:</strong><br/>    why_use_this_demo: "<a class="ae ks" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">I</a>t's to learn about annotations"<br/>spec:<br/>  containers:<br/>  - name: nginx<br/>    image: nginx:1.14.2<br/>    ports:<br/>    - containerPort: 80<br/>  selector:<br/>    env: prod</span></pre><blockquote class="kt ku kv"><p id="08be" class="ju jv kw jw b jx jy jz ka kb kc kd ke kx kg kh ki ky kk kl km kz ko kp kq kr ij bi translated">让我们试着注释一个pod</p></blockquote><p id="de91" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们首先创建一个名为pod10的pod。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="e6cc" class="lx ly iq lt b gy lz ma l mb mc">MyK8sInstance&gt; <strong class="lt ir">kubectl run pod10 --image=nginx:alpine --restart=Never</strong><br/>pod/pod10 created</span></pre><p id="0dd9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后用msg注释它，注意它必须是一个键/值对</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="c290" class="lx ly iq lt b gy lz ma l mb mc">MyK8sInstance&gt; <strong class="lt ir">kubectl get po | grep -i pod10</strong><br/>pod10                           1/1     Running            0          22s<br/>MyK8sInstance&gt; <strong class="lt ir">kubectl annotate pod pod10 msg="I like pod10"</strong><br/>pod/pod10 annotated</span></pre><p id="2c2e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了验证注释是否有效</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="f529" class="lx ly iq lt b gy lz ma l mb mc">MyK8sInstance&gt; <strong class="lt ir">kubectl get pod pod10 -o yaml | grep  msg</strong><br/>    msg: I like pod10</span></pre><p id="046f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">就这样吧，下次再见！</p></div></div>    
</body>
</html>