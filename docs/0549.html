<html>
<head>
<title>Clean Code with React, ExpressJS, and MongoDB — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React、ExpressJS和MongoDB清理代码—第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/clean-code-with-react-expressjs-and-mongodb-part-1-aa6b1a4aef82?source=collection_archive---------4-----------------------#2018-03-29">https://itnext.io/clean-code-with-react-expressjs-and-mongodb-part-1-aa6b1a4aef82?source=collection_archive---------4-----------------------#2018-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/48239f8a1815ef8887b5e5bca2ab574f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZW-qoBzuzk_uUHBggnkrQw.jpeg"/></div></div></figure><blockquote class="jy jz ka"><p id="6b19" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fclean-code-with-react-expressjs-and-mongodb-part-1-aa6b1a4aef82%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank"> <em class="iq">点击这里在LinkedIn上分享这篇文章</em> </a></p></blockquote><p id="cbc5" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这是一个简短系列文章的第一部分，重点是使用ES6+ Javascript、React、Redux、ExpressJS和MongoDB创建和部署一个准系统的全栈博客站点。</p><p id="bb47" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">在这些文章中，我真的试图把重点放在我发现的使用ES6+ JavaScript和我称之为“Redux风格”的项目结构来设置和组织我的代码的一些方法上。目标是编写可读、可扩展且易于测试的代码。</p><p id="fd4a" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这个系列将分为几个部分:</p><ol class=""><li id="9289" class="le lf iq ke b kf kg kj kk lb lg lc lh ld li kz lj lk ll lm bi translated">设置ExpressJS以使用ES6+语法👈🏽<em class="kd">你在这里</em></li><li id="7fa0" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated"><a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/clean-code-with-react-expressjs-and-mongodb-part-2-89d20e684820"> Redux风格的文件结构</a></li><li id="703f" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated"><a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/clean-code-with-es6-expressjs-reactjs-part-3-2306b1f62c26">创建简单快速服务器</a></li><li id="b5f5" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">用我们的博客设置Mongoose(即将推出！)</li><li id="c098" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">用CMS创建一个React博客(即将推出！)</li><li id="9170" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">将Redux添加到您的前端(即将推出！)</li><li id="9dba" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">包装您的应用:部署(即将推出！)</li></ol><p id="3381" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi">====</p><p id="a2bc" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">后端的ES6+？当然可以！最新的Javascript语法确实在使代码变得清晰易读方面大有作为。毕竟，<a class="ae la" href="https://mitpress.mit.edu/sicp/front/node3.html" rel="noopener ugc nofollow" target="_blank">代码是给人看的，不是机器看的。</a></p><p id="7871" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">(不是ES6+爱好者？你可能想温习一下语法。这里不做过多解释。)</p><p id="21a1" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">另外，请记住，我们<em class="kd">不会</em>使用测试来开发我们的应用程序。在本教程系列中，这纯粹是为了简单起见。编写好的测试<em class="kd">“àla TDD”</em>是<strong class="ke ir">编写可靠代码的第一步</strong>。</p><h1 id="9c34" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">后端目录布局</h1><p id="b598" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">我们将从创建一个目录开始，该目录具有以下文件结构和一个空的<code class="fe mv mw mx my b">index.js</code>文件:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="2d8b" class="nh lt iq my b gy ni nj l nk nl">📁/<br/> 📂configs/<br/> 📂database/<br/> 📂routes/<br/> 📄index.js</span></pre><h1 id="f2e2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">安装先决条件</h1><h1 id="04e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">故事</h1><p id="15d0" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">我们将使用<strong class="ke ir">线程</strong>而不是<strong class="ke ir"> npm </strong>来安装和运行我们的包。让我们初始化我们的项目。在根目录中，键入:</p><p id="7ba5" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><code class="fe mv mw mx my b">yarn init -y</code></p><p id="1c31" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这将创建一个非常简单的<code class="fe mv mw mx my b">package.json</code>文件，内容如下:</p><p id="9ba8" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><em class="kd">。/package.json: </em></p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="d04a" class="nh lt iq my b gy ni nj l nk nl">{ <br/>  "name": "backend", <br/>  "version": "1.0.0", <br/>  "main": "index.js", <br/>  "license": "MIT" <br/>}</span></pre><h1 id="729f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">ExpressJS</h1><p id="41a9" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">我们将使用<a class="ae la" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> ExpressJS </a>来创建一个服务器。这是一个奇妙的极简NodeJS框架，既强大又灵活。我们还将安装<a class="ae la" href="https://www.npmjs.com/package/nodemon" rel="noopener ugc nofollow" target="_blank"> Nodemon </a>，这是一个很棒的开发工具，可以监视我们的目录变化并重新加载节点服务器。</p><p id="6eb2" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><code class="fe mv mw mx my b">yarn add express nodemon -S</code></p><h1 id="6c7d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">巴比伦式的城市</h1><p id="faf3" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">因为我们在ExpressJS上使用ES6+语法而不是NodeJS，所以我们需要确保将其向下转换到ES5。这涉及几个步骤。</p><h2 id="40d6" class="nh lt iq bd lu nm nn dn ly no np dp mc lb nq nr mg lc ns nt mk ld nu nv mo nw bi translated">1.安装巴别塔软件包</h2><p id="72d5" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">我们将使用巴别塔把我们的包传送到ES5。在这里，我们安装了Babel CLI和“ENV”，后者<a class="ae la" href="https://babeljs.io/docs/plugins/preset-env/" rel="noopener ugc nofollow" target="_blank">“根据您支持的环境自动确定您需要的Babel插件。”</a>。</p><p id="0072" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><code class="fe mv mw mx my b">yarn add babel-cli babel-preset-env -D</code></p><h2 id="0787" class="nh lt iq bd lu nm nn dn ly no np dp mc lb nq nr mg lc ns nt mk ld nu nv mo nw bi translated">2.创建一个<code class="fe mv mw mx my b">.babelrc</code>文件</h2><p id="cb8c" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">现在我们需要创建一个文件，告诉Babel获取最新的NodeJS预置。在根目录下创建一个<code class="fe mv mw mx my b">.babelrc</code>文件，并添加以下代码:</p><p id="104f" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><em class="kd">。/.babelrc: </em></p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="b7ec" class="nh lt iq my b gy ni nj l nk nl">{ <br/>  "presets": <br/>    [ <br/>      [ "env", <br/>        { "targets": <br/>          { "node": "current" } <br/>        } <br/>      ] <br/>    ] <br/>}</span></pre><h2 id="bc74" class="nh lt iq bd lu nm nn dn ly no np dp mc lb nq nr mg lc ns nt mk ld nu nv mo nw bi translated">3.在我们的<code class="fe mv mw mx my b">package.json</code>中创建一个脚本</h2><p id="e8f1" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">让我们打开我们的<code class="fe mv mw mx my b">package.json</code>文件，并使用babel-node预置修改它来运行Nodemon。下面是我们的<code class="fe mv mw mx my b">package.json</code>应该是什么样子(当然不算版本)。</p><p id="f7ba" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><em class="kd">。/package.json: </em></p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="eec1" class="nh lt iq my b gy ni nj l nk nl">{ <br/>  "name": "backend", <br/>  "version": "1.0.0", <br/>  "main": "index.js", <br/>  "license": "MIT", <br/>  "scripts": { <br/>    "start": "nodemon --exec yarn babel-node -- index.js" <br/>    }, <br/>  "dependencies": { <br/>    "express": "^4.16.3", <br/>    "nodemon": "^1.17.2" <br/>  }, <br/>  "devDependencies": { <br/>    "babel-cli": "^6.26.0", <br/>    "babel-preset-env": "^1.6.1" <br/>  } <br/>}</span></pre><p id="f76f" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">🔬该脚本使用Babel-node预置在<code class="fe mv mw mx my b">index.js</code>文件启动Nodemon</p><h2 id="bb14" class="nh lt iq bd lu nm nn dn ly no np dp mc lb nq nr mg lc ns nt mk ld nu nv mo nw bi translated">4.测试一下！</h2><p id="6f42" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">让我们给我们的<code class="fe mv mw mx my b">index.js</code>添加一些代码，看看它是否工作。将下面的测试代码添加到根目录下的<code class="fe mv mw mx my b">index.js</code>中:</p><p id="31f7" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><em class="kd">。/index.js: </em></p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="ffa9" class="nh lt iq my b gy ni nj l nk nl">import express from 'express' console.log('It Works!')</span></pre><p id="5d7d" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果您在终端中输入命令<code class="fe mv mw mx my b">yarn start</code>,您应该会得到类似这样的结果:</p><p id="b294" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><em class="kd">控制台:</em></p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="196f" class="nh lt iq my b gy ni nj l nk nl">yarn run v1.3.2<br/>$ nodemon --exec yarn babel-node -- index.js<br/>[nodemon] 1.17.2<br/>[nodemon] to restart at any time, enter `rs`<br/>[nodemon] watching: *.*<br/>[nodemon] starting `yarn babel-node index.js`<br/>$ /Users/USER/CleanCode/backend/node_modules/.bin/babel-node index.js<br/>It works!<br/>[nodemon] clean exit - waiting for changes before restart</span></pre><p id="f732" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这正是我们想要的。它向我们展示了我们能够使用ES6+语法运行<code class="fe mv mw mx my b">index.js</code>文件。它做的不多，但这是一个很好的开始，也正是我们需要的开始。</p><h1 id="bae8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">下一步是什么？</h1><p id="3446" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">在本文中，我们学习了如何在ExpressJS服务器中启用ES6+ JavaScript语法。在下一篇文章中，我们将学习“Redux style”导出/导入技术，它可以确保更准确的代码和更少的麻烦。敬请期待！</p></div></div>    
</body>
</html>