<html>
<head>
<title>Are you doing GitHub checks?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你在做GitHub检查吗？</h1>
<blockquote>原文：<a href="https://itnext.io/are-you-doing-github-checks-9f8b3d6f41a5?source=collection_archive---------6-----------------------#2019-05-17">https://itnext.io/are-you-doing-github-checks-9f8b3d6f41a5?source=collection_archive---------6-----------------------#2019-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f35ae73558b9a19decf3b5c8d2d8f5be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6EBoggx6v4GS5NJS86zTSA.png"/></div></div></figure><div class=""/><p id="f69c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">没有任何借口——在<strong class="ka jc">的15分钟</strong>里，我得到了对我们主要分支机构每个公关<strong class="ka jc">的运行检查。而且是<strong class="ka jc">免费</strong>！</strong></p><p id="45a3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GitHub check是什么？这是一种自动检查源代码的方式。比如它<strong class="ka jc">造</strong>吗？它是否通过了<strong class="ka jc">测试</strong>？通过林挺的了吗？做所有电脑<strong class="ka jc">擅长</strong>和人<strong class="ka jc">容易<strong class="ka jc">错过</strong>的繁琐工作。</strong></p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi kw"><img src="../Images/85e8e0509a4cf219fa69ce9df3106d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cKkH6Lh9kTFqRHC4fjbSjw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">一个拉取请求，它触发了一个检查并返回OK</figcaption></figure><p id="4879" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<strong class="ka jc">检查</strong>的<strong class="ka jc">项目</strong>是一个有角度的<strong class="ka jc"> </strong>单页应用程序。它使用<a class="ae lf" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a> <strong class="ka jc"> </strong>和<a class="ae lf" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>，<a class="ae lf" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a> <strong class="ka jc"> </strong>进行单元测试，使用<a class="ae lf" href="https://palantir.github.io/tslint/" rel="noopener ugc nofollow" target="_blank"> TSlint </a>捕捉类似于<code class="fe lg lh li lj b"><a class="ae lf" href="https://jasmine.github.io/2.1/focused_specs.html" rel="noopener ugc nofollow" target="_blank">fit</a></code>、<code class="fe lg lh li lj b"><a class="ae lf" href="https://jasmine.github.io/2.1/focused_specs.html" rel="noopener ugc nofollow" target="_blank">fdescribe</a></code>、<code class="fe lg lh li lj b">console.log</code>之类的东西以及类似的错误检入的代码。</p><p id="2822" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">检查</strong>的<strong class="ka jc">目标</strong>是让构建、<strong class="ka jc">单元测试</strong>和<strong class="ka jc">林挺</strong>在之前运行<strong class="ka jc"><strong class="ka jc">PR</strong>(拉请求)<strong class="ka jc"> </strong>已经被<strong class="ka jc">合并</strong>。所以它会在每个人的签出代码结束之前捕捉到一个坏的构建。或者是一个失败的测试。还是一辆<code class="fe lg lh li lj b">debugger</code>入住。<br/>如果代码审查已经完成，那么<strong class="ka jc">审查者</strong>将能够专注于更<strong class="ka jc">高层次的</strong>东西，并确信计算机完成了令人厌烦的部分。</strong></p><p id="94ff" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">酷，那我们怎么做？</p><p id="565c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个项目是利用<strong class="ka jc">詹金斯</strong>的工作建立起来的，有几天，我努力让詹金斯在新的公关事件上做点什么。<strong class="ka jc">做不到</strong>做不到。我更习惯于Azure DevOps(以前的VSTS)，我决定尝试一下。去了<a class="ae lf" href="https://github.com/marketplace?category=continuous-integration&amp;query=azure" rel="noopener ugc nofollow" target="_blank">https://github.com/marketplace?category = continuous-integration&amp;query = azure</a>并搜索“azure”:</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lk"><img src="../Images/e4d7b1dca02c88155b6fdd090330ea9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-J5Hgtu_15SIiXw5_fObg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">点击了Azure管道。</figcaption></figure><div class="ip iq gp gr ir ll"><a href="https://github.com/marketplace/azure-pipelines" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd jc gy z fp lq fr fs lr fu fw ja bi translated">这是GitHub Marketplace中Azure管道的链接</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">持续构建、测试和部署到任何平台和云</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">github.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz ix ll"/></div></div></a></div><p id="f029" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:如果已经安装了Azure Pipelines，你会看到文章末尾显示的屏幕。*</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ma"><img src="../Images/5dc8c4a64c32fc71c5c472a92e54d52e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lQ8htcDvSytGc7nfRDDAw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">为所有项目安装或只选择一个项目。</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/5fa3a5535918d2b471483617e19ede62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*nzLu4zWR2ysIMPTXwts2BQ.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">登录后看到这个。选择“创建新项目”。</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mc"><img src="../Images/207eb6f61f6f26fbfce7565f67a5e132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NFOXms8FRSi2qBNiV3ui0w.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">我将在这里选择我的回购— devops-demo。</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi md"><img src="../Images/e51f0079c5d2fa5e14fa7c6a8f40da7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9YWbTo71vNSAnUb5qSB2jw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">下一步是选择一个模板。在我的例子中，<strong class="bd me"> Angular </strong>是显而易见的选择。下一步，我们可以<strong class="bd me">定制</strong>模板</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mf"><img src="../Images/9cc85da5fc99da0dea6f094d2a5e833b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZxTssdiPX7et_QVHx7Jaw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">是它最初的样子。</figcaption></figure><p id="6c72" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">给定这个脚本—对master的任何更改都将触发构建。这可能是我们在某些情况下需要的——例如<strong class="ka jc">持续集成</strong>。在我们的情况下，我们需要别的东西。稍后会有更多的介绍。首先—点击右侧的“<strong class="ka jc">保存并运行</strong>”按钮，这将让您选择是提交给<em class="mg">主</em>还是用<code class="fe lg lh li lj b">azure-pipelines.yml</code>文件开始一个拉取请求。<strong class="ka jc">或者</strong>起作用，你最终将管道<strong class="ka jc">配置为代码</strong>检入<strong class="ka jc">沿着</strong>以<strong class="ka jc">代码</strong>构建！干净利落。这是我的第一个版本。</p><p id="e9e3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，让我们将脚本<code class="fe lg lh li lj b">azure-pipelines.yml</code>更改为仅在pull请求时触发:</p><figure class="kx ky kz la gt is"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">我留下了一些详细描述步骤的评论。</figcaption></figure><p id="e1e5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，我们在签入和合并时显式地停止了构建。只在PR-s上触发它。这将<strong class="ka jc">只</strong>做<strong class="ka jc">检查</strong>。在工作中，我们在AWS机器上进行由Jenkins编排的实际持续集成构建。</p><h2 id="eb68" class="mj mk jb bd me ml mm dn mn mo mp dp mq kj mr ms mt kn mu mv mw kr mx my mz na bi translated">开始公关</h2><p id="b844" class="pw-post-body-paragraph jy jz jb ka b kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ij bi translated">启动PR后，我们可以看到，几秒钟后检查就开始了:</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/188c3f6f7f5e7ac70a32a34e1d94c0ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jjrNqPPAzx2d3Gt7jS_bOA.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">如果一切顺利，我们可以看到舒缓的绿色滴答声:)</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi kw"><img src="../Images/85e8e0509a4cf219fa69ce9df3106d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cKkH6Lh9kTFqRHC4fjbSjw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://github.com/gparlakov/devops-demo/pull/2/checks" rel="noopener ugc nofollow" target="_blank">这是实际公关检查的链接</a></figcaption></figure><h2 id="61ca" class="mj mk jb bd me ml mm dn mn mo mp dp mq kj mr ms mt kn mu mv mw kr mx my mz na bi translated">断裂的棉绒</h2><p id="70ae" class="pw-post-body-paragraph jy jz jb ka b kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ij bi translated">当我们打破一个测试，或者构建，或者我们的一个林挺规则，我们会看到一些即时的反馈。例如，我忘记了一个<a class="ae lf" href="https://github.com/gparlakov/devops-demo/pull/3/checks?check_run_id=128845520" rel="noopener ugc nofollow" target="_blank">公关#3 </a>中的<code class="fe lg lh li lj b">fit</code>电话:</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/379e4ff07bb7255f224c239c2e3962ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VHo8ytsJdKPv7juSxf5_hA.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">在支票中，在到达主分支之前，我们看到:</figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/20e745e45c27cf0bd67076cd07eda9c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ecOOzaO_PGQ6U5XwiSyNg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://github.com/gparlakov/devops-demo/pull/3" rel="noopener ugc nofollow" target="_blank">https://github.com/gparlakov/devops-demo/pull/3</a></figcaption></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/57168abdebe397a98a566b0447779ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1GNRi7WceMae1w2ccowYQ.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://dev.azure.com/gparlakov/DevOps_Project/_build/results?buildId=10" rel="noopener ugc nofollow" target="_blank">https://dev . azure . com/gparlakov/devo PS _ Project/_ build/results？buildId=10 </a></figcaption></figure><p id="4045" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我真的很喜欢这个反馈！</p><blockquote class="nk nl nm"><p id="e042" class="jy jz mg ka b kb kc kd ke kf kg kh ki nn kk kl km no ko kp kq np ks kt ku kv ij bi translated">…该检查仅在<strong class="ka jc"> PR </strong>上<strong class="ka jc">执行，并且<strong class="ka jc">不会影响</strong>您可能拥有的任何其他持续集成或部署</strong></p></blockquote></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="a846" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">总而言之，该检查仅在<strong class="ka jc"> PR </strong>上<strong class="ka jc">执行，并且<strong class="ka jc">不会影响</strong>您可能拥有的任何其他持续集成或部署。它旨在提供快速反馈。</strong></p><p id="776d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是Azure项目<a class="ae lf" href="https://dev.azure.com/gparlakov/DevOps_Project/_build?definitionId=3" rel="noopener ugc nofollow" target="_blank">链接</a>。这是公开的——去看看吧。https://github.com/gparlakov/devops-demo<br/>和GitHub回购<a class="ae lf" href="https://github.com/gparlakov/devops-demo" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="d4a6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于文章开头的免费部分。我知道这很难相信，但事实是这样的:</p><ul class=""><li id="1d2e" class="nx ny jb ka b kb kc kf kg kj nz kn oa kr ob kv oc od oe of bi translated">对于公共回购-像<a class="ae lf" href="https://github.com/gparlakov/devops-demo" rel="noopener ugc nofollow" target="_blank">这一个</a>-无限分钟10个并行作业</li><li id="f84d" class="nx ny jb ka b kb og kf oh kj oi kn oj kr ok kv oc od oe of bi translated">对于私人回购—每月1份工作和1800分钟。喜欢这个项目，我一开始就描述过。我们是一个由5人组成的团队，积极参与，每月做大约1000分钟。</li></ul></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="3272" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">*如果您的回购上预装了pipeline应用程序，您将会看到:</p><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/da56fe106a1d5ea79f7e2c923be00d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnxqZ4osjL5PiwStJ7s4UQ.png"/></div></div></figure><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi om"><img src="../Images/008c0c6a600c62f425e897d9b7e527a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du8CEq0QGiLj5ugY4hEHRg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">并继续到一个类似于上面的“安装Azure Pipelines”的屏幕，在那里你选择应用程序将被安装到哪个仓库。</figcaption></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="9bd5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者，如果开始一个全新的项目:</p><ul class=""><li id="2c2d" class="nx ny jb ka b kb kc kf kg kj nz kn oa kr ob kv oc od oe of bi translated">看一看<a class="ae lf" href="http://donovanbrown.com/post/yo-Team" rel="noopener ugc nofollow" target="_blank">哟团队</a></li><li id="4d74" class="nx ny jb ka b kb og kf oh kj oi kn oj kr ok kv oc od oe of bi translated">如果只是创建GitHub repo，并且已经安装了Azure Pipelines GitHub应用程序，您可以在repo创建时立即添加它:</li></ul><figure class="kx ky kz la gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/f998f436068b4c400406790e4fe173b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bbR1mfNoPNe7w9Jj_fXS_w.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">通过选中底部附近的复选框，在创建repo时添加Azure管道。</figcaption></figure></div></div>    
</body>
</html>