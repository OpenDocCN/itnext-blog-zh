<html>
<head>
<title>Observability strategies to not overload engineering teams — Proxy Strategy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不使工程团队超负荷的可观察性策略——代理策略</h1>
<blockquote>原文：<a href="https://itnext.io/observability-strategies-to-not-overload-engineering-teams-proxy-strategy-607d1007688?source=collection_archive---------3-----------------------#2022-10-06">https://itnext.io/observability-strategies-to-not-overload-engineering-teams-proxy-strategy-607d1007688?source=collection_archive---------3-----------------------#2022-10-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9547" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">web代理是开始收集遥测数据的理想场所，不需要任何工程工作。</h2></div><p id="b128" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在我的第一篇文章中提到的策略之一，<a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/observability-strategies-to-not-overload-engineering-teams-b2b53cc2b22f">不使工程团队过载的可观察性策略</a>，是从通常在你服务之前就存在的代理那里收集遥测数据。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/f2a081dc361f437135843220f4a0a2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xXxHcQWBKe3lJVuUXXOuHQ.jpeg"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">图片来自istockphoto.com</figcaption></figure><p id="0a9e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今天，我将向您展示如何使用诸如<a class="ae lb" href="https://prometheus.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">【普罗米修斯】</strong> </a>和<a class="ae lb" href="https://www.jaegertracing.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> Jaeger </strong> </a> <strong class="kh ir">等开源解决方案从<a class="ae lb" href="https://www.nginx.com/" rel="noopener ugc nofollow" target="_blank"> NGINX代理</a>收集指标和跟踪。</strong></p><p id="0f79" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ls">为了让内容更干净，我打算省去一些像Prometheus和NGINX这样的设置。</em></p><h2 id="39f6" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">服务基础设施</h2><p id="104a" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">使用下面的配置，让我们构建一个假场景，使用一个echo服务器来模拟NGINX代理后面的两个应用程序。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><a href="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&amp;t=one-dark&amp;wt=none&amp;l=auto&amp;width=680&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=version%253A%2520%273.8%27%250Aservices%253A%250A%2520%2520proxy%253A%250A%2520%2520%2520%2520image%253A%2520nginx%250A%2520%2520%2520%2520container_name%253A%2520proxy%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520ports%253A%250A%2520%2520%2520%2520%2520%2520-%25208080%253A8080%250A%2520%2520%2520%2520volumes%253A%250A%2520%2520%2520%2520%2520%2520-%2520.%252Fconf%252Fnginx%252Fnginx.conf%253A%252Fetc%252Fnginx%252Fnginx.conf%250A%2520%2520checkoutapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520checkoutapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Checkout%2520API%2522%250A%2520%2520paymentapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520paymentapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Payment%2520API%2522"><div class="gh gi mr"><img src="../Images/5d5107628d38c972de0053be8276a539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5s49lpYCAJBxmlEz2QZlZw.png"/></div></a><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><a class="ae lb" href="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&amp;t=one-dark&amp;wt=none&amp;l=auto&amp;width=680&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=version%253A%2520%273.8%27%250Aservices%253A%250A%2520%2520proxy%253A%250A%2520%2520%2520%2520image%253A%2520nginx%250A%2520%2520%2520%2520container_name%253A%2520proxy%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520ports%253A%250A%2520%2520%2520%2520%2520%2520-%25208080%253A8080%250A%2520%2520%2520%2520volumes%253A%250A%2520%2520%2520%2520%2520%2520-%2520.%252Fconf%252Fnginx%252Fnginx.conf%253A%252Fetc%252Fnginx%252Fnginx.conf%250A%2520%2520checkoutapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520checkoutapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Checkout%2520API%2522%250A%2520%2520paymentapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520paymentapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Payment%2520API%2522" rel="noopener ugc nofollow" target="_blank">应用Docker编写</a></figcaption></figure><p id="6992" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在启动环境之后，您将有两个不同的服务正在运行，并且可以通过以下地址进行访问。</p><ul class=""><li id="2376" class="ms mt iq kh b ki kj kl km ko mu ks mv kw mw la mx my mz na bi translated"><a class="ae lb" href="http://localhost:8080/checkouts" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/check out</a></li><li id="6213" class="ms mt iq kh b ki nb kl nc ko nd ks ne kw nf la mx my mz na bi translated"><a class="ae lb" href="http://localhost:8080/checkouts" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/p </a>付款</li></ul><h2 id="71f8" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">收集指标</h2><p id="46a9" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">我们必须利用NGINX导出器来收集指标，因为NGINX默认情况下不会公开它们。</p><p id="6198" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> NGINX导出器</strong></p><p id="19c9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要启用NGINX导出器，我们只需将以下配置添加到docker-compose文件中。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><a href="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&amp;t=one-dark&amp;wt=none&amp;l=auto&amp;width=680&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=version%253A%2520%273.8%27%250Aservices%253A%250A%2520%2520proxy%253A%250A%2520%2520%2520%2520image%253A%2520nginx%250A%2520%2520%2520%2520container_name%253A%2520proxy%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520ports%253A%250A%2520%2520%2520%2520%2520%2520-%25208080%253A8080%250A%2520%2520%2520%2520volumes%253A%250A%2520%2520%2520%2520%2520%2520-%2520.%252Fconf%252Fnginx%252Fnginx.conf%253A%252Fetc%252Fnginx%252Fnginx.conf%250A%2520%2520checkoutapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520checkoutapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Checkout%2520API%2522%250A%2520%2520paymentapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520paymentapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Payment%2520API%2522"><div class="gh gi ng"><img src="../Images/9a3d32cf7f1e175ea94250c4108881ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vh-d7ikwiL90Dyk02q6ZJA.png"/></div></a><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><a class="ae lb" href="https://carbon.now.sh/?bg=rgba%28171%2C+184%2C+195%2C+1%29&amp;t=one-dark&amp;wt=none&amp;l=auto&amp;width=680&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=version%253A%2520%273.8%27%250Aservices%253A%250A%2520%2520proxy%253A%250A%2520%2520%2520%2520image%253A%2520nginx%250A%2520%2520%2520%2520container_name%253A%2520proxy%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520ports%253A%250A%2520%2520%2520%2520%2520%2520-%25208080%253A8080%250A%2520%2520%2520%2520volumes%253A%250A%2520%2520%2520%2520%2520%2520-%2520.%252Fconf%252Fnginx%252Fnginx.conf%253A%252Fetc%252Fnginx%252Fnginx.conf%250A%2520%2520checkoutapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520checkoutapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Checkout%2520API%2522%250A%2520%2520paymentapi%253A%250A%2520%2520%2520%2520image%253A%2520hashicorp%252Fhttp-echo%250A%2520%2520%2520%2520container_name%253A%2520paymentapi%250A%2520%2520%2520%2520restart%253A%2520unless-stopped%250A%2520%2520%2520%2520command%253A%2520-text%253D%2522Payment%2520API%2522" rel="noopener ugc nofollow" target="_blank"> NGINX导出器</a></figcaption></figure><p id="4b40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果目前提供的NGINX指标不足以满足您的用例，请查看<a class="ae lb" href="https://blog.ruanbekker.com/blog/2020/04/25/nginx-metrics-on-prometheus-with-the-nginx-log-exporter/" rel="noopener ugc nofollow" target="_blank">这篇</a>令人难以置信的文章，它展示了如何使用NGINX日志来生成Prometheus指标。</p><h2 id="660e" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">收集痕迹</h2><p id="d90f" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">因为我已经使用了NGINX docker映像，并在这个例子中嵌入了OpenTracing模块，所以我们只需要提供下面的配置。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><a href="https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&amp;t=one-dark&amp;wt=none&amp;l=application%2Fjson&amp;width=680&amp;ds=false&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%257B%250A%2520%2520%2520%2520%2522service_name%2522%253A%2520%2522nginx_proxy%2522%252C%250A%2520%2520%2520%2520%2522diabled%2522%253A%2520false%252C%250A%2520%2520%2520%2520%2522reporter%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522logSpans%2522%253A%2520true%252C%250A%2520%2520%2520%2520%2520%2520%2522localAgentHostPort%2522%253A%2520%2522jaeger%253A6831%2522%250A%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2522sampler%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522type%2522%253A%2520%2522const%2522%252C%250A%2520%2520%2520%2520%2520%2520%2522param%2522%253A%2520%25221%2522%250A%2520%2520%2520%2520%257D%250A%257D"><div class="gh gi nl"><img src="../Images/4bb25579cca6d86bfe63f4ce19a1a871.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y_OPuIeKPn0CjxNHXDGhqQ.png"/></div></a><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><a class="ae lb" href="https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&amp;t=one-dark&amp;wt=none&amp;l=application%2Fjson&amp;width=680&amp;ds=false&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%257B%250A%2520%2520%2520%2520%2522service_name%2522%253A%2520%2522nginx_proxy%2522%252C%250A%2520%2520%2520%2520%2522diabled%2522%253A%2520false%252C%250A%2520%2520%2520%2520%2522reporter%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522logSpans%2522%253A%2520true%252C%250A%2520%2520%2520%2520%2520%2520%2522localAgentHostPort%2522%253A%2520%2522jaeger%253A6831%2522%250A%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2522sampler%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522type%2522%253A%2520%2522const%2522%252C%250A%2520%2520%2520%2520%2520%2520%2522param%2522%253A%2520%25221%2522%250A%2520%2520%2520%2520%257D%250A%257D" rel="noopener ugc nofollow" target="_blank"> jaeger-config.json </a></figcaption></figure><p id="5f7b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个配置对每个发送给NGINX代理的HTTP请求进行采样，并将其发送给Jaeger。</p><h2 id="456f" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">可观测性基础设施</h2><p id="6cf5" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">要启动<strong class="kh ir">普罗米修斯</strong>和<strong class="kh ir">耶格</strong>，你只需要运行以下容器:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><a href="https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&amp;t=one-dark&amp;wt=none&amp;l=application%2Fjson&amp;width=680&amp;ds=false&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%257B%250A%2520%2520%2520%2520%2522service_name%2522%253A%2520%2522nginx_proxy%2522%252C%250A%2520%2520%2520%2520%2522diabled%2522%253A%2520false%252C%250A%2520%2520%2520%2520%2522reporter%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522logSpans%2522%253A%2520true%252C%250A%2520%2520%2520%2520%2520%2520%2522localAgentHostPort%2522%253A%2520%2522jaeger%253A6831%2522%250A%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2522sampler%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522type%2522%253A%2520%2522const%2522%252C%250A%2520%2520%2520%2520%2520%2520%2522param%2522%253A%2520%25221%2522%250A%2520%2520%2520%2520%257D%250A%257D"><div class="gh gi nm"><img src="../Images/f1df2e8cee5034e73a01096ad0f7a1a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEJdsyAh1Ek4uNSyMe03iw.png"/></div></a><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated"><a class="ae lb" href="https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&amp;t=one-dark&amp;wt=none&amp;l=application%2Fjson&amp;width=680&amp;ds=false&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%257B%250A%2520%2520%2520%2520%2522service_name%2522%253A%2520%2522nginx_proxy%2522%252C%250A%2520%2520%2520%2520%2522diabled%2522%253A%2520false%252C%250A%2520%2520%2520%2520%2522reporter%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522logSpans%2522%253A%2520true%252C%250A%2520%2520%2520%2520%2520%2520%2522localAgentHostPort%2522%253A%2520%2522jaeger%253A6831%2522%250A%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2522sampler%2522%253A%2520%257B%250A%2520%2520%2520%2520%2520%2520%2522type%2522%253A%2520%2522const%2522%252C%250A%2520%2520%2520%2520%2520%2520%2522param%2522%253A%2520%25221%2522%250A%2520%2520%2520%2520%257D%250A%257D" rel="noopener ugc nofollow" target="_blank">可观测性基础设施</a></figcaption></figure><h2 id="c872" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">最后的结果</h2><p id="59be" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">是时候看结果了；所有这些配置将支持我们收集遥测数据，这些数据将有助于整个公司开始采用可观测性，而无需工程努力。</p><p id="157e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">普罗米修斯</strong></p><p id="0c91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谈到指标，我们现在可以查询NGINX服务器处理的HTTP请求的数量，以及关于NGINX代理的许多其他指标。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nn"><img src="../Images/38503b1eb55bc774c5f0f37f4c888ad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L3ls7XMq1sN8hwLaGwOGGw.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">NGINX — HTTP请求总数指标</figcaption></figure><p id="0eb5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">追踪</strong></p><p id="b111" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Tracing视图中，我们可以跟踪整个平台上的请求流，并收集有用的数据来帮助团队理解性能问题以及复杂的分布式体系结构。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nn"><img src="../Images/bba2eaa0f76322a42afb83d7bda60d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kWH4VtTb1rDJOgH22Tkk2w.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">Jaeger —轨迹视图</figcaption></figure><h2 id="ec02" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">结论</h2><p id="b73b" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">这是一个非常简单的例子，其主要思想是提供关于可以从代理层收集什么类型的遥测数据的见解；如果您需要更多的细节和上下文，您可以利用日志信息来生成详细的度量或者向跟踪添加额外的元数据。</p><p id="ba32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的<a class="ae lb" href="https://github.com/nicolastakashi/o11y-strategies-medium" rel="noopener ugc nofollow" target="_blank"> GitHub账户</a>上有这段代码，你可以随意查看它，并在你的本地环境中运行它。</p><p id="5d01" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我知道你是否正在利用你的公司来收集遥测数据或打算使用它。</p><p id="b50f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谢谢😃</p></div></div>    
</body>
</html>