<html>
<head>
<title>Setup AdminBro for NestJS application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为NestJS应用程序设置AdminBro</h1>
<blockquote>原文：<a href="https://itnext.io/setup-adminbro-for-nestjs-application-de5bc12bc3b3?source=collection_archive---------0-----------------------#2020-07-31">https://itnext.io/setup-adminbro-for-nestjs-application-de5bc12bc3b3?source=collection_archive---------0-----------------------#2020-07-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/2332b36879e86426f946b305941d7aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PncahZqWklu-JGH2mrritQ.png"/></div></div></figure><p id="789d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="kz">在这个简短的教程中，我将展示如何向您的NestJS应用程序添加一个多功能的Django风格的管理面板。您可以使用这些知识在10分钟内构建一个有效的工具来管理不同种类的数据。</em></p><h1 id="0be0" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">简介</strong></h1><p id="1381" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">NestJS是一个进步的Node.js框架，它允许我们构建高效、可靠和可伸缩的服务器端应用程序。当我们创建这样的应用程序时，通常我们需要一个现成的用户界面来进行管理活动，允许我们管理实体。</p><p id="2adc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">作为一名长期的ruby-on-rails开发人员，我使用Active Admin插件来生成管理风格的界面。它抽象了常见的业务应用程序模式，使开发人员可以轻松实现漂亮优雅的界面。这是我在NestJS应用程序中寻找的东西。</p><p id="a205" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我坚信在不久的将来,<a class="ae md" href="https://nestjs-admin.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> nestjs-admin </strong> </a>会成为这样一个解决方案，但是就目前而言，依我个人的拙见，它还没有准备好进行有效的商业应用。所以经过一些研究，我发现了<a class="ae md" href="https://adminbro.com/" rel="noopener ugc nofollow" target="_blank">AdminBro</a>——一个为Node.js应用程序自动生成的管理面板，它似乎满足了我的所有需求。然而，从一开始，AdminBro只为Express和哈比神框架提供插件。只要NestJS构建在express.js之上，集成它应该不会太复杂。</p><p id="d5b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，在这篇简短的教程中，我将介绍如何将AdminBro backoffice添加到您的NestJS应用程序中。你可以用这些知识在10分钟内建立一个有效的工具来管理不同种类的数据。</p><h1 id="1d09" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">设置应用程序</strong></h1><p id="c49f" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">因此，让我们开始使用Nest CLI创建一个新项目</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="502f" class="mn lb it mj b gy mo mp l mq mr">npm i -g @nestjs/cli<br/>nest new project-name</span></pre><p id="fe5d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了方便起见，这个项目以GitHub库<a class="ae md" href="https://github.com/SergeyMell/admin-bro-example" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">的形式发布</strong> </a>，并且每个步骤都有单独的标签，这样你就可以跟踪变更的历史，或者简单地提取并检查最终结果。</p><p id="0567" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好了，现在让我们将admin bro插件和依赖项添加到项目中。<br/>安装AdminBro和express插件</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e39f" class="mn lb it mj b gy mo mp l mq mr">npm install -S admin-bro admin-bro-expressjs</span></pre><p id="4a5f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，我们必须添加<code class="fe ms mt mu mj b">express-formidable</code>包，只要它是<code class="fe ms mt mu mj b">admin-bro-expressjs</code>的对等依赖项:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f230" class="mn lb it mj b gy mo mp l mq mr">npm install -S express express-formidable</span></pre><p id="667e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">只要我们安装了所有的依赖项，就让我们创建初始化函数。只需用下面的上下文创建<code class="fe ms mt mu mj b">src/admin-panel/admin-panel.plugin.ts</code>文件</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="ak">src/admin-panel/admin-panel . plugin . ts</strong></figcaption></figure><p id="d824" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有了这个我们可以像这样调用<code class="fe ms mt mu mj b">main.ts</code>中的初始化函数</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="ak"> src/main.ts </strong></figcaption></figure><p id="77fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">容易理解的是，<code class="fe ms mt mu mj b">app</code>对象只是对<code class="fe ms mt mu mj b">express.js</code>应用程序的包装，因此我们可以应用所有的<a class="ae md" href="https://adminbro.com/tutorial-installation-instructions.html" rel="noopener ugc nofollow" target="_blank"> express相关的admin bro文档部分</a>。</p><p id="04bd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">按照说明，我们可以用适当的代码完成初始化功能，在第一阶段，它应该如下所示</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="ak">src/admin-panel/admin-panel . plugin . ts</strong></figcaption></figure><p id="948a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们应该重启应用程序，之后，如果我们转到应用程序的<code class="fe ms mt mu mj b">/admin</code>路径，我们可以看到鼓舞人心的页面</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/9b24eef7800087280ebc27fe942221ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GQip7AYD3nvzA1vu"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="bd lc">清空管理面板仪表板</strong></figcaption></figure><p id="7bc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好了，我们似乎走在正确的道路上，现在让我们开始管理我们的实体。</p><h1 id="bbd7" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">配置资源</strong></h1><p id="8b48" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在让我们转到文章的中心思想——管理实体。首先，我们应该添加数据库集成和创建一些实例，即<code class="fe ms mt mu mj b">User</code>。我认为没有必要详细强调这些步骤，因为<a class="ae md" href="https://docs.nestjs.com/techniques/database" rel="noopener ugc nofollow" target="_blank"> NestJS文档</a>已经足够全面了，所以我将只强调一些重要的要点。</p><p id="09d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于这个例子，我选择TypeORM有两个原因。第一个——对我来说，它更接近内斯特的“精神”,与它结合起来更自然。第二个——admin bro没有现成的TypeORM支持，所以这使得实现有点复杂。</p><p id="0ecd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在所有操作之后，您的用户实体可能如下所示(确保从<code class="fe ms mt mu mj b">BaseEntity</code>继承，尽管NestJS文档缺少这一点)</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="ak">src/users/entities/user . entity . ts</strong></figcaption></figure><p id="6d2b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于AdminBro不支持从盒子里取出的TypeORM，我们将添加一个非官方的<code class="fe ms mt mu mj b">admin-bro-typeorm</code> <a class="ae md" href="https://www.npmjs.com/package/admin-bro-typeorm" rel="noopener ugc nofollow" target="_blank">包</a></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5c7a" class="mn lb it mj b gy mo mp l mq mr">npm i -S admin-bro-typeorm</span></pre><p id="300a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">并注册它:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><code class="fe ms mt mu mj b"><strong class="ak">src/admin-panel/admin-panel.plugin.ts</strong></code></figcaption></figure><p id="4255" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在管理面板被配置为使用适配器之后，是时候创建一个资源来管理<code class="fe ms mt mu mj b">User</code>实体了。我更喜欢将所有的管理资源存储在带有<code class="fe ms mt mu mj b">[entity].resource.ts</code>命名约定的<code class="fe ms mt mu mj b">src/admin-panel/resources</code>文件夹中。</p><p id="bedc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用最简单的方式，您的资源可以简单地看起来像<code class="fe ms mt mu mj b">export default User;</code>。然而，在许多情况下，您需要添加一些额外的选项、额外的动作和定制组件，所以我更喜欢以一种更通用的形式来放置资源</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="ak">src/管理面板/资源/用户.资源. ts </strong></figcaption></figure><p id="1a32" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完成这些之后，剩下的最后一件事就是将它添加到AdminBro构造函数的<code class="fe ms mt mu mj b">resources: []</code>块中的AdminBro资源列表中。</p><p id="2b5b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，您可以打开管理面板，为您的应用程序创建几个新用户。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/55a4628b474ac636e057edcf58e93f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNqbGUP0CJo0oQhfSzLA1g.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated"><strong class="bd lc">从管理仪表板创建第一个用户</strong></figcaption></figure><h1 id="ea0f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">编后记</h1><p id="e8b6" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">这是如何为NestJS应用程序设置管理面板的第一步。我强烈建议浏览文档并发现大量AdminBro特性，包括授权、附加集合、成员和批量操作、定制组件以及更多有用的东西。</p><p id="56bd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果有任何问题或者你感兴趣的其他话题，请随时在评论中告诉我。跟着我上<a class="ae md" href="https://medium.com/@sergey.mell" rel="noopener">媒</a>。</p></div></div>    
</body>
</html>