<html>
<head>
<title>Vuex made simple — getting started!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuex变得简单—开始使用！</h1>
<blockquote>原文：<a href="https://itnext.io/vuex-made-simple-getting-started-6bf229d432cf?source=collection_archive---------0-----------------------#2019-01-22">https://itnext.io/vuex-made-simple-getting-started-6bf229d432cf?source=collection_archive---------0-----------------------#2019-01-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e37232974adc3bf1beacac346f3e9383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysmNPSqgFe9DtqkKhooVfg.jpeg"/></div></div></figure><p id="6ec1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">本教程的目标是通过创建一个相关的例子，让你对使用Vuex的状态管理有一个基本的了解。到本文结束时，我希望您对使用Vuex的状态管理有更好的理解！</p><h1 id="6acf" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">状态管理术语</h1><p id="6315" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">简而言之:你的<em class="mc">状态</em>存储在一个叫做<em class="mc">的对象中。</em>要修改状态，您可以使用<em class="mc">动作</em>和<em class="mc">突变</em>，它们也存储在存储器中。</p><h2 id="17f0" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">状态</h2><p id="b428" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><em class="mc">状态</em>是存储在应用程序中的数据。您的组件可以“接收”这些数据，当它发生变化时，您的组件将会自我更新。这是你的应用程序中“唯一的真实来源”。</p><h2 id="07ca" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">商店</h2><p id="7226" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><em class="mc">存储</em>管理状态。它应该只是从内的<em class="mc">变异而来，所以外部组件不能直接修改状态。为了改变状态，组件可以分派一个动作或者提交一个改变。</em></p><h2 id="9165" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">吸气剂</h2><p id="78bb" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><em class="mc"> Getters </em>根据存储状态计算属性。您可以在您的操作中或者直接在您的组件中使用它们。如果几个组件需要基于商店数据计算相同的事情，这是很有用的，您可以在一个地方完成，而不必为每个组件单独完成。</p><h2 id="64ca" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">行动</h2><p id="3a96" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><em class="mc">一个动作</em>包含<em class="mc">业务逻辑</em>，它不关心直接更新状态。原因是动作是<strong class="kd iu">异步的</strong>(即使动作还没有完成，你的代码也可以继续运行)，这在你需要等待从API接收数据时很有用。一个动作将分派一个突变，该突变将直接更新状态。</p><h2 id="0d4e" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">突变</h2><p id="fbfb" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">要更新状态，你需要<em class="mc">提交一个突变</em>。变异不关心业务逻辑，它的唯一目的是更新状态。一个变异是<strong class="kd iu">同步</strong>(你的代码必须等到变异完成)。突变应该是用来更新状态的唯一方式，以保持状态管理的可预测性。</p><h1 id="c4d7" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">让我们从例子开始吧！</h1><p id="53de" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">让我们来看看“李氏电子商店”。拉里(动作)在电视部工作。他监督珍妮(突变)，她的唯一工作是从库存(国家)中挑选电视。</p><p id="414b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">举个例子:目前有10台电视库存。一位客户(组件)来到商店购买一台新电视。她与拉里(动作)交谈，拉里让珍妮(变异)从架子上拿一台电视。走进来的顾客现在可以看到只剩下9台电视了(国家)。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/59674cfe462fab52b05501266bb786ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AplRO74GkqeirfIXJLUaFA.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">使用动作和突变简单概述我们的(电子)商店</figcaption></figure><p id="dd0b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就像真实的商店一样，我们可以有多个客户查看电视库存，也可以有多个客户打电话给Larry。</p><p id="4ac3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，另一个客户(另一个组件)购买了9台电视，Larry要求Jenny(变异)将这些电视从库存货架上移除。其他看电视的顾客现在注意到没有电视了，所以他们等到电视库存重新进货的通知。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/a1f3c2c10609d5db59fc8268a468618d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lw-mgCJp8lesLhfkekaTEA.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">监听相同状态的两个组件的简单概述</figcaption></figure><h2 id="53b4" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">好吧，但是为什么这很重要？</h2><p id="0a7f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">为了确保商店顺利运营，我们必须有一个结构化的购买流程。如果顾客开始进来，把电视从货架上拿走，就会变得混乱。Jenny可以直接访问和更新电视(同步)，而Larry可能需要在询问Jenny之前找到更多关于电视的信息(异步)。</p><p id="2652" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于您的应用程序来说也是如此。您可能希望有一个清晰的结构来修改数据，这样就不会出现任何意外。拥有动作和突变是很重要的，因为有时你需要在接收数据之前等待(例如当调用一个API时),并且你不希望所有的事情都等待执行，直到这个动作完成。</p><h1 id="8c8e" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">让我们建立我们的商店！</h1><p id="c93c" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">现在，希望你已经理解了商店的基本原理，是时候开始使用它了。我们将坚持我们的例子，用Vuex构建一个简单的“李氏电子商店”的表示。我假设你已经知道如何创建一个Vue项目，并且有一些关于Vue的基本知识，所以我将从使用一个用<a class="ae my" href="https://cli.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue CLI </a>创建的空模板开始。</p><p id="edc5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们从安装Vuex开始:<code class="fe mz na nb nc b">yarn add vuex</code></p><p id="7adb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe mz na nb nc b">src/store</code>中创建一个名为<code class="fe mz na nb nc b">store</code>的新文件夹，并在这个文件夹中创建一个名为<code class="fe mz na nb nc b">store.js</code>的新文件。在这个文件中，我们将建立我们商店的基础:</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="7ef8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们有了一个基本的Vuex商店，其中有一个状态，即电视的总数。为了完成这项工作，我们需要修改<code class="fe mz na nb nc b">main.js</code>，将我们的商店导入Vue。</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="806b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们的存储应该可以工作了，我们可以从它那里“接收”状态了！有两种方法可以做到这一点。如果你只接收一个状态，最简单的方法是使用一个<a class="ae my" href="https://vuejs.org/v2/guide/computed.html" rel="noopener ugc nofollow" target="_blank">计算属性</a>。如果您想要接收多个状态，最简单的方法是使用一个<a class="ae my" href="https://vuex.vuejs.org/guide/state.html#object-spread-operator" rel="noopener ugc nofollow" target="_blank">对象扩展操作符</a>，它看起来像这样:</p><pre class="mq mr ms mt gt nf nc ng nh aw ni bi"><span id="630c" class="md la it nc b gy nj nk l nl nm">computed: {<br/>  ...mapState(['someState', 'anotherState']),<br/>}</span></pre><p id="7247" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要查看我们的商店是否工作，请创建一个名为<code class="fe mz na nb nc b">Customer</code>的新组件(不要忘记在主应用程序组件中导入该组件):</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="30ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，顾客可以看到我们商场还剩多少台电视！然而，他真的拿他们没办法。我们需要创建动作(Larry)和突变(Jenny)来从商店中移除电视。让我们将它们添加到我们的商店:</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="0978" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">既然Larry和Jenny已经到达商店，我们可以修改顾客，让他购买电视:</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="8dfe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">他可以查看是否还有电视可以购买，如果没有，我们将禁用该按钮，他将无法购买任何电视。</p><h2 id="0fe3" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">添加额外负载</h2><p id="4494" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">现在，我们的客户一次只能购买一台电视，但也许他刚刚搬家，想为他的新房子购买两台电视。幸运的是，我们可以将额外的负载作为第二个参数传递。让我们调整一下我们的商场，让搬走的电视数量更加灵活。</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="eaf3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们现在可以设置想要购买的电视数量了！如果我们有多个组件的客户收到相同的状态，那么每当有人购买电视时，它们都会被更新！</p><h2 id="82ec" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">创建一个getter</h2><p id="a017" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">拉里和珍妮并不总是心情愉快。如果他们不满意，我们的顾客就不想买电视。让我们创建一个getter来看看Larry和Jenny是否都开心:</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="1cf2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们可以在客户中使用getter作为计算属性，看看员工是否满意。我们可以在多个组件中重用这个getter，而不必在每个组件中都进行这样的计算！</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="fba3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意:如果你不在多个组件中做同样的计算，一般来说你不应该做一个getter，而是直接计算你的组件。</p><h2 id="2003" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">使用对象扩展运算符</h2><p id="45d7" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们的客户现在可以从商店接收信息并采取行动，但是代码有点长。我们可以使用<em class="mc">对象扩展操作符</em>来改善这一点。这允许我们映射状态、突变和动作，并使用<code class="fe mz na nb nc b">this</code>更容易地访问它们。让我们从vuex导入它们，并使我们的代码更短一些:</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="96d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好多了！我们的代码要短得多，也更容易理解。现在，在未来，我们可以很容易地映射更多的状态/动作/突变，只需更新我们用作参数的数组。</p><h1 id="9b9c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">是时候做些酷的东西了！</h1><p id="5a1c" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们可以用Vuex做更多的事情，但是我希望这篇教程能让你对Vuex的状态管理有一个基本的了解！现在该由你去用它建造一些酷的东西了。</p></div></div>    
</body>
</html>