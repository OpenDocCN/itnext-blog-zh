<html>
<head>
<title>Form Validation With Error Messages in Ruby On Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby On Rails中带有错误消息的表单验证</h1>
<blockquote>原文：<a href="https://itnext.io/form-validation-with-error-messages-in-ruby-on-rails-cec36ba3daa9?source=collection_archive---------0-----------------------#2017-11-21">https://itnext.io/form-validation-with-error-messages-in-ruby-on-rails-cec36ba3daa9?source=collection_archive---------0-----------------------#2017-11-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1dda229e74b6e64c6f72dc87f8124064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_UOV4P9w1wjYJz_xYYhOvQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Cendrine Marrouat 在<a class="ae kc" href="https://unsplash.com/search/photos/warning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><blockquote class="kd ke kf"><p id="6bf2" class="kg kh ki kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><a class="ae kc" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fform-validation-with-error-messages-in-ruby-on-rails-cec36ba3daa9%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank">点击这里在LinkedIn上分享这篇文章</a></p></blockquote><p id="e1ff" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">验证用于确保只将有效数据保存到数据库中。例如，对于您的应用程序来说，确保每个用户都提供有效的电子邮件地址、邮寄地址和其他详细信息可能很重要。</p><p id="508b" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">模型级验证是确保只将有效数据保存到数据库中的最佳方式。它们与数据库无关，不能被最终用户绕过，并且便于测试和维护。Rails使它们易于使用，为常见需求提供了内置的助手，并允许您创建自己的验证方法。</p><p id="e6b8" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">在本文中，我们将讨论以下几点。</p><ol class=""><li id="9af9" class="li lj iq kj b kk kl ko kp lf lk lg ll lh lm le ln lo lp lq bi translated">模型级验证</li><li id="f270" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated">显示Ruby on Rails表单验证错误消息</li></ol><p id="7c7a" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">这里我们开始，<br/>首先，在你的/app/helpers/form_helper.rb中创建一个助手类</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="b50a" class="mf mg iq mb b gy mh mi l mj mk">module FormHelper<br/>    def errors_for(form, field)<br/>        content_tag(:p, form.object.errors[field].try(:first), class: 'help-block')<br/>    end<br/><br/>    def form_group_for(form, field, opts={}, &amp;block)<br/>        label = opts.fetch(:label) { true }<br/>        has_errors = form.object.errors[field].present?<br/><br/>        content_tag :div, class: "form-group #{'has-error' if has_errors}" do<br/>            concat form.label(field, class: 'control-label') if label<br/>            concat capture(&amp;block)<br/>            concat errors_for(form, field)<br/>        end<br/>    end<br/>end</span></pre><p id="b751" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">很好，现在转到您的/app/views/文件夹。<br/>在我的例子中，路径是/app/views/accounts，我的页面存在于哪里。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="ecd5" class="mf mg iq mb b gy mh mi l mj mk">&lt;% def msg(status) return "#{status}" end %&gt;<br/>&lt;div class="col-md-6 col-md-offset-3 panel panel-default"&gt;<br/>  &lt;div class="panel-body"&gt;<br/>    &lt;h2&gt;Create an Acccount&lt;/h2&gt;<br/>    &lt;%= form_for @account do |f| %&gt;<br/>      &lt;%= form_group_for f, :username, label: false  do %&gt;<br/>        &lt;div class="input-group"&gt;<br/>          &lt;span class="input-group-addon"&gt;&lt;span class="fa fa-user fa-lg fa-fw"&gt;&lt;/span&gt;&lt;/span&gt;<br/>          &lt;%= f.text_field :username, class: 'form-control', placeholder: 'UserName' %&gt;<br/>        &lt;/div&gt;<br/>      &lt;% end %&gt;                  <br/>      &lt;%= form_group_for f, :password, label: false  do %&gt;<br/>        &lt;div class="input-group"&gt;<br/>          &lt;span class="input-group-addon"&gt;&lt;span class="fa fa-key fa-lg fa-fw"&gt;&lt;/span&gt;&lt;/span&gt;<br/>          &lt;%= f.password_field :password, class: 'form-control', placeholder: 'Password' %&gt;<br/>        &lt;/div&gt;<br/>      &lt;% end %&gt;<br/>      &lt;%= f.submit("Create Account", class:"btn btn-primary", data: {:confirm =&gt; msg('Do you want to create account?'), :disable_with =&gt; 'Creating'}) %&gt;<br/>    &lt;% end %&gt;<br/>  &lt;/div&gt;    <br/>&lt;/div&gt;</span></pre><p id="b225" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">在上面的代码中，我们使用了" form_group_for "方法，</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="7ac8" class="mf mg iq mb b gy mh mi l mj mk">&lt;%= form_group_for o, :password, label: false do %&gt;<br/>&lt;% end %&gt;</span></pre><p id="06af" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">这里，f是表单对象。:password是您的数据库列名。</p><p id="71ba" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">标签:假意味着，如果你想显示标题，然后设置为真，否则将不显示标题。</p><p id="be30" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">例子，</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/c450e54296c363d99587cf649d9fcee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*w0s9XVogOAYdzAUB.png"/></div></figure><p id="a651" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">然后在点击创建帐户按钮后，</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/180b12f4f33b540c72cc4eba7d4884d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/0*Z71BjAWGDg-R6mxE.png"/></div></figure><p id="ea2c" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">您可以在您的模型中定制您的错误消息。<br/>例如，</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="43e6" class="mf mg iq mb b gy mh mi l mj mk">validates_presence_of   :username, :message =&gt; 'Please Enter User  Name.'<br/>    validates_presence_of   :password, :message =&gt; 'Please Enter Your Password.'</span></pre><p id="154b" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">享受编码。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/6b74e7adcd72552ecc0504071775eebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/0*PxZam_pcYmMg3aOY.png"/></div></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/dd422c1922ee17e75b786fc7dfa5b642.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/0*-pO8p3wsmGvNCptp.png"/></div></figure><p id="59b6" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated"><strong class="kj ir">感谢&amp;的问候，<br/> Alok Rawat </strong></p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="50db" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated"><em class="ki">原载于</em><a class="ae kc" href="https://qiita.com/alokrawat050/items/dc7f4a7ee1acdc6a449a" rel="noopener ugc nofollow" target="_blank"><em class="ki">qiita.com</em></a><em class="ki">。</em></p></div></div>    
</body>
</html>