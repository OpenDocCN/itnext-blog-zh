<html>
<head>
<title>OutSystems: How the pagination / navigation widget works</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OutSystems:分页/导航小部件如何工作</h1>
<blockquote>原文：<a href="https://itnext.io/outsystems-how-the-pagination-navigation-widget-works-822526b06918?source=collection_archive---------4-----------------------#2018-06-29">https://itnext.io/outsystems-how-the-pagination-navigation-widget-works-822526b06918?source=collection_archive---------4-----------------------#2018-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fb56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的应用程序中，你可能会显示信息列表。您正在显示的信息可能会变得比页面所能容纳的还要长，大多数情况下您希望使用分页来显示所有数据。</p><p id="0a85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">OutSystems为您提供了一个组件，使您可以轻松地将此功能添加到您的应用程序中。它被称为RichWidgets附带的“List_Navigation”小部件。</p><p id="0809" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文描述了如何一步步地使用它，以便更好地理解这个小部件。</p><h1 id="0047" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">创建不带列表导航的国家页面</h1><p id="96e5" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我有一个包含227个国家的国家实体。在屏幕上，我想显示国家的id，名称和地区，按国家的名称排序。</p><h1 id="5665" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第一步</h1><p id="c963" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在准备过程中，创建一个聚合来获取按名称排序的所有国家。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/d39d4f0b34205ac4b21a2bc2c794d396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*p7shhwyLiOcugBl3vnFiLw.png"/></div></figure><h1 id="d27a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第二步</h1><p id="8039" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在屏幕上放置一个表记录小部件，将表小部件的源记录列表设置为步骤1中的聚合，并将行数设置为9999，以确保显示所有国家。将列行号、id、名称和区域添加到表记录中。</p><p id="0c5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">表格上方显示了集合中的记录数。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/f207ebbce888b698f9dc21b68cf2b2ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*G-5ejy5rXUwNPxa6JpWqWw.png"/></div></figure><p id="75e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，该页面按字母顺序显示了国家实体的所有记录。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/5c31cc3108c3d12209efda6a9e3ee524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*d9WVs6vpLCLHHT69VHnsFQ.png"/></div></figure><p id="7727" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有的227条记录都聚集在一起，所有的记录都作为一个长列表显示在屏幕上。</p><h1 id="a0e1" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">向屏幕添加分页/导航</h1><p id="ea7b" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">现在，让我们使用“List_navigation”小部件在屏幕上只显示10个国家，并让用户控制这些国家的循环。</p><h1 id="ec68" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第一步</h1><p id="554d" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">从RichWidgets模块中引用List_Navigation小部件。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/7a56795f178b32d2f6341e0a49cd1460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*zBJ4nGljtU8Ck519EHyjOw.png"/></div></figure><h1 id="6dc6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第二步</h1><p id="0486" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">将table records小部件的行数设置为10，这样屏幕上只显示10条记录。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/5714e0aa162b6992a39ff395ff946868.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*8RYURgVe0rfmWfDCKgd9rQ.png"/></div></figure><h1 id="3f37" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第三步</h1><p id="ffca" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">将List_navigation小部件添加到屏幕上，并设置小部件的属性。</p><p id="09be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> ListWidgetId <br/> </strong>小工具的Id显示数据<br/> <strong class="jp ir"> LineCount <br/> </strong>将在数据小工具中显示的行数<br/> <strong class="jp ir"> TotalRowCount <br/> </strong>可显示的总行数<br/><strong class="jp ir">max page numbers<br/></strong>在通知操作<br/> 屏幕上显示的最大页码数当按下List_Navigation的按钮时要调用的操作</p><p id="6ee8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">填充的小部件如下所示</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/72d48d9877c1e09b6b8fb8591ef8b4ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*kCT36Y6m_GW2H8vqt62hcQ.png"/></div></figure><p id="03d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，GetCountries聚合的Count属性包含聚合的所有记录的数量，而length属性包含实际从数据库中提取并在聚合本身中的记录的数量。</p><p id="44d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">屏幕现在看起来像这样。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/c27ad4f9ca1d165061902a0b50308c46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*sh0xDGg496EZ3AZTJX_wXQ.png"/></div></figure><p id="a670" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是啊！我们的分页是存在的，但是当按下按钮时没有任何反应。让我们来解决这个问题！</p><h1 id="9ea7" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第四步</h1><p id="61a3" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">当用户按下按钮时，我需要实现OnNotifyListnavigation屏幕操作。</p><p id="761d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个函数中，我们需要重新查询countries聚合以获得需要显示的记录，刷新表达式以显示聚合中的记录数，并需要显示table records小部件以实际显示新记录。当然，我们需要刷新List_Navigation小部件本身来显示更改。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lo"><img src="../Images/6bd1d735fa229eb0c13b1c5aa16f0c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*24iuspJVRkocnfdGY22YpQ.png"/></div></div></figure><p id="8a95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们再试一次！</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/4dd0940cb5a9da6fc39a23f549ef3c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*R_nOVMvOkWgj5aVJLK3PmA.png"/></div></figure><p id="a26c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">糟糕，还是不行。我们需要解决更多问题！</p><p id="4120" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">List_Navigation小部件正在改变，它会显示你在哪个页面，现在会显示上一页按钮。但是集合中的记录数量没有改变，表记录小部件中的数据也没有改变。</p><h1 id="5475" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第五步</h1><p id="f1f0" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">让我们看看表记录器小部件的属性。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/338bd9aa049da8822ae6681dc2222d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*Tx3hWjbcmKEGcps65ckTzg.png"/></div></figure><p id="f2ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有一个start index属性，它告诉table records小部件从何处开始显示table records小部件源代码中的记录。现在它总是从列表的开头开始！</p><p id="a173" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我需要告诉table records小部件从哪里开始显示记录，用户在哪个页面上！</p><p id="b268" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，我们需要一个来自RichWidgets模块的服务器动作，称为“List_Navigation_GetStartIndex”。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/6045efea2ecfc586ef4a677b90fe3c20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*ppxI2DX8kgKxJkZa4qX7Bg.png"/></div></figure><p id="e9bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个服务器动作告诉表记录小部件的当前起始索引。让我们在表记录小部件的开始索引属性中使用它。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi md"><img src="../Images/543f3871d5f007c3409949e366c18ea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*cJFdMzXDXbKBzOtvYv-ZSQ.png"/></div></figure><p id="6539" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个屏幕操作的第一个参数是table records小部件的运行时id，第二个参数告诉它记住会话变量中的值。</p><p id="683b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，这个函数的第一个参数不是List_Navigation小部件的运行时id，而是表记录小部件的运行时id！因为List_Navigation小部件通过list_navigation小部件的ListWidgetId属性连接到table records小部件，所以这是可行的！</p><p id="70f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其他的魔法正在这里发生！因为聚合GetCountries通过“源记录列表”属性连接到表记录小部件，所以聚合现在知道必须获取多少记录，以便表记录小部件可以显示正确的记录。</p><p id="6e22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们再试一次。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/da88d15ee3dafbe6c9c3a6a6718afe4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*2hbXcXQhgQDIl3vtk6eJwg.png"/></div></figure><p id="d7db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是啊！分页工作了！</p><h1 id="f907" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">一些提示和技巧</h1><p id="46e9" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">当表records小部件的源记录列表的内容发生变化时，由于当前页面的原因，源中的记录可能会比要显示的记录少。用户在第10页，但只有4页的记录。此时，您需要重置开始索引。这可以通过服务器动作“List _ Navigation _ ResetStartIndex”来完成。</p><p id="079d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">聚合需要获取所有记录，直到屏幕上实际显示的记录。如果列表计数为10，并且用户位于第1.000页，则聚合必须获取10 * 1000 = 10.000条记录，以便只显示最后10条记录。因此，当页数增加时，性能会下降。您可以使用一些高级的SQL技术来避免这个问题，但这超出了本文的范围。</p><p id="7f42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望您喜欢我对List_Navigation小部件的解释。</p></div></div>    
</body>
</html>