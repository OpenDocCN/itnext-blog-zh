<html>
<head>
<title>Simple and consistent C++ Development Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单一致的C++开发环境</h1>
<blockquote>原文：<a href="https://itnext.io/simple-and-consistent-c-development-environment-c08cf8d93ed9?source=collection_archive---------2-----------------------#2022-05-17">https://itnext.io/simple-and-consistent-c-development-environment-c08cf8d93ed9?source=collection_archive---------2-----------------------#2022-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2196" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">C++学生的一个常见障碍是选择一个好的开发环境。需要做出许多选择，其中大多数都会显著影响用户体验。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/2b47195bb8febde665b94df8fd2ffc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZROwNU_YAsj4SRsaFu74gg.png"/></div></div></figure><p id="402a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天，我将指导您使用Visual Studio代码和Docker进行简单的设置，从一个现成的设置开始，然后逐步解释所提供的配置以及如何根据您的需要定制设置。</p><h1 id="93ec" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">先决条件</h1><p id="0c51" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">此设置将适用于Windows、Linux和macOS(包括M1)。但是，您需要首先安装两个软件:</p><ul class=""><li id="ff74" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated"><a class="ae mj" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a></li><li id="e49c" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated"><a class="ae mj" href="https://docs.docker.com/desktop/#download-and-install" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a></li></ul><h1 id="c2ab" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">简单设置</h1><p id="2d4d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">启动VSCode，打开<em class="mp">视图&gt;命令面板(CTRL+Shift+P) </em>。</p><p id="4177" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编写<em class="mp"> git clone </em>，确认并将以下URL复制到输入框中:</p><ul class=""><li id="279b" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated"><a class="ae mj" href="https://github.com/HappyCerberus/simple-cpp-devenv" rel="noopener ugc nofollow" target="_blank">https://github.com/HappyCerberus/simple-cpp-devenv</a></li></ul><p id="442a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">VSCode完成存储库克隆后，VSCode将提示您确认以下步骤:</p><ul class=""><li id="6ca3" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">打开克隆的存储库</li><li id="5970" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated">毫不含糊地相信我</li><li id="49d1" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated">安装<em class="mp">远程容器</em>扩展</li><li id="d4d9" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated">在容器<br/> <em class="mp">中重新打开，首次构建需要几分钟时间。此后，后续的运行将重用已经构建好的容器。</em></li><li id="264f" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated">选择你的装备:选择“铿锵14”</li></ul><p id="cc96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成这些后，您现在就有了一个完整的C++开发环境，它有一个基本的<em class="mp"> CMake </em>配置和一个位于<em class="mp"> src </em>文件夹中的hello world程序示例。常见的操作(构建/运行/调试)在蓝色底部栏中提供。</p><h1 id="5875" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">定制设置</h1><p id="2297" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">如果你想使用这个设置而不仅仅是学习C++，你可能需要定制它。</p><h2 id="0fc1" class="mq ky iq bd kz mr ms dn ld mt mu dp lh jy mv mw ll kc mx my lp kg mz na lt nb bi translated">仓库</h2><p id="cc35" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">首先，您需要创建您的存储库。与典型的分叉不同，我已经将存储库设置为模板，所以跟随<a class="ae mj" href="https://github.com/HappyCerberus/simple-cpp-devenv" rel="noopener ugc nofollow" target="_blank"> URL </a>并点击绿色的“<em class="mp">使用此模板</em>”按钮。</p><h2 id="6651" class="mq ky iq bd kz mr ms dn ld mt mu dp lh jy mv mw ll kc mx my lp kg mz na lt nb bi translated">开发容器和停靠栏</h2><p id="58cc" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">不同机器之间的一致体验是通过Docker映像实现的。VSCode通过Devcontainer特性与Docker集成。</p><p id="d197" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用该功能时，您通常会依赖预构建的映像。但是，容器也可以指定为Dockerfile。然后在目标机器上按需构建映像。</p><p id="59ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在容器规范之上，我们还可以定义需要哪些VSCode插件:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="0fe8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Dockerfile通过安装clang-14、git、CMake和gdb来建立一个基于Ubuntu的镜像。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="7798" class="mq ky iq bd kz mr ms dn ld mt mu dp lh jy mv mw ll kc mx my lp kg mz na lt nb bi translated">虚拟代码</h2><p id="f736" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">我们还可以包括对VSCode本身和我们使用的插件的配置。</p><p id="82a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，为了确保VSCode在打开存储库后推荐<em class="mp">远程容器</em>插件，我们可以将它添加到<em class="mp">中的推荐部分。vscode/extensions.json </em>:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="be88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其次，我们需要对<em class="mp">中的CMake插件进行一些配置。vscode/settings.json </em>。不幸的是，VSCode不支持Linux上的lldb调试器，所以我们手动切换到gdb，并强制CMake使用Makefile生成器:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="9d4f" class="mq ky iq bd kz mr ms dn ld mt mu dp lh jy mv mw ll kc mx my lp kg mz na lt nb bi translated">C++</h2><p id="a049" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">C++配置是您可以进行最大程度定制的地方。您可以引入典型的CMake配置，或者使用CMake starter项目之一。只有一件事需要记住。Clang 14会产生<em class="mp"> dwarf-v5 </em>格式的调试信息，和我们已经安装的GDB版本不太好玩，需要手动切换到<em class="mp"> dwarf-v4 </em>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="8326" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">限制和注意事项</h1><p id="f26f" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">最后，值得一提的是这种方法的缺点。</p><p id="e3d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最明显的缺点是，这种配置只适用于Linux项目，并且只可能进行命令行开发，而不需要额外的工作。</p><h2 id="70ae" class="mq ky iq bd kz mr ms dn ld mt mu dp lh jy mv mw ll kc mx my lp kg mz na lt nb bi translated">缓存和预建图像</h2><p id="38e9" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">第二个考虑来自大型项目。如果您在公司中部署这种方法，您可能希望使用预构建的映像(可能使用本地映像注册表)。</p><p id="5824" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，由于docker映像的孤岛性质，使用缓存解决方案将更加困难。</p><h2 id="a3e7" class="mq ky iq bd kz mr ms dn ld mt mu dp lh jy mv mw ll kc mx my lp kg mz na lt nb bi translated">参考</h2><p id="a673" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">如果您想了解更多信息，VSCode文档写得非常好，它探讨了更多的细节(例如，如何处理点文件):</p><ul class=""><li id="fa06" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated"><a class="ae mj" href="https://code.visualstudio.com/docs/remote/containers" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/docs/remote/containers</a></li><li id="855f" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated"><a class="ae mj" href="https://code.visualstudio.com/docs/remote/containers-tutorial" rel="noopener ugc nofollow" target="_blank">https://code . visual studio . com/docs/remote/containers-教程</a></li><li id="b9eb" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated"><a class="ae mj" href="https://code.visualstudio.com/remote/advancedcontainers/overview" rel="noopener ugc nofollow" target="_blank">https://code . visual studio . com/remote/advanced containers/overview</a></li></ul><h1 id="d3db" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">感谢您的阅读</h1><p id="3089" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">你喜欢这个快速教程吗？您可能也会喜欢我的长篇C++文章:</p><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/the-114-standard-c-algorithms-introduction-2a75a2df4300"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">114种标准C++算法。介绍</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">欢迎来到关于C++标准算法的新系列。标准算法提供了安全和优化的构建模块…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv kv nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/save-your-sanity-and-time-beyond-clang-format-2b929b9120b8"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">节省你的理智和时间——不要拘泥于形式。</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">作为一名软件工程师，你能做的最有影响力的事情之一就是自动化重复的活动。一个领域，在…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="nw l ns nt nu nq nv kv nh"/></div></div></a></div><p id="99f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我也在YouTube上发布视频。你有问题吗？在<a class="ae mj" href="https://twitter.com/SimonToth83" rel="noopener ugc nofollow" target="_blank">推特</a>或<a class="ae mj" href="https://www.linkedin.com/in/simontoth" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。</p></div></div>    
</body>
</html>