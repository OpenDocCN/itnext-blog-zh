<html>
<head>
<title>Android Calendar Intent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android日历意图</h1>
<blockquote>原文：<a href="https://itnext.io/android-calendar-intent-8536232ecb38?source=collection_archive---------1-----------------------#2019-11-10">https://itnext.io/android-calendar-intent-8536232ecb38?source=collection_archive---------1-----------------------#2019-11-10</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/e8fee37ced6c6be2614b0030641b9f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5bc78kd2sd2D8ERdPDmyIA.jpeg"/></div></div></figure><p id="94de" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi la translated">alendar是用户日常使用最常见的应用程序。用户可以添加他/她的日常计划。日历可以自动通知用户即将发生的事件。如果应用程序可以在日历应用程序中添加一个事件，并提醒用户未来的事件，这将非常有用。</p><p id="d45c" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">Android主要提供了两种处理日历事件的方法。一个是使用<code class="fe lj lk ll lm b">Calendar Provider</code>，另一个是把它交给系统日历应用。</p><p id="390e" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe lj lk ll lm b">Calendar Provider</code>提供我们所有的功能，包括插入、查询、更新和删除现有的日历事件。然而，这些步骤很繁琐，并且必须要求用户的运行时权限(<code class="fe lj lk ll lm b">android.permission.READ_CALENDAR</code>和<code class="fe lj lk ll lm b">android.permission.WRITE_CALENDAR</code>)来读写敏感的日历信息。这种方法很容易出错。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ln"><img src="../Images/14d3d5e3b80cf089b1be5c24ea4ea394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AdXyq9snrBK8sRbfnTyP5Q.png"/></div></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">引自<a class="ae lw" href="https://developer.android.com/guide/topics/providers/calendar-provider" rel="noopener ugc nofollow" target="_blank">日历提供商</a>的谷歌官方文档</figcaption></figure><p id="a19b" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">因此，Google官方推荐开发者使用第二种方法，即使用<code class="fe lj lk ll lm b">Intent</code>将所有日历操作交给系统日历app。日历应用程序在我们的应用程序请求后立即打开，用户在完成他/她的日历操作后会自动重定向回我们的应用程序。在系统日历app中，已经有一个精心设计的UI供用户填写必要的日历信息。好的用户界面和UX可以得到保证。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj lx"><img src="../Images/bd702373d92cc1438a00bdf26a1c5da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*CK3yt96nsb5jCY47wKbD5g.png"/></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">我的三星设备中的系统日历应用示例</figcaption></figure><p id="515e" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">本文将简要介绍:</p><ol class=""><li id="64b2" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated">意图限制方法</li><li id="a91f" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">Android日历数据库的结构</li><li id="1435" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated"><code class="fe lj lk ll lm b">Content Provider</code>的理念</li><li id="3684" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">编码1):插入新的日历事件</li><li id="e555" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">编码2):查看特定日期的事件</li><li id="b8d0" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">编码3):通过事件id查看事件详细信息</li><li id="2bc0" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">编码4):通过事件id更新事件</li><li id="fc9c" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">重复规则定义</li><li id="a6de" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">日历字段:被邀请人</li></ol></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="cfbd" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">意图限制方法</h1><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj nr"><img src="../Images/584fc0d209ad83b47f263de770b0f413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*Tv6bUh4pT60LOhzs53TmqA.png"/></div></figure><p id="8744" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">并非所有日历操作都可用于意向方法。见上表。如<a class="ae lw" href="https://developer.android.com/guide/topics/providers/calendar-provider#intents" rel="noopener ugc nofollow" target="_blank">日历意向官方文档</a>所述，日历意向只能查看、编辑和创建日历事件。删除不是一个选项。为了删除一个已存在的，必须使用<code class="fe lj lk ll lm b">Calendar Provider</code>，并且必须添加大量繁琐的代码。<a class="ae lw" href="https://developer.android.com/guide/topics/providers/calendar-provider#delete-event" rel="noopener ugc nofollow" target="_blank">看这里</a>。</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="26a4" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">日历结构</h1><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj ns"><img src="../Images/5db8f4856fa9e6f150d664e409070a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*Jrgk8S2kPGpCF9MGGyG1Sw.png"/></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">Android日历结构</figcaption></figure><p id="86bf" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在Android系统中，日历结构下主要有5个表，在Android日历结构中可以分为3级。它们是:</p><ol class=""><li id="87f5" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated">日历</li><li id="e241" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">事件</li><li id="847f" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">与会者、提醒和实例</li></ol><p id="edac" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">还有一个<code class="fe lj lk ll lm b">Time</code>表，将在后面的课程中介绍。</p><p id="81b1" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在每个设备中，可以添加一个或多个日历帐户，例如Google、Apple和Microsoft。在每个日历下，可以有一个事件列表。同时，每个事件下可以有参与者、提醒和实例的列表。</p><p id="7758" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe lj lk ll lm b">event</code>和<code class="fe lj lk ll lm b">instance</code>的概念可能会让人混淆。让我们用一个日历例子来解释一下:</p><p id="efc2" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><strong class="ke iv">活动</strong>:2019年1月1日至2019年12月31日每周二。</p><p id="5647" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><strong class="ke iv">实例</strong>:</p><ol class=""><li id="5938" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated">2019年1月1日(星期二)</li><li id="9d7e" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">2019年1月8日(星期二)</li><li id="6966" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi">…</li></ol><p id="b31a" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">53.2019年12月31日(星期二)</p><p id="eaae" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">单周<code class="fe lj lk ll lm b">event</code>下共有53个<code class="fe lj lk ll lm b">instances</code>。</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="c521" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">日历提供商</h1><p id="c1c2" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">Calendar provider是一种内容提供者，它将数据存储在关系数据库模型中，并通过唯一的公共URIs (Uniform Resource Identifier，统一资源标识符)将数据公开给其他应用程序。如上所述，主要有5个由日历提供商控制的表，因此有5个公共URIs。</p><ol class=""><li id="1eff" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated">日历表URI: <code class="fe lj lk ll lm b">content://com.android.calendar/calendars</code></li><li id="e236" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">事件表URI: <code class="fe lj lk ll lm b">content://com.android.calendar/events</code></li><li id="e55b" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">与会者表URI: <code class="fe lj lk ll lm b">content://com.android.calendar/attendees</code></li><li id="7bfe" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">提醒表URI: <code class="fe lj lk ll lm b">content://com.android.calendar/reminders</code></li><li id="870e" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">实例表URI: <code class="fe lj lk ll lm b">content://com.android.calendar/instances</code></li></ol><p id="40f6" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">每个内容提供商为URI提供一种特殊的格式。URI必须以<code class="fe lj lk ll lm b">content://</code>开头，然后是提供者的类。最后一个参数是表的名称。</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="075c" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">编码部分</h1><p id="1e9a" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">编码部分将被拆分成四个部分:</p><ol class=""><li id="daca" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated">插入新的日历事件</li><li id="07ca" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">查看给定时间的日历事件列表</li><li id="fb79" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">按事件id查看现有日历事件</li><li id="dd20" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">更新现有日历事件</li></ol><p id="260f" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">每个类别之间共享部分代码。</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="736f" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">编码1):插入新的日历事件</h1><h2 id="f626" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">步骤1:定义意图</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="7261" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如前所述，app把日历动作交给系统日历app。因此，在系统日历app上预填信息的唯一方法是通过<code class="fe lj lk ll lm b">Intent</code>传递。</p><p id="e045" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">要设置的第一个参数是意图动作。有三种可能的选择:</p><ol class=""><li id="8804" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated">意图。ACTION_INSERT <br/> <em class="om">(用于创建新的日历事件)</em></li><li id="0ce5" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">意图。ACTION_VIEW <br/> <em class="om">(用于通过事件id或事件时间查看现有日历事件)</em></li><li id="d3ff" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">意图。<br/>动作_编辑<em class="om">(用于编辑已有的日历事件)</em></li></ol><p id="540e" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">第二个要设置的是我们正在编辑的表格的<code class="fe lj lk ll lm b">CONTENT_URI</code>。如上所述，日历结构下主要有5个不同的表。要查看、编辑和创建日历事件，它应该指向存储所有日历事件信息的<code class="fe lj lk ll lm b">Events</code>表。</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h2 id="01ee" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">步骤2:向意向添加额外数据</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj on"><img src="../Images/5916fb9b08ce5b87f15cee4259ca602f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pXy93TP1-8D31YTTM1fgTQ.png"/></div></div></figure><p id="cab0" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe lj lk ll lm b">Intent</code>可以通过<code class="fe lj lk ll lm b">extra</code>将日历信息传递给日历app。所有可用的键见上图。</p><p id="8bd8" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">除了代表“<a class="ae lw" href="https://www.kanzaki.com/docs/ical/rrule.html" rel="noopener ugc nofollow" target="_blank">递归规则</a>”的<code class="fe lj lk ll lm b">RRULE</code>之外，大多数参数都是自明的。它就像SQL语句一样，为系统定义查询规则来过滤特定的日期。这将在下一节课中详细解释。</p><h2 id="1e87" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">第三步:打开系统日历应用程序</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="b79e" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">使用最简单的功能<code class="fe lj lk ll lm b">startActivity(intent: Intent)</code>就可以触发日历app。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj lx"><img src="../Images/e84f7bf751368af8901ad4f058b30619.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*8nD1vxT-mKFTysncDaJiig.png"/></div></figure></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="d378" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">编码2):查看特定日期的事件</h1><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj lx"><img src="../Images/3a6ec2a01b3640dfa9e5fc2e9c6cfac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*esfCOF2IMzu1P2ubjkRo_g.png"/></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">按日期查看事件的结果截图</figcaption></figure><p id="8503" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">第二个日历功能是查看特定日期的事件。由提供的时间戳指定的日期单元格在日历应用程序上突出显示。上面的示例代码使用的是时间戳<code class="fe lj lk ll lm b">1546300800000</code>，即2019年1月1日。</p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="a9a8" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">重要的一点是，这次用的URI是<code class="fe lj lk ll lm b">content://com.android.calendar/time/1546300800000</code>。它指向的是<code class="fe lj lk ll lm b">Time</code>表，而不是<code class="fe lj lk ll lm b">Calendar</code>、<code class="fe lj lk ll lm b">Events</code>、<code class="fe lj lk ll lm b">Attendees</code>、<code class="fe lj lk ll lm b">Reminders</code>和<code class="fe lj lk ll lm b">Instances</code>表。由于<code class="fe lj lk ll lm b">Time</code>不提供公共URI，URI必须用<code class="fe lj lk ll lm b">Uri.Builder</code>构建。</p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="2fdf" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">第二个重要的是，意图动作不再是<code class="fe lj lk ll lm b">Intent.ACTION_INSERT</code>，应该改为<code class="fe lj lk ll lm b">Intent.ACTION_VIEW</code>。根据定义，<code class="fe lj lk ll lm b">Intent.ACTION_VIEW</code>用于向用户显示数据，而<code class="fe lj lk ll lm b">Intent.ACTION_INSERT</code>用于向给定容器中插入一个空项目。</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="1f8f" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">编码3):通过事件id查看事件详细信息</h1><p id="2a43" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">Android提供了一种通过<code class="fe lj lk ll lm b">event id</code>查看事件详情的方法，这种方法只能通过<code class="fe lj lk ll lm b">Calendar Provider</code>进行查询。由于敏感的用户信息，必须在运行时授予读取日历权限(<code class="fe lj lk ll lm b">android.permission.READ_CALENDAR</code>)。</p><h2 id="8533" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">第一步:请求<code class="fe lj lk ll lm b">android.permission.READ_CALENDAR permission</code></h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="1fc4" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><a class="ae lw" href="https://github.com/tbruyelle/RxPermissions" rel="noopener ugc nofollow" target="_blank"> RxPermission </a>因其请求权限和检查状态的简单性，推荐用于运行时请求权限。</p><h2 id="4709" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">步骤2:从日历内容提供商处获取事件id</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="85ca" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在上面的函数中，<code class="fe lj lk ll lm b">event_id</code>和<code class="fe lj lk ll lm b">title</code>列都被查询进行演示。实际上一个事件中的所有<a class="ae lw" href="https://developer.android.com/reference/android/provider/CalendarContract.Events.html#writing-to-events" rel="noopener ugc nofollow" target="_blank">字段</a>都可以查询。</p><h2 id="a8e5" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">步骤3:用事件ID构造一个URI</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="b9d6" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">这次我们可以使用<code class="fe lj lk ll lm b">withAppendedId()</code>函数来构造URI，因为<code class="fe lj lk ll lm b">Events</code>表提供了公共的<code class="fe lj lk ll lm b">CONTENT_URI</code>。最终的URI格式是<code class="fe lj lk ll lm b">content://com.android.calendar/events/{event_id}</code>。</p><h2 id="5fe7" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">步骤4:将意向动作设置为意向。动作_视图</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="7735" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">与之前的会话相同，必须使用<code class="fe lj lk ll lm b">Intent.ACTION_VIEW</code>，因为它现在正在查看记录，而不是创建新记录。最终显示事件的如下页面，该页面只有<strong class="ke iv">分享</strong>和<strong class="ke iv">删除</strong>功能:</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj lx"><img src="../Images/92a80f8e4cd2479de844382b1f98f890.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*zPbN_RVwrP7wUv76gjbJPg.png"/></div></figure></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="5e6a" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">编码4):通过事件id更新事件</h1><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="065f" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">Android提供的最后一个可用日历操作是更新一个现有事件。与通过<code class="fe lj lk ll lm b">event id</code>查看事件一样，URI的格式为<code class="fe lj lk ll lm b">content://com.android.calendar/events/{event_id}</code>。然而，必须将意图动作更改为<code class="fe lj lk ll lm b">Intent.ACTION_EDIT</code>，它提供了对给定数据的显式可编辑访问。在“编码1”中添加的所有事件字段都可以在这里用相同的额外键进行更新。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/057d7bba053847aeceaef945dcf48257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*Kidkxv7ThnAqry-3m92bLw.png"/></div></figure></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="3331" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">获得用户的响应</h1><p id="aa58" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">用户可以执行或取消日历功能(插入和更新)。App可以在<code class="fe lj lk ll lm b">onActivityResult()</code>回调时检测到这个结果。</p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><p id="1caf" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><code class="fe lj lk ll lm b">Result code</code>可以是用户成功执行动作时的<code class="fe lj lk ll lm b">Activity.RESULT_OK</code>(值:-1)，也可以是用户取消动作时的<code class="fe lj lk ll lm b">Activity.RESULT_CANCELED</code>(值:0)。</p><p id="86b6" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">此外，当插入或更新事件时，只返回数据。在<code class="fe lj lk ll lm b">returned</code> Intent中只存储了三个字段:</p><pre class="lo lp lq lr gu op lm oq or aw os bi"><span id="e399" class="ny mu iu lm b gz ot ou l ov ow"><em class="om">Key: timezone; Value: Asia/Hong_Kong<br/>Key: allday; Value: false<br/>Key: go_to_millis; Value: 1573365600000</em></span></pre></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="0857" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">递归规则</h1><p id="acd9" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">重复规则定义重复事件的重复模式。它是以字符串的形式。例如，<code class="fe lj lk ll lm b">FREQ=WEEKLY;BYDAY=MO;COUNT=3</code>表示每周一重复3次的模式，即2019-11-05&amp;12&amp;19周一。</p><p id="7ffc" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">该规则以<code class="fe lj lk ll lm b">{rule_name}={rule_value}</code>的格式编写，并用分号<code class="fe lj lk ll lm b">;</code>与其他规则连接。</p><p id="0f17" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">有许多全球标准的重现规则。这里有四条通用规则，可以处理大多数情况——<code class="fe lj lk ll lm b">FREQ</code>、<code class="fe lj lk ll lm b">UNTIL</code>、<code class="fe lj lk ll lm b">COUNT</code>和<code class="fe lj lk ll lm b">BYDAY</code>。</p><h2 id="ba91" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">1.FREQ(频率)</h2><p id="49d3" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">频率定义了模式重复的频率。它接受以下参数:</p><ol class=""><li id="b0a4" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated"><code class="fe lj lk ll lm b">DAILY</code></li><li id="722a" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated"><code class="fe lj lk ll lm b">WEEKLY</code></li><li id="d5bf" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated"><code class="fe lj lk ll lm b">MONTHLY</code></li><li id="7820" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated"><code class="fe lj lk ll lm b">YEARLY</code></li></ol><p id="f163" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">示例:<code class="fe lj lk ll lm b">FREQ=DAILY</code></p><h2 id="1f97" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">2.直到</h2><p id="c2e2" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated"><code class="fe lj lk ll lm b">UNTIL</code>定义频率的结束日期。接受日期格式为<code class="fe lj lk ll lm b">yyyyMMdd'T'HHmmss'Z'</code>的值，如<em class="om">2019 11 05t 000000 z】</em></p><p id="e1b3" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">示例:<code class="fe lj lk ll lm b">FREQ=DAILY;UNTIL=20191105T000000Z</code>表示每天重复该事件，直到2019年11月5日。</p><h2 id="19bf" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">3.数数</h2><p id="152f" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated"><code class="fe lj lk ll lm b">COUNT</code>定义出现的次数的频率。它接受整数值。</p><p id="7e38" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">例:<code class="fe lj lk ll lm b">FREQ=DAILY;COUNT=10</code>表示每天重复该事件10轮，即10天。</p><h2 id="4da1" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">4.白天</h2><p id="573b" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated"><code class="fe lj lk ll lm b">BYDAY</code>定义应应用重复模式的工作日列表。它接受以下参数:</p><ol class=""><li id="b99c" class="ly lz iu ke b kf kg kj kk kn ma kr mb kv mc kz md me mf mg bi translated"><code class="fe lj lk ll lm b">MO</code>(周一)</li><li id="31f8" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">(星期二)</li><li id="3a62" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated"><code class="fe lj lk ll lm b">WE</code>(星期三)</li><li id="f898" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated"><code class="fe lj lk ll lm b">TH</code>(星期四)</li><li id="922b" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">(星期五)</li><li id="2b07" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">(星期六)</li><li id="c66b" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">(星期日)</li></ol><p id="5dbd" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">示例:<code class="fe lj lk ll lm b">FREQ=WEEKLY;BYDAY=MO,FR</code>表示该模式在每周的周一和周五重复。</p><h2 id="79c4" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">实际例子:</h2><ol class=""><li id="ba7d" class="ly lz iu ke b kf nt kj nu kn ox kr oy kv oz kz md me mf mg bi translated">在即将到来的3年中每年重复一次<br/> <code class="fe lj lk ll lm b">FREQ=YEARLY;COUNT=3</code></li><li id="41a8" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">每月重复一次，直到2020年1月1日<br/> <code class="fe lj lk ll lm b">FREQ=MONTHLY;UNTIL=20200101T000000Z</code></li><li id="86dd" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">在接下来的3周里，每周一和周四重复。计数为6，因为总出现次数为2x3 = 6。<br/> <code class="fe lj lk ll lm b">FREQ=WEEKLY;BYDAY=MO,TH;COUNT=6</code></li><li id="00ef" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">每周一重复，直到2020年1月1日<code class="fe lj lk ll lm b">FREQ=WEEKLY;BYDAY=MO,TU;UNTIL=20200101T000000Z</code></li></ol><h2 id="166d" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">递归规则的技巧</h2><p id="ba8e" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated"><code class="fe lj lk ll lm b">UNTIL</code>和<code class="fe lj lk ll lm b">COUNT</code>互相矛盾。<code class="fe lj lk ll lm b">UNTIL</code>定义频率的结束日期。<code class="fe lj lk ll lm b">COUNT</code>定义了出现的次数的频率。</p><p id="0a0b" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如果<code class="fe lj lk ll lm b">UNTIL</code>存在，Android将忽略<code class="fe lj lk ll lm b">COUNT</code>的存在，即<code class="fe lj lk ll lm b">FREQ=DAILY;COUNT=10;UNTIL=20191105T000000Z</code>等于<code class="fe lj lk ll lm b">FREQ=DAILY;UNTIL=20191105T000000Z</code></p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="20d5" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">日历字段:被邀请人</h1><p id="cdcc" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated"><code class="fe lj lk ll lm b">Invitee</code>是日历信息中的一个特殊字段。它接受电子邮件地址或用逗号分隔的电子邮件地址列表。请参见下面的示例:</p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ok ol l"/></div></figure><h2 id="f9f6" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">自动邀请电子邮件</h2><p id="d221" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">创建、更新和删除日历后，将自动向所有被邀请人发送电子邮件。请参见下面的电子邮件模板:</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj pa"><img src="../Images/766f9842f5ff804ad98755043bdacc36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*vQc0XM93kmIOUw7gVLg3ew.png"/></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">新邀请活动的屏幕截图</figcaption></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj pb"><img src="../Images/d26d2453f9972fd1da70514378133dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*9us_OvJ0HiE9n7OWlbuSDA.png"/></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">更新事件的屏幕截图</figcaption></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj pc"><img src="../Images/114713b3ee925ecc0f21af1dfc761a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*5DOpIj8854Z7K4g2hhTn6g.png"/></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">已删除事件的屏幕截图</figcaption></figure><h2 id="d8a4" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">自动确认电子邮件</h2><p id="db27" class="pw-post-body-paragraph kc kd iu ke b kf nt kh ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz in bi translated">如果被邀请人接受或拒绝用户的邀请，系统会自动向用户发送一封确认电子邮件。请参见下面的模板:</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pd"><img src="../Images/18827be367c647350e690cdf01b0ac76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_0Q9slzsaLBMtBoDyYK-0A.png"/></div></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">被邀请者接受邀请</figcaption></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pe"><img src="../Images/117b2d5e07d771266d2966777ebab022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d8RGqqCxKiyhmi-bYlkuYw.png"/></div></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">被邀请人拒绝邀请</figcaption></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pf"><img src="../Images/197d9feefe3ebc94550a68307a085ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWj0wwgjobtYfBP-WjLWKg.png"/></div></div><figcaption class="ls lt gk gi gj lu lv bd b be z dk translated">被邀请人不确定他/她是否能参加活动</figcaption></figure><h2 id="6214" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">添加到被邀请人的日历(Android和iOS)</h2><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj pg"><img src="../Images/3de65e437129f61527349312002674bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*oRHDoLPU6Tf_a2cf5MMEyw.png"/></div></div></figure><p id="9b22" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">和邮件一起的还有一个<code class="fe lj lk ll lm b">invite.ics</code>附件，在安卓和iOS都可读。被邀请者可以点击该附件，系统将自动弹出日历应用程序来插入日历事件。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ph"><img src="../Images/1bb175688f2882a762fca0ddd6995923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWo6YGQOZ0xVRVWvo7iedA.png"/></div></div></figure></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="0012" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">摘要</h1><ol class=""><li id="5cc6" class="ly lz iu ke b kf nt kj nu kn ox kr oy kv oz kz md me mf mg bi translated">Android提供了两种方法来处理日历操作，推荐的方法是将操作交给系统日历应用。使用意图方法可以降低处理日历操作的风险，因为系统提供了可信的UI和UX</li><li id="cb12" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">日历结构下主要控制6个表。分别是<code class="fe lj lk ll lm b">Calendars</code>、<code class="fe lj lk ll lm b">Events</code>、<code class="fe lj lk ll lm b">Attendees</code>、<code class="fe lj lk ll lm b">Reminders</code>、<code class="fe lj lk ll lm b">Instances</code>和<code class="fe lj lk ll lm b">Time</code>。但是<code class="fe lj lk ll lm b">Time</code>没有提供公共URI。</li><li id="df1e" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">不同的操作必须使用不同的意图动作。<code class="fe lj lk ll lm b">Intent.ACTION_INSERT</code>应在将要创建事件时使用。<code class="fe lj lk ll lm b">Intent.ACTION_EDIT</code>应在事件将要更新时使用。<code class="fe lj lk ll lm b">Intent.ACTION_VIEW</code>应该在要查看事件时使用。</li><li id="fec7" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">在编辑或查看现有记录之前，必须请求<code class="fe lj lk ll lm b">android.permission.READ_CALENDAR</code>并检索<code class="fe lj lk ll lm b">event id</code>。</li><li id="db6e" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">重复规则是一个类似SQL的语句。最有用的代码是<code class="fe lj lk ll lm b">FREQ</code>(频率)、<code class="fe lj lk ll lm b">UNTIL</code>(重复模式的结束时间)、<code class="fe lj lk ll lm b">COUNT</code>(发生次数)和<code class="fe lj lk ll lm b">BYDAY</code>(特定天数)。</li><li id="7227" class="ly lz iu ke b kf mh kj mi kn mj kr mk kv ml kz md me mf mg bi translated">当被邀请人对被邀请事件做出选择时，系统会向所有被邀请人发送自动邀请电子邮件，并向用户发回确认电子邮件。被邀请者可以通过电子邮件附件将事件添加到日历中(<code class="fe lj lk ll lm b">Invite.ics</code>)。</li></ol><p id="104d" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">希望这篇文章能让你对Android日历有更多的了解。祝你有美好的一天~加油！😉</p></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h1 id="bb05" class="mt mu iu bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">参考:</h1><h2 id="99a5" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">1.日历提供商官方文档</h2><div class="pi pj gq gs pk pl"><a href="https://developer.android.com/guide/topics/providers/calendar-provider" rel="noopener  ugc nofollow" target="_blank"><div class="pm ab fp"><div class="pn ab po cl cj pp"><h2 class="bd iv gz z fq pq fs ft pr fv fx it bi translated">日历提供商概述| Android开发者</h2><div class="ps l"><h3 class="bd b gz z fq pq fs ft pr fv fx dk translated">日历提供程序是用户日历事件的存储库。日历提供者API允许您执行…</h3></div><div class="pt l"><p class="bd b dl z fq pq fs ft pr fv fx dk translated">developer.android.com</p></div></div><div class="pu l"><div class="pv l pw px py pu pz ka pl"/></div></div></a></div><h2 id="0352" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">2.意向行动列表正式文件</h2><div class="pi pj gq gs pk pl"><a href="https://developer.android.com/reference/android/content/Intent.html" rel="noopener  ugc nofollow" target="_blank"><div class="pm ab fp"><div class="pn ab po cl cj pp"><h2 class="bd iv gz z fq pq fs ft pr fv fx it bi translated">意图| Android开发者</h2><div class="ps l"><h3 class="bd b gz z fq pq fs ft pr fv fx dk translated">AccessibilityServiceMagnificationController . OnMagnificationChangedListener</h3></div><div class="pt l"><p class="bd b dl z fq pq fs ft pr fv fx dk translated">developer.android.com</p></div></div><div class="pu l"><div class="qa l pw px py pu pz ka pl"/></div></div></a></div><h2 id="2c72" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">3.重复规则演示</h2><div class="pi pj gq gs pk pl"><a href="https://jakubroztocil.github.io/rrule/" rel="noopener  ugc nofollow" target="_blank"><div class="pm ab fp"><div class="pn ab po cl cj pp"><h2 class="bd iv gz z fq pq fs ft pr fv fx it bi translated">rrule.js演示</h2><div class="ps l"><h3 class="bd b gz z fq pq fs ft pr fv fx dk translated">这是rrule.js的演示和测试应用程序，rrule . js是一个JavaScript库，用于处理日历日期的重复规则。</h3></div><div class="pt l"><p class="bd b dl z fq pq fs ft pr fv fx dk translated">jakubroztocil.github.io</p></div></div></div></a></div></div><div class="ab cl mm mn hy mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="in io ip iq ir"><h2 id="817a" class="ny mu iu bd mv nz oa dn mz ob oc dp nd kn od oe nh kr of og nl kv oh oi np oj bi translated">要更多地了解我和我的学习模式:</h2><div class="pi pj gq gs pk pl"><a href="https://blog.usejournal.com/how-do-i-become-a-programmer-from-a-biomedical-engineer-student-6696ff5f1c1f" rel="noopener  ugc nofollow" target="_blank"><div class="pm ab fp"><div class="pn ab po cl cj pp"><h2 class="bd iv gz z fq pq fs ft pr fv fx it bi translated">我如何从一个生物医学工程专业的学生成为一名程序员？</h2><div class="ps l"><h3 class="bd b gz z fq pq fs ft pr fv fx dk translated">离开我的舒适区很有挑战性。从生物医学领域转向app编程，我经历了什么…</h3></div><div class="pt l"><p class="bd b dl z fq pq fs ft pr fv fx dk translated">blog.usejournal.com</p></div></div><div class="pu l"><div class="qb l pw px py pu pz ka pl"/></div></div></a></div><p id="079f" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如需了解更多信息，请在<a class="ae lw" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ my rik _ chow</a>关注我。感谢您阅读这篇文章。祝您愉快！😄</p></div></div>    
</body>
</html>