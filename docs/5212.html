<html>
<head>
<title>Kubernetes explained deep enough: Configuration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes解释的够深刻:配置</h1>
<blockquote>原文：<a href="https://itnext.io/kubernetes-explained-deep-enough-configuration-cd4a9d1d8dcd?source=collection_archive---------4-----------------------#2021-01-13">https://itnext.io/kubernetes-explained-deep-enough-configuration-cd4a9d1d8dcd?source=collection_archive---------4-----------------------#2021-01-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/794c49a6d175abb1f74e418abcb8be14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1vcg5QN0uyzoXuPa_0-Uw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">费伦茨·阿尔马西在<a class="ae jd" href="https://unsplash.com/s/photos/configuration?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><div class=""><h2 id="aa79" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">第4部分:配置映射、秘密和卷</h2></div><h2 id="428a" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">更新:增加了自定进度学习的Katacoda场景</h2><div class="ip iq gp gr ir lr"><a href="https://www.katacoda.com/decoder/scenarios/k8s-configuration" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd jh gy z fp lw fr fs lx fu fw jf bi translated">k8s-配置|解码器| Katacoda</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">在本练习中，您可以随意单击Octant选项卡，以可视化方式探索集群状态。我们将重点关注…</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">www.katacoda.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf ix lr"/></div></div></a></div><h1 id="b535" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">介绍</h1><p id="011c" class="pw-post-body-paragraph mr ms jg mt b mu mv kh mw mx my kk mz le na nb nc li nd ne nf lm ng nh ni nj ij bi translated">这是Kubernetes迷你系列的第四部<strong class="mt jh"> Kubernetes解释得够深刻了</strong></p><p id="39d2" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">关于本博客的网络版以及关于docker、Kubernetes和Docker认证的更多信息，请访问:</p><div class="ip iq gp gr ir lr"><a href="https://www.itcertificationsguide.com/#/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd jh gy z fp lw fr fs lx fu fw jf bi translated">IT认证指南</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">描述</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">www.itcertificationsguide.com</p></div></div></div></a></div><p id="3cad" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><a class="ae jd" href="https://piotrzan.medium.com/kubernetes-explained-deep-enough-1ea2c6821501" rel="noopener">第一部分:简介</a></p><p id="985d" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/kubernetes-explained-deep-enough-storage-eb16a66483c2">第2部分:Kubernetes解释得够深刻:存储</a></p><p id="1974" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/kubernetes-explained-deep-enough-deployments-371755fbe2a3">第3部分:Kubernetes解释得足够深入:部署</a></p><p id="ed93" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">第4部分:Kubernetes解释得够深刻了:配置—这个博客</p><p id="9c2c" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><a class="ae jd" href="https://piotrzan.medium.com/kubernetes-explained-deep-enough-services-1a0647499616" rel="noopener">第5部分:服务可发现性、DNS、集群通信</a></p><blockquote class="np nq nr"><p id="4307" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated">如果您需要复习<a class="ae jd" href="https://kubernetes.io/docs/concepts/configuration/" rel="noopener ugc nofollow" target="_blank">配置</a>，请访问Kubernetes文档</p><p id="9f76" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated">下图提供了基本定义</p></blockquote><h1 id="2222" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">它是如何工作的？</h1><p id="a573" class="pw-post-body-paragraph mr ms jg mt b mu mv kh mw mx my kk mz le na nb nc li nd ne nf lm ng nh ni nj ij bi translated">Kubernetes本身支持两种资源，用于存储pods使用的配置。两种配置类型都要求数据以<em class="ns">键:值</em>对的格式表示。</p><ul class=""><li id="916e" class="nw nx jg mt b mu nk mx nl le ny li nz lm oa nj ob oc od oe bi translated"><em class="ns">配置映射</em>:用于存储非机密数据</li><li id="bd2b" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated"><em class="ns">秘密</em>:用于存储机密数据(令牌、SSH密钥、密码、证书等)</li></ul><blockquote class="np nq nr"><p id="67c1" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated">配置图不适合存储大量数据。为此，请使用外部存储器。作为旁注， etcd <em class="jg">，Kubernetes存储其所有状态的键值存储只能容纳1MN大小的资源。</em></p><p id="5bf6" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><em class="jg">Kubernetes中的秘密实际上不是</em> <strong class="mt jh"> <em class="jg">加密的</em> </strong> <em class="jg">，而是</em> <strong class="mt jh"> <em class="jg"> base64编码的</em> </strong> <em class="jg">，因此最适合存储关键敏感信息，建议使用带Helm sidecar的</em><a class="ae jd" href="https://learn.hashicorp.com/vault" rel="noopener ugc nofollow" target="_blank"><em class="jg">hashi corp Vault</em></a><em class="jg">或公共云提供商的原生产品，如</em><a class="ae jd" href="https://azure.microsoft.com/en-us/services/key-vault/" rel="noopener ugc nofollow" target="_blank"><em class="jg">Azure Key Vault</em></a></p></blockquote><figure class="ol om on oo gt is gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/59f81d7641ce037f4a2211cc47dbf55d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*DEamjZ5Ezwweka4pTmFlMw.png"/></div></figure><p id="6f0f" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">配置图和密码都可以通过两种方式安装到pod中:</p><ul class=""><li id="75b0" class="nw nx jg mt b mu nk mx nl le ny li nz lm oa nj ob oc od oe bi translated">作为卷</li><li id="ca5e" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated">作为环境变量</li></ul><blockquote class="np nq nr"><p id="cbfe" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><em class="jg">下图显示了配置图示例中的选项，同样适用于机密信息</em></p></blockquote><figure class="ol om on oo gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi op"><img src="../Images/d49cdd7e8bb80a0b927f176d34d29622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5NCMLmZ4JbVmb2zRdmggZQ.png"/></div></div></figure><h1 id="2242" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">它解决什么问题？</h1><ul class=""><li id="3d71" class="nw nx jg mt b mu mv mx my le oq li or lm os nj ob oc od oe bi translated">支持应用程序代码和配置的分离</li><li id="3a1e" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated">允许接收机密和其他安全敏感信息</li><li id="9c31" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated">配置图或秘密的更新会自动反映在pod中</li></ul><h1 id="10eb" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">如何实施？</h1><h1 id="adbe" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">先决条件</h1><p id="7039" class="pw-post-body-paragraph mr ms jg mt b mu mv kh mw mx my kk mz le na nb nc li nd ne nf lm ng nh ni nj ij bi translated">我们将使用<a class="ae jd" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>来实现这个例子，因为PWK已经有几天不为我工作了。然而，这些示例可以在任何Kubernetes设置上工作。</p><h1 id="dc39" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">创建Kubernetes资源</h1><blockquote class="np nq nr"><p id="aff4" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><em class="jg">为了更容易地使用kubectl，我们将创建一个别名</em> <code class="fe ot ou ov ow b"><em class="jg">alias k=kubectl</em></code></p></blockquote><p id="041e" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">我们将为每个实验创建单独的Kubernetes资源</p><blockquote class="np nq nr"><p id="d5ca" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><strong class="mt jh"> <em class="jg">在从远程源创建资源之前，始终检查文件的内容。</em> </strong></p></blockquote><h1 id="366d" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">让我们实验一下</h1><blockquote class="np nq nr"><p id="c17a" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><em class="jg">每个实验都有相应的</em> <code class="fe ot ou ov ow b"><em class="jg">asciinema</em></code> <em class="jg">记录，您可以跟随并直接从记录中复制/粘贴命令。</em></p></blockquote><p id="c483" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">我们将重温<a class="ae jd" href="#what-problem-does-it-solve" rel="noopener ugc nofollow">一节中的场景，它解决了什么问题？</a>并验证陈述是否正确。</p><h2 id="d618" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">支持应用程序代码和配置的分离</h2><ol class=""><li id="8952" class="nw nx jg mt b mu mv mx my le oq li or lm os nj ox oc od oe bi translated">创建配置映射</li><li id="e50c" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">创建将配置映射装载为卷的部署</li><li id="89d4" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">检查配置图数据是如何装入pod模板中指定的文件夹的</li></ol><p id="7f73" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">要创建的资源:</p><pre class="ol om on oo gt oy ow oz pa aw pb bi"><span id="d3a8" class="kv kw jg ow b gy pc pd l pe pf"><em class="ns">#Create config map:</em> k apply -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml</a> </span><span id="ad40" class="kv kw jg ow b gy pg pd l pe pf"><em class="ns">#Create deployment with config map mounted as volume:</em> k apply -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml</a></span></pre><div class="ip iq gp gr ir lr"><a href="https://asciinema.org/a/384410" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd jh gy z fp lw fr fs lx fu fw jf bi translated">kuberneteconfigappconfigseparation</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">nginx-test-59dc49778c-lg7lp 0/1容器正在创建00s nginx-test-59dc 49778 c-cqd j9 1/1正在运行0 3s…</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">asciinema.org</p></div></div><div class="ma l"><div class="ph l mc md me ma mf ix lr"/></div></div></a></div><p id="6082" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">清理资源:</p><pre class="ol om on oo gt oy ow oz pa aw pb bi"><span id="4b19" class="kv kw jg ow b gy pc pd l pe pf"><em class="ns">#Delete deployment:</em> k delete -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml</a> </span><span id="f732" class="kv kw jg ow b gy pg pd l pe pf"><em class="ns">#Delete config map:</em> k delete -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml</a></span></pre><p id="8a91" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><strong class="mt jh">结论:</strong>我们已经成功地证明了应用程序和配置可以使用confg映射轻松地解耦</p><h2 id="6ff3" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">允许接收机密和其他安全敏感信息</h2><blockquote class="np nq nr"><p id="67fb" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><em class="jg">secret默认为base64编码，但是可以使用</em><strong class="mt jh"><em class="jg">string data:</em></strong><em class="jg">代替</em><strong class="mt jh"><em class="jg">data</em></strong><em class="jg">secret YAML</em>的一部分来创建纯文本的secret</p></blockquote><p id="dab3" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">要创建的资源:</p><pre class="ol om on oo gt oy ow oz pa aw pb bi"><span id="113d" class="kv kw jg ow b gy pc pd l pe pf"><em class="ns">#Create encoded secret:</em> k apply -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/3-create-secret-encoded.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/3-create-secret-encoded.yaml</a></span><span id="33cd" class="kv kw jg ow b gy pg pd l pe pf"><em class="ns">#Create deployment with secret mounted as volume:</em> k apply -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/5-create-deployment-secret.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/5-create-deployment-secret.yaml</a></span></pre><ol class=""><li id="10cb" class="nw nx jg mt b mu nk mx nl le ny li nz lm oa nj ox oc od oe bi translated">创建秘密</li><li id="71c7" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">创建将机密装载为卷的部署</li><li id="ecbd" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">检查secret是否正确安装在pod上</li><li id="3d1f" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">使用<em class="ns">描述</em>命令显示秘密<em class="ns">密码</em>值</li><li id="998c" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">从base64 <code class="fe ot ou ov ow b">echo 'dW5icmVha2FibGU=' | base64 --decode</code>解码秘密<em class="ns">密码</em>值</li></ol><div class="ip iq gp gr ir lr"><a href="https://asciinema.org/a/384412" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd jh gy z fp lw fr fs lx fu fw jf bi translated">KubernetesSecretMounting</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">nginx-test-59dc49778c-lg7lp 0/1容器正在创建00s nginx-test-59dc 49778 c-cqd j9 1/1正在运行0 3s…</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">asciinema.org</p></div></div><div class="ma l"><div class="pi l mc md me ma mf ix lr"/></div></div></a></div><p id="901a" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">清理资源:</p><pre class="ol om on oo gt oy ow oz pa aw pb bi"><span id="a9a7" class="kv kw jg ow b gy pc pd l pe pf"><em class="ns">#Delete encoded secret:</em> k delete -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/3-create-secret-encoded.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/3-create-secret-encoded.yaml</a> </span><span id="b77e" class="kv kw jg ow b gy pg pd l pe pf"><em class="ns">#Delete deployment:</em> k delete -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/5-create-deployment-secret.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/5-create-deployment-secret.yaml</a></span></pre><blockquote class="np nq nr"><p id="a5e0" class="mr ms ns mt b mu nk kh mw mx nl kk mz nt nm nb nc nu nn ne nf nv no nh ni nj ij bi translated"><em class="jg"> Kubernetes目前没有对其数据存储</em> etcd <em class="jg">中的秘密进行加密。挂载的机密只被编码，然而，有讨论提供静态和传输中的机密加密，所以在处理敏感信息时使用机密被认为是最佳实践。</em></p></blockquote><p id="8594" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><strong class="mt jh">结论:</strong>我们已经成功地证明了base64编码的秘密可以被pod和容器摄取和消费</p><h2 id="077c" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">配置图或秘密的更新会自动反映在pod中</h2><ul class=""><li id="767d" class="nw nx jg mt b mu mv mx my le oq li or lm os nj ob oc od oe bi translated">该功能仅适用于作为卷安装到pod的配置或机密<strong class="mt jh"/></li><li id="0706" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated">如果您想要反映从配置或机密中注入的环境变量的变化，则需要手动重启pod</li><li id="2676" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated">你可以在这里投票推动<a class="ae jd" href="https://github.com/kubernetes/kubernetes/issues/22368" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kubernetes/issues/22368</a>引入自动重启，类似于配置和秘密挂载成卷</li><li id="8983" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ob oc od oe bi translated">或者，<a class="ae jd" href="https://github.com/xing/kubernetes-deployment-restart-controller" rel="noopener ugc nofollow" target="_blank">许可控制器</a>设置也是可能的，但这超出了本练习的范围</li></ul><p id="4969" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">创建资源:</p><pre class="ol om on oo gt oy ow oz pa aw pb bi"><span id="25f1" class="kv kw jg ow b gy pc pd l pe pf"><em class="ns">#Create config map:</em> k apply -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml</a> </span><span id="6095" class="kv kw jg ow b gy pg pd l pe pf"><em class="ns">#Create deployment with config map mounted as volume:</em> k apply -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml</a></span></pre><ol class=""><li id="0457" class="nw nx jg mt b mu nk mx nl le ny li nz lm oa nj ox oc od oe bi translated">创建配置映射</li><li id="4312" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">创建将配置映射装载为卷的部署</li><li id="87fd" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">检查配置图数据是如何装入pod模板中指定的文件夹的</li><li id="f453" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">编辑配置图并调整一个值</li><li id="dd84" class="nw nx jg mt b mu of mx og le oh li oi lm oj nj ox oc od oe bi translated">检查如何在pod模板中指定为挂载点的文件夹pod中更新配置映射数据</li></ol><div class="ip iq gp gr ir lr"><a href="https://asciinema.org/a/384415" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd jh gy z fp lw fr fs lx fu fw jf bi translated">KubernetesConfigUpdate</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">deployment.apps/nginx-test映像已更新，等待部署“nginx-test”首次展示完成:3个旧副本…</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">asciinema.org</p></div></div><div class="ma l"><div class="pj l mc md me ma mf ix lr"/></div></div></a></div><p id="4ec0" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated">清理资源:</p><pre class="ol om on oo gt oy ow oz pa aw pb bi"><span id="1275" class="kv kw jg ow b gy pc pd l pe pf"><em class="ns">#Delete deployment:</em> k delete -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/4-Create-deployment.yaml</a> </span><span id="14e9" class="kv kw jg ow b gy pg pd l pe pf"><em class="ns">#Delete config map:</em> k delete -f <a class="ae jd" href="https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Piotr1215/dca-exercises/master/k8s/configuration/1-create-configmap.yaml</a></span></pre><p id="336b" class="pw-post-body-paragraph mr ms jg mt b mu nk kh mw mx nl kk mz le nm nb nc li nn ne nf lm no nh ni nj ij bi translated"><strong class="mt jh">结论:</strong>我们已经成功验证了装载到pod的配置值，因为在配置映射更改后，卷会自动更新</p><h1 id="960f" class="mg kw jg bd kx mh mi mj la mk ml mm ld km mn kn lh kp mo kq ll ks mp kt lp mq bi translated">挑战</h1><p id="f59f" class="pw-post-body-paragraph mr ms jg mt b mu mv kh mw mx my kk mz le na nb nc li nd ne nf lm ng nh ni nj ij bi translated">你想测试什么吗？思考一个场景，测试一下，然后在评论中告诉我们。</p></div></div>    
</body>
</html>