<html>
<head>
<title>My toolbox: HttpToolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的工具箱:HttpToolkit</h1>
<blockquote>原文：<a href="https://itnext.io/my-toolbox-httptoolkit-c86239b130b?source=collection_archive---------5-----------------------#2022-04-27">https://itnext.io/my-toolbox-httptoolkit-c86239b130b?source=collection_archive---------5-----------------------#2022-04-27</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><p id="e5aa" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><em class="km">【这是即将推出的工具箱系列的第一篇文章，展示了我在开发工作中使用的一些工具】</em></p><p id="0f13" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我经常需要找出HTTP请求的细节，以对一些API进行逆向工程，或者理解错误响应，其中我所使用的Java库只抛出一些异常，但除此之外并没有告诉我更多。不久前我发现了<a class="ae kn" href="https://httptoolkit.tech" rel="noopener ugc nofollow" target="_blank"> HttpToolkit </a>，从那以后我几乎每天都在使用它(在开发的时候)。</p><figure class="kp kq kr ks gu kt gi gj paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gi gj ko"><img src="../Images/431187281091b5cee1bd1ae8585a4d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*slSKU035PNzWBbjeoQ17Hw.png"/></div></div><figcaption class="la lb gk gi gj lc ld bd b be z dk translated">带有一些拦截流量的HttpToolkit视图</figcaption></figure><p id="19af" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我在这里使用的工具之一是tcpdump和后来的Wireshark，但这经常不起作用，因为流量在到达网络层时已经被加密。HttpToolkit使用一种不同的方法，接入用户代码并像代理服务器一样运行，如下图所示。</p><figure class="kp kq kr ks gu kt gi gj paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gi gj le"><img src="../Images/9639a36a4661b9fa077e9b0603d27501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DSwS6QcyB7zzXOuoMqbYKA.png"/></div></div><figcaption class="la lb gk gi gj lc ld bd b be z dk translated">设置，显示HttpToolkit和tcpdump/Wireshark的运行位置</figcaption></figure><p id="d0be" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">上面HttpToolkit的截图在左边显示了我用“mvn install”运行的一些集成测试的流量。对于这项工作，设置非常简单:在截取页面上，我只需通过点击下一个截图中显示的相应磁贴来启动一个新的终端，一个新的终端弹出来，我在其中启动“mvn install”。对我来说，当我想调整我的<a class="ae kn" href="https://mock-server.com" rel="noopener ugc nofollow" target="_blank"> mockserver </a>规则时，这非常方便。</p><figure class="kp kq kr ks gu kt gi gj paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gi gj ko"><img src="../Images/d0d3545b4c1161503f55728f9558fe3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZNjaR0gZ6DClZveyxu3zQA.png"/></div></div></figure><p id="fcfa" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">也可以附加到正在运行的JVM上。单击相应的图标，然后从正在运行的JVM列表中选择流程。</p><p id="1068" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">回到第一个屏幕截图，您可以在右侧看到对左侧所选条目的请求和响应。</p><p id="44e4" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">有一点需要注意的是，1.7版本(撰写本文时的最新版本)不会自动拦截进入我的Quarkus进程的请求。但是为了这个目的，我仍然可以启动Wireshark。</p><p id="4ce4" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">回到HttpToolkit:另一个不错的选择是实际停止并动态重写流量。只需在模拟部分添加一个新规则(不要忘记按save，否则它不会被激活):</p></div><div class="ab cl lf lg hv lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ik il im in io"><figure class="kp kq kr ks gu kt gi gj paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gi gj lm"><img src="../Images/3e9351273fcbc1ed91137cafc35fb010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3LRE50RZdXfAFrc5tziqgQ.png"/></div></div></figure><p id="85e2" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">当请求被拦截时，详细信息屏幕变为可编辑状态，您可以修改请求的标题字段，如标记的accept-header。您可能需要更快，因为一些代码设置了一些低超时。</p><figure class="kp kq kr ks gu kt gi gj paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gi gj ln"><img src="../Images/78e144ff32e388a3f757db5accf301f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4j7BvQasafGXu8N3LtFBZA.png"/></div></div></figure><p id="5f12" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">到目前为止我只展示了一个UI app，所以你可能会问为什么Http <em class="km"> Toolkit </em>？当你查看他们的GitHub库时，你可以看到一堆应用程序，它们也可以在没有GUI的情况下单独使用。我还没有使用所有提供的功能，专业版提供了更多。对我来说绝对是一个超级有用的工具，值得一试。</p><p id="6a5d" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">安装很简单，只需进入<a class="ae kn" href="https://httptoolkit.tech" rel="noopener ugc nofollow" target="_blank"> https://httptoolkit.tech </a>并下载安装程序。</p></div></div>    
</body>
</html>