<html>
<head>
<title>AWS: Cost optimization — services expenses overview and traffic costs in AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS:成本优化—AWS中的服务费用概述和流量成本</h1>
<blockquote>原文：<a href="https://itnext.io/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws-eeab202df7ad?source=collection_archive---------3-----------------------#2021-11-03">https://itnext.io/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws-eeab202df7ad?source=collection_archive---------3-----------------------#2021-11-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4db53edc2d31ceaf0cc5efaa8b7bac60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8QppZuMnRQSngTE4H4UqzA.png"/></div></div></figure><p id="077d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们继续我们的AWS成本优化主题之旅。之前的部分—<a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-explorer-costs-checking-on-the-cloudwatch-logs-example/" rel="noopener ugc nofollow" target="_blank">AWS:Cost Explorer—cloud watch日志上的成本检查示例</a>和<a class="ae kw" href="https://rtfm.co.ua/en/draften-aws-optimizaciya-rasxodov-pokupka-i-analiz-rds-reserved-instances/" rel="noopener ugc nofollow" target="_blank"> AWS:成本优化—购买RDS预留实例</a>。</p><p id="57f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基于云的架构的缺点之一是，与使用自己的裸机服务器相比，它的成本要高得多。这样，云提供商可能会有一个令人困惑的计费方案，你将为使用的资源、流量等付费。</p><p id="5e61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，在本帖中，我们将尝试了解使用亚马逊网络服务时支付的费用，并在接下来的部分中检查有用的AWS服务，以通过Cost Explorer、Trusted Advisor、Compute Optimizer、AWS Budget等来控制和优化AWS环境。</p><ul class=""><li id="0077" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Costs_categories_on_AWS" rel="noopener ugc nofollow" target="_blank">AWS上的费用类别</a></li><li id="02f1" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#AWS_Services_payment_table" rel="noopener ugc nofollow" target="_blank"> AWS服务支付表</a></li><li id="1c42" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#AWS_Data_Transfer_Costs" rel="noopener ugc nofollow" target="_blank"> AWS数据传输成本</a></li><li id="0a3a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#AWS_Data_Transfers_over_the_Internet" rel="noopener ugc nofollow" target="_blank">通过互联网传输AWS数据</a></li><li id="1b34" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Inbound_traffic_from_the_Internet_into_AWS" rel="noopener ugc nofollow" target="_blank">从互联网进入AWS的入站流量</a></li><li id="7fd0" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Outbound_traffic_from_the_AWS_Cloud_to_the_Internet" rel="noopener ugc nofollow" target="_blank">从AWS云到互联网的出站流量</a></li><li id="fed5" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Data_Transfer_Costs_inside_of_the_AWS_Cloud" rel="noopener ugc nofollow" target="_blank">AWS云内部的数据传输成本</a></li><li id="d324" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Inter-Region_data_transfers" rel="noopener ugc nofollow" target="_blank">区域间数据传输</a></li><li id="a270" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Data_transfers_between_AWS_Regions_and_Direct_Connect_locations" rel="noopener ugc nofollow" target="_blank">AWS区域和直连位置之间的数据传输</a></li><li id="5feb" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Data_transfers_between_CloudFront_Edge_locations_and_AWS_Regions" rel="noopener ugc nofollow" target="_blank">云锋边缘位置和AWS区域之间的数据传输</a></li><li id="905b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#AWS_Data_transfer_inside_on_an_AWS_Region" rel="noopener ugc nofollow" target="_blank"> AWS区域内的AWS数据传输</a></li><li id="7387" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#AWS_traffic_billing_map" rel="noopener ugc nofollow" target="_blank"> AWS流量计费图</a></li><li id="3ff1" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#AWS_traffic_advice" rel="noopener ugc nofollow" target="_blank"> AWS交通建议</a></li><li id="3d26" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/#Useful_links" rel="noopener ugc nofollow" target="_blank">有用链接</a></li></ul><h1 id="b662" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">AWS上的成本类别</h1><p id="5ff3" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">所有成本可分为三大类— <em class="mo">计算</em>、<em class="mo">存储、</em>和<em class="mo">数据传输</em>:</p><ul class=""><li id="61d1" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><strong class="ka ir">计算</strong>:对所使用的CPU和RAM容量的租金收费，价格取决于所使用的实例类型</li><li id="bbf7" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">存储:</strong>存储数据的费用</li><li id="66dd" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">数据传输</strong>:在大多数情况下，入站流量或同一AWS区域内服务之间的流量是免费的，但有例外情况。实际上，AWS上的流量成本将在本次更新的<a class="ae kw" href="https://rtfm.co.ua/?p=27194#AWS_Data_Transfer_Costs" rel="noopener ugc nofollow" target="_blank"> AWS数据传输成本</a>部分详细描述</li></ul><p id="5816" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还要为数据处理添加另一个类别:这将包括AWS服务的HTTP(S)请求和数据处理费用。</p><p id="9df0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">了解了这些类别，就很容易理解你在AWS上支付什么了。</p><p id="253d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们仔细看看服务示例:</p><ul class=""><li id="787e" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">计算:</li><li id="efaf" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">实例使用时间(<em class="mo"> EC2，RDS，红移</em>)</li><li id="4965" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">无服务器计算<em class="mo">(λ</em>)</li><li id="4c7a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">T系列实例的CPU信用使用(“<em class="mo">T2/T3/т4无限模式</em>”)(<em class="mo">EC2、RDS、红移</em>)</li><li id="2bf8" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">支付类型—按需、即期、预约等(<em class="mo"> EC2、RDS </em>)</li><li id="8654" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">部署类型—一个或多个可用性区域(<em class="mo"> RDS </em>)</li><li id="80c4" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">实例类型及其CPU和RAM容量</li><li id="6da2" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">存储:</li><li id="cfc7" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">弹性块存储(EBS):</li><li id="6af1" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">许多读/写操作</li><li id="d475" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">使用的数据存储</li><li id="3bfe" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">数据传送</li><li id="b445" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">快照商店(按S3价格)</li><li id="9129" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">磁盘类型—固态硬盘、硬盘</li><li id="c54c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">简单商店服务(S3):</li><li id="533b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">存储类型(<em class="mo">标准，不常访问，冰川</em>)</li><li id="9a53" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">存储的对象数</li><li id="70c8" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">数据传输:</li><li id="df81" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">发送的数据(<em class="mo"> NAT网关、负载平衡器、EC2/EBS、S3 </em>)</li><li id="5405" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">数据处理:</li><li id="54e0" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">大量接收和/或处理的数据(<em class="mo"> Kinesis、CloudWatch日志)</em></li><li id="9c28" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">许多已处理的HTTP(S)请求(<em class="mo"> CloudFront，API Gateway </em>)</li></ul><p id="a262" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我们还会为以下项目收取额外费用:</p><ul class=""><li id="82b7" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">对AWS API的API请求(CloudWatch指标收集、CloudTrail事件)</li><li id="505c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">AWS市场许可证</li><li id="cd2e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">以及特定于AWS服务的额外费用，如AWS WAF WebACL中的许多规则，这些规则会影响WAF费用、RDS Insights、EC2的扩展CloudWatch监控等</li></ul><h2 id="2333" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">AWS服务付款表</h2><p id="ef46" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">让我们将主要的AWS服务收集到一个表格中，看看我们在使用服务时支付了多少费用:</p><figure class="nc nd ne nf gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/c71d04a14ccdf4ce20c19fa440e36eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*JXQJ4mfUNz3LS4MtpvfSmg.png"/></div></figure><h1 id="c031" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">AWS数据传输成本</h1><p id="025d" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">让我们来讨论最有趣的话题:当我们在AWS上发送流量时，我们在支付什么？。</p><p id="a4b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一般来说，AWS上的流量可以分为两部分——亚马逊网络服务和互联网之间的流量，以及AWS网络内部的流量。此外，流量价格可能会因其方向而异—进入同一个或另一个可用区域、AWS VPC或AWS区域。</p><p id="6165" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，请记住:</p><ul class=""><li id="df3d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">对于具有弹性网络接口(EC2、ALB)的所有服务，将对所有出站流量收费</li><li id="1407" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">所有跨可用性区域流量</li><li id="d9c1" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">所有跨区域流量</li></ul><h2 id="dce3" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">网络上的自动气象站数据传输</h2><h2 id="d7c6" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">从互联网进入AWS的入站流量</h2><p id="396a" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">几乎所有从互联网进入AWS云的流量都是免费的。</p><p id="cd13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">反之亦然——几乎所有的出站流量都要花费我们一些钱。</p><h2 id="7dca" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">从AWS云到互联网的出站流量</h2><p id="c9f5" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">从AWS帐户到互联网的传出流量将按AWS地区价格计费，因为它们是不同的。参见<a class="ae kw" href="https://aws.amazon.com/ec2/pricing/on-demand/" rel="noopener ugc nofollow" target="_blank">亚马逊EC2按需定价&gt;数据传输</a> — <em class="mo">数据从互联网传入亚马逊EC2</em>和<em class="mo">数据从亚马逊EC2传出互联网</em>。</p><p id="3ec3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，当AWS向您收取出站流量费用时，它将汇总您帐户中以下服务的出站流量:</p><ul class=""><li id="9226" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">亚马逊RDS</li><li id="2216" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊红移</li><li id="5094" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊SES</li><li id="8b43" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊SimpleDB</li><li id="e378" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊EBS</li><li id="32fc" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊S3</li><li id="3195" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊冰川</li><li id="61e2" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊SQS</li><li id="e182" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">AWS存储网关</li><li id="0e9d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊社交网络</li><li id="53bd" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊DynamoDB</li><li id="181d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">亚马逊云观察日志</li></ul><h2 id="48b4" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">AWS云内部的数据传输成本</h2><h2 id="a86c" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">区域间数据传输</h2><p id="99e9" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">AWS地区之间的数据传输将按照源地区的价格收费。在从亚马逊EC2到的<em class="mo">数据传输中的<a class="ae kw" href="https://aws.amazon.com/ec2/pricing/on-demand/" rel="noopener ugc nofollow" target="_blank">亚马逊EC2按需定价&gt;数据传输</a>页面上的同一个表格中，您可以看到每个地区的价格。</em></p><p id="0498" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，我们在<em class="mo"> us-east-2 </em>、<em class="mo"> Ohio </em>中有一个S3存储桶，它将S3复制配置到<em class="mo"> us-west-1 </em>、<em class="mo"> N. California </em>中的一个存储桶，有关更多详细信息，请参见<a class="ae kw" href="https://rtfm.co.ua/en/aws-s3-cross-region-replication-configuration-and-objects-deletemarkers-replication/" rel="noopener ugc nofollow" target="_blank"> AWS:设置了删除标记的S3跨区域复制</a>。那样的话，我们将按照俄亥俄州us-east-2<em class="mo">的价格收费。</em></p><h2 id="7b54" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">AWS区域和直接连接位置之间的数据传输</h2><p id="d7bd" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">虽然主要规则是传入流量是免费的，但对于直接连接有一个例外，因为它的传入流量将被收费，并取决于源和目标地区的价格。参见<a class="ae kw" href="https://aws.amazon.com/directconnect/pricing/" rel="noopener ugc nofollow" target="_blank">AWS直连的数据传输输出(DTO)定价</a>。</p><p id="b744" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，从俄亥俄州到加利福尼亚州北部的直接连接的数据传输费用为每GB 0.0200美元，从俄亥俄州到爱尔兰，eu-west-1-发送每GB 0.0282美元。</p><h2 id="d70e" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">CloudFront Edge位置和AWS区域之间的数据传输</h2><p id="c4e0" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">CloudFront的边缘位置是AWS数据中心，用于存储从origins获得的信息。</p><p id="81f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我们支付:</p><ol class=""><li id="539b" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv ng ld le lf bi translated">从边缘位置到互联网的数据传输</li><li id="e14b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">从边缘位置到原点的数据传输</li><li id="4298" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">处理的HTTP(S)请求数</li></ol><p id="91df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">同样，价格将取决于来源和目标地区，更多信息请参见<a class="ae kw" href="https://aws.amazon.com/cloudfront/pricing/" rel="noopener ugc nofollow" target="_blank">亚马逊CloudFront定价</a>。</p><h2 id="0ee8" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">自动气象站区域内的自动气象站数据传输</h2><p id="b846" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">当AWS服务在同一个AWS区域的边界内通信时，一些流量也可能被收费。</p><ul class=""><li id="d486" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">Amazon EC2、AWS containers、Amazon RDS、Amazon Redshift、Amazon DynamoDB Accelerator (DAX)、Amazon ElastiCache实例或不同可用性区域之间的弹性网络接口之间的数据传输，无论是通过公共或私有IP发送，还是使用弹性IPv4发送，双向费用均为每GB 0.01美元</li></ul><p id="3f6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，我们将500 GB从VPC-1中的红移集群发送到同一个VPC但相邻的可用性区域中的EC2实例，在这种情况下，我们将为VPC-1的传出流量收取5美元，为VPC-2的传入流量收取5美元。</p><ul class=""><li id="3f84" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">使用公共IP或弹性IP在同一可用性区域VPC的EC2实例、容器或弹性网络接口之间传输数据，每个方向的费用为每GB 0.01美元</li></ul><p id="1420" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您有两个EC2，每个EC2都有自己的弹性IP——那么我们将为数据传输付费。</p><ul class=""><li id="7fa0" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">使用私有IP在相同可用性区域和相同VPC中的EC2实例、容器或弹性网络接口之间传输数据是免费的</li></ul><p id="99f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里很简单:只在VPC内部使用私有IP，不要通过AZ-borders——你不用支付任何费用。</p><ul class=""><li id="c259" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">不受可用性区域或VPC限制的AWS服务(如AWS S3、DynamoDB、SES、Kinesis等)与同一AWS区域内的EC2实例或其他服务之间的数据传输是免费的</li></ul><p id="f0b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，对于使用多AZ部署的服务，如亚马逊Aurora、亚马逊Neptune和亚马逊RDS，一些跨AZ流量是免费的。</p><p id="a463" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，同一AWS区域中的传统或应用负载平衡器和EC2之间的流量是免费的。</p><h2 id="e408" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">AWS流量计费地图</h2><p id="ab89" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在写这篇文章的时候，我在谷歌上搜索了很多次，没有找到类似地图的东西，上面有AWS交通费用的说明性演示。我唯一找到的是AWS博客上关于通用架构数据传输成本的概述。</p><p id="399b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，在下面的方案中，我试图展示哪些流量将在AWS上计费:</p><figure class="nc nd ne nf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/9f0ade51e66cdbc8c380313fe09f0867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1ocLU9JLUyw65MF8.png"/></div></div></figure><p id="7be8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从一个“入口点”开始一步一步地检查它，即Region-1和AZ-1中的负载平衡器。</p><p id="36a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">区域1，可用性区域1: </strong></p><ol class=""><li id="b11c" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv ng ld le lf bi translated">LoadBalencer传入流量是收费的(因为<a class="ae kw" href="https://aws.amazon.com/ru/elasticloadbalancing/faqs/" rel="noopener ugc nofollow" target="_blank"> LCU </a>包括处理的字节)</li><li id="b915" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">然后，从ALB到EC2的流量是免费的</li><li id="9b04" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">EC2通过NAT网关发送响应，在此期间，EC2和NAT GW之间的数据传输是免费的，但NAT GW的传出流量将被计费</li><li id="642e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">EC2将数据发送到同一个AWS区域中的CloudFront Edge位置，这是免费的，但是从CloudFront向访问者发送数据是收费的</li><li id="6807" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">从CloudFront Edge位置到EC2的数据流量将被计费</li><li id="c083" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">EC2和同一地区的S3之间的数据传输是免费的</li><li id="f25b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">EC2通过VPC对等连接与同一个AZ中的RDS主实例对话——这也是免费的</li><li id="4e28" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">EC2通过VPC对等连接与另一个AZ中的RDS从属设备对话，这将被计费(跨AZ)</li><li id="498c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">同一AWS区域中RDS主设备及其RDS从设备之间的复制流量是免费的</li></ol><p id="0a4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">区域1，可用性区域2: </strong></p><ol class=""><li id="44e3" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv ng ld le lf bi translated">从AZ-2中的EC2到AZ-1中的EC2的数据流量被计费，因为它是跨AZ流量</li><li id="aa7c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">AZ-2中EC2和RDS从站之间的通信是免费的</li><li id="a8d7" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">但是来自EC2和RDS主机的流量将被计费，因为它也是跨AZ的</li></ol><p id="d8ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">区域2，可用性区域3: </strong></p><ol class=""><li id="2340" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv ng ld le lf bi translated">从该区域中的EC2到区域-1中的EC2的输出流量将被计费，因为这是跨区域传输</li><li id="698d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv ng ld le lf bi translated">从该区域中的EC2到区域-1中的S3桶的输出流量将被计费，因为这是跨区域传输</li></ol><h2 id="7e31" class="mp lm iq bd ln mq mr dn lr ms mt dp lv kj mu mv lz kn mw mx md kr my mz mh na bi translated">AWS交通建议</h2><ul class=""><li id="6ac4" class="kx ky iq ka b kb mj kf mk kj ni kn nj kr nk kv lc ld le lf bi translated">尽量将所有工作负载放在同一个AWS区域，如果需要使用另一个区域，请选择价格最低的区域</li><li id="921d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">尝试将所有工作负载保持在同一个可用性区域和VPC中，并使用私有IP进行连接</li><li id="3a14" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">避免使用NAT网关，因为它是按传出流量计费的。尽可能使用互联网网关</li><li id="947f" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">如果您需要向用户发送数据，请使用CloudFront这将比直接从EC2实例发送流量更快，费用更低</li></ul><h1 id="23bf" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">有用的链接</h1><ul class=""><li id="d3f9" class="kx ky iq ka b kb mj kf mk kj ni kn nj kr nk kv lc ld le lf bi translated"><a class="ae kw" href="https://d1.awsstatic.com/whitepapers/aws_pricing_overview.pdf" rel="noopener ugc nofollow" target="_blank">AWS定价如何运作</a></li><li id="8a12" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://aws.amazon.com/ru/aws-cost-management/aws-cost-optimization/?track=costma" rel="noopener ugc nofollow" target="_blank">AWS定价如何优化和节省您的IT成本</a></li><li id="68b3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://aws.amazon.com/premiumsupport/knowledge-center/ebs-volume-charges/" rel="noopener ugc nofollow" target="_blank">如何在我的账单上计算Amazon EBS卷的费用？</a></li><li id="4a3c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://aws.amazon.com/ru/blogs/architecture/overview-of-data-transfer-costs-for-common-architectures/" rel="noopener ugc nofollow" target="_blank">常见架构的数据传输成本概述</a></li><li id="b36a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://cloudsoft.io/blog/the-ultimate-guide-to-aws-t3-instances-pricing" rel="noopener ugc nofollow" target="_blank">AWS T3实例定价终极指南</a></li><li id="d17a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://mulupuru.medium.com/your-comprehensive-guide-to-understanding-aws-data-transfer-costs-f5c8241d65ed" rel="noopener">全面了解AWS数据传输成本的指南</a></li><li id="eed2" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://www.cloudzero.com/blog/reduce-data-transfer-costs" rel="noopener ugc nofollow" target="_blank"> AWS数据转移定价:降低意外成本的7种方法</a></li><li id="61e7" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://cloudsoft.io/blog/aws-alb-cost-estimation" rel="noopener ugc nofollow" target="_blank"> AWS应用负载平衡器成本估算</a></li><li id="4ff9" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://www.cloudbolt.io/guide-to-aws-cost-optimization/aws-data-transfer-pricing/" rel="noopener ugc nofollow" target="_blank">AWS数据转移定价和保存指南</a></li><li id="ce56" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://advancedweb.hu/keep-costs-under-control-when-using-t3-instances/" rel="noopener ugc nofollow" target="_blank">使用t3实例时控制成本</a></li></ul></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="2a6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mo">最初发布于</em> <a class="ae kw" href="https://rtfm.co.ua/en/aws-cost-optimization-services-expenses-overview-and-traffic-costs-in-aws/" rel="noopener ugc nofollow" target="_blank"> <em class="mo"> RTFM: Linux、DevOps、系统管理</em> </a> <em class="mo">。</em></p></div></div>    
</body>
</html>