<html>
<head>
<title>Hide and Keep your API key out of GitHub repository</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的API密钥隐藏在GitHub存储库之外</h1>
<blockquote>原文：<a href="https://itnext.io/hide-and-keep-your-api-key-out-of-github-repository-7e89cc4b159d?source=collection_archive---------0-----------------------#2020-12-13">https://itnext.io/hide-and-keep-your-api-key-out-of-github-repository-7e89cc4b159d?source=collection_archive---------0-----------------------#2020-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/eaf596e393f82d029cb1d3e7da586ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xqqReUo_v8a_kbY3sJywEw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">保护您的API密钥</figcaption></figure><p id="db4e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当你在GitHub上上传你的Android应用程序时，你需要隐藏它，因为除了你没有人能访问它。这被认为是一个安全漏洞，所以这就是为什么隐藏你的API密匙是重要的。我将向您展示如何轻松做到这一点。</p><p id="d034" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一些开发人员将他们的API密匙存储在这样的字符串变量中。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f2ce" class="lj lk iq lf b gy ll lm l ln lo">private static final String APK_KEY = "asjsdakf4d3ggs2ytm4x";</span></pre><p id="6097" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">将你的秘密信息发布到公共库中是不好的，因为其他人可能会用完你有限的API调用。这可能是最不值得担心的情况。如果API密钥对某人访问数据子集进行身份验证，那么API密钥的共享就变得更加令人担忧。</p><p id="7d52" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">那么，让我们来看看我们如何做到这一点。</p><ol class=""><li id="23ef" class="lp lq iq ke b kf kg kj kk kn lr kr ls kv lt kz lu lv lw lx bi translated"><strong class="ke ir">将API密匙添加到您的</strong> <code class="fe ly lz ma lf b"><strong class="ke ir">local.properties</strong></code> <strong class="ke ir">文件</strong>:</li></ol><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="e29f" class="lj lk iq lf b gy ll lm l ln lo">apiKey="Your Key"</span></pre><p id="b72d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">2.<strong class="ke ir">将这两行添加到您的app级</strong> <code class="fe ly lz ma lf b"><strong class="ke ir">build.gradle</strong></code> <strong class="ke ir">文件的根级:</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="82bb" class="lj lk iq lf b gy ll lm l ln lo">def localProperties = new Properties()<br/>localProperties.load(new FileInputStream(rootProject.file("local.properties")))</span></pre><p id="04ee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">3.<strong class="ke ir">将下面这一行添加到您的应用程序级</strong> <code class="fe ly lz ma lf b"><strong class="ke ir">build.gradle</strong></code> <strong class="ke ir">文件:</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="270e" class="lj lk iq lf b gy ll lm l ln lo">android {<br/>  <br/>  defaultConfig {<br/>     // ...<br/>     buildConfigField "String", "API_KEY",localProperties['apiKey']<br/>  }<br/>    <br/>}</span></pre><p id="596e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">4.<strong class="ke ir">同步Gradle并构建项目。您现在可以参考密钥:</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="5c6b" class="lj lk iq lf b gy ll lm l ln lo">String apiKey = BuildConfig.API_KEY;</span></pre></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="b432" class="mi lk iq bd mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne bi translated">另一种方法是:</h1><ol class=""><li id="26ea" class="lp lq iq ke b kf nf kj ng kn nh kr ni kv nj kz lu lv lw lx bi translated"><strong class="ke ir">在中创建一个名为gradle.properties的文件。格拉德文件夹。</strong></li></ol><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="bc96" class="lj lk iq lf b gy ll lm l ln lo">- Drive C<br/> - Users folder<br/>  - your user folder<br/>   - .gradle folder<br/>   <strong class="lf ir">Create it here</strong><br/>   - gradle.properties</span><span id="0bee" class="lj lk iq lf b gy nk lm l ln lo">Then, write your APPNAME_API_KEY = "asjsdakf4d3ggs2ytm4x" inside it.<br/>Save it as PROPERTIES File by enclosing with double quotes like this "gradle.properties"</span></pre><p id="062f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">2.下一步，<strong class="ke ir">转到项目中的模块级build.gradle文件</strong></p><p id="016f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，将用于调试和发布目的的API键放在buildTypes树下。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7621" class="lj lk iq lf b gy ll lm l ln lo">buildConfigField ‘String’, “ApiKey”, APPNAME_API_KEY</span></pre><p id="7f85" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">会是那样的</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="e143" class="lj lk iq lf b gy ll lm l ln lo">buildTypes {<br/>        debug{<br/>            buildConfigField 'String', "ApiKey", APPNAME_API_KEY<br/>        }<br/>        release {<br/>            minifyEnabled false<br/>            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'<br/>            buildConfigField 'String', "ApiKey", APPNAME_API_KEY<br/>        }<br/>    }</span></pre><p id="254d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">同步它</p><p id="100b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">3.最后一步，<strong class="ke ir">像这样访问你的Java文件中的APK密钥</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="a0ed" class="lj lk iq lf b gy ll lm l ln lo">private static final String API_KEY = BuildConfig.ApiKey;</span></pre><p id="6bb2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果ApiKey变红，按下制作项目按钮或使用<strong class="ke ir"> Ctrl+F9 </strong></p><p id="fb79" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">听起来很简单，是吗？。每当你在GitHub上上传你的Android项目时，使用你的库的人将无法知道你的API密匙是什么。因此，你现在是安全的。</p><p id="054e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">更多文章:点击<a class="ae nl" href="https://marwa-eltayeb.medium.com/" rel="noopener"> <strong class="ke ir">此处</strong> </a></p><p id="443d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">上找我:</strong><a class="ae nl" href="https://github.com/Marwa-Eltayeb" rel="noopener ugc nofollow" target="_blank">GitHub</a>|<a class="ae nl" href="https://www.linkedin.com/in/marwa-eltayeb/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nl" href="https://twitter.com/Marwa_Eltayeb1" rel="noopener ugc nofollow" target="_blank">Twitter</a></p></div></div>    
</body>
</html>