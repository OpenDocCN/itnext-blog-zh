<html>
<head>
<title>Continuous Integration and Deployment (CI/CD Pipeline) with Github Package and Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Github包和Github动作的持续集成和部署(CI/CD管道)</h1>
<blockquote>原文：<a href="https://itnext.io/continuous-integration-and-deployment-ci-cd-pipeline-with-github-package-and-github-actions-24547f98c85c?source=collection_archive---------5-----------------------#2019-10-03">https://itnext.io/continuous-integration-and-deployment-ci-cd-pipeline-with-github-package-and-github-actions-24547f98c85c?source=collection_archive---------5-----------------------#2019-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/86416681ad39757e13f95767b72e0f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2L4fwCpy9tJ-hCIe"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源Github.blog</figcaption></figure><p id="ebb1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在之前的帖子中，我向你展示了如何创建你的第一个Github包 。我希望你玩得开心。在本文中，您将了解如何将CI/CD管道添加到流程中。</p><p id="ab30" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这意味着每次你推或者合并到master，<a class="ae la" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github Actions </a>将会触发管道，运行你的测试用例，并且自动将你的包部署到<a class="ae la" href="https://github.com/features/package-registry" rel="noopener ugc nofollow" target="_blank"> Github包注册表</a>。从现在开始，您可以管理您的回购中的一切—这有趣吗？:)</p><p id="cf8b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在开始之前，您需要将您的<a class="ae la" href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line" rel="noopener ugc nofollow" target="_blank">个人访问令牌</a>添加到环境中。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/85086c527af3156c8c6cf110869c84b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3dxtczpbS4yAOyeNl8ihfw.png"/></div></div></figure><p id="474b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这个过程非常简单。一旦你准备好了你的包，你需要做的就是在你的repo中创建一个<strong class="ke ir"> <em class="lg"> ci.yml </em> </strong>文件。记得在脚本中更改我的用户名。</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="bf0c" class="lm ln iq li b gy lo lp l lq lr">// .github/workflows/ci.yml</span><span id="3464" class="lm ln iq li b gy ls lp l lq lr">name: Publish to GitHub Package Registry</span><span id="7388" class="lm ln iq li b gy ls lp l lq lr">on: [push]</span><span id="cf15" class="lm ln iq li b gy ls lp l lq lr">jobs:<br/>  build:</span><span id="6bbb" class="lm ln iq li b gy ls lp l lq lr">runs-on: ubuntu-latest</span><span id="80d4" class="lm ln iq li b gy ls lp l lq lr">steps:<br/>    - uses: actions/checkout@v1<br/>    - name: Use Node.js 8.x<br/>      uses: actions/setup-node@v1<br/>      with:<br/>        registry-url: <a class="ae la" href="https://npm.pkg.github.com/" rel="noopener ugc nofollow" target="_blank">https://npm.pkg.github.com/</a><br/>        node-version: 8.x<br/>        scope: '<a class="ae la" href="http://twitter.com/dalenguyen" rel="noopener ugc nofollow" target="_blank">@dalenguyen</a>'<br/>    - name: npm install, build, and test<br/>      run: |<br/>        npm install<br/>        npm run build --if-present<br/>        npm test      <br/>    - name: publish<br/>      env:<br/>        NODE_AUTH_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}<br/>      run: |<br/>        npm run deploy</span></pre><p id="f69f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您想要在合并到主文件时触发构件，您可以使用:</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="bc63" class="lm ln iq li b gy lo lp l lq lr">on:<br/>  pull_request:<br/>    branches:<br/>      - master</span></pre><p id="1521" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在您推送或合并到master之后，您可以在Actions选项卡下检查构建</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/03cac9bf35d15f227906e551115019c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tUlj96TCh5cRBWgdaLFvag.png"/></div></div></figure><p id="90d0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">等一切都过去了，我的包就换成了更新版本。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/4d5fa6bcf91d118c8060900f8b0b4749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWC-PXYmRgFvH1X9QL_H-A.png"/></div></div></figure><p id="29d3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">剧本由<a class="ae la" href="https://github.com/honsq90" rel="noopener ugc nofollow" target="_blank"> hongsq90 </a>通过<strong class="ke ir"> #Hacktoberfest </strong>事件贡献。</p></div></div>    
</body>
</html>