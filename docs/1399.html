<html>
<head>
<title>What is Valuer?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是估值师？</h1>
<blockquote>原文：<a href="https://itnext.io/what-is-valuer-2a73a685864?source=collection_archive---------6-----------------------#2018-10-04">https://itnext.io/what-is-valuer-2a73a685864?source=collection_archive---------6-----------------------#2018-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/df5f10709456b1a7bf68f56f6d192004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ebCTWL-C4fWG94IbKgwwVw.png"/></div></div></figure><p id="8572" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<a class="ae kw" href="https://medium.com/@parzhitsky/undefined-youre-using-it-wrong-39798a7f3742" rel="noopener">我的上一篇文章</a>中，我简要提到了<a class="ae kw" href="https://www.npmjs.com/package/@valuer/main" rel="noopener ugc nofollow" target="_blank"> Valuer </a>，它是在实际使用之前验证价值的一个很好的工具。现在，我认为全面介绍它并简要介绍它的特性会很好。</p><h1 id="b3ad" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">快速入门</strong></h1><p id="4350" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">先说个例子。假设，你想限制一些数字是自然的。太经典了。任务是返回符合自然数定义的输入，否则抛出一个描述错误的错误。</p><p id="2b09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常你会使用<code class="fe ma mb mc md b">if .. else</code>语句和<code class="fe ma mb mc md b">return</code> <code class="fe ma mb mc md b">throw</code>子句来完成这类任务:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="2196" class="mm ky iq md b gy mn mo l mp mq">if (typeof value !== "number" || isNaN(value))<br/>    throw new Error("value is not a number");</span><span id="c2fb" class="mm ky iq md b gy mr mo l mp mq">else if (value &lt; 0)<br/>    throw new Error("value is a negative number");</span><span id="968d" class="mm ky iq md b gy mr mo l mp mq">else if (value % 1)<br/>    throw new Error("value is not an integer");</span><span id="74e2" class="mm ky iq md b gy mr mo l mp mq">else return value;</span></pre><p id="29b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我个人一直在做这种事情。这基本上是一段很好的代码，但是仍然存在一些问题:</p><ul class=""><li id="147e" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated">它不是自我描述的；这里没有一个字是关于自然数的；您可能需要添加一两个注释，或者更好地将它包装到一个具有良好描述性标识符的函数中；</li><li id="1bc3" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">阅读这些代码的开发人员被迫从实现的角度来思考，而不是从问题的角度来思考；</li><li id="11bc" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">开发人员在使用这种方法时，实际上可能会也可能不会将提供的值包含到出错时的控制台输出中，您只能期待最好的结果；</li><li id="b2c2" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">当一个错误发生时，并不立即清楚它意味着什么:你看到类似于<em class="ng">“0.3不是整数”</em>的东西，但它并没有真正的帮助；</li><li id="db48" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">为了保持控制台输出的整洁和可读性，您可能想要标准化错误消息的格式，这很难实现，因为这通常不是团队的主要任务；</li><li id="2cff" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">不同的开发人员可能更喜欢不同的方法来创建相同的条件——例如，使用<code class="fe ma mb mc md b">Number.isInteger</code>而不是<code class="fe ma mb mc md b">%</code>操作符——这不一定是一件坏事，但却是另一个不稳定的车轮。</li></ul><p id="60bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好是最好的敌人。不是说<em class="ng">“值必须是不小于零且能被1整除的原数”</em>你实际想表达的是<em class="ng">“值必须是自然数</em>。<em class="ng"/>那不是简单多了吗？</p><p id="5988" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是的，它是。</p><p id="e7a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，看看这个:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="347e" class="mm ky iq md b gy mn mo l mp mq">valuer(value).as(natural);</span></pre><h1 id="59cb" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">估价师就是验证</strong></h1><p id="0002" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir">让我给你看看这个真正快速的</strong></p><p id="0c30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个<code class="fe ma mb mc md b">natural</code>标识符是自然数的实际描述。<br/>估价师拥抱<a class="ae kw" href="https://en.wikipedia.org/wiki/Design_by_contract" rel="noopener ugc nofollow" target="_blank">契约式编程</a>。要验证自然数，您必须首先为Valuer创建对它们的描述，以了解它们看起来像什么。你可以这样做:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="4dbf" class="mm ky iq md b gy mn mo l mp mq">import { Descriptor } from "@valuer/main/dist/types";</span><span id="184b" class="mm ky iq md b gy mr mo l mp mq">const natural: Descriptor&lt;number&gt; = {<br/>    number: "integer",<br/>    spectrum: "non-negative",<br/>};</span></pre><p id="41fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该描述符表示，必须满足以下所有要求的<em class="ng">才能将一个值视为有效的自然数:</em></p><ul class=""><li id="6861" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated">它必须是<strong class="ka ir">一个原始数字</strong>(由<code class="fe ma mb mc md b">"number"</code>验证器隐含)；</li><li id="692b" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">它必须是一个整数。</li><li id="674a" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">必须是<strong class="ka ir">大于等于</strong><code class="fe ma mb mc md b"><strong class="ka ir">0</strong></code>；</li></ul><blockquote class="nh ni nj"><p id="abdf" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">使用原始包装器，比如<code class="fe ma mb mc md b"><em class="iq">Number</em></code>、<code class="fe ma mb mc md b"><em class="iq">String</em></code>、<code class="fe ma mb mc md b"><em class="iq">Boolean</em></code>或<code class="fe ma mb mc md b"><em class="iq">Symbol</em></code>构造函数，被认为是一种不好的做法。Valuer遵从这一点，并要求这些值是原始的。</p></blockquote><p id="9bfb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们使用给定的描述符来验证一些东西:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="0e2c" class="mm ky iq md b gy mn mo l mp mq">import { valuer } from "@valuer/main";</span><span id="c017" class="mm ky iq md b gy mr mo l mp mq">valuer(36.6, "body temperature").as(natural);</span></pre><p id="f000" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那个<code class="fe ma mb mc md b">36.6</code>看起来不像是自然数，Valuer知道这一点，因为您已经在描述符中提供了该信息！</p><blockquote class="nh ni nj"><p id="31db" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">或者，可以使用更简单的语法:<code class="fe ma mb mc md b"><em class="iq">.as("non-negative", "integer")</em></code>。估值师将尝试解释输入内容，并为您挑选合适的验证者。</p></blockquote><p id="3829" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据失败情况，将会引发一条错误消息，如下所示:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="0eb7" class="mm ky iq md b gy mn mo l mp mq">Validation failed: body temperature is not an integer: value &lt;number&gt; 36.6</span></pre><p id="2f9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">瞧啊！你不仅知道出了问题，你还知道<strong class="ka ir">到底是什么</strong>，这在更高的层面上意味着什么，以及，大概，如何修复它。</p><blockquote class="nh ni nj"><p id="5d58" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">请记住，验证的顺序通常取决于描述符中键的顺序(也称为验证器)，但JavaScript本身并不保证这一点。</p></blockquote><p id="e32e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像这样的错误信息总是以<code class="fe ma mb mc md b">"Validation failed"</code>开始。它还将提到值的作用(在本例中是<code class="fe ma mb mc md b">"body temperature"</code>)、失败(<code class="fe ma mb mc md b">"is not an integer"</code>，你猜对了)以及值的字符串表示，以类型和单词“value”为前缀</p><blockquote class="nh ni nj"><p id="1575" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">错误详细信息是可配置的。可以提供更少或更多的细节。</p></blockquote><h1 id="0a69" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我可以提供自己的错误信息吗？</h1><p id="f47c" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir">好笑你应该问</strong></p><p id="5f4d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据“错误信息”的确切含义，您至少有两种方式提供它们:通过<em class="ng">自定义验证器</em>或使用不同的<em class="ng">模式</em>。</p><h2 id="0d11" class="mm ky iq bd kz nn no dn ld np nq dp lh kj nr ns ll kn nt nu lp kr nv nw lt nx bi translated"><strong class="ak">自定义验证器</strong></h2><p id="1d2a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">尽管Valuer中有各种各样的内置验证器(现在我将省略)，您可能对这些东西有自己的看法。估值师对此表示赞赏。您可以根据自己的条件和失败创建和使用自己的验证器:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="5781" class="mm ky iq md b gy mn mo l mp mq">const list: Descriptor = {<br/>    <strong class="md ir">custom: Array.isArray</strong>,<br/>};</span></pre><p id="57c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种用法将使内置故障出现在错误上:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="bf5e" class="mm ky iq md b gy mn mo l mp mq">valuer("hi").as(list);<br/>// Validation failed: value <strong class="md ir">does not meet the constraint</strong></span></pre><blockquote class="nh ni nj"><p id="3a89" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">当然，<code class="fe ma mb mc md b"><em class="iq">"custom"</em></code>验证器只能使用一次，因为JavaScript中的对象不能有多个属性具有相同的键。</p></blockquote><p id="67a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了提供更有意义的错误消息(这显然是您想要的)，只需用实际的失败替换这个键:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="1b88" class="mm ky iq md b gy mn mo l mp mq">const MAX_REAL_AGE = 120;</span><span id="b605" class="mm ky iq md b gy mr mo l mp mq">const age: Descriptor&lt;number&gt; = {<br/>    '<strong class="md ir">is not a valid age</strong>': (n: number) =&gt; n &gt; 0,<br/>    '<strong class="md ir">is too big to be real</strong>': (n: number) =&gt; n &lt;= MAX_REAL_AGE,<br/>    '<strong class="md ir">shouldn't be used</strong>': (n: number) =&gt; n !== 13,<br/>};</span><span id="3d3d" class="mm ky iq md b gy mr mo l mp mq">valuer(-5).as(age);<br/>// Validation failed: <strong class="md ir">value is not a valid age</strong></span><span id="7653" class="mm ky iq md b gy mr mo l mp mq">valuer(256, "oldest man's age").as(age);<br/>// Validation failed: <strong class="md ir">oldest man's age is too big to be real</strong></span><span id="0a21" class="mm ky iq md b gy mr mo l mp mq">valuer(13, "baker's dozen").as(age);<br/>// Validation failed: <strong class="md ir">baker's dozen shouldn't be used</strong></span></pre><p id="d6c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在使用定制验证器时，你应该记住失败是关键，返回布尔的<strong class="ka ir">函数</strong> ⁴(又名<em class="ng"> thunk) </em>是它们中任何一个的值。Valid意味着“真”，所以如果提供了一个有效值，请确保该函数返回<code class="fe ma mb mc md b">true</code>,并且该失败具有足够的描述性，有助于快速修复错误。</p><blockquote class="nh ni nj"><p id="d6ef" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">请注意，失败文本应该以助动词开头，如“是”或“不”等。通过这种方式，错误消息保持可读和一致。</p><p id="c54a" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">⁴:我建议使用初等函数，一次只检查一件事。</p></blockquote><h2 id="1821" class="mm ky iq bd kz nn no dn ld np nq dp lh kj nr ns ll kn nt nu lp kr nv nw lt nx bi translated"><strong class="ak">不同模式</strong></h2><p id="4f63" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">显示定制错误的另一种方式是每当出现错误时执行完全不同的定制逻辑。这种方法意味着Valuer仅用于回答简单的问题:“输入有效吗？”</p><p id="5c37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">特别是对于这一点，有一个<code class="fe ma mb mc md b">"check"</code>模式。它改变了验证过程，并强制Valuer只返回一个布尔值，而不是抛出一个错误:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="1e11" class="mm ky iq md b gy mn mo l mp mq">const answer: Descriptor&lt;string&gt; = {<br/>    lengthRange: [ 100, Infinity ],<br/>};</span><span id="f098" class="mm ky iq md b gy mr mo l mp mq">const valid: boolean = valuer("42").as(answer, <strong class="md ir">{ mode: "check" }</strong>);</span><span id="bf5c" class="mm ky iq md b gy mr mo l mp mq">if (!valid)<br/>    alert("Only when you know the question, will you know what the answer means");</span></pre><p id="06c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本例中，描述符旁边有一个配置object⁵，其属性<code class="fe ma mb mc md b">.mode</code>等于<code class="fe ma mb mc md b">"check"</code>——这就是切换mode⁶.的原因</p><blockquote class="nh ni nj"><p id="71d2" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">⁵配置对象只能与描述符一起使用。第二个脚注中的替代语法(参见)只接受描述符值(也称为验证)。</p></blockquote><p id="9cc6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的目标是在你的web项目中获得流畅的用户体验，或者不喜欢过多地阅读控制台，这可能也是有用的。</p><blockquote class="nh ni nj"><p id="fae7" class="jy jz ng ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated">⁶在这个例子中，模式仅针对这个执行而改变。要一劳永逸地改变模式，只需在工作代码行之前的某个地方使用<code class="fe ma mb mc md b"><em class="iq">valuer.config</em></code>方法。<br/> <strong class="ka ir">不过要负责任地使用它</strong>，因为过度使用这个特性会使调试代码变得很痛苦。我建议每个项目使用一次。或者更少。</p></blockquote><h1 id="ccc6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">所以，就这样了？</strong></h1><p id="1244" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir">当然不是！那会很无聊的</strong></p><p id="12a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章涵盖了非常基础的估值。现在很清楚Valuer是什么，它解决什么问题。但是我省略了“它能做什么”这一部分</p><p id="a0fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里没有描述的是:</p><ul class=""><li id="1322" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated">验证器的详尽列表— <code class="fe ma mb mc md b">"set"</code>、<code class="fe ma mb mc md b">"kind"</code>、<code class="fe ma mb mc md b">"pattern"</code>等等；</li><li id="4ac7" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">其他模式，如<code class="fe ma mb mc md b">"assert"</code>、<code class="fe ma mb mc md b">"describe"</code>和<code class="fe ma mb mc md b">"switch"</code>；</li><li id="67b3" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">修改器，包括<code class="fe ma mb mc md b">"details"</code>和<code class="fe ma mb mc md b">"rangeInclusive"</code>；</li><li id="901a" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">可重用性—<code class="fe ma mb mc md b">valuer.as(descriptor, config)(value, role)</code>；</li><li id="9fca" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">描述符缩写和其他描述值；</li><li id="ab22" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">创建真实世界的定义—<code class="fe ma mb mc md b">valuer.define(name, description)</code>；</li><li id="e28d" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">验证非原始值；</li></ul><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="2bee" class="mm ky iq md b gy mn mo l mp mq">import { valuer } from "@valuer/main";<br/>import { Descriptor } from "@valuer/main/dist/types";</span><span id="53d3" class="mm ky iq md b gy mr mo l mp mq">interface Person {<br/>    name: string;<br/>    age: number;<br/>}</span><span id="a159" class="mm ky iq md b gy mr mo l mp mq">const nameDescriptor: Descriptor&lt;string&gt; = {<br/>    <strong class="md ir">pattern</strong>: /(?:[A-Z][a-z]* ?){2}/,<br/>    <strong class="md ir">lengthRange</strong>: [ 1, 32 ],<br/>};</span><span id="a33f" class="mm ky iq md b gy mr mo l mp mq"><strong class="md ir">valuer.define</strong>&lt;number&gt;("<strong class="md ir">age</strong>", {<br/>    <strong class="md ir">typeOf</strong>: "number",<br/>    <strong class="md ir">range</strong>: [ 1, 120 ],<br/>});</span><span id="bb51" class="mm ky iq md b gy mr mo l mp mq">valuer.define&lt;Person&gt;(":<strong class="md ir">person</strong>", {<br/>    <strong class="md ir">composite</strong>: {<br/>        name: nameDescriptor,<br/>        age: <strong class="md ir">[ ":age" ]</strong>,<br/>    },<br/>});</span><span id="d9c0" class="mm ky iq md b gy mr mo l mp mq">const validate = <strong class="md ir">valuer.as</strong>&lt;Person&gt;("<strong class="md ir">:person</strong>");</span><span id="916b" class="mm ky iq md b gy mr mo l mp mq">validate({ name: "hello", age: 17 }, "a person");<br/>// Validation failed: 'name' in a person does not match the pattern</span><span id="c47b" class="mm ky iq md b gy mr mo l mp mq">validate({ name: "Jon Snow", age: 0 }, "Jon Snow");<br/>// Validation failed: 'age' in Jon Snow is out of bounds</span><span id="f429" class="mm ky iq md b gy mr mo l mp mq">validate({ name: "Jon Snow", age: 17 });<br/>// (ok)</span></pre><p id="b588" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">哦，我有没有提到Valuer完全是用打字稿写的，它有丰富的智能感知支持？</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/3b8a77659eb027e827894753dd8e0f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-tUr9ZGXI1TBC8bNvwPI5g.png"/></div></div></figure><p id="80bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">顺便说一下，还有其他有用的相关包，比如<code class="fe ma mb mc md b"><a class="ae kw" href="https://www.npmjs.com/package/@valuer/help" rel="noopener ugc nofollow" target="_blank">@valuer/help</a></code>。包括Valuer istelf在内的所有人都获得了麻省理工学院的许可，并涵盖了单元测试。</p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><p id="25ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Valuer是不断发展的。如果你喜欢它背后的概念，或者特别是如果你觉得它可以变得更好，请<a class="ae kw" href="https://gitlab.com/valuer" rel="noopener ugc nofollow" target="_blank">加入团队</a>和<a class="ae kw" href="https://gitlab.com/valuer/main/issues" rel="noopener ugc nofollow" target="_blank">查看问题列表</a>以做出贡献。</p><p id="1a5a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在那里见👋</p></div></div>    
</body>
</html>