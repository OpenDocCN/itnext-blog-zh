<html>
<head>
<title>Build a simple CRUD todo app with Python Flask in 100 lines of code or less</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python Flask用100行或更少的代码构建一个简单的CRUD todo应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-simple-crud-todo-app-with-python-flask-in-100-lines-of-code-or-less-97d8792f24be?source=collection_archive---------0-----------------------#2021-06-10">https://itnext.io/build-a-simple-crud-todo-app-with-python-flask-in-100-lines-of-code-or-less-97d8792f24be?source=collection_archive---------0-----------------------#2021-06-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f5fc83bda43317ba7f1840cebd6ace5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lhWckzSR9KbnlBx-oV7nYA.png"/></div></div></figure><p id="cd40" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程中，我们将构建一个简单的CRUD应用程序(<em class="kz">创建，读取，更新，删除</em>)来保存一个“待办事项”列表。我们将使用Python 3和两个外部库。第一个是Flask web框架，第二个是SqlAlchemy中的ORM mapper，用于简化数据库操作。我们将使用Bootstrap作为前端。Python代码可以容纳50行代码，HTML也可以。</p><h1 id="f70b" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">安装依赖项并准备环境</h1><p id="8066" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">首先，我们将使用pip依赖管理器来安装flask和SQLAlchemy(每个Python安装都附带了pip)。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/580a63b882874659e9b6d61aa2c1e695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PDiG0DPQ3fgvHSzv.png"/></div></div></figure><p id="8234" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们在根文件夹中创建一个模板文件夹。Flask用它来加载HTML模板。创建一个新的index.html文件。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/8ae5a420658c014389ee2493ca95e2ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/0*ejOjz_D7ZbZYxYoc.png"/></div></figure><h1 id="2ddb" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">导入和应用程序初始化</h1><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/a1f80196ae44b2c3370e90ecee199399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v6ClyGUIx3fxWQeY.png"/></div></div></figure><p id="c88c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们需要导入所需的依赖项。然后我们初始化Flask应用程序(我们使用活动模块名<em class="kz"> __name__ </em>作为参数)。然后我们创建数据库连接。我使用的是一个基本的文件数据库，SQLite。如果你有一个更复杂的数据库作为一个单独的进程运行(MariaDB，Postgres)，使用它。您只需要更改连接字符串。然后，我们将这个字符串作为URI数据库地址传递，并运行SQLAlchemy。一个重要的步骤是定义数据库模型。</p><p id="1aae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为此，我们创建了<em class="kz">注释</em>表，其中包含自动<em class="kz"> id </em>、todo任务的<em class="kz">文本</em>、保存<em class="kz">完成</em>值的布尔值以及保存创建时间的自动日期<em class="kz">日期添加</em>。稍后我们将用这个模型初始化数据库。</p><h1 id="c322" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">CRUD API</h1><p id="7077" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">让我们创建4个方法，这将确保我们的应用程序是一个CRUD应用程序，它将能够创建，读取，更新和删除记录。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/78414512525375058a4df919f48f7e03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6LXfYbzp_ZF1M15u.png"/></div></div></figure><p id="c3ff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="kz"> create_note </em>方法只有任务<em class="kz">文本</em>作为参数。首先，我们创建一个新的<em class="kz">注释</em>，以文本形式传递这个参数，并将其保存在数据库中。对于<em class="kz">已读笔记</em>，我们只列出数据库中所有的<em class="kz">笔记</em>记录。<em class="kz"> update_note </em>方法有两个参数，<em class="kz">文本</em>和<em class="kz">完成</em>。<em class="kz">文本</em>也是任务的文本，而<em class="kz">完成</em>是我们将创建的表单的复选框的值。如果该复选框的值为“开”(即被检查)，则存储的布尔值<em class="kz"> done </em>将为<em class="kz">真</em>，否则<em class="kz">假</em>。现在只剩下删除的方法<em class="kz"> delete_note </em>。</p><h1 id="9823" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">主页，添加和显示记录</h1><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/ce837f97f930ec3e7653b4a04d5948fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wq1XIiKi4r03jDP_.png"/></div></div></figure><p id="8fe4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Flask框架中，使用<em class="kz"> @ app.route </em>装饰器定义端点。第一个参数是相对URL。另一个可选参数保存允许的请求方法，在我们的例子中，<em class="kz"> POST </em>和<em class="kz"> GET </em>用于表单处理。<em class="kz"> POST </em>方法意味着我们发送一个带有新创建任务的表单。但是无论是<em class="kz"> POST还是GET </em>，我们都会显示<em class="kz">index.html</em>模板，并将我们已经存储在数据库中的所有任务(<em class="kz"> read_notes </em>)传递给<em class="kz"> Jinja </em>模板系统，以将它们绘制到模板中。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/15504802db1d42b43c989819a6614233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OSQYnpQJ-LTbve12.png"/></div></div></figure><p id="ec9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">第一种形式将连接到“/”端点，即。到主页。它只有一个文本输入字段和一个提交按钮。然后，我们将检查传递给notes变量中的模板的所有记录，并显示它们。稍后，我们将为每条记录添加一个表单，这样就可以从前端编辑和删除单个记录。目前，页面看起来像这样。我们可以添加和显示，但不能编辑和删除。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/b4d9e38dacec9f9f7897621dad3947fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZOXRt4f5BPjYFCth.png"/></div></div></figure><h1 id="55c8" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">编辑、删除和更好的前端</h1><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/a6722440755d5dfcebed70daaf491332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K38sdrRRoa6iCN9h.png"/></div></div></figure><p id="bcc7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">编辑和删除的方法有点复杂。我们将端点的相对地址指定为<em class="kz"> /edit/note_id </em>，即。我们将向URL传递一个参数，我们将其命名为<em class="kz"> note_id </em>。我们把它传递给<em class="kz"> edit_note </em>方法。如果输入请求是通过<em class="kz"> POST </em>发出的，我们将输入表单传递给<em class="kz"> update_note </em>函数来修改任务。如果作为<em class="kz">的GET </em>请求，那么我们删除给定的任务。完成后，我们会将所有内容重定向到原始页面。</p><p id="9ed5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Python代码中，我们调用<em class="kz"> db.create_all </em>，它创建一个包含我们指定的所有表的数据库(在我们的例子中，只有<em class="kz">注释</em>)，然后运行整个Flask应用程序。</p><p id="9972" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我们调整模板，使它看起来不错。这需要对现有的HTML代码进行重大修改(对于整个应用程序，请访问my <a class="ae mj" href="https://github.com/janjilecek/simple_python_flask_crud_todo_app" rel="noopener ugc nofollow" target="_blank"> Github </a>)。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/b6ff2fe76e8f62abb8092d1b9bb262a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kbmR1WO7eHnC2uaX.png"/></div></div></figure><p id="690a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们将导入引导CSS样式。我们将所有表单编辑成引导样式，并将每个列出的任务更改为左侧有一个复选框、右侧有一个按钮来确认文本编辑的表单。如果复选框被选中，我们通过<em class="kz"> onChange </em> javascript调用重定向函数，该函数向地址<em class="kz"> /edit/note_id </em>发送<em class="kz"> GET </em>请求。如果点击更新按钮，它将被发送到同一个<em class="kz"> POST </em>请求地址。我们还将添加一些小细节，比如在鼠标悬停时显示任务的创建时间。渲染的模板现在看起来像这样:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/87bc600b3bcc251a6380e6a7eba9c6ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W4LmayFCdmgPQLrk.png"/></div></div></figure><p id="31ea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们最后的申请！我们研究了如何创建用于创建、编辑、读取和删除记录的端点，将前端连接到它们，并将所有东西包装成引导样式以使我们的应用程序看起来更好，并且我们在不到100行代码中完成了所有这些。我的<a class="ae mj" href="https://github.com/janjilecek/simple_python_flask_crud_todo_app" rel="noopener ugc nofollow" target="_blank"> Github </a>上有整个应用程序。希望你学到了新的东西，下次再见！</p></div></div>    
</body>
</html>