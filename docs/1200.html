<html>
<head>
<title>Smooth File Uploading with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React平滑上传文件</h1>
<blockquote>原文：<a href="https://itnext.io/uploading-files-with-react-and-filepond-f8a798308557?source=collection_archive---------0-----------------------#2018-08-10">https://itnext.io/uploading-files-with-react-and-filepond-f8a798308557?source=collection_archive---------0-----------------------#2018-08-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a5cf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何快速设置FilePond React适配器的教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8b50918a544d2c44305e0675ccdb9d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A66M6hR0oBaAqNoLqBXZ9A.jpeg"/></div></div></figure><p id="fe68" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://pqina.nl/filepond" rel="noopener ugc nofollow" target="_blank"> FilePond </a>是一个相对较新的JavaScript文件上传库，在本教程中，我们将建立一个新的<a class="ae ln" href="https://reactjs.org" rel="noopener ugc nofollow" target="_blank"> React </a>应用程序，与<a class="ae ln" href="https://github.com/pqina/react-filepond" rel="noopener ugc nofollow" target="_blank"> FilePond React Adapter </a>组件集成，并建立一个到后端的连接，该后端将接收我们上传的文件。</p><p id="5188" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用<a class="ae ln" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a>节点模块来快速组装我们的基本React应用程序。如果你熟悉这个过程，你可以跳到<a class="ae ln" href="#17db" rel="noopener ugc nofollow">与FilePond </a>部分。</p><h1 id="3b49" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">创建基础React应用程序</h1><p id="e722" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">假设您已经安装了<a class="ae ln" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">节点</a>版本6或更高版本，从您的终端运行以下命令(如果没有，现在是安装它的时候了)。它将创建一个文件夹“我的应用程序”，其中将包含我们的反应应用程序。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="f9ed" class="mq lp iq mm b gy mr ms l mt mu">npx create-react-app <strong class="mm ir">my-app</strong></span></pre><p id="b9b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，我们有了起点，让我们导航到“我的应用程序”目录。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="7944" class="mq lp iq mm b gy mr ms l mt mu">cd my-app</span></pre><p id="a53d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在启动开发服务器，它会自动打开一个浏览器窗口。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="e1f0" class="mq lp iq mm b gy mr ms l mt mu">npm start</span></pre><p id="39bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过同时按下<code class="fe mv mw mx mm b">CTRL</code>和<code class="fe mv mw mx mm b">C</code>键从命令行停止应用程序。</p><h1 id="17db" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">与FilePond集成</h1><p id="07cc" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">随着React应用程序的运行，我们现在可以添加FilePond React适配器。</p><p id="0f57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们停止应用程序并安装适配器。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="0cd1" class="mq lp iq mm b gy mr ms l mt mu">npm install <strong class="mm ir">filepond</strong> <strong class="mm ir">react-filepond</strong> --save</span></pre><p id="a41a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装好适配器文件后，让我们再次启动应用程序，这样我们就可以开始进行更改了。</p><p id="0d21" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将把FilePond组件添加到应用程序登录页面，实际上您可能会把它移动到其他地方，但是对于本文的目的来说，这已经足够了。</p><p id="8bc6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们首先需要导入<code class="fe mv mw mx mm b">FilePond</code>组件和它的CSS文件。</p><p id="8ad2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">打开“App.js”文件，将以下几行添加到文件的顶部。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="3c6f" class="mq lp iq mm b gy mr ms l mt mu">import { <strong class="mm ir">FilePond</strong> } from 'react-filepond';<br/>import <strong class="mm ir">'filepond/dist/filepond.min.css';</strong></span></pre><p id="dacd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下一步是将组件添加到HTML中。让我们在<code class="fe mv mw mx mm b">render()</code>函数中编辑HTML并添加<code class="fe mv mw mx mm b">&lt;FilePond/&gt;</code>标签。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="ede8" class="mq lp iq mm b gy mr ms l mt mu">&lt;div <em class="my">className</em>="App"&gt;</span><span id="b710" class="mq lp iq mm b gy mz ms l mt mu"> &lt;header <em class="my">className</em>="App-header"&gt;<br/>   &lt;img <em class="my">src</em>={logo} <em class="my">className</em>="App-logo" <em class="my">alt</em>="logo" /&gt;<br/>   &lt;h1 <em class="my">className</em>="App-title"&gt;Welcome to React&lt;/h1&gt;<br/>  &lt;/header&gt;</span><span id="977c" class="mq lp iq mm b gy mz ms l mt mu">  &lt;p <em class="my">className</em>="App-intro"&gt;<br/>    To get started, edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>  &lt;/p&gt;</span><span id="35b4" class="mq lp iq mm b gy mz ms l mt mu">  <strong class="mm ir">&lt;FilePond/&gt;</strong></span><span id="6f48" class="mq lp iq mm b gy mz ms l mt mu">&lt;/div&gt;</span></pre><p id="9fd7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">文件池拖放区现在应该显示在介绍文本的下面。它看起来会像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/14d01ec161bb0acff036b4b88f945708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMmUHba39VqaKbCyry9K8A.png"/></div></div></figure><p id="5c43" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们可以开始按照自己的意愿配置FilePond了。</p><p id="9de4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，FilePond只接受一个文件，这是因为它增强了默认的file input元素并复制了它的标准行为。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/6467f5ba84768b502d1541268660d4f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*27IG4zyokQcRTxh2zU6YWg.gif"/></div></div></figure><p id="db80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要启用多文件模式，让我们添加<code class="fe mv mw mx mm b">allowMultiple</code>道具。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="c575" class="mq lp iq mm b gy mr ms l mt mu">&lt;FilePond <strong class="mm ir">allowMultiple={true}</strong>/&gt;</span></pre><p id="7316" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">放下一个文件夹或选择多个文件来查看它的运行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/36665293bf68ed1befe4a2afb03cc3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EQ3uuEJ4nwtsBH5-5GYGYA.gif"/></div></div></figure><p id="d486" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就像经典的文件输入一样，文件被加载到FilePond，但不做任何其他事情，它们只是呆在那里。我们很可能希望将它们发送到我们的后端。我们将通过为FilePond提供<code class="fe mv mw mx mm b">server</code>属性来实现这一点。</p><p id="5628" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你有一个可以处理发送给它的文件对象的服务器端点，你可以使用它，如果没有，我们可以设置<a class="ae ln" href="https://github.com/pqina/filepond-boilerplate-php" rel="noopener ugc nofollow" target="_blank"> FilePond PHP样板</a>(下载存储库并运行<code class="fe mv mw mx mm b">vagrant up</code>)。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="bb69" class="mq lp iq mm b gy mr ms l mt mu">&lt;FilePond allowMultiple={true} <strong class="mm ir">server="http://192.168.33.10"</strong>/&gt;</span></pre><p id="fc3c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">配置好服务器位置后，FilePond会自动将拖放的文件发布到提供的URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/ee2cf1339f07b25a818713ec278be172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8tN-yfQKQPkkHfM07T5NQg.gif"/></div></div></figure><p id="2d3b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认的文件池服务器调用在<a class="ae ln" href="https://pqina.nl/filepond/docs/patterns/api/server/" rel="noopener ugc nofollow" target="_blank">服务器配置文档</a>中有描述。可以将<code class="fe mv mw mx mm b">server</code>属性微调到最低级别(参见文档)，这使得FilePond基本上可以与任何远程或本地文件存储解决方案集成。</p><p id="b515" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了增加趣味，让我们启用图像预览。</p><p id="2a07" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将从安装图像预览插件开始。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="bb25" class="mq lp iq mm b gy mr ms l mt mu">npm install <strong class="mm ir">filepond-plugin-image-preview</strong> --save</span></pre><p id="6e83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们需要导入并向FilePond核心注册插件。我们将不得不修改FilePond导入来导入<code class="fe mv mw mx mm b">registerPlugin</code>方法。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="f1c5" class="mq lp iq mm b gy mr ms l mt mu">import { FilePond, <strong class="mm ir">registerPlugin</strong> } from 'react-filepond';</span></pre><p id="0deb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们已经准备好导入和注册图像预览插件。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="b328" class="mq lp iq mm b gy mr ms l mt mu">import <strong class="mm ir">FilePondPluginImagePreview</strong> from 'filepond-plugin-image-preview'<strong class="mm ir">;</strong><br/>import <strong class="mm ir">'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css'</strong>;</span><span id="7b6d" class="mq lp iq mm b gy mz ms l mt mu">registerPlugin(<strong class="mm ir">FilePondPluginImagePreview</strong>);</span></pre><p id="6182" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">搞定了。让我们重新启动应用程序，并删除一个图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/2d42a2afe8cf7125d56e832280f51e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mwkOVJH-HlWwIMYa6xkRHw.gif"/></div></div></figure><p id="e5fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是用FilePond上传文件的基础。</p><p id="08d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以通过自动<a class="ae ln" href="https://github.com/pqina/filepond-plugin-image-exif-orientation" rel="noopener ugc nofollow" target="_blank"> EXIF方向校正</a>、<a class="ae ln" href="https://github.com/pqina/filepond-plugin-image-crop" rel="noopener ugc nofollow" target="_blank">图像裁剪</a>、<a class="ae ln" href="https://github.com/pqina/filepond-plugin-image-resize" rel="noopener ugc nofollow" target="_blank">调整大小</a>、<a class="ae ln" href="https://github.com/pqina/filepond-plugin-image-transform" rel="noopener ugc nofollow" target="_blank">客户端图像变换</a>和<a class="ae ln" href="https://github.com/pqina/filepond#plugins" rel="noopener ugc nofollow" target="_blank">各种其他插件</a>等特性进一步增强该组件。</p><p id="1648" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有一个完整的<a class="ae ln" href="https://pqina.nl/filepond/docs/patterns/api/filepond-instance/#properties" rel="noopener ugc nofollow" target="_blank">道具列表</a>和<a class="ae ln" href="https://pqina.nl/filepond/docs/patterns/api/filepond-instance/#callbacks" rel="noopener ugc nofollow" target="_blank">事件</a>你可以配置让FilePond满足你的需求。</p><p id="9cd4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你有任何问题，<a class="ae ln" href="https://twitter.com/rikschennink" rel="noopener ugc nofollow" target="_blank">在推特上找我</a></p></div></div>    
</body>
</html>