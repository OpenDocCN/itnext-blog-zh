<html>
<head>
<title>How to use a single instance of Socket.IO in your React app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Socket的单个实例？React应用程序中的IO</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-use-a-single-instance-of-socket-io-in-your-react-app-6a4465dcb398?source=collection_archive---------3-----------------------#2018-06-14">https://itnext.io/how-to-use-a-single-instance-of-socket-io-in-your-react-app-6a4465dcb398?source=collection_archive---------3-----------------------#2018-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="0ec6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我目前正在开发的聊天室应用程序中，我需要一个单一的套接字。可以由几个React组件共享的IO实例。在下面的文章中，我将谈谈我是如何做到这一点的。</p></div><div class="ab cl ko kp hx kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="im in io ip iq"><p id="cb98" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">React发布了新的上下文API，并在v16.4.0中正式发布。上下文API旨在共享可以被视为React组件树的“全局”数据。如你所见，它是我们的最佳候选。</p><p id="69ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为有些组件需要使用单个插座。IO实例深深地嵌套在React组件树中，我们将创建一个上下文实例并将其存储在一个单独的文件中，这样当组件需要它时，它就可以导入它。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="d2f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，在您的根组件中，您可以创建一个套接字。IO实例，并使用提供程序来传递套接字。组件树的IO实例。这样做了以后，不管一个组件有多深，都可以得到插座。IO实例。</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="1f1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设你有一个组件需要使用这个插座。IO实例，您可以获得单个套接字。IO实例是这样的:</p><figure class="kv kw kx ky gt kz"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="49fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对了，如果有人对我正在搭建的聊天室app感兴趣，可以在这里找到:<a class="ae lc" href="https://react.chatboard.com.au" rel="noopener ugc nofollow" target="_blank">https://react.chatboard.com.au</a>。你也可以在GitHub上找到它的源代码:【https://github.com/spencerfeng/chat-board-react<a class="ae lc" href="https://github.com/spencerfeng/chat-board-react" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>