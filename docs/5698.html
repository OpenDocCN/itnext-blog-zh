<html>
<head>
<title>How to better manage business logic in your Flutter apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何更好地管理你的Flutter应用程序中的业务逻辑</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-better-manage-business-logic-in-flutter-apps-bbbc8efe5dab?source=collection_archive---------0-----------------------#2021-05-06">https://itnext.io/how-to-better-manage-business-logic-in-flutter-apps-bbbc8efe5dab?source=collection_archive---------0-----------------------#2021-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/4660fa08c6420af57081fb03e5df72fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EGUJ9xFAeIh5FrJ2yfcOMw.png"/></div></div></figure><p id="cb2e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你好👋</p><p id="c7c3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我是卢克，我是一名软件开发人员，我喜欢学习新事物。每天都是提升自己，做点事情的机会！</p><p id="820d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我开始了我的颤振系列，作为我对社区的投入。感觉棒极了。当我觉得有些话题被忽略或谈得不够多时，我会试着加入进来。</p><p id="6c10" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">管理业务逻辑就是其中之一，所以我跳了下去😉</p><p id="ed6a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们看看如何更好地管理您的应用程序业务逻辑。</p><h1 id="0dfc" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">简单—使用monorepo...但这是什么呢？🧐</h1><p id="070e" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">对于那些不知道的人来说，monorepo是一种将多个项目存储在单个存储库中的软件开发策略。</p><blockquote class="mc md me"><p id="8713" class="kb kc mf kd b ke kf kg kh ki kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ky im bi translated">在现实生活中意味着什么？</p></blockquote><p id="efb7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当您在一个存储库中包含前端、后端应用、配置和其他相关子项目时，如下所示:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="6a4e" class="ms la it mo b gy mt mu l mv mw">pick_of_destiny<br/>    -&gt; front-end<br/>    -&gt; backend-end<br/>    -&gt; configuration</span></pre><p id="7d80" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有人喜欢monorepos，也有人反对它。我不是上面的人。我的政策是你应该使用最适合你需要的。这并不是说你必须永远坚持下去。需要时，您可以拆分或合并存储库。我想不出有哪种语言或框架会强迫开发人员使用这种或那种。颤振也不例外。</p><h1 id="27aa" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">良好的颤振模块化</h1><p id="286e" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">你可以在一个回购中存储多个Flutter应用程序，但我心中的想法有点不同。我在之前的文章中提到过这个问题(<a class="ae mx" rel="noopener ugc nofollow" target="_blank" href="/flutter-is-no-longer-a-cross-platform-framework-b53c87b14c39"> Flutter不再是一个跨平台的框架——它有更多的含义。"</a>)我在这里提到了模块化，以及我们应该如何分离不同平台之间的逻辑。不幸的是，我没有具体说明如何在Flutter中实现它，人们认为monorepo是唯一的方法。</p><blockquote class="mc md me"><p id="df2f" class="kb kc mf kd b ke kf kg kh ki kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ky im bi translated">我再说一遍——不是的:)</p></blockquote><p id="c9f4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了便于解释，假设你负责一个类似优步的应用程序(在这种情况下，我会嫉妒😉)并且你必须维护3个应用程序:</p><ul class=""><li id="a4f8" class="my mz it kd b ke kf ki kj km na kq nb ku nc ky nd ne nf ng bi translated">客户app—app<strong class="kd iu">A</strong></li><li id="57a6" class="my mz it kd b ke nh ki ni km nj kq nk ku nl ky nd ne nf ng bi translated">司机app—app<strong class="kd iu">B</strong></li><li id="fed2" class="my mz it kd b ke nh ki ni km nj kq nk ku nl ky nd ne nf ng bi translated">仅显示您的乘坐位置的网页版——app<strong class="kd iu">C</strong></li></ul><p id="eeac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于用户界面/UX的感觉以及手机或浏览器等媒介提供的优势，你不会在一个应用程序基础上开发移动和网络版本。是的，您可以使用布局生成器。但是为什么呢？web应用程序的用途与移动应用程序完全不同，因此不同的代码库在公司中更容易管理。那是我的观点，你的可以不同。</p><p id="f868" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，app <strong class="kd iu"> A </strong>和<strong class="kd iu"> B </strong>有一些相似之处，如登录、应用内通信、地图和一些地图机制，但app <strong class="kd iu"> C </strong>有一个唯一的地图和一个非常简化的地图，只显示位置和预计到达时间。</p><p id="7a55" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这种情况下，我将创建3个(Flutter)应用程序，每个应用程序位于不同的存储库中，大约十几个或更多的包和插件存储在一个monorepo中。所有的共享登录、应用内通信、ETA计算等等都可以存在那里。</p><p id="6a55" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为什么我要这样使用它？主要是为了避免代码重复，但另一个理由是让开发团队只致力于特定的应用目标。应用程序<strong class="kd iu"> A、B、</strong>和<strong class="kd iu"> C </strong>上的开发人员不应该在相同的修复功能上工作。这会让公司付出很大代价——金钱和时间！</p><p id="3238" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请记住，您不必从一开始就这样做。当你写你的第一个应用程序时，试着遵循一些好的编程实践，使代码可重用和可伸缩。记住这一点，你就可以轻松地将你的代码转移到一个单独的代码库中，而不会出现更大的问题。</p><p id="8ef8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你对monorepo插件/包的想法感兴趣，让我们看看如何在你的Flutter项目中使用它。</p><h1 id="7df4" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">范例—“世界上最好的范例”</h1><p id="a914" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">创建monorepo非常简单。只需创建一个目录，在其中放置所有需要的包和插件，然后将该目录设置为repo的根目录。你准备好出发了吗😉</p><h2 id="7277" class="ms la it bd lb np nq dn lf nr ns dp lj km nt nu ln kq nv nw lr ku nx ny lv nz bi translated">如何在你的颤振项目中使用？</h2><p id="9498" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">您可以以两种方式使用monorepo:本地和远程(通过git)</p><p id="4b82" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在开发过程中，我经常将本地克隆的repo与我的包一起使用，如下所示:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="9551" class="ms la it mo b gy mt mu l mv mw">dependencies:<br/>  kicka💩:<br/>    path: ../the_best_package_in_the_world/kicka💩</span></pre><p id="6140" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我正在使用来自<code class="fe nm nn no mo b">tbpitw(the_best_package_in_the_world)</code>回购的<code class="fe nm nn no mo b"> kicka💩</code>包。</p><p id="8c86" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，当应用程序准备好发布时，我把它改成使用git——就像这样:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="b0c9" class="ms la it mo b gy mt mu l mv mw">dependencies:<br/>  kicka💩:<br/>    git:<br/>      url: git://github.com/lukeurban/tbpitw.git<br/>     <strong class="mo iu"> path: kicka💩</strong></span></pre><p id="58d6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我可以使用尽可能多的插件，结构看起来是一样的:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="3121" class="ms la it mo b gy mt mu l mv mw">dependencies:</span><span id="46e0" class="ms la it mo b gy oa mu l mv mw">  kicka💩:<br/>    git:<br/>      url: git://github.com/lukeurban/tbpitw.git<br/>     <strong class="mo iu"> </strong>path: kicka💩</span><span id="b273" class="ms la it mo b gy oa mu l mv mw">  belzeboss😈:<br/>    git:<br/>      url: git://github.com/lukeurban/tbpitw.git<br/>      path: belzeboss😈</span></pre><blockquote class="mc md me"><p id="11ea" class="kb kc mf kd b ke kf kg kh ki kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ky im bi translated">对于那些思考这些奇怪名字的人来说，这是一个顽固的D参考。一对伟大的喜剧摇滚组合。如果你认识他们——你太棒了🤘如果你没有，那么你一定要检查一下！</p></blockquote><figure class="mj mk ml mm gt ju"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h1 id="bcbc" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">共享代码monorepo的优势</h1><p id="a65c" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">正如我所说，很多人喜欢monorepo，也有很多人讨厌它。对我来说，使用monorepo为您的私有依赖项带来了以下好处:</p><ul class=""><li id="31ab" class="my mz it kd b ke kf ki kj km na kq nb ku nc ky nd ne nf ng bi translated">一个词</li><li id="7198" class="my mz it kd b ke nh ki ni km nj kq nk ku nl ky nd ne nf ng bi translated">模块性</li><li id="82cc" class="my mz it kd b ke nh ki ni km nj kq nk ku nl ky nd ne nf ng bi translated">复用性</li></ul><p id="62a8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果用于多个项目，共享代码存储在monorepo中，而不是多个项目存储库中。这可以确保每个应用程序都使用相同的功能集，并且它们不会因使用位置不同而表现不同。谁有时间去研究:“为什么这个在app A上行得通，在app B上行不通”。我们可以说:“好的，我们需要修复这个包”，而不是无休止的调试。</p><h1 id="e940" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我应该一直使用monorepo吗？我们应该用单一回购做什么？🥸</h1><p id="962c" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">对我来说，当我独自开始一个项目时，将所有东西放在一个回购中更容易。当更多的出现时，我通常建议将每个部分分成单独的库。它可以呆在一起，但就我个人而言，我不是一个球迷。</p><p id="7be4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我用monorepo做我公司的内部插件/包。并非我们所做的一切都可以开源，我们的大多数应用程序都将使用通用逻辑，所以——为什么不呢？</p><p id="feb5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我和我的好朋友在谈论monorepos，我们得出结论，人们真的不喜欢它们。这很可悲。也许这篇小文章会改变他们的想法。如果读完这篇文章后有人考虑使用mono repo——我达到了我的目标！我非常赞同你的决定。</p><h1 id="68f1" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">摘要</h1><p id="30b5" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在本文中，我想“推销”最简单、但却被遗忘的monorepo理念。在我看来，这是更好地管理我们的业务逻辑的方法。</p><p id="0a68" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一位开发人员告诉我，在他的公司里，我以前的一篇文章被用作反对Flutter的论据，因为模块化意味着它必须保持在一个单一的、类似单一回购的结构中。可以，但不是唯一的选择。所以才写了这篇文章。</p><p id="d51e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Flutter中，你想如何管理你的逻辑取决于你自己。但我要重复一遍:</p><blockquote class="od"><p id="fe13" class="oe of it bd og oh oi oj ok ol om ky dk translated">Flutter没有强迫你使用monorepo。</p></blockquote><p id="b4c8" class="pw-post-body-paragraph kb kc it kd b ke on kg kh ki oo kk kl km op ko kp kq oq ks kt ku or kw kx ky im bi translated">所以对于更大的多app公司，在我看来这是一个完美的选择。由于Flutter 2.0的发布允许在iOS、Android、Mac、Windows、Linux和web上构建应用程序，我们几乎可以创建任何东西。谁喜欢浪费时间一遍又一遍地写相同的特性呢？</p><p id="17d6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">感谢阅读！如果您有任何问题，请在<a class="ae mx" href="https://twitter.com/ThatLukeUrban" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上问我，我的DMs是开放的。你可以跟着我去那里和这里，在媒体上！</p><p id="938f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我刚刚推出了我的新网站(<a class="ae mx" href="https://lukeurban.tech" rel="noopener ugc nofollow" target="_blank"> https://lukeurban.tech </a>)，在那里你可以找到我所有文章和作品的链接。</p><p id="13db" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在那里的时候，考虑订阅我的时事通讯，不要错过我的任何工作。偶尔，我会发送一些迷因和其他编程内容。😅</p><p id="60ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mf">让代码与你同在！</em></p><p id="5066" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">卢克(男子名)</p></div></div>    
</body>
</html>