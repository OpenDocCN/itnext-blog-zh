<html>
<head>
<title>MVC in Flutter App — The Holy Qur’an App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤动应用中的MVC神圣的古兰经应用</h1>
<blockquote>原文：<a href="https://itnext.io/mvc-in-flutter-app-the-holy-quran-app-c0fd8ae31d67?source=collection_archive---------1-----------------------#2020-06-25">https://itnext.io/mvc-in-flutter-app-the-holy-quran-app-c0fd8ae31d67?source=collection_archive---------1-----------------------#2020-06-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="549a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi ko translated">这款应用可能没有太多功能，但我想学习MVC和jSON数据解析，所以下面是我在大约5-7天内做的事情。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/128c9319880c1fbfb630af88bb38a0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oU0jthHjxWIwwSFxCsv82g.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">神圣的古兰经应用程序</figcaption></figure><p id="6fe4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个神圣的古兰经应用程序，使用Flutter和API在后面获取所有数据。你可以在这里获得API <a class="ae ln" href="https://alquran.cloud/api" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="7f73" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">让我们开始吧…！</h1><p id="79ea" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">这就是我们将要建造的。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi mr"><img src="../Images/028061f36743843b5369b7bdf6326dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ny3lY0wXJ1Y1zP_lIpJ7w.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">我们要构建什么:)</figcaption></figure><h2 id="e7fb" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">包装</h2><p id="1f46" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">我将使用以下软件包:</p><ul class=""><li id="997f" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><a class="ae ln" href="https://pub.dev/packages/http" rel="noopener ugc nofollow" target="_blank"> https </a></li><li id="e342" class="ne nf it js b jt nn jx no kb np kf nq kj nr kn nj nk nl nm bi translated"><a class="ae ln" href="https://pub.dev/packages/shimmer#-readme-tab-" rel="noopener ugc nofollow" target="_blank">微光</a> —用于进度指示器效果</li></ul><p id="cf4c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，当API被调用时，我们的加载器将看起来像这样</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/fe0cc820a094e0657791a78c11927c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*dLtnGCi95FcNOA-WYU5DWA.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">微光装载机</figcaption></figure><p id="df37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还将制作这个抽屉动画作为特别的礼物😅</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/84fc4709e93ef5b21243a19eef330557.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*74QijW8pu2W8K2lVeEufHA.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">3D抽屉</figcaption></figure><blockquote class="nt"><p id="80e2" class="nu nv it bd nw nx ny nz oa ob oc kn dk translated">因为，该应用程序是开源的，所以你可以在这里获得完整的代码<a class="ae ln" href="https://github.com/m-hamzashakeel/The_Holy_Quran_App" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><blockquote class="od oe of"><p id="8b34" class="jq jr og js b jt oh jv jw jx oi jz ka oj ok kd ke ol om kh ki on oo kl km kn im bi translated">在我们开始之前，让我诚实地告诉你，我不是专家，所以我将根据我目前为止的理解来解释MVC，但是如果你想要完整的细节，那么请阅读这篇文章。</p></blockquote><h2 id="273e" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">项目结构</h2><p id="6b47" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">让我们深入了解我们的项目结构</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi mr"><img src="../Images/6d50a47da5ad8b2fbe8a6a9399a5f305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQWjZwrZ_m1IbIy1q-yNWg.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">MVC项目结构</figcaption></figure><p id="9e77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了更好的理解，所有的东西都被分开了，动画，自定义部件，所有的模型，视图，控制器类。</p><h2 id="7b6f" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">控制器</h2><p id="61ed" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">UI调用控制器类来请求数据，它看起来像这样:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="7810" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用了两个URL链接，您可以在这里找到它们<a class="ae ln" href="https://alquran.cloud/api" rel="noopener ugc nofollow" target="_blank">。一个是获取完整的古兰经，另一个是获取古兰经中所有的圣训。</a></p><p id="6374" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个类只是从API中获取数据，并使用模型类将它们转换成JSON格式。</p><h2 id="5c9f" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated"><strong class="ak">型号</strong></h2><p id="0597" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">每个视图有两个模型类</p><p id="d3f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">萨吉达模特班</strong></p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="5166" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">苏拉模型类</strong></p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="c8ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想学习jSON数据解析，我会推荐你这篇文章。这对我帮助很大😄</p><p id="bb88" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看下一步，那就是使用我们的模型和控制器类来更新我们的UI，即视图</p><h2 id="7145" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">景色</h2><p id="f8b6" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">这个应用没有应用状态管理，所以代码会非常简单明了。在所有视图中，UI都是使用setState和FutureBuilder小部件更新的。因为，我应用了抽屉的所有动画，所以代码可能看起来有点混乱，但它不是:)</p><p id="ee45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我用过5个视图类，大概是这样的:</p><ul class=""><li id="871a" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><strong class="js iu"> homeScreen_view.dart: </strong>主屏幕UI包含两个按钮(Surah Index，Sajda Index)和其他小部件，包括我们的动画抽屉</li></ul><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi ot"><img src="../Images/b303d7818449f7ab6324d1b68b20b2fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dc9UaHq38hu9DJORjGScdg.png"/></div></div></figure><ul class=""><li id="4f04" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><strong class="js iu"> surahIndex_view.dart: </strong>使用我们模型类中的方法显示古兰经中所有章节的UI</li></ul><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/51bbce32e12feb0ca0ddcb3e904fa8c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*id9Z9Rn4rv4VobMZgbR8FA.png"/></div></figure><ul class=""><li id="cc15" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><strong class="js iu"> ayahs_view.dart: </strong>显示每个章节的ayahs的UI</li></ul><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/6811a443ccf2b1a0e496cd0d847f7a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*ZxxyFHGzAMJVxEUrYpAuyA.png"/></div></figure><ul class=""><li id="870c" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><strong class="js iu"> sajda_view.dart: </strong>它使用我们模型类中的另一种方法显示了古兰经中的所有15种sajda</li></ul><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/d4270a3a4cc4fb52ebbb023c026f50df.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*sDAZllZ8-cT6KP6xD4WH1w.png"/></div></figure><ul class=""><li id="4e72" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><strong class="js iu"> sajdaAyahs_view.dart: </strong>类似于我们的<em class="og"> ayahs_view.dart </em>它显示每个sajda的ayah。</li></ul><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/f239ed415e89f0c7c1fbea19a5988519.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*51P_g_sI-geDJXHQYW0Nyg.png"/></div></figure><blockquote class="nt"><p id="a606" class="nu nv it bd nw nx ny nz oa ob oc kn dk translated">注意:只有两个视图的UI是通过模型类更新的，我将其余的数据传递给了其他必要的小部件的构造函数</p></blockquote><h2 id="146d" class="ms lp it bd lq mt ov dn lu mv ow dp ly kb ox my mc kf oy na mg kj oz nc mk nd bi translated">微光负载效应</h2><p id="f666" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">我提到了我将用来创建一个微光加载器的包。因此，微光进度条的代码应该是这样的:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="ca83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> WidgetAnimator </strong>简单地从底部直到它的位置淡入淡出任何小部件。代码可在<a class="ae ln" href="https://github.com/m-hamzashakeel/The_Holy_Quran_App/blob/master/lib/animations/bottomAnimation.dart" rel="noopener ugc nofollow" target="_blank">这里</a>获得。没有这个，微光会工作，所以不要担心，它不是强制性的在这里使用😃</p><h2 id="ace2" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">背景中的眩光效果</h2><p id="3103" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">首先，让我们看看如何创建一个小闪电。</p><pre class="ky kz la lb gt pa pb pc pd aw pe bi"><span id="f77e" class="ms lp it pb b gy pf pg l ph pi">Container(</span><span id="1815" class="ms lp it pb b gy pj pg l ph pi">      height: 10,<br/>      width: 10,<br/>      decoration: BoxDecoration(<br/>           shape: BoxShape.circle,<br/>           gradient: RadialGradient(colors: [<br/>                      Colors.yellow,<br/>                      Colors.yellow.withAlpha(150),<br/>                      Colors.yellow.withAlpha(100),<br/>                      Colors.yellow.withAlpha(50),<br/>                      Colors.yellow.withAlpha(5),</span><span id="c844" class="ms lp it pb b gy pj pg l ph pi">      ])),</span><span id="8523" class="ms lp it pb b gy pj pg l ph pi">),</span></pre><p id="064b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我以这样的方式制作了这个闪光的动画，它从屏幕外的某个地方开始，移动到另一个点(原始位置),这个点也在屏幕外，但在背景中。所以，整个事情的代码是这样的:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="d623" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">入口推子动画非常简单，代码如下:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="or os l"/></div></figure><blockquote class="od oe of"><p id="74b2" class="jq jr og js b jt ju jv jw jx jy jz ka oj kc kd ke ol kg kh ki on kk kl km kn im bi translated">如果您在iniState()中设置了_controller.forward()，那么一个小工具将会淡入屏幕并停在原来的位置。所以，一定要试一试！</p></blockquote><p id="8cc0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你需要为它提供一个<strong class="js iu">子</strong>，一个<strong class="js iu">偏移量</strong>，从它应该淡入屏幕的位置直到它的原始位置，<strong class="js iu">延迟</strong>，在此之后它将开始移动，以及<strong class="js iu">持续时间</strong>它将在移动中停留的时间。有道理吗？:)</p><p id="752a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，如果你把你的光晕放在屏幕外面，作为它的原始位置，并给出相反方向的偏移，那么在动画开始后，它看起来像是从一边移动到另一边。我希望我说清楚了😜</p><p id="f489" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，您可以创建如下内容:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1fc7750f64c0051622da3a1f0558a945.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*BGALrmKzCZqZT3Ijx97ESQ.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">背景中的闪光</figcaption></figure><h2 id="2adb" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">最后是3D抽屉动画</h2><p id="1eef" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">你可以从我最喜欢的flutter开发者<a class="ae ln" href="https://github.com/MarcinusX/drawer_challenge/blob/master/lib/custom_drawer_guitar.dart" rel="noopener ugc nofollow" target="_blank">这里</a>获得实现。但在我的例子中，我在抽屉中添加了一些小部件，包括简单的文本、列、堆栈、图像、资产和圆形头像。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/84fc4709e93ef5b21243a19eef330557.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*74QijW8pu2W8K2lVeEufHA.gif"/></div></figure><p id="11ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们到了。一个基于<strong class="js iu"> MVC </strong>的非常简单的应用程序，有漂亮的用户界面和很少的动画。我希望你喜欢它，如果是的话，给我一些👏和⭐️的<a class="ae ln" href="https://github.com/m-hamzashakeel/The_Holy_Quran_App" rel="noopener ugc nofollow" target="_blank">回购。</a></p><h2 id="cc2d" class="ms lp it bd lq mt mu dn lu mv mw dp ly kb mx my mc kf mz na mg kj nb nc mk nd bi translated">那都是乡亲们！</h2><h1 id="5ae9" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">谢谢大家和# happyFluttering💙</h1></div></div>    
</body>
</html>