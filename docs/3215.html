<html>
<head>
<title>Laravel and Vue: Creating a Portfolio website with a CRUD admin panel — Chapter Three</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第三章</h1>
<blockquote>原文：<a href="https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-3-566cf0ddc83a?source=collection_archive---------5-----------------------#2019-10-26">https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-3-566cf0ddc83a?source=collection_archive---------5-----------------------#2019-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c6c8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建并阅读报头</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bfe8c74d9b613d55a1861b4af37bbaa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUXVxY_3Pf_1TSxNR9sVnQ.png"/></div></div></figure><p id="91af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">概述:</strong>我们有能力显示基于数据库的文本和图像。文本可以直接从数据库中读取，但是对于图像，我们获取<strong class="kw iu">图像路径</strong>，并在<code class="fe lq lr ls lt b">img</code>标签中呈现它以显示图像。</p><p id="35ee" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">现在:</strong>我们将把这些能力组合到一个<strong class="kw iu"> ProfileEditor </strong>组件中。在那之前，我们必须做一些清洁工作。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/b8011398d9d6d78d45156b436ba20d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bM2kwMkJr99BU8ty"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated"><a class="ae mg" href="https://unsplash.com/@honest?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">诚信公司</a>在<a class="ae mg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="c4d4" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">清洁App.vue</h1><p id="534f" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">App.vue目前有一些不再需要的代码。<strong class="kw iu">{ { image path } }</strong>img标签下面现在废了。我们只需要它来看看我们在将data()的imagepath <strong class="kw iu"> </strong>放入模板标签时是否有问题。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="5d17" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + imagepath"/&gt;<br/>    <strong class="lt iu">{̶{̶i̶m̶a̶g̶e̶p̶a̶t̶h̶}̶}̶</strong><br/>    &lt;image-uploader&gt;&lt;/image-uploader&gt;<br/>&lt;/div&gt;</span></pre><p id="9ac9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你也可以去掉<strong class="kw iu">图片上传器</strong>标签，因为我们将用ProfileEditor <strong class="kw iu"> </strong>组件替换它。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="f363" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + imagepath"/&gt;<br/>    <strong class="lt iu">&lt;̶i̶m̶a̶g̶e̶-̶u̶p̶l̶o̶a̶d̶e̶r̶&gt;̶&lt;̶/̶i̶m̶a̶g̶e̶-̶u̶p̶l̶o̶a̶d̶e̶r̶&gt;̶</strong><br/>&lt;/div&gt;</span></pre><p id="9996" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从导入和组件对象中删除图像上传程序</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="9a1b" class="ni mi it lt b gy nj nk l nl nm">&lt;script&gt;<br/>    <em class="nn">import </em>masthead <em class="nn">from </em>'./masthead';<br/>    <strong class="lt iu">i̶m̶p̶o̶r̶t̶ ̶i̶m̶a̶g̶e̶U̶p̶l̶o̶a̶d̶e̶r̶ ̶f̶r̶o̶m̶ ̶'̶.̶/̶I̶m̶a̶g̶e̶U̶p̶l̶o̶a̶d̶e̶r̶'̶;̶</strong><br/>    <em class="nn">export default </em>{<br/>        name: "App",<br/>        components: {<br/>            masthead,<br/>            <strong class="lt iu">i̶m̶a̶g̶e̶U̶p̶l̶o̶a̶d̶e̶r̶</strong><br/>        },</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="89ed" class="mh mi it bd mj mk no mm mn mo np mq mr jz nq ka mt kc nr kd mv kf ns kg mx my bi translated">创建ProfileEdior组件</h1><p id="9121" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">现在应该创建组件文件，导入它并将其包含在组件对象中。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="5c33" class="ni mi it lt b gy nj nk l nl nm">&lt;script&gt;<br/>    <em class="nn">import </em>masthead <em class="nn">from </em>'./masthead';<br/>    <strong class="lt iu"><em class="nn">import </em>ProfileEditor <em class="nn">from </em>"./ProfileEditor";</strong><br/>    <em class="nn">export default </em>{<br/>        name: "App",<br/>        components: {<br/>            masthead,<br/>            <strong class="lt iu">ProfileEditor</strong><br/>        },</span></pre><blockquote class="nt nu nv"><p id="78d6" class="ku kv nn kw b kx ky ju kz la lb jx lc nw le lf lg nx li lj lk ny lm ln lo lp im bi translated">确保components对象中组件的名称与导入行匹配。大写和小写字母必须相同</p></blockquote><p id="fd8d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在ProfileEditor组件中，创建一个带有<strong class="kw iu">文本</strong>字段和<strong class="kw iu">文件</strong>选择字段的表单</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="02d5" class="ni mi it lt b gy nj nk l nl nm">&lt;form&gt;<br/>    &lt;input <em class="nn">type</em>="<strong class="lt iu">text</strong>"&gt;<br/>    &lt;input <em class="nn">type</em>="<strong class="lt iu">file</strong>"&gt;<br/>    &lt;button&gt;Submit&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="b36a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当你选择一个文件时，一个对话框会打开，允许你上传任何文件。我们想把它限制在图片上。</p><p id="3b94" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将文件选择字段修改为仅用于图像文件。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="3dec" class="ni mi it lt b gy nj nk l nl nm">&lt;input <em class="nn">type</em>="file" <strong class="lt iu"><em class="nn">accept</em>="image/*"</strong>&gt;</span></pre><p id="0ce0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当您选择文件时，只会显示图像和文件夹，并且只有图像<strong class="kw iu">可以上传。</strong></p><p id="7ebc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以前，我们使用FormData()附加一个文件，并在选择文件后立即将其发送到服务器。</p><p id="3414" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这一次，我们要输入配置文件名，选择图像，然后提交表单。为此，我们需要查看表单输入绑定。</p><h2 id="7dbc" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">表单输入绑定</h2><p id="a50d" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">我们必须绑定名称，绑定图像文件，并添加一个提交表单的方法。</p><p id="26df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">绑定名称</strong> —向输入文本字段添加一个<code class="fe lq lr ls lt b">v-model</code>。v-model叫做<strong class="kw iu">的名字。</strong></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="25f3" class="ni mi it lt b gy nj nk l nl nm">&lt;input <em class="nn">type</em>="text" <strong class="lt iu"><em class="nn">v-model</em>="name"</strong>&gt;</span></pre><p id="bc61" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">脚本元素应该有数据()。模型应该反映在脚本标签data():</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="652a" class="ni mi it lt b gy nj nk l nl nm">data() {<br/>    <em class="nn">return </em>{<br/>        <strong class="lt iu">name: '',</strong><br/>    }<br/>},</span></pre><p id="02e5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当您在名称输入字段中键入一些内容时，您会发现正在发生的变化<strong class="kw iu">实时</strong>！在VueDevtools的数据部分。</p><p id="ce24" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">还可以看张家发生的<strong class="kw iu">现场直播！</strong>将<strong class="kw iu"> {{name}} </strong>放在页面的某个位置，当您在名称输入字段中键入内容时，观察页面的某个区域发生变化。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="4a06" class="ni mi it lt b gy nj nk l nl nm">&lt;form&gt;<br/>    <strong class="lt iu">{{name}}</strong><br/>    &lt;input <em class="nn">type</em>="text" <em class="nn">v-model</em>="name"&gt;<br/>    &lt;input <em class="nn">type</em>="file" <em class="nn">accept</em>="image/*"&gt;<br/>    &lt;button&gt;Submit&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="58e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦你玩够了这个魔法，我们就可以移除<strong class="kw iu"> {{name}} </strong>并进入<strong class="kw iu">绑定文件</strong>。</p><p id="3560" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">绑定文件— </strong>添加<strong class="kw iu"> </strong> <code class="fe lq lr ls lt b"><strong class="kw iu">file:null</strong></code>到数据()</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="98b6" class="ni mi it lt b gy nj nk l nl nm">data() {<br/>    <em class="nn">return </em>{<br/>        name: '',<br/>        <strong class="lt iu">file: <em class="nn">null</em></strong><em class="nn"><br/>    </em>}<br/>},</span></pre><p id="77de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为文件输入不能有v-model，所以我们不能有动态数据更改。我们要做的是创建一个<strong class="kw iu">方法</strong>，它将在我们选择一个文件时运行。更改文件输入字段以运行该方法。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="23d0" class="ni mi it lt b gy nj nk l nl nm">&lt;input <em class="nn">type</em>="file" <em class="nn">accept</em>="image/*" <strong class="lt iu"><em class="nn">@change</em>="selectFile"</strong>&gt;</span></pre><p id="3af8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该方法:</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="d7d6" class="ni mi it lt b gy nj nk l nl nm">selectFile(event) {<br/>  <em class="nn">this.file = event.target.files[0];<br/></em>},</span></pre><p id="2c74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Vue Devtools将从<strong class="kw iu">文件开始:null </strong>，当您选择文件时，它将显示<strong class="kw iu">文件:文件</strong></p><p id="d253" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以使用{{file}}查看页面上的数据更改</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="8963" class="ni mi it lt b gy nj nk l nl nm">&lt;form&gt;<br/>    <strong class="lt iu">{{file}}</strong><br/>    &lt;input <em class="nn">type</em>="text" <em class="nn">v-model</em>="name"&gt;<br/>    &lt;input <em class="nn">type</em>="file" <em class="nn">accept</em>="image/*"&gt;<br/>    &lt;button&gt;Submit&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="778b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于您选择的任何文件，您将看到显示[目标文件]的页面。要查看文件的名称，可以更改selectFile方法</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="09a5" class="ni mi it lt b gy nj nk l nl nm">selectFile(event) {<br/>  <em class="nn">this</em>.file = event.target.files[0]<strong class="lt iu">.name</strong>;<br/>},</span></pre><p id="aa14" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">播放完毕后，将selectFile方法改回如下:</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="52bd" class="ni mi it lt b gy nj nk l nl nm">selectFile(event) {<br/>  <em class="nn">this</em>.file = event.target.files[0];<br/>},</span></pre><p id="6241" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">删除<strong class="kw iu"> {{file}} </strong>和<strong class="kw iu">添加一个提交方法</strong>到按钮。</p><p id="bbc2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">添加提交方法</strong> —该方法应该在<strong class="kw iu">点击</strong>时运行</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="9058" class="ni mi it lt b gy nj nk l nl nm">&lt;form&gt;<br/>    &lt;input <em class="nn">type</em>="text" <em class="nn">v-model</em>="name"&gt;<br/>    &lt;input <em class="nn">type</em>="file" <em class="nn">accept</em>="image/*" <em class="nn">@change</em>="selectFile"&gt;<br/>    &lt;button <strong class="lt iu"><em class="nn">@click.prevent</em>="onSubmit"</strong>&gt;Submit&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><blockquote class="nt nu nv"><p id="03e4" class="ku kv nn kw b kx ky ju kz la lb jx lc nw le lf lg nx li lj lk ny lm ln lo lp im bi translated">必须是<strong class="kw iu"> @click.prevent </strong>而不是<strong class="kw iu"> @click </strong>才能阻止你点击后的页面刷新</p></blockquote><p id="9f01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该方法应该使用<strong class="kw iu"> FormData() </strong>并附加名称和文件。您可以使用<code class="fe lq lr ls lt b"><strong class="kw iu">this.</strong></code>从data()中获取数据</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="c66c" class="ni mi it lt b gy nj nk l nl nm">onSubmit() {<br/>    <em class="nn">let </em>fd = <em class="nn">new </em>FormData();<br/>    fd.append('name', <strong class="lt iu"><em class="nn">this</em>.</strong>name);<br/>    fd.append('userpic', <strong class="lt iu"><em class="nn">this</em>.</strong>file);<br/>}</span></pre><p id="a66f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果想检查追加了什么，可以将这个<code class="fe lq lr ls lt b">for</code>循环添加到onSubmit方法中</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="206e" class="ni mi it lt b gy nj nk l nl nm">onSubmit() {<br/>    <em class="nn">let </em>fd = <em class="nn">new </em>FormData();<br/>    fd.append('name', <em class="nn">this</em>.name);<br/>    fd.append('userpic', <em class="nn">this</em>.file);<br/><br/>    <strong class="lt iu"><em class="nn">for </em>(<em class="nn">let x</em> <em class="nn">of </em>fd.values()) {<br/>        console.log(x);<br/>    }</strong><em class="nn"><br/></em>}</span></pre><p id="2f11" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">单击submit后，您将在浏览器控制台中看到附加的数据。</p><p id="bd9a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">修改onSubmit方法。移除<code class="fe lq lr ls lt b">for</code>回路，增加<code class="fe lq lr ls lt b">axios.post</code></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="9148" class="ni mi it lt b gy nj nk l nl nm">onSubmit() {<br/>    <em class="nn">let </em>fd = <em class="nn">new </em>FormData();<br/>    fd.append('name', <em class="nn">this</em>.name);<br/>    fd.append('userpic', <em class="nn">this</em>.file);</span><span id="556c" class="ni mi it lt b gy ok nk l nl nm">    <strong class="lt iu">axios.post('api/profile', fd).then(response =&gt; <em class="nn">console</em>.log(response));</strong><br/>}</span></pre><p id="7928" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该组件能够发送数据，但是它不会得到响应，因为发送路径尚不存在。为此，我们现在需要在服务器端工作。</p><h2 id="6f78" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">服务器端</h2><p id="c514" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">我们需要在api.php写路线</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="ed8f" class="ni mi it lt b gy nj nk l nl nm">Route::<em class="nn">post</em>('/profile', 'ProfileController@create');</span></pre><p id="9534" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们创建一个<strong class="kw iu">资源控制器</strong>。资源控制器有已经做好的函数，你只需要把它们填进去。当你打开控制器文件时，你就会明白我的意思。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="cfe5" class="ni mi it lt b gy nj nk l nl nm">php artisan make:controller ProfileController --<strong class="lt iu">resource</strong></span></pre><p id="2ece" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">像这样填写创建函数:</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="3c84" class="ni mi it lt b gy nj nk l nl nm"><em class="nn">public function </em>create() {<br/>    <em class="nn">return </em><strong class="lt iu">'ProfileController CreateFunction Reached'</strong>;<br/>}</span></pre><p id="2ba9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">发布到此路由，您将在浏览器控制台和网络选项卡中看到此消息</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="f3fd" class="ni mi it lt b gy nj nk l nl nm"><strong class="lt iu">ProfileController CreateFunction Reached</strong></span></pre><p id="959f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦成功，检查<code class="fe lq lr ls lt b">request()</code>中有什么。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="8571" class="ni mi it lt b gy nj nk l nl nm"><em class="nn">public function </em>create() {<br/>    <em class="nn">return </em><strong class="lt iu">request()</strong>;<br/>}</span></pre><p id="9195" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您将获得一个JSON，其中包含任何附加内容的详细信息。如果您发布了一个空表单，您将得到:</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="defc" class="ni mi it lt b gy nj nk l nl nm">{"name":null,"userpic":"null"}</span></pre><p id="80f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您在名称输入中发布@UmarCodes而没有文件，您将得到</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="90ae" class="ni mi it lt b gy nj nk l nl nm">{"name":<strong class="lt iu">@UmarCodes</strong>,"userpic":"null"}</span></pre><p id="343f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你发布了一个文件和一个名字，你将得到userpic的{}</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="19d2" class="ni mi it lt b gy nj nk l nl nm">{"name":@UmarCodes,"userpic":<strong class="lt iu">{}</strong>}</span></pre><p id="165e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们希望create函数做三件事:</p><ol class=""><li id="c5d0" class="ol om it kw b kx ky la lb ld on lh oo ll op lp oq or os ot bi translated">存储名称</li><li id="cc3f" class="ol om it kw b kx ou la ov ld ow lh ox ll oy lp oq or os ot bi translated">存储图像路径</li><li id="33d7" class="ol om it kw b kx ou la ov ld ow lh ox ll oy lp oq or os ot bi translated">存储图像本身</li></ol><p id="6379" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是在我们编写函数代码之前，我们实际上需要一个表来存储数据。</p><p id="ab3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们使用迁移来创建配置文件表。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="7cfd" class="ni mi it lt b gy nj nk l nl nm">php artisan make:migration CreateProfileTable</span></pre><p id="0d1d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们希望名称和图像在同一个表中，因为我们不再使用basic_info表和image表，我们可以使用<code class="fe lq lr ls lt b"><strong class="kw iu">Schema::dropIfExists()</strong></code>删除它们</p><p id="cfa3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们将<code class="fe lq lr ls lt b"><strong class="kw iu">Schema::dropIfExists();</strong></code> <strong class="kw iu"> </strong>添加到up函数中，这样当您迁移时，它将同时:</p><p id="51eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">a)删除先前的表格</p><p id="aa9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">和</p><p id="6d96" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">b)创建配置文件表</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="770e" class="ni mi it lt b gy nj nk l nl nm"><em class="nn">public function </em>up()<br/>{   <strong class="lt iu">Schema::dropIfExists('basic_info');<br/>    Schema::dropIfExists('image');</strong><br/>    Schema::create('profile', <em class="nn">function </em>(Blueprint $table) {<br/>        $table-&gt;bigIncrements('id');<br/>        <strong class="lt iu">$table-&gt;string('name');<br/>        $table-&gt;string('img_path');</strong><br/>        $table-&gt;timestamps();<br/>    });<br/>}</span></pre><p id="66e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行迁移</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="0c93" class="ni mi it lt b gy nj nk l nl nm">php artisan migrate</span></pre><p id="fbea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，如果您查看您的数据库，您会发现basic_info表和image表不再存在。</p><p id="bc0d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您还会发现一个配置文件表。让我们为这个表创建一个模型。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="ba40" class="ni mi it lt b gy nj nk l nl nm">php artisan make:model Profile</span></pre><p id="4f4a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe lq lr ls lt b">protected <strong class="kw iu">$table</strong></code> <strong class="kw iu"> </strong>指定模型连接到哪个表，并使用<strong class="kw iu"> $fillable </strong>数组指定哪些列是可填充的</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="a035" class="ni mi it lt b gy nj nk l nl nm"><em class="nn">protected </em><strong class="lt iu">$table</strong> = 'profile';<br/><em class="nn">protected </em><strong class="lt iu">$fillable</strong> = <strong class="lt iu">['name', 'img_path'];</strong></span></pre><p id="5609" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们回到ProfileController并填充create函数。我们将存储<strong class="kw iu">名称</strong>、<strong class="kw iu">图像路径</strong>和图像<strong class="kw iu">文件</strong>本身。</p><blockquote class="nt nu nv"><p id="b6c4" class="ku kv nn kw b kx ky ju kz la lb jx lc nw le lf lg nx li lj lk ny lm ln lo lp im bi translated">别忘了在控制器顶部加上<code class="fe lq lr ls lt b">use App\Profile;</code>。</p></blockquote><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="50ea" class="ni mi it lt b gy nj nk l nl nm"><em class="nn">public function </em>create()<br/>{<br/>    $profile = <em class="nn">new </em>Profile();<br/>    $profile-&gt;<strong class="lt iu">name</strong> = request()-&gt;name;<br/>    $profile-&gt;<strong class="lt iu">img_path</strong> = request()-&gt;file('userpic')-&gt;hashName();<br/>    $profile-&gt;save();<br/>    return request()-&gt;<strong class="lt iu">file</strong>('userpic')-&gt;store('/public/userpics');<br/>}</span></pre><p id="72a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们来展示您的个人资料。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="cac1" class="mh mi it bd mj mk no mm mn mo np mq mr jz nq ka mt kc nr kd mv kf ns kg mx my bi translated">显示您的个人资料</h1><p id="1292" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">要显示您的个人资料，我们需要遵循与显示您的姓名和上传图像相同的流程。</p><h2 id="6ea4" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated"><strong class="ak">数据库已经勾选，因为我们已经将数据放入数据库。</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/e401a98014179d98571f5b6722e9fa8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-_TaBqLJRAzhv0iHwu7X0w.png"/></div></div></figure><h2 id="6ea0" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">途径</h2><p id="440d" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">注意:已经有一个带有地址/配置文件的路由，但那是一个post路由，而这是一个<strong class="kw iu"> get </strong>路由。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="0abc" class="ni mi it lt b gy nj nk l nl nm">Route::<strong class="lt iu"><em class="nn">get</em></strong>('/profile', 'ProfileController@show');</span></pre><p id="0816" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">注</strong>:您可以拥有相同地址的路由，只要它们属于不同的类型并且链接到不同的功能。</p><p id="ac40" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">发布路线链接到ProfileController中的<strong class="kw iu">创建</strong>功能，而获取路线链接到<strong class="kw iu">显示</strong>功能。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="b2ff" class="ni mi it lt b gy nj nk l nl nm">Route::<em class="nn">post</em>('/profile', 'ProfileController@<strong class="lt iu">create</strong>');<br/>Route::<em class="nn">get</em>('/profile', 'ProfileController@<strong class="lt iu">show</strong>');</span></pre><p id="308b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">显示功能:</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="5539" class="ni mi it lt b gy nj nk l nl nm"><em class="nn">public function </em>show()<br/>{<br/>    $profile = Profile::<em class="nn">all</em>()[0];<br/>    <em class="nn">return </em>$profile;<br/>}</span></pre><p id="c38c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在访问路线，您将获得一个表示概要表的JSON。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/f5ee4180f53a31499033c32e56860bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sz0RZbFM8OPhGKZvoypHOQ.png"/></div></div></figure><h2 id="a5ff" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">脚本</h2><p id="946e" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">请随意从已安装的()中移除早期的方法。添加我们现在要创建的方法，即get profile()；</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="668a" class="ni mi it lt b gy nj nk l nl nm">mounted() {<br/>    t̶h̶i̶s̶.̶g̶e̶t̶B̶a̶s̶i̶c̶I̶n̶f̶o̶(̶)̶;̶<br/>    t̶h̶i̶s̶.̶g̶e̶t̶I̶m̶a̶g̶e̶P̶a̶t̶h̶(̶)̶;̶<br/>    <strong class="lt iu"><em class="nn">this</em>.getProfile();</strong><br/>},</span></pre><p id="595d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">getProfile()方法类似于前面使用的get方法。</p><p id="8d5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">需要注意的区别:</strong>这次我们要的是<strong class="kw iu">整体</strong> <strong class="kw iu">响应数据</strong>。</p><blockquote class="nt nu nv"><p id="4c54" class="ku kv nn kw b kx ky ju kz la lb jx lc nw le lf lg nx li lj lk ny lm ln lo lp im bi translated">在第一章和第二章中，我们在寻找位于<code class="fe lq lr ls lt b"><strong class="kw iu">response.data</strong></code> <strong class="kw iu"> </strong>中的<code class="fe lq lr ls lt b"><strong class="kw iu">name</strong></code> <em class="it"> </em>和<code class="fe lq lr ls lt b"><strong class="kw iu">imagepath</strong></code> <strong class="kw iu"> </strong>。</p></blockquote><p id="44df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这里，我们想要在api/ <strong class="kw iu"> profile </strong>路径上可用的所有数据。这样我们就不必向数据中添加更多的东西了()。我们可以一次性获取所有的概要文件数据，将概要文件数据添加到data()中，然后转到&lt;模板&gt;&lt;/模板&gt;。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="ef69" class="ni mi it lt b gy nj nk l nl nm">getProfile() {<br/>    axios.get('/api/<strong class="lt iu">profile</strong>')<br/>        .then(response =&gt; {<br/>            console.log(response.data);<br/>            <em class="nn">this</em>.<strong class="lt iu">profile</strong> = <strong class="lt iu">response.data</strong>;<br/>        })<br/>        .catch(error =&gt; {<br/>            <em class="nn">console</em>.log(error);<br/>        });<br/>},</span></pre><blockquote class="nt nu nv"><p id="5784" class="ku kv nn kw b kx ky ju kz la lb jx lc nw le lf lg nx li lj lk ny lm ln lo lp im bi translated">可选:您也可以从方法对象中删除以前使用的方法</p></blockquote><p id="8e0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将<strong class="kw iu">轮廓</strong>添加到<strong class="kw iu">数据</strong>中()</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="84a2" class="ni mi it lt b gy nj nk l nl nm">data() {<br/>  <em class="nn">return </em>{<br/>      n̶a̶m̶e̶:̶ ̶'̶'̶,̶<br/>      i̶m̶a̶g̶e̶p̶a̶t̶h̶:̶ ̶'̶'̶,̶<br/>      <strong class="lt iu">profile</strong>: '',<br/>  }<br/>},</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/2b3fcd1447942d58ee1cd08d1fdb16dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jng2sS5sF34lAgJRO_4b8A.png"/></div></div></figure><p id="1afb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在浏览器中重新加载页面，打开Vue Devtools你会看到</p><p id="f8d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">▶️ <strong class="kw iu">简介:对象</strong></p><p id="bfdb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">点击▶️，你可以看到物体里包含了什么；如果您在浏览器中访问该路线，您将获得相同的键值对。</p><h2 id="08a3" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated"><strong class="ak">模板</strong></h2><p id="b038" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">是时候渲染一些数据了。在<masthead>元素上方，键入<code class="fe lq lr ls lt b"><strong class="kw iu">{{profile}}</strong></code>。</masthead></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="6542" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    <strong class="lt iu">{{profile}}</strong><br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + imagepath"/&gt;<br/>    &lt;profile-editor&gt;&lt;/profile-editor&gt;<br/>&lt;/div&gt;</span></pre><p id="28b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，在浏览器中加载页面，您将看到一个JSON对象，它与我们在route中得到的对象相同。</p><p id="9e82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我们不想要整个JSON。我们只想要<code class="fe lq lr ls lt b">name</code>和<code class="fe lq lr ls lt b">img_path</code>。为了得到这些，我们必须看一些叫做<strong class="kw iu">点符号</strong>的东西。</p><p id="040b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">点符号示例— </strong>假设您有一个名为<strong class="kw iu"> dev </strong>的对象:</p><blockquote class="pa"><p id="66c9" class="pb pc it bd pd pe pf pg ph pi pj lp dk translated">let<strong class="ak">dev</strong>= { name:' Umar Taufiq '，Medium: '@UmarCodes'}</p></blockquote><blockquote class="nt nu nv"><p id="15fc" class="ku kv nn kw b kx pk ju kz la pl jx lc nw pm lf lg nx pn lj lk ny po ln lo lp im bi translated">dev.name将向您展示Umar Taufiq</p><p id="899e" class="ku kv nn kw b kx ky ju kz la lb jx lc nw le lf lg nx li lj lk ny lm ln lo lp im bi translated">dev.medium会得到@UmarCodes</p></blockquote><p id="4257" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想得到名字，你写下对象的名字，接下来你写一个点，然后是你想访问的项目。</p><p id="81be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">点符号在我们的例子中:</strong>把<code class="fe lq lr ls lt b">{{profile}}</code>改成<code class="fe lq lr ls lt b">{{profile.name}}</code>，重新加载页面就能看到名字了。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="a374" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    <strong class="lt iu">{{profile.name}}</strong><br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + imagepath"/&gt;<br/>    &lt;profile-editor&gt;&lt;/profile-editor&gt;<br/>&lt;/div&gt;</span></pre><p id="f5a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加<code class="fe lq lr ls lt b"><strong class="kw iu">{{profile.img_path}}</strong></code> <strong class="kw iu">，</strong>重新加载页面，你也会看到图片路径。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="56a9" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    {{profile.name}}<br/>    <strong class="lt iu">{{profile.img_path}}</strong><br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + imagepath"/&gt;<br/>    &lt;profile-editor&gt;&lt;/profile-editor&gt;<br/>&lt;/div&gt;</span></pre><p id="bc8d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以将<code class="fe lq lr ls lt b"><strong class="kw iu">imagepath</strong></code>更改为<code class="fe lq lr ls lt b">profile.img_path</code>，它会向您显示图像。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="3764" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    {{profile.name}}<br/>    {{profile.img_path}}<br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + <strong class="lt iu">profile.img_path</strong>"/&gt;<br/>    &lt;profile-editor&gt;&lt;/profile-editor&gt;<br/>&lt;/div&gt;</span></pre><p id="5324" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在可以移除<code class="fe lq lr ls lt b">{{profile.img_path}}</code></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="15dd" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    {{profile.name}}<br/>    <strong class="lt iu">{̶{̶p̶r̶o̶f̶i̶l̶e̶.̶i̶m̶g̶_̶p̶a̶t̶h̶}̶}̶</strong><br/>    &lt;masthead <em class="nn">:name</em>="name"&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + <strong class="lt iu">profile.img_path</strong>"/&gt;<br/>    &lt;profile-editor&gt;&lt;/profile-editor&gt;<br/>&lt;/div&gt;</span></pre><p id="8e9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将在报头中使用点符号，但是在我们这样做之前，我们需要<strong class="kw iu">传递配置文件对象</strong>作为道具</p><p id="e4cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">传递概要文件对象- </strong>我们可以像这样简单地传递概要文件对象:</p><p id="6296" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在App.vue的报头标签中，将<code class="fe lq lr ls lt b"><strong class="kw iu">:name="name"</strong></code>更改为<code class="fe lq lr ls lt b"><strong class="kw iu">profile="profile"</strong></code></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="c182" class="ni mi it lt b gy nj nk l nl nm">&lt;div&gt;<br/>    {{profile.name}}<br/>    &lt;masthead <strong class="lt iu"><em class="nn">:profile</em>="profile"</strong>&gt;&lt;/masthead&gt;<br/>    &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + <strong class="lt iu">profile.img_path</strong>"/&gt;<br/>    &lt;profile-editor&gt;&lt;/profile-editor&gt;<br/>&lt;/div&gt;</span></pre><p id="7274" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们在<strong class="kw iu">报头组件</strong>中有一个相应的道具</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="1a24" class="ni mi it lt b gy nj nk l nl nm">props: {<br/>            <strong class="lt iu">profile</strong>: String<br/>        }</span></pre><p id="07bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，我们最终得到了这个错误:</p><blockquote class="pa"><p id="b656" class="pb pc it bd pd pe pf pg ph pi pj lp dk translated">[Vue Warn]无效属性:属性“profile”的类型检查失败。应为值为“[object Object]”的字符串，但得到了对象</p></blockquote><p id="7256" class="pw-post-body-paragraph ku kv it kw b kx pk ju kz la pl jx lc ld pm lf lg lh pn lj lk ll po ln lo lp im bi translated">将<code class="fe lq lr ls lt b"><strong class="kw iu">profile</strong></code>作为字符串传递是行不通的，因为它不是一个字符串，而是一个对象。所以我们要把它设置成一个对象。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="e8ce" class="ni mi it lt b gy nj nk l nl nm">props: {<br/>            <strong class="lt iu">profile</strong>: Object<br/>        }</span></pre><p id="8ef3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一些好消息和一些坏消息。</p><p id="2fa7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">好消息是错误已经消失了。</p><blockquote class="pa"><p id="17b6" class="pb pc it bd pd pe pf pg ph pi pj lp dk">😄</p></blockquote><p id="6ffc" class="pw-post-body-paragraph ku kv it kw b kx pk ju kz la pl jx lc ld pm lf lg lh pn lj lk ll po ln lo lp im bi translated">坏消息是我们有了一个新的错误:</p><blockquote class="pa"><p id="bf1d" class="pb pc it bd pd pe pf pg ph pi pj lp dk">😦</p><p id="de61" class="pb pc it bd pd pe pf pg ph pi pj lp dk translated">[Vue Warn]无效属性:属性“profile”的类型检查失败。预期的对象，得到的字符串的值为<strong class="ak">“</strong>”。</p></blockquote><p id="1762" class="pw-post-body-paragraph ku kv it kw b kx pk ju kz la pl jx lc ld pm lf lg lh pn lj lk ll po ln lo lp im bi translated">这意味着道具应该是一个<strong class="kw iu">对象</strong>，但是它得到的数据(got String)是一个<strong class="kw iu">空字符串</strong>。数据是从父节点(App.vue)发送的，所以让我们转到父节点，将<code class="fe lq lr ls lt b">profile: <strong class="kw iu">''</strong> </code>更改为<code class="fe lq lr ls lt b">profile: <strong class="kw iu">Object</strong></code></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="bc81" class="ni mi it lt b gy nj nk l nl nm">data() {<br/>  <em class="nn">return </em>{<br/>      profile: Object<br/>  }<br/>},</span></pre><blockquote class="pa"><p id="8d21" class="pb pc it bd pd pe pp pq pr ps pt lp dk translated">无效属性:属性“profile”的类型检查失败。预期的对象，得到的函数</p></blockquote><p id="b4c8" class="pw-post-body-paragraph ku kv it kw b kx pk ju kz la pl jx lc ld pm lf lg lh pn lj lk ll po ln lo lp im bi translated">为了解决这个问题，我们必须更清楚地告诉子组件什么类型的数据配置文件</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="0355" class="ni mi it lt b gy nj nk l nl nm">data() {<br/>  <em class="nn">return </em>{<br/>      profile: <strong class="lt iu">{<br/>          type: Object<br/>      }</strong><em class="nn"><br/>  </em>}<br/>},</span></pre><p id="5103" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就清楚了数据<code class="fe lq lr ls lt b">profile</code>的<strong class="kw iu">类型</strong>是什么。它是一个<strong class="kw iu">物体</strong>。</p><p id="2dd3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在控制台没有vue错误了。</p><p id="592a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在子组件中，移除<code class="fe lq lr ls lt b">{{name}}</code>(如果有)。并加上<code class="fe lq lr ls lt b"><strong class="kw iu">{{profile}}</strong></code>。使用点符号得到<strong class="kw iu">名称</strong>和<strong class="kw iu">图像</strong></p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="a877" class="ni mi it lt b gy nj nk l nl nm">&lt;template&gt;<br/>    &lt;header&gt;<br/>        <strong class="lt iu">{{profile.name}}<br/>        &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + profile.img_path"/&gt;</strong><br/>    &lt;/header&gt;<br/>&lt;/template&gt;</span></pre><p id="6533" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在子组件正在愉快地渲染一切😃我们在控制台中没有得到vue错误。</p><p id="b852" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以将<code class="fe lq lr ls lt b"><strong class="kw iu">{{profile.name}}</strong></code> <strong class="kw iu"> </strong>包装在一个<code class="fe lq lr ls lt b"><strong class="kw iu">h1</strong></code>元素中。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="535d" class="ni mi it lt b gy nj nk l nl nm">&lt;template&gt;<br/>    &lt;header&gt;<br/>        <strong class="lt iu">&lt;h1&gt;{{profile.name}}&lt;/h1&gt;<br/>        </strong>&lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + profile.img_path"/&gt;<strong class="lt iu"><br/></strong>    &lt;/header&gt;<br/>&lt;/template&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/6b38bf8bbf98d235976fcb1e7a8db522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JPhHc4gyLJe0ArvzuLp3WQ.png"/></div></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="5c08" class="mh mi it bd mj mk no mm mn mo np mq mr jz nq ka mt kc nr kd mv kf ns kg mx my bi translated">让我们做一些造型</h1><h2 id="bad1" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">将图像放在名称上方</h2><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="6eb7" class="ni mi it lt b gy nj nk l nl nm">&lt;template&gt;<br/>    &lt;header&gt;<br/><strong class="lt iu">        &lt;img <em class="nn">v-bind:src</em>="'storage/userpics/' + profile.img_path"/&gt;<br/>        &lt;h1&gt;{{profile.name}}&lt;/h1&gt;</strong><br/>    &lt;/header&gt;<br/>&lt;/template&gt;</span></pre><h2 id="4cc5" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">将页眉的内容居中</h2><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="22d7" class="ni mi it lt b gy nj nk l nl nm">&lt;style <em class="nn">scoped</em>&gt;<br/>header {<br/>    display:flex; <br/>    justify-content:center; <br/>    align-items:center; <br/>}<br/>&lt;/style&gt;</span></pre><p id="cfee" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图像和名称并排出现。我们希望图像出现在文本之上。</p><h2 id="b60f" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">更改弯曲方向</h2><p id="509f" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">元素将并排出现，因为默认的<code class="fe lq lr ls lt b"><strong class="kw iu">flex-direction</strong></code>是row。我们把它改成列吧。</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="378f" class="ni mi it lt b gy nj nk l nl nm">header {<br/>    display:flex;<br/>    justify-content:center;<br/>    align-items:center;<br/>    <strong class="lt iu">flex-direction:column;</strong><br/>}<br/>&lt;/style&gt;</span></pre><h2 id="ee3d" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated">应用背景</h2><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="d6ae" class="ni mi it lt b gy nj nk l nl nm">&lt;style <em class="nn">scoped</em>&gt;<br/>header {<br/>    <strong class="lt iu">background: #04BC92;</strong><br/>    display:flex;<br/>    justify-content:center;<br/>    align-items:center;<br/>    flex-direction:column;<br/>}<br/>&lt;/style&gt;</span></pre><h2 id="b0bc" class="ni mi it bd mj nz oa dn mn ob oc dp mr ld od oe mt lh of og mv ll oh oi mx oj bi translated"><strong class="ak">给出割台全视口高度</strong></h2><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="c3d6" class="ni mi it lt b gy nj nk l nl nm">header {<br/>    background: #04BC92;<br/>    display:flex;<br/>    justify-content:center;<br/>    align-items:center;<br/>    flex-direction:column;<br/>    <strong class="lt iu">height:100vh;</strong><br/>}<br/>&lt;/style&gt;</span></pre><p id="3fbc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这应该会给你一个报头，但是它可能会在报头周围有一个看起来像<strong class="kw iu">的白色边框</strong>。要移除“白色边框”,请访问App.vue</p><pre class="kj kk kl km gt ne lt nf ng aw nh bi"><span id="2a69" class="ni mi it lt b gy nj nk l nl nm">&lt;style&gt;<br/><strong class="lt iu">    body {<br/>        margin: 0;<br/>    }</strong><br/>&lt;/style&gt;</span></pre><p id="15ef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在有一个标题，看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bfe8c74d9b613d55a1861b4af37bbaa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUXVxY_3Pf_1TSxNR9sVnQ.png"/></div></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="5984" class="mh mi it bd mj mk no mm mn mo np mq mr jz nq ka mt kc nr kd mv kf ns kg mx my bi translated">截断/消除截断的需要</h1><p id="ce8b" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">您现在可以通过运行<code class="fe lq lr ls lt b"><strong class="kw iu">TRUNCATE TABLE profile;</strong></code>来截断该表。现在创建概要文件，并查看生成的报头。</p><p id="ec3f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们不希望每次更改配置文件时都清空表格，所以下一章将在更新报头的<strong class="kw iu">上。</strong></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="223d" class="mh mi it bd mj mk no mm mn mo np mq mr jz nq ka mt kc nr kd mv kf ns kg mx my bi translated">我们能做什么，不能做什么</h1><p id="ded7" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">这是一个CRUD(创建、读取、更新、删除)项目。</p><ul class=""><li id="076d" class="ol om it kw b kx ky la lb ld on lh oo ll op lp pv or os ot bi translated">我们<strong class="kw iu">可以</strong>创建，即发布和存储。👍 😃</li><li id="ed0a" class="ol om it kw b kx ou la ov ld ow lh ox ll oy lp pv or os ot bi translated">我们<strong class="kw iu">可以</strong>读取，即获取数据并呈现它。👍 😃</li><li id="6044" class="ol om it kw b kx ou la ov ld ow lh ox ll oy lp pv or os ot bi translated">我们<strong class="kw iu">还不能</strong>更新<strong class="kw iu"/>。👎</li><li id="c659" class="ol om it kw b kx ou la ov ld ow lh ox ll oy lp pv or os ot bi translated">我们<strong class="kw iu">不能</strong>删除<strong class="kw iu">还不能</strong>。👎</li></ul><p id="b9fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以接下来要做的是<strong class="kw iu">更新</strong>。👷</p><p id="bd22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第四章见</p><div class="pw px gp gr py pz"><a href="https://medium.com/@UmarCodes/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-four-db24fed8db50" rel="noopener follow" target="_blank"><div class="qa ab fo"><div class="qb ab qc cl cj qd"><h2 class="bd iu gy z fp qe fr fs qf fu fw is bi translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第四章</h2><div class="qg l"><h3 class="bd b gy z fp qe fr fs qf fu fw dk translated">更新报头并重构代码</h3></div><div class="qh l"><p class="bd b dl z fp qe fr fs qf fu fw dk translated">medium.com</p></div></div><div class="qi l"><div class="qj l qk ql qm qi qn ks pz"/></div></div></a></div></div></div>    
</body>
</html>