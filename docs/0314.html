<html>
<head>
<title>Integrating semantic-ui modal with Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Redux集成语义用户界面模型</h1>
<blockquote>原文：<a href="https://itnext.io/integrating-semantic-ui-modal-with-redux-4df36abb755c?source=collection_archive---------1-----------------------#2018-02-16">https://itnext.io/integrating-semantic-ui-modal-with-redux-4df36abb755c?source=collection_archive---------1-----------------------#2018-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c0de0bfa93be545753245bd42c2a11b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdiFUfbTNmk_IxFDNqokqg.png"/></div></div></figure><p id="feec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fintegrating-semantic-ui-modal-with-redux-4df36abb755c" rel="noopener ugc nofollow" target="_blank"> <em class="kx">点击这里在LinkedIn上分享这篇文章</em> </a></p><p id="54ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们在生活中都会用到情态动词，对吗？</p><p id="2dba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在过去的几天里，我一直在用一个简单的CRUD应用程序研究React和Redux，并且需要向我的用户展示一个确认模式。</p><p id="da74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于我使用了优秀的<a class="ae kw" href="https://react.semantic-ui.com/" rel="noopener ugc nofollow" target="_blank"> semantic-ui-react </a>，我已经可以访问<a class="ae kw" href="https://react.semantic-ui.com/addons/confirm" rel="noopener ugc nofollow" target="_blank"> <em class="kx"> Confirm </em> </a>组件，它显示了一个模态确认，理论上很容易使用。</p><p id="bb54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我不希望我的每个组件都有一个对库的引用，我尤其不希望管理我的无状态组件中的模态状态。</p><p id="e675" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，既然我已经使用Redux来管理状态，为什么不用它来管理我的模态及其状态呢？这就是我们在这篇文章中要做的。</p><p id="937a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kx">如果你不熟悉redux，我建议你从阅读他们的文档</em> <a class="ae kw" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">这里</em> </a> <em class="kx">开始。</em></p><h1 id="68d5" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤1:设置我们的示例应用程序</h1><p id="7b44" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">让我们首先用<a class="ae kw" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>来设置我们的应用程序。如果您对这个工具不熟悉，请花时间阅读他们的自述文件，它相当不错。</p><p id="7686" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，让我们安装create-react-app并搭建我们的应用程序:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="46c7" class="mk kz iq mg b gy ml mm l mn mo">npm i -g create-react-app<br/>create-react-app semantic-ui-modal-redux</span></pre><p id="815b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该工具为我们创建了所有需要的文件和配置，所以现在我们只需设置我们的依赖项:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="d802" class="mk kz iq mg b gy ml mm l mn mo">npm i -S semantic-ui-css semantic-ui-react redux react-redux</span></pre><p id="4c83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们在应用程序中导入语义ui css文件。打开文件<code class="fe mp mq mr mg b">index.js</code>并将其更改为以下内容:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="d2df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在只有一些清理工作要做。删除以下文件:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="3141" class="mk kz iq mg b gy ml mm l mn mo">&gt; src/logo.svg <br/>&gt; src/App.css </span></pre><p id="4965" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并更改<code class="fe mp mq mr mg b">src/App.js</code>以删除已删除的文件引用，并为其添加一些味道:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="06ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，现在我们准备开始配置Redux。</p><h1 id="7eb6" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤2:配置Redux</h1><h2 id="b4da" class="mk kz iq bd la mu mv dn le mw mx dp li kj my mz lm kn na nb lq kr nc nd lu ne bi translated">动作创建者</h2><p id="5e79" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">创建一个<code class="fe mp mq mr mg b">actions</code>文件夹并添加以下文件:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a388" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些将是我们在这些例子中的模态动作。如你所见，它们非常简单。当我们调用我们的<code class="fe mp mq mr mg b">openModal</code>动作创建者时，我们期望接收模态属性，用于配置它的内容、标题等等。我们的<code class="fe mp mq mr mg b">closeModal</code>动作目前没有接收任何参数，因为它只是声明了我们关闭模态的意图。</p><h2 id="f9ce" class="mk kz iq bd la mu mv dn le mw mx dp li kj my mz lm kn na nb lq kr nc nd lu ne bi translated">还原剂</h2><p id="3499" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">现在让我们创建我们的减速器。在这个例子中，我们将有一个根缩减器和一个模态缩减器。如您所见，它们的实现非常简单:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6c32" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mp mq mr mg b">rootReducer</code>将聚合所有现有的reducers(在这个例子中只有一个),<code class="fe mp mq mr mg b">modalReducer</code>将负责定义我们的模态的状态。当我们调用<code class="fe mp mq mr mg b">MODAL_OPEN</code>动作时，我们只是传递我们收到的有效载荷(还记得动作创建者的参数吗？)到商店，当我们调用<code class="fe mp mq mr mg b">MODAL_CLOSE</code>动作时，我们会清除状态，所以我们没有任何模态配置。</p><h2 id="3d36" class="mk kz iq bd la mu mv dn le mw mx dp li kj my mz lm kn na nb lq kr nc nd lu ne bi translated">商店</h2><p id="3e03" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">我们的商店没有任何特别的东西。这只是对Redux的<code class="fe mp mq mr mg b">createStore</code>的一个调用，传递我们的<code class="fe mp mq mr mg b">rootReducer</code>，如下图所示:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h2 id="0e85" class="mk kz iq bd la mu mv dn le mw mx dp li kj my mz lm kn na nb lq kr nc nd lu ne bi translated">供应者</h2><p id="3927" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">所有配置就绪后，是时候配置我们的应用程序来使用Redux了。打开<code class="fe mp mq mr mg b">index.js</code>文件，添加<code class="fe mp mq mr mg b">Provider</code>组件，如下图所示:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="f852" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤3:创建我们的ModalManager组件</h1><p id="a0e2" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">好了，样板文件说够了。让我们开始编写我们的模态管理器组件！</p><p id="2714" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，让我们给我们的<code class="fe mp mq mr mg b">App</code>组件添加一个按钮，这样我们就可以打开我们的调用我们的<code class="fe mp mq mr mg b">openModal</code>动作创建器:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="a951" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们刚刚添加了一个<code class="fe mp mq mr mg b">Button</code>组件，并将其配置为调用我们的<code class="fe mp mq mr mg b">openModal</code>动作创建器。为了做到这一点，我们必须从Redux调用<code class="fe mp mq mr mg b">connect</code>函数。该函数负责将我们的组件连接到redux存储，因此我们可以调度操作，而不必显式调用我们的组件中的<code class="fe mp mq mr mg b">dispatch</code>方法。</p><p id="7bda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们创建主要组件。首先创建<code class="fe mp mq mr mg b">components</code>文件夹，并添加一个包含以下内容的<code class="fe mp mq mr mg b">ModalManager</code>文件:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="cff5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个组件其实挺简单的。它只是从Redux获取<code class="fe mp mq mr mg b">modals</code>存储，将其映射到<code class="fe mp mq mr mg b">modalConfiguration</code>属性，如果定义了该对象(意味着调度了<code class="fe mp mq mr mg b">OPEN_MODAL</code>动作)，则在其内部呈现一个<code class="fe mp mq mr mg b">Modal</code>组件(带有一些默认配置)。</p><p id="f3de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当调度<code class="fe mp mq mr mg b">CLOSE_MODAL</code>动作时，我们的<code class="fe mp mq mr mg b">modalConfiguration</code>对象为空，这意味着我们的<code class="fe mp mq mr mg b">Modal</code>组件不会被呈现。</p><h1 id="ac84" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="a9f6" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">就是这样！现在，我们可以让我们的组件显示语义ui模型，而不必将它们耦合到它们的组件，也不必管理它的可见性/状态，并且我们还可以将Redux的时间旅行调试用于我们的模型。</p><p id="db24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这只是一个粗略的实现，但是它可以帮助指导您接下来与Redux的集成。我希望你喜欢这个帖子，如果你有任何疑问，请在下面留下评论，我会尽力帮助你:)</p><p id="9979" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该职位的代码可在<a class="ae kw" href="https://github.com/rodrigoff/semantic-ui-modal-redux" rel="noopener ugc nofollow" target="_blank">https://github.com/rodrigoff/semantic-ui-modal-redux</a>获得。如果您想跳到特定的点，每个提交都与post的一个步骤相关。</p><p id="a6a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kx">如果你需要更高级的指导，可以参考本帖:</em><a class="ae kw" href="http://blog.isquaredsoftware.com/2017/07/practical-redux-part-10-managing-modals/" rel="noopener ugc nofollow" target="_blank"><em class="kx">http://blog . isquared software . com/2017/07/practical-redux-part-10-managing-modals/</em></a><em class="kx">，帮助指导了本帖。</em></p></div></div>    
</body>
</html>