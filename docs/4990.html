<html>
<head>
<title>Scrape the Web Faster, in Go with Chromedp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Chromedp更快地浏览网页</h1>
<blockquote>原文：<a href="https://itnext.io/scrape-the-web-faster-in-go-with-chromedp-c94e43f116ce?source=collection_archive---------0-----------------------#2020-11-11">https://itnext.io/scrape-the-web-faster-in-go-with-chromedp-c94e43f116ce?source=collection_archive---------0-----------------------#2020-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a553" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">无头铬合金</h2><div class=""/><div class=""><h2 id="d41a" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一种在Go中与支持Chrome DevTools协议的浏览器进行交互的快速而简单的方法。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/250cc932da0d8e1a4b3fd8975219b63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c5l3dI7H-f9wXFKE"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@nasa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NASA </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><blockquote class="li"><p id="dac8" class="lj lk it bd ll lm ln lo lp lq lr ls dk translated">一个简单的，高性能的网页抓取器，爬虫，预渲染解决方案，或截屏工具</p></blockquote><h1 id="0603" class="lt lu it bd lv lw lx ly lz ma mb mc md ki me kj mf kl mg km mh ko mi kp mj mk bi translated">Chromedp是什么？</h1><p id="96f0" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">Chromedp是一种<strong class="mn jd">快速、更简单的</strong>方式来与<a class="ae lh" href="https://chromedevtools.github.io/devtools-protocol/" rel="noopener ugc nofollow" target="_blank"> Chrome DevTools协议</a>进行交互，没有任何外部依赖性，例如selenium或phantomjs，这在其他实现中是可以找到的。</p><p id="4a0a" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">这是一个轻量级的Go实现。</p><p id="453d" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">你只需要安装Chrome。</p><div class="nl nm gp gr nn no"><a href="https://www.google.com/intl/en_uk/chrome/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">谷歌浏览器-从谷歌下载快速、安全的浏览器</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">下载Chrome下载后按照说明安装。适用于Windows 10/8.1/8/7 32位。对于Windows…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.google.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc lb no"/></div></div></a></div><h2 id="d25e" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">为什么要用chromedp？</h2><ul class=""><li id="cb95" class="oo op it mn b mo mp mr ms mu oq my or nc os ls ot ou ov ow bi translated">前置放大器</li><li id="722f" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls ot ou ov ow bi translated">抓取数据</li><li id="57e5" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls ot ou ov ow bi translated">截屏</li></ul><p id="645a" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">为了向您展示它是如何工作的，<strong class="mn jd">我们将使用它来抓取github.com</strong>并从页面上的元素中检索一些文本。</p><h2 id="07ef" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">关于chromedp你应该知道的事情</h2><ul class=""><li id="11df" class="oo op it mn b mo mp mr ms mu oq my or nc os ls ot ou ov ow bi translated">通过<strong class="mn jd">默认</strong>，Chrome以无头模式运行</li><li id="7e52" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls ot ou ov ow bi translated">您可以使用<code class="fe pc pd pe pf b">DefaultExecAllocatorOptions</code><strong class="mn jd">覆盖默认选项</strong>。</li><li id="c1e8" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls ot ou ov ow bi translated">如果你想在<strong class="mn jd">无头环境</strong>中运行chromedp，可以使用下面的docker镜像。</li></ul><div class="nl nm gp gr nn no"><a href="https://hub.docker.com/r/chromedp/headless-shell/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">码头枢纽</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">Chrome无头外壳的最小容器</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">hub.docker.com</p></div></div></div></a></div><h2 id="ebc2" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">覆盖默认浏览器选项的示例</h2><div class="nl nm gp gr nn no"><a href="https://godoc.org/github.com/chromedp/chromedp#example-ExecAllocator" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">包装chromedp</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">导入“github.com/chromedp/chromedp”包chromedp是一个高级的Chrome DevTools协议客户端，可以简化…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">godoc.org</p></div></div></div></a></div><p id="5f7c" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">在这个例子中，我们将使用默认选项。</p><h1 id="fd73" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">我们的依赖</h1><p id="955a" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">只有一个外部依赖…</p><h2 id="17ef" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">Chromedp</h2><div class="nl nm gp gr nn no"><a href="https://github.com/chromedp/chromedp" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">chromedp/chromedp</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">包chromedp是一种更快、更简单的方式来驱动浏览器在Go中支持Chrome DevTools协议，而无需…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="pj l nz oa ob nx oc lb no"/></div></div></a></div><p id="79d1" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated"><strong class="mn jd">那么让我们开始吧……</strong></p></div><div class="ab cl pk pl hx pm" role="separator"><span class="pn bw bk po pp pq"/><span class="pn bw bk po pp pq"/><span class="pn bw bk po pp"/></div><div class="im in io ip iq"><h1 id="3939" class="lt lu it bd lv lw pr ly lz ma ps mc md ki pt kj mf kl pu km mh ko pv kp mj mk bi translated">1)安装Chromedp</h1><p id="4552" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">在项目根目录下，在终端中运行这个命令，从Github获取并安装chromedp。</p><pre class="ks kt ku kv gt pw pf px py aw pz bi"><span id="3b61" class="od lu it pf b gy qa qb l qc qd"><strong class="pf jd">$</strong> go get -u github.com/chromedp/chromedp</span></pre><blockquote class="qe qf qg"><p id="2bef" class="ml mm qh mn b mo ng kd mq mr nh kg mt qi ni mw mx qj nj na nb qk nk ne nf ls im bi translated">我假设go已经在你的系统上正确安装了，如果没有，请到https://golang.org/doc/install的<a class="ae lh" href="https://golang.org/doc/install" rel="noopener ugc nofollow" target="_blank">按照说明安装Go。</a></p></blockquote><h1 id="f555" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">2)导入我们的依赖性</h1><p id="9be4" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">像往常一样，在文件的顶部导入我们所有的依赖项。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">导入chromedp以及其他依赖项</figcaption></figure><blockquote class="qe qf qg"><p id="5913" class="ml mm qh mn b mo ng kd mq mr nh kg mt qi ni mw mx qj nj na nb qk nk ne nf ls im bi translated">依赖关系<code class="fe pc pd pe pf b">context</code>、<code class="fe pc pd pe pf b">fmt</code>、<code class="fe pc pd pe pf b">log</code>和<code class="fe pc pd pe pf b">time</code>都是<strong class="mn jd">标准库</strong>的一部分。</p></blockquote><h1 id="660e" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">3)初始化浏览器上下文</h1><h2 id="6598" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">创建Chrome实例上下文</h2><p id="122e" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">我们的第一步是初始化浏览器上下文。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">用第一个选项卡初始化浏览器上下文。</figcaption></figure><p id="58b5" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">这将创建一个<strong class="mn jd">新浏览器</strong>，在<strong class="mn jd">的第一个</strong>标签上。</p><p id="c3bc" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们将把<code class="fe pc pd pe pf b">cancel()</code>调用推迟到主函数结束时。</p><h2 id="dd33" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">添加超时</h2><p id="0454" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">我们不希望我们的scraper永远挂起，所以<strong class="mn jd">让我们添加15秒的超时。</strong></p><p id="e181" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们将<code class="fe pc pd pe pf b">defer</code>调用取消超时，这样它就发生在程序退出之前。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">创建浏览器上下文</figcaption></figure><h1 id="cc7d" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">4)概述浏览器步骤</h1><p id="d822" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">让我们列出浏览器应该采取的步骤。</p><ol class=""><li id="9b66" class="oo op it mn b mo ng mr nh mu qn my qo nc qp ls qq ou ov ow bi translated"><strong class="mn jd">覆盖</strong>用户代理(我们将使用定制的用户代理)</li><li id="8a9c" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls qq ou ov ow bi translated"><strong class="mn jd">导航</strong>到网址(github.com)</li><li id="1336" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls qq ou ov ow bi translated">向下滚动页面(我们将使用页脚)</li><li id="b10c" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls qq ou ov ow bi translated">等待直到页面的重要部分可见(我们需要的元素数据)</li><li id="5dc8" class="oo op it mn b mo ox mr oy mu oz my pa nc pb ls qq ou ov ow bi translated"><strong class="mn jd">抓取</strong>重要数据(元素文本)</li></ol><p id="8485" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">这些步骤涵盖了自动化浏览器将采取的所有动作。</p><blockquote class="qe qf qg"><p id="c276" class="ml mm qh mn b mo ng kd mq mr nh kg mt qi ni mw mx qj nj na nb qk nk ne nf ls im bi translated">在这个演练的最后，<strong class="mn jd">我会向你展示一些额外的动作</strong>，你可以对那些想要<strong class="mn jd">预渲染</strong>或者拍摄<strong class="mn jd">截图</strong>的人采取这些动作。</p></blockquote><h1 id="3ac6" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">5)将每个步骤写成Go代码</h1><p id="08e5" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">这些步骤中的每一步都将作为一个数组包含到<code class="fe pc pd pe pf b">chrome.Run()</code>函数中。</p><p id="c4f6" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">让我们通过分别为每个任务编写代码来分解任务。我们将在下一步合并任务。</p><h2 id="e399" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">覆盖用户代理</h2><p id="a0bd" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">让我们使用一个定制的用户代理，这样我们的scraper就可以在服务器上被识别。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">覆盖用户代理</figcaption></figure><p id="86df" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们需要使用chromedp的仿真包来帮助解决这个问题。</p><h2 id="35a8" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">导航到该URL</h2><p id="f621" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">我们将使用github.com的主页。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">导航到github.com</figcaption></figure><h2 id="73be" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">向下滚动页面</h2><p id="e49d" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">让我们向下滚动到页脚，以确保页面已经完全呈现。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div></figure><blockquote class="qe qf qg"><p id="1f92" class="ml mm qh mn b mo ng kd mq mr nh kg mt qi ni mw mx qj nj na nb qk nk ne nf ls im bi translated"><strong class="mn jd">如果页面的部分是延迟加载的，这很有用，</strong>比如在SPA应用程序中，比如用Angular、React或Vue创建的应用程序。</p></blockquote><h2 id="0917" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">等到一个重要的部分可见</h2><p id="a87f" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">我们需要浏览器等待，直到页脚已经呈现。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div></figure><p id="e86c" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们将一直等到<code class="fe pc pd pe pf b">&lt;footer&gt;</code>元素中的第一个<code class="fe pc pd pe pf b">&lt;div&gt;</code></p><h2 id="167b" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">搜集数据</h2><p id="f273" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">我们将只获取<code class="fe pc pd pe pf b">h1</code>标签(主标题)中的文本。</p><p id="5caa" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">字符串<code class="fe pc pd pe pf b">res</code>将是一个变量，用来存储这个<code class="fe pc pd pe pf b">.Text()</code>查询的结果。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div></figure><p id="0842" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们将使用<code class="fe pc pd pe pf b">ByQuery</code>选项，这样我们可以通过标签名搜索<code class="fe pc pd pe pf b">h1</code>标签。</p><blockquote class="qe qf qg"><p id="08ad" class="ml mm qh mn b mo ng kd mq mr nh kg mt qi ni mw mx qj nj na nb qk nk ne nf ls im bi translated">有许多其他选项可以搜索页面上的元素。</p></blockquote><p id="d299" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">您可以在此处找到其他选项的<strong class="mn jd">列表来搜索元素<a class="ae lh" href="https://godoc.org/github.com/chromedp/chromedp" rel="noopener ugc nofollow" target="_blank">。</a></strong></p><h1 id="b372" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">6)合并我们的连续浏览器任务</h1><p id="acfe" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">通过<code class="fe pc pd pe pf b">.Run</code>功能中的可变参数组合任务。</p><p id="52db" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们将传递上下文<code class="fe pc pd pe pf b">ctx</code>作为第一个参数，后面是我们的步骤。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">浏览器任务的运行功能</figcaption></figure><p id="7829" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">这是我们scraper代码的最后一步。</p><p id="832e" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">我们现在需要做的就是打印<code class="fe pc pd pe pf b">res</code>变量，看看我们的scraper找到了什么，你可以在下面的<strong class="mn jd">完整代码中看到。</strong></p><h1 id="c82a" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">完整的网络刮刀代码</h1><p id="2436" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">这是我们的完整代码，所有的步骤都合并到一个函数中。</p><p id="e0ae" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">与更复杂的scraper实现不同，我们的scraper任务非常简单，因此它可以放入一个文件中，但这样我们可以很容易地看到chromedp中抓取web所需的步骤。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">完整的Github scraper代码</figcaption></figure><h2 id="2cfc" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">结果…</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qr"><img src="../Images/9d2f56a0c075098ac4c6286ccdfeca30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*xJm7CowOwod1E0Cnfh6YpQ.png"/></div></figure><blockquote class="qe qf qg"><p id="d711" class="ml mm qh mn b mo ng kd mq mr nh kg mt qi ni mw mx qj nj na nb qk nk ne nf ls im bi translated"><strong class="mn jd">刮擦成功🎉</strong></p></blockquote><p id="3604" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">在<strong class="mn jd"> 2.4秒内完成</strong></p><h1 id="0793" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">额外收获——预先呈现DOM🚀</h1><p id="4970" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">使用该功能作为<code class="fe pc pd pe pf b">.Run()</code>的最后一步。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">以字符串形式获取DOM作为预渲染解决方案非常有用</figcaption></figure><h1 id="7fe8" class="lt lu it bd lv lw lx ly lz ma mb mc md ki pg kj mf kl ph km mh ko pi kp mj mk bi translated">奖励——截图📸</h1><p id="577a" class="pw-post-body-paragraph ml mm it mn b mo mp kd mq mr ms kg mt mu mv mw mx my mz na nb nc nd ne nf ls im bi translated">您可以使用<code class="fe pc pd pe pf b">.Screenshot()</code>功能对页面上的元素进行截图。</p><p id="05ef" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">你可以把这个功能作为浏览器的最后一个动作。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ql qm l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">获取页面上某个元素的屏幕截图</figcaption></figure><p id="8e8e" class="pw-post-body-paragraph ml mm it mn b mo ng kd mq mr nh kg mt mu ni mw mx my nj na nb nc nk ne nf ls im bi translated">你需要在<code class="fe pc pd pe pf b">.Run()</code>完成后把截图写到一个文件里。</p><h2 id="9d4f" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">想了解更多？查看chromedp文档！</h2><div class="nl nm gp gr nn no"><a href="https://godoc.org/github.com/chromedp/chromedp" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">包装chromedp</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">导入“github.com/chromedp/chromedp”包chromedp是一个高级的Chrome DevTools协议客户端，可以简化…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">godoc.org</p></div></div></div></a></div><h2 id="4c65" class="od lu it bd lv oe of dn lz og oh dp md mu oi oj mf my ok ol mh nc om on mj iz bi translated">感谢阅读！有任何问题，请在评论中告诉我。</h2></div></div>    
</body>
</html>