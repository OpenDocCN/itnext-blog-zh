<html>
<head>
<title>Authentication with Social Linking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过社交链接进行身份验证</h1>
<blockquote>原文：<a href="https://itnext.io/part-1-authentication-with-social-linking-a3d124ff2ea9?source=collection_archive---------7-----------------------#2021-01-18">https://itnext.io/part-1-authentication-with-social-linking-a3d124ff2ea9?source=collection_archive---------7-----------------------#2021-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">任何构建面向消费者的应用程序的人，无论是移动应用程序还是web应用程序，都花时间研究不同的身份验证选项，而不仅仅是标准的用户名/密码模型，还有如何获得联合社交登录的乐趣。</p><p id="a617" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当步入联合登录的世界时，需要做出决策和选择解决方案，我想我应该对一些选项提供一些帮助。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><h1 id="1466" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">Google Firebase认证还是AWS Cognito用户池？</h1><p id="2080" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">当看到Google和AWS的两大认证SaaS产品时，很明显他们对认证的看法不同。</p><p id="522f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开箱即用的Firebase非常好用。假设电子邮件地址匹配，它允许许多不同的身份验证方法都链接回一个用户。这很棒，因为它消除了大量匹配帐户的开发工作。越过AWS Cognito，后端设置将变得更加复杂。Cognito更像是一个LDAP平台，除了对消息和操作进行深度定制之外，它还允许捕获用户名和密码之外的用户详细信息。</p><p id="fc4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你在这里的部分决定也将归结于你为后端技术做什么。我当时使用的解决方案是在AWS平台上，所以看看我是否能让Cognito按照我想要的方式运行是有意义的。如果我重新开始，我可能会使用谷歌Firebase，因为它很简单。</p><h1 id="e53c" class="ks kt iq bd ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll lz ln lo lp bi translated">用户池？联合身份？这是怎么回事？</h1><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/ac25fcc8d4a221dec1626043ba31ff4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/0*r-XhbGl_y_Vy_Rgt.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">AWS Cognito</figcaption></figure><p id="ede8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在设置时，我不得不真正尝试理解AWS的不同选项，因为它们提供了两种认知服务，用户池和联合身份。当你第一次使用它时，你会对这两个服务感到困惑，因为它们是有联系的，但又不是。</p><h1 id="08ee" class="ks kt iq bd ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll lz ln lo lp bi translated">用户池</h1><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/618a8feb933b825191dfe12e18162eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/0*9tQuYSAneCkE89nF.png"/></div></figure><p id="37a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从用户池开始。这是您的标准用户数据库，如认证服务。它可以在注册时收集用户的详细信息，管理确认电子邮件，处理丢失的密码，并通常处理与登录相关的任何事情。如果您在AWS控制台中，我们将忽略“联盟”部分，我们将回到这个部分。如果你所寻找的只是验证用户，那么你就有了你的服务。</p><h1 id="666c" class="ks kt iq bd ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll lz ln lo lp bi translated">身份池</h1><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/a896a1d54f3b5a5d191da025b687e932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-tBCCF3EBtY4Cugm.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">联合身份(身份池)</figcaption></figure><p id="5e43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们看看联合身份。这是将角色和策略授予AWS平台内经过身份验证的用户的服务。如果你有AWS云中的技术，这是一个非常重要的部分，将允许用户离散访问数据库、API或任何你想连接他们的东西。</p><h1 id="4ba2" class="ks kt iq bd ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll lz ln lo lp bi translated">你刚才说什么？</h1><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ms"><img src="../Images/d226fd3e55994cd8a1841548dcdd472f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QOOKJ1DYo_TVfdVS"/></div></div></figure><p id="b327" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你现在可能完全糊涂了。你看着图表，看到社交登录连接到两者，现在认为是时候停止阅读，假装这一切都不存在。但让我试着帮你。</p><p id="8d39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用户池保存您的用户数据。身份池向服务授予授权。真的就这么简单。您可以将社交登录直接链接到身份池，而不存储任何用户数据，只要他们是有效的、谷歌或脸书用户，就授予访问权限。当你想了解你的用户时，你现在需要把用户池混合在一起。您将看到，身份池将用户池视为另一个身份提供者，只是碰巧它在AWS中的同一服务中，这使这变得令人困惑。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><h1 id="8d45" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">联合社交登录选项</h1><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mt"><img src="../Images/5340f629665c0104ae2facd74118f33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XbnbDj94SfBTf95K"/></div></div></figure><p id="2b61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是我们做决定的地方。我会用其中一个选项(我认为最有意义的一个)进行一些设计，但我想给每个人一些似乎存在的信息。</p><p id="8e3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">唯一账户</strong></p><p id="8e98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我认为这是最不可取的，但它是用户池支持的默认设置，所以我想提到它。通过这种设置，来自每个身份提供者的每个登录都会获得自己的帐户。这意味着，如果你有一个用户名/密码的用户设置，然后他们使用谷歌登录，你最终会有两个帐户没有连接。如果你问我，我会觉得很疯狂。</p><p id="a507" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">仅身份</strong></p><p id="bdd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这依赖于身份池中联合身份的设置。该应用程序将进行身份验证，并从身份提供商处传入一个有效的令牌，然后用户就可以访问了。在这种模式下，您实际上并没有存储用户的任何详细信息，池中的身份可能会随着时间的推移而改变。可能适合一些使用案例，但不适合我的案例。</p><p id="f21d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">单一账户所有！</strong></p><p id="88f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将最有可能的一个留到最后，这是用户池中有一个帐户并且所有身份提供者都链接到该帐户的设置。简单对吗？虽然这里也有一些配置选项。</p><p id="6558" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mu">选项1(首先设置用户名)</em></p><p id="9135" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此选项强制用户创建用户池帐户。为什么这么问？您可以通过这种方式收集用户的详细信息，但出于一个原因，这些信息不会来自身份提供者。它允许您的注册流程保持一致。创建用户后，如果用户尝试使用具有匹配电子邮件的身份提供商登录，它将自动链接他们。</p><p id="f8d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mu">选项2(自动创建)</em></p><p id="3e45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您没有额外的数据要收集，最好让用户使用身份提供者帐户注册。关于这一点的技巧是，您仍然应该创建您需要首先创建用户名用户池帐户，然后链接到它。为什么这么问？如果用户停止访问该身份提供者，或者想放弃使用该身份提供者，如果您没有该帐户，他们将无法恢复到用户名/密码。</p><p id="3e69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mu">选项3(强制链接)</em></p><p id="4770" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">强制链接是最后一个选项。是1和2的混合体。这种方法的工作方式是让用户创建一个类似选项1的帐户，但不是让他们立即从社交按钮登录，而是让他们进入设置并将他们的身份提供商链接到帐户。你为什么会认为这是个好主意，你可能会想。如果你可以在电子邮件上匹配，选项2是很好的，但是如果用户有一个不同的电子邮件地址附加到他们的Google帐户，而不是他们注册的那个。他们没有社交登录的乌托邦。使他们手动链接帐户将允许在设置身份提供者链接时具有完全的灵活性。</p><h1 id="e32e" class="ks kt iq bd ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll lz ln lo lp bi translated">那么下一步是什么？</h1><p id="aaad" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">我希望对AWS Cognito如何工作以及一些社交登录选项的初步了解是有用的。</p><p id="957a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我知道这是否有帮助，我会努力更新文章，让每个人都觉得他们是AWS Cognito的大师。</p></div></div>    
</body>
</html>