<html>
<head>
<title>Making responsive Vue components with ResizeObserver</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ResizeObserver制作响应式Vue组件</h1>
<blockquote>原文：<a href="https://itnext.io/making-adaptive-vue-components-with-resizeobserver-123b5ebb20ae?source=collection_archive---------1-----------------------#2018-04-22">https://itnext.io/making-adaptive-vue-components-with-resizeobserver-123b5ebb20ae?source=collection_archive---------1-----------------------#2018-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/27e0859a79c2875543e34991367e7842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qBlbfq4tSsQuf6ydRwSQfg.png"/></div></div></figure><p id="cb57" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好。今天我想分享一个小但很有用的东西。</p><p id="6dbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我目前的项目中，我有许多可重用的组件(我将其命名为“小部件”)，可以放在任何地方。我遇到了响应式设计的问题。</p><p id="81f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我明白css <code class="fe kw kx ky kz b">@media</code>查询在我的情况下是绝对不可用的。</p><h1 id="2971" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">那么，有什么问题呢？</h1><p id="26e8" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">假设我们有一些<code class="fe kw kx ky kz b">PostsItem</code>组件。我们有<code class="fe kw kx ky kz b">PostsPage</code>的帖子列表:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/1b272fa3a64219a4080c21de59bdfc51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kh9aru8SDCe-k59FH59y0g.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">有帖子的新闻页面</figcaption></figure><p id="c1f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就几行CSS吧？</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="97fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我们还希望保持移动视图良好。它可能看起来像:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/05dd332820dd24c07bc546984e249f91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YRnJdkNlQLk7R0iC1yPRTQ.png"/></div></div></figure><p id="3465" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以说“容易”，<code class="fe kw kx ky kz b">@media</code>解决了这个问题，对吧？</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="a470" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好的，它起作用了。但是如果我们将在另一个地方使用我们的<code class="fe kw kx ky kz b">PostsItem</code>组件呢？</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/bce4994129273abae60c33cf31cc1ea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wNxXdVKf3BCjsyVwy2RQpg.png"/></div></div></figure><p id="fc88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">哦，可怜的眼睛。我们的屏幕很大，但我们没想到会连续看到3篇帖子。</p><p id="1377" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，<code class="fe kw kx ky kz b">@media</code>查询的最大问题是:</p><blockquote class="mq"><p id="19f1" class="mr ms iq bd mt mu mv mw mx my mz kv dk translated">您的组件响应基于屏幕大小，但应该基于它自己的大小</p></blockquote><p id="d862" class="pw-post-body-paragraph jy jz iq ka b kb na kd ke kf nb kh ki kj nc kl km kn nd kp kq kr ne kt ku kv ij bi translated">但是，在这种情况下，组件布局只取决于它们。这些组件应该是原子的，独立地确定它们自己的大小，并使布局适应它。</p><p id="b5c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要当地的回应风格。又来了<strong class="ka ir"> ResizeObserver </strong>！</p><h1 id="01a5" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">resize观察者</h1><p id="98dd" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated"><a class="ae nf" href="https://developers.google.com/web/updates/2016/10/resizeobserver" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">resize observer</strong></a>是一个新特性，当一个元素的内容矩形改变了它的大小时，它会通知你，并做出相应的反应。</p><p id="8feb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用法非常简单:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="06b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以说浏览器支持不好:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/e6519f732d4e23b85cedbf8ea3cece9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p5wHRuQmDanVn2XDt-VT9A.png"/></div></div></figure><p id="98a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不过，幸运的是，<strong class="ka ir"> ResizeObserver </strong>有<a class="ae nf" href="https://github.com/que-etc/resize-observer-polyfill" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> polyfill </strong> </a>这是基于<strong class="ka ir">变异Observer </strong>:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/35037a90cc1d924db669267f403e5273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGR-rBg1CVw46ZDOQvwA_w.png"/></div></div></figure><h1 id="520b" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">与Vue一起使用</h1><p id="6fde" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">我为Vue.js </p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="493c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在它看起来很好，即使我们把三个职位在一排:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/c9aeb08d13b20257a3c3da07d97b4f55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMshFfcyI8oYi2VKORiyDg.png"/></div></div></figure><p id="4b22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们的组件真正独立了！</p><p id="fb01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它也给你机会定义不同的html标记，而不仅仅是css。例如，我为小型区块添加了选项卡和“超小型”帖子视图:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/3954a49f03a890d8496772f0543df8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOVb0azosEfztKyTCCJn3A.png"/></div></div></figure><p id="6187" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我想指出的是，为了支持ResizeObserver，我完全删除了当前项目中的所有<code class="fe kw kx ky kz b">@media</code>查询😉</p><h1 id="deef" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">UPD:奖金:<code class="fe kw kx ky kz b">v-responsive</code>指令</h1><p id="0522" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">幸亏<a class="ae nf" href="https://www.reddit.com/r/vuejs/comments/8eap88/making_responsive_vue_components_with/dxtx0bu/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">这家伙</strong> </a>出了个主意。我添加了<code class="fe kw kx ky kz b">v-responsive</code>指令来去掉包装组件:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h1 id="fc99" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">再次所有链接</h1><ul class=""><li id="de65" class="nj nk iq ka b kb ly kf lz kj nl kn nm kr nn kv no np nq nr bi translated"><a class="ae nf" href="https://developers.google.com/web/updates/2016/10/resizeobserver" rel="noopener ugc nofollow" target="_blank"> ResizeObserver:就像document . on resize for Elements</a></li><li id="5c23" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated"><a class="ae nf" href="https://github.com/que-etc/resize-observer-polyfill" rel="noopener ugc nofollow" target="_blank"> ResizeObserver polyfill </a></li><li id="7afa" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated"><a class="ae nf" href="https://github.com/Kelin2025/vue-responsive-components" rel="noopener ugc nofollow" target="_blank">vue . js的包装器</a></li><li id="205d" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated"><a class="ae nf" href="http://twitter.com/kelin2025" rel="noopener ugc nofollow" target="_blank">我的推特:)</a></li></ul></div></div>    
</body>
</html>