<html>
<head>
<title>Automatic terraform linting with reviewdog and tflint</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带reviewdog和tflint的自动地形林挺</h1>
<blockquote>原文：<a href="https://itnext.io/automatic-terraform-linting-with-reviewdog-and-tflint-f4fb66034abb?source=collection_archive---------2-----------------------#2020-05-21">https://itnext.io/automatic-terraform-linting-with-reviewdog-and-tflint-f4fb66034abb?source=collection_archive---------2-----------------------#2020-05-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="aab8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">简介</strong></p><p id="0ea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将使用<a class="ae kl" href="https://github.com/reviewdog/reviewdog" rel="noopener ugc nofollow" target="_blank"> reviewdog </a>和<a class="ae kl" href="https://github.com/reviewdog/action-tflint" rel="noopener ugc nofollow" target="_blank"> tflint github action </a>测试如何lint并自动检查我们的terraform代码的github pull请求，这对于防止不必要的更改或错误提交被合并到您的主分支非常有用。为了让它工作，你只需要在你的repo中配置一个Github动作，就这样，你不需要生成任何令牌或者做任何额外的步骤。</p><p id="e688" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了让这个例子更简单，我用基本配置创建了这个<a class="ae kl" href="https://github.com/kainlite/reviewdog" rel="noopener ugc nofollow" target="_blank"> repo </a>来让它工作。</p><p id="238c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">地形</strong></p><p id="66af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要获得我们的terraform代码，正如你所看到的，它是AWS中一个简单的ec2实例，但是实例类型不存在，我们将很快修复它。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kr ks l"/></div></figure><p id="5bde" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Github工作流程</strong></p><p id="f102" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们正在使用Github，所以我们可以利用<a class="ae kl" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank">动作</a>来运行代码的linter，并在出现错误时标记我们的PR。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kr ks l"/></div></figure><p id="7832" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">示例公关</strong></p><p id="bacf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们将运行一个有问题的PR，以查看它的失败和报告是如何工作的(要到达这里，您可以单击PR中的checks选项卡，然后单击tflint步骤，请参见<a class="ae kl" href="https://github.com/kainlite/reviewdog/pull/1/checks?check_run_id=793169790" rel="noopener ugc nofollow" target="_blank">此处</a>)。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi kt"><img src="../Images/5fc6434f631584db982850048c595f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MO6fB3Nn2GoR4w1X.png"/></div></div></figure><p id="a24b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">真正起作用的人</strong></p><p id="3ba4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们已经测试了它，它如预期的那样失败了，我们现在可以修复它，现在reviewdog和tflint对我们的提交感到满意，我们可以合并它(只需在main.tf文件中将t1改为t2)。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi la"><img src="../Images/31f7e07e778a8fb1dc0e5dcde0bcb0d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E-Xjt3Yuj8ZYStgw.png"/></div></div></figure><p id="97aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">闭幕词</strong></p><p id="dbe8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对我来说，这似乎特别有用，因为它可以捕捉到很多肉眼难以捕捉的错误，特别是当我们谈论打字错误时，这也是一个很好的做法，所以你可以这样做，我希望你尝试一下，并记住reviewdog可以审查许多不同的语言，我只是选择了terraform，因为这是我最近使用最多的。</p><h1 id="034a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">正误表</h1><p id="ad3e" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">如果您发现任何错误或有任何建议，请给我发消息，以便解决问题。</p><p id="1056" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，您可以在<a class="ae kl" href="https://github.com/kainlite/kainlite.github.io" rel="noopener ugc nofollow" target="_blank">生成的代码</a>和<a class="ae kl" href="https://github.com/kainlite/blog" rel="noopener ugc nofollow" target="_blank">源代码</a>中查看源代码和变更</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="24ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ml">原载于2020年5月21日</em><a class="ae kl" href="https://techsquad.rocks/blog/terraform_linter/" rel="noopener ugc nofollow" target="_blank"><em class="ml">https://tech squad . rocks</em></a><em class="ml">。</em></p></div></div>    
</body>
</html>