<html>
<head>
<title>Getting Started with Flutter Desktop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开始使用Flutter Desktop</h1>
<blockquote>原文：<a href="https://itnext.io/getting-started-with-flutter-desktop-91e8293bafcf?source=collection_archive---------0-----------------------#2019-12-22">https://itnext.io/getting-started-with-flutter-desktop-91e8293bafcf?source=collection_archive---------0-----------------------#2019-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a51f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用Dart和Flutter构建桌面应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/052c1e9b2e5f458ebfc7f1d82d6392d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0jt2zEXdmGi0v3ztkgdhNA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在macos上运行的示例项目的屏幕截图</figcaption></figure><h2 id="4b4a" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">介绍</h2><p id="b813" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi mn translated">自2018年12月发布Flutter以来，它获得了很大的发展势头，并迅速成为当今世界许多专业移动开发者的首选。</p><p id="9583" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">基于Dart语言和Flutter生态系统的成功，桌面目标支持为创建具有清晰可读的代码库和高性能二进制文件的优秀桌面应用程序提供了新的机会。</p><p id="958a" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">在本文中，我们将研究使用Flutter创建简单桌面应用程序的过程，并探索使用这些工具构建完整桌面应用程序的可能性和挑战。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="9d11" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">要求</h2><p id="a8e8" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">要使用Flutter构建桌面应用，需要一个启用桌面支持的最新Flutter SDK环境:</p><ul class=""><li id="a786" class="ni nj it lw b lx mw ma mx lh nk ll nl lp nm mm nn no np nq bi translated">如果你还没有的话，可以从他们的网站为你的操作系统下载Flutter</li><li id="0a4f" class="ni nj it lw b lx ns ma nt lh nu ll nv lp nw mm nn no np nq bi translated">用<code class="fe ny nz oa ob b">$ flutter channel master</code>切换到<em class="nx">主</em>通道</li><li id="398c" class="ni nj it lw b lx ns ma nt lh nu ll nv lp nw mm nn no np nq bi translated">你可以用<code class="fe ny nz oa ob b">$ flutter upgrade</code>升级Flutter(如果需要)</li></ul><p id="d3ac" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">要支持您的目标环境，请执行以下操作:</p><ul class=""><li id="d344" class="ni nj it lw b lx mw ma mx lh nk ll nl lp nm mm nn no np nq bi translated">Linux: <code class="fe ny nz oa ob b">$ flutter config --enable-linux-desktop</code></li><li id="1978" class="ni nj it lw b lx ns ma nt lh nu ll nv lp nw mm nn no np nq bi translated">苹果电脑:<code class="fe ny nz oa ob b">$ flutter config --enable-macos-desktop</code></li><li id="e4cb" class="ni nj it lw b lx ns ma nt lh nu ll nv lp nw mm nn no np nq bi translated">视窗:<code class="fe ny nz oa ob b">$ flutter config --enable-windows-desktop</code></li></ul><p id="dd9c" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated"><code class="fe ny nz oa ob b">flutter create</code>命令目前尚不支持所有主要的OS目标，目前(截至2019年12月)仅支持针对macOS。有关桌面支持的当前和未来状态的更多信息，请查看GitHub wiki页面。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="f20a" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">项目设置</h2><p id="a6c6" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">要创建一个macOS应用程序，只需运行<code class="fe ny nz oa ob b">$flutter create</code>就会创建一个项目。为了创建一个同时支持Linux和Windows的应用程序，Flutter团队提供了一个支持所有三种环境的初始项目，即<a class="ae nr" href="https://github.com/google/flutter-desktop-embedding" rel="noopener ugc nofollow" target="_blank">Flutter-desktop-embedding</a>项目。</p><p id="4c15" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">这可以被克隆或下载，作为新项目的起点。</p><p id="8343" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">本文中使用的示例项目是通过克隆嵌入repo的flutter desktop并将<code class="fe ny nz oa ob b">example/</code>的内容复制到一个新项目中而创建的。要获得本文示例项目代码的副本，请查看<a class="ae nr" href="https://github.com/kenreilly/flutter-desktop-example" rel="noopener ugc nofollow" target="_blank">这个repo </a>。</p><p id="dd3c" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">让我们来看看项目定义文件，<strong class="lw iu"> pubspec.yaml </strong>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="088e" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">对于这个和其他桌面嵌入式项目，需要一个最新版本的Flutter。除了一些示例字体之外，还包括了一个简单桌面插件的依赖项——一个原生颜色选择器。接下来，我们将检查这个简单的单屏幕演示应用程序的Dart代码。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="2bc7" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">应用程序入口点</h2><p id="9ef9" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">这个应用程序的主文件是标准发布的<strong class="lw iu"> lib/main.dart </strong>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="84de" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated"><code class="fe ny nz oa ob b">main()</code>函数引导应用程序，并将默认调试目标平台设置为<em class="nx"> fuchsia，</em>这是Google 正在开发的一个<a class="ae nr" href="https://fuchsia.dev" rel="noopener ugc nofollow" target="_blank">操作系统，包括一个用Dart和Flutter构建的UI。类<code class="fe ny nz oa ob b">MyApp</code>是</a><a class="ae nr" href="https://api.flutter.dev/flutter/widgets/StatelessWidget-class.html" rel="noopener ugc nofollow" target="_blank"> StatelessWidget </a>的基本实现，它返回应用程序本身的主容器，带有任何Flutter应用程序的标题、主题和主窗口小部件标准。</p><p id="e16a" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">请注意属性<code class="fe ny nz oa ob b">darkTheme</code>和它的值<code class="fe ny nz oa ob b">ThemeData.dark()</code>，当操作系统请求时，它提供一个黑暗主题，就像在启用了系统范围黑暗主题的macOS中一样。接下来，我们将看看示例页面的内容及其功能。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="79ea" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">主屏幕</h2><p id="b9ee" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">这个简单演示的大部分应用程序内容位于<strong class="lw iu"> lib/home.dart </strong>中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="d1d5" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated"><code class="fe ny nz oa ob b">Home</code>类导入了几个包(包括<code class="fe ny nz oa ob b"><em class="nx">color_panel</em></code>插件)并实现了一个带有后台<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/State-class.html" rel="noopener ugc nofollow" target="_blank">状态</a>的<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html" rel="noopener ugc nofollow" target="_blank"> StatefulWidget </a>，以允许这个屏幕存储和更新应用程序状态。Dart和Flutter提供了使用各种工具和模式管理状态的强大功能，其中最简单的是一个有状态的小部件，如本文件所示。</p><p id="7c1e" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">在这个小部件的状态上管理的属性包括一个<em class="nx">颜色</em>和<em class="nx">计数器。</em>方法<code class="fe ny nz oa ob b">_increment</code>和<code class="fe ny nz oa ob b">_decrement</code>利用<code class="fe ny nz oa ob b">setState</code>方法来递增或递减<em class="nx">计数器</em>。<code class="fe ny nz oa ob b">_showPanel</code>方法从导入的插件中请求一个ColorPanel实例，然后对其调用<code class="fe ny nz oa ob b">show</code>，这将从操作系统请求一个本机颜色选择器。当选择一种颜色时，<code class="fe ny nz oa ob b">setState</code>被用来用一种新颜色更新小部件的状态，这将使它排队等待由Flutter引擎重画。</p><p id="f479" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">这个小部件的<code class="fe ny nz oa ob b">build</code>方法设置主题和样式数据，并从平台类请求操作系统名称、本地主机名和处理器内核数量。这些可以直接在指定为final的属性上初始化，甚至可以放入外部文件中作为服务使用，但是为了简单起见，对于这个演示应用程序，它们是放在小部件的<code class="fe ny nz oa ob b">build</code>方法中的局部变量。</p><p id="72dd" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">由<code class="fe ny nz oa ob b">build</code>方法返回的小部件是一个<a class="ae nr" href="https://api.flutter.dev/flutter/material/Scaffold-class.html" rel="noopener ugc nofollow" target="_blank">脚手架</a>，带有一个<a class="ae nr" href="https://api.flutter.dev/flutter/material/AppBar-class.html" rel="noopener ugc nofollow" target="_blank"> AppBar </a>和一个由两列水平行组成的主体。第一列(左侧)包含一些按钮，这些按钮映射到上面描述的增量、减量和颜色选择方法。第二列显示先前收集的本地机器信息以及计数器，颜色由用户选择(如果尚未选择，则为默认颜色)。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="f843" class="ky kz it bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h2><p id="a721" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc lh md me mf ll mg mh mi lp mj mk ml mm im bi translated">Flutter桌面嵌入正在积极开发中，并将在未来几个月和几年内继续改进，为那些想要构建桌面应用程序的人提供移动开发人员所享受的同样优秀的UI开发体验。在不久的将来，更多的插件将会出现，随着时间的推移，更深层次的操作系统集成也将会出现。</p><p id="cffa" class="pw-post-body-paragraph lu lv it lw b lx mw ju lz ma mx jx mc lh my me mf ll mz mh mi lp na mk ml mm im bi translated">感谢您的阅读，祝您的下一个颤振项目好运！</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><blockquote class="oe"><p id="b4c3" class="of og it bd oh oi oj ok ol om on mm dk translated">肯尼斯·雷利(<a class="ae nr" href="https://twitter.com/8_bit_hacker" rel="noopener ugc nofollow" target="_blank"> 8_bit_hacker </a>)是<a class="ae nr" href="https://lvl-up.tech" rel="noopener ugc nofollow" target="_blank"> LevelUP </a>的CTO</p></blockquote></div></div>    
</body>
</html>