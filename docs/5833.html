<html>
<head>
<title>Android CodeView: Highlight search result in List Items</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android CodeView:在列表项中突出显示搜索结果</h1>
<blockquote>原文：<a href="https://itnext.io/android-codeview-highlight-search-result-in-list-items-b7e4c9fb57d8?source=collection_archive---------1-----------------------#2021-06-05">https://itnext.io/android-codeview-highlight-search-result-in-list-items-b7e4c9fb57d8?source=collection_archive---------1-----------------------#2021-06-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/200b219edf01e6a9379556e5ae19eadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ge8E4AuOPgEVeWTo28FTpw.png"/></div></div></figure><p id="bb97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开发者们好，在我发表的关于如何使用CodeView创建自己的代码编辑器的前两篇文章中，你可以从<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/android-codeview-an-easy-way-to-create-code-editor-app-5d67c3534f84"> <strong class="ka ir">这里</strong> </a>阅读，关于可以使用CodeView实现的许多功能，例如突出显示段落中的文本，还可以突出显示标签、电子邮件、URL，你可以从<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/android-codeview-the-easiest-way-to-highlight-patterns-53702e0e2164"> <strong class="ka ir">这里</strong> </a>阅读。</p><p id="82b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇文章中，我将向您展示如何使用CodeView来突出显示列表项中的搜索结果，例如RecyclerView、GridView或ListView项，它具有许多功能，我们的最终结果将是这样的，所以让我们开始编码。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/f73c5c591ad869eef86d1e77e7c69afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/1*6LJnJ6inv1U1Xh0GPj9fwA.gif"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">突出显示搜索结果</figcaption></figure><p id="90ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">CodeView使每个人都容易实现突出显示功能，我会留下来设计你的列表项和你的应用程序颜色来选择你喜欢的，我们的工作将在适配器和SearchView搜索查询更新时进行。</p><p id="7999" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在您的适配器中，您需要创建包含搜索模式的全局变量，如果它等于null，这意味着我们不需要突出显示任何内容，以及Color对象来存储突出显示的关键字的颜色，我们将使其默认为<em class="lg"> MAGENTA </em>，您可以创建setter方法来随时更改它，或者取决于您的应用程序主题。</p><pre class="ky kz la lb gt lh li lj lk aw ll bi"><span id="bef7" class="lm ln iq li b gy lo lp l lq lr">private Pattern syntaxPattern;<br/>private Color highlightColor = Color.<em class="lg">MAGENTA</em>;</span></pre><p id="245b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将创建setter方法来根据搜索关键字更新当前模式。</p><pre class="ky kz la lb gt lh li lj lk aw ll bi"><span id="afbb" class="lm ln iq li b gy lo lp l lq lr">public void updateSyntaxPattern(Pattern pattern) {<br/>    syntaxPattern = pattern;<br/>    notifyDataSetChanged();<br/>}</span></pre><p id="d5b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你为每个条目设置文本时，依赖于你的适配器，例如在getView方法中的ArrayAdapter和在你的holder中的RecyclerViewAdapter等等。</p><p id="50c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将简单地检查我们的模式是否不为空，并将它添加到带有颜色的CodeView实例中，但是请记住，我们需要清除上次搜索中的模式，因此代码将如下所示。</p><pre class="ky kz la lb gt lh li lj lk aw ll bi"><span id="322c" class="lm ln iq li b gy lo lp l lq lr">if(syntaxPattern != null) {<br/>    codeView.resetSyntaxPatternList();<br/>    codeView.addSyntaxPattern(syntaxPattern, highlightColor);<br/>}</span></pre><p id="da47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们在适配器中完成了，让我们转到SearchView，您必须有两个方法来使用onQueryTextSubmit和onQueryTextChange，这取决于您希望荧光笔何时工作，您将选择其中一个，然后通过使用适配器中的out helper方法来设置模式，因此代码将如下所示，</p><pre class="ky kz la lb gt lh li lj lk aw ll bi"><span id="3875" class="lm ln iq li b gy lo lp l lq lr">Pattern pattern = Pattern.<em class="lg">compile</em>(query);<br/>adapter.updateSyntaxPattern(pattern);</span></pre><p id="c921" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，现在我们的功能完成了，你可以扩展它并添加额外的功能，比如多个荧光笔，或者在运行时改变颜色以支持多个主题…等等。</p><p id="f026" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它非常容易使用，有据可查，在GitHub上有很多例子你可以从GitHub链接中知道如何下载和使用:<br/><a class="ae kw" href="https://github.com/amrdeveloper/codeview" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">https://github.com/amrdeveloper/codeview</strong></a></p><p id="4b54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你会喜欢用CodeView创建你的编辑器😋。</p><p id="215d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae kw" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Github</strong></a><a class="ae kw" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Linkedin</strong></a><a class="ae kw" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Twitter</strong></a>上找到我。</p><p id="04a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受编程😋。</p></div></div>    
</body>
</html>