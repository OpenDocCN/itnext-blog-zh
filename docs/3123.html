<html>
<head>
<title>Publish a .NET Core Worker Service to Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将. NET核心工作服务发布到Azure</h1>
<blockquote>原文：<a href="https://itnext.io/publish-a-net-core-worker-service-to-azure-26059a75abd2?source=collection_archive---------8-----------------------#2019-10-07">https://itnext.io/publish-a-net-core-worker-service-to-azure-26059a75abd2?source=collection_archive---------8-----------------------#2019-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d751" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上周的帖子里，<a class="ae kl" href="https://elanderson.net/2019/09/net-core-worker-service/" rel="noopener ugc nofollow" target="_blank">。NET核心工作者服务</a>，我们创建了一个. NET核心工作者服务，然后展示了如何将它作为一个Windows服务来托管。本周我们将把上周文章中创建的应用程序发布到Azure。如果你还没有读上周的帖子，我建议你至少读完应用程序创建部分。请随意跳过让应用程序作为Windows服务运行的部分，因为我们将在Azure上发布这篇文章。</p><h2 id="edb5" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">发布到Azure</h2><p id="568a" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">这篇文章假设你已经有一个有效的Azure账户。如果没有，你可以注册一个<a class="ae kl" href="https://azure.microsoft.com/en-us/free/" rel="noopener ugc nofollow" target="_blank">免费Azure账户</a>。这篇文章还将使用<a class="ae kl" href="https://visualstudio.microsoft.com/vs/preview/" rel="noopener ugc nofollow" target="_blank"> Visual Studio 2019预览版</a>进行发布。</p><p id="e8dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Visual Studio中右键单击项目，然后单击<strong class="jp ir">发布</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/b93d8e28329eabce6c9ca6d4e8e51b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/0*n0rI8_VOh6ycChYr.png"/></div></figure><p id="b4d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为这个项目已经有了一个文件夹发布设置，所以我的截图可能和你的不一样。点击<strong class="jp ir">新建</strong>链接。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/cf7f9041e0c6940fabc8b61cdf50e5ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pIuU0Fhm1MDxOXpm.png"/></div></div></figure><p id="c189" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将启动发布配置文件对话框。我们将使用<strong class="jp ir">创建新的</strong>选项发布到<strong class="jp ir"> Azure WebJobs </strong>。验证设置正确后，点击<strong class="jp ir">创建配置文件</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lx"><img src="../Images/8aa64dee913eba580f1af41249ec661c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KPqv01Znn8hGrZrr.png"/></div></div></figure><p id="4cc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个屏幕显示将要创建的应用服务的详细信息。我做了一个新的资源组，而不是使用默认的资源组和一个新的托管计划，这样我就可以利用免费层，但这两个更改都是可选的。当你设置好一切后，点击<strong class="jp ir">创建</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lx"><img src="../Images/57f73b6db357f4ab632cbaad2a7ee514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DisHeCG24erWgzn8.png"/></div></div></figure><p id="e716" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击create后，需要几分钟来部署应用程序。这第一次部署对我们来说将是一次性的。我们需要调整一些设置，让应用程序按照我们想要的方式运行。初始部署完成后，我们将返回到配置文件详细信息屏幕。点击<strong class="jp ir">编辑</strong>链接。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/ab316fd24f548499688d5901c3af754d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wMWG8C-7OAG_BhzD.png"/></div></div></figure><p id="9943" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将显示“发布配置文件设置”对话框。因为这是在。NET Core 3仍在预览中，我正在使用<strong class="jp ir">部署模式</strong>的<strong class="jp ir">独立</strong>选项。如果您是在最终版本发布后进行的，那么您可以跳过这一步。我要更改的第二件事是<strong class="jp ir"> WebJob类型</strong>，我将它设置为<strong class="jp ir">连续</strong>。这是因为我们的服务正在控制自己的工作时间表，而不是被其他事情触发。点击<strong class="jp ir">保存</strong>提交更改并返回发布对话框。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/1286086b4aeca88cc60afcc3086d3fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o5KeoKsPb0F3PAGh.png"/></div></div></figure><p id="9305" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在按下<strong class="jp ir">发布</strong>按钮将应用程序推送到Azure。</p><h2 id="f260" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">使用Azure Portal验证应用程序正在工作</h2><p id="c1c0" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">既然我们的应用程序已经在Azure中运行，我们如何验证它实际上是按照我们的预期执行的呢？因为示例应用程序唯一做的事情是输出一些日志，所以我们必须找到一种方法来显示日志的输出。开始前往<a class="ae kl" href="https://portal.azure.com" rel="noopener ugc nofollow" target="_blank">蔚蓝门户</a>。由于我们刚刚发布了应用程序，我们感兴趣的资源应该会显示在Azure门户主页的<strong class="jp ir">最近资源</strong>部分。正如您在截图中看到的，我们感兴趣的是第一个选项，它与我们在Visual Studio中看到的名称相匹配。单击资源。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/3aaae85ad5973b334f1da98749109c19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zwS6a--F9V38XWrY.png"/></div></div></figure><p id="a126" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从菜单部分向下滚动到<strong class="jp ir">监控</strong>部分，并点击<strong class="jp ir">应用服务日志</strong>。现在打开上的<strong class="jp ir">选项，用于<strong class="jp ir">应用程序日志(文件系统)</strong>和<strong class="jp ir">级别</strong>选项，选择<strong class="jp ir">信息</strong>，因为这是我们的示例应用程序正在输出的日志级别。然后点击<strong class="jp ir">保存</strong>。</strong></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/4decc95739e4e77d460393e3edb1e6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BlbT4k6bhU1dPu4A.png"/></div></div></figure><p id="c5c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到同一个<strong class="jp ir">监控菜单中的</strong>组选择<strong class="jp ir">日志流</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/4959cd3ca9a26148dd98ad19038733e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*658sKbDtEhWvk0m9.png"/></div></div></figure><h2 id="a6d4" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="7786" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">在Azure中运行一个工人变得非常简单。并不是说我对微软倾向于让他们的所有产品都能很好地与Azure兼容感到惊讶。我相信你会找到一个比我们在这个例子中更有用的方法。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><p id="aa75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">原载于</em> <a class="ae kl" href="https://elanderson.net/2019/10/publish-a-net-core-worker-service-to-azure/" rel="noopener ugc nofollow" target="_blank"> <em class="mf">埃里克·安德森</em> </a> <em class="mf">。</em></p></div></div>    
</body>
</html>