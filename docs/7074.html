<html>
<head>
<title>Returning a value from Jenkins job</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Jenkins作业返回值</h1>
<blockquote>原文：<a href="https://itnext.io/returning-a-value-from-jenkins-job-7eefe5f537e9?source=collection_archive---------0-----------------------#2022-06-02">https://itnext.io/returning-a-value-from-jenkins-job-7eefe5f537e9?source=collection_archive---------0-----------------------#2022-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/014d2883ed6c3f5c21be31d1af7d993d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*es3vVAtQNIVQGilZsyxemw.jpeg"/></div></div></figure><p id="a887" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设我们有一个Jenkins管道作业，它创建了一个虚拟机并在其上安装了一个服务。</p><p id="4841" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将创建3个作业——一个将机器名和服务名作为参数，并调用第二个作业——来创建机器，第三个作业来安装服务。</p><p id="6be7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第三个作业需要机器IP来安装服务，因此创建虚拟机的第二个作业需要返回机器IP。</p><p id="5c20" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最近我发现使用环境变量是可能的。下游作业完成后，我们可以通过<br/> b.getBuildVariables()来访问它的变量</p><p id="7d36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">詹金斯文件的第一项，“主要”工作:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="6a06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Jenkins文件的第二个“创建虚拟机”作业:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="1ae0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样我们就可以从下游的Jenkins作业返回任意数量的值，并在链中的下一个作业中使用它！</p><p id="2105" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尽情享受吧！</p></div></div>    
</body>
</html>