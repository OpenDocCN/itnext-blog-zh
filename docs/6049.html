<html>
<head>
<title>Develop your first decentralized e-commerce application with Python Flask and MetaMask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python Flask和MetaMask开发您的第一个去中心化电子商务应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/develop-your-first-decentralized-e-commerce-application-with-python-flask-and-metamask-96d9344e415d?source=collection_archive---------0-----------------------#2021-08-02">https://itnext.io/develop-your-first-decentralized-e-commerce-application-with-python-flask-and-metamask-96d9344e415d?source=collection_archive---------0-----------------------#2021-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/cb1db4c7843a328292e9d5e0a424f4bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*H21zQGeXIpuhCtNL.png"/></div></figure><p id="95d5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在之前的<a class="ae ks" href="http://blog.adnansiddiqi.me/build-your-first-solidity-dapp-with-web3-js-and-metamask/" rel="noopener ugc nofollow" target="_blank">帖子</a>中，我讨论过如何使用MetaMask和Web3.js库来创建区块链应用的前端。在这篇文章中，我将进一步讨论如何通过使用Python Flask作为后端和MetaMask库来创建一个分散的电子商务网站，以便在您的网站上接受ETH。我们典型的演示网站如下所示:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/4bd203dd5859f11b1c4ca689842fce56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/1*Hjw2sz517NI9tSXuhNo2qg.gif"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">dapp商务在行动</figcaption></figure><p id="8178" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">除了告诉您现有的后端应用程序如何开始接受以太坊和其他ERC20令牌，<strong class="jw ir"> <em class="lc">我想指出的一点是，您并不总是需要智能合约或web3.js库来使您的应用程序成为分散的应用程序(根据d app的当前定义)。</em> </strong></p><p id="797e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我制作的web应用程序使用了用于数据库目的的<strong class="jw ir"> <em class="lc"> Flask 2 </em> </strong>库和Sqlite3。</p><p id="4363" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我不打算教如何开发Flask应用程序，你可以查看其他教程。我将讨论如何通过MetaMask将您的web应用程序与以太坊节点(在本例中为Ganache)集成，并开始在您的网站上接受令牌。</p><p id="f177" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当你打开主页时，它要求你连接你的钱包。连接后，您会看到您的钱包已连接到网站。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/e2199943e4735984a8a719f58d267842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BM72E0FzBR2Z8J_j.png"/></div></div></figure><p id="8e4b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe li lj lk ll b">$(document).ready()</code>函数包含检测元掩码和注册<em class="lc">购买</em>按钮的<em class="lc">点击</em>事件的代码。在HTML中，我使用数据属性，<code class="fe li lj lk ll b">data-</code>来传递所需的信息。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/55686195cf25e3515658606800c65e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1wsEr-mZChzmxNZ2.png"/></div></div></figure><p id="b4ce" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在Javascript中，我通过JQuery在<em class="lc"> click </em>事件上获取这些值。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lm"><img src="../Images/f1e4f591200780e160d1a1c44ba5563d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C8XnFfFcLXC7SWlP.png"/></div></div></figure><p id="46f7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我使用<a class="ae ks" href="https://www.jsdelivr.com/package/npm/ethjs-unit" rel="noopener ugc nofollow" target="_blank"> etjs-unit </a>库将<em class="lc"> Eth </em>转换为<em class="lc"> Wei。</em></p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/98289010e9128a59cbbe7dba9529da8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zzSlhY2MRZazXP__.png"/></div></div></figure><p id="7e44" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首先我用<code class="fe li lj lk ll b">ethUnit.toWei</code>把一个单位乙醚转换成魏，也就是后来我把它转换成了十六进制。我这样做是因为<em class="lc">元掩码</em>事务函数需要所有十六进制数据。我还生成一个发票ID，并在每笔交易中传递该信息。这是非常重要的，因为它将有助于你在审计。</p><p id="85c4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我将构建一个常量<em class="lc"> dict </em>对象，它包含与事务相关的所有信息:</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/9a64af8bc5d29eee01c612e7584bc644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ksco4hf-vE_y17Kq.png"/></div></div></figure><p id="e179" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我从MetaMask <a class="ae ks" href="https://docs.metamask.io/guide/sending-transactions.html" rel="noopener ugc nofollow" target="_blank">文档</a>中提取了代码。您可以设置大多数参数，有些参数在MetaMask界面中可用并可编辑，例如<em class="lc">气体</em>量。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/fd89102e63f581cea4292c69109c1cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Jcagit0Xj1-hj2fB.png"/></div></div></figure><p id="addd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上面的承诺实际上调用了元掩码接口。如果您进行交易，那么像交易散列这样的信息对您是可用的。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/8dd00563610cd9a01e2deccb9fc5dc21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/0*xUYAmolJqMQ8kU9q.png"/></div></figure><p id="79af" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上面的屏幕是根据您在上面的变量中设置的参数构建的。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/00199bddb6252671bd876e48fd2ad5f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/0*LpZgppb1sYd02XHz.png"/></div></figure><p id="05fd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我设置的数据参数，在本例中是发票ID，也存储在这里。当一个交易成功时，它被记录在区块链中，在这种情况下，Ganache包含所有的数据(<em class="lc">注:您在下面看到的数据来自上一个交易</em>)。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/51e985c41311e0c23b893edf145a3240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qh2xP_uU4Cggy4ke.png"/></div></div></figure><p id="5898" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以看到TX散列，ETH数量，Gash价格和消耗，以及Tx数据，所有信息都在这里给出。顾客钱包中的金额被转移到商家钱包地址。客户可以在<em class="lc">订单历史</em>中看到所有这些信息。</p><figure class="ku kv kw kx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/75f4708a6d40561e55bd6e6ed08f8d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZUUWjf75glbZcEmC.png"/></div></div></figure><h1 id="59fa" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="2f29" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">如你所见，将以太坊区块链集成到你的电子商务网站并开始接受支付是非常简单的。该代码可在<a class="ae ks" href="https://github.com/kadnan/PythonFlaskDecentralizedEcommerce" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="adf3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="lc">原载于2021年8月2日</em><a class="ae ks" href="http://blog.adnansiddiqi.me/develop-your-first-decentralized-ecommerce-application-with-python-flask-and-metamask/" rel="noopener ugc nofollow" target="_blank"><em class="lc">http://blog . adnansiddiqi . me</em></a><em class="lc">。</em></p></div></div>    
</body>
</html>