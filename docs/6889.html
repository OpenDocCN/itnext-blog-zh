<html>
<head>
<title>Creating A Modern Python Development Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建现代Python开发环境</h1>
<blockquote>原文：<a href="https://itnext.io/creating-a-modern-python-development-environment-3d383c944877?source=collection_archive---------0-----------------------#2022-04-04">https://itnext.io/creating-a-modern-python-development-environment-3d383c944877?source=collection_archive---------0-----------------------#2022-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c611fcecaf4feb8f0f1e0ffa0d35de4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6mawimDo0ztAtm1TMvXrw.png"/></div></div></figure><p id="6711" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为一名Python开发人员，在过去的几年里，我收集了一份我最喜欢的包/工具的列表，我几乎在每个项目中都使用它们。开发是一项团队工作，在某些时候，有人必须阅读和/或修改你写的代码。如果代码实现得不好，而开发人员要实现一个新的特性或错误修复，这很可能会导致额外的技术债务。所以我喜欢强制开发者(<em class="kw">包括我自己</em>😉)来产生可测试的、可维护的、可读的、最重要的是一致的代码，否则，它会被拒绝。这导致软件开发过程更加顺利，因为他们将在相同的可靠代码上工作。</p><p id="21d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇博文展示了我如何在Unix和Windows系统上使用pyenv和poems设置和配置我的Python开发环境，以生成相同的一致代码，帮助避免技术债务。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="cc3d" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">安装pyenv </strong>🐍</h1><p id="518c" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">从官方二进制文件下载和安装Python会将您限制在一个特定的Python版本上，如果您使用不同的Python版本处理多个项目，这不是一件好事。因此，最好使用<a class="ae mh" href="https://github.com/pyenv/pyenv" rel="noopener ugc nofollow" target="_blank"> pyenv </a>，这个工具可以让你在多个版本的Python之间轻松切换。</p><h2 id="64ee" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">Windows安装</h2><p id="041d" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">对于Windows用户，我建议您安装<a class="ae mh" href="https://docs.microsoft.com/en-us/windows/wsl/install" rel="noopener ugc nofollow" target="_blank"> WSL2 </a>，这是一个<a class="ae mh" href="https://docs.microsoft.com/en-us/windows/wsl/about#:~:text=The%20Windows%20Subsystem%20for%20Linux%20lets%20developers%20run%20a%20GNU/Linux%20environment%20%2D%2D%20including%20most%20command%2Dline%20tools%2C%20utilities%2C%20and%20applications%20%2D%2D%20directly%20on%20Windows%2C%20unmodified%2C%20without%20the%20overhead%20of%20a%20traditional%20virtual%20machine%20or%20dualboot%20setup." rel="noopener ugc nofollow" target="_blank"> Windows子系统，它让开发人员可以在没有传统虚拟机或双引导设置</a>开销的情况下运行Linux环境。您可以通过在PowerShell或命令提示符下执行以下命令来安装WSL2:</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/e80f47d8751da446d3ee4107fd49ba4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YLKypOE2mFwP2NCTaLXdVQ.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">WSL2安装命令。</figcaption></figure><p id="a7e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你不想使用WSL2，你可以安装<a class="ae mh" href="https://github.com/pyenv-win/pyenv-win" rel="noopener ugc nofollow" target="_blank"> pyenv-win </a>，<em class="kw">一个不太现代的方法</em>并跳到<strong class="ka ir">用pyenv设置Python版本</strong>一节。</p><p id="f1cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装后在Windows上搜索Ubuntu(WSL终端)并打开它。它将向您展示一个bash shell，并要求您提供用户名和密码。一旦它们被设置好，你的终端就可以进行修补了🔨！</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="aad6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在安装pyenv之前，您需要更新您的环境并安装一些构建依赖项<em class="kw">(如果您还没有的话)。</em>打开终端，执行以下命令:</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="3691" class="mi lf iq ne b gy ni nj l nk nl">&gt; sudo apt update &amp;&amp; sudo apt upgrade<br/>&gt; sudo apt install -y build-essential git curl libexpat1-dev libssl-dev zlib1g-dev libncurses5-dev libbz2-dev liblzma-dev libsqlite3-dev libffi-dev tcl-dev linux-headers-generic libgdbm-dev libreadline-dev tk tk-dev</span></pre><p id="a5d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">pyenv现在可以安装和配置了<em class="kw">(告诉您的终端pyenv在哪里):</em></p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="15a5" class="mi lf iq ne b gy ni nj l nk nl">&gt; curl https://pyenv.run | bash</span><span id="5197" class="mi lf iq ne b gy nm nj l nk nl">&gt; echo '\nexport PATH="$HOME/.pyenv/bin:$PATH"' &gt;&gt; ~/.bashrc<br/>&gt; echo '\neval "$(pyenv init -)"' &gt;&gt; ~/.bashrc<br/>&gt; echo '\neval "$(pyenv init --path)"' &gt;&gt; ~/.bashrc</span><span id="c344" class="mi lf iq ne b gy nm nj l nk nl">&gt; source ~/.bashrc</span><span id="d6e5" class="mi lf iq ne b gy nm nj l nk nl"># Confirm successful installation:<br/>&gt; pyenv --version<br/>pyenv 2.2.5 # Your version will likely be newer.</span></pre><h2 id="e0c4" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">用pyenv设置Python版本</h2><p id="5823" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">成功安装pyenv后，使用以下命令设置您的全局Python版本:</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="76aa" class="mi lf iq ne b gy ni nj l nk nl"># Install the required Python version:<br/>&gt; pyenv install 3.9.0</span><span id="0dd0" class="mi lf iq ne b gy nm nj l nk nl"># Refresh pyenv since you installed a new Python version:<br/>&gt; pyenv rehash</span><span id="c231" class="mi lf iq ne b gy nm nj l nk nl"># Set your global Python version:<br/>&gt; pyenv global 3.9.0</span><span id="c5de" class="mi lf iq ne b gy nm nj l nk nl"># You can also set the local Python version, i.e. for a project:<br/># &gt; pyenv local 3.9.0</span><span id="556d" class="mi lf iq ne b gy nm nj l nk nl"># Confirm Python version:<br/>&gt; pyenv version<br/>3.9.0 (set by /home/wsl/.pyenv/version)</span></pre><p id="ba28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您需要Python的另一个版本，您可以简单地用不同的版本号执行相同的命令🤗。</p><h1 id="e652" class="le lf iq bd lg lh nn lj lk ll no ln lo lp np lr ls lt nq lv lw lx nr lz ma mb bi translated">装置诗歌📜</h1><p id="b7b7" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">Python中的打包系统和依赖性管理相当复杂，新手很难理解。即使对于经验丰富的开发人员来说，创建Python项目中所需的所有文件有时也很麻烦。<a class="ae mh" href="https://github.com/python-poetry/poetry" rel="noopener ugc nofollow" target="_blank">poems</a>帮助你声明、管理和安装Python项目的依赖，确保你在任何地方都有正确的栈。它自动为每个项目创建隔离的环境，防止修改另一个项目中的依赖关系。</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="691d" class="mi lf iq ne b gy ni nj l nk nl">&gt; pyenv shell 3.9.0</span><span id="503f" class="mi lf iq ne b gy nm nj l nk nl">&gt; curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -</span><span id="dd7e" class="mi lf iq ne b gy nm nj l nk nl">&gt; source ~/.bashrc</span><span id="7dc5" class="mi lf iq ne b gy nm nj l nk nl"># Confirm installation was successful:<br/>&gt; poetry --version<br/>Poetry version 1.1.13 # Your version will likely be newer.</span></pre><h1 id="5ec6" class="le lf iq bd lg lh nn lj lk ll no ln lo lp np lr ls lt nq lv lw lx nr lz ma mb bi translated">编辑器配置</h1><p id="91f8" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated"><a class="ae mh" href="https://editorconfig.org/" rel="noopener ugc nofollow" target="_blank"> EditorConfig </a>有助于跨不同编辑器和集成开发环境(IDE)为从事同一项目的多个开发人员保持一致的编码风格。它通过读取项目顶层提供的<code class="fe ns nt nu ne b">.editorconfig</code>配置文件来工作。<a class="ae mh" href="https://editorconfig.org/#pre-installed" rel="noopener ugc nofollow" target="_blank">大多数ide都有内置支持</a>，但这里列出了需要插件的<a class="ae mh" href="https://editorconfig.org/#download" rel="noopener ugc nofollow" target="_blank">ide/编辑器</a>。</p><p id="212c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我在所有Python项目中使用的标准<code class="fe ns nt nu ne b">.editorconfig</code>文件:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">编辑器配置文件。</figcaption></figure><p id="72de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您的环境现在已经准备好创建现代Python项目🥳.了</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="9dfc" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建和配置Python项目⚙️</h1><p id="d266" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">以下说明如何使用pyenv和poem手动<em class="kw">创建和配置Python项目。</em></p><p id="0ab7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建新的Python项目，您需要使用pyenv指定Python版本，然后使用poem创建项目。</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="3904" class="mi lf iq ne b gy ni nj l nk nl">&gt; pyenv shell 3.9.11<br/>&gt; poetry new PROJECT_NAME # Example testproject<br/>&gt; cd testproject<br/>&gt; git init # Initialise the repository</span></pre><p id="2c0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，创建上面提供的<code class="fe ns nt nu ne b">.editorconfig</code>配置。您的项目树结构应该如下所示:</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="9154" class="mi lf iq ne b gy ni nj l nk nl">&gt; tree</span><span id="d70a" class="mi lf iq ne b gy nm nj l nk nl">.<br/>├── .editorconfig<br/>├── .git<br/>│   ├── ...<br/>├── README.rst<br/>├── pyproject.toml<br/>├── testproject<br/>│   └── __init__.py<br/>└── tests<br/>    ├── __init__.py<br/>    └── test_testproject.py</span><span id="5261" class="mi lf iq ne b gy nm nj l nk nl">12 directories, 22 files</span></pre><p id="5cf0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就我个人而言，我更喜欢Markdown而不是reStructuredText，所以我把<code class="fe ns nt nu ne b">README.rst</code>改名为<code class="fe ns nt nu ne b">README.md</code>。所有的应用程序逻辑都放在以您的项目命名的文件夹中，而<em class="kw">测试放在tests文件夹</em>中。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/06a0940ef62372dec3932265a6c9b388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aweX40JvPGoFG-CXbL6dhg.gif"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">使用pyenv和诗歌创建Python项目的示例。</figcaption></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="6b01" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我的基本Python包📦</h1><p id="096d" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">这一节详细介绍了我在Python项目中使用的大多数开发包(<em class="kw">包，只在开发阶段</em>需要)。</p><h2 id="073d" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">带有pytest-cov的pytest</h2><p id="30bc" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">pytest 框架使得编写小测试变得容易，同时也支持应用程序和库的复杂功能测试。与内置的unittest库相比，我更喜欢pytest，因为它支持诸如<a class="ae mh" href="http://pypi.python.org/pypi/pytest-xdist" rel="noopener ugc nofollow" target="_blank"> pytest-xdist </a>这样的插件，可以一次执行多个测试，加快测试运行时间，并且生成与unittest相同的输出需要更少的代码行。此外，<a class="ae mh" href="https://pypi.org/project/pytest-cov/" rel="noopener ugc nofollow" target="_blank"> pytest-cov </a>是一个插件，可以自动生成测试覆盖报告。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/ebf618cb1530c7cb86e5d7705dda5cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNzAYtq0KQtZ2eRJV1Ja9A.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">安装开发依赖pytest和pytest-cov with poem。</figcaption></figure><h2 id="ffb4" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">wemake-python-styleguide</h2><p id="a061" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">wemake.services团队将<a class="ae mh" href="https://wemake-python-stylegui.de/en/latest/" rel="noopener ugc nofollow" target="_blank">we make-Python-style guide</a>描述为<a class="ae mh" href="https://wemake-python-stylegui.de/en/latest/#:~:text=strictest%20and%20most%20opinionated%20Python%20linter%20ever." rel="noopener ugc nofollow" target="_blank"> <em class="kw">有史以来最严格、最固执己见的Python linter</em></a>。它本质上是<a class="ae mh" href="https://github.com/PyCQA/flake8" rel="noopener ugc nofollow" target="_blank"> flake8 </a>包，一个分析代码缺陷的林挺工具，带有<a class="ae mh" href="https://wemake-python-stylegui.de/en/latest/pages/usage/violations/index.html#external-plugins" rel="noopener ugc nofollow" target="_blank">插件</a>。其主要目标是:</p><ul class=""><li id="77c8" class="nz oa iq ka b kb kc kf kg kj ob kn oc kr od kv oe of og oh bi translated">强制使用Python 3.6+版本。</li><li id="05f8" class="nz oa iq ka b kb oi kf oj kj ok kn ol kr om kv oe of og oh bi translated">大大降低了代码的复杂性，使其更易于维护。</li><li id="1a25" class="nz oa iq ka b kb oi kf oj kj ok kn ol kr om kv oe of og oh bi translated">将“应该有一种——最好只有一种——显而易见的方法”规则应用到编码和命名风格中</li><li id="52e4" class="nz oa iq ka b kb oi kf oj kj ok kn ol kr om kv oe of og oh bi translated">保护开发人员避免可能的错误，并实施最佳实践。</li></ul><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/0cfabd818935d1d55f15e6cc9fc9431f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_s4XK2dXtKht1ytGcb5Lw.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">用诗歌安装开发依赖wemake-python-styleguide。</figcaption></figure><p id="60da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你正在使用pytest，我还会推荐<code class="fe ns nt nu ne b">flake8-pytest-style</code>插件。</p><p id="254e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于现有的项目，您可以使用带有基线特性的软件包<a class="ae mh" href="https://github.com/flakehell/flakehell" rel="noopener ugc nofollow" target="_blank"> flakehell </a>来报告新的违规，因为集成一个新的linter可能会导致数百甚至数千个违规。这份<a class="ae mh" href="https://wemake-python-stylegui.de/en/latest/pages/usage/integrations/flakehell.html" rel="noopener ugc nofollow" target="_blank">指南</a>解释了如何整合flakehell并逐步解决违规问题。</p><h2 id="78b5" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">Mypy</h2><p id="2d13" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated"><a class="ae mh" href="https://github.com/python/mypy" rel="noopener ugc nofollow" target="_blank"> Mypy </a>是一个可选的静态类型检查器，旨在结合动态(或“鸭子”)类型化和静态类型化的优点。静态类型代码的好处是增加了可读性和可维护性。对于现有的代码库，这里有一个关于如何实现Mypy的<a class="ae mh" href="https://mypy.readthedocs.io/en/stable/existing_code.html" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><div class="mv mw mx my gt ab cb"><figure class="on jr oo op oq or os paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/7bfd144660d17d19b0a998d45e9157bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*oT-Ai_iPXOA0hVWXbgVa0g.png"/></div></figure><figure class="on jr oo op oq or os paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/00de203720124887558d81406207cb5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*HcJ6c2PvbjKIGDoJ-jEklg.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk ot di ou ov translated">静态类型化Python代码之前和之后。</figcaption></figure></div><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/ea7248db2e810414d995aefa7f0d7a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRzO55GWEfs2PrtYQB1Ixw.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">用诗歌安装开发依赖Mypy。</figcaption></figure><h2 id="5fbf" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">安全</h2><p id="1806" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">Snyk的2021 <a class="ae mh" href="https://go.snyk.io/rs/677-THP-415/images/Python%20Insight%20Report.pdf" rel="noopener ugc nofollow" target="_blank">安全报告</a>指出，47%的Python项目包含已知的漏洞。另一方面，几乎87%的已知漏洞可以通过升级易受攻击的软件包来解决。<a class="ae mh" href="https://github.com/pyupio/safety" rel="noopener ugc nofollow" target="_blank">安全</a>检查您安装的依赖项是否存在已知的安全漏洞。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/7411c749f2e1072a68854a0c3a016fe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kyKIpi8f6zU-mj2z_1cVlg.gif"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">安全检测脆弱包装的示例。</figcaption></figure><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/1f1f20db614c50d129582f8fa122b7c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14LQ0nng0mFXuAbj3TgR8A.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">用诗歌安装开发依赖项安全。</figcaption></figure><h2 id="2829" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">预提交</h2><p id="ae3b" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated"><a class="ae mh" href="https://github.com/pre-commit/pre-commit" rel="noopener ugc nofollow" target="_blank">预提交</a>是一个管理和维护多语言预提交钩子的框架。例如，在代码提交到存储库之前，运行pytest的钩子必须成功，以防止代码缺陷。下面是我在Python项目中使用的预提交配置文件。<strong class="ka ir">确保代码提交前测试、覆盖、状态类型检查和漏洞扫描全部通过。</strong></p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/62d4ba542b0f2cc9c567830f8308be53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1Oj11ROFLa5DgvpJqGMhmQ.gif"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">防止提交有缺陷代码的预提交示例。</figcaption></figure><p id="eb69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是上例中使用的<code class="fe ns nt nu ne b">.pre-commit-config.yaml</code>文件:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">提交前配置文件。替换{PROJECT_NAME}。</figcaption></figure><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/6ff345b1d7c55995a80433e5222d53f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPR5SM_voDsUs-eXweL0ug.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">安装开发依赖项预提交。</figcaption></figure><h2 id="823c" class="mi lf iq bd lg mj mk dn lk ml mm dp lo kj mn mo ls kn mp mq lw kr mr ms ma mt bi translated">挑剔的</h2><p id="9ad5" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">跨项目维护配置可能会变得很乏味，尤其是因为EditorConfig、pytest-cov、flake8、Mypy和pre-commit都需要配置文件。是一个工具和flake8插件，在多个独立于语言的项目中执行相同的配置，自动化这种繁琐的配置。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/e5613c1a628eca91b079d82409656271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4uqnkUuzixl0Dpxu5nUMgg.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">用诗歌安装开发依赖吹毛求疵。</figcaption></figure><p id="ca21" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装完成后，将下面一行添加到您的<code class="fe ns nt nu ne b">pyproject.toml</code>文件中:</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="78a2" class="mi lf iq ne b gy ni nj l nk nl"><strong class="ne ir">[tool.nitpick]</strong><br/>style = "https://raw.githubusercontent.com/wemake-services/wemake-python-styleguide/master/styles/nitpick-style-wemake.toml"</span></pre><p id="5dcf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您需要创建一个<code class="fe ns nt nu ne b">.gitignore</code>和<code class="fe ns nt nu ne b">CHANGELOG.md</code>文件来成功通过挑剔的验证。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/d320d1e08f76834ab70dc77390fb8d30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*STIxcv98BWdHNvHuwvWBWg.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">挑剔的配置设置。</figcaption></figure><p id="4849" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它将自动创建一个包含所有必需配置的<code class="fe ns nt nu ne b">setup.cfg</code>文件。</p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/34a8c068399347eaafdbe4fc885ca4d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UufwyUeqD5_DAxjC5viv0g.gif"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">挑剔的wemake-服务安装。</figcaption></figure><p id="9ab5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">祝贺您，您已经成功地创建了一个现代Python开发环境🎉。如果你想和我联系，你可以在<a class="ae mh" href="https://www.linkedin.com/in/shanenullain/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>或<a class="ae mh" href="https://github.com/ShaneNolan" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到我。感谢阅读😊！</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="bede" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">额外:VSCode WSL2集成</h1><p id="441d" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">如果您的编辑器是<a class="ae mh" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSCode </a>，那么您很幸运，因为您可以轻松地将Linux子系统与其<a class="ae mh" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl" rel="noopener ugc nofollow" target="_blank">远程WSL插件</a>集成在一起。安装完成后，打开WSL终端并执行<code class="fe ns nt nu ne b">code .</code>。这将自动打开Linux子系统中的VSCode编辑器。你可以在这里阅读更多关于它的<a class="ae mh" href="https://code.visualstudio.com/blogs/2019/09/03/wsl2" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="3bde" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">额外:自动化项目设置和配置</h1><p id="88ca" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">如果你和我一样，那么当你发现自己不止一次地做一件事时，你必须自动化它。我已经使用<a class="ae mh" href="https://github.com/cookiecutter/cookiecutter" rel="noopener ugc nofollow" target="_blank"> cookiecutter </a>自动化了现代Python项目的创建和配置。您需要首先设置您的环境。另外，挑剔使用了我自己对wemake-services配置的看法，你可以在这里查看<a class="ae mh" href="https://github.com/ShaneNolan/python-project-template" rel="noopener ugc nofollow" target="_blank">库</a>。</p><pre class="mv mw mx my gt nd ne nf ng aw nh bi"><span id="6bfb" class="mi lf iq ne b gy ni nj l nk nl">&gt; pyenv shell 3.9.11</span><span id="9d53" class="mi lf iq ne b gy nm nj l nk nl">---------------------------------------------<br/># Unix: Specify the name of the project.<br/>&gt; export PROJECT_NAME="MY_PROJECT_NAME"<br/>=============================================<br/># Windows: Specifcy the name of the project.<br/>&gt; set PROJECT_NAME="MY_PROJECT_NAME"<br/>---------------------------------------------<br/><br/>&gt; python -m pip install cookiecutter &amp;&amp;<br/>python -m cookiecutter --no-input gh:ShaneNolan/python-project-template \<br/>project_name=$PROJECT_NAME &amp;&amp;<br/>(cd $PROJECT_NAME &amp;&amp; git init &amp;&amp;<br/>poetry init --no-interaction --name $PROJECT_NAME &amp;&amp;<br/>poetry add mypy pytest pytest-cov flake8-pytest-style wemake-python-styleguide safety pre-commit nitpick --dev &amp;&amp;<br/>poetry run nitpick fix &amp;&amp;<br/>poetry run pre-commit install) &amp;&amp; python -m uninstall cookiecutter</span></pre><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/ff28721bca9ae9c5113d1ee0db011fe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GEJV8vWbVOGo4EjelQo1Eg.gif"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">自动化项目设置和配置的示例。</figcaption></figure></div></div>    
</body>
</html>