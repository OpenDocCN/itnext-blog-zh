<html>
<head>
<title>How to animate SVG signature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何制作SVG签名动画</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-animate-svg-signature-40adf8aa15c4?source=collection_archive---------6-----------------------#2020-01-09">https://itnext.io/how-to-animate-svg-signature-40adf8aa15c4?source=collection_archive---------6-----------------------#2020-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="b3ee" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">SVG动画</h2><div class=""/><div class=""><h2 id="bca6" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用JavaScript和CSS构建动画SVG签名</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/101c693810bbbc71221826281472328e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvXG5Np4gJ_fpXSxoNCcDg.jpeg"/></div></div></figure><p id="2a83" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">让我们看看如何用一点JavaScript和CSS来制作SVG签名动画。在这个演示中，我将向你展示如何使用JavaScript函数来计算SVG路径长度和CSS动画来制作SVG笔画动画。你可以在<a class="ae lw" href="https://www.silvestar.codes/about-me/" rel="noopener ugc nofollow" target="_blank">上看到关于页面</a>或<a class="ae lw" href="https://codepen.io/CiTA/full/abzJqQv" rel="noopener ugc nofollow" target="_blank"> CodePen </a>的最终结果。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lx"><img src="../Images/c3d10abe447001319bb90d64aef2b115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5pOzvEJ7IUEnJM1FoGd57Q.gif"/></div></div></figure><h1 id="fa09" class="ly lz iq bd ma mb mc md me mf mg mh mi kf mj kg mk ki ml kj mm kl mn km mo mp bi translated">SVG签名</h1><p id="abec" class="pw-post-body-paragraph la lb iq lc b ld mq ka lf lg mr kd li lj ms ll lm ln mt lp lq lr mu lt lu lv ij bi translated">让我们从创建一个SVG签名开始。我正在使用Sketch为字母创建SVG路径。这是它在编辑模式下的样子:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mv"><img src="../Images/62e3613475804fd52c0fd0d369feb47e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-wfeFnz4tSyNGF2ue5fgMw.png"/></div></div></figure><p id="57dc" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它包含用于不同签名路径的八个不同路径。例如，一条路径代表字母“S”，一条路径代表点，依此类推。</p><p id="61e3" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">一旦我从Sketch导出了SVG，我就按照我想要的方式重新排序路径:首先是字母“S ”,然后是点，然后是字母“B ”,依此类推。此外，我还添加了<code class="fe mw mx my mz b">autograph</code>和<code class="fe mw mx my mz b">autograph__path</code>类来简化JavaScript操作和样式。这是最终文件:</p><pre class="kp kq kr ks gt na mz nb nc aw nd bi"><span id="93e4" class="ne lz iq mz b gy nf ng l nh ni">&lt;svg class="autograph" height="103" viewBox="0 0 424 103" width="424" &gt;<br/>  &lt;g fill="none" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" transform="translate(2 2)"&gt;<br/>    &lt;path class="autograph__path"<br/>    d="m52.9053119 30.5944651c4.4979146-5.981029 6.3597765-11.3263744 5.5855855-16.0360361-2.1621621-13.15315311-10.9863929-13.558429-15.4908974-13.558429-10.0900901 0-20 7.99987048-20.7253188 13.558429-3.0543891 23.4076405 31.8852386 28.5472234 30.7253188 52.441571-.9009009 18.5585586-12.9740033 27.7974004-25 29-12.6126126 1.2612613-28.33708674-6.8576105-27-18 .48048048-4.004004 5.81381381-7.6706707 16-11" /&gt;<br/>    &lt;path class="autograph__path"<br/>    d="m61.9059048 93.3815042c1.7863267-3.215388-4.287184-4.6444494-4.6444494-1.4290614-.3572653 2.143592 2.8581227 4.6444494 4.6444494 1.4290614z" /&gt;<br/>    &lt;path class="autograph__path" d="m102 1c-1.633522 27.1862259-3.3001883 44.8528926-5 53s-7.033145 22.1471074-16 42" /&gt;<br/>    &lt;path class="autograph__path"<br/>    d="m100.288288 6.6036036c4.152508-3.963964 8.176532-5.945946 12.072072-5.945946 11.531532 0 17.63964 3.3423424 16.63964 14.3423424 0 13-12.06006 22.3543543-32 28 21.430945-5.8755744 31.400915 1.8721733 29.90991 23.2432432-1.081081 15.4954958-25.606607 24.6336338-48.90991 27.7567568 18.3783784-31.111111 44.546547-46.5975976 58-49 7.684578-1.3722461.201094 23.4415679-4 51 9.626744-23.6648293 10.754389-40.1268415 26.472991-48.7743243 3.062782-1.6849689 5.899902-2.8000991 9.527009-2.2256757 2.58117.4087788 5.287656.9554275 10 6-7-8-16.06468-6.1122883-19.527009-1.6121622-10.472991 13.6121622 15.527009 13.6121622 16.527009 29.6121622.666667 10.6666667-5.666667 16.3333333-19 17-16.664879 2.1642702 8.261928 6.47368 29-21 9.19448-12.1807945 18.19448-36.8474612 27-74-21.276288 33.987688-24.609621 65.6543547-10 95 21.886044-29.4751082 26.735893-49.2438774 35-51 9.609609-2.042042 6.726727 21.4504503 0 51 4.444444-39.2792794 18.42042-58.8078078 38-51-8.828829 2.1621621-15.315998 15.4560012-16.711712 28.1171176-1.126809 10.2217665 4.625073 22.8828824 11.711712 22.8828824 12.252252 0 19.279279-10.0010654 19.279279-20.5405401 0-23.0630631-9.234234-30.4594599-12.477477-30.4594599 12.432432 3.9639639 30.297297-6.8468469 31.198198 0 2.644012 20.0944903-19 51 5 51 22 0 19.936937-49.1981982 23-51 2.342343 8.6486486 18.480018-2.1232717 18 0-3.570281 15.7924726-11.376494 44.5410656-10 51 4.504505-13.1531532 17-47 45.900901-51.1711712 6.669031-.9625192 8.255066 5.4033441 3.963964 18.5585586 4.204205-13.3333334 2.882883-19.5195196-3.963964-18.5585586-13.059803 1.8329549-22.530745 8.0837151-28.69016 31.4759854-1.237235 12.5179014 1.692518 19.0829633 8.789259 19.6951858 4.616353.3982441 10.995909-1.7223734 19.138668-6.3618524" /&gt;<br/>    &lt;path class="autograph__path" d="m178 30c11-4 54 6 73.734117 1.8554251" /&gt;<br/>    &lt;path class="autograph__path" d="m419 1-21 27.333" /&gt;<br/>    &lt;path class="autograph__path"<br/>    d="m140.729905 31.3135042c1.786326-3.215388-4.287184-4.6444494-4.64445-1.4290614-.357265 2.1435921 2.858123 4.6444494 4.64445 1.4290614z" /&gt;<br/>    &lt;path class="autograph__path"<br/>    d="m360.729905 31.3135042c1.786326-3.215388-4.287184-4.6444494-4.64445-1.4290614-.357265 2.1435921 2.858123 4.6444494 4.64445 1.4290614z" /&gt;<br/>  &lt;/g&gt;<br/>&lt;/svg&gt;</span></pre><p id="1c1c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">用笔画制作SVG是至关重要的，因为我们要制作笔画动画。每一条路或每一笔都有它的长度。我们将在动画中使用这些笔画和长度。</p><h1 id="39bc" class="ly lz iq bd ma mb mc md me mf mg mh mi kf mj kg mk ki ml kj mm kl mn km mo mp bi translated">JavaScript计算</h1><p id="dbd2" class="pw-post-body-paragraph la lb iq lc b ld mq ka lf lg mr kd li lj ms ll lm ln mt lp lq lr mu lt lu lv ij bi translated">为了计算一个笔画的长度，我们可以使用手动方法猜测大概的长度。在这种情况下，我们应该使用两个破折号属性:</p><ul class=""><li id="ea05" class="nj nk iq lc b ld le lg lh lj nl ln nm lr nn lv no np nq nr bi translated"><code class="fe mw mx my mz b">stroke-dasharray</code>，这使得中风摔死，和</li><li id="4809" class="nj nk iq lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated"><code class="fe mw mx my mz b">stroke-dashoffset</code>，将笔画位置推出可视路径。</li></ul><p id="f8cb" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这两个属性应该相等才能起作用。现在我们可以试着猜一下中风有多长。但是我们是程序员，我们不需要猜测:我们可以通过编程来实现。这是它应该如何工作的概念:</p><ul class=""><li id="e3b7" class="nj nk iq lc b ld le lg lh lj nl ln nm lr nn lv no np nq nr bi translated">首先，我们设置整体的动画持续时间。</li><li id="e846" class="nj nk iq lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated">接下来，我们利用<code class="fe mw mx my mz b"><a class="ae lw" href="https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength" rel="noopener ugc nofollow" target="_blank">getTotalLength()</a></code>函数来计算总路径长度组合。</li><li id="3ecf" class="nj nk iq lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated">接下来，我们通过总路径长度的比率来计算每条路径的动画持续时间和延迟。</li><li id="7738" class="nj nk iq lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated">接下来，我们设置<code class="fe mw mx my mz b">stroke-dasharray</code>和<code class="fe mw mx my mz b">stroke-dashoffset</code>，它们将把虚线笔画定位在可见路径之外。</li><li id="e54c" class="nj nk iq lc b ld ns lg nt lj nu ln nv lr nw lv no np nq nr bi translated">最后，我们通过将类<code class="fe mw mx my mz b">animated</code>添加到文档主体来开始动画。</li></ul><p id="a71c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">下面是整个JavaScript函数(为了更容易理解，添加了注释):</p><pre class="kp kq kr ks gt na mz nb nc aw nd bi"><span id="c7d4" class="ne lz iq mz b gy nf ng l nh ni">const calcPaths = (totalDur) =&gt; {<br/>  // unset 'animated' class to body which will reset the animation<br/>  document.body.classList.add('animated')<br/><br/>  // get all SVG elements - lines and dots<br/>  const paths = document.querySelectorAll('.autograph__path')<br/><br/>  // prepare path length variable<br/>  let len = 0<br/><br/>  // prepare animation delay length variable<br/>  let delay = 0<br/><br/>  // escape if no elements found<br/>  if (!paths.length) {<br/>    return false<br/>  }<br/><br/>  // set duration in seconds of animation to default if not set<br/>  const totalDuration = totalDur || 7<br/><br/>  // calculate the full path length<br/>  paths.forEach((path) =&gt; {<br/>    const totalLen = path.getTotalLength()<br/>    len += totalLen<br/>  })<br/><br/>  paths.forEach((path) =&gt; {<br/>    const pathElem = path<br/><br/>    // get current path length<br/>    const totalLen = path.getTotalLength()<br/><br/>    // calculate current animation duration<br/>    const duration = totalLen / len * totalDuration<br/><br/>    // set animation duration and delay<br/>    pathElem.style.animationDuration = `${duration &lt; 0.2 ? 0.2 : duration}s`<br/>    pathElem.style.animationDelay = `${delay}s`<br/><br/>    // set dash array and offset to path length - this is how you hide the line<br/>    pathElem.setAttribute('stroke-dasharray', totalLen)<br/>    pathElem.setAttribute('stroke-dashoffset', totalLen)<br/><br/>    // set delay for the next path - added .2 seconds to make it more realistic<br/>    delay += duration + 0.2<br/>  })<br/><br/>  // set 'animated' class to body which will start the animation<br/>  document.body.classList.add('animated')<br/>  return true<br/>}<br/>calcPaths(5)</span></pre><blockquote class="nx ny nz"><p id="9d57" class="la lb oa lc b ld le ka lf lg lh kd li ob lk ll lm oc lo lp lq od ls lt lu lv ij bi translated"><em class="iq">在使用此技术之前，请务必检查</em> <a class="ae lw" href="https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength#Browser_compatibility" rel="noopener ugc nofollow" target="_blank"> <em class="iq">浏览器兼容性</em> </a> <em class="iq">。</em></p></blockquote><h1 id="5d46" class="ly lz iq bd ma mb mc md me mf mg mh mi kf mj kg mk ki ml kj mm kl mn km mo mp bi translated">CSS动画</h1><p id="9a94" class="pw-post-body-paragraph la lb iq lc b ld mq ka lf lg mr kd li lj ms ll lm ln mt lp lq lr mu lt lu lv ij bi translated">CSS动画包括将最终的<code class="fe mw mx my mz b">stroke-dashoffset</code>设置回零。</p><p id="a271" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我用过<code class="fe mw mx my mz b">linear</code>代表<code class="fe mw mx my mz b">animation-timing-function</code>，用<code class="fe mw mx my mz b">forwards</code>代表<code class="fe mw mx my mz b">animation-fill-mode</code>。第一个属性使动画线性，这对我来说是最自然的。第二个告诉动画保持100%的状态。</p><pre class="kp kq kr ks gt na mz nb nc aw nd bi"><span id="3560" class="ne lz iq mz b gy nf ng l nh ni">.autograph__path {<br/>  opacity: 0;<br/>  animation-timing-function: linear;<br/>  animation-fill-mode: forwards;<br/><br/>  .animated &amp; {<br/>    opacity: 1;<br/>    animation-name: line;<br/>  }<br/>}<br/><br/>@keyframes line {<br/>  100% {<br/>    stroke-dashoffset: 0;<br/>  }<br/>}</span></pre><p id="bbfc" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我使用了不透明度来防止载入时的闪烁。当与关键CSS结合使用时，效果会更好。</p><h1 id="8b65" class="ly lz iq bd ma mb mc md me mf mg mh mi kf mj kg mk ki ml kj mm kl mn km mo mp bi translated">结论</h1><p id="5728" class="pw-post-body-paragraph la lb iq lc b ld mq ka lf lg mr kd li lj ms ll lm ln mt lp lq lr mu lt lu lv ij bi translated">这就是了，一个动画SVG签名。只要掌握一点SVG、JavaScript和CSS知识，您就可以创建吸引人的绘图动画。我已经找到了很多像这样处理动画的插件，但是我总是喜欢使用更少的代码。我用不到100行代码做了这个演示。点击此处查看完整演示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oe of l"/></div></figure></div><div class="ab cl og oh hu oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ij ik il im in"><p id="b08d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="oa">最初发布于</em><a class="ae lw" href="https://www.silvestar.codes/articles/how-to-animate-svg-signature/" rel="noopener ugc nofollow" target="_blank"><em class="oa">https://www . silvestar . codes</em></a><em class="oa">。</em></p></div></div>    
</body>
</html>