<html>
<head>
<title>Mobile Automation with Appium, WebdriverIO using Typescript!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Typescript实现移动自动化！</h1>
<blockquote>原文：<a href="https://itnext.io/mobile-automation-with-appium-webdriverio-using-typescript-bbb7e982b6ea?source=collection_archive---------1-----------------------#2018-02-14">https://itnext.io/mobile-automation-with-appium-webdriverio-using-typescript-bbb7e982b6ea?source=collection_archive---------1-----------------------#2018-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/c5bad3aa05bbcb87c6153b4ee0bde428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*uiWvE_-Jgf5RrYnV1U1xZA.png"/></div></figure><p id="2a01" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最近，随着新的自动化框架、工具和实用程序的出现，移动测试自动化变得如此有趣，这使得我们的生活更加容易自动化我们最喜爱的移动应用程序和浏览器。</p><p id="5f78" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本文的重点和目的是讨论并分析集成了多种移动自动化技术的框架设置，这将有助于我们以一种干净快捷的方式自动化移动应用和浏览器。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="kw kx l"/></div></figure><p id="7090" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但首先让我们坐下来，试着理解驱动我们的<a class="ae ky" href="https://github.com/igniteram/appium-webdriverio-typescript" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">app ium-web driver io-typescript</strong></a>框架的关键技术…</p><h1 id="ec72" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Appium</h1><p id="b39a" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">当谈到移动测试时，这个开源节点服务器是最流行的，也是目前最难超越的。它驱动跨各种平台的测试脚本，并具有多种语言API绑定。</p><blockquote class="mc md me"><p id="2891" class="ju jv mf jw b jx jy jz ka kb kc kd ke mg kg kh ki mh kk kl km mi ko kp kq kr ij bi translated">Appium只不过是一个建立在节点上的HTTP服务器，它创建并处理webdriver会话。它使用WebDriver协议驱动iOS、Android和Windows应用程序</p></blockquote><p id="376a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">那么它是如何工作的呢？</strong></p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/9539f2910c30dc0967345da426ee0a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceUSfnh8rmPxHqtPrgAL1Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">Appium的官方设计实现</figcaption></figure><p id="01c7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">WebDriver脚本将创建一个HTTP JSON请求发送到Appium服务器，然后该命令会发送到TCP服务器并等待来自引导程序的结果，此时它知道您的脚本属于哪个平台(Android、IOS或Windows ),然后处理该请求并将其发送回来。</p><p id="6c0d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">谷歌的<a class="ae ky" href="https://developer.android.com/topic/libraries/testing-support-library/index.html#UIAutomator" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> UiAutomator </strong> </a>控制器帮助转换webdriver命令来驱动原生Android设备应用。同样适用于苹果的<a class="ae ky" href="https://developer.apple.com/documentation/xctest" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> XCUITest </strong> </a>和Window的<a class="ae ky" href="https://github.com/microsoft/winappdriver" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> WinAppDriver </strong> </a>。</p><p id="7922" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请通过官方<strong class="jw ir">A</strong><a class="ae ky" href="https://appium.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">ppium</strong></a>网站深入了解它的设计和理念。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="b983" class="kz la iq bd lb lc mz le lf lg na li lj lk nb lm ln lo nc lq lr ls nd lu lv lw bi translated">WebdriverIO</h1><p id="6c94" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">它是W3C WebDriver协议的Node.js绑定实现。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/2f0b8aac8a3204035165a15f12040bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:334/format:webp/1*m0h5QOSHlePD5rgAUlJAag.png"/></div></figure><p id="f6a3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Selenium Webdriver有许多API绑定实现，WebdriverIO充分利用了node.js，使我们能够用简单的Javascript编写自动化测试。它封装了webdriver命令，这些命令基本上按照<a class="ae ky" href="https://www.w3.org/TR/webdriver/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> webdriver协议</strong> </a> <strong class="jw ir">发送/接收来自selenium服务器的请求/响应。</strong></p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><blockquote class="mc md me"><p id="90c5" class="ju jv mf jw b jx jy jz ka kb kc kd ke mg kg kh ki mh kk kl km mi ko kp kq kr ij bi translated"><strong class="jw ir">为什么要用web drivero而不是传统的Selenium Webdriver(Java实现)？</strong></p></blockquote><p id="4e77" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">坦白地说，我觉得这是在构建你的自动化框架时要做的决定，这应该是你的<strong class="jw ir">可行性分析</strong>的一部分。我个人认为，凭借node.js在后端的强大功能，我们的自动化测试也应该使用与AUT相同的语言，AUT也是建立在(即前端)Javascript技术之上的。</p><p id="ab2b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">原因简单明了，从同步编程切换到异步编程的能力深受javascript世界的鼓励，这对编写稳定的自动化测试非常有益。</p><p id="15b1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">自动化场景时(点击链接，在文本框中输入文本等。)我们基本上是向webdriver服务器发送HTTP命令，这些命令本质上是异步的，现在想象一下必须上传和下载数据/文件的场景。在node.js中编写代码有助于我们以更快、更节省内存的方式实现上述目标。</p><p id="dd70" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">人们可能会争论使用各种面向对象编程语言提供的<strong class="jw ir">线程</strong>，因为它们对多线程有很好的支持。我会把它留在那里(我觉得我还没有达到比较多种编程语言的阶段)，说我们的目标应该是编写高效的&amp;非片状自动化测试，随着Javascript &amp; Node.js的日益流行，为什么不试一试，相信我，它完全值得每一分钱。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="3d9e" class="kz la iq bd lb lc mz le lf lg na li lj lk nb lm ln lo nc lq lr ls nd lu lv lw bi translated">Typescript:可伸缩的JavaScript！</h1><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c660d72e65f9e0c1df8627e31b38394d.png" data-original-src="https://miro.medium.com/v2/resize:fit:244/format:webp/1*zL4dcegwoumS2vsfqksa4w.png"/></div></figure><p id="8314" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我在以前的文章中讨论过这个Javascript trans piler——<a class="ae ky" href="https://medium.com/@igniteram/e2e-testing-with-protractor-cucumber-using-typescript-564575814e4a" rel="noopener"><strong class="jw ir">用量角器测试E2E，用TypeScript测试黄瓜！</strong>T15】</a></p><p id="ea6a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用typescript，您可以同时获得面向对象和函数式编程范例的好处。它给你的JavaScript代码增加了可选的静态类型，也就是说，现在变量和方法可以在编译/转换时被识别，就像oops语言的任何编译器一样。你认为JavaScript只是一种解释性语言。</p><p id="8ae1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">看看这篇很酷的文章<a class="ae ky" href="http://jonathancreamer.com/why-would-you-not-use-typescript/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">你为什么不使用TypeScript？</strong> </a> <strong class="jw ir"> </strong>作者乔纳森·克里默。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="ng kx l"/></div></figure><p id="cd9b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">随着越来越多的JavaScript开发人员和框架作者利用TypeScript提供的优秀工具和生产力提升来创建可扩展的应用程序，TypeScript继续其发展之旅。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="6370" class="kz la iq bd lb lc mz le lf lg na li lj lk nb lm ln lo nc lq lr ls nd lu lv lw bi translated">Appium-WebdriverIO-Typescript框架</h1><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/87325c8c28bbf80d42c4b7eb6f08d226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*AJ7v5yqju0bG7Ejskj7GpQ.jpeg"/></div></figure><p id="9f86" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我已经用Android原生应用和浏览器的配置设置实现了这个框架(我还没有mac😉).iOS配置设置略有不同，出于本文的目的，我们将详细讨论android平台测试。</p><h1 id="fce1" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">GitHub回购:</h1><div class="ni nj gp gr nk nl"><a href="https://github.com/igniteram/appium-webdriverio-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">igniteram/appium-web driver io-typescript</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">使用webdriverio &amp; typescript，使用appium自动化移动应用程序的测试框架！…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">github.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz js nl"/></div></div></a></div><h2 id="3534" class="oa la iq bd lb ob oc dn lf od oe dp lj kf of og ln kj oh oi lr kn oj ok lv ol bi translated">先决条件</h2><ul class=""><li id="6987" class="om on iq jw b jx lx kb ly kf oo kj op kn oq kr or os ot ou bi translated">系统中全局安装的节点。<a class="ae ky" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en/download/</a></li><li id="2f77" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">JAVA(jdk)安装在系统中。</li><li id="f0a0" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">Andriod(sdk)安装在系统中。</li><li id="58bd" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">在系统中正确设置JAVA_HOME和ANDROID_HOME路径。</li><li id="5348" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">安装了Chrome浏览器</li><li id="84fe" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">安装了文本编辑器/IDE(可选)→Sublime/Visual Studio代码/括号。</li></ul><h2 id="da1a" class="oa la iq bd lb ob oc dn lf od oe dp lj kf of og ln kj oh oi lr kn oj ok lv ol bi translated">装置</h2><ul class=""><li id="5a3f" class="om on iq jw b jx lx kb ly kf oo kj op kn oq kr or os ot ou bi translated">将存储库<a class="ae ky" href="https://github.com/igniteram/appium-webdriverio-typescript" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">appium-web driver io-typescript</strong></a>克隆到一个文件夹中</li><li id="ab71" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">进入文件夹，从终端/命令提示符运行以下命令</li></ul><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="2b82" class="oa la iq pb b gy pf pg l ph pi">npm install</span></pre><ul class=""><li id="c7e6" class="om on iq jw b jx jy kb kc kf pj kj pk kn pl kr or os ot ou bi translated">来自package.json和typescript typings的所有依赖项都将安装在node_modules文件夹中。</li></ul><p id="04bc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">提示:使用<a class="ae ky" href="https://yarnpkg.com/en/docs/installing-dependencies" rel="noopener ugc nofollow" target="_blank"> Yarn </a>来安装你的模块<code class="fe pm pn po pb b">npm install -g yarn</code>，因为它会缓存&amp;锁定它们，这将帮助我们跨各种平台安装正确版本的模块，而不会出现任何问题。该项目配置有<code class="fe pm pn po pb b">yarn.lock</code>文件。所以你可以利用它。</p><h1 id="ccdc" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">运行测试</h1><ul class=""><li id="a1ed" class="om on iq jw b jx lx kb ly kf oo kj op kn oq kr or os ot ou bi translated">第一步是启动<code class="fe pm pn po pb b">appium</code>服务器，这个项目包括appium节点模块，所以你不必从外部下载。您可以通过以下npm命令运行appium服务器。</li></ul><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="9ea5" class="oa la iq pb b gy pf pg l ph pi">npm run appium</span></pre><ul class=""><li id="a32a" class="om on iq jw b jx jy kb kc kf pj kj pk kn pl kr or os ot ou bi translated">接下来，您必须将您的类型脚本文件转换/编译为javascript文件，您可以通过运行以下命令来完成此操作</li></ul><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="3d52" class="oa la iq pb b gy pf pg l ph pi">npm run build</span></pre><p id="2199" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下一步是执行配置文件。这个项目有2个配置文件-</p><ul class=""><li id="d7ff" class="om on iq jw b jx jy kb kc kf pj kj pk kn pl kr or os ot ou bi translated"><a class="ae ky" href="https://github.com/igniteram/appium-webdriverio-typescript/blob/master/config/wdio.app.config.js" rel="noopener ugc nofollow" target="_blank"> wdio.app.config.js </a> —该配置文件用于在真实的移动原生应用中运行测试。您必须更改<code class="fe pm pn po pb b">appium settings</code>才能在您的设备上运行测试。</li></ul><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="7b49" class="oa la iq pb b gy pf pg l ph pi">capabilities: [<br/>{<br/>    appiumVersion: '1.7.1',                             // Appium module version<br/>    browserName: '',                                   // browser name is empty for native apps<br/>    platformName: 'Android',<br/>    app: './app/LGCalculator.apk',                     // Path to the native app<br/>    appPackage: 'com.android.calculator2',             // Package name of the app<br/>    appActivity: 'com.android.calculator2.Calculator', // App activity of the app<br/>    platformVersion: '5.1.1',                         // Android platform version of the device<br/>    deviceName: 'THF755e0384',                       // device name of the mobile device<br/>    waitforTimeout: waitforTimeout,<br/>    commandTimeout: commandTimeout,<br/>    newCommandTimeout: 30 * 60000,<br/>}<br/>],</span></pre><p id="bba0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要知道你的设备名称，你可以运行Android SDK自带的<code class="fe pm pn po pb b">adb devices</code>命令。</p><p id="d2ca" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行该项目的本机应用程序测试的节点命令是-</p><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="0250" class="oa la iq pb b gy pf pg l ph pi">npm run app-test</span></pre><p id="f143" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在<code class="fe pm pn po pb b">package.json</code>中设置的上述命令在内部调用WebdriverIO的二进制文件<code class="fe pm pn po pb b">wdio ./config/wdio.app.config.js</code>并运行app配置文件。</p><ul class=""><li id="7e51" class="om on iq jw b jx jy kb kc kf pj kj pk kn pl kr or os ot ou bi translated"><a class="ae ky" href="https://github.com/igniteram/appium-webdriverio-typescript/blob/master/config/wdio.browser.config.js" rel="noopener ugc nofollow" target="_blank"> wdio.browser.config.js </a> —该配置文件用于在已配置的移动设备的chrome浏览器中运行测试。appium设置看起来像这样-</li></ul><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="bb1e" class="oa la iq pb b gy pf pg l ph pi">capabilities: [<br/>{<br/>    appiumVersion: '1.7.1',<br/>    browserName: 'chrome',  // browser name should be specified<br/>    platformName: 'Android',<br/>    platformVersion: '5.1.1',<br/>    deviceName: 'THF755e0384', // device name is mandatory<br/>    waitforTimeout: waitforTimeout,<br/>    commandTimeout: commandTimeout,<br/>    newCommandTimeout: 30 * 60000,<br/>}<br/>],</span></pre><p id="78b1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行该项目的浏览器测试的节点命令是-</p><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="575b" class="oa la iq pb b gy pf pg l ph pi">npm run browser-test</span></pre><p id="b20d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上面的命令在内部调用WebdriverIO的二进制文件<code class="fe pm pn po pb b">wdio ./config/wdio.browser.config.js</code>，并运行浏览器配置文件。</p><h1 id="a77b" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">运行测试套件</h1><p id="e5c2" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">您可以通过运行以下命令来运行本机应用程序和浏览器测试-</p><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="b410" class="oa la iq pb b gy pf pg l ph pi">npm test</span></pre><p id="76da" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上述命令内部调用<code class="fe pm pn po pb b">npm run app-test</code>和<code class="fe pm pn po pb b">npm run browser-test</code>。</p><h1 id="59a3" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">写作测试</h1><p id="ea07" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">Cucumber框架已经与thi项目集成，WebdriverIO的<code class="fe pm pn po pb b">wdio-cucumber-framework</code>适配器帮助编写具有特性&amp;步骤定义的BDD风格测试。</p><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="ba19" class="oa la iq pb b gy pf pg l ph pi">const {Given, When, Then} = require('cucumber');<br/>import {expect} from 'chai';<br/>import {CalculatorPageObject} from '../pages/calcPage';</span><span id="a990" class="oa la iq pb b gy pp pg l ph pi">const calc: CalculatorPageObject = new CalculatorPageObject();</span><span id="b174" class="oa la iq pb b gy pp pg l ph pi">Given(/^I am on my mobile calculator app$/, () =&gt; {<br/>    const title = browser.getText('android.widget.TextView');<br/>    expect(title).to.equal('Calculator');<br/>});</span></pre><h1 id="e512" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">页面对象</h1><p id="7ad8" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">该框架严格使用页面对象设计模式编写。</p><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="519c" class="oa la iq pb b gy pf pg l ph pi">class GooglePageObject {<br/>    public get searchTextBox(): any { return browser.element('#lst-ib'); }<br/>    public get searchButton(): any { return browser.element('button[name="btnG"]'); }<br/>    public get results(): any { return browser.waitForVisible('#rso', 5000); }<br/>    public get firstLink(): any { return browser.element('#rso div._H1m._ees'); }<br/>}<br/>/*<br/>Public Interface - export instances of classes<br/>**/<br/>export const GooglePage = new GooglePageObject()</span></pre><h1 id="3246" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">寻找元素</h1><p id="29ad" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">在移动应用和浏览器中寻找元素有时会很棘手。</p><ul class=""><li id="3376" class="om on iq jw b jx jy kb kc kf pj kj pk kn pl kr or os ot ou bi translated">在原生移动应用中查找元素的最佳方式是使用<a class="ae ky" href="https://developer.android.com/training/testing/ui-automator.html" rel="noopener ugc nofollow" target="_blank"> UIAutomatorViewer </a>。这仅支持Android 4.3及以上版本，如果您使用的是低于该版本的Android，您可以使用<a class="ae ky" href="http://selendroid.io/" rel="noopener ugc nofollow" target="_blank"> Selendriod </a></li><li id="e54b" class="om on iq jw b jx ov kb ow kf ox kj oy kn oz kr or os ot ou bi translated">在移动浏览器中查找元素的最佳方式是使用Chrome DevTools 进行<em class="mf">远程调试。我个人觉得这容易多了。你可以在这个博客中找到详细的步骤</em></li></ul><h1 id="0208" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">报告</h1><p id="0fd5" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">目前该项目已经与<a class="ae ky" href="http://allure.qatools.ru/" rel="noopener ugc nofollow" target="_blank"> Allure-Reports </a>整合。WebdriverIO的<code class="fe pm pn po pb b">wdio-allure-reporter</code>帮助我们生成移动自动化测试的详细报告。一旦测试执行完成，您会发现自动生成的allure-results文件夹。然后，您必须运行以下命令来生成HTML报告</p><pre class="ks kt ku kv gt pa pb pc pd aw pe bi"><span id="a5d8" class="oa la iq pb b gy pf pg l ph pi">npm run report</span></pre><p id="e222" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">警告:</strong> Chrome浏览器在呈现allure生成的本地文件中的AJAX请求时存在问题，您可以使用Firefox查看html报告。你可以在这里找到更多关于这个问题的细节<a class="ae ky" href="https://stackoverflow.com/questions/23997449/allure-report-nothing-shown-in-chrome" rel="noopener ugc nofollow" target="_blank"/></p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi pq"><img src="../Images/ac3f67a0f7637919d0aa0186c2809f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpbC7Ln7K6N2WezW2oB2sw.png"/></div></div></figure><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi pq"><img src="../Images/f5c58cf08a19b45b15f94c6629f0784b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Ygpj7FewzDN1DiRIxIg9A.png"/></div></div></figure><h1 id="0fa6" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论:</h1><p id="fb9b" class="pw-post-body-paragraph ju jv iq jw b jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ij bi translated">得益于appium、webdriver等各种技术，移动自动化从未如此有趣和令人兴奋。它正在发展并鼓励测试人员开始自动化。他们的开源社区非常有用和可靠，你不需要参加任何课程或辅导。就在你面前！</p><p id="b3f8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">BTW Appium今年正在组织它的第一次<strong class="jw ir"> Appium会议</strong>，看到这个项目成长和发展到如此程度，它已经成为移动自动化的基础，这是非常令人惊讶的。向Appium核心团队成员致敬。</p><div class="ni nj gp gr nk nl"><a href="https://appiumconf.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">2018年应用会议</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">官方的Appium会议</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">appiumconf.com</p></div></div><div class="nu l"><div class="pr l nw nx ny nu nz js nl"/></div></div></a></div></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="8b88" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">喜欢读这篇文章吗？请点击下面的 <strong class="jw ir"> <em class="mf">按钮</em> </strong> <em class="mf">，这样就可以传到媒体上的人了。</em></p><p id="59ed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="mf">想更多地了解我和我的工作吗？查看我的</em><a class="ae ky" href="https://about.me/ram.pasala" rel="noopener ugc nofollow" target="_blank"><em class="mf">about . me</em></a><em class="mf">页面。</em></p></div></div>    
</body>
</html>