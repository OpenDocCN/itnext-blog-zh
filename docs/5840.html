<html>
<head>
<title>Flexible Angular Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">柔性角形部件</h1>
<blockquote>原文：<a href="https://itnext.io/flexible-angular-components-82a5c391c25?source=collection_archive---------1-----------------------#2021-06-07">https://itnext.io/flexible-angular-components-82a5c391c25?source=collection_archive---------1-----------------------#2021-06-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b93c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用ng模板的内容投影指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/04447da7d16ad1d4d4639b4760cc05d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E689gI8M0r9N-uhxDjOeAA.png"/></div></div></figure><p id="c687" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://github.com/Everduin94/erxk-article-playground/blob/main/src/app/components/loading.component.ts" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">源代码🧪 </strong> </a> <strong class="kw iu"> | </strong> <a class="ae lq" href="https://erxk-article-playground.web.app/articles/ngTemplate" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">真人举例🦠 </strong> </a></p><p id="d0eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">关于<a class="ae lq" href="https://angular.io/guide/content-projection" rel="noopener ugc nofollow" target="_blank">内容投影</a>如何工作，以及在Angular中创建可重用组件的所有方法，有很多很棒的文章。</p><p id="f90f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章更主观，我们将着眼于减少我们工具箱的“表面积”。—我们将选择使用<strong class="kw iu"> ng-template </strong>和<strong class="kw iu">ngtemplate outlet<em class="lr"/></strong>进行所有内容投影。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">风格-过滤我们的知识，磨练特定的技能/模式</figcaption></figure><p id="2671" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">参考<a class="ae lq" href="https://angular.io/guide/content-projection" rel="noopener ugc nofollow" target="_blank"> Angular docs </a>，在内容投影中，我们可能希望实现三种情况。</p><ul class=""><li id="6bfa" class="ly lz it kw b kx ky la lb ld ma lh mb ll mc lp md me mf mg bi translated">单一时段:单一内容来源</li><li id="9cf2" class="ly lz it kw b kx mh la mi ld mj lh mk ll ml lp md me mf mg bi translated">多时隙:多种内容来源</li><li id="c648" class="ly lz it kw b kx mh la mi ld mj lh mk ll ml lp md me mf mg bi translated">有条件:仅在满足条件时呈现内容源</li></ul><p id="89a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的例子是一个加载组件。这个加载组件将能够呈现多个状态，并有能力插入每个状态的自定义模板。</p><h2 id="682d" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">单翼缝</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf lt l"/></div></figure><p id="9547" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">几件事看起来有些过分。</p><p id="52ee" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">“难道我们不能用ng-content达到同样的效果吗？”—是的。</p><p id="db64" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">"难道我们不能让模板保持无名而使用TemplateRef吗？"—是的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng lt l"/></div></figure><p id="f044" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在风格上，我更喜欢总是使用ng-template，并且总是给我的模板命名。尽可能使用相同的范例对我来说很简单。随着复杂性的增加，这也是有利的。稍后将详细介绍。</p><h2 id="df97" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">多槽</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf lt l"/></div></figure><p id="05f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们开始利用多时隙内容投影时，我们只需使用完全相同的范例添加另一个模板。</p><h2 id="1abf" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">有条件的</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf lt l"/></div></figure><p id="8658" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们实现条件内容投影时。我们使用内容投影的方式没有任何变化。</p><h2 id="ad73" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">(附加)嵌套条件</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf lt l"/></div></figure><p id="a8a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以继续利用ng-template在组件中嵌套相同的模式。</p><p id="7623" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果组件的用户没有提供模板，我们就使用默认值。</p><h2 id="1327" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">(双倍奖金)通行证内容</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf lt l"/></div></figure><p id="8497" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在外部和默认模板中为我们的模板提供上下文。我们组件的结构没有改变。</p><h2 id="c034" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">ng-内容和生命周期挂钩</h2><p id="b98e" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">前面，我提到总是选择ng模板而不是ng内容。</p><p id="1cf9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我更喜欢避免ng-content，因为它会导致意想不到的行为。尽管这种行为已经被很好地记录下来，但是如果您没有阅读过关于ng-content的文档，它可能会成为一个耗时的陷阱。</p><blockquote class="nm nn no"><p id="656f" class="ku kv lr kw b kx ky ju kz la lb jx lc np le lf lg nq li lj lk nr lm ln lo lp im bi translated">“当组件的消费者提供内容时，该内容总是被<em class="it">初始化</em>，即使该组件没有定义<code class="fe ns nt nu nv b">ng-content</code>元素或者该<code class="fe ns nt nu nv b">ng-content</code>元素在<code class="fe ns nt nu nv b"><a class="ae lq" href="https://angular.io/api/common/NgIf" rel="noopener ugc nofollow" target="_blank">ngIf</a></code>语句中。”</p></blockquote><p id="b064" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">假设我们想在完成加载后显示一条成功消息，时间正好是4秒钟。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/512c3b5645d1cd1aa980e49bfc4e07a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkCZJyQOxXmUcM__99E_PA.png"/></div></div></figure><p id="57ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">根据加载程序花费的时间，ng-content会产生不同的问题，这些问题可能很难跟踪。</p><ul class=""><li id="8153" class="ly lz it kw b kx ky la lb ld ma lh mb ll mc lp md me mf mg bi translated">如果加载时间与销毁时间相同，则不会显示成功</li><li id="4eb5" class="ly lz it kw b kx mh la mi ld mj lh mk ll ml lp md me mf mg bi translated">如果加载时间是销毁时间的一半，则成功会很快被销毁</li><li id="cb44" class="ly lz it kw b kx mh la mi ld mj lh mk ll ml lp md me mf mg bi translated">如果加载时间比销毁时间长，成功永远不会被销毁</li></ul><p id="f6db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用ng模板。success组件的ngOnInit在呈现组件之前不会被触发。</p><h2 id="16a0" class="mm mn it bd mo mp mq dn mr ms mt dp mu ld mv mw mx lh my mz na ll nb nc nd ne bi translated">结论</h2><p id="deeb" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我认为一旦你学会了基础知识，作为一名开发人员，学习你的风格和偏好会有很大的好处。就像职业运动员一样，他们因自己的风格而出名；因为他们磨练和专攻的技术。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng lt l"/></div></figure><blockquote class="nm nn no"><p id="6194" class="ku kv lr kw b kx ky ju kz la lb jx lc np le lf lg nq li lj lk nr lm ln lo lp im bi translated">☁️<a class="ae lq" href="https://flotes.app" rel="noopener ugc nofollow" target="_blank">flotes</a>——尝试演示，不需要登录。或者免费报名。Flotes是我记笔记和高效学习的方式，即使在我很忙的时候。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/8e468f6e74135bbbc2ecbfce7e2db2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGqAj2R16w33dIiKDnHEUA.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated"><a class="ae lq" href="https://flotes.app" rel="noopener ugc nofollow" target="_blank">flots</a></figcaption></figure></div></div>    
</body>
</html>