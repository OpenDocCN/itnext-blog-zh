<html>
<head>
<title>Angular custom two way data binding — a complicated story?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular自定义双向数据绑定——一个复杂的故事？</h1>
<blockquote>原文：<a href="https://itnext.io/angular-custom-two-way-data-binding-a-complicated-story-5b74291a138?source=collection_archive---------4-----------------------#2020-02-08">https://itnext.io/angular-custom-two-way-data-binding-a-complicated-story-5b74291a138?source=collection_archive---------4-----------------------#2020-02-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0a5b664fe7ba8812f30f670dd4d364b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mou3DPI0Nbg8BH4LvYGwWw.png"/></div></div></figure><p id="4c1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你好，<br/>正如你可能已经推断出的，我使用Angular已经有一段时间了，我总是对我们如何定制双向数据绑定感到恼火。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="72ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从一些基础开始:</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="ce7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，要将一个组件的属性设置为输入或输出，你已经有了一个清晰的修饰器，一行代码，很好的实现(向开发人员致敬)。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="6009" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是当我们尝试使用<strong class="ka ir"> [()] ( </strong>香蕉盒语法)进行双向数据绑定时，我们遇到了另一个完全不同的故事:</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="9cb4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要声明双向数据绑定属性，我们需要:</p><ul class=""><li id="689c" class="lj lk iq ka b kb kc kf kg kj ll kn lm kr ln kv lo lp lq lr bi translated">1个额外的属性</li><li id="fbd4" class="lj lk iq ka b kb ls kf lt kj lu kn lv kr lw kv lo lp lq lr bi translated">1个额外的输出装饰器</li><li id="74d6" class="lj lk iq ka b kb ls kf lt kj lu kn lv kr lw kv lo lp lq lr bi translated">命名约定(属性名+'更改')</li><li id="6251" class="lj lk iq ka b kb ls kf lt kj lu kn lv kr lw kv lo lp lq lr bi translated">每次你想改变属性的时候，记得调用<strong class="ka ir"> emit </strong></li></ul><p id="6847" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然我很欣赏这给了我们大量的控制，但它可能会用随机错误填充代码库，仅仅因为我们有时忘记调用<strong class="ka ir"> emit </strong>函数。<br/>甚至可能会阻止开发者使用该功能。</p><p id="1bea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是，如果您必须对3-4个属性执行此操作，所有这些对错误的担心都会成倍增加，因此，如果您真的想使用该特性，这是不可持续的。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="e228" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">救世主来了，当然是我自己。我创建了一个双向绑定装饰器的小实现。40行代码彻底解决了这个烦人的问题。</p><p id="570b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用<a class="ae lx" href="https://www.npmjs.com/package/two-way-decorator" rel="noopener ugc nofollow" target="_blank">双向装饰器</a>,您可以获得两个世界的优势:</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="9025" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当您希望总是同步组件树中的两个组件时，您可以获得双向绑定的装饰器，如果出于性能或业务考虑需要，您仍然可以使用旧方法。</p><p id="0286" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">装饰器是用TypeScript编写的，它在JS对象上使用get/set模式，所以它的性能会很好。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="dd68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们都可以像正常人一样写代码了。谢谢你来参加我的TED演讲。</p></div></div>    
</body>
</html>