<html>
<head>
<title>CodePush in action</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码推送正在运行</h1>
<blockquote>原文：<a href="https://itnext.io/codepush-in-action-3cc97d6affa5?source=collection_archive---------6-----------------------#2020-05-03">https://itnext.io/codepush-in-action-3cc97d6affa5?source=collection_archive---------6-----------------------#2020-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3b0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一步一步行会实现代码推送</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/43969e2e8d6e5738e50b339146162f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AdWJ-_FcgIzdEovZr_znow.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">代码推进图示表示</figcaption></figure><h1 id="e342" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">谁应该阅读这篇文章？</h1><p id="e6ea" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">希望在其项目中实现CodePush的混合手机应用程序开发人员</p><h1 id="905f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">这篇文章描述了什么？</h1><p id="fe20" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">基本了解CodePush，如何在项目中实现，最后有一个演示。因为我是一个自豪的Android手机的拥有者，这个演示和文章将集中在它的Android方面，然而，对于iOS，这个过程仍然是相同的</p><h1 id="d41f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">app最后会是什么样子？</h1><p id="4165" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">这是你能想象到的最简单的应用程序。这个应用程序的想法是展示代码推送的能力。我们会稍微改变一下应用程序的外观，然后看看它是如何变化的，而不需要重新安装，</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/b392ea15cfc0ba94db3e9341b0664c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ATjLwPY9ATsNOlUMw9XMEw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">科尔多瓦代码推送应用示例</figcaption></figure><h1 id="8b4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">CodePush的前提条件是什么？</h1><p id="02ed" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">下面是所有先决条件的列表，</p><ol class=""><li id="0266" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated"><em class="mo">必须有App中心账号，</em></li><li id="c239" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo">在应用中心注册的测试人员电子邮件id(如果您希望稍后通过应用中心安装应用)，</em></li><li id="31f5" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo"> Nodejs，</em></li><li id="2085" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo">应用中心CLI，</em></li><li id="88b8" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo">科尔多瓦，</em></li><li id="4681" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated">科尔多瓦CLI</li><li id="b645" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo">安卓SDK/Studio，</em></li><li id="1a87" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo">仿真器或设备(启用开发者选项)，</em></li><li id="fc4f" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo">饭桶，</em></li><li id="c3f6" class="mf mg iq jp b jq mp ju mq jy mr kc ms kg mt kk mk ml mm mn bi translated"><em class="mo"> VS代码(你选择的任何编辑器)</em></li></ol></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="b703" class="lb lc iq bd ld le nb lg lh li nc lk ll lm nd lo lp lq ne ls lt lu nf lw lx ly bi translated">如何在我的应用中引入CodePush，从哪里入手？</h1><p id="7ccd" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">下面是在项目中开始使用CodePush必须执行的步骤，</p><ul class=""><li id="9dd1" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">在应用中心创建一个应用，</strong></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/8605e1b38e0c0af49f9afc6dd5871c0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLbZObXhTmDeUUmgSx_I6g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">AppCenter创建应用程序</figcaption></figure><ul class=""><li id="f384" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">在系统中创建Cordova app，</strong></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ni"><img src="../Images/4fcc4125b7c98849a02e3528d824088e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BbZQx_subkZnojB4ZcHoXQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Cordova应用程序创建</figcaption></figure><ul class=""><li id="2223" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">添加应用中心中提到的插件，</strong> <br/>只有当您希望使用应用中心分析和应用中心崩溃分析服务<strong class="jp ir"><em class="mo"><br/></em></strong><code class="fe nj nk nl nm b">cordova plugin add cordova-plugin-appcenter-analytics</code><strong class="jp ir"><em class="mo"><br/></em></strong><code class="fe nj nk nl nm b">cordova plugin add cordova-plugin-appcenter-crashes</code>时，这些插件才是强制性的</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nn"><img src="../Images/cfa818d41fa7180581239d94abce2b3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjxuY2UU7Z_tXjqrXXQNNA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">应用中心插件添加</figcaption></figure><ul class=""><li id="d52c" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">在代码库中添加适当的平台</strong>(本演示仅涵盖Android。Ios的使用情况也类似)</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi no"><img src="../Images/7a834c83bc41ed3dc22c0ca8e9da3237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJVnupZ58aq4_va7Zv9w4Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在Cordova应用程序中添加Android平台</figcaption></figure><ul class=""><li id="ebd6" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">使用您的应用程序密码</strong>更新 <code class="fe nj nk nl nm b">config.xml</code> <strong class="jp ir">文件，配置SDK以在应用程序中心使用您的应用程序</strong></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi np"><img src="../Images/506f5bba2fc89666b129c6297fbf85ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IXUsflEhUsE5G4XyVq1pg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">codepush的Config.xml</figcaption></figure><ul class=""><li id="ed8e" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">在应用中心选择码推服务</strong></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nq"><img src="../Images/5169626c40f5b210cd2aeea953cc8af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LuR0Q6V70hsQW6MK9uHHBg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">代码推送应用中心</figcaption></figure><ul class=""><li id="3d4b" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">为CodePush </strong>添加必要的插件(在您的Cordova app目录终端中运行下面的命令)<br/> <code class="fe nj nk nl nm b">cordova plugin add cordova-plugin-code-push@latest</code></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nr"><img src="../Images/a2d9a2a1bd697ccd47dd5d372e691eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gsj20zoWEwEGRR3zmpCmbg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">添加代码推送插件</figcaption></figure><ul class=""><li id="4b06" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">复制</strong> <code class="fe nj nk nl nm b">config.xml</code>中的环境键(用于本演示)<strong class="jp ir">，</strong></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ns"><img src="../Images/31b135cbe9a70b6b5495b3c28f6391da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*biqVih_HAnfBi2EWIaxVzw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">代码推送的环境键</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/cf0db222628b55b857ba31013a062df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aqZcuiqMLZHs6ME5C9pAnw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">CodePush Cordova应用程序的Config.xml</figcaption></figure><ul class=""><li id="760c" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">在你的应用程序中添加代码推送逻辑，<br/> </strong>这个逻辑已经被添加到<code class="fe nj nk nl nm b">onDeviceReady</code>事件中，但是它取决于开发者为它选择正确的位置，这可以在应用程序生命周期的任何事件中添加(<code class="fe nj nk nl nm b">onLoad, onDeviceReady, onPaue,onResum,onMenuKeyDown</code>)，</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/91465723524404cd896d150c6a45c3d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zeJJfhtrsgst4XXLN0KxrQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">码推同步逻辑</figcaption></figure><ul class=""><li id="f733" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">根据需求</strong>更新代码(更改代码)，第一次必须通过app center或命令行安装应用程序(我更喜欢命令行，因为第一次出现错误时更容易调试)</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nu"><img src="../Images/7fc30784ae94e29f3961633d9bd408bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTzHc4YYdAXRMsoEaniMCA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">应用中心的内容安全性</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nv"><img src="../Images/08e1dc03321862fcab2b5adc62fc903e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fgmybujwp3qR0GfsktdDlg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">首先在Android设备上运行CodePush</figcaption></figure><ul class=""><li id="b51b" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">应用安装成功后，你可以看到如下控制台</strong>(使用chrome inspect) <strong class="jp ir">。</strong>没有错误，也可以清楚地看到来自CodePush插件的消息。</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nw"><img src="../Images/7bc1ec211fcf8c301ab1abb8bb4dae9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwD0luw6lOaLH2AFqNX3ig.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用chrome的Cordova Android应用程序://inspect</figcaption></figure><h1 id="3a9c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">现在是时候来看看CodePush的美妙之处了。完成上面给出的所有步骤后，您已经在测试设备中安装了应用程序</h1><ul class=""><li id="d7d3" class="mf mg iq jp b jq lz ju ma jy nx kc ny kg nz kk ng ml mm mn bi translated"><strong class="jp ir">按要求做代码修改。在本文的开始，我已经列出了一个应用程序，它是所有代码更改后的最终结果。更改后需要运行下面给出的命令来推送AppCenter CodePush中的更改，页面仍然是空的如下所示，</strong></li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nq"><img src="../Images/5169626c40f5b210cd2aeea953cc8af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LuR0Q6V70hsQW6MK9uHHBg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">CodePush应用程序中心控制台</figcaption></figure><ul class=""><li id="e15b" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">释放代码，从此命令<br/> </strong> <code class="fe nj nk nl nm b">appcenter codepush release-cordova -a &lt;username&gt;/&lt;app-name(CodePushDemo)&gt; -d staging</code></li></ul><p id="2e28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在成功运行该命令之后，类似这样的消息将显示在终端中，其确定代码推送更新的成功发布，</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/768abff5cbfd236a49685fe616b8fe09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3cqt5_yGQeoVyNTNpvWssg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在应用中心代码推送中推送更新</figcaption></figure><p id="f3ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看应用程序中心代码推送部分，会列出如下所示的应用程序更新，</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ob"><img src="../Images/2edf12e56a2a4f32670eeaf66a669580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-KX9AwXgz6u7Nj1nbxEoFQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">带有版本的代码推送控制台应用程序列表</figcaption></figure><ul class=""><li id="b840" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk ng ml mm mn bi translated"><strong class="jp ir">检查应用程序的更新，让我们看看应用程序是否能够成功接收更改，</strong>(敏感文本(应用程序密码和代码按键)隐藏在红色方框后面)</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nw"><img src="../Images/52e4082de8aea9bc552363e43f6d3125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fN3_RfPpsVRth2whL5nh1w.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">接收代码推送更新chrome://inspect设备</figcaption></figure><h1 id="c49d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">如果你想知道为什么app更新不显示在屏幕上？</strong></h1><p id="bac8" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">这是因为我在应用程序中编写了更新代码的逻辑。同样的逻辑在<code class="fe nj nk nl nm b">onDeviceReady</code>事件中给出。为了看到变化，我必须重启应用程序，</p><p id="1856" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">重启我的应用程序后，这是应用程序的外观，</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ns"><img src="../Images/55ffbb4e5463fcfebc410a423ab13b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IDGnFAS13rTX8XHDMqtXew.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">无需重新安装的更新应用程序</figcaption></figure><blockquote class="oc od oe"><p id="799e" class="jn jo mo jp b jq jr js jt ju jv jw jx of jz ka kb og kd ke kf oh kh ki kj kk ij bi translated">注意:如果你想更深入地研究这个主题，这里有微软的官方链接</p><p id="13b1" class="jn jo mo jp b jq jr js jt ju jv jw jx of jz ka kb og kd ke kf oh kh ki kj kk ij bi translated"><a class="ae oi" href="https://docs.microsoft.com/en-us/appcenter/distribution/codepush/cordova" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/app center/distribution/code push/Cordova</a></p></blockquote><h1 id="5019" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">摘要</h1><p id="c74b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我尝试总结了在应用程序中使用CodePush的步骤。从应用中心应用程序创建到应用程序更新。</p><p id="b7d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在当前的时间，由于整个世界所面临的可怕的悲观局势。每个人在项目中使用DevOps是绝对必要的。这是一个非常简单的应用中心功能演示。它是一个可以简化移动应用程序开发工作流程的优秀工具。</p></div></div>    
</body>
</html>