<html>
<head>
<title>Recommendations to avoid merge conflicts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">避免合并冲突的建议</h1>
<blockquote>原文：<a href="https://itnext.io/recommendations-to-avoid-merge-conflicts-845ec133676e?source=collection_archive---------1-----------------------#2018-10-31">https://itnext.io/recommendations-to-avoid-merge-conflicts-845ec133676e?source=collection_archive---------1-----------------------#2018-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ecd72779ec9aa756f998318ce12cb90d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kjxu4-xZIWPHB3u_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@fancycrave?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Fancycrave </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上演的《黑色织布机》</figcaption></figure><p id="2fdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常当您合并两个分支时，您的版本控制系统可以解决差异并自动合并它们。然而，当分支有竞争提交时，你的版本控制系统需要<strong class="kf ir">你的介入</strong>来决定在最终的合并中合并哪些变更。打招呼合并冲突。</p><p id="4c6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我讨论了一组对我很有用的建议，它们最大限度地减少了合并冲突的数量，或者至少减少了解决冲突的难度和时间。</p><h1 id="8c87" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">那听起来不太坏</h1><p id="f39d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">不应轻视合并冲突的几个原因是:</p><ul class=""><li id="6319" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">他们<strong class="kf ir">花钱</strong>。开发人员花费在解决可避免的合并冲突上的时间是浪费时间。既然时间就是金钱，合并冲突就要花钱。</li><li id="71a4" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">他们制造挫败感。当合并冲突发生时，在最坏的情况下，所有这些活动可能已经发生了:</li></ul><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="7f0d" class="nb lc iq mx b gy nc nd l ne nf">1. Developer(s) has created a new feature.<br/>2. Other developers code reviewed that feature.<br/>3. Developer(s) addressed CR comments.<br/>4. Developer(s) tested the feature.<br/>5. QA tested the feature.</span><span id="dafa" class="nb lc iq mx b gy ng nd l ne nf">When a merge conflict happens, the process from above needs to be re-done after the conflicts are resolved. Best case scenario it restarts from <strong class="mx ir">4</strong>, worst case scenario starts from <strong class="mx ir">1</strong> if the conflicts include conflicting business logic.</span></pre><ul class=""><li id="0bb4" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">它们增加了衰退的可能性。这一点尤其重要，因为合并冲突往往发生在开发周期的末尾(如果你使用Scrum的话，就是Sprint ),对问题做出反应的时间更少。</li><li id="bd92" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">在分布式团队中，合并冲突更有可能发生并且更有影响。</li></ul><h1 id="0d4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">哪些方面导致了合并冲突？</h1><p id="09ba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">根据我的个人经验，以下是一些增加合并冲突可能性的非技术方面:</p><p id="8421" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">a.处理<strong class="kf ir">大功能</strong>。<br/> b. <strong class="kf ir">大型</strong>开发<strong class="kf ir">团队</strong>。<br/> c. <strong class="kf ir">分发</strong>开发<strong class="kf ir">团队</strong>。<br/> d. <strong class="kf ir">跨开发团队的无效沟通</strong>。如果其他方面存在，这更有可能发生。</p><p id="d502" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就个人而言，我必须承认，我是在一个有a-c存在的环境中发布后开始写这篇文章的，在那里我们也遇到过几次d:</p><p id="ab59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">a.我们制作了一部主要的电影。我们是两个团队，每个团队有5名和4名开发人员(你可能会说这不是一个大团队),一起工作。我们分布在3个不同的时区:CST、EST和CEST。</p><h1 id="8563" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">研究</h1><p id="da46" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我通过两条研究路线来解决这个问题:</p><ol class=""><li id="a40c" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la nh mk ml mm bi translated">看看是否有特定的分支策略可以缓解这个问题。为了这一部分，我查阅了脸书和微软等大型科技公司以及Trello、Basecamp和Toptal等远程公司的工程博客。<br/>我发现了微软的两个非常有趣的帖子，推荐阅读:i) <a class="ae kc" href="https://msdn.microsoft.com/en-us/library/bb668955.aspx" rel="noopener ugc nofollow" target="_blank">定义你的分支和合并策略</a>和ii) <a class="ae kc" href="https://msdn.microsoft.com/en-us/library/aa730834%28v=vs.80%29.aspx" rel="noopener ugc nofollow" target="_blank">分支和合并初级读本</a>。</li><li id="0c59" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la nh mk ml mm bi translated">Hudl有很强的远程文化。我的大多数同事都有在分布式团队中工作的经历。因此，我联系了 <a class="ae kc" href="https://www.hudl.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> Hudl </strong> </a>的<strong class="kf ir">其他开发人员，他们在像我这样的分布式远程环境中工作，向我学习他们的经验。如同第1点。找不到银弹选项。然而，这些对话促成了本文中列出的建议。</strong></li></ol><h1 id="b1ed" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">研究成果</h1><p id="d6a8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">正如您可能已经意识到的那样，在消除合并冲突方面没有什么灵丹妙药。我发现的最有效的预防方法是:</p><ol class=""><li id="ffc5" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la nh mk ml mm bi translated"><strong class="kf ir">尽快提高对潜在冲突领域的认识</strong>。</li><li id="52f0" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la nh mk ml mm bi translated">创建并处理<strong class="kf ir">小任务</strong>，这样发生有影响的合并冲突的几率就会降低。</li><li id="8286" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la nh mk ml mm bi translated"><strong class="kf ir">经常同步</strong>你的特色分支<strong class="kf ir"/>。</li></ol><p id="35d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一节中可以找到更全面的建议列表。如前所述，没有灵丹妙药。你可能知道列表中的大部分项目，如果不是全部的话。但是我仍然认为把它们放在一个地方是有用的，这样更容易参考和记忆。</p><h1 id="a9a6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">最小化合并冲突的发生和影响的建议</h1><p id="06af" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><em class="ni">注意:此列表中的一些项目假设使用</em><a class="ae kc" href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow" rel="noopener ugc nofollow" target="_blank"><em class="ni">git flow</em></a><em class="ni">作为分支策略。</em></p><ul class=""><li id="e790" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated"><strong class="kf ir">未雨绸缪:</strong>尽早识别潜在的冲突领域。如果你使用Scrum，使用你的计划、提炼和站立来识别这些重叠的区域。如果你使用任何其他方法，无论何时你计划或思考你和你的同事下一步要做什么。</li><li id="4525" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">如果预见到有问题的合并冲突，评估<strong class="kf ir">不同的故事/任务分解方法</strong>是否可以避免它们。在那种情况下，你可能会发现<a class="ae kc" href="https://pbs.twimg.com/media/DDwWjn_XcAEyPcW.jpg" rel="noopener ugc nofollow" target="_blank">神盾局</a>会有所帮助。</li><li id="2f92" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir">越小的任务&amp;功能</strong>，合并冲突的几率就越小。</li><li id="6209" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">尽快合并你的特征分支。如果他们完成了，不要让他们挂在那里。<br/>如果您的团队认为可以增加一项增强功能，那么合并您当前的分支(如果它已经增加了价值),并为该增强功能创建一个新的分支。</li><li id="14a3" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir">经常将特征分支与主同步</strong>。</li><li id="6e5d" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir">不要分支过深</strong>。您将增加执行每个合并和解决潜在冲突的时间。意思是，避免这样的情况:</li></ul><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/973b79dc5c3ca01ef8b58c4179a4a228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*6Hxzpe5vCu6TEApSc979aA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">不要分支太深</figcaption></figure><ul class=""><li id="562b" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">构建你的分支树，这样你就<strong class="kf ir">最小化了兄弟分支重叠的机会</strong>。你的目标应该是沿着层级合并；即，将子节点合并到父节点，而不是2个兄弟分支。</li><li id="59d4" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">请注意<strong class="kf ir">计划并行的工作越多，合并冲突的可能性就越大。</strong></li><li id="af28" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">如果合并冲突<strong class="kf ir">不可避免，提前计划一些时间</strong>以确保你正确地解决它们和它们潜在的副作用。</li></ul><p id="f8ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这在团队规模和分布的所有情况下对我们都很有效。什么对你很有效？请留下你的评论，一如既往，欢迎反馈！Twitter也永远是一个选择；)<a class="ae kc" href="https://twitter.com/JuanjoRamos82" rel="noopener ugc nofollow" target="_blank"> @JuanjoRamos82 </a></p><p id="f399" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ni">本文原贴于Hudl </em>  <em class="ni">中的</em> <a class="ae kc" href="https://medium.com/in-the-hudl/recommendations-to-avoid-merge-conflicts-62ebd73db969" rel="noopener"> <em class="ni">。</em></a></p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="9998" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不是这样，那就有更大的问题了。</p></div></div>    
</body>
</html>