<html>
<head>
<title>Go Micro on Kubernetes: Getting started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes上的Go Micro:入门</h1>
<blockquote>原文：<a href="https://itnext.io/go-micro-on-kubernetes-getting-started-2959dd6c2d4f?source=collection_archive---------0-----------------------#2020-12-08">https://itnext.io/go-micro-on-kubernetes-getting-started-2959dd6c2d4f?source=collection_archive---------0-----------------------#2020-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="41a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">TL；DR </strong>:如何在Kubernetes集群上开始开发和部署带有Go Micro生态系统的微服务。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/09ef70c6ba511ea1f3d6f8429721d9ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PZlX-qxzniQjXd_U4RIt6w.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Go规则中的微服务！</figcaption></figure><h1 id="b664" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">介绍</h1><p id="37a9" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated"><a class="ae mh" href="https://micro.mu/" rel="noopener ugc nofollow" target="_blank"> Go micro </a>是一个微服务生态系统，用于开发没有“胶水”样板代码(注册、认证、代理等)的微服务</p><p id="7ad9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只需关注您的业务逻辑代码(又名“处理程序”)。</p><p id="119d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了它的最新版本v3，开发微服务变得相当容易。</p><p id="3dbb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个生态系统，因为go-micro超越了一个框架。它包括认证、代理(发布/订阅)、KV存储、API代理、gRPC代理等几个核心服务。</p><p id="8cb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">默认的消息协议是<a class="ae mh" href="https://grpc.io/" rel="noopener ugc nofollow" target="_blank"> gRPC </a>。</p><p id="47ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">gRPC使用基于数据模式、协议缓冲区的高效数据二进制编码。它最小化了消息处理及其大小。</p><p id="35a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以使用现成的核心微服务，也可以指定您自己的微服务(即Kafka作为代理)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mi"><img src="../Images/8e17c34f08a7a644484dee5b0f41a5ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KwC2Cmiu0e5xotPNo8laA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">抄袭自微. mu网站</figcaption></figure><p id="619c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Micro是带着“特殊-半开源”许可证发布的。除了将业务产品作为服务(避免AWS、GCP等)，您可以做任何您想做的事情。类似于合流许可。</p><h1 id="20c1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">动机</h1><p id="9690" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">我写了这个“入门”指南，因为有关于开始使用Micro进行开发或在本地环境中使用的文档，但没有关于使用Kubernetes的云的文档(至少在v3版本中)。</p><p id="b3b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们刚刚推出了一个“helloworld”微服务，并在我们的Kubernetes集群中访问它。</p><h1 id="1488" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">先决条件</h1><p id="4b13" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">你需要一个活跃的Kubernetes集群。</p><p id="5d89" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你还没有，并且想要一个在云中，关注<a class="ae mh" href="https://jmrobles.medium.com/how-to-create-a-kubernetes-cluster-with-rancher-on-hetzner-3b2f7f0c037a" rel="noopener">这篇文章</a>，在Hetzner上创建一个便宜的Kubernetes集群。</p><div class="mj mk gp gr ml mm"><a href="https://jmrobles.medium.com/how-to-create-a-kubernetes-cluster-with-rancher-on-hetzner-3b2f7f0c037a" rel="noopener follow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">如何创建一个库伯内特集群与赫茨纳牧场主</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">TL；DR:15分钟内，你就可以有一个实验室集群准备好测试或部署你的项目，既便宜又容易。</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">jmrobles.medium.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ky mm"/></div></div></a></div><h1 id="55ae" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们走吧！</h1><p id="5cba" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">我们开始在集群中安装“micro”。之后，我们编码并部署我们的“hello world”。最后，我们创建一个入口并测试它。</p><h2 id="6b1a" class="nb lf it bd lg nc nd dn lk ne nf dp lo kb ng nh ls kf ni nj lw kj nk nl ma nm bi translated">1.在我们的K8S集群中安装Micro</h2><p id="c5da" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">您可以安装微与舵图表应用以下YAML(它是相同的图表中包括)。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="055d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个YAML创建几个角色绑定、PV、PVC，最后执行“微”作业。都在名称空间“micro”下。</p><p id="53bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注</strong>:对于PV/PVC，使用“hcloud-storage”作为CSI驱动程序。这个驱动程序是针对Hetzner CSI插件的。换你的。</p><p id="8790" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们用“应用”方式应用它之后</p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="f74a" class="nb lf it nq b gy nu nv l nw nx">% kubectl apply -f micro-setup.yaml</span></pre><p id="bd3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以发现核心微服务单元正在运行。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/e886a2efac651b6d0a49fea1b09cf36c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0PYV0j7D357Ut0VLZASqPw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Rancher的屏幕截图，带有微pods列表</figcaption></figure><p id="13b3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">听起来不错！</p><p id="a9f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">是时候给我们的“hello world”编码了。</p><h2 id="3447" class="nb lf it bd lg nc nd dn lk ne nf dp lo kb ng nh ls kf ni nj lw kj nk nl ma nm bi translated">2.构建“hello world”微服务</h2><p id="5d1c" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">“Hello World”的代码包含在微文档中。</p><p id="6658" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只需克隆库<a class="ae mh" href="https://github.com/micro/services" rel="noopener ugc nofollow" target="_blank">https://github.com/micro/services</a>并访问文件夹“helloworld”。</p><p id="327d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nz oa ob nq b">main.go</code>很简单。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="d808" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">代码是不言自明的。</p><p id="2a45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们创建一个名为“helloworld”、版本为“latest”的新服务(顺便说一句:“latest”不是版本，而是一个标签。请改用<a class="ae mh" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank"> semver </a>。</p><p id="f61c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在第19行，我们将微服务器和处理程序注册到协议缓冲区(pb)存根中。我们现在谈谈这个。</p><p id="f40e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们进入服务循环。</p><p id="9d57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里的关键是我们的协议缓冲微存根(API)和在处理程序中实现的方法(实现)。</p><p id="d46c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于gRPC我就不赘述了。如果你想知道更多，网上有很多信息。</p><p id="acfe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在gRPC (PB)中，一切都从协议规范开始。</p><p id="4803" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于我们的微服务,“原型”规范非常简单。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="16c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个API定义只声明了一个方法，调用。我们只需传递一个“名字”,就会收到一条问候消息。</p><p id="2367" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在生成存根之前，您需要安装<code class="fe nz oa ob nq b">proto</code>工具及其插件(go和micro)。要安装它，只需执行下一个<code class="fe nz oa ob nq b">go get</code></p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="f373" class="nb lf it nq b gy nu nv l nw nx">% go get -u github.com/golang/protobuf/proto<br/>% go get -u github.com/golang/protobuf/protoc-gen-go<br/>% go get github.com/micro/micro/v3/cmd/protoc-gen-micro</span></pre><p id="0222" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">(如果您在安装protocol-gen-micro时遇到问题，请设置<code class="fe nz oa ob nq b">GO111MODULE=on</code></p><p id="2303" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们为Go stab和微插件stab编译API规范，安装并执行以下命令。</p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="04a1" class="nb lf it nq b gy nu nv l nw nx">% protoc --proto_path=. --micro_out=. --go_out=:. proto/helloworld.proto</span></pre><p id="9a82" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果一切顺利，这个命令会生成两个文件:<code class="fe nz oa ob nq b">helloworld.pb.go</code>和<code class="fe nz oa ob nq b">helloworld.pb.micro.go</code>。</p><p id="011c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只剩下看操作者了。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="7637" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">hander只是实现了<code class="fe nz oa ob nq b">Call</code>方法。它注册一条日志消息并返回一条问候消息。</p><p id="dd4c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们可以编译它了。</p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="1d43" class="nb lf it nq b gy nu nv l nw nx">% CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o helloworld *.go</span></pre><p id="5a46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并生成我们简单的Docker容器。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="e7c3" class="nb lf it nq b gy nu nv l nw nx">% docker build -t jmrobles/micro-helloworld .</span></pre><p id="383a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在使用之前，我们需要推送至Docker Hub注册表(或任何你想要的东西)。</p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="3d9b" class="nb lf it nq b gy nu nv l nw nx">% docker push jmrobles/micro-helloworld</span></pre><p id="668d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注意</strong>:如果想跳过容器生成，运行微服务，可以直接使用这个<a class="ae mh" href="https://hub.docker.com/repository/docker/jmrobles/micro-helloworld" rel="noopener ugc nofollow" target="_blank">容器</a>。</p><h2 id="704b" class="nb lf it bd lg nc nd dn lk ne nf dp lo kb ng nh ls kf ni nj lw kj nk nl ma nm bi translated">3.在Kubernetes的部署</h2><p id="c34f" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">在继续在kubernetes中安装pod之前，让我们看看微服务如何在kubernetes中相互通信。</p><p id="dc47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">微服务“环”中的微服务认证是使用API密钥和API秘密来完成的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/f13a98a2b4edcc18d6e9046e711207a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qytwPxkUn_qEwf9F3DqyXA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">所有的“戒指”使用相同的钥匙</figcaption></figure><p id="2a6c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所有微服务使用相同的<code class="fe nz oa ob nq b">MICRO_AUTH_PUBLIC_KEY</code>和<code class="fe nz oa ob nq b">MICRO_AUTH_PRIVATE_KEY</code>。</p><p id="c935" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以重用核心服务(例如API)的秘密，或者复制并创建您自己的秘密。</p><p id="cc12" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的部署和服务YAML。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="2640" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里重要的是微观环境变量。这些告诉你网络代理在哪里，认证等等。</p><p id="04d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注意</strong>:此环境变量未记录。它们不一定都是必要的，也可能会改变。最好有官方文档:)</p><p id="e776" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们应用它。</p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="1402" class="nb lf it nq b gy nu nv l nw nx">% kubectl apply -f deploy-helloworld.yaml</span></pre><p id="816b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果没有问题，我们的微服务就会运行。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi od"><img src="../Images/353f507e0402b3f2cfab647afbe3e3d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8hy6_TX-rKpJ_g40inqKA.png"/></div></div></figure><p id="898c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它的日志必须类似于以下内容</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/1200817ef0b5d830e5058e76d443efed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tw_difSnHimCmBbny21c5Q.png"/></div></div></figure><p id="7659" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">是时候测试一下了！</p><h2 id="88b4" class="nb lf it bd lg nc nd dn lk ne nf dp lo kb ng nh ls kf ni nj lw kj nk nl ma nm bi translated">4.从CLI测试</h2><p id="e714" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">我们可以从任何服务容器中测试它。</p><p id="7887" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只需执行一个shell，登录并进行调用</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/c9daa9625ef7c8f0d10d2b7f10134b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qj6Ai6VBf62y6tDhK2YQEQ.png"/></div></div></figure><p id="0bdb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">刚刚好！</p><p id="15d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们也可以检查日志。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/527feeabc7ebf5244f279f9e82797248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dw8jR03bTOFrT6uNHuQopg.png"/></div></div></figure><h2 id="cb27" class="nb lf it bd lg nc nd dn lk ne nf dp lo kb ng nh ls kf ni nj lw kj nk nl ma nm bi translated">5.通过带入口的API访问</h2><p id="4b7c" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">最后，我们将通过ingress公开我们的微服务。</p><p id="2c32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">API微服务允许通过REST JSON访问其他微服务。</p><p id="c58e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">自动地。您不需要编写任何进一步的样板代码！</p><p id="7e18" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我的例子中，我使用Let's加密SSL证书(使用cert-manager)。</p><p id="7c9c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是我使用这项服务的入口</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="65fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们用cURL测试它</p><pre class="kp kq kr ks gt np nq nr ns aw nt bi"><span id="9c2d" class="nb lf it nq b gy nu nv l nw nx">% curl "https://yourhost/helloworld?name=Pepe"<br/>{"msg":"Hello Pepe"}</span></pre></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><h1 id="d27e" class="le lf it bd lg lh oo lj lk ll op ln lo lp oq lr ls lt or lv lw lx os lz ma mb bi translated">结论</h1><p id="847f" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">我认为Micro是一个非常棒的微服务生态系统。很多使用它的微服务都在生产中。</p><p id="52f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，它的文献很少。</p><p id="497b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望你喜欢这个指南。我可能会写更多关于用这个框架开发微服务的内容。敬请期待！</p><p id="a535" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想了解更多关于DevOps，Kubernetes，Docker等等…关注我:)</p></div></div>    
</body>
</html>