<html>
<head>
<title>Understanding Webhooks in Headless CMS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Headless CMS中的Webhooks</h1>
<blockquote>原文：<a href="https://itnext.io/understanding-webhooks-in-headless-cms-71e62fdf365b?source=collection_archive---------4-----------------------#2020-07-29">https://itnext.io/understanding-webhooks-in-headless-cms-71e62fdf365b?source=collection_archive---------4-----------------------#2020-07-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="c22b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现代发展以多种方式改变了通信。随着事情的发展，与人有效沟通的愿望开始出现。</p><p id="7031" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了达到我们所需要的这种通信需求，我们需要找到一种方法让技术相互交流。</p><p id="91f1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是webhooks发挥作用的地方。</p><p id="33bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与通过API方法设置相比，在一个Headless CMS中设置webhooks更容易、更快、更划算。</p><p id="feb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇文章中，我们将看看如何使用<a class="ae ko" href="https://agilitycms.com/" rel="noopener ugc nofollow" target="_blank"> Agility CMS </a>来设置webhooks，这是一个带有JAMstack的无头CMS。它与现代高速网站框架无缝集成，实现高性能数字体验。</p><p id="00b8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇文章将对你有用，如果；</p><ul class=""><li id="e9d3" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn ku kv kw kx bi translated">你知道API和Webhook的区别，否则，看看这段4分钟的<a class="ae ko" href="https://agilitycms.com/resources/posts/-api-vs-webhooks-what-s-the-difference" rel="noopener ugc nofollow" target="_blank">片段</a>。</li><li id="b62f" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated">您已经构建了实时应用程序，可以在事件发生时或使用API立即交付数据。</li><li id="569f" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated">您已经在使用第三方应用程序构建webhooks，并且您想要检查替代方案。</li></ul><p id="6c4f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将看看如何在Agility CMS中使用Webhooks构建一个实时的、基于事件的简单应用程序。</p><p id="e06c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们开始吧！</p><p id="9ed7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注意</strong>:本文假设你已经熟悉了Node.Js的基础知识</p><h1 id="ea87" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">什么是WebHooks？</h1><p id="996e" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">Webhooks是每次事件发生时自动发送的消息。它们有一个独特的使命:将消息或数据传输到一个独特的地址或URL。是应用程序向其他应用程序提供实时信息的一种方式。它在事件发生时或几乎立即传送数据。</p><h1 id="df6a" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">何时使用Webhooks</h1><p id="0455" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">Webhooks通常充当较小数据的信使。它有助于发送和提取实时更新。</p><p id="475d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用webhook的最合适的场景之一是当你的应用或平台需要实时特性，而你不想使用API时，因为你不想在这个过程中与设置纠缠在一起并浪费资源。在这种情况下，webhook框架将是最有益的。</p><p id="b9d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用webhook的另一个最佳用例是没有提供API或者可用的API不是最合适的，在这种情况下可以使用webhook。</p><p id="c772" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Webhooks可以被视为基于API的应用集成的完美补充，有时甚至是必不可少的补充。</p><p id="ad50" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这可用于在Slack中设置通知工作流，自动将静态网站重新部署到Netlify，以及各种其他自动化用例。</p><h1 id="4543" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">Webhooks的优势</h1><ul class=""><li id="a872" class="kp kq it js b jt mb jx mc kb mg kf mh kj mi kn ku kv kw kx bi translated">它有助于清除和管理外部系统(如网站、移动应用程序或数据库)中的自定义缓存。</li><li id="df84" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated">它提供了一种与第三方系统(如Salesforce、Mailchimp等)集成的<em class="mj">同步</em>内容/数据的方式。</li><li id="847f" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated">它有助于构建自定义内容工作流。</li><li id="afa1" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated">使用webhooks可以在内容更新时启动CI/D管道来重新部署您的网站——这通常用于使用静态站点生成器构建的JAMstack站点。</li></ul><h1 id="ca03" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">在无头CMS中使用webhooks</h1><p id="0409" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">在本教程中，我们将看到如何在一个无头CMS中集成webhooks，我们的选择将是<a class="ae ko" href="https://agilitycms.com/" rel="noopener ugc nofollow" target="_blank"> Agility CMS </a>。</p><p id="a065" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Agility CMS是一个内置页面管理的JAMStack焦点无头CMS。更快地构建、管理和部署。Agility CMS是一个内容优先的无头CMS，允许您选择任何编程语言，同时还可以获得来自轻量级API的灵活性、速度和能力。从那里，你可以添加页面管理、电子商务、在线售票和搜索等功能。Agility CMS成为一个完整的数字体验平台——节省时间，消除限制，并允许跨所有数字渠道的无缝体验。</p><h1 id="b2ca" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">用Agility CMS实现Webhooks</h1><p id="597f" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这通过向Agility CMS提供一个列表或URL端点来实现。每次CMS中的内容发生变化时，Agility都会将变化通知给每个端点，并传递一条消息来表示发生的确切变化。</p><h1 id="62ee" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">如何添加Webhook端点</h1><p id="19d1" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">为了添加webhook，您必须能够访问启用了<strong class="js iu">内容获取API </strong>的Agility CMS实例。开始在<a class="ae ko" href="https://account.agilitycms.com/sign-up?product=agility-free" rel="noopener ugc nofollow" target="_blank"> Agility CMS </a>上免费注册。</p><ol class=""><li id="97b1" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">接下来，在Agility CMS中，导航到<strong class="js iu">设置&gt;定制/开发&gt; Webhooks </strong>。</li></ol><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ml"><img src="../Images/e6b2c9da927ab14c85378f4da0e6e15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DkwOYRLToyPdhWNL.png"/></div></div></figure><ol class=""><li id="f893" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">点击<strong class="js iu">添加(+) </strong>添加一个webhook端点。</li></ol><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mx"><img src="../Images/41c13e70feb0d39f823e1d3b2a44c72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yvAt81D_ctOro3KG.png"/></div></div></figure><p id="ff9c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.在此添加您的端点</p><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi my"><img src="../Images/c551b7189692019390157649a0c68323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0LWd6bLIadu8mYKV.png"/></div></div></figure><p id="ff31" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<strong class="js iu"> Webhook </strong> details弹出菜单中，输入您要向其发送事件的<strong class="js iu"> Url </strong>端点。</p><p id="1907" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于测试，我们推荐使用免费的服务，比如https://requestbin.com，它允许你设置一个端点并监控发送到那里的消息。</p><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mz"><img src="../Images/d6bff8c83452bda9bcad413be431dc54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VHmRABw7RRuca87d.png"/></div></div></figure><ol class=""><li id="c8b6" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">注册/登录他们的服务后，我们得到一个可以使用的Url。</li></ol><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mx"><img src="../Images/29992992c0506538ad62926c05c85d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zGgXf6ab05gQFLm0.png"/></div></div></figure><ol class=""><li id="8001" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">接下来，选择这个webhook应该订阅什么类型的<strong class="js iu">事件</strong>。您可以选择订阅所有事件(发布、工作流批准和内容保存)或仅选择您需要的类型。</li></ol><ul class=""><li id="9560" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn ku kv kw kx bi translated">复制给你的<strong class="js iu"> URL </strong>并粘贴到你的敏捷实例webhook页面。</li></ul><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi na"><img src="../Images/8ea6dcbc8a317ff3e249ccf8b011a894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HU23a22E1XY1Kn-W.png"/></div></div></figure><ol class=""><li id="900e" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">当你准备好了，点击<strong class="js iu">发送测试负载</strong>按钮来测试你的webhook端点。这将向您定义的端点<strong class="js iu"> Url </strong>生成一个示例请求，并记录结果。</li></ol><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/a4feb9710cc56b4babb72b8188b42975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/0*STOkDHNIS0UXRZCy.png"/></div></figure><ol class=""><li id="228b" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">如果您创建了一个<strong class="js iu">请求绑定</strong>端点，那么您可以验证发送到那里的有效负载。</li></ol><figure class="mm mn mo mp gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi nc"><img src="../Images/21be7ce812c0d1015feb9ffefeccc0a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6zzIh8LuLuSwPkOI.png"/></div></div></figure><ol class=""><li id="8564" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn mk kv kw kx bi translated">准备好后，点击<strong class="js iu">保存</strong>保存你的webhook。</li></ol><h1 id="46eb" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">有效负载详细信息</h1><p id="4ef9" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated"><strong class="js iu">页面事件</strong></p><p id="6dfc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">保存时:</strong></p><figure class="mm mn mo mp gt mq"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c476" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">发布时:</strong></p><p id="5937" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">内容事件</strong></p><figure class="mm mn mo mp gt mq"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="4d28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">保存时:</strong></p><figure class="mm mn mo mp gt mq"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="cb36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">发布时:</strong></p><figure class="mm mn mo mp gt mq"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="71ad" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="4085" class="pw-post-body-paragraph jq jr it js b jt mb jv jw jx mc jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">在本文中，我们看到了如何使用Agility CMS将webhooks无缝集成到一个无头CMS中。你会同意我的观点，与使用API相比，这要简单得多。</p><p id="ca20" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我想看看你在评论区提出了什么，也许你更喜欢另一种方法和为什么。</p><h1 id="9fc3" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">资源</h1><ul class=""><li id="c3c0" class="kp kq it js b jt mb jx mc kb mg kf mh kj mi kn ku kv kw kx bi translated"><a class="ae ko" href="https://agilitycms.com/resources/posts/-api-vs-webhooks-what-s-the-difference" rel="noopener ugc nofollow" target="_blank"> API vs WEBHOOKS:有什么区别</a> —敏捷CMS</li></ul></div></div>    
</body>
</html>