<html>
<head>
<title>Why SaaS Products Should Conduct Thorough Performance Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么SaaS产品应该进行全面的性能测试</h1>
<blockquote>原文：<a href="https://itnext.io/why-saas-products-should-conduct-thorough-performance-testing-9a618e14257a?source=collection_archive---------3-----------------------#2022-10-25">https://itnext.io/why-saas-products-should-conduct-thorough-performance-testing-9a618e14257a?source=collection_archive---------3-----------------------#2022-10-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c1ebd105085336f208ccbb54cee16b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rE_6eoFUvI-1g00Z"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/photos/Pnm-9vBEQhk" rel="noopener ugc nofollow" target="_blank">来源</a>不溅</figcaption></figure><p id="cdcf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">软件即服务(SaaS)是三种最广泛存在的云服务模式之一，逐渐将传统软件逐出市场。SaaS的现收现付商业模式简单明了，适应性强，性价比高，吸引了越来越多的用户。</p><p id="80cd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，随着SaaS的发展，更多的问题出现了。2020年12月的一次事故是由世界上最受欢迎的SaaS服务之一谷歌用户的中断引起的。该事件导致全球许多网站瘫痪，包括Youtube、Gmail等。，甚至还撞上了<a class="ae kf" href="https://www.nytimes.com/2020/12/14/business/google-down-worldwide.html" rel="noopener ugc nofollow" target="_blank">纽约时报</a>。</p><p id="44a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">再来看看除了谷歌用户之外的其他问题。在谷歌宕机前不久，AWS刚刚经历了由Kinesis数据流引起的24小时宕机，这也影响了许多用户。​</p><p id="932d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些事件，无论大小，都会侵蚀用户的信任，阻止他们全力投资SaaS。毫无疑问，一个可靠的SaaS不仅应该是强大和多功能的，而且应该是稳定和值得信赖的。这就是为什么我们应该在应用SaaS之前进行彻底的<a class="ae kf" href="http://www.blazemeter.com/blog/performance-testing-vs-load-testing-vs-stress-testing" rel="noopener ugc nofollow" target="_blank">性能压力测试</a>。​</p><p id="fc50" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据<a class="ae kf" href="https://en.wikipedia.org/wiki/Software_performance_testing" rel="noopener ugc nofollow" target="_blank">维基百科</a>，<strong class="ki iu"> </strong>“一般来说，性能测试是一种测试实践，用于确定系统在特定工作负载下的响应能力和稳定性。”</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/412e880d4e10684895b30b925e36e677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Oiw74Jz4a08AXlYt"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">按作者</figcaption></figure><p id="3581" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">彻底的性能测试需要八种典型的测试类型，每一种都可以帮助我们检测内部和外部的潜在问题，帮助我们最终构建更强大的软件。</p><p id="bb6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">性能压力测试显示SaaS的“上限”。</strong></p><p id="c141" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">负载测试通常用于测试软件的极限，使您能够了解功能或API的TPS/QPS，以及在该极限下的资源使用情况，因此我们可以制定计划，以防止当数量接近极限时系统崩溃。</p><p id="1764" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">性能压力测试提高了SaaS的稳定性。</strong></p><p id="78eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该软件通常在低压下表现完美，但我们想知道它在高压下的反应。这就是压力测试和浸泡测试的目的。</p><p id="99c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">了解软件在极端条件下的运行状态、运行时间、资源消耗，有助于提高系统稳定性和可靠性，有针对性地减少停机时间和概率。</p><p id="7cca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">性能压力测试确保新功能不会影响现有系统。</strong></p><p id="671f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们完成功能的迭代时，我们不确定这些功能集成到整体软件后是否会造成负面影响。像“这个设计合理吗？”这样的问题、‘什么是TPS/QRS？’、“使用了多少CPU/MEM？”，以及“该功能是否被隔离以避免影响现有功能？”会浮现在脑海里。隔离测试是为了确保添加的新特性不会影响现有系统。</p><p id="2f56" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">性能压力测试增加了系统的整体可用性。</strong></p><p id="57a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">外部因素也会影响软件的工作方式。数据更改、网络中断等。这些都可能是系统崩溃的一个因素。这就是互联网测试和配置测试可以提供帮助的地方，尤其是如果它们是在生产环境和高度相似的金丝雀环境下执行的话。</p><h1 id="eb1b" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">如何进行性能压力测试？</h1><p id="e5c3" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">性能测试不应该只是偶尔或一次性地进行。相反，它应该通过自动化测试来完成，并集成到CI/CD中。基于各种模块进行性能测试，然后进行监控和警报。​</p><p id="a448" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，如何进行性能测试取决于语言。JMeter + Maven是在Java中创建SaaS时最常用的性能测试技术。JMeter是性能测试的优秀工具，当与Maven(使用最广泛的Java打包工具)结合使用时，我们能够将性能测试无缝集成到任何CI/CD流程中。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/3d82342cc40e339055dc0da4c6db28e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AuOwvpRWBfPLtyV5"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">按作者</figcaption></figure><h2 id="b455" class="mm lj it bd lk mn mo dn lo mp mq dp ls kr mr ms lw kv mt mu ma kz mv mw me mx bi translated">JMeter + Maven</h2><p id="ecc5" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">JMeter是一个全功能的压力测试工具，支持在线、点对点、FTP、LDAP、远程和其他测试技术。它可用于所有类型的SaaS服务。​</p><p id="1656" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们以最常见的web API测试为例。首先，我们需要配置用户(线程)。​</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/48b7bd825ea9734bbc3f60433cb9e295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XLebhNTL9-DIKWLI"/></div></div></figure><p id="4ef5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">配置cookies、HTTP端口、请求类型、参数等。​</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/c8ad1637200eabc0d69a81ec960e64a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z8veSWQCrN-S5BQ0"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/59c4021f48f9b8537bbdbb902552fd06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wh0pslK9wgRxdf3V"/></div></div></figure><p id="35dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在配置完成之后，我们可以将测试计划导出到一个<code class="fe nb nc nd ne b">jmx</code>文件(XML格式)中，并将其放在Maven项目的资源下。​</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/6381278ea15808d71c4c8260a790960c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0FVse6Fmf-_71Sha"/></div></div></figure><p id="ef7f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，最简单的方法是使用<a class="ae kf" href="https://cwiki.apache.org/confluence/display/jmeter/JMeterMavenPlugin" rel="noopener ugc nofollow" target="_blank"> Maven JMeter插件</a>来运行测试。</p><pre class="le lf lg lh gt ng ne nh ni aw nj bi"><span id="1d3a" class="mm lj it ne b gy nk nl l nm nn">&lt;build&gt;<br/>    &lt;pluginManagement&gt;<br/>        &lt;plugins&gt;<br/>            &lt;plugin&gt;<br/>                &lt;groupId&gt;com.lazerycode.jmeter&lt;/groupId&gt;<br/>                &lt;artifactId&gt;jmeter-maven-plugin&lt;/artifactId&gt;<br/>                &lt;version&gt;2.8.5&lt;/version&gt;<br/>                &lt;executions&gt;<br/>                    &lt;execution&gt;<br/>                        &lt;id&gt;jmeter-tests&lt;/id&gt;<br/>                        &lt;goals&gt;<br/>                            &lt;goal&gt;jmeter&lt;/goal&gt;<br/>                        &lt;/goals&gt;<br/>                    &lt;/execution&gt;<br/>                    &lt;execution&gt;<br/>                        &lt;id&gt;jmeter-check-results&lt;/id&gt;<br/>                        &lt;goals&gt;<br/>                            &lt;goal&gt;results&lt;/goal&gt;<br/>                        &lt;/goals&gt;<br/>                    &lt;/execution&gt;<br/>                &lt;/executions&gt;<br/>            &lt;/plugin&gt;<br/>        &lt;/plugins&gt;<br/>    &lt;/pluginManagement&gt;<br/>&lt;/build&gt;</span></pre><p id="7878" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后执行<code class="fe nb nc nd ne b">mvn clean verify</code>得到测试结果。当然，如果你想要一个特定的HTML测试报告，我们可以利用xml-maven-plugin来转换它。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="66bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们将在网站上看到具体的统计数据，如TPS。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/f639ce56ef7429ac6965575a4ec574a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ay-D6WnuNUJ4khKc"/></div></div></figure><p id="1590" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果项目不使用Maven，我们也可以使用JMeter CLI来执行测试，并编写在CI/CD期间运行的shell脚本。举个例子，</p><pre class="le lf lg lh gt ng ne nh ni aw nj bi"><span id="0259" class="mm lj it ne b gy nk nl l nm nn">jmeter -n -t "Tenant-Load-From-SaaS-Boost.jmx" -JAPI_URL=0123456789.execute-api.us-west-2.amazonaws.com -JSAAS_BOOST_USER=admin -JSAAS_BOOST_PASSWORD=your_password</span></pre><p id="2072" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，您可以在命令行中获得文本输出。这个例子来自于aws提供的<a class="ae kf" href="https://github.com/awslabs/aws-saas-boost" rel="noopener ugc nofollow" target="_blank"> aws-saas-boost </a>项目。​</p><h1 id="12bd" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="6ff9" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">性能测试是有效交付SaaS的重要组成部分。每次性能测试的执行，以及随后的监控和警报，决定了SaaS的稳定性和可靠性，而不考虑功能的数量或实现它所使用的语言。</p><p id="c3d0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要准确理解软件的性能指标，对未来做出逻辑规划，性能压力测试也要以生产数据为基础。测试所有影响软件性能的内部和外部组件，并尽可能模拟客户在生产环境中的实际操作。</p></div></div>    
</body>
</html>