<html>
<head>
<title>How to create D3js v6 Timeline Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建D3js v6时间线图表</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-d3js-v6-timeline-1a32e586fe56?source=collection_archive---------1-----------------------#2021-02-10">https://itnext.io/how-to-create-d3js-v6-timeline-1a32e586fe56?source=collection_archive---------1-----------------------#2021-02-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fd78" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Go后端，发送JSON数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cd9611dd0e771d5854a61efd39111bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3amjsNbyzFd2gVmvs4tbJA.png"/></div></div></figure><p id="d7c4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">D3js是一个Javascript库，用于对数据进行图形化处理。在2020年，它被升级到版本6。</p><div class="lq lr gp gr ls lt"><a href="https://d3js.org" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">D3.js -数据驱动的文档</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">D3是一个用HTML、SVG和CSS可视化数据的JavaScript库。</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">d3js.org</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ks lt"/></div></div></a></div><p id="4407" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这给我们带来了一个小问题。官方示例库不使用Javascript，而是使用特殊的<em class="mi"> Observable Notebook语言。如今，要找到D3js图表的最新版本6示例并不容易。</em></p><p id="df8b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是这篇文章的原因。我找不到版本6时间表的工作示例，所以我决定做一个。</p><p id="6e15" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，这项工作是站在别人的肩膀上的。</p><p id="8c58" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们将使用我在Amelia Wattenberger的书中学到的策略，并在这些步骤的基础上进行构建:</p><ol class=""><li id="408f" class="mj mk it kw b kx ky la lb ld ml lh mm ll mn lp mo mp mq mr bi translated">访问数据</li><li id="9512" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">创建图表维度和比例</li><li id="c139" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">画画布</li><li id="f159" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">绘制数据</li><li id="d793" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">设置互动</li></ol><p id="e940" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">截至2021年2月8日，我们将使用最新版本的D3js，即版本6.5.0。我们将使用Go作为web服务器来模拟一些伪真实世界的后端数据发送。我们将使用Goland作为IDE。</p><p id="9180" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你只需要D3js信息，你可以跳过<em class="mi">准备项目</em>。和往常一样，你会在文章末尾找到Github资源库的链接。</p><p id="62a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个关于在Go中创建web服务器的更具描述性的教程。</p><div class="lq lr gp gr ls lt"><a href="https://medium.com/swlh/create-go-service-the-easy-way-iii-c84489cc1ee0" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">作为web服务器提供服务</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">提供HTML、CSS和Javascript文件</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="mx l me mf mg mc mh ks lt"/></div></div></a></div></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="fba6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个关于使用D3v6创建热图日历的附加教程。</p><div class="lq lr gp gr ls lt"><a rel="noopener  ugc nofollow" target="_blank" href="/d3-v6-calendar-heat-map-c709fe20e737"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">D3 v6日历热图</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">使用Go后端，发送JSON数据</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">itnext.io</p></div></div><div class="mc l"><div class="nf l me mf mg mc mh ks lt"/></div></div></a></div></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="6c02" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">准备项目</h1><p id="d08d" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">在Goland创建新项目，命名为<em class="mi"> medium_d3_timeline </em></p><ol class=""><li id="02ae" class="mj mk it kw b kx ky la lb ld ml lh mm ll mn lp mo mp mq mr bi translated">创建三个新目录:<strong class="kw iu"> css </strong>、<strong class="kw iu"> html </strong>和<strong class="kw iu"> js </strong>。</li><li id="3ced" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">下载最新的D3库并保存到这个<strong class="kw iu"> js </strong>目录中。在这个<strong class="kw iu"> js </strong>目录下创建新文件<code class="fe od oe of og b">homepage.js</code>。</li><li id="7a12" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">在<strong class="kw iu"> html </strong>目录下创建新文件<code class="fe od oe of og b">homepage.html</code></li><li id="0ca8" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">在<strong class="kw iu"> css </strong>目录下创建新文件<code class="fe od oe of og b">homepage.css</code></li><li id="fdaf" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">在主项目目录下新建三个文件:<code class="fe od oe of og b">main.go</code>、<code class="fe od oe of og b">homepage.go</code>、<code class="fe od oe of og b">timeline.go</code>和<code class="fe od oe of og b">log.go</code></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/55066e00f9db003c6a2072d6138d8820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tCSsqghf5bj45L3jbFXSXg.png"/></div></div></figure><h2 id="585c" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">更新main.go</h2><p id="d7de" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">下面是创建和运行web服务器服务的完整代码。如果你想知道每个部分的解释，请使用文章前面的链接。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="7ada" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">更新日志. go</h2><p id="42d2" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">这个文件只负责记录到控制台，这里没有太多代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="a4c4" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">更新主页. go</h2><p id="2354" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">这个文件只包含一个服务于主页的功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="6f8d" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">更新时间轴. go</h2><p id="a880" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">用下面的代码更新这个文件。这段代码是基础，我们将在此基础上继续构建。函数<code class="fe od oe of og b">getTimelineData()</code>会在未来生成一些伪随机数据并发送回浏览器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="c22f" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">初始测试</h1><p id="19e9" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">使用内置Goland功能或使用命令<code class="fe od oe of og b">go get -u all</code>同步所有Go模块。运行<code class="fe od oe of og b">main.go</code>，不要忘记将其设置为打包模式。如果一切顺利，我们准备走得更远。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="dd92" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">准备前端</h1><p id="17ed" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">切换到<strong class="kw iu">homepage.html</strong>并用下面的代码更新它。这里没有什么特别的，只是加载这两个javascript文件，创建heading和一个<code class="fe od oe of og b">&lt;div&gt;</code>元素，它将保存我们的时间线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="bb68" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">切换到<strong class="kw iu"> homepage.css </strong>并在下面插入代码。这将在工具提示中使用。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><p id="15a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">切换到<strong class="kw iu"> homepage.js </strong>并在下面插入代码。同样，没什么特别的，这段代码只是向<code class="fe od oe of og b">/get_timeline_data</code>发送一个JSON请求，并打印它返回的任何内容。</p><p id="75cf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过插入<code class="fe od oe of og b">d3.json</code> fetch方法(建立在标准javascript fetch方法之上),我们开始使用D3库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="1712" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">更新后端</h1><p id="1cec" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">现在切换到<strong class="kw iu"> timeline.go，</strong>，我们将在这里更新<code class="fe od oe of og b">getTimelineData()</code>函数。</p><p id="6419" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们解释之前。<code class="fe od oe of og b">TimelineData struct</code>将保存我们生成的数据，而<code class="fe od oe of og b">TimelineOutput struct</code>将保存我们对浏览器的响应数据。该响应数据将有三个子数据:<code class="fe od oe of og b">ProductionData</code>、<code class="fe od oe of og b">DowntimeData</code>和<code class="fe od oe of og b">PowerOffData</code>。想象一下，这些是机器的数据，可以有三种状态:关闭<em class="mi">(断电数据)</em>或开启，开启时产生<em class="mi">(生产数据)</em>或不产生<em class="mi">(停机数据)</em>。</p><p id="933e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些数据需要同时开始和结束。当生产开始时，其他两个必须关闭，反之亦然。在特定时间内，您只能有一种类型的数据。</p><p id="a6b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数将生成过去24小时的随机数据。这是更新后的<strong class="kw iu">时间表。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="2fcb" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">后端-前端通信测试</h1><p id="41f6" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">现在全部测试一下。在<code class="fe od oe of og b"><a class="ae ow" href="http://localhost./" rel="noopener ugc nofollow" target="_blank">http://localhost</a></code>运行项目并打开浏览器。打开您的控制台，您应该看到结果:三个数组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/e11012458f5729785652d32620b22047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVW-LbOcocWCj_PGvyhtiw.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="5396" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">更新前端</h1><p id="5ce5" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">打开<strong class="kw iu"> homepage.js </strong>，导航到<code class="fe od oe of og b">DrawTimeLine()</code>功能。</p><h2 id="7c85" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">存取数据</h2><p id="2a16" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">这很简单。为日期和值添加两个访问变量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="ff4c" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">设置尺寸</h2><p id="14bb" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">只需添加几行，让我们的时间表图表在屏幕上很好地展开。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="c25d" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">绘制画布</h2><p id="80db" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">这四行将为我们的时间表图表准备画布。<code class="fe od oe of og b">ViewBox</code>会让它负责任。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="bb0a" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">设定比例</h2><p id="740a" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">我们需要一个合适的比例。对于我们的时间表图表，我们将使用x轴的第一个和最后一个日期。那就是<code class="fe od oe of og b">chartsStartsAt</code>和<code class="fe od oe of og b">chartEndsAt</code>常数。对于y轴，我们将仅使用一个数值范围，在本例中为0和1，使用<code class="fe od oe of og b">d3.extent</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="dc9b" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">准备数据</h2><p id="ed61" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">我们将使用面积图绘制我们的数据(有许多选项可以选择，面积图对我来说似乎是最简单的)。</p><p id="a905" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将有三个数据生成器，用于所有三个不同的数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="c720" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">准备工具提示</h2><p id="8bcf" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">因为tooltip是可选的，所以我们将把所有关于tooltip的内容合并到一组代码中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure><h2 id="01e0" class="oi nh it bd ni oj ok dn nm ol om dp nq ld on oo ns lh op oq nu ll or os nw ot bi translated">绘制数据</h2><p id="8a84" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">这些是最后几行，以得出我们想要的结果。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="a5a2" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">没有工具提示的测试</h1><p id="c699" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">运行代码并导航到<a class="ae ow" href="http://localhost" rel="noopener ugc nofollow" target="_blank"> http://localhost </a>。你可以在下面的截图中看到时间表。</p><p id="b797" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每次刷新页面，时间线都会改变。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/399f5df6b70f961108f446a1a7d947ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CaIheAuEptLsjvO5M5CHww.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="22c6" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">添加工具提示</h1><p id="1f55" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">导航到之前添加的9行代码，用下面的代码更新它们。d3新增了两个功能:<code class="fe od oe of og b">mousemove</code>和<code class="fe od oe of og b">mouseout</code>。</p><p id="0879" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当悬停在图表上时(<code class="fe od oe of og b">mousemove</code>)，我们需要检查光标坐标并将x坐标转换为时间。我们将在工具提示中显示这个时间。</p><p id="4d47" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为我们还想显示悬停状态(生产、停机、断电)的开始和结束，所以有两个javascript函数来访问这两个值。</p><p id="4247" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当指针移出时，我们将隐藏工具提示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou ov l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="a026" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">用工具提示测试</h1><p id="6708" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">再运行一遍。这就是结果，你会看到的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/d25e0895186c178e93a2b4d21b67e503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DziqwmoWf64XNg0ikDbvdg.gif"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="4984" class="ng nh it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">摘要</h1><p id="eb38" class="pw-post-body-paragraph ku kv it kw b kx ny ju kz la nz jx lc ld oa lf lg lh ob lj lk ll oc ln lo lp im bi translated">你并不局限于三种不同的状态。你可以有尽可能多的不同状态。</p><p id="0122" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，一种状态不一定要在另一种状态开始时结束。如果你需要的话，可以有空白的地方。</p><p id="86c7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以有更多的时间表图表，一个接一个。数据可能是人，你可以这样画出他们的任务。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="0dc0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是完整代码的链接</p><div class="lq lr gp gr ls lt"><a href="https://github.com/petrjahoda/medium_d3_timeline" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">petrjahoda/medium _ D3 _时间轴</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">通过在GitHub上创建帐户，为petrjahoda/medium_d3_timeline开发做出贡献。</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">github.com</p></div></div><div class="mc l"><div class="pa l me mf mg mc mh ks lt"/></div></div></a></div></div></div>    
</body>
</html>