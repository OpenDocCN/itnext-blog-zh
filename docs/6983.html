<html>
<head>
<title>What’s new in MicroK8s v1.24?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MicroK8s v1.24有什么新功能？</h1>
<blockquote>原文：<a href="https://itnext.io/whats-new-in-microk8s-v1-24-cf9180bc6a82?source=collection_archive---------2-----------------------#2022-05-04">https://itnext.io/whats-new-in-microk8s-v1-24-cf9180bc6a82?source=collection_archive---------2-----------------------#2022-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="240b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能会看着<a class="ae kl" href="https://kubernetes.io/blog/2022/05/03/kubernetes-1-24-release-announcement/" rel="noopener ugc nofollow" target="_blank"> Kubernetes v1.24发布公告</a>，认为“这是一个乏味的发布”，你可能是对的！Kubernetes重新定义了基础设施的运营方式，现在正处于稳定性是其成功关键的阶段。只有微小的渐进变化才能让它的生态系统繁荣。</p><p id="dddb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">MicroK8s建立在Kubernetes的成功基础上，随着1.24版的发布，推出了一个不容忽视的Kubernetes发行版。下面是原因！</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/9a753cfb564bd15b989d6f187bd6a2b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nF_ARJYNO3udSQXdnrVPqg.png"/></div></div></figure><h1 id="37f1" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Mayastor高可用性存储</h1><p id="8bf3" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Kubernetes以非常高效和优雅的方式解决了一个非常具体的问题。它托管容器化的服务/工作负载，并在相当常见的条件下确保其高可用性。托管工作负载可以动态扩展，以满足需求的波动，并在出现故障时重新启动。Kubernetes负责所有可用主机上的网络和工作负载放置。简而言之，Kubernetes决定应用程序何时何地启动，并创建网络规则，以便同一应用程序的多个实例可以通过单个端点使用。</p><p id="2215" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">OpenEBS用Mayastor解决了分布式存储的问题。每个Kubernetes节点贡献其本地存储资源的一部分，Mayastor确保数据被透明地复制，以便它们在节点故障时仍然存在。</p><p id="71d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当Kubernetes和OpenEBS Mayastor结合使用时，可以确保应用程序及其使用的数据都是高度可用的。总的来说，这是一个非常吸引人的设置。尝试使用:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="206b" class="mg kz iq mc b gy mh mi l mj mk">sudo snap install microk8s --classic --channel=1.24/stable<br/>sudo microk8s enable mayastor</span></pre><p id="2888" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您将被要求<a class="ae kl" href="https://microk8s.io/docs/addon-mayastor" rel="noopener ugc nofollow" target="_blank">启用HugePages并加载</a> <code class="fe ml mm mn mc b"><a class="ae kl" href="https://microk8s.io/docs/addon-mayastor" rel="noopener ugc nofollow" target="_blank">nvme-tcp </a></code> <a class="ae kl" href="https://microk8s.io/docs/addon-mayastor" rel="noopener ugc nofollow" target="_blank">内核模块</a>。</p><p id="31d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ml mm mn mc b">mayastor</code>存储类中，您应该将您的永久卷声明发送到:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="2081" class="mg kz iq mc b gy mh mi l mj mk"># pod-with-pvc.yaml<br/>---<br/>apiVersion: v1<br/>kind: PersistentVolumeClaim<br/>metadata:<br/>  name: test-pvc<br/>spec:<br/>  storageClassName: mayastor<br/>  accessModes: [ReadWriteOnce]<br/>  resources: { requests: { storage: 5Gi } }<br/>---<br/>apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: test-nginx<br/>spec:<br/>  volumes:<br/>    - name: pvc<br/>      persistentVolumeClaim:<br/>        claimName: test-pvc<br/>  containers:<br/>    - name: nginx<br/>      image: nginx<br/>      ports:<br/>        - containerPort: 80<br/>      volumeMounts:<br/>        - name: pvc<br/>          mountPath: /usr/share/nginx/html</span></pre><p id="939e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，要完成HA设置，您需要将至少三个<a class="ae kl" href="https://microk8s.io/docs/clustering" rel="noopener ugc nofollow" target="_blank"> MicroK8s节点加入一个集群</a>。加入两个节点<code class="fe ml mm mn mc b">snap install microk8s</code>并调用它们</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="2506" class="mg kz iq mc b gy mh mi l mj mk">sudo <!-- -->microk8s add-node</span></pre><p id="721d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">…在第一个节点上。这将打印您需要在第二个节点上发出的命令，以启动“<a class="ae kl" href="https://microk8s.io/docs/clustering" rel="noopener ugc nofollow" target="_blank">创建多节点集群</a>”操作指南中描述的<code class="fe ml mm mn mc b">microk8s join</code>操作。</p><h1 id="65da" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">每个人的插件</h1><p id="d656" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">MicroK8s最受欢迎的特性之一是带有<code class="fe ml mm mn mc b">foo</code>的<code class="fe ml mm mn mc b">microk8s enable foo</code>命令，可以是你能想到的任何东西。现在，您可以创建自定义插件，并将其作为git库共享。让我给你一些…关于1.24版本中可能发生的事情的思考。</p><p id="9cb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的github账户下克隆<a class="ae kl" href="https://github.com/canonical/microk8s-addons-repo-template" rel="noopener ugc nofollow" target="_blank">模板插件库</a>。在<a class="ae kl" href="https://github.com/canonical/microk8s-addons-repo-template/blob/main/addons.yaml" rel="noopener ugc nofollow" target="_blank"> addons.yaml </a>中输入你心目中的插件的描述。例如:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="217f" class="mg kz iq mc b gy mh mi l mj mk">- name: "pizza"<br/>      description: "Need some food for thought?"<br/>      version: "1.0.0"<br/>      check_status: "${SNAP_DATA}/none"<br/>      supported_architectures:<br/>        - arm64<br/>        - amd64</span></pre><p id="9ad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的库中创建一个名为<code class="fe ml mm mn mc b">pizza</code>的目录。在<code class="fe ml mm mn mc b">pizza</code>目录中放置一个<code class="fe ml mm mn mc b">enable</code>文件，并使其可执行。在<code class="fe ml mm mn mc b">enable</code>文件中有如下一行:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="3e05" class="mg kz iq mc b gy mh mi l mj mk">xdg-open <a class="ae kl" href="https://www.dominos.com/index.intl.html" rel="noopener ugc nofollow" target="_blank">https://www.dominos.com/index.intl.html</a></span></pre><p id="48fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的github库是一个MicroK8s插件库。将它添加到MicroK8s集群中，如下所示:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="71b9" class="mg kz iq mc b gy mh mi l mj mk">sudo microk8s addons repo add myrepo https://github.com/myorg/myrepo</span></pre><p id="ebbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点一些食物:</p><pre class="kn ko kp kq gt mb mc md me aw mf bi"><span id="aaa5" class="mg kz iq mc b gy mh mi l mj mk">sudo microk8s enable pizza</span></pre><p id="480f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在各自的microk8s文档中阅读更多关于如何编写插件的内容。</p><h1 id="758d" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">这还不是全部…</h1><p id="1721" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">以上是v1.24 MicroK8s版本中最激动人心的两个特性。如果你有兴趣看过去几个月让我们忙碌的事情的长长的列表，看看<a class="ae kl" href="https://discuss.kubernetes.io/t/microk8s-v1-24-released/19883" rel="noopener ugc nofollow" target="_blank">发布公告</a>。最后，请允许我衷心感谢所有为这次发布做出贡献的伟大的人们，<a class="ae kl" href="https://github.com/balchua" rel="noopener ugc nofollow" target="_blank"> @balchua </a>，<a class="ae kl" href="https://github.com/caleblloyd" rel="noopener ugc nofollow" target="_blank">@ Caleb loyd</a>，<a class="ae kl" href="https://github.com/hryyan" rel="noopener ugc nofollow" target="_blank"> @hryyan </a>，<a class="ae kl" href="https://github.com/miro-balaz" rel="noopener ugc nofollow" target="_blank"> @miro-balaz </a>，<a class="ae kl" href="https://github.com/balasu" rel="noopener ugc nofollow" target="_blank"> @balasu </a>，<a class="ae kl" href="https://github.com/chris-hamper" rel="noopener ugc nofollow" target="_blank">@ Chris-hamb</a>，<a class="ae kl" href="https://github.com/dirien" rel="noopener ugc nofollow" target="_blank"> @dirien </a>，<a class="ae kl" href="https://github.com/AnaisUrlichs" rel="noopener ugc nofollow" target="_blank"> @AnaisUrlichs </a>。</p><h1 id="49bd" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">链接</h1><div class="mo mp gp gr mq mr"><a href="https://kubernetes.io/blog/2022/05/03/kubernetes-1-24-release-announcement/" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">库伯内特1.24:观星者</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">Kubernetes 1.24作者:Kubernetes 1.24发布团队我们很高兴地宣布Kubernetes 1.24的发布…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">kubernetes.io</p></div></div><div class="na l"><div class="nb l nc nd ne na nf kw mr"/></div></div></a></div><div class="mo mp gp gr mq mr"><a href="https://github.com/openebs/mayastor" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">GitHub - openebs/mayastor:容器中的云原生声明性数据平面</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">Mayastor是用Rust编写的云原生声明性数据平面。我们的目标是抽象存储资源及其…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">github.com</p></div></div><div class="na l"><div class="ng l nc nd ne na nf kw mr"/></div></div></a></div><div class="mo mp gp gr mq mr"><a href="https://microk8s.io/docs/addon-mayastor" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">MicroK8s - Addon: OpenEBS Mayastor集群存储| MicroK8s</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">MicroK8s支持基于OpenEBS Mayastor的集群就绪复制存储解决方案。这确实需要一些初始…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">microk8s.io</p></div></div></div></a></div><div class="mo mp gp gr mq mr"><a href="https://microk8s.io/docs/clustering" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">MicroK8s -创建一个MicroK8s集群| MicroK8s</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">尽管MicroK8s是作为Kubernetes的一个超轻量级实现而设计的，但它仍然是可能的，并且对……</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">microk8s.io</p></div></div><div class="na l"><div class="nh l nc nd ne na nf kw mr"/></div></div></a></div><div class="mo mp gp gr mq mr"><a href="https://neoaggelos.github.io/blog/004-mayastor/" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">面向MicroK8s Kubernetes和Mayastor的零操作扩展存储解决方案</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">我们如何为MicroK8s带来通用的集群级存储解决方案。Kubernetes是众所周知的开源软件…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">neoaggelos.github.io</p></div></div><div class="na l"><div class="ni l nc nd ne na nf kw mr"/></div></div></a></div><div class="mo mp gp gr mq mr"><a href="https://microk8s.io/docs/howto-addons" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">MicroK8s -使用、编辑或创建插件| MicroK8s</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">MicroK8s的插件，可以添加到你的基本集群的额外服务，是用户的最爱。做…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">microk8s.io</p></div></div><div class="na l"><div class="nj l nc nd ne na nf kw mr"/></div></div></a></div></div></div>    
</body>
</html>