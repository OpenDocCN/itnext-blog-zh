<html>
<head>
<title>Dapper Using Lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dapper使用列表</h1>
<blockquote>原文：<a href="https://itnext.io/dapper-using-lists-fd498519b1c?source=collection_archive---------7-----------------------#2019-02-10">https://itnext.io/dapper-using-lists-fd498519b1c?source=collection_archive---------7-----------------------#2019-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="df48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上周在<a class="ae kl" href="https://elanderson.net/2019/02/asp-net-core-with-dapper/" rel="noopener ugc nofollow" target="_blank">ASP.NET Core with Dapper</a>上的帖子涵盖了在ASP.NET Core项目中使用Dapper的基本知识。本周我们将修改上周的<a class="ae kl" href="https://github.com/elanderson/ASP.NET-Core-Dapper/tree/bbdd6da0eb88b6186035223de0b11724d8c29a5a" rel="noopener ugc nofollow" target="_blank">样本代码，展示使用Dapper处理列表，而不是一次只处理一个对象。</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e07fcff7a89c029339b5760db138c972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iq_IQfrBAjnjPi4PmVsVvA.png"/></div></div></figure><p id="d92c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章会很短，但是我认为有必要指出Dapper可以通过传递IEnumerable来多次执行一个查询。</p><h2 id="3b1f" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">样本</h2><p id="a1b4" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">以下示例连接到数据库，删除所有现有的联系人，在contact表中植入3个联系人(这是我们的列表)，然后选择所有联系人(这作为IEnumerable出现)。</p><pre class="kn ko kp kq gt lw lx ly lz aw ma bi"><span id="909a" class="ky kz iq lx b gy mb mc l md me">using (var connection = <br/>           new SqlConnection(_configuration<br/>                             .GetConnectionString("DefaultConnection")))<br/>{<br/>    connection.Open();<br/><br/>    connection.Execute("DELETE Contacts");<br/><br/>    var seedContacts = new List&lt;Contact&gt;<br/>                       {<br/>                           new Contact<br/>                           {<br/>                               Name = "Charlie Plumber",<br/>                               Address = "123 Main St",<br/>                               City = "Nashville",<br/>                               Subregion = "TN",<br/>                               Email = "cplumber@fake.com"<br/>                           },<br/>                           new Contact<br/>                           {<br/>                               Name = "Teddy Pierce",<br/>                               Address = "6708 1st St",<br/>                               City = "Nashville",<br/>                               Subregion = "TN",<br/>                               Email = "tpierce@fake.com"<br/>                           },<br/>                           new Contact<br/>                           {<br/>                               Name = "Kate Pierce",<br/>                               Address = "6708 1st St",<br/>                               City = "Nashville",<br/>                               Subregion = "TN",<br/>                               Email = "kpierce@fake.com"<br/>                           }<br/>                       };<br/><br/>    connection.Execute(@"INSERT INTO Contacts (Name, Address, City, <br/>                                               Subregion, Email) <br/>                         VALUES (@Name, @Address, @City, <br/>                                 @Subregion, @Email)",<br/>                       seedContacts);<br/>    <br/>    var allContacts = connection<br/>                      .Query&lt;Contact&gt;(@"SELECT Id, Name, Address, City, <br/>                                               Subregion, Email <br/>                                        FROM Contacts");<br/>}</span></pre><p id="35d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如所料，最终结果包含三个联系人记录。</p><h2 id="a591" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">包扎</h2><p id="5722" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">希望这篇简短的帖子有助于填补上周帖子的一个空白。确保并查看<a class="ae kl" href="https://github.com/StackExchange/Dapper" rel="noopener ugc nofollow" target="_blank"> Dapper GitHub页面</a>除了我在这两篇文章中提到的特性，它还支持许多其他功能，如存储过程、多结果集等。最终状态的代码可以在这里找到<a class="ae kl" href="https://github.com/elanderson/ASP.NET-Core-Dapper/tree/01382938fc68faead63ea9a86d47fd586f3bf90f" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="df42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mm">最初发表于</em> <a class="ae kl" href="https://elanderson.net/2019/02/dapper-using-lists/" rel="noopener ugc nofollow" target="_blank"> <em class="mm">埃里克·安德森</em> </a> <em class="mm">。</em></p></div></div>    
</body>
</html>