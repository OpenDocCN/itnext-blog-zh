<html>
<head>
<title>Vanilla JS fragments &amp; DOM patching</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">普通JS片段和DOM补丁</h1>
<blockquote>原文：<a href="https://itnext.io/vanilla-js-fragments-dom-patching-b4f8d7ec8fbd?source=collection_archive---------8-----------------------#2018-07-23">https://itnext.io/vanilla-js-fragments-dom-patching-b4f8d7ec8fbd?source=collection_archive---------8-----------------------#2018-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6fa2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我很好奇如何在不依赖<code class="fe kl km kn ko b">innerHTML</code>或者坦率地说，不依赖任何东西的情况下，自己做类似react的事情。结果很简单。</p><p id="79ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，通过<a class="ae kp" href="https://developer.mozilla.org/en/docs/Web/API/Document/createDocumentFragment" rel="noopener ugc nofollow" target="_blank">document . createdocumentfragment()</a>获得的片段非常神奇。它们存在于内存中，您可以像往常一样构造它们，基本上是创建一个微型虚拟dom。</p><p id="ad56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它们的目的是让您在实际渲染之前对未来的DOM进行大量的修改。这有助于控制重画计数，例如:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div></figure><p id="64bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那就是15k重画减少到1。</p><p id="5f65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这个，昂贵的<code class="fe kl km kn ko b">innerHTML</code>永远不会有任何用例。然而，有时候我们<em class="kx">必须</em>将字符串解析成HTML。我们仍然可以这样做。</p><p id="d0f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参见<a class="ae kp" href="https://developer.mozilla.org/en-US/docs/Web/API/Range/createContextualFragment" rel="noopener ugc nofollow" target="_blank">create contextual fragment</a>——只要字符串有效，它就会(试图)将它解析成HTML。示例:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div></figure><p id="472e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了好玩，我还通过片段更新文本节点，而不是修改innerText/textContent。</p></div></div>    
</body>
</html>