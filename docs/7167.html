<html>
<head>
<title>Rocketry: Insanely Powerful Scheduler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火箭技术:功能强大得惊人的调度程序</h1>
<blockquote>原文：<a href="https://itnext.io/red-engine-insanely-powerful-scheduler-7d9d8e84b58b?source=collection_archive---------2-----------------------#2022-07-04">https://itnext.io/red-engine-insanely-powerful-scheduler-7d9d8e84b58b?source=collection_archive---------2-----------------------#2022-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/a3bec18a454e29129b953a3a2cc7250e.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*6VdnxPai1aXln3_6VL2GYQ.png"/></div></figure><div class=""/><blockquote class="ju jv jw"><p id="13d6" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka iy">注:</strong>该项目最近更名为Rocketry(之前为Red Engine)。</p></blockquote><p id="ec11" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">有很多用于调度(Python)代码的库:</p><ul class=""><li id="d7b8" class="kz la ix ka b kb kc kf kg kw lb kx lc ky ld kv le lf lg lh bi translated">Crontab</li><li id="2756" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">Sched</li><li id="27d8" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">日程安排</li><li id="ece7" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">APS scheduler</li><li id="ca82" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">气流</li></ul><p id="9c1c" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">如果您需要简单的东西，Crontab或Sched可能适合您的需要。如果您需要企业解决方案，您可以选择Airflow。你可以有非常简单或复杂的东西，但不能介于两者之间。开始使用气流需要很多时间，而其他替代品很快就会在更高级的用例中出现功能不足的情况。没有类似FastAPI或Flask的调度解决方案:一些简单易用但适合复杂问题的解决方案。</p><p id="2c10" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">然而，时过境迁，现在我们有了这样的解决方案:<a class="ae ln" href="https://rocketry.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">火箭</a>。Rocketry是一个现代的调度框架，它是干净的、高效的、广泛的和可定制的。看起来是这样的:</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="42a1" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">它不仅仅是一个漂亮干净的语法。它还具有:</p><ul class=""><li id="cb78" class="kz la ix ka b kb kc kf kg kw lb kx lc ky ld kv le lf lg lh bi translated"><strong class="ka iy">并发</strong>:你也可以在不同的线程或进程中运行任务</li><li id="387e" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">持久化:任务日志可以放在任何数据存储中，包括SQL数据库</li><li id="f56d" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated"><strong class="ka iy">流水线</strong>:一个接一个地运行任务，或者将一个任务的输出作为另一个任务的输入</li><li id="ecb6" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated"><strong class="ka iy">定制</strong>:扩展调度语法或在运行时修改会话</li></ul><p id="b3f1" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">Rocketry是自动化Python应用程序的优秀后端。它不会对你应该如何做事做很多假设。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="fdf4" class="mb mc ix bd md me mf dn mg mh mi dp mj kw mk ml mm kx mn mo mp ky mq mr ms mt bi translated">入门指南</h2><p id="ec77" class="pw-post-body-paragraph jx jy ix ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">那么，如何使用它呢？首先，我们需要pip安装它:</p><pre class="lo lp lq lr gt mz na nb nc aw nd bi"><span id="f06b" class="mb mc ix na b gy ne nf l ng nh">pip install rocketry</span></pre><p id="8b90" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">在<a class="ae ln" href="https://rocketry.readthedocs.io/en/stable/tutorial/index.html" rel="noopener ugc nofollow" target="_blank">rockerry的教程部分</a>有几个不同难度的教程。本文的其余部分不是重复那些教程中的内容，而是展示该框架必须提供的一些核心特性。</p><p id="ccab" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">但是在开始使用这些功能之前，如果您想暂停一下四处看看，这里有相关的链接:</p><ul class=""><li id="50be" class="kz la ix ka b kb kc kf kg kw lb kx lc ky ld kv le lf lg lh bi translated">源代码:<a class="ae ln" href="https://github.com/Miksus/rocketry" rel="noopener ugc nofollow" target="_blank">https://github.com/Miksus/rocketry</a></li><li id="36a5" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">文件:<a class="ae ln" href="https://rocketry.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">https://rocketry.readthedocs.io/</a></li><li id="09b4" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">发布(PyPI):<a class="ae ln" href="https://pypi.org/project/rocketry/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/rocketry/</a></li></ul><h2 id="742e" class="mb mc ix bd md me mf dn mg mh mi dp mj kw mk ml mm kx mn mo mp ky mq mr ms mt bi translated">行程安排</h2><p id="f119" class="pw-post-body-paragraph jx jy ix ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">Rocketry有一个独特的条件语法，也支持逻辑运算。条件是根据时间或某种状态为真或为假的语句，它们用于确定是否允许启动任务或是否应该终止任务。它们是框架中调度机制的构建块。有超过100个内置的条件语句，可以使用逻辑运算符任意扩展:AND、OR和NOT。您也可以从简单的函数中创建自己的条件。</p><p id="b7d8" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">以下是调度语法的一些示例:</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="5661" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">关于调度语法和选项的更多信息可以在文档中找到<a class="ae ln" href="https://red-engine.readthedocs.io/en/stable/condition_syntax/index.html" rel="noopener ugc nofollow" target="_blank">。如果由于静态分析或健壮性的原因，您不希望使用字符串语法，您可以自由地传递底层Python类。</a></p><h2 id="df90" class="mb mc ix bd md me mf dn mg mh mi dp mj kw mk ml mm kx mn mo mp ky mq mr ms mt bi translated">管道铺设</h2><p id="225c" class="pw-post-body-paragraph jx jy ix ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">Rocketry具有内置的条件，可以在一个任务成功、失败或简单启动后执行另一个任务。还可以将一个任务的返回值设置为另一个任务的输入参数。下面是利用这两种功能的简短演示:</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ls lt l"/></div></figure><h2 id="5d30" class="mb mc ix bd md me mf dn mg mh mi dp mj kw mk ml mm kx mn mo mp ky mq mr ms mt bi translated">并行化</h2><p id="89f6" class="pw-post-body-paragraph jx jy ix ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">任务也可以在主循环上运行，或者可以并行化，在单独的线程或单独的进程上运行。您可能希望在单独的线程上运行IO密集型任务，在单独的进程上运行CPU密集型任务，以提高系统的性能。在某些情况下，您可能希望没有并行化，而在主线程和进程中运行您的任务。执行类型是任务设置中的一个简单参数，很容易根据需要进行更改。以下是这些选项的示例:</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ls lt l"/></div></figure><h2 id="b52a" class="mb mc ix bd md me mf dn mg mh mi dp mj kw mk ml mm kx mn mo mp ky mq mr ms mt bi translated">元任务</h2><p id="75dc" class="pw-post-body-paragraph jx jy ix ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">火箭技术在运行时也暴露了它的许多机制。您可以创建任务，修改任务，删除任务，关闭调度程序或只使用常规任务重新启动它。下面是一个在运行时操作会话的示例:</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="ed42" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">如果您希望与运行时会话交互，执行类型必须是<em class="jz">主</em>或<em class="jz">线程</em>。元任务允许您创建真正自主的应用程序，这些应用程序能够自动更新自己或者动态地改变任务。您可以创建一个通过元任务与运行时环境通信的API。他们提供了大量的定制。</p><h2 id="26fd" class="mb mc ix bd md me mf dn mg mh mi dp mj kw mk ml mm kx mn mo mp ky mq mr ms mt bi translated">还有什么？</h2><p id="fd69" class="pw-post-body-paragraph jx jy ix ka b kb mu kd ke kf mv kh ki kw mw kl km kx mx kp kq ky my kt ku kv ij bi translated">这里有很多我们没有涉及的特性:自定义条件、任务终止、自定义参数和大量的调度条件。Rocketry也建立在几个抽象层上，所以它支持几种类型用户的需求:新手到高级用户。</p><p id="a09c" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated">如果你喜欢这个库所提供的东西，可以考虑在Github上留下它的名字，并向其他人提及它。该库是开源的(有麻省理工学院的许可)，它的开发是因为编程很有趣，项目很棒。</p><p id="c33f" class="pw-post-body-paragraph jx jy ix ka b kb kc kd ke kf kg kh ki kw kk kl km kx ko kp kq ky ks kt ku kv ij bi translated"><strong class="ka iy">相关链接:</strong></p><ul class=""><li id="906a" class="kz la ix ka b kb kc kf kg kw lb kx lc ky ld kv le lf lg lh bi translated">文档:<a class="ae ln" href="https://rocketry.readthedocs.io" rel="noopener ugc nofollow" target="_blank">https://rocket ry . readthedocs . io</a></li><li id="e6e5" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">源代码:【https://github.com/Miksus/rocketry T2】</li><li id="1b13" class="kz la ix ka b kb li kf lj kw lk kx ll ky lm kv le lf lg lh bi translated">上映日期:【https://pypi.org/project/rocketry T4】</li></ul></div></div>    
</body>
</html>