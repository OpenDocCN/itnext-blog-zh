<html>
<head>
<title>NGRX | Use effects and router-store to isolate route related side 🧙🏼‍♂️ effects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NGRX |使用效果和路由器存储来隔离与路由相关的端🧙🏼‍♂️效应</h1>
<blockquote>原文：<a href="https://itnext.io/ngrx-use-effects-and-router-store-to-isolate-route-related-side-%EF%B8%8F-effects-d18faaa750c1?source=collection_archive---------4-----------------------#2020-05-05">https://itnext.io/ngrx-use-effects-and-router-store-to-isolate-route-related-side-%EF%B8%8F-effects-d18faaa750c1?source=collection_archive---------4-----------------------#2020-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8827" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">ngrx</code>的主要优势之一是我们可以将副作用从组件中分离出来。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/8b9cc81196d5dffd0048b8f30519c5a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnQ0CbJdBUbx-jyPo790WA.jpeg"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://unsplash.com/@abeosorio?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/@abeosorio</a></figcaption></figure><p id="2050" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们需要组件上的路由器相关数据时，我们通常会使用组件本身的“ActivatedRoute”服务。例如，我们可以使用以下技术从一条路线中获取id:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lg lh l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">与ActivatedRoute服务交互的组件</figcaption></figure><p id="f8cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们使用<code class="fe kl km kn ko b">@ngrx/effects</code>来隔离它。第一个目标是从URL获取路由参数。</p><h1 id="6495" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">如何不去做</h1><p id="564b" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">我们可能会尝试在特效上使用<code class="fe kl km kn ko b">ActivatedRoute</code>服务，但这没用。它只能在“与插座中加载的组件相关联”上访问，引自<a class="ae lf" href="https://angular.io/api/router/ActivatedRoute" rel="noopener ugc nofollow" target="_blank">https://angular.io/api/router/ActivatedRoute</a>。</p><p id="92af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可能想到的另一件事是使用“路由器”服务。但是同样，我们无法以一种清晰的方式访问我们的参数。</p><p id="b2a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们能做的，就是使用来自<code class="fe kl km kn ko b">@ngrx/router-store</code>的<code class="fe kl km kn ko b">selectRouteParam</code>状态选择器。</p><p id="3467" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们深入一下这个例子。(文章底部stackblitz链接)</p><h1 id="1417" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">怎么做才是正确的</h1><p id="8909" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">设置效果:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lg lh l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">要在注射剂上记录的效果</figcaption></figure><p id="1788" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么我们的组件可以简单到:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lg lh l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">仅注册到商店服务的组件</figcaption></figure><h1 id="a553" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">外卖</h1><p id="0f7f" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">这是一个演示如何获取参数的基本例子。当我们需要使用那个参数并从中获取一些数据时，真正的力量就来了。然后我们会有一个效果，我们将使用“mergeMap”操作符从URL中获取使用这个id的数据。在组件上，我们只需订阅获取的数据，就这样。</p><p id="f7e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lf" href="https://stackblitz.com/edit/ngrx-effects-router-store" rel="noopener ugc nofollow" target="_blank">https://stackblitz.com/edit/ngrx-effects-router-store</a></p><p id="fd2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢它，请在这里或在我的twitter上给我一些爱。</p></div></div>    
</body>
</html>