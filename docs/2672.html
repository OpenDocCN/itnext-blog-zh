<html>
<head>
<title>Deploy ASP.NET Core 3 Previews to Azure App Using Extensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用扩展将ASP.NET核心3预览版部署到Azure应用</h1>
<blockquote>原文：<a href="https://itnext.io/deploy-asp-net-core-3-previews-to-azure-app-using-extensions-339117ccc25f?source=collection_archive---------3-----------------------#2019-07-08">https://itnext.io/deploy-asp-net-core-3-previews-to-azure-app-using-extensions-339117ccc25f?source=collection_archive---------3-----------------------#2019-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9578" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几周前，当帖子<a class="ae kl" href="https://elanderson.net/2019/06/deploy-asp-net-core-3-previews-to-azure-app-service/" rel="noopener ugc nofollow" target="_blank">将ASP.NET Core 3预览版部署到Azure应用服务</a>时，我收到了一封来自<a class="ae kl" href="https://www.jerriepelser.com/" rel="noopener ugc nofollow" target="_blank"> Jerrie Pelser </a>的电子邮件，他指出应用服务有可用的扩展，允许使用ASP.NET Core 3的公共预览版，而不必进行自包含部署。</p><p id="8338" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了Jerrie的建议<a class="ae kl" href="https://www.reddit.com/user/prajaybasu/" rel="noopener ugc nofollow" target="_blank"> pajaybasu </a>在<a class="ae kl" href="https://www.reddit.com/r/dotnet/comments/bwgd3k/deploy_aspnet_core_3_previews_to_azure_app_service/epycyyl?utm_source=share&amp;utm_medium=web2x" rel="noopener ugc nofollow" target="_blank">这篇Reddit帖子</a>中指出，使用Docker是另一种选择。Pajaybasu 还指出了我在原始帖子中的一句话，即自包含部署是唯一的选择，这当然是不正确的。</p><p id="4b86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章的前半部分将和最初的文章一样，涵盖了Azure应用服务的创建和首次发布。后半部分将介绍如何使用一个扩展来启用ASP.NET核心的预览版。</p><h2 id="06a3" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">示例应用程序</h2><p id="f6aa" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">我用了下面的。NET CLI命令使用React为其前端创建一个新的ASP.NET核心应用程序。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="b78b" class="km kn iq lp b gy lt lu l lv lw">dotnet new react</span></pre><p id="4840" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建过程完成后，在Visual Studio中打开该项目。我强烈推荐使用<a class="ae kl" href="https://visualstudio.microsoft.com/vs/preview/" rel="noopener ugc nofollow" target="_blank"> Visual Studio 2019预览版</a>与任何。NET Core 3应用程序。</p><h2 id="c719" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">发布到应用服务</h2><p id="8b17" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">在Visual Studio的解决方案资源管理器中，右键单击项目文件并选择<strong class="jp ir">发布</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/4de966b150b896d04a5515153b5b9072.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/0*2o5ySR5jJgr5N_ow.png"/></div></figure><p id="628b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择<strong class="jp ir">应用服务</strong>作为发布目标。在这里，我们正在创建一个新的应用服务。接下来，点击<strong class="jp ir">发布</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/f689fba97172e94b6911ace3b6f020ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hzkrsOtZ5ObzSSXh.png"/></div></div></figure><p id="0ccc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个对话框显示将要创建的新应用服务的信息。我在很大程度上接受了默认值。我确实为这个应用程序创建了一个新的资源组，以便将来更容易清理这些资源。我也改变了主机计划到免费层。点击<strong class="jp ir">创建</strong>继续。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/9f77edd8d58a87893af20a1c1c9eee63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SPgUmjSNjh3oduu0.png"/></div></div></figure><h2 id="c81e" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">错误和警告</h2><p id="68c6" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">作为发布过程的一部分，浏览器将打开应用程序的地址。发生这种情况时，您会看到一个关于ANCM进程内处理程序加载失败的错误(如果您使用的是IIS进程内宿主)。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/912e298a94541a801ab1d4c8f6201fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/0*M-qdF0oDGXeaaCbU.png"/></div></figure><p id="87ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果回头看看Visual Studio，您会看到下面的警告，提示您的应用程序需要。NET Core runtime 3.0和App Service最高只支持2.2。由于我们将在应用服务中修复此问题，我建议选择<strong class="jp ir">不要在未来执行检查(仅此个人资料)</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/d5d83328046d0b3d6974be34f5d0cec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/0*RcBvPRtwHA-FfWna.png"/></div></figure><h2 id="4185" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">另一个修复</h2><p id="3dbf" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">对于此版本的修复，请前往您在<a class="ae kl" href="https://portal.azure.com" rel="noopener ugc nofollow" target="_blank"> Azure门户</a>中的应用服务。在<strong class="jp ir">开发工具</strong>下的菜单中，选择<strong class="jp ir">扩展</strong>选项。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/648120beaad36cac6d234de3079e5435.png" data-original-src="https://miro.medium.com/v2/resize:fit:396/format:webp/0*gZlIOzvoSr85DCFx.png"/></div></figure><p id="d45d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一页，点击顶部的<strong class="jp ir">添加</strong>按钮。点击<strong class="jp ir">选择扩展</strong>并选择<strong class="jp ir">ASP.NET核心3.0 (x86)运行时</strong>选项。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/299634a0c9671eb5d64cb982b11630ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/0*0X8R4vDk6egYM1Rb.png"/></div></figure><p id="8fbd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，点击<strong class="jp ir">法律条款</strong>，阅读条款，如果您同意条款，然后点击<strong class="jp ir">确定</strong>按钮。然后，您必须点击添加扩展刀片上的<strong class="jp ir">确定</strong>，这将开始扩展安装。</p><p id="4edf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在此时加载您的站点，您仍然会得到500错误。在<strong class="jp ir">设置</strong>下点击<strong class="jp ir">配置</strong>并点击<strong class="jp ir">通用设置</strong>打开上的<strong class="jp ir">网络插座并点击<strong class="jp ir">保存</strong>。</strong></p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mk"><img src="../Images/159328fac124e3186e0cb13ba2c8604a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9GN2ElUlmW77ePtj.png"/></div></div></figure><p id="37c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，您的站点应该可以工作了。您也可以返回并关闭web sockets，网站将继续工作。我不知道切换web sockets做了什么让一切开始工作，但感谢<a class="ae kl" href="https://github.com/aspnet/AspNetCore/issues/10509#issuecomment-496749510" rel="noopener ugc nofollow" target="_blank">这个</a>对GitHub问题的评论是让这一切工作的关键。</p><h2 id="bb5c" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="26da" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">希望在这篇文章和上一篇使用自包含部署的文章之间，您在尝试。带App服务的NET Core 3。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="3c54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ms">最初发表于</em> <a class="ae kl" href="https://elanderson.net/2019/07/deploy-asp-net-core-3-previews-to-azure-app-using-extensions/" rel="noopener ugc nofollow" target="_blank"> <em class="ms">埃里克·安德森</em> </a> <em class="ms">。</em></p></div></div>    
</body>
</html>