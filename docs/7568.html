<html>
<head>
<title>Flutter Best Practices — Part 6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振最佳实践—第6部分</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-best-practices-part-6-2cc349abcc78?source=collection_archive---------2-----------------------#2022-11-08">https://itnext.io/flutter-best-practices-part-6-2cc349abcc78?source=collection_archive---------2-----------------------#2022-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7e6ac02bc8e53ade981454db0c9ac494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6mojm2hrTJbBiY0HhCv7Fg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">颤振最佳实践</figcaption></figure><h1 id="3e24" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">幻数的正确命名</h1><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b215" class="lj kd iq lf b gy lk ll l lm ln">// Do not<br/>SvgPicture.asset(<br/>  Images.frameWhite,<br/>  height: 13.0,<br/>  width: 13.0,<br/>);<br/><br/>// Do<br/>final _frameIconSize = 13.0;<br/>SvgPicture.asset(<br/>   Images.frameWhite,<br/>   height: _frameIconSize,<br/>   width: _frameIconSize,<br/>);</span></pre><h1 id="d511" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">理解颤振中约束的概念</h1><p id="67b5" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">每个Flutter应用程序开发人员都需要知道一个Flutter布局的经验法则:约束减少，尺寸增加，父元素设置位置。</p><p id="4f45" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">这里提到的例子可能会非常多。</p><h1 id="657c" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">小工具的选择很重要</h1><p id="39f5" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">部件选择不当可能会导致树更大，从而导致更长的构建时间，进而导致性能问题。</p><h1 id="2280" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">仅在必要时使用包</h1><p id="5c49" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">当你想加速你的构建过程时，软件包是一个不错的选择，而且<a class="ae mr" href="https://pub.dev/" rel="noopener ugc nofollow" target="_blank"> pub </a>有大量的软件包。尽管如此，如果在没有事先研究的情况下使用它们，它们会对你的应用程序性能产生重大影响。</p><h1 id="18a3" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">林挺</h1><p id="f9ce" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">当您使用最新版本的Flutter创建项目时，默认情况下会使用官方lint规则创建<em class="ms"> analysis_options.yml </em>文件。</p><blockquote class="mt mu mv"><p id="bf78" class="lo lp ms lq b lr mm lt lu lv mn lx ly mw mo mb mc mx mp mf mg my mq mj mk ml ij bi translated">访问https://flutter.dev/docs/perf/rendering/best-practices的<a class="ae mr" href="https://flutter.dev/docs/perf/rendering/best-practices" rel="noopener ugc nofollow" target="_blank"><em class="iq"/></a><em class="iq"><em class="iq">以获得关于前两点的完整参考，以及更多其他良好实践。</em></em></p></blockquote><h1 id="74b9" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">在构建完成后做一些事情可以提高性能</h1><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="97e1" class="lj kd iq lf b gy lk ll l lm ln">@override<br/>void initState() {<br/>  super.initState();<br/>  WidgetsBinding.instance.addPostFrameCallback((timeStamp) {<br/>    doSomething();<br/>  });<br/>}</span></pre><h1 id="9a84" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用安全区域</h1><p id="bb37" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">SafeArea小部件通过移除操作系统控件(如状态栏、底部导航按钮，如后退按钮等)所需的填充来插入子控件。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="0d1f" class="lj kd iq lf b gy lk ll l lm ln">@override<br/>Widget build(BuildContext context) {<br/>  return Scaffold(<br/>    appBar: AppBar(),<br/>    body: SafeArea(<br/>      child: YourWidget(),<br/>    },<br/>  };<br/>}</span></pre><h1 id="4083" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用键来提高颤振性能</h1><p id="e23a" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">这通过使用键的颤动来更好地识别小部件，从而提供了更好的性能。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="dd71" class="lj kd iq lf b gy lk ll l lm ln">// FROM<br/>return value<br/>   ? const SizedBox()<br/>   : const Placeholder(),<br/>// TO<br/>return value<br/>   ? const SizedBox(key: ValueKey('SizedBox'))<br/>   : const Placeholder(key: ValueKey('Placeholder')),<br/><br/>----------------------------------------------<br/><br/>// FROM<br/>final inner = SizedBox();<br/>return value ? SizedBox(child: inner) : inner,<br/>// TO<br/>final global = GlobalKey();<br/>final inner = SizedBox(key: global);<br/>return value ? SizedBox(child: inner) : inner,</span></pre><h1 id="80af" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">分析并减少应用程序规模</h1><p id="7af0" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">在开发时，很容易在一个应用程序中使用多个包、代码和小部件。但有时，它需要大量内存来存储所有这些数据，这也会降低应用程序的性能。</p><p id="e940" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">Flutter的开发工具提供了减少应用程序大小的优势。在Gradle的帮助下，你可以减少颤振应用程序的大小，以优化颤振性能。</p><p id="f472" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">使用谷歌推出的打包系统，你可以创建Android应用的捆绑包。应用捆绑包在很多方面都是有益的。app bundle的一个主要特性是它允许你从谷歌Play商店下载原始代码。谷歌Play商店提供与设备兼容的应用程序，并支持平台的架构。</p><blockquote class="mt mu mv"><p id="52f3" class="lo lp ms lq b lr mm lt lu lv mn lx ly mw mo mb mc mx mp mf mg my mq mj mk ml ij bi translated">flutter构建appbundle</p></blockquote><p id="ddbf" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">iOS:</p><figure class="la lb lc ld gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/1a84b21ac7df6d93eb8304c69d08fe22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aq6v0PAUp7v8_8PrT-mQ7w.png"/></div></div></figure><h1 id="1a12" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用图像列表视图时优化内存</h1><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7594" class="lj kd iq lf b gy lk ll l lm ln">ListView.builder(<br/>  ...<br/>   addAutomaticKeepAlives: false (true by default)<br/>   addRepaintBoundaries: false (true by default)<br/>);</span></pre><h1 id="5aa8" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">精确显示您的图像和图标</h1><p id="0f5c" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated"><em class="ms">预缓存</em>图像以获得更好的性能。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="42f4" class="lj kd iq lf b gy lk ll l lm ln">precacheImage(AssetImage(imagePath), context);</span></pre><h1 id="36b1" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用SKSL预热</h1><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="482e" class="lj kd iq lf b gy lk ll l lm ln">flutter run --profile --cache-sksl --purge-persistent-cache<br/>flutter build apk --cache-sksl --purge-persistent-cache</span></pre><p id="0915" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">如果应用程序在第一次运行时有干净的动画，然后对相同的动画变得平滑，这可能是由于着色器编译中的延迟。</p><h1 id="7fc9" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">不要在列表映射中使用引用</h1><p id="100a" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">不</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="bdc6" class="lj kd iq lf b gy lk ll l lm ln">List a = [1,2,3,4];<br/>List b;<br/>b = a;<br/>a.remove(1);<br/>print(a);  // [2,3,4]<br/>print(b);  // [2,3,4]</span></pre><p id="796d" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">由于这个原因，每当你试图调用list a的任何方法时，list b都会被自动调用。</p><p id="ae42" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">例如a.remove(一些)；也将从列表b中删除该项目；</p><p id="ce80" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">做</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="ce3d" class="lj kd iq lf b gy lk ll l lm ln">List a = [1,2,3,4];<br/>List b;<br/>b = jsonDecode(jsonEncode(a));<br/>a.remove(1);<br/>print(a);  // [2,3,4]<br/>print(b);  // [1,2,3,4]</span></pre><h1 id="9748" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">不惜一切代价避免绝对定位</h1><p id="10fb" class="pw-post-body-paragraph lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml ij bi translated">绝对定位是构建应用程序时最糟糕的事情之一。当只为一个特定的设备编码时，绝对定位似乎并没有那么糟糕。然而，当你在构建一个要在各种不同的设备和操作系统上发布的应用时，绝对定位真的会弄乱界面。尽可能使用适合屏幕大小的值，而不是绝对位置</p><p id="08fe" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><strong class="lq ir">快速提示:</strong></p><ul class=""><li id="5857" class="na nb iq lq b lr mm lv mn lz nc md nd mh ne ml nf ng nh ni bi translated">减少不透明度的使用。(使用渐变/动画不透明度)</li><li id="6e19" class="na nb iq lq b lr nj lv nk lz nl md nm mh nn ml nf ng nh ni bi translated">避免将所有的小部件分成不同的方法。</li><li id="876c" class="na nb iq lq b lr nj lv nk lz nl md nm mh nn ml nf ng nh ni bi translated">将代码分成更小的代码以获得更高的性能。</li><li id="bab9" class="na nb iq lq b lr nj lv nk lz nl md nm mh nn ml nf ng nh ni bi translated">避免重新构建小部件。</li></ul><p id="0396" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><strong class="lq ir">官方文件</strong></p><p id="1732" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">【https://docs.flutter.dev/perf/best-practices T4】</p><p id="c163" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">使用DevTools进行性能测试:</p><p id="f65d" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><a class="ae mr" href="https://docs.flutter.dev/development/tools/devtools/performance" rel="noopener ugc nofollow" target="_blank">https://docs . flutter . dev/development/tools/dev tools/performance</a></p><p id="dc48" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><a class="ae mr" href="https://docs.flutter.dev/perf" rel="noopener ugc nofollow" target="_blank">https://docs.flutter.dev/perf</a></p><p id="adec" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><a class="ae mr" href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html#performance-considerations" rel="noopener ugc nofollow" target="_blank">https://API . flutter . dev/flutter/widgets/stateful widget-class . html #性能考虑</a></p><div class="no np gp gr nq nr"><a href="https://api.flutter.dev/flutter/widgets/Opacity-class.html#transparent-image" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">不透明度类-小部件库- Dart API</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">使其子窗口部分透明的小部件。这个类将它的子级绘制到一个中间缓冲区中，然后…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">api.flutter.dev</p></div></div></div></a></div><h1 id="f038" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">前几集</h1><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-best-practices-part-1-e89467ea4823"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">颤振—最佳实践—第1部分</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">这是颤振最佳实践的第一部分…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">itnext.io</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jw nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-best-practices-part-2-e9e5c79ccb16"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">颤振最佳实践—第2部分</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">让我们开始…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">itnext.io</p></div></div><div class="oa l"><div class="og l oc od oe oa of jw nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-best-practices-part-3-747f1bfaec6b"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">颤振最佳实践—第3部分</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">你可以在下面找到这个系列的前两部分</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">itnext.io</p></div></div><div class="oa l"><div class="oh l oc od oe oa of jw nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-best-practices-part-4-709e7bceabf"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">颤振最佳实践—第4部分</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">以下是成为专业flutter开发者的5个最佳实践</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">itnext.io</p></div></div><div class="oa l"><div class="oi l oc od oe oa of jw nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-best-practices-part-5-44feacca6264"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">颤振最佳实践—第5部分</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">这里是另一个10个颤振最佳实践的列表</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">itnext.io</p></div></div><div class="oa l"><div class="oj l oc od oe oa of jw nr"/></div></div></a></div></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><p id="65a6" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">希望你喜欢这篇文章。请在评论中让我知道。</p><p id="5c7d" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">如果你觉得有用，请鼓掌。</p><p id="2e1b" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated">感谢阅读。</p><p id="45f2" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><a class="ae mr" href="https://coderzheaven.com/" rel="noopener ugc nofollow" target="_blank">更多教程</a></p><p id="1d65" class="pw-post-body-paragraph lo lp iq lq b lr mm lt lu lv mn lx ly lz mo mb mc md mp mf mg mh mq mj mk ml ij bi translated"><a class="ae mr" href="https://www.youtube.com/c/MobileProgrammer" rel="noopener ugc nofollow" target="_blank">视频教程</a></p></div></div>    
</body>
</html>