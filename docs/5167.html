<html>
<head>
<title>Easily Deploy Containers to Azure directly from your Desktop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直接从桌面轻松地将容器部署到Azure</h1>
<blockquote>原文：<a href="https://itnext.io/easily-deploy-containers-to-azure-directly-from-your-desktop-16efebc87b21?source=collection_archive---------3-----------------------#2020-12-30">https://itnext.io/easily-deploy-containers-to-azure-directly-from-your-desktop-16efebc87b21?source=collection_archive---------3-----------------------#2020-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/917e9a2c5696d5ab7a2c78626255d91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h4TLlisFk7XvtREAsS7C7Q.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">克里斯托夫·高尔在<a class="ae jd" href="https://unsplash.com/s/photos/desktop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><div class=""/><h1 id="e207" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="644f" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">容器现在是一个成熟的解决方案，提供了额外的基础设施抽象级别。在许多情况下，容器可以取代传统上由虚拟机驱动的工作负载。</p><p id="84ee" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在这篇博客中，我们将看看<a class="ae jd" href="https://azure.microsoft.com/en-us/services/container-instances/" rel="noopener ugc nofollow" target="_blank"> Azure容器实例</a>，展示直接从docker CLI向Azure部署容器有多快多容易。</p><h1 id="c564" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">先决条件</h1><p id="3676" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果你想跟进，你需要有Azure订阅，Azure CLI和Docker桌面实例。</p><ul class=""><li id="4e1d" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><a class="ae jd" href="https://azure.microsoft.com/en-us/free/" rel="noopener ugc nofollow" target="_blank">获得免费Azure订阅</a></li><li id="2089" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli" rel="noopener ugc nofollow" target="_blank">安装Azure CLI </a></li><li id="9241" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank">安装Docker桌面</a></li></ul><h1 id="2bbe" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">什么是Azure容器实例</h1><p id="448d" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Azure Container Instances是一个计算产品，它在轻量级Azure功能和更复杂但成熟的Azure Kubernetes服务之间架起了一座桥梁。</p><figure class="mt mu mv mw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/dcef71a8707f254843d650933dafcb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hy7vemcwEjIpzQI3LyrX3w.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://docs.microsoft.com/en-us/azure/container-instances/container-instances-container-groups" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/container-instances/container-instances-container-groups</a></figcaption></figure><h1 id="97fe" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">使用案例和特征</h1><p id="081c" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">ACI最适合可以独立运行的容器化工作负载、简单的应用程序、包括数据科学模型在内的批处理作业、各种任务自动化和集成场景。</p><ul class=""><li id="ecf5" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><strong class="ld jh">快速启动:</strong>几秒钟启动容器。</li><li id="6687" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><strong class="ld jh">每秒计费:</strong>仅在容器运行时产生费用。</li><li id="cd6c" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><strong class="ld jh">虚拟机管理程序级安全性:</strong>完全隔离您的应用程序，就像它在虚拟机中一样。</li><li id="b6a1" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><strong class="ld jh">自定义大小:</strong>指定CPU内核和内存的精确值。</li><li id="bbde" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><strong class="ld jh">持久化存储:</strong>将Azure文件共享直接挂载到一个容器中，以检索和持久化状态。</li><li id="8bbf" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><strong class="ld jh"> Linux和Windows: </strong>使用相同的API调度Windows和Linux容器。</li></ul><h1 id="7c3c" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">工作流程</h1><p id="b3d1" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们将部署一个示例网页。这个想法是，通过docker CLI和ACI，我们可以直接从docker命令行快速原型化、测试和部署！</p><blockquote class="mx my mz"><p id="dab4" class="lb lc na ld b le lz lg lh li ma lk ll nb mb lo lp nc mc ls lt nd md lw lx ly ij bi translated"><em class="jg">重要节点:此流程仅用于测试目的，在真实代码场景中，您将让CI/CD管道为您部署应用。</em></p></blockquote><p id="308b" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们将使用bash，但是同样的情况当然也可以使用<code class="fe ne nf ng nh b">powershell</code>。</p><blockquote class="mx my mz"><p id="0969" class="lb lc na ld b le lz lg lh li ma lk ll nb mb lo lp nc mc ls lt nd md lw lx ly ij bi translated"><em class="jg"> Docker CLI现在包含通过</em> <strong class="ld jh"> <em class="jg">上下文</em> </strong> <em class="jg">命令与Azure容器实例的内置集成。使用Azure CLI时，您可以通过键入</em> <code class="fe ne nf ng nh b"><em class="jg">az interactive</em></code> <em class="jg">来激活</em><strong class="ld jh"><em class="jg">Azure Interactive</em></strong><em class="jg">。这是Azure CLI的一个实验性特性，它给你参数完成和更多！</em></p></blockquote><p id="808f" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">首先，让我们使用docker CLI设置变量并通过Azure进行身份验证</p><ul class=""><li id="6bcb" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><em class="na">租户</em>启用登录的设置变量:<code class="fe ne nf ng nh b">TENANT=$(az account show --query tenantId -o tsv)</code></li><li id="b5e8" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">最后让我们登录Azure <code class="fe ne nf ng nh b">docker login azure --tenant-id $TENANT</code>。系统将提示您通过AD或粘贴身份验证代码登录。</li><li id="57f6" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">创造环境<code class="fe ne nf ng nh b">docker context create aci azure-context</code></li></ul><blockquote class="mx my mz"><p id="ad1a" class="lb lc na ld b le lz lg lh li ma lk ll nb mb lo lp nc mc ls lt nd md lw lx ly ij bi translated"><em class="jg">该命令是交互式的，将提示您选择</em> <strong class="ld jh"> <em class="jg">订阅、资源组(创建或选择现有资源组)和位置</em> </strong> <em class="jg">。如果您创建了一个新的资源组，请务必记下它的名称，以便以后清理资源。</em></p></blockquote><p id="5ce6" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在让我们部署一个测试容器！</p><ol class=""><li id="c2c2" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly ni mk ml mm bi translated">切换到新的上下文<code class="fe ne nf ng nh b">docker context use azure-context</code></li><li id="f25e" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly ni mk ml mm bi translated">运行<a class="ae jd" href="https://hub.docker.com/r/microsoft/aci-helloworld" rel="noopener ugc nofollow" target="_blank">ACI hello world image</a>T6】</li><li id="2bf1" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly ni mk ml mm bi translated">太好了！现在grep主机IP并在浏览器中导航到它:<code class="fe ne nf ng nh b">docker inspect helloworld | grep HostIP</code>你应该看到“欢迎使用Azure容器实例！”如下图。</li><li id="4381" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly ni mk ml mm bi translated">清理资源</li></ol><ul class=""><li id="baf5" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">运行<code class="fe ne nf ng nh b">docker stop helloworld</code>停止容器</li><li id="60de" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">运行<code class="fe ne nf ng nh b">docker rm helloworld</code>移除容器组。运行此命令会完全删除容器组，因此不会产生费用。</li><li id="ef2d" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">如果您仅出于本演示的目的创建了资源组，则可以选择删除该资源组</li></ul><figure class="mt mu mv mw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/0a9e7f13a94dbbbd2dc292789403be17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8cz8mDNbxDofR59gv_VXug.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">成功！</figcaption></figure><ul class=""><li id="99a0" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">切换回docker桌面上下文:<code class="fe ne nf ng nh b">docker context use default</code></li></ul><h1 id="096e" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">摘要</h1><p id="47e3" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们已经看到将容器组直接部署到Azure容器实例是多么容易。这对于测试目的和快速内部开发循环非常有用。</p><p id="f339" class="pw-post-body-paragraph lb lc jg ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这篇博客仅仅触及了Azure容器实例能做什么以及如何集成开发人员工作流的皮毛。在我看来，Azure容器实例是Azure中最灵活、最强大的无服务器产品之一。</p><h1 id="9908" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">链接和资源</h1><p id="32e0" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果你有兴趣了解更多，可以看看很多很棒的博客和教程。</p><ul class=""><li id="7a18" class="me mf jg ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><a class="ae jd" href="https://www.docker.com/blog/compose-cli-aci-integration-now-available/" rel="noopener ugc nofollow" target="_blank">撰写现已推出的客户端集成</a></li><li id="a8f1" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://azure.microsoft.com/en-gb/pricing/details/container-instances/" rel="noopener ugc nofollow" target="_blank"> ACI定价</a></li><li id="aece" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://docs.docker.com/engine/context/aci-integration/" rel="noopener ugc nofollow" target="_blank"> Docker文档</a></li><li id="5e7e" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://www.docker.com/blog/deploying-a-minecraft-docker-server-to-the-cloud/" rel="noopener ugc nofollow" target="_blank">部署minecraft </a></li><li id="e62b" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://www.compose-spec.io/" rel="noopener ugc nofollow" target="_blank">撰写规范</a></li><li id="69d1" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://cloudblogs.microsoft.com/opensource/2020/07/22/vs-code-docker-extension-azure-containers-instances/" rel="noopener ugc nofollow" target="_blank"> VS代码集成</a></li><li id="fb58" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://docs.microsoft.com/en-us/azure/container-instances/quickstart-docker-cli" rel="noopener ugc nofollow" target="_blank"> Azure ACI快速入门</a></li><li id="67db" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://docs.microsoft.com/en-us/learn/modules/run-docker-with-azure-container-instances/" rel="noopener ugc nofollow" target="_blank">微软学习</a></li><li id="3d68" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://docs.microsoft.com/en-gb/azure/container-instances/container-instances-volume-gitrepo" rel="noopener ugc nofollow" target="_blank"> Git回购为卷</a></li><li id="a7fd" class="me mf jg ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated"><a class="ae jd" href="https://www.youtube.com/watch?v=7G_oDLON7Us&amp;ab_channel=MicrosoftAzure" rel="noopener ugc nofollow" target="_blank">Mark Russinovich和Scott Hanselman在Azure Friday进行了非常酷的演示</a></li></ul></div></div>    
</body>
</html>