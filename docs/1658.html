<html>
<head>
<title>Auxiliary Routing with React?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带React的辅助路由？</h1>
<blockquote>原文：<a href="https://itnext.io/auxiliary-routing-with-react-e0a4eee36122?source=collection_archive---------2-----------------------#2018-12-21">https://itnext.io/auxiliary-routing-with-react-e0a4eee36122?source=collection_archive---------2-----------------------#2018-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="09e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">辅助路线是什么？角度路由器支持多条不可靠路线的渲染。最常见的用例是沿着主要路线呈现弹出窗口、模式窗口或侧边栏。你可以在<a class="ae kl" href="https://angular.io/guide/router#displaying-multiple-routes-in-named-outlets" rel="noopener ugc nofollow" target="_blank">https://Angular . io/guide/router # displaying-multi-routes-in-named-outlets</a>了解更多关于Angular辅助路由的信息</p><h2 id="fe1d" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">要求</h2><p id="b2d4" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">在这篇博客中，我们将回顾一个由路由器打开和关闭模态对话框的用例。我们将使用React和react-router包来实现这个应用程序。</p><p id="eb6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看我们的要求。我们需要:</p><ol class=""><li id="1997" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">能够打开页面看到水果列表</li></ol><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/8980ade9cdd7328197d66206acdb4dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*GYRQc27wdLYIt2-jzQzxlQ.png"/></div></figure><p id="c62c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.能够点击一个水果链接，并打开一个关于这个水果的详细信息的模态对话框。应该更新URL以包含所选的水果。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/4677cd87f7eb7c074bf7fdb8f9ca509e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AL-T4KWb0Z3ihxXYkXWXLQ.png"/></div></div></figure><p id="e98e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.用户可以用打开模式保存应用程序URL。当用户使用这个URL打开应用程序时，modal应该与水果列表一起显示。</p><h2 id="9bb3" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">呈现水果列表</h2><p id="2b1d" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">该应用程序使用react-router BrowserRouter并配置路由和重定向组件。</p><pre class="lu lv lw lx gt mg mh mi mj aw mk bi"><span id="7c6d" class="km kn iq mh b gy ml mm l mn mo">class App extends Component {<br/>  render() {<br/>    return (<br/>      &lt;<strong class="mh ir">BrowserRouter</strong>&gt;<br/>          &lt;<strong class="mh ir">Switch</strong>&gt;<br/>            &lt;<strong class="mh ir">Route</strong> path="/fruits" <br/>               render={props =&gt; &lt;Fruits {...props}/&gt;}&gt;&lt;/Route&gt;<br/>            &lt;<strong class="mh ir">Redirect</strong> exact path="/" to="/fruits"/&gt;<br/>          &lt;/<strong class="mh ir">Switch</strong>&gt;<br/>      &lt;/<strong class="mh ir">BrowserRouter</strong>&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="3a39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">重定向</strong>组件用于将用户从“/”路径重定向到/fruits路径。<strong class="jp ir">路线</strong>/水果将呈现水果列表。<strong class="jp ir">开关</strong>用于呈现路由或重定向组件。</p><p id="af87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是水果组件和水果列表:</p><pre class="lu lv lw lx gt mg mh mi mj aw mk bi"><span id="9a8d" class="km kn iq mh b gy ml mm l mn mo">const Fruits = (props) =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>    &lt;h3&gt;Fruits&lt;/h3&gt;<br/>    &lt;ul&gt;<br/>      &lt;li&gt;apple details&lt;/Link&gt;&lt;/li&gt;<br/>      &lt;li&gt;orange details&lt;/Link&gt;&lt;/li&gt;<br/>      &lt;li&gt;banana details&lt;/Link&gt;&lt;/li&gt;<br/>    &lt;/ul&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span></pre><h2 id="9152" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">莫代尔水果细节</h2><p id="c65b" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">为了显示水果细节，我将使用W3。CSS模态。你可以在<a class="ae kl" href="https://www.w3schools.com/w3css/w3css_modal.asp" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/w3css/w3css_modal.asp</a>找到模态的CSS样式。</p><p id="1b74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是水果莫代尔:</p><pre class="lu lv lw lx gt mg mh mi mj aw mk bi"><span id="9f00" class="km kn iq mh b gy ml mm l mn mo">const Fruit = (props) =&gt; {<br/>  return (<br/>    &lt;div className="w3-modal" style={{display: 'block'}}&gt;<br/>      &lt;div className="w3-modal-content"&gt;<br/>        &lt;div className="w3-container"&gt;<br/>          &lt;p&gt;Details for fruit: {props.name}&lt;/p&gt;<br/>          &lt;p&gt;Some text. Some text. Some text.&lt;/p&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><h2 id="b38c" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">添加路线</h2><p id="7c94" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">到目前为止，我们创建了一个呈现水果列表的组件和一个特定水果的模态组件。现在让我们添加路由来满足我们的要求。</p><h2 id="3d57" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">链接到模态</h2><p id="fc8f" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">正如我在开始提到的，Angular '辅助符号将用于在一个URL中表示主路径(水果列表)和次路径(带有水果细节的模态)。</p><p id="3ba7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">URL将看起来像这样—<a class="ae kl" href="http://localhost:3000/fruits/(fruit/apple)" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/fruits/(fruit/apple)</a>我们的链接看起来像这样:</p><pre class="lu lv lw lx gt mg mh mi mj aw mk bi"><span id="2095" class="km kn iq mh b gy ml mm l mn mo">&lt;Link to="/fruits/(fruit/apple)"&gt;Open apple details&lt;/Link&gt;            </span></pre><h2 id="9e38" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">通向模态的路线</h2><p id="f35d" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">我们需要添加一个路由来呈现页面中的模态。我们可以像这样把它添加到水果成分中:</p><pre class="lu lv lw lx gt mg mh mi mj aw mk bi"><span id="f396" class="km kn iq mh b gy ml mm l mn mo">const Fruits = (props) =&gt; {<br/>  const basePath = props.match.path;<br/>  return (<br/>    &lt;&gt;<br/><strong class="mh ir">    &lt;Route path="fruits/\\(fruit/:name\\)"<br/>      render={props =&gt; <br/>         &lt;Fruit name={props.match.params.name}{...props}/&gt;}<br/>     /&gt;</strong><br/><br/>    &lt;h3&gt;Fruits&lt;/h3&gt;<br/>    &lt;ul&gt;<br/>          ....<br/>    &lt;/ul&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span></pre><p id="70af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，模态和列表将与<a class="ae kl" href="http://localhost:3000/fruits/(fruit/apple)" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/fruits/(fruit/apple)</a>URL一起呈现:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mp"><img src="../Images/811a82abf4b22be32de9b0f769e3d43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*txlg0xwe7u7edcAYTupBUA.png"/></div></div></figure><p id="8fcd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并且只有URL为<a class="ae kl" href="http://localhost:3000/fruits/(fruit/apple)" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/fruits</a>时的列表</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mq"><img src="../Images/26070f8500fbf2b7395a273b570b25c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ljzPZJZ5sfyFsYlAd0tO7Q.png"/></div></div></figure><h2 id="15ea" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">封闭模态</h2><p id="8ded" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">要关闭这个模态，我们只需要从URL中删除次要路径(/fruit/banana)。关闭按钮的功能将推出新的路线/水果。</p><pre class="lu lv lw lx gt mg mh mi mj aw mk bi"><span id="fca5" class="km kn iq mh b gy ml mm l mn mo">const Fruit = (props) =&gt; {<br/> <strong class="mh ir"> const handleClose = () =&gt; {<br/>    props.history.push('/fruits');<br/>  };</strong><br/><br/>  return (<br/>    &lt;div className="w3-modal" style={{display: 'block'}}&gt;<br/>      &lt;div className="w3-modal-content"&gt;<br/>        &lt;div className="w3-container" style={{padding: 30}}&gt;<br/>....<br/>         <strong class="mh ir"> &lt;button onClick={handleClose}&gt;Close&lt;/button&gt;</strong><br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><p id="5732" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在一切都按要求工作了，我们可以用<strong class="jp ir"> props.match.path. </strong>替换/fruits字符串</p><p id="5ddf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在以下位置查看工作示例:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mr ms l"/></div></figure></div></div>    
</body>
</html>