<html>
<head>
<title>Deploying Jakarta EE 9 applications to Open Liberty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Jakarta EE 9应用程序部署到Open Liberty</h1>
<blockquote>原文：<a href="https://itnext.io/deploying-jakarta-ee-9-applications-to-open-liberty-dac4529f48c6?source=collection_archive---------5-----------------------#2020-11-29">https://itnext.io/deploying-jakarta-ee-9-applications-to-open-liberty-dac4529f48c6?source=collection_archive---------5-----------------------#2020-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bbe525b66addc9069a161aebd3e74370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XZgar-TMaqJ9r-ovXsLz_A.png"/></div></div></figure><p id="0c17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在过去的开发迭代中，Open Liberty 已经为Jakarta EE 9提供了一个独立的预览版。在我写这篇文章的时候，最新的版本是21.0.0.1-beta。Open Liberty遵循每月出版周期，我认为陈旧版本将在未来几个月提供。</p><p id="5b1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">进入<a class="ae kw" href="https://openliberty.io/downloads" rel="noopener ugc nofollow" target="_blank">下载</a>页面，切换到<em class="kx"> Beta </em>选项卡，表格中有两个封装选项。</p><ul class=""><li id="ab76" class="ky kz iq ka b kb kc kf kg kj la kn lb kr lc kv ld le lf lg bi translated">雅加达EE 9测试版功能</li><li id="75f0" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">所有测试版功能</li></ul><p id="3f51" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并且确保你正在下载Jakarta EE 9测试版的特性。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h1 id="7259" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">先决条件</h1><p id="e433" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">确保您已经安装了以下软件。</p><ul class=""><li id="fe02" class="ky kz iq ka b kb kc kf kg kj la kn lb kr lc kv ld le lf lg bi translated">Java 8或Java 11</li><li id="8dcd" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">Apache Maven 3.6</li><li id="fb64" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">开放自由21.0.0.1测试版</li></ul></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h1 id="c391" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">手动打开自由号</h1><p id="e9d3" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">从我的github账户克隆<a class="ae kw" href="https://github.com/hantsy/jakartaee9-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">源代码</a>，然后构建项目。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="55fb" class="nf lu iq nb b gy ng nh l ni nj">mvn clean package</span></pre><p id="49e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，在<em class="kx">目标</em>文件夹中会打包一个<em class="kx">jakartaee 9-starter-boilerplate . war</em>文件。</p><p id="59e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">进入开放自由文件夹，启动开放自由服务器。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="20e7" class="nf lu iq nb b gy ng nh l ni nj"># cd wlp\bin</span><span id="3cd2" class="nf lu iq nb b gy nk nh l ni nj"># server start // `server run` to show logs in the fontend console<br/>Starting server defaultServer.<br/>CWWKE0953W: This version of Open Liberty is an unsupported early release version.<br/>Server defaultServer started.</span></pre><p id="4fe6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你是第一次运行server，它会为你创建一个<em class="kx">服务器配置文件</em>。它将在<em class="kx"> usr/servers </em>文件夹中创建一个名为<em class="kx"> defaultServer </em>的新文件夹来准备一个<code class="fe nl nm nn nb b">jakartaee-9.0</code> feature pack的所有资源，详见<em class="kx">usr/servers/default server/server . XML</em>文件。</p><blockquote class="no np nq"><p id="031f" class="jy jz kx ka b kb kc kd ke kf kg kh ki nr kk kl km ns ko kp kq nt ks kt ku kv ij bi translated"><em class="iq">注意:服务器概要类似于其他应用服务器中的域概念，比如Glassfish、WildFly等。</em></p></blockquote><p id="ac50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要部署我们的应用程序，只需将war复制到<em class="kx">WLP/usr/servers/default server/drop ins</em>文件夹中。</p><p id="7828" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<em class="kx">usr/servers/default server/logs/messages . log</em>文件中，您会看到部署进度。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="0451" class="nf lu iq nb b gy ng nh l ni nj">[11/24/20, 16:00:07:304 CST] 00000046 com.ibm.ws.app.manager.AppMessageHelper                      I CWWKZ0018I: Starting application jakartaee9-starter-boilerplate.<br/>[11/24/20, 16:00:07:304 CST] 00000046 bm.ws.app.manager.war.internal.WARDeployedAppInfoFactoryImpl I CWWKZ0133I: The jakartaee9-starter-boilerplate application at the D:\appsvr\wlp\usr\servers\defaultServer\dropins\jakartaee9-starter-boilerplate.war location is being expanded to the D:\appsvr\wlp\usr\servers\defaultServer\apps\expanded\jakartaee9-starter-boilerplate.war directory.<br/>[11/24/20, 16:00:09:629 CST] 00000046 org.jboss.weld.Version                                       I WELD-000900: 4.0.0 (Alpha3)<br/>[11/24/20, 16:00:10:709 CST] 00000046 org.jboss.weld.Event                                         I WELD-000411: Observer method [BackedAnnotatedMethod] org.apache.myfaces.config.annotation.CdiAnnotationProviderExtension.processAnnotatedType(@Observes ProcessAnnotatedType&lt;T&gt;) receives events for all annotated types. Consider restricting events using @WithAnnotations or a generic type with bounds.<br/>[11/24/20, 16:00:10:726 CST] 00000046 org.jboss.weld.Event                                         I WELD-000411: Observer method [BackedAnnotatedMethod] org.apache.myfaces.cdi.JsfArtifactProducerExtension.processAnnotatedType(@Observes ProcessAnnotatedType&lt;T&gt;, BeanManager) receives events for all annotated types. Consider restricting events using @WithAnnotations or a generic type with bounds.<br/>[11/24/20, 16:00:11:770 CST] 00000046 com.ibm.ws.webcontainer.osgi.webapp.WebGroup                 I SRVE0169I: Loading Web Module: jakartaee9-starter-boilerplate.<br/>[11/24/20, 16:00:11:786 CST] 00000046 com.ibm.ws.webcontainer                                      I SRVE0250I: Web Module jakartaee9-starter-boilerplate has been bound to default_host.<br/>[11/24/20, 16:00:11:786 CST] 00000046 com.ibm.ws.http.internal.VirtualHostImpl                     A CWWKT0016I: Web application available (default_host): <a class="ae kw" href="http://localhost:9080/jakartaee9-starter-boilerplate/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/jakartaee9-starter-boilerplate/</a><br/>[11/24/20, 16:00:11:786 CST] 0000004e com.ibm.ws.session.WASSessionCore                            I SESN0176I: A new session context will be created for application key default_host/jakartaee9-starter-boilerplate<br/>[11/24/20, 16:00:11:786 CST] 0000004e com.ibm.ws.util                                              I SESN0172I: The session manager is using the Java default SecureRandom implementation for session ID generation.<br/>[11/24/20, 16:00:11:864 CST] 00000046 com.ibm.ws.webcontainer.osgi.mbeans.PluginGenerator          I SRVE9103I: A configuration file for a web server plugin was automatically generated for this server at D:\appsvr\wlp\usr\servers\defaultServer\logs\state\plugin-cfg.xml.<br/>[11/24/20, 16:00:11:896 CST] 0000004e org.apache.myfaces.ee.MyFacesContainerInitializer            I Using org.apache.myfaces.ee.MyFacesContainerInitializer<br/>[11/24/20, 16:00:12:005 CST] 0000004e com.ibm.ws.app.manager.AppMessageHelper                      A CWWKZ0001I: Application jakartaee9-starter-boilerplate started in 4.701 seconds.<br/>[11/24/20, 16:00:12:370 CST] 0000004e org.jboss.resteasy.resteasy_jaxrs.i18n                       I RESTEASY002225: Deploying jakarta.ws.rs.core.Application: class com.example.JaxrsActivator$Proxy$_$$_WeldClientProxy<br/>[11/24/20, 16:00:12:433 CST] 0000004e com.ibm.ws.webcontainer.servlet                              I SRVE0242I: [jakartaee9-starter-boilerplate] [/jakartaee9-starter-boilerplate] [com.example.JaxrsActivator]: Initialization successful.</span></pre><p id="1350" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要取消部署应用程序，只需从<em class="kx">WLP/usr/servers/default server/drop ins</em>文件夹中删除war文件。</p><p id="2402" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">检查<em class="kx">usr/servers/default server/logs/messages . log</em>文件，您会看到这样的日志。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="e1b9" class="nf lu iq nb b gy ng nh l ni nj">[11/24/20, 16:04:13:245 CST] 00000066 com.ibm.ws.http.internal.VirtualHostImpl                     A CWWKT0017I: Web application removed (default_host): <a class="ae kw" href="http://localhost:9080/jakartaee9-starter-boilerplate/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/jakartaee9-starter-boilerplate/</a><br/>[11/24/20, 16:04:13:248 CST] 00000066 com.ibm.ws.webcontainer.servlet                              I SRVE0253I: [jakartaee9-starter-boilerplate] [/jakartaee9-starter-boilerplate] [com.example.JaxrsActivator]: Destroy successful.<br/>[11/24/20, 16:04:13:281 CST] 00000066 com.ibm.ws.app.manager.AppMessageHelper                      A CWWKZ0009I: The application jakartaee9-starter-boilerplate has stopped successfully.<br/>[11/24/20, 16:04:13:359 CST] 00000027 com.ibm.ws.webcontainer.osgi.mbeans.PluginGenerator          I SRVE9103I: A configuration file for a web server plugin was automatically generated for this server at D:\appsvr\wlp\usr\servers\defaultServer\logs\state\plugin-cfg.xml.</span></pre></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h1 id="86ae" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">使用Liberty Maven插件</h1><p id="7542" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">在项目<em class="kx"> pom.xml </em>文件的<code class="fe nl nm nn nb b">build/plugins</code>节下声明一个<code class="fe nl nm nn nb b">liberty-maven-plugin</code>配置。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="11ea" class="nf lu iq nb b gy ng nh l ni nj">&lt;plugin&gt;<br/>    &lt;groupId&gt;io.openliberty.tools&lt;/groupId&gt;<br/>    &lt;artifactId&gt;liberty-maven-plugin&lt;/artifactId&gt;<br/>    &lt;version&gt;${liberty-maven-plugin.version}&lt;/version&gt;<br/>&lt;/plugin&gt;</span></pre><p id="aec6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当简单地运行<code class="fe nl nm nn nb b">liberty:run</code>时，它将检索最新的<code class="fe nl nm nn nb b">io.openliberty:openliberty-kernel</code>并安装在您的项目特定的<code class="fe nl nm nn nb b">src/main/liberty/config/server.xml</code>文件中定义的所需特性，然后启动服务器并将您的应用程序部署到该服务器。</p><p id="860c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要使用最新的Open Liberty Jakarta EE 9 beta特性包来运行我们的应用程序，请在<code class="fe nl nm nn nb b">liberty-maven-plugin</code>配置中配置<code class="fe nl nm nn nb b">runtimeArtifact</code>来替换默认的<code class="fe nl nm nn nb b">openlibety-kernel</code>。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="2062" class="nf lu iq nb b gy ng nh l ni nj">&lt;runtimeArtifact&gt;<br/>    &lt;groupId&gt;io.openliberty.beta&lt;/groupId&gt;<br/>    &lt;artifactId&gt;openliberty-jakartaee9&lt;/artifactId&gt;<br/>    &lt;version&gt;${liberty.runtime.version}&lt;/version&gt;<br/>&lt;/runtimeArtifact&gt;</span></pre><p id="ae21" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe nl nm nn nb b">properties</code>部分定义了<code class="fe nl nm nn nb b">liberty.runtime.version</code>属性。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="eaf8" class="nf lu iq nb b gy ng nh l ni nj">&lt;liberty.runtime.version&gt;21.0.0.1-beta&lt;/liberty.runtime.version&gt;</span></pre><p id="e365" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行以下命令，将我们的应用程序部署到Open Liberty服务器上。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="084d" class="nf lu iq nb b gy ng nh l ni nj">mvn clean liberty:run</span></pre><p id="638d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您将在控制台中看到以下消息。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="da5d" class="nf lu iq nb b gy ng nh l ni nj">[INFO] --- liberty-maven-plugin:3.3.1:run (default-cli) @ jakartaee9-starter-boilerplate ---<br/>[INFO] The runtimeArtifact version 21.0.0.1-beta is overwritten by the liberty.runtime.version value 21.0.0.1-beta.<br/>[INFO] CWWKM2102I: Using artifact based assembly archive : io.openliberty.beta:openliberty-jakartaee9:null:21.0.0.1-beta:zip.<br/>[INFO] CWWKM2102I: Using installDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp.<br/>[INFO] CWWKM2102I: Using serverName : defaultServer.<br/>[INFO] CWWKM2102I: Using serverDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[INFO] Running maven-compiler-plugin:compile<br/>[INFO] Changes detected - recompiling the module!<br/>[INFO] Compiling 4 source files to D:\hantsylabs\jakartaee9-starter-boilerplate\target\classes<br/>[INFO] Running maven-resources-plugin:resources<br/>[INFO] Using 'UTF-8' encoding to copy filtered resources.<br/>[INFO] Copying 1 resource<br/>[INFO] Running liberty:create<br/>[INFO] The runtimeArtifact version 21.0.0.1-beta is overwritten by the liberty.runtime.version value 21.0.0.1-beta.<br/>[INFO] CWWKM2102I: Using artifact based assembly archive : io.openliberty.beta:openliberty-jakartaee9:null:21.0.0.1-beta:zip.<br/>[INFO] CWWKM2102I: Using installDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp.<br/>[INFO] CWWKM2102I: Using serverName : defaultServer.<br/>[INFO] CWWKM2102I: Using serverDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[INFO] Installing assembly...<br/>[INFO] Expanding: C:\Users\hantsy\.m2\repository\io\openliberty\beta\openliberty-jakartaee9\21.0.0.1-beta\openliberty-jakartaee9-21.0.0.1-beta.zip into D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty<br/>[INFO] CWWKM2143I: Server defaultServer does not exist. Now creating...<br/>[INFO] CWWKM2001I: Invoke command is ["D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\bin\server.bat", create, defaultServer].<br/>[INFO] Server defaultServer created.<br/>[INFO] CWWKM2129I: Server defaultServer has been created at D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[INFO] Copying 1 file to D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer<br/>[INFO] CWWKM2144I: Update server configuration file server.xml from D:\hantsylabs\jakartaee9-starter-boilerplate\src\main\liberty\config\server.xml.<br/>[INFO] Running liberty:install-feature<br/>[INFO] The runtimeArtifact version 21.0.0.1-beta is overwritten by the liberty.runtime.version value 21.0.0.1-beta.<br/>[INFO] CWWKM2102I: Using artifact based assembly archive : io.openliberty.beta:openliberty-jakartaee9:null:21.0.0.1-beta:zip.<br/>[INFO] CWWKM2102I: Using installDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp.<br/>[INFO] CWWKM2102I: Using serverName : defaultServer.<br/>[INFO] CWWKM2102I: Using serverDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[WARNING] Features that are not included with the beta runtime cannot be installed. Features that are included with the beta runtime can be enabled by adding them to your server.xml file.<br/>[INFO] Running liberty:deploy<br/>[INFO] The runtimeArtifact version 21.0.0.1-beta is overwritten by the liberty.runtime.version value 21.0.0.1-beta.<br/>[INFO] CWWKM2102I: Using artifact based assembly archive : io.openliberty.beta:openliberty-jakartaee9:null:21.0.0.1-beta:zip.<br/>[INFO] CWWKM2102I: Using installDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp.<br/>[INFO] CWWKM2102I: Using serverName : defaultServer.<br/>[INFO] CWWKM2102I: Using serverDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[INFO] Copying 1 file to D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer<br/>[INFO] CWWKM2144I: Update server configuration file server.xml from D:\hantsylabs\jakartaee9-starter-boilerplate\src\main\liberty\config\server.xml.<br/>[INFO] CWWKM2185I: The liberty-maven-plugin configuration parameter "appsDirectory" value defaults to "dropins".<br/>[INFO] CWWKM2160I: Installing application jakartaee9-starter-boilerplate.war.xml.<br/>[INFO] Copying 1 file to D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer<br/>[INFO] CWWKM2144I: Update server configuration file server.xml from D:\hantsylabs\jakartaee9-starter-boilerplate\src\main\liberty\config\server.xml.<br/>[INFO] CWWKM2001I: Invoke command is ["D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\bin\server.bat", run, defaultServer].<br/>[INFO] Launching defaultServer (Open Liberty 21.0.0.1-beta/wlp-1.0.47.cl201220201111-0736) on OpenJDK 64-Bit Server VM, version 11.0.7+10 (en_US)<br/>[INFO] CWWKE0953W: This version of Open Liberty is an unsupported early release version.<br/>[INFO] [AUDIT   ] CWWKE0001I: The server defaultServer has been launched.<br/>[INFO] [WARNING ] CWWKS3103W: There are no users defined for the BasicRegistry configuration of ID com.ibm.ws.security.registry.basic.config[basic].<br/>[INFO] [AUDIT   ] CWWKZ0058I: Monitoring dropins for applications.<br/>[INFO] [AUDIT   ] CWPKI0820A: The default keystore has been created using the 'keystore_password' environment variable.<br/>[INFO] [AUDIT   ] CWWKS4104A: LTPA keys created in 1.056 seconds. LTPA key file: D:/hantsylabs/jakartaee9-starter-boilerplate/target/liberty/wlp/usr/servers/defaultServer/resources/security/ltpa.keys<br/>[INFO] [AUDIT   ] CWWKT0016I: Web application available (default_host): <a class="ae kw" href="http://localhost:9080/ibm/api/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/ibm/api/</a><br/>[INFO] [AUDIT   ] CWWKT0016I: Web application available (default_host): <a class="ae kw" href="http://localhost:9080/IBMJMXConnectorREST/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/IBMJMXConnectorREST/</a><br/>[INFO] [AUDIT   ] CWWKT0016I: Web application available (default_host): <a class="ae kw" href="http://localhost:9080/jakartaee9-starter-boilerplate/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/jakartaee9-starter-boilerplate/</a><br/>[INFO] [AUDIT   ] CWWKZ0001I: Application jakartaee9-starter-boilerplate started in 6.360 seconds.<br/>[INFO] [AUDIT   ] CWWKF0012I: The server installed the following features: [appClientSupport-2.0, appSecurity-4.0, beanValidation-3.0, cdi-3.0, concurrent-2.0, connectors-2.0, connectorsInboundSecurity-2.0, distributedMap-1.0, enterpriseBeans-4.0, enterpriseBeansHome-4.0, enterpriseBeansLite-4.0, enterpriseBeansPersistentTimer-4.0, enterpriseBeansRemote-4.0, expressionLanguage-4.0, faces-3.0, jacc-2.0, jakartaee-9.0, jaspic-2.0, jaxb-3.0, jdbc-4.2, jndi-1.0, json-1.0, jsonb-2.0, jsonp-2.0, mail-2.0, managedBeans-2.0, mdb-4.0, messaging-3.0, messagingClient-3.0, messagingSecurity-3.0, messagingServer-3.0, pages-3.0, persistence-3.0, persistenceContainer-3.0, restConnector-2.0, restfulWS-3.0, restfulWSClient-3.0, servlet-5.0, ssl-1.0, webProfile-9.0, websocket-2.0].<br/>[INFO] [AUDIT   ] CWWKF0011I: The defaultServer server is ready to run a smarter planet. The defaultServer server started in 52.202 seconds.<br/>[INFO] [AUDIT   ] CWPKI0803A: SSL certificate created in 8.997 seconds. SSL key file: D:/hantsylabs/jakartaee9-starter-boilerplate/target/liberty/wlp/usr/servers/defaultServer/resources/security/key.p12<br/>[INFO] [AUDIT   ] CWWKI0001I: The CORBA name server is now available at corbaloc:iiop:localhost:2809/NameService.</span></pre><blockquote class="no np nq"><p id="53d6" class="jy jz kx ka b kb kc kd ke kf kg kh ki nr kk kl km ns ko kp kq nt ks kt ku kv ij bi translated"><em class="iq">注意:beta特性包在Maven原型中使用了不同的</em><strong class="ka ir"><em class="iq">groupId</em></strong><em class="iq">(</em><code class="fe nl nm nn nb b"><em class="iq">io.openliberty.beta </em></code><em class="iq">)。</em></p></blockquote><p id="d180" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要取消部署应用程序并停止服务器，只需向控制台发送一个<code class="fe nl nm nn nb b">CTRL+C</code>，您将看到以下信息。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="65ec" class="nf lu iq nb b gy ng nh l ni nj">[INFO] [AUDIT   ] CWWKE1100I: Waiting for up to 30 seconds for the server to quiesce.<br/>[INFO] [AUDIT   ] CWWKT0017I: Web application removed (default_host): <a class="ae kw" href="http://localhost:9080/jakartaee9-starter-boilerplate/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/jakartaee9-starter-boilerplate/</a><br/>[INFO] [AUDIT   ] CWWKT0017I: Web application removed (default_host): <a class="ae kw" href="http://localhost:9080/ibm/api/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/ibm/api/</a><br/>[INFO] [AUDIT   ] CWWKT0017I: Web application removed (default_host): <a class="ae kw" href="http://localhost:9080/IBMJMXConnectorREST/" rel="noopener ugc nofollow" target="_blank">http://localhost:9080/IBMJMXConnectorREST/</a><br/>[INFO] [AUDIT   ] CWWKZ0009I: The application jakartaee9-starter-boilerplate has stopped successfully.<br/>[INFO] [AUDIT   ] CWWKI0002I: The CORBA name server is no longer available at corbaloc:iiop:localhost:2809/NameService.</span></pre><p id="ec8a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还可以在插件<em class="kx">配置</em>中指定一个<code class="fe nl nm nn nb b">installDirectory</code>属性，以使用现有的Open Liberty服务器。</p><p id="2aa5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在CI服务器中，要从头开始准备Open Liberty服务器，需要添加一个<code class="fe nl nm nn nb b">dependency:unpack</code>来直接从Maven Central检索Open Liberty档案。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="23f4" class="nf lu iq nb b gy ng nh l ni nj">&lt;plugin&gt;<br/>    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br/>    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;<br/>    &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;<br/>    &lt;executions&gt;<br/>        &lt;execution&gt;<br/>            &lt;id&gt;default-unpack&lt;/id&gt;<br/>            &lt;phase&gt;process-resources&lt;/phase&gt;<br/>            &lt;goals&gt;<br/>                &lt;goal&gt;unpack&lt;/goal&gt;<br/>            &lt;/goals&gt;<br/>            &lt;configuration&gt;<br/>                &lt;artifactItems&gt;<br/>                    &lt;artifactItem&gt;<br/>                        &lt;groupId&gt;io.openliberty.beta&lt;/groupId&gt;<br/>                        &lt;artifactId&gt;openliberty-jakartaee9&lt;/artifactId&gt;<br/>                        &lt;version&gt;${liberty.runtime.version}&lt;/version&gt;<br/>                        &lt;type&gt;zip&lt;/type&gt;<br/>                        &lt;overWrite&gt;false&lt;/overWrite&gt;<br/>                        &lt;outputDirectory&gt;${project.build.directory}/liberty<br/>                        &lt;/outputDirectory&gt;<br/>                    &lt;/artifactItem&gt;<br/>                &lt;/artifactItems&gt;<br/>            &lt;/configuration&gt;<br/>        &lt;/execution&gt;<br/>    &lt;/executions&gt;<br/>&lt;/plugin&gt;<br/>&lt;!-- Enable liberty-maven-plugin --&gt;<br/>&lt;plugin&gt;<br/>    &lt;groupId&gt;io.openliberty.tools&lt;/groupId&gt;<br/>    &lt;artifactId&gt;liberty-maven-plugin&lt;/artifactId&gt;<br/>    &lt;version&gt;${liberty-maven-plugin.version}&lt;/version&gt;<br/>    &lt;configuration&gt;<br/>        &lt;installDirectory&gt;${project.build.directory}/liberty/wlp&lt;/installDirectory&gt;<br/>    &lt;/configuration&gt;<br/>&lt;/plugin&gt;</span></pre><p id="4af8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在运行以下命令，将我们的应用程序部署到Open Liberty。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="a692" class="nf lu iq nb b gy ng nh l ni nj">mvn clean package liberty:start liberty:deploy</span></pre><blockquote class="no np nq"><p id="1800" class="jy jz kx ka b kb kc kd ke kf kg kh ki nr kk kl km ns ko kp kq nt ks kt ku kv ij bi translated"><em class="iq">注意:这里我们不使用</em> <code class="fe nl nm nn nb b"><em class="iq">run</em></code> <em class="iq">目标，因为它会在初始阶段清理</em> <strong class="ka ir"> <em class="iq">目标</em> </strong> <em class="iq">文件夹，这样会删除下载的Open Liberty dist。</em></p></blockquote><p id="2ae0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当执行<code class="fe nl nm nn nb b">start</code>和<code class="fe nl nm nn nb b">deploy</code>目标时，您将看到以下消息。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="8d4d" class="nf lu iq nb b gy ng nh l ni nj">[INFO] --- liberty-maven-plugin:3.3.1:start (default-cli) @ jakartaee9-starter-boilerplate ---<br/>[INFO] CWWKM2102I: Using pre-installed assembly : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp.<br/>[INFO] CWWKM2102I: Using serverName : defaultServer.<br/>[INFO] CWWKM2102I: Using serverDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[INFO] CWWKM2107I: Installation type is pre-existing; skipping installation.<br/>[INFO] Copying 1 file to D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer<br/>[INFO] CWWKM2144I: Update server configuration file server.xml from D:\hantsylabs\jakartaee9-starter-boilerplate\src\main\liberty\config\server.xml.<br/>[INFO] CWWKM2001I: Invoke command is ["D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\bin\server.bat", start, defaultServer].<br/>[INFO] Starting server defaultServer.<br/>[INFO] CWWKE0953W: This version of Open Liberty is an unsupported early release version.<br/>[INFO] Server defaultServer started.<br/>[INFO] Waiting up to 30 seconds for server confirmation:  CWWKF0011I to be found in D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer\logs\messages.log<br/>[INFO] CWWKM2010I: Searching for CWWKF0011I in D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer\logs\messages.log. This search will timeout after 30 seconds.<br/>[INFO] CWWKM2015I: Match number: 1 is [11/24/20, 17:38:08:783 CST] 00000022 com.ibm.ws.kernel.feature.internal.FeatureManager            A CWWKF0011I: The defaultServer server is ready to run a smarter planet. The defaultServer server started in 53.584 seconds..<br/>[INFO]<br/>[INFO] --- liberty-maven-plugin:3.3.1:deploy (default-cli) @ jakartaee9-starter-boilerplate ---<br/>[INFO] CWWKM2102I: Using pre-installed assembly : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp.<br/>[INFO] CWWKM2102I: Using serverName : defaultServer.<br/>[INFO] CWWKM2102I: Using serverDirectory : D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer.<br/>[INFO] Copying 1 file to D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer<br/>[INFO] CWWKM2144I: Update server configuration file server.xml from D:\hantsylabs\jakartaee9-starter-boilerplate\src\main\liberty\config\server.xml.<br/>[INFO] CWWKM2185I: The liberty-maven-plugin configuration parameter "appsDirectory" value defaults to "dropins".<br/>[INFO] CWWKM2160I: Installing application jakartaee9-starter-boilerplate.war.xml.<br/>[INFO] CWWKM2010I: Searching for CWWKZ0001I.*jakartaee9-starter-boilerplate in D:\hantsylabs\jakartaee9-starter-boilerplate\target\liberty\wlp\usr\servers\defaultServer\logs\messages.log. This search will timeout after 40 seconds.<br/>[INFO] CWWKM2015I: Match number: 1 is [11/24/20, 17:38:16:858 CST] 00000028 com.ibm.ws.app.manager.AppMessageHelper                      A CWWKZ0001I: Application jakartaee9-starter-boilerplate started in 4.990 seconds..</span></pre><p id="6a82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在启动阶段，它将使用您的项目中的配置更新Open Liberty server配置(如果存在)。一个示例<em class="kx"> server.xml </em>文件是这样的。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="e7dd" class="nf lu iq nb b gy ng nh l ni nj">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;server description="new server"&gt;</span><span id="fe3b" class="nf lu iq nb b gy nk nh l ni nj">    &lt;!-- Enable features --&gt;<br/>    &lt;featureManager&gt;<br/>        &lt;feature&gt;jakartaee-9.0&lt;/feature&gt;<br/>    &lt;/featureManager&gt;</span><span id="0640" class="nf lu iq nb b gy nk nh l ni nj">    &lt;!-- This template enables security. To get the full use of all the capabilities, a keystore and user registry are required. --&gt;<br/>    <br/>    &lt;!-- For the keystore, default keys are generated and stored in a keystore. To provide the keystore password, generate an <br/>         encoded password using bin/securityUtility encode and add it below in the password attribute of the keyStore element. <br/>         Then uncomment the keyStore element. --&gt;<br/>    &lt;!--<br/>    &lt;keyStore password=""/&gt; <br/>    --&gt;<br/>    <br/>    &lt;!--For a user registry configuration, configure your user registry. For example, configure a basic user registry using the<br/>        basicRegistry element. Specify your own user name below in the name attribute of the user element. For the password, <br/>        generate an encoded password using bin/securityUtility encode and add it in the password attribute of the user element. <br/>        Then uncomment the user element. --&gt;<br/>    &lt;basicRegistry id="basic" realm="BasicRealm"&gt; <br/>        &lt;!-- &lt;user name="yourUserName" password="" /&gt;  --&gt; <br/>    &lt;/basicRegistry&gt;<br/>    <br/>    &lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host="*" --&gt;<br/>    &lt;httpEndpoint id="defaultHttpEndpoint"<br/>                  httpPort="9080"<br/>                  httpsPort="9443" /&gt;<br/>                  <br/>    &lt;!-- Automatically expand WAR files and EAR files --&gt;<br/>    &lt;applicationManager autoExpand="true"/&gt;</span><span id="1e48" class="nf lu iq nb b gy nk nh l ni nj">&lt;/server&gt;</span></pre><p id="01d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要取消部署并停止Open Liberty服务器，请执行以下命令。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="1a44" class="nf lu iq nb b gy ng nh l ni nj">mvn liberty:undeploy <br/>mvn liberty:stop</span></pre><p id="17b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还可以配置<code class="fe nl nm nn nb b">installDirectory</code>属性来使用本地Open Liberty服务器的位置。</p><pre class="mw mx my mz gt na nb nc nd aw ne bi"><span id="801d" class="nf lu iq nb b gy ng nh l ni nj">&lt;configuration&gt;<br/>     &lt;installDirectory&gt;D:/appsvr/wlp&lt;/installDirectory&gt;<br/>     ...<br/>&lt;/configuration&gt;</span></pre><p id="b90e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nl nm nn nb b">liberty-maven-plugin</code>不支持将应用部署到正在运行的服务器上，详见<a class="ae kw" href="https://github.com/OpenLiberty/ci.maven/issues/16" rel="noopener ugc nofollow" target="_blank">open liberty/ci . maven # 16</a>。</p></div></div>    
</body>
</html>