<html>
<head>
<title>JAMstack Basics: How to Create a Gatsby Starter with Contentful and Deploy to Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JAMstack基础:如何用Contentful创建一个Gatsby Starter并部署到Netlify</h1>
<blockquote>原文：<a href="https://itnext.io/jamstack-basics-how-to-create-a-gatsby-starter-with-contentful-and-deploy-to-netlify-846354cc74bc?source=collection_archive---------1-----------------------#2018-10-10">https://itnext.io/jamstack-basics-how-to-create-a-gatsby-starter-with-contentful-and-deploy-to-netlify-846354cc74bc?source=collection_archive---------1-----------------------#2018-10-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="257a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">JAMstack已经激发了一些我们见过的最伟大的网络开发工具。发布惊人的快速、安全和可访问的网站从未如此容易或如此自由。我仍然很难相信我自己的<a class="ae kl" href="https://cwlsn.com" rel="noopener ugc nofollow" target="_blank">个人网站</a>现在是免费的，而不是每月15美元的VPS。如果你能把一个旧的架构转换成我们今天要讨论的，你可以把这些节省下来的钱投资到你的个人发展上，参加一个课程或教育会员。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/155c492e3376217bcfebaa653a9ae2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ckD4DbVLuOCb79bj"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae kl" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">潘卡杰·帕特尔</a>在<a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d6c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是你可以从这篇文章中学到的一些东西:</p><ul class=""><li id="5b4d" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">这些新技术是什么，它们有什么作用？</li><li id="49af" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如何建立一个盖茨比启动器，或者如何从我建立的那个开始。</li><li id="1a42" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如何设置Contentful并创建您的第一个数据。</li><li id="2188" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如何链接Contentful和Gatsby，使用GraphQL获取这些数据并显示，如何使用Gatsby的GraphQL playground测试查询。</li><li id="1bd7" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">如何部署到Netlify，将Contentful连接到Netlify以在数据更改时触发构建。</li></ul><p id="da8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">初学React经验是用Gatsby开发的必备。</p><h1 id="f64a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">盖茨比，心满意足，无忧无虑</h1><p id="b65a" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">这些工具处于这一运动的顶端，为各自领域的开发人员提供一流的服务。每一种都有不同的选择，做着同样伟大的事情，但是当我为自己的项目寻找相关性时，我喜欢用最好的。</p><p id="c9d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.gatsbyjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">盖茨比</strong> </a>是一个静态站点生成器。你在React中建立你的站点，用GraphQL查询数据(这比听起来容易)，Gatsby把它们全部转换成静态文件提供给浏览器。Gatsby是非常可配置的，有很多插件可以让你做更高级的事情，但是默认情况下，它已经为你做了很多。</p><p id="1b55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.contentful.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Contentful </strong> </a>是个无头CMS。这就像WordPress，但是没有等待用户的站点。它允许您定义想要创建的内容类型，然后为您提供创建内容的表单。然后，它通过一个API提供您的内容，我们的静态站点生成器将在构建时与之对话。</p><p id="00cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.netlify.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Netlify </strong> </a>将部署我们的网站并在网上免费提供服务。我们需要做的就是登录GitHub，从我们的repo创建一个新的站点，并做一些简单的配置工作。由于Gatsby starters通常是托管在GitHub上的，我们甚至可以创建一个按钮来提前完成所有的配置。在你的站点成功部署后，Netlify提供域名注册(或者你可以使用你自己的)和免费的HTTPS支持。</p><p id="f1a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们今天将使用这些工具的方式非常简单，几乎没有触及到什么是可能的，但是将您的第一个JAMstack站点放在您的腰带之下是迷上这个设置的关键。这些工具为我们做了这么多工作，我们可以专注于构建很酷的东西，让DevOps自己处理。</p><h1 id="de73" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">创建一个盖茨比启动器</h1><p id="a1ce" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">开始一个盖茨比项目最简单的方法是使用一个启动器。在撰写本文时，官方的<a class="ae kl" href="https://www.gatsbyjs.org/starters/" rel="noopener ugc nofollow" target="_blank"> Gatsby Starter Library </a>中几乎有70个，每个都提供不同的特性、插件和附加功能。我喜欢创建自己的样板文件(比如我的<a class="ae kl" href="https://rinsejs.io/" rel="noopener ugc nofollow" target="_blank"> React组件库样板文件</a>)，所以让我们看看Gatsby应用程序的最低要求。</p><ul class=""><li id="d600" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">React、ReactDOM、Gatsby的基线依赖关系</li><li id="ebc0" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated"><code class="fe mt mu mv mw b">src/pages/index.js</code>导出React组件</li></ul><p id="ee85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！许多初学者会在第二页演示Gatsby附带的<code class="fe mt mu mv mw b">Link</code>组件，但是我们现在可以跳过它。有一个回购有这个基本的启动程序，你可以在<a class="ae kl" href="https://github.com/gatsbyjs/gatsby-starter-hello-world" rel="noopener ugc nofollow" target="_blank">盖茨比的GitHub </a>上看到它。我们现在不需要修改这个，在我们深入研究数据和插件之前，我们需要获取一些东西！</p><p id="a863" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您想玩“Hello World”示例，您可以进行Gatsby设置:</p><pre class="kn ko kp kq gt mx mw my mz aw na bi"><span id="45ce" class="nb lr iq mw b gy nc nd l ne nf">$ npm i -G gatsby-cli # lets us call Gatsby commands<br/>$ gatsby new my-fun-site <a class="ae kl" href="https://github.com/gatsbyjs/gatsby-starter-hello-world" rel="noopener ugc nofollow" target="_blank">https://github.com/gatsbyjs/gatsby-starter-hello-world</a><br/>$ cd my-fun-site<br/>$ yarn install # or npm i<br/>$ gatsby develop</span></pre><p id="f118" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看看<code class="fe mt mu mv mw b">src/pages/index.js</code>，做些改变。它将在您的浏览器中实时更新！</p><h1 id="ced1" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">创造令人满意的…内容</h1><p id="3a1e" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">当你最初注册Contentful的时候，他们会给你一个相当有指导意义的教程，所以我会简单介绍一下我们在这里做的事情的要求。</p><ol class=""><li id="66c1" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk ng li lj lk bi translated"><strong class="jp ir">创建空间</strong>。我不喜欢使用给定的示例空间，所以我删除了它，并创建了一个名为“Starter Site”的空间，我将在这里使用它。</li><li id="3495" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated"><strong class="jp ir">创建内容模型</strong>。你可以把它想象成一篇博文。一个博客文章内容模型会有一个标题、内容、标签和你喜欢的任何其他字段。在您的内容模型中，您定义这些字段以及它们在编辑它们的表单中的外观。对于第一个内容模型，我将创建一个名为“主页”的模型。Contentful会把你的标题变成一个API标识符，就像<code class="fe mt mu mv mw b">homePage</code>一样，后面会很重要。我喜欢坚持他们产生的东西。</li><li id="887e" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated"><strong class="jp ir">在内容模型</strong>中创建一些字段。有很多可供选择的，但是对于这个例子，我们将选择四个字段，以便在扩展Gatsby starter时获得一些多样性。我将采用每个的默认设置。字段分别是:<br/> -标题(短文本)<br/> -内容(长文)<br/> -日期(日期&amp;时间)<br/> -图片(单媒体)<br/>别忘了保存！</li><li id="429e" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated"><strong class="jp ir">补充一些实际内容</strong>。在内容选项卡中，应该有一个“添加主页”按钮，如果你只是像我一样做了单一的内容类型。您会注意到编辑器非常丰富，长文本字段提供了一个Markdown编辑器。疯狂阅读这里的内容，确保选择一个好的图片，并在编辑器中尝试一些降价功能。如果需要内容，我推荐一些<a class="ae kl" href="http://www.catipsum.com/index.php" rel="noopener ugc nofollow" target="_blank"> Cat Ipsum </a>。</li><li id="08b6" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated"><strong class="jp ir">发布</strong>！Contentful将保存您的内容。</li></ol><p id="6ce8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经有了一些生活在Contentful中的基本内容，让我们扩展一下基本的Gatsby starter，把它从云中取出来放到我们的本地浏览器中。</p><h1 id="f5d8" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">把盖茨比接到Contentful，让我们得到GraphQL</h1><p id="a39d" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">成为优秀开发人员的第56个关键是永远不要错过流行文化的双关语。现在我们有了生活在别人电脑里的内容，一个运行在我们浏览器里的盖茨比网站，我们可以把两者连接起来。在你的Contentful的空间仪表盘中，会有一个写着“使用API”的按钮。该页面将显示您的空间ID和访问令牌。这就是我们获取内容所需要的一切，插件将处理其他一切。</p><p id="c6b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Gatsby项目的根目录下，创建一个名为<code class="fe mt mu mv mw b">.env</code>的文件，并用内容丰富的键填充它:</p><pre class="kn ko kp kq gt mx mw my mz aw na bi"><span id="2788" class="nb lr iq mw b gy nc nd l ne nf">spaceId=**********<br/>accessToken=***************************</span></pre><p id="f72a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在你继续之前，<strong class="jp ir">确保你的</strong> <code class="fe mt mu mv mw b"><strong class="jp ir">.gitignore</strong></code> <strong class="jp ir">文件有</strong> <code class="fe mt mu mv mw b"><strong class="jp ir">.env</strong></code> <strong class="jp ir">，这样你就不会提交这个文件</strong>。对于生产密钥，我们将在后面进行配置。目前，我们只是在本地获取内容。现在我们将开始为Gatsby添加一些配置。说到Git，因为我们只创建了一个Gatsby站点，而不是一个存储库，所以让我们花点时间运行一下<code class="fe mt mu mv mw b">git init</code>。</p><h1 id="1032" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">快速回顾和状态检查</h1><p id="fbe5" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">到目前为止，我们已经完成了以下步骤:</p><ol class=""><li id="b68a" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk ng li lj lk bi translated">全球安装在我们的机器上，从Gatsby Hello World starter创建了一个新项目，并安装和运行了它。</li><li id="cef7" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated">注册了Contentful的免费计划，做了一些内容。</li><li id="0f07" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated">将我们的钥匙添加到<code class="fe mt mu mv mw b">.env</code>。</li><li id="56d6" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk ng li lj lk bi translated">跑去<code class="fe mt mu mv mw b">git init</code>创建一个回购。</li></ol><p id="db48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，运行<code class="fe mt mu mv mw b">git status</code>并验证<code class="fe mt mu mv mw b">.env</code>没有被跟踪。我们应该在状态报告中看到的是:</p><pre class="kn ko kp kq gt mx mw my mz aw na bi"><span id="8c73" class="nb lr iq mw b gy nc nd l ne nf">On branch master</span><span id="e7ac" class="nb lr iq mw b gy nh nd l ne nf">No commits yet</span><span id="663b" class="nb lr iq mw b gy nh nd l ne nf">Untracked files:<br/>  (use "git add &lt;file&gt;..." to include in what will be committed)</span><span id="ec7a" class="nb lr iq mw b gy nh nd l ne nf">.gitignore<br/> LICENSE<br/> README.md<br/> package-lock.json<br/> package.json<br/> src/</span><span id="2823" class="nb lr iq mw b gy nh nd l ne nf">nothing added to commit but untracked files present (use "git add" to track)</span></pre><h1 id="5056" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">安装Gatsby插件并与Contentful交谈</h1><p id="619e" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">现在我们可以进入盖茨比的第一个阶段了。要添加配置，我们可以在项目根目录下创建一个名为<code class="fe mt mu mv mw b">gatsby-config.js</code>的文件，在该文件的<code class="fe mt mu mv mw b">module.export</code>对象中，我们可以指定插件。我们需要添加一些简单的依赖项来继续:</p><pre class="kn ko kp kq gt mx mw my mz aw na bi"><span id="1a20" class="nb lr iq mw b gy nc nd l ne nf">npm i -S dotenv gatsby-source-contentful</span></pre><p id="de5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的<code class="fe mt mu mv mw b">gatsby-config.js</code>文件中，我们将为我们的开发环境指定插件和凭证，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="9372" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果一切顺利，您应该能够使用GraphQL进行查询，与您的内容丰富的API进行对话。如果您的终端运行的是Gatsby服务器，您可以尝试在操场中查看<a class="ae kl" href="http://localhost:8000/___graphql?query=%7B%0A%20%20contentfulHomePage%20%7B%0A%20%20%20%20title%0A%20%20%20%20date%0A%20%20%20%20content%20%7B%0A%20%20%20%20%20%20content%0A%20%20%20%20%7D%0A%20%20%20%20image%20%7B%0A%20%20%20%20%20%20file%20%7B%0A%20%20%20%20%20%20%20%20url%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A" rel="noopener ugc nofollow" target="_blank">这个查询。您可以看到返回的对象的结构很像GraphQL查询。如果你没有跟着编码，这里是查询:</a></p><pre class="kn ko kp kq gt mx mw my mz aw na bi"><span id="557c" class="nb lr iq mw b gy nc nd l ne nf">{<br/>  contentfulHomePage {<br/>    title<br/>    date<br/>    content {<br/>      content<br/>    }<br/>    image {<br/>      file {<br/>        url<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="6dbd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一次这么做的时候，我完全不知道<code class="fe mt mu mv mw b">contentfulHomePage</code>键是从哪里来的。我知道我想要其中的<code class="fe mt mu mv mw b">homePage</code>部分，但是谢天谢地，Gatsby中的GraphQL playground已经自动完成了你可以访问的所有内容。按(Mac) Ctrl + Space并键入<code class="fe mt mu mv mw b">home</code>并注意显示的选项。从那里我知道了我的字段的键，<code class="fe mt mu mv mw b">title, date, content, image</code>并使用CMD +单击字段名来探索它们的属性。让所有这些信息唾手可得对于发现Contentful为您的Gatsby站点提供了什么非常有用。</p><p id="ac69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以在操场上看到一些返回的数据，让我们更改位于<code class="fe mt mu mv mw b">src/pages/index.js</code>的文件来显示这些数据。为了在屏幕上显示这些内容，我们将使用Gatsby的<code class="fe mt mu mv mw b">StaticQuery</code>组件来发送这个查询，并通过<code class="fe mt mu mv mw b">render</code>道具提供我们的JSX内容。我将呈现的内容包装在React片段中，并使用一些析构来公开值。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="a869" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可能会注意到<code class="fe mt mu mv mw b">content</code>显示为raw Markdown。为此当然有一个Gatsby插件，它稍微改变了查询。因为我们很快就要把这些内容放到互联网上了，所以我会把它添加进去，你可以在这个diff 的源代码<a class="ae kl" href="https://github.com/cwlsn/gatsby-simple-contentful-starter/commit/f77d7cc432fe8bf29094cbee772f407fb133aa3d" rel="noopener ugc nofollow" target="_blank">中查看。我们把这个放到网上吧！</a></p><h1 id="5c28" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">部署到网络</h1><p id="cd27" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">如果你还没有，使用你的GitHub帐户注册Netlify。您应该会在仪表板上看到一个按钮，上面写着“来自Git的新站点”。点击它！按照步骤允许Netlify访问您的回购。您可以选择特定的，或允许它访问所有当前和未来的回购。</p><p id="ef66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您选择您的repo时，它可能会为您填充配置选项，因为Netlify已经确定您正在与Gatsby合作。让它展开，让它发挥魔力一分钟左右。</p><p id="d494" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是等等…构建失败了，因为我们还没有告诉Netlify我们的环境变量。我们为本地工作创建的<code class="fe mt mu mv mw b">.env</code>文件没有得到部署，所以在Netlify中跟踪站点设置&gt;构建&amp;部署&gt;构建环境变量。将您的<code class="fe mt mu mv mw b">spaceId</code>和<code class="fe mt mu mv mw b">accessToken</code>与之前的值相加。</p><p id="abdf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，返回部署选项卡，单击“触发部署”按钮，并将缓存复选框留空。如果您一直这样做，您应该有一个很长的Netlify子域，其中包含您的由Gatsby生成的内容丰富的代码！</p><h1 id="482d" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">自动获取内容更新</h1><p id="30a6" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">还有一件事！由于Gatsby网站是静态的，这意味着你的内容更新不会自动显示。当您进行内容更新时，您需要触发一个构建来重新查询和重建所有内容。幸运的是，或者可以预见的是，这很容易设置。</p><p id="e787" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到我们在Netlify中添加环境变量的同一部分，这是一个生成Web Hook URL的部分。创建一个新的构建钩子，我称之为“Contentful ”,并将结果URL复制到你的剪贴板。确保不要接受他们提供的全部<code class="fe mt mu mv mw b">CURL</code>命令。</p><p id="3343" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在网站挂钩设置下的Contentful中，你会注意到右边有一堆模板。单击Netlify模板，粘贴您的URL并保存。</p><h1 id="b0e5" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">现在我们有什么？</h1><p id="3a96" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">Netlify使用Contentful提供的数据部署并托管了一个Gatsby站点。当您更新数据时，将会触发一个新的构建来保持您的站点最新。</p><p id="2337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这听起来可能很多，但是如果您能够跟随这里并在Netlify上获得一些东西，您就是一个认证的已发布JAMstack成员！欢迎来到网络开发的未来。</p><h1 id="113f" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">后续步骤</h1><p id="5649" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">现在你已经把这些都连接起来了，你可以得到数据了，但是我们没有添加太多的样式或者其他东西。就我个人而言，我将使用一些有趣的附加功能来改进我用这个过程开发的starter，并将其提交给Gatsby Starter库。让我在Twitter 上知道<a class="ae kl" href="https://twitter.com/_cwlsn" rel="noopener ugc nofollow" target="_blank">这个过程对你来说怎么样！</a></p></div></div>    
</body>
</html>