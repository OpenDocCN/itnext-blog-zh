<html>
<head>
<title>Deploy a Serverless API to Amazon Web Services (AWS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将无服务器API部署到Amazon Web Services (AWS)</h1>
<blockquote>原文：<a href="https://itnext.io/deploy-a-serverless-api-to-amazon-web-services-aws-106c996cded9?source=collection_archive---------3-----------------------#2018-12-17">https://itnext.io/deploy-a-serverless-api-to-amazon-web-services-aws-106c996cded9?source=collection_archive---------3-----------------------#2018-12-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4635cbba84be4500aee49932c3776590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hIIrbgRSYAyb-IV399igbQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://dashboard.serverless.com/legal/terms" rel="noopener ugc nofollow" target="_blank">无服务器公司</a>，<a class="ae kc" href="https://aws.amazon.com/trademark-guidelines/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务</a></figcaption></figure><p id="aba7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在之前的<a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/build-a-restful-api-using-aws-lambda-api-gateway-dynamodb-and-the-serverless-framework-30fc68e08a42">文章</a>中，我写了关于构建无服务器联系人API的文章。我介绍了如何为本地开发进行设置，并没有谈到API完成后如何部署到AWS。</p><p id="6cf6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将通过展示如何将相同的API部署到您的AWS帐户来结束这个循环。</p><h2 id="614d" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">AWS凭据</h2><p id="221b" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">让我们首先登录AWS并创建一个用于部署的<a class="ae kc" href="https://serverless.com/framework/docs/providers/aws/guide/credentials/#creating-aws-access-keys" rel="noopener ugc nofollow" target="_blank">无服务器代理</a>帐户。根据上面无服务器链接中引用的<a class="ae kc" href="https://gist.github.com/ServerlessBot/7618156b8671840a539f405dea2704c8" rel="noopener ugc nofollow" target="_blank">要点</a>给予代理用户推荐的权限。</p><p id="05df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦您创建了用户并下载了包含访问和秘密密钥的<code class="fe lz ma mb mc b">csv</code>文件，在您的用户目录级别创建一个名为<code class="fe lz ma mb mc b">.aws</code>的文件夹来存储密钥。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="590d" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ nano ~/.aws/credentials</strong></span><span id="51c8" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># default for local development</strong><br/>[default]<br/>aws_access_key_id=fake-aws-key<br/>aws_secret_access_key=fake-aws-secret</span><span id="9362" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># serverless-agent</strong><br/>[serverless]<br/>aws_access_key_id=key-from-downloaded-csv-file<br/>aws_secret_access_key=secret-from-downloaded-csv-file</span></pre><h2 id="2719" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">项目更新</h2><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="4dc4" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir"># These are the files that will need to be updated or added.</strong></span><span id="0a99" class="lb lc iq mc b gy mp mm l mn mo">* package.json<br/>* serverless.yml<br/>* dynamodb.factory.js <br/>* repository.util.js (new)</span><span id="00ec" class="lb lc iq mc b gy mp mm l mn mo">* .env (local only)</span><span id="e7a0" class="lb lc iq mc b gy mp mm l mn mo">* Handlers: list.js, get.js, add.js, update.js and delete.js</span><span id="d1d2" class="lb lc iq mc b gy mp mm l mn mo">* contact.seeder.js<br/>* runner.js</span></pre><p id="3d59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了存储AWS的凭证之外，我们还需要更新API项目中的一些文件，以便它可以在部署后正常运行。</p><p id="b2c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从<code class="fe lz ma mb mc b">package.json</code>文件开始。在最初的文章中，我在<code class="fe lz ma mb mc b">devDependencies</code>中列出了<code class="fe lz ma mb mc b">dotenv</code>，它应该在<code class="fe lz ma mb mc b">dependencies</code>中列出，因为它被函数使用。</p><p id="c7a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还需要将<code class="fe lz ma mb mc b">package</code>和<code class="fe lz ma mb mc b">deploy</code>脚本添加到我们的<code class="fe lz ma mb mc b">package.json</code>文件中，这样我们就可以使用它们将我们的API部署到AWS。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="703d" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir"># package.json</strong></span><span id="caad" class="lb lc iq mc b gy mp mm l mn mo">{<br/>  ...<br/>  "scripts": {<br/>    "deploy": "serverless deploy --aws-profile serverless",<br/>    "package": "serverless package"<br/>  },<br/>  ...<br/>  "dependencies": {<br/>    "dotenv": "^6.2.0"<br/>  },<br/>  ...<br/>}</span></pre><p id="c723" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，使用设置更新<code class="fe lz ma mb mc b">serverless.yml</code>文件，以允许函数访问DynamoDB并排除不需要运行的项目文件。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">更新了serverless.yml文件。</figcaption></figure><p id="412f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，用环境变量和参数更新<code class="fe lz ma mb mc b">ContactRepository</code>和<code class="fe lz ma mb mc b">dynamodb.factory.js</code>文件，以支持DynamoDB表的动态命名。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">dynamodb.factory.js</figcaption></figure><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">联系人.储存库. js</figcaption></figure><p id="6f52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，创建一个名为<code class="fe lz ma mb mc b">repository.util.js </code>的新实用程序来抽象出<code class="fe lz ma mb mc b">ContactRepository</code>的创建，并更新处理程序以使用该实用程序来创建存储库的实例。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">repository.util.js</figcaption></figure><p id="fb12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">处理程序中的<code class="fe lz ma mb mc b">ContactRepository</code>需要在构造期间设置一个表名才能正常工作。因为我们刚刚创建了一个存储库实用程序来完成这项工作，所以让我们更新处理程序代码来利用它。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">请记住，第24行和第26行是需要应用于所有处理程序的新行。</figcaption></figure><h2 id="1f86" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">本地测试</h2><p id="ef2c" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在我们继续将这个API部署到AWS之前，让我们进行测试，以确保我们的更改仍然可以在本地工作。</p><p id="ac7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更新<code class="fe lz ma mb mc b">.env</code>文件，为<code class="fe lz ma mb mc b">CONTACTS_TABLE</code>环境变量添加一个条目。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="158e" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir"># .env</strong></span><span id="5583" class="lb lc iq mc b gy mp mm l mn mo">AWS_ENDPOINT='<a class="ae kc" href="http://localhost:8000'" rel="noopener ugc nofollow" target="_blank">http://localhost:8000'</a><br/>AWS_REGION='us-west-2'</span><span id="13da" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># these keys are no longer needed</strong><br/># AWS_ACCESS_KEY_ID='fake-access-key'<br/># AWS_SECRET_ACCESS_KEY='fake-secret-key'</span><span id="b2ff" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># the name of the contact table</strong><br/>CONTACTS_TABLE='contacts-api-dev-contacts'</span></pre><p id="3984" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保<a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/containerizing-serverless-apis-d69fa3e6b9c2"> DynamoDB正在本地运行</a>。然后运行<code class="fe lz ma mb mc b">npm start</code>以离线模式在本地运行API。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="40f7" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ npm start</strong><br/><br/>&gt; contacts-api@1.0.0 start ./contacts_api<br/>&gt; sls offline start<br/><br/>Serverless: Starting Offline: dev/us-west-2.<br/><br/>Serverless: Routes for list:<br/>Serverless: GET /contacts<br/><br/>...<br/>...</span><span id="a184" class="lb lc iq mc b gy mp mm l mn mo">Serverless: Offline listening on <a class="ae kc" href="http://0.0.0.0:3000" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:3000</a></span><span id="7546" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># from a different terminal window, run</strong></span><span id="1d1a" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir">$ curl -i localhost:3000/contacts</strong></span><span id="d128" class="lb lc iq mc b gy mp mm l mn mo">HTTP/1.1 200 OK<br/>content-type: application/json; charset=utf-8<br/>cache-control: no-cache<br/>content-length: 411<br/>accept-ranges: bytes<br/>Date: Sun, 16 Dec 2018 04:08:48 GMT<br/>Connection: keep-alive<br/><br/>[{"firstName":"Luke","lastName":"Skywalker", ..., ... }]</span></pre><p id="850b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:如果您需要重新播种表格，您可能需要更新<code class="fe lz ma mb mc b">/seed</code>文件夹中的<code class="fe lz ma mb mc b">contact.seeder.js</code>和<code class="fe lz ma mb mc b">runner.js</code>文件。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="b604" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir"># seed/contact.seeder.js</strong></span><span id="fd7d" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># Update the constructor to accept a 'tableName' parameter<br/># and assign it to 'this._tableName' to replace the hardcoded<br/># 'contacts' string.</strong></span><span id="a6f4" class="lb lc iq mc b gy mp mm l mn mo">...<br/>constructor(dynamodb, docClient, tableName) {<br/>  ...<br/>  ...<br/>  //this._tableName = 'contacts';<br/>  this._tableName = tableName;<br/>}<br/>...</span><span id="b60d" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># seed/runner.js</strong></span><span id="f553" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># Extract the 'CONTACTS_TABLE' environment from process.env and<br/># use it in the instantiation of the 'ContactSeeder'.<br/># Optionally, update the 'log' statements with 'CONTACTS_TABLE'<br/># instead of using the hard coded 'contacts' string.</strong></span><span id="beeb" class="lb lc iq mc b gy mp mm l mn mo">const { CONTACTS_TABLE } = process.env;<br/>...<br/>...<br/>const contactSeeder = <br/>  new ContactSeeder(dynamo, doclient, CONTACTS_TABLE);</span><span id="95af" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># running 'npm run seed' should now work properly.</strong></span></pre><h2 id="1e93" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated"><strong class="ak">包装</strong></h2><p id="0bf5" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在实际部署到AWS之前，我们应该通过打包API进行最后的验证。</p><p id="d1e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Serverless包含一个<code class="fe lz ma mb mc b">package</code>命令，该命令将在本地temp <code class="fe lz ma mb mc b">.serverless</code>文件夹中创建部署包，供我们检查。</p><p id="1e9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行我们之前添加到<code class="fe lz ma mb mc b">package.json</code>文件的<code class="fe lz ma mb mc b">npm run package</code>脚本，然后打开<code class="fe lz ma mb mc b">.serverless</code>文件夹。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="003a" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ npm run package</strong></span><span id="9bfc" class="lb lc iq mc b gy mp mm l mn mo">&gt; contacts-api@1.0.0 package ./contacts_api<br/>&gt; serverless package<br/><br/>Serverless: Packaging service...<br/>Serverless: Excluding development dependencies...</span></pre><p id="dc89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开<code class="fe lz ma mb mc b">.serverless</code>文件夹，提取<code class="fe lz ma mb mc b">contacts-api.zip</code>文件。展开文件夹，确保只有<code class="fe lz ma mb mc b">node_modules</code>和<code class="fe lz ma mb mc b">src</code>包含在zip中。</p><p id="5cf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">contacts-api</code>文件夹应该是这样的:</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/63661e39484589bf2b4c7ff237cd80fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iy5RYi1gbSXhDRCQJcEfiA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">。无服务器文件夹</figcaption></figure><h2 id="2272" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">部署到AWS</h2><p id="50a2" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">既然我们已经确认了所有的更改都可以在本地工作，那么让我们部署到AWS，看看它是否可以在那里工作。</p><p id="9fc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，<code class="fe lz ma mb mc b">npm run deploy</code>脚本调用了<code class="fe lz ma mb mc b">serverless deploy --aws-profile serverless</code>。这与我们在本文开始时设置的AWS凭证相匹配。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="8d22" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ npm run deploy</strong><br/><br/>&gt; contacts-api@1.0.0 deploy /contacts_api<br/>&gt; <strong class="mc ir"><em class="mt">serverless deploy --aws-profile serverless</em></strong><br/><br/>Serverless: Packaging service...<br/>Serverless: Excluding development dependencies...<br/>Serverless: Uploading CloudFormation file to S3...<br/>Serverless: Uploading artifacts...<br/>Serverless: Uploading service .zip file to S3 (15.45 KB)...<br/>Serverless: Validating template...<br/>Serverless: Updating Stack...<br/>Serverless: Checking Stack update progress...<br/>.............................................................<br/>Serverless: Stack update finished...<br/>Service Information<br/>service: contacts-api<br/>stage: dev<br/>region: us-west-2<br/>stack: contacts-api-dev<br/>api keys:<br/>  None<br/>endpoints:<br/>  GET - https://&lt;auto-gen&gt;.amazonaws.com/dev/contacts<br/>  GET - https://&lt;auto-gen&gt;.amazonaws.com/dev/contact/{id}<br/>  POST - https://&lt;auto-gen&gt;.amazonaws.com/dev/contact<br/>  PUT - https://&lt;auto-gen&gt;.amazonaws.com/dev/contact/{id}<br/>  DELETE - https://&lt;auto-gen&gt;.amazonaws.com/dev/contact/{id}<br/>functions:<br/>  list: contacts-api-dev-list<br/>  get: contacts-api-dev-get<br/>  add: contacts-api-dev-add<br/>  update: contacts-api-dev-update<br/>  delete: contacts-api-dev-delete<br/>layers:<br/>  None</span></pre><p id="ab1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在可以调用每个端点来测试它们是否工作，从list开始。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="2c7a" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ curl -i https://&lt;auto-gen&gt;.amazonaws.com/dev/contacts</strong></span><span id="4dc0" class="lb lc iq mc b gy mp mm l mn mo">HTTP/2 200 <br/>content-type: application/json<br/>content-length: 2<br/>...<br/>...</span><span id="8fd4" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># An empty array because we haven't posted or seeded data.</strong><br/>[]</span></pre><p id="8e64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">过帐数据(添加)。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="1f26" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ curl -i \<br/>   -H 'Content-type: application/json' \<br/>   -X POST \<br/>   -d '{"id": "1", "firstName": "Jin", "lastName": "Erso"}' \<br/>   https://&lt;auto-gen&gt;.amazonaws.com/dev/contact</strong></span><span id="5694" class="lb lc iq mc b gy mp mm l mn mo">HTTP/2 201 <br/>content-type: application/json<br/>content-length: 0<br/>...<br/>...</span></pre><p id="ed39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">再次提取联系人列表以验证(列表)。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="8a7e" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ curl -i https://&lt;auto-gen&gt;.amazonaws.com/dev/contacts</strong></span><span id="a2b4" class="lb lc iq mc b gy mp mm l mn mo">HTTP/2 200 <br/>content-type: application/json<br/>content-length: 48<br/>...<br/>...</span><span id="ed71" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># There's the data we posted to the POST endpoint!</strong><br/>[{"id":"1","firstName":"Jin","lastName":"Erso"}]</span></pre><p id="786f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">按id提取(get)。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="b034" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ curl -i https://&lt;auto-gen&gt;.us-west-2.amazonaws.com/dev/contact/1</strong></span><span id="7df0" class="lb lc iq mc b gy mp mm l mn mo">HTTP/2 200 <br/>content-type: application/json<br/>content-length: 46<br/><strong class="mc ir">...<br/>...</strong></span><span id="a0e8" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># Notice that it's the contact and not an array of contacts like <br/># when we called the GET /contacts endpoint.</strong><br/>{"id":"1","firstName":"Jin","lastName":"Erso"}</span></pre><p id="bd84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更新联系人(更新)。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="2cc9" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ curl -i \<br/>    -H 'Content-type: application/json' \<br/>    -X PUT \ <br/>    -d '{"id": "1", "firstName": "Jin-updated", "lastName": "Erso-updated"}' \ <br/>    https://&lt;auto-gen&gt;.amazonaws.com/dev/contact/1</strong></span><span id="4d3f" class="lb lc iq mc b gy mp mm l mn mo">HTTP/2 200 <br/>content-type: application/json<br/>content-length: 62<br/>...<br/>...</span><span id="b053" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># The updated contact is returned.</strong><br/>{"id":"1","firstName":"Jin-updated","lastName":"Erso-updated"}</span></pre><p id="4fb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，删除。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="6d2d" class="lb lc iq mc b gy ml mm l mn mo"><strong class="mc ir">$ curl -i \<br/>    -X DELETE \<br/>    https://&lt;auto-gen&gt;.amazonaws.com/dev/contact/1</strong></span><span id="a304" class="lb lc iq mc b gy mp mm l mn mo">HTTP/2 204 <br/>...<br/>...</span><span id="8f20" class="lb lc iq mc b gy mp mm l mn mo"><strong class="mc ir"># Nothing is returned.</strong></span></pre></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="44ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以在以下位置找到源分支:</p><div class="nb nc gp gr nd ne"><a href="https://github.com/vanister/contacts_api/tree/serverless-deploy-aws" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">vanister/contacts _ API/server less-deploy-AWS</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">带有AWS Lambda、API网关和DynamoDB - vanister/contacts_api的无服务器RESTful API</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns jw ne"/></div></div></a></div><p id="19e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">原文可以在这里找到:</p><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/build-a-restful-api-using-aws-lambda-api-gateway-dynamodb-and-the-serverless-framework-30fc68e08a42"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">使用AWS Lambda、API Gateway、DynamoDB和无服务器框架构建RESTful API</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">更新日期:2018年10月17日。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">itnext.io</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns jw ne"/></div></div></a></div><p id="be06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我提到过在Docker容器中运行AWS/DynamoDB，可以在下面找到:</p><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/containerizing-serverless-apis-d69fa3e6b9c2"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">容器化无服务器API</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">使用Docker、LocalStack和无服务器框架进行本地开发</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">itnext.io</p></div></div><div class="nn l"><div class="nu l np nq nr nn ns jw ne"/></div></div></a></div><p id="ed0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是关于AWS配置和部署的无服务器详细指南:</p><div class="nb nc gp gr nd ne"><a href="https://serverless.com/framework/docs/providers/aws/guide/intro/" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">无服务器框架- AWS Lambda指南-简介</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">无服务器框架帮助你开发和部署你的AWS Lambda函数，以及AWS…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">serverless.com</p></div></div><div class="nn l"><div class="nv l np nq nr nn ns jw ne"/></div></div></a></div></div></div>    
</body>
</html>