<html>
<head>
<title>Safari (Webkit) just released support for JS modules inside the worker scope</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Safari (Webkit)刚刚发布了对worker范围内JS模块的支持</h1>
<blockquote>原文：<a href="https://itnext.io/safari-webkit-just-released-support-for-js-modules-inside-the-worker-scope-b2d29e67178?source=collection_archive---------2-----------------------#2021-09-23">https://itnext.io/safari-webkit-just-released-support-for-js-modules-inside-the-worker-scope-b2d29e67178?source=collection_archive---------2-----------------------#2021-09-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2f5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是让UI开发回到它所属的地方的巨大一步:<br/>进入浏览器。</p><h1 id="c393" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">内容</h1><ol class=""><li id="6f13" class="lj lk iq jp b jq ll ju lm jy ln kc lo kg lp kk lq lr ls lt bi translated">介绍</li><li id="e357" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">如何从JS模块创建一个worker？</li><li id="6233" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">在大型用例中验证逻辑</li><li id="2b10" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">火狐目前是什么状态？</li><li id="4f4f" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">构建工具的未来</li><li id="b304" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">Safari (Webkit)缺什么？</li><li id="18f8" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">最后的想法</li></ol><h1 id="845d" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">1.介绍</h1><p id="4e84" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">相关票证:</p><div class="mc md gp gr me mf"><a href="https://bugs.webkit.org/show_bug.cgi?id=164860" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">164860-Workers中的JS模块</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">编辑描述</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">bugs.webkit.org</p></div></div></div></a></div><p id="b068" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">自2021年4月以来，这项功能已经在Safari技术预览版中运行，因此这是以下内容的后续博文:</p><div class="mc md gp gr me mf"><a href="https://levelup.gitconnected.com/safari-webkit-about-to-release-support-for-js-modules-inside-the-worker-scope-9dd33fc20190" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">Safari (Webkit)即将在worker范围内发布对JS模块的支持</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">这是让UI开发回到它该在的地方的一大步:浏览器。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt mu mf"/></div></div></a></div><p id="aae5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它刚刚在“普通”Safari版本(15.0)中发布。</p><h1 id="dc98" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">2.如何从JS模块创建一个worker？</h1><p id="1324" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">您可以像这样创建一个非基于模块的工作线程:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="84d9" class="ne km iq na b gy nf ng l nh ni">const worker = new Worker('worker.js');</span></pre><p id="60c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您确实想要一个JS模块作为起点，只需使用type选项:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="afc4" class="ne km iq na b gy nf ng l nh ni">const worker = new Worker('worker.mjs', {<br/>  type: 'module'<br/>});</span></pre><h1 id="db5c" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">3.在大型用例中验证逻辑</h1><p id="dda1" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><a class="ae nj" href="https://github.com/neomjs/neo" rel="noopener ugc nofollow" target="_blank"> neo.mjs </a>很可能是最大的项目，它依赖于在worker范围内使用js模块。毕竟，它遵循“应用程序工作者是主要参与者”的范式，您的应用程序和组件存在于其中。</p><figure class="mv mw mx my gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nk"><img src="../Images/50d1e02d9d8dbf987cc30b4153487a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-veT3mNdcZ0jJ4owiQwcQ.png"/></div></div></figure><p id="096f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，在Chromiun (Chrome &amp; Edge)和Safari技术预览版中，只可能使用开发模式→真实代码，而没有任何构建和编译。</p><p id="35e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，我们以前也可以在Safari中使用基于webpack的<code class="fe nr ns nt na b">dist/development</code>和<code class="fe nr ns nt na b">dist/production</code>输出，但是如果您想为Webkit设计或修复特定的东西，这并不有趣。</p><p id="6f4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的测试案例是Covid Dashboard，这是一个相当复杂的应用程序。</p><p id="c0ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里找到源代码:<a class="ae nj" href="https://github.com/neomjs/neo/tree/dev/apps/covid" rel="noopener ugc nofollow" target="_blank"> apps/covid </a></p><figure class="mv mw mx my gt nl gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nu"><img src="../Images/f153f6c21c0078de9276b80eaf126c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FXQ44XqV4m0cQ3O6-As9-g.png"/></div></div></figure><p id="4bdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦使用了import和/或export语句，您的文件就可以算作一个JS模块。如果您想扩展一个类并导入基类，显然需要这样做。</p><p id="74f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您坚持“一个文件一个类”的设计模式，这是非常有意义的。</p><p id="e71e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你在控制台里面看到的，<code class="fe nr ns nt na b">Neo.worker.App</code>是住在app里面的web worker。这是真正的代码(没有源代码图)。</p><h1 id="4199" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">4.火狐目前是什么状态？</h1><p id="0a1d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">您可以在此处找到相关门票:</p><div class="mc md gp gr me mf"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1247687" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">1247687 -实施工人模块</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">核心领域的新(ystartsev):工人。最后更新2021-09-16。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">bugzilla.mozilla.org</p></div></div></div></a></div><p id="6a96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">票证正在开发中，但尚未完成。</p><h1 id="80a2" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">5.构建工具的未来</h1><p id="006d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">一旦Firefox赶上来，所有主要的现代浏览器都准备好支持JS模块。此时，像<a class="ae nj" href="https://github.com/webpack/webpack" rel="noopener ugc nofollow" target="_blank"> webpack </a>这样的构建工具可以得到简化。</p><p id="78bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Harmony，这个将模块转换成“非模块”的引擎，在这一点上已经过时了。</p><p id="178c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您不想创建包(分割块)，您也可以在此时缩小您的文件。</p><h1 id="1d84" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">6.Safari (Webkit)缺什么？</h1><p id="1bb5" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我们仍然需要对共享工作者的支持:</p><div class="mc md gp gr me mf"><a href="https://bugs.webkit.org/show_bug.cgi?id=149850" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">149850 -恢复对共享工作者的支持</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">错误149850:恢复对共享工作人员的支持</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">bugs.webkit.org</p></div></div></div></a></div><p id="e9f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Chromium和Firefox都支持它们。</p><p id="2d85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一点尤其重要，因为iOS上的所有浏览器都必须使用它。</p><p id="f560" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我也希望看到多窗口covid应用程序在这里运行:</p><figure class="mv mw mx my gt nl"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="994c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">共享工作者对移动设备也很重要，因为许多应用程序使用包含多个web视图的本机外壳(无头浏览器)。</p><p id="3385" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以在他们之间直接交流。</p><h1 id="a2b0" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">7.最后的想法</h1><p id="1210" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">您可以在此处找到近地天体资料库:</p><div class="mc md gp gr me mf"><a href="https://github.com/neomjs/neo" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">GitHub - neomjs/neo:应用工人驱动的前端框架</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">neo.mjs使您能够使用一个以上的CPU创建可扩展的高性能应用程序。不需要照顾一个…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">github.com</p></div></div><div class="mo l"><div class="nx l mq mr ms mo mt mu mf"/></div></div></a></div><p id="2f35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将添加一些开发模式示例的链接，您现在可以在Safari中直接运行这些示例。</p><p id="6e31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">covid Dashboard:<br/>T3】apps/covid/index . html</p><p id="b08e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">covid Gallery:<br/><a class="ae nj" href="https://neomjs.github.io/pages/node_modules/neo.mjs/examples/component/coronaGallery/index.html" rel="noopener ugc nofollow" target="_blank">examples/component/corona Gallery/index . html</a></p><p id="ac50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">helix:<br/><a class="ae nj" href="https://neomjs.github.io/pages/node_modules/neo.mjs/examples/component/helix/index.html" rel="noopener ugc nofollow" target="_blank">examples/component/helix/index . html</a></p><p id="ea79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最诚挚的问候&amp;快乐编码，<br/>托比亚斯</p></div></div>    
</body>
</html>