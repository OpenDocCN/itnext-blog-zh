<html>
<head>
<title>How I helped recover 5000XLM from RAM dumps, RegExp, and Patience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何帮助从内存转储、正则表达式和耐心中恢复5000XLM</h1>
<blockquote>原文：<a href="https://itnext.io/how-i-helped-recover-5000xlm-from-ram-dumps-regexp-and-patience-42a8c8fc87cf?source=collection_archive---------3-----------------------#2018-01-30">https://itnext.io/how-i-helped-recover-5000xlm-from-ram-dumps-regexp-and-patience-42a8c8fc87cf?source=collection_archive---------3-----------------------#2018-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d7785b4b8e08e331355f89e9af6db89e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3uMYGlg5MpLrTAEXcs3UMQ.png"/></div></div></figure><p id="23a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi kw translated"><span class="l kx ky kz bm la lb lc ld le di"> T </span>我在这里，阅读<a class="ae lf" href="https://www.reddit.com/r/Stellar" rel="noopener ugc nofollow" target="_blank"> /r/Stellar </a>上的一些帖子的标题，这时我偶然发现了<a class="ae lf" href="https://www.reddit.com/r/Stellar/comments/7t3xp8/psa_on_the_importance_of_your_private_key_and_my/" rel="noopener ugc nofollow" target="_blank">这个小灾难</a>在这里<a class="ae lf" href="https://www.reddit.com/user/badusernam" rel="noopener ugc nofollow" target="_blank"> /u/badusernam </a>讲述了他在从一个交易所向其发送所有XLM后未能记录他的私人密钥后绝望和不幸的故事。</p><p id="f774" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于那些不熟悉什么是加密货币的私钥、私钥、公钥和钱包的人，可以这样想:</p><blockquote class="lg"><p id="35e9" class="lh li iq bd lj lk ll lm ln lo lp kv dk translated">你的公钥就是你的钱包，钱包保存货币就像电子邮件地址保存电子邮件一样。您可以将公钥共享给<strong class="ak"> receive </strong> currency，就像共享您电子邮件地址来接收电子邮件一样。现在，您的私人密钥就是您从钱包向其他地方发送货币的密码，就像您的密码允许您从自己的帐户发送电子邮件一样。</p></blockquote><p id="ecc4" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">抱歉，这个类比过于简单，我发现如果和他们熟悉的东西比较，会帮助一些人更好地理解。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="c4e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这让我想到了他之前的一篇帖子，他悬赏任何能帮助他找回私钥的人，帖子的语气令人沮丧，相当悲观。Op不断地说自己愚蠢，我为他感到难过，有几个从RAM中恢复的建议。所以我开始调查。</p><p id="bfcc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不过，我做的第一件事是<a class="ae lf" href="https://github.com/stellar/account-viewer/issues/53" rel="noopener ugc nofollow" target="_blank">在账户查看器存储库</a>上创建了一个问题，以防止其他人走上同样的道路。这立即导致一个名为<code class="fe mc md me mf b"><a class="ae lf" href="https://github.com/fnando" rel="noopener ugc nofollow" target="_blank">fnando</a></code>的了不起的用户解决了这个问题，并在网站上实现。向所有参与其中的人致敬。</p><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/e17cdcd15c69992e4b166351015cbd99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMF4wGeEWg_JGLUmtqOcXw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">几天前没有任何预警。</figcaption></figure><p id="9ce1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的第二步是尽可能不使用精确的步骤来复制场景，因为我不想在测试不成功的情况下打扰用户。这意味着我生成了一个新的pair，关闭了选项卡，关闭了chrome，并继续从我的RAM中生成一个dump。</p><blockquote class="mp mq mr"><p id="818c" class="jy jz ms ka b kb kc kd ke kf kg kh ki mt kk kl km mu ko kp kq mv ks kt ku kv ij bi translated">我绝不是内存取证方面的专家，远远不是，所以肯定有更好的方法来完成我将要描述的每一步。我没有遵循AFF4格式，而是一个更简单的RAW，一个文件的疯狂。</p></blockquote><p id="e831" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了生成RAM转储(在mac上)，我遵循了“<a class="ae lf" href="http://ponderthebits.com/2017/02/osx-mac-memory-acquisition-and-analysis-using-osxpmem-and-volatility/" rel="noopener ugc nofollow" target="_blank">使用OSXpmem和Volatility </a>进行内存获取和分析”，但没有做Volatility部分，我只是在我的工作IDE上打开了16Gb的文件，并看着它崩溃，因为它无法处理它。我不知道它会这么大，但这是有道理的，因为我运行的机器有16Gb的内存。</p><p id="2e6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我下载了一个名为<a class="ae lf" href="https://itunes.apple.com/es/app/ihex-hex-editor/id909566003?mt=12" rel="noopener ugc nofollow" target="_blank"> iHex </a>的十六进制编辑器，并开始寻找已知的私钥，到处都有匹配。混杂着HTML，混杂着胡言乱语，在符号和特殊字符之间被隔离，但是我找不到一个像样的方法来找到它，除非…嗯，已经有了它。</p><p id="c0b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还可以找到我所有的密码，我访问过的网站，信息摘录，编码图像，IP地址，电子邮件地址，你能想到的，RAM都有，所以避免使用公共计算机可能是一个明智的想法，如果你不得不这样做，事后强制重启。理想情况下，你应该将电脑引导到一个可信的失忆操作系统<a class="ae lf" href="https://tails.boum.org/" rel="noopener ugc nofollow" target="_blank">，比如Tails </a>。这样你就可以不太担心(不是完全)谁会四处窥探，但首先要阅读他们网站上的<a class="ae lf" href="https://tails.boum.org/doc/about/warning/index.en.html" rel="noopener ugc nofollow" target="_blank">警告页面</a>。</p><p id="e0f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">无论如何，回到私钥，在这一点上，我与<strong class="ka ir"> badusernam </strong>取得了联系，我们开始通过<a class="ae lf" href="https://discordapp.com/" rel="noopener ugc nofollow" target="_blank"> Discord </a>分享我们的进展。有时候我确信我们会找到它，有时候我担心我们会一无所获。我对它有点着迷，花了无数个晚上寻找找到私钥的方法，却不知道。我恍然大悟..</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="ad84" class="mw mx iq bd my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt bi translated">进入正则表达式的领域</h1><p id="4301" class="pw-post-body-paragraph jy jz iq ka b kb nu kd ke kf nv kh ki kj nw kl km kn nx kp kq kr ny kt ku kv ij bi translated">我们都对正则表达式又爱又恨，但是有效解析800万行RAM的唯一方法是遵循模式搜索，而不是字面上寻找随机字符串。为此，我找到了一款名为<a class="ae lf" href="https://www.slickedit.com/trial/slickedit" rel="noopener ugc nofollow" target="_blank"> SlickEditPro </a>的应用，并使用了他们的14天试用版。我会向任何处于类似情况的人推荐它，它有自己的学习曲线和特点，但它处理工作非常好，我不能抱怨。</p><p id="9440" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我使用的第一个正则表达式是简单的<code class="fe mc md me mf b">S[A-Z0–9]{55}</code>，它将寻找一个56个字符长的字母数字字符串，全部大写，以<code class="fe mc md me mf b">S</code>开头。这给了我大部分的测试键，但不是最接近用户描述的过程的那些。</p><p id="f2b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它也给了我大约80万个匹配，这太多了。我尝试了其他几种正则表达式，用于小写匹配、部分匹配、html标签中包含的关键字，你能想到的，我都尝试了。</p><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/540d47f13b58c76759d0e95e2c6e06f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*nGQdpuwAU26AGwIH1qcgog.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">强制脱衣<a class="ae lf" href="https://xkcd.com/208/" rel="noopener ugc nofollow" target="_blank">https://xkcd.com/208/</a></figcaption></figure><p id="45d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">经过多次尝试，我开始注意到一些东西。有时，私钥和公钥是存在的，但<strong class="ka ir">不是以一种明显的方式</strong>，它们就在那里……但与其他字符混合在一起，被似乎是空格的东西隔开，用“<em class="ms">我们在这里，我们在这里</em>”的口号来嘲弄我们。而不是看起来像<code class="fe mc md me mf b">SBO7RIMY3RDQGBDONNSO6KE37FY6GXXDDYGN5CE467AYCP2NOHLHYCQY</code></p><p id="a655" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">看起来像是:</p><pre class="mh mi mj mk gt oa mf ob oc aw od bi"><span id="af02" class="oe mx iq mf b gy of og l oh oi">S&lt;NUL&gt;B&lt;NUL&gt;O&lt;NUL&gt;7&lt;NUL&gt;R&lt;NUL&gt;I&lt;NUL&gt;M&lt;NUL&gt;Y&lt;NUL&gt;3&lt;NUL&gt;R&lt;NUL&gt;D&lt;NUL&gt;Q&lt;NUL&gt;G&lt;NUL&gt;B&lt;NUL&gt;D&lt;NUL&gt;O&lt;NUL&gt;N&lt;NUL&gt;N&lt;NUL&gt;S&lt;NUL&gt;O&lt;NUL&gt;6&lt;NUL&gt;K&lt;NUL&gt;E&lt;NUL&gt;3&lt;NUL&gt;7&lt;NUL&gt;F&lt;NUL&gt;Y&lt;NUL&gt;6&lt;NUL&gt;G&lt;NUL&gt;X&lt;NUL&gt;X&lt;NUL&gt;D&lt;NUL&gt;D&lt;NUL&gt;Y&lt;NUL&gt;G&lt;NUL&gt;N&lt;NUL&gt;5&lt;NUL&gt;C&lt;NUL&gt;E&lt;NUL&gt;4&lt;NUL&gt;6&lt;NUL&gt;7&lt;NUL&gt;A&lt;NUL&gt;Y&lt;NUL&gt;C&lt;NUL&gt;P&lt;NUL&gt;2&lt;NUL&gt;N&lt;NUL&gt;O&lt;NUL&gt;H&lt;NUL&gt;L&lt;NUL&gt;H&lt;NUL&gt;Y&lt;NUL&gt;C&lt;NUL&gt;Q&lt;NUL&gt;Y&lt;NUL&gt;</span></pre><blockquote class="mp mq mr"><p id="54f0" class="jy jz ms ka b kb kc kd ke kf kg kh ki mt kk kl km mu ko kp kq mv ks kt ku kv ij bi translated"><em class="iq">我后来从reddit </em>  <em class="iq">的一个评论中得知</em> <a class="ae lf" href="http://reddit.com/r/Stellar/comments/7u1wo0/update_5000_lumens_lost_with_stellar_account/dthrcq9" rel="noopener ugc nofollow" target="_blank"> <em class="iq">它是空的，因为它是UTF-16编码的，这也可能意味着它来自RAM的java脚本部分，而不是HTML。</em></a></p></blockquote><p id="ce35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有一本名为<a class="ae lf" href="http://kunststube.net/encoding/" rel="noopener ugc nofollow" target="_blank">的好书，是每个程序员绝对需要了解的关于编码和字符集的知识，以处理文本</a>，它解释了编码之间的区别，并解释了在这个明显充满乱码的私有密钥样本上发生了什么。</p><p id="262a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那是顿悟的时刻，这里的“<em class="ms">等一下</em>”。我写了一个快速的正则表达式，结果胜出。请记住，所有这些测试最初都是由我执行的，但必须由用户在实际的RAM转储上再次执行，所以我必须耐心地等待，直到他测试完拒绝或坚持这种方法。我不想访问别人的内存转储，我太好奇不窥探左右，所以这是唯一的办法。</p><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/d5daaa255cad4c772151f67c70456a80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-qPejZnhTg83MOCOn_H2A.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">这是它所有的荣耀</figcaption></figure><p id="36b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我认为它可以简化很多，它可以写得更简洁，可能执行得更好，但事实是，这挽救了一天，并帮助用户找回了他的钱包。这也让我得到了奖励，有些人甚至在reddit上给了我小费！，但这不是重点。</p><p id="c4a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">排队的兴奋，哦，我他妈的上帝，我们做到了，赞美，肾上腺素激增，这一定是因为找回了一笔不小的钱，屏幕两边的笑容，然后，就这样，一切都结束了。</p><h1 id="ab97" class="mw mx iq bd my mz ok nb nc nd ol nf ng nh om nj nk nl on nn no np oo nr ns nt bi translated">结论</h1><p id="3ede" class="pw-post-body-paragraph jy jz iq ka b kb nu kd ke kf nv kh ki kj nw kl km kn nx kp kq kr ny kt ku kv ij bi translated">如果您处于类似的情况，并且足够幸运地进行了RAM转储，或者仍然适合进行RAM转储(例如，没有重新启动计算机)，请尝试一下。不要让网上的回复把你击垮，或许还有一丝追求的光芒。</p><p id="b713" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我也没有下班后的爱好，所以我需要找点别的。<br/>如果你像/</p><p id="e771" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lf" href="https://medium.com/@juan_cortes/why-i-chose-the-ledger-nano-s-e442728dff6d" rel="noopener">我在这里写了一个关于硬件钱包的故事</a></p></div></div>    
</body>
</html>