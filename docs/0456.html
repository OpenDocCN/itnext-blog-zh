<html>
<head>
<title>Some useful JS techniques that you may not know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一些你可能不知道的有用的JS技巧</h1>
<blockquote>原文：<a href="https://itnext.io/some-useful-js-techniques-that-you-may-not-know-d6bc06c4b6c3?source=collection_archive---------5-----------------------#2018-03-12">https://itnext.io/some-useful-js-techniques-that-you-may-not-know-d6bc06c4b6c3?source=collection_archive---------5-----------------------#2018-03-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3058740061a2d6b5576e49a1998aa761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7nb-owwLC4MMYZTlyFZ7w.png"/></div></div></figure><p id="5d06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我最近读完了<a class="ae kw" href="https://www.amazon.com/JavaScript-Enlightenment-Library-User-Developer/dp/1449342884" rel="noopener ugc nofollow" target="_blank"> JavaScript启蒙</a>。这本书更多的是关于JavaScript的基础知识，适合初学者。以下是我从这本书得到的好处和延伸。</p><h1 id="4416" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">数学</h1><p id="297c" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">JavaScript开发人员通常将构造函数名大写，以区别构造函数和普通函数。因此，一些开发人员可能会将<em class="ma">数学</em>误认为函数，因为其名称是大写的，而<em class="ma">数学</em>实际上只是一个对象。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="a346" class="mk ky iq mg b gy ml mm l mn mo">console.log(typeof Math); // object<br/>console.log(typeof Array); // function</span></pre><h1 id="50a3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">功能</h1><p id="49d9" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有两种方法可以构造函数:</p><ul class=""><li id="1125" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated">函数声明/表达式</li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="d773" class="mk ky iq mg b gy ml mm l mn mo">function sum(x, y) {<br/>    return x + y;<br/>}<br/>console.log(sum(3,4)); //7</span></pre><ul class=""><li id="fed7" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated"><a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" rel="noopener ugc nofollow" target="_blank">函数</a>构造函数</li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="fd55" class="mk ky iq mg b gy ml mm l mn mo">let multiply = new Function("x", "y", "return x * y;");<br/>console.log(multiply(3,4)); //12</span></pre><p id="aa7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在开发中，我们经常需要使用<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call" rel="noopener ugc nofollow" target="_blank">调用</a>或者<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" rel="noopener ugc nofollow" target="_blank">应用</a>来切换函数上下文。例如</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="eb27" class="mk ky iq mg b gy ml mm l mn mo">function print(){<br/>    console.log(this.a);<br/>}</span><span id="5d6e" class="mk ky iq mg b gy my mm l mn mo">print.call({a: 'hello'}); //hello</span></pre><p id="7a73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有些面试问题会问为什么<em class="ma"> print </em>不定义<em class="ma"> call </em>为其属性但是<em class="ma"> print.call() </em>不会抛出错误。因为<em class="ma"> print </em>是来自<em class="ma">函数</em>构造器的实例，所以它继承了<em class="ma"> Function.prototype </em>到<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" rel="noopener ugc nofollow" target="_blank">原型链</a>中定义的所有方法。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="f530" class="mk ky iq mg b gy ml mm l mn mo">print.call === Function.prototype.call</span></pre><h1 id="9be6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">如何进行数组检查</h1><p id="5b58" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof" rel="noopener ugc nofollow" target="_blank"> typeof </a>可用于确定原始数据类型的类型。但是它不能区分数组和对象。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="43e4" class="mk ky iq mg b gy ml mm l mn mo">console.log(typeof [1,2]); //object<br/>console.log(typeof {}); //object</span></pre><p id="bc49" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有几种方法可以做数组检查:</p><ul class=""><li id="0b2f" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated">API: <a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray" rel="noopener ugc nofollow" target="_blank"> Array.isArray </a></li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="fcab" class="mk ky iq mg b gy ml mm l mn mo">console.log(Array.isArray([1,2])); //true</span></pre><ul class=""><li id="07b1" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated"><a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" rel="noopener ugc nofollow" target="_blank"> toString </a></li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="96f9" class="mk ky iq mg b gy ml mm l mn mo">console.log(Object.prototype.toString.call([1,2])<br/>            .toLowerCase() === '[object array]'); //true</span></pre><p id="4739" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意这里我们必须使用<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" rel="noopener ugc nofollow" target="_blank">object . prototype . tostring</a>和<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call" rel="noopener ugc nofollow" target="_blank"> call </a>来切换调用上下文，因为<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/toString" rel="noopener ugc nofollow" target="_blank"> Array.prototype.toString </a>被覆盖。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="e14b" class="mk ky iq mg b gy ml mm l mn mo">console.log(Object.prototype.toString.call([1,2])); //[object Array]<br/>console.log([1,2].toString()); //1,2</span></pre><ul class=""><li id="2fb4" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated"><a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof" rel="noopener ugc nofollow" target="_blank">实例of </a></li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="2210" class="mk ky iq mg b gy ml mm l mn mo">[1,2] instanceof Array === true;</span></pre><p id="4fc2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" rel="noopener ugc nofollow" target="_blank">object . prototype . tostring</a>不适用于自定义数据类型。在这种情况下，我们可以使用的<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof" rel="noopener ugc nofollow" target="_blank">实例来确定类型。</a></p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="5a7c" class="mk ky iq mg b gy ml mm l mn mo">class Person {}</span><span id="1a40" class="mk ky iq mg b gy my mm l mn mo">let mike = new Person();<br/>console.log(Object.prototype.toString.call(mike)); // [object Object]<br/>console.log(mike instanceof Person); // true</span></pre><h1 id="10de" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">未定义vs空</h1><h1 id="4f70" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">未定义-无值</h1><p id="f938" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有两种情况下变量是未定义的。</p><ul class=""><li id="8a33" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated">变量已定义，但未赋值。</li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="6ced" class="mk ky iq mg b gy ml mm l mn mo">let s;<br/>console.log(s); //undefined</span></pre><ul class=""><li id="f8aa" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated">变量根本没有定义。</li></ul><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="2d45" class="mk ky iq mg b gy ml mm l mn mo">let obj1 = {};<br/>console.log(obj1.a); //undefined</span></pre><h1 id="bfb6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">null特殊值</h1><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="0754" class="mk ky iq mg b gy ml mm l mn mo">let obj2 = {a: null};<br/>console.log(obj2.a); //null</span></pre><p id="9f45" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们的目标是过滤掉未定义和null，我们可以使用带有双等号的<em class="ma">弱比较</em>(即==)。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="1a0f" class="mk ky iq mg b gy ml mm l mn mo">console.log(null == undefined); //true<br/>let arr = [null, undefined, 1];<br/>let fil = arr.filter(it =&gt; {<br/>    return it != null;<br/>});<br/>console.log(fil); //[1]</span></pre><h1 id="7b49" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">参考</h1><p id="80e2" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://www.amazon.com/JavaScript-Enlightenment-Library-User-Developer/dp/1449342884" rel="noopener ugc nofollow" target="_blank"> JavaScript启蒙</a></p><h1 id="fa8b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">通知；注意</h1><ul class=""><li id="6e28" class="mp mq iq ka b kb lv kf lw kj mz kn na kr nb kv mu mv mw mx bi translated">读书笔记系列如想关注最新消息/文章，请<a class="ae kw" href="https://github.com/n0ruSh/the-art-of-reading" rel="noopener ugc nofollow" target="_blank">【观看】</a>订阅。</li></ul></div></div>    
</body>
</html>