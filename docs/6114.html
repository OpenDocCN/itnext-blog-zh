<html>
<head>
<title>Develop Spring Boot applications using the Docker Desktop Dev Environments feature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker桌面开发环境特性开发Spring Boot应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/develop-spring-boot-applications-using-the-docker-desktop-dev-environments-feature-c624463c9f61?source=collection_archive---------4-----------------------#2021-08-22">https://itnext.io/develop-spring-boot-applications-using-the-docker-desktop-dev-environments-feature-c624463c9f61?source=collection_archive---------4-----------------------#2021-08-22</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="1d26" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Docker、VS代码、Docker编写器和远程容器插件的良好组合</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj kj"><img src="../Images/c0470b4b610735b140664b231ec50bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*qRi7nOrW6XK2Ps_svxPb9Q.png"/></div></figure><p id="c278" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">我总是喜欢有一个干净和独立的(从我的主操作系统)开发环境，在过去，我用<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/how-to-have-a-clean-dev-environment-like-wsl-2-using-multipass-on-linux-mac-or-windows-6828a78b87d7"> Multipass </a>和<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/using-wsl-2-to-develop-java-application-on-windows-8aac1123c59b"> WSL 2 </a>写了两篇文章来拥有这样的开发环境:</p><div class="lo lp gq gs lq lr"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-have-a-clean-dev-environment-like-wsl-2-using-multipass-on-linux-mac-or-windows-6828a78b87d7"><div class="ls ab fp"><div class="lt ab lu cl cj lv"><h2 class="bd iv gz z fq lw fs ft lx fv fx it bi translated">如何在Linux、Mac或Windows上使用Multipass获得一个像WSL 2这样干净的开发环境</h2><div class="ly l"><h3 class="bd b gz z fq lw fs ft lx fv fx dk translated">保持您的开发人员笔记本电脑整洁的指南</h3></div><div class="lz l"><p class="bd b dl z fq lw fs ft lx fv fx dk translated">itnext.io</p></div></div><div class="ma l"><div class="mb l mc md me ma mf kp lr"/></div></div></a></div><div class="lo lp gq gs lq lr"><a rel="noopener  ugc nofollow" target="_blank" href="/using-wsl-2-to-develop-java-application-on-windows-8aac1123c59b"><div class="ls ab fp"><div class="lt ab lu cl cj lv"><h2 class="bd iv gz z fq lw fs ft lx fv fx it bi translated">使用WSL 2在Windows上开发Java应用程序</h2><div class="ly l"><h3 class="bd b gz z fq lw fs ft lx fv fx dk translated">比较使用Maven和IntelliJ Idea时WSL 2和Windows 10的性能</h3></div><div class="lz l"><p class="bd b dl z fq lw fs ft lx fv fx dk translated">itnext.io</p></div></div><div class="ma l"><div class="mg l mc md me ma mf kp lr"/></div></div></a></div><p id="5779" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">最近docker引入了一个新的特性叫做Dev Environments，这是一个预览特性，但是对我来说非常有趣。这个新特性是Docker、docker-compose和VS代码(带有远程容器插件)的组合。</p><p id="bd5f" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">通过使用这个特性，您可以从docker卷(或在<strong class="kt iv">您的本地目录</strong>)中的项目git库<strong class="kt iv">轻松构建一个快速开发环境，然后连接到<strong class="kt iv">创建的docker容器</strong>，该容器使用VS代码(远程容器插件)连接到该卷，并开始编码和运行该项目。您甚至可以<strong class="kt iv">将您现有的Docker开发环境图像</strong>上传到Docker Hub上与其他人共享。</strong></p><p id="8b8b" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">如果你只是想快速浏览一个项目或者帮助你在分支机构工作的同事，你不需要通过安装SDK、编译器和其他开发工具来把你的系统弄得一团糟。</p><p id="e363" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">Docker桌面<code class="fe mh mi mj mk b">Dev Environments</code>支持两种类型的项目:</p><ul class=""><li id="684d" class="ml mm iu kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">单一容器开发环境</li><li id="e4c4" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">基于组合的开发环境</li></ul><p id="d11e" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">在本文中，我们将为Spring Boot团队的<a class="ae ln" href="https://github.com/spring-guides/gs-rest-service" rel="noopener ugc nofollow" target="_blank">官方REST API示例项目创建一个<code class="fe mh mi mj mk b">docker Dev environments</code>(单个容器)。下一篇文章将为一个更复杂的带有数据库的Spring Boot项目创建一个<code class="fe mh mi mj mk b">docker Dev environments</code>(基于组合)。</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gi gj mz"><img src="../Images/263fda621d48b263d9e99c6ff7100d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*og4qCUbw4dCie5iGoL8VGQ.png"/></div></div></figure><h1 id="5ea3" class="ne nf iu bd ng nh ni nj nk nl nm nn no ka np kb nq kd nr ke ns kg nt kh nu nv bi translated">准备您的机器来创建您的第一个Docker开发环境</h1><p id="d5a4" class="pw-post-body-paragraph kr ks iu kt b ku nw jv kw kx nx jy kz la ny lc ld le nz lg lh li oa lk ll lm in bi translated"><strong class="kt iv">首先</strong>，你需要安装<a class="ae ln" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>和<a class="ae ln" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>，然后你需要在VS代码中安装<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel="noopener ugc nofollow" target="_blank"> Remote-Containers插件</a>。</p><p id="ffb4" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated"><strong class="kt iv">接下来，</strong>运行Docker桌面，点击macOS菜单栏(或Windows系统托盘)中的<code class="fe mh mi mj mk b">Whale icon</code>进入仪表盘，点击<code class="fe mh mi mj mk b">Dashboard</code>子菜单。</p><p id="52fc" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated"><strong class="kt iv">最后</strong>，你应该点击位于左窗格的<code class="fe mh mi mj mk b">Dev Environemnts</code>，看到你的<code class="fe mh mi mj mk b">Docker Dev Environments</code>列表。</p><h1 id="533c" class="ne nf iu bd ng nh ni nj nk nl nm nn no ka np kb nq kd nr ke ns kg nt kh nu nv bi translated">如何创建Docker开发环境？</h1><p id="e402" class="pw-post-body-paragraph kr ks iu kt b ku nw jv kw kx nx jy kz la ny lc ld le nz lg lh li oa lk ll lm in bi translated">当您在Docker桌面仪表板的开发环境窗格中时，按下创建新环境按钮，您将有3个选择来创建新的开发环境:</p><ul class=""><li id="cb9f" class="ml mm iu kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated"><strong class="kt iv">远程git存储库:</strong>从docker卷中的远程Git存储库(可能是该存储库的一个分支)克隆项目代码，用创建的卷创建docker容器并打开VS代码，并使用<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel="noopener ugc nofollow" target="_blank"> Remote-Containers插件</a>将其连接到创建的Docker容器。</li><li id="82a9" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">本地文件夹:与前一个相似，但是你的源代码在本地目录中，绑定在创建的docker容器中。您的源代码将在docker容器和您的本地目录之间同步，因此与前面的方法相比可能会慢一点。</li><li id="bf54" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt iv">现有的开发环境:</strong>您可以通过将现有的开发环境发布为docker映像来重用它们，然后通过这种方法重用它们。</li></ul><h1 id="47e9" class="ne nf iu bd ng nh ni nj nk nl nm nn no ka np kb nq kd nr ke ns kg nt kh nu nv bi translated">为Spring Boot项目创建Docker开发环境</h1><p id="c2a3" class="pw-post-body-paragraph kr ks iu kt b ku nw jv kw kx nx jy kz la ny lc ld le nz lg lh li oa lk ll lm in bi translated">按下Create New Environment按钮，在第一个选项卡(<strong class="kt iv"> Remote Git Repository </strong>)中，输入Spring Boot团队的<a class="ae ln" href="https://github.com/spring-guides/gs-rest-service" rel="noopener ugc nofollow" target="_blank">官方REST API样例项目的URL</a>:</p><div class="lo lp gq gs lq lr"><a href="https://github.com/spring-guides/gs-rest-service" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fp"><div class="lt ab lu cl cj lv"><h2 class="bd iv gz z fq lw fs ft lx fv fx it bi translated">GitHub-spring-guides/GS-rest-Service:构建RESTful Web服务::学习如何创建一个…</h2><div class="ly l"><h3 class="bd b gz z fq lw fs ft lx fv fx dk translated">本指南将带您完成用Spring创建一个“Hello，World”RESTful web服务的过程。</h3></div><div class="lz l"><p class="bd b dl z fq lw fs ft lx fv fx dk translated">github.com</p></div></div><div class="ma l"><div class="ob l mc md me ma mf kp lr"/></div></div></a></div><p id="35d1" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">按下<code class="fe mh mi mj mk b">Create</code>按钮后，创建您的第一个开发环境的过程就开始了。Docker开发环境执行以下步骤来创建您的第一个开发环境:</p><ul class=""><li id="6a8c" class="ml mm iu kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">基于你的项目的编程语言和技术拉一个docker映像<strong class="kt iv">，在这种情况下，docker拉<code class="fe mh mi mj mk b">docker/dev-environments-java:stable-1</code>并基于它创建一个容器和所需的卷。</strong></li><li id="7e69" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">将源代码从给定的git存储库中克隆到其中一个已创建的卷中。</li><li id="e7a3" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">最后，docker desktop将为您打开一个VS代码窗口，该窗口使用<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel="noopener ugc nofollow" target="_blank"> Remote-Containers插件</a>连接到创建的docker容器。</li></ul><h1 id="262d" class="ne nf iu bd ng nh ni nj nk nl nm nn no ka np kb nq kd nr ke ns kg nt kh nu nv bi translated">在开发环境中开发和运行项目</h1><p id="e07b" class="pw-post-body-paragraph kr ks iu kt b ku nw jv kw kx nx jy kz la ny lc ld le nz lg lh li oa lk ll lm in bi translated">作为一名Java开发人员，我不喜欢VS代码用于日常的Java和Spring Boot开发，我还没有发现它是Java开发的完美IDE。</p><p id="0991" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">如果你只想运行这个示例REST API，你不需要在VS代码中安装任何插件，也不需要在容器中安装JDK。开发环境创建的Docker容器有JDK和<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/install-several-versions-of-jdk-gradle-kotlin-scala-spark-and-on-your-os-in-parallel-a7de30f691ad"> SDKMAN！</a>，SDKMAN的存在！如果你想安装其他SDK和工具(例如Maven、Scala或Kotlin ),这是非常有用的。</p><p id="e198" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">所以你只需要进入项目中的<code class="fe mh mi mj mk b">complete</code>目录，从VS代码终端执行这个命令:</p><pre class="kk kl km kn gu oc mk od oe aw of bi"><span id="b8c0" class="og nf iu mk b gz oh oi l oj ok">cd complete<br/>./mvnw spring-boot:run</span></pre><p id="e6f9" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">当构建和运行过程完成时，VS代码将Spring Boot运行端口映射到您的本地机器，并显示一个对话框让您打开浏览器。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gi gj ol"><img src="../Images/17b481cc3dfce2591efc0e20102f0994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vq2t4EsB5G3jlOxRJ9DufA.png"/></div></div></figure><p id="11ff" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">在你的主机上打开浏览器，进入<a class="ae ln" href="http://localhost:8080/greeting" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/greeting</a></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj om"><img src="../Images/5f9efca0ed00ca18f1fd1c0b6aaea023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*DBjVOKYwbcuzmnuYb5yppg.png"/></div></figure><p id="8995" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">对于VS代码中的Java和Spring Boot开发，您有两种选择:</p><ul class=""><li id="1fef" class="ml mm iu kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">安装<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack" rel="noopener ugc nofollow" target="_blank">Java扩展包</a></li><li id="ba38" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">安装<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=Pivotal.vscode-boot-dev-pack" rel="noopener ugc nofollow" target="_blank"> Spring Boot扩展包</a></li></ul><p id="dca5" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">我使用了<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=Pivotal.vscode-boot-dev-pack" rel="noopener ugc nofollow" target="_blank"> Spring Boot扩展包</a>，关于VS代码和<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel="noopener ugc nofollow" target="_blank">远程容器插件</a>有趣的是，当你连接到这个容器时，已安装的插件才可用，这意味着如果你在你的主机上正常打开你的VS代码，而没有连接到任何容器，则<a class="ae ln" href="https://marketplace.visualstudio.com/items?itemName=Pivotal.vscode-boot-dev-pack" rel="noopener ugc nofollow" target="_blank"> Spring Boot扩展包</a>不会被安装。</p><p id="e0ed" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">现在您可以使用Spring Boot仪表板运行(或调试)项目，只需点击运行(或调试)按钮(可能您需要到终端并按下<code class="fe mh mi mj mk b">Ctrl + C</code>来停止之前运行的实例)。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj on"><img src="../Images/5d4b2f7d1e873b3f82a25decbb7cd323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*Nguvvf86MiwdaJttb85l8w.png"/></div></figure><h1 id="936b" class="ne nf iu bd ng nh ni nj nk nl nm nn no ka np kb nq kd nr ke ns kg nt kh nu nv bi translated">最后一瞥</h1><p id="6bde" class="pw-post-body-paragraph kr ks iu kt b ku nw jv kw kx nx jy kz la ny lc ld le nz lg lh li oa lk ll lm in bi translated">如果你运行<code class="fe mh mi mj mk b">docker ps</code>命令，你会看到你的<strong class="kt iv">开发容器</strong>:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gi gj oo"><img src="../Images/36e2fc387abe21516df045f481deeaa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmN-RLgZeEWSFZI_4QaGHQ.png"/></div></div></figure><p id="1162" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">如您所见，所创建的容器的名称是由Docker Dev环境创建的随机名称(在我的例子中是<code class="fe mh mi mj mk b">amazing_kapitsa</code>)。</p><p id="bd5e" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">除了创建的容器之外，您还可以看到为您的开发环境创建的映像(包含所有内容，甚至是WIP代码！)在Docker桌面仪表盘中(在我的例子中是<code class="fe mh mi mj mk b">gs-rest-service-laughing_boyd</code>):</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gi gj op"><img src="../Images/5a8983626bffacc0e4b099ed46034b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vOybBXoNw2evIyvehhOs9g.png"/></div></div></figure><p id="317f" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">如果您有<code class="fe mh mi mj mk b">Docker Team Plan</code>，您可以点击分享按钮与您的团队成员分享此图片。</p><p id="5e5b" class="pw-post-body-paragraph kr ks iu kt b ku kv jv kw kx ky jy kz la lb lc ld le lf lg lh li lj lk ll lm in bi translated">像所有的工具和技术一样，Docker桌面中引入的这个新功能也有一些优点和缺点，但总的来说，我喜欢这个功能，作为最后的结论，我在下面的列表中尝试提到Docker开发环境功能的优点和缺点。</p><h2 id="3815" class="og nf iu bd ng oq or dn nk os ot dp no la ou ov nq le ow ox ns li oy oz nu pa bi translated">优势:</h2><ul class=""><li id="aefd" class="ml mm iu kt b ku nw kx nx la pb le pc li pd lm mq mr ms mt bi translated">将开发环境与主机操作系统完全隔离</li><li id="ea3c" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">良好的性能</li><li id="b62a" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">为每个项目在VS代码中安装所需的插件</li><li id="292c" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">可重复的开发环境，更好的团队合作</li><li id="9581" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">减少向团队添加新开发人员的入职时间</li></ul><h2 id="2806" class="og nf iu bd ng oq or dn nk os ot dp no la ou ov nq le ow ox ns li oy oz nu pa bi translated">缺点:</h2><ul class=""><li id="c3da" class="ml mm iu kt b ku nw kx nx la pb le pc li pd lm mq mr ms mt bi translated">尚不支持Intellij Idea</li><li id="bae6" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">如果在开发过程中，开发环境容器崩溃，那么你的代码将会丢失！</li><li id="6089" class="ml mm iu kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">共享开发环境在免费计划中不可用</li></ul></div></div>    
</body>
</html>