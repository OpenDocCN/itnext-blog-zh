<html>
<head>
<title>Translucent “Now Playing” Bar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">半透明的“正在播放”栏</h1>
<blockquote>原文：<a href="https://itnext.io/translucent-now-playing-bar-252724c09b0?source=collection_archive---------4-----------------------#2020-01-28">https://itnext.io/translucent-now-playing-bar-252724c09b0?source=collection_archive---------4-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7b19" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在SwiftUI中复制Apple Music的“正在播放”栏😎</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/a800fc00645ca0889f9f90fdd5d3d74d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8TWPKESaE8R7y73zMrsACg.png"/></div></div></figure><blockquote class="la lb lc"><p id="5ad3" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">这个例子并不适用于所有尺寸的iPhone。更多的是一个实验。</p></blockquote></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><p id="54fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在互联网上搜索，试图找到一种方法，从苹果音乐应用程序中重新创建正在播放的酒吧。它正好放在标签栏的上方，具有漂亮、匹配的半透明效果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lo"><img src="../Images/a9acb2b77dddcddcb103b53c1b5ee51b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CokNKDsEk478nZs-aXIi9g.jpeg"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">苹果音乐应用</figcaption></figure><p id="ceaf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我偶然看到<a class="ae lt" href="https://stackoverflow.com/questions/56610957/is-there-a-method-to-blur-a-background-in-swiftui/56611342" rel="noopener ugc nofollow" target="_blank">这篇文章</a>引导我在SwiftUI中找到了解决这个问题的方法。实际上，神奇之处在于使用了一个<code class="fe lu lv lw lx b">UIViewRepresentable</code>和一个<code class="fe lu lv lw lx b">UIVisualEffect</code>，其中效果属于<code class="fe lu lv lw lx b">UIBlurEffect</code>类型，风格为<code class="fe lu lv lw lx b">.systemThinMaterial</code>。</p><blockquote class="la lb lc"><p id="f86b" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">还有一个<code class="fe lu lv lw lx b">.systemUltraThinMaterial</code>，但是它用于不同的UI组件。</p></blockquote><h1 id="e3e5" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">建造这个东西</h1><p id="ce80" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">我使用的所有代码和图片都可以在Github 上找到。</p><h2 id="c2fb" class="nb lz it bd ma nc nd dn me ne nf dp mi kb ng nh mm kf ni nj mq kj nk nl mu nm bi translated">歌曲列表</h2><p id="b049" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">首先，我们需要一个随机创作歌曲的列表。因此，让我们创建一个名为<code class="fe lu lv lw lx b">SongListView</code>的新SwiftUI文件:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">SongListView.swift</figcaption></figure><p id="e212" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们更新ContentView来显示这个歌曲列表:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="658c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它应该看起来像一个普通的假歌列表:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/e07a1a71bda7749ba12282e22eba9951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vu9eph8uUwhovi28GOlkjA.png"/></div></div></figure><h2 id="dd33" class="nb lz it bd ma nc nd dn me ne nf dp mi kb ng nh mm kf ni nj mq kj nk nl mu nm bi translated">标签图标</h2><p id="2a99" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">让我们为选项卡图标创建一个视图。这只是一个占位符，因此不是交互式的，也不是真正的TabView的好设计，但它服务于我们的目的…</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="eb4a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将为我们提供以下预览:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nq"><img src="../Images/be56b336a1d8ec39984b3b1882b9e8dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bLuYFusOurueU8J5553xBQ.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">TabIconsView.swift</figcaption></figure><h2 id="c4c7" class="nb lz it bd ma nc nd dn me ne nf dp mi kb ng nh mm kf ni nj mq kj nk nl mu nm bi translated">正在播放栏</h2><p id="e351" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">标签图标上方的“正在播放”栏也很简单:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c650" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">给我们以下预览(说“不播放”，因为目前没有播放):</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nr"><img src="../Images/57ce218f5aaebf439392eb75bf12f591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AB3X7C1-j3DH_ks1Pmh9LA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">NowPlayingView.swift</figcaption></figure><h2 id="1c6e" class="nb lz it bd ma nc nd dn me ne nf dp mi kb ng nh mm kf ni nj mq kj nk nl mu nm bi translated">最后，侠影</h2><p id="89da" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">我们必须扩展一个<code class="fe lu lv lw lx b">UIViewRepresentable</code>，而不是扩展一个视图。<code class="fe lu lv lw lx b">UIViewRepresentable</code>有一个<code class="fe lu lv lw lx b">UIBlurEffect</code>类型的效果属性。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="8ee9" class="nb lz it bd ma nc nd dn me ne nf dp mi kb ng nh mm kf ni nj mq kj nk nl mu nm bi translated">把它们拼凑在一起</h2><p id="f8b4" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">我们将把<code class="fe lu lv lw lx b">NowPlaying</code>和<code class="fe lu lv lw lx b">TabIcon</code>视图放在<code class="fe lu lv lw lx b">VStack</code>中，然后把它和我们的<code class="fe lu lv lw lx b">VisualEffect</code>视图一起放在<code class="fe lu lv lw lx b">ZStack</code>中。<code class="fe lu lv lw lx b">VisualEffect</code>是下面的<em class="ld">，给我们想要的模糊效果。让我们称这整个组合为一个<code class="fe lu lv lw lx b">InfoPane</code>视图:</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">InfoPaneView.swift</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ns"><img src="../Images/cb01a243d8e52ae83f22f9d63d8ef254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0ZMTYXT6N1QFZ8KWeETig.png"/></div></div></figure><p id="7245" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">厉害！它看起来像我们想要的。您可能已经注意到了，<code class="fe lu lv lw lx b">InfoPane</code>视图由一个<code class="fe lu lv lw lx b">VStack</code>和一个<code class="fe lu lv lw lx b">Spacer()</code>组成。这会将我们的控件推到屏幕底部。这是我们的视图层次的可视化:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nt"><img src="../Images/303c01862add58a707517e731e0f0f08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4aFQDOBE-rtJY2A3HUw_w.png"/></div></div></figure><p id="6815" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们更新我们的内容视图:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6281" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们得到了我们想要的效果！我们可以隐约看到条形和标签图标后面的颜色。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/85b2833691df504f22e53e5e36697230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qK6k3yPYHz2hhOGLj2uisA.png"/></div></div></figure><h2 id="c61f" class="nb lz it bd ma nc nd dn me ne nf dp mi kb ng nh mm kf ni nj mq kj nk nl mu nm bi translated">深色模式</h2><p id="b8c7" class="pw-post-body-paragraph jq jr it js b jt mw jv jw jx mx jz ka kb my kd ke kf mz kh ki kj na kl km kn im bi translated">用SwiftUI构建的一个好处是事情<em class="ld">就是工作</em>。我们没有修改代码来支持黑暗模式😎</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/724a18c3c9658030fe8dcf8f7f81c250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TTtfxWK99GyWKpSVKo-c9A.png"/></div></div></figure></div></div>    
</body>
</html>