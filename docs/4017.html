<html>
<head>
<title>Easily deploy express API as a serverless function for free using ZEIT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ZEIT，轻松地将express API部署为免费的无服务器功能</h1>
<blockquote>原文：<a href="https://itnext.io/easily-deploy-express-rest-api-as-a-serverless-function-for-free-using-zeit-b0159f4d2367?source=collection_archive---------6-----------------------#2020-04-11">https://itnext.io/easily-deploy-express-rest-api-as-a-serverless-function-for-free-using-zeit-b0159f4d2367?source=collection_archive---------6-----------------------#2020-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="44f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用ZEIT免费轻松部署express API作为无服务器功能的指南。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/510d86abdf27962776b3498f3684a8f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RNVW0j1sS2o56Ng6"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://unsplash.com/@vorosbenisop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Benjamin Voros </a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片(只是美图，与内容无关)</figcaption></figure><h1 id="29c0" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">介绍</h1><p id="4d5b" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi mg translated">无服务器计算(或简称为无服务器计算)是一种执行模型，云提供商(AWS、Azure或Google Cloud)负责通过动态分配资源来执行一段代码。并且只对用于运行代码的资源数量收费。代码通常在无状态容器中运行，这些容器可以由各种事件触发，包括HTTP请求、数据库事件、队列服务、监控警报、文件上传、预定事件(Cron作业)等。发送给云提供商执行的代码通常以函数的形式出现。因此，无服务器有时被称为<em class="kl">【功能即服务】</em>或<em class="kl">【FaaS】</em>。</p><h1 id="9f04" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">初始化</h1><h2 id="a8a3" class="mp le iq bd lf mq mr dn lj ms mt dp ln jy mu mv lr kc mw mx lv kg my mz lz na bi translated">Windows操作系统</h2><p id="9512" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">如果您使用的是windows，我强烈建议您下载并安装git bash。它与git捆绑在一起，可以从这里下载:<a class="ae lc" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/downloads</a></p><h2 id="8c71" class="mp le iq bd lf mq mr dn lj ms mt dp ln jy mu mv lr kc mw mx lv kg my mz lz na bi translated">项目设置</h2><p id="9690" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">转到项目文件夹，打开终端或git bash(如果在windows上)。我们现在将创建一个新文件夹，并在其中进行更改。复制并粘贴下面的命令来完成。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="ad5e" class="mp le iq nc b gy ng nh l ni nj">mkdir express-serverless-example &amp;&amp; cd express-serverless-example </span></pre><p id="d530" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们将安装项目所需的所有依赖项，确保nodejs(你可以在这里获得:<a class="ae lc" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en/download/</a>)已经安装在你的系统中。要确保安装了nodejs和npm，您可以运行下面的命令来检查每个版本。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="3dfc" class="mp le iq nc b gy ng nh l ni nj">node -v &amp;&amp; npm -v</span></pre><p id="fc95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在将初始化一个新项目，为此，您可以运行下面的命令。这将使用默认选项创建一个新的package.json文件。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="0f1e" class="mp le iq nc b gy ng nh l ni nj">npm init -y</span></pre><p id="8b1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在将安装express。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="3091" class="mp le iq nc b gy ng nh l ni nj">npm i express</span></pre><p id="94be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在将安装now(用于ZEIT的CLI工具)作为全局依赖项。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="f314" class="mp le iq nc b gy ng nh l ni nj">npm i -g now</span></pre><p id="6f17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在你最喜欢的代码编辑器中打开新创建的文件夹，如果你正在使用vscode(你可以在这里得到它:<a class="ae lc" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/</a>)，我强烈推荐，你可以键入下面的命令，它将打开vscode。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="2663" class="mp le iq nc b gy ng nh l ni nj">code .</span></pre><h1 id="56ff" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">快速代码</h1><p id="cb13" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们现在将创建一个“index.js”文件来创建一个express应用程序(文件名<strong class="jp ir">必须</strong>为“index.js”才能与ZEIT一起使用)，并将以下内容粘贴到其中。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="e066" class="mp le iq nc b gy ng nh l ni nj">const express = require("express");</span><span id="8f31" class="mp le iq nc b gy nk nh l ni nj">const app = express();</span><span id="24d2" class="mp le iq nc b gy nk nh l ni nj">const port = 3000;<br/></span><span id="4573" class="mp le iq nc b gy nk nh l ni nj">// Body parser</span><span id="a3f8" class="mp le iq nc b gy nk nh l ni nj">app.use(express.urlencoded({ extended: false }));</span><span id="8dfb" class="mp le iq nc b gy nk nh l ni nj">// Home route</span><span id="efe3" class="mp le iq nc b gy nk nh l ni nj">app.get("/", (req, res) =&gt; {</span><span id="1a1b" class="mp le iq nc b gy nk nh l ni nj">res.send("Welcome to a basic express App");</span><span id="6077" class="mp le iq nc b gy nk nh l ni nj">});</span><span id="58c0" class="mp le iq nc b gy nk nh l ni nj">// Users route</span><span id="5c3a" class="mp le iq nc b gy nk nh l ni nj">app.get("/users", (req, res) =&gt; {</span><span id="4abd" class="mp le iq nc b gy nk nh l ni nj">res.json([</span><span id="f96a" class="mp le iq nc b gy nk nh l ni nj">{ name: "Akash", location: "India" },</span><span id="cf2b" class="mp le iq nc b gy nk nh l ni nj">{ name: "Abhishek", location: "India" },</span><span id="8b77" class="mp le iq nc b gy nk nh l ni nj">]);</span><span id="9111" class="mp le iq nc b gy nk nh l ni nj">});</span><span id="8106" class="mp le iq nc b gy nk nh l ni nj">// Listen on port 5000</span><span id="8e83" class="mp le iq nc b gy nk nh l ni nj">app.listen(port, () =&gt; {</span><span id="eda2" class="mp le iq nc b gy nk nh l ni nj">console.log(`Server is running on port 3000</span><span id="739d" class="mp le iq nc b gy nk nh l ni nj">Visit http://localhost:3000`);</span><span id="1293" class="mp le iq nc b gy nk nh l ni nj">});</span></pre><p id="b03d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这样，我们完成了基本的express应用程序。</p><h1 id="21ea" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">主办；主持</h1><p id="1ab0" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">如果你还没有，在<a class="ae lc" href="https://zeit.co/" rel="noopener ugc nofollow" target="_blank">https://zeit.co/</a>上创建一个账户，在你的终端或git bash中输入下面的命令，然后按照提示登录。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="3874" class="mp le iq nc b gy ng nh l ni nj">now login</span></pre><p id="ec4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在ZEIT中托管我们的应用程序之前，我们必须为它创建一个配置文件。为此，创建一个名为“now.json”的新文件，并粘贴以下内容。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="7cee" class="mp le iq nc b gy ng nh l ni nj">{</span><span id="c3cc" class="mp le iq nc b gy nk nh l ni nj">"version": 2,</span><span id="e9bd" class="mp le iq nc b gy nk nh l ni nj">"builds": [{ "src": "index.js", "use": "@now/node-server" }],</span><span id="7e78" class="mp le iq nc b gy nk nh l ni nj">"routes": [</span><span id="e91b" class="mp le iq nc b gy nk nh l ni nj">{</span><span id="95d3" class="mp le iq nc b gy nk nh l ni nj">"src": "/",</span><span id="bb70" class="mp le iq nc b gy nk nh l ni nj">"dest": "/index.js",</span><span id="f141" class="mp le iq nc b gy nk nh l ni nj">"methods": ["GET"]</span><span id="8ea2" class="mp le iq nc b gy nk nh l ni nj">},</span><span id="02f2" class="mp le iq nc b gy nk nh l ni nj">{</span><span id="2ff4" class="mp le iq nc b gy nk nh l ni nj">"src": "/users",</span><span id="cfc3" class="mp le iq nc b gy nk nh l ni nj">"dest": "/index.js",</span><span id="6588" class="mp le iq nc b gy nk nh l ni nj">"methods": ["GET"]</span><span id="e135" class="mp le iq nc b gy nk nh l ni nj">}</span><span id="0839" class="mp le iq nc b gy nk nh l ni nj">]</span><span id="70f2" class="mp le iq nc b gy nk nh l ni nj">}</span></pre><p id="735e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我现在将解释上面的每个字段，<a class="ae lc" href="https://zeit.co/docs/configuration#project/version" rel="noopener ugc nofollow" target="_blank">版本</a>字段将指定ZEIT Now平台版本，<a class="ae lc" href="https://zeit.co/docs/configuration#project/builds" rel="noopener ugc nofollow" target="_blank">构建</a>字段将指定使用哪个构建和哪个文件作为源，<a class="ae lc" href="https://zeit.co/docs/configuration#project/routes" rel="noopener ugc nofollow" target="_blank">路由</a>字段将指定所有要使用的路由，这是最重要的部分，因此<strong class="jp ir">如果您添加新路由，不要忘记在此处包含它</strong>。</p><p id="63db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里找到更多关于配置的信息<a class="ae lc" href="https://zeit.co/docs/configuration#introduction/configuration-reference" rel="noopener ugc nofollow" target="_blank">https://zeit . co/docs/configuration # introduction/configuration-reference</a></p><p id="8ec9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们都完成了，现在您可以运行下面的命令来在ZEIT上托管您的API。</p><pre class="kn ko kp kq gt nb nc nd ne aw nf bi"><span id="3415" class="mp le iq nc b gy ng nh l ni nj">now</span></pre><p id="18c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该函数应该成功上传，并且您应该获得一个访问它的链接。</p><p id="ea6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">如果你觉得这篇文章很有帮助，别忘了</em> <strong class="jp ir"> <em class="kl">拍拍</em> </strong> <em class="kl">和</em> <strong class="jp ir"> <em class="kl">把它</em> </strong> <em class="kl">分享给你的朋友，谢谢你的时间。</em></p></div></div>    
</body>
</html>