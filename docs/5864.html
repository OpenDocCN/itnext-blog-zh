<html>
<head>
<title>I’m Changing How I Review Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我正在改变我审查代码的方式</h1>
<blockquote>原文：<a href="https://itnext.io/im-changing-how-i-review-code-dbf212507e5f?source=collection_archive---------0-----------------------#2021-06-15">https://itnext.io/im-changing-how-i-review-code-dbf212507e5f?source=collection_archive---------0-----------------------#2021-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b6e4c9a1de58276e725e8fd238a47ff4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UqiSgiWBEQNtNZkQ.jpg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">弗朗西斯科·加拉罗蒂在<a class="ae kf" href="https://unsplash.com/s/photos/prune?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="36b8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我非常支持代码审查。我已经写了我审查代码的经历，包括该做和不该做的清单，<a class="ae kf" href="https://dangoslen.me/blog/surviving-your-first-code-review/" rel="noopener ugc nofollow" target="_blank">如何在你的第一次代码审查中幸存</a>，以及<a class="ae kf" href="https://dangoslen.me/blog/whats-the-point-to-code-reviews-anyway/" rel="noopener ugc nofollow" target="_blank">为什么我们应该审查代码</a>。</p><p id="389b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的观点主要是由我对一种特殊的代码审查——拉请求——的经验形成的。像许多开发人员一样，我已经习惯了拉请求模型来帮助促进评审。虽然它并不完美，但我一直认为它是一个很好的工具，总体上是对正式代码评审过程或通过电子邮件进行评审的改进。</p><p id="f0a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不过最近，我看到一些表达不同观点的想法。许多开发人员开始对<a class="ae kf" href="https://jessitron.com/2021/03/27/those-pesky-pull-request-reviews/" rel="noopener ugc nofollow" target="_blank">拉请求模型</a>感到失望。有一种感觉是，拉请求实际上可能使注释一行代码变得太容易了。这种轻松可能会导致冲突和过分热情的评论，让我们行业的许多人感到沮丧。</p><p id="b9a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个常见的批评是，拉请求鼓励评审者只看代码。他们甚至从来没有撤销他们正在审查的变更！坦白说，我自己也有这种感觉。</p><p id="253a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在阅读了这篇文章并通过Twitter看到一些相关的想法后，我想知道:有没有更好的方法来审查代码？我能做些什么不同？</p><p id="dafa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">问完之后，我决定开始对我审查代码的方式做一些改变。他们最近一直在帮助我，所以我想他们也能帮助你和你的团队。</p><h1 id="37ed" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">评论代码与协作编写代码</h1><p id="f263" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">让我开始质疑我如何评审代码的最重要的想法之一来自上面的文章:</p><blockquote class="mi mj mk"><p id="2e51" class="kg kh le ki b kj kk kl km kn ko kp kq ml ks kt ku mm kw kx ky mn la lb lc ld im bi translated"><em class="it">拉取请求是对单独工作的改进。但不是一起工作。</em></p></blockquote><p id="0103" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这引起了共鸣。事实上，拉请求毕竟不是与人合作的主要方式。</p><p id="043c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">代码协作对于团队维护代码库的能力至关重要。如果团队中的一个成员独自编写整个代码库，而不与其他团队成员一起工作，那么很有可能团队的其他成员过一段时间就无法为其做出贡献了。更糟糕的是，如果不管，单个团队成员甚至可能会出错或无法解决问题。因此，尽早经常合作是个好主意。</p><p id="813a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一个问题是:团队如何在代码上合作？更进一步，一个团队是否可以过早合作？太频繁了？</p><p id="fe00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">许多团队似乎已经得出结论,“拉”请求是一个很好的协作场所。我认为他们没有错。首先，团队成员觉得已经准备好与团队的其他成员共享他们的代码版本，以获得直接反馈。然后，就像作者写一本书一样，他们提交这本书进行第一次审查以获得反馈。其余的充当编辑，准备帮助准备好印刷的草稿。</p><p id="7675" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">团队将拉请求视为协作的场所并没有什么错。问题是当团队认为协作<em class="le">仅限于</em>代码审查过程时。</p><p id="9f91" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在代码提交评审之前，团队应该就问题、想法和代码一起工作。导师应该为学员提供建议，同伴应该互相帮助，结对编程或调试应该成为常规。如果一个作者在没有透露这本书的内容的情况下把第一稿发给他们的编辑，这将会使编辑更加困难。编辑现在需要了解更多信息，以便提供有用的反馈。因此，出版日期可能会比预期的要晚。</p><p id="3990" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">真正的协作不仅仅是留下评论或建议。它讨论备选解决方案，刺激需求，并与您的团队进行实时反馈。</p><p id="9b3e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将努力使这种形式的合作在我的团队中更加普遍。我希望通过评论让我们超越协作，回到实时协作。</p><h1 id="269c" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">快跑。的。代码。</h1><p id="3475" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">直接评论和拒绝一个拉请求而不运行或单步执行所做的更改听起来很愚蠢。但是很多开发者——包括我！—一直这样做。</p><p id="209e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为工程师，我们不应该仅仅通过代码有多“干净”或者有多抽象来评估代码。相反，我们仍然需要通过代码做它应该做的事情有多好来衡量代码——当它运行时交付一些价值。</p><p id="b98c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了阐明这一点，你上一次查看谷歌搜索的源代码是什么时候？如果你真的看到了，它会改变你对它作为一个产品的看法吗？大概不会。</p><p id="9fcb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不想在这里变得过于简单化。代码的质量很重要！它应该是干净的，脆的，易变的，等等。</p><p id="e0da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是让代码变好的部分原因是它解决问题的能力。它是否做了它需要做的事情来满足需求？最终产品会更好吗？至少，所有代码都需要使最终产品更好。</p><p id="309b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看代码是否让产品变得更好的最好方法是什么？你必须运行它。将“拉”请求视为对添加或固定功能进行小型演示的机会。使用它。戳它。见鬼，就算是<em class="le">自己测试</em>吧！</p><p id="a6c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我对此深感内疚。我倾向于相信我们的自动化，代码变更产生了期望的行为变更，而我自己没有观察到行为！我想开始改变这一点，更频繁地运行代码。</p><h1 id="9482" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">多导航，少瞎指挥</h1><p id="4303" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">当在代码中发现一个问题(或者甚至是不同的观点)时，评审者可以很容易地当场推荐一个具体的改变。例如，他们可能会在注释中包含一段代码，或者添加GitHub对其改进实现的建议。它们甚至可能包括引用和链接。</p><p id="f005" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们对看到的每一期都这样做。</p><p id="0854" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然有时添加这样的评论可能是适当的，但它通常会让人感觉审阅者试图控制局面。他们在规定代码<em class="le">应该是什么</em>，而不是对编写的代码提供反馈。评论者在给人指路，好像他们是指手画脚的人。没有人喜欢指手画脚的人。</p><p id="137c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">伟大的代码评审员知道后座司机和导航员之间的区别。两人都给出方向，但其中一人心中有目的地，而另一人试图控制司机。一个导航员知道到达目的地的多种方式，但是当司机走马丁街而不是汉普顿街时，后座司机会抱怨——这本来可以节省整整一分钟！</p><p id="84e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">代码评审中的导航器是什么样子的？他们关注的不是如何改变代码，而是为什么代码需要改变。他们更关心最终的结果，而不是编写的具体类。导航者主要关注于理解他们需要去哪里，并帮助他们到达那里。</p><p id="0038" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我想成为更多的航海家。不是每一个细节都需要评论，也不是每一个不同的观点都需要分享。我想以一种帮助而不是控制的方式来审查代码。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="0223" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有这些的目标不仅仅是成为一名更好的代码评审员。而是成为更好的队友。知识工作不再仅仅是一个人在一个紧张的思想或任务上埋头苦干。知识工作——或者至少是有意义的知识工作——倾向于由团队来完成。</p><p id="5cbe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我想成为一名优秀的队友。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="06db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">原载于</em><a class="ae kf" href="https://dangoslen.me/blog/changing-how-i-review-code/" rel="noopener ugc nofollow" target="_blank"><em class="le">https://dango slen . me</em></a><em class="le">。</em></p></div></div>    
</body>
</html>