<html>
<head>
<title>Vue.js–Getting started in Dart (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">vue . js–Dart入门(第2部分)</h1>
<blockquote>原文：<a href="https://itnext.io/vue-js-getting-started-in-dart-part-2-d6e9e14ca31a?source=collection_archive---------1-----------------------#2018-11-12">https://itnext.io/vue-js-getting-started-in-dart-part-2-d6e9e14ca31a?source=collection_archive---------1-----------------------#2018-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="79ba" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何为Vue.js框架编写Dart代码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/311e9ca02a2bd9d84f3941fa0dd39841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jxRtb8kWQaSRXpZuOe05uQ.png"/></div></div></figure><p id="79c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本系列的第1部分<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/vue-js-getting-started-in-dart-c26c163efafe">中，我们浏览了Vue.js指南的几个例子，在<em class="lo">条件和循环</em>处结束。</a></p><p id="140a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这一部分中，我们将继续学习处理用户输入的<em class="lo">和用组件</em>组成的<em class="lo">。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lp lq l"/></div></figure><p id="fe9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">→ <a class="ae ln" href="https://youtu.be/O1E1TAeRlX8" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">在YouTube上观看</strong> </a></p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="d3ba" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">处理用户输入</h1><p id="64fb" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">为了在我们的Vue实例上附加可以调用方法的事件监听器，我们得到了<code class="fe mv mw mx my b">v-on</code>指令来帮助我们处理这个问题。</p><p id="7fa6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设我们的<code class="fe mv mw mx my b">web/index.html</code>中有这个模板:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="eddf" class="nd lz iq my b gy ne nf l ng nh">&lt;div id="<strong class="my ir">app-5</strong>"&gt;<br/>  &lt;p&gt;{{ <strong class="my ir">message</strong> }}&lt;/p&gt;<br/>  &lt;button <strong class="my ir">v-on:click</strong>="<strong class="my ir">reverseMessage</strong>"&gt;Reverse Message&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="755d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">JS的对应部分如下所示:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="60d0" class="nd lz iq my b gy ne nf l ng nh">var app5 = new Vue({<br/>  el: '#app-5',<br/>  data: {<br/>    message: 'Hello Vue.js!'<br/>  },<br/>  <strong class="my ir">methods</strong>: {<br/>    <strong class="my ir">reverseMessage</strong>: function () {<br/>      this.message = this.message.split('').reverse().join('')<br/>    }<br/>  }<br/>});</span></pre><p id="1965" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从第1部分的解决方案中，我们现在能够创建一个<code class="fe mv mw mx my b">Vue</code>实例，并设置<code class="fe mv mw mx my b">el</code>和<code class="fe mv mw mx my b">data</code>信息。为了让我们能够定义我们的<code class="fe mv mw mx my b">methods</code>，我们需要通知我们的实例这个属性。</p><p id="3bde" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<code class="fe mv mw mx my b">web/app.dart</code>中，修改<code class="fe mv mw mx my b">VueOptions</code>匿名类，如下所示:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="3ffa" class="nd lz iq my b gy ne nf l ng nh">@JS()<br/>@anonymous<br/>class VueOptions {<br/>  external factory VueOptions({<br/>    String el,<br/>    VueDataOptions data,<br/>    <strong class="my ir">VueMethodOptions methods, // &lt;-- Add this line</strong><br/>  });<br/>  external String get el;<br/>  external VueDataOptions get data;<br/>  <strong class="my ir">external VueMethodOptions get methods; // &lt;-- Add this line</strong><br/>}</span></pre><p id="274d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，在同一个文件中创建我们的<code class="fe mv mw mx my b">VueMethodOptions</code>工厂类:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="453b" class="nd lz iq my b gy ne nf l ng nh">@JS()<br/>@anonymous<br/>class <strong class="my ir">VueMethodOptions</strong> {<br/>  external factory <strong class="my ir">VueMethodOptions</strong>({<br/>    Function <strong class="my ir">reverseMessage</strong>,<br/>  });<br/>  external <strong class="my ir">Function</strong> get <strong class="my ir">reverseMessage</strong>;<br/>}</span></pre><p id="4e8e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mv mw mx my b">reverseMessage</code>是点击按钮后调用的方法。</p><p id="b5a1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们使用到目前为止在<code class="fe mv mw mx my b">web/main.dart</code>中的内容来调用我们的方法:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="edaa" class="nd lz iq my b gy ne nf l ng nh">Vue(VueOptions(<br/>  el: '#app-5',<br/>  data: VueDataOptions(<br/>    message: 'Hello Vue.js',<br/>  ),<br/>  methods: <strong class="my ir">VueMethodOptions(</strong><br/>    <strong class="my ir">reverseMessage</strong>: <strong class="my ir">() {</strong><br/>      print('Hello, World!');<br/>    <strong class="my ir">}<br/>  )<br/></strong>));</span></pre><p id="bfce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">运行本地服务器(<code class="fe mv mw mx my b">webdev serve --live-reload</code>)访问<code class="fe mv mw mx my b"><a class="ae ln" href="http://localhost:8080." rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code> <a class="ae ln" href="http://localhost:8080." rel="noopener ugc nofollow" target="_blank">。</a></p><p id="35e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">单击按钮。你现在应该看到"<strong class="kt ir"> <em class="lo">你好，世界！</em> </strong>"打印到控制台。</p><p id="184d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么下面这一点呢？：</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="15d6" class="nd lz iq my b gy ne nf l ng nh">this.message = this.message.split('').reverse().join('')</span></pre><p id="8e69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您会立即发现这种尝试是行不通的，因为<code class="fe mv mw mx my b">Vue</code>上下文不在该函数中。为了在JavaScript中使用Dart函数，我们需要使用内置的<code class="fe mv mw mx my b">dart:js</code>库中的<code class="fe mv mw mx my b">allowInterop</code>或<code class="fe mv mw mx my b">allowInteropCaptureThis</code>包装函数:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="6529" class="nd lz iq my b gy ne nf l ng nh">// In main.dart<br/>import 'dart:js'; <strong class="my ir">// &lt;-- Import this first</strong></span><span id="5a4b" class="nd lz iq my b gy ni nf l ng nh">..<br/>..<br/>..</span><span id="fa37" class="nd lz iq my b gy ni nf l ng nh">Vue(VueOptions(<br/>  el: '#app-5',<br/>  data: VueDataOptions(<br/>    message: 'Hello Vue.js',<br/>  ),<br/>  methods: VueMethodOptions(<br/>    reverseMessage: <strong class="my ir">allowInteropCaptureThis(</strong>(<strong class="my ir">gotThis</strong>) {<br/>      window.console.dir(<strong class="my ir">gotThis</strong>);<br/>    }<strong class="my ir">)<br/>  </strong>)<strong class="my ir"><br/></strong>));</span></pre><p id="d52c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里，<code class="fe mv mw mx my b">allowInteropCaptureThis</code>不仅用于在JavaScript中使用Dart函数，还用于捕获<code class="fe mv mw mx my b">this</code>上下文，并通过函数的第一个参数使其可用。因此，运行该逻辑并单击“反向消息”按钮会将<code class="fe mv mw mx my b">Vue</code>实例打印到控制台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/86d433bc3bb14b35da39e5a34f7df03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*TH34W4LqtdjqJ7H5mzhkYw.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated">Vue实例。我们看到了消息属性😉</figcaption></figure><p id="f573" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你会马上发现做<code class="fe mv mw mx my b">gotThis.message</code>会给你一个错误。这是因为<code class="fe mv mw mx my b">gotThis</code>默认设置为<code class="fe mv mw mx my b">dynamic</code>类型，而<code class="fe mv mw mx my b">dynamic</code>类型没有<code class="fe mv mw mx my b">message</code>属性。</p><p id="c5c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要解决这个问题，我们需要将参数转换为正确的类型:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="c03b" class="nd lz iq my b gy ne nf l ng nh">allowInteropCaptureThis((<strong class="my ir">Vue</strong> gotThis) {...});</span></pre><p id="7d15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并将消息属性通知我们的工厂:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="1d7c" class="nd lz iq my b gy ne nf l ng nh">// In web/app.dart</span><span id="40b3" class="nd lz iq my b gy ni nf l ng nh">@JS()<br/>class Vue {<br/>  external factory Vue(VueOptions options);<br/>  external void set seen(bool val);<br/>  external List&lt;Todo&gt; get todos;<br/>  external<strong class="my ir"> String </strong>get<strong class="my ir"> message; // &lt;-- Added this line<br/>  </strong>external<strong class="my ir"> void </strong>set<strong class="my ir"> message(</strong>String<strong class="my ir"> </strong>updatedMessage<strong class="my ir">); // &lt;-- Added this line</strong><br/>}</span></pre><p id="93d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">返回<code class="fe mv mw mx my b">web/main.dart</code>并按照该方法继续操作:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="0611" class="nd lz iq my b gy ne nf l ng nh">allowInteropCaptureThis((<strong class="my ir">Vue</strong> gotThis) {<br/>  <strong class="my ir">gotThis.message</strong> = <strong class="my ir">gotThis.message.split</strong>('')<strong class="my ir">.reversed.toList</strong>('')<strong class="my ir">.join</strong>('');<br/>});</span></pre><p id="16c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们开始吧:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/a7202bc2bda48f368ad1c315774f6ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/1*QtseY7Fn67dFZUyU8KS-jA.gif"/></div></figure><p id="284a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://youtu.be/O1E1TAeRlX8" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">观看完整视频</strong> </a>查看其他示例。</p><h1 id="ed27" class="ly lz iq bd ma mb np md me mf nq mh mi jw nr jx mk jz ns ka mm kc nt kd mo mp bi translated">结论</h1><p id="e9ce" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">我希望这很有见地，你今天学到了一些新东西。</p><p id="3e54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">订阅<a class="ae ln" href="http://bit.ly/2P2N1jC" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">我的YouTube频道</strong> </a>了解Dart上的最新视频。谢谢！</p><p id="d9b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">喜欢，分享，关注我</strong>😍有关Dart的更多内容。</p><h1 id="e78c" class="ly lz iq bd ma mb np md me mf nq mh mi jw nr jx mk jz ns ka mm kc nt kd mo mp bi translated">进一步阅读</h1><ol class=""><li id="3a4c" class="nu nv iq kt b ku mq kx mr la nw le nx li ny lm nz oa ob oc bi translated"><a class="ae ln" href="https://pub.dartlang.org/packages/js" rel="noopener ugc nofollow" target="_blank"> js包</a></li><li id="9c1f" class="nu nv iq kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated"><a class="ae ln" href="https://dev.to/graphicbeacon/how-to-use-javascript-libraries-in-your-dart-applications--4mc6" rel="noopener ugc nofollow" target="_blank">如何在你的Dart应用中使用JavaScript库</a></li><li id="67a4" class="nu nv iq kt b ku od kx oe la of le og li oh lm nz oa ob oc bi translated"><a class="ae ln" href="http://bit.ly/2P2N1jC" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">全栈web开发带Dart </strong> </a></li></ol></div></div>    
</body>
</html>