<html>
<head>
<title>Continuous GitOps, the way to do DevOps in Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">持续的GitOps，在Kubernetes做DevOps的方法</h1>
<blockquote>原文：<a href="https://itnext.io/continuous-gitops-the-way-to-do-devops-in-kubernetes-896b0ea1d0fb?source=collection_archive---------0-----------------------#2020-01-19">https://itnext.io/continuous-gitops-the-way-to-do-devops-in-kubernetes-896b0ea1d0fb?source=collection_archive---------0-----------------------#2020-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bd03" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">持续GitOps，新时代DevOps实践通过实现端到端的“Git真实来源”,无需手动更改Kubernetes集群来提高交付速度🏄</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/08d3f03a9c86d7ad76176d770ed977f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPhdqr3qwLI_jiEjiuoJFw.png"/></div></div></figure><p id="cdbf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从我们第一次听说持续交付这个词到现在已经10年了。Jez和法利·大卫在2010年通过他们的书《持续交付:通过构建、测试和部署自动化的可靠软件发布》谈到了持续交付。在过去的十年中，连续交付<em class="ln">已经改变了我们发布软件的方式。现在，随着围绕Kubernetes生态系统开发的一套新工具，我们正在持续交付之旅中迈出又一大步。这些工具围绕着</em>连续GitOps的概念。这篇博客试图揭开为什么？什么？又是怎么做到的？“连续的GitOps”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/c5301fc12688751073d66eb18609e657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3wEzmCvIeS1P-rZdierOQ.png"/></div></div></figure><h1 id="3fec" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">什么是连续GitOp？</h1><p id="f9af" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">连续GitOps是一个概念，我们将软件的端到端描述放入Git，然后尝试使集群状态与Git存储库持续同步。这里有两个关键词会有所不同。</p><ol class=""><li id="ad37" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated"><strong class="kt ir">软件的描述表示</strong>:使用<em class="ln"> Kubernetes，应用程序和底层基础设施之间的关系完全是声明性的。你用声明式(YAML式)询问你想从基础设施中得到什么。这些YAML的实现细节被底层的Kubernetes集群抽象出来，该集群具有控制器、调度器、KubeDNS、KubeProxy、操作器等。，这使我们能够从传统的“基础设施即代码”转向“基础设施即数据”。更多关于此的信息，请点击</em><a class="ae mv" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/architecture/declarative-application-management.md" rel="noopener ugc nofollow" target="_blank"><em class="ln">【GitHub】</em></a><em class="ln">。这里的关键是，应用程序所需的每个声明性标签(来自</em>应用程序开发人员/应用程序操作人员/集群操作人员<em class="ln">)都被充实到持续交付管道中的YAML中，并最终被推入GitOps存储库。并且对集群中的任何手动YAML更改都应该零容忍。</em></li><li id="7670" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated"><strong class="kt ir">持续同步:</strong>持续同步意味着持续查看git存储库，以将任何状态变化反映到Kubernetes集群中。这是一个强大的想法，来自一个叫做<a class="ae mv" href="https://fluxcd.io/" rel="noopener ugc nofollow" target="_blank"><em class="ln"/></a><em class="ln">的工具。Flux试图使用Kubernetes操作符将部署自动化从Kubernetes集群外部转移到集群中。</em></li></ol><p id="2033" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">持续GitOps是四个主要组件的交集，它们共同创造了奇迹</p><ol class=""><li id="2121" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated"><strong class="kt ir"> Git仓库</strong>:将我们的应用程序的声明性定义存储为YAML的源代码仓库。</li><li id="1e27" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated"><strong class="kt ir"> Kubernetes集群</strong>:我们部署应用的底层集群。</li><li id="2cbc" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated"><strong class="kt ir">同步代理</strong>:Kubernetes操作符扩展，它负责将Git存储库和应用程序状态持续同步到集群中。</li><li id="5984" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated"><strong class="kt ir"> CD管道</strong>:编排整个流程的持续部署管道。</li></ol><p id="1c70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面给出了关于这些组件如何协同工作以创建连续GitOps流的参考架构。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/5ba2b3758a5aa2f8c238f471349c78e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IgvfNDcWZ70PLYsk5I4QQ.png"/></div></div></figure><p id="b9fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上述参考架构中，YAML创建和<em class="ln">丰富在</em>应用开发者、应用运营商和集群运营商之间分成三个部分。根据您的组织团队结构、集群多租户和治理需求，您可以选择分一两步完成。我们将在下面的“管理声明性YAML”一节中对此进行更深入的探讨。</p><p id="b1aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们来看看，为什么要连续GitOps？</p><h1 id="8998" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">为什么持续GitOps？</h1><p id="4719" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">持续的GitOps在许多方面增加价值。让我们来看看一些关键的问题，</p><p id="f5d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">应用交付速度</strong>:</p><p id="0c1a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">持续的GitOps将通过以下方式提高产品交付速度:</p><ol class=""><li id="45e7" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">自信的展示，能够比较最终的完整YAML和集群状态。这也可以作为批准发布的决策指南。</li><li id="ad6f" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">借助Prometheus的应用指标，通过自动蓝绿色部署轻松部署流程。</li><li id="fcdd" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">基于策略的自动化容器映像更新。例如，Istio sidecar次要版本是向后兼容的，可以自动更新。</li><li id="2847" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">GitOps将以开发者为中心进行运营，提供低摩擦的开发体验。</li><li id="c072" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">应用团队可以接手一些运营工作，运营团队可以专注于平台。</li><li id="b23a" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">GitOps repository充当了一种绕过紧急发布的完整连续部署流程的方式。</li></ol><p id="97e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">端到端自动化:</strong></p><p id="b635" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在GitOps方法中，与应用程序开发人员、应用程序操作员和集群操作员相关的一切都通过git嵌入到YAML中，实现了端到端自动化。</p><p id="fd2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">安全、审计&amp;合规:</strong></p><p id="a5ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">零手动更改集群的策略将极大地提高集群安全性，并支持任何合规性要求。因为集群中的所有东西都在git中，所以我们将有一个完整的审计日志，记录集群中发生的事情。</p><p id="09db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">集群可观测性:</strong></p><p id="90a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有了完整的审计日志，我们可以很容易地获得集群中发生的更改的列表，以帮助任何问题的调试。</p><p id="ec54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">关注点分离&amp;轻松迁移:</strong></p><p id="5bd5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">持续的GitOps将使应用程序开发人员、应用程序操作人员和集群操作人员之间的问题分离。来自这些团队的依赖以声明的方式作为依赖注入注入到git中。这将简化我们对底层k8s集群、治理策略或横切工具的迁移。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/8113b74fda83463b977e39d2ca439a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zZi48e-CIGFHwBE4QCSPcA.png"/></div></div></figure><p id="f9a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">阅读有关Kubernetes DevOps 的端到端DevOps工作流<a class="ae mv" href="https://link.medium.com/yqPhMzi4G5" rel="noopener">的更多信息。</a></p><h1 id="c526" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">我们如何采用连续GitOps？</h1><p id="a34d" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">我们将研究以下四个不同的方面，这将有助于我们做到这一点</p><ul class=""><li id="4e87" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm nd ms mt mu bi translated">要实施的GitOps工作流</li><li id="b421" class="mm mn iq kt b ku mw kx mx la my le mz li na lm nd ms mt mu bi translated">管理声明性YAML氏症</li><li id="bd8b" class="mm mn iq kt b ku mw kx mx la my le mz li na lm nd ms mt mu bi translated">工具</li><li id="8a28" class="mm mn iq kt b ku mw kx mx la my le mz li na lm nd ms mt mu bi translated">从哪里开始？</li></ul><h2 id="0d06" class="ne lq iq bd lr nf ng dn lv nh ni dp lz la nj nk mb le nl nm md li nn no mf np bi translated"><strong class="ak">GitOps</strong>w<strong class="ak">workflow to implement</strong></h2><p id="ed1d" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">当我们开始使用GitOps时，以下三个工作流是要采用的流行工作流</p><p id="cd3c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">工作流程1 </strong>:标准GitOps流程</p><p id="91cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是标准的GitOps工作流程，我们将应用程序YAML描述推送到GitOps存储库中，GitOps代理将自动同步状态更改。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/aa633587edebba505a526acd390fdc4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6G48VbQNUSfyESZ1nxsStg.png"/></div></div></figure><p id="012b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">工作流程2 </strong>:自动图像更新</p><p id="3a47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个工作流中，GitOps代理将根据指定的策略从容器映像注册中心自动更新容器映像的新版本。例如，我们可以设置这样的策略，如果映像中有微小的版本变化，我们可以自动更新，因为它们是向后兼容的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/922bac8e55814b97f684d7eeab9a3d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YXHXwZ3aqfo9l-dzlVZEYg.png"/></div></div></figure><p id="bef5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">工作流程3 </strong>:自动化金丝雀部署</p><p id="9e57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个强大的工作流程，我们可以在其中自动化金丝雀部署。这样，我们逐渐将流量转移到金丝雀，同时使用Prometheus测量关键性能指标，如HTTP请求成功率、请求平均持续时间和pod运行状况。基于KPI的分析，金丝雀被提升或中止</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/d7be5fc2b83f6fadbe80775ece55f6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbPmAeiHy7LwstfK2bcOhw.png"/></div></div></figure><h2 id="44bb" class="ne lq iq bd lr nf ng dn lv nh ni dp lz la nj nk mb le nl nm md li nn no mf np bi translated"><strong class="ak">管理声明性YAML的</strong></h2><p id="38c8" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">假设我们有一个电子商务购物车应用程序，完整的应用程序定义是以下内容的混合</p><ol class=""><li id="648d" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">应用程序图像。</li><li id="c945" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">Pod、部署、服务、卷和配置图的YAML。</li><li id="61db" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">数据库通信的几个秘密？</li><li id="7123" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">使用Istio服务网格作为集群治理策略的默认横切边盘。</li><li id="25e8" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">环境治理策略，如在转移阶段进行一次复制，在生产阶段进行三次复制。</li><li id="ad79" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">标签来增加高可用性节点调度的节点亲和力和容忍度。</li><li id="c98b" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">基于pod标签的网络安全策略YAML。</li></ol><p id="2755" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了构建最终的应用程序YAML，我们需要来自应用程序开发人员、应用程序操作人员和集群操作人员的输入。根据您的组织团队结构、集群多租户和治理复杂性，所有这些活动可能由一个到三个不同的团队执行。让我们更详细地看看这个。</p><p id="120e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设你是一个小组织，管理手满荚的，你会有小</p><p id="07e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的流程展示了我们如何构建一个协调的持续部署自动化管道。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/a54df2b7ecd80718fdc2e6831abf2b93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kut4Vz_xDM62g-j5EDB4mg.png"/></div></div></figure><p id="4d8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这种分离关注点的方式深受开放应用模型的影响，该模型试图为云原生应用开发提供一个框架。</p><p id="5a39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">开放应用模型<a class="ae mv" href="https://oam.dev/" rel="noopener ugc nofollow" target="_blank"> [OAM </a> ]描述了一种模型，其中</p><ul class=""><li id="a103" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm nd ms mt mu bi translated"><strong class="kt ir">开发者</strong>负责定义应用组件。</li><li id="fa1b" class="mm mn iq kt b ku mw kx mx la my le mz li na lm nd ms mt mu bi translated"><strong class="kt ir">应用操作员</strong>负责创建那些组件的实例，并为它们分配应用配置。</li><li id="91b7" class="mm mn iq kt b ku mw kx mx la my le mz li na lm nd ms mt mu bi translated">基础设施操作员负责声明、安装和维护平台上可用的底层服务。</li></ul><p id="4483" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过应用OAM框架，下表尝试分离YAML摊缴责任。这可能会根据您的组织结构和您选择的Kubernetes集群类型而有所变化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/7fc1b1a5acc8fb778e2684b242dd17e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mKY9YzQ0SRIC6gQTBn7SNg.png"/></div></div></figure><h2 id="c1ca" class="ne lq iq bd lr nf ng dn lv nh ni dp lz la nj nk mb le nl nm md li nn no mf np bi translated"><strong class="ak">工具</strong></h2><p id="e482" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">如果您对GitOps的想法深信不疑，那么您的下一步就是确定所需的工具。有许多工具可以支持我们实现GitOps的不同方面。让我们看看其中的一些工具及其用法</p><p id="de86" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> Git: </strong>这个<strong class="kt ir"> </strong>是我们使用GitOps存储YAML工件的基础。</p><p id="e774" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个强大的组合，可以帮助我们生成声明性的YAML清单。我们可以用Helm打包应用程序及其依赖项。然后Kustomize将<em class="ln">帮助我们定制和修补YAML的文件，而不改动原来的YAML。</em>在<a class="ae mv" href="https://medium.com/@imarunrk/helm-is-not-enough-you-also-need-kustomize-82bae896816e" rel="noopener">掌舵的时候多读点这个还不够，你还需要kutomize</a>。如果你正在寻找一些其他的替代工具来做这件事<a class="ae mv" href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/architecture/declarative-application-management.md" rel="noopener ugc nofollow" target="_blank"> <em class="ln">阅读</em> </a> <em class="ln">。</em></p><p id="d49b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Argo CD: 这是一个GitOps连续交付工具，它可以作为一个代理，将GitOps存储库中的更改同步到Kubernetes集群中。(<a class="ae mv" href="https://argoproj.github.io/argo-cd/" rel="noopener ugc nofollow" target="_blank"> Argo CD </a>)</p><p id="3753" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> Flux </strong>:这是另一个GitOps连续交付工具，可以作为代理将GitOps存储库的变更同步到Kubernetes集群。(<a class="ae mv" href="https://fluxcd.io" rel="noopener ugc nofollow" target="_blank">通量</a>)</p><p id="d897" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> Flagger </strong>:这个工具与flux配合得很好，可以通过GitOps ( <a class="ae mv" href="https://github.com/weaveworks/flagger" rel="noopener ugc nofollow" target="_blank"> Flagger </a>)交付金丝雀部署</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/6fdd99920b7818e993253f03ba4653df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHMd7d0LuRBD_BhLpsvS1g.png"/></div></div></figure><h2 id="a73a" class="ne lq iq bd lr nf ng dn lv nh ni dp lz la nj nk mb le nl nm md li nn no mf np bi translated"><strong class="ak">从何说起？</strong></h2><p id="4e40" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">如果你正在开始一个绿地项目，从一开始就采用GitOps有点容易。我们所要做的就是选择我们的CI/CD工具、声明式YAML管理和GitOps代理来让它运行起来。</p><p id="fc22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您正在寻找在棕地应用程序中实现GitOps，以下几点可能会为您提供指导</p><ol class=""><li id="9ec0" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">您可以一次选择一个应用程序，并使用成功案例来扩大应用范围。</li><li id="c8fe" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">当您选择第一个应用程序时，请选择变化更频繁的应用程序。这将有助于我们为成功案例建立一些可靠的衡量标准。</li><li id="be5f" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">选择一个经常崩溃的应用程序。有了GitOps，这些应用程序应该不那么频繁地崩溃，当它崩溃时，您应该有更好的可观察性。</li><li id="2c6d" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">比起像Istio、RBAC集成等运营交叉问题，更喜欢业务应用。这些贯穿各领域的业务问题非常复杂，而且不是唾手可得的。</li><li id="222a" class="mm mn iq kt b ku mw kx mx la my le mz li na lm mr ms mt mu bi translated">如果需要，引入虚拟人工批准步骤，直到您有信心为止。</li></ol><p id="9e7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在下一篇文章中，让我们一步步地了解GitOps。</p></div></div>    
</body>
</html>