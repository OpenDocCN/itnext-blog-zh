<html>
<head>
<title>PHP Microservice Framework Swoft: HTTP Server Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP微服务框架Swoft: HTTP服务器第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/php-microservice-framework-swoft-say-hello-world-ff78d55582d0?source=collection_archive---------3-----------------------#2019-09-17">https://itnext.io/php-microservice-framework-swoft-say-hello-world-ff78d55582d0?source=collection_archive---------3-----------------------#2019-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/da24a6caab4c5815504f64f1e9b14657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KH-i7gZC9UEUELeMhnAugg.jpeg"/></div></div></figure><h1 id="68de" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是Swoft？</h1><p id="8794" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Swoft是一个PHP高性能微服务协程框架。已经出版多年，已经成为php的不二之选。它可以像Go一样，内置协同web服务器和通用协同客户端，驻留在内存中，独立于传统的PHP-FPM。还有类似的Go语言操作，类似于Spring Cloud框架的灵活注解。</p><p id="dcae" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Swoft通过三年的积累和方向探索，将Swoft打造成PHP界的春天云，是PHP高性能框架和微服务管理的不二之选。</p><h1 id="c890" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">开源代码库</h1><div class="lz ma gp gr mb mc"><a href="https://github.com/swoft-cloud/swoft" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">软件云/软件</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">PHP微服务协程框架Swoft是一个基于Swoole扩展的PHP微服务协程框架…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">github.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq jw mc"/></div></div></a></div><h1 id="89a9" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">辅导的</h1><h1 id="cb59" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">安装</h1><p id="3ba1" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">使用composer安装Swoft</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="5611" class="na jz iq mw b gy nb nc l nd ne">swoft:/www# composer create-project swoft/swoft swoft<br/>Installing swoft/swoft (v2.0.5)<br/>  - Installing swoft/swoft (v2.0.5): Loading from cache<br/>Created project in swoft<br/>&gt; @php -r "file_exists('.env') || copy('.env.example', '.env');"<br/>Loading composer repositories with package information<br/>Updating dependencies (including require-dev)<br/>Package operations: 84 installs, 0 updates, 0 removals<br/>  - Installing swoft/stdlib (v2.0.5): Loading from cache<br/>  - Installing swoft/server (v2.0.5): Loading from cache<br/>  - Installing nikic/php-parser (v4.2.4): Downloading (100%)         <br/>  ......<br/>toolkit/cli-utils suggests installing inhere/php-validate (Very lightweight data validate tool)<br/>toolkit/cli-utils suggests installing inhere/console (a lightweight php console application library.)<br/>......<br/>Writing lock file<br/>Generating autoload files</span></pre><h1 id="81e1" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">开始</h1><p id="2090" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">安装后，转到Swoft项目根目录并启动Swoft，如下所示。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="c615" class="na jz iq mw b gy nb nc l nd ne">root@MyServer:/tmp/swoft# php bin/swoft http:start<br/>2019/09/14-10:29:34 [INFO] Swoft\SwoftApplication:setSystemAlias(485) Set alias @base=/tmp/swoft<br/>2019/09/14-10:29:34 [INFO] Swoft\SwoftApplication:setSystemAlias(486) Set alias @app=@base/app<br/>......<br/>2019/09/14-10:29:35 [INFO] Swoft\Processor\ConsoleProcessor:handle(39) Console command route registered (group 14, command 42)<br/>                            Information Panel<br/>  ********************************************************************<br/>  * HTTP     | Listen: 0.0.0.0:18306, type: TCP, mode: Process, worker: 3<br/>  * RPC      | Listen: 0.0.0.0:18307, type: TCP<br/>********************************************************************</span><span id="bd0d" class="na jz iq mw b gy nf nc l nd ne">HTTP server start success !<br/>2019/09/14-10:29:35 [INFO] Swoft\Server\Server:startSwoole(492) Swoole\Runtime::enableCoroutine<br/>2019/09/14-10:29:35 [INFO] <br/>......</span></pre><p id="9447" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启动成功，可以看到端口关闭Http和Rpc。</p><p id="bf5c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后在浏览器中访问<a class="ae ng" href="http://127.0.0.1:18306/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:18306 </a>地址。将出现以下页面。</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/4b5b73e403dff7ceb202c2181a087191.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_jjYOA1i4DWWUypuerkXQ.jpeg"/></div></div></figure><h1 id="d2c2" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">向世界问好</h1><p id="730e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在Swoft控制器目录(<code class="fe ni nj nk mw b">app/Http/Controller</code>)下创建一个新的<code class="fe ni nj nk mw b">HelloWorldController.php</code>文件，如下所示。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="1672" class="na jz iq mw b gy nb nc l nd ne">&lt;?php declare(strict_types=1);<br/></span><span id="bd41" class="na jz iq mw b gy nf nc l nd ne">namespace App\Http\Controller;</span><span id="b62a" class="na jz iq mw b gy nf nc l nd ne">use Swoft\Http\Server\Annotation\Mapping\Controller;<br/>use Swoft\Http\Server\Annotation\Mapping\RequestMapping;</span><span id="2473" class="na jz iq mw b gy nf nc l nd ne">/**<br/> * Class HelloWorldController<br/> *<br/> * @since 2.0<br/> *<br/> * @Controller(prefix="hello-world")<br/> */<br/>class HelloWorldController<br/>{<br/>    /**<br/>     * @RequestMapping()<br/>     *<br/>     * @return string<br/>     */<br/>    public function index(): string<br/>    {<br/>        return 'Hello World !';<br/>    }<br/>}</span></pre><p id="ddd8" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这里使用的控制器和路由器将在后续文章重启服务中详细描述。</p><p id="412a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">浏览器访问<a class="ae ng" href="http://127.0.0.1:18306/hello-world/index" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:18306/hello-world/index</a>，会得到如下页面。</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/3c39124e1f07fa2c8354807566eb92f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jwgjhF8X5XYv2yVq8Cwj7w.jpeg"/></div></div></figure><h1 id="ea82" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">基准</h1><p id="3900" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在Apache Bench工具下简单测试Swoft，结果如下:</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/54011bedda4d88ac1290383871de9ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMjQmvqyjnuKS-gZkMPOCw.png"/></div></div></figure><h1 id="71e7" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">开源代码库</h1><div class="lz ma gp gr mb mc"><a href="https://github.com/swoft-cloud/swoft" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">软件云/软件</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">PHP微服务协程框架Swoft是一个基于Swoole扩展的PHP微服务协程框架…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">github.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq jw mc"/></div></div></a></div></div></div>    
</body>
</html>