<html>
<head>
<title>How to create a dialog with Lottie animation in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Android中用Lottie动画创建对话框</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-a-dialog-with-lottie-animation-in-android-8f6f97ca2d6e?source=collection_archive---------2-----------------------#2021-10-29">https://itnext.io/how-to-create-a-dialog-with-lottie-animation-in-android-8f6f97ca2d6e?source=collection_archive---------2-----------------------#2021-10-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dd4253a4a6d0ab1389e9205dd18410cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fg7WGOu2rFfArWm8VTDG6g.png"/></div></div></figure><p id="2a7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，我是Amr Hesham软件工程师，我对Android开发和编译器设计感兴趣，在这篇文章中，我将谈论如何使用Lottie对话框库轻松地在您的应用程序中使用Lottie动画文件创建对话框。</p><p id="05ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是首先，洛蒂动画文件是什么？<br/>这是一个包含洛蒂库渲染它所需的所有信息的文件，你可以从官方网站<a class="ae kw" href="http://lottiefiles.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">【LottieFiles.com】</strong></a>下载它们，或者从Airbnb使用Adobe After Effect和插件创建它们，从<a class="ae kw" href="http://lottiefiles.com/plugins/after-effects" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">lottiefiles.com/plugins/after-effects</strong></a>查看文档</p><p id="b12e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你在哪里使用洛蒂对话？</p><ul class=""><li id="5d1f" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">显示带有两个选项相机和画廊的拍照对话框。</li><li id="b5ac" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">显示欢迎消息对话框。</li><li id="aca3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">显示分级对话框。</li><li id="659e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">显示加载对话框。</li><li id="0271" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">显示任何信息消息对话框，如显示当前版本的功能。</li><li id="99bd" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">显示任何错误消息对话框，如无效登录、无效插入或更新数据。</li><li id="0433" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">显示任何警告消息对话框，如断言用户希望通过两个选项删除、取消来删除此项。</li><li id="7d86" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">这个列表只是几个例子，不要限制你的思维，当你认为它对你的设计决策有帮助的时候就使用它。</li></ul><div class="ll lm ln lo gt ab cb"><figure class="lp jr lq lr ls lt lu paragraph-image"><img src="../Images/de8591c95cfb69ac3b39521c4b42fbc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/1*dY1OLQAR_6aW2DxuDQgZ4g.gif"/></figure><figure class="lp jr lq lr ls lt lu paragraph-image"><img src="../Images/825415155a97ac43a78d4167f2c0427b.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/1*hOtzSlo8gzOBxLoKFeCRAg.gif"/></figure><figure class="lp jr lq lr ls lt lu paragraph-image"><img src="../Images/62040e1d7cdad55ce8a01db78ed0c388.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/1*KvNWY9sLn-Kx0kFPwvpl0A.gif"/></figure></div><p id="eec3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们开始实现一个拍照对话框的例子，我们需要找到我们想要使用的文件，我们有许多选项，我们可以将文件作为JSON文件下载到本地，并将其放在raw目录中，或者从assets目录中，或者我们可以只从URL加载动画</p><p id="df03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，如果您想要从URL加载动画，您必须在您的清单文件上设置internet权限。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="031d" class="ma mb iq lw b gy mc md l me mf">&lt;uses-permission android:name=”android.permission.INTERNET” /&gt;</span></pre><p id="d795" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了我们的动画文件后，我们需要将洛蒂对话库添加到我们的Android应用程序中。</p><ul class=""><li id="079e" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">将下面一行添加到您的顶层<code class="fe mg mh mi lw b">build.gradle</code></li></ul><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="f0fe" class="ma mb iq lw b gy mc md l me mf">allprojects {     <br/>    repositories {         <br/>        maven { url "&lt;https://jitpack.io&gt;" }     <br/>    }<br/>}</span></pre><p id="4bf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后将下面的代码行添加到您的应用程序级版本中。gradle，请从Lottie Dialog存储库中检查最新版本号</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="1a94" class="ma mb iq lw b gy mc md l me mf">implementation 'com.github.amrdeveloper:lottiedialog:1.0.0'</span></pre><p id="d7ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们开始构建我们的对话框，假设我们想要创建一个有两个选项的拍照对话框，从相机中拍照或从图库中加载图片，所以我们需要2个动作按钮。</p><p id="804d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们首先为我们的对话框创建动作按钮，我们的第一个按钮将是一个摄像头按钮，带有一个点击监听器来完成他的工作，你可以根据需要自定义它。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="aab9" class="ma mb iq lw b gy mc md l me mf">Button takePictureAction = new Button(this); takePictureAction.setText("Camera"); takePictureAction.setOnClickListener(v -&gt; {});</span></pre><p id="8faf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的第二个将是画廊。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="0d3e" class="ma mb iq lw b gy mc md l me mf">Button loadPictureAction = new Button(this); loadPictureAction.setText("Gallery"); loadPictureAction.setOnClickListener(v -&gt; {});</span></pre><p id="7442" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们需要用这两个动作按钮和Lottie动画文件创建一个Lottie对话框。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="5f22" class="ma mb iq lw b gy mc md l me mf">LottieDialog dialog = new LottieDialog(this)<br/>    .setAnimation(R.raw.animation)<br/>    .setAnimationRepeatCount(LottieDrawable.INFINITE)<br/>    .setAutoPlayAnimation(true)<br/>    .setMessage("Take a Profile Picture")<br/>    .addActionButton(takePictureAction)<br/>    .addActionButton(loadPictureAction);</span></pre><p id="b421" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我们可以使用show方法轻松地显示它</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="f064" class="ma mb iq lw b gy mc md l me mf">dialog.show();</span></pre><p id="3b4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最终的结果会是这样的。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/3bf63135edca4cd1cb6d6d7f67aac568.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*t5feGmItQhmnNhv04c_K1Q.gif"/></div></figure><p id="4073" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这只是Lottie Dialog可以做什么的一个简单例子，但是有很多定制选项，你可以从库仓库<a class="ae kw" href="https://github.com/AmrDeveloper/lottiedialog" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">AMR developer/lottidialog</strong></a>中看到完整的文档和例子。</p><p id="2c50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae kw" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> GitHub </strong> </a>，<a class="ae kw" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> LinkedIn </strong> </a>，<a class="ae kw" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Twitter </strong> </a>上找到我。</p><p id="bc05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受编程😋。</p></div></div>    
</body>
</html>