<html>
<head>
<title>Angular &amp; CSS Grid: Dynamic Grid Properties</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度和CSS网格:动态网格属性</h1>
<blockquote>原文：<a href="https://itnext.io/angular-css-grid-dynamic-grid-properties-1a03634607a1?source=collection_archive---------2-----------------------#2019-10-21">https://itnext.io/angular-css-grid-dynamic-grid-properties-1a03634607a1?source=collection_archive---------2-----------------------#2019-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d606" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Angular @与CSS网格绑定</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ba2f3c8399b7b62d3c4d16e7ffbc42d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*PtuvcSHzyju9qu_oqHUBmA.png"/></div></div></figure><h1 id="eeb6" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">介绍</h1><p id="5ced" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><strong class="lo iu">源代码/现场演示:</strong> <a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid" rel="noopener ugc nofollow" target="_blank"> StackBlitz🚀</a></p><p id="879d" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><strong class="lo iu">文章目标:</strong>研究一种使用Angular的<code class="fe mo mp mq mr b">@HostBinding</code>装饰器动态修改CSS网格属性的方法。</p><p id="4ac1" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><strong class="lo iu">文章主题:</strong></p><ul class=""><li id="d8b0" class="ms mt it lo b lp mj ls mk lv mu lz mv md mw mh mx my mz na bi translated">通过杠杆<code class="fe mo mp mq mr b">:host</code>选择器使用<strong class="lo iu"> CSS-Grid </strong>和<strong class="lo iu">角度组件</strong></li><li id="1a21" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">如何用<strong class="lo iu"> TypeScript </strong>动态调整<code class="fe mo mp mq mr b">column-template-rows</code>、<code class="fe mo mp mq mr b">gap</code>等<strong class="lo iu"> CSS网格属性</strong>。</li><li id="df4e" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><strong class="lo iu"> Angular的DOM Sanitizer，</strong>为什么我们必须绕过安全性，以及这样做时我们应该遵循的一些准则。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/25af773dd4f2caa35edb01d231a187df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/1*sXbxRG_TOIJbogWS6UxSHQ.gif"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">我们的应用</figcaption></figure><h1 id="3a1b" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">CSS网格(容器和项目)</h1><p id="dd2f" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">我们的<a class="ae mi" href="https://developer.mozilla.org/en-US/docs/Web/CSS/grid" rel="noopener ugc nofollow" target="_blank"> CSS网格</a>将由两个角组件组成。父容器和子项目。CSS Grid是一个相对较新的编写CSS的惯例，它允许我们构建反应式网格来放置和对齐元素。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fapp.component.html" rel="noopener ugc nofollow" target="_blank">app.component.html</a></figcaption></figure><p id="6638" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">使用<code class="fe mo mp mq mr b">:host</code>选择器，角度组件可以自己选择。我们可以使用这个概念将组件视为网格容器或网格项目，避免使用包装器<code class="fe mo mp mq mr b">divs</code>。🎁</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fcontainer%2Fcontainer.component.css" rel="noopener ugc nofollow" target="_blank">container . component . CSS</a></figcaption></figure><ul class=""><li id="4975" class="ms mt it lo b lp mj ls mk lv mu lz mv md mw mh mx my mz na bi translated"><code class="fe mo mp mq mr b">display: grid</code>:将元素定义为网格容器</li><li id="7caa" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><code class="fe mo mp mq mr b">grid-template-rows</code>:定义最大行数和行大小</li><li id="5d74" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><code class="fe mo mp mq mr b">grid-auto-flow: column</code>:告诉网格在垂直方向<strong class="lo iu">用尽空间</strong>时创建一个<strong class="lo iu">新列</strong>(而不是新行)。</li><li id="84c9" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><code class="fe mo mp mq mr b">gap</code>:定义各项之间的间距。</li></ul><p id="6981" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">在我们的例子中，每一行将占用1部分空间。因为我们在案例<code class="fe mo mp mq mr b">repeat(3, 1fr)</code>中指定了3行，每一行将占div高度的1/3。我们的列将根据上下文大小占用空间。</p><h2 id="5478" class="nn kv it bd kw no np dn la nq nr dp le lv ns nt lg lz nu nv li md nw nx lk ny bi translated">CSS网格提示💎</h2><p id="ad76" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">想要将网格项目中的内容居中吗？使网格项成为自己的网格容器，并利用<code class="fe mo mp mq mr b">justify-items</code>和<code class="fe mo mp mq mr b">align-items</code>。</p><pre class="kj kk kl km gt nz mr oa ob aw oc bi"><span id="13c9" class="nn kv it mr b gy od oe l of og">.grid-item-class-name {<br/>  display: grid;<br/>  justify-items: center;<br/>  align-items: center;<br/>}</span></pre><h1 id="72bc" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">主机绑定</h1><p id="0023" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">现在我们对网格有了基本的了解，我们可以访问Angular Component类中的CSS属性了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fcontainer%2Fcontainer.component.ts" rel="noopener ugc nofollow" target="_blank"> container.component.ts </a></figcaption></figure><p id="0256" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated"><a class="ae mi" href="https://angular.io/api/core/HostBinding" rel="noopener ugc nofollow" target="_blank">主机绑定</a>允许我们在组件上访问和应用CSS样式和类。—我喜欢把这看作是通过TypeScript更新<code class="fe mo mp mq mr b">:host</code>选择器的属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fcontainer%2Fcontainer.component.ts" rel="noopener ugc nofollow" target="_blank"> container.component.ts </a></figcaption></figure><p id="0da0" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">更新我们的HostBinding变量将改变组件的CSS属性值。我们可以将它与一个事件联系起来，允许用户更新我们的网格。</p><h2 id="b513" class="nn kv it bd kw no np dn la nq nr dp le lv ns nt lg lz nu nv li md nw nx lk ny bi translated">角形尖端💎</h2><p id="f848" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">我们还可以使用<code class="fe mo mp mq mr b">@HostBinding</code>添加和删除<strong class="lo iu">类</strong></p><pre class="kj kk kl km gt nz mr oa ob aw oc bi"><span id="cff6" class="nn kv it mr b gy od oe l of og">export class MyComponent {<br/>  @HostBinding('class.is-valid') <br/>  get validValue() { return this.value.valid; }<br/>}</span></pre><h1 id="1b08" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated"><strong class="ak">处理事件</strong></h1><p id="b9b4" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">现在Angular和CSS Grid已经通过HostBinding结合在一起了。我们将允许用户(有限制地)更新<code class="fe mo mp mq mr b">grid-template-columns</code>和<code class="fe mo mp mq mr b">gap</code>。</p><p id="274b" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">使用角度指令是允许同级组件相互通信的一种简单方法。点击按钮时，我们将向容器发送一个事件来更新<strong class="lo iu">主机绑定。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fcontainer%2Fcontainer.component.ts" rel="noopener ugc nofollow" target="_blank"> container.component.ts </a></figcaption></figure><p id="ee91" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">上面的代码片段完成了以下任务</p><ul class=""><li id="c77d" class="ms mt it lo b lp mj ls mk lv mu lz mv md mw mh mx my mz na bi translated">订阅间隙更新，通过事件上的<code class="fe mo mp mq mr b">5px</code>更新间隙，这将增加或减少网格项目之间的间距</li><li id="e7d0" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">订阅行更新，将<code class="fe mo mp mq mr b">repeat()</code>中的第一个参数更新1，这将增加或减少网格中的行数。</li><li id="dc18" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">验证间隙和行数，以确保我们不会低于1行或0间隙。</li><li id="358a" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">使用DOM Sanitizer允许我们将样式作为字符串传递。</li></ul><p id="2474" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">在StackBlitz上可以找到<a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fincrement-decrement%2Fincrement-decrement.component.ts" rel="noopener ugc nofollow" target="_blank">按钮</a>和<a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fcontainer%2Fconnector.directive.ts" rel="noopener ugc nofollow" target="_blank">指令</a>的源代码；它们是直截了当的，而且很小。—集装箱承担所有的起重工作。🏋️‍♀️</p><h2 id="8ca8" class="nn kv it bd kw no np dn la nq nr dp le lv ns nt lg lz nu nv li md nw nx lk ny bi translated">角形尖端💎</h2><p id="a4ad" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">如果父级有一个指令，则该父级的所有子级都可以在其Typescript类中注入该指令实例。</p><pre class="kj kk kl km gt nz mr oa ob aw oc bi"><span id="9f47" class="nn kv it mr b gy od oe l of og">&lt;!-- HTML --&gt;<br/>&lt;app-container appConnector&gt;<br/>  &lt;app-item id="Hello"&gt;&lt;/app-item&gt;<br/>  &lt;app-item id="2"&gt;&lt;/app-item&gt;<br/>  &lt;app-item id="3"&gt;&lt;/app-item&gt;<br/>&lt;/app-container&gt;</span><span id="02f1" class="nn kv it mr b gy oh oe l of og">/* TypeScript */<br/>export class ItemComponent {<br/>  constructor(public appConnector: ConnectorDirective) {<br/>   this.appConnector.eventEmitter.subscribe(...)<br/>  }<br/>}</span></pre><h1 id="6594" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">DOM消毒剂</h1><p id="b979" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">有很多关于学习<a class="ae mi" href="https://angular.io/api/platform-browser/DomSanitizer" rel="noopener ugc nofollow" target="_blank"> Angular的DOM Sanitizer </a>的文章和资源。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/4f145959c7287b37f708d2ef46c79481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*Vq_qNtDIOSmNZu-lWnZaHA.png"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated">不使用<code class="fe mo mp mq mr b">bypassSecurityTrustStyle</code></figcaption></figure><p id="f856" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">这是我对它的简短看法。如果我们锁定用户可以在哪里发送输入以及用户可以发送什么输入，那么可以认为绕过Angular的DOM杀毒器是“安全的”。🧼</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://stackblitz.com/edit/host-binding-and-css-grid?file=src%2Fapp%2Fcontainer%2Fcontainer.component.ts" rel="noopener ugc nofollow" target="_blank"> container.component.ts </a></figcaption></figure><p id="bdc3" class="pw-post-body-paragraph lm ln it lo b lp mj ju lr ls mk jx lu lv ml lx ly lz mm mb mc md mn mf mg mh im bi translated">我们<strong class="lo iu">允许用户更新CSS <code class="fe mo mp mq mr b">repeat()</code>函数中的第一个参数</strong>(where)。我们<strong class="lo iu">将用户的输入</strong>限制为按钮点击；我们控制点击产生的价值(什么)。🔐</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/648ad6fe1b06737d3d155c9d6c257b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/1*L3OQNJAQeEg-uQGnmd70Wg.gif"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://host-binding-and-css-grid.stackblitz.io" rel="noopener ugc nofollow" target="_blank">最终申请</a></figcaption></figure><h1 id="7bb0" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">结论</h1><ul class=""><li id="1aa8" class="ms mt it lo b lp lq ls lt lv oi lz oj md ok mh mx my mz na bi translated">角度<code class="fe mo mp mq mr b">:host</code>选择器使我们能够将组件视为css网格或css网格项目</li><li id="991d" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">Angular <code class="fe mo mp mq mr b">@HostBinding</code> Decorator允许我们访问和更新CSS类和样式</li><li id="e5d6" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">Angular清理对DOM的潜在危险更新。我们应该考虑当绕过这个功能时，我们允许用户更新的地方和T21。</li><li id="1435" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated">感谢阅读！🎉</li></ul><blockquote class="ol om on"><p id="9029" class="lm ln oo lo b lp mj ju lr ls mk jx lu op ml lx ly oq mm mb mc or mn mf mg mh im bi translated">☁️<a class="ae mi" href="https://flotes.app" rel="noopener ugc nofollow" target="_blank">flotes</a>——尝试演示，不需要登录。或者免费报名。Flotes是我记笔记和高效学习的方式，即使在我很忙的时候。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/8e468f6e74135bbbc2ecbfce7e2db2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wGqAj2R16w33dIiKDnHEUA.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk translated"><a class="ae mi" href="https://flotes.app" rel="noopener ugc nofollow" target="_blank">漂浮物</a></figcaption></figure><h1 id="de32" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">资源</h1><ul class=""><li id="9780" class="ms mt it lo b lp lq ls lt lv oi lz oj md ok mh mx my mz na bi translated"><a class="ae mi" href="https://angular.io/api/platform-browser/DomSanitizer" rel="noopener ugc nofollow" target="_blank"> DOM消毒剂</a></li><li id="315e" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><a class="ae mi" href="https://developer.mozilla.org/en-US/docs/Web/CSS/grid" rel="noopener ugc nofollow" target="_blank"> CSS网格</a></li><li id="f099" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><a class="ae mi" href="https://angular.io/api/core/HostBinding" rel="noopener ugc nofollow" target="_blank">主机绑定</a></li><li id="73df" class="ms mt it lo b lp nb ls nc lv nd lz ne md nf mh mx my mz na bi translated"><a class="ae mi" href="https://caniuse.com/#feat=css-grid" rel="noopener ugc nofollow" target="_blank">你的网络浏览器能使用CSS-Grid吗？</a></li></ul></div></div>    
</body>
</html>