<html>
<head>
<title>How to create a template in .NET for a C# application and what NuGet is for</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在中创建模板？NET和NuGet的用途</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-a-template-in-net-for-a-c-application-and-what-nuget-is-for-e5d4fc03c487?source=collection_archive---------0-----------------------#2021-04-13">https://itnext.io/how-to-create-a-template-in-net-for-a-c-application-and-what-nuget-is-for-e5d4fc03c487?source=collection_archive---------0-----------------------#2021-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="426f" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">计划</strong></h1><p id="6b81" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">1.什么是中的应用程序模板？网<br/> 2。NuGet是给<br/> 3的。创建NuGet应用程序模板<br/> 4。如何发布NuGet模板</p><h1 id="ac93" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">你需要这个做什么</h1><p id="4a6c" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">1.了解这款工具并拓宽您的技能视野<br/> 2。将有用且经常需要的功能提取到模板中<br/> 3。要了解如何从命令行使用NuGet</p><h1 id="0d4b" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是中的应用程序模板？网？</h1><p id="3529" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">当您通过Visual Studio安装程序安装Visual Studio或修改现有安装时，您选择的是包含预定义模板的工作负荷和组件。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/1b2f74c9d21b9085c75b8b7c0da86b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfkg1O8sKivXFMGrO_4qLQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">安装或修改visual studio窗口</figcaption></figure><p id="bada" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">所以，在Visual Studio中，当你需要创建一个应用程序时，你使用的是别人准备的模板。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi me"><img src="../Images/5b86c3d8a0674ff2b1c86d9a10c615d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*flrf8w3P5HZrW7fQUngoXg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">visual studio中的模板</figcaption></figure><p id="2825" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">此外，您可以通过控制台查看模板，为此您需要打开CMD或任何其他命令行并键入<strong class="kn ir"> <em class="mf"> dotnet new </em> </strong></p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mg"><img src="../Images/ef6b6bb50136e6ac10bec2995cad04f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0TKnCAPz0X1vR5ub4YosA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated"><strong class="bd jp"> dotnet new </strong> —模板列表</figcaption></figure><p id="514a" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">这里您将看到已安装模板的列表，这些模板可能与Visual Studio中的列表不一致，因为它们是以不同的方式创建和存储的。</p><h1 id="69c4" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">NuGet是干什么用的</h1><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mh"><img src="../Images/279485d53caec511ff2dbf75ff5b15ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNoA39K5ok46sa1H-nv7GA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">管理NuGet包窗口</figcaption></figure><p id="d279" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">NuGet是一个包管理器，默认情况下与Visual Studio一起安装。它用于搜索<em class="mf"> (3A) </em>并将依赖项添加到您的项目中，例如其他人创建并上传到NuGet服务器的库和框架。</p><p id="db1d" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">您可以通过右键单击项目或解决方案<em class="mf"> (1) </em>并选择Manage NuGet Packages<em class="mf">(2)</em>来访问这个视图。</p><p id="0519" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">默认情况下，NuGet服务器是nuget.org的，但是由于项目需要，您的团队可能有自己的NuGet服务器，可以通过设置<em class="mf"> (3B)、</em>引用它，这样您和您的队友将可以访问附加的NuGet源服务器。</p><p id="c096" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">由于VS的不同版本，nuget.exe文件可能存储在不同的文件夹中，所以要通过命令行与它交互，你可能应该从nuget.org<a class="ae mi" href="https://www.nuget.org/downloads" rel="noopener ugc nofollow" target="_blank">再下载一次。</a></p><h1 id="ceb0" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">创建NuGet应用程序模板</h1><p id="249c" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">首先，您需要创建一个应用程序，您想从这个应用程序中创建一个模板。这可以是一个控制台应用程序，web应用程序，WPF应用程序，测试库或任何其他应用程序，你也可以在模板中有多个应用程序。</p><p id="89bf" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">为了方便和易于复制，我将使用一个控制台应用程序作为模板的示例。你可以在这个回购<a class="ae mi" href="https://github.com/vit-h/simple-NuGet-template" rel="noopener ugc nofollow" target="_blank">https://github.com/vit-h/simple-NuGet-template</a>中找到现成的模板，请参考那里的代码示例中的中断线引号。</p><ol class=""><li id="8fec" class="mj mk iq kn b ko lz ks ma kw ml la mm le mn li mo mp mq mr bi translated">创建应用程序。例如，使用SuperApp这个名称，并将其放在文件夹C:\Temp中</li><li id="1ea5" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">相应地修改Main方法，以便稍后检查替换功能(控制台输出包含应用程序名称，该名称将被模板用户提供的新名称替换)</li></ol><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="07ec" class="nc jo iq my b gy nd ne l nf ng">using System;</span><span id="71db" class="nc jo iq my b gy nh ne l nf ng">namespace <strong class="my ir">SuperApp</strong><br/>{<br/> class Program<br/> {<br/>  static void Main(string[] args)<br/>  {<br/>   Console.WriteLine(“Hello <strong class="my ir">SuperApp</strong>!”);<br/>  }<br/> }<br/>}</span></pre><p id="8ae9" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">3.创建文件夹并在其中创建一个文件</p><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="d6a0" class="nc jo iq my b gy nd ne l nf ng">C:\Temp\SuperApp\.template.config\template.json</span></pre><p id="044a" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">4.将此内容添加到template.json文件中(由于介质上的格式问题，请参考<a class="ae mi" href="https://github.com/vit-h/simple-NuGet-template" rel="noopener ugc nofollow" target="_blank">https://github.com/vit-h/simple-NuGet-template</a></p><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="cc46" class="nc jo iq my b gy nd ne l nf ng">{<br/> “$schema”: “<a class="ae mi" href="http://json.schemastore.org/template" rel="noopener ugc nofollow" target="_blank">http://json.schemastore.org/template</a>", // schema which can be placed to schema validation to get the intellicence for the file<br/> “author”: “Vitalii Honcharuk”, // you can replace with your name<br/> “classifications”: [ “Common”, “Console”, “SuperApp” ], // used to add more info to the console output when checking installed templates<br/> “identity”: “SuperApp.ConsoleTemplate.CSharp”, // unique name<br/> “name”: “Super hello world app”, // full name for the template<br/> “shortName”: “shwa”, // short name for the template to simplify usage<br/> “tags”: {<br/> “language”: “C#”<br/> },<br/> “sourceName”: “SuperApp”, // value which will be replaced across the whole template to the new name provided by the user<br/> “preferNameDirectory”: “true”<br/>}</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="cb14" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">5.创建文件夹并在其中创建一个文件</p><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="2274" class="nc jo iq my b gy nd ne l nf ng">C:\Temp\SuperApp\SuperApp.ConsoleTemplate.CSharp.nuspec</span></pre><p id="9027" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">6.将下面的代码添加到。nuspec文件(由于介质上的格式化问题，请参考https://github.com/vit-h/simple-NuGet-template<a class="ae mi" href="https://github.com/vit-h/simple-NuGet-template" rel="noopener ugc nofollow" target="_blank"/></p><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="01f3" class="nc jo iq my b gy nd ne l nf ng">&lt;?xml version=”1.0" encoding=”utf-8"?&gt;<br/>&lt;package xmlns=”<a class="ae mi" href="http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd" rel="noopener ugc nofollow" target="_blank">http://schemas.microsoft.com/packaging/2012/06/nuspec.xsd</a>"&gt;<br/> &lt;metadata&gt;<br/> &lt;id&gt;SuperApp.ConsoleTemplate.CSharp&lt;/id&gt;<br/> &lt;version&gt;0.0.1&lt;/version&gt;<br/> &lt;description&gt;<br/> Creates the Awesome console app.<br/> &lt;/description&gt;<br/> &lt;authors&gt;Vitalii Honcharuk&lt;/authors&gt;<br/> &lt;packageTypes&gt;<br/> &lt;packageType name=”Template” /&gt;<br/> &lt;/packageTypes&gt;<br/> &lt;/metadata&gt;<br/> &lt;files&gt;<br/> &lt;file src=”.\”<br/> exclude=”**\bin;**\obj;**\.vs\**”<br/> target=”src” /&gt;<br/> &lt;/files&gt;<br/>&lt;/package&gt;<br/></span></pre><p id="f5c1" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">a)在这种情况下，id应该与SuperApp中的文件名相同。ConsoleTemplate.CSharp <br/> b)可以更改作者和版本<br/> c) packageType name="Template "表示NuGet包是一个模板<br/> d)文件src，exclude和target用于过滤掉冗余文件</p><p id="078e" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">7.打开命令行并执行以下命令:</p><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="0531" class="nc jo iq my b gy nd ne l nf ng">C:\nuget.exe pack C:\Temp\SuperApp\SuperApp.ConsoleTemplate.CSharp.nuspec -OutputDirectory C:\Temp</span><span id="6b58" class="nc jo iq my b gy nh ne l nf ng">dotnet new --install C:\Temp\SuperApp.ConsoleTemplate.CSharp.0.0.1.nupkg</span><span id="92d2" class="nc jo iq my b gy nh ne l nf ng">dotnet new shwa -o C:\Temp\MyApp</span><span id="089d" class="nc jo iq my b gy nh ne l nf ng">cd C:\Temp\MyApp</span><span id="ae93" class="nc jo iq my b gy nh ne l nf ng">dotnet run</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi np"><img src="../Images/38ff913b567415fe70bff0a85964546a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZBmin-Nxu0bQy8Ftdg2nZA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">模板创建命令行第1部分</figcaption></figure><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/655bfd546687ed96fb6495209ac7a3ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*lGovuqNWXkUpG4D500Wu7g.png"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">模板创建命令行第2部分</figcaption></figure><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/29a9f011da17a77de3067423d374320c.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*bX5uqVYYNjz84U1p31dAXg.png"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">创建的应用程序</figcaption></figure><p id="aaf0" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">那么，我们用这些命令做了什么呢？</p><ol class=""><li id="b854" class="mj mk iq kn b ko lz ks ma kw ml la mm le mn li mo mp mq mr bi translated">我们按照。nuspec文件</li><li id="db35" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">然后我们将模板从NuGet包安装到dotnet，我们需要检查它的工作情况</li><li id="f406" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">我们根据新安装的模板创建了一个应用程序</li><li id="b509" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">然后我们运行它来检查它是否工作</li><li id="0389" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">最后，我们看到控制台输出，文件夹和应用程序被重命名为我们在命令中提供的新名称</li></ol><h1 id="24a4" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">如何发布NuGet模板</h1><p id="aec4" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">一旦我们确认这个包在本地正常工作，我们就发布它。</p><p id="b6d8" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">为此，你需要访问<a class="ae mi" href="https://www.nuget.org/packages/manage/upload" rel="noopener ugc nofollow" target="_blank">nuget.org</a>，登录并进入上传页面。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ns"><img src="../Images/7c4f8a5c702a0023040c45b9f33b33e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XAYMsyVmgJOIAyJ40f_fug.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">nuget.org上传</figcaption></figure><p id="71f3" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">选择要上传的NuGet文件后，您将会看到我们在。nuspec文件。</p><p id="011c" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">要使模板私有，您可以取消选中<strong class="kn ir">包可见性</strong>复选框。</p><p id="28c0" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">然后，您可以提供有关该包的更多详细信息，并按提交。<br/>您的包裹将在大约2天内被审核并发布。之后，您将能够管理和更新它。</p><p id="d7fc" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">一旦软件包发布，世界上的任何人都可以使用如下命令安装您的模板:</p><pre class="lk ll lm ln gt mx my mz na aw nb bi"><span id="ab0a" class="nc jo iq my b gy nd ne l nf ng"><em class="mf">dotnet new --install SuperApp.ConsoleTemplate.CSharp::0.0.1</em></span></pre><p id="f7ec" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">我希望现在你能够把有用的和经常使用的功能放到模板中！</p><p id="0fdb" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">要了解更多信息:</p><ol class=""><li id="3223" class="mj mk iq kn b ko lz ks ma kw ml la mm le mn li mo mp mq mr bi translated"><a class="ae mi" href="https://github.com/vit-h/simple-NuGet-template" rel="noopener ugc nofollow" target="_blank">https://github.com/vit-h/simple-NuGet-template</a></li><li id="578c" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated"><a class="ae mi" href="https://docs.microsoft.com/en-us/visualstudio/ide/creating-project-and-item-templates?view=vs-2019" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/visual studio/ide/creating-project-and-item-templates？view=vs-2019 </a></li><li id="add9" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">https://github.com/dotnet/dotnet-template-samples<a class="ae mi" href="https://github.com/dotnet/dotnet-template-samples" rel="noopener ugc nofollow" target="_blank"/></li><li id="184b" class="mj mk iq kn b ko ms ks mt kw mu la mv le mw li mo mp mq mr bi translated">【https://www.youtube.com/watch?v=GDNcxU0_OuE T4】</li></ol><p id="115e" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">我制作的关于俄语的视频:</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="nt nu l"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">我制作的关于俄语的视频</figcaption></figure></div></div>    
</body>
</html>