<html>
<head>
<title>Azure explained deep enough: Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure解释的够深刻:Azure DevOps</h1>
<blockquote>原文：<a href="https://itnext.io/azure-explained-deep-enough-azure-devops-210629b5480e?source=collection_archive---------6-----------------------#2021-07-26">https://itnext.io/azure-explained-deep-enough-azure-devops-210629b5480e?source=collection_archive---------6-----------------------#2021-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a136fddefa632241f32f8e5e7dde077f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJ2nmXjd-8hVOVlUsvPTqw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">图片由来自<a class="ae jd" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3148393" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae jd" href="https://pixabay.com/users/pcb-tech-2044000/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3148393" rel="noopener ugc nofollow" target="_blank">德克·伍特斯</a>拍摄</figcaption></figure><div class=""/><p id="cf33" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关注CI/CD管道</p><h2 id="d14b" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">介绍</h2><p id="a308" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这是Azure迷你系列的第四部<strong class="kf jh"> Azure解释的够深刻了</strong></p><p id="b0c3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/azure-explained-deep-enough-learn-and-get-certified-95c928b0e16c"> Part1: Azure解释得够深刻:学习并获得认证</a></p><p id="164d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae jd" href="https://medium.com/codex/azure-explained-deep-enough-containers-a516af1caab1" rel="noopener"> Part2: Azure解释得够深刻:容器</a></p><p id="d5e8" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae jd" href="https://piotrzan.medium.com/azure-explained-deep-enough-azure-paas-321a0f16bd57" rel="noopener"> Part3: Azure解释得够深刻:Azure PaaS </a></p><p id="7d33" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第四部分:Azure解释得够深刻:Azure DevOps </p><p id="e868" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">In this blog, we are going to look into Azure DevOps, CI/CD pipelines and Infrastructure as Code.</p><p id="711a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Before we take a closer look at Azure DevOps, let’s try to understand first what is <strong class="kf jh"> DevOps </strong></p><p id="e452" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">按照微软的说法，是:</p><blockquote class="lz ma mb"><p id="0040" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated"><em class="jg">devo PS是开发(Dev)和运营(Ops)的综合体，是人员、流程和技术的结合，不断为客户提供价值。</em></p><p id="5024" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated"><em class="jg">devo PS对团队意味着什么？DevOps支持以前孤立的角色(开发、IT运营、质量工程和安全)进行协调和合作，以生产更好、更可靠的产品。通过采用DevOps文化以及DevOps实践和工具，团队能够更好地响应客户需求，增强对他们构建的应用程序的信心，并更快地实现业务目标。</em></p></blockquote><p id="4a10" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我喜欢用这个简短的描述:</p><p id="07f2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DevOps是一种确保<strong class="kf jh">持续的、自动化的、不间断的变更流程的方法</strong>。对于软件来说，这种变化的趋势当然是新的特性和产品。</p><h2 id="e6aa" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">先看Azure DevOps</h2><p id="67b4" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">Azure DevOps是一套协作开发工具。Azure DevOps的功能与GitHub、GitLab、Bitbucket等很多类似。事实上，微软<a class="ae jd" href="https://news.microsoft.com/2018/06/04/microsoft-to-acquire-github-for-7-5-billion/" rel="noopener ugc nofollow" target="_blank">在2018年收购了Github </a>，我推测Azure DevOps和Github的路线图将随着时间的推移而靠拢。</p><p id="bcf6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它使用<em class="mc">组织</em>作为顶级分组级别。您可以使用一个组织来分离业务单位、部门或不同的物理办公室，这由您决定。</p><p id="1fc3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个组织(自动创建一个默认组织)都附带以下内容:</p><blockquote class="lz ma mb"><p id="8f8a" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated"><em class="jg">每个组织都有自己的免费服务等级(每种服务类型最多五个用户),如下所示。您可以使用所有服务，或者选择您需要的服务来补充您现有的工作流程。</em></p><p id="65a3" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">- Azure Pipelines:一个托管作业，每月1，800分钟用于CI/CD和一个自托管作业</p><p id="e01c" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">- Azure板:工作项跟踪和看板板</p><p id="bd61" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">- Azure Repos:无限私人Git repos</p><p id="0981" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">- Azure工件:包管理</p><p id="abcd" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">-无限的利益相关者</p><p id="a17a" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">-五个Azure DevOps用户(基本)</p><p id="cee8" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">-免费的Microsoft托管CI/CD层(一个并发作业，每月多达30小时)2 GiB Azure工件存储</p><p id="3881" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated">-一个自托管CI/CD并发作业</p></blockquote><p id="a3cb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个组织可以有一个或多个<em class="mc">项目</em>。组织仅用于分组和计费目的，项目是从用户角度与Azure DevOps进行所有交互的地方。</p><p id="c9e4" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">部署后，Azure DevOps项目可以包含以下组件。</p><figure class="mh mi mj mk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mg"><img src="../Images/7ba917dc01f8e8871814ea2ed500b9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zxCYUVsdAhk9_LsQFzdXMQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">【https://azure.microsoft.com/en-us/services/devops/#overview T4】</figcaption></figure><p id="6afb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有关所有服务的深入审查，请参考官方<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/user-guide/services?view=azure-devops" rel="noopener ugc nofollow" target="_blank"> Azure DevOps文档</a>。</p><h2 id="3b5b" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">注册Azure DevOps</h2><p id="1abd" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">有两种方法可以为Azure DevOps唱赞歌。今天我们要用GitHub集成。请按照这里概述的步骤<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/user-guide/sign-up-invite-teammates?toc=%2Fazure%2Fdevops%2Fget-started%2Ftoc.json&amp;bc=%2Fazure%2Fdevops%2Fget-started%2Fbreadcrumb%2Ftoc.json&amp;view=azure-devops#sign-up-with-a-github-account" rel="noopener ugc nofollow" target="_blank">设置Azure DevOps服务。</a></p><h2 id="ec0b" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">CI/CD</h2><p id="4a8f" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在所有的Azure DevOps服务中，我想更多地关注CI/CD流程。CI/CD代表<em class="mc">持续集成/持续部署/交付</em>。从一个非常高的角度来看，CI/CD看起来像这样:</p><figure class="mh mi mj mk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/44f86d8bae2f1ff14031cb33a76815ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KR4wJ27eBhkibd-e"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">来源:作者</figcaption></figure><p id="8b83" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们仔细看看图上发生了什么，并将其映射到Azure DevOps组件。</p><p id="9ab2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">图上没有描述的部分是如何将工作分配给开发人员的，这里是SCRUM过程中的一个常见场景。</p><p id="46e3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Azure中，DevOps工作来自从PBIs提炼的<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/boards/work-items/agile-glossary?view=azure-devops#user-story" rel="noopener ugc nofollow" target="_blank">用户故事</a>，PBIs代表<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/boards/work-items/agile-glossary?view=azure-devops#product-backlog-item" rel="noopener ugc nofollow" target="_blank">产品积压项目</a>，所以让我们假设这里也是这种情况。</p><p id="4193" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦开发人员开始开发用户故事，他们通常会创建一个单独的分支，通常称为<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/repos/git/git-branching-guidance?view=azure-devops#use-feature-branches-for-your-work" rel="noopener ugc nofollow" target="_blank">特性分支</a>，并将它与用户故事联系起来。</p><p id="0b29" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从这一点来看，该图提供了一般CI/CD管道的高级概述。</p><p id="41ad" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这当然是一个非常简单的管道，在现实生活中，管道通常要复杂得多。下面是一个更成熟的管道示例:</p><figure class="mh mi mj mk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mm"><img src="../Images/4ff23299e33755bcaf92263c4afaa35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HfEILlu6g9XQVvM1Z6YE0Q.png"/></div></div></figure><h2 id="5324" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">管道作为代码</h2><p id="420c" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">传统上，Azure DevOps及其前身Team Foundation Service (TFS)中的管道是通过GUI创建和管理的。这是一个“基于点击”的过程的主要原因之一是，开发和运营团队是独立的孤岛。</p><p id="9fc6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae jd" href="https://devopedia.org/devops" rel="noopener ugc nofollow" target="_blank"> DevOps </a>运动和<a class="ae jd" href="https://devopedia.org/shift-left" rel="noopener ugc nofollow" target="_blank"> Shift Left </a>哲学的开始要求发明描述构建、部署和基础设施需求的新方法。开发人员应该被充分授权来设计和执行管道。基于这些要求，引入了代码为的<a class="ae jd" href="https://www.jenkins.io/doc/book/pipeline-as-code/" rel="noopener ugc nofollow" target="_blank">管道。</a></p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="9199" class="mu lc jg bd ld mv mw mx lg my mz na lj nb nc nd lm ne nf ng lp nh ni nj ls nk bi translated">演示</h1><p id="02c1" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">出于演示目的，我们将把一个示例静态网页部署到一个启用了静态网站托管选项的Azure存储帐户。</p><h2 id="9b13" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创建存储帐户</h2><p id="66c6" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果您想跟随演示，请遵循以下步骤:</p><p id="f1b3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">登录Azure门户，选择云壳。如果你是第一次使用新账号登录，请按照本教程<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/cloud-shell/overview" rel="noopener ugc nofollow" target="_blank">激活云壳。一旦进入云shell，确保选择bash环境并遵循下面的步骤。</a></p><pre class="mh mi mj mk gt nl nm nn no aw np bi"><span id="c7ce" class="lb lc jg nm b gy nq nr l ns nt"><em class="mc"># Clone the exercise repository</em><br/>git clone https://github.com/ilearnazuretoday/azure-devops.git</span><span id="f33b" class="lb lc jg nm b gy nu nr l ns nt"><em class="mc"># Switch to right directory</em><br/>cd azure-devops/terraform</span><span id="6f52" class="lb lc jg nm b gy nu nr l ns nt"><em class="mc"># Initialize terraform with Azure Provider</em><br/>terraform init</span><span id="b4cd" class="lb lc jg nm b gy nu nr l ns nt"><em class="mc"># Validate terraform scripts</em><br/>terraform plan</span><span id="e00d" class="lb lc jg nm b gy nu nr l ns nt"><em class="mc"># Create infrastructure, confirm with "yes"</em><br/>terraform apply</span></pre><p id="af9e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出应该类似于以下内容:</p><figure class="mh mi mj mk gt is gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/4de61300c15ebd6e5bde40bec5b8ab86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*GHFRYEtF3Y7EQdN5R7s1MQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">地形输出</figcaption></figure><h2 id="7275" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创建服务连接以允许部署</h2><p id="3d6f" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">为了能够从我们的Azure DevOps服务部署到我们的Azure订阅，我们需要创建一个服务连接，以便在项目设置中启用它。</p><p id="9152" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此操作将创建一个代表我们的<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals" rel="noopener ugc nofollow" target="_blank"> <em class="mc">服务负责人</em> </a>帐户来建立连接。</p><div class="mh mi mj mk gt ab cb"><figure class="nw is nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/b33fd28a436b8b7b85c0ea6c9aebaf1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*70KZ1mjqYV0ukFXVOKPK8A.png"/></div></figure><figure class="nw is oc ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/87ac20fecee647371f6cee235a93522c.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*2ZO4Hmwb93mhI1MfZNBCwg.png"/></div></figure><figure class="nw is od ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/7cd71fda2a507c03c362e287ded3e9cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*Gww0byJsav4BFTAszjIbMQ.png"/></div></figure></div><blockquote class="lz ma mb"><p id="a1fb" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated"><em class="jg">好的做法是缩小权限范围！</em></p></blockquote><p id="2c61" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记下您的服务连接名称，管道设置将需要它。</p><h1 id="9687" class="mu lc jg bd ld mv oe mx lg my of na lj nb og nd lm ne oh ng lp nh oi nj ls nk bi translated">部署示例静态网页</h1><p id="452a" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们将直接从GitHub部署一个示例应用程序，但出于演示的目的，我们将首先将存储库克隆到我们的Azure DevOps中。</p><p id="adff" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Azure DevOps中很容易做到。点击存储库并使用<a class="ae jd" href="https://github.com/Piotr1215/pwa-sample.git" rel="noopener ugc nofollow" target="_blank">这个链接</a>来导入。</p><figure class="mh mi mj mk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/cebdac86f532742027e3d129ff20177c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pCzBDyGMF6kPhj2EmeLAcQ.png"/></div></div></figure><p id="71a0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦存储库被导入Azure DevOps，我们就可以设置CI/CD管道。CI/CD管道YAML文件已经在存储库中，但是请记住调整更改</p><ul class=""><li id="3445" class="ok ol jg kf b kg kh kk kl ko om ks on kw oo la op oq or os bi translated"><strong class="kf jh"> azureSubscription </strong>:上一步中的<em class="mc"> serviceConnectionName</em></li><li id="3562" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated"><strong class="kf jh">存储</strong> : <em class="mc">要从terraform输出部署到的存储帐户的名称</em></li></ul><p id="334c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是设置初始构建的步骤:</p><figure class="mh mi mj mk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oy"><img src="../Images/41b40289f12f7688274d1b8907b313a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u_DvqWTgKXPtRFleoRU1eg.png"/></div></div></figure><p id="5a77" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看管道文件，看看它包含什么。</p><figure class="mh mi mj mk gt is"><div class="bz fp l di"><div class="oz pa l"/></div></figure><p id="fd82" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">管道文件描述了构建和部署我们的软件需要按顺序执行的步骤:</p><ul class=""><li id="6fa6" class="ok ol jg kf b kg kh kk kl ko om ks on kw oo la op oq or os bi translated">选择触发器(可以是分支、标记等)</li><li id="8f25" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">确保排除不想触发管道的文件</li><li id="5e20" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">为生成代理选择虚拟机映像</li><li id="5f12" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">执行构建和部署步骤(特定于您要部署的内容)</li><li id="ad2d" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">将YAML文件签入到名为<code class="fe pb pc pd nm b">azure-pipelines.yaml</code>的存储库中</li><li id="596d" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">触发代码中满足触发条件的更改，并将更改推送到远程</li><li id="e54b" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">构建应该自动触发</li><li id="fa3d" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">在管道-&gt;管道菜单下，您可以实时观察管道日志</li></ul><figure class="mh mi mj mk gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pe"><img src="../Images/8bd4bff20efa347fb7ee9bd369ce2ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOaoeMBOmqsbsh5HShqu7Q.png"/></div></div></figure><blockquote class="lz ma mb"><p id="9fe2" class="kd ke mc kf b kg kh ki kj kk kl km kn md kp kq kr me kt ku kv mf kx ky kz la ij bi translated"><em class="jg">如果您有兴趣了解更多关于PWA web技术的信息，请查看</em> <a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/5-static-websites-deployment-options-d0aac1570331"> <em class="jg">部署静态网站的5个选项</em> </a></p></blockquote><p id="24af" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能想知道这些任务来自哪里？比如AzureFileCopy或者DotNetCoreCLI等等？这些任务大多是类型脚本程序或PowerShell脚本，你可以在GitHub 上看到它们的<a class="ae jd" href="https://github.com/microsoft/azure-pipelines-tasks/tree/master/Tasks" rel="noopener ugc nofollow" target="_blank">源代码！</a></p><p id="6c2e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任务是通用的和可重用的，你也可以自己写。</p><p id="1266" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一切顺利，导航到terraform输出的URL，您应该会看到一个静态页面部署完毕！尝试CI/CD流程。</p><ul class=""><li id="b997" class="ok ol jg kf b kg kh kk kl ko om ks on kw oo la op oq or os bi translated">尝试更改任何文件(除了<a class="ae jd" href="http://README.md" rel="noopener ugc nofollow" target="_blank"> README.md </a>)，管道触发了吗？</li><li id="2972" class="ok ol jg kf b kg ot kk ou ko ov ks ow kw ox la op oq or os bi translated">如果出现错误，dotnet无法构建工件，会发生什么情况？</li></ul><h1 id="00bb" class="mu lc jg bd ld mv oe mx lg my of na lj nb og nd lm ne oh ng lp nh oi nj ls nk bi translated">摧毁基础设施</h1><p id="b873" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果你跟随演示，这一步<strong class="kf jh">很重要</strong>。为了避免不必要的费用，让我们删除资源，这是很容易做到这一点与terraform。</p><pre class="mh mi mj mk gt nl nm nn no aw np bi"><span id="7907" class="lb lc jg nm b gy nq nr l ns nt"><em class="mc"># Destroy all resources, confirm with yes</em><br/>terraform destroy</span></pre><h1 id="35cd" class="mu lc jg bd ld mv oe mx lg my of na lj nb og nd lm ne oh ng lp nh oi nj ls nk bi translated">结论</h1><p id="7158" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们已经覆盖了很多领域，一些概念可能会很新或者很混乱，尤其是如果你是Azure的新手。请不要气馁，而是试着一步一步地复习所有的东西，在你最不熟悉的领域加深你的知识。我试图重新创建一个接近真实流程的场景，这就是为什么有IaC和部署与核心Azure DevOps概念混合在一起。</p><p id="5ea2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以查看<a class="ae jd" href="https://medium.com/@piotrzan" rel="noopener">我的其他博客</a>来了解更多。</p></div></div>    
</body>
</html>