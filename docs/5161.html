<html>
<head>
<title>How Site Properties Work on Outsystems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">站点属性如何在外部系统上工作</h1>
<blockquote>原文：<a href="https://itnext.io/how-site-properties-work-on-outsystems-8288cde70963?source=collection_archive---------3-----------------------#2020-12-28">https://itnext.io/how-site-properties-work-on-outsystems-8288cde70963?source=collection_archive---------3-----------------------#2020-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="110d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于外部系统上的站点属性，您需要了解什么</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/842ef0c81c60e8426f752ea03766eb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-CNAkU0kakiGYbw0"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">内特·格兰特在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d76a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Site Property是Outsystems Platform的一个特性，主要目标是存储数据而不做太多更改。大部分时间它们被用来存储可配置变量，通常是API键、客户机Id、客户机秘密值等等…我们可以将它们用于构建我们的应用程序所需的其他类型的配置。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="29f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从站点属性的简单定义开始。</p><blockquote class="lz ma mb"><p id="d5d1" class="kw kx mc ky b kz la jr lb lc ld ju le md lg lh li me lk ll lm mf lo lp lq lr ij bi translated">站点属性是存储原始数据类型的全局变量，它的值不会经常改变。</p></blockquote><p id="472d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不仅仅是给你一个站点属性的定义，我还想告诉你如何使用它们，它们存储在哪里，以及改变它们的影响。</p><p id="7fb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">跟着我。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="3374" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记住这个定义，让我们想象一个假设的场景，它会给你一个大画面。对于这个例子，我们创建一个计时器来处理一系列事务，我们将使用一个站点属性来设置要处理的记录数，另一个属性来控制计时器的软超时。</p><p id="920d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mc">该场景用于避免定时器意外超时。你可以在这个</em> <a class="ae kv" href="https://www.outsystems.com/forums/discussion/55884/timers-default-timeout" rel="noopener ugc nofollow" target="_blank"> <em class="mc">链接</em> </a> <em class="mc">上查看更多。</em></p><p id="11dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一张图是关于已经创建并准备好处理事务的计时器。您可以在评论中看到创建和使用的两个站点属性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/e97ded695644515cc6031b911538d8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9X04LlW4dNQKYoqvN-7BYQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">站点属性和使用它们的计时器</figcaption></figure><p id="a288" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，考虑到这两个网站的性质，让我们进入它。</p><h1 id="400e" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">它们存放在哪里？</h1><p id="8b56" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">我们的站点属性存储在Outsystems数据库中。我们可以在Service Studio上检查这些实体并引用它们，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/6cd184a9e85262f5646e2b67073b61ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Lv-BBVKubvDjYU6BEbPLA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">参考场地属性实体</figcaption></figure><p id="a2e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如我们所看到的，Outsystems使用一些常规实体来存储站点属性信息。</p><p id="4eeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">站点属性记录存储在实体<strong class="ky ir"> Site_Property_Definition，</strong>中，我们将在其中找到名称、描述、数据类型、默认值等。为了找到站点属性的当前值，我们可以检查另外两个表，<strong class="ky ir"> Site_Property_Shared </strong>或<strong class="ky ir"> Site_Property。</strong></p><p id="5181" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个实体，<strong class="ky ir"> Site_Property_Shared </strong>是外部系统存储非多租户站点属性的实体，这些属性仅在创建它的模块上可见，并且<strong class="ky ir">不，您不能将站点属性设置为Public。</strong></p><p id="0564" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二个实体<strong class="ky ir"> Site_Property </strong>是存储多租户站点属性的实体。该平台将为我们的每个租户创建这个站点属性，我们可以按租户而不是按模块配置它，这是最常用的方式。</p><p id="639a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这两个实体中，<strong class="ky ir"> Site_Property </strong>和<strong class="ky ir"> Site_Property_Shared </strong>我们可以看到站点属性的有效值。</p><p id="5770" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了给你一个例子，我将向你展示一个直接来自Service Studio的查询，显示来自我们的定时器的值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/6d0053908614feb86d078829398d99d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xj0SQTSIlsWNBIYiP4Q8iA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">获取站点属性值的查询</figcaption></figure><p id="bc42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我们通过站点属性名称进行过滤来获得这些结果。该过滤器是:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="6f59" class="nl mi iq nh b gy nm nn l no np">Site_Property_Definition.Name = "TransactionSoftTimeout" or Site_Property_Definition.Name = "TransactionMaxRecords"</span></pre><h1 id="7aed" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">幕后发生了什么</h1><p id="0abf" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">由于站点属性在数据库中，Outsystems所做的是在我们第一次访问后创建一种方法将它们放入缓存中。想象一下这个场景:</p><p id="f025" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在发布我们的模块来处理事务之后，模块缓存失效了，我们可以在<a class="ae kv" href="https://www.outsystems.com/help/servicestudio/8.0/Language_Reference/System_Actions_and_Functions/ESpaceInvalidateCache_Action.htm" rel="noopener ugc nofollow" target="_blank"> Outsystems文档</a>中看到这一点。所以我们第一次使用site属性，在本例中，<strong class="ky ir"> Site。MaxRecordsToProcess</strong>out systems将对实体进行查询，以获取站点属性的当前值，并将其放入缓存中，下次我们访问该站点属性时，该值将在缓存中，平台不需要再次进行查询来获取该值。</p><p id="1bbd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们在服务中心发布了模块或更改了站点属性值，缓存就会失效，然后重复这个过程。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6eed" class="mh mi iq bd mj mk nq mm mn mo nr mq mr jw ns jx mt jz nt ka mv kc nu kd mx my bi translated">如何跨模块共享站点属性</h1><p id="dfe9" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">在本文中，我提到站点属性不能是公共的。这是当我们需要在几个模块中使用站点属性时出现的问题，例如，如果我想使用我们的站点属性<strong class="ky ir"> Site。其他模块中的MaxRecordsToProcess </strong>。</p><p id="036d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这种情况，以及许多类似的情况，方法是创建一个操作来返回站点属性值并将其公开。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/47665678ffb72abc1ee02f791e158857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6WNWkKT_08f3Fm16MHAp_w.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">跨模块公开站点属性的公共操作示例</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="5dbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑到我们读到的关于站点属性的所有内容，需要考虑的最重要的部分是:<strong class="ky ir">不要以编程方式更改</strong>站点属性，并且要记住，每次您在服务中心更改一个或多个站点属性时，该模块的缓存都将失效并再次重新加载。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="ad14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想了解我更多吗？查看<a class="ae kv" href="https://tiagoagostinho.com" rel="noopener ugc nofollow" target="_blank">网站</a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="39f2" class="nl mi iq nh b gy nm nn l no np">References:<br/>1.<a class="ae kv" href="https://www.outsystems.com/forums/discussion/11484/how-do-site-properties-work-under-the-hood/" rel="noopener ugc nofollow" target="_blank">https://www.outsystems.com/forums/discussion/11484/how-do-site-properties-work-under-the-hood/</a></span><span id="11c3" class="nl mi iq nh b gy nw nn l no np">2.<a class="ae kv" href="https://success.outsystems.com/Documentation/11/Reference/OutSystems_Language/Data/Handling_Data/Site_Property" rel="noopener ugc nofollow" target="_blank">https://success.outsystems.com/Documentation/11/Reference/OutSystems_Language/Data/Handling_Data/Site_Property</a></span><span id="8c22" class="nl mi iq nh b gy nw nn l no np">3.<a class="ae kv" href="https://www.outsystems.com/help/servicestudio/8.0/Language_Reference/About_Site_Properties.htm" rel="noopener ugc nofollow" target="_blank">https://www.outsystems.com/help/servicestudio/8.0/Language_Reference/About_Site_Properties.htm</a></span><span id="4e81" class="nl mi iq nh b gy nw nn l no np">4.<a class="ae kv" href="https://www.outsystems.com/help/servicestudio/8.0/Language_Reference/System_Actions_and_Functions/ESpaceInvalidateCache_Action.htm" rel="noopener ugc nofollow" target="_blank">https://www.outsystems.com/help/servicestudio/8.0/Language_Reference/System_Actions_and_Functions/ESpaceInvalidateCache_Action.htm</a></span></pre></div></div>    
</body>
</html>