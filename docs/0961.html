<html>
<head>
<title>face-api.js — JavaScript API for Face Recognition in the Browser with tensorflow.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Face-API . js-使用tensorflow.js在浏览器中进行人脸识别的JavaScript API</h1>
<blockquote>原文：<a href="https://itnext.io/face-api-js-javascript-api-for-face-recognition-in-the-browser-with-tensorflow-js-bcc2a6c4cf07?source=collection_archive---------0-----------------------#2018-06-25">https://itnext.io/face-api-js-javascript-api-for-face-recognition-in-the-browser-with-tensorflow-js-bcc2a6c4cf07?source=collection_archive---------0-----------------------#2018-06-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5550" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用于人脸检测、人脸识别和人脸标志检测的JavaScript API</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/9bafceb06ebc53a6cf3f6a26b2f0196f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/1*GCqsG3c2Xt-d9JQGUpytpQ.gif"/></div></figure><p id="3fc7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我很兴奋地说，终于可以在浏览器中运行人脸识别了！在这篇文章中，我将介绍一个javascript模块<a class="ae lj" href="https://github.com/justadudewhohacks/face-api.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir"> face-api.js </strong> </a>，它构建在<a class="ae lj" href="https://github.com/tensorflow/tfjs-core" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir"> tensorflow.js核心</strong> </a>之上，实现了几个<strong class="kp ir"> CNN </strong> s <strong class="kp ir"> ( </strong>卷积神经网络)来解决人脸检测、人脸识别和人脸地标检测，并针对web和移动设备进行了优化。</p><p id="cd81" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">像往常一样，我们将查看一个简单的代码示例，它将让您只需几行代码就能立即开始使用这个包。如果您想先玩一些例子，请查看<a class="ae lj" href="https://justadudewhohacks.github.io/face-api.js/" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir">演示页面</strong> </a> <strong class="kp ir">！</strong>但是别忘了回来看文章。；)</p><p id="ea80" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">让我们开始吧！</p><p id="f5e6" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><em class="lk">注意，该项目正在积极开发中。请务必查看我的最新文章，了解face-api.js的最新特性:</em></p><ul class=""><li id="7c11" class="ll lm iq kp b kq kr kt ku kw ln la lo le lp li lq lr ls lt bi translated"><a class="ae lj" rel="noopener ugc nofollow" target="_blank" href="/realtime-javascript-face-tracking-and-face-recognition-using-face-api-js-mtcnn-face-detector-d924dd8b5740"> <strong class="kp ir"> <em class="lk">实时JavaScript人脸跟踪和人脸识别使用face-api.js' MTCNN人脸检测器</em> </strong> </a></li></ul><h1 id="e737" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">先是face-recognition.js，现在又是一个包？</h1><p id="72b4" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">如果你看过我的另一篇关于nodejs人脸识别的文章:<a class="ae lj" href="https://medium.com/@muehler.v/node-js-face-recognition-js-simple-and-robust-face-recognition-using-deep-learning-ea5ba8e852" rel="noopener"><strong class="kp ir">node . js+Face-Recognition . js:使用深度学习的简单鲁棒的人脸识别</strong> </a>，你可能会意识到，前段时间我组装了一个类似的包，比如<a class="ae lj" href="https://github.com/justadudewhohacks/face-recognition.js" rel="noopener ugc nofollow" target="_blank"><strong class="kp ir">Face-Recognition . js</strong></a>，把人脸识别带到了nodejs。</p><p id="9f54" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">起初，我没有想到javascript社区对人脸识别包有如此高的需求。对于许多人来说，face-recognition.js似乎是一个体面的免费使用和开源的人脸识别付费服务的替代品，例如微软或亚马逊提供的服务。但我也被问了很多问题，是否有可能完全在浏览器中运行完整的人脸识别管道。</p><p id="3615" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">终于是了，感谢tensorflow.js！我设法使用<strong class="kp ir"> tfjs-core </strong>实现了部分类似的工具，这将得到与face-recognition.js <strong class="kp ir">、</strong>几乎相同的结果，但是是在浏览器中！此外，face-api.js提供了模型，这些模型针对web和运行在资源移动设备上进行了优化。最棒的是，它不需要设置任何外部依赖，开箱即用。作为一个额外的奖励，它是<strong class="kp ir"> GPU加速的</strong>，在WebGL后端运行操作。</p><p id="81ff" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这足以说服我，javascript社区需要这样一个浏览器包！我将让您发挥想象力，用它来构建各种各样的应用程序。；)</p><h1 id="2f71" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">如何用深度学习解决人脸识别</h1><p id="df37" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">如果你是那种想尽快开始的人，你可以跳过这一节，直接进入代码。但是为了更好地理解face-api.js中用于实现人脸识别的方法，我强烈建议您跟随，因为我经常被问到这个问题。</p><p id="0e6e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">简单来说，我们实际上想要实现的是，在给定一个人的脸部图像的情况下，例如<strong class="kp ir">输入图像</strong>，来识别这个人。我们这样做的方法是为我们想要识别的每个人提供一个(或多个)图像，用人名标记，例如<strong class="kp ir">参考数据</strong>。现在我们将输入图像与参考数据进行比较，并找到最相似的参考图像<strong class="kp ir">。如果两幅图像足够相似，我们输出<strong class="kp ir">人的名字</strong>，否则我们输出<strong class="kp ir">‘未知’</strong>。</strong></p><p id="2a93" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">听起来像个计划！然而，仍然存在两个问题。首先，如果我们有一个显示多个人的图像，并且我们想把他们都认出来，该怎么办？其次，我们需要能够获得两张人脸图像的这种<strong class="kp ir">相似性度量</strong>，以便对它们进行比较…</p><h2 id="0309" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">人脸检测</h2><p id="e9b9" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">第一个问题的答案是人脸检测。简单来说，我们将首先定位输入图像中的所有人脸<strong class="kp ir">。</strong> Face-api.js为不同的用例实现了多个人脸检测器。</p><p id="c61d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">最准确的人脸检测器是一个<strong class="kp ir"> SSD </strong>(单镜头多盒检测器)，基本上是一个基于<strong class="kp ir"> MobileNet V1 </strong>的<strong class="kp ir"> CNN </strong>，在网络之上叠加了一些额外的盒预测层。</p><p id="f449" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">此外，face-api.js实现了一个优化的<strong class="kp ir">微型人脸检测器</strong>，基本上是Tiny Yolo v2的一个更小的版本，利用深度方向可分离的卷积而不是常规卷积，与SSD MobileNet V1相比，这是一个更快但精度稍低的人脸检测器。</p><p id="10b7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">最后，还有一个<strong class="kp ir"> MTCNN </strong>(多任务级联卷积神经网络)的实现，然而，它现在主要用于实验目的。</p><p id="6175" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">网络返回每个人脸的<strong class="kp ir">包围盒</strong>，以及它们相应的<strong class="kp ir">分数</strong>，例如每个包围盒显示人脸的概率。分数用于过滤边界框，因为图像可能根本不包含任何人脸。注意，为了检索边界框，即使只有一个人，也应该执行面部检测。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/56d7c49c3876c7bd92a61d8f055a371e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvNoGBy_OKrrA5Y2ZzLWcg.jpeg"/></div></div></figure><h2 id="e61a" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">人脸标志检测和人脸对齐</h2><p id="019b" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">第一个问题解决！然而，我想指出的是，我们希望<strong class="kp ir">对齐</strong>边界框，这样我们就可以在将图像传送到人脸识别网络之前，提取每个框中位于人脸中心的图像，因为这将使人脸识别更加准确！</p><p id="73cc" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为此，face-api.js实现了一个简单的CNN，它返回给定人脸图像的68个点人脸标志<strong class="kp ir">:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/e357af32f2c4b25af0dd67919fbe192c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*jv7lVkNCa3pMPzTWYTxKdg.png"/></div></figure><p id="34ce" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">根据标志位置，边界框可以位于面部的中心。在下图中，您可以看到人脸检测的结果(左)与对齐的人脸图像(右)的对比:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nj"><img src="../Images/ace4cdc2f021c531bb288bd3bc7711d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xKjWEjMy9Bb59geQ9Hu1VQ.jpeg"/></div></div></figure><h2 id="cb4d" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">人脸识别</h2><p id="811d" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">现在我们可以将提取和对齐的人脸图像馈入人脸识别网络，该网络基于类似于<strong class="kp ir"> ResNet-34 </strong>的架构，并且基本上对应于<a class="ae lj" href="https://github.com/davisking/dlib/blob/master/examples/dnn_face_recognition_ex.cpp" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir"> dlib </strong> </a>中实现的架构。该网络已经被训练来学习将人脸的特征映射到<strong class="kp ir">人脸描述符</strong>(具有128个值的特征向量)，这通常也被称为人脸嵌入。</p><p id="b095" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在回到我们比较两张人脸的原始问题:我们将使用每个提取的人脸图像的人脸描述符，并将它们与参考数据的人脸描述符进行比较。更准确地说，我们可以计算两张人脸描述符之间的<strong class="kp ir">欧几里德距离</strong>，并基于一个<strong class="kp ir">阈值</strong>来判断两张人脸是否相似(对于150×150大小的人脸图像<strong class="kp ir"> 0.6 </strong>是一个好的阈值)。使用<strong class="kp ir">欧几里德距离</strong>效果惊人的好，但是当然你可以使用任何你选择的分类器。下面的gif通过欧几里德距离可视化了两张人脸图像的比较:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/e3255a797fe21b6314cc632fdcda17ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/1*wMHXC9QtU1YXvg_R4OIGTQ.gif"/></div></figure><p id="1e40" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在我们已经理解了人脸识别的理论，我们可以开始编写一个例子了。</p><h1 id="6f94" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">编码时间！</h1><p id="5571" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">在这个简短的示例中，我们将逐步了解如何对以下显示多个人的输入图像运行人脸识别:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nl"><img src="../Images/3b5f86e1760c6eb9d347a5c9431a7229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5XojINtKrkHFT3nOx6oW1g.jpeg"/></div></div></figure><h2 id="2ebc" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">包括剧本</h2><p id="cae3" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">首先从<em class="lk"> dist/face-api.js </em>中获取<a class="ae lj" href="https://github.com/justadudewhohacks/face-api.js/tree/master/dist" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir">最新版本</strong> </a>或者从<em class="lk"> dist/face-api.min.js </em>中获取minifed版本并包含脚本:</p><pre class="kg kh ki kj gt nm nn no np aw nq bi"><span id="790e" class="mr lv iq nn b gy nr ns l nt nu">&lt;script src="face-api.js"&gt;&lt;/script&gt;</span></pre><p id="b477" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">如果您使用npm:</p><pre class="kg kh ki kj gt nm nn no np aw nq bi"><span id="b583" class="mr lv iq nn b gy nr ns l nt nu">npm i face-api.js</span></pre><h2 id="4645" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">加载模型数据</h2><p id="c5c4" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">根据您的应用程序的要求，您可以专门加载您需要的模型，但要运行完整的端到端示例，我们需要加载人脸检测、人脸标志和人脸识别模型。模型文件在repo上可用，可在 处找到<a class="ae lj" href="https://github.com/justadudewhohacks/face-api.js/tree/master/weights" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir">。</strong></a></p><p id="7335" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">模型权重已经过量化，与原始模型相比，模型文件大小减少了<strong class="kp ir"> 75% </strong>，使您的客户只需加载所需的最少数据。此外，模型权重被分割成最大4 MB的块，以允许浏览器缓存这些文件，这样它们只需加载一次。</p><p id="a09b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">模型文件可以简单地作为静态资产在您的web应用程序中提供，或者您可以将它们托管在其他地方，并且可以通过指定文件的路径或url来加载它们。假设您在<strong class="kp ir"> models </strong>目录中提供它们，以及<strong class="kp ir"> public/models </strong>下的资产:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h2 id="19ab" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">从输入图像接收所有人脸的完整描述</h2><p id="e2ec" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">神经网络接受HTML图像、画布或视频元素或张量作为输入。为了检测输入图像的所有人脸的边界框，我们简单地说:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="5f28" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">完整的面部描述保存检测结果(边界框+分数)、面部标志以及计算的描述符。通过省略<strong class="kp ir"><em class="lk">faceapi . detect allfaces(input，options) </em> </strong>的第二个<strong class="kp ir"> <em class="lk">选项</em> </strong>参数，SSD MobileNet V1将默认用于人脸检测。要使用微型面部检测器或MTCNN，您只需指定相应的选项即可。</p><p id="03ff" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">有关面部检测选项的详细文档，请查看github repo的自述文件中的相应部分。请注意，您必须预先加载相应的模型，以便像我们对SSD MobileNet V1模型所做的那样使用面部检测器。</p><p id="79ab" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">返回的边界框和界标位置是相对于原始图像/媒体大小的。如果显示的图像尺寸与原始图像尺寸不一致，您可以简单地调整它们的大小:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="e0cb" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我们可以通过将边界框绘制到画布中来可视化检测结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/296cadf0478ccd2cee8e3c835e850ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*rBjbo4EMkQ75zuju54NhZA.jpeg"/></div></figure><p id="8e84" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">面部标志可以显示如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ny"><img src="../Images/463a332174a57ec50500bccca14daaeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w-sVdHisqOIk-9NmvYvhkg.jpeg"/></div></div></figure><p id="ff6d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">通常，我为可视化所做的是在具有相同宽度和高度的<strong class="kp ir"> img </strong>元素上覆盖一个绝对定位的画布(更多信息请参见github示例)。</p><h2 id="6a1d" class="mr lv iq bd lw ms mt dn ma mu mv dp me kw mw mx mg la my mz mi le na nb mk nc bi translated">人脸识别</h2><p id="98b3" class="pw-post-body-paragraph kn ko iq kp b kq mm jr ks kt mn ju kv kw mo ky kz la mp lc ld le mq lg lh li ij bi translated">既然我们知道了如何检索给定输入图像的所有人脸的位置和描述符，我们将获得一些显示每个人的图像，并计算他们的人脸描述符。这些描述符将成为我们的<strong class="kp ir">参考数据</strong>。</p><p id="6dc5" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">假设我们有一些可用的主题示例图像，我们首先从url获取图像，并使用<strong class="kp ir"><em class="lk">faceapi . fetchimage .</em></strong>从它们的数据缓冲区创建HTML图像元素。对于每个获取的图像，我们将定位主题的面部并计算面部描述符，就像我们之前对输入图像所做的那样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="fb16" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">请注意，这次我们使用的是<strong class="kp ir"><em class="lk">faceapi . detectsingleface，</em> </strong>，它将只返回检测到的得分最高的人脸，因为我们假设在该图像中只显示给定标签的字符。</p><p id="3cc2" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在，剩下要做的事情就是将从我们的输入图像中检测到的面部的面部描述符与我们的<strong class="kp ir">参考数据</strong>进行匹配，例如标记的面部描述符。为此，我们可以利用<strong class="kp ir"> <em class="lk"> faceapi。面匹配器</em>和</strong>如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="33af" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">面部匹配器使用欧几里德距离作为相似性度量，结果证明效果很好。我们最终为输入图像中检测到的每个人脸找到一个最佳匹配，包含标签+匹配的欧几里德距离。</p><p id="bef7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">最后，我们可以将边界框及其标签一起绘制到画布中，以显示结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nz"><img src="../Images/b6d42721c7f59161e17ccf5568bfb959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FB6mqgH8MsDmro2ngC43IQ.jpeg"/></div></div></figure><p id="db9d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我们走吧！到目前为止，我希望您已经初步了解了如何使用这个api。我还建议看看回购中的其他例子。现在，尽情玩这个包吧！；)</p><p id="b155" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><em class="lk">如果你喜欢这篇文章，欢迎留下一些掌声，并在medium和/或</em><a class="ae lj" href="https://twitter.com/justadudewhohax" rel="noopener ugc nofollow" target="_blank"><em class="lk">Twitter</em></a><em class="lk">:)上关注我。也可以随意在</em> <a class="ae lj" href="https://github.com/justadudewhohacks/face-api.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kp ir"> <em class="lk"> github资源库</em> </strong> </a> <em class="lk">上留下一颗星星。敬请关注更多教程！</em></p></div></div>    
</body>
</html>