<html>
<head>
<title>WWDC 2021 iOS 15- Funny Tricks on UISheetPresentationController</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WWDC 2021 iOS 15-UISheetPresentationController上的搞笑把戏</h1>
<blockquote>原文：<a href="https://itnext.io/ios-15-uisheetpresentationcontroller-d469d144a520?source=collection_archive---------1-----------------------#2021-08-01">https://itnext.io/ios-15-uisheetpresentationcontroller-d469d144a520?source=collection_archive---------1-----------------------#2021-08-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="2a6c" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">带有两个制动器的新型演示控制器</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/b0b542c7771be5a2a8813a4f1fd325d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tx-vkBK4kM6Pr9lx"/></div></div></figure><p id="2fea" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi lr translated">在2021年WWDC奥运会上，苹果公司发布了许多iOS和Swift编程语言的新更新。其中一个引人注目的UI增强是<code class="fe ma mb mc md b">UISheetPresentationController</code>。它为展示一个<code class="fe ma mb mc md b">UIViewController</code>提供了一种全新的方式。它可以以半屏或全屏模式显示。您还可以自定义圆角半径、抓取器可见性和紧凑模式下显示的UI等。</p><p id="dec5" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在测试新的<code class="fe ma mb mc md b">UISheetPresentationController</code>的过程中，我遇到了关于<code class="fe ma mb mc md b">UIViewController</code>的<strong class="kx iv">生命周期</strong>和<strong class="kx iv">背景</strong>的两个有趣棘手的部分，我将在这篇博文中与你分享。让我们开始吧。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="f7d5" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">简单设置</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nd"><img src="../Images/c1afd766464a6977cec59a9a8bc4906e.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*EmHw7BxZ96I5IiUBoq4xRQ.gif"/></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">简单UISheetPresentationController</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="95a7" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">对于一个<code class="fe ma mb mc md b">UISheetPresentationController</code>来说，最简单的设置就是配置它的<code class="fe ma mb mc md b">detents</code>属性来支持<code class="fe ma mb mc md b">medium</code>属性。见第7行。</p><p id="06c9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">默认情况下，<code class="fe ma mb mc md b">UISheetPresentationController</code>只配置一个卡位— <code class="fe ma mb mc md b">large</code>一个。这意味着呈现的<code class="fe ma mb mc md b">UIViewController</code>将会像iOS 14或之前版本中呈现的一样呈现。它几乎占据了所有的屏幕高度。</p><p id="414b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">为了以半屏方式显示所呈现的<code class="fe ma mb mc md b">UIViewController</code>，我们必须在<code class="fe ma mb mc md b">UISheetPresentationController</code>的<code class="fe ma mb mc md b">detents</code>参数中添加另一个<code class="fe ma mb mc md b">detent</code> — <code class="fe ma mb mc md b">medium</code>。<code class="fe ma mb mc md b">detents</code>中的第一个元件是<code class="fe ma mb mc md b">UISheetPresentationController</code>的默认卡位。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="23d2" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">棘手的部分1)怪异的UIViewController生命周期</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nd"><img src="../Images/f80abc9cbd7379d2e248c4054ae6e484.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*mfINsNu_y25RXeQMMJCOfw.gif"/></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">展示所展示的<code class="fe ma mb mc md b">UIViewController</code>生命周期的动画</figcaption></figure><p id="054a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">正如上面的gif动画中突出显示的，当出现的<code class="fe ma mb mc md b">UIViewController</code>处于<code class="fe ma mb mc md b">medium</code>卡位时，一旦用户向下拖动抓取器，就会触发<code class="fe ma mb mc md b"><a class="ae nk" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621485-viewwilldisappear" rel="noopener ugc nofollow" target="_blank">viewWillDisappear</a></code>回调。然而，当用户松开他/她的手指时，<code class="fe ma mb mc md b"><a class="ae nk" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621423-viewdidappear" rel="noopener ugc nofollow" target="_blank">viewDidAppear</a></code>回调被触发，呈现的<code class="fe ma mb mc md b">UIViewController</code>返回到其<code class="fe ma mb mc md b">medium </code>卡位。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nl"><img src="../Images/be6cc6969a3f8faacf1f6e5f0426daeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SyRFqlGOOSYOIJusBORNVw.png"/></div></div></figure><p id="425f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">换句话说，你必须记住在<code class="fe ma mb mc md b"><a class="ae nk" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621423-viewdidappear" rel="noopener ugc nofollow" target="_blank">viewDidAppear</a></code>回调中是否包含任何逻辑，因为它可以在一个演示中被多次<strong class="kx iv">触发。</strong></p><blockquote class="nm nn no"><p id="9fd3" class="kv kw np kx b ky kz jv la lb lc jy ld nq lf lg lh nr lj lk ll ns ln lo lp lq in bi translated"><em class="iu">根据苹果官方文档</em>:</p><p id="63c6" class="kv kw np kx b ky kz jv la lb lc jy ld nq lf lg lh nr lj lk ll ns ln lo lp lq in bi translated"><code class="fe ma mb mc md b"><a class="ae nk" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621485-viewwilldisappear" rel="noopener ugc nofollow" target="_blank"><em class="iu">viewWillDisappear</em></a></code>被调用以响应从视图层次结构中删除的视图。在实际移除视图和配置任何动画之前，调用此方法。</p><p id="9c8f" class="kv kw np kx b ky kz jv la lb lc jy ld nq lf lg lh nr lj lk ll ns ln lo lp lq in bi translated"><code class="fe ma mb mc md b"><a class="ae nk" href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621423-viewdidappear" rel="noopener ugc nofollow" target="_blank"><em class="iu">viewDidAppear</em></a></code> <em class="iu">通知</em>视图控制器它的视图被添加到了一个视图层次中。</p></blockquote></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="3469" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">添加一个抓取器</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nt"><img src="../Images/bac6859d4fb5a1011e54c8459931f75a.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*RR22FOgv4uH5zi6rkwMIIg.png"/></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">强夺者</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="c556" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">抓取器是一个小的灰色圆形<code class="fe ma mb mc md b">UIView</code>，位于显示的<code class="fe ma mb mc md b">UIViewController</code>的顶部(在上面的截图中突出显示)，告诉用户这是一个可拖动的工作表。在我看来，当<code class="fe ma mb mc md b">medium</code>和<code class="fe ma mb mc md b">large</code>制动器都被设置时，这是一个很好的小部件，这意味着有半展开和完全展开的状态。</p><p id="b619" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">然而，苹果不允许开发者定制抓取器的颜色和尺寸。它必须是灰色的。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="d2a4" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">在嵌入式UIScrollView视图中启用滚动</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nd"><img src="../Images/b4439839ac05f505c313151d49b73c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*OEXxzmISIbUVHnRrdwChTQ.gif"/></div></figure><p id="c00c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">当你在呈现的<code class="fe ma mb mc md b">UIViewController</code>中增加一个竖线<code class="fe ma mb mc md b">UIScrollView</code>时，你会发现当<code class="fe ma mb mc md b">UISheetPresentationController</code>处于<code class="fe ma mb mc md b">medium</code>卡位时，<code class="fe ma mb mc md b">UIScrollView</code>处的滚动动作会被<code class="fe ma mb mc md b">UISheetPresentationController</code>拦截。换句话说，<code class="fe ma mb mc md b">UIScrollView</code>只有在<code class="fe ma mb mc md b">UISheetPresentationController</code>处于<code class="fe ma mb mc md b">large</code>卡位时才可以滚动。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nd"><img src="../Images/e3550a487ffafe478e33d8d207cae8c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*MV1HD3rQRs_eG-skQ93JVA.gif"/></div></figure><p id="c22c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">因此，我们必须将<code class="fe ma mb mc md b">prefersScrollingExpandsWhenScrolledToEdge</code>设置为<code class="fe ma mb mc md b">true</code>，以使用户能够在<code class="fe ma mb mc md b">medium</code>卡位处使用<code class="fe ma mb mc md b">UIScrollView</code>。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="c7bb" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">用户与呈现的UIViewController的交互</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nu"><img src="../Images/ebc1b8fa30d379ecb7ed04d1ade2d554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*cFf2aI9HSUwvD0MOUJpj7w.png"/></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">UIDimmingView被添加到视图层次结构中</figcaption></figure><p id="156b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">默认情况下，当呈送<code class="fe ma mb mc md b">UISheetPresentationController</code>处于<code class="fe ma mb mc md b">middle</code>卡位时，呈送<code class="fe ma mb mc md b">UIViewController</code>将被<code class="fe ma mb mc md b">UIDimmingView</code>包裹。当用户点击<code class="fe ma mb mc md b">UIDimmingView</code>时，所显示的<code class="fe ma mb mc md b">UIViewController</code>将同时消失。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="7ec6" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是，当您想要移除此<code class="fe ma mb mc md b">UIDimmingView</code>并允许用户在呈现<code class="fe ma mb mc md b">UIViewController</code>时与小部件交互时，您可以将<code class="fe ma mb mc md b">largestUndimmedDetentIdentifier</code>设置为<code class="fe ma mb mc md b">medium</code>。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="6007" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">刀尖圆弧半径</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nv"><img src="../Images/05bffb2764427eee586f14bf70bbda10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*-SCf63GPn9y_EVdF1K_FEQ.png"/></div></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="5cad" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">拐角半径设置是指所呈现的<code class="fe ma mb mc md b">UIViewController</code>的左上角和右上角。默认值是<code class="fe ma mb mc md b">10.0</code>点。设置这个属性是不言而喻的，但是当背景颜色包含透明度时，底层的UI变化可能会在呈现的<code class="fe ma mb mc md b">UIViewController</code>上引起一个棘手的问题。见下文。</p><h2 id="869c" class="nw mm iu bd mn nx ny dn mr nz oa dp mv le ob oc mx li od oe mz lm of og nb oh bi translated">棘手的部分2)在一个水滴视图中的怪异阴影？</h2><div class="kk kl km kn gu ab cb"><figure class="oi ko oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><img src="../Images/fe354884e08acfef9fdeef349fc4cb9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*pICvYY3eTrI6T8E3GJB_Iw.png"/></div></figure><figure class="oi ko oo ok ol om on paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><img src="../Images/a70b7a418057a92161bd6b65630e91bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*fkPjK6Bq-mzL35GB75B3ng.png"/></div></figure></div><p id="3bef" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在显示的<code class="fe ma mb mc md b">UIViewController</code>下方有一个<code class="fe ma mb mc md b">UIDropView</code>，默认为灰色。如果你自定义拐角半径，它也改变了<code class="fe ma mb mc md b">UIDropView</code>的拐角半径，并因此导致异常明亮的左下角和右下角，在上图中用绿色箭头突出显示。由于<code class="fe ma mb mc md b">UIDropView</code>在iOS SDK中是私有的，所以没有用于配置它的公共API。我希望苹果能解决这个问题，或者在未来发布一个新的API来设置它😉！</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="f71e" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">用漂亮的动画改变选定的棘爪</h1><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nd"><img src="../Images/570f0e920de7dfa301cc6eb8262ba65b.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*BN8G0Z0GDzZrkodRJZomCw.gif"/></div></figure><p id="9d7d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">默认情况下，<code class="fe ma mb mc md b">UISheetPresentationController</code>配置的所有变化不会产生任何动画。例如，改变<code class="fe ma mb mc md b">selectedDetentIdentifier</code>只会导致呈现的<code class="fe ma mb mc md b">UIViewController</code>立即改变其大小。见gif左边部分。</p><p id="7a3e" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">为了提供更好的用户体验，我们应该将更改配置的代码包装在<code class="fe ma mb mc md b">animateChanges</code>回调中。iOS将为我们处理动画。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="0b5e" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">iPhone紧凑型(水平)模式下的操作</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj op"><img src="../Images/4f4bc5d540fd5f32317825630a9576a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_X1dsDnXk2hbYgfrMiX9w.png"/></div></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">prefersegeattachindcompactheight = false</figcaption></figure><p id="cda3" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">iPhone compat模式下会发生什么？没有<code class="fe ma mb mc md b">middle</code>卡位，呈现的<code class="fe ma mb mc md b">UIViewController</code>将以全屏模式呈现。见上图。即使用户在<code class="fe ma mb mc md b">UIViewController</code>区域内向下滚动，也不会被拖动或取消。建议在显示的<code class="fe ma mb mc md b">UIViewController</code>上增加一个解除按钮。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj op"><img src="../Images/a4fad06caaef46af862d51e5761ba7a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mu3JnOT9tmN6GWwLbzUnqQ.png"/></div></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">prefersegeattachindcompactheight = true</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="b6c2" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">那么，如果我们想为用户提供一个拖放功能来提供更好的用户体验呢？我们可以简单地启用<code class="fe ma mb mc md b">prefersEdgeAttachedInCompactHeight</code>属性，呈现的<code class="fe ma mb mc md b">UIViewController</code>将被放置在安全区域内。见上面截图。</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="29dd" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">uisheetepresentationcontrollerdelegate</h1><p id="4706" class="pw-post-body-paragraph kv kw iu kx b ky oq jv la lb or jy ld le os lg lh li ot lk ll lm ou lo lp lq in bi translated">我们如何管理用户选择的当前卡位？你想在不同的卡位模式下显示不同的部件吗？苹果为应用程序提供了<code class="fe ma mb mc md b">UISheetPresentationControllerDelegate</code>来获得通知。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ni nj l"/></div></figure><blockquote class="nm nn no"><p id="f376" class="kv kw np kx b ky kz jv la lb lc jy ld nq lf lg lh nr lj lk ll ns ln lo lp lq in bi translated">根据苹果<a class="ae nk" href="https://developer.apple.com/documentation/uikit/uisheetpresentationcontrollerdelegate/3801914-sheetpresentationcontrollerdidch" rel="noopener ugc nofollow" target="_blank">官方文档</a>:</p><p id="71b4" class="kv kw np kx b ky kz jv la lb lc jy ld nq lf lg lh nr lj lk ll ns ln lo lp lq in bi translated">在工作表的<a class="ae nk" href="https://developer.apple.com/documentation/uikit/uisheetpresentationcontroller/3801908-selecteddetentidentifier" rel="noopener ugc nofollow" target="_blank">selectedDetentIdentifier</a>响应用户交互而改变后，系统调用该方法。在您以编程方式更改了<code class="fe ma mb mc md b">selectedDetentIdentifier</code>之后，系统不会调用这个函数。</p></blockquote><p id="3bfd" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">❗️Be意识到处理的情况下，选定的卡位是改变了应用程序，而不是用户！</p></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="de18" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">摘要</h1><p id="5c31" class="pw-post-body-paragraph kv kw iu kx b ky oq jv la lb or jy ld le os lg lh li ot lk ll lm ou lo lp lq in bi translated"><code class="fe ma mb mc md b">UISheetPresentationController</code>是一种新型的<code class="fe ma mb mc md b">UIPresentationController</code>，用于将<code class="fe ma mb mc md b">UIViewController</code>以片状呈现。以下是属性:</p><ol class=""><li id="fd66" class="ov ow iu kx b ky kz lb lc le ox li oy lm oz lq pa pb pc pd bi translated">两个受支持的制动器—中型和大型</li><li id="cb15" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">抓取能见度</li><li id="a743" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">启用/禁用中等卡位的可滚动<code class="fe ma mb mc md b">UIScrollView</code></li><li id="60f7" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">将<code class="fe ma mb mc md b">UIViewController</code>呈现在中间卡位时的用户交互</li><li id="cb2e" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">刀尖圆弧半径</li><li id="4fae" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">改变<code class="fe ma mb mc md b">UISheetPresentationController</code>配置时的动画</li><li id="fecb" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">紧凑模式下的用户界面</li></ol><p id="2e3d" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在使用<code class="fe ma mb mc md b">UISheetPresentationController</code>时发现了两个棘手的部分:</p><ol class=""><li id="4c43" class="ov ow iu kx b ky kz lb lc le ox li oy lm oz lq pa pb pc pd bi translated"><code class="fe ma mb mc md b">viewDidAppear</code>在单个演示文稿中可以多次调用回调</li><li id="64fe" class="ov ow iu kx b ky pe lb pf le pg li ph lm pi lq pa pb pc pd bi translated">一个<code class="fe ma mb mc md b">UIDropView</code>放置在所展示的<code class="fe ma mb mc md b">UIViewController</code>下方。当定制拐角半径时，<code class="fe ma mb mc md b">UIDropView</code>的拐角会在所显示的<code class="fe ma mb mc md b">UIViewController</code>的背景上出现异常阴影。</li></ol></div><div class="ab cl me mf hy mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="in io ip iq ir"><h1 id="a9a6" class="ml mm iu bd mn mo mp mq mr ms mt mu mv ka mw kb mx kd my ke mz kg na kh nb nc bi translated">参考</h1><div class="pj pk gq gs pl pm"><a href="https://developer.apple.com/videos/play/wwdc2021/10063/" rel="noopener  ugc nofollow" target="_blank"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">在ui kit-wwdc 21-Videos-Apple Developer中自定义和调整表单大小</h2><div class="pt l"><h3 class="bd b gz z fq pr fs ft ps fv fx dk translated">了解如何在UIKit中创建分层和定制的表单体验。我们将探索如何构建一个…</h3></div><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">developer.apple.com</p></div></div><div class="pv l"><div class="pw l px py pz pv qa kt pm"/></div></div></a></div><div class="pj pk gq gs pl pm"><a href="https://developer.apple.com/documentation/uikit/uisheetpresentationcontroller" rel="noopener  ugc nofollow" target="_blank"><div class="pn ab fp"><div class="po ab pp cl cj pq"><h2 class="bd iv gz z fq pr fs ft ps fv fx it bi translated">UISheetPresentationController—Apple开发者文档</h2><div class="pu l"><p class="bd b dl z fq pr fs ft ps fv fx dk translated">developer.apple.com</p></div></div></div></a></div></div></div>    
</body>
</html>