<html>
<head>
<title>ReactIntl + Namespaces</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ReactIntl +命名空间</h1>
<blockquote>原文：<a href="https://itnext.io/reactintl-namespaces-2ba85d59133f?source=collection_archive---------6-----------------------#2018-02-19">https://itnext.io/reactintl-namespaces-2ba85d59133f?source=collection_archive---------6-----------------------#2018-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/4e6b02a7e5f4e73fc49fdb9218c4b997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ecDuzv7ivIH-hz5NrxdAcA.jpeg"/></div></div></figure><div class=""/><p id="3b16" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/yahoo/react-intl" rel="noopener ugc nofollow" target="_blank">react ntl</a>是一个库，可以帮助您完成项目中与国际化和本地化相关的任务。</p><p id="c78f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Freactintl-namespaces-2ba85d59133f" rel="noopener ugc nofollow" target="_blank"> <em class="kx">点击这里在LinkedIn </em> </a>上分享这篇文章</p><p id="9ffd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它的好处是它试图以平台的方式解决问题，在引擎盖下它使用了<a class="ae kw" href="https://www.ecma-international.org/publications/standards/Ecma-402.htm" rel="noopener ugc nofollow" target="_blank"> ECMA-402 </a> API，它现在填充了<a class="ae kw" href="https://github.com/andyearnshaw/Intl.js/" rel="noopener ugc nofollow" target="_blank"> Intl.js </a>和<a class="ae kw" href="https://formatjs.io/" rel="noopener ugc nofollow" target="_blank"> FormatJS </a></p><p id="8521" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它的工作方式为您提供了两个主要组件IntlProvider和FormattedMessage。IntlProvider负责设置您的语言环境，并向FormattedMessage提供翻译的消息。FormattedMessage用默认语言(引用语言)声明什么是您的资源文本，并格式化消息。稍后在构建过程中，你可以用<a class="ae kw" href="https://github.com/yahoo/babel-plugin-react-intl" rel="noopener ugc nofollow" target="_blank"> babel插件</a>提取那些声明的消息资源，并将这些提取的文件发送给翻译器。</p><p id="ff04" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以像ReactIntl中的一个例子描述的那样使用它，在一个客户机上，你从一个已经在你的页面中声明的全局变量传递消息，这个全局变量是从服务器下载的</p><figure class="ky kz la lb gt is"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="2b04" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在服务器端，你发送从index.html翻译器收到的翻译信息</p><figure class="ky kz la lb gt is"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="000e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当可以预先加载所有资源时，这个解决方案是完美的。它的主要优点是什么？您不需要等待资源下载。当您更改语言时，只需用不同的语言环境重新加载您的页面。</p><p id="473e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当您有许多按需加载的模块时，您不想一次下载所有的资源，这就有问题了。你必须用翻译来维护文件，这对于开发者和翻译者来说都是一个痛苦，因为他们看不到csv文件的xml、json中的翻译上下文。</p><p id="82ba" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我遇到了这个问题，这就是为什么我想出了带有名称空间的ReactIntl。你问的那些名称空间是什么…简单的推理方式是，当用户加载你的应用程序的一部分时，你想一起加载的一组翻译。</p><p id="e9bf" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个项目的灵感来自于扬·穆勒曼的《https://react.i18next.com》。</p><p id="6573" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">随着加载翻译的需求，你有很多新的可能性，你可以改善你的翻译过程。你不再需要通过电子邮件发送翻译文件，或者一些聊天和手动同步。你不必从你的应用程序中提取未翻译的信息，并把它们发送给某人进行翻译，你的应用程序可以自己完成这项工作。翻译人员可以使用您的应用程序和带翻译服务的上下文编辑器，只需点击应用程序的任何部分，就可以找到负责特定文本的资源。他们可以翻译它，刷新页面，并随时查看变化。他们看文本是否适合屏幕，他们看上下文。</p><p id="c286" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当开发人员添加新消息时，它们会自动上传到翻译服务，您可以看到哪些消息是未翻译的。</p><p id="8f55" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将在以后的文章中描述完整的过程。</p><p id="2b48" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个与<a class="ae kw" href="https://github.com/maciejw/react-intl-namespaces" rel="noopener ugc nofollow" target="_blank">反应命名空间</a>整合的翻译服务是locize.com的<a class="ae kw" href="https://locize.com/" rel="noopener ugc nofollow" target="_blank">。它很酷的一点是，他们有上下文编辑器，这个编辑器有另一个很酷的功能，除了许多其他功能，它可以帮助你处理</a><a class="ae kw" href="http://format-message.github.io/icu-message-format-for-translators/" rel="noopener ugc nofollow" target="_blank"> ICU格式</a>的消息。在<a class="ae kw" href="https://formatjs.io/guides/message-syntax/" rel="noopener ugc nofollow" target="_blank"> ReactIntl </a>中也支持这种格式，因为ReactIntl是使用ICU的<a class="ae kw" href="https://formatjs.io/guides/message-syntax/" rel="noopener ugc nofollow" target="_blank"> FormatJS </a>的一部分。</p><p id="1ea8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">反应命名空间如何工作？它位于ReactIntl之上，它将IntlProvider封装在IntlNamespaceProvider中，派生FormattedMessage，并在此基础上添加IntlBackendProvider</p><figure class="ky kz la lb gt is"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="ae11" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常在IntlProvider上设置的内容可以在IntlBackendProvider上设置，使用IntlNamespaceProvider可以将资源分开并分组。消息id是有作用域的，所以两个名称空间可以有相同的id。</p><p id="d0c3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了使图片完整，你需要通过助手类<a class="ae kw" href="https://github.com/maciejw/react-intl-namespaces/blob/master/packages/react-intl-namespaces/src/resourceProvider.ts#L81" rel="noopener ugc nofollow" target="_blank"> ResourceProvider </a>连接到一些后端，它负责协调资源下载和下载完成时的通知过程，它还具有一些功能，如下载另一种语言的资源，它可以检查给定语言的新翻译。</p><p id="f61d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">I依赖于<a class="ae kw" href="https://github.com/maciejw/react-intl-namespaces/blob/master/packages/react-intl-namespaces/src/types.ts#L48" rel="noopener ugc nofollow" target="_blank"> ResourceServer </a>接口的实现，该接口目前有一个<a class="ae kw" href="https://docs.locize.com/api.html" rel="noopener ugc nofollow" target="_blank"> locize.io api </a>的实现。</p><figure class="ky kz la lb gt is"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="061e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要做的只是配置我们的LocizeClient或任何其他资源服务器实现，用getMessagesFromNamespaceFactory将其连接到我们的应用程序，然后添加MissingMessageFactory ant，就是这样。</p><p id="ceb7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在以后的文章中，我将解释如何将locize-editor与它集成，以及这个库还有哪些很酷的特性。</p><p id="8df9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我写这篇文章的时候，它已经有了版本<a class="ae kw" href="https://github.com/maciejw/react-intl-namespaces/releases/tag/v0.1.0" rel="noopener ugc nofollow" target="_blank"> 0.1.0 </a>在npm上:</p><div class="ip iq gp gr ir le"><a href="https://www.npmjs.com/package/react-intl-namespaces" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd jc gy z fp lj fr fs lk fu fw ja bi translated">react-intl-名称空间</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">[react-intl]国际化库与[locize.com]在线翻译服务的集成。</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">www.npmjs.com</p></div></div><div class="ln l"><div class="lo l lp lq lr ln ls ix le"/></div></div></a></div><div class="ip iq gp gr ir le"><a href="https://www.npmjs.com/package/react-intl-namespaces-locize-client" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd jc gy z fp lj fr fs lk fu fw ja bi translated">react-intl-namespaces-locize-client</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">[react-intl]国际化库与[locize.com]在线翻译服务的集成。</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">www.npmjs.com</p></div></div><div class="ln l"><div class="lt l lp lq lr ln ls ix le"/></div></div></a></div><div class="ip iq gp gr ir le"><a href="https://www.npmjs.com/package/react-intl-namespaces-locize-editor" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd jc gy z fp lj fr fs lk fu fw ja bi translated">react-intl-namespaces-locize-editor</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">[react-intl]国际化库与[locize.com]在线翻译服务的集成。</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">www.npmjs.com</p></div></div><div class="ln l"><div class="lu l lp lq lr ln ls ix le"/></div></div></a></div><p id="0052" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你觉得有趣，请在下面留下评论或<a class="ae kw" href="https://github.com/maciejw/react-intl-namespaces/issues/new" rel="noopener ugc nofollow" target="_blank"> github问题</a>。</p><p id="e9b4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和平！</p></div></div>    
</body>
</html>