<html>
<head>
<title>HackerNews Reader with Vue 3, Vite 2, VueX 4 &amp; Tailwind — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有Vue 3、Vite 2、VueX 4和Tailwind的HackerNews阅读器—第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/hackernews-reader-with-vue-3-vite-2-and-vuex-4-part-1-247315ceb06a?source=collection_archive---------0-----------------------#2021-01-09">https://itnext.io/hackernews-reader-with-vue-3-vite-2-and-vuex-4-part-1-247315ceb06a?source=collection_archive---------0-----------------------#2021-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6036c87802eccaf7a3afae2786b97db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Yzj3-EMNmzbeZlUQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">劳伦·曼克在Unsplash<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></figcaption></figure><p id="5104" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与React(由脸书支持)和Angular(来自谷歌)相比，VueJS正在成为最受欢迎的前端框架之一。最近，它已经更新到第3版，有许多令人兴奋的新功能。在本帖中，我们将探索与VueX(状态管理)的结合来处理第三方API。为了便于学习，我们的目标只是从Hacker News接收热门文章，并从客户端加载。</p><blockquote class="lb lc ld"><p id="b358" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">你可以试试这里的在线演示<a class="ae kc" href="https://hnews.techika.com/" rel="noopener ugc nofollow" target="_blank">https://hnews.techika.com</a>(更新到最新版本)</p></blockquote><p id="c4bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们使用<a class="ae kc" href="https://vitejs.dev/" rel="noopener ugc nofollow" target="_blank"> Vite </a>来搭建项目。你可能会奇怪为什么我不用官方的<a class="ae kc" href="https://cli.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue CLI </a>工具。原因是Vite真的很快，在这种情况下我只想快速演示一下。另一方面，Vue CLI建立在强大而流行的<a class="ae kc" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>之上，将给你带来一个令人惊叹的插件生态系统(并且它与Vue 2兼容)。所以，现在我们用<a class="ae kc" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank"> <em class="le">纱</em> </a> <em class="le"> </em>(你可以用npm代替，只是个人喜好，虽然我更喜欢纱的速度)来创建我们新的web app(需要Node.js版本&gt; =12.0.0。)</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="b56e" class="lr ls iq ln b gy lt lu l lv lw">yarn create @vitejs/app</span></pre><p id="aeb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入命令后，会提示您选择一些选项。然后我们<em class="le"> cd </em>到你的工作目录，运行以下命令来安装一些工具:VueX(4 . x版)，eslint以及它的Vue和axios插件。</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="7b7a" class="lr ls iq ln b gy lt lu l lv lw">yarn<br/>yarn add axios vuex@next --save<br/>yarn add -D eslint eslint-plugin-vue<br/>yarn eslint --init<br/>yarn dev</span></pre><p id="566a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您可以打开浏览器并转到地址<code class="fe lx ly lz ln b"><a class="ae kc" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a> </code>来查看dev服务器是否正在运行。</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/39014571a51730d5314af7bd4c3c3589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgjDo88OE9gCPZtsSjZm-Q.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">dev服务器运行在localhost:3000上</figcaption></figure><p id="6cb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于界面，我将使用Tailwind，并且“<em class="le"> Vue 3和Vite还不支持PostCSS 8，所以你需要安装Tailwind CSS v2.0 PostCSS 7”。</em></p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="033f" class="lr ls iq ln b gy lt lu l lv lw">yarn add -D tailwindcss@npm:@tailwindcss/postcss7-compat @tailwindcss/postcss7-compat postcss@^7 autoprefixer@^9</span></pre><p id="f0a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，要生成<em class="le"> tailwind.config.js </em>和<em class="le"> postcss.config.js </em>文件，运行:</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="3851" class="lr ls iq ln b gy lt lu l lv lw">npx tailwindcss init -p</span></pre><p id="d63b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来自官方指南:<em class="le">“在你的</em> <code class="fe lx ly lz ln b"><em class="le">tailwind.config.js</em></code> <em class="le">文件中，用所有页面和组件的路径配置</em> <code class="fe lx ly lz ln b"><em class="le">purge</em></code> <em class="le">选项，这样Tailwind就可以在产品构建中对未使用的样式进行树抖动。”</em></p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="afbd" class="lr ls iq ln b gy lt lu l lv lw">module.exports = {<br/>    purge: ['./index.html', './src/**/*.{vue,js,ts,jsx,tsx}'],<br/>    darkMode: false, // or 'media' or 'class'<br/>    theme: {<br/>      extend: {},<br/>    },<br/>    variants: {<br/>      extend: {},<br/>    },<br/>    plugins: [],<br/>}</span></pre><p id="7afa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe lx ly lz ln b">src/assets/css</code>中创建一个新文件<code class="fe lx ly lz ln b">main.css</code>:</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="3cd4" class="lr ls iq ln b gy lt lu l lv lw">/* ./src/<!-- -->assets/css/main<!-- -->.css */<br/><br/>/*! @import */<br/>@tailwind base;<br/>@tailwind components;<br/>@tailwind utilities;</span></pre><p id="c530" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们需要首先从HackerNews获取数据到VueX store。在下面的代码片段中，我还设置了axios实例，以便我们以后可以重用它。HackerNews的API获取头条新闻只返回id，因此我们需要在收到数组后获取每个单独的条目。</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="80cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们在<code class="fe lx ly lz ln b">components/Stories.vue</code>创建一个新组件，如下所示:</p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="cea5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后将VueX添加到<code class="fe lx ly lz ln b">main.js</code></p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="32a1" class="lr ls iq ln b gy lt lu l lv lw">import { createApp } from "vue";<br/>import App from "./App.vue";<br/>import store from "./store";<br/>import "./assets/css/main.css";</span><span id="9a1e" class="lr ls iq ln b gy md lu l lv lw">const app = createApp(App);<br/>app.use(store);<br/>app.mount("#app");</span></pre><p id="a8ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们编辑<code class="fe lx ly lz ln b">App.vue</code></p><figure class="li lj lk ll gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="e197" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开<code class="fe lx ly lz ln b"><a class="ae kc" href="http://localhost:300" rel="noopener ugc nofollow" target="_blank">http://localhost:300</a>0</code>和中提琴</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/4a719b1edb6c3f7964a59f9df8136293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xI5VfEAvOjIWWUZVal3rEg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">黑客新闻头条</figcaption></figure><p id="733a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嗯，我忘了时间，我们需要让它更易读，而不是一串数字。我将使用<code class="fe lx ly lz ln b">timeago.js</code>包来操纵。</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="142e" class="lr ls iq ln b gy lt lu l lv lw">yarn add timeago.js</span></pre><p id="3138" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们在<code class="fe lx ly lz ln b">Stories.vue</code>中添加一个新方法</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="6606" class="lr ls iq ln b gy lt lu l lv lw">methods: {<br/>  parseTime(t) {<br/>    return timeago.format(t * 1000);<br/>  }<br/>},</span></pre><p id="3dc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并在模板部分实现它:</p><pre class="li lj lk ll gt lm ln lo lp aw lq bi"><span id="bc3f" class="lr ls iq ln b gy lt lu l lv lw">&lt;div class="text-sm text-gray-500"&gt;{{ parseTime(item.time) }}&lt;/div&gt;</span></pre><p id="d081" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">重新加载页面。</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/37de60bc551f806ac57eca2c032f75a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXsZUEZBBqxUbT751gDUCw.png"/></div></div></figure><p id="3a54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终的源代码在<a class="ae kc" href="https://github.com/infantiablue/vhnews" rel="noopener ugc nofollow" target="_blank"> Github repo </a>上。</p><p id="256f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一篇文章中，我们将实现Vue组件的高级特性来动态呈现它们。如果能收到你们的任何反馈，我将不胜感激。您可能想继续阅读第2部分，该部分将实现黑暗模式，并通过使用HackerNews API从其他主题中获取故事。</p><p id="f3a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="le">本帖原帖来自</em> <a class="ae kc" href="https://techika.com/2021/01/09/build-hackernews-reader-vuejs-tailwind-p1/" rel="noopener ugc nofollow" target="_blank"> <em class="le">我的博客</em> </a> <em class="le">。</em></p><p id="e93f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">资源:</p><ul class=""><li id="dca6" class="mg mh iq kf b kg kh kk kl ko mi ks mj kw mk la ml mm mn mo bi translated"><a class="ae kc" href="https://vitejs.dev/" rel="noopener ugc nofollow" target="_blank">维特。JS </a></li><li id="61bc" class="mg mh iq kf b kg mp kk mq ko mr ks ms kw mt la ml mm mn mo bi translated"><a class="ae kc" href="https://next.vuex.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vuex@Next </a></li><li id="a675" class="mg mh iq kf b kg mp kk mq ko mr ks ms kw mt la ml mm mn mo bi translated"><a class="ae kc" href="https://github.com/HackerNews/API" rel="noopener ugc nofollow" target="_blank">官方黑客新闻API </a></li><li id="648b" class="mg mh iq kf b kg mp kk mq ko mr ks ms kw mt la ml mm mn mo bi translated"><a class="ae kc" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank">顺风CSS </a></li></ul></div></div>    
</body>
</html>