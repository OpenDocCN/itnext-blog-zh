<html>
<head>
<title>How to build an API with AWS Lambda and API Gateway using CloudFormation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用CloudFormation构建一个带有AWS Lambda和API网关的API</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-build-an-api-with-aws-lambda-and-api-gateway-using-cloudformation-bd5f9249ac2f?source=collection_archive---------0-----------------------#2018-10-09">https://itnext.io/how-to-build-an-api-with-aws-lambda-and-api-gateway-using-cloudformation-bd5f9249ac2f?source=collection_archive---------0-----------------------#2018-10-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="744a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可能已经听过API这个流行词很多次了。API代表“应用程序编程接口”。如果你不知道这是什么意思，官方定义如下:</p><p id="9bdf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">“应用编程接口(API)是一组协议、例程、函数和/或命令，程序员使用它们来开发软件或促进不同系统之间的交互。”—技术百科</p><p id="6ac8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">Ref—</em><a class="ae kp" href="https://www.techopedia.com/definition/24407/application-programming-interface-api" rel="noopener ugc nofollow" target="_blank">https://www . techopedia . com/definition/24407/application-programming-interface-API</a></p><p id="34ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用非常简单的话来说，这意味着API是计算机程序或软件相互共享信息或数据的一种方式。公司软件使用它们与其他公司软件交换信息，甚至在同一公司内交换信息。如今，API的使用非常广泛，尤其是随着大数据技术和价格合理的云计算的快速普及。</p><p id="6c3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每次你在手机上打开一个应用程序，它最有可能是向另一个软件发出API请求。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/48a6d91514e3a567db74e7c38ab81296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*RjN-9fXxX1O535V14r2MaQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">API如何工作</figcaption></figure><p id="54bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇文章中，我将向你展示如何通过6个步骤使用亚马逊网络服务(AWS)创建你的第一个API。您将使用CloudFormation，这是Amazon创建“基础设施即代码(IaC)”的模板语言，这意味着我们可以定义一个模板(在这种情况下是JSON)来提供构建API所需的每个AWS资源。</p><p id="deda" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以在下面的AWS控制台中找到使用IaC而不是手动创建资源的好处。</p><div class="lg lh gp gr li lj"><a href="https://www.linkedin.com/pulse/cloud-infrastructure-code-why-eric-sales-de-andrade/" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">云基础设施作为代码？为什么？</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">以下是您应该始终考虑将云基础设施编写为代码(IaC)的5个原因。1)再现性…</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">www.linkedin.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx la lj"/></div></div></a></div><h2 id="774d" class="ly lz it bd ma mb mc dn md me mf dp mg kb mh mi mj kf mk ml mm kj mn mo mp mq bi translated">所需的技能和知识</h2><p id="6ea3" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">这篇文章假设了一些关于Python，AWS CLI(命令行界面)和AWS服务的基本知识主要是Lambda，API Gateway，CloudFormation，IAM Roles，CloudWatch，Service和IAM Roles。</p><p id="3412" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">请注意:作为此次部署的一部分，您可能会产生AWS费用。请检查您的免费层利用率，并确保您了解所涉及的AWS费用。</em>T9】</strong></p><h1 id="d2a4" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated">步骤1设计您的无服务器API和架构</h1><p id="fe15" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">在编写任何代码、模板或在控制台中创建资源之前，规划API和架构非常重要。</p><p id="0ef2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">在这个例子中，你将创建一个API，当它被调用时，用一个URL响应存储在S3桶中的汽车图片。</strong></p><p id="0f87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是在<a class="ae kp" href="https://cloudcraft.co/" rel="noopener ugc nofollow" target="_blank">https://cloudcraft.co/</a>为本教程创建的架构图。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nn"><img src="../Images/dc67c76a178f896974236c675738d6e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gLNMXpR3m8lfkH7GxAvaEA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">API架构图(用<a class="ae kp" href="https://cloudcraft.co/" rel="noopener ugc nofollow" target="_blank">https://cloudcraft.co/</a>创建)</figcaption></figure><p id="884d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们来看看对上述架构的解释</p><ul class=""><li id="4838" class="no np it js b jt ju jx jy kb nq kf nr kj ns kn nt nu nv nw bi translated">S3桶→用于将汽车图像存储在前缀形式为<brand> / <image-name>的桶中。</image-name></brand></li><li id="ec48" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">Lambda function →该函数将包含基于传递给API (POST请求)的参数获取S3图像URL的代码。</li><li id="0999" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">API Gateway →带有POST方法的REST API，接受您希望获取图像的汽车的“品牌”名称。</li><li id="0ecc" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">IAM用户→被授权调用此API并获取汽车图片URL和查看图片的用户。</li><li id="e667" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">CloudWatch日志→捕获Lambda函数执行和API网关调用的日志。</li><li id="91e1" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">Lambda服务角色→授予Lambda访问S3存储桶权限的服务角色。</li><li id="bd90" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">API网关服务角色→授予API网关访问权以调用Lambda函数的服务角色。</li></ul><h1 id="0c01" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated">步骤2-创建S3存储桶并将内容加载到其中</h1><p id="3c43" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">现在架构已经清晰了，是时候创建一个S3桶并将图像上传到其中了。为此，请访问S3并点击“创建存储桶”。</p><p id="9460" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意，您也可以在CloudFormation中创建bucket(因为我们将在下面创建所有其他资源)，但是为了简单起见，我们手动创建了它。</p><p id="910a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">桶名→“汽车-图片-高清”<strong class="js iu">(请注意这一点)</strong></p><p id="5f14" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以“品牌”名称作为前缀存储的图像(文件夹)。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi oc"><img src="../Images/2ecf7a024f95cf448d7f4df10367cac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8OoztPUAXJchWcDekF6UWg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">带有图像的S3桶</figcaption></figure><h1 id="f353" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated">步骤3创建云形成模板</h1><p id="b0e9" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">如上所述，我们将使用CloudFormation创建和提供所有需要的资源。最大的好处是，基础架构可以在任何帐户中轻松地复制任意次数。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="b9ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们在上面的模板中创建了以下资源</p><ul class=""><li id="d5f2" class="no np it js b jt ju jx jy kb nq kf nr kj ns kn nt nu nv nw bi translated">AWS::IAM::Role (Lambda服务角色)</li><li id="c8ef" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::IAM::Role (API网关服务角色)</li><li id="fbd9" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::Lambda::函数(Lambda函数)</li><li id="6131" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::API gateway::RestApi(Rest API)</li><li id="e1e1" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::IAM::User (API调用程序IAM用户)</li><li id="587a" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::IAM::ManagedPolicy(上述IAM用户的托管策略)</li><li id="5e07" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::Lambda::Permission(API网关调用Lambda函数的权限)</li><li id="e5cd" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::Logs::LogGroup(接受来自Lambda函数和API网关的日志的日志组)</li><li id="9ba6" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::IAM::Role (CloudWatch角色)</li><li id="2c63" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::S3::BucketPolicy(仅向创建的用户授予get_object访问权限的存储桶策略)</li><li id="0b2f" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::ApiGateway::帐户(部署API网关阶段所需)</li><li id="1a9c" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::ApiGateway::Stage (API网关阶段)</li><li id="cfaa" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">AWS::ApiGateway::Deployment(部署REST API)</li></ul><h2 id="6d2b" class="ly lz it bd ma mb mc dn md me mf dp mg kb mh mi mj kf mk ml mm kj mn mo mp mq bi translated">AWS云信息资源模板定义</h2><div class="lg lh gp gr li lj"><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">AWS资源类型参考- AWS云信息</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">列出了AWS CloudFormation支持的所有AWS资源类型的详细参考信息。</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">docs.aws.amazon.com</p></div></div><div class="ls l"><div class="of l lu lv lw ls lx la lj"/></div></div></a></div><h1 id="a63d" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated">步骤4 -创建并压缩Lambda函数</h1><p id="cad7" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">下面是一个简单的Lambda函数，您将使用它从S3桶中获取对象URL。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="bac3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Lambda函数的名称已经编码到CloudFormation模板的第78行中，所以如果您确实要更改Lambda函数的名称，请确保更改它和处理程序(在第80行)。</p><p id="f1b8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">压缩Get_Car.py文件，并将其作为Get_Car.zip上传到S3 Bucket“car-images-HD”。确保在部署CloudFormation模板之前完成此操作，因为Lambda函数将使用此Zip文件作为其代码。</p><h1 id="9521" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated">步骤5—使用CLI部署云信息模板</h1><p id="511d" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">下一步是用AWS命令行界面部署CloudFormation模板。请确保您已经使用AWS配置输入了安全凭据，如访问密钥和安全访问密钥。你可以在下面找到如何做到这一点。</p><div class="lg lh gp gr li lj"><a href="https://docs.aws.amazon.com/lambda/latest/dg/setup-awscli.html" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">设置AWS命令行界面(AWS CLI) - AWS Lambda</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">本指南中的所有练习都假设您在帐户中使用管理员用户凭据(adminuser)…</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">docs.aws.amazon.com</p></div></div><div class="ls l"><div class="og l lu lv lw ls lx la lj"/></div></div></a></div><p id="4667" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据您存储云形成模板(CFT)的位置，您可以使用下面的命令从终端部署CFT。</p><pre class="kr ks kt ku gt oh oi oj ok aw ol bi"><span id="a5bd" class="ly lz it oi b gy om on l oo op">aws cloudformation create-stack — stack-name YOURSTACKNAME — template-body file://YOURSTACKLOCATION/FILENAME.json — capabilities CAPABILITY_NAMED_IAM</span></pre><p id="c5b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如我的可以在下面找到</p><pre class="kr ks kt ku gt oh oi oj ok aw ol bi"><span id="f499" class="ly lz it oi b gy om on l oo op">aws cloudformation create-stack — stack-name getcarapi — template-body file://~/Documents/MyOwn/aws-templates-and-code/lambda_apigateway_cft.json — capabilities CAPABILITY_NAMED_IAM</span></pre><p id="2460" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您的命令成功，您应该会看到一个堆栈ID ARN，如下所示</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi oq"><img src="../Images/df6c5f1df8dcec9d56db01e905753efe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nlZIAwROrHGuudXWF3hp6g.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">在CLI中创建堆栈</figcaption></figure><p id="c099" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后登录AWS控制台，您应该能够看到现在已经创建了堆栈。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi or"><img src="../Images/4dad72de671daa9576036ede70203c17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_gZnUwckcX2SVsEnuB19g.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">堆栈已创建</figcaption></figure><p id="7566" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您的CFT由于某种原因未能创建，您应该会看到红色的ROLLBACK_IN_PROGRESS消息，在这种情况下，您可以单击堆栈名称来查看错误。删除堆栈，纠正JSON中的错误并重新部署。</p><h1 id="2a36" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated">步骤6—测试您的API</h1><p id="5b7d" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">手指交叉，你已经正确地部署了整个资源栈。现在，您应该能够测试刚刚创建的API了。但是首先你需要做两步。</p><ol class=""><li id="7fef" class="no np it js b jt ju jx jy kb nq kf nr kj ns kn os nu nv nw bi translated">获取API IAM用户调用者凭据</li></ol><p id="12f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">单击IAM →选择用户→选择安全凭据，并记下访问密钥和秘密访问密钥。</p><p id="f112" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.获取该阶段的API端点</p><p id="06d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到API Gateway →找到您的API →单击Stages →单击您的stage上的下拉菜单→单击Post并记下URL端点。</p><p id="8b92" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在您已经准备好测试您的API了。为此，你可以使用邮递员或任何其他工具。</p><h2 id="da8f" class="ly lz it bd ma mb mc dn md me mf dp mg kb mh mi mj kf mk ml mm kj mn mo mp mq bi translated">在邮递员中测试</h2><p id="cb62" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">在“授权”选项卡中，</p><ul class=""><li id="0108" class="no np it js b jt ju jx jy kb nq kf nr kj ns kn nt nu nv nw bi translated">选择“AWS签名”。</li><li id="b437" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">输入API调用方的访问密钥和秘密访问密钥。</li><li id="28eb" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">输入您的AWS区域。</li><li id="9264" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">对于服务名，您可以使用“execute-api”。</li></ul><p id="3b66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在转到“正文”选项卡，</p><ul class=""><li id="fdc5" class="no np it js b jt ju jx jy kb nq kf nr kj ns kn nt nu nv nw bi translated">在上面的框中输入API端点</li><li id="76f0" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">您可以输入下面的测试有效载荷并点击发送</li></ul><pre class="kr ks kt ku gt oh oi oj ok aw ol bi"><span id="3ea9" class="ly lz it oi b gy om on l oo op">{<br/> "brand": "mini"<br/>}</span></pre><p id="b127" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该会收到一个带有S3网址的响应(如下所示)</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ot"><img src="../Images/cea77fc0cc577c1f91db991865432048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTykS2H9RlU9padNI2gzZw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">调用API网关获取S3 URL</figcaption></figure><ul class=""><li id="a5ab" class="no np it js b jt ju jx jy kb nq kf nr kj ns kn nt nu nv nw bi translated">单击图片中的URL，这将在Postman中打开一个新的选项卡，输入相同的AWS凭据，然后点击SEND。您现在应该收到您的图像(响应时间将取决于图像的大小和您的互联网连接)。</li></ul><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ou"><img src="../Images/8d70ace22775fae5033ba24cdf3784e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vt2cQbgZRa4g-l7BhEua3w.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">图片来自https://www.pexels.com的S3网址(图片由<a class="ae kp" href="https://www.pexels.com" rel="noopener ugc nofollow" target="_blank">提供)</a></figcaption></figure><p id="8d8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您已经成功地创建了您的第一个API。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="ov oe l"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">https://giphy.com/<a class="ae kp" href="https://giphy.com/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><h1 id="ca9d" class="mw lz it bd ma mx my mz md na nb nc mg nd ne nf mj ng nh ni mm nj nk nl mp nm bi translated"><strong class="ak">结论</strong></h1><ul class=""><li id="5fc1" class="no np it js b jt mr jx ms kb ow kf ox kj oy kn nt nu nv nw bi translated">在本教程中，您理解并使用AWS S3、Lambda和API Gateway创建了自己的无服务器API。</li><li id="7c6f" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">使用CloudFormation(或Terraform是云不可知的)总是更好，因为它更容易更好地将资源作为代码供应，原因如上所述，主要是部署的速度和方便性。</li><li id="f451" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">使用无服务器方法有许多优点和缺点，主要集中在响应时间、可伸缩性和成本方面。</li><li id="1c17" class="no np it js b jt nx jx ny kb nz kf oa kj ob kn nt nu nv nw bi translated">最重要的是在设计API时考虑到可伸缩性，API Gateway附带了每秒10，000个请求的软限制(这意味着您可以调用AWS支持来增加它)。Lambda遭受冷启动问题，这意味着如果你的计算或返回负载非常重，它可能需要一段时间才能执行。</li></ul><p id="fdc4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这篇教程对你有所帮助，并且你已经了解了一些API。请联系我，并通过下面的评论告诉我你喜欢或不喜欢这个帖子的地方。</p></div></div>    
</body>
</html>