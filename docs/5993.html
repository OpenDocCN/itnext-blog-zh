<html>
<head>
<title>One-Step Ingress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一步进入</h1>
<blockquote>原文：<a href="https://itnext.io/one-step-ingress-57e748b0575a?source=collection_archive---------7-----------------------#2021-07-19">https://itnext.io/one-step-ingress-57e748b0575a?source=collection_archive---------7-----------------------#2021-07-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/515defcf13b5cb6837e2719417397373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gaME5-b7lnadA1zX.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">一步到位保护和连接您的微服务</figcaption></figure><h1 id="f684" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用一个命令保护和连接微服务</h1><p id="78ef" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><a class="ae ly" href="https://getenroute.io/docs/getting-started-enroute-ingress-controller/" rel="noopener ugc nofollow" target="_blank">途中入口</a>允许您一步到位地在Kubernetes入口为服务配置任何安全策略</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/4667c55dd8ca1546cd7ce8c6e1969d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Tk2Sy_EBLTAgcaru.jpeg"/></div></div></figure><p id="d659" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">例子包括-</p><ul class=""><li id="164c" class="mj mk iq lc b ld me lh mf ll ml lp mm lt mn lx mo mp mq mr bi translated"><a class="ae ly" href="https://getenroute.io/docs/ingress-filter-legos-secure-microservices-apis-using-helm-envoy/" rel="noopener ugc nofollow" target="_blank">从Let's Encrypt </a>获取、验证并安装SSL证书</li><li id="a644" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated"><a class="ae ly" href="https://getenroute.io/reference/plugins/advanced-rate-limiting/" rel="noopener ugc nofollow" target="_blank">服务的速率限制配置</a></li><li id="6a54" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated"><a class="ae ly" href="https://getenroute.io/reference/plugins/jwt/" rel="noopener ugc nofollow" target="_blank">服务的JWT验证</a></li><li id="d940" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated"><a class="ae ly" href="https://getenroute.io/reference/plugins/lua/" rel="noopener ugc nofollow" target="_blank">将Lua脚本附加到服务的请求/响应路径上</a></li><li id="d498" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated"><a class="ae ly" href="https://getenroute.io/reference/plugins/cors/" rel="noopener ugc nofollow" target="_blank">为服务启用CORS</a></li></ul><p id="c0d7" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">除此之外，在不久的将来，我们计划扩展对的支持</p><ul class=""><li id="01c0" class="mj mk iq lc b ld me lh mf ll ml lp mm lt mn lx mo mp mq mr bi translated">设置外部dns以自动创建DNS记录并设置DNS自动证书续订</li><li id="3343" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated">更多的安全模块，如CSRF过滤器，以防止请求伪造和IP标签，以标记可信的IP地址</li><li id="3676" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated">使用WASM提供现成的Web程序集代码调用功能，从而提高可编程性</li></ul><h1 id="07e9" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">真正的宣言</h1><p id="304e" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">途中模型是真正的声明式服务策略。服务策略不需要配置，声明它就足够了。声明后，将自动为服务创建并实施策略配置。</p><p id="6255" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">例如，要启用JWT插件，只需调用-</p><pre class="ma mb mc md gt mx my mz na aw nb bi"><span id="f13a" class="nc kd iq my b gy nd ne l nf ng">helm install httpbin-service-policy saaras/service-policy       \<br/>        --set service.namespace<strong class="my ir">=</strong>demo-service                    \<br/>        --set service.name<strong class="my ir">=</strong>httpbin                              \<br/>        --set service.port<strong class="my ir">=80</strong>                                   \<br/>        --set filters.jwt.enable<strong class="my ir">=</strong>true                           \</span></pre><p id="cb85" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">这将启用服务的JWT插件<code class="fe nh ni nj my b">httpbin</code></p><h1 id="a85f" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用相同的抽象更新L7策略块</h1><p id="595f" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">L7策略块(如SSL、CORS、JWT、速率限制等。)可以声明性地包含/排除。可以使用一个舵命令添加或删除它们。</p><p id="741a" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">舵图支持启用/禁用服务过滤器</p><p id="fcf3" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">复制</p><pre class="ma mb mc md gt mx my mz na aw nb bi"><span id="a825" class="nc kd iq my b gy nd ne l nf ng">helm upgrade httpbin-service-policy saaras/service-policy       \<br/>        --set service.namespace<strong class="my ir">=</strong>demo-service                    \<br/>        --set service.name<strong class="my ir">=</strong>httpbin                              \<br/>        --set service.prefix<strong class="my ir">=</strong>/get                               \<br/>        --set service.port<strong class="my ir">=80</strong>                                   \<br/>        --set service.enableTLS<strong class="my ir">=</strong>true                            \<br/>        --set autoTLS.certificateCN<strong class="my ir">=</strong>httpbin.enroutedemo.com     \<br/>        --set autoTLS.enableProd<strong class="my ir">=</strong>true                           \<br/>        --set autoTLS.createIssuers<strong class="my ir">=</strong>true                        \<br/>        --set autoTLS.email<strong class="my ir">=</strong>contact@example.com                 \<br/>        --set filters.cors.enable<strong class="my ir">=</strong>true                          \<br/>        --set filters.jwt.enable<strong class="my ir">=</strong>false                          \</span></pre><p id="eb14" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">可以使用<code class="fe nh ni nj my b">helm install</code>指定声明性策略。使用<code class="fe nh ni nj my b">helm upgrade</code>声明性地修改这个策略，将服务的L7策略协调到新的状态。</p><h1 id="c075" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">高级抽象</h1><p id="8483" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">一步到位提供了更高层次的抽象。与汇编代码相比，这类似于更高级的编程语言。</p><p id="e949" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">更高级别的抽象(和语言)简化了入口编程。</p><p id="71ec" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">EnRoute利用现有的Envoy过滤器抽象，并将其扩展到入口层。在使用众所周知的EnRoute过滤器抽象时，使用像<code class="fe nh ni nj my b">helm</code>这样的众所周知的工具是很简单的。它为特使代理形成了一个轻量级的垫片。</p><h1 id="3163" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">安全第一</h1><p id="4488" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">EnRoute与Let's Encrypt的深度集成从根本上简化了证书的设置、验证和安装。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/2f7862871353f41014aba499b126c67e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e4hwebwDIvN8ic-1.gif"/></div></div></figure><h1 id="25e3" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">开箱详情</h1><p id="f84e" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">舵命令<a class="ae ly" href="https://getenroute.io/docs/getting-started-enroute-ingress-controller/" rel="noopener ugc nofollow" target="_blank">创建</a> <code class="fe nh ni nj my b"><a class="ae ly" href="https://getenroute.io/docs/getting-started-enroute-ingress-controller/" rel="noopener ugc nofollow" target="_blank">GatewayHost</a></code> <a class="ae ly" href="https://getenroute.io/docs/getting-started-enroute-ingress-controller/" rel="noopener ugc nofollow" target="_blank">和相关工件</a>以支持安装不同的滤镜。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c48894eb6fe5bdedc7217e77a3a8b27c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jGsAd2t9pRlKy39V.jpeg"/></div></div></figure><p id="7676" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">创建工件的<a class="ae ly" href="https://github.com/saarasio/enroute/tree/master/helm-chart" rel="noopener ugc nofollow" target="_blank"> helm代码可以被修改以满足创建微服务连接和安全配置文件。</a></p><h1 id="f5cb" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">在途中单步入口控制器上运行策略的优势</h1><p id="9ada" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">运行入口控制器并在入口实施策略有几个明显的优势。</p><ul class=""><li id="5b55" class="mj mk iq lc b ld me lh mf ll ml lp mm lt mn lx mo mp mq mr bi translated">Ingress提供了一种可移植的机制来在Kubernetes集群内部实施策略。在集群内部实施的策略更容易跨云移植。</li><li id="66f9" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated">入口可以在Kubernetes集群内水平扩展。L7面料的弹性使其更容易操作和伸缩</li><li id="44a6" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated">L7策略可以与服务一起托管在具有群集本机状态存储的群集中</li><li id="ce86" class="mj mk iq lc b ld ms lh mt ll mu lp mv lt mw lx mo mp mq mr bi translated">让L7策略更接近服务简化了策略实施以及服务和API的故障排除。</li></ul><h1 id="6a12" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="4c2e" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">单步导入提供了一个机会，使导入变得非常容易理解和操作。它减少了配置服务连接和策略选项所需的工件数量。当有更高层次的抽象时，使用Kubernetes可以提高操作速度，而不会牺牲DevOps的灵活性</p><p id="802c" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">由于Kubernetes被作为运行微服务和采用DevOps实践的标准，使用更少的工具可以减少移动部件的数量。途中一步进入通过依赖helm和Envoy等现有工具来提高简单性和操作速度。</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="7f65" class="pw-post-body-paragraph la lb iq lc b ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx ij bi translated">有问题吗？<a class="ae ly" href="https://join.slack.com/t/saaras-io/shared_invite/zt-pz1qay34-9UNGwJWTOMG5jolGrbWH~g" rel="noopener ugc nofollow" target="_blank">时差</a> <a class="ae ly" href="https://getenroute.io/contact" rel="noopener ugc nofollow" target="_blank">给我们发短信</a></p></div></div>    
</body>
</html>