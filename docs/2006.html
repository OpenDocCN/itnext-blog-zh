<html>
<head>
<title>Inner-Loop Container Native Development with Draft</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带草稿的内循环容器本机开发</h1>
<blockquote>原文：<a href="https://itnext.io/inner-loop-container-native-development-with-draft-2f74f7c7f6a2?source=collection_archive---------2-----------------------#2019-03-14">https://itnext.io/inner-loop-container-native-development-with-draft-2f74f7c7f6a2?source=collection_archive---------2-----------------------#2019-03-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/89a53f4f3ccee461adb3581b418ed483.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*huXT9V_leYSRiN8snq_x0Q.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">一种不同的草案</figcaption></figure><div class=""/><div class=""><h2 id="1fba" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">使用Draft简化内循环容器本机应用程序开发的构建、推送和部署过程</h2></div><p id="ac28" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我正在探索一系列开源工具来简化容器原生开发工作流的内部循环。这描述了您正在编写代码，但是还没有将它推送到版本控制系统的一段时间。这些工具，<a class="ae lq" href="https://draft.sh" rel="noopener ugc nofollow" target="_blank"><strong class="kw jg"/></a><a class="ae lq" href="http://skaffold.dev" rel="noopener ugc nofollow" target="_blank"><strong class="kw jg">ska ffold</strong></a>和<a class="ae lq" href="https://tilt.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg"> Tilt </strong> </a>每一个都对手头的任务采取不同的方法。每个工具都可以用来构建项目的映像，将映像推送到您选择的注册服务，并将映像部署到Kubernetes集群上。采用这些工具将释放你的时间，让你专注于编写代码。你可以在我的第一篇<a class="ae lq" href="https://medium.com/@m.r.boxell/local-container-native-development-tools-ef4b1beb472c" rel="noopener">帖子</a>中了解更多关于这个系列背后的动机。</p><h2 id="859a" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">定义</h2><p id="523e" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated"><a class="ae lq" href="https://github.com/Azure/draft" rel="noopener ugc nofollow" target="_blank"> Draft </a>简化了开发人员开始将他们的应用部署到Kubernetes的过程。它通过为各种编程语言创建样板文件，并启用工作流来构建、推送和部署您的应用程序到Kubernetes集群。</p><h2 id="5951" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">区分者</h2><p id="b95b" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">选秀因其低门槛而与众不同。大多数开发人员希望利用他们现有的编程知识快速测试如何使用Kubernetes。他们可能不具备Kubernetes的专业知识或使用<code class="fe mp mq mr ms b">kubectl</code>的实际经验。使用Draft，开发人员可以用两个命令将他们的应用程序部署到Kubernetes集群上:<code class="fe mp mq mr ms b">draft create</code>和<code class="fe mp mq mr ms b">draft up</code>。</p><p id="f0de" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><code class="fe mp mq mr ms b">draft create</code>用于检测您正在开发的应用程序的语言，并生成将应用程序部署到您的集群所需的工件。这是通过<strong class="kw jg">草稿包</strong>完成的，它提供了一个针对你所选语言的Dockerfile和Helm chart。大多数流行的编程语言都有例子。这可以节省您从头开始编写Dockerfile或Kubernetes清单的时间。<code class="fe mp mq mr ms b">draft up</code>读取您的配置，并为您处理构建、推送和部署步骤。</p><p id="e1ae" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">与Skaffold和Tilt不同，Draft不会持续监视应用程序的变化。每次你想更新应用程序时，你都需要运行<code class="fe mp mq mr ms b">draft up</code>。目前，Draft仅支持根目录中的单个docker文件和图表，这使得使用Draft同时部署多个微服务成为一项挑战。Draft依赖Helm，这是Kubernetes的一个包管理工具。Helm是一个用于将工件部署到Kubernetes集群的常用工具。如果它恰好是用于部署到您的生产集群的相同工具，这对于您在本地使用可能是有益的，但是拥有Skaffold的可插拔架构的灵活性会更好，它为您提供了使用其他工具进行部署的选项。与使用<code class="fe mp mq mr ms b">kubectl</code>不同，Helm必须单独安装，并且在许多情况下需要RBAC的配置。</p><p id="67ee" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">值得注意的是，截至2019年3月，GitHub for Draft的提交数和星级数约为Skaffold的一半，并且最近的提交数远远少于Skaffold。</p><figure class="mu mv mw mx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/24693a92f7d5f5956373e21e15be5e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mlUjY5lXNTvtlpIuC7UaPA.png"/></div></div></figure><h2 id="d0e1" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">要求</h2><p id="6e62" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">-<a class="ae lq" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank">Docker For Desktop</a><br/>-<a class="ae lq" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank">Kubectl</a><br/>-<a class="ae lq" href="https://docs.cloud.oracle.com/iaas/Content/ContEng/Concepts/contengoverview.htm" rel="noopener ugc nofollow" target="_blank">Oracle Container Engine For Kubernetes(OKE)</a><br/>-<a class="ae lq" href="https://docs.cloud.oracle.com/iaas/Content/Registry/Concepts/registryoverview.htm" rel="noopener ugc nofollow" target="_blank">Oracle Cloud infra structure Registry(OCIR)</a><br/>-<a class="ae lq" href="https://github.com/kubernetes/helm#install" rel="noopener ugc nofollow" target="_blank">Helm</a></p><h2 id="8a11" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">装置</h2><p id="46db" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">更详细的安装信息可以在<a class="ae lq" href="https://github.com/Azure/draft/blob/master/docs/install-cloud.md" rel="noopener ugc nofollow" target="_blank">GitHub草案页面</a>上找到。</p><p id="ab18" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">下载并安装草稿:</p><p id="dcec" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><code class="fe mp mq mr ms b">brew tap azure/draft &amp;&amp; brew install azure/draft/draft</code></p><p id="cf0a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">验证您的安装:</p><p id="49f5" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><code class="fe mp mq mr ms b">draft version</code></p><p id="6c40" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">要安装默认插件并配置<code class="fe mp mq mr ms b">$DRAFT_HOME</code>，请运行<code class="fe mp mq mr ms b">draft init</code>。</p><p id="7632" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">安装将在您的主目录中创建一个<code class="fe mp mq mr ms b">/.draft</code>文件夹来存储配置信息。</p><h2 id="df4a" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">本地配置</h2><p id="b3f8" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">在GitHub上克隆<a class="ae lq" href="https://github.com/Azure/draft" rel="noopener ugc nofollow" target="_blank">草稿库</a>并切换到<code class="fe mp mq mr ms b">/examples/example-go</code>目录。为了将<code class="fe mp mq mr ms b">main.go</code>应用程序部署到Kubernetes集群，我们需要Dockerfile、Helm chart和draft.toml。这些构件可以通过运行<code class="fe mp mq mr ms b">draft create</code>轻松创建。Draft检测目录中应用程序的语言，在本例中是Go: <code class="fe mp mq mr ms b">→ Draft detected Go (100.000000%)</code>并相应地创建支架:</p><pre class="mu mv mw mx gt my ms mz na aw nb bi"><span id="65fd" class="lr ls jf ms b gy nc nd l ne nf">$ ls <br/>Dockerfile charts draft.toml glide.yaml main.go</span></pre><ul class=""><li id="d959" class="ng nh jf kw b kx ky la lb ld ni lh nj ll nk lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">Dockerfile</code>以默认的Go图像开始。它将在<code class="fe mp mq mr ms b">requirements.txt</code>中安装依赖项，并将当前目录复制到<code class="fe mp mq mr ms b">/usr/src/app</code></li><li id="d701" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">Helm图表包括用于将应用程序部署到集群的Kubernetes清单文件。在这种情况下，<code class="fe mp mq mr ms b">/charts</code>和<code class="fe mp mq mr ms b">Dockerfile</code>工件支持Go配置。</li><li id="a41d" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">draft.toml</code>文件包含应用程序配置细节:应用程序名称、图像存储库、Kubernetes名称空间等..</li></ul><p id="0190" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">使用本地上下文时，您可以绕过图像推送步骤。这将导致您直接从本地机器部署到Docker for Desktop cluster。如果您没有配置图像注册表，您将在运行<code class="fe mp mq mr ms b">draft up</code> : <code class="fe mp mq mr ms b">WARNING: no registry has been set, therefore Draft will not push to a container registry</code>后收到此消息。</p><p id="8d6f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">配置完注册中心后，就可以将应用程序部署到本地Kubernetes集群了。Draft将使用您当前的Kubernetes上下文来确定您的应用程序将部署在哪个集群上。要找到您的上下文，请运行:<code class="fe mp mq mr ms b">kubectl config current-context</code>。</p><h2 id="9290" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">部署应用程序</h2><p id="a129" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">运行命令<code class="fe mp mq mr ms b">draft up</code>将一次处理多个动作。它将读取<code class="fe mp mq mr ms b">draft.toml</code>中的配置细节，使用Docker构建映像，将映像推送到您的注册表，最后将<code class="fe mp mq mr ms b">helm install</code>引用刚刚构建到您的Kubernetes集群上的映像的图表。</p><pre class="mu mv mw mx gt my ms mz na aw nb bi"><span id="a306" class="lr ls jf ms b gy nc nd l ne nf">$ draft up<br/>Draft Up Started: ‘example-go’: 01D57NYWJ40ANYC6T2MGR6X8FR<br/>example-go: Building Docker Image: SUCCESS ⚓ (189.0753s)<br/>example-go: Pushing Docker Image: SUCCESS ⚓ (172.3998s)<br/>example-go: Releasing Application: SUCCESS ⚓ (4.0052s)</span></pre><h2 id="ea21" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">验证您的部署</h2><p id="5ad4" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">使用<code class="fe mp mq mr ms b">kubectl get pods</code>验证您的应用程序是否已正确部署:</p><pre class="mu mv mw mx gt my ms mz na aw nb bi"><span id="32a0" class="lr ls jf ms b gy nc nd l ne nf">$ kubectl get pods<br/>NAME READY STATUS RESTARTS AGE<br/>example-go-example-go-7754dd6665-trl6x 1/1 Running 0 5s</span></pre><h2 id="bbe5" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">连接到应用程序</h2><p id="854b" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">用<code class="fe mp mq mr ms b">draft connect</code>连接到您的应用程序。这将创建到pod中运行的容器所公开的端口的代理连接。</p><pre class="mu mv mw mx gt my ms mz na aw nb bi"><span id="02e2" class="lr ls jf ms b gy nc nd l ne nf">$ draft connect<br/>Connect to example-go:8080 on localhost:63118</span><span id="ccc9" class="lr ls jf ms b gy nu nd l ne nf">$ curl localhost:63118<br/>Hello World, I’m Golang!</span></pre><h2 id="3d3d" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">修改应用程序</h2><p id="d50a" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">如果您修改并保存应用程序，下次运行<code class="fe mp mq mr ms b">draft up</code>，Draft将确定已经有一个现有的Helm版本，并将执行一个<code class="fe mp mq mr ms b">helm upgrade</code>而不是另一个<code class="fe mp mq mr ms b">helm install</code>，后者是您第一次部署时在后台运行的命令。</p><h2 id="2837" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">删除应用程序</h2><p id="c085" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">当您测试完应用程序后，通过运行<code class="fe mp mq mr ms b">draft delete</code>将它从您的Kubernetes集群中删除:</p><pre class="mu mv mw mx gt my ms mz na aw nb bi"><span id="c38a" class="lr ls jf ms b gy nc nd l ne nf">$ draft delete<br/>app ‘example-go’ deleted</span></pre><h2 id="9e0c" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">托管的Kubernetes和Docker注册表配置</h2><p id="e530" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">Draft也可以用于托管的Kubernetes解决方案。我的示例将使用<a class="ae lq" href="https://docs.cloud.oracle.com/iaas/Content/ContEng/Concepts/contengoverview.htm" rel="noopener ugc nofollow" target="_blank">Oracle Container Engine for Kubernetes(OKE)</a>作为Kubernetes集群，使用<a class="ae lq" href="https://docs.cloud.oracle.com/iaas/Content/Registry/Concepts/registryoverview.htm" rel="noopener ugc nofollow" target="_blank">Oracle Cloud infra structure Registry(OCIR)</a>作为容器映像注册表。可以按照类似的步骤用其他Kubernetes集群和注册服务配置Draft。</p><h2 id="7a53" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">注册表配置</h2><p id="b4d7" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">要使用云注册表服务，你需要用<code class="fe mp mq mr ms b">draft config set registry</code>命令将注册表设置为草稿。要将OCIR设置为您的注册表，您需要提供注册表的服务器URL。运行:<code class="fe mp mq mr ms b">draft config set registry &lt;region code&gt;.ocir.io/&lt;tenancy name&gt;/&lt;repo name&gt;/&lt;image name&gt;:&lt;tag&gt;</code></p><ul class=""><li id="dbc8" class="ng nh jf kw b kx ky la lb ld ni lh nj ll nk lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">Dockerfile</code>以默认的Go图像开始。它将在<code class="fe mp mq mr ms b">requirements.txt</code>中安装依赖项，并将当前目录复制到<code class="fe mp mq mr ms b">/usr/src/app</code></li><li id="da44" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">&lt;region-code&gt;</code>是您正在使用的OCI地区的代码。例如，凤凰城的区号是<code class="fe mp mq mr ms b">phx</code>。参见<a class="ae lq" href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/regions.htm" rel="noopener ugc nofollow" target="_blank">区域和可用性域</a>。</li><li id="b4c6" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">ocir.io</code>是Oracle云基础设施的注册名称。</li><li id="cace" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">&lt;tenancy-name&gt;</code>是拥有您要将映像推送到的存储库的租赁的名称，例如<code class="fe mp mq mr ms b">example-dev</code>。请注意，您的用户必须有权访问租赁。</li><li id="8c7c" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">&lt;repo-name&gt;</code>(如果指定)是您要将映像推送到的存储库的名称。比如<code class="fe mp mq mr ms b">project01</code>。请注意，指定存储库是可选的。如果选择指定资料档案库名称，映像的名称将用作Oracle Cloud infra structure Registry中的资料档案库名称。</li><li id="72cd" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">&lt;image-name&gt;</code>是您希望在Oracle Cloud infra structure Registry中为映像指定的名称，例如<code class="fe mp mq mr ms b">helloworld</code>。</li><li id="2c95" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated"><code class="fe mp mq mr ms b">&lt;tag&gt;</code>是您希望在Oracle Cloud infra structure Registry中赋予图像的图像标签，例如<code class="fe mp mq mr ms b">latest</code>。</li></ul><p id="c95a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">您需要使用以下信息登录注册表:</p><p id="3a97" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><code class="fe mp mq mr ms b">docker login &lt;region code&gt;.ocir.io</code></p><ul class=""><li id="4e33" class="ng nh jf kw b kx ky la lb ld ni lh nj ll nk lp nl nm nn no bi translated">用户名:<code class="fe mp mq mr ms b">&lt;tenancy-name&gt;/&lt;oci-username&gt;</code></li><li id="8913" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">密码:<code class="fe mp mq mr ms b">&lt;oci-auth-token&gt;</code></li></ul><p id="4418" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">您可能还需要与注册中心建立信任关系。例如，默认情况下，OCIR注册表将被设置为私有。如果您想继续使用私有存储库，您将必须添加一个图像拉取秘密，它允许Kubernetes向容器注册中心认证以拉取私有图像。有关使用图像机密的更多信息，请参阅本指南<a class="ae lq" href="https://www.oracle.com/webfolder/technetwork/tutorials/obe/oci/oke-and-registry/index.html" rel="noopener ugc nofollow" target="_blank"/>。出于测试目的，一个更简单的选择是将注册表设置为<strong class="kw jg"> public </strong>。</p><h2 id="598b" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">Kubernetes集群配置</h2><p id="a73a" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">因为Draft使用您当前的Kubernetes上下文来确定您的应用程序将部署在哪个集群上，所以您需要记住将您的上下文切换到OKE。用<code class="fe mp mq mr ms b">kubectl config current-context</code>验证你的上下文。</p><p id="1b88" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">如前所述，草案部署到Kubernetes通过舵图表。如果您的集群启用了RBAC，您可能需要创建一个新的服务帐户，以授予Helm的集群内组件Tiller部署到您的集群的额外权限。有关此操作的信息，请参考<a class="ae lq" href="https://helm.sh/docs/using_helm/#role-based-access-control" rel="noopener ugc nofollow" target="_blank">舵文档</a>。</p><p id="572f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">配置完成后，运行<code class="fe mp mq mr ms b">draft up</code>使用Dockerfile构建您的应用程序，将应用程序推送到OCIR，并将应用程序部署到OKE。正如您之前在本地所做的那样，您可以通过运行<code class="fe mp mq mr ms b">kubectl get pods</code>来验证应用程序的成功部署。用<code class="fe mp mq mr ms b">draft connect</code>连接到您的应用程序。</p><h2 id="4ae3" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">摘要</h2><p id="e4ca" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">对于第一次在Kubernetes上尝试应用程序的开发人员来说，Draft是一个有用的工具。Draft缺乏其他内循环开发工具的一些关键特性，包括当应用程序发生变化时自动重新部署的能力，但是Draft packs形式的样板文件的易用性和可用性使Draft成为一个有用的教育工具。</p><h2 id="4c91" class="lr ls jf bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">参考</h2><p id="2cf8" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated"><a class="ae lq" href="https://draft.sh/" rel="noopener ugc nofollow" target="_blank">草拟用户文档</a></p><p id="9825" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lq" href="https://github.com/Azure/draft" rel="noopener ugc nofollow" target="_blank">GitHub草案</a></p><p id="2231" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在http://cloudnative.oracle.com的<a class="ae lq" href="http://cloudnative.oracle.com" rel="noopener ugc nofollow" target="_blank">查看更多云原生和容器原生项目。</a></p></div></div>    
</body>
</html>