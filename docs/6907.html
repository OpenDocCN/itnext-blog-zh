<html>
<head>
<title>What is FutureOr in Dart/Flutter?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dart/Flutter中的FutureOr是什么？</h1>
<blockquote>原文：<a href="https://itnext.io/what-is-futureor-in-dart-flutter-681091162c57?source=collection_archive---------0-----------------------#2022-04-10">https://itnext.io/what-is-futureor-in-dart-flutter-681091162c57?source=collection_archive---------0-----------------------#2022-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/dbd013419884d519f8baa8ea5a7aa346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KtZM96xTWNhHLQbBLW3Xvg.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="3711" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">什么是FutureOr，我们为什么需要它？什么时候用？让我们深潜进去吧！</h2></div><p id="3fb9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在Flutter文档中，你可以看到<code class="fe lp lq lr ls b">FutureOr</code>的定义</p><h2 id="1719" class="lt lu je bd lv lw lx dn ly lz ma dp mb lc mc md me lg mf mg mh lk mi mj mk ml bi translated">诸如</h2><blockquote class="mm mn mo"><p id="ed8e" class="kt ku mp kv b kw kx kf ky kz la ki lb mq ld le lf mr lh li lj ms ll lm ln lo im bi translated">表示值为<code class="fe lp lq lr ls b"><em class="je">Future&lt;T&gt;</em></code>或<code class="fe lp lq lr ls b"><em class="je">T</em></code>的类型。</p><p id="3215" class="kt ku mp kv b kw kx kf ky kz la ki lb mq ld le lf mr lh li lj ms ll lm ln lo im bi translated"><code class="fe lp lq lr ls b"><em class="je">FutureOr&lt;int&gt;</em></code>类型实际上是<code class="fe lp lq lr ls b"><em class="je">int</em></code>和<code class="fe lp lq lr ls b"><em class="je">Future&lt;int&gt;</em></code>类型的“类型联合”。</p></blockquote><p id="ee6e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">它们实际上是很好的定义，但是它们到底意味着什么呢？我们为什么需要它？什么时候用？</p><p id="7f11" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我用一个非常简单的例子来解释！</p><h1 id="36c8" class="mt lu je bd lv mu mv mw ly mx my mz mb kk na kl me kn nb ko mh kq nc kr mk nd bi translated">问题</h1><p id="2cde" class="pw-post-body-paragraph kt ku je kv b kw ne kf ky kz nf ki lb lc ng le lf lg nh li lj lk ni lm ln lo im bi translated">让我们考虑一个带有简单获取方法的数据库服务接口</p><pre class="nj nk nl nm gt nn ls no np aw nq bi"><span id="1299" class="lt lu je ls b gy nr ns l nt nu">abstract class IDBService {<br/>  <strong class="ls jf">Future&lt;String&gt; fetch()</strong>;<br/>}</span></pre><p id="432f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">然后让我们从这个接口扩展两个数据库服务类。</p><h2 id="bc33" class="lt lu je bd lv lw lx dn ly lz ma dp mb lc mc md me lg mf mg mh lk mi mj mk ml bi translated">消防服务</h2><p id="183f" class="pw-post-body-paragraph kt ku je kv b kw ne kf ky kz nf ki lb lc ng le lf lg nh li lj lk ni lm ln lo im bi translated">如你所知<code class="fe lp lq lr ls b">firebase</code>需要异步操作</p><pre class="nj nk nl nm gt nn ls no np aw nq bi"><span id="d58d" class="lt lu je ls b gy nr ns l nt nu">class FirebaseService <strong class="ls jf">extends IDBService</strong> {<br/>  @override<br/>  <strong class="ls jf">Future&lt;String&gt; fetch() async =&gt; await 'data';</strong><br/>}</span></pre><h2 id="0a95" class="lt lu je bd lv lw lx dn ly lz ma dp mb lc mc md me lg mf mg mh lk mi mj mk ml bi translated">艾滋病毒服务</h2><p id="0a5e" class="pw-post-body-paragraph kt ku je kv b kw ne kf ky kz nf ki lb lc ng le lf lg nh li lj lk ni lm ln lo im bi translated">但是另一方面，<code class="fe lp lq lr ls b">hive</code>不需要异步操作。我们只想同步获取值</p><pre class="nj nk nl nm gt nn ls no np aw nq bi"><span id="1be6" class="lt lu je ls b gy nr ns l nt nu">class HiveService <strong class="ls jf">extends IDBService</strong> {<br/>  @override<br/>  <strong class="ls jf">String fetch() =&gt; 'data';</strong><br/>}</span></pre><p id="ad18" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">但是正如你所看到的，我们不能这样定义它，因为我们的接口迫使我们让它们都异步！</p><p id="e655" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">既然这样，<code class="fe lp lq lr ls b">FutureOr</code>来帮忙了！</p><h1 id="a9af" class="mt lu je bd lv mu mv mw ly mx my mz mb kk na kl me kn nb ko mh kq nc kr mk nd bi translated">解决办法</h1><p id="7ff9" class="pw-post-body-paragraph kt ku je kv b kw ne kf ky kz nf ki lb lc ng le lf lg nh li lj lk ni lm ln lo im bi translated"><code class="fe lp lq lr ls b">FutureOr</code>针对这种情况给了我们一个解决方案。</p><p id="35d3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们的退货类型现在可以同时是<code class="fe lp lq lr ls b">Future&lt;String&gt;</code>或<code class="fe lp lq lr ls b">String</code>！</p><pre class="nj nk nl nm gt nn ls no np aw nq bi"><span id="5f46" class="lt lu je ls b gy nr ns l nt nu">abstract class IDBService {<br/>  <strong class="ls jf">FutureOr&lt;String&gt; fetch()</strong>;<br/>}</span><span id="e787" class="lt lu je ls b gy nv ns l nt nu">class FirebaseService extends IDBService {<br/>  @override<br/> <strong class="ls jf"> Future&lt;String&gt; fetch() async =&gt; await 'data';</strong><br/>}</span><span id="d072" class="lt lu je ls b gy nv ns l nt nu">class LocalDBService extends IDBService {<br/>  @override<br/><strong class="ls jf">  String fetch() =&gt; 'data';</strong><br/>}</span></pre></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="37ce" class="mt lu je bd lv mu od mw ly mx oe mz mb kk of kl me kn og ko mh kq oh kr mk nd bi translated">参考</h1><div class="is it gp gr iu oi"><a href="https://api.flutter.dev/flutter/dart-async/FutureOr-class.html" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jf gy z fp on fr fs oo fu fw jd bi translated">FutureOr类- dart:异步库- Dart API</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">表示未来值或t值的类型。此类声明是内部…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">api.flutter.dev</p></div></div></div></a></div></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="c5bb" class="mt lu je bd lv mu od mw ly mx oe mz mb kk of kl me kn og ko mh kq oh kr mk nd bi translated">感谢您的阅读！</h1><p id="374b" class="pw-post-body-paragraph kt ku je kv b kw ne kf ky kz nf ki lb lc ng le lf lg nh li lj lk ni lm ln lo im bi translated">我试图尽可能简单地解释。希望你喜欢。</p><p id="975e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果你喜欢这篇文章，请点击👏按钮(你知道你可以升到50吗？)</p></div></div>    
</body>
</html>