<html>
<head>
<title>Making Production-Ready apps in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中制作生产就绪型应用</h1>
<blockquote>原文：<a href="https://itnext.io/making-production-ready-apps-in-flutter-e0abd1c23c83?source=collection_archive---------1-----------------------#2020-08-24">https://itnext.io/making-production-ready-apps-in-flutter-e0abd1c23c83?source=collection_archive---------1-----------------------#2020-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0d7a80805c897d1fcfcbcff4292a288e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJ4f4cfLVZSauUlpswomQg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">克里斯蒂安·威迪格在<a class="ae kc" href="https://unsplash.com/s/photos/mobile-app?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我将讨论开发应用程序时应该记住的一些要点。编写可扩展和可维护的应用程序总是一个好的实践。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="7e60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将在本文中讨论以下主题:</p><ol class=""><li id="7a8b" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">设置开发/生产环境</li><li id="3491" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">编写干净代码的最佳实践</li><li id="de12" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">测试、调试和监控</li><li id="469d" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">通过CI/CD分发应用程序</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="b3ca" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">设置环境</h1><h2 id="2066" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">Git版本控制和分支策略</h2><p id="72c7" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">版本控制允许您跟踪任何文件更改并识别代码中的差异。在团队中工作时，这是一个方便的工具。但是，如果每个人都开始向主分支提交变更，它会很快变得混乱。因此，应该为不同的目的定义特定的分支。一个简单的惯例是有三个分支:</p><ul class=""><li id="39be" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la nl lo lp lq bi translated"><strong class="kf ir">主人:</strong>这里是生产就绪代码。</li><li id="12ac" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated"><strong class="kf ir">开发:</strong>在合并到主分支之前进行最终测试的代码</li><li id="7a13" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated"><strong class="kf ir">特定于特性的分支:</strong>这些分支具有当前正在处理的特性的名称</li></ul><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/00c53c0668a5c8c8783bd81ec60a4a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OoxaNV6CaL4ktQIGCwgig.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><em class="nr">图片取自</em><a class="ae kc" href="https://buddy.works/blog/5-types-of-git-workflows" rel="noopener ugc nofollow" target="_blank"><em class="nr">https://buddy.works/blog/5-types-of-git-workflows</em></a></figcaption></figure><h2 id="fb38" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">用于颤振的码头集装箱(可选)</h2><p id="dcce" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">想象一个场景，你想在一台没有安装Flutter或者Android SDK的机器上运行一个Flutter项目。手动下载和安装一切是一个令人厌倦的过程。更不用说修复安装错误了😰。这就是Docker发挥作用的地方。Docker容器非常有用，把我们从"<strong class="kf ir"> <em class="ns">中拯救出来，但是它在我的机器上运行..</em> </strong>“问题。它便于携带，重量很轻。它也是独立于平台的，这意味着它在你的机器上运行就像在我的机器上运行一样，与操作系统无关。</p><p id="5cdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为Flutter设置Docker相对容易。可以参考这篇文章寻求帮助。</p><div class="nt nu gp gr nv nw"><a href="https://blog.codemagic.io/how-to-dockerize-flutter-apps/" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">如何对Flutter应用进行分类</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Souvik Biswas展示了如何使用Docker来简化Flutter app开发工作流程。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">blog.codemagic.io</p></div></div><div class="of l"><div class="og l oh oi oj of ok jw nw"/></div></div></a></div></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="1c93" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">编写干净代码的最佳实践</h1><h2 id="717d" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">干净的建筑</h2><p id="09d5" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">不管你的app有多棒，如果你不能理解和调试你前几天写的代码，它是没有用的。每个人都应该至少遵循一个基本的架构，将业务逻辑从UI中分离出来。我喜欢遵循的架构是由<a class="ae kc" href="https://resocoder.com/2019/08/27/flutter-tdd-clean-architecture-course-1-explanation-project-structure/" rel="noopener ugc nofollow" target="_blank"> Reso Coder </a>提出的架构的一个小修改。</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/19fc8d40dbdeab1da7938cfcadc99f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKp-nIN1Dlqok3UI7ju6eg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">干净的架构模式</figcaption></figure><p id="1250" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该架构的细分如下:</p><ol class=""><li id="bfe9" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><strong class="kf ir"> UI </strong>:用户交互的部分。这个部分接收用户的输入，并将其发送给提供者。数据的验证可以在这里完成。</li><li id="c48f" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><strong class="kf ir"> Provider: </strong>这个部分包含您想要使用的任何状态管理。在上图中，我使用了提供者包。</li><li id="34cf" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><strong class="kf ir">存储库(域):</strong>域层的存储库是一个抽象类，包含了提供者需要的所有方法。</li><li id="d58e" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><strong class="kf ir">存储库(数据):</strong>数据层的存储库是抽象的实现。这一层决定用户需要的数据应该从服务器还是本地缓存中获取。</li><li id="c627" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><strong class="kf ir"> Remote: </strong>顾名思义，它处理所有的服务器请求。</li><li id="481c" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><strong class="kf ir"> Local: </strong>它管理所有与离线存储数据和在需要时从本地数据库获取数据相关的任务。</li></ol><p id="3f3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是一个使用上述架构的项目。</p><div class="nt nu gp gr nv nw"><a href="https://github.com/ibtesam123/NumberTrivia" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">ibtesam 123/数字琐事</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="om l oh oi oj of ok jw nw"/></div></div></a></div><h2 id="b4f4" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">错误处理</h2><p id="0ef6" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">错误处理是任何应用程序最重要的方面之一。错误和崩溃会严重影响你的用户群。你可以通过使用类似<a class="ae kc" href="https://pub.dev/packages/dartz" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"/></a><strong class="kf ir">的数据类型来解决这个问题。</strong>两者都是dartz库的一部分，它可以帮助有效地处理异常。它充当两种数据类型的包装器——左(异常)和右(预期数据)。使用这两种方法的好处是，您需要为这两种情况定义逻辑。这可以确保你处理好每一种情况。</p><p id="9297" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用任一类型进行错误处理</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="1b33" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">测试、调试和监控</h1><h2 id="ac6f" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">测试</h2><p id="d4fa" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">测试是必不可少的，这样你就可以在把应用程序交付给用户之前发现并改正错误。随着应用程序的增长，手动测试变得更加困难。颤振提供三类测试:</p><ul class=""><li id="6332" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la nl lo lp lq bi translated"><strong class="kf ir">单元测试:</strong>测试单个函数、方法或类。应该有一堆单元测试，因为这些测试执行起来很快。所有的单元测试都可以在CI环境中进行。</li><li id="04a1" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated"><strong class="kf ir"> Widget测试:</strong>测试单个Widget；这些测试比单元测试慢，应该在本地执行。尽量不要在CI环境中运行它们，因为它们会占用您大量的构建时间。</li><li id="9263" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated"><strong class="kf ir">集成测试:</strong>测试完整app或其中很大一部分；这些测试应该严格地在本地执行，因为它们非常慢，不适合CI环境。</li></ul><p id="147d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试还可以确保没有人破坏先前工作的代码。可以建立一个CI工作流来运行测试，只要开发分支有一个pull请求。</p><h2 id="7e6b" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">排除故障</h2><p id="3fc2" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">dart<a class="ae kc" href="https://flutter.dev/docs/development/tools/devtools/overview" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">dev tools</strong></a><strong class="kf ir"/>提供了多种工具和功能来帮助调试Flutter应用程序。我对开发工具相当陌生，但我喜欢flutter inspector，它允许测试不同的布局参数，而无需更改实际代码。您还可以监控应用程序发出的网络请求，而无需在应用程序中手动打印出来。</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/356a0b5040fee1af3995bc09cc777b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Z0lh29E1IqiyuAtCJxai1A.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图片取自<a class="ae kc" href="https://flutter.dev/" rel="noopener ugc nofollow" target="_blank"> flutter.dev </a></figcaption></figure><h2 id="2ffd" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">监视</h2><p id="2874" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">在play store或app store上部署你的应用并不是终点。您需要跟踪那些脱离开发阶段的bug和错误。<a class="ae kc" href="https://pub.dev/packages/firebase_crashlytics" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">Firebase crash lytics</strong></a>提供了一种简单的方法来监控你的应用在用户手机上的行为。您可以记录错误，甚至将它们记入日志。</p><p id="a379" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">燃烧基分解剂</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="600e" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">通过CI/CD分销</h1><h2 id="d532" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">为什么重要？</h2><ul class=""><li id="c66a" class="li lj iq kf b kg ng kk nh ko oo ks op kw oq la nl lo lp lq bi translated">如果你经常为你的应用推送更新，CI/CD可以帮助你自动化各种任务，这样你就不用浪费很多时间了。</li><li id="0a6f" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">尽早发现错误；您也可以很容易地确定错误的位置。</li><li id="b2fa" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">释放速度更快。CI/CD不断地合并代码，并在彻底测试后将它们部署到生产环境中，使代码保持发布就绪状态。</li><li id="3207" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">增加生产时间；由于CI/CD自动化了许多任务，开发人员可以花更多的时间在开发上。</li></ul><h2 id="7872" class="mu lx iq bd ly mv mw dn mc mx my dp mg ko mz na mk ks nb nc mo kw nd ne ms nf bi translated">如何为你的flutter app设置？</h2><p id="e54a" class="pw-post-body-paragraph kd ke iq kf b kg ng ki kj kk nh km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">最简单的方法是使用<a class="ae kc" href="https://codemagic.io/start/" rel="noopener ugc nofollow" target="_blank"> Codemagic </a>。Codemagic为创建工作流提供了一个易于设置的用户界面。你可以看看他们的教程。</p><div class="nt nu gp gr nv nw"><a href="https://blog.codemagic.io/tags/publishing/" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">出版Codemagic博客。移动应用项目的CI/CD</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">探索Codemagic背后的魔力——持续集成和持续交付。自动化您的整个工作流程，以…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">blog.codemagic.io</p></div></div><div class="of l"><div class="or l oh oi oj of ok jw nw"/></div></div></a></div><p id="126d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有其他选项，比如<a class="ae kc" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github动作</a>。接下来我会写一篇博客，讲述如何为你的Flutter应用在不同环境下安全地建立工作流程。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="fc95" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">概述</h1><ul class=""><li id="bdf8" class="li lj iq kf b kg ng kk nh ko oo ks op kw oq la nl lo lp lq bi translated">为您的项目设置git和git分支策略，以将生产和开发代码分开。</li><li id="ac5b" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">您可以为您的项目设置Docker，以确保在所有平台上轻松开发。</li><li id="6645" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">遵循一种架构模式来分离您的业务逻辑和UI组件。</li><li id="89a5" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">选择任一类型以获得更好的错误处理。</li><li id="920b" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">总是为你的应用程序编写测试。这确保了为您的用户发布无错误的版本。</li><li id="3fdd" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">使用调试器工具来简化应用程序的调试过程，并监控应用程序的资源使用情况。</li><li id="a60e" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">使用Firebase crashlytics跟踪用户设备上的崩溃。</li><li id="76fe" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la nl lo lp lq bi translated">使用CI/CD来自动化所有重复的任务，并在实际开发上花费更多的时间。</li></ul></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="d6cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些是我在开发生产应用程序时谨记的几点。如果你喜欢这篇文章，不要忘记给一些掌声👏。如果你还有更多要补充的，请在下面评论。谢谢你😄</p></div></div>    
</body>
</html>