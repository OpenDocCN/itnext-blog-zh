<html>
<head>
<title>RedisGears Multi-model Use Case — Improving Content Delivery and Production Performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RedisGears多模型使用案例—改进内容交付和制作性能</h1>
<blockquote>原文：<a href="https://itnext.io/redisgears-multi-model-use-case-improving-content-delivery-performance-ce13ca86b7c3?source=collection_archive---------5-----------------------#2019-04-03">https://itnext.io/redisgears-multi-model-use-case-improving-content-delivery-performance-ce13ca86b7c3?source=collection_archive---------5-----------------------#2019-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cf90" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">完整的项目可以在GitHub下面的<a class="ae ki" href="https://github.com/filipecosta90/RedisGearsExampleCDN" rel="noopener ugc nofollow" target="_blank">链接</a>中找到。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/185c29b4a9411fa8c21c3dd5874468fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rxCAjYD5VvOp3fVvuIaSGQ.jpeg"/></div></div></figure><p id="4ef5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">继今天在redisconf19上预发布<a class="ae ki" href="https://c212.net/c/link/?t=0&amp;l=en&amp;o=2420891-1&amp;h=2146343739&amp;u=https%3A%2F%2Fredislabs.com%2Fredis-enterprise%2Ftechnology%2Fgears%2F&amp;a=RedisGears" rel="noopener ugc nofollow" target="_blank"> RedisGears </a>之后，我决定测试它的数据库内可编程性，以自动处理、转换和建模不同类型的数据。例如，我们将使用Redis和RedisGears实现我们自己的无服务器内容交付优化器逻辑。如果您想了解RedisGears的实际应用，请跳到本文的第2.0节。</p><h1 id="d563" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">1.0单一模型起点</h1><p id="188a" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">内容交付性能本质上与延迟和速度有关。大多数cdn(例如<a class="ae ki" href="https://www.akamai.com/us/en/solutions/why-akamai/image-management.jsp" rel="noopener ugc nofollow" target="_blank"> Akamai </a>)和第三方解决方案，如<a class="ae ki" href="https://cloudinary.com/" rel="noopener ugc nofollow" target="_blank"> Cloudinary </a>，提供广泛的自动化映像优化解决方案，达到全球分布式数据节点的基础服务的程度(以便找到到用户的最短跳)。然而，一旦我们优化了最短路径，图像的延迟就更多地与正确处理的图像节省的字节有关。</p><p id="d88a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">通过优化每个内容的内存使用，我们不仅在后端和客户端设备中保存了数据，还提高了交付性能，因为更少的字节需要传输更少的网络数据包。</p><p id="f617" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">根据<a class="ae ki" href="http://httparchive.org/" rel="noopener ugc nofollow" target="_blank"> HTTP存档</a>:</p><blockquote class="mo"><p id="9736" class="mp mq it bd mr ms mt mu mv mw mx lq dk translated">为获取网页而传输的60%的数据是由JPEGs、png和gif组成的图像。截至2017年7月，图片占3.0MB平均网站加载内容的<a class="ae ki" href="http://httparchive.org/interesting.php#bytesperpage" rel="noopener ugc nofollow" target="_blank"> 1.7MB </a>。</p></blockquote><p id="9ec2" class="pw-post-body-paragraph kv kw it kx b ky my ju la lb mz jx ld le na lg lh li nb lk ll lm nc lo lp lq im bi translated">现在，您已经同意这是一个可靠的用例，让我们决定解决方案的设计，将我们的内容交付优化器重点放在图像上。</p><p id="1869" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">通常，图像用例最好作为唯一的URL。因此，不管派生的内容优化如何，它们都应该与原始内容相关，并且应该只在我们的架构中的一个层上产生。这些是我们的业务需求，也是我们的CDN微服务需要做的事情，负责将URL关联到Redis关键字的业务逻辑，以及将内容提取到源。我们不会在本文中实现CDN微服务。我们将关注所需的数据转换和RedisGears的关键要点。</p><h2 id="9a09" class="nd ls it bd lt ne nf dn lx ng nh dp mb le ni nj md li nk nl mf lm nm nn mh no bi translated">请记住，RedisGears不会取代对处理业务逻辑的微服务的需求。</h2><p id="8946" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">RedisGears要做的是利用已经存在于数据库服务器上的数据，并将其转化为服务于更多最初数据无法响应的需求。</p><p id="7777" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了简单起见，我们将只优化图像压缩(四级压缩)和图像格式(为了演示，只优化两种图像格式)，但其余的优化将适用于相同的设计过程。</p><p id="0c88" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在可能的CDN交付URL之后，例如，如果我们希望在第一次跳过我们的CDN<strong class="kx iu">ourcdn.com</strong>时，获得在源【example.com】T2上托管的内容<strong class="kx iu">image.jpg</strong>，我们可以使用下一个已有空间的修改后的URL来实现我们在本例中想要实现的优化。</p><pre class="kk kl km kn gt np nq nr ns aw nt bi"><span id="4d00" class="nd ls it nq b gy nu nv l nw nx">curl -X GET https://mycdn.com/image/optimizer/fetch_format_<strong class="nq iu">&lt;format&gt;</strong>,q_<strong class="nq iu">&lt;quality&gt;</strong>/http://example.com/image.jpg</span></pre><p id="0285" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">从前面的例子中，我们可以看到我们将使用"<strong class="kx iu"> image" </strong>作为包含所有选项和原始图像的键。在我们的应用服务器中，我们要做的是检查关键的<strong class="kx iu">映像</strong>是否存在，以及是否已经计算了优化，如果是，则服务于优化的映像，如果不是，则服务于优化或优化集的最近似的回退。</p><p id="4ecf" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">为了检查，如果图像存在于或CDN级别，我们将使用EXISTS查询Redis，如果存在，我们将使用HGET查询Redis，并将提取的属性作为字段名。</p><pre class="kk kl km kn gt np nq nr ns aw nt bi"><span id="c1bb" class="nd ls it nq b gy nu nv l nw nx">127.0.0.1:6379&gt; EXISTS cdn:image<br/>(integer) 1<br/>127.0.0.1:6379&gt;HGET cdn:image fetch_format_<strong class="nq iu">&lt;format&gt;</strong>,q_<strong class="nq iu">&lt;quality&gt;</strong></span></pre><p id="593c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果<strong class="kx iu">原始的</strong>映像在我们的CDN中不存在，那么RedisGears就开始发挥作用了。我们的应用程序服务器仍然需要转到基础映像的源位置，因为微服务架构的一个最重要的规则是每个微服务必须<strong class="kx iu">拥有</strong>其域数据和<strong class="kx iu">逻辑，但是，从映像优化Redis的操作角度来看，</strong>对我们的映像目录和基础架构的影响最小，因为原始数据已经存储在Redis中。</p><p id="9686" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">以下命令包含了我们的应用程序(Redis之外)必须拥有的全部逻辑。</p><pre class="kk kl km kn gt np nq nr ns aw nt bi"><span id="f7ec" class="nd ls it nq b gy nu nv l nw nx">127.0.0.1:6379&gt; EXISTS cdn:image<br/>(integer) 0</span><span id="373e" class="nd ls it nq b gy ny nv l nw nx"><strong class="nq iu">( APPLICATION LOGIC OUTSIDE OF REDIS :: CDN MICROSERVICE )</strong></span><span id="d4f4" class="nd ls it nq b gy ny nv l nw nx">127.0.0.1:6379&gt;HSET cdn:image fetch_format_jpg</span></pre><h1 id="cf64" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">2.0 —当RedisGears开始发挥作用时</h1><h2 id="be35" class="nd ls it bd lt ne nf dn lx ng nh dp mb le ni nj md li nk nl mf lm nm nn mh no bi translated">2.1构建我们的Gears脚本</h2><p id="8774" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">如前所述，我们的CDN微服务负责将URL关联到Redis关键字的业务逻辑，还负责将内容提取到源，只需根据来自源的响应将一种图像类型设置到Redis中。一旦使用以下脚本设置了新的映像(通过HSET cdn: <imagename>字段值…)，所有的映像优化都将由RedisGears执行:</imagename></p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="7ff6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">不要担心复制代码的每个要点。完整的项目可以在GitHub的以下<a class="ae ki" href="https://github.com/filipecosta90/RedisGearsExampleCDN" rel="noopener ugc nofollow" target="_blank">链接</a>中找到。</p><p id="d605" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">python代码将通过redis-cli传递给Redis，RedisGears <a class="ae ki" href="https://oss.redislabs.com/redisgears/commands.html#rgpyexecute" rel="noopener ugc nofollow" target="_blank"> RG添加了新命令。按以下方式执行</a>:</p><pre class="kk kl km kn gt np nq nr ns aw nt bi"><span id="50e6" class="nd ls it nq b gy nu nv l nw nx">redis-cli -x rg.pyexecute &lt; imageserver.py<br/>OK</span></pre><p id="4a85" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">之后，在通过模式“cdn*”的每个散列的每个字段集上，将开始图像优化过程。正如你在image_optimization.py上看到的，我们通过python模块<a class="ae ki" href="http://docs.wand-py.org/en/0.5.2/#" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> Wand </strong> </a>使用了<a class="ae ki" href="https://www.imagemagick.org/script/index.php" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> imagemagick </strong> </a>。python的可扩展性与Redis的低延迟和数据局部性相结合，支持非常高级的用例，Redis社区肯定会探索这些用例。</p><h2 id="c5cf" class="nd ls it bd lt ne nf dn lx ng nh dp mb le ni nj md li nk nl mf lm nm nn mh no bi translated">2.2测试我们的Gears脚本</h2><p id="236f" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">为了进行测试，我们创建了两个额外的python文件，将图像加载到Redis (load_image.py)并将图像从Redis保存到磁盘(save_image.py)。为了进一步简化数据加载和测试的流程，我们添加了一个脚本来加载数据并检查是否生成了优化的图像。请<strong class="kx iu">修改flushall </strong>并更改您的模块(是的，模块，惊喜，惊喜！！)位置相应。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="faec" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这应该是脚本的预期输出。正如您所看到的，我们只为每个键<strong class="kx iu">cdn:collage-redisconf 19</strong>和<strong class="kx iu">cdn:redisconf 19-location-header</strong>设置了一个字段(<strong class="kx iu">field name</strong>:fetch _ format _ jpg，q_80，fetch_format_png，q_90等)，但是还有几个附加字段是由或RedisGears脚本自动添加的。</p><pre class="kk kl km kn gt np nq nr ns aw nt bi"><span id="3b0f" class="nd ls it nq b gy nu nv l nw nx">filipeoliveira$ ./script.sh</span><span id="0ae5" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli flushall</span><span id="d899" class="nd ls it nq b gy ny nv l nw nx">OK</span><span id="4b34" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli module load /Users/filipeoliveira/redis-porto/RedisGears/redisgears.so</span><span id="734c" class="nd ls it nq b gy ny nv l nw nx">OK</span><span id="2e21" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli module load /Users/filipeoliveira/redis-porto/RedisTimeSeries/src/redistimeseries.so</span><span id="b8ed" class="nd ls it nq b gy ny nv l nw nx">OK</span><span id="9dc9" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli -x rg.pyexecute</span><span id="b1a3" class="nd ls it nq b gy ny nv l nw nx">OK</span><span id="e89c" class="nd ls it nq b gy ny nv l nw nx">+ python load_image.py --key=cdn:collage-redisconf19 --field=fetch_format_jpg --image=./data/collage-redisconf19.jpg</span><span id="3d73" class="nd ls it nq b gy ny nv l nw nx">+ python load_image.py --key=cdn:redisconf19-location-header --field=fetch_format_jpg --image=./data/redisconf19-location-header.jpg</span><span id="29a1" class="nd ls it nq b gy ny nv l nw nx">+ read -p 'Give it a second and Press [ENTER]'</span><span id="e2e3" class="nd ls it nq b gy ny nv l nw nx">Give it a second and Press [ENTER]</span><span id="92de" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_jpg</span><span id="32ec" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="cf49" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_png</span><span id="35de" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="7e1d" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_jpg,q_90</span><span id="6edd" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="03ac" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_jpg,q_80</span><span id="edf1" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="698b" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_jpg,q_70</span><span id="26cf" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="44f6" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_jpg,q_60</span><span id="c348" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="7809" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_png,q_90</span><span id="578d" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="a831" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_png,q_80</span><span id="b962" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="34f7" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_png,q_70</span><span id="f8cf" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="0027" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:collage-redisconf19 fetch_format_png,q_60</span><span id="a25a" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="fc88" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_jpg</span><span id="0944" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="5fea" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_png</span><span id="6ba4" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="ee0f" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_jpg,q_90</span><span id="4aad" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="ae15" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_jpg,q_80</span><span id="89da" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="4f3b" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_jpg,q_70</span><span id="cdb6" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="fb11" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_jpg,q_60</span><span id="1ce2" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="8de1" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_png,q_90</span><span id="e52c" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="1ae1" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_png,q_80</span><span id="4822" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="c068" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_png,q_70</span><span id="a038" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="4489" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli hexists cdn:redisconf19-location-header fetch_format_png,q_60</span><span id="c918" class="nd ls it nq b gy ny nv l nw nx">(integer) 1</span><span id="7bd6" class="nd ls it nq b gy ny nv l nw nx">+ python save_image.py --key=cdn:collage-redisconf19 --field=fetch_format_jpg,q_60 --image=./data/collage-redisconf19_q_60.jpg</span><span id="3a9f" class="nd ls it nq b gy ny nv l nw nx">+ python save_image.py --key=cdn:collage-redisconf19 --field=fetch_format_jpg --image=./data/collage-redisconf19_q_100.jpg</span><span id="abec" class="nd ls it nq b gy ny nv l nw nx">+ read -p 'IRate of insertions per second ( bucket of 5s ) [ENTER]'</span><span id="4e1a" class="nd ls it nq b gy ny nv l nw nx">IRate of insertions per second ( bucket of 5s ) [ENTER]</span><span id="6473" class="nd ls it nq b gy ny nv l nw nx">+ redis-cli TS.RANGE size:cdn - + aggregation avg 5</span><span id="28f4" class="nd ls it nq b gy ny nv l nw nx">1) 1) (integer) 1554279425</span><span id="5bdf" class="nd ls it nq b gy ny nv l nw nx">2) "4.333333333333333"</span><span id="2317" class="nd ls it nq b gy ny nv l nw nx">2) 1) (integer) 1554279430</span><span id="8362" class="nd ls it nq b gy ny nv l nw nx">2) "3"</span><span id="e666" class="nd ls it nq b gy ny nv l nw nx">3) 1) (integer) 1554279435</span><span id="96d2" class="nd ls it nq b gy ny nv l nw nx">2) "17"</span><span id="9ef7" class="nd ls it nq b gy ny nv l nw nx">4) 1) (integer) 1554279440</span><span id="2826" class="nd ls it nq b gy ny nv l nw nx">2) "7.666666666666667"</span><span id="ff14" class="nd ls it nq b gy ny nv l nw nx">5) 1) (integer) 1554279445</span><span id="2bac" class="nd ls it nq b gy ny nv l nw nx">2) "22"</span></pre><p id="69b9" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果您查看您的数据文件夹，您可以看到优化器正在完成工作。在左边，你可以看到优化的图像(大小为161K)。右边可以看到原图(用935K从redisconf19网站下载)。</p><div class="kk kl km kn gt ab cb"><figure class="ob ko oc od oe of og paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><img src="../Images/8a2c6ad0504c1fea9db88c26f32f561e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*CWD4o208LU2jqy7UdzHINA.jpeg"/></div></figure><figure class="ob ko oc od oe of og paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><img src="../Images/a1e36d8cbf92c37919f9a01e5ceb358d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*WdwI_FYxV2Mb00E4qWz9hA.jpeg"/></div></figure></div><h2 id="a9c4" class="nd ls it bd lt ne nf dn lx ng nh dp mb le ni nj md li nk nl mf lm nm nn mh no bi translated">2.2多模型涉及零件和关键问题的地方</h2><p id="c867" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">如果您查看输出的最后几行，您会发现我们还在内容管理优化器中显示了每秒插入的速率。</p><p id="a62b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">与我们在缓存模型中触发转换的方式相同，我们添加了一个Timeseries模型，使我们能够跟踪系统上缓存插入的速率。由于一些关键点，这既非常强大又非常危险:</p><p id="7097" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">1) python脚本对查询集群的Redis客户端不可见地执行。</p><p id="4068" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">2)很容易忘记python脚本，如果没有强制文档或警告，新开发人员将很难理解它们的存在。</p><p id="eab1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">3) python脚本将在每次数据库字段更新时运行，并且它可能代表可能已经过载的系统上的开销。</p><p id="3c11" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">正如今天RedisGears会议问答中所讨论的，所有这些问题都可以或已经通过RedisLabs得到缓解。通常，Redis成功的主要原因之一是，作为开发人员，您既没有从性能极高的工具中抽象出来，也没有被禁止对您的集群造成极大的损害。因此，在Redis，你应该知道你在做什么。</p><p id="1fd7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">alpha版本0.2.0几天前刚刚发布，项目中肯定会加入成熟度，但我们已经可以看到一个模块的有用性，它在所有其他事情中充当“丢失的链接”。</p></div></div>    
</body>
</html>