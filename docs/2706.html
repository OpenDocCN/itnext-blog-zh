<html>
<head>
<title>Open an Azure Portal Created Function in Visual Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Visual Studio中打开Azure Portal创建的函数</h1>
<blockquote>原文：<a href="https://itnext.io/open-an-azure-portal-created-function-in-visual-studio-a76f2352163a?source=collection_archive---------4-----------------------#2019-07-15">https://itnext.io/open-an-azure-portal-created-function-in-visual-studio-a76f2352163a?source=collection_archive---------4-----------------------#2019-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="24d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上周的帖子中，<a class="ae kl" href="https://elanderson.net/2019/06/azure-functions-introduction/" rel="noopener ugc nofollow" target="_blank"> Azure Functions简介</a>，我们创建了一个新的Azure Function应用，它有一个通过HTTP触发的单一功能。门户对于功能的初始创建非常有用，但是当您的需求发生变化时会发生什么呢？例如，您可能希望将您的函数与应用程序的其余代码存储在一个repo中。在这篇文章中，我们将带着我们的门户创建的函数，并把它下载到可以在Visual Studio中编辑的地方。</p><h2 id="b165" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">下载应用程序内容</h2><p id="e02f" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">从Azure门户选择应用服务。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/08cd213064f8774d4a70c831d8113785.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/0*GFLBaVYcZ8pcFprc.png"/></div></figure><p id="a1ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，选择您想要获取代码的功能应用程序。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/3d53e29698a0584317bdc09c87c74e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2RIBDhGgnKuFzUmU.png"/></div></div></figure><p id="2c5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将加载功能应用程序的详细信息，并在屏幕顶部点击<strong class="jp ir">下载应用程序内容</strong>选项。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lx"><img src="../Images/e53cb7cbe039be61d5c9f7647c4b6b61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U_bAURMG4yyyiHta.png"/></div></div></figure><p id="0e7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在弹出窗口中选择<strong class="jp ir">内容和Visual Studio项目</strong>，然后点击<strong class="jp ir">下载</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/f783aaadb94df100d2aa0becd48394fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/0*SgrDRecovN_19B34.png"/></div></figure><p id="c377" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击下载后，你会得到一个包含所有功能应用的压缩文件。提取文件并双击项目文件以在Visual Studio中打开它。</p><h2 id="5443" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">改变功能</h2><p id="3535" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">该项目将为应用程序中存在的每个函数创建一个文件夹。在我们的示例中，您会看到一个<strong class="jp ir"> HttpTrigger1 </strong>目录，在该目录中，实际函数的代码位于<strong class="jp ir"> run.csx </strong>文件中。查看代码，您会发现它与您在门户中看到的是一样的。这是代码。</p><pre class="ll lm ln lo gt lz ma mb mc aw md bi"><span id="6960" class="km kn iq ma b gy me mf l mg mh">#r "Newtonsoft.Json"<br/><br/>using System.Net;<br/>using Microsoft.AspNetCore.Mvc;<br/>using Microsoft.Extensions.Primitives;<br/>using Newtonsoft.Json;<br/><br/>public static async Task&lt;IActionResult&gt; Run(HttpRequest req, ILogger log)<br/>{<br/>    log.LogInformation("C# HTTP trigger function processed a request.");<br/><br/>    string name = req.Query["name"];<br/><br/>    string requestBody = await new StreamReader(req.Body).ReadToEndAsync();<br/>    dynamic data = JsonConvert.DeserializeObject(requestBody);<br/>    name = name ?? data?.name;<br/><br/>    return name != null<br/>        ? (ActionResult)new OkObjectResult($"Hello, {name}")<br/>        : new BadRequestObjectResult("Please pass a name on the query string or in the request body");<br/>}</span></pre><p id="e63b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，您可以对应用程序进行任何更改。我要改变返回值。</p><pre class="ll lm ln lo gt lz ma mb mc aw md bi"><span id="30f3" class="km kn iq ma b gy me mf l mg mh">Before:<br/>(ActionResult)new OkObjectResult($"Hello, {name}")<br/><br/>After:<br/>(ActionResult)new OkObjectResult($"Yo, {name}")</span></pre><h2 id="e243" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">将更改推回到Azure</h2><p id="3540" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">现在我们已经对我们的函数进行了更改，我们如何将更改返回到Azure？返回Azure Function应用的概览页面，点击<strong class="jp ir">获取发布个人资料</strong>链接。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mi"><img src="../Images/add082aed2662e0889c9c952f598144f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u2mJifwHFNr5XQG0.png"/></div></div></figure><p id="abb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Visual Studio中，右键单击项目并选择<strong class="jp ir">发布</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/0201b27f90e1220e32faacf04b8a1e39.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/0*ywJpILNMqIjr2-wM.png"/></div></figure><p id="29ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在发布对话框中点击<strong class="jp ir">导入配置文件</strong>按钮，选择从Azure下载的配置文件。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mk"><img src="../Images/bc8e1e688e5bddb26fcd2d2335d262fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_b2JIqiSKotPV_ng.png"/></div></div></figure><p id="79f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦导入了配置文件，您就可以点击<strong class="jp ir">发布</strong>按钮来推送对您的Azure Function应用程序的任何更改。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ml"><img src="../Images/fac2548c4ab5c3c718fca62ca3b5a314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h6kElIqG0TDJRR5K.png"/></div></div></figure><p id="02fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，如果您执行您的函数，您应该会看到您在Visual Studio中所做的更改。</p><h2 id="7774" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="1224" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">虽然上面的方法有效，但在Visual Studio中它实际上并不友好，因为该函数是一个csx文件，而不是普通C#使用的cs文件。下周寻找一个从Visual Studio启动一个函数应用程序的例子，看看它是否会产生一个更容易维护的项目。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="a2c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mt">原载于</em><a class="ae kl" href="https://elanderson.net/2019/07/open-an-azure-portal-created-function-in-visual-studio/" rel="noopener ugc nofollow" target="_blank"><em class="mt"/></a><em class="mt">。</em></p></div></div>    
</body>
</html>