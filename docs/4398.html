<html>
<head>
<title>GitHub: Use Actions to Publish Artifacts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub:使用动作发布工件</h1>
<blockquote>原文：<a href="https://itnext.io/github-use-actions-to-publish-artifacts-e42fc76a8a63?source=collection_archive---------2-----------------------#2020-06-22">https://itnext.io/github-use-actions-to-publish-artifacts-e42fc76a8a63?source=collection_archive---------2-----------------------#2020-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8ff0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章将采用我们在上一篇文章中设置的GitHub Actions工作流，并添加几个步骤，为我们提供对应用程序二进制文件的访问。如果你是这个系列的新手，如果需要的话，下面的帖子会帮你跟上。</p><p id="f02e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://elanderson.net/2020/06/github-import-an-azure-devops-repo/" rel="noopener ugc nofollow" target="_blank"> GitHub:导入Azure devo PS Repo</a><br/><a class="ae kl" href="https://elanderson.net/2020/06/github-use-actions-to-build-asp-net-core-application/" rel="noopener ugc nofollow" target="_blank">GitHub:用动作构建ASP.NET核心应用</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/d9c320b7de6ab32b818a5be12d247461.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*wH2vkQAkHa_K8bJB.png"/></div></figure><h2 id="cbdf" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">编辑工作流程</h2><p id="0d94" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">我们的第一步是回到我们想要编辑的工作流程。在回购顶部点击<strong class="jp ir">动作</strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/422136f9518cc312b69c7f5524cd5a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iSulMXWHBmFtZsGE.png"/></div></div></figure><p id="c8c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在屏幕左侧选择具体的工作流程，<strong class="jp ir">。这种情况下的网芯</strong>。现在列表已经过滤为我们感兴趣的工作流程，选择最近运行的三个点，然后点击<strong class="jp ir">查看工作流程文件</strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lx"><img src="../Images/ca5ebd4216c8b67d75a97cab1e8f150b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z5DRTVWVH2y_65eA.png"/></div></div></figure><p id="11c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一个屏幕上，单击工作流文件上方的铅笔以编辑工作流。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ly"><img src="../Images/2ccffd338314e7357f23075b23a6cd1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WO-_Aplxe3tboUac.png"/></div></div></figure><p id="fd0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加文件的结尾添加对。NET CLI来发布。下面是完整的文件，最后两行是发布步骤。</p><pre class="kn ko kp kq gt lz ma mb mc aw md bi"><span id="5d99" class="ku kv iq ma b gy me mf l mg mh">name: .NET Core<br/><br/>on:<br/>  push:<br/>    branches: [ master ]<br/>  pull_request:<br/>    branches: [ master ]<br/><br/>jobs:<br/>  build:<br/><br/>    runs-on: ubuntu-latest<br/><br/>    steps:<br/>    - uses: actions/checkout@v2<br/>      <br/>    - name: Setup .NET Core<br/>      uses: actions/setup-dotnet@v1<br/>      with:<br/>        dotnet-version: 3.1.101<br/> <br/>    - name: Install dependencies<br/>      run: dotnet restore<br/>      <br/>    - name: Build<br/>      run: dotnet build --configuration Release --no-restore<br/>      <br/>    - name: Test<br/>      run: dotnet test --no-restore --verbosity normal<br/><br/>    - name: Publish<br/>      run: dotnet publish</span></pre><p id="2d60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">开始提交</strong>按钮，将更改提交到您选择的分支。我将更改直接提交给master，这触发了工作流的运行。从工作流的日志中，您可以看到发布步骤成功执行。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mi"><img src="../Images/7c4377465905a456879a0a5d4c333bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5E6UAkaa1TxtePMX.png"/></div></div></figure><h2 id="9662" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">发布构建工件</h2><p id="957c" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">现在我们已经发布了两个web应用程序，我们需要一种方法来获取应用程序的文件。为此，我们将使用<a class="ae kl" href="https://github.com/marketplace/actions/upload-a-build-artifact" rel="noopener ugc nofollow" target="_blank">上传工件动作</a>。我使用上面发布步骤的输出来为每个应用程序找到到<strong class="jp ir"> publish </strong>文件夹的路径，然后为每个应用程序使用一个Upload Artifacts动作。以下是添加到我们现有工作流程底部的两个步骤。</p><pre class="kn ko kp kq gt lz ma mb mc aw md bi"><span id="4c7c" class="ku kv iq ma b gy me mf l mg mh">- name: Upload WebApp1 Build Artifact<br/>  uses: actions/upload-artifact@v2<br/>  with:<br/>    name: WebApp1<br/>    path: /home/runner/work/Playground/Playground/src/WebApp1/bin/Debug/netcoreapp3.1/publish/<br/>    <br/>- name: Upload WebApp2 Build Artifact<br/>  uses: actions/upload-artifact@v2<br/>  with:<br/>    name: WebApp2<br/>    path: /home/runner/work/Playground/Playground/src/WebApp2/bin/Debug/netcoreapp3.1/publish/</span></pre><p id="1635" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">签入更改后，让工作流运行。完成后，如果您单击工作流运行的详细信息，您将看到它现在有可以下载的工件。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mj"><img src="../Images/0e3ce9cb89f69614a19bc9adaa04e68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NZ3lgCRBkIEmsMV8.png"/></div></div></figure><h2 id="40c5" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">包扎</h2><p id="00be" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">我们现在有了一个工作流，它产生了我们可以在验证应用程序构建和测试通过的基础上实际部署的文件。我希望这给了你一个很好的起点来构建你自己的工作流。我们只是触及了GitHub Actions的皮毛，我期待着看到我们还能做些什么。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="57b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mr">原载于</em><a class="ae kl" href="https://elanderson.net/2020/06/github-use-actions-to-publish-artifacts/" rel="noopener ugc nofollow" target="_blank"><em class="mr"/></a><em class="mr">。</em></p></div></div>    
</body>
</html>