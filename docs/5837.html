<html>
<head>
<title>React’s ErrorBoundary. Are You Using It Yet?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React的错误边界。你还在用它吗？</h1>
<blockquote>原文：<a href="https://itnext.io/reacts-errorboundary-are-you-using-it-yet-a42f3369e983?source=collection_archive---------3-----------------------#2021-06-06">https://itnext.io/reacts-errorboundary-are-you-using-it-yet-a42f3369e983?source=collection_archive---------3-----------------------#2021-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b882" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">2017年就有了，但是没人知道这件事。</h2></div><p id="eae1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您最近是否浏览过React文档？作为开发人员，我们应该尽最大努力保持最新状态。浏览文档是学习新事物的最佳方式。这就是我们如何发现React的错误边界。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/ac7ed30f7ee4f45669aef0b8b065b424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mRXkMiQUPc3cU2pp"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">承认你的错误，有错误的界限。<a class="ae lu" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="c558" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">我为什么要用它？</h1><p id="e51d" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">在你关闭这篇文章之前，请等待！是的，误差边界是从2017年开始的。然而，React最近为React DevTools引入了一个新特性！</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="dc92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个特性将允许开发人员测试不同的组件将如何处理错误。它将允许您使用DevTools模拟一个“崩溃”的React组件。</p><p id="c722" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，你<em class="mu">应该</em>实现错误处理逻辑，就像任何其他应用程序一样。然而，准备一些东西，以防万一坏了也不是个坏主意。还记得墨菲定律吗？作为受驱动的开发人员，我们希望避免任何可能对我们的用户产生负面影响的事情。</p><blockquote class="mv"><p id="993b" class="mw mx it bd my mz na nb nc nd ne ld dk translated">任何可能出错的事情都会出错。</p><p id="6a4b" class="mw mx it bd my mz na nb nc nd ne ld dk translated">~墨菲定律</p></blockquote><h1 id="62a8" class="lv lw it bd lx ly lz ma mb mc md me mf jz nf ka mh kc ng kd mj kf nh kg ml mm bi translated">误差边界？那是什么？</h1><p id="9e8f" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe ni nj nk nl b">ErrorBoundary</code>组件从React 16就有了。也就是实际上…从2017年开始！然而，许多开发人员并不知道它的存在，我也没有看到它被经常使用。</p><p id="a0b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">浏览<a class="ae lu" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank"> React文档</a>我们可以找到<a class="ae lu" href="https://reactjs.org/docs/error-boundaries.html" rel="noopener ugc nofollow" target="_blank">错误边界</a>的定义。</p><blockquote class="mv"><p id="2978" class="mw mx it bd my mz na nb nc nd ne ld dk translated">UI某个部分的JavaScript错误不应该破坏整个应用程序。为了解决React用户的这个问题，React 16引入了“错误边界”的新概念。</p><p id="f1c1" class="mw mx it bd my mz na nb nc nd ne ld dk translated"><em class="nm"> ~ React文档</em></p></blockquote><p id="9576" class="pw-post-body-paragraph ki kj it kk b kl nn ju kn ko no jx kq kr np kt ku kv nq kx ky kz nr lb lc ld im bi translated">正如文档所述，<code class="fe ni nj nk nl b">ErrorBoundary</code>组件不会捕捉任何事件处理程序和异步代码错误。</p><h2 id="ceab" class="ns lw it bd lx nt nu dn mb nv nw dp mf kr nx ny mh kv nz oa mj kz ob oc ml od bi translated">好吧，但是它有什么用？</h2><p id="82aa" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">它限制了由于错误而损坏的用户界面区域。想象一下下面的React应用程序。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oe mt l"/></div></figure><p id="8006" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这些组件中的任何一个损坏，整个应用程序的UI都可能损坏。我们不想那样。相反，我们可以将错误的范围扩大到应用程序的特定块。例如，假设<code class="fe ni nj nk nl b">Content</code>和<code class="fe ni nj nk nl b">ReadMore</code>应该只相互影响，而不影响<code class="fe ni nj nk nl b">Header</code>和<code class="fe ni nj nk nl b">Footer</code>组件。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oe mt l"/></div></figure><p id="d7ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很简单，对吧？只需在要隔离错误的组件上定义错误边界。</p><h1 id="d927" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">给我一个现场演示！</h1><p id="4a43" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">是的，肯定的！React的团队为这个做了一个<a class="ae lu" href="https://codepen.io/gaearon/pen/wqvxGa?editors=0010" rel="noopener ugc nofollow" target="_blank">的精美演示。通过点击直到5次点击，这将打破用户界面。顶部组件没有设置错误边界，因此我们可以看到它们同时断开。然而，对于底部的两个元件，使用了误差边界。如果一个组件损坏，另一个组件仍将运行。</a></p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="of mt l"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">React团队制作的React错误边界演示。</figcaption></figure><h1 id="5a02" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">这个误差边界成分从何而来？</h1><p id="136c" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">有一个陷阱。这个组件你得自己做。好消息是，这非常简单，并且在出现错误时允许完全定制！您甚至可以基于React文档中给出的示例。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="oe mt l"/></div></figure><p id="0471" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，错误边界组件只不过是一个React组件，带有额外的生命周期方法。我们有<code class="fe ni nj nk nl b">getDerivedStateFromError()</code>和<code class="fe ni nj nk nl b">componentDidCatch()</code>可以用来根据错误修改UI，或者记录错误。这只是一些例子，但还有无限多的可能性。</p><p id="ac3a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如您所看到的，React的文档建议将错误状态保存在状态中，并使用它来呈现错误而不是实际的组件。</p><h1 id="86d3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">功能组件呢？</h1><p id="6ae4" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">不错的捕捉，它确实是一个类组件！功能组件尚不支持错误边界生命周期。这可能会在将来添加，因为React团队正在为DevTools推出关于这方面的更新。</p><h1 id="4d50" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">这是全新的吗？</h1><p id="0ea7" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">不，当然不是。这是对DevTools的改进，允许更容易地调试和测试这些错误边界，然而，错误边界自2017年以来一直存在于React中！这个更新可能会给开发人员带来更多对错误界限的关注。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="109d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">告诉我有关此更新的更多信息！</h1><p id="8cd5" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><a class="og oh ep" href="https://medium.com/u/a72dd4e6268?source=post_page-----a42f3369e983--------------------------------" rel="noopener" target="_blank">布莱恩·沃恩</a>在推特上发布了一张新更新的gif图片。我们可以看到一个新的选项来故意“崩溃”一个特定的组件。反过来，这让我们可以测试错误边界，而不必实际造成组件崩溃。谢谢布莱恩和鲍！</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="f56a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">下一步是什么？</h1><p id="f0be" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">拓宽您对错误边界的视野，并阅读一些开发人员同行的意见！</p><p id="789a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Bryn Bennett有一篇关于错误界限的非常深入的文章，我强烈推荐这篇文章。</p><div class="oi oj gp gr ok ol"><a href="https://javascript.plainenglish.io/how-to-fail-with-style-error-boundaries-in-react-402d8a8f53de" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">如何在风格上失败:React中的错误界限</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">在构建用户界面的过程中，处理意外行为与处理预期行为同等重要</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz lo ol"/></div></div></a></div><p id="6085" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想要更多的资料，Anam Soomro已经写了一篇简短但有力的文章，来全面掌握错误边界背后的概念。</p><div class="oi oj gp gr ok ol"><a href="https://levelup.gitconnected.com/erro-2a61f82526a" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">React中的错误边界</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">错误处理为用户保持了一个平滑的界面，即使事情变得不顺利。</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ou l"><div class="pa l ow ox oy ou oz lo ol"/></div></div></a></div><p id="7418" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您已经准备好开始自己的冒险，开始构建令人惊叹的应用程序。只是不要忘记错误边界！</p><p id="83b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PS:不要忘了不时看一看<a class="ae lu" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank"> React文档</a>！</p></div><div class="ab cl pb pc hx pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="im in io ip iq"><p id="dbcb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://kevinvr.medium.com/membership" rel="noopener">订阅我的媒介</a>到<strong class="kk iu">解锁</strong> <strong class="kk iu">所有</strong> <strong class="kk iu">文章</strong>。通过使用我的链接订阅，你是支持我的工作，没有额外的费用。你会得到我永远的感激。</p></div></div>    
</body>
</html>