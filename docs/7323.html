<html>
<head>
<title>Flutter Credit Card Input Form — No Packages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter信用卡输入表单—无包</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-credit-card-input-form-1a1e0b1ec040?source=collection_archive---------0-----------------------#2022-08-21">https://itnext.io/flutter-credit-card-input-form-1a1e0b1ec040?source=collection_archive---------0-----------------------#2022-08-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="75c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在将信用卡表单添加到Flutter时，使用第三方包是很常见的。我将向您展示一种在Flutter上添加信用卡表单的简单方法，无需使用任何第三方软件包。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/fb7afd1d39ad1bd561c9ce5405ac72d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HvvHBvsdAE7cbEWnyD940Q.png"/></div></div></figure><p id="2058" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您将学习如何识别卡的类型，是visa卡还是<br/>万事达卡，以及如何在四位数字后添加空格，在月份后添加斜线。您还将学习如何验证卡号。如果你想看的话，这里有<a class="ae kx" href="https://cutt.ly/QXEbXeI" rel="noopener ugc nofollow" target="_blank">完整的源代码</a>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/8e1844122cd864a452ed2071d88bb555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/1*ZGduivWJqhFe_ajBDl0zzA.gif"/></div></figure><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="1c0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始吧，这个屏幕相当简单，有几个文本字段和一个按钮。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lb la l"/></div></figure><p id="6a19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于卡尚未创建，因此卡类型会出现错误。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="3981" class="lh li iq ld b gy lj lk l ll lm">enum CardType {<br/>  Master,<br/>  Visa,<br/>  Verve,<br/>  Discover,<br/>  AmericanExpress,<br/>  DinersClub,<br/>  Jcb,<br/>  Others,<br/>  Invalid<br/>}</span></pre><p id="50ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您输入信用卡号时，您会注意到它在第四位数字后添加了空格。允许我们在Flutter上做这样的事情。现在让我们创建自己的<code class="fe ln lo lp ld b">CardNumberInputFormatter</code>。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="9ed0" class="lh li iq ld b gy lj lk l ll lm">class <strong class="ld ir">CardNumberInputFormatter</strong> extends <strong class="ld ir">TextInputFormatter</strong> {<br/>  <a class="ae kx" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  TextEditingValue formatEditUpdate(<br/>      TextEditingValue oldValue, TextEditingValue newValue) {<br/>    var text = newValue.text;</span><span id="9902" class="lh li iq ld b gy lq lk l ll lm">if (newValue.selection.baseOffset == 0) {<br/>      return newValue;<br/>    }</span><span id="1aed" class="lh li iq ld b gy lq lk l ll lm">var buffer = StringBuffer();<br/>    for (int i = 0; i &lt; text.length; i++) {<br/>      buffer.write(text[i]);<br/>      var nonZeroIndex = i + 1;<br/>      if (nonZeroIndex % 4 == 0 &amp;&amp; nonZeroIndex != text.length) {<br/>        buffer.write('  '); <strong class="ld ir">// Add double spaces.</strong><br/>      }<br/>    }</span><span id="3346" class="lh li iq ld b gy lq lk l ll lm">var string = buffer.toString();<br/>    return newValue.copyWith(<br/>        text: string,<br/>        selection: TextSelection.collapsed(offset: string.length));<br/>  }<br/>}</span></pre><p id="4a42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后返回信用卡文本字段，将<code class="fe ln lo lp ld b">CardNumberInputFormatter</code>添加到<code class="fe ln lo lp ld b">inputFormatters</code>。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="2224" class="lh li iq ld b gy lj lk l ll lm">...<br/>TextFormField(<br/>  controller: creditCardController,<br/>  keyboardType: TextInputType.number,<br/>  validator: CardUtils.validateCardNum,<br/>  <strong class="ld ir">inputFormatters</strong>: [<br/>    FilteringTextInputFormatter.digitsOnly,<br/>    LengthLimitingTextInputFormatter(19),<br/>    <strong class="ld ir">CardNumberInputFormatter(),</strong><br/>  ],<br/>  decoration: InputDecoration(hintText: "Card number"),<br/>),</span></pre><p id="8c54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看一下预告👇</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/992df4053855dfec0c9ba4d96782227d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*fp8RXbTrRT3TvXpuetuI3w.gif"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">带空格的卡号</figcaption></figure><p id="4844" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要为到期日期做一些类似的事情，但是我们需要一个斜杠来代替空格。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="213d" class="lh li iq ld b gy lj lk l ll lm">class <strong class="ld ir">CardMonthInputFormatter</strong> extends <strong class="ld ir">TextInputFormatter</strong> {<br/>  <a class="ae kx" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  TextEditingValue formatEditUpdate(<br/>      TextEditingValue oldValue, TextEditingValue newValue) {<br/>    var newText = newValue.text;</span><span id="ee20" class="lh li iq ld b gy lq lk l ll lm">if (newValue.selection.baseOffset == 0) {<br/>      return newValue;<br/>    }</span><span id="4cc1" class="lh li iq ld b gy lq lk l ll lm">var buffer = StringBuffer();<br/>    for (int i = 0; i &lt; newText.length; i++) {<br/>      buffer.write(newText[i]);<br/>      var nonZeroIndex = i + 1;<br/>      <strong class="ld ir">if (nonZeroIndex % 2 == 0 &amp;&amp; nonZeroIndex != newText.length) {<br/>        buffer.write('/');<br/>      }</strong><br/>    }</span><span id="666e" class="lh li iq ld b gy lq lk l ll lm">var string = buffer.toString();<br/>    return newValue.copyWith(<br/>        text: string,<br/>        selection: TextSelection.collapsed(offset: string.length));<br/>  }<br/>}</span></pre><p id="9151" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ln lo lp ld b">inputFormatters</code>下，定义<code class="fe ln lo lp ld b">CardMonthInputFormatter</code>。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="2124" class="lh li iq ld b gy lj lk l ll lm">TextFormField(<br/>  keyboardType: TextInputType.number,<br/>  <strong class="ld ir">inputFormatters</strong>: [<br/>    FilteringTextInputFormatter.digitsOnly,<br/>    LengthLimitingTextInputFormatter(4),<br/>    <strong class="ld ir">CardMonthInputFormatter(),</strong><br/>  ],<br/>  decoration: const InputDecoration(hintText: "MM/YY"),<br/>),</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/064091ed16ffe0a9d8dcd2062d508af3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*4kBbAFzMBUlfsC_Gcvd0WQ.gif"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">带“/”的过期日期</figcaption></figure><p id="0676" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是识别卡的类型，是Visa，Mastercard，还是其他。很想把它放在<code class="fe ln lo lp ld b">CardUtils</code>下。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="2e4a" class="lh li iq ld b gy lj lk l ll lm">class <strong class="ld ir">CardUtils</strong> {</span><span id="908c" class="lh li iq ld b gy lq lk l ll lm">static CardType <strong class="ld ir">getCardTypeFrmNumber</strong>(String input) {<br/>    CardType cardType;<br/>    if (input.startsWith(RegExp(<br/>        r'((5[1-5])|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720))'))) {<br/>      cardType = CardType.Master;<br/>    } else if (input.startsWith(RegExp(r'[4]'))) {<br/>      cardType = CardType.Visa;<br/>    } else if (input.startsWith(RegExp(r'((506(0|1))|(507(8|9))|(6500))'))) {<br/>      cardType = CardType.Verve;<br/>    } else if (input.startsWith(RegExp(r'((34)|(37))'))) {<br/>      cardType = CardType.AmericanExpress;<br/>    } else if (input.startsWith(RegExp(r'((6[45])|(6011))'))) {<br/>      cardType = CardType.Discover;<br/>    } else if (input.startsWith(RegExp(r'((30[0-5])|(3[89])|(36)|(3095))'))) {<br/>      cardType = CardType.DinersClub;<br/>    } else if (input.startsWith(RegExp(r'(352[89]|35[3-8][0-9])'))) {<br/>      cardType = CardType.Jcb;<br/>    } else if (input.length &lt;= 8) {<br/>      cardType = CardType.Others;<br/>    } else {<br/>      cardType = CardType.Invalid;<br/>    }<br/>    return cardType;<br/>  }</span><span id="0729" class="lh li iq ld b gy lq lk l ll lm">}</span></pre><p id="2868" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">知道了信用卡的类型，展示它的标志就相当容易了。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="6a6e" class="lh li iq ld b gy lj lk l ll lm">class CardUtils {</span><span id="aafd" class="lh li iq ld b gy lq lk l ll lm">...</span><span id="9fee" class="lh li iq ld b gy lq lk l ll lm">static Widget? <strong class="ld ir">getCardIcon</strong>(CardType? cardType) {<br/>    String img = "";<br/>    Icon? icon;<br/>    switch (cardType) {<br/>      case CardType.Master:<br/>        img = 'mastercard.png';<br/>        break;<br/>      case CardType.Visa:<br/>        img = 'visa.png';<br/>        break;<br/>      case CardType.Verve:<br/>        img = 'verve.png';<br/>        break;<br/>      case CardType.AmericanExpress:<br/>        img = 'american_express.png';<br/>        break;<br/>      case CardType.Discover:<br/>        img = 'discover.png';<br/>        break;<br/>      case CardType.DinersClub:<br/>        img = 'dinners_club.png';<br/>        break;<br/>      case CardType.Jcb:<br/>        img = 'jcb.png';<br/>        break;<br/>      case CardType.Others:<br/>        icon = const Icon(<br/>          Icons.credit_card,<br/>          size: 24.0,<br/>          color: Color(0xFFB8B5C3),<br/>        );<br/>        break;<br/>      default:<br/>        icon = const Icon(<br/>          Icons.warning,<br/>          size: 24.0,<br/>          color: Color(0xFFB8B5C3),<br/>        );<br/>        break;<br/>    }<br/>    Widget? widget;<br/>    if (img.isNotEmpty) {<br/>      widget = Image.asset(<br/>        'assets/images/$img',<br/>        width: 40.0,<br/>      );<br/>    } else {<br/>      widget = icon;<br/>    }<br/>    return widget;<br/>  }<br/>}</span></pre><p id="5e37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了改善用户体验，我们在卡号的4位数字后使用双空格。卡号需要没有那些双空格，所以我们将定义一个名为<code class="fe ln lo lp ld b">getCleanedNumber</code>的方法。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="ece5" class="lh li iq ld b gy lj lk l ll lm">class CardUtils {</span><span id="ec24" class="lh li iq ld b gy lq lk l ll lm">...</span><span id="e14c" class="lh li iq ld b gy lq lk l ll lm">static String <strong class="ld ir">getCleanedNumber</strong>(String text) {<br/>    RegExp regExp = RegExp(r"[^0-9]");<br/>    return text.replaceAll(regExp, '');<br/>  }<br/>}</span></pre><p id="aa33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ln lo lp ld b">AddNewCardScreen</code>中，定义一个方法，让我们知道卡的类型并相应地更新它。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="33d4" class="lh li iq ld b gy lj lk l ll lm">void <strong class="ld ir">getCardTypeFrmNumber</strong>() {<br/>    if (cardNumberController.text.length &lt;= 6) {<br/>      String input = CardUtils.getCleanedNumber(cardNumberController.text);<br/>      CardType type = CardUtils.getCardTypeFrmNumber(input);<br/>      if (type != cardType) {<br/>        <strong class="ld ir">setState(() {<br/>          cardType = type;<br/>        });</strong><br/>      }<br/>    }<br/>  }</span></pre><p id="92b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每当信用卡文本字段改变时，我们必须运行<code class="fe ln lo lp ld b">getCardTypeFrmNumber</code>方法。您可以通过向<code class="fe ln lo lp ld b">initState</code>上的<code class="fe ln lo lp ld b">cardNumberController</code>添加一个监听器来实现这一点。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="b5df" class="lh li iq ld b gy lj lk l ll lm"><a class="ae kx" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void initState() {<br/>    cardNumberController.<strong class="ld ir">addListener</strong>(<br/>      () {<br/>        <strong class="ld ir">getCardTypeFrmNumber</strong>();<br/>      },<br/>    );<br/>    super.initState();<br/>  }</span></pre><p id="4e3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">别忘了处理掉它。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="8107" class="lh li iq ld b gy lj lk l ll lm"><a class="ae kx" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void dispose() {<br/>    <strong class="ld ir">cardNumberController.dispose</strong>();<br/>    super.dispose();<br/>  }</span></pre><p id="35ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到信用卡文本字段，从<code class="fe ln lo lp ld b">InputDecoration</code>中移除<code class="fe ln lo lp ld b">const</code>并添加代表卡类型标志的<code class="fe ln lo lp ld b">suffix</code>。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="4aed" class="lh li iq ld b gy lj lk l ll lm">TextFormField(</span><span id="75a2" class="lh li iq ld b gy lq lk l ll lm">...<br/>  <br/>  decoration: <strong class="ld ir">InputDecoration(</strong><br/>    hintText: "Card number",<br/><strong class="ld ir">    suffix: CardUtils.getCardIcon(cardType),</strong><br/>  ),<br/>),</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/2ffa895a01093caf1590e295537e23d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*pa5m0328TaK5_sMzUWpQHg.gif"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">信用卡类型标志</figcaption></figure><p id="fa82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还没有验证信用卡，这是最重要的一步。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="9949" class="lh li iq ld b gy lj lk l ll lm">class CardUtils {</span><span id="8464" class="lh li iq ld b gy lq lk l ll lm">...</span><span id="a83d" class="lh li iq ld b gy lq lk l ll lm">/// With the card number with Luhn Algorithm</span><span id="8fbb" class="lh li iq ld b gy lq lk l ll lm">/// https://en.wikipedia.org/wiki/Luhn_algorithm</span><span id="a111" class="lh li iq ld b gy lq lk l ll lm">  static String? <strong class="ld ir">validateCardNum</strong>(String? input) {<br/>    if (input == null || input.isEmpty) {<br/>      return "This field is required";<br/>    }</span><span id="28c6" class="lh li iq ld b gy lq lk l ll lm">input = getCleanedNumber(input);</span><span id="a9cb" class="lh li iq ld b gy lq lk l ll lm">if (input.length &lt; 8) {<br/>      return "Card is invalid";<br/>    }</span><span id="5876" class="lh li iq ld b gy lq lk l ll lm">int sum = 0;<br/>    int length = input.length;<br/>    for (var i = 0; i &lt; length; i++) {<br/>      // get digits in reverse order<br/>      int digit = int.parse(input[length - i - 1]);</span><span id="ddd3" class="lh li iq ld b gy lq lk l ll lm">// every 2nd number multiply with 2<br/>      if (i % 2 == 1) {<br/>        digit *= 2;<br/>      }<br/>      sum += digit &gt; 9 ? (digit - 9) : digit;<br/>    }</span><span id="80c9" class="lh li iq ld b gy lq lk l ll lm">if (sum % 10 == 0) {<br/>      return null;<br/>    }</span><span id="86f7" class="lh li iq ld b gy lq lk l ll lm">return "Card is invalid";<br/>  }<br/>}</span></pre><p id="ce3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要验证的不只是卡号；这也是CVV和到期日。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="6c93" class="lh li iq ld b gy lj lk l ll lm">class CardUtils {</span><span id="8426" class="lh li iq ld b gy lq lk l ll lm">...</span><span id="abe0" class="lh li iq ld b gy lq lk l ll lm"><br/>  static String? <strong class="ld ir">validateCVV</strong>(String? value) {<br/>    if (value == null || value.isEmpty) {<br/>      return "This field is required";<br/>    }</span><span id="b0e1" class="lh li iq ld b gy lq lk l ll lm">if (value.length &lt; 3 || value.length &gt; 4) {<br/>      return "CVV is invalid";<br/>    }<br/>    return null;<br/>  }</span><span id="bda1" class="lh li iq ld b gy lq lk l ll lm">static String? <strong class="ld ir">validateDate</strong>(String? value) {<br/>    if (value == null || value.isEmpty) {<br/>      return "This field is required";<br/>    }</span><span id="2f6e" class="lh li iq ld b gy lq lk l ll lm">int year;<br/>int month;</span><span id="3d85" class="lh li iq ld b gy lq lk l ll lm">if (value.contains(RegExp(r'(/)'))) {<br/>      var split = value.split(RegExp(r'(/)'));<br/>      <br/>      month = int.parse(split[0]);<br/>      year = int.parse(split[1]);<br/>    } else {<br/>      <br/>      month = int.parse(value.substring(0, (value.length)));<br/>      year = -1; // Lets use an invalid year intentionally<br/>    }</span><span id="b3f8" class="lh li iq ld b gy lq lk l ll lm">if ((month &lt; 1) || (month &gt; 12)) {<br/>      // A valid month is between 1 (January) and 12 (December)<br/>      return 'Expiry month is invalid';<br/>    }</span><span id="d152" class="lh li iq ld b gy lq lk l ll lm">var fourDigitsYear = convertYearTo4Digits(year);<br/>    if ((fourDigitsYear &lt; 1) || (fourDigitsYear &gt; 2099)) {<br/>      // We are assuming a valid should be between 1 and 2099.<br/>      // Note that, it's valid doesn't mean that it has not expired.<br/>      return 'Expiry year is invalid';<br/>    }</span><span id="9450" class="lh li iq ld b gy lq lk l ll lm">if (!hasDateExpired(month, year)) {<br/>      return "Card has expired";<br/>    }<br/>    return null;<br/>  }<br/>}</span></pre><p id="a64f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只需将这些验证器添加到文本字段中，我们就完成了。这里有一些<strong class="jp ir">奖励🥳 </strong>的方法可能对你有帮助。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="c506" class="lh li iq ld b gy lj lk l ll lm">/// Convert the two-digit year to four-digit year if necessary<br/>static int <strong class="ld ir">convertYearTo4Digits</strong>(int year) {<br/>  if (year &lt; 100 &amp;&amp; year &gt;= 0) {<br/>    var now = DateTime.now();<br/>    String currentYear = now.year.toString();<br/>    String prefix = currentYear.substring(0, currentYear.length - 2);<br/>    year = int.parse('$prefix${year.toString().padLeft(2, '0')}');<br/>  }<br/>  return year;<br/>}</span><span id="7062" class="lh li iq ld b gy lq lk l ll lm">static bool <strong class="ld ir">hasDateExpired</strong>(int month, int year) {<br/>  return isNotExpired(year, month);<br/>}</span><span id="5342" class="lh li iq ld b gy lq lk l ll lm">static bool <strong class="ld ir">isNotExpired</strong>(int year, int month) {<br/>  // It has not expired if both the year and date has not passed<br/>  return !hasYearPassed(year) &amp;&amp; !hasMonthPassed(year, month);<br/>}</span><span id="e89e" class="lh li iq ld b gy lq lk l ll lm">static List&lt;int&gt; <strong class="ld ir">getExpiryDate</strong>(String value) {<br/>  var split = value.split(RegExp(r'(/)'));<br/>  return [int.parse(split[0]), int.parse(split[1])];<br/>}</span><span id="658f" class="lh li iq ld b gy lq lk l ll lm">static bool <strong class="ld ir">hasMonthPassed</strong>(int year, int month) {<br/>  var now = DateTime.now();<br/>  // The month has passed if:<br/>  // 1. The year is in the past. In that case, we just assume that the month<br/>  // has passed<br/>  // 2. Card's month (plus another month) is more than current month.<br/>  return hasYearPassed(year) ||<br/>      convertYearTo4Digits(year) == now.year &amp;&amp; (month &lt; now.month + 1);<br/>}</span><span id="ad5d" class="lh li iq ld b gy lq lk l ll lm">static bool <strong class="ld ir">hasYearPassed</strong>(int year) {<br/>  int fourDigitsYear = convertYearTo4Digits(year);<br/>  var now = DateTime.now();<br/>  // The year has passed if the year we are currently is more than card's<br/>  // year<br/>  return fourDigitsYear &lt; now.year;<br/>}</span></pre><p id="d12d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里是<a class="ae kx" href="https://cutt.ly/QXEbXeI" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">源代码</strong> </a>如果你想看看的话。</p><p id="df74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是取自<strong class="jp ir"> FlutterShop </strong> — <strong class="jp ir">的另一个屏幕，这是一个完全可定制的商店UI套件。如果你喜欢，你可以看看这个工具包👇</strong></p><div class="lw lx gp gr ly lz"><a href="https://theflutterway.gumroad.com/l/fluttershop" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd ir gy z fp me fr fs mf fu fw ip bi translated">Flutter shop-Flutter的高级电子商务UI套件</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">Chrome或Brave浏览器推荐预览Live预览FlutterShop是一个高级电子商务UI套件，您可以使用…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">theflutterway.gumroad.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn kv lz"/></div></div></a></div><p id="58a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我做错了什么？欢迎发表评论。我很想进步。</p><p id="fc79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您阅读这篇文章。拍手声👏如果你觉得有用的话。</p></div></div>    
</body>
</html>