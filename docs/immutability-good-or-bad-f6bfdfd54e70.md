# 不变性:好还是坏？

> 原文：<https://itnext.io/immutability-good-or-bad-f6bfdfd54e70?source=collection_archive---------3----------------------->

![](img/857ec5f8b9ed06aa79189a623d9d7e02.png)

https://images.app.goo.gl/6KybdxPsoB6EgvvS9

它从灌木丛中跑出来，看起来像只皮卡丘。我把我的扑克球扔向它，突然它变成了一个 gyarados。那时我知道我有同上，一个最难在口袋妖怪 go 中找到的口袋妖怪。对于那些不熟悉同上的人来说，同上是一个口袋妖怪，它本身没有任何能力，可以变成任何其他口袋妖怪。有些人认为同上是最强大的口袋妖怪之一，但也可以很容易地认为它是最弱的口袋妖怪之一。

为什么我会在这里谈论口袋妖怪？原来一个同上可以有点像可变性。在编程中，可变性是我们将任何变量变成其他变量的能力。这里我想讨论一下使用不可变语言或者至少使用工具使语言不可变的好处。

例如在 javascript es6 中，我们可以将一个变量声明为`let`。

```
let foo = 'blah'
foo = 1
```

`let`在 javascript 中是可变的。这意味着我们可以随时在本地范围内将它更改为我们想要的任何值。

这可能是非常强大的，因为我们有能力在任何时候将 foo 重新分配给我们想要的任何东西(如果你正在使用类似 typescript 的东西，你将不能改变那个变量的类型)。

***那么你为什么会关心永恒性呢？***

其中一个最大的原因是，很难预测在任何时间点每条数据都包含什么。或者换句话说，它增加了复杂性。可变数据本质上是复杂的，因为它可以改变。

如果您开始接触线程或多处理，您必须开始考虑如何处理数据访问，并确保在需要时拥有正确的数据，而不是修改它。

所以我们知道复杂性随着可变性的增加而增加。因为我们必须开始考虑如何确保我们拥有的数据不会在其他地方被修改。

我们开始看到不变性的一些地方是什么？

正如我们前面看到的，javascript 是一种可变的语言。但是我们看到人们正在开发工具来减少它的可变性。

随着组分的引入而发生反应。我们开始看到不可变数据的力量。react 中组件的概念是确保每个组件都有不变的变量，除非发生状态变化。这些状态变化应该被认为是对所有数据点的完全改变。一个新的数据槽。

现在，我们可以将每个组件看作是整个解决方案中独立的、可测试的部分。

另一个为不变性而创建的 javascript 工具是 redux。在 redux 中，您可以运行一个缩减器，该缩减器为每个缩减器的迭代创建一个新的数据槽。这保证了数据是最新的。

如果我没有在项目中使用不变性，我应该开始吗？

如果你的系统不够复杂，没有竞态条件和其他复杂的问题，那么没有。但是大多数系统都有某种竞态条件和异步行为。

不变性可能是修复给你带来问题的代码部分的好办法。

***有没有内置不变性的好语言？***

是的，我们看到越来越多的语言采用了不变性的概念。这些似乎也是最受关注的语言或框架。

如果你想了解一门关于不变性的语言，那就去看看 erlang。或者更好地看看凤凰。Pheonix 构建在 erlang 之上，它提供了一些很好的后端和前端工具，使 erlang 更容易使用。

我是严肃对待不变性的项目的粉丝，因为它们更容易推理和调试。

你能做些什么来使你的代码更加不可变？

如果你有什么好主意，请告诉我。

编码快乐！！