<html>
<head>
<title>Introducing SwiftEmailValidator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftEmailValidator简介</h1>
<blockquote>原文：<a href="https://itnext.io/introducing-swiftemailvalidator-df658af4ebb1?source=collection_archive---------2-----------------------#2022-01-28">https://itnext.io/introducing-swiftemailvalidator-df658af4ebb1?source=collection_archive---------2-----------------------#2022-01-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6ea2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">验证99%的北美电子邮件只需不到5分钟的时间，但验证全球范围内100%的有效电子邮件地址可能需要很长时间。引入SwiftEmailValidator，消除这种痛苦。</p><p id="c5b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在麻省理工学院的许可下发布，并可在GitHub上免费获得:<a class="ae kl" href="https://github.com/ekscrypto/SwiftEmailValidator" rel="noopener ugc nofollow" target="_blank">https://github.com/ekscrypto/SwiftEmailValidator</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/1fc5b19021004eb8efe55da0d40daa63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LjC61INZOAcut6o_"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae kl" href="https://unsplash.com/@onlineprinters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">在线打印机</a>在<a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e085" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你认为可以用一个“简单”的正则表达式来验证电子邮件，你很可能是在欺骗自己。快速回顾一下EmailRegex.com，你会发现许多编程语言都存在多种不同的正则表达式，不幸的是，它们都不能100%有效。更好的是非常难读和不可维护的。</p><p id="2998" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几个声称研究过RFC标准的人列出了(大部分有效的)有效/无效电子邮件地址的例子，遗漏了边缘情况或更糟的情况，错误地将应该无效的电子邮件标记为有效，这并没有帮助。(即:something@123.123.123.123不是有效的电子邮件地址，something@something.web也不是)。</p><p id="1efb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">幸运的是，使用一点逻辑，以及可用的外部资源，比如来自<a class="ae kl" href="https://publicsuffix.org" rel="noopener ugc nofollow" target="_blank">https://publicsuffix.org</a>的公共后缀列表，就有可能构建一个更强大的验证器。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="35f4" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">装置</h1><ul class=""><li id="0523" class="mh mi iq jp b jq mj ju mk jy ml kc mm kg mn kk mo mp mq mr bi translated">从Xcode中，打开您的项目设置和“包依赖项”</li><li id="b2a1" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">点击“+”按钮添加新的依赖项</li><li id="b7ab" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">在搜索栏中，输入:<a class="ae kl" href="https://github.com/ekscrypto/SwiftEmailValidator" rel="noopener ugc nofollow" target="_blank">https://github.com/ekscrypto/SwiftEmailValidator</a></li><li id="56be" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">查看显示的信息，然后点击“添加包”按钮。</li><li id="6401" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">完成后，该包应该作为依赖项列出。</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mx"><img src="../Images/42ee648c231fd74ce937de1937ca527f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNJjnbiG755n1LfIyti7jA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">突出显示“添加”按钮的Swift包依赖关系屏幕</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi my"><img src="../Images/4e97b25e57fde874cf3ab0cc85e8b001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zh26Lz1_UVUtZDlJQvwXfA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">Xcode的Swift包管理器“添加包”屏幕</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mz"><img src="../Images/2c514876ba78446e2af1921a29246c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ozzc0LZD82_Bfucc7LufHQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">定义了依赖关系的Xcode包依赖关系屏幕</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="c799" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">基本用法</h1><p id="c99f" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">要验证电子邮件地址的格式是否正确:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="8695" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以创建字符串扩展来添加. isValidEmail布尔计算属性:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="1f68" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">高级:指定RFC兼容性要求</h1><p id="4ad0" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">使用验证器函数的“兼容性”参数，验证器可以验证三个级别的遵从性:</p><ul class=""><li id="925c" class="mh mi iq jp b jq jr ju jv jy nf kc ng kg nh kk mo mp mq mr bi translated">。<strong class="jp ir"> ascii </strong> : RFC 822 —美国ascii电子邮件</li><li id="7d1d" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">。<strong class="jp ir">ASCII with Unicode extension</strong>:RFC 2047—支持编码Unicode的美国ASCII电子邮件</li><li id="ddd0" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">。<strong class="jp ir">unicode</strong>:RFC 6531—smtputf 8支持</li></ul><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="e1fb" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">高级:IPv4 / IPv6地址作为域</h1><p id="85bd" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">如果您希望允许电子邮件地址直接使用IPv4/IPv6地址，就像在<em class="ni">my address @【127 . 0 . 0 . 1】</em>中一样，您可以将allowAddressLiterals设置为true。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="2561" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">默认情况下，不允许使用IP地址。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="e932" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">高级:自定义公共后缀规则</h1><p id="2a55" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">公共后缀列表是维护顶级域名列表和适用于每个域名的一些验证规则的协作成果。这有助于网站所有者和浏览器供应商在不应该可用的级别阻止cookies，也可以用于验证电子邮件地址的@domain部分是否有效。</p><p id="1a41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SwiftEmailValidator库内置了一个版本的公共后缀列表，但您可能希望让您的应用程序定期下载该列表的较新版本以保持最新，或者您可能有一些想要支持的内部域。</p><p id="6323" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">规则的格式是<em class="ni">[[字符串]] </em>。外部数组是公共后缀的列表，内部数组是该后缀的规则列表。</p><p id="eac0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一组具有值<em class="ni"> [["com"]] </em>的规则将指示email@com是无效的，但是允许email@website.com。</p><p id="3687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">具有值<em class="ni"> [["*，" com"]] </em>的一组规则将指示email@website.com是无效的，但是email@subdomain.website.com是允许的。</p><p id="a823" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一组值为<em class="ni"> [["*，" com"]，["！myserver "，" com"]] </em>表示email@com，email@website.com是无效地址，但email@myserver.com是允许的。以感叹号开头的规则是“例外”，优先于其他规则。</p><p id="c74f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在<a class="ae kl" href="https://github.com/ekscrypto/SwiftEmailValidator/blob/main/Utilities/update-suffix.swift" rel="noopener ugc nofollow" target="_blank">https://github . com/ekscrypto/SwiftEmailValidator/blob/main/Utilities/update-Suffix . Swift</a>找到一个Swift脚本来下载公共后缀列表的最新副本并生成适当的<em class="ni"> [[String]] </em>规则</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="b190" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然该库有广泛的单元测试，但电子邮件验证一直很棘手。处理所有边缘案例都需要付出巨大的努力。请确保在生产中使用该库之前对其进行全面测试。</p><p id="9b40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这个库能对你们中的一些人有所帮助，我确信它会在我当前和即将到来的项目中对我有所帮助。干杯，编码快乐！</p></div></div>    
</body>
</html>