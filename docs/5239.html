<html>
<head>
<title>How to handle multiple SSH keys with GitLab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用GitLab处理多个SSH密钥</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-handle-multiple-ssh-keys-with-gitlab-27f7cf2e77ed?source=collection_archive---------0-----------------------#2021-01-19">https://itnext.io/how-to-handle-multiple-ssh-keys-with-gitlab-27f7cf2e77ed?source=collection_archive---------0-----------------------#2021-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div class="gh gi io"><img src="../Images/72fbd6f987b80c35054edcb6709d956d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*jzfoXFRLSRWBywWnqOQxig.jpeg"/></div><figcaption class="iv iw gj gh gi ix iy bd b be z dk translated">图片由beehosting.pro提供</figcaption></figure><div class=""/><p id="b76b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">故事是这样的。你有自己的GitLab用于个人项目，也有一个用于工作。这看起来很酷，直到你开始在这两个方面下功夫。</p><p id="03f4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我个人喜欢在电脑上把工作和私人物品分开。多个GitLab帐户的问题是你不能在两个帐户上使用同一个SSH密钥。例如，您有一个与GitLab帐户关联的个人电子邮件地址，以及与另一个帐户关联的商务电子邮件地址。这是区分个人工作和业务的一个很好的方法，但它也带来了一些挑战。</p><p id="68a9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如我提到的，不同的电子邮件地址的GitLab帐户不能有相同的SSH密钥，所以解决这个问题的好方法是为个人和商业项目创建单独的SSH密钥。尽管这看起来是一个很难解决的任务，但是一旦你理解了基础知识，它就很简单了。那么如何才能解决这个问题呢？</p><p id="2a5e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一件事是创建两个SSH密钥，您可以在终端中使用下面的命令来完成，但是一定要按照您想要的方式命名您的密钥，直到名称不同为止，因为我们将在后面的过程中使用它。我让默认值为私有SSH密钥，并将业务SSH密钥命名为:<strong class="ka jc"> <em class="kw"> work_rsa </em> </strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="0808" class="lg lh jb lc b gy li lj l lk ll">ssh-keygen -t rsa -C "your_email@example.com"</span></pre><p id="72c2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你把你的业务和私人电子邮件地址的每一个关键。现在，如果输入下面的命令(基本意思是，转到~/。ssh文件夹并列出所有文件)</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a380" class="lg lh jb lc b gy li lj l lk ll">cd ~/.ssh &amp;&amp; ll</span></pre><p id="6b24" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以看到你有两把<em class="kw">的钥匙。pub </em>扩展和一个没有。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="b1d8" class="lg lh jb lc b gy li lj l lk ll">-rw-------  1 sasa  staff   419B Jan 19 11:24 work_rsa<br/>-rw-r--r--  1 sasa  staff   106B Jan 19 11:24 work_rsa.pub</span></pre><p id="aa31" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不同的是<em class="kw">。pub </em>是一个公钥，这个密钥用于在GitHub或GitLab等服务上存储它。一旦您尝试连接SSH，这个密钥将与您的私有本地密钥(没有扩展名的相同名称)进行核对，如果它们匹配，则一切正常，您可以进行推送、克隆、获取、拉取等操作。</p><p id="9c37" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，一个很好的做法是在本地分离您的项目，例如，您可以将您的个人项目放在不同的文件夹中:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="86f3" class="lg lh jb lc b gy li lj l lk ll">~/Private<br/>~/Work</span></pre><p id="0e60" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以你可以有~/Private/TennisApp，或者~/Work/ACME，这样你可以为你所有的项目设置不同的键。您可以通过编辑位于以下位置的<strong class="ka jc"> <em class="kw"> gitconfig </em> </strong>来完成此操作:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="edea" class="lg lh jb lc b gy li lj l lk ll">~/.gitconfig</span></pre><p id="afcd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">(不要把这个文件和~/混淆。ssh/config) </em></p><p id="de03" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以编辑。gitconfig是这样的:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="ae6a" class="lg lh jb lc b gy li lj l lk ll">[includeIf "gitdir:Work/"]<br/>    path = .gitconfig-work</span></pre><p id="dbb1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以这意味着如果你的项目位于~/Work中，将使用电子邮件为' sasa.fister@work.net '的用户，以及SSH密钥' work_rsa '。否则，如果您的项目位于~/Private文件夹(该文件夹位于您的计算机上)，则将使用电子邮件“sashafishter@gmail.com”和id_rsa密钥。</p><p id="ecbb" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，创造。git config-工作文件</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="72ec" class="lg lh jb lc b gy li lj l lk ll">touch ~/.gitconfig-work</span></pre><p id="5b0f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并将项目放入其中，如下所示:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="190f" class="lg lh jb lc b gy li lj l lk ll">[user]<br/>    email = "<a class="ae lm" href="mailto:sasa.fister@serapion.net" rel="noopener ugc nofollow" target="_blank">y</a>ourgitlabemail@example.com"<br/>[core]<br/>   sshCommand = "ssh -i ~/.ssh/work_rsa"</span></pre><p id="866c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将为你设置好一切，所以你可以做所有的git操作，它将为你的每个项目使用单独的SSH密钥和电子邮件。</p><p id="0c3c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望这能帮助你配置你的多个GitLab账户。</p></div></div>    
</body>
</html>