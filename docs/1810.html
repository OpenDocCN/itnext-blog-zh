<html>
<head>
<title>Add interactivity to your charts in Angular apps with d3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用d3.js为Angular应用程序中的图表添加交互性</h1>
<blockquote>原文：<a href="https://itnext.io/add-interactivity-to-your-charts-in-angular-2-applications-with-d3-js-78fd3718e6fb?source=collection_archive---------3-----------------------#2019-02-03">https://itnext.io/add-interactivity-to-your-charts-in-angular-2-applications-with-d3-js-78fd3718e6fb?source=collection_archive---------3-----------------------#2019-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e95a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用d3.js的魔力增强你的图表…</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d5c039a4687324965c9500f1f9623f70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RxjXA--Hli-OFwFr"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@rawpixel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> rawpixel </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="cbc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时在你的项目中，你需要添加一些精彩的图表和视觉元素来显示数据，帮助决策，…</p><p id="f936" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，Javascript社区中存在大量选项来实现您的目标。</p><p id="de98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> d3.js </a>(代表<strong class="lb iu">D</strong>ATA-<strong class="lb iu">D</strong>riven<strong class="lb iu">D</strong>documents)是你能找到的主要库之一。它给了你很大的自由来绘制符合你需要的图表。画廊里有很多令人印象深刻的例子。</p><p id="087a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>因为d3使用HTML、SVG和CSS，所以您需要了解这种编程语言和数据格式的基本知识。在这篇文章中，我不会涉及d3.js的基础知识，你有很多教程。我更喜欢展示一些新奇的选项来提高他们的交互性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4c9e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">准备操场</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/d68ae00f292eadb9b4f6ac357d2b6e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k6azqyjUhEnh6CjD"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="5b60" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">属国</h2><p id="d220" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">当然，我们将使用以下依赖关系:</p><ul class=""><li id="2c6e" class="nm nn it lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><em class="nv"> angular/cli: </em>导入所有角度从属关系</li><li id="41e4" class="nm nn it lb b lc nw lf nx li ny lm nz lq oa lu nr ns nt nu bi translated"><em class="nv"> d3 </em>:所有的d3.js库</li></ul><p id="2a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您的计算机上已经安装了Node，使用以下命令安装前面提到的依赖项:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="e49c" class="mv md it oc b gy og oh l oi oj">npm i -g @angular/cli<br/>ng new d3ChartsTutorial <br/>cd d3ChartsTutorial<br/>npm i d3<br/>npm i -D @types/d3</span></pre><blockquote class="ok ol om"><p id="699f" class="kz la nv lb b lc ld ju le lf lg jx lh on lj lk ll oo ln lo lp op lr ls lt lu im bi translated"><strong class="lb iu">快速说明:</strong> <br/> <code class="fe oq or os oc b">-g</code> <em class="it">表示全局安装依赖项</em> <br/> <code class="fe oq or os oc b">-D</code> <em class="it">表示安装为</em> devDependency <em class="it">(不用于生产模式)</em> <br/> @types/d3 <em class="it">包含d3对象对应的TypeScript类。</em></p></blockquote><h2 id="e798" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">数据服务</h2><p id="7860" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">移动到app文件夹(<code class="fe oq or os oc b">cd src/app</code>，运行<code class="fe oq or os oc b">ng g s Data</code>，创建一个名为<em class="nv"> DataService </em>的服务文件。给它喂食:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><blockquote class="ok ol om"><p id="2b15" class="kz la nv lb b lc ld ju le lf lg jx lh on lj lk ll oo ln lo lp op lr ls lt lu im bi translated"><strong class="lb iu">关于角度CLI的快速说明:<br/> </strong> <code class="fe oq or os oc b"><em class="it">g</em></code> <em class="it">是</em><code class="fe oq or os oc b"><em class="it">generate</em></code><em class="it"><br/></em><code class="fe oq or os oc b"><em class="it">s</em></code><em class="it">是</em> <code class="fe oq or os oc b"><em class="it">service<br/></em></code> <em class="it">的快捷方式(其他选项可用，</em> <a class="ae ky" href="https://github.com/angular/angular-cli/wiki/generate" rel="noopener ugc nofollow" target="_blank"> <em class="it">参考</em> </a> <em class="it"> ) </em></p></blockquote><h2 id="d8d3" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">HTML/CSS清理</h2><ul class=""><li id="8f3d" class="nm nn it lb b lc nh lf ni li ov lm ow lq ox lu nr ns nt nu bi translated">删除<em class="nv">app.component.html</em>中的内容</li><li id="3f76" class="nm nn it lb b lc nw lf nx li ny lm nz lq oa lu nr ns nt nu bi translated">将此文件添加到<em class="nv"> style.scss </em>(或<em class="nv"> style.css </em>取决于您的css扩展文件):</li></ul><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="6d50" class="mv md it oc b gy og oh l oi oj">html,body {<br/>  width: 100%;<br/>  height: 100%;<br/>  margin: 0 !important; // override user agent stylesheet<br/>  padding: 0 !important; // override user agent stylesheet<br/>}</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="b07b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来点魔法吧！</p><h1 id="fbcb" class="mc md it bd me mf oy mh mi mj oz ml mm jz pa ka mo kc pb kd mq kf pc kg ms mt bi translated">绘制图表</h1><h2 id="c542" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">饼图/圆环图</h2><p id="b49c" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">(仍在<code class="fe oq or os oc b">src/app</code>目录中)</p><p id="ef71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成一个新组件<code class="fe oq or os oc b">ng g c PieChart</code>。多亏了这个组件，我们将能够绘制一个馅饼或一个甜甜圈，因为甜甜圈是一个特殊的馅饼。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="9b84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码看起来非常冗长，但它是不言自明的，所以我让您仔细阅读它。</p><p id="5c9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以这种方式拆分代码是有目的的，特别是为了图表的响应性，稍后会有更多的细节。</p><p id="8e70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你更喜欢画饼图，设置<code class="fe oq or os oc b">innerRadius(0)</code>(第48行)。</p><p id="67f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">预览:</p><div class="kj kk kl km gt ab cb"><figure class="pd kn pe pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ac4aa8717669154867a018441a48192c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*9O9ex7xcNo0Ork1caledEQ.png"/></div></figure><figure class="pd kn pj pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/3f4474626377c13d0a2d9e690204ea75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*BcKdbKCHmMtb42EbxXz--g.png"/></div></figure></div><h2 id="a590" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">条形图</h2><p id="940a" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">(仍在<code class="fe oq or os oc b">src/app</code>目录中)</p><p id="dd36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成一个新组件<code class="fe oq or os oc b">ng g c BarChart</code>。尽可能简单，它包含X和Y轴以及横条。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="b709" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，代码是不言自明的，您可以看到它呈现了什么:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/d13f0be01138b83c84ba8b38526754e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bCAZvxduHrwrHqWeLfBcdg.png"/></div></div></figure><h2 id="b31e" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">响应能力如何？</h2><p id="ef75" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">让图表有反应是非常容易的。它包括两个步骤。</p><p id="7392" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，添加一个窗口监听器来捕捉resize事件(在<em class="nv"> ngOnInit </em>方法中)。其次，创建相应的<code class="fe oq or os oc b">resize</code>方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">制作响应性饼图…</figcaption></figure><div class="kj kk kl km gt ab cb"><figure class="pd kn pl pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ee5fc46afb085abf28e9060570098101.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/1*eIJMX16kFT7pUH9S_Icsbw.gif"/></div></figure><figure class="pd kn pm pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/b6d194c2d0cf732ef385b94ab67b53a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*UDW20cOc2s-gc6lGPa0IZA.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk pn di po pp translated">弹性十足！</figcaption></figure></div><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="b371" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所知，我们更新了svg维度，然后更新了图表配置(饼图/圆环图的弧线，条形图的轴刻度),最后，我们重新绘制了所有图表，这意味着饼图/圆环图的切片或条形图以及条形图的轴。</p><h2 id="ecd6" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">交互性</h2><p id="aaba" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">添加一些很酷的东西可能会很有趣，比如一个会跟随鼠标移动的工具提示。或者如果您喜欢在条形或切片附近放置一些标签。让我们把一些动态与过渡(缓解功能和延迟)也。</p><p id="335d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">工具提示</strong></p><p id="bd73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加工具提示只需要很少的修改。首先向组件添加一个CSS规则:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="3639" class="mv md it oc b gy og oh l oi oj">styles: [<br/>  `div.tooltip {<br/>    position: absolute;<br/>    text-align: center;<br/>    width: 80px;<br/>    height: 40px;<br/>    padding: 5px;<br/>    font: 12px sans-serif;<br/>    background: black;<br/>    color: white;<br/>    border: 0px;<br/>    border-radius: 8px;<br/>    pointer-events: none;<br/>    vertical-align: middle;<br/>    z-index: 10;<br/>  }`<br/>]</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="2a7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以注意到<em class="nv"> mousemove回调</em>参数数据结构在饼图和条形图之间的变化。这来自于我们提供的数据:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="2957" class="mv md it oc b gy og oh l oi oj">this.slices.data(this.pie(this.dataSource)); // For pie chart<br/>this.bars.data(this.dataSource); // For bar chart</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/6ca1e61efdb21da369add4ee34d82e72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zKWnQsNwkHIO49yAF-HsIA.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">流畅的工具提示耶！</figcaption></figure><p id="02f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">标签</strong></p><p id="1eab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nv">条形图</em></p><p id="955d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是相应的标签CSS规则:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="e2ce" class="mv md it oc b gy og oh l oi oj">svg text.label {<br/>  fill: black;<br/>  font: 15px;<br/>  font-weight: 400;<br/>  text-anchor: middle;<br/>}</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">要适应的代码</figcaption></figure><p id="0c5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nv">饼状图</em></p><p id="a0ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于饼图，我们将显示高于5%的每个切片的名称，以及高于25%的切片的值。代码如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/3a818fdc1fc6ad33373a19f0d2f42de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gcQ2s2tDIPqAeDwRKT-Lvg.gif"/></div></div></figure><p id="94a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nv">甜甜圈图</em></p><p id="cb87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要忘记更新代码，将您的饼图转换为圆环图:</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="dfb5" class="mv md it oc b gy og oh l oi oj">private setArcs() {<br/>  const thickness = .75; // Or any value you want<br/>  this.arc = d3.arc()<br/>  .outerRadius(this.radius)<br/>  .innerRadius(this.radius * thickness);<br/>}</span></pre><p id="8426" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，为总计和悬停项指定标签属性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="ac01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它呈现如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/b4806ec12e123b48d2ec72df6c61e8d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/1*48ssR8B0k9j73RszHFd3EA.gif"/></div></figure><p id="d7b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，我也可以使用css类，但是我更喜欢以编程方式管理样式，以避免大量的文件。</p><p id="7dce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">转场(动画)</strong></p><p id="83a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">d3.js中的过渡非常容易管理。</p><p id="6518" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3种应用在d3对象上的方法，比如条或片，给你的图表增加一些活力。</p><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="99f8" class="mv md it oc b gy og oh l oi oj">this.bars<br/>  .transition()<br/>  .ease(d3.easeBounce) // or any other ease function (optional)<br/>  .duration(150)</span></pre><p id="cd5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你甚至可以用<code class="fe oq or os oc b">.delay((d, i) =&gt; i*80)</code>加上一个延迟来增加一个很酷的效果。下面是一些演示d3动画功能的例子:</p><div class="kj kk kl km gt ab cb"><figure class="pd kn pt pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/6354ef178eee15b8fdd3d3635e713fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/1*ZACMvRVaYgDO2KufbtPzVQ.gif"/></div></figure><figure class="pd kn pu pf pg ph pi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/0f89a7fe2aa7f019b816624a77125d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/1*RWpCj-8PQH-s8svCR7_ZmA.gif"/></div></figure></div><p id="5554" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在悬停饼图/甜甜圈切片时添加动画，您必须在图表中添加填充(您可以在条形图中找到)并使用两条弧线(一条在鼠标悬停时，另一条在鼠标离开时)。现在，因为你熟悉d3，我猜你可以自己动手做；)</p><p id="8e2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以使用<code class="fe oq or os oc b">.attrTween()</code>方法来处理同步动画。我让你在<a class="ae ky" href="https://github.com/d3/d3-transition#transition_attrTween" rel="noopener ugc nofollow" target="_blank">文档</a>上检查一下。</p><h1 id="421f" class="mc md it bd me mf oy mh mi mj oz ml mm jz pa ka mo kc pb kd mq kf pc kg ms mt bi translated">d3.js，一个有争议的库？</h1><p id="f8cf" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">为什么会有争议？正如我们所看到的，它非常方便、完整和直接！</p><p id="d68d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一个缺点是它的学习曲线非常陡峭。文档很密集，但是您很容易迷失在细节中。为了提高您的技能，您必须从示例跳到代码示例，以获取一些信息。</p><p id="5672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，d3使用SVG和HTML，而Canvas似乎提供了更好的性能。</p><p id="a7cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更多细节，我推荐你<a class="ae ky" href="https://medium.com/@PepsRyuu/why-i-no-longer-use-d3-js-b8288f306c9a" rel="noopener"> <em class="nv">为什么我不再用D3.js </em> </a> <em class="nv"> </em>作者<a class="pv pw ep" href="https://medium.com/u/e0982f40a196?source=post_page-----78fd3718e6fb--------------------------------" rel="noopener" target="_blank">保罗·斯威尼</a>和<a class="ae ky" href="https://medium.com/dailyjs/the-trouble-with-d3-4a84f7de011f" rel="noopener"> <em class="nv">作者<a class="pv pw ep" href="https://medium.com/u/f682ddbdedde?source=post_page-----78fd3718e6fb--------------------------------" rel="noopener" target="_blank">伊恩·约翰逊</a>的《D3的麻烦》。</em></a></p><h1 id="09af" class="mc md it bd me mf oy mh mi mj oz ml mm jz pa ka mo kc pb kd mq kf pc kg ms mt bi translated">结论</h1><p id="d949" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">作为结论，我想说d3.js是一个令人印象深刻的库。它允许绘制惊人的图表，甚至疯狂的动画(<a class="ae ky" href="http://www.decembercafe.org/demo/firework/" rel="noopener ugc nofollow" target="_blank">烟花</a>)。</p><p id="fba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然学习掌握d3似乎很难，但我认为它是在Angular应用程序中维护图表和视觉元素的最佳开源选项。其庞大的社区(Github上超过80k颗星星)和众多的例子有助于维护你的代码。</p><h2 id="f69c" class="mv md it bd me mw mx dn mi my mz dp mm li na nb mo lm nc nd mq lq ne nf ms ng bi translated">寻找创意？</h2><p id="cc68" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">可以在以下两个网站上找到许多示例和代码样本:</p><div class="px py gp gr pz qa"><a href="https://bl.ocks.org/" rel="noopener  ugc nofollow" target="_blank"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd iu gy z fp qf fr fs qg fu fw is bi translated">热门街区-bl.ocks.org</h2><div class="qh l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">bl.ocks.org</p></div></div></div></a></div><div class="px py gp gr pz qa"><a href="https://beta.observablehq.com/" rel="noopener  ugc nofollow" target="_blank"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd iu gy z fp qf fr fs qg fu fw is bi translated">可观察量</h2><div class="qi l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">借助用于数据分析、可视化的交互式笔记本电脑，更快地发现见解，更有效地进行交流</h3></div><div class="qh l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">beta.observablehq.com</p></div></div><div class="qj l"><div class="qk l ql qm qn qj qo ks qa"/></div></div></a></div><p id="ea67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在我的GitHub上找到所有代码:</p><div class="px py gp gr pz qa"><a href="https://github.com/AvocadoVenom/d3ChartsTutorial" rel="noopener  ugc nofollow" target="_blank"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd iu gy z fp qf fr fs qg fu fw is bi translated">AvocadoVenom/d3ChartsTutorial</h2><div class="qi l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">d3.js图表在Angular应用程序中的实现</h3></div><div class="qh l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">github.com</p></div></div><div class="qj l"><div class="qp l ql qm qn qj qo ks qa"/></div></div></a></div><p id="e4ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nv"> Nota Bene:我完全知道代码片段是密集而“简洁”的。一些代码示例可能会被省略，请在评论中询问更多的精确度:)</em></p></div></div>    
</body>
</html>