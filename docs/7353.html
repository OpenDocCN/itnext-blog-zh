<html>
<head>
<title>Observations and thoughts after building 3 kubernetes platforms in Financial Services Industry — Part 5 — Cloud Resource Brokering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">金融服务行业三大kubernetes平台建设后的观察与思考——第五部分——云资源代理</h1>
<blockquote>原文：<a href="https://itnext.io/observations-and-thoughts-after-building-3-kubernetes-platforms-in-financial-services-industry-b6404baf9ce3?source=collection_archive---------7-----------------------#2022-08-29">https://itnext.io/observations-and-thoughts-after-building-3-kubernetes-platforms-in-financial-services-industry-b6404baf9ce3?source=collection_archive---------7-----------------------#2022-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a470" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个博客系列的第五部分也是最后一部分，我将分享我在云资源代理领域的观察(从Kubernetes部署云资源。</p><p id="8cc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前的零件:</p><ul class=""><li id="9d42" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/observations-and-thoughts-after-building-3-kubernetes-platforms-in-financial-services-industry-6705511c8e9b">第1部分</a> —概述，K8s平台即服务产品，网络</li><li id="4bc6" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/observations-and-thoughts-after-building-3-kubernetes-platforms-in-financial-services-industry-158eba494528">第二部分</a> —工作负载身份、秘密管理/外部化</li><li id="576b" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/observations-and-thoughts-after-building-3-kubernetes-platforms-in-financial-services-industry-7d6c60206717">第三部</a> — GitOps</li><li id="889c" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated"><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/observations-and-thoughts-after-building-3-kubernetes-platforms-in-financial-services-industry-e8bb24e381a2">第4部分</a> —政策实施</li></ul><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi la"><img src="../Images/7ddf0ca86f8480cc09a4363ca6c2e190.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O-KWtjqqR-B7NQL1.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">配置连接器</figcaption></figure><h1 id="c57b" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">云资源管理/资源代理</h1><p id="0f27" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">您知道现在可以部署云资源了吗？AKS和GKE都有使用YAML部署云资源的工具。AKS有Azure服务运营商，GKE有Anthos配置连接器。这些工具遵循操作者模型，在该模型中，您提供一个资源声明，操作者去部署它，并确保它保持在期望的状态(从而解决配置漂移)</p><p id="c20b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像任何东西一样，它是你可以使用的工具。它确实需要为多租户环境进行配置和强化。这类工具通常只与您的CSP资源交互；所以如果你需要将秘密外化到Vault，那就靠你自己了。此外，部署基础设施现在正在迅速扩展，不仅仅是与CSP接口，还必须与拥有API的系统接口。这使得Kubernetes云资源管理成为另一个“孤岛”,您需要将其粘合到管道中。</p><p id="96f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据我的经验，当您有非常基本的需求并且您的范围完全在CSP内时，从Kubernetes部署云资源效果很好。</p><p id="6592" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了Terraform这样的工具，我发现很难证明投资Kubernetes作为云资源管理解决方案是合理的。尤其是当您需要嵌入意见来创建可重用的部署工件时，或者当您想要进行重要的组合时。</p><p id="52ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我使用Azure Service Operator时，它的成熟度还相当低(2.5年前)。然而，它有一些增值功能，你通常必须自己构建，如数据库上的凭证轮换和在AKV中保存凭证。我参与的不够多，无法进行全面的评估……我确信从那以后，它已经发生了显著的变化。</p><p id="7611" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在GKE上，Anthos Config Connector (ACC)可以作为托管服务或独立组件进行部署。请注意，ACC版本与GKE版本相关联；因此，您必须使用最新的GKE版本来利用修复，这对于每年升级Kubernetes的组织来说是不成立的。谷歌正在推动客户远离部署管理器，除了Terraform(后者更好)，ACC也是推荐的目标之一。</p><p id="9c5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">主要观察结果:</p><ul class=""><li id="1612" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">Kubernetes的云资源管理/资源代理价值有限</li><li id="b228" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated">如果您需要在CSP之外进行集成，这种方法是不够的</li><li id="dec2" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated">如果您需要构建复杂的基础设施，这种方法是不够的</li><li id="fba7" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated">ACC的变化速度比GKE快得多，它们的生命周期应该分离！</li></ul></div></div>    
</body>
</html>