<html>
<head>
<title>Using UIView and UIViewController in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中使用UIView和UIViewController</h1>
<blockquote>原文：<a href="https://itnext.io/using-uiview-in-swiftui-ec4e2b39451b?source=collection_archive---------6-----------------------#2021-05-07">https://itnext.io/using-uiview-in-swiftui-ec4e2b39451b?source=collection_archive---------6-----------------------#2021-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/4c8c16d0749959e3b5527fa61e233ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ycmxLQ0QGWbRoMg_"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@aggergakker?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jesper Aggergaard </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="6744" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不时会遇到一个不使用SwiftUI的SDK，而是使用带有<code class="fe le lf lg lh b">UIView</code>和/或<code class="fe le lf lg lh b">UIViewController</code>的“旧”UIKit。</p><p id="9e72" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我正在写一个关于DJI无人机编程的<a class="ae kf" href="https://twissmueller.medium.com/programming-dji-drones-97974c18af06" rel="noopener">系列</a>，我使用的是基于UIKit的DJIs SDKs。因此，我必须找到一种方法，在我基于SwiftUI的应用程序中使用它们。</p><p id="8da2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章解释了如何在SwiftUI-apps中使用<code class="fe le lf lg lh b">UIView</code>和<code class="fe le lf lg lh b">UIViewController</code>，并提供了一些“剪切粘贴”的蓝图。</p><p id="b958" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你喜欢这篇文章，请随意给我买杯咖啡。</p><h2 id="07f7" class="li lj it bd lk ll lm dn ln lo lp dp lq kr lr ls lt kv lu lv lw kz lx ly lz ma bi translated">集成UIView</h2><p id="8a18" class="pw-post-body-paragraph kg kh it ki b kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz mf lb lc ld im bi translated">如果SwiftUI中需要一个基于<code class="fe le lf lg lh b">UIView</code>的类，那么创建一个实现<code class="fe le lf lg lh b">UIViewRepresentable</code>协议的SwiftUI-view结构就很简单了。</p><p id="c969" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是通过提供两种方法来实现的:</p><ul class=""><li id="5156" class="mg mh it ki b kj kk kn ko kr mi kv mj kz mk ld ml mm mn mo bi translated"><code class="fe le lf lg lh b">makeUIView()</code>和</li><li id="3629" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><code class="fe le lf lg lh b">updateUIView()</code></li></ul><p id="dba3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe le lf lg lh b">UIKit</code>类需要委托的情况下，<code class="fe le lf lg lh b">Coordinator</code>类可以充当委托。</p><p id="6694" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基本上，必须采取三个步骤来调整该蓝图:</p><ol class=""><li id="f55d" class="mg mh it ki b kj kk kn ko kr mi kv mj kz mk ld mu mm mn mo bi translated">将名称<code class="fe le lf lg lh b">MyView</code>更改为视图的名称。</li><li id="e6f6" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld mu mm mn mo bi translated">将类型<code class="fe le lf lg lh b">SomeUIKitView</code>更改为应使用的类型<code class="fe le lf lg lh b">UIView</code>。</li><li id="e312" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld mu mm mn mo bi translated">如果需要委托，请删除注释并替换委托的类型。</li></ol><pre class="mv mw mx my gt mz lh na nb aw nc bi"><span id="80c8" class="li lj it lh b gy nd ne l nf ng">struct MyView: UIViewRepresentable {<br/><br/>    typealias UIViewType = SomeUIKitView<br/><br/>    func makeUIView(context: Context) -&gt; UIViewType {<br/>        let myView = UIViewType()<br/>        // myView.delegate = context.coordinator<br/>        return myView<br/>    }<br/><br/>    func updateUIView(_ uiView: UIViewType, context: Context) {<br/>        // left blank<br/>    }<br/>    <br/>    func makeCoordinator() -&gt; MyView.Coordinator {<br/>        return Coordinator(self)<br/>    }<br/>}<br/><br/>extension MyView {<br/>    class Coordinator /*: SomeUIKitViewDelegate */ {<br/>        var parent: MyView<br/>        <br/>        init(_ parent: MyView) {<br/>            self.parent = parent<br/>        }<br/>        <br/>        // Implement delegate methods here<br/>    }<br/>}</span></pre><h2 id="ca56" class="li lj it bd lk ll lm dn ln lo lp dp lq kr lr ls lt kv lu lv lw kz lx ly lz ma bi translated">集成UIViewController</h2><p id="2c11" class="pw-post-body-paragraph kg kh it ki b kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz mf lb lc ld im bi translated">类似于<code class="fe le lf lg lh b">UIView</code>我们可以通过创建一个实现<code class="fe le lf lg lh b">UIViewControllerRepresentable</code>方法的结构来集成一个<code class="fe le lf lg lh b">UIViewController</code></p><ul class=""><li id="d82b" class="mg mh it ki b kj kk kn ko kr mi kv mj kz mk ld ml mm mn mo bi translated"><code class="fe le lf lg lh b">makeUIViewController</code>还有</li><li id="4ec4" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><code class="fe le lf lg lh b">updateViewController</code></li></ul><p id="669c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，在使用这个蓝图时，必须完成同样的三个更改:</p><ol class=""><li id="d7f0" class="mg mh it ki b kj kk kn ko kr mi kv mj kz mk ld mu mm mn mo bi translated">将名称<code class="fe le lf lg lh b">MyView</code>更改为视图的名称。</li><li id="3109" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld mu mm mn mo bi translated">将类型<code class="fe le lf lg lh b">SomeUIKitViewController</code>更改为应使用的类型<code class="fe le lf lg lh b">UIViewController</code>。</li><li id="ae32" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld mu mm mn mo bi translated">如果需要委托，请删除注释并替换委托的类型。</li></ol><pre class="mv mw mx my gt mz lh na nb aw nc bi"><span id="2621" class="li lj it lh b gy nd ne l nf ng">struct MyView: UIViewControllerRepresentable {<br/>        <br/>        typealias UIViewControllerType = SomeUIKitViewController<br/><br/>    func makeUIViewController(context: Context) -&gt; UIViewControllerType Controller {<br/>        let myViewController = UIViewControllerType()<br/>        // myView.delegate = context.coordinator<br/>        return myViewController<br/>    }<br/><br/>    func updateUIViewController(_ uiViewController: UIViewControllerType, context: Context) {<br/>            // left blank<br/>    }<br/>    <br/>    func makeCoordinator() -&gt; MyView.Coordinator {<br/>        return Coordinator(self)<br/>    }<br/>}<br/><br/>extension MyView {<br/>    class Coordinator /*: SomeUIKitViewDelegate */ {<br/>        var parent: MyView<br/>        <br/>        init(_ parent: MyView) {<br/>            self.parent = parent<br/>        }<br/>        <br/>        // Implement delegate methods here<br/>    }<br/>}</span></pre><p id="6dd4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你喜欢这篇文章，请给我买杯咖啡。。</p><h2 id="6cb3" class="li lj it bd lk ll lm dn ln lo lp dp lq kr lr ls lt kv lu lv lw kz lx ly lz ma bi translated">资源</h2><ul class=""><li id="627e" class="mg mh it ki b kj mb kn mc kr nh kv ni kz nj ld ml mm mn mo bi translated"><a class="ae kf" href="https://developer.apple.com/documentation/swiftui/uiviewrepresentable" rel="noopener ugc nofollow" target="_blank"> UIViewRepresentable </a></li><li id="3b0a" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><a class="ae kf" href="https://developer.apple.com/documentation/swiftui/uiviewcontrollerrepresentable" rel="noopener ugc nofollow" target="_blank">UIViewControllerRepresentable</a></li><li id="f13f" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><a class="ae kf" href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-wrap-a-custom-uiview-for-swiftui" rel="noopener ugc nofollow" target="_blank">如何为SwiftUI包装自定义ui view</a></li><li id="66a4" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><a class="ae kf" href="https://www.hackingwithswift.com/books/ios-swiftui/wrapping-a-uiviewcontroller-in-a-swiftui-view" rel="noopener ugc nofollow" target="_blank">在SwiftUI视图中包装uiview controller</a></li><li id="04a0" class="mg mh it ki b kj mp kn mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><a class="ae kf" href="https://www.vadimbulavin.com/using-uikit-uiviewcontroller-and-uiview-in-swiftui/" rel="noopener ugc nofollow" target="_blank">在SwiftUI中使用UIView和UIView controller</a></li></ul></div></div>    
</body>
</html>