<html>
<head>
<title>Smaller Docker Images for ASP.NET Core Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ASP.NET核心应用程序的较小Docker映像</h1>
<blockquote>原文：<a href="https://itnext.io/smaller-docker-images-for-asp-net-core-apps-bee4a8fd1277?source=collection_archive---------0-----------------------#2020-01-09">https://itnext.io/smaller-docker-images-for-asp-net-core-apps-bee4a8fd1277?source=collection_archive---------0-----------------------#2020-01-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9e4e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">尺寸缩减高达70%</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7debd0db3a2cf48678e4ffbf8c80e7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_YkwXmX6Xz19t8mMXJSzA.jpeg"/></div></div></figure><p id="9c0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你有没有问过自己，为什么要让你的Docker图片尽可能的小？</p><ol class=""><li id="b558" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">更大的图像意味着<strong class="kw iu">更长的下载时间</strong>。</li><li id="931e" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">更大的图像意味着<strong class="kw iu">更多的存储消耗</strong>。</li><li id="84ae" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">较大的图像意味着图像中有<strong class="kw iu">不必要的组件</strong>。</li></ol><p id="b135" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，大型映像会导致集成和部署延迟，或者增加存储成本。</p><p id="adb5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，我将牢记效率来描述几种方法。Docker上的NET Core部署。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="aff5" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">1)脚手架工程</h2><p id="228d" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">要开始在Docker上部署，我们需要一个示例项目。我将使用默认的ASP.NET核心API项目。您可以通过终端中的<code class="fe nj nk nl nm b">dotnet new webapi -o MyWebApp</code>命令创建项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/667d960242e9138ad2a74aeb14284c69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_0MiWDn__SvmjHPHN4d48A.png"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">该命令将创建新的ASP.NET核心Web API项目</figcaption></figure><h2 id="a32e" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">2)将项目发布为框架相关的应用程序</h2><p id="4806" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">您可以将应用程序发布为<a class="ae ns" href="https://docs.microsoft.com/en-us/dotnet/core/deploying/" rel="noopener ugc nofollow" target="_blank">自包含应用程序或依赖于框架的</a>。在文章的这一部分，我们将把项目发布为框架相关的。</p><p id="7ed0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要发布，请在终端中输入以下命令:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="f5f2" class="ml mm it nm b gy nx ny l nz oa">dotnet publish -c Release -o ./publish</span></pre><p id="119f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">确保你发布的应用带有<strong class="kw iu">发布概要</strong>是很重要的。该选项将告诉。NET publisher应该使用哪个配置文件。</p><h2 id="859a" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">2.1)使用ASP.NET核心运行时创建docker映像</h2><p id="8b92" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">创建一个<code class="fe nj nk nl nm b">Dockerfile</code>，内容如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="16a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">建立形象:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="a30a" class="ml mm it nm b gy nx ny l nz oa">docker build -t web1 -f Dockerfile .</span></pre><p id="df70" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Docker将构建图像并产生如下输出:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="8b2b" class="ml mm it nm b gy nx ny l nz oa">Sending build context to Docker daemon  1.807MB<br/>Step 1/6 : FROM mcr.microsoft.com/dotnet/core/aspnet:3.1 AS runtime<br/>3.1: Pulling from dotnet/core/aspnet<br/>8ec398bc0356: Pull complete                                                                                             9584d2ef7ebe: Pull complete                                                                                             62b61706cd9b: Pull complete                                                                                             8f13df7c0cb1: Pull complete                                                                                             9c72d70b702b: Pull complete                                                                                             Digest: sha256:9f0aebb2e83a9f455e4ac123db10bc263e729e1faaf733709db04d0d6df2b77c<br/>Status: Downloaded newer image for mcr.microsoft.com/dotnet/core/aspnet:3.1<br/> ---&gt; a843e0fbe833<br/>Step 2/6 : EXPOSE 80<br/> ---&gt; Running in 870640b52084<br/>Removing intermediate container 870640b52084<br/> ---&gt; f9a31931a780<br/>Step 3/6 : EXPOSE 443<br/> ---&gt; Running in 7e477e68bd5a<br/>Removing intermediate container 7e477e68bd5a<br/> ---&gt; 7522ce7349fa<br/>Step 4/6 : WORKDIR /app<br/> ---&gt; Running in 7c4d3e1490a3<br/>Removing intermediate container 7c4d3e1490a3<br/> ---&gt; 784d7ff4e4bd<br/>Step 5/6 : COPY ./publish ./<br/> ---&gt; 5a7b9b9163c0<br/>Step 6/6 : ENTRYPOINT ["dotnet", "MyWebApp.dll"]<br/> ---&gt; Running in ce7cdd5dd2c4<br/>Removing intermediate container ce7cdd5dd2c4<br/> ---&gt; bc92fbe6e1b2<br/>Successfully built bc92fbe6e1b2<br/>Successfully tagged web1:latest</span></pre><p id="bba9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">📔为了确保web应用程序工作正常，尝试通过命令<code class="fe nj nk nl nm b">docker run -p 8080:80 web1</code>运行图像。然后导航到<a class="ae ns" href="http://localhost:8080/WeatherForecast" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/Weather</a>查看JSON列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/6cf748ebb885fff124416163abe63e1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vlOZWLZ3UO498sFAFaDZ5Q.png"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">抽样输出</figcaption></figure><p id="fa27" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看起来图像运行良好，让我们来测量图像的大小。用<code class="fe nj nk nl nm b">docker images</code>命令，你可以得到图片的列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/2f1b66e8e7345bb9d76c3db7ff830a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eN8rUlvmVC29EyGI3ebGPA.png"/></div></div></figure><p id="771f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> 207 MB </strong>用于ASP.NET核心应用基础映像，1 MB<strong class="kw iu">用于网络应用。对于一个简单的web应用程序来说<strong class="kw iu"> 208 MB </strong>很大，<strong class="kw iu">不是吗</strong>？😲</strong></p><p id="19b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们检查图像，看看是什么使我们的图像大小为208 MB:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="0e22" class="ml mm it nm b gy nx ny l nz oa">docker history web1:latest</span><span id="1831" class="ml mm it nm b gy of ny l nz oa"># result</span><span id="db8b" class="ml mm it nm b gy of ny l nz oa">CREATED BY                                      SIZE               <br/>/bin/sh -c #(nop)  ENTRYPOINT ["dotnet" "MyW…   0B<br/>/bin/sh -c #(nop) COPY dir:36b502377fe8f29be…   289kB<br/>/bin/sh -c #(nop) WORKDIR /app                  0B<br/>/bin/sh -c #(nop)  EXPOSE 443                   0B<br/>/bin/sh -c #(nop)  EXPOSE 80                    0B<br/>/bin/sh -c aspnetcore_version=3.1.0     &amp;&amp; c…   17.8MB<br/>/bin/sh -c dotnet_version=3.1.0     &amp;&amp; curl …   76.7MB<br/>/bin/sh -c apt-get update     &amp;&amp; apt-get ins…   2.28MB<br/>/bin/sh -c #(nop)  ENV ASPNETCORE_URLS=http:…   0B<br/>/bin/sh -c apt-get update     &amp;&amp; apt-get ins…   41.3MB<br/>/bin/sh -c #(nop)  CMD ["bash"]                 0B<br/>/bin/sh -c #(nop) ADD file:04caaf303199c81ff…   69.2MB</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/19efad3909aca704d531f371cd7a14e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*ifQLSF35UzU3qxYuKbx2UQ.png"/></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">94 MB用于。NET和112MB用于基本映像和库。</figcaption></figure><h2 id="488d" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">3)将项目发布为独立的</h2><p id="2436" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">在第2节中，我们将项目发布为框架相关的，我们看到图像大小约为208 MB。</p><p id="17a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过自包含部署，您可以部署应用程序和任何必需的第三方依赖项以及的版本。NET Core来构建应用程序。要发布为独立的，请运行以下命令:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="90bb" class="ml mm it nm b gy nx ny l nz oa">dotnet publish --runtime alpine-x64 -c Release --self-contained true -o ./publish</span></pre><p id="603d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该应用程序将在Linux docker上运行，所以我选择了<code class="fe nj nk nl nm b">linux-x64</code> runtime进行部署。要查看publish命令支持的其他运行时，请阅读本文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/ab435ac5de63532b34184c4f6cfb06ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KDMw1wtsLF9Z3h5tYwPdQ.png"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">324个文件和93.2 MB</figcaption></figure><p id="8235" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它将生成包含程序集等的<strong class="kw iu"> 324个文件(93.2 MB) </strong>。为了在docker上运行它，我们需要一个Linux基础映像。有Ubuntu，CentOS，OpenSuse，Alpine等不同的基础镜像。</p><p id="5477" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">规模、安全、效率、社区是决定你需要哪一个的重要价值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/8305707bab094eaac725e2f70df82569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wiYYkxlxY-R141mi.png"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">来源:<a class="ae ns" href="https://brianchristner.io/docker-image-base-os-size-comparison/" rel="noopener ugc nofollow" target="_blank"> Docker图片尺寸对比</a>作者<a class="ae ns" href="https://brianchristner.io/author/brian/" rel="noopener ugc nofollow" target="_blank">布莱恩·克里斯特纳</a></figcaption></figure><p id="bf7c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如上图所示，Alpine Linux是最轻的docker基础映像。它提供了安全性、简单性和资源效率！</p><blockquote class="oj ok ol"><p id="ea38" class="ku kv om kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated">Alpine Linux是一个独立的、非商业的、通用的Linux发行版，专为重视安全性、简单性和资源效率的高级用户而设计。<br/>T10】https://alpinelinux.org/about/</p></blockquote><h2 id="0831" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">3.1)使用Alpine base映像创建docker映像</h2><p id="a856" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">创建一个包含以下内容的Docker文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="e8be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我使用alpine:3.9.4作为docker的基础映像，在Docker文件中安装了一些库包。现在，如果你建立图像:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="8d34" class="ml mm it nm b gy nx ny l nz oa">docker build -t web2 -f Dockerfile .</span></pre><p id="a647" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Docker将构建图像并产生如下输出:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="948e" class="ml mm it nm b gy nx ny l nz oa">Sending build context to Docker daemon  296.2MB<br/>Step 1/8 : FROM alpine:3.9.4<br/>3.9.4: Pulling from library/alpine<br/>e7c96db7181b: Pull complete                                                                                                               Digest: sha256:7746df395af22f04212cd25a92c1d6dbc5a06a0ca9579a229ef43008d4d1302a<br/>Status: Downloaded newer image for alpine:3.9.4<br/> ---&gt; 055936d39205<br/>Step 2/8 : RUN apk add --no-cache     openssh libunwind     nghttp2-libs libidn krb5-libs libuuid lttng-ust zlib     libstdc++ libintl     icu<br/> ---&gt; Running in 9471cd447603<br/>fetch <a class="ae ns" href="http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz" rel="noopener ugc nofollow" target="_blank">http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz</a><br/>fetch <a class="ae ns" href="http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz" rel="noopener ugc nofollow" target="_blank">http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz</a><br/>(1/26) Installing libgcc (8.3.0-r0)<br/>(2/26) Installing libstdc++ (8.3.0-r0)<br/>(3/26) Installing icu-libs (62.1-r0)<br/>(4/26) Installing icu (62.1-r0)<br/>(5/26) Installing krb5-conf (1.0-r1)<br/>(6/26) Installing libcom_err (1.44.5-r1)<br/>(7/26) Installing keyutils-libs (1.6-r0)<br/>(8/26) Installing libverto (0.3.0-r1)<br/>(9/26) Installing krb5-libs (1.15.5-r0)<br/>(10/26) Installing libidn (1.35-r0)<br/>(11/26) Installing libintl (0.19.8.1-r4)<br/>(12/26) Installing libunwind (1.2.1-r3)<br/>(13/26) Installing libuuid (2.33-r0)<br/>(14/26) Installing userspace-rcu (0.10.1-r0)<br/>(15/26) Installing lttng-ust (2.10.1-r0)<br/>(16/26) Installing nghttp2-libs (1.35.1-r1)<br/>(17/26) Installing openssh-keygen (7.9_p1-r6)<br/>(18/26) Installing ncurses-terminfo-base (6.1_p20190105-r0)<br/>(19/26) Installing ncurses-terminfo (6.1_p20190105-r0)<br/>(20/26) Installing ncurses-libs (6.1_p20190105-r0)<br/>(21/26) Installing libedit (20181209.3.1-r0)<br/>(22/26) Installing openssh-client (7.9_p1-r6)<br/>(23/26) Installing openssh-sftp-server (7.9_p1-r6)<br/>(24/26) Installing openssh-server-common (7.9_p1-r6)<br/>(25/26) Installing openssh-server (7.9_p1-r6)<br/>(26/26) Installing openssh (7.9_p1-r6)<br/>Executing busybox-1.29.3-r10.trigger<br/>OK: 53 MiB in 40 packages<br/>Removing intermediate container 9471cd447603<br/> ---&gt; 13d705c0f17d<br/>Step 3/8 : EXPOSE 80<br/> ---&gt; Running in 1e9629765f45<br/>Removing intermediate container 1e9629765f45<br/> ---&gt; 3e9b13c5f712<br/>Step 4/8 : EXPOSE 443<br/> ---&gt; Running in d203c44684f4<br/>Removing intermediate container d203c44684f4<br/> ---&gt; d28ff936ef66<br/>Step 5/8 : WORKDIR /app<br/> ---&gt; Running in c0e330d7f71e<br/>Removing intermediate container c0e330d7f71e<br/> ---&gt; 914a79994c12<br/>Step 6/8 : COPY ./publish ./<br/> ---&gt; f264c40e2341<br/>Step 7/8 : RUN ["chmod", "+x", "MyWebApp"]<br/> ---&gt; Running in a66b965fda5b<br/>Removing intermediate container a66b965fda5b<br/> ---&gt; 94e004ed94a7<br/>Step 8/8 : ENTRYPOINT ["./MyWebApp", "--urls", "<a class="ae ns" href="http://0.0.0.0:80" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:80</a>"]<br/> ---&gt; Running in ded6415d0e8b<br/>Removing intermediate container ded6415d0e8b<br/> ---&gt; 2686bfb52f0f<br/>Successfully built 2686bfb52f0f<br/>Successfully tagged web2:latest</span></pre><p id="8497" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该日志比前一个日志稍长；因为它将为Alpine安装一些所需的库。网芯。让我们来测量图像大小:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="d9a2" class="ml mm it nm b gy nx ny l nz oa">docker images</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/7b8ee02f2520400e103388120c2d5d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLIL4pSdjuNoVIcyoi2kBA.png"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">尺寸缩小了29%</figcaption></figure><p id="58ad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图像大小为<strong class="kw iu"> 147 MB，比上一张少了61 MB </strong>。让我们检查一下图像层，看看147 MB是由什么组成的:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="6974" class="ml mm it nm b gy nx ny l nz oa">docker history web2:latest</span></pre><p id="eb70" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">总结后的结果应该是这样的:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="4668" class="ml mm it nm b gy nx ny l nz oa">CREATED BY                                      SIZE                <br/>/bin/sh -c #(nop)  ENTRYPOINT ["./MyWebApp" …   0B<br/>/bin/sh -c #(nop) COPY dir:eec964e257409b648…   97.8MB<br/>/bin/sh -c #(nop) WORKDIR /app                  0B<br/>/bin/sh -c #(nop)  EXPOSE 443                   0B<br/>/bin/sh -c #(nop)  EXPOSE 80                    0B<br/>/bin/sh -c apk add --no-cache     openssh li…   43.8MB<br/>/bin/sh -c #(nop)  CMD ["/bin/sh"]              0B<br/>/bin/sh -c #(nop) ADD file:a86aea1f3a7d68f6a…   5.53MB</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/3a41f62dbec26f34edb3bd67e214ecf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*m_I7bxz9s1TKcADX5JBRnQ.png"/></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">49.33 MB用于基本映像和库，97.8 MB用于应用程序</figcaption></figure><p id="f049" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">与之前的相比，我们通过使用一个轻量级的Linux映像来缩小映像的大小。的。NET runtime加入自带app，能不能做小一点？</p><h2 id="4f7a" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">4)组合独立和IL-接头</h2><p id="f5fb" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">IL-Linker是什么？</p><blockquote class="oj ok ol"><p id="9663" class="ku kv om kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated">IL链接器是一种工具，可以用来只传送一组程序运行可能需要的最少IL代码和元数据，而不是完整的库。</p><p id="9e51" class="ku kv om kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated">各种Xamarin产品使用它来提取在Android、iOS和其他平台上运行应用程序所需的代码。</p><p id="41bc" class="ku kv om kw b kx ky ju kz la lb jx lc on le lf lg oo li lj lk op lm ln lo lp im bi translated">—<a class="ae ns" href="https://github.com/mono/linker" rel="noopener ugc nofollow" target="_blank">https://github.com/mono/linker</a></p></blockquote><p id="b526" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">IL-Linker已经包含在中。NET SDK，因为<a class="ae ns" href="https://github.com/dotnet/core/blob/master/samples/linker-instructions.md" rel="noopener ugc nofollow" target="_blank">它说</a>它可以减少。净核心应用达到50%。</p><p id="56d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要使用il-linker，只需将<code class="fe nj nk nl nm b">/p:PublishTrimmed=true</code>标志传递给publish命令。</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="1b3c" class="ml mm it nm b gy nx ny l nz oa">dotnet publish -c Release -r alpine-x64 --self-contained true /p:PublishTrimmed=true -o ./publish</span></pre><p id="9385" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于IL链接器进程的原因，这需要更长的时间。结果非同凡响！</p><p id="071e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="om"> 226个文件和</em> <strong class="kw iu"> <em class="om"> 53.3 MB </em> </strong> <em class="om">，简直是</em><strong class="kw iu"><em class="om">45%</em></strong><em class="om"/><strong class="kw iu">✌</strong></p><h2 id="3e4d" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">4–1)使用之前的文档对其进行归档</h2><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="6903" class="ml mm it nm b gy nx ny l nz oa">docker build -t web3 -f Dockerfile .</span></pre><p id="d824" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">测量图像尺寸:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/839a41ea30e87f316249c3745c6cf9b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gB438IhgqMJuPDvo9EsHSg.png"/></div></div></figure><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="3dee" class="ml mm it nm b gy nx ny l nz oa">docker history web3:latest</span><span id="249a" class="ml mm it nm b gy of ny l nz oa"># result</span><span id="8393" class="ml mm it nm b gy of ny l nz oa">/bin/sh -c #(nop)  ENTRYPOINT ["./MyWebApp" …   0B<br/>/bin/sh -c #(nop) COPY dir:80b91cb154520a076…   55.9MB<br/>/bin/sh -c #(nop) WORKDIR /app                  0B<br/>/bin/sh -c #(nop)  EXPOSE 443                   0B<br/>/bin/sh -c #(nop)  EXPOSE 80                    0B<br/>/bin/sh -c apk add --no-cache     openssh li…   43.8MB<br/>/bin/sh -c #(nop)  CMD ["/bin/sh"]              0B<br/>/bin/sh -c #(nop) ADD file:a86aea1f3a7d68f6a…   5.53MB</span></pre><p id="84d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">自带55.9MB，Alpine和libs 49.33 MB。<strong class="kw iu">比默认图像小49.52%。</strong></p><h2 id="d4ae" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">5)移除阿尔卑斯山的lib和包装</h2><p id="40bf" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">我们为Alpine安装了所需的库。网芯。微软的这个文档说这些文档只是RHEL6需要的。既然我们使用的是Alpine，那么让我们试着移除它们，看看会发生什么？</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="2a1b" class="ml mm it nm b gy nx ny l nz oa"># RUN apk add --no-cache \ <br/>#     openssh libunwind \<br/>#     nghttp2-libs libidn krb5-libs libuuid lttng-ust zlib \<br/>#     libstdc++ libintl \<br/>#     icu</span></pre><p id="2a5f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第一次尝试:</strong></p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="211d" class="ml mm it nm b gy nx ny l nz oa">Error loading shared library libstdc++.so.6: No such file or directory (needed by ./MyWebApp)<br/>Error loading shared library libgcc_s.so.1: No such file or directory (needed by ./MyWebApp)</span></pre><p id="5e31" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">需要✔ <a class="ae ns" href="https://pkgs.alpinelinux.org/package/edge/main/x86_64/libstdc++" rel="noopener ugc nofollow" target="_blank"> libstdc++ </a>包。</p><p id="9292" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">安装了libstdc++ lib的第二次尝试:</strong></p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="c36f" class="ml mm it nm b gy nx ny l nz oa">Failed to load �a)�V, error: Error loading shared library libintl.so.8: No such file or directory (needed by /app/libcoreclr.so)<br/>Failed to bind to CoreCLR at '/app/'<br/>Failed to create CoreCLR, HRESULT: 0x80008088</span></pre><p id="3d29" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">✔ <a class="ae ns" href="https://pkgs.alpinelinux.org/package/edge/main/x86/libintl" rel="noopener ugc nofollow" target="_blank"> libintl </a>包也是需要的。</p><p id="d8cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">安装了libstdc++和libintl后再尝试:</strong></p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="4e00" class="ml mm it nm b gy nx ny l nz oa">Process terminated. Couldn't find a valid ICU package installed on the system. Set the configuration flag ystem.Globalization.Invariant to true if you want to run with no globalization support.</span></pre><p id="a8a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看来需要<a class="ae ns" href="https://pkgs.alpinelinux.org/package/edge/main/x86/icu" rel="noopener ugc nofollow" target="_blank"> icu </a>包。你可以做两件事:</p><ol class=""><li id="7753" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">沿着<strong class="kw iu"> libstdc++ </strong>和<strong class="kw iu"> libintl安装<strong class="kw iu"> icu </strong>包。</strong></li><li id="8a8c" class="lq lr it kw b kx lz la ma ld mb lh mc ll md lp lv lw lx ly bi translated">将应用程序配置为对区域性不变。(当然，如果全球化不是您的应用程序的选项)</li></ol><p id="526c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">与icu包一起的还有那两个:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="2ea6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">带<strong class="kw iu">所需</strong>库的图像大小:94.8MB <strong class="kw iu"> <em class="om">。</em> </strong> <strong class="kw iu">比上一款小10.2 MB </strong>。</p><p id="9c8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将应用程序配置为运行固定文化模式怎么样？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/956ae9d35ab28f7b52297a91f3c8fe9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Un8xa5QL6QUG94Lpw1lcQ.png"/></div></div></figure><p id="1194" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图像大小将为<strong class="kw iu"> 63MB </strong>(可能的最小尺寸😉).现在您需要将一个环境变量传递给。NET for CultureInvarient选项。</p><p id="a8aa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">环境变量:<strong class="kw iu">dot net _ SYSTEM _ GLOBALIZATION _ INVARIANT = 1</strong></p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="e0cd" class="ml mm it nm b gy nx ny l nz oa">docker run <strong class="nm iu">-e DOTNET_SYSTEM_GLOBALIZATION_INVARIANT=1</strong> -p 8080:80 web5</span><span id="bc4e" class="ml mm it nm b gy of ny l nz oa">#result</span><span id="b7e0" class="ml mm it nm b gy of ny l nz oa">&gt; docker run -e DOTNET_SYSTEM_GLOBALIZATION_INVARIANT=1 -p 8080:80 web5</span><span id="746b" class="ml mm it nm b gy of ny l nz oa">info: Microsoft.Hosting.Lifetime[0]<br/>      Now listening on: <a class="ae ns" href="http://0.0.0.0:80" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:80</a><br/>info: Microsoft.Hosting.Lifetime[0]<br/>      Application started. Press Ctrl+C to shut down.<br/>info: Microsoft.Hosting.Lifetime[0]<br/>      Hosting environment: Production<br/>info: Microsoft.Hosting.Lifetime[0]<br/>      Content root path: /app</span></pre><p id="33d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">工作正常，尺寸缩小了70%左右的✌ ！</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="a38d" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">结论</h2><p id="bd68" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">我喜欢Alpine Linux因为它真的很轻，而且部署速度更快。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/76ea6d594334f3d592a6020745a60101.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4LkaC-Cqm46uHaib8QtW_Q.png"/></div></div></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="d552" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">你想要更多吗？</h2><p id="b0ee" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">自包含部署将生成大量文件(+200个文件)。我并不认为这是一件真正整洁的事情，另一方面，Docker copy命令需要一点时间来复制2-300个文件。</p><p id="7270" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">publish命令支持单文件部署，这意味着它将为整个应用程序生成一个二进制文件。</p><p id="8b13" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe nj nk nl nm b">/p:PublishSingleFile=true</code>标志，发布者将只发布一个二进制文件。</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="4258" class="ml mm it nm b gy nx ny l nz oa">dotnet publish --runtime alpine-x64 -c Release --self-contained true -o ./publish <em class="om">/p:PublishSingleFile=true </em>/p:PublishTrimmed=true</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/6840fec810dbe6e99608458e8e430dfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2HTzghKC27qtg_-wXE1Jew.png"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">一个二进制文件+配置文件</figcaption></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="98c4" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">重要说明</h2><p id="5939" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">如果你使用像<code class="fe nj nk nl nm b">Assymbly.Load('System.Security')</code>这样的动态程序集加载，不要忘记配置IL-Linker，也不要修改那些程序集。</p><p id="b740" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，我们需要做的就是编辑<strong class="kw iu"> csproj </strong>文件并添加:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="baef" class="ml mm it nm b gy nx ny l nz oa">&lt;ItemGroup&gt;<br/>  &lt;TrimmerRootAssembly Include="System.Security" /&gt;<br/>&lt;/ItemGroup&gt;</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="568a" class="ml mm it bd mn mo mp dn mq mr ms dp mt ld mu mv mw lh mx my mz ll na nb nc nd bi translated">更新1:</h2><p id="96ab" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">有人提到我，微软已经为SDK和。基于Alpine的网芯。为什么我没有用它们？</p><p id="e027" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，这是基于Alpine的ASPNET核心运行时的<a class="ae ns" href="https://github.com/dotnet/dotnet-docker/blob/d4a9e799d047f3e86cd2730f48b689c371d38480/3.1/aspnet/alpine3.10/amd64/Dockerfile" rel="noopener ugc nofollow" target="_blank"> docker文件</a>:</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="9052" class="ml mm it nm b gy nx ny l nz oa">ARG REPO=mcr.microsoft.com/dotnet/core/runtime<br/>FROM $REPO:3.1-alpine3.10</span><span id="bef8" class="ml mm it nm b gy of ny l nz oa"># Install ASP.NET Core<br/>RUN aspnetcore_version=3.1.0 \<br/>    &amp;&amp; wget -O aspnetcore.tar.gz <a class="ae ns" href="https://dotnetcli.azureedge.net/dotnet/aspnetcore/Runtime/$aspnetcore_version/aspnetcore-runtime-$aspnetcore_version-linux-musl-x64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://dotnetcli.azureedge.net/dotnet/aspnetcore/Runtime/$aspnetcore_version/aspnetcore-runtime-$aspnetcore_version-linux-musl-x64.tar.gz</a> \<br/>    &amp;&amp; aspnetcore_sha512='fa5e4ae71134a8a6db4ad6a247d3e31406673e03f0a64f7faaad3d84cfb3b70d2cf69e9d9abc1f8688138907d4ddd37cd908669999d85a87892e164053c63847' \<br/>    &amp;&amp; echo "$aspnetcore_sha512  aspnetcore.tar.gz" | sha512sum -c - \<br/>    &amp;&amp; tar -ozxf aspnetcore.tar.gz -C /usr/share/dotnet ./shared/Microsoft.AspNetCore.App \<br/>    &amp;&amp; rm aspnetcore.tar.gz</span><span id="403c" class="ml mm it nm b gy of ny l nz oa">EXPOSE 80<br/>EXPOSE 443</span><span id="858f" class="ml mm it nm b gy of ny l nz oa"># Copy <br/>WORKDIR /app<br/>COPY ./publish ./</span><span id="41c4" class="ml mm it nm b gy of ny l nz oa">ENTRYPOINT ["dotnet", "MyWebApp.dll"]</span></pre><p id="dd9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我构建项目框架依赖并构建这个docker映像，那么映像大小将为<strong class="kw iu"> 105MB </strong>。</p><pre class="kj kk kl km gt nt nm nu nv aw nw bi"><span id="e7ba" class="ml mm it nm b gy nx ny l nz oa">docker history alp-1</span><span id="ab61" class="ml mm it nm b gy of ny l nz oa">CREATED BY                                      SIZE     <br/>/bin/sh -c #(nop)  ENTRYPOINT ["dotnet" "MyW…   0B<br/>/bin/sh -c #(nop) COPY dir:36b502377fe8f29be…   289kB<br/>/bin/sh -c #(nop) WORKDIR /app                  0B<br/>/bin/sh -c #(nop)  EXPOSE 443                   0B<br/>/bin/sh -c #(nop)  EXPOSE 80                    0B<br/>/bin/sh -c aspnetcore_version=3.1.0     &amp;&amp; w…   17.8MB<br/>/bin/sh -c dotnet_version=3.1.0     &amp;&amp; wget …   77.2MB<br/>/bin/sh -c #(nop)  ENV ASPNETCORE_URLS=http:…   0B<br/>/bin/sh -c apk add --no-cache     ca-certifi…   4.08MB<br/>/bin/sh -c #(nop)  CMD ["/bin/sh"]              0B<br/>/bin/sh -c #(nop) ADD file:fe1f09249227e2da2…   5.55MB</span></pre><p id="ff24" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如您所见，<strong class="kw iu"> 95MB的。NET和ASPNET核心，<strong class="kw iu"> 4.08MB </strong>用于libs，<strong class="kw iu"> 5.55MB </strong>用于Alpine本身。在我的解决方案中，我只部署了部分代码。NET是app所需要的，因为IL-Linker去掉了不必要/不用的部分。与<strong class="kw iu"> 105MB </strong>相比，<strong class="kw iu"> 94MB </strong>或<strong class="kw iu"> 63MB </strong>更小。</strong></p><p id="e9b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当然，基于Microsoft Alpine的docker image对于部署来说是一个不错的选择，但是为您的项目选择什么始终取决于您自己。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="f11e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">祝您好运😉</p></div></div>    
</body>
</html>