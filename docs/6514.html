<html>
<head>
<title>Modern C++ in Advent of Code: Day7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代C++代码的出现:第7天</h1>
<blockquote>原文：<a href="https://itnext.io/modern-c-in-advent-of-code-day7-39b74e4375a5?source=collection_archive---------2-----------------------#2021-12-07">https://itnext.io/modern-c-in-advent-of-code-day7-39b74e4375a5?source=collection_archive---------2-----------------------#2021-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="75b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是代码问世的第七天。今天，我们将严重依赖算法。我们还将经历优化其中一个解决方案的过程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/b70852c0963260de1fbfc44b5de5708f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IuiwvxcsodvcsyQlQqncjA.png"/></div></div></figure><p id="3249" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一如既往，请先尝试解决问题，然后再看解决方案。对于本系列中的所有文章，<a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">查看此列表</a>。</p><h1 id="9215" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第七天:第一部分</h1><p id="df9d" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们的目标是确定螃蟹潜艇的最佳水平位置。输入是由逗号分隔的位置列表，例如<code class="fe mb mc md me b">16,1,2,0,4,2,7,1,2,14</code>。</p><p id="f40c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的目标是将潜艇移动到目标位置的总成本最小化，其中每艘潜艇的成本就是离目标的距离。因此，例如，对于输入<code class="fe mb mc md me b">0,2,2,3</code>，最佳目标将是<code class="fe mb mc md me b">2</code>，成本也是<code class="fe mb mc md me b">3</code>(位置0的潜艇的两个成本和位置3的潜艇的一个成本)。</p><p id="274f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们像往常一样从声明和测试开始:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="2532" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将从一个简单的实现开始。解决方案将接近平均值和中间值。所以我们可以对潜艇进行分类，然后从中点左右扫描，看看总成本是否在提高。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="0040" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入的解析遵循以前的模式。我们一直读到输入结束，并检查有效的分隔符。</p><p id="859e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">排序后(第16行)，我们计算初始和(第21行)，然后尝试左右迭代，对每个元素，检查具有新中点的和是否更好。最后，我们返回两个搜索中最好的一个(第47行)。</p><h1 id="5399" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第七天:第二部分</h1><p id="cb7f" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在第二部分中，我们调整计算成本的公式。成本不再是线性的。相反，每一步都越来越贵，也就是说，移动潜艇一步需要花费<code class="fe mb mc md me b">1</code>，两步<code class="fe mb mc md me b">1+2</code>，五步<code class="fe mb mc md me b">1+2+3+4+5</code>，等等。</p><p id="fb43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">重要的是，这也意味着我们的目标不一定是现有的位置之一。幸运的是，我们可以修改第一部分的解决方案，以获得对任何单调成本函数的强力搜索。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="e9ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在在搜索过程中迭代所有的整数值，而不是迭代元素。然而，该代码是健壮的，并且将对part1和part2都有效:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h1 id="48d6" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第七天:优化</h1><p id="40e2" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们的两种解决方案都行得通。然而，你可能会有一个暗示，特别是第二部分的解决方案远非最佳。</p><p id="0772" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们先回顾一下第一部分的解决方案。当我们向左或向右扫描时，我们知道总和变化了多少。想象一下<code class="fe mb mc md me b">...4,5...</code>如果我们从4移动到5，总和变化<code class="fe mb mc md me b">(5–4)*len(left)-(5–4)*len(right)</code>。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="2f34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们仔细看看我们用来计算变化的公式。因为我们从中点开始，所以公式的第二部分总是负的，我们也知道公式的第一部分总是正的(或零)。因此，我们可以一起跳过这两个循环。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="b8b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种解决方案更短，而且因为我们现在只需要计算出中间值，而不需要对整个数组进行排序，所以在<code class="fe mb mc md me b">O(n)</code>而不是<code class="fe mb mc md me b">O(n*logn)</code>中运行。</p><p id="a6fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类似的方法也适用于第二部分，使用平均值。参见<a class="ae kl" href="https://www.reddit.com/r/adventofcode/comments/rar7ty/2021_day_7_solutions/hnkd58g/?utm_source=share&amp;utm_medium=web2x&amp;context=3" rel="noopener ugc nofollow" target="_blank">Reddit上的讨论</a>。</p><h1 id="ae9c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">链接和技术说明</h1><p id="fb3c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">每日解决方案存储库位于:【https://github.com/HappyCerberus/moderncpp-aoc-2021】T4。</p><p id="9f9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看此列表，了解《代码降临》其他日子的相关文章。</p><p id="57ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请不要忘记亲自尝试<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">降临码</a>。</p><h1 id="3803" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">感谢您的阅读</h1><p id="5f8b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">感谢您阅读这篇文章。你喜欢吗？</p><p id="1517" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我也在YouTube上发布视频。你有问题吗？在Twitter或LinkedIn上联系我。</p></div></div>    
</body>
</html>