<html>
<head>
<title>Android AdMob consent with UMP — Personalized or Non-Personalized Ads in EEA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android AdMob同意UMP—EEA中的个性化或非个性化广告</h1>
<blockquote>原文：<a href="https://itnext.io/android-admob-consent-with-ump-personalized-or-non-personalized-ads-in-eea-3592e192ec90?source=collection_archive---------0-----------------------#2022-03-07">https://itnext.io/android-admob-consent-with-ump-personalized-or-non-personalized-ads-in-eea-3592e192ec90?source=collection_archive---------0-----------------------#2022-03-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a0d967a85feb398c71e8de8529d9512c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FX7wWSZz96yw94dsQ5J00A.png"/></div></div></figure><p id="8dd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很可能，如果你即将在Google Play上发布一款新的应用，有一个全球目标，并有集成广告，你肯定已经尝试过为欧洲经济区(EEA)的用户实施GDPR协议。</p><p id="ef1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用旧的<a class="ae kw" href="https://developers.google.com/admob/android/eu-consent" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">同意库</strong> </a>，这曾经是一个非常简单的步骤，因为用户可以选择是否同意个性化广告、非个性化广告，甚至选择为根本不看广告付费。</p><p id="539f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不幸的是，在实施指南的正上方出现了一个红色的框，传达了对这个库的反对意见，支持新的<a class="ae kw" href="https://developers.google.com/admob/ump/android/quick-start" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">用户消息平台</strong> </a> <strong class="ka ir"> (UMP) </strong>，它符合IAB标准(<strong class="ka ir">更新于2022年2月28日</strong>)。</p><p id="04ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">实施指南非常简单，但我相信，一旦您实施了该库并测试了几分钟，您会惊讶地发现<strong class="ka ir">如果同意被拒绝，或者如果在同意管理阶段没有检查某些值，广告将不会被加载</strong>。</p><p id="3327" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为什么会这样？我仔细检查了帮助页面——可能我忘记了几个步骤——我对自己说，直到我读到了<strong class="ka ir"> ConsentStatus。获得了更好的</strong>字段。事实上，在它旁边写着<strong class="ka ir">获得了同意，但是没有定义个性化</strong>。</p><p id="7939" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是关键点:这是由我们的开发者来检查用户是否已经授予<a class="ae kw" href="https://support.google.com/admob/answer/9760862?ref_topic=10303737" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">最低要求</strong> </a>以能够查看广告，以及他是否已经选择查看个性化或非个性化的广告。</p><p id="2fce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">当满足以下所有标准时，谷歌将投放广告:</strong></p><p id="213e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">—最终用户同意谷歌:</p><ul class=""><li id="7719" class="ky kz iq ka b kb kc kf kg kj la kn lb kr lc kv ld le lf lg bi translated">在设备上存储和/或访问信息(<strong class="ka ir">目的1 </strong>)</li><li id="d2c7" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">创建个性化广告档案(<strong class="ka ir">目的3 </strong> )**</li><li id="6af9" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">选择个性化广告(<strong class="ka ir">目的4 </strong> )**</li></ul><p id="8ac3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">—为Google建立合法利益(或同意，当出版商配置其CMP请求时),以:</p><ul class=""><li id="c0e0" class="ky kz iq ka b kb kc kf kg kj la kn lb kr lc kv ld le lf lg bi translated">选择基本广告(<strong class="ka ir">目的2 </strong>)</li><li id="f27d" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">衡量广告绩效(<strong class="ka ir">目的7 </strong>)</li><li id="f886" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">运用市场研究来获得受众洞察(<strong class="ka ir">目的9 </strong>)</li><li id="f0a8" class="ky kz iq ka b kb lh kf li kj lj kn lk kr ll kv ld le lf lg bi translated">开发和改进产品(<strong class="ka ir">目的10 </strong>)</li></ul><p id="fae6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">—同意供应商列表中的<strong class="ka ir">谷歌广告产品</strong></p><p id="1d38" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">** <em class="kx">个性化广告所需</em></p><p id="38c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">UMP库在本地保存用户在同意对话框中给出的值(对于Android in<strong class="ka ir"><em class="kx">shared preferences</em></strong>)，因此我们可以验证它们，并了解用户是否同意查看个性化广告、非个性化广告或拒绝同意。</p><p id="a405" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">检查发布者是否可以首先显示广告(<strong class="ka ir"> Java </strong>)</p><figure class="lm ln lo lp gt jr"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="d793" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果为假(GDPR适用，所以如果在欧洲经济区)，你应该提示用户或接受所有，或详细解释(检查以上)检查什么，以显示至少非个性化的广告，或要求用户选择高级版本的应用程序，否则你将一无所获。</p><p id="d584" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果为真，您可以使用以下方法(<strong class="ka ir"> Java </strong>)检查用户是否被授予了显示个性化广告的最低要求</p><figure class="lm ln lo lp gt jr"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="5a65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，您知道您是否可以请求AdMob个性化或非个性化广告，如果<strong class="ka ir">非个性化</strong>您必须使用这个片段(<strong class="ka ir"> Java </strong>)转发请求</p><figure class="lm ln lo lp gt jr"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="de37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面所有的帮助器方法为<code class="fe ls lt lu lv b">canShowAds() </code>和<code class="fe ls lt lu lv b">canShowPersonalizedAds()</code></p><figure class="lm ln lo lp gt jr"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="1130" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你需要Kotlin中的代码，这里有我用Java移植的方法的原作者(<a class="ae kw" href="https://stackoverflow.com/users/9473786/tyler-v" rel="noopener ugc nofollow" target="_blank"> Tyler V </a>)的<a class="ae kw" href="https://stackoverflow.com/questions/65351543/how-to-implement-ump-sdk-correctly-for-eu-consent" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="97c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望有帮助，别忘了鼓掌和同事们分享！</p></div></div>    
</body>
</html>