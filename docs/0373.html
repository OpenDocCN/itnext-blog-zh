<html>
<head>
<title>Angular — Code Design for responsive websites</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度——响应式网站的代码设计</h1>
<blockquote>原文：<a href="https://itnext.io/angular-code-design-for-responsive-websites-acd4259a478c?source=collection_archive---------1-----------------------#2018-02-28">https://itnext.io/angular-code-design-for-responsive-websites-acd4259a478c?source=collection_archive---------1-----------------------#2018-02-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/35a78b21eb400b9da5059b5c6b424d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8al0RhBlJgA2P0Br_OQHqQ.jpeg"/></div></div></figure><p id="1384" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fangular-code-design-for-responsive-websites-acd4259a478c" rel="noopener ugc nofollow" target="_blank"> <em class="kx">点击这里在LinkedIn上分享这篇文章</em> </a></p><p id="ff04" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们承担一个新的前端项目时，设计师为我们提供网站的网络/移动视图。有时它们彼此不同，作为程序员，我们需要确保为这些情况编写可重用且易于维护的代码。</p><h2 id="411d" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">问题:</h2><p id="eb2e" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">如何创建一个简单的系统，让我们能够在不弄乱代码库的情况下，分别为桌面、平板和移动设备构建组件？</p><h2 id="f4c4" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">解决方案:</h2><p id="a29b" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">他们有很多。我要回顾一下我最喜欢用的一个。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lw"><img src="../Images/860cdd6f47b39020fc476d30208d9557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbEHVKgKKI2ir923DKsBJg.jpeg"/></div></div></figure><h2 id="b3d8" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">满足响应式服务</h2><p id="dde1" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">我通常会创建一个服务，负责确定用户在什么设备或屏幕上浏览网站。至少有几种方法可以做到这一点。</p><ol class=""><li id="b1ab" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">著名的正则表达式:</li></ol><pre class="lx ly lz ma gt mk ml mm mn aw mo bi"><span id="aeca" class="ky kz iq ml b gy mp mq l mr ms">if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {<br/>   console.log('mobile device detected'<br/>}</span></pre><p id="4471" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.屏幕的宽度</p><pre class="lx ly lz ma gt mk ml mm mn aw mo bi"><span id="faa8" class="ky kz iq ml b gy mp mq l mr ms">var width = window.innerWidth;<br/> if (width &lt;= 768) {<br/>  console.log('mobile device detected')<br/> } else if (width &gt; 768 &amp;&amp; width &lt;= 992) {<br/>  console.log('tablet detected')<br/> } else {<br/>  console.log('desktop detected')<br/> }</span></pre><h2 id="1a44" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">用哪个？</h2><p id="0bd1" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">项目的需求可能会迫使你使用两者或其中之一。决定权在你。<br/>这里的一个经验法则是，如果网站有只在移动设备上提供的功能，比如一些特定的弹出窗口、按钮、电话链接——使用第一种方法。否则，第二种方法总是有效的。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/c220694e9121676bb8414d93c0173fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BpAn0AHp5n8N5i-ewQiOQQ.jpeg"/></div></div></figure><p id="5bb6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">responsive.service.js示例如下所示:</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="77b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mw mx my ml b">checkWidth()</code>方法根据屏幕的大小设置<code class="fe mw mx my ml b">screenWidth</code>属性。如果需要，可以在其他服务和组件中使用该属性。但是，如果用户试图在桌面上调整屏幕大小，或者将移动/平板设备旋转到横向视图，这个属性就没有用了。为此，我们创建了一个名为<code class="fe mw mx my ml b">isMobile</code>的rxjs主题。该主题可以在任何组件/服务中订阅，以了解我们是否正在查看移动视图。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/26e7a8878113021b9ff55b17eed71df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AS4Mn0aIsNvczNeNu-xVDw.jpeg"/></div></div></figure><p id="1db0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果现在事情还不清楚，那也没关系，因为我还没有告诉你如何使用Angular的resize方法。我们现在来看一些代码。</p><p id="96c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个app.component.html的例子</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="5271" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，我们使用Angular的resize方法<code class="fe mw mx my ml b">window:resize</code>。每当带有类<code class="fe mw mx my ml b">app-body</code>的div被调整大小时，一个叫做<code class="fe mw mx my ml b">onResize()</code>的方法就会被触发。<br/>该方法在app.component.ts文件中定义:</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="4c30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，我们首先订阅responsive.service.ts文件中的<code class="fe mw mx my ml b">getMobileStatus()</code>方法。记住，如果没有订阅，一个可观察的是没有用的。在您订阅它之后，您调用<code class="fe mw mx my ml b"> onResize()</code>方法。这样做是为了当用户最初登陆网站时，你会知道用户的屏幕大小。假设用户在那之后试图调整浏览器窗口的大小。将触发<code class="fe mw mx my ml b">onResize()</code>方法，调用响应服务中的<code class="fe mw mx my ml b">checkWidth()</code>方法。</p><p id="135e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你向上滚动并检查服务，你会注意到一个方法<code class="fe mw mx my ml b">onMobileChange()</code>被调用，它带有一个取决于屏幕大小的参数true或false。这个方法是关键的组成部分，因为它发出一个可以被每个订阅组件捕获的布尔值。因此，基本上，如果用户调整浏览器窗口的大小，屏幕尺寸会被检查，并发出一个布尔值。任何订阅了<code class="fe mw mx my ml b">responsiveService.getMobileStatus()</code>方法的组件都会知道用户是在看手机、平板电脑还是桌面视图。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/065b06ec9504ecc0883d43287009faa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHYwli58j8fO9zwgESg-dQ.jpeg"/></div></div></figure><p id="05d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，你可以真正减少组件的混乱。以sample.component为例，它使用*ngIf指令根据用户使用的屏幕大小向用户显示不同的html</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="fb1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望这是可以理解的，有帮助的。干杯！</p></div></div>    
</body>
</html>