<html>
<head>
<title>Install Kubernetes on vSphere using Ubuntu juju</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ubuntu juju在vSphere上安装Kubernetes</h1>
<blockquote>原文：<a href="https://itnext.io/install-kubernetes-on-vsphere-using-ubuntu-juju-5d6169176ae0?source=collection_archive---------3-----------------------#2019-04-03">https://itnext.io/install-kubernetes-on-vsphere-using-ubuntu-juju-5d6169176ae0?source=collection_archive---------3-----------------------#2019-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8863" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们中的更多客户(<a class="ae kl" href="https://www.opvizor.com" rel="noopener ugc nofollow" target="_blank"> Opvizor </a>)正在使用<a class="ae kl" href="https://www.kubernetes.io" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>，并且希望监控他们的VMware vSphere环境以及在其上运行的Kubernetes节点和容器。Performance Analyzer将很快支持所有这些设置(还有几周)。一如既往，我们希望分享如何设置我们的测试环境，以便在我们的vSphere 6.7环境之上运行完整的Kubernetes环境。</p><p id="e165" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用Ubuntu 18.10、变色龙、juju，最后是常见的Kubernetes管理工具。</p><h1 id="dd64" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">变戏法</h1><p id="0311" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们需要在我们的Ubuntu管理系统上使用魔法，我们用它在vSphere上部署Kubernetes。如果您没有安装dream-up，请运行:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="0dfe" class="ly kn iq lu b gy lz ma l mb mc"><strong class="lu ir">sudo snap install conjure-up –classic</strong></span></pre><p id="e10a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是安装向导:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="de00" class="ly kn iq lu b gy lz ma l mb mc"><strong class="lu ir">conjure-up kubernetes</strong></span></pre><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/232a3c438a6c338bdffa2827d5a67a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*823-qxk4O7gQF1Gd.png"/></div></div></figure><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/bbe2d2ddfe68d64e4b0ce41d64569525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vbj-RilG4_aS6NBU.png"/></div></div></figure><p id="d073" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，你可以选择一个更全面的安装，但我们很好的Kubernetes核心设置。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/256b781c58cdf08262b558ffad37d5e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CeONG6kK5a6E6vXD.png"/></div></div></figure><p id="bba4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要向下滚动到<strong class="jp ir">配置新云</strong>部分，并选择<strong class="jp ir"> vSphere </strong>。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/d1c40cb2556969fbb52007b457a3b9ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*60iksD8vplVuPuVB.png"/></div></div></figure><p id="d802" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保使用具有管理权限的凭据，因为将部署虚拟机。API端点可以是vCenter ip或FQDN。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/5d74505d552a844533dba3c9b8a60ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4v15Cd7pk5af9ohu.png"/></div></div></figure><p id="3039" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个重要的选择是Kubernetes环境的外部网络。虽然所有Kubernetes pods(容器)都自动获得一个内部ip，该IP只能在Kubernetes集群内到达，但外部网络将用于来自外部(通常是您的局域网)的通信。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/12858e54d20214002f7c4a33174520a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9ZHE-ekaffthMmIc.png"/></div></div></figure><p id="7b5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后您需要选择Kubernetes节点应该部署在哪个数据存储上。一个重要的注意事项是，VMware vSAN目前在运行conjure部署时不被正确支持。最坏的情况是，如果您只是部署开发或测试环境，在vSAN上运行NFS数据存储。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/b538d48c6437f2bc21d81141e6e4902a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FDYBwKv-s4nhvZPS.png"/></div></div></figure><p id="6ecd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以使用法兰绒或印花布作为你的网络插件。以下信息将帮助您找到适合您的网络技术。我们将在博客中使用印花棉布。</p><h1 id="6905" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">法兰绒</h1><p id="957f" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated"><strong class="jp ir">什么是</strong> <a class="ae kl" href="https://www.sdxcentral.com/containers/definitions/what-is-coreos-flannel-definition/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> CoreOS法兰绒？定义</strong> </a></p><p id="9b30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">法兰绒是一种用于连接Linux <a class="ae kl" href="https://www.sdxcentral.com/cloud/containers/" rel="noopener ugc nofollow" target="_blank">容器</a>的网络技术。它由CoreOS 发布和维护，CoreOS是精简的CoreOS Linux容器操作系统的生产商，也是与Docker竞争的rkt容器系统的生产商。</p><p id="8b4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然是为CoreOS操作系统定制的，但法兰绒也兼容Docker。法兰绒是作为一种集装箱联网的替代方法出现的，它源于一个最初名为Rudder的开源概念，2014年更名为法兰绒。它是用Go <a class="ae kl" href="https://www.sdxcentral.com/cloud/devops/definitions/programmability-network-automation-sdn-networks/" rel="noopener ugc nofollow" target="_blank">编程</a>语言编写的。</p><p id="8f4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">【https://github.com/coreos/flannel T2】号</p><h1 id="37ff" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">白棉布</h1><p id="e0cb" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated"><strong class="jp ir">什么是印花布？</strong></p><p id="ff30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Calico 是一款面向容器、虚拟机和基于本地主机的工作负载的开源网络和网络安全解决方案。Calico支持广泛的平台，包括Kubernetes、OpenShift、Docker EE、OpenStack和裸机服务。</p><p id="6433" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Calico将灵活的网络功能与随处运行的安全实施相结合，提供了一个具有本机Linux内核性能和真正的云本机可扩展性的解决方案。Calico为开发人员和集群运营商提供了一致的体验和一系列功能，无论是在公共云中运行还是在本地运行，是在单个节点上运行还是跨数千个节点的集群运行。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/8c13d248703c7c8af6d198de1518c01a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*so9CT4y7qdHjPmn5.png"/></div></div></figure><p id="d5b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在安装过程中，可能会需要sudo命令，所以如果您需要sudo权限，请确保在这里输入密码。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/facd44de6d9ac570a1982bf193e34368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eseyMfb6L1SuYjCG.png"/></div></div></figure><p id="4fbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">默认设置已经完成，您可以单击Deploy按钮开始设置。在那篇文章中，我们想要定制工人设置。Kubernetes worker将是运行容器的节点。</p><h1 id="72bd" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">库伯内特工人报</h1><p id="f78b" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">在Kubernetes中，节点是一个工作机，以前称为minion。根据群集的不同，节点可以是虚拟机或物理机。每个节点都包含运行pod所需的服务，并由主组件管理。节点上的服务包括容器运行时、kubelet和kube-proxy。详见架构设计文档中的<a class="ae kl" href="https://kubernetes.io/docs/concepts/architecture/nodes/" rel="noopener ugc nofollow" target="_blank">Kubernetes节点</a>部分。</p><p id="525f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要比默认worker多一点的资源，所以让我们配置kubernetes-worker部分。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/167f81df39cf8ec0abb85a29e779f1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KmazOMhzm3ydPSji.png"/></div></div></figure><p id="dd3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在这里更改vCPU核心的数量以及内存的大小。我们把它改成8GB内存。</p><h1 id="4ac4" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">部署</h1><p id="08f1" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">现在，我们已经准备好在vSphere上部署Kubernetes，让magic re发挥它的魔力。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/3c84d82d04e6134d417f944893c571cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1fGBhrAifleFtG6z.png"/></div></div></figure><p id="e0ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据您的设置，部署整个设置可能需要一个小时，您可以遵循向导中的整个过程。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/3bb6b0eca6606af17a34fe47f6cf347f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OWPKouY3W88dp3Fb.png"/></div></div></figure><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/242d9aa041ea44455b575dad1132de7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ozfTomIDXgZIdbcw.png"/></div></div></figure><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/c2a80722395aff9651043f34f4ba6040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VPOG_m1Vgx8rpXLK.png"/></div></div></figure><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/f140064d75392eb8661d65ea19d2bd02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YgClExMTclGyT68p.png"/></div></div></figure><p id="1f99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是全部部署就绪。您可以对列出的所有URL进行截图，以访问Kubernetes管理和其他部署的服务，或者使用Kubernetes (k8s)命令再次获取所有信息。</p><p id="941f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn lu b">kubectl cluster-info</code></p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/51988d5d90396ce20ba29b6fcbdfe67b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z62IqaCaE7dBffFo.png"/></div></div></figure><p id="4105" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">dream-up会自动配置您的本地kubectl配置文件，因此您可以立即开始输入命令。</p><p id="2de3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn lu b">kubectl get all</code></p><p id="5bfd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该命令列出了默认名称空间的所有资源。如果要查看所有名称空间的所有资源，请使用–all-namespaces作为参数。</p><p id="3465" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn lu b">kubectl get all --all-namespaces</code></p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi md"><img src="../Images/84eeaf001aa572fc62d157092acdf4f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n797WvH5QRfcTP5K.png"/></div></div></figure><p id="03ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在vSphere环境上的Kubernetes是使用dream-up和juju部署的。juju是一个非常强大的自动化工具，使得控制和扩展您的Kubernetes设置非常容易。<a class="ae kl" href="https://docs.jujucharms.com/2.5/en/commands" rel="noopener ugc nofollow" target="_blank"> juju命令行参考</a></p><p id="5d25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从获取所有组件的状态开始。</p><p id="9775" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn lu b">juju status</code></p><p id="8b54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要知道我们的Kubernetes管理在哪里运行，以及Kubernetes的凭证。</p><figure class="lp lq lr ls gt me gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/51d4359c03f8e3c069c92e64b8962f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/0*4HbrjsKd-DYfff5w.png"/></div></figure><p id="c6b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ml mm mn lu b">kubectl config view</code></p><p id="e60d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您想使用不同的部署选项，也可以在这里找到完整的Ubuntu教程:</p><p id="3c47" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://tutorials.ubuntu.com/tutorial/install-kubernetes-with-conjure-up#0" rel="noopener ugc nofollow" target="_blank">https://tutorials . Ubuntu . com/tutorial/install-kubernetes-with-conjuve-up # 0</a></p><h1 id="b9be" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">SSH到Kubernetes节点</h1><p id="43d3" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">juju使得使用SSH进入任何Kubernetes节点进行故障排除或重新配置变得非常简单。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="c38b" class="ly kn iq lu b gy lz ma l mb mc">juju status # to get information about the master and worker names juju ssh kubernetes-master/0 # enter the master <br/>sudo apt update # update package manager <br/>sudo apt upgrade # install patches <br/>sudo apt autoremove # remove obsolete packages exit # get out of ssh</span></pre><h1 id="b142" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">添加新员工</h1><p id="0cca" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">您可以添加一个worker，该worker配置了与其他正在运行的容器相同的资源</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="b9ba" class="ly kn iq lu b gy lz ma l mb mc"><strong class="lu ir">juju add-unit kubernetes-worker</strong></span></pre><p id="1f54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者您可以更改资源设置，然后添加一个新的工作线程</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="1647" class="ly kn iq lu b gy lz ma l mb mc">juju set-constraints kubernetes-worker cpu-cores=8 mem=32G <br/>juju add-unit kubernetes-worker</span></pre><h1 id="567d" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">小故障排除指南</h1><h1 id="ac3f" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">域名服务器(Domain Name Server)</h1><p id="befe" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">在部署新容器时，您可能会收到一条显示查找错误的消息，或者您希望输入一个正在运行的容器。在这种情况下，Kubernetes主节点和/或工作节点可能没有有效的名称服务器配置。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="abfd" class="ly kn iq lu b gy lz ma l mb mc">Error: forwarding ports: error upgrading connection: error dialing backend: dial tcp: lookup juju-e1b2fa-2 on 127.0.0.53:53: server misbehaving</span></pre><p id="6718" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解决这个问题的最佳方法是使用ssh进入节点，尝试ping主节点或工作节点，并在需要时修复dns配置。您可以像在任何其他Ubuntu系统中一样修复名称解析错误。</p><h1 id="bba8" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">日志</h1><p id="71d6" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">您始终可以对任何正在运行的资源运行logs命令。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="2ab8" class="ly kn iq lu b gy lz ma l mb mc">kubectl get pods # show all pods (container) <br/>kubectl logs pod/my-wordpress-mariadb-0 # or any other pod name</span></pre></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="dbeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mw">最初发表于</em><a class="ae kl" href="https://www.opvizor.com/install-kubernetes-on-vsphere-using-ubuntu-juju" rel="noopener ugc nofollow" target="_blank"><em class="mw">www.opvizor.com</em></a><em class="mw">。</em></p></div></div>    
</body>
</html>