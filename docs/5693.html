<html>
<head>
<title>Creating Secure API’s with EasyAuth &amp; FastAPI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用EasyAuth &amp; FastAPI创建安全的API</h1>
<blockquote>原文：<a href="https://itnext.io/creating-secure-apis-with-easyauth-fastapi-6996a5e42d07?source=collection_archive---------0-----------------------#2021-05-04">https://itnext.io/creating-secure-apis-with-easyauth-fastapi-6996a5e42d07?source=collection_archive---------0-----------------------#2021-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d7e66d2f56de7bd58c51a19a11162841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gB6HAaqWg5fz0KRw.png"/></div></div></figure><p id="01f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文将介绍如何使用EasyAuth保护现有的FastAPI应用程序</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="fe4a" class="lf lg iq lb b gy lh li l lj lk"><strong class="lb ir">APP LAYOUT</strong></span><span id="e825" class="lf lg iq lb b gy ll li l lj lk">├── app<br/>│   ├── __init__.py<br/>│   ├── main.py<br/>│   └── marketing<br/>│   │   ├── __init__.py<br/>│   │   ├── marketing.py<br/>│   └── finance<br/>│   │   ├── __init__.py<br/>│   │   ├── finance.py<br/>│   └── hr<br/>│       ├── __init__.py<br/>│       └── hr.py</span></pre><p id="7ed0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> main.py </strong></p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="4f60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> finance.py </strong></p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="7d72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">看看OpenAPI网页上的API:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="6a59" class="lf lg iq lb b gy lh li l lj lk">$ uvicorn --host 0.0.0.0 --port 8320 main:server<br/>INFO:     Started server process [93409]<br/>INFO:     Waiting for application startup.<br/>INFO:     Application startup complete.<br/>INFO:     Uvicorn running on <a class="ae lo" href="http://0.0.0.0:8320" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:8320</a> (Press CTRL+C to quit)<br/>INFO:     127.0.0.1:46184 - "GET / HTTP/1.1" 404 Not Found<br/>INFO:     127.0.0.1:46184 - "GET /docs HTTP/1.1" 200 OK<br/>INFO:     127.0.0.1:46184 - "GET /openapi.json HTTP/1.1" 200 OK</span></pre><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lp"><img src="../Images/c23b4bcb0c203bc7fc69261cdaf94b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vsu5YLdow9LRPDC4aatpYw.png"/></div></div></figure><p id="d81c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">目前，任何人都可以通过网络连接到服务器来访问和使用该API:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="b83a" class="lf lg iq lb b gy lh li l lj lk">$ curl 0.0.0.0:8320/marketing/<br/>"marketing_root"<br/>$ curl 0.0.0.0:8320/finance/data<br/>"finance_data"</span></pre><h1 id="8e05" class="lq lg iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">使用EasyAuth保护端点</strong></h1><p id="9f11" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">EasyAuth可以作为独立的认证服务运行，也可以与现有的应用程序一起运行。</p><h2 id="7345" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated"><strong class="ak">创建独立的授权服务</strong></h2><p id="90ec" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">无需重新创建用户、组、角色和权限，而是集中到一个可跨多个应用程序使用的身份验证服务中</p><ol class=""><li id="2768" class="nd ne iq ka b kb kc kf kg kj nf kn ng kr nh kv ni nj nk nl bi translated">准备环境</li></ol><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="0d3f" class="lf lg iq lb b gy lh li l lj lk">$ virtualenv -p python3 auth-env<br/>$ source auth-env/bin/activate</span></pre><p id="a0f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.安装依赖项</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="bf46" class="lf lg iq lb b gy lh li l lj lk">(auth-env)$ pip install easy-auth[server]</span></pre><p id="7950" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.设置EasyAuthConfig文件</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="c6b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.配置EasyAuthServer</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="21b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.启动服务器</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="58c4" class="lf lg iq lb b gy lh li l lj lk">$ uvicorn --host 0.0.0.0 --port 8090 auth_server:serverINFO:     Started server process [115918]<br/>INFO:     Waiting for application startup.<br/>.<br/>..<br/>...<br/>05-04 17:09 EasyAuthServer ERROR    detected new EasyAuth server, created admin user with password: rgpgltou<br/>.<br/>..<br/>05-04 17:09 EasyAuthServer WARNING  EasyAuthServer Started! - Loaded Tokens {}<br/>05-04 17:09 EasyAuthServer WARNING  adding routers<br/>INFO:     Application startup complete.<br/>05-04 17:09 uvicorn.error INFO     Application startup complete.<br/>INFO:     Uvicorn running on <a class="ae lo" href="http://0.0.0.0:8090" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:8090</a> (Press CTRL+C to quit)<br/>05-04 17:09 uvicorn.error INFO     Uvicorn running on <a class="ae lo" href="http://0.0.0.0:8090" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:8090</a> (Press CTRL+C to quit)</span></pre><p id="2ff2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要访问GUI，请浏览至<a class="ae lo" href="http://0.0.0.0:8090" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://0 . 0 . 0 . 0:8090</strong></a><strong class="ka ir">/</strong>admin并使用admin/rgpgltou登录</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/3e78bee00829d4d4040a84d34eb2fa6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Ra_kR_mz-Uv5FRUEeJ_Lw.png"/></div></div></figure></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h2 id="bf5e" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">将EasyAuth与现有的FastAPI应用程序一起使用</h2><p id="ea3c" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">使用EasyAuthServer或EasyAuthClient可以保护现有的FastAPI应用程序。</p><p id="3587" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一个示例将演示如何使用EasyAuthClient连接到刚刚创建的独立EasyAuthServer，以及初始的FastAPI应用程序。</p><p id="5b0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">先决条件</strong></p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="a181" class="lf lg iq lb b gy lh li l lj lk">$ pip install easy-auth[client]</span><span id="4e6d" class="lf lg iq lb b gy ll li l lj lk"><strong class="lb ir">APP LAYOUT</strong></span><span id="62e1" class="lf lg iq lb b gy ll li l lj lk">├── app<br/>│   ├── __init__.py<br/>│   ├── main.py<br/>│   └── web<br/>│   │   ├── __init__.py<br/>│   │   ├── web.py<br/>│   └── marketing<br/>│   │   ├── __init__.py<br/>│   │   ├── marketing.py<br/>│   └── finance<br/>│   │   ├── __init__.py<br/>│   │   ├── finance.py<br/>│   └── hr<br/>│       ├── __init__.py<br/>│       └── hr.py</span></pre><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="ccc2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">启动应用程序</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="f5e4" class="lf lg iq lb b gy lh li l lj lk">$ uvicorn --host 0.0.0.0 --port 8190 main:server<br/>INFO:     Started server process [162292]<br/>INFO:     Waiting for application startup.<br/>05-04 21:35 EasyRpc-server /ws/easyauth WARNING  creating cron or get_upstream_registered_functions - interval 30<br/>05-04 21:35 EasyRpc-server /ws/easyauth WARNING  creating cron or get_upstream_registered_functions - interval 30<br/>05-04 21:36 EasyAuthServer WARNING  adding routers<br/>INFO:     Application startup complete.<br/>05-04 21:36 uvicorn.error INFO     Application startup complete.<br/>INFO:     Uvicorn running on <a class="ae lo" href="http://0.0.0.0:8190" rel="noopener ugc nofollow" target="_blank">http://0.0.0.0:8190</a> (Press CTRL+C to quit)</span></pre><p id="9492" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，所有端点在需要认证的OpenAPI文档中都有更改。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/e16a2d1d18d40b53695cf72c16ded03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IugrDsWerIxJ2T88Kv6aeA.png"/></div></div></figure><p id="4fc6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当使用html response-/web/访问端点时</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/6e6606ef6d0903145999f6e59f295eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Om6ctDevcxbs1TUrDByquQ.png"/></div></div></figure><p id="6948" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">包括403、404和401响应的异常处理程序:</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/a1969752be8751fff1823df00661f886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bjFmyLz16i75gkbt29xQoA.png"/></div></div></figure></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h2 id="874b" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated"><strong class="ak">使用现有应用程序旁边的EasyAuthServer </strong></h2><p id="f41c" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">EasyAuthServer也可以直接插入到现有的应用程序中，但是需要相同的服务器先决条件:配置和依赖关系:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="4429" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">EasyAuthServer端点和应用程序端点合并在OpenAPI文档中</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/827920c59b553eca44e98a610286e470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P_D6IUqFapd_322oQWfZGw.png"/></div></div></figure></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h1 id="5fa7" class="lq lg iq bd lr ls ny lu lv lw nz ly lz ma oa mc md me ob mg mh mi oc mk ml mm bi translated">认证和授权</h1><p id="3768" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">EasyAuth身份验证基于非对称RSA JSON Web令牌，这保证了使用的Web令牌是有效的。<a class="ae lo" href="https://medium.com/intelligentmachines/istio-jwt-step-by-step-guide-for-micro-services-authentication-690b170348fc#:~:text=In%20Istio%20JWT%20authentication%20is,who%20issued%20the%20JWT%20token." rel="noopener">这篇</a>关于这个主题的大文章。</p><p id="5bf3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用RBAC方法实施EasyAuth授权，以提供对端点的精细控制。</p><h2 id="302c" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">RBAC</h2><p id="1f5e" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">RBAC，即基于角色的访问控制，根据分配的组、角色和操作为用户提供非常具体的权限集</p><h2 id="8bc2" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">类型—用户</h2><p id="5622" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">用户被定义为访问端点的最终用户/服务。</p><p id="6866" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用户通过提供发送用户名和密码来请求令牌</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/82a68abf41189cc688d12918854bd5d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4z5oO14JIrTwgrCA.png"/></div></div></figure><h2 id="d4cc" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">类型—服务</h2><p id="d166" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">服务令牌必须由管理员组中的用户生成-服务帐户不存在密码</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/172fffc3eb1b94f7d42170f3320ca1a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CTEasv7mk9yiw-sQ.png"/></div></div></figure><h2 id="2179" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">许可</h2><p id="7ff9" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">权限来自分配给特定用户的一个或多个组。</p><h1 id="6ba5" class="lq lg iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">组</h1><p id="f7e3" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">分配给用户，包含指定角色的列表。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/910e6878facfbd0e9d27e0dcf73ae6c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VpFiDIycnvY5BrJt.png"/></div></div></figure><p id="ea1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">权限来自分配给特定组的角色。</p><h1 id="0e26" class="lq lg iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">作用</h1><p id="0eea" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">分配给组，并包含一个动作列表。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/7f73019f860154ff47e67814cfc9bf5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Rrree0J-MmcQ20PK.png"/></div></div></figure><p id="1707" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">权限源自分配给特定角色的操作</p><h1 id="4cab" class="lq lg iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">行动</h1><p id="97ef" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">操作是可以创建的最细粒度的权限，用于定义可以允许的内容。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/a8e236f53d4402b99f5691958d0239db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7C4E1SfoFmbyGXIN.png"/></div></div></figure><h1 id="bb5a" class="lq lg iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">代币</h1><p id="54a5" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">令牌是为特定用户创建的，包含特定用户(组、角色、操作)的完整权限树</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/f2fe4a645845645d5e0c37c1ba7ba659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NrODyJ3_qtWtEzZJDvMP1g.png"/></div></div></figure><h2 id="0a36" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">用户令牌—过期</h2><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="063c" class="lf lg iq lb b gy lh li l lj lk">Expires after ~ 60 Minutes</span></pre><h2 id="4b8a" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">服务令牌—到期</h2><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="04b4" class="lf lg iq lb b gy lh li l lj lk">Expires ~900 days</span></pre><p id="9621" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果cookie中的令牌已经过期/被撤销，那么cookie将被EasyAuthClient失效</p><h2 id="ba4d" class="lf lg iq bd lr ms mt dn lv mu mv dp lz kj mw mx md kn my mz mh kr na nb ml nc bi translated">撤销令牌</h2><p id="4a4a" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">令牌一旦创建，在到期或EasyAuthServer rsa密钥轮换之前一直有效。</p><p id="7b5a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">EasyAuthServer维护已颁发令牌的令牌注册表，其中包含底层用户名、颁发日期、到期日期&amp; token_id。</p><p id="7692" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当添加/撤销令牌时，EasyAuthServer更新所有EasyAuthServer工作器和连接的EasyAuthClients。</p><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/5b23bf8a3971f776bde6186e3297b0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TlTK17vX1Kf-FmHv0UAB1g.png"/></div></div></figure><p id="43d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注册表中列出的令牌被视为有效，被撤销或注册表中不存在的令牌将返回403。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h1 id="3620" class="lq lg iq bd lr ls ny lu lv lw nz ly lz ma oa mc md me ob mg mh mi oc mk ml mm bi translated">资源</h1><p id="ef88" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">最全面的文档可从<a class="ae lo" href="https://easyauth.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">这里</a>获得</p><h1 id="72ea" class="lq lg iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">捐助</h1><p id="faf1" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated"><a class="ae lo" href="https://github.com/codemation/easyauth/" rel="noopener ugc nofollow" target="_blank"> EasyAuth </a>在不断完善，有想法，建议，bug？制造一个<a class="ae lo" href="https://github.com/codemation/easyauth/issues" rel="noopener ugc nofollow" target="_blank">问题</a>！</p></div></div>    
</body>
</html>