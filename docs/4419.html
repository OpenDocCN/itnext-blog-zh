<html>
<head>
<title>Azure Arc — Arc Enabled Kubernetes &amp; Arc for Servers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure Arc —支持Arc的服务器Kubernetes和Arc</h1>
<blockquote>原文：<a href="https://itnext.io/azure-arc-arc-enabled-kubernetes-arc-for-servers-2ebcd87094af?source=collection_archive---------3-----------------------#2020-06-26">https://itnext.io/azure-arc-arc-enabled-kubernetes-arc-for-servers-2ebcd87094af?source=collection_archive---------3-----------------------#2020-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f25f9b7829bc2a1c28020009b5330846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPJTft1TCkeb-SlyLSeyDA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">面向混合云管理的Azure Arc随时随地管理一切</figcaption></figure><div class=""/><p id="5eb7" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">混合搭配云是一个新术语，随着时间的推移，这个术语越来越流行。在这种方法中，用户可以使用来自多个云提供商的服务，其中来自一个提供商的服务在竞争的云提供商之上提供(或者控制一个提供商与其他提供商的服务)，使组织能够以不同的方式一起使用来自不同提供商的服务。</p><p id="e52a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Google Anthos现已全面上市，Google继续将其作为混合和多云产品进行推广。AWS推出了混合云产品Outposts。<a class="ae la" href="https://venturebeat.com/2019/11/04/microsoft-unveils-azure-arc-stack-edge-and-new-virtual-machine-services/" rel="noopener ugc nofollow" target="_blank"> Azure Arc </a>(预览版)是最新发布的微软Azure版本的统一管理平台，可简化跨内部、边缘和多云的复杂分布式环境的操作。Anthos和Azure Arc在本质上都是相似的；每个服务都利用Kubernetes作为运行托管数据服务的基础。此外，这两种服务都允许注册外部集群，并通过同一个控制平面提供管理，它们还允许用户跨多个集群部署应用程序。Anthos已经公开宣传其在其他公共云上运行的能力(AWS上的GKE)。然而，关键的区别在于，使用Azure Arc，客户可以在混合环境中混合搭配物理服务器、虚拟机和Kubernetes集群。</p><p id="6965" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure Arc (Preview)旨在跨任何基础设施扩展Azure管理。这可能意味着在多个云中运行的工作负载，如Azure、AWS和Google，在Azure堆栈或其他硬件中运行的工作负载，以及在边缘运行的服务。考虑当前跨组织在云中和内部运行的所有服务——Kubernetes集群、数据服务、Windows和Linux服务器等。Azure Arc的主要区别在于传统的基于虚拟机的工作负载和现代的容器化工作负载之间的平衡，这两种工作负载在混合和多云环境的相同上下文中运行。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lb"><img src="../Images/ee24b405aa7dc9e58447ca71ed926ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RIzPw4KeJ7BbA56B"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">来源:微软Azure Arc</figcaption></figure><h1 id="187b" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">天蓝色弧形启用Kubernetes</h1><p id="02ea" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">Azure Arc enabled Kubernetes(preview)允许用户将在本地或任何其他云提供商上运行的Kubernetes集群与Azure连接起来，以获得统一的管理体验。Arc为跨多个位置和平台部署的所有Kubernetes集群的用户提供了单一平台操作模型。Arc为集群提供了Azure管理功能——释放Azure特性，如Azure策略、Azure监视器和Azure资源图。</p><p id="c28e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过将外部现有的Kubernetes集群附加到Azure，用户可以像控制任何其他内部Azure资源一样使用所有Azure功能来控制外部集群。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/2dca1b48d7090a2a24751babacdf10f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A0RD4al6Z2hsUlrs"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">来源:微软—支持Azure Arc的Kubernetes</figcaption></figure><h1 id="973b" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">聚类注册</h1><p id="ebfe" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">用户可以将Azure CLI与启用了Azure Arc的Kubernetes CLI扩展(connectedk8s)或门户一起使用，在门户中可以自动生成包含所有必需CLI步骤的脚本。Arc注册使用Helm-3通过connectedk8s扩展装载所有集群代理。</p><p id="ab60" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">来自成员集群的Azure Arc代理安全地建立到各种Azure端点的出站连接(例如:<a class="ae la" href="https://management.azure.com" rel="noopener ugc nofollow" target="_blank">https://management.azure.com</a>，<a class="ae la" href="https://eastus.dp.kubernetesconfiguration.azure.com" rel="noopener ugc nofollow" target="_blank">https://eastus.dp.kubernetesconfiguration.azure.com</a>等)。)并且不需要Public_IP(需要出站权限—端口443上的TCP(https)和端口9418上的TCP(Git))。</p><h1 id="e788" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">使用Azure Arc门户注册集群:</h1><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/fa3372388b7216317c894a028cc9cbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-_KWfxQAj77JrK8q"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/943867907e035f89b64944baa472d807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oKv0y6YYUdA78lVJ"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><p id="89d2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以选择一个特定的订阅和一个资源组，在该资源组下确定群集的范围。需要一个唯一的集群名称和一个区域(目前预览版仅支持美国东部和西欧):</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/a35ee0b217f0ea41fd0c34beb0b07ed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fZvX3GI48GC6xbjY"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><p id="d1c4" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下一步是使用上面提供的输入(subscription_id、cluster_name、location)生成一个脚本(带有connectedk8s扩展的Azure CLI步骤),该脚本可以在一个环境中运行，在该环境中可以使用kubeconfig和helm访问群集:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mm"><img src="../Images/251d10fab34b58a646be98654e3ae2ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VbY0DoZvYcQlIJ27"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><p id="8842" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">该脚本向Azure请求动态身份验证(与用户使用az cli进行身份验证的方式相同— az登录)，身份验证完成后，将为TLS通信生成代理证书，并启动helm安装以安装所有必需的代理和其他对象:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mn"><img src="../Images/9674c27914daf3bc256a32234da7aad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UExbkQvROzeYWuV2"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><p id="78f0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用注册门户的验证选项卡来验证连接性:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mo"><img src="../Images/e5a7c655ee7dc8e19b2c822582f3474a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JkMoSjpJYy5ofGmF"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><p id="6395" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注册完成后，可以从Azure Arc门户访问集群信息，注册的/外部集群可以利用本机Azure Kubernetes集群可用的所有功能。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/010a9ee44c38c83bf177586b13c54324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5U5eVzWMkypYJNWg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧注册一个集群</figcaption></figure><h1 id="e4fb" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">安装的组件/代理</h1><p id="a00d" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">使用helm的connectedk8s扩展安装多个代理作为部署，以及所需的机密和配置映射到群集中的“azure-arc”命名空间。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/6294731689ab4f3afeab437cb9cc1113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0UDJvCE3vFAeiG6i"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —集群代理</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/3c9228a769a98c8ecc9912cb75f789d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aanxmb2Ufu_0Ayft"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —集群代理— Kubernetes部署</figcaption></figure><p id="4fdf" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用组件用来建立连接的令牌和其他身份验证信息创建的配置映射和机密:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/b8e4fcf689561c3e212afa4a578be0f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HKIJR8xK4x1wLc64"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc配置图和机密</figcaption></figure><p id="793f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在群集“AzureClusterIdentityRequest”和“ConnectedCluster”中创建了两个CRD:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/e4902f1364dcfa69fa90488c3e0ba611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HJQNr1B4L2nUQqG1"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">弧形-连接集群-CRD</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/ef70a079f0268aab6cd4df7f56b45a64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*srJtAZfa0wN4eVrn"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">arc-AzureClusterIdentityRequest-CRD</figcaption></figure><p id="8072" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">“ConnectedCluster”用于定期将外部群集状态同步到Azure，而“AzureClusterIdentityRequest”为群集上运行的所有代理提供身份管理。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/788e3d97e04235ed16b9df50b4bcdd07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SbK9mB8-s3ef88-N"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电弧— CRD的</figcaption></figure><p id="da1e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">helm创建了一个名为“azure-clusterconfig”的配置映射，其中包含必要的信息，如subscription_id、tenant_id、azure_resource_group、azure_region等。上面创建的所有组件将使用它来建立到azure_management和其他相应端点的安全连接。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mq"><img src="../Images/35cd4c161280329f6fee35fb34958975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-YtsTk_Gj9wZ-EsM"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —集群配置</figcaption></figure><p id="01c3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">“kube-rbac-proxy”和“fluent-bit”边车容器与操作员舱一起部署，以提供授权/安全连接和记录。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mr"><img src="../Images/f40d57bc9e2f732d0d9ed9e71742a05b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7PoA1R6MdFzt9mwW"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc — kube_rbac_proxy和流畅位边车容器</figcaption></figure><p id="5ff0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">kube-RBAC-为TLS连接生成自签名证书的代理容器:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/dff2be9319aba9b7e1576b016d177623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aDZdr-4U1631c5nJ"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc — kube_rbac_proxy边车容器</figcaption></figure><p id="914b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从其他运营商代理pod收集指标的fluent-bit容器:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/061777b93bee5c6ede5c12b3ec36aae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*10rX-0lGnmqKhxr4"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc — fluent_bit边车容器</figcaption></figure><p id="667d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">群集上的配置代理安全地连接到“kubernetisconfiguration . azure . com ”,从而实现从Azure到外部群集的主要连接。其他代理，如集群身份运营商，资源同步和控制器管理器，定期连接到管理端点，以执行必要的操作。度量代理轮询来自所有组件的监控信息，并将这些信息推送到Azure。</p><p id="8463" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">群集中的代理向Azure端点发出出站调用:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/1928a6a552d8644455823a64dca0c4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BKzYpqFvPOfvQhGa"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —集群代理</figcaption></figure><p id="8e03" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">群集中的配置代理轮询群集中的本地CRD更改，并将其发送到Azure:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/438d7be748bf241cf5481383bcea9fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nhfy6YbeBWWzvuXe"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —集群代理</figcaption></figure><p id="77b3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显示本地群集信息轮询的配置代理日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/85bc536311f0c56906e50cf6c8d1b113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iUYI2jID5bdTH-Q1"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —配置代理日志</figcaption></figure><p id="7bff" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">度量代理从其他代理收集度量并将它们发布到Azure:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/d1cab0e1adc4513fa5f93199e8bf4c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tOrY9GUYo5yEYMtb"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc指标-代理</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/1fa275a03b73daeb473e31482cd26a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u3fW79Lgl2_8MS67"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —指标—代理日志</figcaption></figure><p id="2810" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显示基于角色的身份管理的集群身份操作员日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/79489bdb6d485fc68d6c21b9e3bfcbe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S9Em30s38OzV5a8c"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc集群身份-操作员日志</figcaption></figure><p id="9f9f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显示群集元数据与Azure端点同步的群集元数据操作员日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/9443fcd58df8cc2de33f2a3f7f5db5d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Yro84FYZO2lMexW9"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc集群-元数据-操作员日志</figcaption></figure><p id="e094" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显示特定CRD同步的资源同步代理日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/3775f243954e146ed1f5a2c9cf5f04a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MgE74R_qPi_-BfP0"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Arc —资源同步代理日志</figcaption></figure><h1 id="f58c" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">多云和多集群注册</h1><p id="bcf4" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">用户可以从任何云提供商添加Kubernetes集群，并从统一的仪表板管理它们。所有注册的集群都可以利用关键功能，包括库存和组织、治理和配置、集成开发和管理功能以及统一的工具体验。</p><p id="3f74" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">尝试注册运行在GCP上的GKE集群和运行在AWS上的EKS集群。</p><p id="0bcc" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">GKE集群:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/d95de91737dc353a51ab98fe6c71da04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_fgfo5OWEEjzFrdB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">GCP GKE集群</figcaption></figure><p id="d8e9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注册后，所有代理都部署到azure-arc名称空间。以下是从GCP的GKE控制台看到的画面:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/30ef4994d1be79890d554a28c9b8cad4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JgY4o81ozuIez38z"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">集群代理— Azure Arc — GKE门户</figcaption></figure><p id="a3e0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure Arc门户上的GKE集群:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/97666106475597d368cd4fea251e6249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lAQa1aLZyV0rqhLA"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —注册的GKE集群</figcaption></figure><p id="4712" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从Azure Arc访问的所有GKE集群工作负载—洞察:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/e85c705ede8c63ba4480792dd6a0d9fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_OPzjA5oE2yxM_Dw"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —注册的GKE集群—工作负载</figcaption></figure><p id="0aa6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">AWS上的EKS集群:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/ce95f6a914cf7249c8a0188fb168f3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6Eo1X2Ip8QSet9U_"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">AWS上的EKS集群</figcaption></figure><p id="f996" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure Arc门户上的EKS集群:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/782e027bc0cb559a436dffc82a06947e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*25BoK3nMMYnNQgNs"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —注册的EKS集群</figcaption></figure><p id="337d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从Azure Arc访问的所有EKS集群工作负载—洞察:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/fa30c44e3183e1f1443bca1abb7aa387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tbgkhtUvCG8DN8m6"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —注册的EKS集群—工作负载</figcaption></figure><p id="a60c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">具有多个集群的Azure Arc仪表板:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/bee3580fbf3c044580db62d5d6d874e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p26fy2n1DoSLzHTo"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —多集群控制面板</figcaption></figure><p id="813d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用资源图浏览器查询所有连接的集群和其他容器资源:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/17119f16cd33f3dfc813bb2b1ac97050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_M0MVoSyyrknjRrT"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc — Azure资源图表浏览器</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/dac2e31730a19b74157f6c9c05659313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bzmE4hUrk2mCKPwd"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc — Azure资源图表浏览器</figcaption></figure><h1 id="87ea" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">监控和日志记录— Azure Monitor</h1><p id="ad0a" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">Azure Monitor for Containers on Azure Arc-enabled Kubernetes为用户提供了与Azure Kubernetes服务(AKS)监控类似的功能，例如:通过从Kubernetes中可用的控制器、节点和容器中收集内存和处理器指标的性能可见性，通过工作簿和Azure门户中的可视化，为故障排除问题发出警报和查询历史数据，收集Prometheus指标的功能等。</p><p id="4beb" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以使用<a class="ae la" href="https://docs.microsoft.com/en-us/azure/azure-monitor/insights/container-insights-enable-arc-enabled-clusters" rel="noopener ugc nofollow" target="_blank"> PowerShell或Bash脚本</a>为Kubernetes的一个或多个现有部署启用Azure Monitor for containers。该脚本创建一个日志分析工作区(用户可以选择支持区域中的现有工作区)，helm用于引导kube-system命名空间中的监控代理(omsagents as Daemonsets)。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/0ef88d30aa4c65dbbc7c2bef0f5a0c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z3GhO4KrnX6jqaCl"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧—监控代理</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/447ee6849a15bbd5e4393abcbb89c021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ikpuk3f3WhsgWZw_"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧—监控代理</figcaption></figure><p id="3891" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">监控和日志记录代理(fluentd)的所有配置都以配置图的形式提供:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/dc2150409b340e6c6e9027e79ffe77a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yD7_HAOSexv6vEKC"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —监控代理—配置</figcaption></figure><p id="739c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有的omsagent处理来自集群的日志，并将它们发送到Azure Application Insights(Azure Monitor的功能，一个可扩展的应用性能管理(APM)服务):</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/6db81c9cc7ee14f96f0e6364e5e41996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IeJ4ul2g46UMJmpW"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧—监控代理</figcaption></figure><p id="6b55" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">集群指标:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/1bb7767870f8667efbe0a7c343ee08b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S254ipcDc-pKn6so"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —集群指标</figcaption></figure><p id="9e87" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">集群运行状况:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/2059867d8221e6dc93d96f957b2f7783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v816AoQjY7NSVKi-"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —集群运行状况</figcaption></figure><p id="31ec" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">节点运行状况:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/561f48268e861997e16f7981131f3ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9H4VVt-tBingIK9L"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —节点运行状况</figcaption></figure><p id="00ea" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">节点级工作负载分布:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/f2655d43962c076d70365270370cea0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ia4bGlnuxVLEWY9z"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —工作负载视图</figcaption></figure><p id="38f3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">容器级别信息:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/016f93dae616493f50f2bde302838d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hYHsbU6SUa3XcRes"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —工作负载视图</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/c791201d77cfd51041a5d27c2f686726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KczSoNKZXPAcGhLb"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —工作负载视图</figcaption></figure><p id="a2fc" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">日志门户提供大量内置查询来导出主机级和容器级日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/b34efee5f6495c05b69e3fd7c26b7fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TItR3zK8bKJXMc46"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧光—记录</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/2143cc50942cff9197eede3ac70f42de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R6Ofz6r2pkcsK3SS"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧光—记录</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/65a041e6b8b60cf14003f4b9fa71bf72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KcotOe1YsdbPwm4T"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧光—记录</figcaption></figure><p id="a69b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果注册了多个集群，monitoring dashboard的单个窗格会提供所有已注册集群的摘要:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/6635dd4c0ad53e6a4848b81c69c9229d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hAoGBv7ejXXForeA"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —多集群监控仪表板</figcaption></figure><h1 id="37c7" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">策略实施— Azure策略</h1><p id="842d" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">Azure Policy有助于强制执行组织标准并评估大规模合规性。Azure Policy通过将这些资源的属性与业务规则进行比较来评估连接的Kubernetes群集中的资源。</p><p id="6e63" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure Policy扩展了<a class="ae la" href="https://github.com/open-policy-agent/gatekeeper" rel="noopener ugc nofollow" target="_blank">看门人</a> v3，一个用于<a class="ae la" href="https://www.openpolicyagent.org/" rel="noopener ugc nofollow" target="_blank">开放策略代理</a> (OPA)的准入控制器webhook，以集中、一致的方式在您的集群上应用大规模实施和保护。</p><p id="4ab1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">策略门户包括用户可以使用的内置定义，或者用户可以使用<a class="ae la" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/template-tutorial-create-encrypted-storage-accounts" rel="noopener ugc nofollow" target="_blank">资源管理器模板</a>参考定义自己的自定义定义。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/25f31d3054b01bc1cf7c06c0d972b5c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*obILSoX78ik0j200"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —策略</figcaption></figure><p id="9599" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">策略可以在资源组级别应用/限定范围，用户可以使用排除从组中忽略任何资源。下面的策略示例在资源组中的所有三个已注册集群上实现了一个标记规则，其中所有资源都应指定强制标签:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/bc67c65e70f2360bbf27dc2183afd0a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RLbDbK0NT2rZRyvF"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —策略</figcaption></figure><p id="572e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">参数包括为策略要执行的操作定义的一组属性/变量(这些是ARM模板中的变量):</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mu"><img src="../Images/3d7fdc021fce4984604d063a69137fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RM8Bxo_82QcQKYNQ"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —策略</figcaption></figure><p id="c0c8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">补救参数使用户能够强制执行创建的策略，以对当前现有的资源进行操作。默认情况下，如果未选择补救，则仅在新创建的资源上实施该策略。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mv"><img src="../Images/a20881de5e0bf55438d823a5d09e232d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ItCj0I42Q_tODCYs"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —策略</figcaption></figure><p id="3d36" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ARM模板是基于选定的策略自动创建的:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/38c1009e96d953b9a8cb7644eefaefbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M9ftt9s0q1yHacIW"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">azure Arc-ARM-策略</figcaption></figure><p id="568d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">定义后，将在所有集群上评估该策略，并生成包含所有非投诉资源的报告:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/6ab560a2888a1db2fbacdb21cde9555c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vL0YFfwGNsPvikju"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —策略</figcaption></figure><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/65fcc82d068405a0f6229f9232528ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FiKXh6frZMm-eLCi"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —策略</figcaption></figure><h1 id="6495" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">已连接集群的GitOps</h1><p id="836b" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">有了GitOps，集群管理员可以集中管理各种重复的任务，比如创建名称空间、RBAC、注册表机密等等。</p><p id="27bf" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Arc使用了<a class="ae la" href="https://fluxcd.io/" rel="noopener ugc nofollow" target="_blank"> Flux </a>，这是一个来自Weaveworks的开源GitOps部署工具，目前是<a class="ae la" href="https://www.cncf.io/sandbox-projects/" rel="noopener ugc nofollow" target="_blank">云本地计算沙箱项目</a>的一部分。代理监视Git repo的更改并应用它们。该代理还会定期确保集群状态与Git repo中声明的状态相匹配，并在发生任何非托管更改时将集群返回到所需状态。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mw"><img src="../Images/46d706f24fc1c485e01a99a469ef5a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Af5uKrMqy2Wf119q"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧— GitOps —通量</figcaption></figure><p id="c361" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以有多种方式使用Git作为管理Flux应用程序的资源，用户也可以使用Azure策略来执行每个“微软。kubernetes/connected clusters ' resource或Git-Ops enabled 'Microsoft。container service/managed clusters的资源具有特定的“Microsoft。kubernetisconfiguration/sourcecontrolconfiguration '应用于它。</p><p id="6ef5" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在集群中运行的支持Azure Arc的Kubernetes配置代理负责监视新的或更新的sourceControlConfiguration资源，并自动协调添加、更新或删除Git repo链接。</p><h1 id="be63" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">使用来自Git的集群配置(Kubernetes清单)的GitOps</h1><p id="5652" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">用户可以使用门户或Azure CLI扩展“<em class="mx">k8s配置</em>”中的“配置”在集群上执行GitOps。</p><p id="02d2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面的配置中使用了一个示例repo，它由多个文件夹组成，命名空间为:cluster-config、team-a、team-b、Deployment:cluster-config/azure-vote-config map:team-a/endpoints。</p><p id="1b89" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用Arc集群门户配置GitOps:</p><p id="4a35" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在下面名为gitops-deploy的配置中，指示代理在gitops-deploy名称空间中部署操作员，并授予操作员cluster-admin权限。Helm操作符在此配置中被禁用，因为Git源由Kubernetes清单组成。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/183d70ae54ce6e5e1fb36cc16975d336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dVBxKthZ7wSFnWgW"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色的弧形——吉托普斯</figcaption></figure><p id="0f1f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用CLI配置上述相同的规范:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi my"><img src="../Images/47c12db26e4cf29185c19b4836786638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OAquZCEHn2tMZxgB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色的弧形——吉托普斯</figcaption></figure><p id="2b6c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">集群中的config-agent每30秒轮询Azure一次新的或更新的源代码控制配置。这是配置代理获取新的或更新的配置所需的最长时间。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/2b22752f96d080e58996565f8288e7e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rGeUC-tCYaoZ0i64"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —配置代理日志</figcaption></figure><p id="d91c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">此配置在“git-deploy”名称空间中部署了一个操作符(flux)和memcached(Flux的一个依赖项，它缓存容器映像以加快速度),如下所示:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/a1644ac8fa2fd8d173a17d4e8efb4d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_1u07B3YXxq9VuKb"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧— GitOps —通量</figcaption></figure><p id="1557" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从Arc Insights控制台部署操作员视图:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/b6dcedb1ccd4f6bd53ff0dc41c2cdddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vYR9SwCDwfxooCOP"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧— GitOps —通量</figcaption></figure><p id="4358" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显示来自Git配置的名称空间和其他对象的处理的操作员日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/7e1953044e824175a1431169648431c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-us0OZGHARMWrcd-"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色电弧— GitOps —通量</figcaption></figure><h1 id="7ee3" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">使用舵的GitOps带通量的舵操作器</h1><p id="afe6" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">舵操作员提供了Flux的扩展，可以自动发布舵图。一个图表发布通过一个名为HelmRelease的Kubernetes定制资源来描述。Flux将这些资源从git同步到集群，而Helm操作员确保按照资源中指定的方式发布Helm图表。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/6b4a2effaf6b576366e0bdbe828db1a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GbT_MZyKF_n1x7Vn"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">azure Arc-GitOps-Helm操作员</figcaption></figure><p id="4e0b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">示例repo包含两个目录，一个包含掌舵图，另一个包含发布配置。在releases/prod目录中，azure-vote-app.yaml包含HelmRelease配置。</p><pre class="lc ld le lf gt nb nc nd ne aw nf bi"><span id="194b" class="ng lh jf nc b gy nh ni l nj nk">├── charts<br/>│   └── azure-vote<br/>│       ├── Chart.yaml<br/>│       ├── templates<br/>│       │   ├── NOTES.txt<br/>│       │   ├── deployment.yaml<br/>│       │   └── service.yaml<br/>│       └── values.yaml<br/>└── releases<br/>    └── prod<br/>         <br/>        |_ azure-vote-app.yaml</span></pre><p id="79e1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用Arc集群门户配置gitops:</p><p id="7451" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在名为azure-voting-app的配置中，指示代理在prod名称空间中部署操作员，并授予操作员cluster-admin权限。资源库URL中提供了源Git-URL。在此配置中启用了helm操作符，因为Git源包含了与helm操作符一起工作的Helm配置。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/75125064f640c405a0400bf377278c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i28txaPyopAAmreB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线— GitOps —头盔</figcaption></figure><p id="61e0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用CLI配置上述相同的规范:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/f42e1fd296e98a2f825e6c84367703c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wKflU0nXhfcAEOCf"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线— GitOps —头盔</figcaption></figure><p id="384d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">此配置在“azure-voting-app”命名空间中部署一个操作符(flux)和memcached(Flux的一个依赖项，它缓存容器图像以加快速度),并应用部署配置来创建投票应用部署，如下所示:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/f5d3c305108aa0bbb10b976f2283a2eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aJEk8UwFTPam1SBK"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线— GitOps —头盔</figcaption></figure><p id="d6a6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">显示舵图处理的操作员日志:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/a118741362058229aecb81c43a61735b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b7KuMEFNa2z9S84m"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线— GitOps —头盔</figcaption></figure><p id="1941" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Arc Insights控制台中的已部署组件视图:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/8552354ca29baf05155682a89dcb99e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-vNK0Jpp_E010N8R"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线— GitOps —头盔</figcaption></figure><h1 id="b96d" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">使用Azure策略的GitOps</h1><p id="2a67" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">用户可以使用策略提供上述步骤中陈述的所有配置，以大规模启用GitOps。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/5e80625d65a2ac03accfa4e54e0b34ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YtM8AJhbZojeBP_o"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc — GitOps —策略</figcaption></figure><h1 id="0212" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">使用Azure Arc for servers管理其他云平台上的Kubernetes节点</h1><p id="5bf3" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">Azure Arc不仅支持外部Kubernetes集群注册，还支持任何外部运行的机器。这为用户提供了额外的好处，他们可以控制托管Kubernetes集群的基础架构(例如:EC2、GCP虚拟机、本地服务器等。).</p><p id="8c77" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure Arc for servers (preview)允许用户管理Azure外部托管在其他云提供商或企业网络内部的Windows和Linux机器，类似于管理原生Azure虚拟机的方式。当混合机器连接到Azure时，它就变成了连接的机器，并被视为Azure中的资源。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/1dbb07861cdd4912c32fa3a09be8f99a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M-LtKaQS0XsLbirD"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器</figcaption></figure><p id="961a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">例如，将本地集群中的一个Kubernetes节点添加到Azure，步骤如下所示。</p><p id="949a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">与Kubernetes集群类似，Arc登录页面包括添加服务器:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/865d346045fe65f212ad2bdff41afbd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EnFyNPsKNEKHFTPn"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器注册</figcaption></figure><p id="d11c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用交互式脚本或以防万一来添加机器群用户可以提供服务主体——使用Azure Active Directory <a class="ae la" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals" rel="noopener ugc nofollow" target="_blank">服务主体</a>将机器连接到Azure Arc for servers，而不是使用个人特权身份<a class="ae la" href="https://docs.microsoft.com/en-us/azure/azure-arc/servers/onboard-portal" rel="noopener ugc nofollow" target="_blank">交互式连接机器</a>。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/c4117589618562ec8d552a6a50dcd5a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6BIecSRfEmBVLnux"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器注册</figcaption></figure><p id="ce20" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果需要，用户应该配置资源组、区域、操作系统(Linux/Windows)和代理。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/84915717a2dd11dc32a7902688d8bc7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C53yrRm6_5wAUOUN"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器注册</figcaption></figure><p id="b956" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">创建一个安装混合代理的脚本，该脚本可以在目标服务器上运行。使用'<em class="mx"> azcmanagement </em>'完成服务器注册，这些包适用于Linux和Windows。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nn"><img src="../Images/3edfba878432c4fe57ffa7b284100011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gol-AHAriMWhc-2T"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器注册</figcaption></figure><p id="fbda" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注册脚本请求对Azure进行动态身份验证(与用户在使用az cli时进行身份验证的方式相同— az登录)。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/cfed235637853b6043f59676dcbcb4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yO5zVSmwY4ql9HeF"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器注册</figcaption></figure><p id="2fcd" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注册后，用户可以从Azure Arc -Machine门户访问外部机器信息，如下所示，左边的工具栏显示了任何其他Azure VM可以从目录中使用的所有功能。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/0f4d4c267d3d2c6d239270f848dd333f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hiNRqLIl3EztKxhr"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Arc —服务器注册—门户</figcaption></figure><p id="9212" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用Azure策略、更新管理、变更跟踪等所有功能。可以在Azure VM上执行来管理外部机器。</p><p id="9bc1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用扩展从目录中安装日志记录和其他代理，如下所示:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/8871f6c749e34609863197f319fc1a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C6I3mP5f3ysaHjDx"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线-延伸</figcaption></figure><p id="2001" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">例如，用户可以使用“Linux定制脚本扩展”来跨云提供商或内部数据中心的多个虚拟机/服务器运行脚本。</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/62d8b9a10579004cb5ef1ecf3eeeb0b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DAHXqIkjXMGNNfrb"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线-延伸</figcaption></figure><p id="b55d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">扩展自动创建所需的ARM模板所需的:</p><figure class="lc ld le lf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/be3225bd082af9d612ce3eb0b2fd0fcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b4u0e03eXmWI85WB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">天蓝色弧线-延伸</figcaption></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="027b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随着这个平台将每个系统都引入Azure Arc，在不牺牲可见性和访问的情况下，基于清晰的关注点划分为团队成员设置清晰的角色和职责变得非常容易。Azure Arc的另一大好处是大规模的服务器管理。当您将本地服务器连接到Azure时，它将成为一种资源，并作为资源组的一部分进行管理。对于在Azure上有大量投资的客户来说，这提供了一个受欢迎的好处，即扩展他们熟悉的管理模型到其他环境。客户可以在混合环境中轻松混合搭配物理服务器、虚拟机和Kubernetes集群。</p><p id="9460" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">微软也是首批将托管数据服务引入混合云的公司之一。由于这些数据库服务被打包成容器并运行在Kubernetes之上，从集中的Azure控制平面管理它们变得非常有效。Azure Arc是最近发布的，仍处于预览阶段，Arc有很大的空间成为混合环境的革命性管理平台，并在竞争中为其他玩家提供激烈的竞争。</p></div></div>    
</body>
</html>