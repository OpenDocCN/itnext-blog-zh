<html>
<head>
<title>The Simpliest D3 map and way too long article about it, even its title. Breakdown of the Brutalism architecture map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最简单的D3地图和太长的文章，甚至它的标题。野蛮主义建筑地图的分解</h1>
<blockquote>原文：<a href="https://itnext.io/the-simpliest-d3-map-and-way-too-long-article-about-it-even-its-title-fc0f1d0bdf3f?source=collection_archive---------3-----------------------#2019-02-19">https://itnext.io/the-simpliest-d3-map-and-way-too-long-article-about-it-even-its-title-fc0f1d0bdf3f?source=collection_archive---------3-----------------------#2019-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e9b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我是野兽派建筑风格的忠实粉丝，上个月我看了很多关于野兽派建筑师的讲座——他们的生活和工作——比如勒·柯布西耶、ernő·金手指和其他许多人。</p><blockquote class="km kn ko"><p id="d0e2" class="jn jo kp jp b jq jr js jt ju jv jw jx kq jz ka kb kr kd ke kf ks kh ki kj kk ij bi translated">“房子是居住的机器”——勒·柯布西耶</p></blockquote><p id="95bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">野蛮主义的概念是广泛的，并与其他现代建筑风格交叉，如构成主义和新野蛮主义。</p><p id="b311" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">野蛮主义的产生是由多种原因造成的，其中包括全球经济危机、第二次世界大战带来的新时代的感觉等。这是所有这些原因的反映，但对我们来说主要是政府建筑和公共住宅，例如，这是法国的圣玛丽·德拉·图雷修道院，由勒·柯布西耶设计:</p><div class="kt ku kv kw gt ab cb"><figure class="kx ky kz la lb lc ld paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><img src="../Images/0ee85f033c480a0be800d28a247854af.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/0*S2EJ7ZQMBOWvIGUb.jpg"/></div></figure><figure class="kx ky lk la lb lc ld paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><img src="../Images/458d03758d5ada5778302f528cad561c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/0*yd34b6-9MlFkMyBW.jpg"/></div></figure></div><div class="ab cb"><figure class="kx ky ll la lb lc ld paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><img src="../Images/2207ced28c13e5e6cf9abf93907e2f24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/0*Knn-7QxbLpBsOJnq.jpg"/></div></figure><figure class="kx ky lm la lb lc ld paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><img src="../Images/fff8f5aeb613e4f562846d82c92ad32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/0*pDGL3TBZ4kuGT76g.jpg"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk lr di ls lt translated"><a class="ae kl" href="http://archeyes.com/sainte-marie-de-la-tourette-le-corbusier/" rel="noopener ugc nofollow" target="_blank">http://arche yes . com/sainte-Marie-de-la-Tourette-le-Corbusier</a></figcaption></figure></div><p id="b719" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">野兽派建筑是“尺度”的建筑，因为几乎所有的野兽派建筑都是大尺度的。此外，野兽派建筑在环境中占主导地位，因为它倾向于抑制和与之形成对比。</p><p id="20f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">野蛮主义有一个光明的未来，但随着时间的推移变得越来越被遗弃，因为它(野蛮主义)往往获得了很多负面的内涵。这在任何方面都不奇怪，但我们下次会谈到它。我一定会写一篇关于野蛮主义历史的文章。今天我想分享一下我是如何制作一张带有视觉描述和一些数据管理功能的动物主义地图的。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="e982" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就像我之前提到的，我是一个粉丝，我想知道:世界上到底有多少野兽派建筑？他们多大了？哪个国家多？为了回答所有这些问题，我决定制作一个互动地图，在那里我可以看到所有建筑的时间透视。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="b1bc" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">研究</h1><p id="1578" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">地图的第一件事，即障碍#1是<strong class="jp ir">数据</strong>。如果我的地图上没有建筑，那就没用了。</p><p id="0259" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以。我的第一个想法是没问题，这很有挑战性，但我准备花几周时间收集数据。</p><p id="d633" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接受我接下来的几周将被许多行JSON代码填满的事实，我开始思考，如果我的尝试没有希望了怎么办？如果这种地图已经存在了呢？。所以，我开始用谷歌搜索，是的，我找到了一个网站，里面有野兽派建筑的地图，时间表，还有更多关于野兽派建筑的有用信息😨😱😭</p><div class="ne nf gp gr ng nh"><a href="http://www.sosbrutalism.org/cms/15802395" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">#暴力主义</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">SOSBrutalism是一个不断增长的数据库，目前包含超过900个野兽派建筑。但是，更重要的是，它是一个…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">www.sosbrutalism.org</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv li nh"/></div></div></a></div><p id="8939" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我以为；所以，我的宠物项目在开始前就结束了，或者丘吉尔怎么说来着:</p><blockquote class="km kn ko"><p id="551b" class="jn jo kp jp b jq jr js jt ju jv jw jx kq jz ka kb kr kd ke kf ks kh ki kj kk ij bi translated">“这不是结束，甚至不是结束的开始，但这也许是开始的结束。”</p></blockquote><p id="3c43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我为我的发现沮丧了一整天，因为我真的想先做好这张地图。</p><p id="0a87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是当我第二天早上醒来，(一个好的睡眠总是帮助我)，我的头脑更加清晰，我对自己说；好吧，可能有一个已经存在的地图，但我仍然可以通过这个项目，也许，我会从中学到一些新的东西。事实上，我学到了很多，主要是从我的错误中🙄</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="e3f6" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">TLDR</h1><p id="15c8" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">为了避免你过多的阅读，下面是结果:你可以使用底部的滑块按年份过滤建筑。</p><div class="ne nf gp gr ng nh"><a href="https://pavellaptev.github.io/brutalist-buildings/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">野兽派建筑</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">编辑描述</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">pavellaptev.github.io</p></div></div></div></a></div></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="6995" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第一部分.数据</h1><p id="3111" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">所以，我的研究很快就结束了，但我找到了源头。我的下一步是来自<a class="ae kl" href="http://www.sosbrutalism.org/cms/15802395" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> #SOSBrutalism </strong> </a>的数据。我开始搜八卦的方式，怎么抢，结果发现他们有页面的模板。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nw"><img src="../Images/fc9ddcf3acfd5b4691552c1f9577afb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mY77CQSiohIvzrVIj6jZg.png"/></div></div></figure><p id="adc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将这个JS对象复制到一个JSON文件中。我也问过男生是否可以，他们说可以。</p><p id="cfe3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将这个JS对象复制到一个JSON文件中。我也问过男生是否可以，他们说可以。下一个需要解决的问题是其中的<strong class="jp ir"> JSON大小</strong>和<strong class="jp ir">额外键</strong>。原来的JSON太大了——<strong class="jp ir">1.4 MB，</strong>所以我写了一个NodeJS脚本，让它变小一点，加上我自己的道具。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nx"><img src="../Images/33b702e344c403fdfbfee381b22b152f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PxKYiFAd0cWRT8HgXZpv5A.png"/></div></div></figure><figure class="kt ku kv kw gt ky"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="134f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能注意到我用了德语而不是英语。这是因为我认为它会给人一种美好的感觉；向传统致敬，保留原始语言。这里有一堂德语课:</p><ul class=""><li id="9f82" class="oa ob iq jp b jq jr ju jv jy oc kc od kg oe kk of og oh oi bi translated">标题→标题</li><li id="a6d7" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">建筑师→建筑师</li><li id="df3b" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">stat→国家</li><li id="fe4a" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">施塔特→城市</li><li id="7901" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">Jahr →年</li><li id="1736" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">geb ude→建筑物</li></ul></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="e867" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第二部分。设计？</h1><p id="8035" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">我想象我在地图上有很多点，地图的主要特征应该是一个范围滑块来按年份过滤点。此外，我应该能够在鼠标悬停时查看有关对象的信息。</p><p id="c07a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我最近的项目设计大多是在浏览器中完成的，而不是用设计工具。我发现这种方法非常方便，但是草图还是用设计工具来完成更好。</p><p id="9763" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，我在<a class="ae kl" href="https://www.figma.com" rel="noopener ugc nofollow" target="_blank"> Figma </a>里做了我的大概设想。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi oo"><img src="../Images/c3a96d0db2f79f8fcb0cf6ef78cd77ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3SL3-edNp0RnFjiLBHaj1g.jpeg"/></div></div></figure><p id="a72d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您在这里看不到地图的设计，所以我决定在使用真实数据的浏览器中使用许多对象(如地图标记)会更容易。但是我画了一些主要物体的草图，比如滑块和标题——它们应该是<strong class="jp ir">简单、粗体</strong>和<strong class="jp ir">粗暴</strong>。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="6fc2" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第三部分。要使用的JS库</h1><p id="4e62" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">所以，我有JSON与野兽派建筑，我有我的地图的愿景。下一步——选择技术。我想变得更加灵活，这就是为什么我拒绝了像Mapbox这样的地图服务，它们有很大的调整范围，但仍然没有完全定制。不管怎样，我找到了一个适合我的解决方案——D3 JS库和它的插件d3-geo。它允许您将地理信息呈现到SVG或CANVAS中。</p><div class="ne nf gp gr ng nh"><a href="https://github.com/d3/d3-geo" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">D3/D3-地理</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">地理投影、球面形状和球面三角学。-D3/D3-地理</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="op l ns nt nu nq nv li nh"/></div></div></a></div><p id="1442" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向前看，我的选择是错误的，因为当时我不知道新的情况，我希望我当时就知道我现在知道的。我的错误不在图书馆，我选择了D3。我选择了SVG渲染而不是画布…我们稍后将回到这个问题。</p><p id="122a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，D3-geo 提供了我所需要的一切——完整的地图定制、标记定制、定制工具提示和弹出窗口。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="c97d" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第四部分。项目设置</h1><p id="1df4" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">我不喜欢浪费我的时间，这就是为什么我喜欢预处理器。我最喜欢的是CSS的Stylus和HTML的Pug。</p><div class="ne nf gp gr ng nh"><a href="http://stylus-lang.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">富有表现力的、动态的、健壮的CSS -富有表现力的、健壮的、功能丰富的CSS预处理器</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">在线试用手写笔！</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">stylus-lang.com</p></div></div><div class="nq l"><div class="oq l ns nt nu nq nv li nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a href="https://pugjs.org/api/getting-started.html" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">入门-帕格</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">快速集成入门参考迁移到Pug 2 React集成</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">pugjs.org</p></div></div><div class="nq l"><div class="or l ns nt nu nq nv li nh"/></div></div></a></div><p id="d9ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我做一个简单的项目时，我会使用Prepros应用程序。这是一个简单的方法来使用手写笔或Pug预处理器与<strong class="jp ir">实时浏览器重新加载</strong>。零配置，拖放界面。</p><div class="ne nf gp gr ng nh"><a href="https://prepros.io/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">在Mac、Windows和Linux上编译Sass、Less、Jade、CoffeeScript，并重新加载实时浏览器</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">Prepros可以编译几乎所有的预处理语言，如Sass、Less、Stylus、Cssnext、Jade/Pug、Markdown、Slim…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">prepros.io</p></div></div><div class="nq l"><div class="os l ns nt nu nq nv li nh"/></div></div></a></div><p id="d5fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，当你与ES6达成交易时，Prepros就不那么好了。所以，我决定用<a class="ae kl" href="https://gulpjs.com" rel="noopener ugc nofollow" target="_blank">大口喝</a>。我首先想到的是使用<a class="ae kl" href="https://webpack.js.org" rel="noopener ugc nofollow" target="_blank"> Webpack </a>，但是上次我发现它的配置有些问题。</p><div class="ne nf gp gr ng nh"><a href="https://gulpjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">gulp.js -流式构建系统</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">const { src，dest，parallel } = require(' gulp ')；const pug = require(' gulp-pug ')；const less = require('无吞咽')…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">gulpjs.com</p></div></div><div class="nq l"><div class="ot l ns nt nu nq nv li nh"/></div></div></a></div><p id="7edd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kp">一饮而尽我用:</em></p><ul class=""><li id="7fcc" class="oa ob iq jp b jq jr ju jv jy oc kc od kg oe kk of og oh oi bi translated">巨口笔—<a class="ae kl" href="https://www.npmjs.com/package/gulp-stylus" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/gulp-stylus</a></li><li id="3b1d" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">囫囵吞下——帕格——<a class="ae kl" href="https://www.npmjs.com/package/gulp-pug" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/gulp-pug</a></li><li id="0678" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">浏览器同步—【https://browsersync.io/docs/gulp T2】</li><li id="493c" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">ES6的Webpack流—【https://github.com/shama/webpack-stream T4】</li><li id="577b" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">和唱针的自动修复—<a class="ae kl" href="https://www.npmjs.com/package/autoprefixer-stylus" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/autoprefixer-stylus</a></li></ul><p id="9382" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">下面是我的Gulp配置文件:</strong><a class="ae kl" href="https://github.com/PavelLaptev/brutalist-buildings/blob/master/gulpfile.js" rel="noopener ugc nofollow" target="_blank">https://github . com/PavelLaptev/bruta list-buildings/blob/master/Gulp file . js</a></p><p id="8197" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我的项目结构:</strong></p><pre class="kt ku kv kw gt ou ov ow ox aw oy bi"><span id="b77b" class="oz mc iq ov b gy pa pb l pc pd">.<br/>├── 📁source<br/>|   ├── 📄index.pug<br/>|   ├── 📁scripts<br/>|   |   ├── 📄main.js<br/>|   |   └── 📁utils<br/>|   |   |   └── ...<br/>|   └── 📁styl<br/>|   |   ├── 📄style.styl<br/>|   |   ├── 📄variables.styl<br/>|   |   ├── 📄map.styl<br/>|   |   └── 📄slider.styl<br/>├── 📁js<br/>|   ├── 📄main.bundle.js<br/>|   ├── 📄brut-data.json<br/>|   └── 📄world-110m2.json<br/>├── 📁favicons<br/>|   ├── 🖼favico-16.png<br/>|   ├── 🖼favico-32.png<br/>|   └── 🖼favico-96.png<br/>├── 📁css<br/>|   ├── 📄style.css<br/>|   └── 📄normalize.css<br/>├── 📄index.html<br/>├── 📄gulpfile.js<br/>└── 📄package.json</span></pre><p id="8262" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有源文件，如*。帕格，*。用ES6编写的styl和脚本存储在<strong class="jp ir">“source”</strong>文件夹中。我用大块的手写笔和JS。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="3c9e" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第五部分:地图颜色编码</h1><p id="785e" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">在我的项目中，我希望有颜色编码，这意味着我将能够根据年份来识别建筑物，不仅可以查看范围滑块，还可以根据颜色来识别。比起阴影，我更喜欢颜色编码，因为它更容易区分。当然也有例外，但这一次，颜色编码会更好。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pe"><img src="../Images/a5cb778747825d5d5b7f21bf9a9a4bd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bncOCcNoNmFdHoIS1yOrg.png"/></div></div></figure><p id="fb87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果你需要在地图上显示高度图和大多边形，阴影效果会更好；但是相反，我们有年和小点。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="a991" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，如您所见，我们有两个地方需要使用相同的颜色——刻度和标记。</p><p id="571a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了解决这个问题，我使用了手写笔变量。为什么不是CSS变量？不知道，但我认为这只是因为它更容易为我写手写笔var。</p><p id="8b02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我把这个量表分成五个小部分。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pf"><img src="../Images/69b60e8c45eecb0781a9ab2bb3c1ef25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4G_BeDKZyVq66EiTlno0YA.png"/></div></div></figure><p id="d7b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个色标不是我第一次尝试，因为我尝试过很多变化。所以为了使挑选更容易，我使用了<strong class="jp ir"> Lch和</strong>David Johnstone的Lab颜色和渐变挑选器。</p><p id="a647" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以添加四种常规颜色，该服务会自动在它们之间创建阴影。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pg"><img src="../Images/27b758a3f70f34dadd4241ab6bf57ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vkIUbDQ_jTzAwfKFW26XCg.png"/></div></div></figure><div class="ne nf gp gr ng nh"><a href="http://davidjohnstone.net/pages/lch-lab-colour-gradient-picker#ff7290,85cd00,00aeff,e55cff" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">Lch和Lab颜色和渐变选择器- David Johnstone</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">这是一个颜色选择器和渐变创建工具，使用各种颜色空间进行选择和插值…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">davidjohnstone.net</p></div></div></div></a></div></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="d56c" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第六部分。脚本分解</h1><p id="8bee" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">如果说Pug和Stylus是容易的部分——JS是一个有趣的部分，我想一步步解释。但是首先，我们需要添加一些脚本到部分，库的链接</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/dbb50a1b0eceefe80ca3694b93a70e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Jhz6fJ7F7vYxRAKWvN8ww.png"/></div></div></figure><p id="b2d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是主要的预编译脚本:</p><figure class="kt ku kv kw gt ky"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pi"><img src="../Images/d3c7b6966f906b0b98eca1d4d340a066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lvZ4UFYlQosa_x2DDAQxzg.png"/></div></div></figure><p id="2789" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第1—4行</strong>。任何现代剧本的开始部分——导入。这里我们正在导入<a class="ae kl" href="https://refreshless.com/nouislider" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> noUiSlider </strong> </a>库。</p><div class="ne nf gp gr ng nh"><a href="https://refreshless.com/nouislider/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">noUiSlider - JavaScript范围滑块| Refreshless.com</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">noUiSlider是一个免费的轻量级JavaScript范围滑块，支持多点触摸(iOS，Android，Windows)。太好了…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">refreshless.com</p></div></div></div></a></div><p id="0f1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">noUiSlider是一个轻量级的JavaScript范围滑块，支持全触摸，但对我来说更重要的是支持两个范围手柄。否则，我会使用原生的<a class="ae kl" href="https://www.w3schools.com/howto/howto_js_rangeslider.asp" rel="noopener ugc nofollow" target="_blank">输入类型“范围”</a>。此外，这个库还有dragStart、dragEnd等方法。这很方便，因为你不需要自己写。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pj"><img src="../Images/1fd0ec6df36928a2fa79543368852d6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cmbzd3yVlkRTfPL9fq9SfQ.png"/></div></div></figure><p id="f7a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> menuActions </strong>是汉堡菜单的脚本块。这里没什么有趣的。但是我想注意的是，编写这种类型的脚本变得简单多了，看起来就像在jQuery中一样。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pj"><img src="../Images/41d1c09db6d349f10439fa992b2208a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VFOOlKVMhMAbBQlo3PJfNg.png"/></div></div></figure><p id="4d98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我在导入的fillDots() </strong>和<strong class="jp ir">dotscollorbyclass()</strong>函数很无聊。</p><p id="1309" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> fillDots() </strong>是一个辅助函数。当我创建所有标记(点)时，我检查当前点的年份是否是1933年，我将返回类“CD-193–1935”等。</p><p id="b540" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> DotsColorByClass() </strong>一个缓解悬停效果的函数。📛我错了——有那么一刻我意识到自己做了一个错误的选择——预处理程序变量而不是CSS变量。可悲的是，我不能返回预处理器变量，如果我想改变我的调色板，而不是只在一个地方，我必须在多个地方改变它。但是我把这个眼中钉留给了未来的自己——<strong class="jp ir">看！你这样做了，你为自己感到骄傲吗？是的……我</strong> <strong class="jp ir">也是这么想的！</strong></p><p id="560c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">继续前进。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pk"><img src="../Images/cfec879082a4b14ab8334779bb51726f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqOeD3n6tD-f1JVCrCJIvQ.png"/></div></div></figure><p id="e646" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> range </strong>是一个简单的函数，返回一个介于两个数字之间的数组。我们需要这个函数来过滤超出范围的标记。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/1d5cd339f067ded9058e612b1af2a803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O3_ZK83gXsTW18T1LSf5Pw.png"/></div></div></figure><p id="e74d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第6—26行。我的脚本中最简单的部分——noUiSlider设置。noUiSlider的语法非常清晰易懂，我就不解释了。但是你可以在这里找到文件。</strong></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/fa17f962a16db02f822206e45254f9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lTSlp1KYoWFPwki69K1uUg.png"/></div></div></figure><p id="5e4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第29—34行。</strong>常量<strong class="jp ir">投影是</strong>我们设置<a class="ae kl" href="https://github.com/d3/d3-geo-projection#projections" rel="noopener ugc nofollow" target="_blank">投影类型</a>，地图位置，比例，旋转的部分。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/113861ff282e6fb23cd1ed56fd3b3e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TG14XSqpY2TNJu252KeIJw.png"/></div></div></figure><p id="c1dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第36—51行</strong>。</p><ul class=""><li id="ff85" class="oa ob iq jp b jq jr ju jv jy oc kc od kg oe kk of og oh oi bi translated"><em class="kp">常量</em><strong class="jp ir">T5】SVG。主容器，我们将在其中投射我们的地图和所有的标记。</strong></li><li id="79d5" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated"><em class="kp"> const </em> <strong class="jp ir"> <em class="kp">路径。</em> </strong>我们放置<em class="kp">const</em><strong class="jp ir"><em class="kp">SVG</em></strong>的形状生成器</li><li id="a6e6" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated">const <strong class="jp ir"> g. </strong>这里我们还追加了<em class="kp"> SVG </em> <strong class="jp ir"> <em class="kp">组标签</em> </strong> <em class="kp"> </em>以便对地图有更多的控制，并保持在组中。<em class="kp">我们没有在const</em><strong class="jp ir"><em class="kp">SVG</em></strong><em class="kp">中添加这个标签，因为稍后我们将只使用这个独立的标签。</em></li><li id="a372" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated"><em class="kp">const</em><strong class="jp ir"><em class="kp">rectSizeOne</em>T43】。只是一个简单的对象，大小适合我们的标记。我只是把宽度和高度分组。这里的“一”是一个雏形，在开始的时候，我计划为马克笔制作不同的尺寸，但后来我拒绝了这个想法。</strong></li><li id="6402" class="oa ob iq jp b jq oj ju ok jy ol kc om kg on kk of og oh oi bi translated"><em class="kp">常量</em> <strong class="jp ir"> <em class="kp">工具提示</em> </strong>。它是悬停时出现的弹出工具提示。这个工具提示应该已经在HTML中了，并且默认情况下具有CSS属性“display: none”。我也制作了动画占位符作为图像预加载器。</li></ul><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pl"><img src="../Images/580d418c7a579f5da9f7b09c7953df0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iBScw-xre6P3Ix192nGrTQ.gif"/></div></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pm"><img src="../Images/91f720dd396e42d5760ed000a038fd76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YyqqkRn6SjLbh7rJ_qZq8w.png"/></div></div></figure><p id="087b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">线54—60 </strong>。这是两个主要函数中的第一个，我们用世界地图解析JSON文件，并将获得的数据放在我们的SVG容器中。在那里，我们还使用了另一个JS库TopoJSON。TopoJSON是GeoJSON的扩展，可以更有效地对拓扑进行编码。</p><div class="ne nf gp gr ng nh"><a href="https://github.com/topojson/topojson" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">托普杰松/托普杰松</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">GeoJSON的一个扩展，对拓扑进行编码！🌐。创建一个帐户，为topojson/topojson开发做贡献…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="pn l ns nt nu nq nv li nh"/></div></div></a></div><p id="0ca5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你正在读这封信，请突出显示这一行。你赢得了5颗星！⭐⭐⭐⭐⭐ </p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/79d34f4144df3ac0edd973a04dfca313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XxRtdA4hzvGdW8f1pic_g.png"/></div></div></figure><p id="515b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第62行</strong>。这是我们的第二个主要功能。在这里我们解析<strong class="jp ir"> brut-data.json </strong>，这个json包含了所有关于野蛮主义建筑的数据，比如:</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/06b872f1752604b73a350b32b08917a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4I7lUQRrwopstMzhUEXYA.png"/></div></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/cd48683067df9047e5b81a102cba0b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jptQyi_uRoI8TAUsrUMWww.png"/></div></div></figure><p id="3761" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第63行</strong>。这一行负责计算JSON对象的长度——所有建筑物的数量——并将其放在头中。这里我使用文字或字符串模板作为ES6的一个很酷的特性，它允许你以一种清晰的方式制作类似于<code class="fe po pp pq ov b">"" + data.length + "Gebaeude"</code>的字符串<code class="fe po pp pq ov b">`${data.length} Gebaeude`</code></p><div class="ne nf gp gr ng nh"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">模板文字(模板字符串)</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">模板文字是允许嵌入表达式的字符串文字。您可以使用多行字符串和字符串…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">developer.mozilla.org</p></div></div><div class="nq l"><div class="pr l ns nt nu nq nv li nh"/></div></div></a></div></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/3f523a4c19a6dd04fc743e8b057202bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ha-eRCTGSIeqGP4cga8hxA.png"/></div></div></figure><p id="1bd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">65—76线</strong>。这是长链函数的开始，我们将为它们创建标记和动作。</p><p id="6222" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，我们为每个标记创建一个矩形形状；根据JSON原始数据中的纬度和经度设置x/y位置；并设置宽度和高度。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/a4969407b1c12bd9227d3f0a1c26ff48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2Hu_ASIXIh1klAFsQcMXQ.png"/></div></div></figure><p id="7403" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第77—79行</strong>。然后我们需要给每个标记添加一个类，每个类都有自己的<strong class="jp ir"> </strong> <code class="fe po pp pq ov b"><strong class="jp ir">fill</strong></code>。通过<code class="fe po pp pq ov b"><strong class="jp ir">fillDots()</strong></code>,我们定义了某个标记将拥有哪个类。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/9178708832dbc7cc01a787d1ec916e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZcjsKmIUGn7XZ4xE4k-Ahg.png"/></div></div></figure><p id="7975" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第80–81行</strong>。<code class="fe po pp pq ov b"><strong class="jp ir">on("mouseover")</strong></code>悬停功能将管理我们与标记的所有交互。我们从用黑色填充标记开始。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/819760b835a72f420f7374e902e91b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wTR6qyNbZPShRzJFvDeofQ.png"/></div></div></figure><p id="68f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第83—130行</strong>。这是一篇很长的文章，但没有什么特别的，只是在鼠标悬停时对工具提示进行了操作——功能包括标题、年份、图像等。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/a358a2d4d983ea42d43e19577010cb28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*foRA5M8b8ILxPlDqPkY76Q.png"/></div></div></figure><p id="0a05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第131—137行。<code class="fe po pp pq ov b"><strong class="jp ir">on("mouseout")</strong></code>这里我们隐藏工具提示，并使用<code class="fe po pp pq ov b"><strong class="jp ir">DotsColorByClass()</strong></code> <strong class="jp ir"> </strong>和D3 <code class="fe po pp pq ov b"><strong class="jp ir">transition()</strong></code> <strong class="jp ir"> </strong>函数恢复标记的初始颜色。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/8d18374a00d30eb710db9d8114260981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NlBTft2eNVzEaZJcwlKHbw.png"/></div></div></figure><p id="6101" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">139—152线</strong>。noUiSlider有许多功能强大的函数来管理事件，这里我们使用的是<code class="fe po pp pq ov b"><strong class="jp ir">on("slide")</strong></code>监听器。</p><p id="bdd7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每次当用户拖动处理程序时，我们将监听该事件，如果标记仍在范围内，则返回CSS <code class="fe po pp pq ov b"><strong class="jp ir">"display”</strong></code>属性<code class="fe po pp pq ov b"><strong class="jp ir">"block”</strong></code>，如果标记超出刻度上的选定范围，则返回<code class="fe po pp pq ov b"><strong class="jp ir">"none”</strong></code>。</p><p id="65be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个有趣的部分——我们如何在选定的范围内绘制标记。</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ph"><img src="../Images/d419cc21fe915f08e552c64757833836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*32_mvqsxKI40ene-4N8D4Q.png"/></div></div></figure><p id="411e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能知道为了使用<code class="fe po pp pq ov b"><strong class="jp ir">map()</strong></code>方法，我们需要一个数组。有几种方法可以创建一个“实例”数组，但是我选择了语法上最简单的一种。我使用了<strong class="jp ir">扩展操作符</strong>。</p><p id="538f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在本文中详细了解它:</p><div class="ne nf gp gr ng nh"><a href="https://medium.freecodecamp.org/https-medium-com-gladchinda-hacks-for-creating-javascript-arrays-a1b80cb372b" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">创建JavaScript数组的技巧</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">用JavaScript创建和克隆数组的有见地的技巧。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">medium.freecodecamp.org</p></div></div><div class="nq l"><div class="ps l ns nt nu nq nv li nh"/></div></div></a></div><p id="024d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，如果我们看到我们的<strong class="jp ir"> "start year" </strong>键不等于数组中的任何数字，(我选择过滤建筑，而不是按照<strong class="jp ir"> "end year "，</strong>，因为在我看来，按照<strong class="jp ir"> "start year" </strong>过滤建筑更正确)我们返回<code class="fe po pp pq ov b"><strong class="jp ir">"display: none"</strong></code>。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pt"><img src="../Images/2a63eda387e4793db64c1def85e9f1aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBj3BqkIsgR4eosTAKD-fw.png"/></div></div></figure><p id="69ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">156—172线</strong>。<code class="fe po pp pq ov b"><strong class="jp ir">zoom()</strong></code>函数也是一个事件监听器函数。这里，我们更改了<code class="fe po pp pq ov b">transform: translate()</code>属性，并且还更改了缩放时标记的大小，以使它们保持相同的大小，而不管我们是缩小还是放大地图。</p><p id="2838" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">唷…就是这样，脚本的最后一部分。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="98f0" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第七部分。测试</h1><p id="f558" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">我总是从设置gulp、预编译器、插件等基础开始工作，并使用实时浏览器重载一步一步地走向结果。</p><p id="c540" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，之前一切正常…</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="e578" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">第八部分。即将出现的问题</h1><p id="64a0" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">…在我与Babak Fakhamzadeh 交谈之前。我们在谈论# SOSBrutaism的数据，他发给我一个链接，里面有一个关于public.opendatasoft.com的新数据。可惜现在已经没有了，所以我在这里不能提供任何链接，不过我有足够的时间去抓取。你可以在这里下载👇</p><div class="ne nf gp gr ng nh"><a href="https://github.com/PavelLaptev/brutalist-buildings/blob/master/json-archive/brut-data-true.json" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">PavelLaptev/野兽派建筑</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">野兽派建筑列表。通过创建一个关于…的帐户，为PavelLaptev/野兽派建筑的发展做出贡献</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="pu l ns nt nu nq nv li nh"/></div></div></a></div><p id="61bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我现在拥有的是3433栋建筑，而不是1256栋。这对我来说是个问题，因为当你处理像SVG这样的DOM元素并且没有太多数据的时候，一切都会很好。但是如果你有一个沉重的JSON，你需要忘记DOM元素，而使用CANVAS。这里有一个很好的解释:</p><figure class="kt ku kv kw gt ky"><div class="bz fp l di"><div class="pv nz l"/></div></figure><p id="749b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你有大量的元素时，总是使用CANVAS——幕后操作比使用DOM元素要快得多。</p><blockquote class="km kn ko"><p id="edf7" class="jn jo kp jp b jq jr js jt ju jv jw jx kq jz ka kb kr kd ke kf ks kh ki kj kk ij bi translated">HTML <code class="fe po pp pq ov b">&lt;canvas&gt;</code>元素用于通过JavaScript动态绘制图形。<br/><a class="ae kl" href="https://www.w3schools.com/html/html5_canvas.asp" rel="noopener ugc nofollow" target="_blank">w3schools.com</a></p></blockquote><p id="9aa9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而D3有几种渲染的方法，包括CANVAS。一开始，我没有考虑到这一点，并开始了我的项目，就好像我的JSON中没有超过1000个元素一样。那我该怎么办呢？</p><p id="3aa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我问了明显队长，他回答说:</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi pw"><img src="../Images/b5589b222875369c12bd61c6bad659c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pew7_uvgxHeJuK4bCWWBSg.png"/></div></div></figure><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div class="gh gi px"><img src="../Images/94ffd4fe07d05dce422e3cd37fdf7481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*mwX54GWmMEt84LYtwveN9A.gif"/></div></figure><blockquote class="py"><p id="7ec4" class="pz qa iq bd qb qc qd qe qf qg qh kk dk translated">谢谢队长！还有，我也没想到我的数据可以补充。</p></blockquote><p id="18a3" class="pw-post-body-paragraph jn jo iq jp b jq qi js jt ju qj jw jx jy qk ka kb kc ql ke kf kg qm ki kj kk ij bi translated">下面是两张地图之间的帧率比较——1，256和3，433个对象<em class="kp"> (2.6 GHz英特尔酷睿i7，16 GB 2133 MHz，镭龙Pro 450 2048 MB) </em>:</p><div class="kt ku kv kw gt ab cb"><figure class="kx ky qn la lb lc ld paragraph-image"><img src="../Images/2e6d1497c7df34ce7766a305cd272561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*uTyG6var_nzI2OJtX63QSg.gif"/></figure><figure class="kx ky qo la lb lc ld paragraph-image"><img src="../Images/5bb973814df755120cae78e335867ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Ezb6UgLjll2xg5MXHkES7A.gif"/></figure></div><div class="ab cb"><figure class="kx ky qp la lb lc ld paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><img src="../Images/986de2215c770ac0b015831c22ee2845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*QMFjZ-ApOn5dtYuxZ5K6FA.png"/></div></figure><figure class="kx ky qp la lb lc ld paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><img src="../Images/95fb562f75a76347653c74cb87668b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*bIGmvdwds-iEYFXEB-wgjQ.png"/></div></figure></div><p id="4ff5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让一切都在画布上不是一个小的修正；我认为修改代码会花费太多的时间，但主要原因是因为这个项目我筋疲力尽了。不，我仍然尊重野蛮主义，但不得不以不同的方式做这个项目。我会从头开始做我的下一个项目，我会更加关注细节。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="8cdc" class="mb mc iq bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">部分VIX。结果呢</h1><p id="2686" class="pw-post-body-paragraph jn jo iq jp b jq mz js jt ju na jw jx jy nb ka kb kc nc ke kf kg nd ki kj kk ij bi translated">我想我已经说了我想说的一切，所以，击鼓吧，🥁</p><figure class="kt ku kv kw gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi qq"><img src="../Images/3e4eccc53e26db19b592ccef9eb6ebde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxjtgCKcVNawYqpAzyvIxg.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated"><a class="ae kl" href="https://pavellaptev.github.io/brutalist-buildings/" rel="noopener ugc nofollow" target="_blank">pavellaptev.github.io/brutalist-buildings</a></figcaption></figure><p id="68d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://pavellaptev.github.io/brutalist-buildings<a class="ae kl" href="https://pavellaptev.github.io/brutalist-buildings/" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="9178" class="oz mc iq bd md qr qs dn mh qt qu dp ml jy qv qw mp kc qx qy mt kg qz ra mx rb bi translated">感谢您的阅读:-)，希望您喜欢</h2></div></div>    
</body>
</html>