<html>
<head>
<title>Develop a Cross-Platform Desktop Application with Electron Forge, React, Webpack &amp; TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Electron Forge，React，Webpack &amp; TypeScript开发一个跨平台的桌面应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/develop-a-cross-platform-desktop-application-with-electron-forge-react-webpack-typescript-ac2c7452b71f?source=collection_archive---------0-----------------------#2019-12-21">https://itnext.io/develop-a-cross-platform-desktop-application-with-electron-forge-react-webpack-typescript-ac2c7452b71f?source=collection_archive---------0-----------------------#2019-12-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="88c1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">桌面应用程序入门</h2><div class=""/><div class=""><h2 id="5c47" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">设置并准备在电子应用程序中使用React &amp; Webpack，通过Electron Forge构建。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0a76fe1a2bff755da6657e58b8e6c1fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2uae5RXXsgzlxzFRmvjabw.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">您的跨平台桌面应用程序</figcaption></figure><h1 id="d908" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">电子框架</h1><p id="62ad" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">Electron是一个开源框架，它允许你用Web技术(HTML、CSS和JavaScript)构建跨平台的桌面应用程序(T4)。</p><p id="6899" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">您可以访问<strong class="mb jd">原生组件、</strong>加上<strong class="mb jd"> </strong>到<strong class="mb jd"> </strong>配置<strong class="mb jd">自动更新</strong>、<strong class="mb jd">崩溃报告</strong>、<strong class="mb jd">调试</strong>和<strong class="mb jd">剖析</strong>。</p><p id="b814" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">它使用<strong class="mb jd">节点</strong>和<strong class="mb jd">铬</strong>来运行应用程序。因此，web开发技能完全可以转移到电子应用程序中。</p><p id="8dcd" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">你只需要一点HTML、CSS和JavaScript就可以开始了。</p><blockquote class="na"><p id="6684" class="nb nc it bd nd ne nf ng nh ni nj mu dk translated">电子最初是为Githubs的<a class="ae nk" href="https://atom.io" rel="noopener ugc nofollow" target="_blank"> Atom </a>编辑器构建的</p></blockquote><h2 id="e42b" class="nl li it bd lj nm nn dn ln no np dp lr mi nq nr lt mm ns nt lv mq nu nv lx iz bi translated">电子建筑</h2><p id="c423" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">在electronic中，有两个主要进程:<strong class="mb jd">主进程</strong>和<strong class="mb jd">渲染进程</strong>。GUI由<strong class="mb jd">主进程</strong>创建，并通过Chromium的<strong class="mb jd">多处理</strong>功能创建网页。</p><p id="b70f" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">每个Chromium Web进程<strong class="mb jd">运行自己的渲染器进程。</strong>作为<code class="fe nw nx ny nz b">BrowserWindow</code>实例创建的渲染器实例是<strong class="mb jd">孤立的</strong>，并且只关心它自己的网页。</p><p id="d2dc" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">本地资源</strong>可以通过<strong class="mb jd"> NodeJS </strong> <strong class="mb jd"> API </strong>来处理，与web应用程序不同，应用程序可以访问这些资源来创建<strong class="mb jd">低级操作系统交互</strong>。您可以使用<code class="fe nw nx ny nz b"><a class="ae nk" href="https://electronjs.org/docs/api/ipc-renderer" rel="noopener ugc nofollow" target="_blank"><strong class="mb jd">ipcRenderer</strong></a></code> <strong class="mb jd"> </strong>和<strong class="mb jd"> </strong> <code class="fe nw nx ny nz b"><a class="ae nk" href="https://electronjs.org/docs/api/ipc-main" rel="noopener ugc nofollow" target="_blank"><strong class="mb jd">ipcMain</strong></a></code>通过<strong class="mb jd">通信</strong>调用原生GUI API来发送和接收消息。</p><h1 id="969c" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">电子锻造提供了什么</h1><p id="dbed" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated"><strong class="mb jd">electronic-Forge</strong>是一个<a class="ae nk" href="https://www.electronforge.io" rel="noopener ugc nofollow" target="_blank"> <strong class="mb jd">完整工具</strong> </a>，除了<strong class="mb jd">安装</strong>和<strong class="mb jd">发布到服务器</strong>之外，它还处理<strong class="mb jd">可分发软件</strong>的创建。</p><h2 id="a36b" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">插件</h2><p id="1f80" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">电子锻造的插件允许<strong class="mb jd">核心</strong>电子锻造功能的<strong class="mb jd">扩展</strong>。</p><p id="0001" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">插件如<strong class="mb jd"> Webpack </strong>插件<code class="fe nw nx ny nz b">plugin-webpack</code>，允许使用<strong class="mb jd"> webpack </strong>构建应用程序，并可选择启用<strong class="mb jd">热重装</strong>和高级<strong class="mb jd">捆绑包配置</strong>。</p><p id="d71a" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">还有<code class="fe nw nx ny nz b">plugin-auto-unpack-natives</code>插件，它会<strong class="mb jd">自动在<code class="fe nw nx ny nz b">node_modules</code>中添加原生模块</strong>。这个<strong class="mb jd">减少了用户机器上的磁盘消耗</strong>和<strong class="mb jd">加载时间</strong>。</p><blockquote class="na"><p id="5490" class="nb nc it bd nd ne nf ng nh ni nj mu dk translated">你甚至可以<a class="ae nk" href="https://www.electronforge.io/advanced/extending-electron-forge/writing-plugins" rel="noopener ugc nofollow" target="_blank">编写自己的插件</a></p></blockquote><h2 id="d12f" class="nl li it bd lj nm nn dn ln no np dp lr mi nq nr lt mm ns nt lv mq nu nv lx iz bi translated">模板</h2><p id="4fff" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">Electron Forge的<strong class="mb jd">模板</strong>允许你集成现有的web技术，例如<strong class="mb jd"> Webpack </strong>模板(它使用Webpack插件)和<strong class="mb jd"> TypeScript </strong>模板，后者在TypeScript中为你提供基本的项目配置。TypeScript模板为您提供了<strong class="mb jd">所需的</strong> <code class="fe nw nx ny nz b">tsconfig.json</code>文件，以便<strong class="mb jd">将</strong> TypeScript文件转换成JavaScript。</p><p id="cf95" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">typescript-Webpack插件<code class="fe nw nx ny nz b">typescript-webpack</code> <strong class="mb jd">将Webpack模板(使用webpack插件)与TypeScript模板(使用TypeScript插件)结合起来</strong>。</p><p id="a44e" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">这是<strong class="mb jd">我们将使用</strong>的模板。</p><h2 id="8a10" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">制造商</h2><p id="46e0" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">Electron Forge的<strong class="mb jd"> Makers </strong>工具获取你打包的应用程序，并生成<strong class="mb jd">特定于平台的分发包</strong>，比如<code class="fe nw nx ny nz b">.dmg</code> (macOS)和<code class="fe nw nx ny nz b">.exe</code> (Windows)。</p><p id="2dbb" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">每个maker都可以有一个特定于平台的Maker配置，指定在哪个平台上运行。</p><h2 id="c0cf" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">出版商</h2><p id="d15a" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">电子锻造<strong class="mb jd">发布者</strong>获取你用<strong class="mb jd">制造者</strong>创建的<strong class="mb jd">工件</strong>，然后发送到<strong class="mb jd">更新服务器</strong>(作为更新使用)或服务(如S3桶)进行分发。您可以<strong class="mb jd">使用特定于平台的指令来配置发行商。</strong></p><blockquote class="of og oh"><p id="7d97" class="lz ma oi mb b mc mv kd me mf mw kg mh oj mx mk ml ok my mo mp ol mz ms mt mu im bi translated">发布者默认发布到所有的平台，所以如果你想要默认的行为，你不必指定一个平台。</p></blockquote><h1 id="d5a4" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">让我们开始建造吧🚀</h1><h2 id="e1ef" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">先决条件</h2><ul class=""><li id="b63c" class="om on it mb b mc md mf mg mi oo mm op mq oq mu or os ot ou bi translated">必须安装<strong class="mb jd"> NodeJS &amp; TypeScript </strong>。</li><li id="868b" class="om on it mb b mc ov mf ow mi ox mm oy mq oz mu or os ot ou bi translated">必须安装一个包管理器，如<strong class="mb jd"> npm或yarn，</strong>。</li><li id="c6a0" class="om on it mb b mc ov mf ow mi ox mm oy mq oz mu or os ot ou bi translated">我将使用节点版本<code class="fe nw nx ny nz b"><strong class="mb jd">10.15.3</strong></code> <strong class="mb jd">。</strong></li></ul><h2 id="baeb" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">全球安装电子和打字稿</h2><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="a063" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> npm i typescript electron -g</span></pre><h2 id="6ae7" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">让我们创建一个项目</h2><p id="277c" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">我们将使用<code class="fe nw nx ny nz b">typescript-webpack</code>模板为我们提供开始一起使用TypeScript和Webpack所需的文件。</p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="5001" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$ </strong>npx create-electron-app electron-demo --template=typescript-webpack</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pi"><img src="../Images/4e65d3fe65fb35ba1614987bfc29a209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HErBUphC5QWMTRN9OYEP2A.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">如果一切顺利</figcaption></figure><blockquote class="of og oh"><p id="60fa" class="lz ma oi mb b mc mv kd me mf mw kg mh oj mx mk ml ok my mo mp ol mz ms mt mu im bi translated">如果没有成功，确保您已经安装了<strong class="mb jd">先决条件</strong>中的所有内容。</p></blockquote><h2 id="d9d3" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">生成的文件</h2><p id="af3c" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">现在已经使用模板创建了<strong class="mb jd">基线项目</strong>。</p><p id="a70d" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">从<strong class="mb jd">项目结构</strong>中可以看到，基本文件已经用<strong class="mb jd"> typescript + webpack </strong>模板自动创建。</p><p id="6dac" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">主</strong>和<strong class="mb jd">渲染器</strong>进程分别有<strong class="mb jd">和</strong>配置文件:<code class="fe nw nx ny nz b">webpack.main.config.js</code>和<code class="fe nw nx ny nz b">webpack.renderer.config.js</code>。</p><p id="ea5d" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">已经包含在<code class="fe nw nx ny nz b">tsconfig.json</code>文件中的<strong class="mb jd">打字稿</strong>文件。</p><p id="3e95" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">该文件将在构建过程中处理将<strong class="mb jd">打字稿</strong>转换成<strong class="mb jd"> JavaScript </strong>的操作，而<code class="fe nw nx ny nz b">tslint.json</code>用于<strong class="mb jd">林挺</strong>T48】打字稿错误代码&amp;建议使用<a class="ae nk" href="https://palantir.github.io/tslint/" rel="noopener ugc nofollow" target="_blank">T51】ts lintT53】。</a></p><p id="9ee5" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">模板还将生成类型<code class="fe nw nx ny nz b">.d</code>文件，利用<code class="fe nw nx ny nz b">@electron-forge/plugin-typescript</code>包来使用类型(<strong class="mb jd"> TypeScript </strong>)。</p><p id="7bfa" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">您还会看到<code class="fe nw nx ny nz b">index.ts</code>，它负责<strong class="mb jd">主进程(这就是为什么我喜欢将其重命名为</strong> <code class="fe nw nx ny nz b"><strong class="mb jd">main.ts</strong></code> <strong class="mb jd">，因为我觉得它更直观，负责主进程)。</strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pj"><img src="../Images/ccd0a236a26a72b3f3354ef81360de23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FxttXu1xBVyhWroMxIUK-Q.png"/></div></div></figure><h2 id="07da" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">将目录(光盘)转换成电子演示</h2><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="893c" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> cd electron-demo</span></pre><h2 id="affb" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">让我们在<code class="fe nw nx ny nz b">src/index.ts</code>更改文件的名称</h2><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="5c43" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> mv src/index.ts src/main.ts</span></pre><h1 id="d3f2" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">在我们做出反应之前，我们需要检查最初生成的文件</h1><h2 id="3267" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">main.ts文件(从index.ts重命名)</h2><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">主页面</figcaption></figure><p id="c447" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">如你所见，<strong class="mb jd">主窗口</strong>是通过<strong class="mb jd">web pack magic constant</strong>T3】动态创建的URL加载的。为了使用这个神奇的常量，<code class="fe nw nx ny nz b">MAIN_WINDOW_WEBPACK_ENTRY</code>被声明在顶部(以满足任何错误)。</p><p id="4983" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">然后用<strong class="mb jd">最小配置</strong>创建一个<code class="fe nw nx ny nz b">BrowserWindow</code>实例(只指定高度和宽度)。</p><blockquote class="of og oh"><p id="72bc" class="lz ma oi mb b mc mv kd me mf mw kg mh oj mx mk ml ok my mo mp ol mz ms mt mu im bi translated">如果你想在你的渲染器进程中集成<strong class="mb jd">节点</strong>，这是你将<code class="fe nw nx ny nz b">nodeIntegration: true</code>包含到<code class="fe nw nx ny nz b">BrowserWindow</code>配置中的地方。</p></blockquote><h2 id="881f" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">renderer.ts文件</h2><p id="90ba" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">这就是我们的主要应用程序功能将开始的地方。目前它是空的，但是正如你所看到的,<strong class="mb jd"> index.css </strong>是自动导入的(这个<strong class="mb jd">演示了这个文件</strong>的用途，就是<strong class="mb jd">呈现</strong>网页)。</p><blockquote class="of og oh"><p id="02fa" class="lz ma oi mb b mc mv kd me mf mw kg mh oj mx mk ml ok my mo mp ol mz ms mt mu im bi translated">注意:当我们开始使用React时，Will将会把这个文件从更改为<code class="fe nw nx ny nz b">renderer.tsx</code>。</p></blockquote><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">renderer.ts</figcaption></figure><h2 id="4c52" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">tsconfig.json文件</h2><p id="54c5" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">这控制<strong class="mb jd">类型脚本</strong>转换的<strong class="mb jd">编译器选项</strong>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">tsconfig.json</figcaption></figure><h2 id="5edc" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">webpack文件</h2><p id="47d1" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated"><strong class="mb jd"><code class="fe nw nx ny nz b">webpack.main.config.js</code>和<code class="fe nw nx ny nz b">webpack.renderer.config.js</code>文件唯一真正的区别</strong>在于<code class="fe nw nx ny nz b">renderer</code>配置包括<strong class="mb jd">样式</strong>，而<code class="fe nw nx ny nz b">main</code>配置指向<code class="fe nw nx ny nz b">src/main.ts</code>作为<strong class="mb jd">入口文件</strong>。</p><p id="5365" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><code class="fe nw nx ny nz b">webpack.rules.js</code>文件包括<strong class="mb jd">规则</strong>用于<strong class="mb jd">共享</strong>资源，如<strong class="mb jd">本机模块、ts加载器和节点加载器。</strong></p><p id="e6d6" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">为了能够使用<strong class="mb jd"> React，我们将修改这些文件中的大部分。</strong></p><h1 id="4dbe" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">让我们做出反应</h1><p id="2cf6" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">我们将把它分成几个步骤:</p><ul class=""><li id="5707" class="om on it mb b mc mv mf mw mi pm mm pn mq po mu or os ot ou bi translated"><strong class="mb jd">安装</strong>依赖项</li><li id="1817" class="om on it mb b mc ov mf ow mi ox mm oy mq oz mu or os ot ou bi translated">让我们的编译器知道我们正在使用React/JSX</li><li id="62a4" class="om on it mb b mc ov mf ow mi ox mm oy mq oz mu or os ot ou bi translated">让<strong class="mb jd"> webpack </strong>知道我们在用React/JSX</li><li id="d435" class="om on it mb b mc ov mf ow mi ox mm oy mq oz mu or os ot ou bi translated">添加我们的<strong class="mb jd">服务人员</strong></li><li id="ce86" class="om on it mb b mc ov mf ow mi ox mm oy mq oz mu or os ot ou bi translated">用一个<code class="fe nw nx ny nz b">.tsx</code>文件替换我们的条目<strong class="mb jd">渲染器</strong>文件</li></ul><h2 id="7eb6" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">安装依赖项</h2><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="528b" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> npm i react react-dom react-router-dom react-scripts</span></pre><h2 id="51f6" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">告诉我们的编译器关于JSX</h2><p id="70cb" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">我们需要告诉<strong class="mb jd"> TypeScript </strong>编译器使用<strong class="mb jd"> React JSX </strong>，将我们的<strong class="mb jd"> outDir </strong>更改为<code class="fe nw nx ny nz b">.webpack/main</code>，这是我们的<strong class="mb jd">构建应用</strong>将生成的地方(由webpack生成)，并包含一些库。</p><p id="e351" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">这就是我们的tsconfig.json文件的样子。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div></figure><h2 id="f8e1" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">告诉Webpack关于JSX的事情</h2><p id="c297" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">我们需要在我们的webpack配置中包含正则表达式<code class="fe nw nx ny nz b">test</code>中的<code class="fe nw nx ny nz b">.jsx</code>和<code class="fe nw nx ny nz b">.tsx</code>。</p><p id="2a96" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">渲染器配置:</strong></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">webpack.renderer.config.js</figcaption></figure><blockquote class="of og oh"><p id="e585" class="lz ma oi mb b mc mv kd me mf mw kg mh oj mx mk ml ok my mo mp ol mz ms mt mu im bi translated">要启用热重装，安装<code class="fe nw nx ny nz b">$ npm i babel-loader @hot-loader/react-dom react-hot-loader</code>并将其作为<code class="fe nw nx ny nz b">react-dom</code>的<code class="fe nw nx ny nz b">alias</code>包含在内。您还需要确保解析(包括regex测试)如图所示的<code class="fe nw nx ny nz b">main</code>和<code class="fe nw nx ny nz b">renderer</code>配置中的<code class="fe nw nx ny nz b">.tsx</code>和<code class="fe nw nx ny nz b">.jsx</code>文件。</p></blockquote><p id="adf7" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">你还需要创建一个<code class="fe nw nx ny nz b">.babelrc</code>文件，包括作为插件的<a class="ae nk" href="https://github.com/gaearon/react-hot-loader" rel="noopener ugc nofollow" target="_blank"><strong class="mb jd">react-hot-loader</strong></a>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">。巴伯尔克</figcaption></figure><p id="29cb" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">主配置:</strong></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">webpack.main.config.js</figcaption></figure><p id="1f8a" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">共享webpack规则:</strong></p><p id="fb80" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">让我们安装这个文件使用的<strong class="mb jd">开发依赖项</strong>。</p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="4121" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> <!-- -->npm i css-loader style-loader node-sass sass-loader babel-loader ts-loader node-loader --save-dev</span></pre><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">网络包.规则. js</figcaption></figure><blockquote class="of og oh"><p id="f4b1" class="lz ma oi mb b mc mv kd me mf mw kg mh oj mx mk ml ok my mo mp ol mz ms mt mu im bi translated">正如你所看到的，我已经包括了<a class="ae nk" href="https://sass-lang.com/documentation/syntax" rel="noopener ugc nofollow" target="_blank"> <strong class="mb jd">萨斯/SCSS </strong> </a>(。scss)文件将使用<strong class="mb jd"> sass-loader </strong>构建。如果您想使用<strong class="mb jd"> SCSS </strong>，那么只需<code class="fe nw nx ny nz b"><strong class="mb jd">$</strong> npm i sass-loader</code>并确保您已经包括了如上所述的<code class="fe nw nx ny nz b">test: /\.(scss|css)$/</code>。</p></blockquote><h2 id="3977" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">服务行业人员</h2><p id="f2c7" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">现在让我们保持<strong class="mb jd">简单</strong>，并包含默认的服务工作者文件，该文件通常由<code class="fe nw nx ny nz b">create-react-app</code>生成。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">服务工作者. ts</figcaption></figure><h2 id="1a63" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">一些文件更改</h2><p id="e963" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">为了保持全局<code class="fe nw nx ny nz b">index.html</code>和<code class="fe nw nx ny nz b">index.scss or index.css</code> <strong class="mb jd">将</strong>与反应<strong class="mb jd">组件</strong>分开，我们将<strong class="mb jd">专门为项目根目录中的那些文件创建目录</strong> <code class="fe nw nx ny nz b"><strong class="mb jd">public</strong></code>。</p><p id="4f73" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd"/><code class="fe nw nx ny nz b"><strong class="mb jd">src</strong></code><strong class="mb jd">:</strong></p><p id="da24" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">我还喜欢将<code class="fe nw nx ny nz b">main.ts</code>文件放在<code class="fe nw nx ny nz b">src/main</code>下的<code class="fe nw nx ny nz b">main</code>目录中，并将所有其他渲染器/react文件放在<code class="fe nw nx ny nz b">src/renderer</code>下。我们还将<strong class="mb jd">在<code class="fe nw nx ny nz b">src/renderer/components</code>下创建一个</strong> <code class="fe nw nx ny nz b"><strong class="mb jd">components</strong></code> <strong class="mb jd">目录</strong>来存放我们的React组件。</p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="97d0" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> mkdir public &amp;&amp; mkdir src/renderer &amp;&amp; mkdir src/main</span></pre><p id="8c40" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">然后<strong class="mb jd">将文件</strong>移动到它们的新目录中。</p><p id="70b5" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">所以新的结构应该是…</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pp"><img src="../Images/37f8a8c32177b0954ac57d7f4299d2d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ZklZq39w1NaTFtj6LJtCg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">src和公共</figcaption></figure><h2 id="d61b" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">renderer.tsx文件</h2><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">renderer.tsx(以前的renderer.ts)</figcaption></figure><h2 id="9ffd" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">App.tsx文件</h2><p id="1324" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">将根文件<code class="fe nw nx ny nz b">App.tsx</code>包装在<code class="fe nw nx ny nz b">hot()</code>中支持热模块重载。这将确保我们任何源文件中的<strong class="mb jd">更改都将被更新。</strong></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pk pl l"/></div></figure><h2 id="bf77" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">Package.json</h2><p id="660e" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">我们需要更改<code class="fe nw nx ny nz b">main</code>条目和电子锻造<strong class="mb jd">渲染器</strong> <strong class="mb jd">配置</strong>以指向<strong class="mb jd">正确的</strong> <code class="fe nw nx ny nz b">index.html</code>和<code class="fe nw nx ny nz b">renderer.tsx</code>文件。</p><p id="99f9" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">主条目</strong></p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="d332" class="nl li it nz b gy pe pf l pg ph">"main": "./.webpack/main",</span></pre><p id="6d83" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd">电子呈现器配置</strong></p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="776f" class="nl li it nz b gy pe pf l pg ph">"renderer": {<br/>  "config": "./webpack.renderer.config.js",<br/>  "entryPoints": [<br/>    {<br/>      "html": "./public/index.html",<br/>      "js": "./src/renderer/renderer.tsx",<br/>      "name": "main_window"<br/>    }<br/>  ]<br/>}</span></pre><h1 id="6869" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">制作可分发的文件</h1><p id="327f" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">让<strong class="mb jd">让</strong>成为我们的应用。</p><p id="15aa" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">我将为<strong class="mb jd"> MacOS (OSX) </strong>创建一个<code class="fe nw nx ny nz b">.dmg</code>文件，只是为了展示<strong class="mb jd">创建另一个可分发的</strong>是多么容易。</p><p id="216e" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">然而，<strong class="mb jd">默认</strong>创建的<code class="fe nw nx ny nz b">.zip</code>文件可以在任何平台上运行。</p><p id="a23b" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">为了获得我们应用程序的<code class="fe nw nx ny nz b">.dmg</code>，我将把它添加到<strong class="mb jd"> makers配置</strong>中的<code class="fe nw nx ny nz b">package.json</code>中。</p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="19ee" class="nl li it nz b gy pe pf l pg ph">{<br/>  "name": "@electron-forge/maker-dmg",<br/>  "config": {<br/>    "background": "../something_random.png",<br/>    "format": "ULFO"<br/>  }<br/>},</span></pre><p id="6bba" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">现在<strong class="mb jd">制作</strong></p><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="0fd1" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> electron-forge make</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pq"><img src="../Images/c309091a5f5432f2dca7261f960f78fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4VknCKH4Mt0xVWT2dqCNMA.png"/></div></div></figure><h1 id="1960" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">运行你的应用程序⚡️</h1><pre class="ks kt ku kv gt pa nz pb pc aw pd bi"><span id="abf7" class="nl li it nz b gy pe pf l pg ph"><strong class="nz jd">$</strong> electron-forge start</span></pre><p id="aec1" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">现在你已经有了一个基本的电子+反应+网络包+电子锻造桌面应用程序！🌈</p><h1 id="801c" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">我们的依赖</h1><div class="pr ps gp gr pt pu"><a href="https://electronjs.org" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd jd gy z fp pz fr fs qa fu fw jc bi translated">电子|使用JavaScript、HTML和CSS构建跨平台桌面应用。</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">要开始使用electronic，请查看下面的资源。了解如何用电子包装您的web应用程序，访问所有…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">electronjs.org</p></div></div><div class="qd l"><div class="qe l qf qg qh qd qi lb pu"/></div></div></a></div><div class="pr ps gp gr pt pu"><a href="https://www.electronforge.io" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd jd gy z fp pz fr fs qa fu fw jc bi translated">入门指南</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">您现在应该有一个名为的目录，里面有一个超小型的电子应用程序样板文件。如果你朝那个方向走…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">www.electronforge.io</p></div></div><div class="qd l"><div class="qj l qf qg qh qd qi lb pu"/></div></div></a></div><div class="pr ps gp gr pt pu"><a href="https://github.com/gaearon/react-hot-loader" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd jd gy z fp pz fr fs qa fu fw jc bi translated">Gaea Ron/react-热加载器</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">⚛️ ⚡️观看丹·阿布拉莫夫关于时间旅行热重装的演讲。反应热加载器…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">github.com</p></div></div><div class="qd l"><div class="qk l qf qg qh qd qi lb pu"/></div></div></a></div><div class="pr ps gp gr pt pu"><a href="https://babeljs.io" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd jd gy z fp pz fr fs qa fu fw jc bi translated">下一代JavaScript的编译器</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">通过我们的入门指南了解更多关于巴别塔的信息，或者查看一些关于它背后的人和概念的视频…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">babeljs.io</p></div></div><div class="qd l"><div class="ql l qf qg qh qd qi lb pu"/></div></div></a></div><div class="pr ps gp gr pt pu"><a href="https://reactjs.org" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd jd gy z fp pz fr fs qa fu fw jc bi translated">react——用于构建用户界面的JavaScript库</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">React使得创建交互式ui变得不那么痛苦。为应用程序中的每个状态设计简单的视图，并反应…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">reactjs.org</p></div></div><div class="qd l"><div class="qm l qf qg qh qd qi lb pu"/></div></div></a></div><h2 id="7364" class="nl li it bd lj nm oa dn ln no ob dp lr mi oc nr lt mm od nt lv mq oe nv lx iz bi translated">如果你有任何问题，我会尽我所能帮助你！</h2></div></div>    
</body>
</html>