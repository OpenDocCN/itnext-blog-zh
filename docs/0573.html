<html>
<head>
<title>Figma web API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Figma web API</h1>
<blockquote>原文：<a href="https://itnext.io/figma-web-api-c581ba769e04?source=collection_archive---------3-----------------------#2018-04-03">https://itnext.io/figma-web-api-c581ba769e04?source=collection_archive---------3-----------------------#2018-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b56d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">万岁！Figma给了我们一个Web API，它为我们打开了非常广阔的机会。当我搬到Figma的时候，我在Sketch中错过的一件事是编写插件的能力，玩它。现在我们有了这个功能，对我来说它甚至更好，因为它是在JavaScript中哈哈</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><h2 id="7679" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">目录:</h2><ul class=""><li id="5381" class="ll lm iq jp b jq ln ju lo jy lp kc lq kg lr kk ls lt lu lv bi translated"><a class="ae lw" href="#8f36" rel="noopener ugc nofollow">简单的脚本</a></li><li id="13db" class="ll lm iq jp b jq lx ju ly jy lz kc ma kg mb kk ls lt lu lv bi translated"><a class="ae lw" href="#bfaa" rel="noopener ugc nofollow"> JSON过滤器示例</a></li><li id="11b5" class="ll lm iq jp b jq lx ju ly jy lz kc ma kg mb kk ls lt lu lv bi translated"><a class="ae lw" href="#bfaa" rel="noopener ugc nofollow">来自figma文件项目的JSON】</a></li><li id="8ae0" class="ll lm iq jp b jq lx ju ly jy lz kc ma kg mb kk ls lt lu lv bi translated">Figma的Web API如何改进我的工作？</li></ul></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="e292" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Figma发表了一篇关于Figma的API的文章，但它更浪漫，进行概述的目的多于实际。</p><div class="mc md gp gr me mf"><a href="https://blog.figma.com/introducing-figmas-platform-ee681bf861e7" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">介绍:Figma的平台</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">开放设计生态系统的第一步</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">blog.figma.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt mu mf"/></div></div></a></div><p id="b015" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将讨论实践。因此，当我发现Figma发布了一个Web API时，我去了https://www.figma.com/developers/docs#intro，开始寻找如何使用API的方法。我的目标是得到一个JSON文件，这在你处理设计库的时候非常有用，但是我没有找到任何我可以复制/粘贴并自己检查的脚本，只有API描述，这肯定是有用的，但是当你已经知道如何得到JSON的时候。但是我在<a class="ae lw" href="https://github.com/figma/figma-api-demo" rel="noopener ugc nofollow" target="_blank"> GitHub这里</a>找到了一些例子。</p><p id="c4d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我给你看一个脚本，我们将分解它，告诉你如何过滤它。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><h1 id="8f36" class="mv kt iq bd ku mw mx my kx mz na nb la nc nd ne ld nf ng nh lg ni nj nk lj nl bi translated">简单脚本</h1><p id="3986" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy nm ka kb kc nn ke kf kg no ki kj kk ij bi translated">下面是一个简单的脚本，用来获得一个带有项目结构的基本JSON文件。</p><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi np"><img src="../Images/13f3265017f01f2952efad03c7d44c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wCSPlqwT5aR-KRCcIpqD_g.png"/></div></div></figure><p id="c002" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里发生了什么？从技术角度来看，引擎盖下是Fetch API<a class="ae lw" href="https://developer.mozilla.org/ru/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/ru/docs/Web/API/Fetch _ API/Using _ Fetch</a>和<strong class="jp ir"> await </strong>方法<a class="ae lw" href="https://dev.to/johnpaulada/synchronous-fetch-with-asyncawait" rel="noopener ugc nofollow" target="_blank">https://dev . to/johnpaulada/synchronous-Fetch-with-async await</a></p><div class="mc md gp gr me mf"><a href="https://jsbin.com/nexagil/2/edit?js,console" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">Figma API JSON三—测试示例</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">下面是JS上面的脚本和控制台结果的一个简单例子。它展示了整个JSON three。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">jsbin.com/nexagil/2/edit?js，控制台</p></div></div><div class="mo l"><div class="oa l mq mr ms mo mt mu mf"/></div></div></a></div><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi ob"><img src="../Images/4904b0eadaa6622e155c657ab3c435e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jNMyjl5JNxcOCVEfJV-eGQ.gif"/></div></div></figure><p id="be8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在脚本中，要获得一个文件结构，我们需要两样东西或两个键:</p><h2 id="39cc" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">1.个人访问令牌</h2><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi np"><img src="../Images/e1f0eba22fd32ce14e2113c86ee370ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UCxWJDoQu3-bEC3EqdYqtg.png"/></div></div></figure><h2 id="0aa0" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">2.文件ID</h2><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi oc"><img src="../Images/f5232eece6f12ec2a3ef72fb3269caa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAIVZYPr_pbCUn7nzSebmQ.png"/></div></div></figure><p id="6fe3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这两把钥匙和几行代码，奇迹就来了。现在我们可以用不同的方式解析我们的JSON获得页面、画板、版本等等。剩下的就是细节了😎</p><h1 id="bfaa" class="mv kt iq bd ku mw od my kx mz oe nb la nc of ne ld nf og nh lg ni oh nk lj nl bi translated">JSON过滤器示例</h1><p id="9c43" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy nm ka kb kc nn ke kf kg no ki kj kk ij bi translated">过滤你的JSON也很简单。让我们过滤一个JSON，只得到页面。</p><p id="bfa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要创建一个空对象，稍后在里面添加我们的页面。</p><pre class="nq nr ns nt gt oi oj ok ol aw om bi"><span id="3f0a" class="ks kt iq oj b gy on oo l op oq">let pagesJSON = {};</span></pre><p id="e23a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来让我们为页面创建一个变量。要从JSON获取页面，首先你需要知道Figma的JSON结构是什么样子的。它看起来像这样</p><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi or"><img src="../Images/46432348c22b99c9b3fb966680e37349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ll3pHXlqRGQiX5EF_f2Obw.png"/></div></div></figure><p id="7e73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个结构中，我们需要一个父关键字“文档”和“子关键字”它的页面。</p><pre class="nq nr ns nt gt oi oj ok ol aw om bi"><span id="d7fe" class="ks kt iq oj b gy on oo l op oq">let pages = figmaTreeStructure.document.children;</span></pre><p id="6746" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在在<strong class="jp ir"> pagesJSON </strong>中创建一个新的参数并清空数组内部</p><pre class="nq nr ns nt gt oi oj ok ol aw om bi"><span id="ed0e" class="ks kt iq oj b gy on oo l op oq">pagesJSON.pages = [];</span></pre><p id="343b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一部分是一个循环，我们遍历所有的页面，获取它们的名称，然后放入pagesJSON.pages数组</p><pre class="nq nr ns nt gt oi oj ok ol aw om bi"><span id="5ceb" class="ks kt iq oj b gy on oo l op oq">for (var i in pages) {<br/>    pagesJSON.pages.push(pages[i].name)<br/>};</span></pre><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi os"><img src="../Images/96a9aa95d040752c112eb6085fec079d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u6DXw_U-ONovRO0XRCTt_w.png"/></div></div></figure></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><h1 id="6316" class="mv kt iq bd ku mw mx my kx mz na nb la nc nd ne ld nf ng nh lg ni nj nk lj nl bi translated">来自figma文件项目的JSON</h1><p id="64d8" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy nm ka kb kc nn ke kf kg no ki kj kk ij bi translated">为了展示Figma API的威力，我做了这个网页作为实验【https://pavellaptev.github.io/JSON-from-Figma T2】</p><p id="a44e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在此页面上，您可以获得完整的JSON结构、页面和嵌套画板、仅页面或画板，还可以通过标志名称过滤所有画板。</p><div class="mc md gp gr me mf"><a href="https://pavellaptev.github.io/JSON-from-Figma/" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">来自figma的JSON</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">此页面不存储或收集您的个人代币😊</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">pavellaptev.github.io</p></div></div></div></a></div><figure class="nq nr ns nt gt nu gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi ot"><img src="../Images/ac6e655358e69a831523e69e91edfda0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JEQgqkyVCv0ewN6kkzS5yA.png"/></div></div></figure><p id="68d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它已经有了一个测试令牌和一个用于演示的文件id。希望会有帮助。请随意在这里制造问题</p><p id="f05f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">【https://github.com/PavelLaptev/JSON-from-Figma/issues T4】</p><h1 id="0108" class="mv kt iq bd ku mw od my kx mz oe nb la nc of ne ld nf og nh lg ni oh nk lj nl bi translated">Figma的Web API如何改进我的工作？</h1><p id="6e9c" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy nm ka kb kc nn ke kf kg no ki kj kk ij bi translated">我的一个大学问我，当我让他测试我上面的页面时，好的，API我理解…很好…但是我们为什么需要这个？</p><p id="a6d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">重点不在API，重点是<a class="ae lw" href="https://blog.figma.com/introducing-figmas-platform-ee681bf861e7" rel="noopener ugc nofollow" target="_blank">你能用它做什么</a>。有很多实现。例如，JSON文件可以通过自动化改进您的工作，您不需要每次都手动重写和复制/粘贴每个画板来创建设计库积压，您可以通过不同的方式从库中获得和过滤JSON，它几乎没有限制。这要简单得多，而且可以节省你喝咖啡休息的时间。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><p id="7f4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">祝你愉快，愿原力与你同在💪</p></div></div>    
</body>
</html>