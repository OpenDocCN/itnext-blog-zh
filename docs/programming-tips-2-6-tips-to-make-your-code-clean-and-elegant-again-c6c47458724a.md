# 编程技巧#2:让你的代码变得干净优雅的 6 个技巧

> 原文：<https://itnext.io/programming-tips-2-6-tips-to-make-your-code-clean-and-elegant-again-c6c47458724a?source=collection_archive---------2----------------------->

当我在写这个系列的第一篇文章时，我已经想到了其他的技巧，并告诉自己“你可以提供更多，但是一篇文章是不够的”。

> 我们在这里

你可以随意看看我的上一篇文章:[编程技巧#1 : 6 我希望在我开始编码的时候早点知道](/programming-tips-1-6-tips-i-wish-i-knew-earlier-when-i-started-to-code-504052dd88cf)

像往常一样，这些建议来自经验和书籍阅读。这并不意味着它是世界上最好的，但它能教会你一些你不知道的很酷的东西。

所有引入的示例都将使用 Javascript 编码(除了一个)，以保持语法的简洁和易于理解，同时能够在浏览器的控制台中运行所有内容。

> **旁注:**这一次，比起功能，我们更关注可读性。干净优雅就好。

# 1.提前返回报表

一个常见的不良编码习惯是用条件语句包围大代码块，有时重复返回语句。

**早期返回语句**的目标是尽可能快地从一个函数调用或一个简单的块中返回，将棘手的处理工作放在较低的部分，并尽可能避免条件语句。

以下是您应该避免的情况:

**可读性如何？它起作用了，但是它很丑，不是吗？**

你可以这样清洁它:

等待..发生了什么事？只是去掉了嵌套的条件语句和返回语句。此外，我们可以很容易地区分两部分:

*   输入验证部分，在顶部上方。
*   加工部分，在下底部。

我应该提到我们还跳过了 4 个花括号吗？(可能会更糟)。

我相信你的代码要复杂得多，所以只要**记住那些小技巧:**

*   **尽量把你的输入验证部分放在函数的上半部分，**这样你就不用在调试的时候向下滚动或者修改代码行了。
*   尝试重构你的代码，理解哪一个条件依赖于哪一个条件，哪一个条件仅仅是独立于其他条件。是这样吗？把它移到顶部。
*   **早期返回语句的要点是避免使用大的 if-else 块来处理错误和执行实际的算法。你的代码越干净，就越容易调试和维护。**

这个很简单，让我们继续。

# 2.链式函数调用

我同意，所有人都喜欢俏皮话。这次忘了它，试着把注意力集中在你同事的眼睛流血的程度上。

**这个技巧在函数式编程和设计模式构建器中都是有用的。**

只需将一行代码转换成每行的函数调用。

以下是您应该避免的情况:

**根本不可读。**请不要什么都用一句话。这很诱人，也很令人满足，但请努力吧。

现在，更性感的版本。继续凝视这杰出的杰作。

这要愉快得多。为了清楚起见，我添加了一些注释，但这只是这种编码实践允许您做的一个例子。

考虑一下每行使用一个函数调用的几个优点:

*   **高可读性**
*   如示例所示，**您可以注释每一行，使您的代码更容易理解**
*   你可以在头脑中记录下你的每一步，而不是费力地去读你的长篇大论。

为了确保您理解了，这里有一个来自 Android 开发人员的使用 Builder 模式的非常常见的例子。希望你会喜欢这个。

易于阅读和使用，更重要的是？

# 3.条件语句的多态性

毫无疑问，最常见的编码任务之一是检查对象属性，并根据该属性执行代码块。

当处理不同对象的集合时，这种用例会变得非常痛苦。

这里有一个例子:

**条件语句，条件语句无处不在。当你继承的遗产数量增加时，这个清单会变得更长，更难阅读。**

让我们看看如何通过重构和使用多态性来避免它。

很优雅，不是吗？(浅见)

目标是:

*   **减少实例类型检查，就像你可以在 Java 中用** `instance of` **找到的那样，这是一个需要避免的巨大陷阱。**在这个例子中，我们用属性`category`模拟了类型检查。
*   **将算法部分委托给类/子类的实例，**以便调试和定位错误变得更快。
*   由于继承允许覆盖函数定义，**你的代码也将更加模块化。**

这篇技巧要求你了解面向对象编程的基础，没那么难。

# 4.命名事物

这是一句非常著名的名言:

> *计算机科学只有两个硬东西:缓存失效和事物命名*。菲尔·卡尔顿

事实上，这是真的，但至少对于第二部分来说是多余的。

根据你实际使用的方式，你给一个变量重新命名了多少次？

> 查找-替换诞生了

以下是我想分享的一系列建议:

*   **不要多此一举。**(又名干，不重复)(其实不关心这个情况)

**示例**

多余的，要避免

说真的，我们写了多少次`article(s)`？

现在，试试这个更干净的

重点是，**你已经从** `ArticlesDatabase` **知道你在处理文章。因此，为什么你每次都重复这个词？有道理，对吧？**

> **旁注:** `getAll()`本可以只换成`all()`，它更短，仍然可读。

*   **区分私人成员和其他变量**

有两种众所周知的方法来实现这一点:

*   在私有成员前添加关键字`this`。
*   在私有成员前面加上字母`m`或`m_`，这是`member_`的简写。

这个技巧非常有用，因为它允许您在代码中导航，同时知道哪个变量是临时使用的，哪个变量属于当前实例(又名`this`)。

我个人建议遵循第二种模式，因为它只需要你用 Java/C++写 1 或 2 个字符，而不是整个`this.`或`this->`。

> 我认为这个不需要任何代码。嘿，它只是变量名称前的两个字符。

*   使用让你感觉舒服的名字

让我解释一下。

我相信你可以在项目中找到的最常见的类之一叫做 `Utils`。这个类在同一时间什么都不做，什么都做。这里有一些时钟的东西，那里有一些数学，哦，等等，我忘了十六进制和 RGB 格式的颜色的语法糖。

> **边注:**有时候这个类会随着函数数量的增加而拆分成几个类。
> 
> **重要提示:**这个类通常被实现为 **Singleton** 以使它可以在任何地方使用而没有任何开销。

没关系，为每个函数创建类是不值得的，而且`utils`听起来很棒，而且是根据具体情况定制的。

> **重点来了。**

如果这个类在你编码的时候既有用又方便，为什么不把它叫做 `Sugar` **？甚至是** `Honey`？

实际上，它有时会让你发笑，你的代码会更有趣。你的读者将不再疑惑“啊，一遍又一遍，这个该死的类，所有的东西都在里面”。

就我个人而言，我总是这样重新命名这个类，感觉很好，很干净。

> 我应该提到它也将避免与已经定义了一个`Utils`类的语言和库的名称冲突吗？

**最后，不要在命名事物上遮遮掩掩。努力向前，让它发挥作用，最终你会有足够的空闲时间来完成这项任务。**

> 查找-替换是你的朋友

# 5.使用命名回调而不是匿名回调

这是关于 Javascript 开发人员的总体情况，但也适用于其他语言，如 Java、Ruby、Kotlin 等。

**优势**

对于文字和匿名函数上的命名事物也是如此:

*   **你知道你的回访是为了什么。**
*   您的回调可以在任何地方重用。
*   **命名回调函数的改变会改变调用它的所有函数的行为，**而不是手工复制粘贴你的匿名回调代码，希望你什么都没忘记。

> **须知:**一个好的编码实践在于尽可能地减少嵌套回调函数的数量。如果你使用过 AJAX，你就会明白我的意思。

事实上，一个很好的经验法则是这样的(依我拙见) :

**如果你要不止一次地使用一个字面函数或匿名函数，命名它并使它可重用。**

它会让你的代码更有意义，并且它会让你免去疑惑**“WTF，为什么我要把 0.376 传递给这个函数？这是要做什么？”**

# **6.使用数据库时使用请求持有人**

**这个是我喜欢的一个编码练习。我不确定你会在网上找到它，或者它在任何方面都是好的。然而，我真的相信这是一个好主意，至少可以分享和讨论(请随时发短信告诉我你的想法)。**

****一个例子胜过千言万语。****

> **这次在 PHP 中，Javascript 根本不是为数据库操作而设计的，你不应该对此感到惊讶。**

## **例子**

**古老的好方法**

****假设这些调用是在项目中不同文件的不同位置进行的。**有了所有的依赖项、外键等等，**你浪费了很多时间**想知道“我把这个 SQL 请求放在哪里了？”。**

**当客户在交付 3 个月后要求更改时，回到这个问题，仍然想知道“嗯，这个包含嵌套的 GROUP BY 和 WHERE 子句的 13 行查询是什么？”。**

**这就是我对这个周期性任务的解决方案**

**再次强调，这是关于命名事物和有效地组织代码。**

****优点****

*   **所有的请求都在一个地方，并且有一个名字，可以帮助你理解每个请求的意图。评论也有帮助。**
*   **使用一个**单例**或者仅仅是一个保存**常量**的类很容易集成到你代码的任何地方。**
*   ****请求可以重用。****
*   ****如果你想让它更有条理，你可以把一个** `RequestHolder` **拆分成一个** `UserRequestHolder` **和其他请求持有者。**一边走一边感受。**

**![](img/193d481d4df16a7a372a559f56109fcc.png)**

**下午茶时间|照片由[摩根塞申斯](https://unsplash.com/@morgansessions?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄**

**最后，我想分享一些关于写代码的个人想法:**

*   **几乎总有更好的方法来解决你的问题。**
*   **为非常基本的任务(比如加法)编写企业就绪代码是没有意义的。**
*   **关于这个话题有无价的资源，你可以通过搜索:`<language> good coding practices`或者`<language> style guide`找到。例如，AirBnb 制作了这样的风格指南:[https://github.com/airbnb/javascript](https://github.com/airbnb/javascript)**
*   **每种编码实践都可能有优点和缺点，就像所有事情一样。并不总是有一种简洁明了的方式来编写所谓优雅的代码。**
*   **一段代码在一种语言中可能很美，在另一种语言中可能很丑。卢布主义者知道这一点。**

**如果你喜欢写漂亮的杰作，你应该试试 Ruby。它的创建者声称这是一种程序员应该喜欢用它来写代码的语言。**

> **产生有意义的代码。**

# **作者说明**

**这些建议可能看起来很酷也很有用，你应该在努力和价值之间找到平衡。如果你认为使用这些技巧毫无意义，那就跳过它。目标是提高您的编码满意度，增强您的编码风格，毫不费力地达到相同的结果。**

**我认为这篇文章与过度工程没多大关系，但你还是应该停止这种邪恶的做法。**

**几乎所有东西都可以被高度过度工程化*(一个简单加法函数的 10 行注释*)。**

**把这些小贴士当作一个好的提示包，放在你的编码包里。**

# **感谢阅读**

**我希望你喜欢这篇文章。**

**不要犹豫，看看我最近写的一篇:[编程技巧#1 : 6 我希望在我开始编码的时候早点知道](/programming-tips-1-6-tips-i-wish-i-knew-earlier-when-i-started-to-code-504052dd88cf)**

**请随时联系我，☕️**

**![](img/dfa719dc90f6808c9bbcea7245e16f28.png)**

**[吴怡](https://unsplash.com/@takeshi2?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的《白色马克杯里的卡布奇诺，白色泡沫艺术在木桌上》**