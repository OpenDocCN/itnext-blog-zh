<html>
<head>
<title>AngularJS exporting to PDF utilising pdfmake.js library.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AngularJS利用pdfmake.js库导出到PDF。</h1>
<blockquote>原文：<a href="https://itnext.io/angularjs-exporting-to-pdf-using-pdfmake-js-library-49f3afec97ef?source=collection_archive---------0-----------------------#2018-02-12">https://itnext.io/angularjs-exporting-to-pdf-using-pdfmake-js-library-49f3afec97ef?source=collection_archive---------0-----------------------#2018-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2c33e46deec7e804ec95bae34e411016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nh27crHFJVV3CO_72wj9vw.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="a496" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">在本教程中，我们将讨论如何在导出的PDF文件中设置、设计和实现字体。</h2></div><p id="499f" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae lm" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fangularjs-exporting-to-pdf-using-pdfmake-js-library-49f3afec97ef" rel="noopener ugc nofollow" target="_blank"> <em class="ln">点击这里在LinkedIn </em> </a>上分享这篇文章</p><p id="f9e3" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi lo translated">可以使用bower cd将pdfmake.js库安装到您的angular目录中，并运行此代码以获得pdfmake.js的最新版本。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="5603" class="mg mh jb mc b gy mi mj l mk ml">bower install pdfmake</span></pre><p id="133b" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这个也可以从github <a class="ae lm" href="https://github.com/bpampuch/pdfmake" rel="noopener ugc nofollow" target="_blank">这里</a>下载。现在把这个库包含到你的angular js index.html文件中。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="0ef7" class="mg mh jb mc b gy mi mj l mk ml"><strong class="mc jc">&lt;!doctype html&gt;</strong><br/> &lt;html lang='en'&gt;<br/> &lt;head&gt;<br/> 	&lt;meta charset='utf-8'&gt;<br/> 	&lt;title&gt;AngularJS export to pdf example.&lt;/title&gt;<br/> 	&lt;script src='pdfmake/build/pdfmake.min.js'&gt;&lt;/script&gt;<br/> 	&lt;script src='pdfmake/build/vfs_fonts.js'&gt;&lt;/script&gt;<br/> &lt;/head&gt;<br/> &lt;body&gt;</span></pre><p id="b63a" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">接下来在视图中创建一个链接来调用$scope函数。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="985c" class="mg mh jb mc b gy mi mj l mk ml">&lt;a href=”#” ng-click=”downloadPDF()”&gt;&lt;/a&gt;</span></pre><p id="6035" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在，在由我们的视图执行的控制器中创建一个$scope方法$scope.downloadPDF。这个方法将包含我们导出逻辑的核心。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="f57d" class="mg mh jb mc b gy mi mj l mk ml">$scope.downloadPDF = function() {<br/>});</span></pre><p id="2a83" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">让我们为PDF创建一个页眉和页脚。在我们的scope.downloadPDF方法中</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="3c0a" class="mg mh jb mc b gy mi mj l mk ml">var docDefinition = {<br/>          header: function() {<br/>                return [<br/>                    {<br/>                        style: 'table',<br/>                        margin: [62,35,62,35],<br/>                        table: {<br/>                            widths: ['*', '*'],<br/>                            headerRows: 0,<br/>                            body: [<br/>                                [<br/>                                    {text: 'Booking Summary', style: 'topHeader', alignment: 'left'},<br/>                                    {<br/>                                        'base64-image-string-goes-here',<br/>                                        width: 150,<br/>                                        alignment: 'right'<br/>                                    }<br/>                                ]<br/>                            ]<br/>                        },<br/>                        layout: 'noBorders'<br/>                    }<br/>                ]<br/>            },<br/>            footer: function(currentPage, pageCount) { <br/>                return [<br/>                    {text: currentPage.toString() + ' of ' + pageCount, alignment: 'center', style: 'footer'}<br/>                ]<br/>            },<br/>            content: [],<br/>            pageSize: 'A4',<br/>            pageMargins: [62,80,62,80],<br/>            styles: {<br/>                topHeader: {<br/>                    fontSize: 20,<br/>                    bold: true,<br/>                    margin: [0, 6, 0, 30],<br/>                    alignment: 'left'<br/>                },<br/>                table: {<br/>                    fontSize: 8,<br/>                    alignment: 'left',<br/>                    color: 'black',<br/>                    margin: [0, 5, 0, 15]<br/>                },<br/>                header: {       <br/>                    fontSize: 16,<br/>                    bold: true,<br/>                    margin: [0, 10, 0, 15],<br/>                    alignment: 'left'<br/>                },<br/>                footer: {<br/>                    fontSize: 8,<br/>                    margin: [0, 25, 0, 17],<br/>                    alignment: 'center'<br/>                }<br/>            }<br/>        };</span><span id="8ead" class="mg mh jb mc b gy mm mj l mk ml">      pdfMake.createPdf(docDefinition).download();<br/>};</span></pre><p id="c502" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">docDefinition对象是我们描述PDF以供pdfmake.js呈现的方式。标题由一个包含两列的表格组成。使用星号符号自动调整列宽。通过向该列表追加另一个宽度，我们指示pdfmake.js调整新列的大小。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b0c8" class="mg mh jb mc b gy mi mj l mk ml">widths: ['*', '*']</span></pre><p id="7ad2" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">定义为表格的内容可以在主体数组中找到。左侧表格列包含文本“标题”，它链接到样式引用“标题”。右表列将base64图像字符串嵌入到对象中。我们通过这个<a class="ae lm" href="https://codebeautify.org/image-to-base64-converter" rel="noopener ugc nofollow" target="_blank">在线工具</a>生成base64字符串，然后将生成的base64字符串‘base64-image-string-goes-here’复制并粘贴到我们的对象中。我们希望这个表格没有边框，否则pdfmake.js会为我们的单元格和表格绘制黑色边框。footer函数根据PDF底部的总页数绘制当前页面。注意，我们使用styles对象中的“footer”选择器来附加页脚的样式。更多关于创造风格的信息可以在<a class="ae lm" href="http://pdfmake.org/#/gettingstarted" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="02a4" class="mg mh jb mc b gy mi mj l mk ml">content: [<br/>                {<br/>                    style: 'topTable',<br/>                    table: {<br/>                        widths: ['*','*', '*', '*'],<br/>                        heights: [18],<br/>                        headerRows: 1,<br/>                        body: [<br/>                            [<br/>                                {text: $scope.title+' '+$scope.firstName+' '+$scope.surname, <br/>                                style: 'tableHeader', colSpan: 4}, {}, {}, {}<br/>                            ],<br/>                            [<br/>                                {text: 'Type:', style: 'tableLabel'}, {text: 'Flight'}, <br/>                                {text: 'Verified:', style: 'tableLabel'}, {text: 'Yes'}<br/>                            ],<br/>                            [<br/>                                {text: 'Status ID:', style: 'tableLabel'}, {text: $scope.statusid}, <br/>                                {text: 'Supplier ID:', style: 'tableLabel'}, {text: $scope.supplierid}<br/>                            ],<br/>                            [<br/>                                {text: 'Session ID:', style: 'tableLabel'}, {text: $scope..sessionid}, <br/>                                {text: 'Booking ID:', style: 'tableLabel'}, {text: $scope.bookingid}<br/>                            ],<br/>                            [<br/>                                {text: 'Departing:', style: 'tableLabel'}, {text: $scope.date }, <br/>                                {text: 'Passengers:', style: 'tableLabel'}, {text: $scope.passengers'}<br/>                            ]<br/>                        ]<br/>                    },<br/>                    layout: {<br/>                        paddingLeft: function(i, node) { return 8; },<br/>                        paddingRight: function(i, node) { return 8; },<br/>                        paddingTop: function(i, node) { return 6; },<br/>                        paddingBottom: function(i, node) { return 6; },<br/>                        fillColor: function (i, node) {<br/>                            return (i % 2 === 0) ?  '#F5F5F5' : null;<br/>                        }<br/>                    }<br/>                }<br/>]</span></pre><p id="ed25" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在上面的内容对象中，我们指示pdfmake.js绘制一个包含四列的表格。列宽设置为由星号符号自动定义。我们希望将表头显示为一行，因此设置了colspan 4。默认情况下，这个表格是有边框的，所以我们只需要为每个表格单元格添加一些填充。我们还想为fillColor函数中定义的每一行表格创建斑马效果。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="955f" class="mu mh jb bd mv mw mx my mz na nb nc nd kh ne ki nf kk ng kl nh kn ni ko nj nk bi translated">将字体超赞融入PDF。</h1><p id="398e" class="pw-post-body-paragraph kq kr jb ks b kt nl kc kv kw nm kf ky kz nn lb lc ld no lf lg lh np lj lk ll ij bi translated">首先，我们需要使用这个<a class="ae lm" href="https://www.giftofspeed.com/base64-encoder" rel="noopener ugc nofollow" target="_blank">工具</a>将我们的字体文件转换成base64编码的字符串。导航到bower _ components/pdf make/build/vjs_fonts.js，将编码的font-awesome.ttf base64字符串粘贴到vjs _ fonts . js文件中。我已经从这段代码中删除了字符串，因为你会发现它们非常大！</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="70a3" class="mg mh jb mc b gy mi mj l mk ml">this.pdfMake = this.pdfMake || {};</span><span id="490c" class="mg mh jb mc b gy mm mj l mk ml">this.pdfMake.vfs = {<br/>    "Roboto-Italic.ttf": "paste-roboto-base64-string-here",<br/>    "Roboto-Medium.ttf": "paste-roboto-base64-string-here",<br/>    "Roboto-MediumItalic.ttf": "paste-roboto-base64-string-here",<br/>    "Roboto-Regular.ttf": "paste-roboto-base64-string-here",<br/>    "FontAwesome.ttf": "paste-font-awesome-base64-string-here"<br/>};</span><span id="b10a" class="mg mh jb mc b gy mm mj l mk ml">this.pdfMake.fonts = {<br/> Roboto: {<br/>     italics       : 'Roboto-Italic.ttf',<br/>     normal        : 'Roboto-Regular.ttf',<br/>     bold          : 'Roboto-Medium.ttf',<br/>     mediumitalics : 'Roboto-MediumItalic.ttf'<br/> },<br/> FontAwesome: {<br/>     normal     : 'FontAwesome.ttf',<br/>     bold       : 'FontAwesome.ttf',<br/>     italics    : 'FontAwesome.ttf',<br/>     bolditalics: 'FontAwesome.ttf'<br/> }<br/>};</span></pre></div></div>    
</body>
</html>