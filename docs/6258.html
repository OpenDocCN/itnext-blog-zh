<html>
<head>
<title>Kubernetes: Krew plugins manager, and useful kubectl plugins list</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes: Krew插件管理器和有用的kubectl插件列表</h1>
<blockquote>原文：<a href="https://itnext.io/kubernetes-the-krew-plugins-manager-and-useful-kubectl-plugins-list-8143d65c6c48?source=collection_archive---------0-----------------------#2021-10-01">https://itnext.io/kubernetes-the-krew-plugins-manager-and-useful-kubectl-plugins-list-8143d65c6c48?source=collection_archive---------0-----------------------#2021-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/48ab6731fc89f28452dfdf73d5fe5ec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-LJw8RG96qMMxPZeKcV5w.png"/></div></div></figure><p id="5ee4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">kubectl</code>实用程序最有价值的特性之一是它的插件。</p><p id="9925" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然还有像<a class="ae la" href="https://k8slens.dev/" rel="noopener ugc nofollow" target="_blank">镜头</a>这样的东西，被不喜欢在终端工作的开发者广泛使用，或者像<a class="ae la" href="https://k9scli.io/" rel="noopener ugc nofollow" target="_blank"> k9s </a>这样的工具，但是<code class="fe kw kx ky kz b">kubectl</code>的插件值得一个专用的岗位。</p><p id="ff55" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，在这篇文章中，我们将安装Krew — <code class="fe kw kx ky kz b">kubectl</code>的插件管理器，并查看我在工作中使用的插件列表。</p><h1 id="4b19" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">krew——用于<code class="fe kw kx ky kz b">kubectl</code>的插件管理器</h1><p id="6625" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">最近，<code class="fe kw kx ky kz b">kubectl</code>有了自己的插件管理器<code class="fe kw kx ky kz b"><a class="ae la" href="https://krew.sigs.k8s.io/" rel="noopener ugc nofollow" target="_blank">Krew</a></code>。</p><p id="febf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它有一个插件库，用于安装和升级插件。</p><p id="81ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Arch上可以从AUR安装Linux <code class="fe kw kx ky kz b">krew</code>:</p><p id="4750" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Arch Linux:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="3a29" class="mm lc iq kz b gy mn mo l mp mq">$ yay -S krew</span></pre><p id="5721" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更新其软件包列表:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="2a61" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew update</span></pre><p id="115d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">找一个插件，比如<code class="fe kw kx ky kz b">topology</code>:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="e5ec" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew search topology<br/>NAME DESCRIPTION INSTALLED<br/>topology Explore region topology for nodes or pods no</span></pre><p id="59b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装它:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="4832" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install topology<br/>Updated the local copy of plugin index.<br/>Upgrades available for installed plugins:<br/>* rbac-tool v1.2.1 -&gt; v1.3.0<br/>Installing plugin: topology<br/>Installed plugin: topology<br/>\<br/>| Use this plugin:<br/>| kubectl topology<br/>| Documentation:<br/>| <a class="ae la" href="https://github.com/bmcustodio/kubectl-topology" rel="noopener ugc nofollow" target="_blank">https://github.com/bmcustodio/kubectl-topology</a><br/>/</span></pre><p id="64c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并检查:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="c26c" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl topology help<br/>Provides insight into the topology of a Kubernetes cluster.<br/>Usage:<br/>kubectl-topology [command]<br/>Available Commands:<br/>help Help about any command<br/>node Provides insight into the distribution of nodes per region or zone.<br/>pod Provides insight into the distribution of pods per region or zone.</span></pre><h1 id="15a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe kw kx ky kz b">kubectl</code> -有用插件列表</h1><p id="8281" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">在这篇文章的最后，我会添加几个类似插件列表的链接，下面让我们来看看我在工作中使用的最好的插件。</p><h2 id="ff00" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-topology</code></h2><p id="7814" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">让我们从<code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/bmcustodio/kubectl-topology" rel="noopener ugc nofollow" target="_blank">kubectl-topology</a></code>插件开始，它允许显示所有集群的WorkerNodes、它们的区域以及位于每个节点上的pod:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/b22e2edf5f07985bb4f24f286aa4be40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*5Q9QYPdp1WEQKqV1.png"/></div></figure><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/8ffeff0199065b4932144fa5c4f0b9c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-XNqWKYIZ6ZHgMCl.png"/></div></div></figure><h2 id="cdaa" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-resources</code></h2><p id="bbd3" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/howardjohn/kubectl-resources" rel="noopener ugc nofollow" target="_blank">kubectl-resources</a></code>插件可以在WorkerNodes上显示关于pods使用的限制和资源的扩展信息。</p><p id="ec2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用Go安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="fc11" class="mm lc iq kz b gy mn mo l mp mq">$ go get github.com/howardjohn/kubectl-resources</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/9cbf9d3588153355cb29c82ecaa67f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oKORTm29kz9y-zxb.png"/></div></div></figure><h2 id="9780" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-free</code></h2><p id="75d2" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/makocchi-git/kubectl-free" rel="noopener ugc nofollow" target="_blank">kubectl-free</a></code>插件类似于Linux中的<code class="fe kw kx ky kz b">free</code>实用程序——它将显示关于WorkerNodes上已用和可用资源的信息。</p><p id="6e30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过从发布页面下载一个归档文件来安装它，解压并复制到<code class="fe kw kx ky kz b">/usr/local/bin</code>:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="6406" class="mm lc iq kz b gy mn mo l mp mq">$ cd /tmp/<br/>$ wget <a class="ae la" href="https://github.com/makocchi-git/kubectl-free/releases/download/v0.2.0/kubectl-free_0.2.0_Linux_x86_64.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/makocchi-git/kubectl-free/releases/download/v0.2.0/kubectl-free_0.2.0_Linux_x86_64.zip</a><br/>$ unzip kubectl-free_0.2.0_Linux_x86_64.zip<br/>$ sudo cp kubectl-free_0.2.0_Linux_x86_64/kubectl-free /usr/local/bin/</span></pre><p id="8626" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并运行它:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/304c0b6927b23e9fd874d91333832e10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5B6AR5yGochOt0ua.png"/></div></div></figure><h2 id="1420" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubecolor</code></h2><p id="adb5" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/dty1er/kubecolor" rel="noopener ugc nofollow" target="_blank">kubecolor</a></code>非常有用，可以通过移植使<code class="fe kw kx ky kz b">kubectl</code>的输出更具可读性。</p><p id="5666" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用Go安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="e908" class="mm lc iq kz b gy mn mo l mp mq">$ go install github.com/dty1er/kubecolor/cmd/kubecolor@latest</span></pre><p id="5c09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">给<code class="fe kw kx ky kz b">~/.bashrc</code>添加别名:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="196a" class="mm lc iq kz b gy mn mo l mp mq">alias kk="kubecolor"</span></pre><p id="794d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和结果:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/a1bf6eb472ffde4bb3d32b12e80629e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2mCzdR1Db31ZEjXj.png"/></div></div></figure><h2 id="a724" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-watch</code></h2><p id="9e0c" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b">kubectl --watch</code>的改进型。项目的页面在这里是<a class="ae la" href="https://github.com/lee0c/kubectl-watch" rel="noopener ugc nofollow" target="_blank">&gt;&gt;&gt;</a>。</p><p id="2abe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="5b9f" class="mm lc iq kz b gy mn mo l mp mq">$ git clone <a class="ae la" href="https://github.com/lee0c/kubectl-watch.git" rel="noopener ugc nofollow" target="_blank">https://github.com/lee0c/kubectl-watch.git</a><br/>$ cd kubectl-watch<br/>$ chmod +x kubectl-watch<br/>$ sudo mv kubectl-watch /usr/local/bin/</span></pre><p id="147a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">检查:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="b397" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl plugin list<br/>The following kubectl-compatible plugins are available:<br/>/usr/local/bin/kubectl-watch<br/>…</span></pre><p id="0b55" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并运行:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/69b494f2bceb0b3dfe7238b3a2156a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UfXEKNRk_EPnQqen.gif"/></div></div></figure><h2 id="dd9e" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-clogs</code></h2><p id="2ec7" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">高级日志查看器。类似于<code class="fe kw kx ky kz b">kubectl logs -f</code>，但是可以跟踪一个名称空间中所有pod的日志。更多详情<a class="ae la" href="https://github.com/ivkalita/kubectl-clogs" rel="noopener ugc nofollow" target="_blank">此处&gt; &gt; &gt; </a>。</p><p id="7c48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="34d4" class="mm lc iq kz b gy mn mo l mp mq">$ go install github.com/ivkalita/kubectl-clogs/cmd/kubectl-clogs@latest</span></pre><p id="02b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并检查来自<em class="ni"> istio-system </em>名称空间的日志:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/13a5ef9de38a66e24de82347349eb9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fHNmOcPo8ThlUIoE.png"/></div></div></figure><h2 id="5309" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-who-can</code></h2><p id="a14f" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/aquasecurity/kubectl-who-can" rel="noopener ugc nofollow" target="_blank">kubectl-who-can</a></code>用于显示RBAC的权限和访问。</p><p id="1bba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用Krew安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="d99d" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install who-can</span></pre><p id="f0f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并检查谁能够删除<em class="ni">默认</em>名称空间中的窗格:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/ebefb3f4fdc23291402df0089e977614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*we9clQdEP9i-gjsa.png"/></div></div></figure><h2 id="fece" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-rolesum</code></h2><p id="a0bf" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://awesomeopensource.com/project/Ladicle/kubectl-rolesum" rel="noopener ugc nofollow" target="_blank">kubectl-rolesum</a></code>也用于与Kubernetes RBAC一起检查权限。</p><p id="85dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="45fc" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install rolesum</span></pre><p id="543c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并检查<em class="ni"> istio-system </em>名称空间中<em class="ni">kiali-service-account</em>service account的权限:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/ecf5c6f27d97c73ba7c658fc6a75d17a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JAlgfHhxdLoHQ_l0.png"/></div></div></figure><h2 id="2538" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">ketall</code></h2><p id="1eb9" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/corneliusweig/ketall" rel="noopener ugc nofollow" target="_blank">ketall</a></code>将显示所有资源，包括机密、服务帐户、角色、绑定等等，而不仅仅是pod、服务、守护进程、部署和复制集，就像使用<code class="fe kw kx ky kz b">kubectl get all</code>时一样。</p><p id="a7b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="a0ee" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install get-all</span></pre><p id="c361" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">kubectl get all</code>命令的输出示例:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/4fe8c7556565867c45da30a15d46bb42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JtOh1bfs3QGjZQ5l.png"/></div></div></figure><p id="e38b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并用<code class="fe kw kx ky kz b">ketall</code> - <code class="fe kw kx ky kz b">kubectl get-all</code>:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/2cec804a7f1cbae9f5ff7eafc072f759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/0*OZc7ZC3x68_TG_pT.png"/></div></figure><h2 id="3ac3" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-status</code></h2><p id="f72a" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://awesomeopensource.com/project/bergerx/kubectl-status#usage" rel="noopener ugc nofollow" target="_blank">kubectl-status</a></code>可以显示关于pod状态、节点、部署、服务等的扩展信息。</p><p id="64c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="de9b" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install status</span></pre><p id="efbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并使用标签集<code class="fe kw kx ky kz b">role: data-workers</code>检查Kubernetes WorkerNodes状态:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/6bb9459608178f9d5adbd7be6913e022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qgzy7lM02jubAxaL.png"/></div></div></figure><h2 id="1a67" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">Pod-Dive</code></h2><p id="b3f2" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><a class="ae la" href="https://awesomeopensource.com/project/caiobegotti/Pod-Dive" rel="noopener ugc nofollow" target="_blank"> Pod-Dive </a>将显示关于Kubernetes Pod的信息——它的WorkerNode、一个名称空间、该Pod中的容器，以及运行在同一个WorkerNode上的其他Pod。</p><p id="1789" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="7882" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install pod-dive</span></pre><p id="9c8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并检查一个Pod:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/c59d1ed9c7ab27b36891fcf168002b14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o3Y1oVbAoQjOSLKJ.png"/></div></div></figure><h2 id="d615" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-janitor</code></h2><p id="7779" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://awesomeopensource.com/project/dastergon/kubectl-janitor" rel="noopener ugc nofollow" target="_blank">kubectl-janitor</a></code>-Kubernetes集群的“清洁工”。可以找到有问题的资源，如未计划的pod、失败的作业、卷等。</p><p id="149f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="04ef" class="mm lc iq kz b gy mn mo l mp mq">$ kubectl krew install janitor</span></pre><p id="d75b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并查找所有未安排到工作节点的pod:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/52bbeb67e0985aef18a9b273d2f671b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9eO3aGVHorq8WyaS.png"/></div></div></figure><h2 id="9db4" class="mm lc iq bd ld mr ms dn lh mt mu dp ll kj mv mw lp kn mx my lt kr mz na lx nb bi translated"><code class="fe kw kx ky kz b">kubectl-cf</code></h2><p id="79ff" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">还有今天最后一个插件——<code class="fe kw kx ky kz b"><a class="ae la" href="https://github.com/spongeprojects/kubectl-cf" rel="noopener ugc nofollow" target="_blank">kubectl-cf</a></code>。</p><p id="987c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">实际上，有很多插件可以简单地处理<code class="fe kw kx ky kz b">kubectl</code>的上下文，但是我使用的是集群的专用文件，而不是专用上下文:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="a829" class="mm lc iq kz b gy mn mo l mp mq">$ ls -1 ~/.kube/ | grep kubeconfig<br/>dev-1–18.kubeconfig<br/>prod-1–18.kubeconfig<br/>stage-1–18.kubeconfig<br/>test-1–18.kubeconfig</span></pre><p id="45fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了在它们之间更快地切换，我们可以使用<code class="fe kw kx ky kz b">kubectl-cf</code>插件，它将通过创建到<code class="fe kw kx ky kz b">~/.kube/config</code>文件的符号链接来工作。</p><p id="3dc7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，所有文件都必须有<code class="fe kw kx ky kz b">.kubeconfig</code>扩展名。</p><p id="e076" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装它——克隆它的存储库，构建并复制到<code class="fe kw kx ky kz b">/usr/local/bin</code>:</p><pre class="me mf mg mh gt mi kz mj mk aw ml bi"><span id="627e" class="mm lc iq kz b gy mn mo l mp mq">$ git clone <a class="ae la" href="https://github.com/spongeprojects/kubectl-cf.git" rel="noopener ugc nofollow" target="_blank">https://github.com/spongeprojects/kubectl-cf.git</a><br/>$ cd kubectl-cf/<br/>$ go build -o kubectl-cf<br/>$ sudo cp kubectl-cf /usr/local/bin/</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/6d473df6fcee2b66e63cfab698a6af0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MLKl7cuxfdm8wNpqD5nTmg.gif"/></div></div></figure><h1 id="8d16" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">有用的链接</h1><ul class=""><li id="484f" class="nr ns iq ka b kb lz kf ma kj nt kn nu kr nv kv nw nx ny nz bi translated"><a class="ae la" href="https://github.com/ishantanu/awesome-kubectl-plugins" rel="noopener ugc nofollow" target="_blank">awesome-ku bectl-plugins</a>——一个精选的awesome <code class="fe kw kx ky kz b">kubectl</code>插件列表</li><li id="530a" class="nr ns iq ka b kb oa kf ob kj oc kn od kr oe kv nw nx ny nz bi translated"><a class="ae la" href="https://awesomeopensource.com/projects/kubectl-plugins" rel="noopener ugc nofollow" target="_blank">Github上排名前179的Kubectl插件开源项目</a></li></ul></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><p id="6865" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ni">最初发表于</em> <a class="ae la" href="https://rtfm.co.ua/en/kubernetes-the-krew-plugins-manager-and-useful-kubectl-plugins-list/" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> RTFM: Linux、DevOps和系统管理</em> </a> <em class="ni">。</em></p></div></div>    
</body>
</html>