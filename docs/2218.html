<html>
<head>
<title>How to Build a Productivity Application in React: Part 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中构建生产力应用程序:第4部分</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-build-a-productivity-application-in-react-part-4-14f1ed04dc8f?source=collection_archive---------6-----------------------#2019-04-17">https://itnext.io/how-to-build-a-productivity-application-in-react-part-4-14f1ed04dc8f?source=collection_archive---------6-----------------------#2019-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d19" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建番茄定时器</h2></div><p id="8232" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我在本教程的第一部分中所说的，创作这个系列的动机是我想做一个番茄定时器。我<em class="lf">喜欢</em>番茄工作法(不，这不是广告！)，尤其是因为它让我在参加在线课程的同时还能全职远程工作。</p><p id="0a59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，在我们教程的第4部分，我们将建立一个小的倒计时器！这个计时器将从25分钟开始计时(番茄工作法的标准时间)。当它达到0时，计时器将重置为5分钟，并开始为您的休息倒计时。五分钟后，循环将重新开始！因为人无完人，我们将添加启动和暂停计时器的功能。</p><p id="d21b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你一直在关注这个系列，很高兴你回来了！如果你是第一次加入我们，你想看看以前的材料，请检查零件<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/how-to-build-a-productivity-application-in-react-part-1-9f0c7ee65772"> 1 </a>、<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/how-to-build-a-productivity-application-in-react-part-2-7a5f9b8fed3"> 2 </a>和3，并前往<a class="ae le" href="https://github.com/csinozich/productivity-app" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>查看以前的代码。</p><h2 id="6d0d" class="lg lh it bd li lj lk dn ll lm ln dp lo kr lp lq lr kv ls lt lu kz lv lw lx ly bi translated">设置我们的番茄定时器</h2><p id="e206" class="pw-post-body-paragraph ki kj it kk b kl lz ju kn ko ma jx kq kr mb kt ku kv mc kx ky kz md lb lc ld im bi translated">让我们从设置应用程序来接收计时器功能开始。首先，我们将进入<em class="lf"> App.js </em>并在我们的状态上放置一些键值对。如果你还记得的话，我们已经有了<em class="lf">todo</em>和<em class="lf"> todo </em>的键值对。在这里，我们将添加:</p><ul class=""><li id="52b1" class="me mf it kk b kl km ko kp kr mg kv mh kz mi ld mj mk ml mm bi translated"><em class="lf">休息分钟</em>代表5分钟的休息间隔，设置为5。</li><li id="a141" class="me mf it kk b kl mn ko mo kr mp kv mq kz mr ld mj mk ml mm bi translated"><em class="lf">工作分钟</em>代表25分钟的工作周期，设置为25。</li><li id="e7c9" class="me mf it kk b kl mn ko mo kr mp kv mq kz mr ld mj mk ml mm bi translated"><em class="lf">秒</em>表示整分钟之间的倒计时，设置为0。(这样想吧:你会从25分0秒开始，那么我们的计时器会移动到24分59秒，58秒，57秒……所以我们要从0开始。</li><li id="b6f3" class="me mf it kk b kl mn ko mo kr mp kv mq kz mr ld mj mk ml mm bi translated"><em class="lf"> break </em>是一个布尔值，告诉你的应用程序是否应该显示<em class="lf"> restMinutes </em>。我们首先将它设置为false，因为我假设您没有以休息开始一天的工作！</li><li id="54a6" class="me mf it kk b kl mn ko mo kr mp kv mq kz mr ld mj mk ml mm bi translated"><em class="lf"> start </em>是一个布尔值，其功能与<em class="lf"> break </em>相反。它告诉应用程序是否应该显示<em class="lf">工作分钟</em>。我们也将把这个设置为false，这样你的计时器就不会在你加载应用程序时就开始计时，并给它一个<em class="lf">开始按钮</em>来启动你的计时器。</li><li id="8717" class="me mf it kk b kl mn ko mo kr mp kv mq kz mr ld mj mk ml mm bi translated"><em class="lf"> interval </em>指的是计时器动作之间的时间间隔。你的计时器改变它的倒计时被认为是一个动作，将在一个设定的<em class="lf">间隔</em>毫秒内完成，这个间隔稍后将被添加到你的浏览器中，然后被清除。我们稍后将对此进行更深入的探讨！</li></ul><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/54d9471899d7d69b55b40e13f7ab2ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*PR-6I3jdYNIBu1CVV9Ab4w.png"/></div></figure><p id="8d67" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们用一个功能组件快速地在组件目录中设置我们的<em class="lf"> Pomodoro.js </em>文件。我们不会在这个文件中操作状态，因为我们会将所有的函数放在我们的<em class="lf"> App.js </em>文件中。然而，我们将传入<em class="lf">道具</em>。我们将需要<em class="lf">道具</em>来跟踪我们的<em class="lf">中断/启动</em>开关，以及我们的<em class="lf">休息分钟</em>、<em class="lf">工作分钟</em>和<em class="lf">秒</em>。</p><p id="2157" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该功能组件将返回一个段落标记，我们将在那里放置倒计时器，从25:00开始。下面是我们的按钮，它会根据我们的状态在<em class="lf">暂停</em>和<em class="lf">启动</em>之间切换。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi na"><img src="../Images/690f4affde2e5915fc038ec8c295718d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*k-WKtJrrBL1qpJ0HRa_rwg.png"/></div></figure><p id="6574" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，在我们开始我们的定时器功能之前，继续在<em class="lf"> App.js </em>中导入您的<em class="lf"> Pomodoro </em>组件，并将其添加到我们的App类组件中。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/946ddf74840072314f2a485e46759973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*6R6kPRqSRZVwbK0aswSU3g.png"/></div></figure><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/4b4938aff566de5cab0090a064b4d268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*V0bVdhQ8v9CWBYdbzsHZBg.png"/></div></figure><h2 id="8ed1" class="lg lh it bd li lj lk dn ll lm ln dp lo kr lp lq lr kv ls lt lu kz lv lw lx ly bi translated">构建番茄定时器功能</h2><p id="2874" class="pw-post-body-paragraph ki kj it kk b kl lz ju kn ko ma jx kq kr mb kt ku kv mc kx ky kz md lb lc ld im bi translated">让我们开始我们的定时器功能。首先，在<em class="lf"> App </em>组件中构建一个名为<em class="lf"> timer </em>的函数。我们在<em class="lf">定时器</em>函数中要做的第一件事是为我们的秒数设置<em class="lf">状态</em>。这是我们计时器最基本的部分:我们的<em class="lf">状态</em>上的<em class="lf">秒</em>将从0开始，移动到59，并再次倒计时到0。一旦我们的计时器到零，秒就会重置。我们将使用如下的三元运算来构建这个功能。</p><p id="225d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你不熟悉三元运算符，可以查看一下<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener ugc nofollow" target="_blank"> MDN文档</a>，以及一些很棒的文章<a class="ae le" href="https://codeburst.io/javascript-the-conditional-ternary-operator-explained-cac7218beeff" rel="noopener" target="_blank">这里</a>，这里<a class="ae le" href="https://scotch.io/tutorials/understand-the-javascript-ternary-operator-like-abc" rel="noopener ugc nofollow" target="_blank">这里</a>。三元运算符本质上是条件语句，以类似于<em class="lf"> if/else </em>语句的方式运行代码。就个人而言，我喜欢在有必要保持一行简短的情况下使用它们。当在语句中执行的代码更复杂时，我经常使用<em class="lf"> if/else </em>语句。因此，在本教程中，你会看到我同时使用这两种方法。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/aad2ca0c9bf224e664e649d86af6e5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Md82I5IvGhUk8yD6R4LshQ.png"/></div></div></figure><p id="059c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">处理微小的功能会稍微复杂一些。我们需要从一个<em class="lf"> if </em>语句开始，检查<em class="lf"> break </em>是否被设置为真或假。如果设置为真，我们将<em class="lf">在我们的分钟上设置状态</em>，检查我们的秒钟是否从我们的总计数中减去一分钟。我们将再次使用一系列三元运算来实现这一点:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/67bff5c322cf29e60b907510cd94118e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BeuAm3C6hauSq-XECtT8tg.png"/></div></div></figure><p id="d3b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在此之后，我们将添加另一个<em class="lf"> if </em>语句。如果前面的<em class="lf"> if </em>语句为<em class="lf"> restMinutes </em>返回-1，我们将重置<em class="lf"> break </em>为假，重置<em class="lf"> restMinutes </em>为5。此声明也将启动我们的<em class="lf">工作分钟</em>。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/f3e0e3f1ed2e41626ff3e3fd7e9523a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GNkBizj7mOwFNWDWArxaXw.png"/></div></div></figure><p id="c623" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，对于该功能，我们将在<em class="lf"> else </em>语句下添加相同的逻辑，以充实<em class="lf">工作分钟的相同倒计时。</em>嵌套的<em class="lf"> if </em>语句也将负责复位，将<em class="lf">工作分钟</em>推回到25并中断到<em class="lf"> true </em>。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/9f4c745c6e9133722677af6e9ace55bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XAHX9MPNc0Xk5x7CqsBUfg.png"/></div></div></figure><p id="3b40" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，让我们在我们的<em class="lf"> App.js </em>文件中传递我们的番茄计时器所必需的所有道具，并呈现我们的计时器。在我们的<em class="lf"> App </em>组件的render函数中，将我们的<em class="lf"> timer </em>函数和我们的其他相关项<em class="lf"> state </em>传递给<em class="lf"> Pomodoro </em>组件。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/43f8106240bd31e374029ab01ab6cf40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qQZyXjU5nJl2mcqSQtbMlg.png"/></div></div></figure><p id="4f94" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们将在我们的<em class="lf"> Pomodoro.js </em>文件中使用一个三元函数来正确显示计时器的分钟和数字。该函数适用于十以下的数字；当低于十秒时，0将显示在<em class="lf">秒</em>计数的前面。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/3d9dafddb9e7e2e078f7084320d0e1f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RuFzXW3b1T40dFW6ALKtcg.png"/></div></div></figure><p id="9675" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，您应该能够进入本地服务器并查看一个显示25:00的暂停计时器。接下来，让我们为计时器添加启动和暂停功能。</p><h2 id="1075" class="lg lh it bd li lj lk dn ll lm ln dp lo kr lp lq lr kv ls lt lu kz lv lw lx ly bi translated">开始和暂停功能</h2><p id="bb9e" class="pw-post-body-paragraph ki kj it kk b kl lz ju kn ko ma jx kq kr mb kt ku kv mc kx ky kz md lb lc ld im bi translated">进入<em class="lf"> App.js </em>添加一个函数(我的叫做startTimer)。在我们的函数内部，我们将<em class="lf">设置状态</em>来更新我们的<em class="lf">间隔</em>和<em class="lf">开始</em>键值对。<em class="lf"> Interval </em>将有<em class="lf"> setInterval </em>方法，它接受一个函数和一个代表毫秒的数字。此外，我们将更新<em class="lf"> start </em>以将其布尔值翻转到与当前状态相反的状态。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/89e72f296e6c1960dfcc95dd66e6e6fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hLTJWxr_Tcdn-uClTXS_zg.png"/></div></div></figure><p id="1c68" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们将添加另一个函数来暂停计时器(同样，不出所料，我的函数叫做pauseTimer)。我们的暂停功能将利用<a class="ae le" href="https://reactjs.org/docs/react-component.html" rel="noopener ugc nofollow" target="_blank"><em class="lf"/></a><em class="lf"/>，就像我们在<em class="lf"> removeItems </em>函数中所做的那样。基于计时器之前的状态，我们将返回状态项的静态版本。<em class="lf"> Start </em>将被设置为false(因为我们正在休息)，间隔将使用<em class="lf"> clearInterval </em>清除，以停止计时器的动作。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/513b25f0a7b365a856550af8d441fe7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8eS-rMRcn4-pk0MttO0ljQ.png"/></div></div></figure><p id="e66a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们将这些功能传递给<em class="lf"> Pomodoro </em>组件中的按钮。在我们的<em class="lf"> App </em>组件的渲染函数中，让我们将函数作为道具传递:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/a2c0b795f073a538f9627d2a424e735e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XYZjQbGjBJzI_bKWMHeHw.png"/></div></div></figure><p id="0ab2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，在我们的<em class="lf"> Pomodoro.js </em>文件中，我们将设置我们的按钮。首先，我们将添加一个<em class="lf"> onClick </em>方法，该方法使用一个三元运算符来检查<em class="lf"> props.start </em>是否被设置为true。如果是的话，<em class="lf"> onClick </em>函数将是我们的<em class="lf"> pauseTimer </em>函数。如果设置为false，<em class="lf"> onClick </em>函数将是我们的<em class="lf"> startTimer </em>函数。然后，我们还将使用一个三元运算符将按钮的文本改为<em class="lf">暂停</em>或<em class="lf">开始</em>，这取决于<em class="lf"> props.start </em>是否设置为true。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/9760c4d4324a8b9a41e03997a88f240e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeIj98qbnai9WKYsQDpFoA.png"/></div></div></figure><p id="d675" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">恭喜你！你已经完成了你的计时器。您可以随意调整时间，或者创建单独的暂停和开始按钮。请确保您理解每一个三元运算符，因为它们经常令人困惑。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="2d53" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是关于使用React构建生产力应用程序的教程系列的第4部分。正如我以前说过的，这些对我和你都有启迪作用！如果我犯了什么错误，或者可以改进的地方，请告诉我。请查看下周发布的第5部分，在那里我们将使用样式化组件(React的一个方便的样式化库)来样式化我们的(相对难看的)应用程序。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="1af3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">这个Pomodoro功能是与了不起的网络开发者</em> <a class="ae le" href="https://www.douglasjordan.me/" rel="noopener ugc nofollow" target="_blank"> <em class="lf">道格拉斯·乔丹</em> </a> <em class="lf">合作开发的。</em></p></div></div>    
</body>
</html>