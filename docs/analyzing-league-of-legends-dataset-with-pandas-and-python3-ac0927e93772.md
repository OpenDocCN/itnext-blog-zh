# 使用熊猫和 Python3 分析英雄联盟数据集

> 原文：<https://itnext.io/analyzing-league-of-legends-dataset-with-pandas-and-python3-ac0927e93772?source=collection_archive---------1----------------------->

![](img/3779c9aea3e000f98fe04b7572cdd166.png)

在这篇文章中，我使用 Pandas data analytics library for python 3 在来自 [Oracle's Elixir](http://oracleselixir.com/match-data/) 的英雄联盟 2018 年夏季分裂数据集上演示了一些基本的数据分析技术。

# 查看单个团队的统计数据

首先，我希望能够查看一个团队过去的比赛，以及一些有趣的数据。数据集的建立方式是每个游戏出现两次，一次是从每个队的角度。

例如，假设我们正在审查 Echo Fox vs Clutch Gaming，其`gameid`为`1002620109`。会有两排；从回声福克斯的角度来看，他们得到了 10 次击杀，遭受了 5 次死亡。对于抓机游戏，那是 5 杀 10 死。每个玩家的数据显示在一行中，这意味着每场比赛有 10 行，再加上“团队”的两行，这显示了像`teamkills`和`teamdeaths`这样的东西。在这种情况下，`player`字段就是`Team`。

这意味着要让两个参与者都在一行中，需要做一些工作。首先，需要对数据进行一些基本的清理:

某些 0 和 1 值，例如 first blood，被保存为字符串而不是数字。我把它们都转换成浮点数，还把`blue`和`red`设为整数值。

接下来，用一个`team_games`方法获取一个团队的所有游戏。

运行该命令会得到如下表格:

有了更多的数据。现在我们要的是`team_games`、`opponent_games`的反义词:

将所有这些放在一起:

给出了到目前为止结果的一个很好的总结:

现在我们已经对数据有了一个感觉，让我们做一些实际的分析。

# 关于第一滴血/炮塔/龙的统计…

通常一场强有力的早期比赛会决定结果，或者会吗？我们来调查一下。使用我们的`team_games`函数，我们可以很容易地获得第一血/炮塔的百分比。

这向我们展示了:

对此有多种解释:TSM 没有优先考虑 dragon？也许他们有一个弱车道(因此不经常得到第一炮塔)？我们去看看联盟的其他人怎么样？首先制作`games_by_league`和`teams_by_league`功能:

现在我们可以循环每个团队的统计数据。每个 stat 在字典中被分配一个键，该值是该类别中每个团队的百分比数组。

…或者不是。我们得到一个错误。原来有一场比赛因为技术原因被取消了，因为没有第一滴血，所以这一栏是空白的。我们可以很容易地解决这个问题，首先把所有的空格都改成`np.nan`，然后用`dropna`去掉那些行。

我们得到了这张漂亮的桌子:

为了获得更多的背景信息，让我们将每个团队的总胜率相加，并按此排序:

现在我们得到:

第一男爵在 7 强中相当稳定。他们都在三场比赛之内，但我确实期望有一点或更大的差距。首先，龙，炮塔和血液看起来完全不相关(我们将在后面看到，使用熊猫`corr`的方法，这确实不是高度相关)。

黄金守护者有点像局外人——很多第一龙，仅次于团队液体。这可能有很多原因，例如龙的类型，或者一些团队喜欢早期游戏中的丛林者。

# 使用`corr`查找相关性

让我们来看看第一条龙，炮塔等和实际赢得游戏是否有关系。创建一个`do_correlation`函数:

这给了我们:

相关性从-1 到+1。-1 表示相反的关系。例如，如果第一滴血与结果的相关性为 1，这意味着一支球队赢得了他们得到第一滴血的每一场比赛。

不出所料，获得第一男爵与赢得比赛的相关性很高，0.76。第一滴血与第一条龙也有很高的相关性——也许团队获得第一滴血僵尸网络很多，然后过渡到龙？

我们将蓝色边定义为 0，红色边定义为 1。注意所有东西都和边负相关。这意味着一边上升，其他的都下降。换句话说，红色尺寸要差得多，至少对团队液体来说是这样。让我们看看这种趋势是否会延伸到其他球队。

给了我们:

第一男爵仍然是谁会赢的可靠指标。然而，第一条龙和第一个炮塔在很大程度上是不相关的——0.11 不是很重要。然而，第一血和第一炮塔之间有很强的联系——也许北美队倾向于玩机器人，经常得到第一血(这导致第一炮塔)？相比韩国最强的地区 LCK 怎么样？

第一炮塔和第一男爵都有较高的相关性。或许 LCK 更擅长推动优势，将目标转化为胜利？同样，第一滴血与结果没有明显的关系。蓝色的一面略受青睐。

# 结论和改进

虽然机器学习库是席卷数据科学社区的最新和最伟大的工具，但您可以使用像 pandas 这样更简单的库来得出一些可靠的结论。我计划写一篇后续文章，使用 scikit 训练一些模型来预测诸如第一滴血、谁赢了一场比赛等等。

即使我打算使用机器学习库建立一个预测模型，我通常会先引入熊猫并探索数据，以获得对我正在处理的东西和我想要训练的模型类型的良好直觉。

一些需要进一步探索的领域是生成 pandas 支持的图形(在引擎盖下使用 matplotlib ),并对多个赛季甚至多个赛季的单个球员进行一些分析。或许 TL 从 TSM 转来的时候主导的 bot lane 跟着 Doublelift？Pandas 是进行这种高层次分析的完美工具。

*原载于* [*拉克伦·米勒的博客*](https://lmiller1990.github.io/electic/) *。*