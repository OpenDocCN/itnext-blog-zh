<html>
<head>
<title>Front-end productivity boost: Cypress as your main development browser</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">前端生产力提升:Cypress作为您的主要开发浏览器</h1>
<blockquote>原文：<a href="https://itnext.io/front-end-productivity-boost-cypress-as-your-main-development-browser-f08721123498?source=collection_archive---------4-----------------------#2019-07-31">https://itnext.io/front-end-productivity-boost-cypress-as-your-main-development-browser-f08721123498?source=collection_archive---------4-----------------------#2019-07-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4488" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">生产力、生产力和生产力:您应该如何利用像Cypress这样的测试工具作为您的主要开发浏览器。在此处或在<a class="ae kl" href="https://dev.to/noriste/front-end-productivity-boost-cypress-as-your-main-development-browser-5cdk" rel="noopener ugc nofollow" target="_blank"> dev.to </a>上阅读。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/46fdbfa1b9b9b55fe66fdf6a1844acd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JwEybmXnes-ypNrySm8cAQ.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae kl" href="https://unsplash.com/@billjelen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">比尔·杰伦</a>在<a class="ae kl" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6af9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我正在GitHub上做一个大的<a class="ae kl" href="https://github.com/NoriSte/ui-testing-best-practices?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> UI测试最佳实践</a>项目，我分享这个帖子来传播它并有直接的反馈。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="5b12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你手动测试你的前端吗？如果你用一些E2E测试来测试它，你会在最后一步写测试吗？什么事？这篇文章送给你！🙌<br/>你是TDD开发者吗？不要读它，你失去了你的时间😉</p><p id="07b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cypress 因其E2E测试效力而闻名。很明显，它有一些限制，但是它显然是为了将E2E测试带到另一个水平而创建的。在这篇文章中，我想分享你如何使用<strong class="jp ir"> Cypress作为你的主要开发浏览器</strong>，而不仅仅是一个测试工具。</p><p id="b537" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开发人员已经习惯了尽可能地利用他们的测试工具。如果你没有应用严格的TDD方法，不要担心，这篇文章<strong class="jp ir">仅仅是关于生产力的</strong>。如果您因为“没有时间”而没有测试您的前端应用程序，我希望您能改变主意！</p><p id="3430" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们分析一下，作为前端开发人员，我们在开发evergreen <em class="lj">身份验证表单</em>时通常是如何工作的，例如:</p><ul class=""><li id="6137" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">我们对用户名输入字段进行编码</li><li id="2bcb" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">我们通过浏览器手动尝试</li><li id="f97a" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">我们最终会修复它</li><li id="651d" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">然后，我们对密码输入字段进行编码</li><li id="409f" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">我们通过浏览器手动尝试</li><li id="4e9d" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">然后，我们添加提交按钮</li><li id="ffe2" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">我们编写了AJAX请求管理代码</li></ul><p id="728c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，在这一点上，我们可能已经向输入字段添加了一些默认值，以避免每次按CTRL+S时手动填充它们……总之:</p><ul class=""><li id="48b4" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">我们通过浏览器尝试整个表单，检查AJAX调用是否已经完成，以及它是否向服务器发送了正确的有效负载</li><li id="c338" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">因为我们需要检查错误路径是否被正确管理，所以我们强制请求生成函数返回一个包含错误的静态响应(可能我们正在StackOverflow上搜索如何用Axios模拟错误的网络响应…)</li><li id="25ea" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">我们检查应用程序在错误情况下的行为是否符合预期</li><li id="64ce" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">我们降低了网速，以检查AJAX延迟如何影响用户体验</li><li id="9581" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">最后，我们重新检查一切，以确保最近的更改没有破坏已经测试过的流程</li></ul><p id="2412" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了这篇文章，我<strong class="jp ir">缩短了步骤</strong>,因为对于上面的每个步骤，你可能需要5到20个修改+表格填充等等。我们中最聪明的人使用一些Chrome DevTools片段来加速这个过程，在源代码中添加一些脚本，以便在所需的点直接呈现UI(如果视图的代码与应用程序的其余部分很好地解耦)。我们中的一些人添加了许多条件，以防止一些更改即使在网站上线时也有效…在代码库中添加了许多垃圾代码…</p><p id="42cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lj">如果你已经写好了</em> <strong class="jp ir"> <em class="lj">跳过下一章</em> </strong> <em class="lj">！</em></p><h1 id="73c6" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">测试工具的力量</h1><p id="f5ee" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">如果你不是测试人员，并且上面的描述符合你的工作方式…我有好消息告诉你:一个专门制作的测试工具，比如<a class="ae kl" href="https://www.cypress.io" rel="noopener ugc nofollow" target="_blank"> Cypress </a>(或者<a class="ae kl" href="https://devexpress.github.io/testcafe/" rel="noopener ugc nofollow" target="_blank"> TestCafé </a>，但是请不要考虑通用的浏览器自动化工具，比如Selenium或者Puppeteer)简化了每一个工作步骤！而不会弄脏您的源代码！因为</p><ul class=""><li id="ac1d" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">您不需要硬编码输入字段默认值，自动化浏览器会以极快的速度与页面进行交互。看看一些地雷的测试就明白我说的<em class="lj">燃烧</em>是什么意思了</li></ul><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nb nc l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">自动化浏览器的速度</figcaption></figure><ul class=""><li id="d43a" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">您不需要模拟奇怪的网络行为，因为Cypress允许您从浏览器的角度模拟它们，而不是从代码的角度。您的前端应用程序执行一个标准的AJAX调用，忽略Cypress正在响应您指定的内容(您可以指定响应、网络状态、网络延迟等。)</li><li id="2ce1" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">Cypress控制一个Chrome浏览器，你可以利用你已经习惯的开发工具</li><li id="a0db" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">Cypress创建了一个专门的持久化的Chrome用户，所以你可以安装你最喜欢的Chrome扩展(比如React和Redux DevTools)</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nd"><img src="../Images/81c49b5fac7c9f3c83caf215a8cfc473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXfdnO3AhG4Wx2_dy0Z58A.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">使用Cypress的React和Redux开发工具(来自<a class="ae kl" href="https://github.com/NoriSte/cypress-react-devtools" rel="noopener ugc nofollow" target="_blank">Cypress-React-DevTools</a>repo)</figcaption></figure><ul class=""><li id="0e53" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">您可以添加许多断言来获得即时的绿色/红色反馈。断言是一种基于英语的安全措施，例如:“<em class="lj">我希望表单将用户名和密码作为AJAX请求</em>的有效载荷传递</li><li id="2ca8" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">您不需要手动地来回测试最新实现的流和以前的流:一旦您用Cypress测试复制了一个流，它就在这里了。如果您更改代码时意外中断了之前的流程，Cypress会警告您！</li><li id="f9b2" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">如果你听说E2E测试很慢，读一下什么是UI集成测试</li></ul><h1 id="722d" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">你已经E2E测试你的前端了吗？</h1><p id="a7eb" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">荣誉👍只有一个问题:你是否只在确信一切正常时才编写测试？这才是重点！当你写一个测试时，你用你的测试工具来重复你手工做的事情！完全相同的动作:</p><ul class=""><li id="5f62" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">填写表格</li><li id="f4bb" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">点击按钮</li><li id="dd0b" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">断言某些元素存在或可见</li><li id="6503" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">检查<a class="ae kl" href="https://github.com/NoriSte/ui-testing-best-practices/blob/master/sections/server-communication-testing/test-request-and-response-payload.md" rel="noopener ugc nofollow" target="_blank"> AJAX请求负载</a></li></ul><p id="669d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你为什么这么做？因为当你手动测试时，你有更多的自由！因为您可以选择想要测试的流，因为您可以利用浏览器扩展和React/Vue.js等。DevTools，因为你可以访问Chrome DevTools等。</p><h1 id="916e" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">我如何利用Cypress作为我的主要开发浏览器</h1><p id="0012" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">看看我为<a class="ae kl" href="https://www.agilemovement.it/workingsoftware/" rel="noopener ugc nofollow" target="_blank">工作软件会议</a>准备的<a class="ae kl" href="https://github.com/NoriSte/working-software-mastering-ui-testing" rel="noopener ugc nofollow" target="_blank">库</a>。第四次提交(在所有前端相关提交之前)如下:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ne"><img src="../Images/ecd91a1c1ec41d1730d8d31b60728025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MXS3HOjx89fAkTusP1kyiw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">由外向内验收E2E测试</figcaption></figure><p id="4cdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，在编写前端“应用程序”(这是一个演示，一个单一组件的应用程序)时，我从未与前端进行过手动交互。我只在开发完成后才手动测试它。怎么会？</p><ul class=""><li id="6452" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">首先:打开Cypress并把它放在你的第二台显示器上</li><li id="21d1" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">用Cypress打开你的Chrome，检查你需要的开发工具是否已经安装</li><li id="e394" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">为Cypress安装<a class="ae kl" href="https://github.com/bahmutov/cypress-skip-and-only-ui" rel="noopener ugc nofollow" target="_blank"> skip-and-only-ui </a>插件，它帮助你运行一个单独的测试，跳过一些测试，等等。直接从Cypress UI</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/53f9b2fe3816fa7c2d38c75c4bd2c602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*OnyWDM62qduSU2vNWcBlDg.gif"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">运行中的<a class="ae kl" href="https://github.com/bahmutov/cypress-skip-and-only-ui" rel="noopener ugc nofollow" target="_blank"> cypress-skip-and-only </a>插件</figcaption></figure><ul class=""><li id="bc8d" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">为Cypress安装<a class="ae kl" href="https://github.com/bahmutov/cypress-watch-and-reload" rel="noopener ugc nofollow" target="_blank">观察并重新加载</a>插件，你可以配置它在源文件的每个CTRL+S上重新启动Cypress测试</li><li id="98e0" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">编写Cypress测试中的第一个交互:说到身份验证表单，用户名输入填充。如果你真的能写出完整的测试，再次表扬你！</li><li id="620e" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">开始写你前端的源代码。观察和重新加载插件重新运行Cypress测试，而不需要您离开代码编辑器</li></ul><p id="fa4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请，停在最后一点:你按CTRL+S和Cypress，没有任何手动交互！而且比你还快还快！想想它为你避免了多少工作量！让我们继续:</p><ul class=""><li id="44fa" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">一旦一切正常，就在Cypress测试中编写下一个交互，并编写您的应用程序以使测试正常工作</li><li id="de3f" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">一旦你需要检查一个不同的流(AJAX 500响应，401响应，403响应，无网络等。)，复制测试并利用Cypress APIs来模拟它(就像<em class="lj"> cy.route </em></li><li id="0575" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">重复这个流程，直到你完成</li></ul><p id="5672" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">干得好的😊请分享您的反馈，以帮助其他开发人员实现生产力的转变💪</p><h1 id="1d37" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">总结</h1><p id="c66e" class="pw-post-body-paragraph jn jo iq jp b jq mw js jt ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk ij bi translated">利用Cypress(和上面引用的插件)作为您的主要开发浏览器的优势是:</p><ul class=""><li id="26c8" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">您将缓慢的手动测试减少到最低限度，节省了大量时间</li><li id="9796" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">最后，你的应用程序会被自动测试，并且这些测试会永远保留</li><li id="05c9" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">在您对流程进行编码之后，您完全避免了编写测试的“烦人”过程</li><li id="ddf8" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">避免在源代码中添加临时状态和假返回</li></ul><p id="5de3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多相关文章:<br/> - <a class="ae kl" href="https://medium.com/@NoriSte/component-vs-ui-integration-vs-e2e-tests-f02b575339dc" rel="noopener">组件vs (UI)集成vs E2E测试</a>-<br/>-<a class="ae kl" href="https://medium.com/@NoriSte/await-do-not-sleep-your-e2e-tests-df67e051b409" rel="noopener">等待，不要让你的E2E测试沉睡</a></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="f1fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好👋我是Stefano Magni，我是一名热情的JavaScript开发人员和T2赛普拉斯大使。<br/>我喜欢创造高质量的产品，测试和自动化一切，学习和分享我的知识，帮助别人，在会议上发言和面对新的挑战。<br/>我在意大利比特币初创公司<a class="ae kl" href="https://conio.com/it/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Conio </a>工作。<br/>你可以在<a class="ae kl" href="https://twitter.com/NoriSte?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae kl" href="https://github.com/NoriSte?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> GitHub </a>、<a class="ae kl" href="https://www.linkedin.com/in/noriste/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上找到我。你可以找到我最近所有的文章/演讲等等。这里。</p></div></div>    
</body>
</html>