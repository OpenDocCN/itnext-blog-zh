<html>
<head>
<title>Jenkins: SAML Authentication with Okta and users groups</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jenkins:Okta和用户组的SAML认证</h1>
<blockquote>原文：<a href="https://itnext.io/jenkins-saml-authentication-via-okta-and-users-groups-476a5763257c?source=collection_archive---------0-----------------------#2019-10-11">https://itnext.io/jenkins-saml-authentication-via-okta-and-users-groups-476a5763257c?source=collection_archive---------0-----------------------#2019-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/d8a9322a63e8dab238f1037c4ad83665.png" data-original-src="https://miro.medium.com/v2/resize:fit:260/format:webp/0*ymQlacp6l4YSKjl5.png"/></div></figure><p id="9f90" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> SAML </strong> — <em class="ks">安全断言标记语言</em>用于联合认证；当一个我们需要访问的服务(一个<em class="ks">服务提供者</em>)请求另一个服务(一个<em class="ks">身份提供者</em>)执行用户认证时。</p><p id="69c8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">查看文档<a class="ae kt" href="https://www.okta.com/integrate/documentation/saml/" rel="noopener ugc nofollow" target="_blank">此处&gt; &gt; &gt; </a>。</p><ul class=""><li id="993d" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><em class="ks">服务提供商</em> ( <strong class="jw ir"> SP </strong>):是一个需要认证的系统，在我们的例子中是Jenkins</li><li id="2159" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><em class="ks">身份提供者(</em> <strong class="jw ir"> IDP </strong> <em class="ks"> ) </em>:是一个存储用户的系统，它将准确地执行身份验证步骤，在我们的例子中是Okta</li></ul><p id="a56d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">他们在认证期间的通信和步骤可以在下一个方案中显示:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi li"><img src="../Images/0e2784bc063398b30f8d71def8040322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oj4Av4mSLPDmySQ7.png"/></div></div></figure><p id="c128" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这里:</p><ul class=""><li id="aba6" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><em class="ks"> SAML请求</em>:或认证请求，由SP创建，用于请求用户的认证</li><li id="fb11" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><em class="ks"> SAML响应</em>:将由IDP创建，包含关于已通过身份验证的用户的数据，还可能包含一些附加信息，如用户组等</li></ul><p id="4e37" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">此外，请记住，SAML身份验证有两种类型:</p><ul class=""><li id="3d9f" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><em class="ks">服务提供者发起的(SP发起的)</em>:当用户尝试登录Jenkins实例时，服务(在本例中为Jenkins)向IDP提供者执行初始化</li><li id="f73f" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><em class="ks">身份提供商发起(IDP发起)</em>:反之亦然，当Okta的用户点击按钮登录Jenkins时，IDP将向Jenkins (SP)发起请求，以验证该用户</li></ul><p id="0797" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这篇文章主要讲的是<em class="ks">服务提供者发起的，</em>但是<em class="ks">身份提供者发起的</em>也可以。</p><p id="5c7a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">此外，请记住，SP和IDP永远不会直接相互对话，用户的浏览器将充当它们之间的“代理”。</p><h2 id="3c71" class="lr ls iq bd lt lu lv dn lw lx ly dp lz kf ma mb mc kj md me mf kn mg mh mi mj bi translated">服务提供者角色</h2><p id="5b96" class="pw-post-body-paragraph ju jv iq jw b jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ij bi translated">IDP为SP生成SAML响应，然后SP必须检查该响应是否来自有效的IDP，然后解析该响应以获取必要的数据—用户名、组和其他属性。</p><p id="ac39" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为此，SP需要从IDP获取下一个信息:</p><ul class=""><li id="fc2d" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated">国内流离失所者的公共证书</li><li id="a175" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><em class="ks"> ACS端点</em> ( <em class="ks">断言消费者服务URL </em>)或“SP登录URL”——SP传递给IDP以接收SAML回复的端点URL</li><li id="7975" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><em class="ks"> IDP登录URL</em>—SP将向其发送SAML请求的IDP端点</li></ul><h2 id="aaf0" class="lr ls iq bd lt lu lv dn lw lx ly dp lz kf ma mb mc kj md me mf kn mg mh mi mj bi translated">Okta的Jenkins SAML</h2><p id="1c41" class="pw-post-body-paragraph ju jv iq jw b jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ij bi translated">将SAML集成到Jenkins的主要目标是:</p><ul class=""><li id="3093" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated">Okta的商店用户</li><li id="184b" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">Okta的用户被分组</li><li id="6389" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">Jenkins将使用基于角色的策略插件，该插件将访问角色分配给不同的组</li></ul><p id="0b4d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在Okta Jenkins中，SAML可以通过两种方式进行配置:</p><ol class=""><li id="4edf" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr mp la lb lc bi translated">通过使用本地Okta的应用程序——配置工作较少，但无法将用户组传递给Jenkins，这将在本文的<a class="ae kt" href="https://rtfm.co.ua/en/jenkins-saml-authentication-via-okta-and-users-groups/#Okta_Community_Created_Jenkins_SAML_application" rel="noopener ugc nofollow" target="_blank"> Okta社区创建的Jenkins SAML应用程序</a>部分讨论</li><li id="4fb3" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr mp la lb lc bi translated">或者在Okta中创建自己的基于SAML的应用程序，该应用程序将具有带有用户组字段的自定义属性，这将在本帖的<a class="ae kt" href="https://rtfm.co.ua/en/jenkins-saml-authentication-via-okta-and-users-groups/#Okta_and_own_application_for_Jenkins_SAML" rel="noopener ugc nofollow" target="_blank"> Okta和我们的Jenkins SAML应用程序</a>部分讨论</li></ol><p id="aedf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">采用第一种方式，你将无法使用<a class="ae kt" href="https://wiki.jenkins.io/display/JENKINS/Role+Strategy+Plugin" rel="noopener ugc nofollow" target="_blank">基于角色的策略</a>插件，但仍然可以使用<a class="ae kt" href="https://wiki.jenkins.io/display/JENKINS/Matrix-based+security" rel="noopener ugc nofollow" target="_blank">基于矩阵的安全</a>或<a class="ae kt" href="https://wiki.jenkins.io/display/JENKINS/Matrix+Authorization+Strategy+Plugin" rel="noopener ugc nofollow" target="_blank">矩阵授权策略</a>插件:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/711a293f1fdab096b8d67d91282defd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/0*6gF2CW8VB4gOo8fR.png"/></div></figure><p id="207d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">基于角色的插件配置将在接下来的部分中描述，现在在这篇文章中，我们将看到如何以上述两种方式为Jenkins配置Okta和SAML。</p><h2 id="ef3a" class="lr ls iq bd lt lu lv dn lw lx ly dp lz kf ma mb mc kj md me mf kn mg mh mi mj bi translated">Okta本地Jenkins SAML应用程序</h2><p id="3676" class="pw-post-body-paragraph ju jv iq jw b jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ij bi translated">Okta构型</p><p id="0bbf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">进入Okta &gt; <em class="ks">添加app，</em>找到一个Jenkins SAML插件:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mr"><img src="../Images/bbf70ed1105dc494ffaec7e9eef255b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MxyNBG3LhpE6q4L8.png"/></div></div></figure><p id="ee9d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">设置Jenkins的URL:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi ms"><img src="../Images/bf0dcd52d10feb4e15e2e74add925bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0Xhc6yYp0FutqE2d.png"/></div></div></figure><p id="3449" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">切换到标签上的<em class="ks">符号:</em></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mt"><img src="../Images/b74685a49c65e8e5a9c8ed950db7f110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ISVv3jw-SG8b2Cwn.png"/></div></div></figure><p id="312f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">点击<em class="ks">查看设置说明</em> — Okta已经生成了所有数据，供我们的SP (Jenkins)使用:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mu"><img src="../Images/beff711cffaebb982a39bad60f72ded1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lNi2Z6x7qAinFsff.png"/></div></div></figure><p id="a0e9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">转到<em class="ks">分配</em>选项卡，将Jenkins SAML应用程序添加到所需的Okta用户:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mv"><img src="../Images/3a92c7839b296b335bf6f50deda06c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*900O5im4vDMT1PBm.png"/></div></div></figure><p id="278a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">导航到你的詹金斯。</p><p id="0a2c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Jenkins中的SAML配置</p><p id="2bb3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">安装<a class="ae kt" href="https://wiki.jenkins.io/display/JENKINS/SAML+Plugin" rel="noopener ugc nofollow" target="_blank"> SAML插件</a>:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mw"><img src="../Images/fabbf9c77bc8c3fd46292fef95ac9fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PCJym91x9QpnMCMA.png"/></div></div></figure><p id="bbb6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">进入<em class="ks">配置全球安全</em>，将你的认证领域从<em class="ks"> Jenkins自己的用户数据库</em>切换到<em class="ks"> SAML </em>:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mx"><img src="../Images/d6bfe5ece6266f87a5c496e4a3389aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p7WtF8aAP6O29Lqy.png"/></div></div></figure><p id="0991" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">返回Okta和元数据页面，复制<em class="ks"> IDP元数据</em>内容:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi my"><img src="../Images/39b0ffee47f10b410eec7092a4a3b7da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ybY6f_r_rQDLEjez.png"/></div></div></figure><p id="ce00" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">粘贴到Jenkins的SAML设置:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mz"><img src="../Images/585693a34efa40adc3302cac80bb790f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AAEV4V0jLGMWuc6a.png"/></div></div></figure><p id="5e0b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">返回您的Okta，复制到<em class="ks">身份提供者元数据</em>的链接:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/9d1d5c9122d9be966b836969acc8f7fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/0*3Gv26Pqvq0QYT2KH.png"/></div></figure><p id="359c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在Jenkins中将它设置为<em class="ks"> IDP元数据URL </em>字段:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nb"><img src="../Images/78e029bd13b641fb3ba233a05736e2b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cyb3P3l-lNVrpH-x.png"/></div></div></figure><p id="c37d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ks">显示名称属性</em>和<em class="ks">组属性</em>保持不变。</p><p id="389e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在检查一下:打开你的詹金斯网址——你必须被重定向到俄克拉荷马州:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nc"><img src="../Images/0209d34d5af008ec7b2ed4fd0f900555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AXfR3WbTJoFhh27D.png"/></div></div></figure><p id="d9e4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">登录，一切都在这里完成。</p><h2 id="d7da" class="lr ls iq bd lt lu lv dn lw lx ly dp lz kf ma mb mc kj md me mf kn mg mh mi mj bi translated">Okta和我们对詹金斯的申请</h2><p id="cb2c" class="pw-post-body-paragraph ju jv iq jw b jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ij bi translated">现在，让我们在Okta中添加一个新的应用程序，它将能够将一个用户组传递给Jenkins，例如一个<em class="ks"> DevOps </em>组:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nd"><img src="../Images/444e13e829539b7d8e72568944ccb253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xVnYYJNHjj25QovG.png"/></div></div></figure><p id="cbdb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Okta构型</p><p id="91c5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建新应用程序:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi ne"><img src="../Images/5abf20b8b01f67cdd35c929200a62782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FG1U1zLCzUvrGk5k.png"/></div></div></figure><p id="60ba" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">设置其名称、图标:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nf"><img src="../Images/932bf487ac3c7101f345b518f09f8104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i0iK_iLFofjOX4Km.png"/></div></div></figure><p id="3dba" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，在<em class="ks">单点登录网址</em> и <em class="ks">观众URI (SP实体ID) </em>设置<em class="ks"> ACS端点</em>—<a class="ae kt" href="http://dev.ci.example.com/securityRealm/finishLogin:" rel="noopener ugc nofollow" target="_blank"><em class="ks">http://dev.ci.example.com/securityRealm/finishLogin</em>:</a></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi ng"><img src="../Images/fc29a32320f48bde57eafb0768131f12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Pnszy7mINts1Mn7T.png"/></div></div></figure><p id="8b15" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要将用户组从Okta传递到Jenkins，在<em class="ks">组属性语句(可选)</em>中添加一个新字段:</p><ul class=""><li id="554a" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><code class="fe nh ni nj nk b">Name</code> : <em class="ks">组</em></li><li id="2fee" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe nh ni nj nk b">Name format</code> : <em class="ks">基本</em></li><li id="388c" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe nh ni nj nk b">Filter</code> - <em class="ks">匹配正则表达式</em>和值为。*适用于Okta的所有团体</li></ul><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi ng"><img src="../Images/279685332687d4798eb5f64040c31e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VUaNvq8-BgZ6qYRD.png"/></div></div></figure><p id="66cb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在下一页，设置<em class="ks">我是Okta客户添加内部app </em>，<em class="ks">完成</em>。</p><p id="9571" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">不要忘记<em class="ks">任务</em>。</p><p id="2cad" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，与之前一样，点击<em class="ks">查看设置说明</em>，复制IDP <em class="ks">元数据</em>并更新Jenkins中的<em class="ks">配置全局安全性</em>设置。</p><p id="b4a1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">复制到<em class="ks">身份提供者元数据</em>的链接:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi ng"><img src="../Images/bbcc10ac11bd34d4811b0dd00f6e9e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7fZ1LZwCFCUDOtdn.png"/></div></div></figure><p id="0267" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Jenkins中的SAML配置</p><p id="045c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将此链接设置为Jenkins中归档的<em class="ks"> IDP元数据URL </em>:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nl"><img src="../Images/800c7da6aef5a1f295d6c1b0b7fe8dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5QoQj6FMKN-TG3JP.png"/></div></div></figure><p id="8fee" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在Jenkins中，将<em class="ks">组属性的'</em> s值从<a class="ae kt" href="http://schemas.xmlsoap.org/claims/Group" rel="noopener ugc nofollow" target="_blank"><em class="ks">【http://schemas.xmlsoap.org/claims/Group】</em></a>更改为仅“<em class="ks">组”</em>:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/4e17b0a1add82bf66a45a8b077312860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/0*V2bQVFJiVqu9uNko.png"/></div></figure><p id="1ddc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">实际上，那都是乡亲。</p><h2 id="24ab" class="lr ls iq bd lt lu lv dn lw lx ly dp lz kf ma mb mc kj md me mf kn mg mh mi mj bi translated">基于角色的安全性</h2><p id="671b" class="pw-post-body-paragraph ju jv iq jw b jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ij bi translated">往前一点(将添加另一个关于基于角色的插件配置的帖子)Jenkins中基于角色的安全性和组的一个例子。</p><p id="77c0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Okta及其群组中的用户:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nd"><img src="../Images/235f93ab0d7c2fa87d30031867d4d1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hPMUhLKDZF3QZK4x.png"/></div></div></figure><p id="a59f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">詹金斯的角色:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nn"><img src="../Images/f4d7e7daeec270de58fd0ae2b07d7520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yJNZesVh3m4xhUoR.png"/></div></div></figure><p id="794b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以及分配有<em class="ks">测试</em>的组<em class="ks"> DevOps </em>:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi no"><img src="../Images/8e5098d7775d19e9fafdf042297d8855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_yEMgLKHYJGfGRRl.png"/></div></div></figure><p id="2bc2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">完成了。</p><h2 id="211a" class="lr ls iq bd lt lu lv dn lw lx ly dp lz kf ma mb mc kj md me mf kn mg mh mi mj bi translated">有用的链接</h2><ul class=""><li id="2bc0" class="ku kv iq jw b jx mk kb ml kf np kj nq kn nr kr kz la lb lc bi translated"><a class="ae kt" href="https://support.cloudbees.com/hc/en-us/articles/115000105752-How-do-I-setup-OKTA-as-Identity-Provider-in-Jenkins-" rel="noopener ugc nofollow" target="_blank">如何在Jenkins中将OKTA设置为身份提供者？</a></li><li id="497d" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae kt" href="https://auth0.com/blog/how-saml-authentication-works/" rel="noopener ugc nofollow" target="_blank">SAML认证如何工作</a></li></ul></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="3ded" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ks">最初发布于</em> <a class="ae kt" href="https://rtfm.co.ua/en/jenkins-saml-authentication-via-okta-and-users-groups/" rel="noopener ugc nofollow" target="_blank"> <em class="ks"> RTFM: Linux、DevOps和系统管理</em> </a> <em class="ks">。</em></p></div></div>    
</body>
</html>