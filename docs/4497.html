<html>
<head>
<title>Understanding Basic Kubernetes Concepts I — An Introduction To Pods, Labels, and Replicas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Kubernetes的基本概念I——pod、标签和复制品介绍</h1>
<blockquote>原文：<a href="https://itnext.io/understanding-basic-kubernetes-concepts-i-an-introduction-to-pods-labels-and-replicas-9682883c0362?source=collection_archive---------3-----------------------#2020-07-13">https://itnext.io/understanding-basic-kubernetes-concepts-i-an-introduction-to-pods-labels-and-replicas-9682883c0362?source=collection_archive---------3-----------------------#2020-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><a href="http://www.giantswarm.io"><div class="gh gi jn"><img src="../Images/da404c753e519566455b413f3d9b5096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ur2BncCiF79GcwvR5_X9BA.jpeg"/></div></a></figure><p id="d0c9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这篇文章是一系列关于Kubernetes基本概念的博客文章中的第一篇。在第二篇 <a class="ae kt" href="https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-using-deployments-manage-services-declaratively/" rel="noopener ugc nofollow" target="_blank"> <em class="ks">中我们谈到部署</em> </a> <em class="ks">。第三篇文章</em> <a class="ae kt" href="https://blog.giantswarm.io/basic-kubernetes-concepts-iii-services-give-abstraction/" rel="noopener ugc nofollow" target="_blank"> <em class="ks">解释了服务概念</em> </a> <em class="ks">，在第四篇文章中，我们看一下</em> <a class="ae kt" href="https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-iv-secrets-and-configmaps/" rel="noopener ugc nofollow" target="_blank"> <em class="ks">秘密和配置图</em> </a> <em class="ks">。在第五篇也是最后一篇文章中，我们讨论了</em> <a class="ae kt" href="https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-v-daemon-sets-and-jobs/" rel="noopener ugc nofollow" target="_blank"> <em class="ks">守护进程集和</em> </a> <em class="ks">。</em></p><p id="7478" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">有很多介绍和教程可以帮助你开始使用Kubernetes。然而，它们中的大部分都集中在展示命令是如何工作的，以及如何让东西运行起来。不要误解我的意思，尝试这些命令是很重要的，但是要真正有效地使用Kubernetes，你需要更深入地理解这些概念和它们的功能，这样你才能真正按照它们的预期方式使用它们。这对于普通的Docker来说尤其困难，因为Docker的概念不能直接翻译成Kubernetes——至少如果你想正确地使用Kubernetes的话。</p><p id="f7c5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这篇博文中，我们将看看最基本的概念:pod、标签&amp;选择器和副本集。我不会包括任何实际的使用说明，而是试图只专注于解释概念、它们的功能以及它们的用途。这些只是最基本的概念，你还需要更多的概念来全面了解Kubernetes，所以请放心，我将在接下来的博客文章中探索更多的概念。</p><h1 id="f16d" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">分离舱</h1><p id="d5a8" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">" Pods是可以在Kubernetes中创建和管理的最小可部署计算单元."说<a class="ae kt" href="http://kubernetes.io/docs/user-guide/pods/" rel="noopener ugc nofollow" target="_blank">官方Kubernetes docs for pod</a>。这有时会导致混淆，豆荚是单一的容器，因为这是人们习惯于从Docker。虽然pod可以包含一个容器，但是它们不限于一个，并且可以根据需要包含多个容器。</p><p id="387f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使这些容器成为一个pod的原因是，pod中的所有容器运行起来就像是在容器出现之前的单一主机上运行一样。因此，它们共享一组Linux名称空间，而不是彼此孤立地运行。这导致它们共享一个IP地址和端口空间，并且能够通过<code class="fe lx ly lz ma b">localhost</code>找到彼此或者通过IPC名称空间进行通信。此外，pod中的所有容器都可以访问共享卷，也就是说，如果需要，它们可以在相同的卷上安装和工作。</p><p id="7e7a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了获得所有这些功能，吊舱是一个单一的可展开单元。pod的每个实例(及其所有容器)总是一起计划。</p><p id="5401" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于典型的Docker用户来说，这是一个非常新的概念。虽然即使没有Kubernetes，巨型Swarm用户也能够使用pods 很长一段时间，但只有少数人真正这样做。对于一些人来说，这听起来像是从孤立的“每个容器一个进程”回到“一起部署整个灯堆栈”。然而，这并不是pod的预期用例。pod概念的主要动机是支持应用程序容器旁边的协同定位、共同管理的助手容器。这些包括:日志或监控代理、备份工具、数据更改观察器、事件发布器、代理等。如果你不确定一开始用pod做什么，你现在可以用它们来处理单个容器，就像你在Docker中习惯的那样。</p><p id="b1ee" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">豆荚是Kubernetes中最基本的概念。就其本身而言，它是短暂的，一旦死亡就不会被重新安排到新的节点。如果我们想让一个pod的一个或多个实例存活，我们需要另一个概念:副本集。但在此之前，我们需要了解什么是标签和选择器。</p><h1 id="0305" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">标签和选择器</h1><p id="4c4f" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">标签是可以附加到对象上的键/值对，比如pod，也可以附加到Kubernetes中的任何其他对象上，甚至是节点上。它们应该用于指定对用户有意义和相关的对象的识别属性。您可以在创建时将标签附着到对象，并在以后修改它们或添加新标签。</p><p id="2e9e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">标签可用于组织和选择对象子集。例如，它们通常用于识别版本(测试版、稳定版)、环境(开发、生产版)或层(前端、后端)，但也可以灵活地支持许多其他情况。它们有助于对现代部署管道的多维度进行排序。</p><p id="9d01" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">标签是Kubernetes的一个关键概念，因为它们与选择器一起使用来管理对象或对象组。这样做实际上不需要关于对象的任何特定信息，甚至不需要存在的对象的数量。</p><p id="abc9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">尤其是在使用标签选择器时，应该记住对象的数量是未知的这一事实。一般来说，您应该预料到许多对象都带有相同的标签。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><a href="https://www.giantswarm.io/guide-cloud-native-stack?utm_campaign=Blog%20CTA%20Conversion&amp;utm_source=Cloud%20native%20stack%20guide_Blog&amp;utm_medium=Blog%20CTA&amp;utm_term=cloud%20native%20stack%20guide"><div class="gh gi mb"><img src="../Images/05f70d0f3eb10ae5435a149e65ea0454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W-I11QWRKBCsdd_0.jpg"/></div></a></figure><p id="e624" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">目前，Kubernetes中有两种类型的选择器:基于等式的和基于集合的。前者使用键值对基于基本相等(或不相等)进行过滤。后者功能更强大，允许根据一组值过滤关键字。</p><p id="c170" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用标签选择器，客户或用户可以识别并随后管理一组对象。这是Kubernetes的核心分组原语，在很多地方使用。使用它的一个例子是处理副本集。</p><h1 id="d13d" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">副本集(和复制控制器)</h1><p id="533a" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">对于以前读过一些Kubernetes的人来说，副本集是下一代复制控制器。目前，主要的区别是副本集支持更高级的基于集合的选择器，因此比复制控制器更灵活。然而，以下解释的要点对两者都适用。</p><p id="85a2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如上所述，pod本身是短暂的，如果它运行的节点关闭，它不会被重新调度。这就是副本集发挥作用的地方，它确保特定数量的pod实例(或<em class="ks">副本</em>)在任何给定的时间都在运行。因此，如果您想让您的pod保持活动状态，您需要确保您有一个相应的副本集，为该pod指定至少一个副本。然后，副本集负责为您(重新)调度实例。</p><p id="9ca8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如上所述，副本集确保特定数量的副本正在运行。通过修改集合定义中的副本数量，您可以放大和缩小窗格。</p><p id="237e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">副本集不仅可以管理单个pod，还可以管理基于公共标签选择的一组不同的pod。这使得副本集能够例如缩放一起构成应用前端的所有单元，而不必为前端中的每个单元具有相同的副本集。</p><p id="2ae8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您可以将pod的定义直接包含在副本集的定义中，这样就可以一起管理它们。然而，有一个更高层次的概念叫做<em class="ks">部署</em>，它管理副本集。因此，通常不需要直接创建或操作副本集对象。了解这个概念仍然很重要，因为如果没有这个概念，你将无法理解Kubernetes将如何帮助你运行和管理你的应用程序。我将在后续的博客文章中解释部署及其带来的许多特性，现在可以说它们将为您管理您的副本集。</p><h1 id="0826" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">进一步阅读</h1><p id="7943" class="pw-post-body-paragraph ju jv iq jw b jx ls jz ka kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr ij bi translated">现在您已经了解了一些基本概念，您可以在Kubernetes官方文档中阅读更多关于它们及其用法的内容:</p><p id="41af" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">试着和它们一起玩，然后可能会转移到一个更高级的例子上，在T2当地环境下进行试验。请继续关注这篇解释部署和更多Kubernetes概念的博文的后续文章。如需反馈和请求，请联系<a class="ae kt" href="https://twitter.com/puja108" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="21e0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">由<a class="ae kt" href="https://twitter.com/puja108" rel="noopener ugc nofollow" target="_blank"> Puja Abbassi </a> : <strong class="jw ir"> </strong>开发者倡导者@ <a class="ae kt" href="https://twitter.com/giantswarm" rel="noopener ugc nofollow" target="_blank">巨型虫群</a></p></div></div>    
</body>
</html>