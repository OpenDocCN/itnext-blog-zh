<html>
<head>
<title>The Ultimate Guide to Building Your Personal K3S Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建您个人K3S集群的终极指南</h1>
<blockquote>原文：<a href="https://itnext.io/the-ultimate-guide-to-building-your-personal-k3s-cluster-bf2643f31dd3?source=collection_archive---------0-----------------------#2020-11-14">https://itnext.io/the-ultimate-guide-to-building-your-personal-k3s-cluster-bf2643f31dd3?source=collection_archive---------0-----------------------#2020-11-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/00315f0f668cbec7f6b1901879202e51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xb7XVWvwhkpccXpY"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kc" href="https://unsplash.com/@scienceinhd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">科学高清</a>拍摄的照片</figcaption></figure><p id="cd95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有很多原因可以让你拥有自己的Kubernetes集群。就我个人而言，我喜欢构建自己的工具，并更好地了解幕后发生的事情，但你可能出于不同的原因想要尝试Kubernetes，但由于使用AWS、GCP、Azure、DigitalOcean等提供的Kubernetes服务的高昂成本而受到阻碍。</p><p id="7d79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://k3s.io/" rel="noopener ugc nofollow" target="_blank"> K3s </a>是由<a class="ae kc" href="https://rancher.com/" rel="noopener ugc nofollow" target="_blank"> Rancher Labs </a>开发的一个轻量级Kubernetes发行版。基本上，这是一个完整的Kubernetes发行版，但他们将所有进程合并到一个二进制文件中，为ARM添加了交叉编译，删除了许多您通常不使用的额外功能，并捆绑了一些额外的用户空间工具。</p><p id="f35a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我将向您展示如何设置一个完整的k3s集群，它与上游Kubernetes完全兼容，并增加了在虚拟机上简单部署的功能。阅读完本教程后，您可以将任何Kubernetes应用程序部署到您的集群上，并利用通常只能在托管Kubernetes服务中找到的自动存储供应和软件负载平衡器。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="690b" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">设置您的虚拟机(VM)</h1><p id="9516" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">首先，您需要设置您的虚拟机。如果你已经有一个虚拟机，确保你有任何重要的数据备份，以防万一。如果你想创建一个新的虚拟机，有很多选择。我建议您看一下不同的云选项并比较它们的价格，但是一般来说，您会希望至少有4GB的RAM才能在上面运行Kubernetes集群(但是，1GB应该适用于无状态部署，不需要存储驱动程序，存储驱动程序的最低要求是2GB RAM)。</p><p id="c9c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你现在不想看太多，这里有一个100美元的链接，可以试用vultr ，他们的好处是他们在世界各地都有数据中心，性价比很高。如果你住在欧洲，或者到欧洲的延迟对你来说还可以，你可以试试<a class="ae kc" href="https://hetzner.cloud/?ref=sxI1XJxyltWU" rel="noopener ugc nofollow" target="_blank"> Hetzner </a>，它们真的很便宜(我用它们的时间不长，所以我不能谈论它们的性能或可用性)。</p><p id="c3c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在您选择了您的云提供商和您要使用的虚拟机规模之后，我们开始创建服务器。这通常很简单，创建一个新的实例，选择离你最近的数据中心，选择虚拟机大小(我建议使用4GB的内存，但2GB也可以尝试)，选择“Ubuntu 18.04”或“Ubuntu 20.04”作为操作系统，添加SSH密钥，最后，单击deploy。</p><p id="776e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虚拟机启动后，使用ssh登录并更改其主机名:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="e877" class="mu lj iq mq b gy mv mw l mx my">sudo hostnamectl set-hostname k3smaster<br/>sudo reboot</span></pre><p id="c2bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，如果您计划创建一个包含多个虚拟机的集群，每个虚拟机都应该有一个唯一的主机名。确保您更改了每个虚拟机的主机名。</p><p id="342f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保如果你正在为你的虚拟机使用防火墙，你打开你将要使用的端口，TCP端口<strong class="kf ir"> 6443 </strong>和<strong class="kf ir"> 10250 </strong>，UDP端口<strong class="kf ir"> 8472 </strong>用于来自虚拟机外部的k3s交互。</p><h1 id="60f8" class="li lj iq bd lk ll mz ln lo lp na lr ls lt nb lv lw lx nc lz ma mb nd md me mf bi translated">在客户端安装工具</h1><p id="4888" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">如果您计划使用Kubernetes集群，您需要一些额外的工具，比如kubectl，来帮助您与集群进行通信。这些工具既可以安装在主节点上，也可以安装在您的笔记本电脑上，看哪个更方便。</p><p id="7b25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了安装很多这样的工具，我将使用<a class="ae kc" href="https://github.com/alexellis/arkade" rel="noopener ugc nofollow" target="_blank"> Arkade </a>，这是一个由<a class="ae kc" href="https://github.com/alexellis" rel="noopener ugc nofollow" target="_blank"> Alex Ellis </a>(他也是OpenFaaS的创造者)创建的很棒的工具，可以帮助安装很多工具。</p><p id="a1c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们可以安装Docker和Docker Compose来帮助我们进行开发:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="c59d" class="mu lj iq mq b gy mv mw l mx my"># Docker<br/>curl -sSL  <a class="ae kc" href="https://nimamahmoudi.github.io/cicd-cheatsheet/sh/install-docker.sh" rel="noopener ugc nofollow" target="_blank">https://nimamahmoudi.github.io/cicd-cheatsheet/sh/install-docker.sh</a> | bash<br/># Docker Compose<br/>sudo apt-get update &amp;&amp; sudo apt install -qy python3-pip &amp;&amp; pip3 install docker-compose</span></pre><p id="915a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以安装Arkade及其bash-completion:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="c7be" class="mu lj iq mq b gy mv mw l mx my"># Arkade<br/>curl -SLfs <a class="ae kc" href="https://dl.get-arkade.dev" rel="noopener ugc nofollow" target="_blank">https://dl.get-arkade.dev</a> | sudo sh<br/># Add tools bin directory to PATH<br/>echo "export PATH=\$HOME/.arkade/bin:\$PATH" &gt;&gt; ~/.bashrc<br/># Copy bash completion script<br/>arkade completion bash &gt; ~/arkade_bash_completion.sh<br/>echo "source ~/arkade_bash_completion.sh" &gt;&gt; ~/.bashrc<br/># starting bash completion<br/>source ~/.bashrc</span></pre><p id="4315" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们需要kubectl与kubelet进行通信:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="e3c3" class="mu lj iq mq b gy mv mw l mx my"># Kubectl<br/>arkade get kubectl<br/># Kubectl bash completion<br/>echo 'source &lt;(kubectl completion bash)' &gt;&gt;~/.bashrc<br/># starting bash completion<br/>source ~/.bashrc</span></pre><p id="8769" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，kustomize，helm，k3sup，和kompose:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="4d16" class="mu lj iq mq b gy mv mw l mx my"># Kustomize<br/>arkade get kustomize<br/># Helm<br/>arkade get helm<br/># K3sup<br/>arkade get k3sup<br/># Kompose for converting docker-compose<br/>curl -L <a class="ae kc" href="https://github.com/kubernetes/kompose/releases/download/v1.22.0/kompose-linux-amd64" rel="noopener ugc nofollow" target="_blank">https://github.com/kubernetes/kompose/releases/download/v1.22.0/kompose-linux-amd64</a> -o kompose<br/>chmod +x kompose<br/>sudo mv ./kompose /usr/local/bin/kompose<br/>echo 'source &lt;(kompose completion bash)' &gt;&gt;~/.bashrc<br/>source ~/.bashrc</span></pre><p id="39f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不知道这些工具中的任何一个，可以去看看，但是我会试着给每个工具一个总结。Kustomize可以帮助我们动态地改变kubernetes清单中的值。Helm用于在大型项目中进行更专业的定制，或者使用helm图表安装外部应用程序。K3sup是Alex Ellis开发的另一个工具，我们将用它在虚拟机上安装k3s。</p><h1 id="9d97" class="li lj iq bd lk ll mz ln lo lp na lr ls lt nb lv lw lx nc lz ma mb nd md me mf bi translated">K3s安装</h1><p id="bbc3" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">默认情况下，K3s带有CoreDNS、Metrics server和Traefik。查看<a class="ae kc" href="https://youtu.be/FmLna7tHDRc" rel="noopener ugc nofollow" target="_blank">此视频</a>了解更多关于k3s的信息。在本教程中，我们将禁用Traefik，而使用Nginx Ingress。我们还将启用集群模式(它使用dqlite而不是sqlite来允许多个主节点)。</p><p id="2670" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要从远程计算机(例如，您的笔记本电脑)安装k3s，请使用以下命令:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="ce24" class="mu lj iq mq b gy mv mw l mx my">k3sup install \<br/>  --ip YOUR_VM_IP \<br/>  --cluster \<br/>  --user ubuntu \<br/>  --k3s-channel stable \<br/>  --local-path ~/.kube/config \<br/>  --merge --context k3s \<br/>  --k3s-extra-args '--no-deploy traefik --write-kubeconfig-mode 644'</span></pre><p id="77e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请确保将您的_VM_IP替换为您在云控制台中看到的虚拟机的IP。更多选项，请查看k3sup文档。关于高可用性安装的更多信息，请阅读<a class="ae kc" href="https://github.com/alexellis/k3sup#create-a-multi-master-ha-setup-with-embedded-etcd" rel="noopener ugc nofollow" target="_blank">本教程</a>。</p><p id="af85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用k3sup，我们在虚拟机上引导k3s，等待它完成安装，获取kube配置文件，将其移动到默认位置，并将我们的集群(上下文)命名为k3s。我们还可以在虚拟机上移动kube配置文件，这样我们也可以在虚拟机上使用kubectl:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="475b" class="mu lj iq mq b gy mv mw l mx my">mkdir ~/.kube<br/>cp /etc/rancher/k3s/k3s.yaml ~/.kube/config<br/>echo "export KUBE_CONFIG=~/.kube/config" &gt;&gt; .bashrc</span></pre><p id="4d06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想使用虚拟机本身来安装k3s，而不是您的笔记本电脑，请使用以下命令:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="f7ea" class="mu lj iq mq b gy mv mw l mx my">k3sup install \<br/>  --cluster \<br/>  --local<br/>  --k3s-channel stable \<br/>  --local-path ~/.kube/config \<br/>  --merge --context k3s \<br/>  --k3s-extra-args '--no-deploy traefik --write-kubeconfig-mode 644'</span></pre><p id="0ed9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">K3s自带kubectl烘焙的，可以在VM上用“k3s kubectl”，也可以设置别名(把这行加到~/。巴沙尔将其永久化):</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="683f" class="mu lj iq mq b gy mv mw l mx my">alias kubectl="k3s kubectl"</span></pre><p id="e2d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在可以检查我们的安装了:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="ac5c" class="mu lj iq mq b gy mv mw l mx my">kubectl get nodes -o wide</span></pre><p id="907b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该会看到类似这样的内容:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="8deb" class="mu lj iq mq b gy mv mw l mx my">NAME        STATUS   ROLES    AGE   VERSION<br/>k3smaster   Ready    master   3m    v1.18.9+k3s1</span></pre><p id="2637" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们已经在一个虚拟机上运行了k3s，我们可能希望添加其他虚拟机:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="bbdb" class="mu lj iq mq b gy mv mw l mx my">k3sup join \<br/>  --server-ip YOUR_FIRST_VM_IP \<br/>  --ip CURRENT_VM_IP \<br/>  --user ubuntu \<br/>  --k3s-channel stable \<br/>  --k3s-extra-args '--no-deploy traefik --write-kubeconfig-mode 644'</span></pre><p id="19a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于k3sup选项的更多信息，请查看他们的<a class="ae kc" href="https://github.com/alexellis/k3sup" rel="noopener ugc nofollow" target="_blank"> Github repo </a>。从所有虚拟机加入k3s群集后，检查是否一切正常:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="ef71" class="mu lj iq mq b gy mv mw l mx my">kubectl get nodes -o wide</span></pre><p id="92ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">干得好，您现在已经安装了k3s，并准备好部署不需要持久存储的无状态应用程序。接下来，我们将添加几个其他工具，当我们想要在集群上进行重要部署时，这些工具将会派上用场。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/920f5d0684c03d7df25b2261920f404d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hWzS0gRzIS2A9eJn"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@alelmes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alasdair Elmes </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="4ef6" class="li lj iq bd lk ll mz ln lo lp na lr ls lt nb lv lw lx nc lz ma mb nd md me mf bi translated">安装Nginx入口控制器</h1><p id="948d" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">现在我们已经有了一个正在运行的k3s集群，我们希望开始在其上部署令人惊叹的应用程序，其中几个可能在相同的web端口80 (HTTP)和443 (HTTPS)上。在这些情况下，以及出于其他各种原因，您可能需要安装入口控制器。目前使用最多的入口控制器是Nginx。在他们的网站上了解更多信息。</p><p id="c5b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们已经在开始时安装了适当的工具，安装nginx和cert-manager for let ' s encrypt HTTPS证书相当容易:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="7180" class="mu lj iq mq b gy mv mw l mx my"># install nginx ingress<br/>arkade install ingress-nginx --namespace default<br/># cert-manager for letsencrypt certificates<br/>arkade install cert-manager</span></pre><p id="69b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们已经准备好部署任何使用入口控制器的应用程序。我将很快为一些最有用的写教程，你可以关注我以便在发生时得到通知。</p><h1 id="6107" class="li lj iq bd lk ll mz ln lo lp na lr ls lt nb lv lw lx nc lz ma mb nd md me mf bi translated">安装Longhorn存储控制器</h1><p id="e918" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated"><a class="ae kc" href="https://github.com/longhorn/longhorn" rel="noopener ugc nofollow" target="_blank"> Longhorn </a>是Rancher Labs的另一个出色的开源项目，它为您的Kubernetes集群提供分布式块存储。它还带有一个预安装的仪表板，可以帮助您进行设置、备份和监控。我们可以使用helm轻松安装longhorn:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="4e22" class="mu lj iq mq b gy mv mw l mx my"># add the longhorn helm repository<br/>helm repo add longhorn <a class="ae kc" href="https://charts.longhorn.io" rel="noopener ugc nofollow" target="_blank">https://charts.longhorn.io</a><br/># update helm repos<br/>helm repo update<br/># create the namespace<br/>kubectl create namespace longhorn-system<br/># install longhorn<br/>helm install longhorn longhorn/longhorn --namespace longhorn-system</span></pre><p id="43ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查是否一切顺利:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="2323" class="mu lj iq mq b gy mv mw l mx my"># check everything went smooth<br/>kubectl -n longhorn-system get pod</span></pre><p id="3de4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该会看到类似这样的内容:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="d89f" class="mu lj iq mq b gy mv mw l mx my">NAME                                        READY   STATUS <br/>longhorn-ui-6fb889895f-klgs7                1/1     Running<br/>instance-manager-e-20feb18d                 1/1     Running<br/>instance-manager-r-2d587ad2                 1/1     Running<br/>engine-image-ei-ee18f965-vrjk8              1/1     Running<br/>longhorn-manager-qg7fz                      1/1     Running<br/>longhorn-driver-deployer-6756bb8fd6-wq757   1/1     Running<br/>csi-provisioner-57d6dbf5f4-jn9rr            1/1     Running<br/>csi-provisioner-57d6dbf5f4-5d67p            1/1     Running<br/>longhorn-csi-plugin-z4z5c                   2/2     Running<br/>csi-attacher-5b4745c5f7-z9zqj               1/1     Running<br/>csi-attacher-5b4745c5f7-hdvxj               1/1     Running<br/>csi-provisioner-57d6dbf5f4-zt8jc            1/1     Running<br/>csi-resizer-75ff56bc48-clx4p                1/1     Running<br/>csi-resizer-75ff56bc48-qcq22                1/1     Running<br/>csi-attacher-5b4745c5f7-q276d               1/1     Running<br/>csi-resizer-75ff56bc48-spmt2                1/1     Running</span></pre><p id="9139" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您应该能够访问longhorn UI来访问它的配置:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="9483" class="mu lj iq mq b gy mv mw l mx my"># check out the longhorn service<br/>kubectl -n longhorn-system get svc<br/># forward the port to check the configuration<br/>kubectl port-forward -n longhorn-system svc/longhorn-frontend 8002:80</span></pre><p id="cb65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您应该能够从“http://localhost:8002”打开longhorn仪表板。添加群集中任何虚拟机上的任何可用磁盘。如果您的k3s集群中只有一个节点可用，您将需要启用<code class="fe nf ng nh mq b">Replica Node Level Soft Anti-Afinity</code>,以便允许在同一节点上放置数据块备份(默认情况下，longhorn在不同的虚拟机上保留每个数据块的3个副本，这样即使虚拟机上的任何数据丢失，您也不会丢失任何数据)。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="abf3" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="45dd" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">您只需设置一个非常“专业”的Kubernetes集群，就可以用于学习、自动化您的个人任务，或者在云上托管您的爱好项目，而不必使用托管服务(这最终会比您自己想要的花费多得多)。如果这对于你想做的事情来说太复杂了，你也可以看看无服务器计算，但它的目标是非常不同的，但它可能是许多人的选择。</p><p id="2723" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在以后的文章中，我将写一些最常用的自托管应用程序的安装过程。你可以关注我，当那些文章出来时，我会通知你。</p><h1 id="16ba" class="li lj iq bd lk ll mz ln lo lp na lr ls lt nb lv lw lx nc lz ma mb nd md me mf bi translated">关于我</h1><p id="6dd3" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我是阿尔伯塔大学的博士生，约克大学的客座研究员，塞内卡学院的兼职讲师。我日复一日地研究无服务器计算平台，试图找到提高其性能、可靠性、能耗等的方法。，使用分析或数据驱动的方法(对“我要么使用数学要么使用机器学习来建模无服务器计算平台”的花哨说法)。我在这里写的是我在研究期间对一些无服务器计算平台的深入了解，以及它们的自动伸缩模式文档的简要汇编。</p><p id="4c1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想更多地了解我，可以去我的<a class="ae kc" href="https://nima-dev.com/" rel="noopener ugc nofollow" target="_blank">网站</a>看看。</p></div></div>    
</body>
</html>