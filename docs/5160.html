<html>
<head>
<title>Benchmarking Graviton2 processors with Apache Spark workloads</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Apache Spark工作负载对Graviton2处理器进行基准测试</h1>
<blockquote>原文：<a href="https://itnext.io/benchmarking-graviton2-processors-with-apache-spark-workloads-4bd9415374e7?source=collection_archive---------2-----------------------#2020-12-28">https://itnext.io/benchmarking-graviton2-processors-with-apache-spark-workloads-4bd9415374e7?source=collection_archive---------2-----------------------#2020-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/24749e2f8c01851403a0b3a322851598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7u9-B5cm7Di_wzW7Ky3Y_Q.png"/></div></div></figure><h1 id="0638" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="9dff" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Amazon EC2提供了广泛的计算实例组合，包括许多采用最新一代英特尔和AMD处理器的实例。AWS Graviton2处理器增加了更多选择。AWS Graviton2处理器由AWS 定制<a class="ae lu" href="https://en.wikipedia.org/wiki/Annapurna_Labs" rel="noopener ugc nofollow" target="_blank">，使用64位Arm Neoverse内核，为运行在Amazon EC2上的工作负载提供最佳性价比。</a></p><p id="ab81" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">2020年10月16日，亚马逊<a class="ae lu" href="https://aws.amazon.com/about-aws/whats-new/2020/10/amazon-emr-provides-lower-cost-improved-performance/" rel="noopener ugc nofollow" target="_blank">宣布</a>EMR现在支持亚马逊EC2 M6g，并在基于Graviton2的实例上为<a class="ae lu" href="https://spark.apache.org/docs/latest/" rel="noopener ugc nofollow" target="_blank"> Apache Spark </a>工作负载提供高达35%的低成本和高达15%的性能提升。</p><h1 id="32d6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">目标</h1><p id="0123" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">显然，这些对所有EMR用户来说都是好消息。特别是对于那些在EMR上运行非常繁重的工作负载的人，底层EC2机器的每月成本非常高。本文的主要目标是探索从基于英特尔M5实例的EMR到基于AWS Graviton2 M6g的EMR的迁移过程，并创建M6g与M5的性能基准。</p><h1 id="0732" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">移民</h1><p id="60f1" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">迁移到基于M6g的EMR非常简单。Amazon EMR在以下地区的EMR版本6.1.0和5.31.0及更高版本上支持Amazon EC2 M6g实例:美国东部(北弗吉尼亚)、美国东部(俄亥俄州)、美国西部(俄勒冈州)、欧盟(爱尔兰)、欧盟(法兰克福)和亚太地区(东京)。</p><p id="8955" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">因此，如果您正在其中一个区域运行，只需创建一个新的EMR集群，单击高级选项，并导航到硬件步骤</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/42c62135b7198c9794d0a84f52d5512d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PT9hL4NF6oT7RFodMC7x7Q.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">集群组成</figcaption></figure><p id="21a3" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">在“集群节点和实例”部分，单击实例类型并选择M6g类型。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/e6a510d383b6e39da22af07d06d3755e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ypOy8h-T9Of7P4NJUZD2Q.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g实例类型</figcaption></figure><p id="a827" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">为集群的所有节点类型选择M6g，然后按“创建集群”。当集群启动时，确保所有正在运行的实例都是M6g。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/1b20c2e50af82abc0755ab6fdf71df0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GEDcMNUJnr6Pm7H8bRLUdw.png"/></div></div></figure><p id="2721" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">以上所有操作也可以通过EMR 的<a class="ae lu" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-elasticmapreduce-cluster.html" rel="noopener ugc nofollow" target="_blank"> CloudFormation模板来完成。</a></p><h1 id="a48a" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">费用</h1><p id="cf85" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我将对两个EMR集群使用相同的设置:1个主节点(4xlarge)、2个核心节点(4xlarge)、4个按需任务节点(8xlarge)。</p><p id="f5b5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">在这种设置下，基于M6g的EMR集群的小时价格</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/27f2524ec5b7afc505bc0e95be48ba5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a5Yymo_IrWzPbdmfWA_nFA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g成本表</figcaption></figure><p id="65e4" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">将是3 *(0.616+0.154)+4 *(1.232+0.308)= 2.31+6.16 = 8.47美元</p><p id="c94c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">基于M5的电子病历相同设置</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/8e34f41dd93e0e1f13f2de7b6abfe6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxNpEjM2Ad1hWO23Xdrm5g.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5成本表</figcaption></figure><p id="d5ae" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">将花费3 *(0.768+0.192)+4 *(1.536+0.27)= 10.1美元</p><p id="dc48" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">以上价格均基于<a class="ae lu" href="https://aws.amazon.com/emr/pricing/" rel="noopener ugc nofollow" target="_blank">亚马逊EMR us-west-2</a>定价表。我们可以看到，基于M6g实例的EMR集群比基于M5实例的EMR集群便宜<strong class="ky ir"> 17% </strong>。节省17%是很棒的，但这与T4宣布的35%相差甚远。另一个悬而未决的问题是这两种类型的spot实例的可用性以及AWS在M6g和M5上提供的折扣。现在，我可以看到M6g spot实例上的按需节省高达54%(美国西部2)</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/b65e7569b3301a124678aaeaa03ac244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uNY8ajjqrTxycyM5ooL2Gg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g Spot实例</figcaption></figure><p id="ef17" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">同时，你可以得到高达65%的M5机器的折扣</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/e802f23516cce34488d450eac49b70ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6NaCSFSH4DBvpvY8EsuKfQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5现货实例</figcaption></figure><p id="328e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我不会讨论spot实例，但是请注意，根据AWS地区和当前的可用性，M5 spot实例的价格可能低于M6g spots的价格。在这种情况下，使用<a class="ae lu" href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-instance-fleet.html" rel="noopener ugc nofollow" target="_blank"> EMR实例群</a>可能是个好主意。</p><h1 id="1e3d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">基准</h1><p id="f5c8" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在，让我们通过在相同的输入上运行相同的作业，在EMR(M5)和EMR(M6g)之间创建一个直接的性能比较。输入数据是150GB的压缩CSV文件，包含885743562行。我将通过将输入数据帧预缓存到spark内存中来最大限度地减少IO时间，然后在测量处理时间、CPU和内存使用量的同时，对整个数据集运行繁重的转换。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">源代码</figcaption></figure><p id="232e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">对于数据集转换，我将使用Apache Spark <a class="ae lu" href="https://spark.apache.org/docs/latest/api/sql/index.html" rel="noopener ugc nofollow" target="_blank">内置的</a>函数，如sha2、from_unixtime、regexp_extract、text to parquet writer。所有这些函数都是计算密集型的，并且对于比较不同处理器的性能是可靠的。</p><h2 id="4e76" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">测试1(第10行):读取、解压缩、缓存。</h2><p id="2c6c" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">该测试EMR(M5)在29分钟内完成，EMR(M6g)仅在24分钟内完成，快了21%。我们记得这个测试不是百分之百可靠的，因为它涉及到大量的IO(从AWS S3读取150GB到集群的内存中)。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/b8333698198d65b7bd3c420bd40392f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*5PuZtpcHJhkFtmIPTznLEA.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/180d086cd7d60c4ad0ce01b9ecf2e1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*NPbv0wWFhTGyXeS-uqsd_g.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5</figcaption></figure><p id="1a73" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><em class="nf">获胜者:M6g </em></p><h2 id="9eac" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">测试2(第14行):计算列的SHA-2校验和。</h2><p id="a970" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">从该测试开始，所有数据都缓存到内存中，不涉及IO。因此，以下所有测试都将是CPU能力的重要指标。两个集群都在4.5分钟内完成了校验和计算。其实M6g快了一点，但是真的很接近。这里没有赢家。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/1ab83cc73848248c444a53ed9febdfef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*SLBXvqZfwC5ieXOseK05cQ.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2e620db1b10ab628ddfaaf0572656740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*2b1wIciSo_9SlddsqNwByA.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5</figcaption></figure><p id="9102" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><em class="nf">获胜者:平局</em></p><h2 id="76a3" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">测试3(第17行):将Unix时间戳转换为日期时间字符串</h2><p id="f249" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这个测试中，M6g的表现比M5好得多。在M6g机器上转换Unix时间戳需要2.6分钟，而在M5上需要3.2分钟，快了19%。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/042848446eef118edb36dd54cc1777b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*3ySC7v17c_3b00cxa1DqKw.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/7264a4d399e95bcc830ad3b862f41092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*Gc37WQba-U_nCROX8vkU5g.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5</figcaption></figure><p id="fffc" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><em class="nf">获胜者:M6g </em></p><h2 id="15dc" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">测试4(第22行):提取一个匹配正则表达式的组</h2><p id="dfe0" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">M6g通过击倒对手进行测试。在M6g上执行正则表达式比在M5上快2.2倍。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/83e0e88dfcb48d6df45ac6f6bc1c2844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*z3Tjo_rk6byHH0MxUmVTdA.png"/></div></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/bb530390f9ed56af4a2fc31dbf118c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*xpzSPrLxtJWFKxUPB9aIlw.png"/></div></figure><p id="6b31" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><em class="nf">获胜者:M6g </em></p><h2 id="e046" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">测试5(第27行):创建拼花文件</h2><p id="57e1" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">就像测试1一样，这个测试不是100%可靠的，因为它包含了一个CPU密集型任务(创建一个parquet格式的数据)和一个IO密集型任务(写S3对象)。基于M6g的EMR表现稍好，完成该测试只需3.3分钟，而基于M5的EMR需要3.5分钟。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/e8b48f3cebdcf8223a3f9b8d7426e210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*u_-U8WD_2ywvuluk4kAVoA.png"/></div></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/f2aa0268fbc55659ac5480ef7e4b024c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*5xeMMTgbKyQ4Fqosmg7QNA.png"/></div></figure><p id="fc01" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><em class="nf">获胜者:M6g </em></p><h1 id="221c" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">资源</h1><p id="f700" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这些测试在每个集群上分配了35个执行器。每个执行器在M5上配置了4个内核和14GB内存，在M6g上配置了13GB内存。总共:140个内核，490GB/455GB可访问内存，50 GB内存用于纱线开销。在测试过程中，两个集群的平均CPU利用率都在30%左右。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/ef682579409866d6cc411a6652ecc6f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cijkpHIcGbOxye5zokyPbQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/7b66ed35afc6a312d280213ce7c9ff38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AOf5KEGqR4LUWHXxcNTrTQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g</figcaption></figure><h1 id="16cd" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">摘要</h1><p id="b290" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我的结论是，与M5相比，M6g在性能方面做得非常好。在Apache Spark工作负载测试中，M6g取得了5轮中的4轮。当从结果中移除异常值时，M6g的性能比M5高18%。</p><p id="a70e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">就EMR的按需价格而言，M6g降低了16%的成本。对于像12XLarge这样的大型机器来说，成本降低会更低，因为出于某种原因，M6g机器上的ERM成本比M5机器高得多(0.462比0.27)。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/723b0d0da4c2f21ad6ed6e0406c85509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vBsUu5KOiW07Bc6EFDQXhg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M6g</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/adcbee39b3a2b9aca1e5f9b5859b4cf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C58cSTNn1Gfd-NKSZIzvRg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">M5</figcaption></figure><p id="441a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">另一个问题是spot实例的成本。M6g的按需购买机器的成本折扣高达54 %, M5高达65%。因此，如果您非常依赖spot实例，使用M5s时总价格可以更低。</p><p id="e93a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">总之，在按需实例上运行时，总的性价比提高了大约30%,而在完全在现场实例上运行时，只有大约8%。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/263085da4d8695f501c72b746baf8f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CiGDowuiG-9RxlPrjDdEZw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">性价比</figcaption></figure><p id="24a4" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">希望这个基准对你有用。我非常有兴趣了解您在Graviton2上运行的Apache Spark工作负载，尤其是如果您在稳定性、性能或定价方面有任何有趣的发现。</p></div></div>    
</body>
</html>