<html>
<head>
<title>First Class Android with React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一级安卓，带React Native</h1>
<blockquote>原文：<a href="https://itnext.io/first-class-android-with-react-native-c3bff02b79a6?source=collection_archive---------2-----------------------#2019-10-24">https://itnext.io/first-class-android-with-react-native-c3bff02b79a6?source=collection_archive---------2-----------------------#2019-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9bdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">iOS模拟器是如此流畅和灵敏…有时，拥有一个最喜欢的平台会影响你作为移动开发者的工作质量。带有React Native的Android有时会感觉像一个二等平台，但今天你可以做一些事情，这会让你的Android用户脸上露出笑容。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/084554f5e7cbefa491557a4dd718207a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v2jigsf4Djrnci0mA8ZlbA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com/@agkdesign?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">亚历山大·奈特</a>在<a class="ae lb" href="https://unsplash.com/s/photos/robot?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="e64f" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">平台可触摸</h2><p id="0e14" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在你的组件中默认使用<a class="ae lb" href="https://github.com/react-native-community/react-native-platform-touchable" rel="noopener ugc nofollow" target="_blank"> React Native Touchable </a>将会给你的Android体验带来巨大的不同。这将在iOS上使用<code class="fe ma mb mc md b">&lt;TouchableOpacity /&gt;</code>，在Android上使用<code class="fe ma mb mc md b">&lt;TouchableNativeFeedback /&gt;</code>。默认情况下，这会给你带来Android上的本地连锁反应。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/a39d1346f0e4e56d17234149d5f4e7c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PJnxicXHPOXdZUDbjPRDcg.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">安卓系统的连锁反应</figcaption></figure><p id="a51c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，如果您的可触摸对象有圆角，那么在交互时，您可能会在元素周围看到一个框效果。要解决这个问题，请用以下样式的<code class="fe ma mb mc md b">&lt;View /&gt;</code>包裹你的<code class="fe ma mb mc md b">&lt;Touchable /&gt;</code>。</p><pre class="km kn ko kp gt mf md mg mh aw mi bi"><span id="2254" class="lc ld iq md b gy mj mk l ml mm">&lt;View style={{ borderRadius: 5, overflow: "hidden" }}&gt;<br/>  &lt;Touchable style={{ borderRadius: 5 }}&gt;<br/>     ...    <br/>  &lt;/Touchable&gt;<br/>&lt;/View&gt;</span></pre><h2 id="168b" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">本地驱动程序</h2><p id="a323" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">Android上的动画有时看起来有点“不稳定”。这是因为当你使用<code class="fe ma mb mc md b"><a class="ae lb" href="https://facebook.github.io/react-native/blog/2017/02/14/using-native-driver-for-animated" rel="noopener ugc nofollow" target="_blank">useNativeDriver</a></code>选项时，Android上带有React Native的动画通常工作得更好。</p><p id="0132" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而故事并没有就此结束，因为<code class="fe ma mb mc md b">useNativeDriver</code>只支持有限的选项，尽管如此，它支持的一件事是<a class="ae lb" href="https://facebook.github.io/react-native/docs/transforms" rel="noopener ugc nofollow" target="_blank">React Native transformations</a>。</p><p id="d00a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当使用React Native制作动画时，通常最好花更多时间使用变换制作动画；<code class="fe ma mb mc md b">translateX</code>、<code class="fe ma mb mc md b">translateY</code>、<code class="fe ma mb mc md b">scaleX</code>、<code class="fe ma mb mc md b">scaleY</code>，而不是<code class="fe ma mb mc md b">bottom</code>、<code class="fe ma mb mc md b">top</code>、<code class="fe ma mb mc md b">left</code>、<code class="fe ma mb mc md b">right</code>、<code class="fe ma mb mc md b">flex</code>、<code class="fe ma mb mc md b">width</code>、<code class="fe ma mb mc md b">height</code>等位置和大小属性。这将允许您使用<code class="fe ma mb mc md b">useNativeDriver</code>选项，并显著提高Android上的动画性能。</p><h2 id="1d3c" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">材料设计(底部标签)</h2><p id="d797" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">当我们为移动平台开发时，我们通常希望遵循平台推荐的设计指南。iOS更严格地执行其设计准则。Android，因为它有多个手机制造商使用他们自己的皮肤，可以更宽松一些。</p><p id="63b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">材质设计很棒。用你自己的设计重新实现底部标签有时是个坏主意，会让人们远离Android优先的体验。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/dbf3ba950bc561dff10a5ee9235f34fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*exd37Tu9aU4Sz_6RSpuaFg.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">反应原生材料底部标签</figcaption></figure><p id="c802" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://github.com/timomeh/react-native-material-bottom-navigation" rel="noopener ugc nofollow" target="_blank">素材底部导航</a>就是做这个的库。</p><h2 id="9259" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">硬件背面处理</h2><p id="f5bd" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">破坏你Android优先体验的最后一个大错误是没有正确操作硬件后退按钮。对于我的一个客户来说，他们的应用程序<a class="ae lb" href="https://rewardmenow.co.uk/" rel="noopener ugc nofollow" target="_blank">“立即奖励我”</a>已经完成了高质量的后台处理。</p><p id="f622" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果用户在堆栈中的某个位置，并且屏幕是“可弹出的”(例如，他们不在根屏幕上，或者已经提交了表单并且不能返回)，那么后退按钮将弹出屏幕，如果用户不能返回，他们将获得一个对话框，询问他们是否要离开应用程序，以避免意外按下和关闭应用程序。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/034129d6ff06532686b5aaac295f7861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fjv4Cnyny5XfmEQueLD5iA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">硬件上的对话框被按下</figcaption></figure><p id="8357" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还实现了back按钮来关闭侧菜单，并在流程完成后弹出多个屏幕，请确保在您的应用程序中测试所有场景。下面是一个要点，其中包含了钩子和实用函数的代码，以实现上图中的效果。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mo mp l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">手柄背部按压Gist(<a class="ae lb" href="https://gist.github.com/lukebrandonfarrell/6b6d705363dadebbf549ef03ff4b8575" rel="noopener ugc nofollow" target="_blank">https://Gist . github . com/lukebrandonfarrell/6b6d 705363 Dade bbf 549 ef 03 ff 4b 8575</a>)</figcaption></figure></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><p id="630a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">截至React Native 0.60.4，随着<a class="ae lb" href="https://facebook.github.io/react-native/docs/hermes/" rel="noopener ugc nofollow" target="_blank"> Hermes </a> : <em class="mx">“一个为在Android上运行React Native应用程序而优化的开源JavaScript引擎”的推出，Android受到了❤️更多的喜爱。</em></p></div></div>    
</body>
</html>