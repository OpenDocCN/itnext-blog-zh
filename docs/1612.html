<html>
<head>
<title>Quickly switch between local mocks with Charles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Charles在本地模拟之间快速切换</h1>
<blockquote>原文：<a href="https://itnext.io/quickly-switch-between-local-mocks-with-charles-51ffda2d8a29?source=collection_archive---------4-----------------------#2018-12-11">https://itnext.io/quickly-switch-between-local-mocks-with-charles-51ffda2d8a29?source=collection_archive---------4-----------------------#2018-12-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="29ae" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不可避免的是，当sprint开始时，你正在开发的API并没有完全发挥作用，或者你没有得到涵盖你需要处理的所有可能情况的用户帐户。您可以在Charles中添加一个断点，每次都改变响应…但是请继续阅读，寻找更好的方法！</h2></div><p id="6ab1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://www.charlesproxy.com/" rel="noopener ugc nofollow" target="_blank"> Charles </a>是一个强大的工具，用于检查来自设备的HTTP请求。我假设您在阅读本文之前已经使用过Charles😉</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/4cb45816191a88a2274698bf7ced9ded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9OXxHGjGD8Y_fpDVrumtw.jpeg"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">实际上我有乳糖不耐症，但我还是用查尔斯</figcaption></figure><p id="deea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我参与的每个项目中，开发人员和QA工程师都使用Charles来定制对他们需求的响应。断点是模仿响应的最常见方式:在有问题的请求上添加一个断点，当响应返回时，在允许Charles将它发送到客户机设备之前手动修改有效负载。这是一项繁琐的工作，因为您经常需要多次使用相同的响应进行重新测试，否则在您发现如何修改有效负载之前，应用程序的内部请求就会超时。</p><h1 id="25d5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">地图本地</h1><p id="81cf" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">中级Charles用户可以利用“映射本地”的能力:对于给定的端点，返回磁盘上的文件内容，而不是远程服务器返回的有效负载。您可以从请求的右键菜单或从“工具”&gt;“重写”菜单项添加本地映射:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mp"><img src="../Images/280211b8af6414a3f04dcb32d5423459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKOMeZ8X3y5yofAlXb201Q.png"/></div></div></figure><p id="88e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，所有通过Charles路由到<code class="fe mq mr ms mt b">https://jsonplaceholder.typecode.com/users</code>的请求都将从<code class="fe mq mr ms mt b">/Users/max.chuquimia/Desktop/mocks/users-rewrite.json</code>返回有效负载</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mu"><img src="../Images/6d84d12a2fc64786f88e8e75aff91ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cUSPIYhH_ZxCcLMMjqaMYw.png"/></div></div></figure><p id="6c83" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这已经比使用断点前进了一步，因为这意味着您可以在客户端设备发出请求之前编辑文件<em class="mv">——不再需要在Charles的界面上对每个响应进行处理！</em></p><h1 id="95ec" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">但这还不够快！</h1><p id="2223" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">当您的票证被审核或您正在演示您的产品时，您通常需要即时向您的产品负责人展示所有场景。如果您需要登录单独的帐户或编辑有效负载来调用项目中每个可能的UI状态，这可能会很乏味。关于如何解决这个问题，我的第一个想法是直接写入Charles的首选项，并更改本地映射的路径。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mw"><img src="../Images/0a599269eb33cd6dbaf3a412176f5097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EIimrbYYzYSMESeI5alFBA.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">使用opensnoop查看Charles在保存🕵️‍♂️贴图设置时写入了哪些文件</figcaption></figure><p id="7ffe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，这是徒劳的(我的典型过度工程)——对我来说，一个更好的解决方案应该是显而易见的:创建一个脚本来轻松地更改本地映射的内容。</p><p id="12cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，我选择用Swift写这篇文章。你可以用我的，或者用你最喜欢的语言写你自己的！</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="c74e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，现在您需要做的就是在从客户端设备发出请求之前，键入一个数字并按enter键，以获得特定的响应👌</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mz"><img src="../Images/19002e159e489710086e47513bedfadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DVe1HL5bhvkXW7lHDqE97A.gif"/></div></div></figure><p id="c9aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不要忘记:作为一名开发人员，你有权力编写自己的工具——这个脚本可能不是每个人都可以重用的，但它只花了五分钟就编写好了，可以在将来省去很多麻烦。T3】</p></div></div>    
</body>
</html>