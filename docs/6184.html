<html>
<head>
<title>Don’t rewrite your project in Rust, or at all.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要用Rust重写你的项目，或者根本不重写。</h1>
<blockquote>原文：<a href="https://itnext.io/dont-rewrite-your-project-in-rust-or-at-all-81b5be97ff58?source=collection_archive---------0-----------------------#2021-09-10">https://itnext.io/dont-rewrite-your-project-in-rust-or-at-all-81b5be97ff58?source=collection_archive---------0-----------------------#2021-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e4b9f2283eaa9f7f16ba521d9572146a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekTY1Q-CH7SSnU6-Wap-ew.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">不要丢掉你的主要资产。</figcaption></figure><p id="5e37" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从头重写一个项目的决定风险极高，做出错误的选择可能会终结你的职业生涯和/或公司。然而，我们的猴子大脑喜欢依赖我们的认知偏见，很容易做出错误的选择。</p><p id="2c6d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们来看看为什么你不应该重写你的项目的一些原因。</p><h2 id="98d3" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">这比你想象的要长得多。</h2><p id="b049" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">低估完成一个项目所需的复杂性和时间在软件工程中并不是什么新鲜事。但是我们可以做一些粗略的估计。</p><p id="c61d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们看看代码库的大小和一个开发人员每天写的行数。假设我们有一个拥有500个KLOC的中型项目(就规模而言，Firefox有23个MLOC)，我们有每天编写200行代码的高度熟练的开发人员。让我们也假设重写将允许我们删除30%的代码。每月22个工作日，我们处于<code class="fe ly lz ma mb b">(500000*0.7) / (200*22) = 79</code>人月。对于单个开发商来说，这是一个非常保守的下限估计，为6.5年。</p><p id="e125" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你相信你可以减少30%以上的代码，检查“什么时候重写你的代码？”部分。</p><h2 id="d455" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">那边的草不会更绿。</h2><p id="8aac" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">重写的一个常见原因是对当前工具的局限性感到沮丧。然而，当购买新的选择时，尤其是相对较新的选择时，一定要注意以下可能会扭曲你认知的现象。</p><p id="5db3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">报道偏见:</strong>人们喜欢谈论他们的成功，即使他们需要编造一个成功。同样，人们讨厌谈论自己的失败，甚至不愿意承认失败。</p><blockquote class="mc md me"><p id="5a93" class="kc kd mf ke b kf kg kh ki kj kk kl km mg ko kp kq mh ks kt ku mi kw kx ky kz ij bi translated">早期采用者极有可能报告积极的结果，尽管事实如此，而不是报告负面的结果。</p></blockquote><p id="060d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">蜜月期:新事物让人兴奋，尤其是如果你已经在同一个项目上工作了很多年。然而，如果你想正确评价任何工具的局限性，你需要停止透过粉红色的眼镜看。</p><blockquote class="mc md me"><p id="c4da" class="kc kd mf ke b kf kg kh ki kj kk kl km mg ko kp kq mh ks kt ku mi kw kx ky kz ij bi translated">早期的报告会被做一些新鲜的和新的事情的纯粹的兴奋所歪曲。</p></blockquote><p id="fecd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对试图向你推销这个想法的人保持警惕。他们能从你的转变中得到什么吗？不一定只是钱。</p><blockquote class="mc md me"><p id="ecfb" class="kc kd mf ke b kf kg kh ki kj kk kl km mg ko kp kq mh ks kt ku mi kw kx ky kz ij bi translated">试图说服你换工作的人在游戏中有股份吗？将你的怀疑增加十倍。</p></blockquote><h2 id="98ce" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">你在为你的竞争创造公平的竞争环境。</h2><p id="7a34" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">好吧，所以你还是想重写你的项目。你的竞争对手呢？当你的团队致力于重写并且没有为你的客户提供新的特性时，他们会做什么？</p><blockquote class="mc md me"><p id="62d8" class="kc kd mf ke b kf kg kh ki kj kk kl km mg ko kp kq mh ks kt ku mi kw kx ky kz ij bi translated">可以肯定的是，你的竞争对手会不断推出新功能，抢走你的客户。</p></blockquote><h2 id="a169" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">重构，重构，重构…</h2><p id="c959" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">你应该考虑的一个主要方法是重构，而不是重写。</p><p id="fc4d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">重构似乎在一些经理中名声不佳。从表面上看，重构似乎没有给产品增加任何价值，那么为什么要这么做呢？</p><ul class=""><li id="b549" class="mj mk iq ke b kf kg kj kk kn ml kr mm kv mn kz mo mp mq mr bi translated">重构提高了代码的可读性，加快了未来功能的开发。</li><li id="9499" class="mj mk iq ke b kf ms kj mt kn mu kr mv kv mw kz mo mp mq mr bi translated">重构是安全的。每个重构步骤都将把你从一个完全工作的状态(所有单元测试都通过)带到一个完全工作的状态。因此，您将立即知道您是否犯了错误，并可以轻松地回滚到以前的版本。</li><li id="154f" class="mj mk iq ke b kf ms kj mt kn mu kr mv kv mw kz mo mp mq mr bi translated">重构是学习代码库的好方法。特别是，这是在代码库中晦涩的部分重新获得专业知识的极好方法。</li><li id="7938" class="mj mk iq ke b kf ms kj mt kn mu kr mv kv mw kz mo mp mq mr bi translated">重构的范围很窄。虽然单个重构步骤可能会影响许多文件和代码行，但是重构的范围总是很窄。因此，重构变化很容易回顾和推理。</li></ul><h2 id="1aea" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">首先模块化你的代码库。</h2><p id="ecfd" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">在模块化代码库中，重写是很少见的。相反，您可以替换其中的一个组件，这大大降低了范围和风险。在基于服务的架构中，您甚至可以使用不同的语言编写不同的组件，并获得使用正确的工具完成正确任务的最大好处。</p><h2 id="fce4" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">何时重写你的代码库？</h2><p id="3a86" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">所以，希望在这一点上，我已经就重写的愚蠢提出了一些令人信服的观点。但是，确实有需要重写的时候。注意，拥有一个模块化的代码库仍然会有很大的帮助。</p><p id="840e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">不再适合用途:</strong>如果你在一个快速发展的领域，你可能会发现自己在改变产品的用途，直到产品的原始设计不再符合客户的需求。</p><blockquote class="mc md me"><p id="24dd" class="kc kd mf ke b kf kg kh ki kj kk kl km mg ko kp kq mh ks kt ku mi kw kx ky kz ij bi translated">需要重新设计产品吗？您可能还需要重写它。</p></blockquote><p id="6573" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">外包你的代码:</strong>你能通过第三方库或服务替换你难以维护的组件吗？如果你的重写有效地从你的代码库中移除了大部分代码，这是值得考虑的。但是，请记住，你的竞争对手也可以使用相同的图书馆和服务。</p><blockquote class="mc md me"><p id="7621" class="kc kd mf ke b kf kg kh ki kj kk kl km mg ko kp kq mh ks kt ku mi kw kx ky kz ij bi translated">你能在保持竞争优势的同时，用外部服务或库替换你的代码库吗？考虑重写。</p></blockquote><h2 id="26d4" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated">结论</h2><p id="03d0" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">重写项目几乎总是错误的。我们不必远离标题就能看到一个例子，Firefox很快失去了它的用户群。</p><p id="875a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但与此同时，有很好的方法和理由进行重写。我想留给你一个核心思想，重写是一个非常激烈的步骤，你应该先尝试不那么激烈的方法。</p><p id="c78f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">也许通过重构在代码质量上多投资一点。</p><h1 id="7ce3" class="mx lb iq bd lc my mz na lf nb nc nd li ne nf ng ll nh ni nj lo nk nl nm lr nn bi translated">感谢您的阅读</h1><p id="c79a" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">感谢您阅读这篇文章。你喜欢吗？</p><p id="532a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我还在YouTube<a class="ae no" href="https://youtube.com/c/simontoth" rel="noopener ugc nofollow" target="_blank">youtube.com/c/simontoth</a>上发布视频，如果你想聊天，可以在Twitter <a class="ae no" href="https://twitter.com/SimonToth83" rel="noopener ugc nofollow" target="_blank"> @SimonToth83 </a>或LinkedIn<a class="ae no" href="https://www.linkedin.com/in/simontoth" rel="noopener ugc nofollow" target="_blank">linkedin.com/in/simontoth</a>上联系我。</p></div></div>    
</body>
</html>