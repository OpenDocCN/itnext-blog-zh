<html>
<head>
<title>Husky — keep your ‘master’ branch clean</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">哈士奇——保持你的“主人”树枝干净</h1>
<blockquote>原文：<a href="https://itnext.io/husky-keep-your-master-branch-clean-dfb6c3b2b384?source=collection_archive---------4-----------------------#2018-04-25">https://itnext.io/husky-keep-your-master-branch-clean-dfb6c3b2b384?source=collection_archive---------4-----------------------#2018-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1c24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我敢肯定，正在阅读这篇文章的许多人都遇到过这种情况:你有一个阳光明媚的早晨，鸟儿在歌唱，你来到办公室，从主应用程序下载最新的应用程序，结果应用程序坏了，就这样——你的早晨被毁了😡。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/b9b88d43b42c767248634c2248bfcd00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4TJ19DNw6KCFtKE9Kny-Q.jpeg"/></div></div></figure><p id="5627" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个很棒的工具可以消除这个问题——<a class="ae kx" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank">哈士奇</a>。Husky让添加git挂钩变得尽可能简单。</p><blockquote class="ky kz la"><p id="12cf" class="jn jo lb jp b jq jr js jt ju jv jw jx lc jz ka kb ld kd ke kf le kh ki kj kk ij bi translated">钩子是可以放在钩子目录中的程序，可以在git执行的某些时候触发动作。—来自<a class="ae kx" href="https://git-scm.com/docs/githooks" rel="noopener ugc nofollow" target="_blank"> git文档</a>。</p></blockquote><p id="7e18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用husky，您只需在package.json文件中提供一个脚本，例如，该脚本将在提交或推送时触发。</p><ol class=""><li id="e4d2" class="lf lg iq jp b jq jr ju jv jy lh kc li kg lj kk lk ll lm ln bi translated">安装husky</li></ol><pre class="km kn ko kp gt lo lp lq lr aw ls bi"><span id="b660" class="lt lu iq lp b gy lv lw l lx ly">npm install -D husky</span></pre><p id="1cc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.添加<a class="ae kx" href="https://git-scm.com/docs/githooks#_hooks" rel="noopener ugc nofollow" target="_blank">任意挂钩</a>到你的package.json</p><pre class="km kn ko kp gt lo lp lq lr aw ls bi"><span id="0d49" class="lt lu iq lp b gy lv lw l lx ly">"precommit": "your code goes here (testing, linting)..."</span></pre><p id="022a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我看来<strong class="jp ir"> <em class="lb"> prepush </em> </strong>命令是最有用的，因为它不像precommit那样经常执行，而且它仍然可以确保不将损坏的代码推送到主程序。</p><p id="f431" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是我们团队在当前Angular项目中使用的配置:</p><pre class="km kn ko kp gt lo lp lq lr aw ls bi"><span id="c1a4" class="lt lu iq lp b gy lv lw l lx ly">"prepush": "run-p lint test-headless \"ng -- build --prod\" "</span></pre><p id="2072" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的代码运行林挺(<strong class="jp ir"><em class="lb">" lint ":" ng lint "</em></strong>)，运行单元测试(<strong class="jp ir"><em class="lb">" test-headless ":" ng test-Sr-browsers chrome headless "</em></strong>)，并检查生产构建没有失败(<strong class="jp ir">\ " ng-build-prod \ "</strong>)。我还使用<a class="ae kx" href="https://github.com/mysticatea/npm-run-all" rel="noopener ugc nofollow" target="_blank">NPM-run-all</a><strong class="jp ir"><em class="lb"/></strong>来并行执行所有任务。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="e753" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这篇小博文能帮助某人成为更快乐的开发者。</p></div></div>    
</body>
</html>