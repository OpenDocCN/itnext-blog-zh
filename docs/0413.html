<html>
<head>
<title>Creating a full monitoring solution for ARM Kubernetes Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为ARM Kubernetes集群创建完整的监控解决方案</h1>
<blockquote>原文：<a href="https://itnext.io/creating-a-full-monitoring-solution-for-arm-kubernetes-cluster-53b3671186cb?source=collection_archive---------5-----------------------#2018-03-06">https://itnext.io/creating-a-full-monitoring-solution-for-arm-kubernetes-cluster-53b3671186cb?source=collection_archive---------5-----------------------#2018-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="9372" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae ko" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fcreating-a-full-monitoring-solution-for-arm-kubernetes-cluster-53b3671186cb" rel="noopener ugc nofollow" target="_blank"> <em class="kp">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="b53a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在将一个Kubernetes集群部署到三个Rock64 SBCs之后，在我的<a class="ae ko" href="http://medium.com/@carlosedp/building-an-arm-kubernetes-cluster-ef31032636f9" rel="noopener">上一篇文章</a>中，我想使用一个更好、更灵活的监控解决方案。在最初的文章中，我“手动”部署了解决方案的所有元素。</p><p id="4cd5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我使用一个更加精细和维护的堆栈，通过CoreOS Prometheus-operator 进行监控。该解决方案提供动态配置来定位Prometheus目标，并具有用于添加新的受监控元素的“可插拔”解决方案。</p><p id="f0ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所有部署文件都可以从我的<a class="ae ko" href="https://github.com/carlosedp/cluster-monitoring" rel="noopener ugc nofollow" target="_blank"> Github库</a>下载。像往常一样，更容易跟踪和修改。</p><p id="d9a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个库是为ARM平台调整的官方kube-prometheus文件的副本。大多数图像是为ARM平台构建的，并上传到<a class="ae ko" href="https://hub.docker.com/r/carlosedp/" rel="noopener ugc nofollow" target="_blank"> DockerHub </a>。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/8fcff6a36b693379a29bca50b8a67984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v07kygLabbUdNchP9_oSlg.jpeg"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">现在有了Raspberry Pi 3和一个额外的媒体硬盘</figcaption></figure><p id="8c79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我将从上到下，概述从面向用户的元素到系统收集器的细节以及如何部署它们。这提供了一个更好的视角以及更多的鼓励来实现它。</p><h1 id="1dd8" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">格拉夫纳</h1><p id="086a" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated"><a class="ae ko" href="https://grafana.com/" rel="noopener ugc nofollow" target="_blank"> Grafana </a>提供监控仪表板和阈值的基本通知。</p><p id="cdd8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">prometheus-operator 的默认部署安装了一些仪表板，允许监控重要的Kubernetes健康状态。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mj"><img src="../Images/7ecd2924926980ac0989fcd23add61fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVRechZcYIkZhPAWtzmOoQ.png"/></div></div></figure><div class="kr ks kt ku gt ab cb"><figure class="mk kv ml mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><img src="../Images/733e374968b0f41c1419999b5db87fbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*1WP_uN9DgArPttTAMQcQ7w.png"/></div></figure><figure class="mk kv mq mm mn mo mp paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><img src="../Images/a23864644a150d9e803c31267a4e4d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*_hL_pZsJtgtAp-h7-NM0QA.png"/></div></figure></div><p id="3f69" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些仪表板非常完整，但自从我那时开始玩Prometheus和Grafana以来，我调整了一些已经使用的仪表板，并创建了具有更广泛节点视图的定制仪表板。</p><p id="ce05" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些附加仪表板在<a class="ae ko" href="https://github.com/carlosedp/prometheus-operator-ARM/tree/master/grafana-dashboards" rel="noopener ugc nofollow" target="_blank"> grafana-dashboard </a>目录中提供，可以在部署后使用JSON文件导入(左边的加号- &gt; Import - &gt; Upload)。json文件)。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/801a04da253a52ef4b6df5302cbee49c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4pr2ezRrQj4_yOkvh_scQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">其中一个自定义修改的仪表板</figcaption></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ms"><img src="../Images/9d1d0e51039651feb84a982c18005fd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DlIIVTo-gjeGdWDDK9zLxg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">自定义仪表板，pt2</figcaption></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mt"><img src="../Images/ef689d822d6152e5c762c30f70350309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zp4bS5omhxoLxbC4xGh5vQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">自定义仪表板，pt3</figcaption></figure><p id="4b00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我还添加了一个仪表板来监控Traefik统计数据:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mu"><img src="../Images/0ece414cc188ca555a8906c289d8d2ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i0D5ki6aimMur9WOaMKSlg.png"/></div></div></figure><p id="9714" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">和普罗米修斯统计仪表板:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mv"><img src="../Images/ba27c0c3afcd64bb38a557b989187a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F6zTMRfZKe_ZMrUIacHuyw.png"/></div></div></figure><p id="a80f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，我正在使用Grafana根据仪表板上创建的警报来触发通知。这些警报在您想要发出警报的每个Grafana面板和阈值上定义。Grafana然后使用电子邮件中继部署(稍后将详细介绍)通过电子邮件发送通知(在本例中)。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mw"><img src="../Images/1e95be3cdf21cb0c607ae560254f9b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQfghThKZDnc10uQ-I_jJg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">定义的所有警报</figcaption></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mx"><img src="../Images/ddc8f7a157955b9770fd68f657d93457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qtsyaU6ZTSLC176XjqVgxA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">定义警报阈值</figcaption></figure><p id="29a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了提供所有这些，由CoreOS维护的prometheus-operator堆栈包括:</p><ul class=""><li id="7fa4" class="my mz it js b jt ju jx jy kb na kf nb kj nc kn nd ne nf ng bi translated"><a class="ae ko" href="https://github.com/coreos/prometheus-operator/" rel="noopener ugc nofollow" target="_blank">普罗米修斯——操作员</a>——管理所有组件的元素</li><li id="4c8b" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated"><a class="ae ko" href="https://github.com/prometheus/prometheus/" rel="noopener ugc nofollow" target="_blank">普罗米修斯</a>——存储数据的采集和时序数据库</li><li id="3600" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated"><a class="ae ko" href="https://github.com/prometheus/node_exporter/" rel="noopener ugc nofollow" target="_blank">节点导出器</a> —用于获取节点数据的收集器</li><li id="798a" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated"><a class="ae ko" href="https://github.com/prometheus/node-exporter" rel="noopener ugc nofollow" target="_blank"> arm-exporter </a> —获取电路板温度的收集器</li><li id="d991" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated"><a class="ae ko" href="https://github.com/prometheus/alertmanager" rel="noopener ugc nofollow" target="_blank">报警管理器</a> —为Prometheus提供报警通知的元件</li><li id="a354" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated"><a class="ae ko" href="http://grafana.com" rel="noopener ugc nofollow" target="_blank"> Grafana </a> —仪表板GUI</li><li id="5421" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated"><a class="ae ko" href="https://github.com/kubernetes/kube-state-metrics/" rel="noopener ugc nofollow" target="_blank">Kube-state-metrics</a>—Kubernetes集群统计信息的收集器</li></ul><p id="5336" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了部署这个堆栈，在项目的根上有一个自动化的脚本来处理所有的事情。运行前，调整以下部分列出的参数。</p><p id="5ae5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nm nn no np b">./deploy</code></p><p id="470d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这应该会创建一个<code class="fe nm nn no np b">monitoring</code>名称空间，并为您的Kubernetes集群生成所有部署和pods。</p><p id="9c3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在简要概述一些元素。</p><h2 id="aea5" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">普罗米修斯算子</h2><p id="1517" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">Prometheus-operator for Kubernetes为Kubernetes服务以及Prometheus实例的部署和管理提供了简单的监控定义。它负责生成部署，并根据<code class="fe nm nn no np b">service-monitor</code>配置自动配置Prometheus获取新目标。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="ab gu cl oc"><img src="../Images/c96da240f81b7b4e7610741e8e7c3e40.png" data-original-src="https://miro.medium.com/v2/format:webp/1*6KI8wlyWwLwPYgt_SP1CCA.png"/></div></figure><p id="bcce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里是我为Traefik创建的服务监视器:</p><pre class="kr ks kt ku gt od np oe of aw og bi"><span id="4c10" class="nq lh it np b gy oh oi l oj ok">apiVersion: monitoring.coreos.com/v1<br/>kind: ServiceMonitor<br/>metadata:<br/>  name: traefik-ingress-lb<br/>  labels:<br/>    k8s-app: traefik-ingress-lb<br/>spec:<br/>  jobLabel: k8s-app<br/>  endpoints:<br/>  - port: admin<br/>    interval: 30s<br/>  selector:<br/>    matchLabels:<br/>      k8s-app: traefik-ingress-lb<br/>  namespaceSelector:<br/>    matchNames:<br/>    - kube-system</span></pre><p id="d970" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据这一定义，prometheus-operator将配置prometheus查找traefik服务标签，以及如何通过配置的端口访问其指标，所有这些都是动态的，无需重启。在<a class="ae ko" href="https://github.com/carlosedp/prometheus-operator-ARM/tree/master/manifests/prometheus" rel="noopener ugc nofollow" target="_blank">存储库</a>中查找所有服务监视器。</p><h2 id="781f" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">普罗米修斯</h2><p id="43dc" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">普罗米修斯，一个<a class="ae ko" href="https://cncf.io/" rel="noopener ugc nofollow" target="_blank">云本地计算基金会</a>项目，是一个系统和服务监控系统。它以给定的时间间隔从配置的目标收集度量，评估规则表达式，显示结果，并在观察到某个条件为真时触发预警。</p><p id="a6f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">普罗米修斯的目标由操作员动态配置:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ol"><img src="../Images/3db9b4396cb1a74579e53fcbcb384b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y1WeDD025c5AbLbCpuKRJA.png"/></div></div></figure><p id="ada3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Prometheus GUI暴露在内部网络的入口上，可用于查询其指标。调整<code class="fe nm nn no np b">./manifests/prometheus/prometheus-k8s-ingress.yaml.</code>中入口URL的参数</p><p id="117b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Prometheus还从Kubernetes集群中的多个元素收集指标。为此，它需要访问Kubelet API和其他Kubernetes元素。</p><p id="4df1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您的部署是用<strong class="js iu"> Kubeadm </strong>完成的(就像我的另一篇文章)，请确保做以下更改:</p><blockquote class="om on oo"><p id="a183" class="jq jr kp js b jt ju jv jw jx jy jz ka op kc kd ke oq kg kh ki or kk kl km kn im bi translated">根据官方部署文档<a class="ae ko" href="https://github.com/coreos/prometheus-operator/blob/master/contrib/kube-prometheus/docs/kube-prometheus-on-kubeadm.md" rel="noopener ugc nofollow" target="_blank">这里的</a>，需要对集群进行一些更改:</p><p id="6a88" class="jq jr kp js b jt ju jv jw jx jy jz ka op kc kd ke oq kg kh ki or kk kl km kn im bi translated">我们需要公开由kubelet守护进程安装和管理的cadvisor，并允许webhook令牌认证。为此，我们在所有主节点和节点上执行以下操作:</p></blockquote><pre class="kr ks kt ku gt od np oe of aw og bi"><span id="ed17" class="nq lh it np b gy oh oi l oj ok">sed -e "/cadvisor-port=0/d" -i /etc/systemd/system/kubelet.service.d/10-kubeadm.conf<br/>sed -e "s/--authorization-mode=Webhook/--authentication-token-webhook=true --authorization-mode=Webhook/"<br/>systemctl daemon-reload<br/>systemctl restart kubelet</span></pre><blockquote class="om on oo"><p id="4c18" class="jq jr kp js b jt ju jv jw jx jy jz ka op kc kd ke oq kg kh ki or kk kl km kn im bi translated">如果您已经使用kubeadm部署了一个Kubernetes，那么除了先前的kubelet更改之外，还要更改kube-controller-manager和kube-scheduler在主节点上监听的地址:</p></blockquote><pre class="kr ks kt ku gt od np oe of aw og bi"><span id="956b" class="nq lh it np b gy oh oi l oj ok">sed -e "s/- --address=127.0.0.1/- --address=0.0.0.0/" -i /etc/kubernetes/manifests/kube-controller-manager.yaml<br/>sed -e "s/- --address=127.0.0.1/- --address=0.0.0.0/" -i /etc/kubernetes/manifests/kube-scheduler.yaml</span></pre><p id="fbf5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于kube-prometheus网站的更多信息。</p><h2 id="a29f" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">警报管理器</h2><p id="95b4" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">Alertmanager处理客户端应用程序(如Prometheus服务器)发送的警报。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi os"><img src="../Images/870bc749517e3bcab1ff1c9b5ffb6b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MzHF_z10OfZgKIIfKOgkLg.png"/></div></div></figure><p id="005d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<code class="fe nm nn no np b">./manifests/alertmanager/alertmanager-ingress.yaml.</code>中调整入口URL UI的参数</p><h2 id="fc6e" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">节点导出器</h2><p id="3f7e" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">Prometheus exporter针对*NIX内核公开的硬件和操作系统指标。该组件提供关于硬件和底层操作系统的所有指标。</p><h2 id="cfec" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">军火出口商</h2><p id="17a8" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">该组件仅输出一个指标，即处理器芯片的温度。这一指标可以在附加的Grafana仪表盘“Kubernetes集群监控(通过Prometheus)”中看到。</p><h2 id="70e3" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">kube-状态-度量</h2><p id="5ed0" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">Kube-state-metrics是一个服务，它监听Kubernetes API服务器并生成关于对象状态的度量。</p><h2 id="33e7" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">SMTP中继</h2><p id="2087" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">为了提供电子邮件通知，我添加了一个电子邮件中继服务来与Gmail帐户集成。要部署它，调整<code class="fe nm nn no np b">./manifests/smtp-server/smtp.yaml</code>上的环境变量来添加您的Gmail凭证。</p><h2 id="e94b" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">格拉夫纳</h2><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/401eed9bfcffd6ec2142b60d0004eaee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*rs3FnY72z5N8iZb8PMpkFg.png"/></div></figure><blockquote class="om on oo"><p id="6372" class="jq jr kp js b jt ju jv jw jx jy jz ka op kc kd ke oq kg kh ki or kk kl km kn im bi translated">Grafana是一款开源软件，为Graphite、Elasticsearch、OpenTSDB、Prometheus和InfluxDB提供了丰富的度量仪表板和图形编辑器</p></blockquote><p id="7c7a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">普罗米修斯-操作员部署格拉夫纳和它的仪表板。要获得额外的仪表板，从<code class="fe nm nn no np b">grafana-dashboards</code>目录加载它们。</p><p id="c5ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于电子邮件通知，请在<code class="fe nm nn no np b">./manifests/grafana/grafana-configmap.yaml</code>上调整您的源电子邮件，并在<code class="fe nm nn no np b">./manifests/grafana/grafana-external-ingress.yaml.</code>中调整入口URL</p><p id="7af9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要访问它，请转到http://grafana.internal.mydomain.com的<a class="ae ko" href="http://grafana.internal.mydomain.com" rel="noopener ugc nofollow" target="_blank"><em class="kp"/></a></p><h2 id="6011" class="nq lh it bd li nr ns dn lm nt nu dp lq kb nv nw lu kf nx ny ly kj nz oa mc ob bi translated">结论</h2><p id="e298" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">这个堆栈使得监控堆栈的部署和管理更加完整和动态。要查看更多信息，请查阅prometheus-operator <a class="ae ko" href="https://coreos.com/operators/prometheus/docs/latest/" rel="noopener ugc nofollow" target="_blank">文档</a>，并像往常一样，阅读清单的源代码。</p></div></div>    
</body>
</html>