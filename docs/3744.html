<html>
<head>
<title>The art of staying up to date with your Javascript framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与您的Javascript框架保持同步的艺术</h1>
<blockquote>原文：<a href="https://itnext.io/the-art-of-staying-up-to-date-with-your-javascript-framework-5b0113d6d82?source=collection_archive---------4-----------------------#2020-02-15">https://itnext.io/the-art-of-staying-up-to-date-with-your-javascript-framework-5b0113d6d82?source=collection_archive---------4-----------------------#2020-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/00fae2c1f4fee6f0e58212f822b3ae28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-dpS_nbQuGcO5iMoTDIvg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://www.pexels.com/@kerber?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">马尔科·布拉泽维奇</a>从<a class="ae kc" href="https://www.pexels.com/photo/assorted-color-artwork-equipment-set-1053687/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>拍摄</figcaption></figure><h1 id="c928" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="eb9d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">今天，流行的Javascript框架(Angular，React，Vue)在发布新版本时会应用语义版本化，该版本修复了重要的错误或添加了新的令人敬畏的功能。添加新功能不仅为开发人员提供了新的功能，还使他们能够跟上新出现的web标准和技术。</p><h1 id="0314" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">为什么不升级</h1><p id="cbe1" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">对于自由职业者或初创公司来说，更新Javascript框架可能是一件简单的事情，但在企业软件开发领域却不是这样。公司通常很难跟上最新的更新。升级到新版本是一个痛苦的过程，原因如下:</p><ol class=""><li id="11a9" class="lz ma iq ld b le mb li mc lm md lq me lu mf ly mg mh mi mj bi translated">该项目的代码库很大，并且包含较新版本不支持的框架功能。一个这样的例子是在一个<strong class="ld ir"> AngularJS </strong>到<strong class="ld ir"> Angula </strong> r的项目迁移中，其中像<code class="fe mk ml mm mn b">$rootScope</code>这样的服务很难更新。</li><li id="5188" class="lz ma iq ld b le mo li mp lm mq lq mr lu ms ly mg mh mi mj bi translated">一个项目的开发跨越了许多团队，可能跨越了不同的国家，他们之间的协调是一个复杂的过程。</li><li id="d0cf" class="lz ma iq ld b le mo li mp lm mq lq mr lu ms ly mg mh mi mj bi translated">在产品计划中，新功能具有更高的优先级。利益相关者或产品所有者更关心为他们的客户提供附加值。</li><li id="66fb" class="lz ma iq ld b le mo li mp lm mq lq mr lu ms ly mg mh mi mj bi translated">基于合同的产品，在一定的生命周期内得到支持，然后被放弃。</li></ol><h1 id="ed76" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">为什么升级</h1><p id="fcb3" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">从最终用户的角度来看，更新到新版本的好处可能不会立即显现出来。它最终将使开发人员能够构建出色的功能并改善用户体验。为了更好地理解这一点，让我描述一下在<a class="ae kc" href="https://plexearth.com/" rel="noopener ugc nofollow" target="_blank"> Plexscape </a>开发<strong class="ld ir">地图浏览器</strong>的过程中，升级是如何帮助我们的。</p><h2 id="db2b" class="mt ke iq bd kf mu mv dn kj mw mx dp kn lm my mz kr lq na nb kv lu nc nd kz ne bi translated">地图浏览器</h2><p id="4a16" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">地图浏览器是一个基于<a class="ae kc" href="https://www.electronjs.org/" rel="noopener ugc nofollow" target="_blank">electronijs</a>的Angular应用程序，支持<strong class="ld ir"> Plex。我们的旗舰产品Earth </strong>，可以连接全球不同的地图提供商并创建定制地图。<strong class="ld ir"> ElectronJS </strong>是一个Javascript框架，构建在Node.js和Chrome v8引擎之上，帮助开发人员利用Javascript、HTML和CSS构建跨平台的桌面应用。</p><h2 id="6401" class="mt ke iq bd kf mu mv dn kj mw mx dp kn lm my mz kr lq na nb kv lu nc nd kz ne bi translated">与电子交流</h2><p id="f847" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">电子应用程序由两个进程组成:用于创建和显示web页面的主进程和运行web页面的呈现器进程。可以使用适当的模块访问每个进程。主进程由<code class="fe mk ml mm mn b">ipcMain</code>模块管理，渲染器由<code class="fe mk ml mm mn b">ipcRenderer</code>模块管理。</p><h2 id="b3f9" class="mt ke iq bd kf mu mv dn kj mw mx dp kn lm my mz kr lq na nb kv lu nc nd kz ne bi translated">使用回调</h2><p id="6fad" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在Electron 6中，当我们想从渲染器进程与主进程通信时，我们使用了<code class="fe mk ml mm mn b">ipcRenderer</code>模块的两种方法。向主进程发送消息的<code class="fe mk ml mm mn b">send</code>方法和侦听主进程对我们的消息的回复的<code class="fe mk ml mm mn b">once</code>或<code class="fe mk ml mm mn b">on</code>方法。考虑我们在地图浏览器中使用的获取地图图层列表的以下方法:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/2aa6cc61987531ee9bba2b91aada4af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SnmMGY9LdvtUXgzflP9GVA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">在电子6中与主进程通信</figcaption></figure><p id="46dd" class="pw-post-body-paragraph lb lc iq ld b le mb lg lh li mc lk ll lm nk lo lp lq nl ls lt lu nm lw lx ly ij bi translated">首先，我们使用<code class="fe mk ml mm mn b">send</code>方法向主进程发送一条消息，使用一个惟一的通道名<code class="fe mk ml mm mn b">getLayers</code>。然后，我们使用<code class="fe mk ml mm mn b">once</code>方法监听接受两个参数的消息回复:</p><ol class=""><li id="0cb1" class="lz ma iq ld b le mb li mc lm md lq me lu mf ly mg mh mi mj bi translated">通道的名称必须与我们用来发送消息的名称相匹配。</li><li id="10a6" class="lz ma iq ld b le mo li mp lm mq lq mr lu ms ly mg mh mi mj bi translated">收到回复时将调用的回调函数。</li></ol><p id="6017" class="pw-post-body-paragraph lb lc iq ld b le mb lg lh li mc lk ll lm nk lo lp lq nl ls lt lu nm lw lx ly ij bi translated">最后，我们将<code class="fe mk ml mm mn b">once</code>方法包装在一个<code class="fe mk ml mm mn b">Promise</code>函数中，这样我们就可以稍后在组件上使用承诺来调用该方法。</p><h2 id="2340" class="mt ke iq bd kf mu mv dn kj mw mx dp kn lm my mz kr lq na nb kv lu nc nd kz ne bi translated">利用承诺</h2><p id="728b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Electron 7在<code class="fe mk ml mm mn b">ipcRenderer</code>模块中引入了<code class="fe mk ml mm mn b">invoke</code>方法，用于与主进程异步通信。它可以用一个方法发送消息并监听回复，这样就消除了许多样板文件，如下面的代码片段所示:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/dd4670913186fcda6fc1827562237598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*VW3hTstzpgtPWAhHtysRUQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">与电子7中的主进程通信</figcaption></figure><p id="fe06" class="pw-post-body-paragraph lb lc iq ld b le mb lg lh li mc lk ll lm nk lo lp lq nl ls lt lu nm lw lx ly ij bi translated">很酷，对吧？除了LOC的减少和可读性的提高，我们还去掉了<code class="fe mk ml mm mn b">Promise</code>包装函数，因为新方法自己返回一个承诺。使用<code class="fe mk ml mm mn b">invoke</code>方法的另一个优点是，它优于使用<code class="fe mk ml mm mn b">remote</code>模块。</p><blockquote class="no np nq"><p id="1346" class="lb lc nr ld b le mb lg lh li mc lk ll ns nk lo lp nt nl ls lt nu nm lw lx ly ij bi translated"><code class="fe mk ml mm mn b"><em class="iq">remote</em></code>模块用于直接从渲染器访问主进程，这带来了安全问题。你可以在<a class="ae kc" href="https://medium.com/@nornagon/electrons-remote-module-considered-harmful-70d69500f31" rel="noopener">https://medium . com/@ norna gon/electronics-remote-module-consided-habital-70d 69500 f31</a>中了解更多潜在危险</p></blockquote><h1 id="335b" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="86df" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们描述的用例只是一个小例子。在真实的场景中，比如地图浏览器，可能有更多的方法。升级到Javascript框架的新版本，甚至是库，将会提高源代码的可读性、可维护性和安全性。</p><p id="a1f9" class="pw-post-body-paragraph lb lc iq ld b le mb lg lh li mc lk ll lm nk lo lp lq nl ls lt lu nm lw lx ly ij bi translated">试着将版本升级融入到你的日常开发工作中，并花时间为此做好计划。不要一有新版本发布就急着升级，要等下一个或者下一个主版本之后再升级。</p></div></div>    
</body>
</html>