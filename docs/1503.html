<html>
<head>
<title>Documenting your API with OpenAPI (Swagger) and Redoc</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用OpenAPI (Swagger)和Redoc记录你的API</h1>
<blockquote>原文：<a href="https://itnext.io/documenting-your-api-with-openapi-swagger-and-redoc-417bd8304b72?source=collection_archive---------2-----------------------#2018-11-05">https://itnext.io/documenting-your-api-with-openapi-swagger-and-redoc-417bd8304b72?source=collection_archive---------2-----------------------#2018-11-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0487" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将回顾几种适合于用OpenAPI 3.0规范记录API的流行编辑器、可以呈现该规范的不同主题以及托管策略。</p><h1 id="40f8" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="d1c6" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我们发现的最佳组合:</p><ul class=""><li id="9f8e" class="lo lp iq jp b jq jr ju jv jy lq kc lr kg ls kk lt lu lv lw bi translated">使用<a class="ae lx" href="https://www.openapis.org/" rel="noopener ugc nofollow" target="_blank"> OpenAPI 3.0 </a></li><li id="7a34" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">用<a class="ae lx" href="https://github.com/arjun-g/vs-swagger-viewer" rel="noopener ugc nofollow" target="_blank"> VSCode Swagger扩展</a>实现规范</li><li id="cc47" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">使用带有<a class="ae lx" href="https://github.com/Rebilly/ReDoc" rel="noopener ugc nofollow" target="_blank"> Redoc </a>的GitHub页面获得好看的&amp;免费托管</li></ul><h1 id="ec17" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">选择API规范格式</h1><p id="4efd" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我想可以肯定地说，OpenAPI现在是最流行的API规范。你可以在这里了解更多:<a class="ae lx" href="https://www.openapis.org/" rel="noopener ugc nofollow" target="_blank">https://www.openapis.org/</a>。其他竞争者:</p><ul class=""><li id="9047" class="lo lp iq jp b jq jr ju jv jy lq kc lr kg ls kk lt lu lv lw bi translated">拉姆尔</li><li id="d1d2" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">API蓝图</li><li id="b6e2" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">WADL</li><li id="2438" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">石板</li></ul><p id="ac3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在一篇优秀的Nordic APIs文章中阅读更多关于其他顶级规范格式的内容:<a class="ae lx" href="https://nordicapis.com/top-specification-formats-for-rest-apis/" rel="noopener ugc nofollow" target="_blank">https://nordicapis . com/top-specification-formats-for-rest-APIs/</a></p><h1 id="4a6a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">open API vs/和Swagger</h1><p id="ec45" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">简史:OpenAPI 3.0是由<a class="ae lx" href="https://smartbear.com/" rel="noopener ugc nofollow" target="_blank"> SmartBear Software </a>捐赠给OpenAPI initiate(并从Swagger规范改名)以来的第一个官方版本。许多人仍然认为(在我做一些研究之前包括我自己)Swagger仍然是一个规范，但是，目前:</p><ul class=""><li id="ad8a" class="lo lp iq jp b jq jr ju jv jy lq kc lr kg ls kk lt lu lv lw bi translated">OpenAPI是一种规范</li><li id="0e35" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">Swagger提供了编写规范、生成代码和托管代码的工具。</li></ul><p id="abee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去的几年里，OpenAPI已经被各种规模的大型企业和初创公司所接受。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="d836" class="kl km iq bd kn ko mk kq kr ks ml ku kv kw mm ky kz la mn lc ld le mo lg lh li bi translated">编辑</h1><p id="ff04" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">一旦你选择了一个规范，寻找一个好的方法把它写下来是很重要的。我最初是从<a class="ae lx" href="https://apiary.io/" rel="noopener ugc nofollow" target="_blank">https://apary . io</a>开始的，因为他们提供了一个带有Swagger 2.0和API Blueprint选项的编辑器(默认为API Blueprint，所以要小心:)，并在他们的服务上托管您的文档:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ca"><img src="../Images/be1e78755b7abe344590746195030c07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d6VUaPOy34zWD91eZz9NSw.png"/></div></div></figure><p id="58d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">听起来很划算？可能是吧，因为它提供了一个一体化的软件包——编辑器、语法检查，甚至免费托管你的文档。我们来看看其他选项:)</p><h1 id="b9ad" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">招摇的编辑</h1><p id="fe49" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">然后，我调查了Swagger editor(<a class="ae lx" href="https://editor.swagger.io/" rel="noopener ugc nofollow" target="_blank">https://editor.swagger.io/</a>)，但我选择了一个自托管的via Docker:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi na"><img src="../Images/c319fd528c7dc73206cbead7ec5c34a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KsDCIQ6ImNHaLVkAfbXmbA.png"/></div></div></figure><p id="e9be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它与apiary.io非常相似，但是我发现它们的主要问题是它们没有我在本地使用的编辑器快。</p><h1 id="41cc" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Swagger VSCode扩展</h1><p id="55e4" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">很自然地，我查看了VSCode extensions marketplace，发现了这篇优秀的文章<a class="ae lx" href="https://github.com/arjun-g/vs-swagger-viewer" rel="noopener ugc nofollow" target="_blank">https://github.com/arjun-g/vs-swagger-viewer</a>:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nb"><img src="../Images/58003633db4e3791b44cedf5e83f2e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSfji48iAuguzpX3Ux9w1Q.png"/></div></div></figure><p id="2957" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过扩展，您将获得:</p><ul class=""><li id="bea0" class="lo lp iq jp b jq jr ju jv jy lq kc lr kg ls kk lt lu lv lw bi translated">自动完成</li><li id="2508" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">你所有的快捷方式都有效</li><li id="7b71" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated">集成Git</li></ul><p id="55cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总而言之，当我开始在Apiary中记录API时，通过切换到VSCode扩展，它极大地提高了我记录的速度。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="dbc6" class="kl km iq bd kn ko mk kq kr ks ml ku kv kw mm ky kz la mn lc ld le mo lg lh li bi translated">托管您的文档</h1><p id="6577" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">虽然我真的很喜欢Swagger 2.0和OpenAPI规范格式，但Swagger文档在视觉上并没有特别吸引我。养蜂场确实提供了一个很好的主题:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nc"><img src="../Images/98af29289c503a9b2eda9ba2cb0702a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVvGaUU1g0xYg25uJx7pvw.png"/></div></div></figure><p id="9d59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们还没有一个存放文档的网站，这可能是我的第一选择。但是说到底，它只是一个页面，依赖第三方主机有点太多了。</p><h1 id="6530" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">输入ReDoc</h1><p id="77cb" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在花了一点时间查看各种主题和工具后，我找到了我最喜欢的——<strong class="jp ir">ReDoc</strong>(【https://github.com/Rebilly/ReDoc】T5)。)它提供了一个令人难以置信的好主题，该项目是活跃的，非常可定制。我选择ReDoc的主要原因是因为用它嵌入文档非常容易:</p><ol class=""><li id="5c48" class="lo lp iq jp b jq jr ju jv jy lq kc lr kg ls kk nd lu lv lw bi translated">把你的<em class="ne"> openapi.yaml </em>或者<em class="ne"> swagger.yaml </em>放在一个公共可访问的地方。在我们的例子中，我将它放在git repo中:<br/><a class="ae lx" href="https://github.com/webhookrelay/swagger-webhookrelay/blob/master/openapi.yaml" rel="noopener ugc nofollow" target="_blank">https://github . com/webhookreel/swagger-webhookreel/blob/master/open API . YAML</a><br/>将它存储在Git repo中提供了一个很好的功能——您可以编辑、推送它，它会一直保持最新，而无需重新部署您的网站。</li><li id="32de" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk nd lu lv lw bi translated">在您的网站中添加以下几行:</li></ol><pre class="mp mq mr ms gt nf ng nh ni aw nj bi"><span id="a31e" class="nk km iq ng b gy nl nm l nn no">&lt;script src=”https://cdn.jsdelivr.net/npm/<a class="ae lx" href="https://webhookrelay.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a>/bundles/redoc.standalone.js”&gt; &lt;/script&gt;</span><span id="a182" class="nk km iq ng b gy np nm l nn no">&lt;script&gt;<br/>Redoc.init(‘https://raw.githubusercontent.com/webhookrelay/swagger-webhookrelay/master/openapi.yaml', {</span><span id="d714" class="nk km iq ng b gy np nm l nn no">scrollYOffset: 60,</span><span id="a009" class="nk km iq ng b gy np nm l nn no">hideDownloadButton: true</span><span id="1173" class="nk km iq ng b gy np nm l nn no">}, document.getElementById(‘redoc’))</span><span id="9075" class="nk km iq ng b gy np nm l nn no">&lt;/script&gt;</span></pre><p id="730f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这样，您的API引用现在被托管:</p><figure class="mp mq mr ms gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nq"><img src="../Images/0729785fca5f50eb7aafbd1b6eda792a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mzvquBLqfo_PFkDiDGQizQ.png"/></div></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="2257" class="kl km iq bd kn ko mk kq kr ks ml ku kv kw mm ky kz la mn lc ld le mo lg lh li bi translated">结论</h1><p id="1a89" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">如果你选择正确的工具，而这些工具又不会拖你的后腿，那么编写你的API文档会非常有趣。在我们的例子中，我们使用了一个很好的编辑器，它具有针对OpenAPI规范定制的特性，向全世界发布API文档也是一种轻松的体验。</p><p id="8dbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显然，推荐的工具对我来说是最好的，我建议在你开始记录你自己的API之前，你也可以做30分钟的研究，在不同的编辑器、主题和主机上做一些试验。也许你会找到一些更适合你的其他组合。一天下来，选择合适的工装会节省你很多时间:)祝你好运！最坏的情况——一旦规范完成，就很容易尝试不同的主题和托管选项。</p><p id="d954" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里查看Webhook Relay API参考:<a class="ae lx" href="https://webhookrelay.com/api-reference/" rel="noopener ugc nofollow" target="_blank">https://webhookrelay.com/api-reference/</a>和Swagger规范在这里:<a class="ae lx" href="https://github.com/webhookrelay/swagger-webhookrelay" rel="noopener ugc nofollow" target="_blank">https://github.com/webhookrelay/swagger-webhookrelay</a>。</p><blockquote class="nr ns nt"><p id="b9dc" class="jn jo ne jp b jq jr js jt ju jv jw jx nu jz ka kb nv kd ke kf nw kh ki kj kk ij bi translated">【https://openapi-converter.herokuapp.com/】加成:Swagger 2.0到OpenAPI 3.0的转换器:<a class="ae lx" href="https://openapi-converter.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"><em class="iq"/></a></p></blockquote><h1 id="53a3" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">参考</h1><ul class=""><li id="6527" class="lo lp iq jp b jq lj ju lk jy nx kc ny kg nz kk lt lu lv lw bi translated"><a class="ae lx" href="https://trends.google.com/trends/explore?cat=13&amp;q=swagger,openapi,raml" rel="noopener ugc nofollow" target="_blank">https://trends.google.com/trends/explore?cat=13&amp;q = swagger，openapi，raml </a></li><li id="1546" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated"><a class="ae lx" href="https://swagger.io/blog/api-strategy/difference-between-swagger-and-openapi/" rel="noopener ugc nofollow" target="_blank">https://swagger . io/blog/API-strategy/difference-before-swagger-and-open API/</a></li><li id="61d9" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated"><a class="ae lx" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md#oasDocument" rel="noopener ugc nofollow" target="_blank">https://github . com/OAI/open API-Specification/blob/master/versions/3 . 0 . 0 . MD # OAS document</a></li><li id="60b9" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated"><a class="ae lx" href="https://nordicapis.com/top-specification-formats-for-rest-apis/" rel="noopener ugc nofollow" target="_blank">https://nordicapis . com/top-specification-formats-for-rest-API/</a></li><li id="d7b9" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated"><a class="ae lx" href="https://raml.org/" rel="noopener ugc nofollow" target="_blank">https://raml.org/</a></li><li id="1f1b" class="lo lp iq jp b jq ly ju lz jy ma kc mb kg mc kk lt lu lv lw bi translated"><a class="ae lx" href="https://github.com/Rebilly/ReDoc" rel="noopener ugc nofollow" target="_blank">https://github.com/Rebilly/ReDoc</a></li></ul></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="88e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ne">原载于2018年11月5日</em><a class="ae lx" href="https://webhookrelay.com/blog/2018/11/05/openapi-redoc-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="ne">webhookrelay.com</em></a><em class="ne">。</em></p></div></div>    
</body>
</html>