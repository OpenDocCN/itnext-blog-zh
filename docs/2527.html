<html>
<head>
<title>Testing APIs using advanced REST client — Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用高级REST客户端测试APIs第一部分</h1>
<blockquote>原文：<a href="https://itnext.io/testing-apis-using-advanced-rest-client-29edc785bfb1?source=collection_archive---------2-----------------------#2019-06-08">https://itnext.io/testing-apis-using-advanced-rest-client-29edc785bfb1?source=collection_archive---------2-----------------------#2019-06-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/c01237e25666177b1b495bd8d5989baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*gV9AeJImpGRTlDs_560erw.png"/></div></figure><p id="10ce" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在本文中，我想回顾一下REST客户端的种类。</p><p id="c8a0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我的例子中，我将使用资源<a class="ae ks" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/</a></p><p id="9260" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">JSONPlaceholder是一个免费的在线REST API，只要你需要一些假数据，就可以使用它。<br/>它非常适合教程、测试新库、分享代码示例。</p><p id="51db" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> REST </strong>客户端是一个允许使用REST API与远程服务器通信的应用程序/库。</p><p id="e74a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> REST(RESTful) </strong> —是应用/站点组织以及通过HTTP协议与服务器交互的一般原则。REST的特性是服务器不会记住用户在两次请求之间的状态——在每次请求中，都会传输标识用户的信息(例如，通过Oauth-authorization获得的令牌)和执行操作所需的所有参数。</p><p id="dab9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">REST API是一组对标准方法的远程调用，这些方法以特定的格式返回数据。</p><p id="f7ed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">1.<strong class="jw ir">放心是最常用的</strong>Java库，用于REST api测试自动化。这个库使得用Java进行REST测试类似于Groovy方法。这是一个强大的库，允许你创建测试，可读性更强，易于维护。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="5382" class="lc ld iq ky b gy le lf l lg lh">@Test<br/><strong class="ky ir">public void </strong>getCorrectData() {<br/>    given.get(<strong class="ky ir">"https://jsonplaceholder.typicode.com/users/1"</strong>)<br/>            .then()<br/>            .statusCode(200)<br/>            .and()<br/>            .assertThat()<br/>            .body(<strong class="ky ir">"name"</strong>, equalTo(<strong class="ky ir">"Leanne Graham"</strong>))<br/>            .body(<strong class="ky ir">"username"</strong>, equalTo(<strong class="ky ir">"Bret"</strong>))<br/>            .body(<strong class="ky ir">"email"</strong>, equalTo(<strong class="ky ir">"Sincere@april.biz"</strong>));<br/>}</span></pre><p id="2080" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> 2。弹簧座模板。如果你经常在项目中使用Java，并且知道什么是Spring framework，你可能听说过这个库的存在。</strong></p><p id="2464" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Spring是一个强大的框架。REST Template是一个很棒的库，您可以用它来创建REST客户端。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="d7bf" class="lc ld iq ky b gy le lf l lg lh">@Test<br/><strong class="ky ir">public void </strong>getCorrectData() {<br/>    RestTemplate restTemplate = <strong class="ky ir">new </strong>RestTemplate();<br/>    HttpHeaders httpHeaders = <strong class="ky ir">new </strong>HttpHeaders();<br/>    httpHeaders.setContentType(MediaType.APPLICATION_JSON);<br/>    httpHeaders.add(<strong class="ky ir">"User-Agent"</strong>, <strong class="ky ir">"chrome"</strong>);<br/>    HttpEntity httpEntity = <strong class="ky ir">new </strong>HttpEntity(httpHeaders);<br/>    ResponseEntity&lt;String&gt; responseEntity = restTemplate.exchange(<strong class="ky ir">"https://jsonplaceholder.typicode.com/users/1"</strong>,   GET, httpEntity, String.<strong class="ky ir">class</strong>);<br/>    assertThat(responseEntity.getStatusCode(), equalTo(HttpStatus.OK));<br/>}</span></pre><p id="48d4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> 3。retrieval</strong>是Android开发者中一个著名的网络库。一些开发人员甚至认为它是web开发/测试自动化的一种标准。如此受欢迎有很多原因:</p><p id="9ddc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">3.1这个库完美支持REST api。</p><p id="c25e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">3.2易于测试和配置。</p><p id="4353" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">3.3在它的帮助下，通过网络进行请求非常简单。</p><p id="56e3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">关键的库特性之一——执行同步和异步调用的能力。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="71cc" class="lc ld iq ky b gy le lf l lg lh">@Test<br/><strong class="ky ir">public interface </strong>getCorrectData {<br/>    @GET(<strong class="ky ir">"https://jsonplaceholder.typicode.com/users"</strong>)<br/>    <strong class="ky ir">public </strong>Call&lt;Post&gt; getPostWithID(@Path(<strong class="ky ir">"id"</strong>) <strong class="ky ir">int </strong>id);<br/>}</span></pre><p id="4b65" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> 4。Postman — </strong>不是框架也不是库，是Chrome浏览器的简单插件。这是一个简单方便的客户端，可以直接从浏览器发出请求。</p><p id="385f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> Postman </strong>的主要目的是创建API请求的集合。任何测试人员都可以通过打开集合很容易地理解服务的工作。</p><p id="5db5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上层操作邮差的收集和在底层操作请求的主要概念。所有请求都以一个集合开始，并最终使用查询来描述您的API。</p><p id="1a16" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">集合</strong>是新API的起点。您可以将集合视为项目文件的一部分。</p><p id="2005" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">文件夹</strong>用于将查询组合成一个<strong class="jw ir">集合</strong>中的一个组。</p><p id="8845" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">请求是<strong class="jw ir">系列</strong>的</strong>主要组成部分。<strong class="jw ir">请求</strong>是在<strong class="jw ir">构造器</strong>中创建的<strong class="jw ir">。查询设计器是您应该使用的主要空间。</strong></p><p id="63a3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Postman能够使用所有标准的HTTP方法执行请求。测试人员可以很容易地更改或添加必要的标题、cookies和请求体。</p><p id="796b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">下图显示了Postman中查询执行的顺序:</strong></p><p id="48a3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">“请求前脚本”用于在请求前执行必要的操作。例如，您可以对另一个系统进行查询，并在主查询中使用其执行结果。“测试脚本”用于编写:</p><ul class=""><li id="d31f" class="li lj iq jw b jx jy kb kc kf lk kj ll kn lm kr ln lo lp lq bi translated">测试。</li><li id="e0bc" class="li lj iq jw b jx lr kb ls kf lt kj lu kn lv kr ln lo lp lq bi translated">检查结果。</li><li id="f77a" class="li lj iq jw b jx lr kb ls kf lt kj lu kn lv kr ln lo lp lq bi translated">将测试结果保存到变量中。</li></ul><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lw"><img src="../Images/254136d3af65ecbd2a6be72556f9abd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bVrrb9yeJ0z2ePPt"/></div></div></figure><p id="f856" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">以下是脚本文件夹和集合的查询顺序:</strong></p><p id="22c0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Postman允许您在文件夹和收藏级别创建脚本。它们也被称为“请求前脚本”和“测试脚本”。它们将在文件夹或整个集合中的每个请求之前和之后执行。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mb"><img src="../Images/a7daf67fccb57fb66da8a40bb4bbc67b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7-VE_3x_xquJ8GJl"/></div></div></figure><p id="34d7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我将在下一个<a class="ae ks" href="https://medium.com/@antony.s.smirnov/testing-apis-using-advanced-rest-client-part-ii-4ff1b1d37960" rel="noopener">部分</a>中详细解释。</p></div></div>    
</body>
</html>