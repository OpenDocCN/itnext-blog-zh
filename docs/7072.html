<html>
<head>
<title>OracleXE 21c Docker Desktop Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OracleXE 21c Docker桌面扩展</h1>
<blockquote>原文：<a href="https://itnext.io/oraclexe-21c-docker-extension-95c25bec0f31?source=collection_archive---------3-----------------------#2022-06-01">https://itnext.io/oraclexe-21c-docker-extension-95c25bec0f31?source=collection_archive---------3-----------------------#2022-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6e07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用OracleXE 21c 的新<a class="ae kl" href="https://hub.docker.com/repository/docker/mochoa/oraclexe-docker-extension" rel="noopener ugc nofollow" target="_blank"> Docker桌面扩展已经准备就绪！！！</a></p><p id="29d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我解释了通过Docker扩展为开发者提供的生态系统的重要性之后，我决定为Oracle XE构建一个新的生态系统。</p><p id="c275" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与<a class="ae kl" href="https://hub.docker.com/repository/docker/mochoa/pgadmin4-docker-extension" rel="noopener ugc nofollow" target="_blank"> PGAdmn4扩展</a>不同，这一扩展背后的想法是只需点击一下鼠标，就可以使用本地Oracle XE 21c开发数据库。这个扩展看起来像:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/84e17cac330723388a991c44e6fdd05e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0piVQZRtyXShRynKRR4vg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">OracleXE Docker扩展EM Express登录屏幕</figcaption></figure><h1 id="840b" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">为什么我需要OracleXE Docker桌面扩展</h1><p id="547f" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">因为许多开发栈使用Oracle作为后端数据库，这些栈可能是PHP/Laravel、Java Spring Boot、NodeJs和许多其他栈，所以开发人员通常需要一个DB来连接他们的开发环境进行测试。</p><p id="6ff5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Oracle DB不是一个容易安装的RDBMS，即使使用Docker技术，Oracle XE也可以使用<a class="ae kl" href="https://hub.docker.com/r/gvenzl/oracle-xe" rel="noopener ugc nofollow" target="_blank">Gerald Venzl Oracle XE 21 . 3 . 0-full</a>优化映像下载并安装。</p><p id="8c05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除上述段落外，Oracle XE还包括EM Express，可轻松监控和诊断您的数据库，集成到Docker Desktop中的EM Express如下所示:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mf"><img src="../Images/ba1e8609b9cb0f3f66c88ed752a8b478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Lr1pi00septE3KYx"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">OracleXE EM Express欢迎页面</figcaption></figure><p id="af53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用EM Express，您可以在开发过程中使用一个工具来分析您的查询的影响，并在投入生产之前预测这些问题:)</p><h1 id="6e74" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">手动安装</h1><p id="2e8d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在Docker扩展中心准备好该扩展之前，您只需执行以下命令即可安装:</p><pre class="kn ko kp kq gt mg mh mi mj aw mk bi"><span id="e37f" class="ml ld iq mh b gy mm mn l mo mp">$ docker extension install <a class="ae kl" href="https://hub.docker.com/repository/docker/mochoa/oraclexe-docker-extension" rel="noopener ugc nofollow" target="_blank">mochoa/oraclexe-docker-extension:21.3.0</a><br/>Extensions can install binaries, invoke commands and access files on your machine. <br/>Are you sure you want to continue? [y/N] y<br/>Installing new extension "mochoa/oraclexe-docker-extension:21.3.0"<br/>Installing service in Desktop VM...<br/>Setting additional compose attributes<br/>VM service started<br/>Installing Desktop extension UI for tab "OracleXE"...<br/>Extension UI tab "OracleXE" added.<br/>Extension "OracleXE" installed successfully</span></pre><h2 id="1dba" class="ml ld iq bd le mq mr dn li ms mt dp lm jy mu mv lq kc mw mx lu kg my mz ly na bi translated"><strong class="ak"/></h2><pre class="kn ko kp kq gt mg mh mi mj aw mk bi"><span id="1214" class="ml ld iq mh b gy mm mn l mo mp">$ docker pull gvenzl/oracle-xe:21.3.0-full</span></pre><h2 id="8b35" class="ml ld iq bd le mq mr dn li ms mt dp lm jy mu mv lq kc mw mx lu kg my mz ly na bi translated">注意:需要Docker扩展CLI来执行上述命令，请按照<a class="ae kl" href="https://docs.docker.com/desktop/extensions-sdk/#prerequisites" rel="noopener ugc nofollow" target="_blank">扩展SDK(测试版)——&gt;先决条件</a>页面上的说明来添加它。</h2><h1 id="f17d" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">使用OracleXE Docker扩展</h1><p id="564d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">一旦扩展被安装，一个新的扩展被列在Docker桌面的面板扩展(Beta)中。</p><p id="5d44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过单击OracleXE图标，扩展主窗口将显示该扩展的运行情况</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/5c9b49090ee192f292b4acc41d587867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-9P8XfwdSR-rNdLS7Ie6xA.png"/></div></div></figure><p id="c721" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一次启动需要几秒钟，具体取决于您的硬件，这是因为OracelXE正在启动并创建数据库，进度指示栏将一直等到RDBMS准备就绪:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nc"><img src="../Images/0306b0b8fee1d52772024f457b877944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R0vvpPkGUs7hGhS7HOpYWg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">进度条指示器</figcaption></figure><p id="78fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显示OracleXE DB尚未就绪，当RDBMS就绪时，将自动加载EM登录屏幕。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/84e17cac330723388a991c44e6fdd05e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0piVQZRtyXShRynKRR4vg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">OracleXE EM Express登录屏幕</figcaption></figure><p id="56c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">登录屏幕会要求您输入<strong class="jp ir"> <em class="nd"> sys </em> </strong>密码(默认为<strong class="jp ir"> <em class="nd"> Oracle_2022 </em> </strong>)</p><p id="532a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要从外部Docker容器连接，我指的是不作为容器运行的应用程序，您可以使用<strong class="jp ir"> <em class="nd"> localhost:1521 </em> </strong>如快速启动页面中所述，如果您想从Docker桌面上运行的另一个容器连接，您必须使用OracleXE的内部IP，这可以在菜单中找到，设置- &gt;资源- &gt;网络- &gt; Docker子网， 在我的例子中是192.168.65.0/24，因此从Docker Desktop中运行的容器访问OracleXE的内部IP将是192.168.65.2，还有一个解析上述IP的内部DNS名称host.docker.internal。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ne"><img src="../Images/0f8d2d7ffb7807484c2b58e2a34f0ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TPgipRd1SJ0BXc1K"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">Docker桌面网络IP范围</figcaption></figure><p id="534f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">快速入门页面中的Java示例:</p><pre class="kn ko kp kq gt mg mh mi mj aw mk bi"><span id="a34d" class="ml ld iq mh b gy mm mn l mo mp">OracleDataSource ods = new OracleDataSource();<br/>ods.setURL("<strong class="mh ir"><em class="nd">jdbc:oracle:thin:@//localhost:1521/XEPDB1</em></strong>"); // jdbc:oracle:thin@//[hostname]:[port]/[DB service name]<br/>ods.setUser("<strong class="mh ir"><em class="nd">scott</em></strong>");<br/>ods.setPassword("<strong class="mh ir"><em class="nd">tiger</em></strong>");<br/>Connection conn = ods.getConnection();</span><span id="bb87" class="ml ld iq mh b gy nf mn l mo mp">PreparedStatement stmt = conn.prepareStatement("SELECT 'Hello World!' FROM dual");<br/>ResultSet rslt = stmt.executeQuery();<br/>while (rslt.next()) {<br/> System.out.println(rslt.getString(1));<br/>}</span></pre><p id="f883" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为Docker容器运行的Java应用程序的方法:</p><pre class="kn ko kp kq gt mg mh mi mj aw mk bi"><span id="b82b" class="ml ld iq mh b gy mm mn l mo mp">OracleDataSource ods = new OracleDataSource();<br/>ods.setURL("<strong class="mh ir"><em class="nd">jdbc:oracle:thin:@//host.docker.internal:1521/XEPDB1</em></strong>"); // jdbc:oracle:thin@//[hostname]:[port]/[DB service name]<br/>ods.setUser("<strong class="mh ir"><em class="nd">scott</em></strong>");<br/>ods.setPassword("<strong class="mh ir"><em class="nd">tiger</em></strong>");<br/>Connection conn = ods.getConnection();</span><span id="912a" class="ml ld iq mh b gy nf mn l mo mp">PreparedStatement stmt = conn.prepareStatement("SELECT 'Hello World!' FROM dual");<br/>ResultSet rslt = stmt.executeQuery();<br/>while (rslt.next()) {<br/> System.out.println(rslt.getString(1));<br/>}</span></pre><p id="6a7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，我使用的是历史用户<strong class="jp ir"> <em class="nd"> scott </em> </strong>，密码为<strong class="jp ir"> <em class="nd"> tiger </em> </strong>，该用户是在OracleXE首次启动时创建的。</p><h1 id="b9fd" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">体系结构</h1><p id="9e69" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">这个Docker扩展启动了两个容器，显然是OracleXE数据库和Caddy反向代理:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ng"><img src="../Images/7e53dd3010902e8f0b0c473a77f512b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MIjuKPLxhKp4mswB"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">码头集装箱运行</figcaption></figure><p id="4311" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Caddy是一个轻量级反向代理，用于以普通http与Oracle EM Express对话，Oracle EM Express使用https和Docker Desktop不支持的自签名证书，OracleXE可以配置为以普通http侦听，但比部署Caddy更复杂。</p><h1 id="c7d4" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">来源</h1><p id="1e49" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">像往常一样，这个扩展的代码在<a class="ae kl" href="https://github.com/marcelo-ochoa/oraclexe-docker-extension" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上，请随意提出修改建议并做出贡献，请注意，我是React和TypeScript的初级开发人员，因此欢迎为改进这个UI做出贡献。</p></div></div>    
</body>
</html>