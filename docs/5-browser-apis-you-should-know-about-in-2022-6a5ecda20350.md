# 2022 年你应该知道的 5 个浏览器 API

> 原文：<https://itnext.io/5-browser-apis-you-should-know-about-in-2022-6a5ecda20350?source=collection_archive---------0----------------------->

![](img/65229c41ccb5d22661d4a1472cc14bb8.png)

约瑟夫·巴里恩托斯在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

应用程序编程接口(API)是预定义的编程语言结构，允许开发人员以较少的努力构建复杂的功能。它们向程序员“隐藏”了更复杂的代码，提供了易用性。

浏览器 API 内置于 web 浏览器中，能够使用来自浏览器和计算机环境的数据来对该数据执行更复杂的操作。例如，地理定位 API 提供了易于使用的 JavaScript 结构来操作位置数据，因此，比方说，您可以在 Google 地图上标记您的位置。

在本文中，我们将考虑一些我认为最有趣的 API，这些 API 你可能还不知道。

# 交叉点观察器 API

交叉点观察器 API 允许 web 应用程序异步监视元素与其父级或视口文档范围的交叉点的变化。

历史上，检测单个元素的可见性或两个元素相对于彼此的可见性是一项困难的任务。解决这个问题的方法并不可靠，而且会降低浏览器的速度。然而，随着 web 的发展，解决这个问题的必要性也在增加，原因有很多，例如:

*   当滚动页面时，不及时加载图片或其他内容。
*   “无限滚动”网站的实现，其中内容是在向下滚动页面时加载的，而无需在页面之间切换。
*   广告可见性的报告，以便从中计算收入。
*   根据用户是否看到结果来决定是否运行某个过程或动画。

在过去，实现元素交集检测涉及到使用事件处理程序和循环，调用像*element . getboundingclientrect*这样的方法来收集关于每个受影响元素的必要信息。只要这些代码运行在主线程上，就会出现不同的性能问题。

使用示例:

暂停正在播放的视频，然后根据视频是否进入视口再次开始播放。

结果:只要视频在视窗中，它就会播放。

# 剪贴板 API

有一个新的 JavaScript API 用于异步剪贴板访问，它使用的规范仍在开发中。到目前为止，在 web 开发中，将文本复制到剪贴板的标准方法是 document.execCommand 方法。这种方法的主要缺点是它是一种同步阻塞操作。异步剪贴板 API 是基于承诺的，它的目标之一就是解决这个缺点。它的目标是给 web 开发者一个更容易使用的统一剪贴板 API。此外，这个 API 被设计为支持许多数据类型，而不仅仅是文本/纯文本。

将数据写入剪贴板是一个简单的操作，通过调用 clipboard 对象的 writeText 方法并向其传递适当的文本来实现。

readText 方法用于从剪贴板中读取数据。为了提高安全性，除了从剪贴板读取数据的页面必须在活动的浏览器选项卡中打开这一事实之外，用户还必须授予它额外的权限。第一次调用 readText 时，浏览器将自动请求此权限。

# 地理定位 API

地理定位 API 允许用户向 web 应用提供他们的位置，如果用户选择提供的话。出于隐私原因，将要求用户提供位置信息的许可。

例如，使用 Geolocation.getCurrentPosition()方法来确定用户的位置。

该方法采用一个必需参数和两个可选参数:success 是一个回调函数，在授予权限时接收一个 Position 对象 error 是一个回调函数，在拒绝访问时接收一个 PositionError 对象 options 是一个带有设置的对象。下面是它在代码中的样子:

# 性能 API

测量执行一个函数所花费的时间是证明一个机制的实现比另一个更有性能的好方法。这允许您确保函数的性能不会受到对代码所做的某些更改的影响。它还有助于发现应用程序的性能瓶颈。

Performance 接口通过 performance.now()方法提供对 DOMHighResTimeStamp 类型值的访问。该方法返回一个时间戳，指示文档开始存在以来的时间(毫秒)。此外，该指示器的精度约为 5 微秒(毫秒的几分之一)。

# 历史 API

Window DOM 对象通过 history 对象提供对当前浏览器会话历史的访问(不要与浏览器扩展的历史混淆)。它提供了有用的方法和属性，允许您在用户故事中来回导航并操作其内容。

要回顾历史:

```
window.history.back();
```

类似地，您可以向前移动(就像用户点击了“前进”按钮一样):

```
window.history.forward();
```

可以像这样向后移动 2 页:

```
window.history.go(-2);
```

看起来你可以前进两页:

```
window.history.go(2);
```

# 结论

在本文中，我们只考虑了浏览器 API 的一小部分。要更详细地了解，我建议去看这些 api 的文档。祝你项目发展成功！