<html>
<head>
<title>Dockerizing Java 10 Spring Boot app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dockerizing Java 10 Spring Boot应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/dockerizing-java-10-spring-boot-app-d21e95a348f6?source=collection_archive---------1-----------------------#2018-04-25">https://itnext.io/dockerizing-java-10-spring-boot-app-d21e95a348f6?source=collection_archive---------1-----------------------#2018-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/05a00be20c247edf5cf3f7e9cf7c0d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwL2-B5tBq-hkuQkt0l1YQ.png"/></div></div></figure><p id="c016" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我之前的<a class="ae kw" href="https://medium.com/@andrei.chernyshev/java-10-migration-story-cdc65c05bb5a" rel="noopener">文章</a>中，我一直在谈论使用<strong class="ka ir"> Java 10 </strong>来构建和运行你的<a class="ae kw" href="https://projects.spring.io/spring-boot/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"/></a>应用。现在是时候讨论如何将它放入Docker容器中了。更好地支持容器化是Java 10版本的主要特性之一。所以，我们走吧！</p><p id="cec6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个相当简单的过程，所以只需看看下面的代码片段:</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lb lc l"/></div></figure><p id="c987" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，你可以看到，我使用多阶段Docker构建文件。快速提示:Docker 17.05 或更高版本支持多阶段构建，但结果图像是向后兼容的(至少从我的经验来看)。在第一阶段，它从甲骨文下载<strong class="ka ir"> JDK </strong>，但是将你自己的副本存储在离你的构建服务器更近的地方是有意义的，因为它不是那么小——略小于200mb。因此，它被下载，解压缩，并准备使用。但没那么快。</p><p id="36db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可能还记得，<strong class="ka ir"> Java 9 </strong>给了我们模块系统，<strong class="ka ir"> JDK </strong>本身也是模块化的。这意味着我们不需要将整个<strong class="ka ir"> JDK </strong>投入生产，但是我们可以专门为我们的应用需求构建我们自己的条纹版本。为此提供了<code class="fe ld le lf lg b">jlink</code>工具。看看它在构建过程中是如何使用的。这里列出的模块应该足以运行一个典型的Spring Boot应用程序。在我的生产案例中，我也必须将<code class="fe ld le lf lg b">java.scripting, jdk.scripting.nashorn</code>放到列表中。</p><p id="1f09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在第二阶段，它复制前一阶段的结果，定义一些环境变量，暴露端口，复制<code class="fe ld le lf lg b">launch.sh</code>和应用程序的工件。根本不是火箭科学。</p><p id="fc0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我刚刚提到的<code class="fe ld le lf lg b">launch.sh</code>脚本:</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lb lc l"/></div></figure><p id="5e33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那只是一个小帮手，保证有所有重要的东西提供等等。但是，当然，这是可选的。</p><p id="f358" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这应该足以将你的应用程序投入生产。如果你有什么想法可以让它变得更好，请写下你的评论。</p></div></div>    
</body>
</html>