<html>
<head>
<title>Android 360 panorama</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安卓360全景</h1>
<blockquote>原文：<a href="https://itnext.io/android-360-panorama-cedbfb47a9e?source=collection_archive---------2-----------------------#2019-11-13">https://itnext.io/android-360-panorama-cedbfb47a9e?source=collection_archive---------2-----------------------#2019-11-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/2e42b462c186cabd96eb6719199b7c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nTerOfIUVNX7B-sk.gif"/></div></div></figure><p id="48d6" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi la translated">全景技术是近年来兴起的一项新技术。这是一种特殊的照片，可以捕捉到摄影师周围360度的所有视角，从左到右，从上到下。图像是疯狂的，封面照片就是例子之一。</p><p id="14cf" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">那么，作为一个Android开发者，我们如何在一个Android应用中展示一个360°全景图像呢？你的第一个想法可能是使用<code class="fe lj lk ll lm b">ImageView</code>。然而，<code class="fe lj lk ll lm b">ImageView</code>仅仅将360°全景显示为平面图像，并不能完全展示360°全景可以有多棒。</p><p id="a467" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">幸运的是，谷歌提供了一个很棒的库<strong class="ke iv"> Google VR SDK，</strong>它可以完美地布局360°全景，并根据用户姿势旋转图像。这个最低SDK版本是19，也就是Android 4.4。请参见下面的插图:</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj ln"><img src="../Images/51ee8b642ce8ddbc0602fe83ec33901a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*_QeP7c5Vo-Xe2ab09wE3bg.png"/></div></figure><p id="fe61" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在本文中，它涵盖了:</p><ol class=""><li id="71c3" class="ls lt iu ke b kf kg kj kk kn lu kr lv kv lw kz lx ly lz ma bi translated">360全景规格</li><li id="4c08" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">用<code class="fe lj lk ll lm b">&lt;VrPanaromaView&gt;</code>展示360°全景的程序</li><li id="09b1" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">Google VR SDK的局限性</li><li id="debd" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">隐藏不必要的<code class="fe lj lk ll lm b">ImageButton</code> s</li></ol></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h1 id="7e8d" class="mn mo iu bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">360全景规格</h1><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj nl"><img src="../Images/f6c66303d7a6562b626e33b30ee4051e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nmxygrxy8vJc-G9sTxNOYQ.png"/></div></div></figure><p id="ed30" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">360°全景图像的存储格式与普通图像相同，即<code class="fe lj lk ll lm b">jpeg</code>或<code class="fe lj lk ll lm b">gif</code>。但是，它的尺寸有一个特殊的标准。单幅图像的宽高比推荐为<strong class="ke iv"> 2:1 </strong>，立体图像的宽高比推荐为<strong class="ke iv">1:1</strong></p><p id="04aa" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在Google VR SDK中，有两个提高整体性能的建议:</p><ol class=""><li id="6fa9" class="ls lt iu ke b kf kg kj kk kn lu kr lv kv lw kz lx ly lz ma bi translated">jpeg 是改进压缩的推荐格式</li><li id="c18a" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">图像尺寸应该是2的幂；例如2048或4096</li></ol></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h1 id="543e" class="mn mo iu bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">展示360°全景的程序</h1><h2 id="9f99" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">步骤1:添加依赖关系</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure><h2 id="14d5" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">步骤2:添加<code class="fe lj lk ll lm b">&lt;VrPanoramaView&gt;</code>到布局</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure><h2 id="5502" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">第三步:<em class="oa">声明全景视图的</em>选项</h2><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure><p id="fed2" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">必须设置输入类型，以便告诉SDK以单声道模式或立体声模式渲染图像。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ob"><img src="../Images/9051b359cda3469ee5f634b2f1d0310f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTyUDTZdXB4Csl3ulwiw6A.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">单声道模式</figcaption></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj og"><img src="../Images/c28aa44279d60c0053a07049167e3157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BGErBq2M120VzieCyQtRHA.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">立体声模式</figcaption></figure><h2 id="faff" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">第四步(最后) :加载360°全景图像</h2><p id="77b8" class="pw-post-body-paragraph kc kd iu ke b kf oh kh ki kj oi kl km kn oj kp kq kr ok kt ku kv ol kx ky kz in bi translated"><strong class="ke iv">方法1:从磁盘加载</strong></p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure><p id="6c15" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated"><strong class="ke iv">方法2:来自网络的负载</strong></p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h1 id="5d12" class="mn mo iu bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">Google VR SDK的局限性</h1><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj om"><img src="../Images/3c5f06e03e9a4192fed0d9bddeceb1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZAESkYdLLGQ9RvWP1983AQ.png"/></div></div></figure><p id="119e" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">360°全景的旋转是根据陀螺仪感应到的方位信号来完成的。然而，陀螺仪在Android手机中不是必需的传感器，例如三星Galaxy J5 Prime (SM-G5700)。</p><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj on"><img src="../Images/7107f6464c2ca80f0610c75c3c4a2b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*9xA5bjJnPpAJ0ZCoFyNDUg.png"/></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">三星Galaxy J5 Prime (SM-G5700)的设备信息</figcaption></figure><p id="4c74" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">因此，如果没有陀螺仪，则<code class="fe lj lk ll lm b">VrPanoramaView</code>被冻结，纸板<code class="fe lj lk ll lm b">ImageButton</code>被自动隐藏。为了提供良好的用户体验，开发人员应在用户的设备不支持查看360°全景时通知用户:</p><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h1 id="78ee" class="mn mo iu bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">隐藏不必要的图像按钮</h1><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj og"><img src="../Images/9ac08aca2a0f69cfb6b466923bbce250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lQC-3sdsTUdb277R9O73g.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">全屏模式下的屏幕截图</figcaption></figure><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj og"><img src="../Images/0a90cb8613cc6e8b1f437402454f7871.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HMtZG81I9AFX1hq9clhobQ.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated"><vrpanoramaview>未处于全屏模式但尺寸与屏幕尺寸相同时的截图</vrpanoramaview></figcaption></figure><p id="53b0" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在<code class="fe lj lk ll lm b">VrPanoramaView</code>处总共显示了四个<code class="fe lj lk ll lm b">ImageButton</code>。</p><ol class=""><li id="32a8" class="ls lt iu ke b kf kg kj kk kn lu kr lv kv lw kz lx ly lz ma bi translated">关于虚拟现实视图按钮——引导用户进入系统浏览器并浏览<a class="ae oo" href="https://support.google.com/cardboard/answer/6383058?visit_id=637092127725341848-3313664669&amp;p=vrview&amp;rd=1" rel="noopener ugc nofollow" target="_blank">关于虚拟现实视图</a>网站</li><li id="339f" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">纸板按钮—切换到纸板浏览器模式</li><li id="693b" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">进入全屏按钮</li><li id="3d6a" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">退出全屏按钮</li></ol><h2 id="0455" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated"><strong class="ak">为什么我们要隐藏ImageButtons？</strong></h2><p id="b62f" class="pw-post-body-paragraph kc kd iu ke b kf oh kh ki kj oi kl km kn oj kp kq kr ok kt ku kv ol kx ky kz in bi translated">如果用户实际上根本不需要<code class="fe lj lk ll lm b">ImageButton</code> s，UX会受到很大影响。例如，“关于虚拟现实视图”按钮实际上是一个广告，将用户导向谷歌虚拟现实页面。换句话说，它让用户远离了我们的应用！此外，当<code class="fe lj lk ll lm b">VrPanoramaView</code>已经显示为屏幕大小或者甚至应用程序设计者不想包括此功能时，“进入全屏”按钮应该隐藏。</p><h2 id="13d6" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">破解<vrpanoramaview/></h2><figure class="lo lp lq lr gu jv gi gj paragraph-image"><div class="gi gj op"><img src="../Images/cb02c9ea5f3cbc117d5e902e1b5f9939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*IcyucrCL58BqeV-9C5QpPA.png"/></div></figure><p id="a912" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">然而，<code class="fe lj lk ll lm b">VrPanoramaView</code>中没有公共函数可以用来隐藏或禁用<code class="fe lj lk ll lm b">ImageButton</code>。唯一的方法是使用<code class="fe lj lk ll lm b">ViewGroup.getChildAt(index: Int)</code>函数来访问它们，并逐个设置它们的<code class="fe lj lk ll lm b">visibility</code>属性。</p><p id="8b06" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">下面是<code class="fe lj lk ll lm b">VrPanoramaView</code>的UI结构:</p><pre class="lo lp lq lr gu oq lm or os aw ot bi"><span id="1abf" class="nm mo iu lm b gz ou ov l ow ox">&lt;VrPanoramaView&gt;<br/>    &lt;FrameLayout&gt;<br/>        &lt;<!-- -->GLSurfaceView/&gt;<br/>        &lt;RelativeLayout&gt;<br/>            &lt;AppCompatImageButton/&gt; // Exit fullscreen button<br/>            &lt;AppCompatImageButton/&gt; // "About VR View" button<br/>            &lt;LinearLayout&gt;<br/>                &lt;AppCompatImageButton/&gt; // Cardboard button<br/>                &lt;AppCompatImageButton/&gt; // Enter fullscreen button<br/>            &lt;/LinearLayout&gt;<br/>        &lt;RelativeLayout&gt;<br/>        &lt;View/&gt;<br/>        &lt;UiLayer/&gt;<br/>    &lt;/FrameLayout&gt;<br/>&lt;/VrPanoramaView&gt;</span></pre><figure class="lo lp lq lr gu jv"><div class="bz fq l di"><div class="ny nz l"/></div></figure></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h1 id="0b73" class="mn mo iu bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">摘要</h1><ol class=""><li id="9419" class="ls lt iu ke b kf oh kj oi kn oy kr oz kv pa kz lx ly lz ma bi translated">Google VR SDK提供了一个易于使用的widget <code class="fe lj lk ll lm b">&lt;VrPanoramaView&gt;</code>来显示360°全景，并根据用户姿势完美地旋转图像。</li><li id="c1a2" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">360°全景图建议以<code class="fe lj lk ll lm b">jpeg</code>格式存储，尺寸为2的幂。宽高比应该是2:1。</li><li id="59d5" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">陀螺仪是<code class="fe lj lk ll lm b">&lt;VrPanoramaView&gt;</code>正常工作的必要传感器。开发人员应该在运行时检查陀螺仪的存在，以确保良好的用户体验。</li><li id="75f7" class="ls lt iu ke b kf mb kj mc kn md kr me kv mf kz lx ly lz ma bi translated">使用<code class="fe lj lk ll lm b">ViewGroup.getChildAt(index: Int)</code>功能访问不必要的<code class="fe lj lk ll lm b">ImageButton</code>并切换其可见性，以便将其从屏幕上移除。</li></ol></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h2 id="e72a" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">更多地了解我和我的学习模式</h2><div class="pb pc gq gs pd pe"><a href="https://blog.usejournal.com/how-do-i-become-a-programmer-from-a-biomedical-engineer-student-6696ff5f1c1f" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fp"><div class="pg ab ph cl cj pi"><h2 class="bd iv gz z fq pj fs ft pk fv fx it bi translated">我如何从一个生物医学工程专业的学生成为一名程序员？</h2><div class="pl l"><h3 class="bd b gz z fq pj fs ft pk fv fx dk translated">离开我的舒适区很有挑战性。从生物医学领域转向app编程，我经历了什么…</h3></div><div class="pm l"><p class="bd b dl z fq pj fs ft pk fv fx dk translated">blog.usejournal.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps ka pe"/></div></div></a></div></div><div class="ab cl mg mh hy mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="in io ip iq ir"><h1 id="caab" class="mn mo iu bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">参考:</h1><h2 id="6b26" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">1.谷歌VR SDK官方文档</h2><div class="pb pc gq gs pd pe"><a href="https://developers.google.com/vr/develop/android/get-started" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fp"><div class="pg ab ph cl cj pi"><h2 class="bd iv gz z fq pj fs ft pk fv fx it bi translated">面向Android的Google VR SDK快速入门| Google开发者</h2><div class="pl l"><h3 class="bd b gz z fq pj fs ft pk fv fx dk translated">使用Google VR SDK为Daydream和Cardboard构建应用程序。本指南向您展示如何为…设置Android Studio</h3></div><div class="pm l"><p class="bd b dl z fq pj fs ft pk fv fx dk translated">developers.google.com</p></div></div></div></a></div><h2 id="b0c8" class="nm mo iu bd mp nn no dn mt np nq dp mx kn nr ns nb kr nt nu nf kv nv nw nj nx bi translated">2.推荐的全景规格</h2><div class="pb pc gq gs pd pe"><a href="https://developers.google.com/vr/discover/360-degree-media" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fp"><div class="pg ab ph cl cj pi"><h2 class="bd iv gz z fq pj fs ft pk fv fx it bi translated">360媒体|谷歌VR |谷歌开发者</h2><div class="pl l"><h3 class="bd b gz z fq pj fs ft pk fv fx dk translated">单击并拖动鼠标在图像中移动。360媒体，由360视频和图像组成，是一个伟大的方式…</h3></div><div class="pm l"><p class="bd b dl z fq pj fs ft pk fv fx dk translated">developers.google.com</p></div></div><div class="pn l"><div class="pt l pp pq pr pn ps ka pe"/></div></div></a></div><p id="34d9" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如需了解更多信息，请在<a class="ae oo" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ myrik _ chow</a>关注我。感谢您阅读这篇文章。祝您愉快！😄</p></div></div>    
</body>
</html>