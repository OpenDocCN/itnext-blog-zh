<html>
<head>
<title>A Concept: Kubernetes based Private Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个概念:基于Kubernetes的私有云平台</h1>
<blockquote>原文：<a href="https://itnext.io/a-concept-kubernetes-based-private-cloud-platform-6ba9641c7e01?source=collection_archive---------0-----------------------#2020-06-30">https://itnext.io/a-concept-kubernetes-based-private-cloud-platform-6ba9641c7e01?source=collection_archive---------0-----------------------#2020-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b203f66dc23e88154ae8bedf03c5abd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nL-nJWZshzOy3dy6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kc" href="https://unsplash.com/@dariabesedina?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Daria Besedina </a>拍摄</figcaption></figure><p id="49d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在之前的博文<a class="ae kc" href="https://medium.com/@mykidong/cloud-native-data-platform-without-hadoop-installation-6254a8ea3473" rel="noopener">中已经介绍过一个不安装hadoop的云原生数据平台的概念https://medium . com/@ myki dong/cloud-native-data-platform-without-Hadoop-installation-6254 A8 ea 3473</a>。</p><p id="d2b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过这篇文章，我们了解了如何在Kubernetes上构建一个没有hadoop的数据平台。Hadoop的主要组件可以替换为替代品，例如，HDFS可以替换为可在Kubernetes上运行的Ceph、MinIO和Ozone等S3兼容对象存储，如果Spark是主要的计算执行引擎，YARN可以替换为Kubernetes。所有其他数据平台组件，如presto、hive on spark、kafka等都可以在Kubernetes上运行。</p><p id="c1cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，我将扩展这个概念，谈谈基于Kubernetes构建私有云平台。</p><h1 id="b087" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">基于Kubernetes的服务</h1><p id="2c93" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">首先，我们可以开始公开服务，如数据平台即服务和存储即服务的各个组件。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/0f6d55ea7f9ee621932a38793574ffbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wfzqYWDFxf599Z8Ekf2JA.png"/></div></div></figure><p id="b6c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们将RDB视为一项服务。有一些分布式数据库可以在Kubernetes上运行:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/0d233b54734bdfe2537b4274161c703f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9JRdyRmsdNsIDgVKYE1wAQ.png"/></div></div></figure><p id="dbcd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将RDB作为服务添加到我们的私有云平台，如下所示:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/d63046d91d20c55b11cb68d41333ac24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mmn0yohTeguUMZvFr9tJog.png"/></div></div></figure><p id="b52c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们为我们的私有云平台提供了一些服务。关于AI / EDA，我们可以从数据平台服务中检索一些组件，如Zeppelin和JupyterHub，我们可以将它们以AI as a Service的名称添加到服务中:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/fe12ad6539d325dd068fac238bf7c2f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hduDne-Lq5aTOPf02rqUAg.png"/></div></div></figure><p id="9efa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的私有云平台看起来相当不错。我们可以为用户提供一些合理的服务，例如，如果用户想要创建一个数据平台来开发一个数据湖，用户只需选择我们的私有云平台提供的服务就可以轻松实现。如果用户只是想得到一个EDA环境，一个JupyterHub将很容易为他创建。例如，为了从S3兼容的对象存储中获取blucket，将创建MinIO bucket。</p><h1 id="7f72" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在我们的私有云平台上部署一些场景</h1><p id="385b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们现在有了一个新的私有云平台。让我们尝试在我们的私有云平台上部署一些类似自助数据准备和电子商务推荐平台的场景。</p><h2 id="83f8" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated">自助数据准备</h2><p id="5ec9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">自助式数据准备是指无需数据工程师即可获取可用于执行AI/ML/DL算法的数据集的数据准备。</p><p id="4d83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的自助式数据准备架构如下所示:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/d60feb16c0952f8bec60bd33f5b18adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0rXO3vtu1sGQ6xgXX0XABQ.png"/></div></div></figure><p id="b8ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个数据准备的主要组件是作为计算引擎的Spark和作为存储的Ozone，并且Spark上的Hive可以暴露给BI。</p><p id="65ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在我们的平台上部署这种自助式数据准备:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/f21e6fece7500d3f613c91d5f20a5018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9k-itbJ8mRuLo-fgMSL85w.png"/></div></div></figure><h2 id="c872" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated">电子商务推荐平台</h2><p id="7960" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">来看看我的电商推荐平台:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/46b467124725381a18ae6902a11d705a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I9tak0EFPhs5T5FDqBPOtA.png"/></div></div></figure><p id="029b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的电商推荐平台通过分析用户行为事件来推荐商品。</p><p id="4cae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事件收集器将收集用户行为事件，如项目视图、购物车和订单。事件将被转发到Kafka之类的统一日志系统，Spark Streaming可以从该系统消费事件，在该系统中将执行流处理，并且处理后的流事件将被保存为delta lake to Ozone或Elasticsearch。在批处理层，将使用Spark完成数据准备过程，以构建将用于运行推荐算法的数据集。推荐数据的结果将被保存到Elaticsearch。通过对Elasticsearch的查询，API服务可以向用户提供推荐。</p><p id="de8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个推荐平台的组件有Spark，Kafka，Hive on Spark，Presto，Ozone，Elasticsearch也可以在Kubernetes上运行。</p><p id="1e00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果这个推荐平台部署在我们的私有云平台上，看起来是这样的:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/9b2b941b249ad7c82e08395bb26e17b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B1pdYRkmyi-hAhPZbN-3og.png"/></div></div></figure><h1 id="dd49" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="42ed" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">目前，我已经谈论了基于Kubernetes构建私有云平台。借助这一概念，您可以向组织中的用户提供服务，还可以消除对公共云提供商服务的依赖。上面提到的所有复杂的“即服务”事物，如数据平台组件、对象存储、EDA、RDB，都可以由Kubernetes以标准的方式进行管理。</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="bdf2" class="lb lc iq bd ld le nj lg lh li nk lk ll lm nl lo lp lq nm ls lt lu nn lw lx ly bi translated">参考</h1><ul class=""><li id="c491" class="no np iq kf b kg lz kk ma ko nq ks nr kw ns la nt nu nv nw bi translated"><a class="ae kc" href="https://github.com/cloudcheflabs/dataroaster" rel="noopener ugc nofollow" target="_blank">https://github.com/cloudcheflabs/dataroaster</a></li><li id="a9d8" class="no np iq kf b kg nx kk ny ko nz ks oa kw ob la nt nu nv nw bi translated">下面的演示展示了如何使用<a class="ae kc" href="https://github.com/cloudcheflabs/dataroaster" rel="noopener ugc nofollow" target="_blank">数据烘烤器</a>轻松创建一个数据平台，该平台由运行在Kubernetes上的hive metastore、spark thrift server、trino、redash和jupyterhub等组成。参见数据烘烤器演示:【https://youtu.be/AeqkkQDwPqY T4】</li></ul></div></div>    
</body>
</html>