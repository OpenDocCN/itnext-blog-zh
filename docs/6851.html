<html>
<head>
<title>How to extend Chart capabilities using AdvancedFormat?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用AdvancedFormat扩展图表功能？</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-extend-chart-capabilities-using-advancedformat-630c9052990?source=collection_archive---------2-----------------------#2022-03-21">https://itnext.io/how-to-extend-chart-capabilities-using-advancedformat-630c9052990?source=collection_archive---------2-----------------------#2022-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="69da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一次，我被要求用几个图表构建一个仪表板。其中一个图表需要多个y轴，这让我想到了<a class="ae kl" href="https://www.outsystems.com/forge/component-overview/4141/outsystems-charts" rel="noopener ugc nofollow" target="_blank"> OutSystems Charts </a>组件中更高级的选项。OutSystems图表基于<a class="ae kl" href="https://www.highcharts.com/" rel="noopener ugc nofollow" target="_blank"> Highcharts API </a>，并且可以选择通过向图表添加高级格式来扩展现有图表组件的功能。这种高级格式可以使用JSON的片段进行配置。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/d2d73d73c45f4f554541f1f60e86fdb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HAtdqq3Xhlrhqs0CWZ4Yvg.png"/></div></div></figure><p id="8909" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文是一个循序渐进的教程，它解释了如何使用OutSystems图表的高级格式来生成一个具有两个或更多不同y轴的图表。作为奖励，还有一个带演示的的<a class="ae kl" href="https://www.outsystems.com/forge/Component_Overview.aspx?ProjectId=12422" rel="noopener ugc nofollow" target="_blank">锻造组件，你可以作为参考。</a></p><p id="ae13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦您将一个图表组件拖放到<a class="ae kl" href="https://www.outsystems.com/downloads/" rel="noopener ugc nofollow" target="_blank"> OutSystems Service Studio </a>的屏幕上，您就有了一个强制输入，正如您在下面看到的，这就是SourceDataPointList。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/50d24f00a51c04e72d59138eef1c205a.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*u4XTe6yzWlUU8av6tvYGWQ.png"/></div></figure><p id="7cef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该输入参数代表应该显示的数据点。在基本图表中，您至少需要以下内容才能得到有意义的图表:</p><ul class=""><li id="0abe" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">标签</strong>:在x轴上可见的标签，例如工作日、月份或一个国家的不同地区。</li><li id="35f4" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">值</strong>:图形中某一点的值</li><li id="b8cb" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">数据系列名称</strong>:为了对数据进行分组，可以创建一个或多个系列。例子有:不同的群体，男性&amp;女性或不同的城市</li></ul><p id="770d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这些信息，您可以创建一个显示数据的图表，如下图所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/4a42a45104460819892efb3b9547ece4.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*eXiXQVyg9-2CLdJspfFpZw.png"/></div></figure><p id="15d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基于上图显示不同选项值的说明:</p><ul class=""><li id="2b08" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">标签</strong>:总公司、南分公司、西分公司</li><li id="5f2e" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">值</strong>:条形高度</li><li id="9411" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">数据系列名称</strong>:母&amp;公(结果在图例中，每个标签有多个条形)</li></ul><p id="8b57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们进入更高级的图表。</p><p id="8faa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设您需要实现不同类型的图表，例如，具有不同y轴的柱形图和折线图的组合。</p><p id="1d30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您想知道需要不同y轴的情况，请查看以下示例:</p><ul class=""><li id="1d67" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated">两个数据序列用<strong class="jp ir">相同的</strong>度量，但<strong class="jp ir">不同的</strong></li><li id="3e59" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">显示相对值和绝对值的两个数据系列</li><li id="fcd6" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">显示完全<strong class="jp ir">不同值的两个数据系列</strong></li></ul><p id="9eb3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们以下一个练习的最后一个例子为例，构建一个带有两个y轴的图表。我们将构建一个类似于图表的东西，您可以在<a class="ae kl" href="https://www.highcharts.com/demo/combo-multi-axes" rel="noopener ugc nofollow" target="_blank"> Highcharts演示</a>页面上找到它。我们提供了几个月的数据:</p><ul class=""><li id="c04a" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated">降雨</li><li id="5d55" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">海平面压力</li><li id="20aa" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated">温度</li></ul><p id="94e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们定义下面的结构——同样，它可以在<a class="ae kl" href="https://www.outsystems.com/forge/Component_Overview.aspx?ProjectId=12422" rel="noopener ugc nofollow" target="_blank">组件</a>中找到。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/5273e6b83dcfc109125d1071fb95ec8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*LZswFHU3SvZVecScXolJ0g.png"/></div></figure><p id="5b18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其次，创建一个客户端动作，可用于配置高级格式。它将有三个不同的列表来输入数据集。每个点和标签数据集一个列表，一个列表输出，用相同的结构返回数据点。这将是我们用作多y轴图表输入的列表。</p><p id="fd87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一步一步，看起来是这样的:</p><ol class=""><li id="2fb1" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk lp lf lg lh bi translated">将这三个列表附加到输出列表中。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/0e0db2543042aa4eef7af61e79be6bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*Nbn6oXrvsr2msKx7fBXb8g.png"/></div></figure><p id="423d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.定义图表始于:</p><p id="efd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过向y轴列表中添加y轴项目，定义每个列表的y轴，标题与每个列表的数据系列名称相匹配。有两件事需要注意:</p><ul class=""><li id="63b5" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">对面</strong>:y轴将出现的地方</li><li id="849d" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">可见</strong>:使y轴可见。请确保在结构中定义了它并将其设置为true。否则y轴就看不到了！相信我，我知道…</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/d001915ec10ba041b732401690db4699.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*ZkX14N4n_qB-CgKTTG41fg.png"/></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/d04d844c3f07bea4d9c280264197b27a.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*0yAYekiX36nod_XXPDy66Q.png"/></div></figure><p id="7c64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是当<strong class="jp ir">可见时</strong>值被设置为假:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lt"><img src="../Images/75882fa7a00e584f7b14d744f99192ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ON6zSK_DyuhIsNZIzNmkqg.png"/></div></div></figure><p id="310d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当visible值设置为true时，您实际上可以看到yAxis，而不是三者之间共享的一个，这实际上是我们的目标:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lu"><img src="../Images/7f731b402737c31b5ac9257e1a3f03ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQgP5AKTl17qlJtAEIkV6w.png"/></div></div></figure><p id="a0d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，添加其余图表对象元素的配置。当需要覆盖默认值时，可以向结构中添加更多配置。配置的其他选项可以在<a class="ae kl" href="https://www.highcharts.com/demo/combo-multi-axes" rel="noopener ugc nofollow" target="_blank"> Highchart </a> s的文档中找到。我在文章中使用了一些例子来给你一个可能性的基本概念。</p><p id="8c10" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，使用JSONserialize将刚刚创建的Structure对象(输出)转换为序列化的JSON字符串。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lv"><img src="../Images/8c3978a649938ea9e010d86f22bc9d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BxPl7PSsVPrt9X0HGoYSmA.png"/></div></div></figure><p id="f785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.配置数据系列和y轴外观的时间:</p><ul class=""><li id="dfea" class="kz la iq jp b jq jr ju jv jy lb kc lc kg ld kk le lf lg lh bi translated"><strong class="jp ir">数据系列名称</strong>:应与定义列表中的数据系列名称相匹配</li><li id="f612" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir"> DataseriesJSON </strong>:我输入下面的代码，并确保Name属性的值与数据系列名称相匹配。</li><li id="9ec1" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">名称</strong>:如上所述。</li><li id="7f32" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir">类型</strong>:定义你想要显示的图形类型。例如条形图、虚线或实线。您可以在示例中更好地探索它。</li><li id="c141" class="kz la iq jp b jq li ju lj jy lk kc ll kg lm kk le lf lg lh bi translated"><strong class="jp ir"> yAxis </strong>:从0开始，你要给每个yAxis一个数字，用它自己的值来表示，不与其他yAxis共享。</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lw"><img src="../Images/5d9082535481552d90530eb291d4d1f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZH9sroUZP44If0W_BVQ0MQ.png"/></div></div></figure><pre class="kn ko kp kq gt lx ly lz ma aw mb bi"><span id="1dc5" class="mc md iq ly b gy me mf l mg mh">“{</span><span id="9611" class="mc md iq ly b gy mi mf l mg mh">name: ‘“ + CollumChartData.Current.DataSeriesName +”’,</span><span id="5635" class="mc md iq ly b gy mi mf l mg mh">type: ‘column’,</span><span id="8a75" class="mc md iq ly b gy mi mf l mg mh">yAxis: 0</span><span id="c048" class="mc md iq ly b gy mi mf l mg mh">}”</span></pre><p id="68ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.最后，OutSystems默认拥有来自OutSystemsChart模块的AdvancedFormat_Init客户端函数。这用于用作为参数传递的值初始化AdvancedFormat记录。我们将使用输出，键入AdvancedFormat，并将其作为输入传递给图表输入参数AdvancedFormat</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mj"><img src="../Images/95bb6dc427ba9d977c9a2a764bea562c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTCQ0P8MXFlqJw2qLvpgqA.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/6fa98b1fc05077763ab292ec39a306da.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*jkYWkMqUzk7jFxucOakOPg.png"/></div></figure><p id="45fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们结束了。看看下面的图表就知道了。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ml"><img src="../Images/4681e2c92cba5b9f28a98b12f48b3895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O0IR_5MkHbYnBbtt7nwsuw.png"/></div></div></figure><p id="4ad8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在铁匠铺的<a class="ae kl" href="https://www.outsystems.com/forge/Component_Overview.aspx?ProjectId=12422" rel="noopener ugc nofollow" target="_blank">演示中找到更多细节，并以此为基础提高你的外部系统图表能力！</a></p></div></div>    
</body>
</html>