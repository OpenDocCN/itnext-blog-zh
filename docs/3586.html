<html>
<head>
<title>Laravel and Vue: Creating a Portfolio website with a CRUD admin panel — Chapter 16</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第16章</h1>
<blockquote>原文：<a href="https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-16-2ee3ffef1c32?source=collection_archive---------9-----------------------#2020-01-12">https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-16-2ee3ffef1c32?source=collection_archive---------9-----------------------#2020-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c9e5a989bcf27a6cae4a7475704bab68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QckeZGe8uhX5Hkx0N8HmTg.png"/></div></div></figure><div class=""/><div class=""><h2 id="d827" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">CV选择器</h2></div><p id="c1f2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们应该构建一个CVSelector组件，并将其作为AboutEditor的子组件。</p><p id="9c11" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">关于Editor.vue的模板:👇</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="7344" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;section <em class="me">id</em>="about-editor"&gt;<br/>        &lt;h1&gt;About Editor&lt;/h1&gt;<br/>        &lt;form <em class="me">enctype</em>="multipart/form-data" <em class="me">id</em>="about-form"&gt;<br/>            &lt;input <em class="me">type</em>="file" <em class="me">@change</em>="selectFile" <em class="me">name</em>="cv" <em class="me">accept</em>=".doc, .docx, .pdf" <em class="me">id</em>="cv_upload"&gt;<br/>            &lt;button <em class="me">@click.prevent</em>="onSubmit"&gt;Submit&lt;/button&gt;<br/>        &lt;/form&gt;<br/>        <strong class="lu jf">&lt;CVSelector/&gt;</strong><br/>    &lt;/section&gt;<br/>&lt;/template&gt;</span></pre><p id="a0fa" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">导入CVSelector组件并将其放入components块中</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="df3f" class="ly lz je lu b gy ma mb l mc md">&lt;script&gt;<br/>    <em class="me">import </em><strong class="lu jf">CVSelector</strong> <em class="me">from </em>'./<strong class="lu jf">CVSelector</strong>';<br/>    <em class="me">export default </em>{<br/>        name: 'AboutEditor',<br/>        components: {<br/>            <strong class="lu jf">CVSelector</strong><br/>        },<br/>....<br/>&lt;/script&gt;</span></pre><p id="ab05" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">CVSelector组件可以包含一个带有<code class="fe mf mg mh lu b"><strong class="kv jf">v-for</strong></code>循环的表。表格列的标题为<strong class="kv jf"> CV </strong>、<strong class="kv jf">选择</strong>和<strong class="kv jf">删除</strong>。CV列将有来自v-for循环的<code class="fe mf mg mh lu b"><strong class="kv jf">cv_path</strong></code> <strong class="kv jf"> </strong>。选择栏将有'<strong class="kv jf">选择cv' </strong>按钮<strong class="kv jf"> </strong>，删除栏将有<strong class="kv jf">'删除cv' </strong>按钮。</p><p id="d460" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">CVSelector.vue的模板:👇</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="401b" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;table&gt;<br/>        &lt;thead&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;CV&lt;/th&gt;<br/>            &lt;th&gt;Select&lt;/th&gt;<br/>            &lt;th&gt;Delete&lt;/th&gt;<br/>        &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>        &lt;tr <em class="me">v-for</em>="cv <em class="me">in </em>cvlist"&gt;<br/>            &lt;td&gt;{{cv.cv_path}}&lt;/td&gt;<br/>            &lt;td&gt;<br/>                &lt;button <em class="me">@click</em>="selectCVPopup(cv)"&gt;SELECT CV&lt;/button&gt;<br/>            &lt;/td&gt;<br/>            &lt;td&gt;<br/>                &lt;button <em class="me">@click</em>="deleteCVPopup(cv)"&gt;DELETE CV&lt;/button&gt;<br/>            &lt;/td&gt;<br/>        &lt;/tr&gt;<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>&lt;/template&gt;</span></pre><p id="78fa" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe mf mg mh lu b"><strong class="kv jf">cvlist</strong></code>应在数据()返回{}</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="523e" class="ly lz je lu b gy ma mb l mc md">data() {<br/>    <em class="me">return </em>{<br/>        cvlist: '',<br/>    }<br/>},</span></pre><p id="70cd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">获取cvlist的方法</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="b115" class="ly lz je lu b gy ma mb l mc md">getCVList() {<br/>    axios.get('/api/cvlist').then(<br/>        response =&gt; <em class="me">this</em>.cvlist = response.data<br/>    )<br/>},</span></pre><p id="0825" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">装载后运行该方法</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="3b2c" class="ly lz je lu b gy ma mb l mc md">mounted() {<br/>    <em class="me">this</em>.getCVList();<br/>},</span></pre><p id="12e2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">获取cvlist的api路径</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="56cc" class="ly lz je lu b gy ma mb l mc md">Route::<em class="me">get</em>('/cvlist', 'AboutController@getCVList');</span></pre><p id="f62b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">AboutController中的getCVList()函数应该获取所有的About表</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="6281" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>getCVList() {<br/>    <em class="me">return </em>About::<em class="me">all</em>();<br/>}</span></pre><p id="2e94" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在，如果我们访问该页面并上传几份简历，我们将会看到如下内容:</p><figure class="lp lq lr ls gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/1ce78c20730e6bbb2061bfd3b778be75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BHwh_b3Fh9pU9rnFsiH0jg.png"/></div></div></figure><p id="444b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在是构建selectCVModal的时候了。</p><h2 id="af0f" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">选择CVModal</h2><p id="d464" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">在桌子下面，我们可以有一个<strong class="kv jf"> selectCVModal </strong>组件。我们必须记住，我们只能拥有<strong class="kv jf"/><strong class="kv jf">一个根元素</strong>。这意味着我们必须将表和selectCVModal组件放在一个元素中，如下所示:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="ca75" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;div <em class="me">id</em>="cv-selector"&gt;<br/>        &lt;table&gt;<br/>          ...<br/>        &lt;/table&gt;<br/>        &lt;<strong class="lu jf">selectCVModal</strong> <em class="me">v-if</em>="<strong class="lu jf">selectCVModal</strong>" <em class="me">:cv</em>="cv"/&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="e72c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">与其他模态类似，这也依赖于一个为真的<strong class="kv jf">数据属性</strong>和一个通过属性的<strong class="kv jf">。在这种情况下，数据属性是<code class="fe mf mg mh lu b"><strong class="kv jf">selectCVModal</strong></code> <strong class="kv jf"> </strong>，传递的属性是<code class="fe mf mg mh lu b"><strong class="kv jf">cv</strong></code> <strong class="kv jf">。</strong></strong></p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="cf0f" class="ly lz je lu b gy ma mb l mc md">data() {<br/>    <em class="me">return </em>{<br/>        cvlist: '',<br/>        cv: '',<br/>        selectCVModal: <em class="me">false</em>,<br/>    }<br/>},</span></pre><p id="9cbb" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">selectCVModal应该有一个是/否问题。另一个模态，我们在是<strong class="kv jf">confirmdeletedemodal中有一个是/否问题。我们可以简单地复制组件并修改它以适应这种情况。</strong></p><p id="13b1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">以下修改以<strong class="kv jf">粗体</strong>显示</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="8939" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;transition <em class="me">name</em>="fade"&gt;<br/>        &lt;div <em class="me">id</em>="my-modal" <em class="me">class</em>="modal"&gt;<br/>            &lt;div <em class="me">class</em>="modal-body"&gt;<br/>                <strong class="lu jf">&lt;h1&gt;Select &lt;b <em class="me">style</em>="color:red"&gt;{{cv.cv_path}}&lt;/b&gt;?&lt;/h1&gt;</strong><br/>                &lt;div <em class="me">class</em>="btn-row"&gt;<br/>                    &lt;button <em class="me">@click</em>="confirm"&gt;Yes&lt;/button&gt;<br/>                    &lt;button <em class="me">@click</em>="cancel"&gt;No&lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/transition&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    <em class="me">export default </em>{<br/>        name: '<strong class="lu jf">selectCVPopup</strong>',<br/>        props: {<br/>            <strong class="lu jf">cv: ''</strong><br/>        },<br/>        methods: {<br/>            confirm() {<br/>                axios.post(<strong class="lu jf">`api/selectcv/${<em class="me">this</em>.cv.id}`</strong>).then(<br/>                    <strong class="lu jf"><em class="me">this</em>.$parent.selectCVModal = <em class="me">false</em></strong><em class="me"><br/>                </em>).then(<br/>                    <strong class="lu jf"><em class="me">this</em>.$parent.getCVList()</strong><br/>                )<br/>            },<br/>            cancel() {<br/>                <strong class="lu jf"><em class="me">this</em>.$parent.selectCVModal = <em class="me">false</em>;</strong><br/>            },<br/>        }<br/>    }<br/>&lt;/script&gt;</span></pre><p id="70e6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">选择cv的api路由应该包含/{id}</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="445f" class="ly lz je lu b gy ma mb l mc md">Route::<em class="me">post</em>('/selectcv/{id}', 'AboutController@selectCV');</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="61ff" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">在数据库中选择简历</h2><ul class=""><li id="f24f" class="nm nn je kv b kw na kz nb lc no lg np lk nq lo nr ns nt nu bi translated">选择简历的方法是让<strong class="kv jf">数据库记录</strong>有一些独特的不同</li><li id="483a" class="nm nn je kv b kw nv kz nw lc nx lg ny lk nz lo nr ns nt nu bi translated">具有唯一差异的<strong class="kv jf">记录可在路线上获得。</strong></li><li id="6c9f" class="nm nn je kv b kw nv kz nw lc nx lg ny lk nz lo nr ns nt nu bi translated">该特定记录的<code class="fe mf mg mh lu b"><strong class="kv jf">cv_path</strong></code> <strong class="kv jf"> </strong>将用于About.vue的脚本和模板中。</li></ul><h2 id="d96f" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">独特的差异</strong></h2><p id="edb7" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">我们可以添加一个<strong class="kv jf"> cv_active </strong>列。列的类型是<strong class="kv jf">布尔型</strong>(而不是通常的字符串列)。</p><p id="0296" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">布尔列包含<code class="fe mf mg mh lu b"><strong class="kv jf">1</strong></code>或<code class="fe mf mg mh lu b"><strong class="kv jf">0</strong></code>。</p><p id="52bc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所选cv 的<strong class="kv jf">布尔列将以<code class="fe mf mg mh lu b"><strong class="kv jf">1</strong></code>作为其值。</strong></p><p id="1bdd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其他cv的<strong class="kv jf">布尔列将使用<code class="fe mf mg mh lu b"><strong class="kv jf">0</strong></code>作为它们的值。</strong></p><p id="e0d5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们做一个迁移来添加布尔列。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="9e77" class="ly lz je lu b gy ma mb l mc md"><strong class="lu jf">php artisan make:migration AddCVActiveColumn</strong></span></pre><p id="e601" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在AddCVActiveColumn迁移的up()函数中:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="ba7a" class="ly lz je lu b gy ma mb l mc md">Schema::table('about', <em class="me">function </em>(Blueprint $table) {<br/>    $table-&gt;<strong class="lu jf">boolean</strong>('<strong class="lu jf">cv_active</strong>');<br/>});</span></pre><p id="670f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们迁移:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="54b4" class="ly lz je lu b gy ma mb l mc md"><strong class="lu jf">php artisan migrate</strong></span></pre><p id="93bc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在我们有了布尔列，我们应该编写控制器函数。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="64bb" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>selectCV() {<br/>    $id = request()-&gt;id;<br/>    About::<em class="me">where</em>('id', $id)-&gt;update(['cv_active' =&gt; 1]);<br/>    About::<em class="me">where</em>('id', '!=',$id)-&gt;update(['cv_active' =&gt; 0]);<br/>}</span></pre><blockquote class="oa ob oc"><p id="0a2d" class="kt ku me kv b kw kx kf ky kz la ki lb od ld le lf oe lh li lj of ll lm ln lo im bi translated">代码解释:当<code class="fe mf mg mh lu b"><strong class="kv jf">id</strong></code> <strong class="kv jf">列的值</strong>与所选cv 的<code class="fe mf mg mh lu b"><strong class="kv jf">id</strong></code> <strong class="kv jf">匹配时，将<code class="fe mf mg mh lu b"><strong class="kv jf">cv_active</strong></code>列变为<code class="fe mf mg mh lu b"><strong class="kv jf">1</strong></code>。哪里不匹配，就把cv_active列转到<code class="fe mf mg mh lu b"><strong class="kv jf">0</strong></code>。</strong></p></blockquote><h2 id="2bd8" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">渲染活动CV链接</h2><p id="ba97" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">现在我们必须修改AboutController的getCVPath()函数来获得cv，其中cv_active的值为1:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="2d63" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>getCVPath() {<br/>    <em class="me">return </em>About::<em class="me">all</em>()<br/>        -&gt;where('cv_active', 1)<br/>        -&gt;first()<br/>        -&gt;cv_path;<br/>}</span></pre><p id="d293" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在，您将获得渲染到about.vue组件上的活动CV链接。</p><p id="55c8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果你只是想显示最新上传的简历作为链接，而不是通过选择器。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="2098" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">显示没有CV选择器的最新CV</h2><p id="8fe3" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">我们可以在postAboutForm()函数中使用<code class="fe mf mg mh lu b"><strong class="kv jf">cv_active</strong></code>列，这样当我们上传cv时，cv的cv_active列显示为1。</p><p id="ac53" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">其他列可以通过使用<strong class="kv jf"> $about- &gt; id </strong>变为0(因为当您向数据库表中插入一行时，会自动生成一个id)。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="cbf4" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>postAboutForm(){<br/>    $file = request()-&gt;file('cv');<br/>    $originalName = $file-&gt;getClientOriginalName();<br/>    $file-&gt;storeAs('public/cvs', $originalName);<br/>    $about = <em class="me">new </em>About();<br/>    $about-&gt;cv_path = $originalName;<br/>    <strong class="lu jf">$about-&gt;cv_active = 1;<br/>    About::<em class="me">where</em>('id', '!=',$about-&gt;id)-&gt;update(['cv_active' =&gt; 0]);</strong><br/>    $about-&gt;save();<br/>}</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="dc77" class="ly lz je bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">deleteCVModal</h2><p id="1748" class="pw-post-body-paragraph kt ku je kv b kw na kf ky kz nb ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">本章最后要做的是deleteCVModal。它可以放在selectCVModal下，如下所示:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="e11f" class="ly lz je lu b gy ma mb l mc md">&lt;selectCVModal <em class="me">v-if</em>="selectCVModal" <em class="me">:cv</em>="cv"/&gt;<br/>&lt;deleteCVModal <em class="me">v-if</em>="deleteCVModal" <em class="me">:cv</em>="cv"/&gt;</span></pre><p id="49ad" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们将deleteCVModal添加到data() return {}中</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="d846" class="ly lz je lu b gy ma mb l mc md">data() {<br/>    <em class="me">return </em>{<br/>        cvlist: '',<br/>        cv: '',<br/>        selectCVModal: <em class="me">false</em>,<br/>        <strong class="lu jf">deleteCVModal: <em class="me">false</em>,</strong><br/>    }<br/>},</span></pre><p id="543f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">将其作为子组件导入CVSelector.vue</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="438b" class="ly lz je lu b gy ma mb l mc md"><em class="me">import </em>deleteCVModal <em class="me">from </em>'./deleteCVModal';</span></pre><p id="d8fc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">将它放在组件块中</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="7e3d" class="ly lz je lu b gy ma mb l mc md">components: {<br/>    selectCVModal,<br/>    <strong class="lu jf">deleteCVModal</strong><br/>},</span></pre><p id="0653" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">非常类似于selectCVModal。有一个值得注意的区别</p><p id="abf7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">需要注意的区别:我们用<code class="fe mf mg mh lu b"><strong class="kv jf">cv_path</strong></code> <strong class="kv jf"> </strong>代替id。我们将使用cv_path删除。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="348a" class="ly lz je lu b gy ma mb l mc md">&lt;template&gt;<br/>    &lt;transition <em class="me">name</em>="fade"&gt;<br/>        &lt;div <em class="me">id</em>="my-modal" <em class="me">style</em>="border: solid; z-index: 1" <em class="me">class</em>="modal"&gt;<br/>            &lt;div <em class="me">class</em>="modal-body"&gt;<br/>                <strong class="lu jf">&lt;h1&gt;Delete &lt;b <em class="me">style</em>="color:red"&gt;{{cv.cv_path}}&lt;/b&gt; from the cv list?&lt;/h1&gt;</strong><br/>                &lt;div <em class="me">class</em>="btn-row"&gt;<br/>                    &lt;button <em class="me">@click</em>="confirm"&gt;Yes&lt;/button&gt;<br/>                    &lt;button <em class="me">@click</em>="cancel"&gt;No&lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/transition&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    <em class="me">export default </em>{<br/>        props: {<br/>            cv: ''<br/>        },<br/>        methods: {<br/>            confirm() {<br/>                <strong class="lu jf">axios.delete(`api/cv/${<em class="me">this</em>.cv.cv_path}`)</strong>.then(<br/>                    <em class="me">this</em>.$parent.deleteCVModal = <em class="me">false<br/>                </em>).then(<br/>                    <em class="me">this</em>.$parent.getCVList()<br/>                )<br/>            },<br/>            cancel() {<br/>                <em class="me">this</em>.$parent.confirmDeleteModal = <em class="me">false</em>;<br/>            },<br/><br/>        },<br/>    }<br/>&lt;/script&gt;</span></pre><p id="b5db" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用cv_path路线删除cv</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="6e83" class="ly lz je lu b gy ma mb l mc md">Route::<em class="me">delete</em>('/cv/{cv_path}', 'AboutController@destroy');</span></pre><p id="6676" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">AboutController.php的销毁功能可以用来删除数据库记录和文件。</p><p id="10d9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Storage::delete正在使用cv_path删除文件。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="d8ca" class="ly lz je lu b gy ma mb l mc md"><em class="me">public function </em>destroy($cv_path) {<br/>    About::<em class="me">where</em>('cv_path', $cv_path)-&gt;delete();<br/>    Storage::<em class="me">delete</em>('public/cvs/' . $cv_path);<br/>}</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="ce4b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在第17章中，我们将创建一个联系表单。</p></div></div>    
</body>
</html>