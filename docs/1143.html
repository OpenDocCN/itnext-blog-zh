<html>
<head>
<title>Using Pimcore Shared-Translations with Vue i18n Plugin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Vue i18n插件使用Pimcore共享翻译</h1>
<blockquote>原文：<a href="https://itnext.io/using-pimcore-shared-translations-with-vue-i18n-plugin-8de345de5c00?source=collection_archive---------1-----------------------#2018-07-29">https://itnext.io/using-pimcore-shared-translations-with-vue-i18n-plugin-8de345de5c00?source=collection_archive---------1-----------------------#2018-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/c2538e667c79462ffb21cfee95bd556b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gY6g-KbpHx7Z4Pdq2sJjAw.jpeg"/></div></div></figure><div class=""/><p id="082e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如今，大多数web应用程序都包含一些用Javascript框架构建的组件，如Vue、React或Angular。将Pimcore后端与带有一些Javascript组件的响应式前端结合起来是一个非常强大且可伸缩的架构，我在我的大多数客户端项目中都在使用它。为什么？答案很简单——太棒了！Pimcore是一个“数据管理”平台，一个用Symfony构建的REST API(PIM core由Symfony 3.4支持)和一个带有一些Vue组件的前端。</p><p id="a2e3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Pimcore有一个很棒的功能，叫做“共享翻译”。它或多或少是Symfony Translator的扩展，但不是将翻译存储在文件系统上，而是存储在SQL数据库中。</p><blockquote class="kw kx ky"><p id="f1e1" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">这个解决方案是为前端到后端耦合的应用程序设计的。这意味着前端中的某些组件是用Vue构建的，而不是作为单页面应用程序构建的完整前端。</p></blockquote><p id="eadc" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">TL；DR；我们从数据库中读取翻译，对它们进行格式化，将它们推入JavaScript <code class="fe ld le lf lg b">window</code>对象，然后在Vue i18n插件配置中使用来自<code class="fe ld le lf lg b">window</code>对象的翻译。</p><h1 id="c658" class="lh li jb bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">准备</h1><p id="c91b" class="pw-post-body-paragraph jy jz jb ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">为了将翻译从数据库转移到Javascript <code class="fe ld le lf lg b">window</code>对象，我使用了一个名为<code class="fe ld le lf lg b">TranslationsDumper</code>的助手类。这个类从数据库中收集所有的翻译，并将它们作为一个递归数组返回，该数组按可用语言排序。</p><figure class="mk ml mm mn gt is"><div class="bz fp l di"><div class="mo mp l"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">转储翻译的助手类</figcaption></figure><p id="c16e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在在你的<code class="fe ld le lf lg b">services.yml</code>文件中将这个类注册为服务，并将其添加到你的<code class="fe ld le lf lg b">config.yml</code>中的Twig globals中。</p><figure class="mk ml mm mn gt is"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="d1f2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们需要以一种JavaScript组件可以全局使用的方式转储翻译。我是通过<code class="fe ld le lf lg b">window</code>对象来实现的。</p><figure class="mk ml mm mn gt is"><div class="bz fp l di"><div class="mo mp l"/></div></figure><blockquote class="kw kx ky"><p id="1311" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">重要提示:这个脚本标签需要放在包含您编译的Vue组件的<strong class="ka jc"> </strong>脚本标签之前<strong class="ka jc">。此外，我使用延迟枝扩展来延迟渲染这个块。点击此处阅读更多内容。<a class="ae mu" href="https://github.com/rybakit/twig-deferred-extension" rel="noopener ugc nofollow" target="_blank">https://github.com/rybakit/twig-deferred-extension</a></strong></p></blockquote><p id="c26e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在的现状是什么:</p><ul class=""><li id="fd24" class="mv mw jb ka b kb kc kf kg kj mx kn my kr mz kv na nb nc nd bi translated">我们可以从数据库中读取我们所有的翻译</li><li id="f375" class="mv mw jb ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">我们对翻译数据进行格式化，以便在后续步骤中使用</li><li id="6f2e" class="mv mw jb ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">我们只打印Pimcore后端支持的语言的翻译</li><li id="02bf" class="mv mw jb ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">在我们的JavaScript <code class="fe ld le lf lg b">window</code>对象中，所有翻译都是全局可用的。</li></ul><h1 id="094a" class="lh li jb bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">让我们打印那些翻译！</h1><p id="737d" class="pw-post-body-paragraph jy jz jb ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">首先，确保你已经安装了i18n。如果没有，现在就做→<a class="ae mu" href="https://github.com/kazupon/vue-i18n" rel="noopener ugc nofollow" target="_blank">https://github.com/kazupon/vue-i18n</a></p><p id="effe" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一步，我们需要在Vue组件中提供翻译。</p><figure class="mk ml mm mn gt is"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="6c35" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">优势</strong></p><ul class=""><li id="4693" class="mv mw jb ka b kb kc kf kg kj mx kn my kr mz kv na nb nc nd bi translated">i18n插件的语言环境链接到全局Symfony语言环境</li><li id="2d10" class="mv mw jb ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">翻译可以在Pimcore后端管理</li><li id="6e94" class="mv mw jb ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">使翻译作为JavaScript对象可用比通过AJAX调用获得翻译数据更快(没有闪烁…)</li></ul></div></div>    
</body>
</html>