<html>
<head>
<title>Microservices or Nanoservices?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务还是纳米服务？</h1>
<blockquote>原文：<a href="https://itnext.io/microservices-or-nanoservices-1debb02e3663?source=collection_archive---------0-----------------------#2022-11-16">https://itnext.io/microservices-or-nanoservices-1debb02e3663?source=collection_archive---------0-----------------------#2022-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f380ac157bd94cb4fcb578f34395bfaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UXEisOLxtwqHT0fxAJ3EHA.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">里克·梅森在<a class="ae kf" href="https://unsplash.com/s/photos/lego-mess?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1dfd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快到2022年圣诞节了，软件开发行业吸取了很多教训。其中之一是巨石柱是邪恶的。但是如果我们走另一个极端，提供了太多的服务，那会怎么样呢？这是我们要反思的。</p><p id="9224" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">整体缺点</p><ul class=""><li id="b646" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">一个大的部署导致部署延迟和协调。</li><li id="f4be" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">一个大的扩展模型，与每个服务的微服务可扩展性相比。</li><li id="bbf7" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">因为它是一个大的代码库，所以耦合可能会导致更新依赖关系甚至编程语言选择的困难。</li></ul><p id="523f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，现在的神圣银弹是微服务，而不是单片，它解决了单片的缺点。但是我们需要明白的是，<strong class="ki iu">软件工程是一个权衡取舍的职业</strong>，那么微服务有哪些弊端呢？</p><ul class=""><li id="37c4" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">代码被分割在多个存储库中。调试或理解需要跳。</li><li id="9cd7" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">API调用而不是模块调用增加了网络延迟和更复杂的错误处理。</li><li id="38ef" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">将建立多个管道、监控和警报。</li></ul><p id="a8a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么，如果我们有这些缺点，并通过制造许多迷你服务使它们成倍恶化，那又会怎样呢？我们称之为纳米服务。</p><h1 id="89cf" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">我说的纳米服务是什么意思？</h1><p id="7e44" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">假设有一个微服务从队列中读取消息并发送电子邮件。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/6eccc29162ed49922e13cd9447a6e43d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*mM8dE8BPs4TwQBqEQ1-H6Q.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">向SMTP服务器发送电子邮件的队列</figcaption></figure><p id="0e61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种微服务的成本是否合理？</p><ul class=""><li id="11cd" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">监视</li><li id="75ad" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">建设管道</li><li id="d404" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">维护文档</li></ul><p id="f31c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我强烈反对，发送电子邮件的代码有5-10行长。为什么我们要投资数百条管线来部署5-10条管线？</p><p id="9d88" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个服务应该与代码的其他部分放在一起，可能在一个通信域中，或者给想要发送电子邮件的消费者。</p><h1 id="2f93" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">重量类比</h1><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/06636d9c53145a5e395f93e14b514cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3MCd5in8rw2Xb8c0wCIbg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">维克多·弗雷塔斯在<a class="ae kf" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ec4d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们想象一下，我们可以将我们的软件量化为权重。对于一家电子商务公司来说，500公斤的重量代表软件的复杂性，8公斤的支撑条代表管道、监控和警报。</p><p id="dcb3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们把这些都放在一个酒吧里，那就太重了。它需要多人抬起，团队间的协调和部署不经常进行，因为太重而无法移动。</p><p id="056d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们可以将500公斤分成更小的重量，达到另一个极端。让我们把500公斤的杠铃分成2公斤，放在每根杠铃上。所以现在我们可以举起250个小重物，不是更容易吗？现在我们有500公斤的重量加上250个8公斤的杠铃，总共2000公斤杠铃。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/21ff1aba35a5839936dace02df94aa07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GePoAu6Ww-Rhv8E1"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@weareambitious?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">雄心勃勃的创意公司——Rick Barrett</a>拍摄于<a class="ae kf" href="https://unsplash.com/s/photos/weight-bar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><h2 id="7e37" class="nc lt it bd lu nd ne dn ly nf ng dp mc kr nh ni mg kv nj nk mk kz nl nm mo nn bi translated">平衡是关键</h2><p id="0a4e" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">我们知道，一杠508 KG太多了，250的重量会给我们过多的额外杠。目标是找到正确的平衡。也许这500公斤可以分成10根杠，这就增加了额外的72公斤杠，但总的来说，这是值得的，因为我们现在可以更快更独立地移动这500公斤。</p><p id="2976" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也许搬进20间酒吧会更好。不知道。它因情况而异。我希望你考虑一下你为每项服务支付的额外费用。所以你的团队不需要携带太多额外的8公斤杠铃，或者他们做出了明智的决定。</p><p id="4e3a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在划分服务时，您可以问一些微服务味道的问题:</p><ul class=""><li id="2f99" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">两个服务需要相同的数据库吗？</li><li id="dcdc" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">对你来说测试一个服务，它需要经过另一个服务吗？</li><li id="6c2a" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">一个服务只能被另一个服务使用吗？几乎是作为一门私课？</li><li id="803f" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">服务责任是琐碎的工作吗？比如邮件发送的例子？</li></ul></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="7eae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想更精通微服务，了解更多关于最佳服务规模的信息，我推荐两个资源:</p><ul class=""><li id="1a1d" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated"><a class="ae kf" href="https://www.youtube.com/watch?v=wgdBVIX9ifA&amp;ab_channel=GOTOConferences" rel="noopener ugc nofollow" target="_blank">微服务马丁福勒GOTO 2014 </a></li><li id="732f" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">Sam Newman的构建微服务</li></ul><p id="d76d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快乐工程。</p></div></div>    
</body>
</html>