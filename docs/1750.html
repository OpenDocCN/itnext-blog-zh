<html>
<head>
<title>Automated and Accessibility Testing with WebdriverIO (v5) and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用WebdriverIO (v5)和TypeScript进行自动化和可访问性测试</h1>
<blockquote>原文：<a href="https://itnext.io/automated-testing-with-webdriverio-and-typescript-a0879e1ba8e8?source=collection_archive---------4-----------------------#2019-01-18">https://itnext.io/automated-testing-with-webdriverio-and-typescript-a0879e1ba8e8?source=collection_archive---------4-----------------------#2019-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3e0bdfa8f9d07711bd025bf295e74b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_rxelA466B7CplwQeBNaA.png"/></div></div></figure><p id="04be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用JavaScript太棒了。利用<a class="ae kw" href="https://webdriver.io/docs/boilerplate.html#dalenguyen-webdriverio-typescript-boilerplate-https-githubcom-dalenguyen-webdriverio-typescript-boilerplate" rel="noopener ugc nofollow" target="_blank"> TypeScript在WebdriverIO </a>中编写测试用例怎么样？</p><p id="41d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">为什么使用TypeScript而不是JavaScript？</strong></p><p id="1c63" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我相信你只要谷歌一下就知道为什么了。简而言之，它将有助于编写更好的代码，静态类型，类，接口，像Visual Studio代码一样的实时IDE支持…如果你看到一些不使用“类型”的TypeScript项目，他们没有获得TypeScript的主要核心。</p><p id="7648" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在Github 上构建了一个<a class="ae kw" href="https://github.com/dalenguyen/WebdriverIO-TypeScript-Boilerplate" rel="noopener ugc nofollow" target="_blank"> Webdriver TypeScript样板文件，你可以马上克隆并将其用于你的项目。如果您有任何建议、问题或贡献，请随意创建票证；)</a></p><div class="kx ky gp gr kz la"><a href="https://github.com/dalenguyen/WebdriverIO-TypeScript-Boilerplate" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab fo"><div class="lc ab ld cl cj le"><h2 class="bd ir gy z fp lf fr fs lg fu fw ip bi translated">dalen guyen/web driver io-TypeScript-Boilerplate</h2><div class="lh l"><h3 class="bd b gy z fp lf fr fs lg fu fw dk translated">这个项目将向你展示如何用WebdriverIO和TypeScript启动你的UI自动化测试…</h3></div><div class="li l"><p class="bd b dl z fp lf fr fs lg fu fw dk translated">github.com</p></div></div><div class="lj l"><div class="lk l ll lm ln lj lo jw la"/></div></div></a></div><p id="7d2a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">特性</strong></p><ul class=""><li id="c7ac" class="lp lq iq ka b kb kc kf kg kj lr kn ls kr lt kv lu lv lw lx bi translated">用于管理测试用例的页面对象模型</li><li id="d60c" class="lp lq iq ka b kb ly kf lz kj ma kn mb kr mc kv lu lv lw lx bi translated">测试用摩卡+柴</li><li id="3b2f" class="lp lq iq ka b kb ly kf lz kj ma kn mb kr mc kv lu lv lw lx bi translated">与<a class="ae kw" href="https://webdriver.io/docs/allure-reporter.html" rel="noopener ugc nofollow" target="_blank">倾城</a>的互动报道</li><li id="dd1a" class="lp lq iq ka b kb ly kf lz kj ma kn mb kr mc kv lu lv lw lx bi translated">使用Axe-core进行可访问性测试</li></ul><p id="a5b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">例题</strong></p><p id="5cce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我使用模型来创建网站的界面。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="6aff" class="mm mn iq mi b gy mo mp l mq mr">// models/ts<br/>export interface Test {<br/>  alias: string;<br/>  title: string;<br/>}</span></pre><p id="ff6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于页面对象模型</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="8b82" class="mm mn iq mi b gy mo mp l mq mr">// pages/test.page.ts</span><span id="e0c8" class="mm mn iq mi b gy ms mp l mq mr">import { expect } from "chai";<br/>import { Test } from "./../models";<br/>import { Element } from "webdriverio";</span><span id="573c" class="mm mn iq mi b gy ms mp l mq mr">class TestPage {<br/>  private test: Test = null;<br/>  private editBtn: string;</span><span id="4970" class="mm mn iq mi b gy ms mp l mq mr">  constructor() {<br/>    this.test = {<br/>      alias: "/docs/api.html",<br/>      title: "API Docs · WebdriverIO"<br/>    };<br/>    this.editBtn = ".edit-page-link";<br/>  }</span><span id="656f" class="mm mn iq mi b gy ms mp l mq mr">  getTestAlias(): string {<br/>    return this.test.alias;<br/>  }</span><span id="10bd" class="mm mn iq mi b gy ms mp l mq mr">  private getEditBtnEl(): Element&lt;void&gt; {<br/>    console.log("Btn:", $(this.editBtn).getText());<br/>    return $(this.editBtn);<br/>  }</span><span id="2c2e" class="mm mn iq mi b gy ms mp l mq mr">  assertPageTitle(): void {<br/>    expect(browser.getTitle()).to.equal(this.test.title);<br/>  }</span><span id="e917" class="mm mn iq mi b gy ms mp l mq mr">  assertEditBtn(): void {<br/>    const editBtn = this.getEditBtnEl();</span><span id="0d43" class="mm mn iq mi b gy ms mp l mq mr">expect(editBtn.getAttribute("href")).to.be.equal("<a class="ae kw" href="https://github.com/webdriverio/webdriverio/edit/master/docs/API.md" rel="noopener ugc nofollow" target="_blank">https://github.com/webdriverio/webdriverio/edit/master/docs/API.md</a>");<br/>  }<br/>}</span><span id="728f" class="mm mn iq mi b gy ms mp l mq mr">const testPage = new TestPage();<br/>Object.freeze(testPage);<br/>export default testPage;</span></pre><p id="470c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于真正的测试用例</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="60b2" class="mm mn iq mi b gy mo mp l mq mr">// test/test.page.spec.ts</span><span id="15d3" class="mm mn iq mi b gy ms mp l mq mr">import testPage from "./../pages/test.page";</span><span id="2d9e" class="mm mn iq mi b gy ms mp l mq mr">describe("webdriver.io API Docs page", () =&gt; {<br/>  before(() =&gt; {<br/>    browser.url(testPage.getTestAlias());<br/>  });</span><span id="52bb" class="mm mn iq mi b gy ms mp l mq mr">it("should have the right title", () =&gt; {<br/>    testPage.assertPageTitle();<br/>  });</span><span id="16b9" class="mm mn iq mi b gy ms mp l mq mr">it("assert edit button", () =&gt; {<br/>    testPage.assertEditBtn();<br/>  });<br/>});</span></pre><p id="e67c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">无障碍测试</strong></p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="8989" class="mm mn iq mi b gy mo mp l mq mr">// This example follows WCAG 2.0 Level A</span><span id="66e2" class="mm mn iq mi b gy ms mp l mq mr">import { source } from 'axe-core';<br/>import { expect } from 'chai';</span><span id="b2a3" class="mm mn iq mi b gy ms mp l mq mr">// Advoid type checking for axe<br/>declare const axe: any;</span><span id="2654" class="mm mn iq mi b gy ms mp l mq mr">describe('Axe test', () =&gt; {<br/> it('Should return results', () =&gt; {<br/>  browser.url('/');</span><span id="ac99" class="mm mn iq mi b gy ms mp l mq mr">  // inject the script<br/>  browser.execute(source);<br/>  <br/>  // <a class="ae kw" href="https://github.com/dequelabs/axe-core/blob/develop/doc/API.md" rel="noopener ugc nofollow" target="_blank">https://github.com/dequelabs/axe-core/blob/develop/doc/API.md</a><br/>  const options = { runOnly: { type: 'tag', values: ['wcag2a'] } };<br/>  // run inside browser and get results<br/>  const results = browser.executeAsync((options, done) =&gt; {<br/>   axe.run(document, options, function(err, results) {<br/>    if (err) throw err;<br/>    done(results);<br/>   });<br/>  }, options);<br/>  <br/>  expect(results.violations.length).to.be.equal(<br/>   0,<br/>   `${browser.getUrl()} doesn't pass Accessibility test`<br/>  );<br/> });<br/>});</span></pre><p id="7cb3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果有任何你不能用TypeScript实现的情况，请创建一个标签，我会尽我所能帮助你:)</p></div></div>    
</body>
</html>