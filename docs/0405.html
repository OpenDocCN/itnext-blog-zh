<html>
<head>
<title>Kubernetes on IBM Cloud: Building a Cloud Native Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IBM Cloud上的Kubernetes:构建云原生应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/kubernetes-on-ibm-cloud-building-a-cloud-native-application-ba70439bd8d0?source=collection_archive---------7-----------------------#2018-03-05">https://itnext.io/kubernetes-on-ibm-cloud-building-a-cloud-native-application-ba70439bd8d0?source=collection_archive---------7-----------------------#2018-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="dcdd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用Node.js、Express、MongoDB和一些想象力</p><p id="993d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个代码模式中，我们将构建一个由一组相互通信的微服务组成的虚拟数字银行。我们将使用Node.js、Express、MongoDB和IBM Cloud Container服务。</p><p id="3fb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">被分解成一组<a class="ae kl" href="http://microservices.io/" rel="noopener ugc nofollow" target="_blank">微服务</a>的<a class="ae kl" href="https://www.cncf.io/blog/2017/05/15/developing-cloud-native-applications/" rel="noopener ugc nofollow" target="_blank">云原生应用</a>的开发被誉为软件开发方法中的最佳实践。像<a class="ae kl" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>这样支持云计算的软件栈因此受到了相当多的欢迎。</p><p id="eb53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，尝试构建一个所谓的云原生应用比谈论一个更有趣。</p><p id="b773" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以这是我们的尝试:</p><p id="fb40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将采用一个在现实世界中比较熟悉的用例——数字银行。自然受到<a class="ae kl" href="http://monzo.com/" rel="noopener ugc nofollow" target="_blank"> Monzo </a>的启发。姑且称之为创新吧。</p><p id="daa5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="http://ibm.biz/digibank" rel="noopener ugc nofollow" target="_blank">在IBM Cloud的kubernetes集群上部署了一个实时版本，您可以在这里试用</a>。要测试它，注册一个帐户。系统会定期运行一个进程来转储用户帐户的随机交易和账单，因此需要几分钟时间来刷新以查看您填写的个人资料。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/675f147df5910383bbd5901a0022d70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GQwRqhkzqmAlvYnPrrJo1Q.png"/></div></div></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kz"><img src="../Images/64970ecfb921a0fba7fe1c9639beccbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FqWEa4z0Jkf-unLUFGAYhw.png"/></div></div></figure><h1 id="bafa" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">学习目标</h1><p id="fd54" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">完成此代码模式后，您将了解如何:</p><ul class=""><li id="0fe8" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated">将应用程序分解为一组微服务</li><li id="77c6" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">在IBM Cloud上创建和管理Kubernetes集群</li><li id="6e91" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">部署到IBM Cloud上的Kubernetes集群</li><li id="2511" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">部署到IBM私有云</li></ul><h1 id="d51a" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">流动</h1><p id="dccb" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">当考虑业务能力时，我们想象中的银行将需要以下一组微服务:</p><ol class=""><li id="a71d" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mr mj mk ml bi translated"><em class="km">门户:</em>加载UI并负责用户会话。核心功能依赖于所有其他微服务。</li><li id="18b5" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><em class="km">认证:</em>处理用户配置文件的创建，以及登录&amp;注销。</li><li id="7c1b" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><em class="km">帐户:</em>处理用户银行帐户的创建、管理和检索。</li><li id="48cf" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><em class="km">交易:</em>处理用户银行账户交易的创建和检索。</li><li id="204a" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><em class="km">账单:</em>处理账单的创建、支付和检索。</li><li id="8ef3" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><em class="km">支持:</em>处理与Watson Assistant的通信，以启用支持聊天功能。</li></ol><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ms"><img src="../Images/a553a9ac7b92dfa780198e84b388b290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFk2pdRB7N5vLyt2iWvyYA.png"/></div></div></figure><h1 id="b200" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">包括的组件</h1><ul class=""><li id="a00b" class="md me iq jp b jq ly ju lz jy mt kc mu kg mv kk mi mj mk ml bi translated"><a class="ae kl" href="https://console.bluemix.net/doc/source/images/containers/container_index.html" rel="noopener ugc nofollow" target="_blank">IBM Cloud Container Service</a>:IBM Bluemix Container Service管理IBM Cloud上Docker containers和Kubernetes集群内的高可用性应用。</li><li id="e23b" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://console.bluemix.net/doc/source/images/containers/container_index.html" rel="noopener ugc nofollow" target="_blank"> Kubernetes集群</a>:创建和管理您自己的云基础设施，并将Kubernetes用作您的容器编排引擎。</li><li id="39ad" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://developer.ibm.com/microservice-builder" rel="noopener ugc nofollow" target="_blank">微服务构建器</a>:在微服务框架中学习、构建、运行和管理应用。</li><li id="59cd" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">沃森助手:用一个程序创建一个聊天机器人，通过听觉或文本方式进行对话。</li></ul><h1 id="84dc" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">特色技术</h1><ul class=""><li id="8b5f" class="md me iq jp b jq ly ju lz jy mt kc mu kg mv kk mi mj mk ml bi translated"><a class="ae kl" href="https://www.ibm.com/developerworks/community/blogs/5things/entry/5_things_to_know_about_microservices?lang=en" rel="noopener ugc nofollow" target="_blank">微服务</a>:细粒度、松散耦合的服务集合，使用轻量级协议在云中提供现代应用组合的构建块。</li><li id="437f" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>:用于执行服务器端JavaScript代码的开源JavaScript运行时环境。</li><li id="8837" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://www.ibm.com/cloud-computing/bluemix/containers" rel="noopener ugc nofollow" target="_blank">容器</a>:虚拟软件对象，包括一个应用程序运行所需的所有元素。</li><li id="e35b" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://en.wikipedia.org/wiki/IBM_Information_Management_System#.22Full_Function.22_databases" rel="noopener ugc nofollow" target="_blank">数据库</a>:用于存储和管理数据集合的储存库。</li><li id="fa40" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://www.ibm.com/cloud-computing/bluemix/hybrid-architecture" rel="noopener ugc nofollow" target="_blank">混合集成</a>:支持客户利用公共云服务提供商的能力，同时使用私有云部署敏感应用和数据。</li></ul><h1 id="fe13" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">观看视频</h1><p id="27b7" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">如果你想快速浏览最终结果，这里有一个视频<a class="ae kl" href="https://ibm.box.com/s/fgpqiacn9ewaorgp8l97bnrk760s8rx3" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="05d5" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">设置</h1><p id="c5bd" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">您有多个选项来设置自己的实例:</p><ul class=""><li id="a522" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#deploy-to-ibm-cloud" rel="noopener ugc nofollow" target="_blank">一键式部署到IBM(通过工具链自动化)</a></li><li id="d242" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#run-locally" rel="noopener ugc nofollow" target="_blank">本地运行</a></li><li id="a23b" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#deploy-to-ibm-cloud-the-hard-way" rel="noopener ugc nofollow" target="_blank">艰难地部署到IBM Cloud(手动、多阶段)</a></li><li id="1589" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#deploy-to-ibm-cloud-private" rel="noopener ugc nofollow" target="_blank">部署到IBM私有云</a></li></ul><h1 id="63b9" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">部署到IBM云</h1><blockquote class="mw mx my"><p id="5998" class="jn jo km jp b jq jr js jt ju jv jw jx mz jz ka kb na kd ke kf nb kh ki kj kk ij bi translated"><em class="iq">注意:这是一个自动设置&amp;部署到您自己的托管在IBM Cloud上的kubernetes集群；它将所有7个微服务打包为一个docker映像、一个部署和一个多端口服务。为了更好地理解这个概念，您应该按照步骤来配置您的集群并独立部署每个微服务。</em></p></blockquote><p id="3992" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以通过点击下面的部署链接，使用<a class="ae kl" href="https://www.ibm.com/cloud/garage/toolchains/" rel="noopener ugc nofollow" target="_blank">工具链</a>来部署该应用程序。请注意，您应该在开始之前准备好集群。要部署一个新的，在IBM Cloud catalog<a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank/blob/master/bluemix.net/catalog" rel="noopener ugc nofollow" target="_blank">下的Kubernetes集群中找到<em class="km">容器，然后单击create。给它一些时间来展开。</em></a></p><p id="2b9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://console.bluemix.net/devops/setup/deploy/?repository=https://github.com/amalamine/innovate-digital-bank" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="km">点击此链接，使用工具链一键部署到IBM Cloud！</em> </strong> </a></p><h1 id="8a8e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">本地运行</h1><h2 id="9929" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">1.克隆回购</h2><p id="7527" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">在本地克隆<code class="fe no np nq nr b">innovate-digital-bank</code>存储库。在终端中，运行:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="0ba9" class="nc lb iq nr b gy nw nx l ny nz">$ git clone <a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank.git" rel="noopener ugc nofollow" target="_blank">https://github.com/amalamine/innovate-digital-bank.git</a></span></pre><h2 id="859b" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">2.创建MongoDB的一个实例</h2><p id="267f" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这个演示非常依赖mongo作为会话和数据存储。</p><p id="9ba7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<a class="ae kl" href="https://console.bluemix.net/catalog/" rel="noopener ugc nofollow" target="_blank"> IBM Cloud catalog </a>中，找到Compose for MongoDB并点击create。给它一个名称，选择一个地区，选择标准定价计划，然后单击创建。</p><p id="0625" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">获取您的mongo连接字符串。几乎你所有的微服务都需要它；保管好它！</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oa"><img src="../Images/4afd5c79fb948546b7cd0d139dae666c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WkMfXIIhiTHj57iz.png"/></div></div></figure><h2 id="6de7" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">3.配置您的环境变量</h2><p id="6eec" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">7个微服务中的每一个都必须有一个<em class="km">。存储所有凭证的env </em>文件。</p><p id="ef00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个文件夹中都提供了一个示例。从每个微服务的目录中，复制示例文件，将其重命名为<em class="km">。env </em>，并用适当的值填充它。</p><p id="85b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，从/innovate文件夹中，导航到accounts文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="e1d9" class="nc lb iq nr b gy nw nx l ny nz">$ cd accounts</span></pre><p id="ab6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，复制并重命名<em class="km"> .env.example </em>文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="7411" class="nc lb iq nr b gy nw nx l ny nz">$ cp .env.example .env</span></pre><p id="b7ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，编辑您的。env文件夹并添加您的Mongodb连接字符串</p><p id="5550" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对所有微服务重复这些步骤。除了您的mongo url，大多数都需要您的kubernetes集群的公共IP地址，您可以在IBM Cloud上的集群概述中找到。</p><h2 id="21ef" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">4.配置您的环境模式</h2><p id="8d2d" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">在没有kubernetes的情况下本地运行应用程序时，微服务不会在我们的helm图表中指定的节点端口上运行，因此我们需要将我们的门户和用户基础微服务指向正确的端口。</p><p id="cb41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在macOS或任何基于linux的系统上运行，请在终端中从git repo的目录运行以下命令</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="724e" class="nc lb iq nr b gy nw nx l ny nz">$ export NODE_ENV=development</span></pre><p id="a878" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果在Windows上运行，请编辑。将/portal文件夹和/userbase文件夹中的env文件复制到以下位置:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="0b83" class="nc lb iq nr b gy nw nx l ny nz">NODE_ENV=development</span></pre><h2 id="eca2" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">5.奔跑</h2><p id="ea54" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">最后，导航到每个微服务文件夹，并启动它。确保在7个独立的终端中运行7个微服务。</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="fca1" class="nc lb iq nr b gy nw nx l ny nz">$ npm start</span></pre><p id="8738" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，导航到每个微服务文件夹，并启动它。确保在7个独立的终端中运行7个微服务。</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="a77f" class="nc lb iq nr b gy nw nx l ny nz">$ npm start</span></pre><h1 id="a8a6" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">艰难地部署到IBM Cloud</h1><blockquote class="mw mx my"><p id="0b55" class="jn jo km jp b jq jr js jt ju jv jw jx mz jz ka kb na kd ke kf nb kh ki kj kk ij bi translated"><em class="iq">注意:本指南需要IBM Cloud上的付费/升级帐户。您无法使用免费或简易帐户完成这些步骤</em></p></blockquote><ol class=""><li id="6cb1" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#1-get-the-tools" rel="noopener ugc nofollow" target="_blank">拿工具</a></li><li id="5066" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#2-clone-the-repo" rel="noopener ugc nofollow" target="_blank">克隆回购</a></li><li id="d19f" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#3-login-to-ibm-cloud" rel="noopener ugc nofollow" target="_blank">登录IBM Cloud </a></li><li id="8fab" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#4-create-a-cluster-" rel="noopener ugc nofollow" target="_blank">创建集群</a></li><li id="069f" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#5-create-an-instance-of-mongodb" rel="noopener ugc nofollow" target="_blank">创建一个MongoDB的实例</a></li><li id="97eb" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#6-configure-your-deploy-target" rel="noopener ugc nofollow" target="_blank">配置您的部署目标</a></li><li id="c640" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#7-configure-your-environment-variables" rel="noopener ugc nofollow" target="_blank">配置您的环境变量</a></li><li id="0176" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#8-configure-kubectl" rel="noopener ugc nofollow" target="_blank">配置kubectl </a></li><li id="d887" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#9-initialize-helm" rel="noopener ugc nofollow" target="_blank">初始化舵</a></li><li id="1753" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#10-deploy" rel="noopener ugc nofollow" target="_blank">部署</a></li></ol><h2 id="e3b4" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">1.去拿工具</h2><p id="1c8b" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">您将需要以下每个先决条件:</p><ul class=""><li id="c9a9" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated"><a class="ae kl" href="https://console.bluemix.net/doc/source/images/cli/reference/bluemix_cli/get_started.html#getting-started" rel="noopener ugc nofollow" target="_blank"> IBM云开发者工具CLI </a></li><li id="7cf7" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">Kubernetes CLI </li><li id="2274" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">容器服务插件</li></ul><p id="d172" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下载IBM Cloud Developer Tools CLI后，在终端中运行:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="4b7e" class="nc lb iq nr b gy nw nx l ny nz">$ bx plugin install container-service -r Bluemix</span></pre><ul class=""><li id="3f59" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated">容器注册表插件</li></ul><p id="38ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在终端中，运行:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="56d6" class="nc lb iq nr b gy nw nx l ny nz">$ bx plugin install container-registry -r Bluemix</span></pre><h2 id="0711" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">2.克隆回购</h2><p id="9069" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">在本地克隆<code class="fe no np nq nr b">innovate-digital-bank</code>存储库。在终端中，运行:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="c481" class="nc lb iq nr b gy nw nx l ny nz">$ git clone <a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank.git" rel="noopener ugc nofollow" target="_blank">https://github.com/amalamine/innovate-digital-bank.git</a></span></pre><h2 id="3721" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">3.登录IBM Cloud</h2><p id="7435" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">通过<a class="ae kl" href="https://console.bluemix.net/" rel="noopener ugc nofollow" target="_blank">控制台</a>和你的终端</p><blockquote class="mw mx my"><p id="1f2a" class="jn jo km jp b jq jr js jt ju jv jw jx mz jz ka kb na kd ke kf nb kh ki kj kk ij bi translated"><em class="iq">注意:如果您需要指定您想要部署的区域，您可以通过在区域url后添加-a标志来完成。</em></p></blockquote><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="a63e" class="nc lb iq nr b gy nw nx l ny nz">$ bx login</span></pre><h2 id="5181" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">4.创建一个集群</h2><p id="fcf5" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">在目录中，找到Kubernetes集群中的容器，然后单击create。选择区域和分类类型，并创建您的分类。给它一些时间来展开。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oa"><img src="../Images/f4356c2c9d2749b1b466a0f186d59375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ATyPdVuuN1oLcP4N.png"/></div></div></figure><h2 id="398b" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">5.创建MongoDB的一个实例</h2><p id="3a08" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这个演示非常依赖mongo作为会话和数据存储。</p><p id="e189" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<a class="ae kl" href="https://console.bluemix.net/catalog/" rel="noopener ugc nofollow" target="_blank">目录</a>中，找到Compose for MongoDB并点击create。给它一个名称，选择一个地区，选择标准定价计划，然后单击创建。</p><p id="2630" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">获取您的mongo连接字符串。几乎你所有的微服务都需要它；保管好它！</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oa"><img src="../Images/9f3b4c6234bf6f7ac07311960c3b2834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wTfQDuJxBccGFB7e.png"/></div></div></figure><h2 id="0abf" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">6.配置您的部署目标</h2><p id="788d" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">7个docker映像中的每一个都需要被推送到IBM Cloud上的docker映像注册中心。您需要设置正确的<em class="km">部署目标</em>。根据您创建集群的地区，您的url将采用以下格式</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="d5f1" class="nc lb iq nr b gy nw nx l ny nz">registry.&lt;REGION_ABBREVIATION&gt;.bluemix.net/&lt;YOUR_NAMESPACE&gt;/&lt;YOUR_IMAGE_NAME&gt;</span></pre><p id="82a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，要将accounts微服务部署到我在美国南部地区的docker映像注册中心，我的deploy_target将是:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="766c" class="nc lb iq nr b gy nw nx l ny nz">registry.ng.bluemix.net/amalamine/innovate-accounts</span></pre><p id="ee4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您需要获取名称空间，请运行:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="3f27" class="nc lb iq nr b gy nw nx l ny nz">$ bx cr namespace-list</span></pre><p id="71f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以通过运行以下命令来添加新的命名空间:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="ea71" class="nc lb iq nr b gy nw nx l ny nz">$ bx cr namespace-add &lt;NAME&gt;</span></pre><p id="cd19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从每个微服务的目录中，将<em class="km">/chart/innovate-&lt;MICROSERVICE _ NAME&gt;/values . YAML</em>中<em class="km"> cli-config.yml </em> &amp;中的部署目标替换为正确的目标</p><p id="72da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，从/innovate文件夹中，导航到accounts文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="c1e9" class="nc lb iq nr b gy nw nx l ny nz">$ cd accounts</span></pre><p id="21e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，编辑<a class="ae kl" href="https://github.com/aamine0/innovate-digital-bank/blob/master/accounts/cli-config.yml" rel="noopener ugc nofollow" target="_blank"> cli-config.yaml </a>文件的第58行。用正确的值替换<em class="km">部署图像目标</em>。</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="c77e" class="nc lb iq nr b gy nw nx l ny nz">deploy-image-target: "registry.ng.bluemix.net/amalamine/innovate-accounts"</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oa"><img src="../Images/67c6194cec290c7ca7f6e5ad5dde9e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bw5dYjyB7IDkffZ3.png"/></div></div></figure><p id="6a2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编辑<a class="ae kl" href="https://github.com/aamine0/innovate-digital-bank/blob/master/accounts/chart/innovate-accounts/values.yaml" rel="noopener ugc nofollow" target="_blank"> values.yaml </a>文件的第6行。用正确的值替换<em class="km">储存库</em>。</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="c283" class="nc lb iq nr b gy nw nx l ny nz">repository: registry.ng.bluemix.net/amalamine/innovate-accounts</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oa"><img src="../Images/2b3851af48732d254220cf7d0406d595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*omtnOSWK2UUZTfRf.png"/></div></div></figure><p id="1ad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对所有7个微服务重复这些步骤。</p><h2 id="2482" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">7.配置您的环境变量</h2><p id="120d" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">7个微服务中的每一个都必须有一个<em class="km">。存储所有凭证的env </em>文件。</p><p id="19ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个文件夹中都提供了一个示例。从每个微服务的目录中，复制示例文件，将其重命名为<em class="km">。env </em>，并用适当的值填充它。</p><p id="a045" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，从/innovate文件夹中，导航到accounts文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="607f" class="nc lb iq nr b gy nw nx l ny nz">$ cd accounts</span></pre><p id="cda5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，复制并重命名<em class="km"> .env.example </em>文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="f72a" class="nc lb iq nr b gy nw nx l ny nz">$ cp .env.example .env</span></pre><p id="e7fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，编辑您的。env文件夹并添加您的Mongodb连接字符串</p><p id="1389" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">对所有微服务重复这些步骤。除了您的mongo url，大多数都需要您的kubernetes集群的公共IP地址，您可以在IBM Cloud上的集群概述中找到。</em></p><h2 id="12c8" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">8.配置kubectl</h2><p id="5cb4" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">运行以下命令:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="a97f" class="nc lb iq nr b gy nw nx l ny nz">$ bx cs cluster-config &lt;YOUR_CLUSTER_NAME&gt;</span></pre><p id="00c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后复制输出并粘贴到您的终端中</p><h2 id="cd5a" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">9.初始化舵</h2><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="47ae" class="nc lb iq nr b gy nw nx l ny nz">$ helm init</span></pre><h2 id="6995" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">10.部署</h2><p id="ce9b" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">最后，导航到每个微服务文件夹，并运行以下命令</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="e76e" class="nc lb iq nr b gy nw nx l ny nz">$ bx dev deploy</span></pre><h1 id="1509" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">部署到IBM私有云</h1><p id="9cff" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">如果您有一个IBM Cloud Private运行的实例，您可以按照步骤来部署应用程序。如果您想部署自己的ICP实例，<a class="ae kl" href="https://github.com/IBM/deploy-ibm-cloud-private" rel="noopener ugc nofollow" target="_blank">您可以关注这篇精彩的文章</a></p><ol class=""><li id="5053" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#1-create-a-persistent-volume" rel="noopener ugc nofollow" target="_blank">创建永久卷</a></li><li id="563b" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#2-create-a-persistent-volume-claim" rel="noopener ugc nofollow" target="_blank">创建永久卷索赔</a></li><li id="87c4" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#3-create-an-instance-of-mongodb" rel="noopener ugc nofollow" target="_blank">创建一个MongoDB的实例</a></li><li id="4f5e" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#4-configure-your-environment-variables" rel="noopener ugc nofollow" target="_blank">配置您的环境变量</a></li><li id="bac4" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#5-add-your-icps-address-to-your-hosts-file" rel="noopener ugc nofollow" target="_blank">将您的ICP地址添加到您的主机文件中</a></li><li id="c98f" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#6-login-to-docker" rel="noopener ugc nofollow" target="_blank">登录docker </a></li><li id="6afd" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#7-configure-kubectl" rel="noopener ugc nofollow" target="_blank">配置kubectl </a></li><li id="2a32" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#9-initialize-helm" rel="noopener ugc nofollow" target="_blank">部署</a></li></ol><h2 id="bd9d" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">1.创建永久卷</h2><p id="c861" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这个演示非常依赖mongo作为会话和数据存储。给它一个名称和一个容量，选择存储类型<em class="km">主机路径</em>，并添加一个<em class="km">路径参数</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ob"><img src="../Images/38cdafd56e987f1dc5352554f00614f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UiPNs1gbYK5jnbSF.png"/></div></div></figure><h2 id="0eee" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">2.创建永久卷声明</h2><p id="1ae6" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">给它一个名称和一个存储请求值</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oc"><img src="../Images/bf45976f62522a10f62f385bbf465d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*onZrORbKJvAN63XZ.jpg"/></div></div></figure><h2 id="7ba0" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">3.创建MongoDB的一个实例</h2><p id="2ae2" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">从目录中选择MongoDb。给它一个<em class="km">名称</em>，指定<em class="km">现有卷声明名称</em>，给它一个<em class="km">密码</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi od"><img src="../Images/7e4282520a05defacc6e170e75675458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MNfNwuOjMfOIgWt8.jpg"/></div></div></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi od"><img src="../Images/4654e7c76d2bdc302584346433986f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E9YS5XAoLfOm0eNa.jpg"/></div></div></figure><p id="5466" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">获取您的mongo连接字符串；几乎你所有的微服务都需要它；保管好它！</em></p><p id="46f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的连接字符串将采用以下格式:</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="1248" class="nc lb iq nr b gy nw nx l ny nz">mongodb://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@&lt;HOST&gt;:&lt;PORT&gt;/&lt;DATABASE_NAME&gt;</span></pre><h2 id="7579" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">4.配置您的环境变量</h2><p id="3fff" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">7个微服务都必须有一个<em class="km">。env </em>文件。</p><p id="d9a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个文件夹中都提供了一个示例。从每个微服务的目录中，复制示例文件，将其重命名为<em class="km">。env </em>，并用适当的值填充它。</p><p id="5401" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，从/innovate文件夹中，导航到accounts文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="7e4f" class="nc lb iq nr b gy nw nx l ny nz">$ cd accounts</span></pre><p id="47e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，复制并重命名<em class="km"> .env.example </em>文件夹</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="4bfa" class="nc lb iq nr b gy nw nx l ny nz">$ cp .env.example .env</span></pre><p id="c6f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，编辑您的。env文件夹并添加您的Mongodb连接字符串</p><p id="a18c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">对所有微服务重复这些步骤。除了您的mongo url之外，门户微服务还需要您的ICP的地址。</em></p><h2 id="eb6e" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">5.将您的ICP地址添加到您的hosts文件中</h2><p id="e826" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">向/etc/hosts文件中添加一个条目，如下所示</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="b8c1" class="nc lb iq nr b gy nw nx l ny nz">&lt;YOUR_ICP_IP_ADDRESS&gt; mycluster.icp</span></pre><h2 id="da7f" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">6.登录docker</h2><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="349d" class="nc lb iq nr b gy nw nx l ny nz">$ docker login mycluster.icp:8500</span></pre><h2 id="e77b" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">7.配置kubectl</h2><p id="41a9" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">从ICP的仪表板中，复制admin &gt; configure client下的kubectl命令</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ob"><img src="../Images/a80aa9e2b5f97c3e41a57bb268800ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*llEz4Hry4fOTtkBS.png"/></div></div></figure><h2 id="d3cf" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">8.部署</h2><p id="f4d3" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">最后，导航到每个微服务，并运行以下命令</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="dfc5" class="nc lb iq nr b gy nw nx l ny nz">$ bx dev deploy</span></pre><p id="cdd5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">如果您没有安装IBM Cloud Developer Tools CLI，请先在此处</em>  <em class="km">获取</em> <a class="ae kl" href="https://console.bluemix.net/doc/source/images/cli/reference/bluemix_cli/download_cli.html" rel="noopener ugc nofollow" target="_blank"> <em class="km"/></a></p><h1 id="7813" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">(可选)使用Watson Assistant添加支持</h1><p id="15b4" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">support微服务连接到IBM Cloud上的Watson Assistant实例，以模拟与虚拟支持代理的聊天。</p><blockquote class="mw mx my"><p id="cd11" class="jn jo km jp b jq jr js jt ju jv jw jx mz jz ka kb na kd ke kf nb kh ki kj kk ij bi translated"><em class="iq">注意:这是一个可选步骤。如果你想在应用程序上启用支持功能，你需要它。</em></p></blockquote><ol class=""><li id="a84e" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#1-create-an-instance-of-watson-assistant" rel="noopener ugc nofollow" target="_blank">创建沃森助手的实例</a></li><li id="4ca0" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#2-import-the-support-workspace" rel="noopener ugc nofollow" target="_blank">导入支持工作区</a></li><li id="899f" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#3-get-your-credentials" rel="noopener ugc nofollow" target="_blank">拿到你的证件</a></li><li id="52c9" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#4-configure-your-environment-variables" rel="noopener ugc nofollow" target="_blank">配置您的环境变量</a></li><li id="2145" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mr mj mk ml bi translated"><a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank#5-deploy" rel="noopener ugc nofollow" target="_blank">展开</a></li></ol><h2 id="6ff9" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">1.创建沃森助手的实例</h2><p id="9506" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">从<a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank/blob/master/bluemix.net" rel="noopener ugc nofollow" target="_blank"> IBM云目录</a>中，选择Watson Conversation，然后点击create。</p><h2 id="c589" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">2.导入支持工作区</h2><p id="8891" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">将<a class="ae kl" href="https://github.com/amalamine/innovate-digital-bank/blob/master/support/conversation-workspace.json" rel="noopener ugc nofollow" target="_blank">支持工作区</a>导入到您新创建的Watson Assistant实例中</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oe"><img src="../Images/72806c2ceccca1f088f255bfecc6f6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SOHRIQ6edBW3vyL0.png"/></div></div></figure><h2 id="c039" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">3.获取您的证书</h2><p id="bc66" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">导航到deploy选项卡，复制您的用户名、密码和工作区ID</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oa"><img src="../Images/6f55ce21df2bed6026fcce850cde7f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vr9FG8oqHcncGyz0.png"/></div></div></figure><h2 id="9855" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">4.配置您的环境变量</h2><p id="3da6" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">在支持文件夹中，编辑您的。env以包含您新获得的凭证</p><h2 id="85e9" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">5.部署</h2><p id="a660" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">重新部署支持微服务，现在应该可以通过门户访问支持功能。</p><pre class="ko kp kq kr gt ns nr nt nu aw nv bi"><span id="42bb" class="nc lb iq nr b gy nw nx l ny nz">$ bx dev deploy</span></pre><h1 id="03ad" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">下一步是什么？</h1><p id="39e9" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">现在，您应该有自己的实例在您选择的平台上运行了。你可以尝试在<a class="ae kl" href="https://github.com/kubernetes/minikube" rel="noopener ugc nofollow" target="_blank"> Minikube </a>、<a class="ae kl" href="https://cloud.google.com/kubernetes-engine/" rel="noopener ugc nofollow" target="_blank"> Google Kubernetes引擎</a>、<a class="ae kl" href="https://github.com/kubernetes/kops" rel="noopener ugc nofollow" target="_blank"> kops </a> — <em class="km">任何地方</em>，真的。</p><p id="bf4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你足够好奇，可以去看看<a class="ae kl" href="https://github.com/aamine0/innovate-digital-bank#docs" rel="noopener ugc nofollow" target="_blank">文档</a>，更好地了解每个微服务所公开的端点。</p><h2 id="3b25" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">了解更多信息</h2><ul class=""><li id="2a85" class="md me iq jp b jq ly ju lz jy mt kc mu kg mv kk mi mj mk ml bi translated">人工智能代码模式:喜欢这种代码模式吗？检查我们的其他<a class="ae kl" href="https://developer.ibm.com/code/technologies/artificial-intelligence/" rel="noopener ugc nofollow" target="_blank">人工智能代码模式</a>。</li><li id="55e2" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">数据分析代码模式:喜欢这种代码模式吗？查看我们的其他<a class="ae kl" href="https://developer.ibm.com/code/technologies/data-science/" rel="noopener ugc nofollow" target="_blank">数据分析代码模式</a></li><li id="edf5" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">AI和数据代码模式播放列表:用我们所有的代码模式视频为我们的<a class="ae kl" href="https://www.youtube.com/playlist?list=PLzUbsvIyrNfknNewObx5N7uGZ5FKH0Fde" rel="noopener ugc nofollow" target="_blank">播放列表</a>添加书签</li><li id="0c84" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">使用Watson:想让您的Watson应用更上一层楼吗？希望利用沃森品牌资产？<a class="ae kl" href="https://www.ibm.com/watson/with-watson/" rel="noopener ugc nofollow" target="_blank">加入Watson计划</a>利用独家品牌、营销和技术资源来扩大和加速您的Watson嵌入式商业解决方案。</li><li id="7c6e" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">数据科学经验:通过IBM的<a class="ae kl" href="https://datascience.ibm.com/" rel="noopener ugc nofollow" target="_blank">数据科学经验</a>掌握数据科学的艺术</li><li id="23b1" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">IBM Cloud上的Kubernetes:结合IBM Cloud上的<a class="ae kl" href="https://www.ibm.com/cloud-computing/bluemix/containers" rel="noopener ugc nofollow" target="_blank"> Kubernetes和Docker的强大功能来交付您的应用</a></li></ul><h2 id="cf92" class="nc lb iq bd lc nd ne dn lg nf ng dp lk jy nh ni lo kc nj nk ls kg nl nm lw nn bi translated">还有很大的改进空间</h2><p id="902a" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">当然。我想把这个应用定义为一个有多个<a class="ae kl" href="https://github.com/kubernetes/helm/blob/master/docs/chart_template_guide/subcharts_and_globals.md" rel="noopener ugc nofollow" target="_blank">子部分</a>的图表。或者让我们目前不太有用的聊天机器人访问MongoDB和一些超级大国。</p><p id="6fc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但我会保持简单，现在。<a class="ae kl" href="https://github.com/aamine0/innovate-digital-bank" rel="noopener ugc nofollow" target="_blank">立功&amp;拉请求</a>可是受欢迎的！</p></div></div>    
</body>
</html>