<html>
<head>
<title>The concept of workflow engines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">工作流引擎的概念</h1>
<blockquote>原文：<a href="https://itnext.io/the-concept-of-workflow-engines-c14e8088283?source=collection_archive---------2-----------------------#2020-03-14">https://itnext.io/the-concept-of-workflow-engines-c14e8088283?source=collection_archive---------2-----------------------#2020-03-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="9a67" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">介绍</h1><p id="7d1d" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">从构建流程和CI/CD的自动化到在线/离线商店中的订单管理系统和预订出租车，工作流在许多情况下都会用到。你可能会发现很多从小型github项目到企业系统的解决方案。有各种各样的实现:可以集成到您的系统中的框架，一些单独的解决方案，在大型复杂系统中作为功能的一部分可用的工作流引擎等等。以下是工作流引擎的一个小列表:Jenkins、GitLab Pipelines、Cadence、Airflow、Conductor等。</p><p id="7875" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在这篇文章中，我想展示所有工作流引擎的基本概念。</p><h1 id="d1ad" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是工作流、状态机和工作流引擎？</h1><p id="0e8b" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在研究这个概念之前，让我们先理解这些术语:工作流、状态机和工作流引擎。</p><p id="b683" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">维基百科告诉我们的工作流术语。</p><blockquote class="lo lp lq"><p id="faca" class="kl km lr kn b ko lj kq kr ks lk ku kv ls ll ky kz lt lm lc ld lu ln lg lh li ij bi translated">工作流由协调的可重复的活动模式组成，通过将资源系统地组织成转换材料、提供服务或处理信息的过程来实现。</p></blockquote><p id="d16b" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我认为维基百科对工作流程的描述很清楚。我只想提一下，它描述了一般的工作流，没有提到任何技术或开发模式或数学模型。工作流的数学模型是一个状态机。我们来看看维基百科关于它的内容。</p><blockquote class="lo lp lq"><p id="686c" class="kl km lr kn b ko lj kq kr ks lk ku kv ls ll ky kz lt lm lc ld lu ln lg lh li ij bi translated"><em class="iq">状态机是计算的数学模型。这是一个抽象的概念，机器可以有不同的状态，但在给定的时间内只满足其中一个状态。</em></p></blockquote><p id="2f11" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">所以一旦有了工作流和它的数学模型，就需要实现数学模型的东西。工作流引擎是数学模型(状态机)的实现。再读一遍维基百科=)。</p><blockquote class="lo lp lq"><p id="592a" class="kl km lr kn b ko lj kq kr ks lk ku kv ls ll ky kz lt lm lc ld lu ln lg lh li ij bi translated"><em class="iq">工作流引擎管理和监控工作流中活动的状态，如贷款申请单的处理和批准，并根据定义的流程(工作流)确定要转移到哪个新活动。</em></p></blockquote><p id="e054" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">基本上，任何应用程序都是一些工作流的实现，正如我之前所说，有很多地方使用工作流引擎的各种部分。让我们来看看工作流引擎的概念。</p><h1 id="0316" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">概念</h1><p id="9968" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">工作流引擎由6个逻辑组件组成。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lv"><img src="../Images/add0d6338f89d31cea4b132f896e4adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CPG-BqM7K4BPVLOL6Plnew.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">工作流引擎的组件图</figcaption></figure><h2 id="3f5b" class="ml jo iq bd jp mm mn dn jt mo mp dp jx kw mq mr kb la ms mt kf le mu mv kj mw bi translated">调度程序</h2><p id="843c" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这是工作流引擎的主要部分，所有的奇迹都发生在这里。它调度运行，了解流定义，监控任务执行的结果。它可以由一些事件触发，如定时器、API或手动触发。</p><h2 id="c43e" class="ml jo iq bd jp mm mn dn jt mo mp dp jx kw mq mr kb la ms mt kf le mu mv kj mw bi translated">元数据存储</h2><p id="03fe" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">它只是一个需要调度器来协调运行的数据存储。取决于实现，它可能在内存结构或数据库中。我将在下一篇关于数据概念的文章中更详细地描述它。</p><h2 id="f189" class="ml jo iq bd jp mm mn dn jt mo mp dp jx kw mq mr kb la ms mt kf le mu mv kj mw bi translated">扳机</h2><p id="7122" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">触发工作流的方式。在框架的情况下，它通常是一些函数的调用。如果是某种解决方案，那么可能是某种API、时间表。基本上，工作流可能有不同的触发器实现。</p><h2 id="49d7" class="ml jo iq bd jp mm mn dn jt mo mp dp jx kw mq mr kb la ms mt kf le mu mv kj mw bi translated">实施者</h2><p id="a92a" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">负责运行原子任务并提供运行结果的组件。它可以是应用程序、容器或事件虚拟机中的单独线程。</p><h2 id="e0ac" class="ml jo iq bd jp mm mn dn jt mo mp dp jx kw mq mr kb la ms mt kf le mu mv kj mw bi translated">流动储存库</h2><p id="771b" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">存储定义的位置取决于实现，它可以是不同的位置，并提供额外的功能，而不仅仅是存储定义。流程是工作流的一种描述。我将在下一篇关于数据概念的文章中更详细地描述它。</p><h2 id="9caf" class="ml jo iq bd jp mm mn dn jt mo mp dp jx kw mq mr kb la ms mt kf le mu mv kj mw bi translated">共享上下文</h2><p id="e0cc" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">一旦你的工作流变得有点复杂，你就需要立即将一些上下文从一个任务传递到另一个任务。这个组件对此负责。</p><h1 id="1dec" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">结论:什么时候需要使用工作流引擎？</h1><p id="7360" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了回答这个主题问题，我们来看两个例子。</p><p id="e0be" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">第一个:“向客户端提供用户列表的UI”，在这种情况下，API需要向客户端提供结果，在客户端决定下一步做什么之后，可能只是分析结果或采取一些行动。因此，这一过程并不是完全自动化的，而是有一个让客户做出决定的空间。</p><p id="a27c" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">另一个例子:“获得用户列表，找到今天过生日的人，并向他们发送消息‘生日快乐’”。在这种情况下，客户端只关心让我们称之为“要做的工作”，客户端不需要基于用户列表进行分析并做出决定，因为行为模式之前已经发现，现在客户端只需要执行它。</p><p id="e662" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">简单地说，当您需要实施一些全自动流程时，选择一个工作流引擎(例如:构建流程、CI/CD流程、虚拟机供应、订单管理流程等)，当您想要为您的客户提供一些采取行动的能力时(例如:向我显示实体列表并提供一组对它们的操作，向我显示我在社交网络中的朋友列表，让我找到一些视频，然后播放它或对它进行评论等)，请尝试考虑另一种方法，因为工作流引擎作为任何统一的解决方案都不是零成本的。</p></div></div>    
</body>
</html>