<html>
<head>
<title>Using Login with Amazon as an Identity Provider for iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Amazon登录作为iOS的身份提供商</h1>
<blockquote>原文：<a href="https://itnext.io/federated-identities-using-login-with-amazon-with-amazon-cognito-and-aws-amplify-bfb7dfb7e185?source=collection_archive---------1-----------------------#2018-11-15">https://itnext.io/federated-identities-using-login-with-amazon-with-amazon-cognito-and-aws-amplify-bfb7dfb7e185?source=collection_archive---------1-----------------------#2018-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/08a05473a5ed277c8a3076924b54f046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2nNv1W7uzBwrpS7EWLMGTA.png"/></div></div></figure><p id="d4b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文是将亚马逊 (LWA)的<a class="ae kw" href="https://developer.amazon.com/login-with-amazon" rel="noopener ugc nofollow" target="_blank">登录添加到iOS Swift应用程序的第2部分，并继续为iOS开发人员提供认证跟踪，我们在其中介绍了</a><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/basic-authentication-for-ios-using-aws-amplify-and-amazon-cognito-233b943222d4">基本认证</a>、<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/facebook-login-using-aws-amplify-and-amazon-cognito-4acf74875a04">脸书登录</a>和<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/google-sign-in-using-aws-amplify-and-amazon-cognito-69cc3bf219ad">谷歌登录</a>。在关于添加Amazon登录的第2部分系列的第1部分<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/add-login-with-amazon-to-your-ios-swift-app-d1b07655d31a">中，我们配置了一个Amazon开发人员项目，克隆了一个入门iOS应用程序，使用我们的Amazon APIKey更新了该应用程序，并修改了URL方案，允许您的移动用户使用他们的Amazon凭据进行身份验证。我强烈建议查看第1部分的文章</a>,为登录亚马逊做好准备，并在继续之前集成LWA图书馆。</p><p id="d34b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们将通过云构建第1部分中的解决方案，使我们的iOS应用程序能够使用Amplify CLI与Amazon Cognito集成，从而将登录与Amazon身份联合起来。我们将使用Amazon Cognito身份池(联合身份)为您的每个LWA认证用户分配一个唯一的Id，并授予这些用户临时AWS凭据(访问密钥和密码)以从您的iOS应用程序调用您的后端AWS资源。我们不需要Amazon用户池来做这件事，但是如果需要的话，以后添加它也不会有什么坏处。</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lb lc l"/></div></figure><p id="728f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">每个AWS请求都必须签名</strong></p><p id="9f74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为使用AWS后端的开发人员，所有访问您的AWS资源的请求都必须使用AWS凭证进行签名。Cognito Identity Pool通过管理用户的唯一Id和授予对您的资源的访问权限来执行所有繁重的工作，因此您不必在应用程序中嵌入自己的开发人员AWS凭据。</p><p id="5cba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">我们为什么要用亚马逊Cognito？</strong></p><p id="ae85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大规模的安全性和细粒度访问是我们使用<a class="ae kw" href="https://docs.aws.amazon.com/cognito/latest/developerguide/identity-pools.html" rel="noopener ugc nofollow" target="_blank"> Amazon Cognito身份池(联合身份)</a>和Amazon登录来为每个经过身份验证的用户提供临时AWS凭证的原因。身份池处理两种类型的用户，未经身份验证的用户和经过身份验证的用户。未经认证的用户是指没有使用任何基本认证(用户名&amp;密码)进行认证、没有登录Amazon或任何社交登录提供商的用户。这些用户承担IAM未经身份验证的角色。对于经过身份验证的用户(那些已经通过Amazon或其他OpenID提供者的登录进行了身份验证的用户)，身份池还将分配一个唯一的ID和临时AWS凭据，但是这些用户承担经过身份验证的IAM角色。作为开发人员，您决定授予这两个角色的权限。</p><p id="0acb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我之前的<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/google-sign-in-using-aws-amplify-and-amazon-cognito-69cc3bf219ad">谷歌登录</a>、<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/facebook-login-using-aws-amplify-and-amazon-cognito-4acf74875a04">脸书登录</a>和<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/add-login-with-amazon-to-your-ios-swift-app-d1b07655d31a">登录亚马逊</a>集成文章中，用户只需选择<em class="ld">登录谷歌</em>、<em class="ld">继续脸书，或登录亚马逊</em>按钮，并分别使用他们的谷歌、脸书或亚马逊凭证进行身份验证，同时保持在您的应用程序流内。<em class="ld">登录亚马逊</em>从用户角度来看也是同样的交互。一旦用户通过身份验证，作为开发人员的您将收到一个令牌形式的信息，我们将使用该令牌并将其传递给Amazon Cognito进行验证。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi le"><img src="../Images/efdbbcb8d385b1759f7dd7272fa8222a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*9ma8GuisSEwopJiGhTPXGA.png"/></div></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="2714" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">使用亚马逊登录准备iOS应用程序</h1><p id="bc11" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">在本系列的第1部分中，我在Github上演示了如何将LWA集成到一个示例应用程序中。对于本文，让我们从同一个示例应用程序开始。</p><ol class=""><li id="3cc1" class="mp mq iq ka b kb kc kf kg kj mr kn ms kr mt kv mu mv mw mx bi translated">从现有的<strong class="ka ir">登录亚马逊(LWA) </strong>集成的iOS应用程序开始。该应用程序只有基本的LWA框架和一个小型代理类。从从Github 克隆<a class="ae kw" href="https://github.com/mobilequickie/LoginWithAmazoniOSSwift" rel="noopener ugc nofollow" target="_blank">示例应用开始。这个应用程序具有登录和注销亚马逊的全部功能。</a></li></ol><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="177a" class="nd ln iq mz b gy ne nf l ng nh">$ git clone <a class="ae kw" href="https://github.com/mobilequickie/LoginWithAmazoniOSSwift.git" rel="noopener ugc nofollow" target="_blank">https://github.com/mobilequickie/LoginWithAmazoniOSSwift.git</a></span></pre><p id="c940" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.更新Xcode项目中的包标识符，以匹配您在安全配置文件中提供给Amazon的包标识符。例如<em class="ld"> com.domain.appname </em></p><p id="bc9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.从亚马逊开发者门户<a class="ae kw" href="https://developer.amazon.com/iba-sp/overview.html" rel="noopener ugc nofollow" target="_blank">这里</a>获取你的亚马逊安全配置文件<strong class="ka ir"> iOS API密钥</strong>，然后选择你的安全配置文件，选择iOS设置选项卡，然后点击API密钥栏下的<strong class="ka ir">显示</strong>。复制API键(它是LOONG)并将键的值粘贴到Info.plist中的<strong class="ka ir"> APIKey </strong>值中，如下所示。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/304399a3058a5f5146e39c67a385b91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YFzoCPOJ-f_0KTt4QgdFlA.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">您的Amazon安全配置文件中的iOS API密钥</figcaption></figure><p id="f711" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.更新URL方案以匹配您的包标识符。不要忘记在您的包标识符之前留下<strong class="ka ir"> amzn- </strong>前缀。</p><p id="7427" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如<strong class="ka ir"><em class="ld">amzn-</em></strong><em class="ld">com . domain . appname</em></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/ee99862fc98c281dc6af520354609099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EhLdSiuWPjQc6zjLXbyb1w.png"/></div></div></figure><p id="c547" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.构建和启动应用程序，并通过认证流程，以确保它的工作。当禁用了使用Amazon UI登录按钮并启用了注销链接时，您就会知道它是有效的。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h2 id="2935" class="nd ln iq bd lo no np dn ls nq nr dp lw kj ns nt ma kn nu nv me kr nw nx mi ny bi translated">使用Amplify CLI初始化云后端以登录Amazon</h2><p id="0a87" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">在初始化我们的后端之前，我们将使用AWS Amplify CLI，它是<a class="ae kw" href="https://aws-amplify.github.io/media/toolchain?utm_source=da&amp;utm_medium=blog&amp;utm_campaign=denhills&amp;utm_term=ios_native" rel="noopener ugc nofollow" target="_blank"> AWS Amplify工具链</a>的一部分。如果您之前没有安装AWS Amplify CLI，这里有一个快捷方式。<em class="ld">放大配置</em>仅当您尚未安装或配置AWS unified CLI时才需要。如果您安装了AWS CLI，Amplify CLI将利用这些凭据。</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="7ddb" class="nd ln iq mz b gy ne nf l ng nh">$ npm install -g @aws-amplify/cli<br/>$ amplify configure</span></pre><p id="35b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一次性安装。查看<a class="ae kw" href="https://aws-amplify.github.io/media/get_started?utm_source=da&amp;utm_medium=blog&amp;utm_campaign=denhills&amp;utm_term=iOS_native" rel="noopener ugc nofollow" target="_blank">入门教程</a>了解更多细节。</p><h2 id="c0c3" class="nd ln iq bd lo no np dn ls nq nr dp lw kj ns nt ma kn nu nv me kr nw nx mi ny bi translated">将授权类别添加到您的iOS应用程序</h2><p id="52f8" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">在iOS项目文件夹的根目录下启动Mac终端。现在，我们将使用下面的Amplify命令初始化我们的AWS后端项目。</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="84b4" class="nd ln iq mz b gy ne nf l ng nh">$ amplify init</span></pre><p id="62f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将指导您完成设置项目的过程。<strong class="ka ir">确保在适当的时候选择iOS</strong>。</p><p id="f400" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，让我们使用Amplify auth类别将authenticated添加到我们的移动项目中。我们将遵循AWS iOS SDK文档中的<a class="ae kw" href="https://aws-amplify.github.io/docs/ios/authentication" rel="noopener ugc nofollow" target="_blank">联合身份</a>选项中概述的相同流程。</p><p id="8632" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在终端窗口中，导航到iOS项目的根目录，并将auth类别添加到您的应用程序中。CLI会提示您输入配置参数。</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="01df" class="nd ln iq mz b gy ne nf l ng nh">$ amplify add auth</span><span id="3590" class="nd ln iq mz b gy nz nf l ng nh">❯ Manual Configuration<br/>❯ User Sign-Up, Sign-In, connected with AWS IAM controls...<br/>❯ Friendly name: <strong class="mz ir">&lt;ANY-NAME&gt;</strong><br/>❯ Identity Pool name: <strong class="mz ir">&lt;ANY-IDENTITY-POOL-NAME&gt;</strong><br/>❯ <!-- -->Allow unauthenticated logins?<strong class="mz ir"> Yes<br/></strong>❯ <!-- -->Do you want to enable 3rd party authentication...? <strong class="mz ir">Yes<br/></strong>❯ <!-- -->Select the third party identity...<strong class="mz ir">Amazon<br/></strong>❯ <!-- -->Enter your Amazon App ID: <strong class="mz ir">&lt;YOUR-SECURITY-PROFILE-ID&gt;</strong></span></pre><blockquote class="oa ob oc"><p id="a224" class="jy jz ld ka b kb kc kd ke kf kg kh ki od kk kl km oe ko kp kq of ks kt ku kv ij bi translated">注意:点击<a class="ae kw" href="https://developer.amazon.com/lwa/sp/overview.html" rel="noopener ugc nofollow" target="_blank">此处</a>，选择您在<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/add-login-with-amazon-to-your-ios-swift-app-d1b07655d31a">第一部分</a>创建的安全配置文件，复制<strong class="ka ir">安全配置文件ID </strong>，如图所示，即可找到亚马逊应用ID。在这种情况下，是的，安全配置文件ID是您的Amazon应用程序ID，用于Amazon Cognito身份池集成。</p></blockquote><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/f4eb7322f104a567eb5c2e32884eb208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e6BMJzYv2V7roZvqrIVwkw.png"/></div></div></figure><p id="0734" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将本地配置更改推送到您的AWS帐户</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="dfae" class="nd ln iq mz b gy ne nf l ng nh">$ amplify push</span></pre><p id="231d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在有了与Amazon Cognito联合身份集成的Amazon登录。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="974f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">设置AWS Mobile SDK依赖项(Cocoapods) </strong></p><p id="e103" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个例子中，我将使用Cocoapods进行依赖管理，因为这是目前推荐的将AWS SDK集成到iOS项目中的方法。更多关于<a class="ae kw" href="https://cocoapods.org/" rel="noopener ugc nofollow" target="_blank">椰子的信息</a>。一旦你安装了Cocoapods，按照这个设置。</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="d41a" class="nd ln iq mz b gy ne nf l ng nh">$ pod init</span></pre><p id="1b36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在由“pod init”创建的<em class="ld"> Podfile中，</em>将AWSMobileClient依赖项添加到该文件，如下所示。</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="4804" class="nd ln iq mz b gy ne nf l ng nh">pod 'AWSMobileClient', '~&gt; 2.9.0'</span></pre><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="oh lc l"/></div></figure><p id="4009" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将SDK库引入您的项目:</p><pre class="kx ky kz la gt my mz na nb aw nc bi"><span id="026c" class="nd ln iq mz b gy ne nf l ng nh">$ pod install --repo-update</span></pre><p id="b711" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">将awsconfiguration.json文件集成到您的iOS项目中</strong></p><p id="f338" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当使用AWS Amplify CLI提供后端资源时，它会在iOS Xcode项目的根目录中生成一个名为<em class="ld"> awsconfiguration.json </em>的文件。该文件包含可通过应用程序访问的资源的描述，并在Amplify工具链添加、更新或删除资源时与项目同步。这种配置文件的自动更新是使用Amplify CLI从您的本地移动开发环境中提供AWS资源的巨大好处之一。</p><p id="a1a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ld">您只需要将awsconfiguration.json文件添加到Xcode项目中一次。您可以通过将它拖到Xcode项目管理器中的Finder来完成此操作。</em></p><p id="727f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果要复制文件，系统会提示您。<strong class="ka ir">取消选择复制项目框</strong>。当情况发生变化时，AWS Amplify CLI会更新该文件。如果您选中目标框，那么您的项目在被复制时可能不会收到更新。如果取消选中该框，则每当您通过Amplify CLI修改项目资源时，该文件都会更新。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="9dab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">初始化视图控制器中的AWSMobileClient</strong></p><p id="f5ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe oi oj ok mz b">AWSMobileClient</code>通过管理与认证相关任务的应用程序会话，为开发人员提供客户端API和构建块。当您克隆示例LWA应用程序时，LoginViewController拥有您的应用程序和Amazon登录之间的授权流的所有必要代码。</p><p id="bb71" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是对ViewController进行的四项更改，以集成AWSMobileClient并联合LWA身份提供者和Cognito联邦身份。</p><p id="4cba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ld"> #1 —第13行</em>新增<em class="ld">进口押汇</em></p><p id="7617" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ld"> #2 —第23行</em>从<em class="ld"> viewDidLoad() </em>中调用<em class="ld">initializeAWSMobileClient()</em>函数</p><p id="9055" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ld"> #3 —第27–49行</em>是AWSMobileClient初始化函数<em class="ld">initializeAWSMobileClient()</em></p><p id="4364" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ld"> #4 —第88–111行</em> AWSMobileClient从Amazon的登录中获取提供者令牌，并将其传递给Cognito联合身份池以检索唯一的Id。</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="oh lc l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated"><a class="ae kw" href="https://gist.github.com/mobilequickie/47a238e073043a271425f7ffe9d56d5e" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/mobile quickie/47a 238 e 073043 a 271425 f 7 FFE 9d 56d 5 e</a></figcaption></figure><p id="682f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们已经完成了iOS代码的更新。让我们运行应用程序并登录亚马逊。:)</p><p id="db91" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:使用Amazon作为联合登录提供者的登录完全集成到SDK中，但不是AWS SDK for iOS提供的插件auth UI的一部分。插件身份验证UI本身支持基本身份验证(通过Cognito用户池)、脸书登录和谷歌登录。</p><h2 id="624f" class="nd ln iq bd lo no np dn ls nq nr dp lw kj ns nt ma kn nu nv me kr nw nx mi ny bi translated">最后的想法</h2><p id="a71a" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">现在，我们已经通过登录亚马逊(LWA)验证了我们的用户，并将LWA与亚马逊Cognito集成，为我们的移动用户提供临时、有限的AWS凭据来调用我们的AWS资源。通过保护您的资源和存储在您的资源上的用户数据的隐私，您的应用现在更加安全，并且您的应用可以扩展到数百万用户！</p><p id="b62d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">拥有超过2亿个亚马逊帐户，使用亚马逊登录是为您的用户提供的另一个伟大的第三方登录提供商。请记住，第三方登录提供商集成对开发人员的最大好处是能够收集用户信息，例如来自LWA的用户资料，其中提供了用户的全名、电子邮件地址和邮政编码。从用户的角度来看，另一个好处是他们不需要记住另一个用户名/密码。</p><p id="5516" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">试试用亚马逊登录，让我知道效果如何。</p></div></div>    
</body>
</html>