<html>
<head>
<title>UICollectionView + UICVDataSource + UICVDelegateFlowLayout Straight From The Docs. Swift 4.2 Xcode 10.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">UICollectionView+uicvdata source+UICVDelegateFlowLayout直接来自文档。雨燕4.2 Xcode 10。</h1>
<blockquote>原文：<a href="https://itnext.io/uicollectionview-uicvdatasource-uicvdelegateflowlayout-straight-from-the-docs-8201a3f12bf5?source=collection_archive---------2-----------------------#2018-10-24">https://itnext.io/uicollectionview-uicvdatasource-uicvdelegateflowlayout-straight-from-the-docs-8201a3f12bf5?source=collection_archive---------2-----------------------#2018-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e553" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">直接从<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionview" rel="noopener ugc nofollow" target="_blank">苹果开发者文档中了解UICollectionView和更多内容。</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/2e4f50e745c433f963786612776080c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCka2r5AJIx1HM6SA7KzOA.png"/></div></div></figure><h1 id="9c46" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">UICollectionView —直接来自文档。</h1><p id="8a58" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">今天我将向大家展示如何在Swift 4.2和Xcode 10中构建UICollectionView。我们将在查看<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionview" rel="noopener ugc nofollow" target="_blank">苹果开发者文档的同时一步一步地编写代码。</a></p><p id="af13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">直接来自文档(SFTD)是一系列直接来自文档的开发教程，由我Maxwell通过Medium和YouTube提供给你。</p><p id="6992" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SFTD方法将帮助您快速学习语言、框架和库，同时确保最佳实践，因为我们直接学习文档，而不是通过简单的udemy课程。你也将开始掌握如何阅读文档，这对你作为一名开发人员的职业生涯有很大的帮助。</p><h1 id="1c6c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">我们来建吧。</strong></h1><p id="f6bc" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">向下滚动到文档中的主题。我将解释每个加粗的主题和每个主题中列出的大多数方法。首先，我们就主题编写代码，然后我解释每一行重要的内容。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><div class="kn ko kp kq gt ab cb"><figure class="mj kr mk ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><img src="../Images/1ebec7d67a84b35e2554d7827902624d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1586/format:webp/1*HtYzJcZHmX5fOPKK7xjerQ.png"/></div></figure><figure class="mj kr mp ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><img src="../Images/1ea312f9bdcd54649dde7b94dac168b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*LYyS3-ofJ2rkE-dVBApkXQ.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk mu di mv mw translated">代码+结果</figcaption></figure></div><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/20f7b14f31e4eac4483b9bdf407251d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*0otKZabpsCITUfYnkhxeQg.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">文件（documents的简写）</figcaption></figure><h2 id="d06f" class="my kz iq bd la mz na dn le nb nc dp li jy nd ne lm kc nf ng lq kg nh ni lu nj bi translated">初始化集合视图</h2><p id="37e6" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">让我们初始化我们的集合视图，并用编程设置的约束将它显示在屏幕上。</p><ol class=""><li id="4ae7" class="nk nl iq jp b jq jr ju jv jy nm kc nn kg no kk np nq nr ns bi translated">使用普通的UICollectionViewFlowLayout创建UICollectionView的实例</li><li id="a716" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">用自动布局约束和40 40 20 20的良好插图将垃圾放在屏幕上</li></ol></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><div class="kn ko kp kq gt ab cb"><figure class="mj kr ny ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><img src="../Images/456e2adbb34dad025fe9fce4133fbda7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1426/format:webp/1*GbtGAwj_boGHgUAXE4YYJA.png"/></div></figure><figure class="mj kr nz ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><img src="../Images/88b16b30d968433d714d70cb5d7de51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*FiMViMwNVxCEocyN4uY-2A.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk oa di ob mw translated">代码+结果</figcaption></figure></div><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/c9fcd08f45bb4c140eaeea6d4d664d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*9UCkDRLf9KDhlA8s7RxdGw.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">UICollectionView主题文档—提供数据</figcaption></figure><h2 id="917f" class="my kz iq bd la mz na dn le nb nc dp li jy nd ne lm kc nf ng lq kg nh ni lu nj bi translated">提供集合视图数据并创建集合视图单元格</h2><p id="9a94" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们的屏幕上有一个UICollectionView。让我们按照<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionviewdatasource" rel="noopener ugc nofollow" target="_blank"> UICollectionViewDataSource协议用数据填充它。</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/efb26f862b51b54207f84261e2af5d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*xZy3VVdL-21T01rhuuDGhQ.png"/></div></figure><ol class=""><li id="3904" class="nk nl iq jp b jq jr ju jv jy nm kc nn kg no kk np nq nr ns bi translated">创建一个扩展并符合cv数据源协议。</li><li id="152a" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">在<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionviewdatasource/1618058-collectionview" rel="noopener ugc nofollow" target="_blank"> numberOfItemsInSection方法中返回我们想要的项目数。</a></li><li id="0ec5" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">在<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionviewdatasource/1618023-numberofsections" rel="noopener ugc nofollow" target="_blank"> numberOfSections方法中返回我们想要的节数。</a></li><li id="d3ba" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">创建一个UICollectionView可以用来标识单元格的常量。我使用一个常量，就像你在React Redux中使用动作类型一样。所有这些都是为了确保重用标识符总是相同的。如果我们打错了，这有助于我们克服歧义，也就是说，我们会在编译器之前很久就发现错误。</li><li id="eb16" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">在viewDidLoad中将默认的UICollectionViewCell注册到我们的cv中。使用我们刚刚声明的CELL_ID重用标识符。</li><li id="47fd" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">在我们的扩展中，<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionviewdatasource/1618029-collectionview" rel="noopener ugc nofollow" target="_blank"> cellForItemAt indexPath </a>将允许我们为每个单元格提供视图。让单元格出队，使用CELL_ID标识符，给它一个背景颜色，然后返回单元格。</li></ol></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="5f4e" class="my kz iq bd la mz na dn le nb nc dp li jy nd ne lm kc nf ng lq kg nh ni lu nj bi translated">更改布局</h2><p id="748c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">通过<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionviewflowlayout" rel="noopener ugc nofollow" target="_blank">UICollectionViewFlowLayout</a>和<a class="ae kl" href="https://developer.apple.com/documentation/uikit/uicollectionviewdelegateflowlayout" rel="noopener ugc nofollow" target="_blank">UICollectionViewDelegateFlowLayout</a>，我们可以修改集合视图的布局，并赋予它不同的大小、插入等。</p><div class="kn ko kp kq gt ab cb"><figure class="mj kr oc ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><img src="../Images/ab667d142989ad7db16cf0bdf5dca5ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*RQh4LrwVITq943MIJx9VAQ.png"/></div></figure><figure class="mj kr od ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><img src="../Images/3d1235a0bbae2251994d25c52d4c6a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*-Vc6SgBv4qoobt45_E8J_w.png"/></div></figure></div><p id="440f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">UICollectionViewDelegateFlowLayout为我们提供了一些很好的方法来覆盖初始流布局的属性。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oe"><img src="../Images/39a23ba58f7febbc6b2a5fb695893988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SJ4mS0KAo5yZzgeOcWjtDQ.png"/></div></div></figure><ol class=""><li id="338f" class="nk nl iq jp b jq jr ju jv jy nm kc nn kg no kk np nq nr ns bi translated">我们已经定义了我们的UICollectionViewFlowLayout，但是希望确保您在这里注意到它。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/d9e64d3fa1e375ca1d093294d7eafbd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/1*YS5ZPqTRU5YybjtaxJVmKQ.gif"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">干净利落。但是为什么是蓝条呢？🤔</figcaption></figure><ol class=""><li id="f359" class="nk nl iq jp b jq jr ju jv jy nm kc nn kg no kk np nq nr ns bi translated">在我们的扩展中，或者如果您愿意的话，在一个单独的扩展中，遵循UICollectionViewDelegateFlowLayout协议。</li><li id="df72" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">让我们把背景颜色改成灰色，这样我们可以更快更好地看到我们的细胞-🤔。白细胞会使其与我们将要使用的细胞大小相混淆。想用白细胞试试就看哈哈。</li><li id="a5da" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">在sizeForItemAt indexPath中，返回一个CGSize实例，为我们的cv单元格指定一个大小。在这种情况下，instagram风格的外观布局。</li><li id="ddc6" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">将cv代理设定为“自己”。</li></ol><p id="b786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的，你可以看到我们用细胞得到了这个很酷的滚动视图。然而，这也产生了一些问题。比如，为什么我们会有蓝色的条，为什么我们会在控制台上得到讨厌的警告？</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi og"><img src="../Images/c1b66a0a6e4c5f6411f9455a779c50ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pVZYZ50Jc7QASVD_uOTaIw.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">这个boi是哪里来的？🤔</figcaption></figure><h2 id="febc" class="my kz iq bd la mz na dn le nb nc dp li jy nd ne lm kc nf ng lq kg nh ni lu nj bi translated">更改布局—没有代理</h2><p id="c253" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">您还可以直接修改流布局，而不使用委托方法。所以要回答上面的问题，请看这段代码或者实现我没有包括的相应方法。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/9429f760c16a085db1aaefb60eff7ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*S7OCQmuLS5ZJ9N_atRP8Aw.png"/></div></figure><ol class=""><li id="b309" class="nk nl iq jp b jq jr ju jv jy nm kc nn kg no kk np nq nr ns bi translated">去掉间隔:这将使条形消失。这些条实际上只是您看到的视图。背景颜色。如果没有间隔，我们的细胞会因为每个细胞的灰色而看起来混合在一起。</li><li id="b121" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">去掉控制台中那个讨厌的警告:记得我们用常量把插入内容拉进来吗？这连同sizeForItemAt indexPath一起导致了我们的警告。简单地说，因为我们试图给我们的单元格一个屏幕大小的宽度，但是它的容器，collectionView，在每个尺寸上插入了大约20px。如果一个东西比容器本身大，我们怎么能把它装进容器呢？我们不能，所以Xcode在它认为最好的地方调整大小，然后警告我们。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oi"><img src="../Images/7c8a796eea732900e586e0e7c647c749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqcE9GJVvWXEEBTRxcBADw.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oj"><img src="../Images/d1e8d71b1d0df61e530bc617e1cbf313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1zr4C9DK6UBzB_wIsc6EfQ.png"/></div></div></figure><p id="656a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以改变单元格宽度，我们就可以开始了。没有警告。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ok"><img src="../Images/53a3f11fe71c0913b88b83044ba46eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8OlcWhGq8hgMzphZd5IRQ.png"/></div></div></figure><h1 id="333e" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="03ec" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">好了，我们已经成功地学习了UICollectionView、UICollectionViewDelegateFlowLayout和UICollectionViewDataSource类的一些关键部分和方法，以及协议。直接来自苹果开发者文档。</p><p id="89f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我计划再写几篇关于UICollectionView的文章，特别是我们在这篇文章中没有涉及的内容，比如单元格预取、拖动单元格、动画单元格、自定义单元格等等。如果你让我知道你想要的话，我会尽快写出来。</p><h1 id="7020" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">SFTD</h1><p id="d926" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">SFTD方法将帮助您快速学习语言、框架和库，同时确保最佳实践，因为我们直接学习文档，而不是通过简单的udemy课程。 你也将开始掌握如何阅读文档，这将极大地帮助你作为一名开发人员的整个职业生涯。</p><p id="ae0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总而言之，我认为这是学习如何编码的一个疯狂而可靠的方法。我希望在我刚开始的时候，我可以这样学习，因为我总是对文档感到困惑。如果你同意，请在这里和<a class="ae kl" href="https://www.youtube.com/MAXNELSON" rel="noopener ugc nofollow" target="_blank">我的youtube频道</a>上告诉我，我会继续发布SFTD的内容供你学习。</p><h1 id="339c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">更多东西</h1><p id="7054" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">如果你想第一个听说有限的免费课程优惠券(每月10张)，请随时订阅我的<a class="ae kl" href="https://www.maxcodes.io" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">每周开发内容电子邮件列表。</strong>T9】</a></p></div></div>    
</body>
</html>