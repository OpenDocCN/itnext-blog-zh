<html>
<head>
<title>The Absolute Easiest Way to Debug Node.js — with VS Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调试Node.js最简单的方法——使用VS代码</h1>
<blockquote>原文：<a href="https://itnext.io/the-absolute-easiest-way-to-debug-node-js-with-vscode-2e02ef5b1bad?source=collection_archive---------0-----------------------#2018-11-11">https://itnext.io/the-absolute-easiest-way-to-debug-node-js-with-vscode-2e02ef5b1bad?source=collection_archive---------0-----------------------#2018-11-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="6154" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">让我们面对现实吧…调试Node.js是(并且一直是)一种痛苦。</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/a6d92b1a971938fa788a410498c9a95b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*9bDq6pyYoXa39QxldAkf-g.jpeg"/></div></figure><h2 id="c3e0" class="kt jo iq bd jp ku kv dn jt kw kx dp jx ky kz la kb lb lc ld kf le lf lg kj lh bi translated"><strong class="ak">进入Node.js </strong>调试之痛</h2><p id="57fb" class="pw-post-body-paragraph li lj iq lk b ll lm ln lo lp lq lr ls ky lt lu lv lb lw lx ly le lz ma mb mc ij bi md translated">如果你曾经有幸为Node.js项目编写过代码，你就会明白我所说的调试并找出问题所在并不容易。</p><p id="3961" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">与浏览器中的JavaScript或具有IntelliJ等强大IDE的Java不同，您不能只是在任何地方设置断点，刷新页面或重启编译器，并缓慢地遍历代码检查对象，评估函数并找到突变或缺失的变量等。你就是不能，而且很臭。</p><p id="2086" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">但是调试是可能的，只不过需要多费一点力气。让我们回顾一下这些选项，然后我将向您展示我在自己的发展过程中遇到的最简单的方法。</p><h2 id="0622" class="kt jo iq bd jp ku kv dn jt kw kx dp jx ky kz la kb lb lc ld kf le lf lg kj lh bi translated"><strong class="ak">node . js中调试的选项</strong></h2><p id="9b15" class="pw-post-body-paragraph li lj iq lk b ll lm ln lo lp lq lr ls ky lt lu lv lb lw lx ly le lz ma mb mc ij bi translated">有很多方法可以调试你行为不端的Node.js程序，我在下面列出了它们，如果你愿意的话，可以通过链接了解更多。</p><ul class=""><li id="8c95" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated">如果你曾经写过一行JavaScript，这个已经被证明是真正的待机状态，真的不需要更多的解释。它内置于Node.js并在终端中打印，就像内置于JavaScript并在浏览器控制台中打印一样。</li></ul><p id="53c5" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">在Java里是<code class="fe na nb nc nd b">System.out.println()</code>，在Python里是<code class="fe na nb nc nd b">print()</code>，你懂了吧。这是最容易实现的方法，也是在干净的代码中添加额外信息的最快方法——但它也可以(有时)帮助您找到并修复错误。</p><ul class=""><li id="14c3" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated"><strong class="lk ir"> Node.js文档</strong><code class="fe na nb nc nd b"><strong class="lk ir">—-inspect</strong></code><strong class="lk ir"/>——node . js文档本身明白调试并不是最容易的，所以他们制作了一个<a class="ae ne" href="https://nodejs.org/en/docs/guides/debugging-getting-started/" rel="noopener ugc nofollow" target="_blank">方便的参考资料</a>来帮助人们入门。</li></ul><p id="a760" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">这很有用，但是说实话，除非你已经编程一段时间了，否则这并不是最容易理解的东西。它们很快就掉进了UUIDs、WebSockets和安全隐患的兔子洞，我开始感到力不从心。我对自己说:一定有一种不那么复杂的方法来做这件事。</p><ul class=""><li id="9f3e" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated"><strong class="lk ir">Chrome DevTools</strong>——<a class="nf ng ep" href="https://medium.com/u/6d5456230083?source=post_page-----2e02ef5b1bad--------------------------------" rel="noopener" target="_blank">保罗·爱尔兰</a>早在2016年就写了一篇关于使用Chrome dev tools调试Node.js的很棒的<a class="ae ne" href="https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27" rel="noopener">博文</a>(2018年更新)，从表面上看，这听起来很简单，并且像是调试的一大进步。</li></ul><p id="3b6e" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">快进了半个小时，我仍然没有成功地将DevTools窗口连接到我的简单节点程序，我不再那么确定了。也许我只是不能遵循指示，但Chrome DevTools似乎使调试变得比它应该的更复杂。</p><ul class=""><li id="9297" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated">JetBrains是我最喜欢的软件开发公司之一，也是IntelliJ和WebStorm(仅举几个例子)的开发者，JetBrains很棒。他们的工具有一个奇妙的插件生态系统，直到最近，他们毫无疑问是我的首选IDE。</li></ul><p id="809a" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">有了这样一个专门的用户群，就出现了许多有用的文章，如<a class="ae ne" href="https://www.jetbrains.com/help/webstorm/running-and-debugging-node-js.html" rel="noopener ugc nofollow" target="_blank">和</a>，它们介绍了调试节点，但类似于节点文档和Chrome DevTools选项，这并不容易。在WebStorm准备就绪之前，您必须创建一个调试配置，附加正在运行的进程，并在首选项中做好一些配置。</p><ul class=""><li id="2b38" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated"><strong class="lk ir"> Visual Studio代码</strong> —这是我的节点调试新黄金标准。我从没想过我会这么说，但我完全相信<a class="ae ne" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> VS代码</a>，团队发布的每一个新功能都让我更喜欢这个IDE。</li></ul><p id="41b3" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">VS代码做了所有其他调试Node.js的选项都做不到的事情，它让调试变得非常简单。如果你想对你的调试更感兴趣，你完全可以，但是他们把它分解成足够简单，任何人都可以很快上手并运行，不管你对ide、Node、编程等有多熟悉。太棒了。</p><h2 id="869d" class="kt jo iq bd jp ku kv dn jt kw kx dp jx ky kz la kb lb lc ld kf le lf lg kj lh bi translated"><strong class="ak">在Node.js中设置VS代码进行调试</strong></h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/cd808536b1969f0257d972975d53f128.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*8YEmou3F1ymiHrlNgVqHgQ.jpeg"/></div></figure><p id="25b9" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">抱歉，我无法抗拒这个迷因——它实在是太合适了。好了，让我们来看看如何设置VS代码来调试节点。我假设你已经从我上面发布的<a class="ae ne" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank">链接</a>下载了VS代码，所以我们准备开始设置它。</p><p id="0c53" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">打开<strong class="lk ir">首选项&gt;设置</strong>，在搜索框中输入“节点调试”。在扩展选项卡下，应该有一个名为“节点调试”的扩展。从这里，点击第一个框:<strong class="lk ir">调试&gt;节点:自动连接</strong>并将下拉菜单设置为“开”。你现在差不多可以走了。是的，真的很简单。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi ni"><img src="../Images/cc52a29236c39feb8835e97f35f446a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rUzpJjNxAsLTZUMfvrVh1A.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">下面是您应该在设置选项卡下看到的内容。将第一个下拉菜单“调试&gt;节点:自动附加”设置为“开”。</figcaption></figure><p id="8af0" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">现在，转到Node.js项目文件，通过单击文件左侧您希望看到代码停止的地方来设置一些断点，并在终端中键入<code class="fe na nb nc nd b">node --inspect &lt;FILE NAME&gt;</code>。现在看着奇迹发生…</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nr"><img src="../Images/66a403d92dbe8d99ac11c0fa5ccf032e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogcXellTrcU3SIv5ALLUHA.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">看到红色断点了吗？请参见终端中的“节点—检查readFileStream.js ”?就是这样。</figcaption></figure><p id="b860" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated"><strong class="lk ir"> VS代码调试进行中</strong></p><p id="a9e7" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">如果你需要一个Node.js项目来测试这个，你可以在这里下载我的repo<a class="ae ne" href="https://github.com/paigen11/file-read-challenge" rel="noopener ugc nofollow" target="_blank"/>。它是用来测试Node的不同形式的大量数据流的，但是对于这个演示来说，它工作得非常好。如果你想了解更多关于节点和性能优化的流数据，你可以在这里和<a class="ae ne" rel="noopener ugc nofollow" target="_blank" href="/streams-for-the-win-a-performance-comparison-of-nodejs-methods-for-reading-large-datasets-pt-2-bcfa732fa40e">这里</a>看到我的帖子。</p><p id="fa90" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">一旦你点击了<code class="fe na nb nc nd b">Enter</code>，你的VS代码终端应该在底部变成橙色，表示你处于调试模式，你的控制台会打印一些类似<code class="fe na nb nc nd b">‘Debugger Attached’</code>的信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi ns"><img src="../Images/0d65ee4d54073cf3eec39af429ff17bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aNFXCnEf2j5lCp5ZAPC8DQ.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">橙色工具栏和“调试器已连接”消息将告诉您VS代码在调试模式下运行正常。</figcaption></figure><p id="d29d" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">一旦您看到这种情况，恭喜您，您正在Node.js中以调试模式运行！</p><p id="66e3" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">现在，您可以在屏幕的左下角看到您的断点(并且可以通过复选框打开和关闭它们)，并且您可以像在浏览器中一样通过小的play、step over、step in、restart等来单步执行代码。IDE顶部中间的按钮。VS代码甚至用黄色突出显示了断点和您已经停止的那一行，这样更容易理解。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nt"><img src="../Images/01928ee84efd5113e2c5bf214d895bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_rTrxs5eBDQXy-ajquNVRQ.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">点击顶部的播放按钮，从代码中的一个断点跳到下一个断点。</figcaption></figure><p id="1c79" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">当您从一个断点跳到另一个断点时，您可以看到程序在VS代码IDE底部的调试控制台中打印出了<code class="fe na nb nc nd b">console.log</code>,黄色突出显示也将跟随您。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nu"><img src="../Images/21e81a9c8f83d3c5d81bea7e825c074d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JFrOtthKOstqNFgT75PaCw.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">正如你所看到的，当我们在断点上停止时，我们可以在VS代码的左上角看到我们可以在控制台中浏览的所有局部范围信息。</figcaption></figure><p id="36e8" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">正如您所看到的，随着程序的进展，我越深入断点，越多的输出到调试控制台，并且在这个过程中，我可以使用VS代码左上角的工具探索本地范围内的对象和函数，就像我可以在浏览器中探索范围和对象一样。不错！</p><p id="d98a" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">很简单，是吧？</p><h2 id="04db" class="kt jo iq bd jp ku kv dn jt kw kx dp jx ky kz la kb lb lc ld kf le lf lg kj lh bi translated">结论</h2><p id="2b06" class="pw-post-body-paragraph li lj iq lk b ll lm ln lo lp lq lr ls ky lt lu lv lb lw lx ly le lz ma mb mc ij bi translated">Node.js调试不一定要像过去那样令人头疼，也不需要涉及代码库中的500个<code class="fe na nb nc nd b">console.log()</code>来找出bug在哪里。</p><p id="251f" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">Visual Studio代码的Debug &gt; Node: Auto Attach设置使它成为了过去，我个人非常感激。</p><p id="03ad" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">过几周再来看看，我会写关于使用Puppeteer和headless Chrome进行端到端测试，或者使用Nodemailer在MERN应用程序中重置密码的文章，所以请关注我，以免错过。</p><p id="09f4" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated">感谢您的阅读，我希望这能让您了解如何在VS代码的帮助下更轻松有效地调试Node.js程序。非常感谢鼓掌和分享！</p><p id="043f" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated"><strong class="lk ir">如果你喜欢读这篇文章，你可能也会喜欢我的其他博客:</strong></p><ul class=""><li id="d6b9" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated"><a class="ae ne" rel="noopener ugc nofollow" target="_blank" href="/using-node-js-to-read-really-really-large-files-pt-1-d2057fe76b33">使用Node.js读取非常非常大的数据集&amp;文件(Pt 1) </a></li><li id="0216" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated"><a class="ae ne" href="https://medium.com/@paigen11/sequelize-the-orm-for-sql-databases-with-nodejs-daa7c6d5aca3" rel="noopener"> Sequelize:用Node.js实现Sequel数据库的ORM</a></li><li id="1b5a" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated"><a class="ae ne" rel="noopener ugc nofollow" target="_blank" href="/streams-for-the-win-a-performance-comparison-of-nodejs-methods-for-reading-large-datasets-pt-2-bcfa732fa40e">Streams For the Win:node . js方法读取大型数据集的性能比较(第二部分)</a></li></ul></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="8702" class="pw-post-body-paragraph li lj iq lk b ll mm ln lo lp mn lr ls ky mo lu lv lb mp lx ly le mq ma mb mc ij bi translated"><strong class="lk ir">参考资料和更多资源:</strong></p><ul class=""><li id="0e19" class="mr ms iq lk b ll mm lp mn ky mt lb mu le mv mc mw mx my mz bi translated">Github，节点读取文件回购:<a class="ae ne" href="https://github.com/paigen11/file-read-challenge" rel="noopener ugc nofollow" target="_blank">https://github.com/paigen11/file-read-challenge</a></li><li id="f595" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated">Node.js文档—检查器:<a class="ae ne" href="https://nodejs.org/en/docs/guides/debugging-getting-started/" rel="noopener ugc nofollow" target="_blank">https://nodejs . org/en/docs/guides/debugging-getting-started/</a></li><li id="5df9" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated">Paul Irish关于使用Chrome DevTools调试Node.js的博客:<a class="ae ne" href="https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27" rel="noopener">https://medium . com/@ Paul _ Irish/debugging-node-js-night lies-with-Chrome-DevTools-7 C4 a1 b 95 AE 27</a></li><li id="c374" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated">JetBrains文档，运行和调试node . js—<a class="ae ne" href="https://www.jetbrains.com/help/webstorm/running-and-debugging-node-js.html" rel="noopener ugc nofollow" target="_blank">https://www . JetBrains . com/help/web storm/Running-and-Debugging-node-js . html</a></li><li id="7fda" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated">Visual Studio代码下载:【https://code.visualstudio.com/download T2】</li><li id="4f68" class="mr ms iq lk b ll nv lp nw ky nx lb ny le nz mc mw mx my mz bi translated">VS代码调试Node.js文档:<a class="ae ne" href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_attaching-to-nodejs" rel="noopener ugc nofollow" target="_blank">https://Code . visual studio . com/docs/nodejs/nodejs-Debugging # _ attaching-to-nodejs</a></li></ul></div></div>    
</body>
</html>