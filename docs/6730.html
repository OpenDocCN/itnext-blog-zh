<html>
<head>
<title>Simplest basic K8s tutorial to mount a local host directory into a pod volume example with Rancher Desktop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Rancher Desktop将本地主机目录挂载到pod卷示例的最简单的基本K8s教程</h1>
<blockquote>原文：<a href="https://itnext.io/simplest-basic-k8s-tutorial-to-mount-local-host-directory-into-a-pod-volume-example-with-rancher-18b4f1d75cd9?source=collection_archive---------0-----------------------#2022-02-13">https://itnext.io/simplest-basic-k8s-tutorial-to-mount-local-host-directory-into-a-pod-volume-example-with-rancher-18b4f1d75cd9?source=collection_archive---------0-----------------------#2022-02-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/00d4470839b9cf7f814b3fe271974946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7HRJBSf_ta1IuemfcyVhDg.png"/></div></div></figure><p id="ebce" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">Rancher Desktop是在你的笔记本电脑上熟悉Kubernetes的绝佳方式，而且价格低廉。在生产环境中工作时，您通常会有一个管理团队来设置允许您使用持久数据的存储类。在本地集群上工作时，<strong class="ke iv">这是如何将本地机器上的目录挂载到Rancher Desktop </strong>中K8s集群上运行的pod中。</p><blockquote class="lb lc ld"><p id="081b" class="kc kd le ke b kf kg kh ki kj kk kl km lf ko kp kq lg ks kt ku lh kw kx ky kz in bi translated">TL；dr:使用卷主机路径和提供的<strong class="ke iv">rancher.io/local-path</strong>存储类来快速运行！</p><p id="961f" class="kc kd le ke b kf kg kh ki kj kk kl km lf ko kp kq lg ks kt ku lh kw kx ky kz in bi translated"><strong class="ke iv">2023年3月在✅rancher desktop 1 . 8 . 1上测试</strong></p></blockquote><p id="74f6" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">使用本教程设置您的实验室以安装Rancher Desktop——基本上是下载并双击以获得K8s集群(是的，就这么简单)！！<strong class="ke iv">祝贺SUSE/Rancher的朋友们几周前发布了Rancher Desktop 1.0</strong><strong class="ke iv">！</strong></p><div class="li lj gq gs lk ll"><a rel="noopener  ugc nofollow" target="_blank" href="/rancher-desktop-and-nerdctl-for-local-k8s-dev-d1348629932a"><div class="lm ab fp"><div class="ln ab lo cl cj lp"><h2 class="bd iv gz z fq lq fs ft lr fv fx it bi translated">适用于本地K8s开发的Rancher Desktop和nerdctl</h2><div class="ls l"><h3 class="bd b gz z fq lq fs ft lr fv fx dk translated">我花了相当长的时间(2.6)试图(2.5)为Kubernetes初学者找出(2.4)一个好的本地开发设置(2.3)</h3></div><div class="lt l"><p class="bd b dl z fq lq fs ft lr fv fx dk translated">itnext.io</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz ka ll"/></div></div></a></div><h1 id="7395" class="ma mb iu bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">1/3克隆最简单的k8s repo并编辑部署清单</h1><p id="e88d" class="pw-post-body-paragraph kc kd iu ke b kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv nc kx ky kz in bi translated">我们将采用我们在下面的文章中部署的应用程序，并添加一个静态文件夹和一些HTML，上面写着<em class="le">“来自主机的阿罗哈！”</em>在浏览器中查看。您不需要阅读这篇文章，但是作为复习，它有一个最小的部署、服务和入口。</p><div class="li lj gq gs lk ll"><a rel="noopener  ugc nofollow" target="_blank" href="/simplest-minimal-k8s-app-tutorial-with-rancher-desktop-in-5-min-5481edb9a4a5"><div class="lm ab fp"><div class="ln ab lo cl cj lp"><h2 class="bd iv gz z fq lq fs ft lr fv fx it bi translated">最简单的K8s应用程序教程，5分钟内完成</h2><div class="ls l"><h3 class="bd b gz z fq lq fs ft lr fv fx dk translated">本文为一个应用程序提供了最简单、最容易、最小化的Kubernetes (K8s)集群和清单，您可以…</h3></div><div class="lt l"><p class="bd b dl z fq lq fs ft lr fv fx dk translated">itnext.io</p></div></div><div class="lu l"><div class="nd l lw lx ly lu lz ka ll"/></div></div></a></div><ol class=""><li id="8186" class="ne nf iu ke b kf kg kj kk kn ng kr nh kv ni kz nj nk nl nm bi translated">转到您的主目录(<code class="fe nn no np nq b">/Users/yourusername</code>)，在那里Rancher Desktop可以读/写您的文件(注意macOS works上<code class="fe nn no np nq b">/Users/</code>下的任何地方)</li><li id="e298" class="ne nf iu ke b kf nr kj ns kn nt kr nu kv nv kz nj nk nl nm bi translated">克隆最简单的k8s回购</li><li id="e4e7" class="ne nf iu ke b kf nr kj ns kn nt kr nu kv nv kz nj nk nl nm bi translated">查看<code class="fe nn no np nq b">mount-local</code>分店</li><li id="391b" class="ne nf iu ke b kf nr kj ns kn nt kr nu kv nv kz nj nk nl nm bi translated">看看简单的<code class="fe nn no np nq b">index.html</code>文件中的消息</li><li id="c5cc" class="ne nf iu ke b kf nr kj ns kn nt kr nu kv nv kz nj nk nl nm bi translated">编辑部署清单(yaml文件)以反映您在哪里克隆了repo(第35行)。</li></ol><pre class="nw nx ny nz gu oa nq ob oc aw od bi"><span id="6aa8" class="oe mb iu nq b gz of og l oh oi"><strong class="nq iv">$ cd ~</strong> # This only works in /Users/ or /home unless you override some settings</span><span id="ea0f" class="oe mb iu nq b gz oj og l oh oi"><strong class="nq iv">$ git clone </strong><a class="ae la" href="https://github.com/jwsy/simplest-k8s" rel="noopener ugc nofollow" target="_blank"><strong class="nq iv">https://github.com/jwsy/simplest-k8s</strong></a></span><span id="c201" class="oe mb iu nq b gz oj og l oh oi"><strong class="nq iv">$ git checkout mount-local<br/></strong>Switched to branch 'mount-local'<br/>Your branch is up to date with 'origin/mount-local'.</span><span id="e3fc" class="oe mb iu nq b gz oj og l oh oi"><strong class="nq iv">$ cat simplest-k8s/host-mount/index.html<br/></strong>Aloha from the host!</span><span id="e922" class="oe mb iu nq b gz oj og l oh oi"><strong class="nq iv"># edit simplest-k8s/jade-shooter-deployment.yaml</strong></span></pre><p id="e21b" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在这个例子中，我将这个回购克隆到<code class="fe nn no np nq b">/Users/jyee/code/</code>，所以第33行将如下所示:</p><pre class="nw nx ny nz gu oa nq ob oc aw od bi"><span id="a22a" class="oe mb iu nq b gz of og l oh oi">path: /Users/<strong class="nq iv">jyee/code</strong>/simplest-k8s/host-mount</span></pre><blockquote class="lb lc ld"><p id="3f04" class="kc kd le ke b kf kg kh ki kj kk kl km lf ko kp kq lg ks kt ku lh kw kx ky kz in bi translated">重要提示:目前默认共享以下目录:<strong class="ke iv"> /Users/$USER在macOS，/home/$USER在Linux，/tmp/rancher-desktop在两个</strong>。对于Windows，所有文件都通过WSL2自动共享。(摘自<a class="ae la" href="https://docs.rancherdesktop.io/faq/#q-does-file-sharing-work-similarly-to-docker-desktop-do-i-have-to-do-any-additional-configuration-to-mount-volumes-to-vms" rel="noopener ugc nofollow" target="_blank">https://docs . rancherdesktop . io/FAQ/# q-does-file-sharing-work-similarly-to-docker-desktop-do-I-have-do-any-additional-configuration-to-mount-volumes-to-VMs</a>)的文档—感谢<a class="ok ol ep" href="https://medium.com/u/f375207a2d5a?source=post_page-----18b4f1d75cd9--------------------------------" rel="noopener" target="_blank"> Yash Chauhan </a>的Linux帮助！</p></blockquote><p id="3745" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">部署清单看起来像这样，有重要的行:<br/> - 19将容器映像设置为我制作的一个<a class="ae la" href="https://javascript.plainenglish.io/kaboom-js-repl-it-custom-top-down-shooter-in-5-min-ebad8157073a" rel="noopener ugc nofollow" target="_blank">愚蠢的游戏，它扩展了nginx </a> <br/> - 27 &amp; 30，与安装到nginx <br/> - 33 <strong class="ke iv">提供的默认文件夹中的卷<br/> - 28的名称相匹配*您需要编辑* </strong>，在那里有您想要提供的文件</p><figure class="nw nx ny nz gu jv"><div class="bz fq l di"><div class="om on l"/></div></figure><p id="4f31" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">在这里阅读关于主机路径的更多信息:<a class="ae la" href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath" rel="noopener ugc nofollow" target="_blank">https://kubernetes . io/docs/concepts/storage/volumes/# host path</a></p><h1 id="e19d" class="ma mb iu bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">2/3创建名称空间并应用清单</h1><p id="74df" class="pw-post-body-paragraph kc kd iu ke b kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv nc kx ky kz in bi translated">您可以选择创建一个名称空间(在这个例子中我使用了<code class="fe nn no np nq b">js</code>),我推荐这样做，这样如果您想做更多的探索。这样，所有的pod/资源都在一个地方，而不是与许多其他pod/资源共享<code class="fe nn no np nq b">default </code>名称空间。</p><p id="30a3" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">然后，应用您创建的yaml，让K8s完成剩下的工作。在生产中，GitLab runner或Argo CI应该执行此部署。老的开发人员应该考虑用这个命令部署一个站点比FTP传输文件和在一些远程主机上维护一个Apache web服务器要容易得多😵…</p><pre class="nw nx ny nz gu oa nq ob oc aw od bi"><span id="c3e5" class="oe mb iu nq b gz of og l oh oi"><strong class="nq iv">$ kubectl create namespace js<br/></strong>namespace/js created</span><span id="589d" class="oe mb iu nq b gz oj og l oh oi"><strong class="nq iv">$ kubectl -n js apply -f simplest-k8s<br/></strong>deployment.apps/jade-shooter created<br/>ingress.networking.k8s.io/jade-shooter created<br/>service/jade-shooter-service created</span></pre><h1 id="04db" class="ma mb iu bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">3/3你完成了！访问您部署的网站和应用程序</h1><p id="1017" class="pw-post-body-paragraph kc kd iu ke b kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv nc kx ky kz in bi translated">浏览到<a class="ae la" href="http://jade-shooter.rancher.localhost/static/" rel="noopener ugc nofollow" target="_blank">http://jade-shooter.rancher.localhost/static/</a>并查看托管站点。在部署清单的第28行中，<code class="fe nn no np nq b">static/</code>来自您将它装入容器的地方。<strong class="ke iv">尝试编辑该文件和/或在您的主机路径中创建其他文件以进行测试。</strong></p><figure class="nw nx ny nz gu jv gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/89fa0d13b9d340f4da00167a505a9340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*_KlI0LKr5Tf7gkzVf33esg.png"/></div><figcaption class="op oq gk gi gj or os bd b be z dk translated">看的不多，但是分享很棒！</figcaption></figure><p id="98fc" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">你也可以浏览到http://jade-shooter.rancher.localhost/的<a class="ae la" href="http://jade-shooter.rancher.localhost/" rel="noopener ugc nofollow" target="_blank"/>(没有<code class="fe nn no np nq b">static/</code>端点)然后玩愚蠢的射击游戏，你可以复制/修改这个游戏，如本文所示</p><div class="li lj gq gs lk ll"><a href="https://javascript.plainenglish.io/kaboom-js-repl-it-custom-top-down-shooter-in-5-min-ebad8157073a" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fp"><div class="ln ab lo cl cj lp"><h2 class="bd iv gz z fq lq fs ft lr fv fx it bi translated">使用kaboom.js和repl.it在5分钟内创建一个自定义的自上而下的射手</h2><div class="ls l"><h3 class="bd b gz z fq lq fs ft lr fv fx dk translated">我小时候喜欢玩自上而下的射击游戏，比如《银河战舰》和《太空入侵者》,希望我也能自己定制一款…</h3></div><div class="lt l"><p class="bd b dl z fq lq fs ft lr fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="lu l"><div class="ot l lw lx ly lu lz ka ll"/></div></div></a></div><figure class="nw nx ny nz gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ou"><img src="../Images/2162ff5713bd4ca77af0d04a5303a326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JEWobHv3x2tAzKdvBpuoKA.png"/></div></div></figure><h1 id="fad0" class="ma mb iu bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">奖励:探索创建的集群和资源</h1><p id="007e" class="pw-post-body-paragraph kc kd iu ke b kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv nc kx ky kz in bi translated">你可以看到创建的存储类，并在这里阅读更多信息:【https://github.com/rancher/local-path-provisioner<a class="ae la" href="https://github.com/rancher/local-path-provisioner" rel="noopener ugc nofollow" target="_blank"/>。运行这些命令时，尝试使用Rancher Desktop中方便安装的TAB autocomplete。</p><pre class="nw nx ny nz gu oa nq ob oc aw od bi"><span id="654a" class="oe mb iu nq b gz of og l oh oi">$ kubectl get storageclasses.storage.k8s.io<br/>NAME                   PROVISIONER             RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE<br/>local-path (default)   rancher.io/local-path   Delete          WaitForFirstConsumer   false                  36m</span></pre><p id="4680" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">使用get all命令查看您的<code class="fe nn no np nq b">js</code>名称空间中的所有内容</p><pre class="nw nx ny nz gu oa nq ob oc aw od bi"><span id="07b7" class="oe mb iu nq b gz of og l oh oi">$ kubectl -n js get all<br/>NAME                                READY   STATUS    RESTARTS   AGE<br/>pod/jade-shooter-6c45dd9976-8q4sh   1/1     Running   0          25m</span><span id="38de" class="oe mb iu nq b gz oj og l oh oi">NAME                           TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)   AGE<br/>service/jade-shooter-service   ClusterIP   10.43.40.44   &lt;none&gt;        80/TCP    25m</span><span id="5380" class="oe mb iu nq b gz oj og l oh oi">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE<br/>deployment.apps/jade-shooter   1/1     1            1           25m</span><span id="3212" class="oe mb iu nq b gz oj og l oh oi">NAME                                      DESIRED   CURRENT   READY   AGE<br/>replicaset.apps/jade-shooter-6c45dd9976   1         1         1       25m</span></pre><p id="f73c" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">要“重置”您的集群，您可以使用delete命令删除命名空间中的所有内容。</p><pre class="nw nx ny nz gu oa nq ob oc aw od bi"><span id="0d7a" class="oe mb iu nq b gz of og l oh oi">$ kubectl delete namespace js</span></pre><p id="3479" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">看看您还可以在本地K8s集群中做些什么，比如安装Rancher和构建一个Elasticsearch/Kibana集群！</p><div class="li lj gq gs lk ll"><a rel="noopener  ugc nofollow" target="_blank" href="/elasticsearch-kibana-on-k8s-w-rancher-desktop-rancher-cluster-manager-2-6-f155c86164c0"><div class="lm ab fp"><div class="ln ab lo cl cj lp"><h2 class="bd iv gz z fq lq fs ft lr fv fx it bi translated">K8s上的Elasticsearch &amp; Kibana，带有Rancher Desktop &amp; Rancher Cluster Manager 2.6</h2><div class="ls l"><h3 class="bd b gz z fq lq fs ft lr fv fx dk translated">唯一的先决条件:从https://rancherdesktop.io/安装牧场主桌面</h3></div><div class="lt l"><p class="bd b dl z fq lq fs ft lr fv fx dk translated">itnext.io</p></div></div><div class="lu l"><div class="ov l lw lx ly lu lz ka ll"/></div></div></a></div><p id="38ec" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">你可能还想了解Helm，这也是本教程中大多数现代K8s应用程序的打包方式👇👇</p><div class="li lj gq gs lk ll"><a href="https://jyeee.medium.com/simplest-basic-helm-chart-tutorial-with-rancher-desktop-k8s-7b87c85d960e" rel="noopener follow" target="_blank"><div class="lm ab fp"><div class="ln ab lo cl cj lp"><h2 class="bd iv gz z fq lq fs ft lr fv fx it bi translated">最简单的基本舵图教程与牧场主桌面K8s</h2><div class="ls l"><h3 class="bd b gz z fq lq fs ft lr fv fx dk translated">Helm不用这么辛苦吧！这里有一个简单的例子</h3></div><div class="lt l"><p class="bd b dl z fq lq fs ft lr fv fx dk translated">jyeee.medium.com</p></div></div><div class="lu l"><div class="ow l lw lx ly lu lz ka ll"/></div></div></a></div><p id="e601" class="pw-post-body-paragraph kc kd iu ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz in bi translated">如果你和我一样，从别人写的Medium文章中受益匪浅，也可以考虑加入Medium来分享你的知识！我迫不及待地想向你和我的推荐链接<a class="ae la" href="https://jyeee.medium.com/membership" rel="noopener">https://jyeee.medium.com/membership</a>学习</p><div class="li lj gq gs lk ll"><a href="https://jyeee.medium.com/membership" rel="noopener follow" target="_blank"><div class="lm ab fp"><div class="ln ab lo cl cj lp"><h2 class="bd iv gz z fq lq fs ft lr fv fx it bi translated">通过我的推荐链接加入Medium-Jason Yee</h2><div class="ls l"><h3 class="bd b gz z fq lq fs ft lr fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lt l"><p class="bd b dl z fq lq fs ft lr fv fx dk translated">jyeee.medium.com</p></div></div><div class="lu l"><div class="ox l lw lx ly lu lz ka ll"/></div></div></a></div></div></div>    
</body>
</html>