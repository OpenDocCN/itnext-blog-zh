<html>
<head>
<title>Writing Custom Git Hooks With NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用NodeJS编写定制Git挂钩</h1>
<blockquote>原文：<a href="https://itnext.io/writing-custom-git-hooks-with-nodejs-2d53732865aa?source=collection_archive---------0-----------------------#2020-01-17">https://itnext.io/writing-custom-git-hooks-with-nodejs-2d53732865aa?source=collection_archive---------0-----------------------#2020-01-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c6aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最初发布在<a class="ae kl" href="https://dev.to/shaharkazaz/writing-custom-git-hooks-with-nodejs-3f8b" rel="noopener ugc nofollow" target="_blank">开发到</a>中。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/c3b796a385baa67a14eaf02889dfdd5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DsppZnQsZu068IWbQPiJcQ.png"/></div></div></figure><p id="b7ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Git挂钩是一个有用的工具，尤其是在大型团队中工作时。<br/>他们可以帮助我们将代码风格和林挺标准应用于我们的暂存文件。</p><p id="857f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将编写几个强大的Javascript git挂钩，它们将帮助我们管理我们的代码库，并拥有更流畅的开发体验。</p><h1 id="ccec" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">运行脚本</h1><p id="981c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们将在哈士奇的帮助下运行我们的钩子🐶。<br/>在我们<a class="ae kl" href="https://github.com/typicode/husky#install" rel="noopener ugc nofollow" target="_blank">安装了Husky </a>之后，我们需要做的下一件事就是运行我们的节点脚本。<br/>让我们将脚本添加到<code class="fe mb mc md me b">package.json</code>脚本部分，并使用husky调用它:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="8092" class="mj kz iq me b gy mk ml l mm mn">scripts: {  <br/>  ...<br/>  "hooks:pre-commit": "node ./hooks/pre-commit.js",<br/>  "hooks:pre-push": "node ./hooks/pre-push.js"<br/>},<br/>...<br/>husky: {<br/>  "pre-commit": "npm run hooks:pre-commit",<br/>  "pre-push": "npm run hooks:pre-push"<br/>},</span></pre><p id="9759" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">差不多就是这样，现在让我们看看<br/> <code class="fe mb mc md me b">pre-commit</code>和<code class="fe mb mc md me b">pre-push</code>钩子的一些有用的实现。</p><h2 id="9311" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">执行. js</h2><p id="d32c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我为我的钩子脚本创建了一个<code class="fe mb mc md me b">exec.js</code>助手函数，它包装了<code class="fe mb mc md me b">shelljs</code>的<code class="fe mb mc md me b">exec</code>函数。<br/><code class="fe mb mc md me b">exec</code>函数生成一个外壳，然后在该外壳中执行给定的命令:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="4ccc" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">预提交📦</h1><h2 id="cce7" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">1.分行名称约定</h2><p id="9682" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">仅允许创建具有以下前缀之一的分支:<code class="fe mb mc md me b">feature|fix|hotfix|chore|tests|automation</code></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h2 id="4ff7" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">2.✋禁售代币</h2><p id="33bd" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">谁没忘记去掉一个<code class="fe mb mc md me b">debugger</code>？还是一个测试中的<code class="fe mb mc md me b">fdescribe</code>？不再有了！</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="052c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">预推🚀</h1><h2 id="fd52" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">1.自动同步主机</h2><p id="7b30" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们注意到开发人员经常忘记从远程定期更新他们的分支。</p><p id="93b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个简单但重要的钩子，它从远程<code class="fe mb mc md me b">master</code>更新您的本地分支。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h2 id="6203" class="mj kz iq bd la mo mp dn le mq mr dp li jy ms mt lm kc mu mv lq kg mw mx lu my bi translated">2.✋禁枝</h2><p id="fc62" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">有些分支我们不希望它们的提交在<code class="fe mb mc md me b">master</code> <br/>结束，比如<code class="fe mb mc md me b">staging</code>分支。</p><p id="9bcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将在这些分支中提交一个充当“标志”的commit🚩。<br/>在推送到远程之前，我们将验证该提交不是被推送到的分支的一部分(我们显然将删除<code class="fe mb mc md me b">staging</code>分支中的这段代码)。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="4e30" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">外卖食品</h1><p id="9649" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们看到了一些使用git挂钩的有用示例，以及使用Husky和NodeJS应用策略和防止错误提交是多么容易。</p><p id="4a39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你可以用最适合你的项目🥳的方式定制这些钩子</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="7b8a" class="ky kz iq bd la lb ni ld le lf nj lh li lj nk ll lm ln nl lp lq lr nm lt lu lv bi translated">你试过Transloco吗？🌐</h1><p id="438d" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><code class="fe mb mc md me b">ng-neat</code>介绍<strong class="jp ir"> Transloco </strong>，Angular的国际化(i18n)库。它允许你为你的内容定义不同语言的翻译，并在运行时轻松地在它们之间切换。</p><p id="d57e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它公开了一个丰富的API来高效、干净地管理翻译。它提供了多个插件，将改善您的开发体验。<br/>我们/我强烈建议您阅读更多相关内容并<a class="ae kl" href="https://github.com/ngneat/transloco" rel="noopener ugc nofollow" target="_blank">查看</a>！</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><div class="kn ko kp kq gt nn"><a href="https://netbasal.com/introducing-transloco-angular-internationalization-done-right-54710337630c" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">🚀Transloco简介:角度国际化进展顺利</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">有一段时间，我一直在考虑创建一个Angular i18n库，它包含了我脑海中的一些概念。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">netbasal.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kw nn"/></div></div></a></div><div class="oc od gp gr oe nn"><a href="https://medium.com/@shahar.kazaz/translation-files-validation-in-angular-with-transloco-e6ba02467f33" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">使用Transloco在Angular中验证翻译文件</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">当与多个团队一起开发一个企业应用程序时，我们经常会遇到合并冲突…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="of l ny nz oa nw ob kw nn"/></div></div></a></div><div class="oc od gp gr oe nn"><a rel="noopener  ugc nofollow" target="_blank" href="/lazy-load-translation-files-in-angular-using-transloco-2d3afed116ce"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">使用Transloco在Angular中延迟加载翻译文件</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">在本文中，我们将学习如何使用Angular Transloco的国际化库来延迟加载…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">itnext.io</p></div></div><div class="nw l"><div class="og l ny nz oa nw ob kw nn"/></div></div></a></div></div></div>    
</body>
</html>