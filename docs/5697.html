<html>
<head>
<title>StorybookJS: Tips &amp; Tricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">故事书:技巧和窍门</h1>
<blockquote>原文：<a href="https://itnext.io/storybookjs-tips-tricks-785bc39aacbe?source=collection_archive---------1-----------------------#2021-05-05">https://itnext.io/storybookjs-tips-tricks-785bc39aacbe?source=collection_archive---------1-----------------------#2021-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ef30" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将Markdown文件导入为Docs only页面，使用CDN加载依赖关系和排序故事。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f8062f7d3a337cba70ef6fb8dbbc2a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yBFNNJGxc4vkhEPgV21aA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@florenciaviadana?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">弗洛伦西亚·维亚达纳</a>在<a class="ae ky" href="https://unsplash.com/s/photos/books?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="78c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我只是把DeckDeckGo的<a class="ae ky" href="https://docs.deckdeckgo.com" rel="noopener ugc nofollow" target="_blank">文档</a>移植到了<a class="ae ky" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> StorybookJS </a>中。除了能够简化构建和测试之外，我还喜欢将它用于文档目的，因为它允许我集成由<a class="ae ky" href="https://stenciljs.com/" rel="noopener ugc nofollow" target="_blank"> StencilJS </a>自动生成的README.md文件。代码和文档之间的对练是最好的，你不这样认为吗？</p><p id="7f5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我在这个过程中重复使用或发现的一些技巧和诀窍。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="360c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将降价文件导入StorybookJS</h1><p id="c411" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">StencilJS的一个特别酷的特性是，它从代码的注释中自动生成markdown中的<code class="fe mz na nb nc b">readme.md</code>文件。这不是很棒吗？</p><p id="5fc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我觉得是。因此，为了进一步推进概念，我设置了StorybookJS来导入这些Markdown文件作为Docs only页面。这样，文档就保留了下来，并尽可能地按照代码进行编辑，然后交付给最终用户，没有任何中断。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="1f56" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">元</h2><p id="1842" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在编写StorybookJS问题的时候<a class="ae ky" href="https://github.com/storybookjs/storybook/issues/11981" rel="noopener ugc nofollow" target="_blank"> #11981 </a>列出各种各样的解决方案，包括使用<code class="fe mz na nb nc b">transcludeMarkdown</code>设置或raw加载器。如果下面的解决方案不适合你，尝试其中一个。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="0c61" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">限制</h2><p id="c88d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽管它工作得很好，我还是没能突出显示页面中显示的和从Markdown文件导入的代码块。我相应地评论了这个问题。</p><p id="00b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你设法解决了这个问题，让我现在或者，更好的是，在GitHub上给我发一个<a class="ae ky" href="https://github.com/deckgo/deckdeckgo/" rel="noopener ugc nofollow" target="_blank">拉请求</a>😉。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8502" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">解决办法</h2><p id="c35e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我使用HTML版本的故事书，我在<code class="fe mz na nb nc b">.js</code>文件中处理我的故事，例如在<code class="fe mz na nb nc b">Text.stories.js</code>文件中，我记录了一段接受背景颜色作为参数的段落。</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="3c01" class="nd md it nc b gy nt nu l nv nw">export default {<br/>  title: 'Components/Text',<br/>  argTypes: {<br/>    bg: {control: 'color'}<br/>  }<br/>};<br/><br/>export const Text = ({bg}) =&gt; {<br/>  return `&lt;p style="background: ${bg};"&gt;<br/>    Hello World<br/>  &lt;/p&gt;`;<br/>};<br/><br/>Text.args = {<br/>  bg: '#FF6900'<br/>};</span></pre><p id="e7a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据StorybookJS 的说法，我们可以在组件级替换DocsPage模板，用MDX文档或定制组件展示我们自己的文档。这就是为什么，在我们的故事旁边，我们创建了一个新文件<code class="fe mz na nb nc b">Text.mdx</code>，我们将它导入并作为<code class="fe mz na nb nc b">page</code>提供给我们的故事。</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="f748" class="nd md it nc b gy nt nu l nv nw">import {Doc} from './Text.mdx';<br/><br/>export default {<br/>  title: 'Components/Text',<br/>  parameters: {<br/>    docs: {<br/>      page: Doc<br/>    }<br/>  },<br/>  argTypes: {<br/>    bg: {control: 'color'}<br/>  }<br/>};<br/><br/>export const Text = ({bg}) =&gt; {<br/>  return `&lt;p style="background: ${bg};"&gt;<br/>    Hello World<br/>  &lt;/p&gt;`;<br/>};<br/><br/>Text.args = {<br/>  bg: '#FF6900'<br/>};</span></pre><p id="c024" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在我们的<code class="fe mz na nb nc b">.mdx</code>文件中，我们导入我们的<code class="fe mz na nb nc b">README.md</code>文件(或者任何其他的降价文件),并且，我们使用基本的故事书<code class="fe mz na nb nc b">Description</code>模块，将文档页面与定制文档重新混合。</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="b914" class="nd md it nc b gy nt nu l nv nw">import {Description} from '@storybook/addon-docs/blocks';<br/><br/>import readme from './readme.md';<br/><br/>export const Doc = () =&gt; &lt;Description markdown={readme} /&gt;;</span></pre><p id="4669" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，降价文件被整合为StorybookJS 🥳.的文档页面</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="565d" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">使用CDN加载依赖项</h2><p id="5eb0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">不确定是否有人会有这样的需求，但是如果像我一样，您需要从CDN加载依赖项，这里有一个技巧:将您的<code class="fe mz na nb nc b">script</code>添加到<code class="fe mz na nb nc b">./storybook/preview-head.html</code>。它会用你的故事来评价。</p><p id="a78f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，如果你想为你的组件定义一些<code class="fe mz na nb nc b">style</code>或者加载一个特定的Google字体，你也可以修改同一个文件。</p><p id="4336" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些例子摘自我的<a class="ae ky" href="https://github.com/deckgo/deckdeckgo/blob/main/docs/.storybook/preview-head.html" rel="noopener ugc nofollow" target="_blank">preview-head.html</a>文件:</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="0243" class="nd md it nc b gy nt nu l nv nw">&lt;link rel="preconnect" href="https://fonts.gstatic.com" /&gt;<br/>&lt;link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&amp;display=swap" rel="stylesheet" /&gt;<br/><br/>&lt;script type="module" src="https://unpkg.com/@deckdeckgo/color@latest/dist/deckdeckgo-color/deckdeckgo-color.esm.js"&gt;&lt;/script&gt;</span><span id="8fe5" class="nd md it nc b gy nx nu l nv nw">&lt;style&gt;<br/>  pre:not(.prismjs) &gt; div {<br/>     box-shadow: none;<br/>     margin: 25px 0;<br/>  }<br/>&lt;/style&gt;</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="d5cf" class="nd md it bd me ne nf dn mi ng nh dp mm li ni nj mo lm nk nl mq lq nm nn ms no bi translated">分类故事</h2><p id="e775" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">使用属性<code class="fe mz na nb nc b">storySort</code>可以在<code class="fe mz na nb nc b">./storybook/preview.js</code>中定义故事的特定顺序。每一章都必须作为<code class="fe mz na nb nc b">string</code>提供，它们的故事列表作为<code class="fe mz na nb nc b">array</code>。</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="627d" class="nd md it nc b gy nt nu l nv nw">import theme from './theme';<br/><br/>export const parameters<strong class="nc iu"><em class="ny"> </em></strong>= {<br/>  actions: {argTypesRegex: '^on[A-Z].*'},<br/>  options: {<br/>    storySort: {<br/>      order: [<br/>        'Introduction',<br/>        ['Introduction', 'Getting Started'],<br/>        'Edit',<br/>        ['HTML', 'Lazy Loading']<br/>      ]<br/>    }<br/>  },<br/>  docs: {<br/>    theme<br/>  }<br/>};</span></pre><p id="d9e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">名称应与故事中提供的<code class="fe mz na nb nc b">title</code>相匹配。</p><p id="0b3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe mz na nb nc b">MDX</code>使用<code class="fe mz na nb nc b">meta</code>:</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="9027" class="nd md it nc b gy nt nu l nv nw">import {Meta} from '@storybook/addon-docs/blocks';<br/><br/>&lt;Meta title="Introduction/Getting Started" /&gt;<br/><br/><em class="ny"># Getting started</em></span></pre><p id="28b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用<code class="fe mz na nb nc b">JS</code>通过默认<code class="fe mz na nb nc b">title</code>:</p><pre class="kj kk kl km gt np nc nq nr aw ns bi"><span id="4f36" class="nd md it nc b gy nt nu l nv nw">export default {<br/>  title: 'Components/Lazy Image',<br/>  argTypes: {<br/>    imgSrc: {control: 'text'}<br/>  }<br/>};</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="12e1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">摘要</h1><p id="d929" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://stenciljs.com/" rel="noopener ugc nofollow" target="_blank">stencil js</a>+<a class="ae ky" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">storybook js</a>=牛逼💪</p><p id="f04b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到无限和更远的地方！</p><p id="ab54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大卫</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="2cc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在推特上或我的网站上找到我。</p><p id="7547" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为您的下一张幻灯片尝试一下<a class="ae ky" href="https://deckdeckgo.com/" rel="noopener ugc nofollow" target="_blank"> DeckDeckGo </a>🤟。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://deckdeckgo.com"><div class="gh gi nz"><img src="../Images/14fb201662569938ef9ae2beeaadafc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WQoaB8pKcDiobUe6.png"/></div></a></figure></div></div>    
</body>
</html>