<html>
<head>
<title>Effector — State Manager You Should Give a Try</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">效果器——你应该试试的状态管理器</h1>
<blockquote>原文：<a href="https://itnext.io/effector-state-manager-you-should-give-a-try-b46b917e51cc?source=collection_archive---------1-----------------------#2019-04-29">https://itnext.io/effector-state-manager-you-should-give-a-try-b46b917e51cc?source=collection_archive---------1-----------------------#2019-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/92458fc8c3fab70d6c3185412afe6bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OeR1IYJ8pnUHAKDI"/></div></div></figure><p id="78da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嘿伙计们！我知道已经有一年多没有我的消息了。今年我很努力，也很努力学习，我的观点已经改变了(是的，我现在用React😃)</p><p id="dbfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天我想分享我半年前发现并非常喜欢的图书馆！</p><p id="414a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是<a class="ae kw" href="https://effector.now.sh/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">效应器</strong></a>——应用程序状态管理器，它最符合我对组织业务逻辑的看法。</p><p id="b197" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从这个想法开始，然后我会展示一些简单的例子。</p><h1 id="f928" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">核心概念</h1><ul class=""><li id="e62e" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mc md me mf bi translated">分散商店<strong class="ka ir">整体商店&gt;整体商店<br/> </strong>处理简单的商店，然后将它们组合成各种形状，比将巨大的商店分成各个部分要简单得多</li><li id="27fd" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated"><strong class="ka ir">商店应该尽可能简单</strong> <br/>你不应该害怕在你的工作应用中增加一个商店</li><li id="d5a4" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated"><strong class="ka ir">直观的API </strong> <br/>少量的基础原理在不同的情况下被重用，减少了进入门槛。如果你知道<code class="fe ml mm mn mo b">.watch</code>在事件中是如何工作的，你可能已经知道<code class="fe ml mm mn mo b">.watch</code>在商店中是做什么的。</li><li id="4e5b" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated"><strong class="ka ir">将您的业务逻辑移出视图<br/> </strong>让组件变得简单<em class="mp">就像是“入门”示例</em>而效应器在业务逻辑上工作</li><li id="1c89" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated"><strong class="ka ir">通过设计排除性能问题</strong> <br/>效应器旨在仅通知受试者进行更改。它保证你的应用程序不会因为一些微小的状态变化而突然重新呈现</li><li id="9127" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated"><strong class="ka ir">无依赖性，框架不可知</strong> <br/>效应器不依赖React、RxJS或其他任何东西。它仅使用符号可观察的聚合填充与可观察的兼容</li></ul><h1 id="5ff9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Todo应用程序入门</h1><p id="f89d" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">我们喜欢todos，对吧？所以让我们做一些商店。我不会深究所有细节，但会让你了解我们这里使用的最新信息。</p><p id="4156" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开始前，安装效应器:</p><pre class="mt mu mv mw gt mx mo my mz aw na bi"><span id="0e37" class="nb ky iq mo b gy nc nd l ne nf">npm install effector effector-react<br/># or<br/>yarn add effector effector-react</span></pre><p id="fcf4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建<strong class="ka ir">商店</strong>，使用<code class="fe ml mm mn mo b">createStore</code>功能。第一个参数是初始值<br/>你也可以使用<code class="fe ml mm mn mo b">store.map(cb)</code>方法创建<strong class="ka ir">计算存储</strong></p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4645" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如何<strong class="ka ir">改变</strong>商店<strong class="ka ir">状态</strong>？效果器使用<strong class="ka ir">事件</strong>为<br/>创建<strong class="ka ir">事件</strong>，使用<code class="fe ml mm mn mo b">createEvent</code>功能:</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="a8f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并且，对于这个例子，我们还需要一件事情——处理表单提交。<br/>我增加了一个事件，在代码的末尾你可以看到多了一个观察者</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="dd01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我们的业务逻辑层已经准备好了。观看时间:</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4650" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是我现在要做的，因为我想让它变得简单。<br/>code sandbox上的这个例子:<a class="ae kw" href="https://codesandbox.io/s/l3r8owl94l" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">点击这里</strong> </a></p><h1 id="3c95" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">还有什么？</h1><h2 id="8f1a" class="nb ky iq bd kz ni nj dn ld nk nl dp lh kj nm nn ll kn no np lp kr nq nr lt ns bi translated">合并商店</h2><p id="d968" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">当然，您需要将商店组合成各种形状，或者进行一些自定义组合。</p><p id="2290" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">效应器对此有<code class="fe ml mm mn mo b">combine</code></p><p id="cc9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">示例:</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h2 id="04af" class="nb ky iq bd kz ni nj dn ld nk nl dp lh kj nm nn ll kn no np lp kr nq nr lt ns bi translated">效果</h2><p id="fb9c" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">对于像获取数据这样的副作用，效应器有<strong class="ka ir">效果</strong></p><ul class=""><li id="1964" class="lv lw iq ka b kb kc kf kg kj nt kn nu kr nv kv mc md me mf bi translated">效果就像事件一样，但是它们也有被调用的<code class="fe ml mm mn mo b">.use(cb)</code>方法</li><li id="127d" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">影响也有<code class="fe ml mm mn mo b">effect.done</code>和<code class="fe ml mm mn mo b">effect.fail</code>事件</li></ul><p id="9a46" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">示例:</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h2 id="3e54" class="nb ky iq bd kz ni nj dn ld nk nl dp lh kj nm nn ll kn no np lp kr nq nr lt ns bi translated">将可观测量转换为事件</h2><p id="c39d" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">我不是RX粉丝，但是如果你愿意，你可以使用<code class="fe ml mm mn mo b">fromObservable</code>助手将可观察的东西转换成事件</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="0785" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您阅读这篇文章。在未来，我想写一系列的文章，举例说明如何用Effector解决问题。但是如果你了解我，我最好不要做出承诺😄</p><p id="5bec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">项目地点:<a class="ae kw" href="https://effector.now.sh/" rel="noopener ugc nofollow" target="_blank">https://effector . now . sh</a><br/>项目GitHub:<a class="ae kw" href="https://github.com/zerobias/effector" rel="noopener ugc nofollow" target="_blank">https://github.com/zerobias/effector</a></p></div></div>    
</body>
</html>