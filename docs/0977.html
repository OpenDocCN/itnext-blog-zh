<html>
<head>
<title>Working with Angular 2+ Form: Template Driven Approach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Angular 2+表单:模板驱动方法</h1>
<blockquote>原文：<a href="https://itnext.io/working-with-angular-2-form-template-driven-approach-58182fc73150?source=collection_archive---------7-----------------------#2018-06-26">https://itnext.io/working-with-angular-2-form-template-driven-approach-58182fc73150?source=collection_archive---------7-----------------------#2018-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e6fe8ee263809244258ebd86d8355d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dkp5HmIEtEOC2gr_JdulOw.png"/></div></div></figure><p id="4299" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">形式很重要，它是你的企业和客户之间的大门。在Angular 2+中有很多方法来处理表单。今天我将向你展示如何使用模板驱动的方法来处理表单。</p><p id="ae9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用模板驱动方法的优点是它易于使用并且适合简单的场景。然而，对于更加灵活和复杂的情况，您可能希望实现<a class="ae kw" href="https://medium.com/@dalenguyen/working-with-angular-2-form-reactive-forms-approach-37e19a3af995" rel="noopener">反应式表单方法</a>,以便通过您的组件对表单进行更多的控制。</p><p id="e633" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这个示例项目，您可以在https://next.plnkr.co/plunk/2GJde72LCCKE2HyL<a class="ae kw" href="https://next.plnkr.co/plunk/2GJde72LCCKE2HyL" rel="noopener ugc nofollow" target="_blank">的</a>处看到演示</p><p id="54c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们需要一个有角度的项目。您可以通过创建新项目或使用现有的Angular项目来实现这一点。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="7e05" class="lg lh iq lc b gy li lj l lk ll">// Create a new project through angular cli<br/>sudo npm install -g @angular/cli@latest<br/>ng new Project_Name</span></pre><ol class=""><li id="a5b2" class="lm ln iq ka b kb kc kf kg kj lo kn lp kr lq kv lr ls lt lu bi translated"><strong class="ka ir">进口表格模块</strong></li></ol><p id="2c8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，您需要将<strong class="ka ir">表单模块</strong>导入到您的<strong class="ka ir"> app.module.ts </strong>中</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="972f" class="lg lh iq lc b gy li lj l lk ll">import { <strong class="lc ir">FormsModule </strong>} from '@angular/forms';<br/>...</span><span id="7f52" class="lg lh iq lc b gy lv lj l lk ll">@NgModule({<br/>  declarations: [...],<br/>  imports: [<br/>    ...<br/>    <strong class="lc ir">FormsModule</strong><br/>  ],<br/>})</span></pre><p id="b544" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.<strong class="ka ir">添加您的表单</strong></p><p id="3faf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么您的模板中应该有一个表单:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="17a9" class="lg lh iq lc b gy li lj l lk ll">&lt;form&gt;<br/> First name: <br/> &lt;input <br/>   type="text"<br/>   name="firstName"&gt;&lt;br&gt;</span><span id="6462" class="lg lh iq lc b gy lv lj l lk ll">Last name: <br/> &lt;input <br/>   type="text" <br/>   name="lastName"&gt;&lt;br&gt;</span><span id="468d" class="lg lh iq lc b gy lv lj l lk ll">Age:<br/> &lt;input <br/>   type="number" <br/>   name="age"&gt;&lt;br&gt;</span><span id="49a8" class="lg lh iq lc b gy lv lj l lk ll"> &lt;input type="submit" value="Submit"&gt;<br/>&lt;/form&gt;</span></pre><p id="5baa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这只是一个简单的表格，收集你的名字，姓氏和年龄。</p><p id="7ad9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以随意设置样式，也可以使用这个临时CSS</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="79c6" class="lg lh iq lc b gy li lj l lk ll">input[type=text], input[type=number], select {<br/>    width: 100%;<br/>    padding: 12px 20px;<br/>    margin: 8px 0;<br/>    display: inline-block;<br/>    border: 1px solid #ccc;<br/>    border-radius: 4px;<br/>    box-sizing: border-box;<br/>}</span><span id="5511" class="lg lh iq lc b gy lv lj l lk ll">input[type=submit] {<br/>    width: 100%;<br/>    background-color: #4CAF50;<br/>    color: white;<br/>    padding: 14px 20px;<br/>    margin: 8px 0;<br/>    border: none;<br/>    border-radius: 4px;<br/>    cursor: pointer;<br/>}</span><span id="66db" class="lg lh iq lc b gy lv lj l lk ll">input[type=submit]:hover {<br/>    background-color: #45a049;<br/>}</span><span id="012e" class="lg lh iq lc b gy lv lj l lk ll">input[disabled][type=submit] {<br/>    background:grey;<br/>}</span><span id="17d8" class="lg lh iq lc b gy lv lj l lk ll">div {<br/>    border-radius: 5px;<br/>    background-color: #f2f2f2;<br/>    padding: 20px;<br/>}</span></pre><p id="07aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.<strong class="ka ir">应用模板驱动方法</strong></p><p id="55b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从现在开始，我们将利用<strong class="ka ir"> ngForm </strong>，<strong class="ka ir"> ngModel </strong>来控制我们的表单。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="3c14" class="lg lh iq lc b gy li lj l lk ll">&lt;form (<strong class="lc ir">ngSubmit)="onSubmit(f)"</strong> <strong class="lc ir">#f="ngForm"</strong>&gt;<br/> First name: <br/> &lt;input <br/>   type="text"<br/>   name="firstName"<br/>   <strong class="lc ir">ngModel</strong>&gt;&lt;br&gt;</span><span id="a430" class="lg lh iq lc b gy lv lj l lk ll">Last name: <br/> &lt;input <br/>   type="text" <br/>   name="lastName"<br/>   <strong class="lc ir">ngModel</strong>&gt;&lt;br&gt;</span><span id="aea6" class="lg lh iq lc b gy lv lj l lk ll">Age:<br/> &lt;input <br/>   type="number" <br/>   name="age" <br/>   <strong class="lc ir">ngModel</strong>&gt;&lt;br&gt;<br/> &lt;input type="submit" value="Submit"&gt;<br/>&lt;/form&gt;</span></pre><p id="412a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> #f </strong>是导出的表单对象，我们将使用它来检索表单提交值。每个输入都有<strong class="ka ir"> ngModel </strong>指令。我还通过使用<strong class="ka ir"> ngSubmit </strong>将表单提交动作绑定到<strong class="ka ir"> onSubmit() </strong>函数。</p><p id="8315" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.<strong class="ka ir">控制你的提交</strong></p><p id="6144" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的组件中，我们将创建<strong class="ka ir"> onSubmit() </strong>函数来控制你的表单的行为。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="5c84" class="lg lh iq lc b gy li lj l lk ll">export class App {<br/><br/><strong class="lc ir">  formValue: any;</strong></span><span id="a4b9" class="lg lh iq lc b gy lv lj l lk ll">  <strong class="lc ir">onSubmit(form: NgForm) {<br/>    this.formValue = form.value;<br/>    console.log(this.formValue);<br/>    // Do whatever you want with form value<br/>    // Could be a POST request or else<br/>  }</strong><br/>}</span></pre><p id="9ef6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.<strong class="ka ir">添加一些验证</strong></p><p id="53c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在完成表单之前，您可以通过添加一些验证来对表单进行更多的控制。例如，名字、姓氏和年龄是必需的。年龄应该是正数。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="8476" class="lg lh iq lc b gy li lj l lk ll">&lt;form (ngSubmit)="onSubmit(f)" #f="ngForm"&gt;<br/> First name: <br/> &lt;input <br/>   type="text" <br/>   name="firstName"<br/>   ngModel<br/>   <strong class="lc ir">required</strong>&gt;&lt;br&gt;</span><span id="63d7" class="lg lh iq lc b gy lv lj l lk ll">Last name: <br/> &lt;input <br/>   type="text" <br/>   name="lastName"<br/>   ngModel<br/>   <strong class="lc ir">required</strong>&gt;&lt;br&gt;</span><span id="9f63" class="lg lh iq lc b gy lv lj l lk ll">Age:<br/> &lt;input <br/>   type="number" <br/>   name="age" <br/>   ngModel<br/>   <strong class="lc ir">required</strong><br/>   <strong class="lc ir">pattern="^[1-9]+[0-9]*$"</strong>&gt;&lt;br&gt;<br/> &lt;input <br/>   type="submit" <br/>   value="Submit" <br/>   <strong class="lc ir">[disabled]="!f.valid"</strong>&gt;<br/>&lt;/form&gt;</span></pre><p id="7b9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我向每个输入添加了<strong class="ka ir"> required </strong>指令，以确保输入是必需的。并且<strong class="ka ir">模式</strong>将使用正则表达式只检查正数。</p><p id="9f6a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果表单无效，我还会禁用提交按钮:<strong class="ka ir">【禁用】= "！f.valid" </strong></p><p id="ce9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以从<a class="ae kw" href="https://angular.io/guide/form-validation" rel="noopener ugc nofollow" target="_blank"> Angular.io </a>了解更多关于验证的信息。</p></div></div>    
</body>
</html>