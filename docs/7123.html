<html>
<head>
<title>Really Null Safety in Flutter/Dart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振/飞镖中的安全性真的为零</h1>
<blockquote>原文：<a href="https://itnext.io/really-null-safety-in-flutter-dart-56e2a70a3849?source=collection_archive---------2-----------------------#2022-06-18">https://itnext.io/really-null-safety-in-flutter-dart-56e2a70a3849?source=collection_archive---------2-----------------------#2022-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="facf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">亲爱的Dart开发者、初学者或专业人士，我认为，是时候真正理解和吸收零安全了。</p><p id="6ffc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在社区和新手开发者的工作中反复看到这些误解，我尽我所能去纠正它们。当我看到许多专业人士创建的教程代码片段仍然没有很好地理解null-safety时，我甚至为初学者感到遗憾。</p><p id="1740" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多受到这些代码片段启发的开发人员很难采取正确的方法。我还认为堆栈溢出的旧答案或YouTube上的旧视频对此也有很大影响。</p><h2 id="0729" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">零安全额外工作还是便利？</h2><p id="1f89" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">空安全是对添加像“？”这样的额外符号的惩罚吗或者“！”？</p><p id="f968" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">null safety只是一个给出更多编译时/运行时错误的工具吗？</p><p id="a3f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然不是。相反，空安全使我们避免了不必要的符号，并为我们提供了更安全的编码。</p><p id="3892" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不了解null-safety的人首先会遇到的情况之一是:<br/>定义了一个类成员并得到一个错误:“不可为null的实例字段‘x’必须初始化。”</p><p id="f029" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开发人员对此错误实施了两种可能的解决方案:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/68aef2caa4ef26451faee4b60aa7636e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2rIDjdSNET_VV-DXHnInQ.png"/></div></div></figure><p id="0c6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个解决方案很大程度上是一场<strong class="jp ir">灾难</strong>。实际上，这从来都不是一个解决方案。</p><p id="5bb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个方案只是多了一个(不必要的)<code class="fe lv lw lx ly b">?</code>或者<code class="fe lv lw lx ly b">“ = "" ”</code>，然后在用法上多了一个<code class="fe lv lw lx ly b">!</code>。</p><p id="0a7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">现在仔细听，去掉这些额外的工作量！</strong></p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="02d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将解释零安全，灵感来自于代码之外的现实生活、代码中的用途以及人类思维的方式。</p><p id="1363" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文也将作为一个指南，系统化我将遵循的路径，同时向我的网络中的初学者开发者解释它。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="783a" class="mg km iq bd kn mh mi mj kq mk ml mm kt mn mo mp kw mq mr ms kz mt mu mv lc mw bi translated">1-逻辑上下文</h1><p id="82a8" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">首先，我们将在逻辑上下文中检查本文中讨论的主题，而不仅仅是在Dart代码中的使用。在大多数情况下，任何不符合逻辑上下文的定义都会使团队工作更加困难(即使这意味着更短的代码片段)，分散我们对灵活编码的注意力。</p><p id="660f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们现在不打算学习诸如“不要得到/修复错误”、“写更短的代码”、“通常使用的途径/方法”之类的东西。</p><p id="eb6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在来看看零安全在现实生活中是如何工作的(在我们大脑的神经元中)。我们会意识到我们的大脑一直在做什么。因此，我们将在编码时使用这种意识。</p><p id="62b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们来澄清一下关于零安全的最重要的问题:类</p><h1 id="1905" class="mg km iq bd kn mh mx mj kq mk my mm kt mn mz mp kw mq na ms kz mt nb mv lc mw bi translated">2-什么是阶级？</h1><blockquote class="nc nd ne"><p id="dfbc" class="jn jo nf jp b jq jr js jt ju jv jw jx ng jz ka kb nh kd ke kf ni kh ki kj kk ij bi translated">这不是一个关于类的教程。我只是想让你看看我们将如何处理这个问题。</p></blockquote><p id="4957" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的方法中，一个<strong class="jp ir">类</strong>是一个常见的名词。创建一个类可以称为定义/学习一个通用名称。</p><p id="223e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，当我们是婴儿的时候，我们学习这些常见的名字，带有一些问题，如什么是人，什么是玩具，什么是城市，以及它们的答案。当然，如果宇宙是一个代码。这些在很早以前就被定义了。</p><p id="a0ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个学习过程中，我们心中的代码等价于:</p><pre class="lk ll lm ln gt nj ly nk nl aw nm bi"><span id="88b4" class="kl km iq ly b gy nn no l np nq">class Person {<br/>   //…<br/>}</span><span id="a898" class="kl km iq ly b gy nr no l np nq">class Toy {<br/>    //…<br/>}</span><span id="c5cf" class="kl km iq ly b gy nr no l np nq">class City {<br/>    //…<br/>}</span></pre><p id="70e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">后来我们知道每个人都有一个年龄，人们会说:</p><pre class="lk ll lm ln gt nj ly nk nl aw nm bi"><span id="c56c" class="kl km iq ly b gy nn no l np nq">class Person {<br/>    //…<br/>    int age;</span><span id="08b2" class="kl km iq ly b gy nr no l np nq">    void talk() {<br/>        //…<br/>    }<br/>}</span></pre><p id="0180" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为一个普通名词，人们交谈，但是我们从某些人那里听到这些对话:</p><pre class="lk ll lm ln gt nj ly nk nl aw nm bi"><span id="b727" class="kl km iq ly b gy nn no l np nq">Person mother = Person(/*…*/)<br/>mother.talk();</span></pre><p id="dbc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们在想某个人，我们一定在脑海中为那个人创建了一个【人】的<strong class="jp ir">实例</strong> <strong class="jp ir">(或者电脑中的RAM)。</strong></p><h1 id="43d8" class="mg km iq bd kn mh mx mj kq mk my mm kt mn mz mp kw mq na ms kz mt nb mv lc mw bi translated">3-类字段</h1><p id="3eca" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">正如我们上面提到的，这些在我们头脑中定义的普通名字有一些特征，比如人的年龄，名字。</p><p id="5352" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">这就是空安全发挥作用的地方。</strong></p><p id="02cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，在我们的头脑或宇宙的代码中，可能有成千上万个类与一个人相关。“新认识的人”、“我的朋友”等。</p><p id="c414" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是让我们稍微简化一下。假设我们头脑中只有一个人的定义和一些属性，如年龄、姓名等。</p><p id="08ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问你一个小问题？<br/>在遇见一个人的时候，当你问他/她年龄的时候，你有没有想过一个问题:“我想知道这个人有没有年龄？”。或者当你问别人年龄时，“我没有。”你期待这样的回答吗？</p><p id="f4b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果没有，<code class="fe lv lw lx ly b">int age;</code>在universe的代码中<strong class="jp ir">永远不能</strong>为空。</p><blockquote class="nc nd ne"><p id="a7fd" class="jn jo nf jp b jq jr js jt ju jv jw jx ng jz ka kb nh kd ke kf ni kh ki kj kk ij bi translated">可能我们还没问别人的年龄，或者他/她还没说。但在现实中，我们并不需要一个人的年龄在脑海中形成。所以让我们假设我们知道我们能知道的(现在和将来)和我们需要的一切。</p></blockquote><p id="548d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一个问题是:</p><p id="4a81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们问一个人“你在哪里工作”这个问题的时候，你是不是总会在回答中得到一个职场信息？</p><p id="60ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果没有，我们的<code class="fe lv lw lx ly b">jobID</code>类成员是<strong class="jp ir">可空的</strong>。不是每个人都必须有工作。</p><p id="f44a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的，现在让我们用这两个属性定义一个类:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ns"><img src="../Images/6c3140a9bdbab300d5665f8f91db8314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8E5Xt1ie176KE-ap6AIyGQ.png"/></div></div></figure><p id="8026" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着一个人可能有<code class="fe lv lw lx ly b">jobID</code>，也可能没有。但是他/她肯定有<code class="fe lv lw lx ly b">age</code>。</p><p id="16cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在您在这里遇到了一个错误。你认为打破我们上面提到的关于年龄和工作ID的逻辑语境来解决这个错误是对的吗？</p><p id="a5d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里的<code class="fe lv lw lx ly b">int? age</code>解决方案打破了我们的逻辑背景。</p><p id="2159" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么误差是什么，怎么解决呢？</p><p id="cdda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们先处理错误的解决方案:</p><p id="c180" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1-使可为空。</p><p id="a702" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经提到过:年龄不能为空。所以这不是办法。</p><p id="1670" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2-添加<code class="fe lv lw lx ly b">late</code>修改器。</p><p id="fbeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在大多数情况下，这也不是正确的解决方案。人从存在的那一刻起就有了年龄。</p><p id="d3c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3-给出一个默认年龄。</p><p id="e087" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lv lw lx ly b">int age = 0;</code>。如果你认为你看到/遇到/认识的每个人都是新生儿，这可能是个好办法。在你的头脑中还不知道它的年龄(也就是说，当一个人实例还没有形成的时候)并不意味着这个人的年龄是零。</p><p id="8dcd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">解决方案</strong></p><p id="e84a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你所看到的，我们用了很多像“还没有”、“还没有”和“时刻”这样的词。存在，存在的过程及其年表有着重要的地位。</p><p id="376e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，让我们快速看一下实例是如何创建的。</p><p id="2e0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们正在为一个对话定义和创建一个Person类/实例。</p><p id="9c40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看下面的例子，看看它们是以什么顺序工作的。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nt"><img src="../Images/fea63c09325b44970603dd98bd6d5a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lLXdolSz3dwGhrwuXDYv1w.png"/></div></div></figure><p id="5fb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将使用这些概念:</p><blockquote class="nc nd ne"><p id="39c8" class="jn jo nf jp b jq jr js jt ju jv jw jx ng jz ka kb nh kd ke kf ni kh ki kj kk ij bi translated">代言人(<params> ) : <final-initializer> { <construction-body> }</construction-body></final-initializer></params></p></blockquote><p id="26c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以:</p><p id="7048" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1 — <strong class="jp ir">在执行构造之前。</strong></p><p id="824b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们考虑在创建发言人之前我们实际上可以知道什么:我们的对话持续时间是0。在我们在头脑中创造出这个人之前，所有其他的事情都是我们永远不会知道的。</p><blockquote class="nc nd ne"><p id="be23" class="jn jo nf jp b jq jr js jt ju jv jw jx ng jz ka kb nh kd ke kf ni kh ki kj kk ij bi translated">注意，之前知道的都不是<code class="fe lv lw lx ly b"><em class="iq">static</em></code>。对话持续时间Ms是关于特定发言人实例的。静态属性不是特定于某个对象实例的属性。</p></blockquote><p id="d1dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们想要使用SpokenPerson(…)表达式创建一个实例时，“conversationDurationInMs = 0”(作为setter)将首先运行。</p><p id="5014" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2 — <strong class="jp ir"> &lt;参数&gt; </strong></p><p id="33df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要信息来创建发言人实例。所以<params>部分起作用。这里的参数被读取，如果有的话，取默认值。“这个。”或者“超级”语句实际上是下一阶段<final-initializer>的第一部分。为了编码方便，我们只能在这个阶段使用它。</final-initializer></params></p><p id="8d0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，这个阶段是提出必要的问题并为创建发言人实例做必要准备的阶段。</p><p id="c906" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3 — <strong class="jp ir"> &lt;最终初始化式&gt; </strong></p><p id="e41c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个阶段是对象的创建阶段。这个物体在这个阶段还没有成形。像胚胎一样。</p><p id="a0f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个阶段一结束，对象就会被创建。这意味着在这个阶段的最后，我们需要知道所有与对象相关的最终变量和必需变量。如果有关于上级对象的信息，必须在这里用super的构造函数给出。</p><p id="ba6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们以上错误的主要原因是在这个阶段或之前“年龄”是未知的。</p><p id="87d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们不能访问实例成员。</p><p id="c2e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4 — <code class="fe lv lw lx ly b"><strong class="jp ir">late</strong></code> <strong class="jp ir">带值成员的修饰符。</strong></p><p id="d2b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是在<code class="fe lv lw lx ly b">&lt;final-initializer&gt;</code>和<code class="fe lv lw lx ly b">&lt;construction-body&gt;</code>之间起作用的阶段。以下部分代表这一阶段。在这里，我们可以访问实例成员。但是，从这一点开始，我们可以评估什么，并不意味着这里就一定会给出价值。该值是我们第一次使用<code class="fe lv lw lx ly b">late </code>实例成员时给出的。</p><p id="6e3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lv lw lx ly b">late bool tallerThanMe = height &gt; 1.78;</code></p><p id="236d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5 — <strong class="jp ir"> &lt;构造体&gt; </strong></p><p id="a82c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此阶段是在创建对象后立即执行操作的阶段。在这里，我们可以访问实例成员。</p><p id="d212" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本例中，我们在创建实例后立即与它对话。</p><p id="6dba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6 — <strong class="jp ir">设置迟到成员</strong></p><p id="75c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果它存在，并且我们正在设置它，我们将在末尾设置后期成员(在一个不确定的时间)。</p><p id="33e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lv lw lx ly b">satisfiedWithConversation</code>。我们说话前不能问这个。谈完就知道了。但是和可空的不一样，聊完就能确定。</p><h2 id="e0f6" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">求解结果</h2><p id="4eb7" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">1 —如果一个属性在我们的例子中不为空，我们<strong class="jp ir">永远不会</strong>使它为空。将它们作为参数请求，或者计算并给出值，这是final-initializer中的最新内容。</p><p id="fecc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2 —如果您有一个不可为空的成员，但是在创建实例时还不知道它的值，那么使用<code class="fe lv lw lx ly b">late</code>。只有当你确定在使用它之前你会欣赏它的时候才使用它。</p><p id="825d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3 —“它有这个功能吗？”如果您对问题的回答是“有时”，请将其设置为nullable。并且在使用它之前总是询问它是否是一个现有的条件(检查null)。</p><h1 id="1766" class="mg km iq bd kn mh mx mj kq mk my mm kt mn mz mp kw mq na ms kz mt nb mv lc mw bi translated">一些提示</h1><h2 id="3437" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">实例成员延迟</h2><p id="1ea1" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">具有后期修饰符的成员可以访问实例成员。在本例中，“widget”是一个实例成员(归State所有)，我们可以访问它。这在功能上类似于在initState中计算currentTitle的值。然而，我们可以在实例创建后立即对currentTitle变量赋值，这并不意味着它会在构造后被赋予某个值。我们第一次使用晚期成员时，它被赋予了它的值。</p><p id="7579" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，在“State”附加到小部件之前，任何读取这个晚期变量的尝试都会导致一个<strong class="jp ir">错误</strong>。</p><p id="4b23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那是我自己的政策，但是我觉得是功能性的:不要用<code class="fe lv lw lx ly b">late</code>带值。</p><p id="5be8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">错误的方式:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nu"><img src="../Images/8c1fef0fdfa5f6301c1615dbfe24c6cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Q3Lu0vmTb2RU_wvOX5_4Q.png"/></div></div></figure><h2 id="30f6" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">需要初始化/连接</h2><p id="16d1" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">如果其中一个控制器需要初始化函数，或者如果一个类的实例与另一个类的实例(State-StatefulWidget、Widget-Element、Controller-Client)一起工作，那么可以建立一个结构，以便于访问这个连接/附加的实例。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nu"><img src="../Images/40f24d79d3e93e1f9db399a61b1ebcf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_eyjhdxmlZZy9QoqoERcUw.png"/></div></div></figure><p id="c07b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据具体情况，如果预计会有变化，检查<code class="fe lv lw lx ly b">hasClient</code>，然后舒适地使用<code class="fe lv lw lx ly b">client </code>。等同于<code class="fe lv lw lx ly b">mounted</code>州。</p></div></div>    
</body>
</html>