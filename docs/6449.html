<html>
<head>
<title>Android CodeView: Create a code editor with Snippets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android CodeView:用代码片段创建代码编辑器</h1>
<blockquote>原文：<a href="https://itnext.io/android-codeview-create-a-code-editor-with-snippets-6733094161e4?source=collection_archive---------2-----------------------#2021-11-19">https://itnext.io/android-codeview-create-a-code-editor-with-snippets-6733094161e4?source=collection_archive---------2-----------------------#2021-11-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/200b219edf01e6a9379556e5ae19eadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ge8E4AuOPgEVeWTo28FTpw.png"/></div></div></figure><p id="c79b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，我是Amr Hesham软件工程师，我对Android开发和编译器设计感兴趣，在过去的几篇文章中，我向大家展示了一些很酷的功能，如何使用CodeView库为您的自定义语言或数据格式创建自己的代码编辑器，包括语法高亮、自动完成、错误和警告高亮、高亮搜索结果等。在本文中，我将向您展示如何使用CodeView 1.1.0在编辑器中轻松实现代码片段。</p><p id="bf7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">片段或实时模板是非常有用的功能，您可以在大多数现代代码编辑器和IDE中找到它们，如Visual Studio Code和所有JetBrains IDE，如Android Studio、IntelliJ IDEA，因为它可以帮助我们用很少的字符轻松地编写重复的代码模式，并帮助您更快地编写代码，在您的代码编辑器应用程序中非常需要此功能，以使用户在移动设备上快速编写，当您键入for和IDE为您编写for循环时，这就是所谓的片段。</p><p id="af29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从版本1.1.0开始，CodeView帮助您用几行代码轻松地支持代码片段，让我们从实现我们的示例开始，<br/>在这个示例中，我们希望帮助我们的Java开发人员用户快速开始编写代码，因此我们的目标是当用户单击带有前缀“main”的代码片段时，我们将为他们插入Hello World代码。</p><p id="2662" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要了解如何在项目中添加CodeView以及如何为Java创建荧光笔，请查看这篇文章和官方知识库，这样我们就可以专注于代码片段特性。</p><ul class=""><li id="edce" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">Github库:<a class="ae lf" href="https://github.com/amrdeveloper/codeview" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">AMR developer/code view</strong></a>T5】。</li><li id="1459" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated">文章:<a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/android-codeview-an-easy-way-to-create-code-editor-app-5d67c3534f84"> <strong class="ka ir"> CodeView如何轻松创建code editor</strong></a></li></ul><p id="8e1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你实现了Java荧光笔之后，是时候添加你的关键字和代码片段了。</p><p id="1e2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在CodeView库中，关键字和代码片段是实现代码接口的类。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="77cb" class="lu lv iq lq b gy lw lx l ly lz">public interface Code {<br/>    String getCodeTitle();<br/>    String getCodePrefix();<br/>    String getCodeBody();<br/>}</span></pre><p id="ed4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个类有三个属性title，prefix和body，知道它们之间的区别很重要</p><ul class=""><li id="743b" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">标题是您在自动完成下拉菜单上看到文本，因此它可以是例如“关键字包”。</li><li id="f541" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated">前缀是我们在自动完成适配器中用来过滤文本，例如“package”</li><li id="217d" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated">主体是我们在代码中插入的内容，当用户键入一个作为前缀子集的字符串，然后他单击标题，例如“package main</li></ul><p id="6f7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们写一些例子时，你会清楚地理解不同之处，所以让我们从第一个例子开始。</p><p id="fe5d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，您需要创建一个包含所有关键字和代码片段的列表。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="552f" class="lu lv iq lq b gy lw lx l ly lz">String mainPackageTitle = “Main Code”;<br/>String mainPacakgePrefx = “main”;<br/>String mainPackageBody = “package main;\n\npublic class Main {“ +<br/> “\n\tpublic static void main(String[] args){“ +<br/> “\n\t\tSystem.out.println(\”Hello, World!\”);\n\t}\n}”;</span><span id="3c25" class="lu lv iq lq b gy ma lx l ly lz">List&lt;Code&gt; codes = new ArrayList&lt;&gt;();<br/>codes.add(new Snippet(mainPackageTitle, mainPacakgePrefx, mainPackageBody));</span></pre><p id="04e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后需要创建CodeViewAdapter并将其设置为CodeView对象。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="c223" class="lu lv iq lq b gy lw lx l ly lz">CodeViewAdapter codeAdapter = new CodeViewAdapter(this, codes);<br/>codeview.setAdapter(codeAdapter);</span></pre><p id="76f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我们创建了带有前缀“main”的代码片段，因此一旦用户输入是“main”的子集，用户将在自动完成下拉菜单中看到“Main Code”选项，一旦他选择了它，hello world示例将被插入到代码视图编辑器中，最终结果将如下所示。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/dfd8dd8c51270088b65744bac77614f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/1*nXHQv3NylO4RUidjPpzltA.gif"/></div></figure><p id="6470" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以添加任意多的代码片段，但是如果您希望自动完成下拉菜单一起显示代码片段和关键字，这很容易，因为两个类都是Code类型，所以您可以将它们都添加到列表中。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="3d9e" class="lu lv iq lq b gy lw lx l ly lz">List&lt;Code&gt; codes = new ArrayList&lt;&gt;();<br/>codes.add(new Keyword(.., .., ..));<br/>codes.add(new Snippet(.., .., ..));</span></pre><p id="c40a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这很简单，你可以扩展这个例子，这样你就可以给用户定义他的关键字和代码片段的权力！而你的工作只是将它们插入到列表中并将其传递给CodeViewAdapter。</p><p id="2ce6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于1.1.0之前版本的用户，您仍然可以使用普通的ArrayAdapter创建带有字符串数组的自动完成特性，因此您的旧代码不会中断。</p><p id="4373" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我希望你喜欢这个功能，你可以在GitHub库中查看CodeView的完整文档和示例，如果你喜欢它，给它打个星，非常欢迎你建议功能、报告bug、写文章、贡献代码。</p><p id="8049" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae lf" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">GitHub</strong></a><a class="ae lf" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">LinkedIn</strong></a><a class="ae lf" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Twitter</strong></a>上找到我。</p><p id="ef0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受CodeView和编程😋</p></div></div>    
</body>
</html>