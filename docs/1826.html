<html>
<head>
<title>How to deploy Rails 5.2 on AWS EC2 + Ubuntu + Nginx + Passenger</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在AWS EC2 + Ubuntu + Nginx + Passenger上部署Rails 5.2</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-deploy-rails-5-2-on-aws-ec2-ubuntu-nginx-passenger-cd842c1c35ee?source=collection_archive---------1-----------------------#2019-02-07">https://itnext.io/how-to-deploy-rails-5-2-on-aws-ec2-ubuntu-nginx-passenger-cd842c1c35ee?source=collection_archive---------1-----------------------#2019-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5c6a4d869a7ff3e6208dcef5455a14f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFbECqDByEzLj8bj88RFmw.jpeg"/></div></div></figure><p id="1311" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我将详细说明如何在AWS EC2、Ubuntu、Nginx和Passenger上部署Rails 5.2应用程序。</p><p id="6f57" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果一切顺利，需要1-2小时。</p><h1 id="7683" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">环境</h1><ul class=""><li id="ef68" class="lu lv iq ka b kb lw kf lx kj ly kn lz kr ma kv mb mc md me bi translated">Ruby 2.5.1</li><li id="80b0" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated">虚拟机1.29.7</li><li id="97ef" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated">Rails 5.2</li><li id="d236" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated">AMS EC2</li><li id="1b7a" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated">Ubuntu 18.04 LTS 20180814</li></ul><h1 id="0bec" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.设置EC2 Ubuntu</h1><p id="1d30" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">访问AWS EC2控制台页面并创建一个新的EC2实例。</p><p id="59c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">选择“Ubuntu Server 18.04 LTS”。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/13a0bbcc9416f45da3828638b577ee17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LfeUcuZI6xO6lkS9X-DVvw.png"/></div></div></figure><p id="52ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仅供参考，定价与亚马逊Linux相同:<br/> <a class="ae ms" href="https://aws.amazon.com/marketplace/pp/B07CQ33QKV?qid=1547771989724&amp;sr=0-2&amp;ref_=srh_res_product_image" rel="noopener ugc nofollow" target="_blank"> Ubuntu 18.04 LTS —仿生</a></p><p id="f97f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">启动后，通过ssh登录到EC2。</p><p id="a47f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:默认用户名是“ubuntu”。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="689e" class="my kx iq mu b gy mz na l nb nc">$ ssh -p 22 -i ~/.ssh/[YOUR_KEY] ubuntu@[YOUR_IP_ADDRESS]</span></pre><h1 id="7e8b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.安装Ruby</h1><p id="96f2" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">接下来，在Ubuntu中安装Ruby。</p><h2 id="1848" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">系统配置</h2><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="558d" class="my kx iq mu b gy mz na l nb nc">$ sudo apt-get update<br/>$ sudo apt-get install -y curl gnupg build-essential</span></pre><h2 id="915d" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">RVM构型</h2><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="f2d1" class="my kx iq mu b gy mz na l nb nc">$ sudo apt-get install gnupg2 -y<br/>$ curl -sSL <a class="ae ms" href="https://get.rvm.io" rel="noopener ugc nofollow" target="_blank">https://get.rvm.io</a> | bash -s stable — ruby=2.5.1<br/>$ sudo gpg2 — keyserver hkp://pool.sks-keyservers.net — recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB<br/>$ curl -sSL <a class="ae ms" href="https://get.rvm.io" rel="noopener ugc nofollow" target="_blank">https://get.rvm.io</a> | sudo bash -s stable<br/>$ sudo usermod -a -G rvm ‘YOUR_USER_NAME’</span></pre><p id="8107" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">重新登录到EC2，以应用上述配置。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="fd8c" class="my kx iq mu b gy mz na l nb nc">$ exit<br/>$ ssh -p 22 -i ~/.ssh/[YOUR_KEY] ubuntu@[YOUR_IP_ADDRESS]<br/>$ rvm -v<br/>rvm 1.29.7 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [<a class="ae ms" href="https://rvm.io" rel="noopener ugc nofollow" target="_blank">https://rvm.io</a>]</span></pre><h2 id="4f3f" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">Ruby配置</h2><p id="d157" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">安装Ruby secifying一个您想要全局使用的特定版本，并将其设置为默认版本。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="e23d" class="my kx iq mu b gy mz na l nb nc">$ rvm install ruby 2.5.1<br/>$ rvm — default use ruby 2.5.1</span></pre><h2 id="0637" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">安装捆扎机</h2><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="e8ab" class="my kx iq mu b gy mz na l nb nc">$ gem install bundler — no-rdoc — no-ri</span></pre><h2 id="78ef" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">安装Node.js</h2><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="7019" class="my kx iq mu b gy mz na l nb nc">$ sudo apt-get install -y nodejs &amp;&amp;<br/>&gt; sudo ln -sf /usr/bin/nodejs /usr/local/bin/node</span></pre><h1 id="c4f2" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">3.设置乘客和Nginx</h1><h2 id="db4c" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">安装乘客包</h2><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="5a40" class="my kx iq mu b gy mz na l nb nc">$ sudo apt-get install -y dirmngr gnupg<br/>$ sudo apt-key adv — keyserver hkp://keyserver.ubuntu.com:80 — recv-keys 561F9B9CAC40B2F7<br/>$ sudo apt-get install -y apt-transport-https ca-certificates</span><span id="fcb1" class="my kx iq mu b gy no na l nb nc"><br/>$ sudo sh -c ‘echo deb <a class="ae ms" href="https://oss-binaries.phusionpassenger.com/apt/passenger" rel="noopener ugc nofollow" target="_blank">https://oss-binaries.phusionpassenger.com/apt/passenger</a> bionic main &gt; /etc/apt/sources.list.d/passenger.list’<br/>$ sudo apt-get update</span><span id="48b8" class="my kx iq mu b gy no na l nb nc"><br/>$ sudo apt-get install -y libnginx-mod-http-passenger<br/>$ sudo apt-get install -y libnginx-mod-http-passenger</span></pre><h2 id="b813" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">激活乘客Nginx</h2><p id="e643" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">确认配置文件的路径，并添加链接。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="434d" class="my kx iq mu b gy mz na l nb nc">$ if [ ! -f /etc/nginx/modules-enabled/50-mod-http-passenger.conf ]; then sudo ln -s /usr/share/nginx/modules-available/mod-http-passenger.load /etc/nginx/modules-enabled/50-mod-http-passenger.conf ; fi<br/>$ sudo ls /etc/nginx/conf.d/mod-http-passenger.conf</span></pre><p id="a47a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">执行完上述命令后，重新启动Nginx。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="ac5b" class="my kx iq mu b gy mz na l nb nc">$ sudo apt install nginx-core<br/>$ sudo service nginx restart</span></pre><h2 id="e941" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">确认安装</h2><p id="1ffa" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">确保乘客已经成功安装。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="4771" class="my kx iq mu b gy mz na l nb nc">$ sudo /usr/bin/passenger-config validate-install<br/>What would you like to validate?<br/>Use &lt;space&gt; to select.<br/>If the menu doesn’t display correctly, press ‘!’</span><span id="dc70" class="my kx iq mu b gy no na l nb nc">‣ ⬢ Passenger itself<br/> ⬡ Apache</span><span id="9265" class="my kx iq mu b gy no na l nb nc">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>* Checking whether this Passenger install is in PATH… ✓<br/>* Checking whether there are no other Passenger installations… ✓</span><span id="2a1e" class="my kx iq mu b gy no na l nb nc">Everything looks good. :-)</span></pre><p id="af32" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，确认Nginx是否启动了乘客。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="4494" class="my kx iq mu b gy mz na l nb nc">$ sudo /usr/sbin/passenger-memory-stats<br/>Version: 6.0.1<br/>Date : 2019–01–17 21:25:01 +0000<br/> — — — — — Nginx processes — — — — — -<br/>PID PPID VMSize Private Name<br/> — — — — — — — — — — — — — — — — — — — <br/>14759 1 141.1 MB 0.4 MB nginx: master process /usr/sbin/nginx -g daemon on; master_process on;<br/>14762 14759 143.7 MB 0.7 MB nginx: worker process<br/>### Processes: 2<br/>### Total private dirty RSS: 1.02 MB</span><span id="4b93" class="my kx iq mu b gy no na l nb nc">— — — Passenger processes — — -<br/>PID VMSize Private Name<br/> — — — — — — — — — — — — — — — -<br/>14738 389.2 MB 2.3 MB Passenger watchdog<br/>14748 673.0 MB 3.2 MB Passenger core<br/>### Processes: 2<br/>### Total private dirty RSS: 5.51 MB</span></pre><p id="1b81" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果Nginx和Passenger都在运行，一切都很好。</p><h2 id="741f" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">定期更新</h2><p id="027f" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">Nginx和Passenger都通过APT定期更新。因此，最好使用以下命令定期更新它们。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="1ef0" class="my kx iq mu b gy mz na l nb nc">$ sudo apt-get update<br/>$ sudo apt-get upgrade</span></pre><h1 id="49e0" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">4.部署Rails应用</h1><h2 id="d12f" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">要预安装的软件</h2><p id="3f2c" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">安装Git。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="4222" class="my kx iq mu b gy mz na l nb nc">$ sudo apt-get install -y git</span></pre><p id="3ec0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装MySQL。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="9422" class="my kx iq mu b gy mz na l nb nc">$ <!-- -->sudo apt-get install mysql-server mysql-client<br/>$ <!-- -->sudo apt-get install libmysqlclient-dev</span></pre><p id="2b3f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的应用程序需要，安装Yarn。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="0277" class="my kx iq mu b gy mz na l nb nc">$ curl -sS <a class="ae ms" href="https://dl.yarnpkg.com/debian/pubkey.gpg" rel="noopener ugc nofollow" target="_blank">https://dl.yarnpkg.com/debian/pubkey.gpg</a> | sudo apt-key add -<br/>$ echo “deb <a class="ae ms" href="https://dl.yarnpkg.com/debian/" rel="noopener ugc nofollow" target="_blank">https://dl.yarnpkg.com/debian/</a> stable main” | sudo tee /etc/apt/sources.list.d/yarn.list<br/>$ sudo apt-get update &amp;&amp; sudo apt-get install yarn</span></pre><h2 id="777d" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">导轨配置</h2><p id="4edc" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">用Git克隆你的应用。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="f2b6" class="my kx iq mu b gy mz na l nb nc">$ cd /var/www<br/>$ sudo git clone [YOUR_GIT_URL]<br/>$ sudo chown [YOUR_USER_NAME] -R [APP_REPOSITORY]</span></pre><p id="a4db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用以下命令设置您的应用程序。</p><p id="a654" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编写在“config.master.key”中执行“rails new”时生成的代码。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="efc6" class="my kx iq mu b gy mz na l nb nc">$ cd [APP_REPOSITORY]<br/>$ vim config/master.key<br/>$ bundle install — deployment — without development test<br/>$ bundle exec rake db:create RAILS_ENV=production<br/>$ bundle exec rake assets:precompile RAILS_ENV=production</span></pre><p id="4aaf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">增强配置文件的安全级别。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="4065" class="my kx iq mu b gy mz na l nb nc">$ chmod 700 config db<br/>$ chmod 600 config/database.yml config/master.key</span></pre><p id="c6ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">“丑化::错误”发生？</strong></p><p id="4169" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当执行“rake assets:precompile”时，可能会发生以下错误。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="cd13" class="my kx iq mu b gy mz na l nb nc">Uglifier::Error: Unexpected token: punc ({). To use ES6 syntax, harmony mode must be enabled with Uglifier.new(:harmony =&gt; true)</span></pre><p id="3ff2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它可以通过如下编辑“config/environments/production . Rb”来解决。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="59df" class="my kx iq mu b gy mz na l nb nc"># config.assets.js_compressor = :uglifier <br/>config.assets.js_compressor = Uglifier.new(harmony: true) </span></pre><h2 id="83e5" class="my kx iq bd ky nd ne dn lc nf ng dp lg kj nh ni lk kn nj nk lo kr nl nm ls nn bi translated">Nginx配置</h2><p id="0371" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">获取Ruby的路径。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="deac" class="my kx iq mu b gy mz na l nb nc">$ passenger-config about ruby-command<br/>passenger-config was invoked through the following Ruby interpreter:<br/> Command: /usr/local/rvm/gems/ruby-2.5.1/wrappers/ruby<br/> Version: ruby 2.5.1p57 (2018–03–29 revision 63029) [x86_64-linux]<br/> To use in Apache: PassengerRuby /usr/local/rvm/gems/ruby-2.5.1/wrappers/ruby<br/> To use in Nginx : passenger_ruby /usr/local/rvm/gems/ruby-2.5.1/wrappers/ruby<br/> To use with Standalone: /usr/local/rvm/gems/ruby-2.5.1/wrappers/ruby /usr/bin/passenger start</span></pre><p id="3cdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">路径“/usr/local/rvm/gems/RUBY-2 . 5 . 1/wrappers/RUBY”后面用做<em class="np">【YOUR _ RUBY _ PATH】</em>。</p><p id="e4c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建应用程序配置文件。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="7712" class="my kx iq mu b gy mz na l nb nc">$ sudo vim /etc/nginx/sites-enabled/[APP_REPOSITORY].conf</span></pre><p id="1f89" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将设置写入文件，如下所示。</p><p id="b29e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="np">【YOUR _ RUBY _ PATH】</em>就是上面说的RUBY路径。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="f1f0" class="my kx iq mu b gy mz na l nb nc"># /etc/nginx/sites-enabled/[APP_REPOSITORY].conf<br/>server {<br/>  listen 80;<br/>  server_name [YOUR_DOMAIN];</span><span id="75ec" class="my kx iq mu b gy no na l nb nc">  # Tell Nginx and Passenger where your app’s ‘public’ directory is<br/>  root /var/www/[APP_REPOSITORY]/public;</span><span id="482f" class="my kx iq mu b gy no na l nb nc">  # Turn on Passenger<br/>  passenger_enabled on;<br/>  passenger_ruby [YOUR_RUBY_PATH];<br/>}</span></pre><p id="3b5d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">重新启动Nginx，检查它是否工作。</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="3a7d" class="my kx iq mu b gy mz na l nb nc">$ sudo service nginx restart<br/>$ curl <a class="ae ms" rel="noopener ugc nofollow" target="_blank" href="/[YOUR_DOMAIN">http://[YOUR_DOMAIN</a>]</span></pre><p id="6932" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果根HTML代码显示正确，就可以了。</p><p id="6664" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你的Rails应用已经准备好了！</p><h1 id="217e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">需要做成HTTPS吗？</strong></h1><p id="5d98" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">了解更多:<br/><a class="ae ms" href="https://medium.com/@keisuke.inaba.cpa/how-to-make-ec2-ubuntu-nginx-passenger-https-with-lets-encrypt-dcb08c2e6c4b" rel="noopener">如何用Let's Encrypt制作EC2 + Ubuntu + Nginx +乘客HTTPS</a></p><h1 id="5b09" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">需要架设行动索？</h1><p id="7548" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">了解更多:<br/> " <a class="ae ms" href="https://medium.com/@keisuke.inaba.cpa/how-to-set-up-rails-5-action-cable-in-production-a003fc374e1d" rel="noopener">如何在生产中设置Rails 5动作电缆</a></p><h1 id="7a4e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">来源</h1><ul class=""><li id="3809" class="lu lv iq ka b kb lw kf lx kj ly kn lz kr ma kv mb mc md me bi translated"><a class="ae ms" href="https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/aws/nginx/oss/launch_server.html" rel="noopener ugc nofollow" target="_blank">在亚马逊网络服务上发布服务器</a></li><li id="4889" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated"><a class="ae ms" href="https://blog.programster.org/ubuntu-install-gpg-2" rel="noopener ugc nofollow" target="_blank"> Ubuntu —安装GPG 2 </a></li><li id="9ff6" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated"><a class="ae ms" href="https://yarnpkg.com/lang/en/docs/install/#debian-stable" rel="noopener ugc nofollow" target="_blank">安装|纱线</a></li><li id="9279" class="lu lv iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated"><a class="ae ms" href="https://github.com/rails/rails/issues/33477" rel="noopener ugc nofollow" target="_blank">缺省生成的config/initializer/assets . Rb可能导致assets:precompile for production</a>中的错误</li></ul></div></div>    
</body>
</html>