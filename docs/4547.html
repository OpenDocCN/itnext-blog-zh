<html>
<head>
<title>Reusable Widgets &amp; Reusable Custom AppBars in Flutter.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter中可重用的小部件和可重用的自定义应用程序栏。</h1>
<blockquote>原文：<a href="https://itnext.io/reusable-widgets-reusable-custom-appbars-in-flutter-4d4b8b06d176?source=collection_archive---------4-----------------------#2020-07-21">https://itnext.io/reusable-widgets-reusable-custom-appbars-in-flutter-4d4b8b06d176?source=collection_archive---------4-----------------------#2020-07-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e6ed52a2bb9c8a2b5d0553eb6f8d214e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qj7RGBeisxORg3KFnxmqkw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Flutter中可重用的小部件</figcaption></figure><p id="ec3b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本文中，我们将讨论如何重用小部件和创建自定义的可重用AppBars。</p><p id="e75c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在颤动中是如此的容易。在flutter中，编写窗口小部件并使其更加强大和可重用是如此容易。</p><h1 id="8e8b" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">观看视频教程</strong></h1><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Flutter可重用部件</figcaption></figure><h1 id="553d" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">第二部分——教程</strong></h1><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Flutter可重用部件</figcaption></figure><p id="8277" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们从初学者曾经做过的一个错误的方法开始。</p><p id="521d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">假设我希望我的应用程序中有一些TextFormField，并且我希望它有相似的外观和感觉。于是就有了下面这种写法的倾向。假设您有一个Utils类，我们在其中添加了所有的实用方法…</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="361b" class="mj lb iq mf b gy mk ml l mm mn">import 'package:flutter/material.dart';</span><span id="6fcd" class="mj lb iq mf b gy mo ml l mm mn">class Utils {<br/>  //<br/>  static getTF(TextEditingController controller) {<br/>    return TextFormField(<br/>      controller: controller,<br/>    );<br/>  }<br/>}</span></pre><p id="fb2a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在来添加用户界面…</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="4a1a" class="mj lb iq mf b gy mk ml l mm mn">body: Container(<br/>        child: Column(<br/>          children: [<br/>            Utils.getTF(_emailController),<br/>...</span></pre><p id="8bdb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">嗯，这肯定是有效的…，但是你看到了吗，它看起来不像一个小部件。这是初学者常犯的错误之一…</p><p id="1a14" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您可以通过发送更多的参数来定制这个函数，从而定制“TextFormField”小部件…但这仍然是错误的方法。</p><p id="dd70" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">颤振是更强大的，很容易处理这一点..</p><p id="51a9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们看看做这件事的正确方法…</p><p id="67f4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">只需创建一个具有适当名称的dart文件，如app_textfield.dart…</p><p id="8f93" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后创建一个名为“AppTextFormField”的类，这将扩展一个StatelessWidget。这一点非常重要。将可重用的小部件创建为无状态小部件总是一个好的做法。</p><p id="3631" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以我们的<em class="mp"> AppTextFormField </em>类看起来会像这样。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="3bbc" class="mj lb iq mf b gy mk ml l mm mn">import 'package:flutter/material.dart';</span><span id="6833" class="mj lb iq mf b gy mo ml l mm mn">class AppTextFormField extends StatelessWidget {<br/>  //<br/>  AppTextFormField({<br/>    this.controller,<br/>    this.hintText,<br/>    this.helpText,<br/>    this.prefixIcon,<br/>    this.suffixIcon,<br/>    this.isPassword,<br/>    this.enabled,<br/>    this.readOnly,<br/>    this.borderColor,<br/>  });</span><span id="0ca0" class="mj lb iq mf b gy mo ml l mm mn">final TextEditingController controller;<br/>  final String hintText;<br/>  final String helpText;<br/>  final IconData prefixIcon;<br/>  final IconData suffixIcon;<br/>  final bool isPassword;<br/>  final bool enabled;<br/>  final bool readOnly;<br/>  final Color borderColor;</span><span id="627d" class="mj lb iq mf b gy mo ml l mm mn"><a class="ae mq" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Container(<br/>      child: TextFormField(<br/>        controller: controller,<br/>        readOnly: null == readOnly ? false : true,<br/>        obscureText: null == isPassword ? false : true,<br/>        decoration: InputDecoration(<br/>          focusedBorder: OutlineInputBorder(<br/>            borderSide: BorderSide(<br/>              color: Colors.greenAccent,<br/>              width: 1.0,<br/>            ),<br/>          ),<br/>          enabledBorder: OutlineInputBorder(<br/>            borderSide: BorderSide(<br/>              color: Colors.greenAccent,<br/>              width: 1.0,<br/>            ),<br/>          ),<br/>          border: OutlineInputBorder(<br/>            borderSide: BorderSide(<br/>              color: null == borderColor ? Colors.teal : borderColor,<br/>              width: 1.0,<br/>            ),<br/>          ),<br/>          hintText: null == hintText ? '' : hintText,<br/>          helperText: null == helpText ? '' : helpText,<br/>          prefixIcon: null == prefixIcon ? null : Icon(prefixIcon),<br/>          suffix: null == suffixIcon ? null : Icon(suffixIcon),<br/>          enabled: null == enabled ? true : false,<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="4e5e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里我们将所有参数设置为可选。因此，我们正在检查一些是否为空，并采取相应的行动。</p><p id="3166" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mp">例如:如果“prefixIcon”为空或者没有作为参数发送，那么我们将把它设置为空，然后它将从TextFormField中消失，就这么简单……</em></p><p id="6a1a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后在我们的UI中…</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="0d7e" class="mj lb iq mf b gy mk ml l mm mn">Container(<br/>    child: Column(<br/>        children: [<br/>        AppTextFormField(<br/>            controller: _emailController,<br/>            helpText: 'Email',<br/>            hintText: 'Email',<br/>            prefixIcon: Icons.email,<br/>        ),<br/>        AppTextFormField(<br/>            controller: _passwordController,<br/>            helpText: 'Password',<br/>            hintText: 'Password',<br/>            isPassword: true,<br/>            prefixIcon: Icons.lock_open,<br/>        ),<br/>....</span></pre><p id="67f9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以现在，看起来有些部件。正在添加到小部件树中。</p><h1 id="eb75" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">可重用/自定义AppBar</h1><p id="b348" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">创建一个可重用的AppBar没什么不同。AppBar扩展了一个PreferredSizeWidget。是的，它需要一个尺寸…</p><p id="ca92" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，让我们看看在这种情况下，我们如何创建一个可重用的应用程序栏。</p><p id="8b14" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，创建一个新文件app_bar.dart，我将按类IAppBar命名。</p><p id="0aec" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这里，重要的是我们需要提供一个高度，否则我们会将它设置为默认的'<em class="mp">kToolbarHeight</em>' from Flutter，即56.0。</p><p id="dab9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是整个班级的样子…</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="6fb0" class="mj lb iq mf b gy mk ml l mm mn">import 'package:flutter/material.dart';</span><span id="bbbf" class="mj lb iq mf b gy mo ml l mm mn">class IAppBar extends PreferredSize {<br/>  //<br/>  final Widget child;<br/>  final double height;<br/>  final Color color;</span><span id="ae37" class="mj lb iq mf b gy mo ml l mm mn">IAppBar({<br/>    <a class="ae mq" href="http://twitter.com/required" rel="noopener ugc nofollow" target="_blank">@required</a> this.child,<br/>    this.color,<br/>    this.height = kToolbarHeight,<br/>  });</span><span id="3806" class="mj lb iq mf b gy mo ml l mm mn"><a class="ae mq" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Size get preferredSize =&gt; Size.fromHeight(height);</span><span id="e3ec" class="mj lb iq mf b gy mo ml l mm mn"><a class="ae mq" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Container(<br/>      height: preferredSize.height,<br/>      color: color ?? Colors.red,<br/>      alignment: Alignment.center,<br/>      child: child,<br/>    );<br/>  }<br/>}</span></pre><p id="c92c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在使用它就像下面这样简单</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="b38b" class="mj lb iq mf b gy mk ml l mm mn">return Scaffold(<br/>  appBar: IAppBar(<br/>  height: 100,<br/>  color: Colors.green,<br/>  child: Column(<br/>    crossAxisAlignment: CrossAxisAlignment.end,<br/>    mainAxisAlignment: MainAxisAlignment.end,<br/>    children: [<br/>      Text(<br/>        'HOME',<br/>        textAlign: TextAlign.center,<br/>        style: TextStyle(<br/>          color: Colors.white,<br/>          fontSize: 20,<br/>        ),<br/>      ),<br/>      SizedBox(<br/>        height: 20,<br/>      ),<br/>    ],<br/>  ),<br/> ),<br/> body: Container(<br/>    //<br/> ),<br/>);</span></pre><p id="0828" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">子属性可以是您发送的任何小部件。这里我发送一个列部件。</p><figure class="ly lz ma mb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/6385fd122aac901fca6b4e63165ec22d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tHg0u2zamZt-V1mW5VE4g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Flutter中的自定义AppBar</figcaption></figure><p id="2519" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">源代码</strong></p><p id="b97b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae mq" href="https://bitbucket.org/vipinvijayan1987/tutorialprojects/src/ReUsableWidgets/FlutterTutorialProjects/flutter_demos/" rel="noopener ugc nofollow" target="_blank">https://bit bucket . org/vipinvijayan 1987/tutorial projects/src/ReUsableWidgets/fluttertutorial projects/flutter _ demos/</a></p><p id="7829" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mp">如果你觉得这篇文章有用，请给点掌声……(最多可以打到50) </em></p></div></div>    
</body>
</html>