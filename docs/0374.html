<html>
<head>
<title>How to Auto reload a full-stack JavaScript project using nodemon and webpack-dev-server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用nodemon和webpack-dev-server自动重载全栈JavaScript项目</h1>
<blockquote>原文：<a href="https://itnext.io/auto-reload-a-full-stack-javascript-project-using-nodemon-and-webpack-dev-server-together-a636b271c4e?source=collection_archive---------2-----------------------#2018-02-28">https://itnext.io/auto-reload-a-full-stack-javascript-project-using-nodemon-and-webpack-dev-server-together-a636b271c4e?source=collection_archive---------2-----------------------#2018-02-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5c073af420a7ad6cca98e5e4c5992fcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSGZTdEO3u3anlOh6bRubw.jpeg"/></div></div></figure><p id="4a0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fauto-reload-a-full-stack-javascript-project-using-nodemon-and-webpack-dev-server-together-a636b271c4e" rel="noopener ugc nofollow" target="_blank"> <em class="kx">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="2ebb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">几周前，当我受到时间的压力时，我决定尝试运行webpack-dev-server (WDS)。我悲惨地失败了，没有在这个项目上浪费时间，而是继续前进。现在，我再次发现自己需要一个工具来加快开发时间。上周我做了研究，今天我为了子孙后代而分享。此外，在撰写本文时<a class="ae kw" href="https://github.com/statianzo/webpack-livereload-plugin/issues/40" rel="noopener ugc nofollow" target="_blank"> webpack-livereload-plugin不兼容</a>几天前<a class="ae kw" href="https://medium.com/webpack/webpack-4-released-today-6cdb994702d4" rel="noopener">刚刚发布的webpack 4。这种配置的唯一缺点是我不能使用socket.io在nodemon的服务器和WDS的客户端之间进行通信。</a></p><p id="b1a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我正在快速开发一个全栈javascript单页应用程序(SPA)。我认为使用nodemon在每次保存代码时自动进行后端刷新是理想的，这样我就可以实现RESTful API。此外，我希望重新构建我的包，并在包准备好时刷新我的浏览器。这两件事结合起来，WDS将实现我的目标。</p><p id="95f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是我必须对我的webpack.config.js &amp; package.json文件进行的更改。在文章的最后，我一次就完成了我的整个最终webpack.config.js文件，如果你想复制它的话。</p><p id="48d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先安装必要的包，如果你还没有使用npm或yarn的话</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="7789" class="lh li iq ld b gy lj lk l ll lm">npm install --save-dev nodemon webpack-dev-server webpack-cli</span></pre><p id="374b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我开始之前，我的输出属性被设置为如下:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b1fd" class="lh li iq ld b gy lj lk l ll lm">output: {<br/>  path: __dirname,<br/>  filename: './public/bundle.js',<br/>},</span></pre><p id="c7dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样做的问题是，当WDS运行时，它会在<a class="ae kw" href="http://yourURL:yourPort/public/bundle.js" rel="noopener ugc nofollow" target="_blank">http://your URL:your port/public/bundle . js</a>上提供这个包。为了解决这个问题，我需要“path”并将我的设置更改为如下:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="613c" class="lh li iq ld b gy lj lk l ll lm">output: {<br/>  path: path.join(__dirname, '/public'),<br/>  filename: 'bundle.js'<br/>},</span></pre><p id="5e9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来是一系列在属性“devServer”的对象中的设置。首先是两个与我的静态文件夹路径相关的命令。第一个是静态内容的路径，它将在站点的根目录下提供。第二个是一个标志，表示如果静态内容改变，是否自动刷新，默认为false。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="7a2b" class="lh li iq ld b gy lj lk l ll lm">devServer: {<br/>  contentBase: path.join(__dirname, '/public'), //serve your static files from here<br/>  watchContentBase: true,<br/>}</span></pre><p id="f5cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，因为我希望nodemon托管我的api路由，所以我需要设置一个代理。这基本上是告诉WDS扮演中间人，并将您的请求重定向到nodemon实例。重要的是，您的nodemon实例和您的WDS不共享相同的端口，这将导致错误。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f894" class="lh li iq ld b gy lj lk l ll lm">proxy: [ // allows redirect of requests to webpack-dev-server to another destination<br/>  {<br/>    context: ['/api', '/auth'],  // can have multiple<br/>    target: 'http://localhost:8080', //server and port to redirect to<br/>    secure: false //don't use https<br/>  }<br/>],</span></pre><p id="6967" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后一个重要的设置是端口，这允许你覆盖WDS的默认端口8080。此外，我发现这些有趣的设置可以让我知道是否有构建警告或错误，而不必盯着控制台。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="0533" class="lh li iq ld b gy lj lk l ll lm">port: 3000, // port webpack-dev-server listens to, defaults to 8080<br/>overlay: { // Shows a full-screen overlay in the browser when there are compiler errors or warnings<br/>  warnings: true, // default false<br/>  errors: true, //default false<br/>},</span></pre><p id="b174" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后但同样重要的是，我将以下脚本添加到我的package.json中。— hot选项启用<a class="ae kw" href="https://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07" rel="noopener">热模块更换</a>。一个额外的花絮，当WDS捆绑JS文件时，它从内存中提供它。如果您在触发这些脚本后没有在文件系统中观察到bundle.js，也不用担心。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="58ec" class="lh li iq ld b gy lj lk l ll lm">"test": "nodemon ./server/index.js",<br/>"WDS": "npm test &amp; webpack-dev-server --inline --hot",<br/>"WDSC": "npm test &amp; webpack-dev-server --inline --hot --open 'Google Chrome'",<br/>"WDSF": "npm test &amp; webpack-dev-server --inline --hot --open 'Firefox'",<br/>"WDSS": "npm test &amp; webpack-dev-server --inline --hot --open 'Safari'"</span></pre><p id="71c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，这是我完成的webpack.config.js:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="2d7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如有任何意见或问题，请联系我。</p></div></div>    
</body>
</html>