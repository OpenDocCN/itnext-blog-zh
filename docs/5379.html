<html>
<head>
<title>Developers: Stop Writing These Comments!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开发者:别写这些评论了！</h1>
<blockquote>原文：<a href="https://itnext.io/developers-stop-writing-these-comments-22b6e26cf35d?source=collection_archive---------2-----------------------#2021-02-21">https://itnext.io/developers-stop-writing-these-comments-22b6e26cf35d?source=collection_archive---------2-----------------------#2021-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9154" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你真的在代码库中做了有用的注释吗？让我们找出答案。</h2></div><p id="40fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">评论在技术上没有对错之分，但是评论会对效率产生很大的影响。它们可以让开发人员的生活变得更加轻松。让我们来看看一些日常评论，看看我们如何改进它们。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/f01f472b4d1433794dae6049c65a4f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S1mtBa4Ro_O8vIj9"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">阿诺·弗朗西斯卡在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="1a65" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">示例注释</h1><p id="1080" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">让我们看一些示例注释，看看它们是如何执行的。之后，我们可以定义一些规则，使注释对开发人员来说更加有效和有用。</p><h2 id="9774" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">例子#1:“什么”注释</h2><p id="337e" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">看看下面的例子，并决定这种评论风格。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7d54" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注释似乎是代码的副本，而代码本身已经非常易读了。在这种情况下，注释是多余的，没有必要。开发人员可以很容易地阅读代码并理解发生了什么。让我们简化这个例子。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="b339" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这不是更好读吗？代码非常简单明了。我们可以进一步简化。不是就注释而言，而是就可重用和可读的抽象而言。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="10bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这怎么读？它读起来像一本书。找到所有用户，增加所有用户的分数，最后返回用户。</p><p id="9db5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">代码的可读性非常重要，它甚至比好的注释更重要。当你的代码非常复杂时，把它抽象出来，使它更具可读性。是不是绝对100%没有办法让它变得更简单，可读性更强？然后添加一个简短清晰的注释来解释它的作用。</p><blockquote class="ng"><p id="2c3f" class="nh ni it bd nj nk nl nm nn no np ld dk translated">如果你只能在可读的代码和有好的注释的代码之间选择——一定要选择可读的代码。</p></blockquote><h2 id="8802" class="ms lw it bd lx mt nq dn mb mv nr dp mf kr ns my mh kv nt na mj kz nu nc ml nd bi translated">示例2:复制的注释</h2><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="2ecd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的评论和代码完全不符！看到代码看起来与我们之前的一个例子很相似，注释可能是复制过来的。开发人员没有更新注释以匹配代码。</p><p id="4d3e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保在复制现有代码时总是更新您的注释。如果您发现您需要复制代码，通常有一种方法可以将其抽象并使其可重用。你对下一段代码有什么看法？</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="6003" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们抽象了批量更新用户分数的逻辑，并使其在给定要更新的分数数量的意义上可重用。我们现在可以在两种场景中重用它，而不是复制代码。</p><h2 id="3e9c" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">示例3:冗长的JSDoc注释</h2><p id="a2ba" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">接下来的评论，不指望你全部看完，快速看一下就好。你怎么想呢?</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="db00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">代码不是一本书。虽然如果团队同意，我完全支持JSDoc注释，但是代码中的注释应该是高效的。在理解一个函数做什么之前，必须阅读JSDoc注释10分钟，这不是我对高效的定义。</p><blockquote class="ng"><p id="1c20" class="nh ni it bd nj nk nl nm nn no np ld dk translated">将你的评论严格保持在必要的信息上，简洁明了。</p></blockquote><p id="6598" class="pw-post-body-paragraph ki kj it kk b kl nv ju kn ko nw jx kq kr nx kt ku kv ny kx ky kz nz lb lc ld im bi translated">如果开发者想阅读文章，他们可以在媒体上而不是代码库中阅读。如果你的评论太长，很有可能开发者甚至不会去读它。他们甚至可能忘记更新评论，因为他们会试图忽略它。</p><h2 id="d004" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">例子4:简短的JSDoc注释</h2><p id="4ab9" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我们已经看到了一个很长的JSDoc注释的例子，接下来让我们看看一个很短的JSDoc注释。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="9234" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是另一个极端的例子，但是我在真实的代码库中看到过这种评论，而且确实发生过。虽然这对于JSDoc的生成有一定的帮助，并产生了预期的结果，但是它还不完整，因为它缺少一些参数。</p><p id="c93b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你决定在你的代码库中使用JSDoc，不要半途而废，从一开始就正确地使用它，并保持它的整洁。这是一项额外的工作，从长远来看，这对软件的维护是有回报的。严格要求拉取请求，并确保评论得到良好维护。</p><h2 id="becf" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">例子5:过时的JSDoc注释</h2><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="cfa4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个例子中，我们可以看到开发人员忘记了更新JSDoc注释来匹配函数实际做的事情。<code class="fe oa ob oc od b">updateScoreForUsers</code>功能现在也给VIP用户<code class="fe oa ob oc od b">500</code>加分了！评论中没有描述这一点，也没有说明为什么会这样。</p><h2 id="c97d" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">例子6:为什么评论</h2><p id="fd91" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">这是我最喜欢的评论类型之一。让我们来看看。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="e350" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，我们可以理解VIP应该得到<code class="fe oa ob oc od b">500</code>额外的分数。开发人员不可能因为不清楚的需求而感到困惑并意外地改变这种行为。</p><p id="35be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在代码中添加有用的额外信息，同时保持代码简短易懂。开发人员可以猜测这段代码的原因，但不能确定。有了这个额外的注释，任何疑虑都消除了，开发人员也不必害怕修改函数。</p><p id="f7be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，要求也要明确。实际上，最初的需求并不总是被清晰地记录下来。对于在不同开发团队之间转移的应用程序来说尤其如此。在有大量文档和需求的理想情况下，可能不需要这个特定的注释。</p><p id="985c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们看看关于数据库的第二个注释，我们可以看到注释有用的另一个好例子。当开发人员由于特定的错误或限制而以非传统的方式使用代码时，添加一个why-comment会很有帮助，因为其他开发人员不会理解为什么会以这样一种奇怪的方式设置。如果评论没有警告他们，他们甚至可能删除修补程序并导致问题。</p><p id="c2db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在某个时候，我遇到一个虚拟机在另一个虚拟机中运行，这是由于设置中的特定限制，无法满足我们的要求。提到这个限制以及为什么启动第二个虚拟的注释肯定是有用的。在大多数情况下，我们不需要对正在发生的事情进行评论，因为清晰易读的代码应该涵盖了这一点。然而，我们不知道的是原因。</p><h1 id="3885" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">摘要</h1><p id="d6b5" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">注释在开发中起着重要的作用，然而，可读的代码通常更重要。有许多不同的方法来编写代码，但这里有一些我推荐的准则:</p><ul class=""><li id="cc79" class="oe of it kk b kl km ko kp kr og kv oh kz oi ld oj ok ol om bi translated"><strong class="kk iu">写简短清晰的注释</strong>:开发人员不想阅读代码库中的书籍</li><li id="75c3" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated"><strong class="kk iu">解释为什么，而不是什么</strong>:如果代码可读，那么“什么”通常应该是不言自明的。“为什么”只能由开发人员猜测或假设。<strong class="kk iu">开发者应该知道永远不要假设或猜测！</strong></li><li id="1042" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">保持你的评论:保持更新！如果您更改代码，您还应该更新与此代码相关的任何以前的注释。你的同事和你未来的自己会为此感谢你。</li><li id="05ee" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated"><strong class="kk iu">用户清除提交消息</strong>:这可能是另一篇文章，但是确实要花费一些额外的努力来使提交消息变得清晰和有用。</li><li id="8796" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated"><strong class="kk iu">写可读的代码</strong>:比注释更重要的，是要有可读的代码。</li></ul><h1 id="4aa2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">额外资源</h1><ul class=""><li id="311e" class="oe of it kk b kl mn ko mo kr ot kv ou kz ov ld oj ok ol om bi translated"><a class="ae lu" href="https://developers.google.com/tech-writing" rel="noopener ugc nofollow" target="_blank">谷歌技术写作:每个工程师也是作家</a></li><li id="fe8e" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated"><a class="ae lu" href="https://developers.google.com/tech-writing/two/code-comments#lesson_1_good_commenting_means_good_writing" rel="noopener ugc nofollow" target="_blank">谷歌技术写作:好评论</a></li></ul></div><div class="ab cl ow ox hx oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="im in io ip iq"><p id="189f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://kevinvr.medium.com/membership" rel="noopener">订阅我的媒介</a>到<strong class="kk iu">解锁</strong> <strong class="kk iu">所有</strong> <strong class="kk iu">文章</strong>。通过使用我的链接订阅，你是支持我的工作，没有额外的费用。你会得到我永远的感激。</p></div></div>    
</body>
</html>