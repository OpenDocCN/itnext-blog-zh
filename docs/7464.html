<html>
<head>
<title>How to use a bar/QR code scanner with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用条形码/二维码扫描仪</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-use-a-bar-qr-code-scanner-with-angular-5622cefcb94?source=collection_archive---------0-----------------------#2022-10-03">https://itnext.io/how-to-use-a-bar-qr-code-scanner-with-angular-5622cefcb94?source=collection_archive---------0-----------------------#2022-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c952" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将硬件二维码、裸码扫描仪集成到您的Angular web应用程序中，无需库或插件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b7ce665fff05ec593c2128e2171686f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzDSy3L45w5tbtOZW2lNpg.png"/></div></div></figure><p id="08f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最近，我不得不在Angular应用程序中添加一个条形码扫描仪，我试图寻找一个插件(就像Ionic上使用手机摄像头的插件)或一个可以做到这一点的库，而不是重新发明路径，我一无所获。</p><p id="da84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在今天的文章中，我将与您分享我如何成功地将条形码/Qr码阅读器轻松集成到我的web Angular应用程序中。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="d57f" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">背景:</h1><p id="5dea" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在用我的条形码扫描仪进行了几次测试后，我注意到当我打开文本编辑器扫描条形码时，我的电脑/手机开始键入我正在扫描的完全相同的代码，最后，它转到了一个新行。</p><h1 id="1be3" class="lu lv iq bd lw lx mr lz ma mb ms md me jw mt jx mg jz mu ka mi kc mv kd mk ml bi translated">解决方案:</h1><p id="1e2e" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">基本上，扫描仪就像一个键盘连接到我的设备；它一个数字一个数字地输入代码，并在末尾的行' \n '后面加了一个back。</p><p id="d4ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看我们能做些什么；因此，我将使用<a class="ae mw" href="https://angular.io/api/core/HostListener" rel="noopener ugc nofollow" target="_blank"> @HostListner() </a>装饰器添加一个关于按键事件的监听器，一次接收一个数字的代码，并将它连接到一个字符串变量；我们会这样做，直到我们收到回行' \n '这意味着我们得到了完整的代码😌</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="4eff" class="lu lv iq bd lw lx mr lz ma mb ms md me jw mt jx mg jz mu ka mi kc mv kd mk ml bi translated">亲动？</h1><p id="088a" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">我们可能需要在应用程序的多个页面中扫描QR码，让我们通过创建一个类来使我们的解决方案可重用，每当我们需要在应用程序中扫描代码时，我们都可以扩展该类。</p><p id="4994" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为我们正在做一个有角度的项目，我们喜欢使用钩子，所以让我们做一个类似钩子的东西，当QR /条形码被扫描时就会被触发。让我们将我们的类命名为“OnScan”，以遵循与Angular的核心类相同的模式(“OnInit”、“OnDestroy”)..) :</p><pre class="kg kh ki kj gt mz na nb bn nc nd bi"><span id="269e" class="ne lv iq na b be nf ng l nh ni">import {Component, HostListener} from '@angular/core';<br/><br/>@Component({template: ''})<br/>// tslint:disable-next-line:component-class-suffix<br/>export abstract class OnScan {<br/>  private code: string = '';<br/><br/>  public abstract onScan(code: string): void;<br/><br/>  @HostListener('window:keypress', ['$event'])<br/>  protected keyEvent(event: KeyboardEvent): void {<br/>    if (event.key === 'Enter') {<br/>      this.onScan(this.code);<br/>      this.code = '';<br/>    } else {<br/>      this.code += event.key;<br/>    }<br/>  }<br/>}</span></pre><p id="2ec7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，当我们的侦听器接收到back to line事件时，我们将调用我们的“类似钩子”的函数onScan来通知我们的组件我们的QR码已经准备好了。显然，onScan抽象函数应该在每个组件中实现，以便能够使用QR码。</p><p id="1d6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们想象一下，你需要知道你连续扫描了多少次代码，我们将添加一个计数器</p><p id="be80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">瞧:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="f5d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您阅读这篇文章😄</p><p id="c4e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">欢迎您的反馈和评论。</p></div></div>    
</body>
</html>