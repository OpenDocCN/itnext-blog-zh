<html>
<head>
<title>Synchronize Visuals with Asynchronous API Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用异步API请求同步视觉效果</h1>
<blockquote>原文：<a href="https://itnext.io/synchronize-visuals-with-asynchronous-api-requests-936c2280ac20?source=collection_archive---------2-----------------------#2019-11-09">https://itnext.io/synchronize-visuals-with-asynchronous-api-requests-936c2280ac20?source=collection_archive---------2-----------------------#2019-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2585" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在最短时间内显示API加载指示器</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1bd6c64beb6bcb88222b205d5f13bdfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OKs7Mf0wpHgEZoPm9lLumQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@r3dmax?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔纳森派</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="2879" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时你的api请求完成的非常快，如果你有一个装载指示器，你会在屏幕上看到一个快速的信号。这是一个在最短时间内显示装载指示器的好方法。</p><p id="5520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个简单的<a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>请求:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">普通Ajax请求</figcaption></figure><p id="a1e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们以上面的例子为例，如果API响应完成得比预期的要快，就把它改为最小延迟。注意<code class="fe lx ly lz ma b">Promise.all</code>的使用，这将在返回API响应之前等待两个任务都完成。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">延迟的Ajax请求</figcaption></figure><p id="fd18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果<code class="fe lx ly lz ma b">axios.get</code>请求的完成时间少于500毫秒，那么额外的<code class="fe lx ly lz ma b">delay(500)</code>函数将确保足够的延迟来加载动画以正确显示。使用这种策略，我们可以保证在api请求解决之前有一定的等待时间。</p><p id="1c42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我使用了<a class="ae ky" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>，但是你也可以通过<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank">获取API </a>或任何其他技术来使用它。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><p id="a7ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看我关于如何管理加载和错误状态的相关文章:</p><div class="mi mj gp gr mk ml"><a rel="noopener  ugc nofollow" target="_blank" href="/react-redux-api-loading-errors-e783972c5424"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">反应/减少API加载和错误</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">管理API请求状态并妥善处理错误</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">itnext.io</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz ks ml"/></div></div></a></div><p id="668c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，请分享它，关注我，阅读我的其他<a class="ae ky" href="https://medium.com/@robertsavian" rel="noopener">文章</a>和/或使用下面我的推荐链接注册Medium。谢谢！</p><div class="mi mj gp gr mk ml"><a href="https://medium.com/@robertsavian/membership" rel="noopener follow" target="_blank"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">通过我的推荐链接加入Medium—Robert S(代码带)</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">medium.com</p></div></div><div class="mu l"><div class="na l mw mx my mu mz ks ml"/></div></div></a></div></div></div>    
</body>
</html>