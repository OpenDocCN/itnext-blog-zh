<html>
<head>
<title>Undo/Redo Mechanism with Riverpod in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Riverpod在颤动时的撤销/重做机制</h1>
<blockquote>原文：<a href="https://itnext.io/undo-redo-mechanism-with-riverpod-in-flutter-6fc15ef87b1a?source=collection_archive---------4-----------------------#2022-01-30">https://itnext.io/undo-redo-mechanism-with-riverpod-in-flutter-6fc15ef87b1a?source=collection_archive---------4-----------------------#2022-01-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5e54a1ce7c8a6e7691e924bc21422190.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hW_hZbzMh3i_KfyC4xxxrA.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="2fb0" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">实现撤销-重做机制是多么容易的故事</h2></div><p id="d198" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在本文中，您将看到Hansel和Gretel是如何在森林中实现堆栈列表的开发人员！</p><p id="8636" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">好奇？让我们开始吧！</p><h2 id="9590" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">理论</h2><figure class="mj mk ml mm gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/94dd98e610f1e4a8634d8a7550da9461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*X9PhRM15XwB2Sx7OCgkoYQ.gif"/></div></div></figure><h2 id="2b96" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">想法很简单！</h2><ol class=""><li id="1e51" class="mn mo je kv b kw mp kz mq lc mr lg ms lk mt lo mu mv mw mx bi translated">创建一个列表和一个索引<br/>(我的意思是，我们创建一个森林和，Hansel和Gretel)</li><li id="de29" class="mn mo je kv b kw my kz mz lc na lg nb lk nc lo mu mv mw mx bi translated">在每一次改变中，向列表中添加新的状态并增加索引<br/>(我们在森林中前进，每走一步都会留下碎屑)</li></ol><h2 id="8848" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">就是这样！</h2><p id="ad2e" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc nd le lf lg ne li lj lk nf lm ln lo im bi translated">—等等..就这样？！...</p><p id="b75c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">—撤销-重做实现呢？你不告诉我们怎么做吗？</p><p id="190e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们已经实施了！不是吗？</p><p id="dbb3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为了回去，只要跟着崩溃就行了！</p><ul class=""><li id="abdb" class="mn mo je kv b kw kx kz la lc ng lg nh lk ni lo nj mv mw mx bi translated"><code class="fe nk nl nm nn b">undo</code>:降低指数(追踪碎片)</li><li id="c05c" class="mn mo je kv b kw my kz mz lc na lg nb lk nc lo nj mv mw mx bi translated"><code class="fe nk nl nm nn b">redo</code>:增加索引(从停止的地方继续)</li><li id="f40b" class="mn mo je kv b kw my kz mz lc na lg nb lk nc lo nj mv mw mx bi translated"><code class="fe nk nl nm nn b">reset</code>:清空列表，设置索引0(收集所有碎片，回到你开始的地方)</li></ul><p id="7d31" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果你已经受够了这个愚蠢的故事，让我们看看代码！</p><h1 id="fe4c" class="no lq je bd lr np nq nr lu ns nt nu lx kk nv kl ma kn nw ko md kq nx kr mg ny bi translated">实践</h1><p id="c327" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc nd le lf lg ne li lj lk nf lm ln lo im bi translated">正如你看到的那样</p><ul class=""><li id="b085" class="mn mo je kv b kw kx kz la lc ng lg nh lk ni lo nj mv mw mx bi translated">我们有一个名为<code class="fe nk nl nm nn b">_history</code>的列表来存储我们的历史中的每一个变化</li><li id="2f49" class="mn mo je kv b kw my kz mz lc na lg nb lk nc lo nj mv mw mx bi translated">我们有一个名为<code class="fe nk nl nm nn b">_undoIndex</code>的索引，可以在<code class="fe nk nl nm nn b">_history</code>中来回移动</li></ul><p id="a3f0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">剩下的就不言自明了，所以我就交给你了。</p><figure class="mj mk ml mm gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="7d86" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在让我们看看我们的通知程序。</p><h2 id="7318" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">如你所见，我们只需要2个排列就可以使用<code class="fe nk nl nm nn b">HistoryMixin</code></h2><ul class=""><li id="a4ea" class="mn mo je kv b kw mp kz mq lc mr lg ms lk mt lo nj mv mw mx bi translated">将<code class="fe nk nl nm nn b"> with HistoryMixin&lt;T&gt;</code>添加到您的<code class="fe nk nl nm nn b">StateNotifier</code>中</li><li id="81bb" class="mn mo je kv b kw my kz mz lc na lg nb lk nc lo nj mv mw mx bi translated">在<code class="fe nk nl nm nn b">constructor</code>中初始化您的值</li></ul><figure class="mj mk ml mm gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="7a4d" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">你已经准备好了！</h2><p id="b104" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc nd le lf lg ne li lj lk nf lm ln lo im bi translated">现在不需要任何配置就可以使用<code class="fe nk nl nm nn b">undo</code>、<code class="fe nk nl nm nn b">redo</code>和<code class="fe nk nl nm nn b">reset</code>方法！</p><figure class="mj mk ml mm gt iv"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="0e15" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">当然，这个历史mixin可以改进，并增加更多的功能，如最大历史长度，但我只是想指出心态。剩下的，就交给你们了。你真棒！！</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><h2 id="5d7e" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">GitHub项目</h2><p id="3211" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc nd le lf lg ne li lj lk nf lm ln lo im bi translated">你抓住了重点，但仍然需要一个完整的例子？</p><div class="is it gp gr iu oi"><a href="https://github.com/iisprey/history_mixin_example" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jf gy z fp on fr fs oo fu fw jd bi translated">GitHub-IIS prey/history _ mixin _ example</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">github.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow ja oi"/></div></div></a></div></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><h2 id="b0a7" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">感谢您的阅读！</h2><p id="70b8" class="pw-post-body-paragraph kt ku je kv b kw mp kf ky kz mq ki lb lc nd le lf lg ne li lj lk nf lm ln lo im bi translated">那是一篇很长的文章，而你大老远跑来这里！你太棒了！请不要忘记鼓掌(也可能你不知道鼓掌可以达到50次，只是在你走的时候点击)</p></div></div>    
</body>
</html>