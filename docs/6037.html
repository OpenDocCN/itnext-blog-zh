<html>
<head>
<title>Introducing The KubeSphere Open Source Kubernetes Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">KubeSphere开源Kubernetes平台简介</h1>
<blockquote>原文：<a href="https://itnext.io/introducing-the-kubesphere-open-source-kubernetes-platform-8fc4600d2e72?source=collection_archive---------1-----------------------#2021-07-29">https://itnext.io/introducing-the-kubesphere-open-source-kubernetes-platform-8fc4600d2e72?source=collection_archive---------1-----------------------#2021-07-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="65e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">本地安装上该平台的概述</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7f95459319b84d4b56fd77a19a5b9253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T0Eeb1vqGUXpJEGn"/></div></div></figure><blockquote class="ku kv kw"><p id="54d9" class="kx ky kz la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“KubeSphere是一个用于云原生应用管理的分布式操作系统，使用Kubernetes作为其内核。它提供即插即用的架构，允许第三方应用无缝集成到其生态系统中”。(来自https://kubesphere.io)</p></blockquote><p id="5fa1" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在第一篇文章中，我们将:</p><ul class=""><li id="8500" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">介绍KubeSphere平台及其主要功能</li><li id="df92" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">使用KubeKey安装程序安装一个本地Kubernetes集群和其中的KubeSphere</li></ul><p id="32c9" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">这个本地安装并不允许你使用KubeSphere的所有特性，但是它一定会帮助你更好地理解这个平台和它提供的所有有趣的功能。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h2 id="c49e" class="ms mt it bd mu mv mw dn mx my mz dp na lu nb nc nd lv ne nf ng lw nh ni nj nk bi translated">关于Kubesphere</h2><p id="f9f9" class="pw-post-body-paragraph kx ky it la b lb nl ju ld le nm jx lg lu nn lj lk lv no ln lo lw np lr ls lt im bi translated">KubeSphere是一个容器平台，其功能通过其可插拔架构提供，具有特定的组件，可以在平台安装期间或之后启用。可用组件包括:</p><ul class=""><li id="00b7" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">App Store，一个基于Helm的应用程序商店，用于基于<a class="ae nq" href="https://github.com/openpitrix/openpitrix" rel="noopener ugc nofollow" target="_blank"> OpenPitrix </a>的应用程序生命周期管理</li><li id="f5fb" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">DevOps系统专为Kubernetes中的CI/CD工作流而设计</li><li id="5fc4" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">监控系统部署基于Prometheus的堆栈来导出和检索监控数据</li><li id="fd08" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">实现日志收集、查询和管理的日志系统</li><li id="e5c9" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">警报和通知允许通知平台上发生的特定事件</li><li id="7c92" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">服务网格是基于Istio的，它支持可观察性、跟踪、流量控制</li></ul><p id="3b4b" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">每个组件的细节可以在<a class="ae nq" href="https://kubesphere.io/docs/pluggable-components/overview/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。默认情况下，仅启用监控系统。下图列出了KubeSphere几乎开箱即用的所有工具……印象深刻吧？👍</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/33699871297f1690d984f72127ede965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DnoFmE6m9BbwDk5hJUXkeA.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">每个功能类别的开源项目，可以很容易地部署在KubeSphere中</figcaption></figure><p id="9691" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">此外，KubeSphere可以安装在Kubernetes集群上，也可以直接安装在Linux机器上。在后一种情况下，安装程序将首先创建一个集群，并在该集群上安装KubeSphere。在下一部分中，我们将提供一个本地虚拟机，并使用kube key(KubeSphere的新安装工具)在其中安装Kubernetes和KubeSphere。</p><blockquote class="ku kv kw"><p id="40a9" class="kx ky kz la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">KubeSphere可以安装在任何本地Kubernetes集群和Kubernetes发行版上。</p></blockquote></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h2 id="2638" class="ms mt it bd mu mv mw dn mx my mz dp na lu nb nc nd lv ne nf ng lw nh ni nj nk bi translated">使用KubeKey创建本地单节点集群</h2><p id="4aa3" class="pw-post-body-paragraph kx ky it la b lb nl ju ld le nm jx lg lu nn lj lk lv no ln lo lw np lr ls lt im bi translated">为了创建一个集群并在其上安装KubeSphere，我们将使用[Multipass](https://Multipass . run)在本地创建一个Ubuntu虚拟机:</p><p id="d839" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">首先我们定义一个cloud-init文件，我们将在下一步使用这个文件在虚拟机中安装所需的包(这些包在<a class="ae nq" href="https://kubesphere.io/docs/quick-start/all-in-one-on-linux/" rel="noopener ugc nofollow" target="_blank">的依赖需求</a>中列出)</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="f878" class="ms mt it nx b gy ob oc l od oe"><strong class="nx iu">$ cat&lt;&lt;EOF &gt; cloud.init<br/></strong>packages:<br/>  - conntrack<br/>  - socat<br/>  - ebtables<br/>  - ipset<br/><strong class="nx iu">EOF</strong></span></pre><p id="7b6b" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">接下来，我们创建一个名为<strong class="la iu"> ks的Ubuntu 18.04虚拟机。</strong>我们确保为其提供足够的资源，并提供之前定义的cloud-init文件:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="6509" class="ms mt it nx b gy ob oc l od oe">$ multipass launch --name ks --cpus 4 --mem 5G --disk 30G --cloud-init ./cloud.init 18.04</span></pre><p id="33f7" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">接下来，我们从虚拟机上的根shell下载KubeKey二进制文件:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="342a" class="ms mt it nx b gy ob oc l od oe"># curl -sfL https://get-kk.kubesphere.io | VERSION=v1.1.1 sh -<br/># chmod +x kk</span></pre><p id="5328" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">然后，使用下面的命令，我们可以使用KubeKey创建一个单节点Kubernetes集群，并在该集群上安装KubeSphere:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="d7d7" class="ms mt it nx b gy ob oc l od oe"># ./kk create cluster \<br/>  --with-kubernetes v1.20.6 \<br/>  --with-kubesphere</span></pre><p id="d602" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">ℹ️在这个命令中使用了几面旗帜:</p><ul class=""><li id="2fc8" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated"><em class="kz"> - with-kubernetes </em>指定我们想要安装的kubernetes集群的版本</li><li id="893f" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated"><em class="kz"> - with-kubesphere </em>指定我们希望在集群准备就绪时自动安装kubesphere</li></ul><p id="2246" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated"><a class="ae nq" href="https://kubesphere.io/docs/installing-on-linux/introduction/kubekey/#support-matrix" rel="noopener ugc nofollow" target="_blank">支持列表</a>列出了Kubesphere目前支持的Kubernetes版本。</p><p id="da1c" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">以上命令显示了虚拟机的当前状态，并在完成安装过程之前要求确认:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/dbfe8a6742755c663340689e2dee013d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t3y9seVNWghJjGfT1tiXVw.png"/></div></div></figure><p id="aac7" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">KubeKey安装程序需要几分钟的时间，它使用<strong class="la iu"> kubeadm </strong>来构建集群。</p><p id="deeb" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">安装完成后，我们将获得以下输出，其中提供了web控制台的URL和管理员密码:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="86c3" class="ms mt it nx b gy ob oc l od oe">#####################################################<br/>###              Welcome to KubeSphere!           ###<br/>#####################################################</span><span id="35f9" class="ms mt it nx b gy og oc l od oe">Console: <a class="ae nq" href="http://192.168.64.117:30880" rel="noopener ugc nofollow" target="_blank">http://192.168.64.117:30880</a><br/>Account: admin<br/>Password: P@88w0rd</span><span id="2850" class="ms mt it nx b gy og oc l od oe">NOTES：<br/>  1. After you log into the console, please check the<br/>     monitoring status of service components in<br/>     "Cluster Management". If any service is not<br/>     ready, please wait patiently until all components<br/>     are up and running.<br/>  2. Please change the default password after login.</span><span id="d14c" class="ms mt it nx b gy og oc l od oe">#####################################################<br/><a class="ae nq" href="https://kubesphere.io" rel="noopener ugc nofollow" target="_blank">https://kubesphere.io</a>             2021-07-22 14:17:19<br/>#####################################################<br/>INFO[14:17:23 CEST] Installation is complete.</span></pre><p id="df41" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">ℹ️使用前面的安装命令，我们用默认配置选项创建了一个单节点集群。我们也可以先创建一个配置文件，修改它，然后使用这个配置运行集群创建命令。例如，下面的命令在<em class="kz"> config-sample.yaml </em>文件中创建一个默认配置。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="0a3a" class="ms mt it nx b gy ob oc l od oe">$ <!-- -->./kk create config \<br/>  --with-kubernetes v1.20.6 \<br/>  --with-kubesphere</span></pre><p id="570f" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">这个文件定义了一个<strong class="la iu">集群</strong>和一个<strong class="la iu">集群配置</strong>资源，我们可以在这个<a class="ae nq" href="https://gist.github.com/lucj/8a2e7c2288efbbeda212a04eea71f526" rel="noopener ugc nofollow" target="_blank">要点</a>中看到。这些资源允许对集群进行细粒度配置，例如:</p><ul class=""><li id="660e" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">主节点和工作节点的规范(IP地址、用户名、认证方法)</li><li id="e0e3" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">Kubernetes版本</li><li id="14a5" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">要使用的CNI插件</li><li id="aafe" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">必须在集群中安装/激活的组件(监控、日志记录、devops工具、service mesh……)</li><li id="1d88" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">…以及更多</li></ul><p id="d8f8" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">KubeKey可以使用这个文件通过下面的命令创建集群。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="c4f3" class="ms mt it nx b gy ob oc l od oe">$ ./kk create cluster -f config-sample.yaml</span></pre></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h2 id="d3a1" class="ms mt it bd mu mv mw dn mx my mz dp na lu nb nc nd lv ne nf ng lw nh ni nj nk bi translated">KubeSphere web界面</h2><p id="8d4d" class="pw-post-body-paragraph kx ky it la b lb nl ju ld le nm jx lg lu nn lj lk lv no ln lo lw np lr ls lt im bi translated">创建命令的输出提供了登录到web控制台的所有信息</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="47cc" class="ms mt it nx b gy ob oc l od oe">Console: <a class="ae nq" href="http://192.168.64.117:30880" rel="noopener ugc nofollow" target="_blank">http://192.168.64.117:30880</a><br/>Account: admin<br/>Password: P@88w0rd</span></pre><p id="8673" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">登录后，我们进入仪表板，对应于顶部菜单中的<strong class="la iu">工作台</strong>项目。从那里我们得到基本信息和应用程序其他部分的链接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/74b6c9584a249d8588cfed880d728393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XY4NKeAsp_nUtkCr1SoIiQ.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">KubeSphere仪表板</figcaption></figure><p id="d8cb" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">从<strong class="la iu">平台</strong>项目，仍然在顶部菜单中，我们可以访问KubeSphere的3个主要部分，如下所示。</p><p id="ce82" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated"><strong class="la iu">集群管理</strong></p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/6e6fdbc0724e43f95938606370bbc3fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*uyl1xoik-JEGlI0ITZvHKA.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/e3cbdaeafdaa492afc1c4b037f0a987c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*aiozglVYuJNvr0r22b9XWQ.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">Kubernetes集群管理</figcaption></figure></div><p id="844c" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">该菜单允许您从集群管理员的角度管理多个Kubernetes集群及其资源。在当前示例中，该视图提供了关于我们的单节点集群的信息。从左侧的菜单中，我们可以:</p><ul class=""><li id="b531" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">获取集群节点的详细信息</li><li id="e412" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">管理KubeSphere <strong class="la iu">项目</strong></li><li id="9c33" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">查看集群中部署的组件(稍后会详细介绍)</li><li id="dcd9" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">管理Kubernetes资源(工作负载、配置、CRD、存储…)</li><li id="77ac" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">密切监视集群的运行状况</li></ul><p id="e380" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">KubeSpher的<strong class="la iu">项目</strong>是一个基于常规Kubernetes名称空间的商业概念。它提供了额外的功能，允许在KubeSphere的<strong class="la iu">工作区</strong>中对资源进行分组和隔离。</p><p id="f0ad" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">让我们首先创建一个名为<strong class="la iu"> demo </strong>的项目，稍后我们将使用该项目并在其中部署工作负载。</p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/e2b6388db29c2998f63255d676094bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ctni7Nm5DxK4adazqwDgkQ.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/6b1323570d80839f272ee6382e34c87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*IL8HjcSr5h2u_RMAgBekXQ.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">创建演示项目</figcaption></figure></div><p id="e20b" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">创建后，我们可以获得项目的详细视图并管理其配额。</p><div class="kj kk kl km gt ab cb"><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f6764337863c625e264cf631502b8029.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*MHWvNBjDtEGRBpedMoXdeA.png"/></div></figure><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/2093ebf61a69448416dbb1bb496a218f.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*0HMQ8lkf32_4VEsGKEkM2A.png"/></div></figure><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ab08091ec4f6a839d2696f825dafad0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*iKoVxDy7BETy6rH_ignGtQ.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk os di ot oq translated">项目和定额管理的详细视图</figcaption></figure></div><p id="f508" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在<strong class="la iu">项目定额</strong>视图中，我们可以很容易地:</p><ul class=""><li id="3357" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">为项目中的每个容器定义RAM和CPU的默认请求/限制</li><li id="1457" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">定义项目中运行的资源可以使用的RAM和CPU的限制</li><li id="b366" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">限制项目中的资源数量(pod、部署、服务、机密等)</li></ul><p id="2660" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated"><strong class="la iu">访问控制</strong></p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f144715bdf20a221df9577274ca66b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*E8QN1jqSxzZF2xOr1fjM2g.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/1eae1a19d6ffa45ee2e53f5b98017fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*pMoJMfvvppMWeHxw2b8Muw.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">访问控制</figcaption></figure></div><p id="d0ab" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">此菜单允许您管理整个KubeSphere平台的访问。可以创建几个实体:</p><ul class=""><li id="3a5a" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">工作区(用于管理多个KubeSphere项目)</li><li id="4b0f" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">帐目</li><li id="346a" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">角色</li></ul><p id="25d7" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">工作空间被定义为“一个独立的逻辑单元，用于组织项目和开发项目，管理资源访问，以及在团队内部共享信息”。这基本上是一个提供集群业务视图的概念。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/85c73b4761f6740df2c01ffedd532e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y7rxpPgCOkatseYW"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">使用KubeSphere工作区和项目的分层视图示例</figcaption></figure><p id="a215" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">让我们创建一个名为<strong class="la iu"> demo: </strong>的工作区</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/b7fae4f5d25c460c6c9b510db52bd7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMwC16I5u60ZitDrYNeV6A.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">创建一个名为demo的工作区</figcaption></figure><p id="3c61" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">创建工作空间后，我们可以定义:</p><ul class=""><li id="5dc3" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">属于工作区的项目和DevOps项目的列表(稍后会详细介绍)</li><li id="947f" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">可以在工作区中使用的应用程序存储库。应用程序存储库由托管Helm应用程序的URL指定</li><li id="88c6" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">应用于工作区的配额</li><li id="e920" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">工作区中存在的角色和成员</li></ul><p id="475c" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">为了将<strong class="la iu">演示</strong>项目添加到<strong class="la iu">演示</strong>工作区，我们需要进入<strong class="la iu">集群管理</strong>部分的项目细节。</p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/2a83a289f88e48c4bafe099196a5a6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*p4ZmfCUwXDZozguOVYi44g.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/cafd4d4c34064fde41a28e5e079e6953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*h06KFJ2_XnZzPfWT4h1vZA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">将<strong class="bd mu">演示</strong>项目添加到<strong class="bd mu">演示</strong>工作区</figcaption></figure></div><p id="df18" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在下一部分中，我们将说明如何将一些工作负载部署到演示项目中。</p><h2 id="7109" class="ms mt it bd mu mv mw dn mx my mz dp na lu nb nc nd lv ne nf ng lw nh ni nj nk bi translated">平台设置</h2><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ae41442146356827788182497f49c153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*zE4YZmNrqt4p_3XWSsegEw.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7d607d88d77749b7c0712cdb9d29f24c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*n9MiPCYssLNbWPHDsZgaRw.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">平台设置</figcaption></figure></div><p id="b6b6" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">此菜单允许获取关于KubeSphere平台的信息，并管理通知，以便平台的事件可以通过以下方式发送:</p><ul class=""><li id="08c5" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">电子邮件</li><li id="8dd0" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">松弛的</li><li id="39cd" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">瞎扯</li><li id="e107" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">WeCom</li><li id="b55f" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">webhook</li></ul><p id="f9c0" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">为了定义应该发送的警报，我们需要首先安装<strong class="la iu">警报和通知</strong>系统。对于每个可插拔组件，这可以在KubeSphere的初始设置过程中完成，也可以在安装之后完成。在下文中，我们将说明如何在初始设置后启用组件，我们将重点关注<strong class="la iu"> DevOps </strong>系统，但同样的过程也适用于<strong class="la iu">警报和通知</strong>系统或任何其他组件。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="e3d3" class="ow mt it bd mu ox oy oz mx pa pb pc na jz pd ka nd kc pe kd ng kf pf kg nj pg bi translated">安装组件</h1><p id="a5ec" class="pw-post-body-paragraph kx ky it la b lb nl ju ld le nm jx lg lu nn lj lk lv no ln lo lw np lr ls lt im bi translated">当我们创建集群并在其中部署KubeSphere时，自动安装了<strong class="la iu">监控</strong>组件(由于该组件，我们可以看到所有关于资源使用的漂亮图形。我们可以从<strong class="la iu">集群管理</strong>的<strong class="la iu">组件</strong>菜单中看到当前安装的所有组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/c2bd644e987614c57267dbcdf62cbf6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JSLMzhrKSf4taz2OsUsZw.png"/></div></div></figure><p id="1c6d" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在创建时，我们可以指定额外的组件，但我们也可以在平台建立后安装它们。</p><p id="dd81" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在这一部分中，我们将启用DevOps组件，该组件基于<a class="ae nq" href="https://jenkins.io/" rel="noopener ugc nofollow" target="_blank"> Jenkins </a>，有助于以直接和可视化的方式测试应用并将其发布到Kubernetes。</p><p id="5a82" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">由于已经部署了KubeSphere，我们需要修改它附带的一个<strong class="la iu">集群配置</strong>CRD(customresourcedinformation):</p><ul class=""><li id="e51f" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">首先，我们进入CRDs菜单项</li><li id="ead9" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">接下来，我们选择集群配置</li><li id="ee20" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">然后我们将<em class="kz"> devops.enabled </em>属性设置为<em class="kz"> true </em></li></ul><div class="kj kk kl km gt ab cb"><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/dbf13356e15b598ce21b54416dd9c3d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*xoyTKjnjzL1F9lUM_vxsUw.png"/></div></figure><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a1c757cf73543168a4ca32a0b27046c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*6e25oqPTbluTQHTZGCLPMw.png"/></div></figure><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f64b862d7bf636cffa8ab143cbd30498.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*aGAI7pG87KQnHJ6EusxWhA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk os di ot oq translated">安装平台后启用DevOps组件</figcaption></figure></div><p id="11b6" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">可以使用以下命令监控组件的安装:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="bae3" class="ms mt it nx b gy ob oc l od oe">$ kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='{.items[0].metadata.name}') -f</span></pre><p id="5cb7" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">DevOps组件准备就绪需要几分钟时间。一旦它可用，我们就可以在群集视图中看到它和所有相关的窗格:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/414108a28793ed937a3c3186e4ca79b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9JmO6uB7WKtimVH49zfwA.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">DevOps系统可用并在组件菜单项中列出</figcaption></figure><p id="b794" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">DevOps系统允许执行许多操作，包括:</p><ul class=""><li id="66d9" class="lx ly it la b lb lc le lf lu lz lv ma lw mb lt mc md me mf bi translated">Jenkins插件管理</li><li id="e6b5" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated"><a class="ae nq" href="https://kubesphere.io/docs/project-user-guide/image-builder/binary-to-image/" rel="noopener ugc nofollow" target="_blank">二进制转图像(B2I) </a></li><li id="0d9d" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated"><a class="ae nq" href="https://kubesphere.io/docs/project-user-guide/image-builder/source-to-image/" rel="noopener ugc nofollow" target="_blank">源到图像(S2I) </a></li><li id="f33c" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">代码依赖缓存</li><li id="4f2c" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">代码质量分析</li><li id="f9a8" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">管道测井</li><li id="54eb" class="lx ly it la b lb mg le mh lu mi lv mj lw mk lt mc md me mf bi translated">通过web用户界面管理CI/CD管道</li></ul><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/e7c4da57612948f7e35d69f436f2e0d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*9fPgvAPtguQlNeFrEqsS6A.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8ad86280fda2c2422966e430f2c55bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*K4ObICE3qdNpRyvmjM9crA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">从KubeSphere管理CI/CD管道</figcaption></figure></div><p id="5335" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">我们不会深入讨论DevOps系统使用的细节，如果你想了解更多，你可以遵循<a class="ae nq" href="https://kubesphere.io/docs/devops-user-guide/" rel="noopener ugc nofollow" target="_blank"> KubeSphere的DevOps用户指南</a>中提供的详细教程。</p><p id="8256" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">DevOps系统将是KubeSphere系列的下一篇文章的目的，并且将涵盖使用Jenkinsfile创建CI/CD管道。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h2 id="d40f" class="ms mt it bd mu mv mw dn mx my mz dp na lu nb nc nd lv ne nf ng lw nh ni nj nk bi translated">部署示例web应用程序</h2><p id="794f" class="pw-post-body-paragraph kx ky it la b lb nl ju ld le nm jx lg lu nn lj lk lv no ln lo lw np lr ls lt im bi translated">KubeSphere允许您使用表单或在线编辑器非常容易地创建Kubernetes资源。让我们看看如何在一个简单的例子中实现这一点。</p><p id="f6fd" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">从<strong class="la iu">集群管理</strong>部分的<strong class="la iu">应用工作负载</strong>菜单中，我们可以通过Deployment/stateful set/daemon set/Job/cron Job等不同的资源来部署和公开工作负载。</p><div class="kj kk kl km gt ab cb"><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/b2c24ecb9a503abb0364b9152937a7dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*ixnfMdb_rlzsxkcoYJjryg.png"/></div></figure><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8e810c5aafa2278c633be3719aedbd2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*b3LOXd69zqVm3UrZYMmZQg.png"/></div></figure><figure class="oi kn or ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/2b30292ce2d5cb7e61d47b21d37b5290.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*k_huSgBUUSwEqS88_ooOKA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk os di ot oq translated">使用Ghost容器映像的3个副本创建部署</figcaption></figure></div><p id="187d" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">验证创建后，需要几十秒钟才能看到Ghost Pods已创建并正在运行:</p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7462800fc8e0325894080d07bcca624f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*cSKOGX9ZQmYNBdLqiYyvJw.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/31a09edf0842655ac9a634efdadbc55f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*bx6eKrEX9xefgh-jOcMjUA.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">3个Ghost副本开始运行</figcaption></figure></div><p id="b594" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">然后，我们可以用服务公开部署。这一次，我们使用<strong class="la iu">编辑模式</strong>来定义我们需要的确切规范。在本例中，我们指定了一个监听端口30000的节点端口服务。</p><div class="kj kk kl km gt ab cb"><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f1ab1bb92cd3f14efe16c4d23f4a8543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*lHJcD27-9J-tZJPEVtT_2A.png"/></div></figure><figure class="oi kn oj ok ol om on paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/31d36a553b94c49676b1416ce7bfc6f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*VKpPpfLpg7gyZZ3ULceYsg.png"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk oo di op oq translated">使用节点端口服务公开Ghost Pods</figcaption></figure></div><p id="ac01" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">然后，我们可以使用本地虚拟机的IP和新创建的服务的节点端口来访问ghost接口:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/72757d74dfed2ac1a930a32c1f403403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dVnvC8pfnOil_ZwUBp8EbQ.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk translated">访问ghost web界面</figcaption></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h2 id="1e42" class="ms mt it bd mu mv mw dn mx my mz dp na lu nb nc nd lv ne nf ng lw nh ni nj nk bi translated">关键外卖</h2><p id="8d65" class="pw-post-body-paragraph kx ky it la b lb nl ju ld le nm jx lg lu nn lj lk lv no ln lo lw np lr ls lt im bi translated">这篇文章给出了KubeSphere的一个非常高层次的观点，因此只触及了这个伟大平台的表面。在以后的文章中，我们将详细介绍DevOps系统和Kubernetes多集群管理，这是两个主要功能。</p><p id="c435" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">更多剧集正在制作中，请不要犹豫在本地运行KubeSphere并使用它:)</p></div></div>    
</body>
</html>