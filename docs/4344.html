<html>
<head>
<title>Anthos — Multi-cluster Management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Anthos —多集群管理</h1>
<blockquote>原文：<a href="https://itnext.io/anthos-multi-cluster-management-aa6f2c03120d?source=collection_archive---------1-----------------------#2020-06-12">https://itnext.io/anthos-multi-cluster-management-aa6f2c03120d?source=collection_archive---------1-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/76f240a35c5d0a48d6dc5e6890c46e6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrsJuW6PC7lm4lkZrPxUHw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes —混合、多云、多集群管理— Anthos</figcaption></figure><div class=""/><p id="89b6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Anthos是一个混合云和工作负载管理的产品和服务组合，运行在Google Kubernetes引擎(GKE)上，除了Google云平台(GCP)，用户还可以管理运行在AWS、Azure、Oracle等第三方云上的工作负载。和内部(私有)集群。这意味着现在用户可以享受他们喜欢的云来满足他们的应用程序部署和管理需求。管理员和开发人员不需要学习新云带来的所有新API和环境功能，只需要学习谷歌的即可。</p><p id="ff74" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">跨公共云和本地云的架构一致性简化了部署，更重要的是，客户不需要做任何额外的工作来实施混合云。一旦Anthos本地集群被部署并连接到Google计算平台，混合云就可以运行了。截至目前，GKE本地部署作为基于VMware vSphere的虚拟设备运行。对Hyper-V和KVM等其他虚拟机管理程序的支持正在进行中，但Anthos connect有助于连接任何Kubernetes集群，无论它位于何处以及是如何创建的。</p><p id="b079" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Anthos多云架构由一组运行在谷歌云平台(GCP)上的核心软件组件组成。Anthos支持多种部署目标，用户可以在不同的云平台上配置和管理GKE集群，如AWS、Azure、GCP、GCP本地等。这些技术上称为托管集群，其中Anthos拥有通过控制平面启动的GKE集群的生命周期。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi la"><img src="../Images/9632eb63b4e52669a8b0bbb196761087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d_Iav-eAjmO4_ASN"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Anthos —组件</figcaption></figure><p id="4094" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">谷歌云平台控制台为管理部署在多个位置的Kubernetes集群提供了一个单一的控制平面——在谷歌公共云上，在本地数据中心上，或其他云提供商，如AWS、Azure等。，用户可以使用这种多集群管理功能来管理在不同环境中运行的不同/异构Kubernetes集群，而不管Kubernetes集群是如何部署的。这些组件共同提供了在不同的云中协调容器工作负载所需的所有服务，并提供了通用策略框架、集中式配置管理、安全性、服务管理和容器市场访问。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lf"><img src="../Images/a7190e33704b55ea387d285a84a7b69a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G8ZY-wTr0JrV8DJf"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">元控制平面</figcaption></figure><p id="eeea" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随着Anthos的引入，Google云平台还支持从单一位置管理在任何地方运行的Kubernetes集群——在Google cloud、本地数据中心或其他云提供商(如Amazon AWS)上。此外，多集群功能还支持跨云和本地环境以及在不同环境中运行的工作负载的配置管理。</p><p id="e08a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">多集群管理的核心组件是GKE连接中心(简称Connect)、谷歌云平台控制台和Anthos配置管理。</p><h1 id="ccd4" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">谷歌云连接</h1><p id="ed33" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">Connect允许用户将本地Kubernetes集群以及在其他公共云上运行的Kubernetes集群与Google云平台连接起来。Connect在Kubernetes集群和谷歌云平台项目之间使用加密连接，使授权用户能够登录集群，访问有关其资源、项目和集群的详细信息，并管理集群基础设施和工作负载，无论它们是运行在谷歌的硬件上还是其他地方。</p><p id="b853" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注册远程集群时，会将GKE连接代理部署到集群，该代理管理与GCP上各种API端点的连接。该集群不需要公共IP，只需要一组googleapis的可达性。连接代理使用从Kubernetes集群到GCP的经过身份验证和加密的连接。Connect agent使用VPC服务控制来确保GCP是用户私有云的延伸，并且可以穿越NAT和防火墙。所有用户与集群的交互都可以在Kubernetes审计日志中看到。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/c867fca98a839282a31d9fde53cbcd2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dw5KgAr4X0R_PsC2"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">连接代理和GCP连接</figcaption></figure><p id="6076" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有必需的API都可以在各自的项目中启用，用户可以从GCP控制台获得API交互的详细指标:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/17bf04f23f26e109bde338166a8a99a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AkuoNlCo8b_yP_eu"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">用于启用Anthos的API—Hub &amp; Connect</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/62e8afa35b75b11927f00cdde9467d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5QN43BPQahd7L-FP"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">用于启用Anthos的API—Hub &amp; Connect</figcaption></figure><h1 id="e979" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">将外部Kubernetes集群注册到GKE连接</h1><p id="75e3" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">集群注册需要目标集群的Kubeconfig和gcloud命令行以及所需的RBAC，以便GKE能够访问集群。</p><p id="ada6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以使用命令行(gcloud cli)或GKE控制台完成集群注册，如下所示:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mm"><img src="../Images/47e9aa7529c9d1332eaf60ff46579065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kgj5iOF_z1g8B2Rt"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">聚类注册</figcaption></figure><p id="bdf6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">集群注册部署连接代理部署以及访问GCP项目和连接集线器所需的机密，连接集线器是从注册请求中提供的GCP服务帐户导出的。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mn"><img src="../Images/7b01f8af0db6c97efffc1d5d2786838b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hIxilqm9IQmglukx"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">成员集群上的GKE连接代理</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/f3f6cd990c16ab90db848994379141bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FNMeqAUV_Rmyy-v2"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">成员集群上的GKE连接代理部署</figcaption></figure><p id="24bc" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">与GKE连接代理关联的所有对象:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mo"><img src="../Images/d4a4bdbdbe930187b6997419fd45e360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qnSy5xbgtXwBB0Nx"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">GKE连接代理-对象</figcaption></figure><p id="0736" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过注册生成的秘密使GCP能够通信:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/7df6efb42f8bdc71c36c1f144988b9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_pgNIyCEyU1fDQAL"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">GKE连接代理-秘密</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/e613f6bfba78bef34f495f3158a46e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TaMSFoZs_GCl8MoO"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">GKE连接代理-秘密</figcaption></figure><p id="74df" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一旦建立了到GCP的身份验证，连接代理就会打开一个隧道来连接所需的API:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/d5034e032c8202a3bb8981e35449e4c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Qv3X4GPd-7vslD5H"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">GKE连接代理—日志</figcaption></figure><p id="dea6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">群集上的成员身份状态存储为“Kind:Membership ”,其中包含gkehub连接信息:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mq"><img src="../Images/decfaa1758cf0f5dd8cbc2907a52b411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DOGAUrEE1ucKfbYb"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">会员自定义资源</figcaption></figure><p id="f065" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以使用prometheus-to-sd将所有GKE连接代理指标导出到Stackdriver，并且可以从控制台的“monitoring”页面查看这些指标。部署了一个prometheus-to-sd pod，它从at代理收集指标并将它们推送到Stackdriver:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/6db38fa6f028a48a17a2ce43108fb6c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mJh5RYNisZmY57V9"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">普罗米修斯——斯塔克德瑞弗</figcaption></figure><p id="0f9d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">度量浏览器:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/45d17d899e1696598d464f3a31815591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kMj0PlHd3em1uSct"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">谷歌云——指标浏览器</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/4dd2fc021fb4e68dc0792c5395723435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F3_3i1EJ_o-S2geW"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">谷歌云——指标浏览器</figcaption></figure><p id="a74a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">集群注册完成后，可以从控制台的“Anthos”部分或“GKE”部分查看集群:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/c7a19d5a45e87c2a3aafa252e0311f62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-7jAP7kvEsYvR_jh"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Anthos控制台—注册的集群</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/0bd7f2a82c33404bfeb08a1f4b062113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_nw16Kx745IkjjIa"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Anthos控制台—注册的集群</figcaption></figure><p id="0b81" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">gcloud命令行可用于更新、列出和描述成员资格:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/7302a424b3792f6a083437243e9c144f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZlvVEmKnhDrxj3zU"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">命令行—注册的集群</figcaption></figure><p id="2c85" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用“集群角色”和相关的密码登录到注册的集群。根据所需的管理功能，用户可以使用只读角色或集群管理员角色。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mr"><img src="../Images/ecbf945e986b7db1b635eb67eea7b38d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qH71bOJO-XZGudMOXIPPFA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">访问注册的集群</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/c11818d00d1a751df541743943c4b007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ShT4fxnloC56HeV0"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">服务帐户—令牌</figcaption></figure><p id="858e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用三种身份验证过程之一登录到已注册的集群:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/681efbf65d4d8f506effbb1a21a5fbd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kGo5lTp-6G8ZNBFc"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">访问注册的集群</figcaption></figure><p id="00f9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一旦用户登录到集群，就可以访问集群的信息:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/4dd6002de59ad681574fbad7727d0c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HLCkUvQPuNCvg_BA"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Anthos —控制台—注册的集群信息</figcaption></figure><h1 id="d8c2" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">查看和管理集群资源</h1><p id="d205" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">可以从控制台的“Kubernetes引擎”部分访问所有注册和登录的集群信息。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/75fefa4a27083d3502935933f45b4c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L6qIGZztnGGNTgGN"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes引擎—查看注册的集群资源</figcaption></figure><p id="0de6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有工作负载都可以从门户访问，在多个集群的情况下，过滤器可以对工作负载和其他资源进行分类。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/972042123501f22bd94e5acf5770ad23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7t82E4UPdvhlOQ7_"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes引擎—查看注册的集群资源</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/a5aff6a29c448d2996c6a213edf516a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2WTeykuDxCSrf21O"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes引擎—查看注册的集群资源</figcaption></figure><p id="af86" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以从控制台编辑任何资源，连接代理将在成员集群上执行更改。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/3d9fca82d56cc2832798b85520061ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k8UkgvRFuB1AA_7C"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes引擎—编辑注册的集群资源</figcaption></figure><p id="122c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以从对象浏览器访问已注册集群的所有资源对象:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/83bc0414f64c2bf3c1c55870c827566b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ayss4P6eW1ZQ3Gtn"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes引擎—对象浏览器</figcaption></figure><h1 id="6197" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">试用—注册EKS、AK和本地集群</h1><p id="814c" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">EKS和AKS集群部署在个人用户帐户上。使用上面讨论的注册过程来注册集群。注册后，连接代理将部署在集群上。</p><p id="55f5" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">AWS上的EKS集群:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/5d89bfd6af685af9adab8a9bc6190781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oeuMiOiqrrkQoeq4"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS集群—自动气象站</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/074d39378f50769156e3b033b65bb62d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*URsqgp5Yem5DR1j2mwoAGQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS集群—自动气象站</figcaption></figure><p id="e3af" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure上的AKS集群:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/03053046cea4d0cb2963306f8d5f3227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qB1lajuxdRAWD6Iw"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">AKS集群</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/f3481007fba1faa4fc28a80a71d19961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kkx5p2DEksXvuWgB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">AKS集群上的GKE连接代理</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/d592257f107840d297252c9745474f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oGYHvneQJitxrjSA"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">AKS集群</figcaption></figure><p id="c869" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如下所示，所有三个Kubernetes集群都已注册并标记为“类型:外部”:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/9283a43918a73d3a8621986f6c273a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JQFJRE9ulynxub0Q"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">多个群集(EKS、AKS和本地)—注册的群集</figcaption></figure><h1 id="19e4" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">从Google Marketplace在外部集群上部署应用程序</h1><p id="fb5b" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">GCP容器市场提供了对开放源码和商业容器应用程序映像的大型生态系统的访问，这些映像可以部署在使用connect注册到GCP的任何地方运行的GKE集群上。有了marketplace，客户可以将预先创建的容器用于常见的应用程序，如数据库或web服务器，而不必自己创建它们。Anthos上支持的应用程序目录标有“<em class="mu">与Anthos </em>配合使用，使用户能够配置和选择现有集群来部署应用程序。</p><p id="4930" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面选择了一个Anthos支持的Nginx应用程序示例:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mv"><img src="../Images/5f0c97ffff86b714cdbbaf0ed631bdfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ApsN6WniBplQ6BBG"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">示例Nginx部署——Google云市场——在Anthos上得到支持</figcaption></figure><p id="65a9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">面向应用程序部署的群集需要访问“gcr.io”映像注册表来提取容器映像。这可以通过在项目中创建一个服务帐户并在Kubernetes中提供相同的“imagePullSecrets”来实现:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/4bba21d94334946b00487b47d9ebed74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c9s9lnK9h1A8qIcK"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Google容器注册表—访问</figcaption></figure><p id="877b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如下所示，部署目录包括集群选择字段，其中列出了所有已注册的集群。根据用于登录集群的权限级别，集群分为合格和不合格。例如，本地群集没有足够的权限，因为所使用的登录名使用的是只读角色。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mw"><img src="../Images/2e49dda2e75937cac5924d48235179a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m8yuHKFyLa89AnZ0"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署示例—集群选择</figcaption></figure><p id="4871" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">部署名称空间的选择:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/97c28fbec9308f5d8d0e136e5282dd7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BRMPtlKzdEWjeWNB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署示例—名称空间选择</figcaption></figure><p id="249f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以通过选择如下所示的特定参数来启用指标，参数的选择会注入一个sidecar prometheus-to-sd容器。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi my"><img src="../Images/9616847deccd7b44708673d66dc17cbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6pxo5A8HMKjVJBAt"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署示例——Google云市场</figcaption></figure><p id="fa6b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以从控制台查看部署步骤:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/ca56281c66c133aace620f92ea3a7f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TZWAtIilBlco6c98"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署示例——Google云市场</figcaption></figure><p id="5542" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">eks集群上的连接代理接收关于应用程序部署的信息:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/9dfe168aaf0025455310d90eec785223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*drDbNv2W2UccgBnH"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">GKE连接代理—日志</figcaption></figure><p id="992a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">运行所需作业的nginx-deployer容器，用于在集群上部署应用程序:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/b26415977025268aa75057a85b45ad52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hUbhX-WzWhwtVAJI"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署部署者——谷歌云市场</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/2cf673de34141c206a36f51cc307694f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BSCdSZnwasnS0rsv"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署部署者——谷歌云市场</figcaption></figure><p id="3493" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">应用程序部署成功完成后，可以从“应用程序”控制面板查看和管理。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/d27a18e7129fb89b457e8301fe78e30e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GcTdhyll9lYG31Z2"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署示例——Google云市场</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/3b3db1cf87510d2c85309afc27dfc437.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9zn-Q48bRdpGUQx2"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nginx部署示例——Google云市场</figcaption></figure><p id="4154" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如下所示，nginx应用程序已部署，存储部分显示了由AWS上的“ebs”支持的pvc。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/e7c321c5f33571ead690eee15cf860fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AYikRDqwQ4-UpL3i"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">持久卷— EKS EBS</figcaption></figure><h1 id="2460" class="lg lh jf bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">Anthos配置管理— GitOps</h1><p id="d2eb" class="pw-post-body-paragraph kc kd jf ke b kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv mi kx ky kz ij bi translated">这是Anthos的核心组件之一。在多个位置部署和管理GKE集群时，很难使所有集群在配置、安全策略(RBAC)、资源配置、名称空间等方面保持同步。随着人们开始使用这些集群并开始进行配置更改，随着时间的推移，用户将遇到“配置漂移”，这导致当相同的应用程序部署在不同的位置时，不同的集群表现不同。Anthos配置管理使用<a class="ae nb" href="https://landing.google.com/sre/sre-book/chapters/release-engineering/#configuration-management-vJsYUr" rel="noopener ugc nofollow" target="_blank">配置即代码</a>方法，通过描述性模板(在存储库中作为代码维护)实现集中式配置管理。这样可以很容易地确保您在集群中看到一致的行为，并且任何偏差都可以通过将更改恢复到上一次已知的良好状态来轻松纠正。</p><p id="efd3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如下所示，ACM-Operator安装在所有三个集群上:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/fa4cb41f89ce5c363fae20a3d4d4864d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ui7KdODgGWL5YWGU"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Anthos配置管理</figcaption></figure><p id="1537" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">包含多个名称空间和一些群集角色清单的配置示例报告:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/f49dcf57c3ea46c3971fc8fd2bb54b6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BEO710YzzeDUU-tm"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Git Repo —配置源</figcaption></figure><p id="8475" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">配置管理操作员与CRD一起部署在群集上—配置管理:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/9493b67d574c9697db22d3b396f27c23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VHEr75rG4KEbrwpp"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">配置管理操作员—日志</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/e9df77e5dd16d114eebbaaa9a5ec0558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8JLz0XwGr-9fuN_B"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">配置管理—自定义资源</figcaption></figure><p id="9b88" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">创建一个ConfigManagement对象，它包含syncRepo:带有配置的Repo的信息，syncBranch: Git Branch，secretType:如果repo是全球可读的，则可以将其设置为none，如果不相同，则类型可以是SSH、Key等。，policyDir:包含所有配置的子目录。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ne"><img src="../Images/47662899e669f79a01480ee2b3d6807b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*taWFhMIVYZvE7_wj"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">配置管理—规格/配置</figcaption></figure><p id="4dbc" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一旦创建了上述配置，操作员就按如下所示处理请求:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/a9ede2c7acc87d33bc96310829802669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3A8-_pIIGWCsmxB4"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">配置管理操作员日志</figcaption></figure><p id="8fa9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">创建了三个部署来导入、同步和监控通过ACM部署的工作负载。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/60fbcb08e6cda3dc5dc827adf0725c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2LjVC7eMFSiH6IH0"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">对象— Anthos配置管理</figcaption></figure><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/f36d9cf63e7dc761412abdbf48e7c496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3cH3H6pQIZJrzJc0"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">对象— Anthos配置管理</figcaption></figure><p id="b9d3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">具有git-importer、monitor和syncer的EKS集群—从GCP控制台查看:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/5da21cc18b45a63cb3d0c8d4ab94692c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vk5ujbXLrt8oiYfC"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">对象— Anthos配置管理</figcaption></figure><p id="f95b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">git-importer从指定的目录和git-repo导入所有配置:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/50ef52769716355834005cb84a863224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7QxBjn7DiTI3vq7g"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">ACM — Git导入程序组件</figcaption></figure><p id="00f7" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">syncer定期将集群中的对象状态与git配置进行比较，并与git源保持同步:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/119a2e22fe5f458e70a5028aeccba151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*olFWSqOn5azKQL_5"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">ACM —同步组件</figcaption></figure><p id="b424" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如下所示，所有对象都是使用git-repo中的配置在所有三个集群上创建的，并将被同步以匹配状态。用户不能编辑由ACM创建的对象，因为除非从受管对象中删除了特定的注释(如下所述),否则更改将在定期从repo中同步后恢复。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/a5f7561a1bb582c32e4c316c840a1e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cmwVpUoWIQp4RHb3"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">创建的对象— Anthos配置管理</figcaption></figure><p id="59ac" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以选择使用“<em class="mu"> nomos </em>”命令行工具，该工具可以安装在本地，用于与配置管理操作员进行交互，并可以在提交报告之前检查配置的语法。</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/25b8c59bc8d4111330d973ab51f6a72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BcOYAjWJiVQkiEld"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Nomos CLI—配置管理操作员</figcaption></figure><p id="14dd" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果集群中的某个对象有注释“【configmanagement.gke.io/managed:】启用”，则该对象由Anthos配置管理进行管理。如果对象根本没有标签“config management . gke . io/managed ”,或者如果它被设置为除enabled之外的任何值，则该对象为非托管对象。</p><p id="d5cb" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当Anthos配置管理管理一个集群对象时，它会监视该对象和repo中影响该对象的配置集，并确保它们是同步的。用户可以管理现有对象，也可以停止管理当前正在管理的对象，而无需删除该对象。</p><p id="0dbb" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面的流程图描述了导致对象成为托管或非托管对象的一些情况:</p><figure class="lb lc ld le gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/a942fb6002f123d8a5cb89a40493046c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*koBN9eRunCJSvXZm"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">托管和非托管对象</figcaption></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="8652" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Google发展了Anthos，通过将遗留应用程序容器化来实现应用程序的现代化。它增强了内部部署和云基础架构的整体安全性。Anthos完全可以管理混合云。用户甚至可以将Anthos与其他Kubernetes管理工具和平台相结合。例如，如果用户正在使用Kubernetes集群，这些集群是通过使用Kubeadm自主开发的自动化部署的，这意味着他们正在使用开源的Kubernetes (or)在EKS或AKS上托管他们的Kubernetes工作负载，用户仍然可以向Anthos注册该集群，Anthos将在更高的级别上工作，允许进行工作负载分配、CSM、策略分配和多集群管理。</p></div></div>    
</body>
</html>