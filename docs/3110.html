<html>
<head>
<title>Conquering Code Generation in Dart — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">征服Dart中的代码生成—第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/conquering-code-generation-in-dart-part-1-ce3bacdc93c5?source=collection_archive---------6-----------------------#2019-10-04">https://itnext.io/conquering-code-generation-in-dart-part-1-ce3bacdc93c5?source=collection_archive---------6-----------------------#2019-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1fd4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">解开困惑，编写你的第一个构建器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4e7edead74ce3bd0c0087c8a517ec300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VCcboLKlMK4PrF5v1_W5Eg.png"/></div></div></figure><p id="142b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">代码生成描述了自动生成代码的过程，否则需要手工编写代码。在这个新系列中，我们将探索可用于Dart项目代码生成的工具。</p><p id="5889" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于缺乏相关文档，这一直是最少涉及和理解的主题之一。我们将征服这个工具怪兽，并增强您对其使用的信心。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><h1 id="0565" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">如何开始</h1><p id="b9bd" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">代码生成可通过名为<a class="ae mm" href="https://pub.dev/packages/build" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> build </strong> </a>的包获得。这个包公开了一组接口，用于创建所谓的<em class="mn">构建器</em>。一个<code class="fe mo mp mq mr b">Builder</code>是你定义业务逻辑来指导构建过程如何生成代码的地方。</p><p id="fc8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然我们将逻辑封装在一个<code class="fe mo mp mq mr b">Builder</code>类中，但是我们需要一种方法来运行这个构建器...这就是<a class="ae mm" href="https://pub.dev/packages/build_runner" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> build_runner </strong> </a>的用武之地。它基于在一个<code class="fe mo mp mq mr b">build.yaml</code>文件中定义的配置运行构建过程。为了让它理解这个<code class="fe mo mp mq mr b">build.yaml</code>配置，使用<a class="ae mm" href="https://pub.dev/packages/build_config" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">build _ config</strong></a><strong class="kt ir"/>包来解析其中定义的指令。因此<strong class="kt ir"> build_runner </strong>包在后台使用<strong class="kt ir"> build_config </strong>。</p><p id="6e59" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为项目创建文件，使用<a class="ae mm" href="https://creativebracket.com/generate-the-scaffolding-for-your-next-project/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">stagehand</strong></a><strong class="kt ir"/>工具搭建控制台应用程序:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="4215" class="mw lq iq mr b gy mx my l mz na"><strong class="mr ir">$</strong> mkdir code_generators &amp;&amp; cd code_generators<br/><strong class="mr ir">$</strong> stagehand console-full</span></pre><p id="7c38" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">打开pubspec.yaml文件，更新<code class="fe mo mp mq mr b">dependencies</code>和<code class="fe mo mp mq mr b">dev_dependencies</code>:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="53bf" class="mw lq iq mr b gy mx my l mz na">dependencies:<br/>  <strong class="mr ir">build</strong>: ^1.1.6<br/>  path: ^1.6.0</span><span id="dbfa" class="mw lq iq mr b gy nb my l mz na">dev_dependencies: <br/>  <strong class="mr ir">build_config</strong>: ^0.4.1+1 <br/>  <strong class="mr ir">build_runner</strong>: ^1.6.6 <br/>  pedantic: ^1.7.0 <br/>  test: ^1.5.0</span></pre><p id="2b0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过运行<code class="fe mo mp mq mr b">pub get</code>更新所有的依赖项。</p><h1 id="ca56" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">配置<code class="fe mo mp mq mr b">build.yaml</code>文件</h1><p id="8e36" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated"><code class="fe mo mp mq mr b">build.yaml</code>文件包含<strong class="kt ir">目标</strong>、<strong class="kt ir">构建器</strong>和<strong class="kt ir">后处理构建器</strong>的配置。<code class="fe mo mp mq mr b">builders</code>配置允许您注册已经实现的构建器，以及要调用的顶级函数，以便为正在讨论的构建器运行构建过程。您还可以将<code class="fe mo mp mq mr b">build_extensions</code>键设置为与配置相关的<code class="fe mo mp mq mr b">Builder</code>类的<code class="fe mo mp mq mr b">buildExtensions</code>成员中设置的值相同。<code class="fe mo mp mq mr b">targets</code> config允许您配置您的构建器来运行您的项目中的文件子集，以及指定它们是否被启用。</p><p id="3c63" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有一个注册我们的<code class="fe mo mp mq mr b">CopyBuilder</code>并为它配置一些目标的典型例子:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="48e1" class="mw lq iq mr b gy mx my l mz na"><strong class="mr ir">targets</strong>: <br/>  $default: <br/>    <strong class="mr ir">builders</strong>: <br/>      code_generators|<strong class="mr ir">copyBuilder</strong>: <br/>        generate_for: <br/>         - lib/* <br/>        enabled: True </span><span id="b090" class="mw lq iq mr b gy nb my l mz na"><strong class="mr ir">builders</strong>: <br/>  <strong class="mr ir">copyBuilder</strong>: <br/>    import: 'package:code_generators/code_generators.dart' <br/>    builder_factories: ['copyBuilder'] <br/>    build_extensions: <br/>      .txt: <br/>       - .copy.txt <br/>    build_to: source <br/>    auto_apply: dependents</span></pre><p id="f995" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mm" href="https://github.com/dart-lang/build/blob/master/build_config/README.md" rel="noopener ugc nofollow" target="_blank">了解关于配置build.yaml文件的更多信息</a></p><p id="60d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">继续上面视频中的完整教程。</strong></p><p id="3d33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mm" href="https://github.com/graphicbeacon/codegeneration_with_dart" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">获取源代码</strong> </a></p><h1 id="b97e" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">分享是关怀</h1><p id="f992" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">如果你喜欢阅读这篇文章，请通过屏幕左侧/顶部的各种社交按钮来分享。此外，检查和<a class="ae mm" href="https://youtube.com/c/CreativeBracket" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">订阅我的YouTube频道</strong> </a> ( <em class="mn">打铃图标太</em>)的Dart上的视频。</p><p id="bfe4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Egghead.io和<a class="ae mm" href="http://eepurl.com/gipQBX" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">上观看我的<a class="ae mm" href="https://egghead.io/courses/get-started-with-dart" rel="noopener ugc nofollow" target="_blank">免费<strong class="kt ir">Dart</strong>入门课程</a>订阅我的电子邮件简讯</strong> </a>下载我的标题为<strong class="kt ir">Dart</strong>的35页免费电子书，并在新内容发布时得到通知。</p><p id="c3ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">喜欢，分享</strong> <a class="ae mm" href="https://twitter.com/creativ_bracket" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">关注我</strong> </a> <strong class="kt ir"> </strong>了解更多关于Dart的内容。</p><p id="540d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mn">最初发表于</em><a class="ae mm" href="https://creativebracket.com/conquering-code-generation-in-dart-1/" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://creativebracket.com</em></a><em class="mn">。</em></p></div></div>    
</body>
</html>