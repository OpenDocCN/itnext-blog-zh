<html>
<head>
<title>Scaling My App: Serverless vs Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扩展我的应用:无服务器与Kubernetes</h1>
<blockquote>原文：<a href="https://itnext.io/scaling-my-app-serverless-vs-kubernetes-cdb8adf446e1?source=collection_archive---------1-----------------------#2020-01-26">https://itnext.io/scaling-my-app-serverless-vs-kubernetes-cdb8adf446e1?source=collection_archive---------1-----------------------#2020-01-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><h1 id="84f8" class="jx jy it bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">介绍</h1><p id="ccdb" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在我之前的<a class="ae lt" href="https://medium.com/@javier.ramos1/my-first-app-time-to-market-90a443ec03fc" rel="noopener"> <strong class="kx iu">帖子</strong> </a>中，我谈到了你在开始一个项目或公司时可以使用的不同平台、工具和编程语言；解释权衡和利弊。当你开始一个项目时，你的目标是<strong class="kx iu">上市时间</strong>，在别人之前推出你的产品，同时保持低成本。在这篇文章中，我们将进入一个新的领域，企业世界。如果你已经在一家中型公司工作，或者你的创业公司正在快速成长，那么这篇文章适合你。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lu"><img src="../Images/8b1efc923e3aea3afdefdd77ba790a1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PUCWkRf2ro7f-2Gk"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">Kubernetes与无服务器</figcaption></figure><p id="7deb" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">随着你的团队和你的产品的成长，新的过程和特性将是必需的；这需要更好的团队同步、改进的测试、敏捷的过程、计划和严格的质量控制。后端即服务(<strong class="kx iu"> BaaS </strong>)或者简单的<em class="mp"> node.js </em> app <strong class="kx iu">都是不够的</strong>；您将需要对基础设施、构建过程、更好的性能等有更多的控制。能够在全球范围内扩展。你需要管理你的系统并保持它运行。您已经到了停机时间不可接受的地步，您需要<a class="ae lt" href="https://en.wikipedia.org/wiki/Site_reliability_engineering" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> SREs </strong> </a>来确保您的系统全天候运行。<strong class="kx iu">欢迎来到</strong> <a class="ae lt" href="https://medium.com/@javier.ramos1/introduction-to-devops-ee81fd1578be" rel="noopener"> <strong class="kx iu">的世界！</strong></a></p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mq"><img src="../Images/7ff006887ab9a6344f6e27988cd4cfcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OBcER7nZq589ftiE"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">DevOps生命周期</figcaption></figure><h1 id="fda6" class="jx jy it bd jz ka mr kc kd ke ms kg kh ki mt kk kl km mu ko kp kq mv ks kt ku bi translated">库伯内特斯</h1><p id="294e" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">传统上，开发团队负责添加功能，运营团队负责运行你的应用；<strong class="kx iu">被</strong>分开了，这就造成了很多<a class="ae lt" href="https://dzone.com/articles/top-5-reasons-why-devops-is-important" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu">的问题</strong> </a>。渐渐地，公司开始采用<a class="ae lt" href="https://www.devopsagileskills.org/dasa-devops-principles/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> DevOps </strong> </a>文化。</p><p id="3ca2" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated"><strong class="kx iu"> DevOps </strong>文化包含了与本文相关且彼此非常接近的两项重要技术:</p><ul class=""><li id="887b" class="mw mx it kx b ky mk lc ml lg my lk mz lo na ls nb nc nd ne bi translated"><a class="ae lt" href="https://medium.com/@javier.ramos1/devops-microservices-part-2-microservices-1692476a1a17?source=your_stories_page---------------------------" rel="noopener"> <strong class="kx iu">微服务</strong> </a> : <a class="ae lt" href="https://martinfowler.com/microservice" rel="noopener ugc nofollow" target="_blank">微服务</a>是一种全新的革命性方式，可以用最少的努力开发复杂的IT系统。简而言之，<a class="ae lt" href="https://smartbear.com/learn/api-design/what-are-microservices/" rel="noopener ugc nofollow" target="_blank">微服务</a>架构风格是一种将单个应用程序开发为一套小型服务的方法，每个服务运行在自己的进程中，并与轻量级机制(通常是HTTP资源API)进行通信。这些服务是围绕业务功能构建的，可由全自动部署机器独立部署。一套<a class="ae lt" href="http://microservices.io/patterns/microservices.html" rel="noopener ugc nofollow" target="_blank">模式</a>、<a class="ae lt" href="https://github.com/katopz/best-practices/blob/master/best-practices-for-building-a-microservice-architecture.md" rel="noopener ugc nofollow" target="_blank">最佳实践</a>和<a class="ae lt" href="http://cloud.spring.io/" rel="noopener ugc nofollow" target="_blank">技术</a>支持微服务的开发。</li><li id="2355" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><a class="ae lt" href="https://medium.com/@javier.ramos1/devops-microservices-part-3-containers-e0cc44930e86" rel="noopener"> <strong class="kx iu">容器</strong> </a>:容器只是一个应用程序可以运行的隔离的执行环境，它拥有运行所需的所有组件，但它遵循一个标准，并清楚地定义了它的需求和依赖关系。容器允许DevOps团队独立于他们使用的语言或平台以及环境来管理应用程序的生命周期。<a class="ae lt" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> Docker </strong> </a>是集装箱背后的主要技术。</li></ul><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/ce280734934c9b61e79956ca67c6c26e.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/0*J2HFUb7qEdFC5PGb"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">码头工人和集装箱。</figcaption></figure><p id="0641" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">你可以把<strong class="kx iu">微服务</strong>想象成<strong class="kx iu"><em class="mp">Dev</em></strong><strong class="kx iu">容器</strong>想象成<strong class="kx iu"> <em class="mp"> Ops </em> </strong>统一在<strong class="kx iu"> DevOps </strong>！</p><p id="febb" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">随着企业开始迁移到微服务，其复杂性也在增加。<a class="ae lt" href="https://www.infoworld.com/article/3268073/containers/what-is-kubernetes-container-orchestration-explained.html" rel="noopener ugc nofollow" target="_blank">容器编排</a>被引入以应对操作的复杂性，2014年<a class="ae lt" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> Kubernetes </strong> </a>诞生。Kubernetes是一个可移植的、可扩展的开源平台，用于管理容器化的工作负载和服务，促进了声明式配置和自动化。关键思想是服务的<strong class="kx iu">声明性</strong>本质。部署将描述它在CPU、内存、速度、依赖性等方面需要什么资源，Kubernetes将确保它满足要求，并相应地自动扩展和复制。所以，你告诉Kubernetes你想要什么，而不是怎么做。如果可能的话，Kubernetes会确保集群状态与您的请求相匹配。</p><p id="df0e" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">在这一点上，我们了解了监控、记录、测试、自动化和维护我们的应用程序以保持其运行的需求。我们已经看到开发人员如何转向更小的服务(<em class="mp">微服务</em>)，并且由于敏捷方法和自动化，他们承担了部署它们并通过更好的通信来维护它们的责任。Kubernetes允许将遗留应用程序带入云中，在容器中运行，并以可预测和自动化的方式管理它们。</p><p id="788b" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">大约在同一时间，<strong class="kx iu">云提供商正在快速发展</strong>，并提供越来越多的<strong class="kx iu">服务</strong>。除此之外，还发生了两件大事:</p><ul class=""><li id="667a" class="mw mx it kx b ky mk lc ml lg my lk mz lo na ls nb nc nd ne bi translated">一些开发者和公司意识到，他们正在做的操作类型与其他公司完全一样，并且大部分努力都与确保他们的<strong class="kx iu">应用</strong>能够在他们请求<strong class="kx iu">峰值</strong>时<strong class="kx iu">扩展</strong>有关。他们也意识到，在许多情况下，他们是在为未使用的资源买单。</li><li id="7736" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">大多数应用程序逻辑是基于<strong class="kx iu">事件</strong><strong class="kx iu"/>的，当事件被触发时，服务被调用，比如HTTP请求或文件上传，它们会采取行动，或者回复或者生成新事件。这就是<a class="ae lt" href="https://en.wikipedia.org/wiki/Reactive_programming" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu">无功编程、</strong> </a> <strong class="kx iu"> </strong>和<a class="ae lt" href="https://martinfowler.com/eaaDev/EventSourcing.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu">事件源</strong> </a>和<a class="ae lt" href="https://www.martinfowler.com/bliki/CQRS.html" rel="noopener ugc nofollow" target="_blank"><strong class="kx iu">【CQRS】</strong></a>等新范式。</li></ul><p id="e05e" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated"><strong class="kx iu">基于事件的微服务和开发团队编写反应式应用的组合，以及向云的大规模迁移，催生了无服务器模式。</strong></p><h1 id="96cc" class="jx jy it bd jz ka mr kc kd ke ms kg kh ki mt kk kl km mu ko kp kq mv ks kt ku bi translated">无服务器</h1><p id="6c0e" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">简而言之，<a class="ae lt" href="https://martinfowler.com/articles/serverless.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu">无服务器</strong> </a> <strong class="kx iu">就是执行不需要任何服务器</strong>的业务逻辑的任何东西。这个<strong class="kx iu">去掉了DevOp </strong> s的操作方面，可以想象，<strong class="kx iu"> Serverless与云</strong>紧密耦合。随着越来越多的服务被添加到云中，开发人员意识到可以将简单的功能作为微服务与其他云服务一起使用，并根据事件编排它们。尽管有人试图在本地提供类似无服务器的行为，但<strong class="kx iu">无服务器是为云</strong>准备的。</p><p id="1baf" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">最流行的范例是功能即服务(<a class="ae lt" href="https://en.wikipedia.org/wiki/Function_as_a_service" rel="noopener ugc nofollow" target="_blank"><strong class="kx iu">【FaaS】</strong></a>)，它是由<strong class="kx iu"> AWS </strong>用<a class="ae lt" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> Lambda </strong> </a>服务推广的。给你一些背景，AWS有越来越多的计算、处理和存储互联服务，如EC2、S3、SNS、SQS等。开发人员将编写与这些服务交互并对事件做出反应的应用程序。AWS慢慢地将事件添加到一些服务中，开发人员使用他们的消息服务作为粘合剂来编排微服务。由于这些云服务，开发人员可以编写简单的小服务，AWS将负责所有的交叉方面，如监控、日志、缩放等。但开发人员仍在关注虚拟机的操作方面，如更新、补丁和重启。<strong class="kx iu"> Lambda </strong>的推出是为了提供<strong class="kx iu">运行在云上的简单功能，并且可以与云提供商服务</strong>进行交互。开发人员的目标是<strong class="kx iu">只</strong>关注<strong class="kx iu">代码</strong>而不是操作。这种方法适合于<strong class="kx iu"> web应用</strong>的一个常见用例，在这种情况下，请求的数量有短有长，很难管理。FaaS通过提供<strong class="kx iu">超快速自动缩放和简单配置</strong>解决了这个问题。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi nl"><img src="../Images/d502e36334da970f7680d747c65cd1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3hIPyJMygxkqL3Or"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">典型的无服务器Web应用</figcaption></figure><p id="0c0a" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">总而言之<strong class="kx iu"> FaaS </strong>的关键积木是:</p><ul class=""><li id="bdca" class="mw mx it kx b ky mk lc ml lg my lk mz lo na ls nb nc nd ne bi translated"><strong class="kx iu">无服务器</strong>:无需管理虚拟机、操作系统等。你只需要打包你的应用程序并上传到云端。不需要像在Kubernetes中那样管理图像。</li><li id="7090" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">按需付费</strong>:这是一个核心功能，<strong class="kx iu">你只需按请求付费</strong>，如果你的应用程序是空闲的，你就不用付费。这可以大幅削减成本，特别是对于没有稳定负载的应用程序。这是Web应用程序中常见的情况，负载会发生变化，很难预测。</li><li id="f45a" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">事件驱动</strong>:函数对事件做出反应并执行特定的动作，它们使用消息队列如SNS或Kinesis来编排事件。</li></ul><p id="9d88" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">注意<strong class="kx iu">无服务器与FaaS </strong>不同，其他不需要服务器的服务也是服务，范围从流处理或物联网到大数据管道，一些例子是AWS Glue、AWS Athena、AWS DynamoDB或GCP发布/订阅。</p><p id="7f98" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">然而，无服务器非常依赖于云提供商。所有的云提供商，如Azure、T2、AWS、T4和GCP，都提供无服务器服务，但它们根据其他服务的不同进行不同的整合。<a class="ae lt" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu">无服务器框架</strong> </a>在从云提供商那里分离<strong class="kx iu"> FaaS </strong>方面做得很好，但是在你能做什么方面它是有限的；例如，它只能提供某些东西，如API网关或桶，但不支持其他类型的基础设施。最后，当使用无服务器时，仍然很难从云提供商迁移。</p><p id="35c9" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated"><strong class="kx iu">由于现收现付模式和简化模式</strong>，无服务器越来越受欢迎。它比Kubernetes简单得多，适合许多用例。随着公司的成长，<strong class="kx iu"> Serverless提供了一个比Kubernetes更容易管理的NoOps替代品，并且可以以最小的努力更快地扩展。然而，无服务器的灵活性较差，可能不适用于某些用例；在某些情况下，它可能比Kubernetes更贵，现在让我们讨论一下利弊。</strong></p><h1 id="467e" class="jx jy it bd jz ka mr kc kd ke ms kg kh ki mt kk kl km mu ko kp kq mv ks kt ku bi translated">无服务器vs Kubernetes</h1><p id="9cdd" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">毫无疑问，<strong class="kx iu">无服务器功能</strong>是实现您的服务的一个<strong class="kx iu">成本有效且简单的</strong>解决方案，这是毫无疑问的。这是你应该考虑的第一个选择；但是有一个问题:它们往往依赖于云提供商，您无法控制资源，并且从长远来看，它们可能会因为集成而变得昂贵。另一方面，在容器中运行工作负载可能更具成本效益，但也更复杂。</p><p id="4a3f" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">与Kubernetes相比，无服务器有三个主要缺点:</p><ul class=""><li id="ec56" class="mw mx it kx b ky mk lc ml lg my lk mz lo na ls nb nc nd ne bi translated">不适用于某些用例，如实时分布式系统、有状态处理、长时间运行的作业等。函数必须由事件触发，并且必须快速响应。您无法对基础设施进行精细控制，因此无法使用低级API来最大限度地提高性能和减少延迟。</li><li id="af0f" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">云提供商依赖性</strong>:云提供商之间的迁移很困难，<strong class="kx iu">内部部署更加困难</strong>。由于有关数据保护和数据可闻性的法律越来越多，一些公司开始迁移回本地，Kubernetes使他们能够解决以前的本地运营问题，同时保持对数据的严格控制。如果您决定使用无服务器，那么迁移回本地是非常困难的。</li><li id="d408" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">无服务器可能变得昂贵</strong>。由于事件驱动的现收现付性质，很难预测和控制成本。我担心的是，由于FaaS的事件驱动性质，我们被吸引去整合可能不太划算的云服务。例如，AWS API Gateway是一项很好的服务，但随着时间的推移，成本会越来越高。所有这些与更昂贵服务的集成会大幅增加成本。如果你有一个或多或少的稳定负载，Kubernetes会更便宜。</li></ul><p id="a4f0" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">请注意，Kubernetes允许类似FaaS的行为，这要感谢像<a class="ae lt" href="https://knative.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> Knative </strong> </a>这样的项目，它们允许在微型容器中运行的函数响应事件而运行，然后缩小到零。Knative是<a class="ae lt" href="https://cloud.google.com/run/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> GCP云跑</strong> </a>背后的技术。</p><p id="e70b" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">在过去的几个月里，我一直在研究并致力于优化运行在云上的<strong class="kx iu">微服务</strong>的成本和性能。</p><p id="5d41" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">根据我的经验，如果一家公司计划扩大规模并保持竞争力，他们应该考虑将其基础架构迁移到Kubernetes。<strong class="kx iu">无服务器非常适合快速上市</strong>。你可以很快从想法到产品，它可以在负载方面很好地扩展。许多创业公司以这种方式开始，但随着时间的推移，一些公司可能会在基础设施成本上挣扎。这完全取决于您的用例。如果你不整合昂贵的服务，你有不可预测的负载，应用程序有时是空闲的，无服务器会更便宜，可以处理数百万的请求。如果你有一个稳定的或预测的负载(季节性)，Kubernetes可能会更便宜。</p><p id="93de" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">我们在Kubernetes 中看到两种常见的模式，最常见的是<strong class="kx iu">移动传统本地应用</strong>；迁移到无服务器太耗时，Kubernetes是一个更好的选择。另一个用例是我们刚刚谈到的<strong class="kx iu">成本控制</strong>，我们可以通过在适当管理的集群上运行Kubernetes免费开源替代方案来降低成本。举个例子，如果你在AWS，你用Lambda，SNS，Kineses，DynamoDB等等。你可以搬到Kubernetes，管理你自己的开源项目，比如MongoDB、Kafka和你的微服务。这是从<strong class="kx iu"> NoOps </strong>到<strong class="kx iu"> DevOps </strong>的转变，它需要一个更大的团队来管理，但它可以大幅削减成本。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/6612653c8107439b7e7a228eb5d59b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/0*lsiwEtk0-NuDHKOI"/></div></figure><p id="c058" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">让我们回顾一下利弊，看看什么时候考虑这个或那个。</p><h2 id="72cd" class="nn jy it bd jz no np dn kd nq nr dp kh lg ns nt kl lk nu nv kp lo nw nx kt ny bi translated"><strong class="ak">无服务器优势</strong></h2><ul class=""><li id="b4eb" class="mw mx it kx b ky kz lc ld lg nz lk oa lo ob ls nb nc nd ne bi translated"><strong class="kx iu">好用易学</strong>，你只要写小函数就行了！</li><li id="8e0e" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">现收现付</strong>。对于不可预测的负载(如web应用程序),可能会便宜很多。功能不运行时没有成本！</li><li id="3573" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">事件驱动</strong>，可以集成很多服务。</li><li id="94bb" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">无操作</strong>。无需维护基础设施或操作系统！</li><li id="bae5" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">易于管理</strong>只需设置RAM、集成IAM并设置触发器。</li><li id="8657" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">无限扩展</strong>，无需设置集群。非常快。</li><li id="5962" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">不需要专门的运营团队。监控是内置的。这样可以降低成本。</li><li id="88ca" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">开发者生产力</strong>。</li></ul><h2 id="307b" class="nn jy it bd jz no np dn kd nq nr dp kh lg ns nt kl lk nu nv kp lo nw nx kt ny bi translated"><strong class="ak">无服务器缺点</strong></h2><ul class=""><li id="f048" class="mw mx it kx b ky kz lc ld lg nz lk oa lo ob ls nb nc nd ne bi translated"><strong class="kx iu">不适合某些用例</strong>，如实时系统或长期任务。</li><li id="ffa4" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">供应商锁定。</strong>难以迁移。</li><li id="33dd" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">事件驱动的范例可能很难学习。</li><li id="079b" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">调试可能会很困难。</li><li id="fe87" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">安全</strong> <strong class="kx iu">问题</strong>。更难配置具体的规则或政策，您完全依赖于云提供商，这对于银行和保险公司来说可能是不可行的。</li><li id="882f" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">在某些情况下，它会变得昂贵，不是因为FaaS，而是因为整合。</li><li id="f074" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">不灵活</strong>，不能使用任何编程语言或运行时。</li></ul><h2 id="b3b4" class="nn jy it bd jz no np dn kd nq nr dp kh lg ns nt kl lk nu nv kp lo nw nx kt ny bi translated"><strong class="ak"> Kubernetes Pros </strong></h2><ul class=""><li id="ec97" class="mw mx it kx b ky kz lc ld lg nz lk oa lo ob ls nb nc nd ne bi translated"><strong class="kx iu">不可变的基础设施</strong>。不再有“它在我的笔记本电脑上工作”，开发和生产中相同的代码和依赖关系。</li><li id="9bc4" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">非常高效</strong>管理资源，很快。低延迟。</li><li id="9a3b" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">说明性</strong>。只需确定您需要什么，Kubernetes会处理其余的事情。</li><li id="76b0" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">性价比</strong>。几个容器可以在一个虚拟机上运行。</li><li id="5aef" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">支持工具和框架的大生态系统</strong>。在我看来，太宽泛了。</li><li id="adc2" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">多种工作负载和部署选项。<strong class="kx iu">你可以跑任何东西。</strong></li><li id="7c25" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">它支持<strong class="kx iu"> Cron作业和有状态应用</strong>，包括大数据处理或Actor系统。</li><li id="a901" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">便携式</strong>。可以在内部或跨多个云提供商运行。</li><li id="4847" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">开放标准</strong>，极大的社区支持和广泛采用。</li></ul><h2 id="24ab" class="nn jy it bd jz no np dn kd nq nr dp kh lg ns nt kl lk nu nv kp lo nw nx kt ny bi translated"><strong class="ak"> Kubernetes Cons </strong></h2><ul class=""><li id="e7d5" class="mw mx it kx b ky kz lc ld lg nz lk oa lo ob ls nb nc nd ne bi translated"><strong class="kx iu">难</strong>学。它需要网络和存储方面的知识。</li><li id="96e4" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">开箱即用难以部署</strong>，您依赖云提供商。一些公司提供比其他公司更好的工具、监控和安全性。<strong class="kx iu">谷歌云</strong>是目前<strong class="kx iu">最便宜的</strong>和功能最好的最新提供商。</li><li id="6796" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">需要更多专业知识</strong>与无服务器相比，雇佣人才可能会很昂贵</li><li id="7d30" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">监控、安全、开发工具等选项太多</strong>。很难跟上时代。</li></ul><h2 id="449d" class="nn jy it bd jz no np dn kd nq nr dp kh lg ns nt kl lk nu nv kp lo nw nx kt ny bi translated"><strong class="ak">什么时候应该考虑无服务器</strong></h2><ul class=""><li id="e17e" class="mw mx it kx b ky kz lc ld lg nz lk oa lo ob ls nb nc nd ne bi translated"><strong class="kx iu">您的团队主要是没有运营经验(网络、存储、监控……)的开发人员</strong></li><li id="905c" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您正在构建一个有许多峰值和不可预测负载的网站，需要快速扩展。</li><li id="ded3" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">在某些时候，您很少或根本不使用资源，并且您更喜欢“随用随付”模式。</li><li id="856a" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你使用一种主要支持的语言，比如Python，JavaScript，Go，Java…</li><li id="8a24" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">你不用Java或者JVM </strong>。无服务器它不是JVM的最佳选择，因为它需要更长的时间来扩展，而且JVM没有时间来优化代码执行。</li><li id="73e5" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">上市时间</strong>很重要，但资源有限。</li><li id="4a47" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您的用例可以使用FaaS来实现。</li><li id="8490" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">您致力于单一的云提供商。</strong></li><li id="6023" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">你可以应对每月账单的突然激增</strong>。对于初创公司来说，这可能是一个问题，高额的云账单可能会让他们陷入困境。</li><li id="0268" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你构建事件驱动的应用程序。</li></ul><h2 id="3765" class="nn jy it bd jz no np dn kd nq nr dp kh lg ns nt kl lk nu nv kp lo nw nx kt ny bi translated"><strong class="ak">什么时候应该考虑Kubernetes </strong></h2><ul class=""><li id="d70d" class="mw mx it kx b ky kz lc ld lg nz lk oa lo ob ls nb nc nd ne bi translated"><strong class="kx iu">您正在将现有的服务迁移到云中。</strong></li><li id="4b08" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你的服务已经在容器上运行了。</li><li id="35ba" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您可以在本地或混合云中运行。</li><li id="e27e" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您使用了云FaaS提供商不支持的编程语言。</li><li id="c3b2" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">您的应用程序需要低级API，如线程控制。</strong></li><li id="1348" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你有<strong class="kx iu">有状态</strong>组件<strong class="kx iu">或者</strong>长时间运行的任务。</li><li id="6686" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您正在构建实时分布式系统。</li><li id="5dde" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你大量使用了JVM，特别是并发性。</li><li id="6689" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您希望<strong class="kx iu">控制</strong>部署、CI/CD渠道以及应用程序如何打包和推出。</li><li id="3e06" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated"><strong class="kx iu">团队中有运营专家</strong>，他们非常熟悉Kubernetes，知道如何监控、保护它并保持它的运行。</li><li id="d30b" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你的公司信奉<strong class="kx iu"> DevOps </strong> <strong class="kx iu">原则</strong>。</li><li id="338e" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你想要避免供应商锁定。</li><li id="351f" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">你有一个可预测的或稳定的负荷。</li><li id="30ac" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您希望严格控制您的资源，以最大限度地提高性能和降低成本</li><li id="b6f9" class="mw mx it kx b ky nf lc ng lg nh lk ni lo nj ls nb nc nd ne bi translated">您有无服务器无法满足的安全或策略要求。</li></ul><h1 id="3214" class="jx jy it bd jz ka mr kc kd ke ms kg kh ki mt kk kl km mu ko kp kq mv ks kt ku bi translated">结论</h1><p id="c9f6" class="pw-post-body-paragraph kv kw it kx b ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><strong class="kx iu">无服务器和Kubernetes不是竞争技术</strong>，如你所见，<strong class="kx iu">它们解决不同的用例，它们可以共存</strong>。例如，让您的Kubernetes集群与云提供的无服务器数据库和消息服务进行交互是非常常见的，反之亦然，lambda函数调用VPC内部的托管实例。</p><p id="3e8e" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">在我看来，<strong class="kx iu">与常规虚拟机</strong>相比，这两种方法在可维护性、性能和成本节约方面都向前迈进了一大步。如果无服务器符合您的使用情况，并且您不担心供应商锁定，那么就选择它；这是一个简单的可扩展解决方案。以后可以随时去Kubernetes。对于更复杂的场景，如大数据管道或ML，Kubernetes是更好的选择。虽然一些云提供商有大数据无服务器分析，但服务过于昂贵或不成熟。</p><p id="b1ce" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">考虑你的业务，如何发展，你的文化和你的目标。然后定义你的核心价值观，指导方针，okr和流程。使用<a class="ae lt" href="https://en.wikipedia.org/wiki/Domain-driven_design" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu">领域驱动设计</strong> </a>拿出最好的解决方案和团队架构，然后，思考框架和平台。<strong class="kx iu">不要先选择一个平台，然后再尝试在这个平台上解决业务问题，让它发挥作用。</strong></p></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><p id="703c" class="pw-post-body-paragraph kv kw it kx b ky mk la lb lc ml le lf lg mm li lj lk mn lm ln lo mo lq lr ls im bi translated">我希望你喜欢这篇文章。欢迎发表评论或分享这篇文章。跟随<a class="ae lt" href="https://twitter.com/JavierRamosRod7" rel="noopener ugc nofollow" target="_blank"><strong class="kx iu"><em class="mp">me</em></strong></a><em class="mp">进行未来的帖子。</em></p></div></div>    
</body>
</html>