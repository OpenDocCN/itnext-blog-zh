<html>
<head>
<title>immudb — the open source immutable database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">immudb——开源不可变数据库</h1>
<blockquote>原文：<a href="https://itnext.io/immudb-the-open-source-immutable-database-1f6e4bb5c79d?source=collection_archive---------3-----------------------#2020-05-14">https://itnext.io/immudb-the-open-source-immutable-database-1f6e4bb5c79d?source=collection_archive---------3-----------------------#2020-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fc59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/codenotary/immudb" rel="noopener ugc nofollow" target="_blank"> immudb </a>是用于系统和应用程序的<strong class="jp ir">轻量级、高速不可变数据库</strong>。</p><p id="756a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<a class="ae kl" href="https://github.com/codenotary/immudb" rel="noopener ugc nofollow" target="_blank"> immudb </a>，您可以跟踪交易数据库中敏感数据的变化，然后将这些变化永久记录在防篡改的immudb数据库中。</p><p id="ccc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这可以让你保持一个不可磨灭的历史，比如说，你的借贷交易。</p><p id="5e1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<a class="ae kl" href="https://www.opvizor.com" rel="noopener ugc nofollow" target="_blank"> Opvizor </a>中，我们已经使用immudb为VMware vSphere启用了不可变日志管理。</p><p id="161b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">immudb是在<a class="ae kl" href="https://github.com/codenotary/immudb/blob/master/LICENSE" rel="noopener ugc nofollow" target="_blank"> Apache v2.0许可</a>下开源的，可以在这里找到(也有更全面的文档):</p><p id="ad6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/codenotary/immudb" rel="noopener ugc nofollow" target="_blank">https://github.com/codenotary/immudb</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/480ce6cc9699413849d68fb000fab843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/0*3gca_mExlKctpvVi.png"/></div></figure><p id="62cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">传统的事务日志很难扩展，并且不是不可变的。因此，没有办法确切知道您的数据是否已经受损。</p><p id="1bda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在此处找到示例视频:</p><p id="41d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.youtube.com/watch?v=rQ4iZAM14m0" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=rQ4iZAM14m0</a></p><h1 id="0229" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">它是如何工作的</h1><p id="d559" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">因此，immudb提供了<strong class="jp ir">无与伦比的洞察力</strong> <strong class="jp ir">追溯到</strong>您的敏感数据发生了什么，即使您的机密遭到破坏。immudb通过在内部使用一个<strong class="jp ir"> Merkle树结构</strong>来提供不变性的保证。</p><p id="45e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">immudb给你同样的<strong class="jp ir">cyr photo graphic验证</strong>用<strong class="jp ir"> SHA-256 </strong>写的数据的完整性，就像经典的区块链一样，而没有与今天的区块链相关的成本和复杂性。</p><p id="3cff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">immudb有4个主要优点:</p><ol class=""><li id="2172" class="lx ly iq jp b jq jr ju jv jy lz kc ma kg mb kk mc md me mf bi translated"><strong class="jp ir"> immudb是不可变的</strong>。您只能添加记录，但<strong class="jp ir">不能更改或删除记录</strong>。</li><li id="a213" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk mc md me mf bi translated">存储在immudb中的数据是<strong class="jp ir">加密一致且可验证的</strong>，就像区块链一样，只是没有所有的复杂性并且速度很快。</li><li id="7872" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk mc md me mf bi translated">任何人都可以在分钟内用immudb启动<strong class="jp ir">。无论是node.js、Java、Python、Golang、。Net或任何其他语言。它非常容易使用，您可以在几分钟内运行您的不可变数据库。</strong></li><li id="a911" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk mc md me mf bi translated">最后，immudb是<strong class="jp ir">开源</strong>。你可以在内部或者在<strong class="jp ir">云</strong>中运行<strong class="jp ir">，这是完全免费的。immudb由Apache 2.0许可证管理。</strong></li></ol><p id="9b34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">immudb目前运行在<strong class="jp ir"> Linux </strong>、<strong class="jp ir"> FreeBSD </strong>、<strong class="jp ir"> Windows </strong>和<strong class="jp ir"> MacOS </strong>上，以及从它们衍生出来的其他系统，比如<strong class="jp ir"> Kubernetes </strong>和<strong class="jp ir"> Docker </strong>。</p><p id="6f50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> immudb高层</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/73b6f29f22758c6d532db1b956f99271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mD5BVu2h6T65HTQv.png"/></div></div></figure><h1 id="a6a0" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">入门</strong></h1><p id="1e9f" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">您可以基于GitHub存储库中的Docker文件为最常见的架构构建Docker映像，也可以在Dockerhub for Linux上使用预构建的映像。</p><h2 id="553c" class="mq kv iq bd kw mr ms dn la mt mu dp le jy mv mw li kc mx my lm kg mz na lq nb bi translated">自己打造</h2><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="9026" class="mq kv iq nd b gy nh ni l nj nk">docker build -t myown/immudb:latest -f Dockerfile . </span></pre><h2 id="c6ec" class="mq kv iq bd kw mr ms dn la mt mu dp le jy mv mw li kc mx my lm kg mz na lq nb bi translated">immudb <strong class="ak"> Dockerhub </strong></h2><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="0289" class="mq kv iq nd b gy nh ni l nj nk">docker run -it -d -p 3322:3322 -p 9497:9497 — name immudb codenotary/immudb:latest</span></pre><h1 id="1351" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">独立二进制文件</h1><p id="2c2b" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">如果您想自己构建<strong class="jp ir">二进制文件</strong>，只需<a class="ae kl" href="https://github.com/codenotary/immudb" rel="noopener ugc nofollow" target="_blank">克隆这个repo </a>并基于您的操作系统运行以下命令之一。</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="6fab" class="mq kv iq nd b gy nh ni l nj nk"># Linux<br/>GOOS=linux GOARCH=amd64 make immudb-static </span><span id="4f39" class="mq kv iq nd b gy nl ni l nj nk"># macOS<br/>GOOS=darwin GOARCH=amd64 make immudb-static </span><span id="f0b1" class="mq kv iq nd b gy nl ni l nj nk"># Microsoft Windows<br/>GOOS=windows GOARCH=amd64 make immudb-static</span></pre><p id="32f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，您可以运行immudb服务器</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="e308" class="mq kv iq nd b gy nh ni l nj nk"># run immudb in the foreground <br/>./immudb </span><span id="5216" class="mq kv iq nd b gy nl ni l nj nk"># run immudb in the background <br/>./immudb -d</span></pre><p id="c7af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">安装immudb作为服务</strong></p><p id="e70c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装服务时，请确保构建或下载immudb和immuadmin组件，并将其保存在同一工作目录中。</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="c4fd" class="mq kv iq nd b gy nh ni l nj nk"># install immudb service <br/>sudo ./immudb service immudb install </span><span id="23b9" class="mq kv iq nd b gy nl ni l nj nk"># check current immudb service status <br/>sudo./immudb service immudb status</span><span id="88df" class="mq kv iq nd b gy nl ni l nj nk"># stop immudb service <br/>sudo./immudb service immudb stop</span><span id="4b27" class="mq kv iq nd b gy nl ni l nj nk"># start immudb service <br/>sudo./immudb service immudb start</span></pre><p id="fa1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">immud linux服务使用以下默认值:</p><ul class=""><li id="3211" class="lx ly iq jp b jq jr ju jv jy lz kc ma kg mb kk nm md me mf bi translated">用户:immu</li><li id="6a32" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">组:immu</li><li id="9c6f" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">配置:/etc/immudb</li><li id="48d5" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">data: /var/lib/immudb</li><li id="67e8" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">日志:/var/log/immudb</li><li id="1f11" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">服务端口:3322 (immudb)，3323 (immugw)</li><li id="0cd9" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">普罗米修斯港口:9497</li></ul><h1 id="026d" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">表演</h1><p id="1c7c" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">由于immudb经常被比作Amazon QLDB，我们使用一个简单的演示应用程序来写数据(没有使用任何不公平的优化)，进行了一次性能基准测试。</p><ul class=""><li id="c2fa" class="lx ly iq jp b jq jr ju jv jy lz kc ma kg mb kk nm md me mf bi translated">4个CPU内核</li><li id="20ea" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">英特尔至强处理器E3–1275 V6 @ 3.80 GHz</li><li id="6dde" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">64 GB内存</li><li id="59f9" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">（同solid-statedisk）固态（磁）盘</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/aa67f28947d5646ee8da671fb21226e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/0*H1wdbXpNNHnxEyQD.png"/></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/7a6ce9763e0d29fd640d23de80719bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/0*5xt7PEpW-gVwYD5O.png"/></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/4491980c7207cb8b576e1914e2b8ac6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/0*Fe6AuhS9FSJEY5Gs.png"/></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/6a4441a84faab126eed040c6ad075dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/0*mPwvI8Ii8nEJGea0.png"/></div></figure><h1 id="6bb3" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">普罗米修斯和格拉夫纳监测</h1><p id="a970" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">immudb有一个内置的prometheus exporter，它默认在端口9497 (:9497/metrics)发布所有度量。运行Prometheus实例时，可以像下面这样配置目标:</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="732b" class="mq kv iq nd b gy nh ni l nj nk">- job_name: 'immudbmetrics'<br/>    scrape_interval: 60s<br/>    static_configs:<br/>         - targets: ['my-immudb-server:9497']</span></pre><p id="dd3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有一个Grafana仪表盘:<a class="ae kl" href="https://grafana.com/grafana/dashboards/12026" rel="noopener ugc nofollow" target="_blank">https://grafana.com/grafana/dashboards/12026</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi np"><img src="../Images/5780525a5f85b20a611d4777ecfc8769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4iWhO9LlzyqVgCBQ.png"/></div></div></figure><h1 id="61fc" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">常见使用案例</h1><p id="5309" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">我们已经从用户那里了解了以下使用案例:</p><ul class=""><li id="f467" class="lx ly iq jp b jq jr ju jv jy lz kc ma kg mb kk nm md me mf bi translated">使用immudb不变地存储对现有应用程序数据库的敏感数据库字段(信用卡或银行帐户数据)的每次更新</li><li id="b934" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">将CI/CD配方存储在immudb中，以保护构建和部署管道</li><li id="bf2f" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">将公共证书存储在immudb中</li><li id="5d4f" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">使用immudb作为数字对象校验和的附加哈希存储</li><li id="fd13" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk nm md me mf bi translated">存储防篡改的日志流(即审计日志)</li></ul><p id="bb5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.opvizor.com" rel="noopener ugc nofollow" target="_blank"> Opvizor </a> —适用于VMware vSphere的不可变日志(syslog)解决方案</p><h1 id="9b6e" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">immudb API文档</h1><p id="456b" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">您可以在此找到面向开发人员的快速入门指南:</p><p id="cefc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://docs.immudb.io/master/jumpstart.html" rel="noopener ugc nofollow" target="_blank">https://docs.immudb.io/master/jumpstart.html</a></p><p id="4233" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里还有一个SDK参考:<a class="ae kl" href="https://docs.immudb.io/master/sdks-api.html" rel="noopener ugc nofollow" target="_blank">https://docs.immudb.io/master/sdks-api.html</a></p><h1 id="0015" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">没有程序员？</h1><p id="b9b3" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">实际上，如果您不是程序员，但仍然想使用immudb只是为了在脚本中或周围玩玩，您可以使用immuclient。</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="4c62" class="mq kv iq nd b gy nh ni l nj nk"># Linux<br/>GOOS=linux GOARCH=amd64 make immuclient-static </span><span id="4d2b" class="mq kv iq nd b gy nl ni l nj nk"># Microsoft Windows<br/>GOOS=windows GOARCH=amd64 make immuclient-static</span></pre><p id="21f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您不知道如何构建它，您可以使用下面的Docker命令和过程:</p><p id="3309" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://github.com/codenotary/immudb.git的饭桶克隆<a class="ae kl" href="https://github.com/codenotary/immudb.git" rel="noopener ugc nofollow" target="_blank"/></p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="b2a4" class="mq kv iq nd b gy nh ni l nj nk"># Linux<br/>docker run -it --rm -v $(pwd):/src golang:1.13-stretch sh -c 'cd /src &amp;&amp; GOOS=linux GOARCH=amd64 make immuclient-static'</span><span id="ad8f" class="mq kv iq nd b gy nl ni l nj nk"># Microsoft Windows<br/>docker run -it --rm -v $(pwd):/src golang:1.13-stretch sh -c 'cd /src &amp;&amp; GOOS=windows GOARCH=amd64 make immuclient-static'</span></pre><p id="bc85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您将在存储库文件夹中找到immuclient二进制文件——可以使用了。<em class="nq">。/immuclient - help </em>为您提供了如何使用它的详细信息。</p><h2 id="4659" class="mq kv iq bd kw mr ms dn la mt mu dp le jy mv mw li kc mx my lm kg mz na lq nb bi translated">向immudb添加记录</h2><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="0d8d" class="mq kv iq nd b gy nh ni l nj nk"># same system where immudb server is running<br/>./immuclient safeset mykey myvalue</span><span id="70b9" class="mq kv iq nd b gy nl ni l nj nk"># immudb server runs on a remote system<br/>./immuclient -a &lt;immudb-ip&gt; safeset mykey myvalue</span></pre><p id="d00e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您会收到与此类似的内容:</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="123d" class="mq kv iq nd b gy nh ni l nj nk">./immuclient safeset k1 v1<br/>index: 307<br/>key: k1<br/>value: v1<br/>hash: 4a6a18172eba5a3ea49a3caf147ac405c874ed4c922cc7dafe0dce5ff85f35aa<br/>time: 2020–05–13 04:01:30 -0400 EDT<br/>verified: true</span></pre><h2 id="5117" class="mq kv iq bd kw mr ms dn la mt mu dp le jy mv mw li kc mx my lm kg mz na lq nb bi translated">从immudb获取记录</h2><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="e621" class="mq kv iq nd b gy nh ni l nj nk"># same system where immudb server is running<br/>./immuclient safeget mykey</span><span id="4603" class="mq kv iq nd b gy nl ni l nj nk"># get the value history<br/>./immuclient history mykey</span><span id="d5a9" class="mq kv iq nd b gy nl ni l nj nk"># immudb server runs on a remote system<br/>./immuclient -a &lt;immudb-ip&gt; safeget mykey</span></pre><p id="8a33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">safeGet和safeSet命令也对值进行一致性检查。</p><p id="33e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以存储任何类型的数据，如敏感数据库字段的内容、公共证书甚至配置文件。</p><p id="0f7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们尝试使用本地docker文件，并确保我们的值中没有新行或特殊字符。</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="fea6" class="mq kv iq nd b gy nh ni l nj nk">./immuclient safeset Dockerfile1 $(echo -n "$(cat Dockerfile)" | base64 -w 0)</span></pre><p id="7d3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要取回数据，您需要确保再次转换它。</p><p id="ae81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为safeget的输出不仅仅包含值，如下所示:</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="501a" class="mq kv iq nd b gy nh ni l nj nk">./immuclient safeget Dockerfile1<br/>index:          309<br/>key:            Dockerfile1<br/>value:          RlJPTSBnb2xhbmc6MS4xMy1zdHJldGNoIGFzIGJ1aWxkCldPUktESVIgL3NyYwpDT1BZIC4gLgpSVU4gR09PUz1saW51eCBHT0FSQ0g9YW1kNjQgbWFrZSBpbW11YWRtaW4tc3RhdGljCkZST00gdWJ1bnR1OjE4LjA0Ck1BSU5UQUlORVIgdkNoYWluLCBJbmMuICA8aW5mb0B2Y2hhaW4udXM+CgpDT1BZIC0tZnJvbT1idWlsZCAvc3JjL2ltbXVhZG1pbiAvdXNyL2xvY2FsL2Jpbi9pbW11YWRtaW4KCkFSRyBJTU1VX1VJRD0iMzMyMiIKQVJHIElNTVVfR0lEPSIzMzIyIgoKRU5WIElNTVVBRE1JTl9JTU1VREItQUREUkVTUz0iMTI3LjAuMC4xIiBcCiAgICBJTU1VQURNSU5fSU1NVURCLVBPUlQ9IjMzMjIiIFwKICAgIElNTVVEQl9NVExTPSJmYWxzZSIgCgpSVU4gYWRkZ3JvdXAgLS1zeXN0ZW0gLS1naWQgJElNTVVfR0lEIGltbXUgJiYgXAogICAgYWRkdXNlciAtLXN5c3RlbSAtLXVpZCAkSU1NVV9VSUQgLS1uby1jcmVhdGUtaG9tZSAtLWluZ3JvdXAgaW1tdSBpbW11ICYmIFwKICAgIGNobW9kICt4IC91c3IvbG9jYWwvYmluL2ltbXVhZG1pbgoKVVNFUiBpbW11CkVOVFJZUE9JTlQgWyIvdXNyL2xvY2FsL2Jpbi9pbW11YWRtaW4iXQ==<br/>hash:           dfca217e2d87dccb8fd3fe8c1b49e620cc4ece8dc9c9fc2384cb6f6c9617eddb<br/>time:           2020-05-13 05:19:19 -0400 EDT<br/>verified:       true</span></pre><p id="bb0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个命令有点复杂</p><pre class="kn ko kp kq gt nc nd ne nf aw ng bi"><span id="2aec" class="mq kv iq nd b gy nh ni l nj nk">./immuclient safeget Dockerfile1 | grep "^value" | cut -d":" -f2 | xargs echo -n | base64 -di</span></pre><p id="f29b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样—如此简单直接地存储防篡改数据，包括所有以前的状态(版本)。</p></div></div>    
</body>
</html>