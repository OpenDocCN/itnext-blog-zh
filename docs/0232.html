<html>
<head>
<title>Concurrency comparison between NGINX-unit and uWSGI (python3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NGINX-unit和uWSGI (python3)的并发性比较</h1>
<blockquote>原文：<a href="https://itnext.io/performance-comparison-between-nginx-unit-and-uwsgi-python3-4511fc172a4c?source=collection_archive---------0-----------------------#2018-01-18">https://itnext.io/performance-comparison-between-nginx-unit-and-uwsgi-python3-4511fc172a4c?source=collection_archive---------0-----------------------#2018-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d7b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fperformance-comparison-between-nginx-unit-and-uwsgi-python3–4511fc172a4c" rel="noopener ugc nofollow" target="_blank"> <em class="km">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="715f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文将展示两个web应用服务器<strong class="jp ir"> nginx-unit </strong>(一个新的现代应用web服务器)和<strong class="jp ir"> uWSGI </strong>(最佳应用服务器)的性能</p><p id="b2b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://unit.nginx.org" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">nginx-unit</strong></a>—nginx公司推出的新型应用服务器。它还在<em class="km">测试版</em>中<strong class="jp ir">没有用于生产</strong>使用。</p><p id="3795" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="http://uwsgi-docs.readthedocs.io/en/latest" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> uWSGI </strong> </a> —我所知道的最好的python应用服务器之一。这是一个用C/C++写的老项目，性能很好，里面有很多配置参数。这台服务器<strong class="jp ir">准备生产</strong>使用。</p><p id="5a90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">uWSGI和nginx-因为测试系统有4个内核，所以配置了4个工作人员。</p><h1 id="4649" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">Python测试应用的源代码，uWSGI.ini和unit.json</h1><ul class=""><li id="174f" class="ll lm iq jp b jq ln ju lo jy lp kc lq kg lr kk ls lt lu lv bi translated">简单的WSGI <a class="ae kl" href="http://flask.pocoo.org" rel="noopener ugc nofollow" target="_blank">烧瓶</a>应用程序。只需返回Hello World</li></ul><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="mb mc l"/></div></figure><ul class=""><li id="9f08" class="ll lm iq jp b jq jr ju jv jy md kc me kg mf kk ls lt lu lv bi translated">nginx-单元配置json文件</li></ul><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="mb mc l"/></div></figure><ul class=""><li id="9c3d" class="ll lm iq jp b jq jr ju jv jy md kc me kg mf kk ls lt lu lv bi translated">uWSGI配置文件</li></ul><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="72a4" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">测试准备</h1><ul class=""><li id="0429" class="ll lm iq jp b jq ln ju lo jy lp kc lq kg lr kk ls lt lu lv bi translated">将nginx-unit配置应用到守护进程(unitd应该在之前启动)</li></ul><pre class="lw lx ly lz gt mg mh mi mj aw mk bi"><span id="eceb" class="ml ko iq mh b gy mm mn l mo mp">curl -v -X PUT -d @unit.json --unix-socket ./control.unit.sock <a class="ae kl" href="http://localhost" rel="noopener ugc nofollow" target="_blank">http://localhost</a></span></pre><ul class=""><li id="0d0f" class="ll lm iq jp b jq jr ju jv jy md kc me kg mf kk ls lt lu lv bi translated">启动uwsgi守护程序</li></ul><pre class="lw lx ly lz gt mg mh mi mj aw mk bi"><span id="106c" class="ml ko iq mh b gy mm mn l mo mp">uwsgi --ini uwsgi.ini</span></pre><p id="0687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> ab </strong>将用于负载测试。示例:</p><pre class="lw lx ly lz gt mg mh mi mj aw mk bi"><span id="bb55" class="ml ko iq mh b gy mm mn l mo mp">ab -n 10000 -c 500 <a class="ae kl" href="http://127.0.0.1:8400/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8400/</a></span></pre><h1 id="09f8" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">测试案例</h1><ul class=""><li id="456a" class="ll lm iq jp b jq ln ju lo jy lp kc lq kg lr kk ls lt lu lv bi translated">10K请求总数</li><li id="0bf2" class="ll lm iq jp b jq mq ju mr jy ms kc mt kg mu kk ls lt lu lv bi translated">总共100K个请求</li><li id="d3b7" class="ll lm iq jp b jq mq ju mr jy ms kc mt kg mu kk ls lt lu lv bi translated">将并发设置为50到500</li></ul><p id="bb53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="km">结果</em> </strong> —显示并发数与每秒请求数之比的图表。</p><h1 id="e624" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">测试结果</h1><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mv"><img src="../Images/97ea3a762bbc4288eb8a13aecd6c758c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BrSWiVsBNZammJzIBc3SLA.png"/></div></div></figure><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nc"><img src="../Images/468edb17d1448c81d74bc942203e01c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*coZq1ZYJhs8FkEz4XnF62g.png"/></div></div></figure><h1 id="9b52" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">结论</h1><p id="d225" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy nd ka kb kc ne ke kf kg nf ki kj kk ij bi translated">nginx-unit 仍处于测试阶段，但比uWSGI性能更好。它仍然不适合生产使用，但它适合个人用途和内部使用。对于同时开发多个应用程序的web开发人员来说，这是一个很好的解决方案。适合测试。nginx-unit允许在同一时间混合后端，并把它放到不同的端口。让我们等待RC并开始在生产环境中测试它。</p><h1 id="5529" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">奖金</h1><p id="323f" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy nd ka kb kc ne ke kf kg nf ki kj kk ij bi translated">并发比较<strong class="jp ir"> python </strong>和<strong class="jp ir">通过</strong>nginx-unit</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/7749c9458384d6cfc65082ead5a6e514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-SA_KuLJQA9xswHj8b3Iw.png"/></div></div></figure><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nh"><img src="../Images/ca45839cabc333d0b81cf6975a8d94d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zvgmn_HM3zUfFv6Iov3Clw.png"/></div></div></figure><p id="f1f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽情享受吧！</p></div></div>    
</body>
</html>