<html>
<head>
<title>(Part IX.) Using design patterns and custom attributes in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">(第九部分。)在Unity中使用设计模式和定制属性</h1>
<blockquote>原文：<a href="https://itnext.io/part-ix-using-design-patterns-and-custom-attributes-in-unity-63969a946b80?source=collection_archive---------2-----------------------#2020-05-29">https://itnext.io/part-ix-using-design-patterns-and-custom-attributes-in-unity-63969a946b80?source=collection_archive---------2-----------------------#2020-05-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/700bfac729d32753ed43dc023aae2eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ISo6VCAxCo77-2Tm"/></div></div></figure><p id="f9ca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi kz translated">当你在做一个长期项目时，保持事物整洁、有序和可扩展是至关重要的。让我们来看看有助于此的3种设计模式——观察者、状态和命令模式。就属性而言，它将是标题和范围修饰符。</p><h1 id="c179" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">设计模式</h1><h2 id="5e44" class="mg lj it bd lk mh mi dn lo mj mk dp ls km ml mm lw kq mn mo ma ku mp mq me mr bi translated">观察者模式</h2><blockquote class="ms mt mu"><p id="cc52" class="kb kc mv kd b ke kf kg kh ki kj kk kl mw kn ko kp mx kr ks kt my kv kw kx ky im bi translated">观察者模式是一种软件设计模式，在这种模式中，一个名为subject的对象维护一个名为observer的依赖者列表，并自动通知它们任何状态变化，通常是通过调用它们的方法之一。—维基百科</p></blockquote><p id="277d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我创建一个模型场景。观察者模式由主体和观察者组成。</p><p id="46f0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">举个例子，我有3个观察者——刚体<em class="mv">汽车</em>，一旦玩家走过主题，<em class="mv">立方体</em>触发，它们将向任一方向移动。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/4e3f406f0aa71eaebe3900f5533727e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-ukb49Bsnd1MqFYh0QYzg.png"/></div></div></figure><p id="a501" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我将创建一个观察者和主题类。Observer是抽象接口，因为许多对象必须自己实现它的功能。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/0b0b11daabeca614f77df6baa7331626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJ3mfoPyOrRtGfknbmHLAg.png"/></div></div></figure><p id="22c5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Subject拥有一个关于它最终将通知的所有观察者的列表。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/ee60ee2839b4469a45306c5d5f04fe4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kngJ7aOYkV1dJmgYVkiyRw.png"/></div></div></figure><p id="52c6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一切都由游戏控制器控制。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/844ba1bf05af71d5bced32bab2cf8c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CHPNdDTlsJfm4yO0TQlh5A.png"/></div></div></figure><p id="2e83" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我需要汽车类:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/5dc6dd28d49e3985e544c33850d4cfd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a9gOjHgMHDDI9zeGC0xEkQ.png"/></div></div></figure><p id="493c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我需要关心的事:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/d37c4d3065adbaac5088bf8660a662bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y48cdC5noujLXwFw2X-aCw.png"/></div></div></figure><p id="a622" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我需要做的最后一件事是将汽车对象分配给游戏控制器(触发器立方体持有它):</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9fa91cda37b98bc172cc7940209e350e.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*SEAq-8mTz2QyP9vaF3DAMg.png"/></div></figure><p id="1c7f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，当我输入触发器时，汽车将按照我分配给它们的移动函数指定的方式移动(向左、向上、向后移动):</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/f0e67396d8a4b959e8a098547c9d08b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iS_tMM5LalrXIkUeEBCG_A.gif"/></div></div></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="ff28" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你刚刚开始学习如何开发游戏，你可以关注我的udemy初学者Unity开发课程:</p><div class="nr ns gp gr nt nu"><a href="https://www.udemy.com/course/make-a-3d-game-in-unity-2020-from-scratch-with-free-assets/?referralCode=8B96F6C67527AEEA39D9" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">完整指南:Unity 2020中的动作恐怖3D游戏</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">大家好，我叫Jan Jileč ek，是一名拥有计算机科学硕士学位的专业游戏开发人员，我…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">www.udemy.com</p></div></div><div class="od l"><div class="oe l of og oh od oi jz nu"/></div></div></a></div></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h2 id="5ecc" class="mg lj it bd lk mh mi dn lo mj mk dp ls km ml mm lw kq mn mo ma ku mp mq me mr bi translated">命令模式</h2><blockquote class="ms mt mu"><p id="8043" class="kb kc mv kd b ke kf kg kh ki kj kk kl mw kn ko kp mx kr ks kt my kv kw kx ky im bi translated">命令模式是一种行为设计模式，其中使用一个对象来封装执行一个动作或在以后触发一个事件所需的所有信息。这些信息包括方法名称、拥有该方法的对象以及方法参数的值。—维基百科</p></blockquote><p id="ff74" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于像控制键绑定这样的事情非常有用。如果不使用<em class="mv">命令模式</em>，控制键的实现将如下所示:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/8d80f8989b9c0e58b78db84abfacb1d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wTVJPDXtoIksCE9e4k5IA.png"/></div></div></figure><p id="19a3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你有20个键分配给不同的游戏功能，而你需要重新绑定其中的一个，该怎么办？你需要重写整本书。现在是利用<strong class="kd iu">命令模式的时候了。</strong></p><p id="0f0f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先定义一个抽象接口:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/a4170626a94fc26cbe0bbc592d275ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9Z19L11OAdq35JsxIeuPA.png"/></div></div></figure><p id="1282" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">准备函数类:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/352e494a6e191a74c6916e4d0757c8d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sZSDxkcbfouwuDXpXrU58w.png"/></div></div></figure><p id="840f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，只要您需要为一个键使用不同的函数，您就可以调用Execute函数并根据需要交换该函数。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ok"><img src="../Images/7c055c6323c154e823b380524f13cd27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xeLvcIreaOT-LRaehPpEdA.png"/></div></div></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h2 id="516d" class="mg lj it bd lk mh mi dn lo mj mk dp ls km ml mm lw kq mn mo ma ku mp mq me mr bi translated">状态模式</h2><blockquote class="ms mt mu"><p id="46c7" class="kb kc mv kd b ke kf kg kh ki kj kk kl mw kn ko kp mx kr ks kt my kv kw kx ky im bi translated">状态模式是一种行为软件设计模式，它允许对象在其内部状态改变时改变其行为。这种模式接近于有限状态机的概念。状态模式可以解释为策略模式，它能够通过调用模式接口中定义的方法来切换策略。—维基百科</p></blockquote><p id="9bee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你有一个想要控制多个状态的对象，你将需要一个<em class="mv">有限状态机</em>来区分所有可能发生的情况。</p><p id="4ae0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们先创建一个敌人接口类。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/14a534367a3d7ef37e1dae9ba3211b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oqgTQpl3h42K_-_yY6OVuA.png"/></div></div></figure><p id="9ca4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后是阿尔法和贝塔的敌人:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/ef901f6702ce78ed0c712638cb4e582d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s55uEd_8gtGJ0qQozlIx3Q.png"/></div></div></figure><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/f950b4898364a6d2c29120e4e4384ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CibHPslt_E2dLvsrOmUoAg.png"/></div></div></figure><p id="b986" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">和一个控制一切的游戏控制器。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi on"><img src="../Images/a0f46eb9a48243f8f88522b7dd8fb450.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aVlEHKWXX9Xl19ShdNlVDg.png"/></div></div></figure><p id="173a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在状态将在敌人接口的继承成员中保持一致，并且将来很容易对状态机进行更改。</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="3166" class="li lj it bd lk ll oo ln lo lp op lr ls lt oq lv lw lx or lz ma mb os md me mf bi translated">Unity C#属性和代码组织</h1><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8b4e73340a1a2ef971ab9d8c8f2ba903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I5GCdPxRlL9p0yHO"/></div></div></figure><p id="9d46" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Unity中，您肯定已经尝试过这样的事情:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ot"><img src="../Images/aad2640fa708a32f5609b71f8b7e00da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g97vTp_zWqN_qfM8dCHbhg.png"/></div></div></figure><p id="86a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mv">范围属性</em>在相关对象/脚本的Unity检查器中创建一个滑动条，标题会整齐地划分变量。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/18089a78084cc573ca14c6ab7066cfca.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*0ORfk8fKK9cU2tihEOY5eg.png"/></div></figure><p id="df43" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是属性比这个有用得多。</p><p id="9bf9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">另一个很好的用途是，您可以检索应用该属性的字段和类的列表。这意味着你不需要直接引用对象！</p><p id="97b3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这在准备游戏的本地化和翻译时非常有用，因为你可能有成百上千的字符串需要翻译。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ov"><img src="../Images/421efdd62d8540ef1141ceeec60fda06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2aCiBhPEF6sTr5Ph9IhmHw.png"/></div></div></figure><p id="f911" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后你可以这样使用它:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ow"><img src="../Images/532fc0e8e295874463550aa339d3f02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aoV68FmNH3QlYb9xq5Hx4g.png"/></div></div></figure><p id="8aac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">稍后，当您需要添加翻译时，您可以简单地搜索所有标有<em class="mv"> ModularText </em>属性的对象，并设置翻译后的文本:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ox"><img src="../Images/9878276aac6fa9ea4d2cb9cb76dc1228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tQvYIbq8KqKAE5AEetn-ag.png"/></div></div></figure><p id="8e52" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如你所想象的，这个方法是编写任何UI元素的天赐之物，需要很多额外的功能(工具提示等)。).</p><p id="e9ed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我在我的<a class="ae oy" href="https://github.com/janjilecek/unity_tutorial/commit/7a0f090d8d22c0ab4a45582753684a3446a18e60" rel="noopener ugc nofollow" target="_blank"> github </a>上提供了这篇文章的代码。</p><p id="f856" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">也可以看看我的gamedev系列的前几部分！:)</p><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/setting-up-high-definition-render-pipeline-in-unity-68ed41062371"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">在Unity中设置高清渲染管道</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">我们将看看全球和本地HDRP卷，并修补后处理和雾。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">itnext.io</p></div></div><div class="od l"><div class="oz l of og oh od oi jz nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/limbo-style-menu-in-unity-4fe3fdee3420"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">Unity中的Limbo风格菜单</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">在本教程中，我将复制2010年著名游戏《地狱边缘》的菜单风格:</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">itnext.io</p></div></div><div class="od l"><div class="pa l of og oh od oi jz nu"/></div></div></a></div><p id="bd47" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">明天的部分将是系列的最后一部分，我将完成我们一直在创造的项目的游戏设计和视觉风格。</p></div></div>    
</body>
</html>