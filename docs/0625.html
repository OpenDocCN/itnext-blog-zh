<html>
<head>
<title>Building RESTful Web APIs with Node.js, Express, MongoDB and TypeScript — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js、Express、MongoDB和TypeScript构建RESTful Web APIs第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-2-98c34e3513a2?source=collection_archive---------0-----------------------#2018-04-20">https://itnext.io/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-2-98c34e3513a2?source=collection_archive---------0-----------------------#2018-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/7f972589990eaeaee66d122279b1f756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*zqYX65vs5rAzw2SweoCshg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">(图片来自OctoPerf)</figcaption></figure><p id="d089" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有一个关于<a class="ae kw" href="https://www.lynda.com/Node-js-tutorials/Next-steps/633869/671263-4.html" rel="noopener ugc nofollow" target="_blank">如何在Lynda </a>上构建Web APIs的课程，但是他们没有使用TypeScript。所以我决定用TypeScript做一个。这个项目中有许多需要改进的地方。如果你找到了，请留下评论。我很感激。)</p><p id="3fd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-1-2-195bdaf129cf" rel="noopener"> <strong class="ka ir">第一部分:设置项目</strong> </a></p><p id="4cf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-2-98c34e3513a2" rel="noopener"> <strong class="ka ir">第二部分:实现路由和CRUD </strong> </a></p><p id="2ebf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-3-d545b243541e" rel="noopener"> <strong class="ka ir">第3部分:为Web APIs使用控制器和模型</strong> </a></p><p id="7273" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-4-954c8c059cd4" rel="noopener"> <strong class="ka ir">第4部分:将Web APIs连接到MongoDB或其他</strong> </a></p><p id="fcc3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-5-a80e5a7f03db" rel="noopener"> <strong class="ka ir">第5部分:我们的Web APIs的安全性</strong> </a></p><p id="9bb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/building-a-serverless-restful-api-with-cloud-functions-firestore-and-express-f917a305d4e6"> <strong class="ka ir">奖励:用云函数、Firestore和Express </strong> </a>构建“无服务器”RESTful API</p><p id="1166" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/handling-long-running-api-requests-in-nodejs-403bd566d47"> <strong class="ka ir">奖励:在Nodejs </strong> </a>中处理长时间运行的API请求</p><p id="130e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在第2部分中，我将为API构建路由。</p><p id="d9fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤1:创建用于路由的TS文件</strong></p><p id="3f54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">记得在这个项目的第一部分。我们将所有内容保存在<strong class="ka ir"> lib </strong>文件夹中。因此，我将使用名为<strong class="ka ir"> crmRoutes.ts </strong>的文件创建<strong class="ka ir"> routes </strong>文件夹，该文件将保存这个项目的所有路线。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="b3dd" class="lg lh iq lc b gy li lj l lk ll">// /lib/routes/crmRoutes.ts</span><span id="66e8" class="lg lh iq lc b gy lm lj l lk ll">import {Request, Response} from "express";<br/><br/>export class Routes {       <br/>    public routes(app): void {          <br/>        app.route('/')<br/>        .get((req: Request, res: Response) =&gt; {            <br/>            res.status(200).send({<br/>                message: 'GET request successfulll!!!!'<br/>            })<br/>        })               <br/>    }<br/>}</span></pre><p id="b2c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建完第一条路径后，我们需要将其导入到<strong class="ka ir"> lib/app.ts </strong>中。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a2bb" class="lg lh iq lc b gy li lj l lk ll">// /lib/app.ts</span><span id="e335" class="lg lh iq lc b gy lm lj l lk ll">import * as express from "express";<br/>import * as bodyParser from "body-parser";<br/><strong class="lc ir">import { Routes } from "./routes/crmRoutes";</strong><br/><br/>class App {<br/><br/>    public app: express.Application;<br/>    <strong class="lc ir">public routePrv: Routes = new Routes();</strong><br/>    <br/>    constructor() {<br/>        this.app = express();<br/>        this.config();        <br/>        <strong class="lc ir">this.routePrv.routes(this.app);</strong>     <br/>    }<br/><br/>    private config(): void{<br/>        this.app.use(bodyParser.json());<br/>        this.app.use(bodyParser.urlencoded({ extended: false }));<br/>    }<br/>}</span></pre><p id="5693" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以直接或通过使用<a class="ae kw" href="https://www.getpostman.com/apps" rel="noopener ugc nofollow" target="_blank"> Postman </a>向您的应用程序(http://localhost:3000)发送GET请求。</p><p id="82b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二步:为Web APIs构建CRUD</strong></p><p id="2bed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我假设您对HTTP请求(GET、POST、PUT和DELETE)有基本的了解。如果没有，那很简单:</p><ul class=""><li id="9abf" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">获取:用于检索数据</li><li id="fbb3" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">发布:用于创建新数据</li><li id="a39f" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">PUT:用于更新数据</li><li id="ff90" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">删除:用于删除数据</li></ul><p id="dc85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们将为构建联系人CRM构建路由，以便保存、检索、更新和删除联系人信息。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="45ed" class="lg lh iq lc b gy li lj l lk ll">// /lib/routes/crmRoutes.ts</span><span id="f2c8" class="lg lh iq lc b gy lm lj l lk ll">import {Request, Response} from "express";<br/><br/>export class Routes {    <br/>    <br/>    public routes(app): void {   <br/>        <br/>        app.route('/')<br/>        .get((req: Request, res: Response) =&gt; {            <br/>            res.status(200).send({<br/>                message: 'GET request successfulll!!!!'<br/>            })<br/>        })<br/>        <br/>        // Contact <br/>        app.route('/contact') <br/>        // GET endpoint <br/>        .get((req: Request, res: Response) =&gt; {<br/><strong class="lc ir">        // Get all contacts</strong>            <br/>            res.status(200).send({<br/>                message: 'GET request successfulll!!!!'<br/>            })<br/>        })        <br/>        // POST endpoint<br/>        .post((req: Request, res: Response) =&gt; {   <br/><strong class="lc ir">        // Create new contact</strong>         <br/>            res.status(200).send({<br/>                message: 'POST request successfulll!!!!'<br/>            })<br/>        })<br/><br/>        // Contact detail<br/>        app.route('/contact/:contactId')<br/>        // get specific contact<br/>        .get((req: Request, res: Response) =&gt; {<br/><strong class="lc ir">        // Get a single contact detail</strong>            <br/>            res.status(200).send({<br/>                message: 'GET request successfulll!!!!'<br/>            })<br/>        })<br/>        .put((req: Request, res: Response) =&gt; {<br/><strong class="lc ir">        // Update a contact</strong>           <br/>            res.status(200).send({<br/>                message: 'PUT request successfulll!!!!'<br/>            })<br/>        })<br/>        .delete((req: Request, res: Response) =&gt; {       <br/><strong class="lc ir">        // Delete a contact</strong>     <br/>            res.status(200).send({<br/>                message: 'DELETE request successfulll!!!!'<br/>            })<br/>        })<br/>    }<br/>}</span></pre><p id="7e88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，路由已经准备好接收HTTP请求了。这是<a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-2-98c34e3513a2" rel="noopener">的结尾<strong class="ka ir">第二部</strong>的结尾</a>。我将在短期内更新<a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-3-d545b243541e" rel="noopener"> <strong class="ka ir">部分3</strong></a><a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-4-954c8c059cd4" rel="noopener"><strong class="ka ir">部分</strong> <strong class="ka ir">部分4 </strong> </a> <strong class="ka ir">和</strong> <a class="ae kw" href="https://medium.com/@dalenguyen/building-restful-web-apis-with-node-js-express-mongodb-and-typescript-part-5-a80e5a7f03db" rel="noopener"> <strong class="ka ir">部分5 </strong> </a> <strong class="ka ir"> </strong>。以防你需要跳过一个头。请访问我的<a class="ae kw" href="https://github.com/dalenguyen/rest-api-node-typescript" rel="noopener ugc nofollow" target="_blank"> github库</a>获取完整代码。</p><div class="mb mc gp gr md me"><a href="https://github.com/dalenguyen/rest-api-node-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fo"><div class="mg ab mh cl cj mi"><h2 class="bd ir gy z fp mj fr fs mk fu fw ip bi translated">GitHub-dalen guyen/rest-API-node-typescript:用Node.js构建RESTful Web APIs，Express…</h2><div class="ml l"><h3 class="bd b gy z fp mj fr fs mk fu fw dk translated">这是一个简单的API，保存人们的联系信息。这个项目有两个版本。1.0.0版:您可以…</h3></div><div class="mm l"><p class="bd b dl z fp mj fr fs mk fu fw dk translated">github.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms js me"/></div></div></a></div><p id="24c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://twitter.com/dale_nguyen" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">在Twitter上关注我</strong> </a>了解Angular、JavaScript &amp; WebDevelopment的最新内容👐</p></div></div>    
</body>
</html>