<html>
<head>
<title>Learn Dart #5: Read and write files in under 30 seconds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习Dart #5:在30秒内读写文件</h1>
<blockquote>原文：<a href="https://itnext.io/learn-dart-5-read-and-write-files-in-under-30-seconds-9adbf9351ef2?source=collection_archive---------0-----------------------#2018-11-01">https://itnext.io/learn-dart-5-read-and-write-files-in-under-30-seconds-9adbf9351ef2?source=collection_archive---------0-----------------------#2018-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a1d7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何在这个紧凑的指南中快速读写文件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cb67bef26bead9fc878df8c23a0c54d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZwWUzM5eFodADo3hfp6tUQ.png"/></div></div></figure><p id="cf65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在今天的快速技巧中，我们将了解在Dart中读写文件是多么容易。我们将使用‘dart:io’库的<code class="fe ln lo lp lq b">File</code>对象来实现这一点。</p><p id="ebd2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，用stagehand生成<strong class="kt ir">控制台全</strong>项目:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="0082" class="lv lw iq lq b gy lx ly l lz ma">$ mkdir my_app &amp;&amp; cd my_app<br/>$ <strong class="lq ir">stagehand console-full</strong></span></pre><p id="baa8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">查看以下视频中的解决方案:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="7278" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是完整的解决方案:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="618e" class="lv lw iq lq b gy lx ly l lz ma"><strong class="lq ir">import 'dart:io';</strong><br/><br/>main() async {<br/>  var <strong class="lq ir">file</strong> = <strong class="lq ir">File</strong>('data.txt');<br/>  var contents;<br/><br/>  if (<strong class="lq ir">await file.exists()</strong>) {<br/>    // Read file<br/>    contents = <strong class="lq ir">await file.readAsString()</strong>;<br/>    print(contents);<br/><br/>    // Write file<br/>    var fileCopy = <strong class="lq ir">await File('data-copy.txt').writeAsString(contents)</strong>;<br/>    print(await fileCopy.exists());<br/>    print(await fileCopy.length());<br/>  }<br/>}</span></pre><p id="3949" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以及<a class="ae md" href="http://bit.ly/2qpAXKt" rel="noopener ugc nofollow" target="_blank">源代码</a>。</p><h1 id="0f8f" class="me lw iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">扩展示例</h1><h2 id="67c7" class="lv lw iq bd mf mv mw dn mj mx my dp mn la mz na mp le nb nc mr li nd ne mt nf bi translated">1.如何更好地指定文件路径</h2><p id="452a" class="pw-post-body-paragraph kr ks iq kt b ku ng jr kw kx nh ju kz la ni lc ld le nj lg lh li nk lk ll lm ij bi translated">通过将依赖项添加到您的<code class="fe ln lo lp lq b">pubspec.yaml</code>文件来安装<code class="fe ln lo lp lq b">path</code>包:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="2067" class="lv lw iq lq b gy lx ly l lz ma">dependencies:<br/>  path: ^1.6.2</span></pre><p id="b6ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并且在你的终端里运行<code class="fe ln lo lp lq b">pub get</code>。</p><p id="1e6c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将它导入到<code class="fe ln lo lp lq b">bin/main.dart</code>的顶部，并修改路径如下:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="ea4e" class="lv lw iq lq b gy lx ly l lz ma">import 'dart:io';<br/><strong class="lq ir">import 'package:path/path.dart';</strong><br/><br/>void main() async {<br/>  var pathToFile = <strong class="lq ir">join(dirname(Platform.script.toFilePath()), '..', 'data.txt')</strong>;<br/>  var file = File(pathToFile);<br/>  ..<br/>  ..<br/>}</span></pre><h2 id="039d" class="lv lw iq bd mf mv mw dn mj mx my dp mn la mz na mp le nb nc mr li nd ne mt nf bi translated">2.如何逐行读取文件</h2><p id="96e1" class="pw-post-body-paragraph kr ks iq kt b ku ng jr kw kx nh ju kz la ni lc ld le nj lg lh li nk lk ll lm ij bi translated">我们可以创建一个读取流来处理文件:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="6349" class="lv lw iq lq b gy lx ly l lz ma"><strong class="lq ir">import 'dart:convert';</strong> // Contains the `Utf8Decoder` and `LineSplitter` stream transformers<br/>..<br/>..<br/>  if (await file.exists()) {<br/>    // Read file<br/>    <strong class="lq ir">contents = StringBuffer();</strong><br/>    <strong class="lq ir">var contentStream = file.openRead()</strong>;<br/><br/>    <strong class="lq ir">contentStream<br/>      .transform</strong>(Utf8Decoder())<br/>      <strong class="lq ir">.transform</strong>(LineSplitter())<br/>      <strong class="lq ir">.listen</strong>((String line) =&gt; <strong class="lq ir">contents.write(line)</strong>, // Add line to our StringBuffer object<br/>        onDone: () =&gt; print(contents.toString()), // Call toString() method to receive the complete data<br/>        onError: (e) =&gt; print('[Problems]: $e'));<br/>    ..<br/>    ..<br/>  }<br/>..<br/>..</span></pre><p id="996d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个很好的用例是处理包含环境变量的文件，如下所示:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="7657" class="lv lw iq lq b gy lx ly l lz ma">PORT=8080<br/>API_KEY=lkjsk453lkslfkl5<br/>API_USER=jermaineo</span></pre></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="8f82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请在评论中留下您的反馈，并让我知道您希望看到接下来演示什么！</p><p id="6f2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">订阅</strong><a class="ae md" href="https://www.youtube.com/channel/UCHSRZk4k6e-hqIXBBM4b2iA?view_as=subscriber" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">Youtube频道</strong> </a> <strong class="kt ir">了解Dart </strong>上即将推出的视频。谢谢！</p><p id="382f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">喜欢，分享和关注我😍有关Dart的更多内容。</p><p id="ac38" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">延伸阅读:</p><ol class=""><li id="fdef" class="ns nt iq kt b ku kv kx ky la nu le nv li nw lm nx ny nz oa bi translated"><a class="ae md" href="https://api.dartlang.org/stable/2.0.0/dart-io/File-class.html" rel="noopener ugc nofollow" target="_blank">文件类</a></li><li id="6e9c" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae md" href="https://dev.to/graphicbeacon/Free%20Dart%20Screencasts%20on%20Egghead.io" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">免费飞镖截屏在Egghead.io </strong> </a></li></ol></div></div>    
</body>
</html>