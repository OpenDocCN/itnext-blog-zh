<html>
<head>
<title>A Ruby Cheatsheet For Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数组的Ruby备忘单</h1>
<blockquote>原文：<a href="https://itnext.io/a-ruby-cheatsheet-for-arrays-c8e5275155b5?source=collection_archive---------1-----------------------#2019-08-15">https://itnext.io/a-ruby-cheatsheet-for-arrays-c8e5275155b5?source=collection_archive---------1-----------------------#2019-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="61bc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">初学者和健忘的专业人士的参考</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/036dd467424e8be7878f3d5307acfbe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8A9itcEe3TWtMz4x_so3g.png"/></div></div></figure><p id="6025" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简单地说，在你面前有大量方便的Ruby数组方法。它很长，但我试图包括所有真正有用的东西。当使用一种方法时，一定要检查文档以获得更多信息。为了简短起见，我将在注释中写返回值，所以<code class="fe lr ls lt lu b">arr # -&gt; "stuff"</code>意味着<code class="fe lr ls lt lu b">arr</code>的返回值是<code class="fe lr ls lt lu b">“stuff”</code>。</p><h1 id="ea8b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">创建数组</h1><p id="e92b" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><strong class="kw iu">创建一个新的空数组:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.5.0/Array.html#method-i-each_index" rel="noopener ugc nofollow" target="_blank">数组#new </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="c47d" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr </strong>= []<br/><strong class="lu iu">arr2</strong> = <strong class="lu iu">Array.</strong>new<strong class="lu iu">     </strong></span></pre><p id="9c22" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">用值创建一个新数组:</strong></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="c528" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr_with_stuff</strong> = [<em class="lq">"value"</em>, "<em class="lq">separated</em> <em class="lq">by</em> <em class="lq">comma</em>"] <br/><strong class="lu iu">arr_with_stuff2</strong> = <strong class="lu iu">Array</strong>.new(["<em class="lq">a"</em>, "<em class="lq">b</em>", "<em class="lq">c</em>"])<br/><strong class="lu iu">range_to_arr</strong> = (1..9).to_a </span></pre><p id="7f4c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">创建重复值数组:</strong>有时用多个重复值填充数组会很有帮助:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="d0e2" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = <strong class="lu iu">Array</strong>.new(5, " ")<br/># -&gt; [" ", " ", " ", " ", " "]</span></pre><p id="5bd6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">使用快捷方式创建字符串数组:</strong>使用<code class="fe lr ls lt lu b">%w</code>快捷方式创建不带引号或逗号的字符串数组:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="94fb" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = <strong class="lu iu">%w</strong>(cat dog mouse 1 2)<br/><em class="lq"># -&gt;</em> [<em class="lq">"cat", "dog", "mouse"</em>, "<em class="lq">1</em>", "<em class="lq">2</em>"]</span></pre><p id="553e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">将字符串转换成数组:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.4.0/String.html#method-i-split" rel="noopener ugc nofollow" target="_blank"> #split </a>将一个字符串拆分成一个数组。它需要一个字符串参数来决定在哪里拆分数组项，否则就按空格拆分。要单独获取每个字符，请指定<code class="fe lr ls lt lu b">“”</code>作为参数:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="1e27" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = "this is a string”.split <br/><strong class="lu iu">arr</strong> <em class="lq"># -&gt; ["this", "is", "a", "string"]</em> </span><span id="9aad" class="mx lw it lu b gy nc mz l na nb"><em class="lq">"hey"</em>.<strong class="lu iu">split</strong>("")<em class="lq"> # -&gt; ["h","e","y"]</em></span></pre><p id="a898" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">奖励:将数组转换为字符串:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.5.0/Array.html#method-i-join" rel="noopener ugc nofollow" target="_blank"> #join </a>做相反的事情，从数组创建一个新的字符串。它将一个字符串作为可选参数，该字符串将被插入值之间:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="cfe9" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = <strong class="lu iu">%w</strong>(cat dog mouse)<br/><strong class="lu iu">str</strong> = <strong class="lu iu">arr</strong>.join(", ")<br/><strong class="lu iu">str</strong> <em class="lq"># -&gt; "cat, dog, mouse"</em></span><span id="5c59" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">str2</strong> = <strong class="lu iu">arr</strong>.join<br/><strong class="lu iu">str2</strong> #-&gt; "<em class="lq">catdogmouse</em>"</span></pre><h1 id="c0df" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">读取/获取值</h1><p id="9831" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><strong class="kw iu">获取数组的长度:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.5.0/Array.html#method-i-length" rel="noopener ugc nofollow" target="_blank"/><strong class="kw iu"/>和#size都是别名</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="e884" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse cow pig)<br/><strong class="lu iu">arr.</strong>length <em class="lq"># -&gt; 5</em><br/><strong class="lu iu">arr.</strong>size # <em class="lq">-&gt; 5</em></span></pre><p id="c4fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">获取索引值</strong></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="6b67" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong>[0] # -&gt; <em class="lq">"cat"</em><br/><strong class="lu iu">arr</strong>[1] # -&gt; <em class="lq">"dog"</em><br/><strong class="lu iu">arr</strong>[100] # -&gt; <em class="lq">nil</em></span></pre><p id="49b3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">获取一个值的索引:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.5.0/Array.html#method-i-index" rel="noopener ugc nofollow" target="_blank">#索引</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="eeb0" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong>.index("<em class="lq">dog</em>") # -&gt;<em class="lq"> 1<br/></em><strong class="lu iu">arr</strong>.index("asdaf") # -&gt;<em class="lq"> nil</em></span></pre><p id="9c18" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">从后面获取索引处的值:</strong>可以从数组的后面开始，使用负数:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="8bd2" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong>[-1] # -&gt; <em class="lq">"pig"</em><br/><strong class="lu iu">arr</strong>[-2] # -&gt; <em class="lq">"cow"</em><br/><strong class="lu iu">arr</strong>[-100] # -&gt;<em class="lq"> nil</em></span></pre><p id="ac8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">获取索引处的值或默认值:</strong> <a class="ae ms" href="https://apidock.com/ruby/Array/fetch" rel="noopener ugc nofollow" target="_blank"> #fetch </a>将返回索引处的值，或者它将给出默认参数，或代码块值。</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="bf6d" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong>.fetch(0) # <em class="lq">-&gt; "cat"</em><br/><strong class="lu iu">arr</strong>.fetch(-1) # -&gt; <em class="lq">"pig"</em><br/><strong class="lu iu">arr</strong>.fetch(100) # -&gt; raise a KeyError <br/><strong class="lu iu">arr</strong>.fetch(100, "<em class="lq">nothing there</em>") # -&gt; "nothing there" <br/><strong class="lu iu">arr</strong>.fetch(100) { |<strong class="lu iu">key</strong>| "nothing at index #{<strong class="lu iu">key</strong>}" }<br/><em class="lq"># -&gt; "nothing at index 100"</em></span></pre><p id="8c9c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">获取数组的一部分:</strong>可以使用逗号或者<a class="ae ms" href="http://www.tutorialspoint.com/ruby/ruby_ranges.htm" rel="noopener ugc nofollow" target="_blank">范围</a>:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="78d8" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = [<em class="lq">"cat", "dog", "mouse", "cow", "pig"</em>]<br/><strong class="lu iu">arr</strong>[1,3] <em class="lq"># -&gt; ["dog", "mouse", "cow"]</em><br/><strong class="lu iu">arr</strong>[1..3]<em class="lq"> # -&gt; ["dog", "mouse", "cow"]</em><br/><strong class="lu iu">arr</strong>[1...3] <em class="lq"># -&gt; ["dog", "mouse"]</em><br/><strong class="lu iu">arr</strong>[1..-1] <em class="lq"># -&gt; ["dog", "mouse", "cow", "pig"]</em></span></pre><p id="fcc2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">检查数组中是否有值:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-include-3F" rel="noopener ugc nofollow" target="_blank"> #include？</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="6a21" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr</strong>.include?("<em class="lq">cat</em>") # <em class="lq">-&gt; true</em><strong class="lu iu">   <br/>arr</strong>.include?("<em class="lq">zzz</em>") #<em class="lq">-&gt; false</em></span></pre><h1 id="3323" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">添加和更新值</h1><p id="958e" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><strong class="kw iu">改变索引值:</strong></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="e890" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = <strong class="lu iu">%w</strong>(cat dog mouse)<br/><strong class="lu iu">arr</strong>[0] = <em class="lq">"lynx"</em><br/><strong class="lu iu">arr</strong> <em class="lq"># -&gt; ["lynx", "dog", "mouse"]</em></span></pre><p id="bf62" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">在数组末尾加一个值:</strong>&lt;&lt;称为<a class="ae ms" href="https://stackoverflow.com/questions/10569529/ruby-difference-between-array-and-arraypush" rel="noopener ugc nofollow" target="_blank">铲运算符</a>，但也可以使用<a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-push" rel="noopener ugc nofollow" target="_blank"> #push </a>。这些方法修改原始数组:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="72d6" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr</strong> &lt;&lt; <em class="lq">"cobra"</em> <br/><em class="lq"># returns changed array</em><br/># -&gt; ["cat", "dog", "mouse", "cobra"]</span><span id="714b" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong>.push("crow") <br/><em class="lq"># returns changed array</em><br/><em class="lq"># -&gt; ["cat", "dog", "mouse", "cobra", "crow"]</em></span><span id="72c8" class="mx lw it lu b gy nc mz l na nb"># push can take multiple, &lt;&lt; can't <br/><strong class="lu iu">arr</strong>.push("<em class="lq">cow</em>", <em class="lq">"bee"</em>)<br/><em class="lq"># returns changed array</em><br/><em class="lq"># -&gt; ["cat", "dog", "mouse", "cobra", "crow", "cow", "bee"]</em></span></pre><p id="1663" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">在数组的开头加一个值:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-unshift" rel="noopener ugc nofollow" target="_blank"> #unshift </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="c177" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr.unshift</strong>(<em class="lq">"clam"</em>) <br/><em class="lq"># returns changed array</em><strong class="lu iu"><br/></strong><em class="lq"># -&gt; ["clam", "cat", "dog", "mouse"]</em></span><span id="bd9b" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr.</strong>unshift(<em class="lq">"cow", "bee"</em>)<br/><em class="lq"># returns changed array</em><br/><em class="lq"># -&gt; ["cow", "bee", "clam", "cat", "dog", "mouse"]</em></span></pre><p id="4e8a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">在数组中间加一个值:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-insert" rel="noopener ugc nofollow" target="_blank">#插入</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="bda7" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr</strong>.insert(1, "<em class="lq">cow</em>")<br/><em class="lq"># returns changed array<br/># -&gt; ["cat", "cow", "dog", "mou</em>se"]</span><span id="6f31" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr.</strong>insert(1, <em class="lq">"bee", "pig"</em>)<br/><em class="lq"># returns changed array<br/># -&gt; ["cat", "bee", "pig", "cow", "dog", "mouse"]</em></span></pre><h1 id="0dfe" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">移除和删除数值</strong></h1><p id="992e" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><strong class="kw iu">按值删除:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-delete" rel="noopener ugc nofollow" target="_blank">#删除</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="0a5b" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr</strong>.delete("<em class="lq">cat</em>") <br/><em class="lq"># -&gt; returns "cat"<br/>arr # -&gt; ["dog", "mouse"]</em></span><span id="3ab3" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong>.delete(<em class="lq">"cat"</em>) <br/><em class="lq"># -&gt; returns nil<br/>arr # -&gt; ["dog", "mouse"]</em></span><span id="e4e4" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong>.delete(<em class="lq">"whaaa?"</em>) { <em class="lq">"not found"</em> }   <br/><em class="lq"># -&gt; "not found"</em></span><span id="8c31" class="mx lw it lu b gy nc mz l na nb"><em class="lq"># leave original alone by subtracting arrays<br/># also lets you delete more than one item</em><br/><strong class="lu iu">arr</strong> = %w(cat dog mouse pig cow)<br/><strong class="lu iu">arr2</strong> = <strong class="lu iu">arr</strong> - [<em class="lq">"cat", "mouse"</em>]<br/><strong class="lu iu">arr2</strong> <em class="lq"># -&gt; ["dog", "pig", "cow"]</em><br/><strong class="lu iu">arr</strong><em class="lq"> # -&gt; ["cat", "dog", "mouse", "pig", "cow"]</em></span></pre><p id="d32b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">按任意索引删除:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-delete_at" rel="noopener ugc nofollow" target="_blank"> #delete_at </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="c100" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr</strong>.delete_at(0) <em class="lq"># -&gt; "cat"</em><br/><strong class="lu iu">arr</strong> # -&gt; [<em class="lq">"dog", "mouse"</em>]<br/><strong class="lu iu">arr</strong>.delete_at(100)<em class="lq"> # -&gt; nil</em></span></pre><p id="c8c9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">删除最后一个值:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-pop" rel="noopener ugc nofollow" target="_blank"> #pop </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="756e" class="mx lw it lu b gy my mz l na nb">arr = %w(cat dog mouse)<br/>arr.pop # -&gt; <em class="lq">"mouse"</em><br/><strong class="lu iu">arr</strong> <em class="lq"># -&gt; ["cat", "dog"]</em><br/><strong class="lu iu">arr</strong>.pop #<em class="lq"> -&gt; "dog"</em><br/><strong class="lu iu">arr</strong>.pop <em class="lq"># -&gt; "cat" </em><br/><strong class="lu iu">arr</strong>.pop <em class="lq"># -&gt; nil</em></span></pre><p id="3935" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">删除第一个值:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.5.0/Array.html#method-i-shift" rel="noopener ugc nofollow" target="_blank"> #shift </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="a5d5" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(cat dog mouse)<br/><strong class="lu iu">arr</strong>.shift # -&gt; "cat"<br/><strong class="lu iu">arr</strong> # -&gt; [<em class="lq">"dog", "mouse"</em>]<br/><strong class="lu iu">arr</strong>.shift <em class="lq"># -&gt; "dog"</em> <br/><strong class="lu iu">arr</strong>.shift<em class="lq"> # -&gt; "mouse"</em><br/><strong class="lu iu">arr</strong>.shift #<em class="lq"> -&gt; nil</em></span></pre><h1 id="3bb3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">改变顺序</h1><p id="dc7c" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><strong class="kw iu">排序数组:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-sort" rel="noopener ugc nofollow" target="_blank">#排序</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="ff12" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr_num</strong> = [4,12,9,1]<br/><strong class="lu iu">arr_alpha</strong> = %w(ba aa cb bb)</span><span id="1a06" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr_num</strong>.sort # -&gt; [1, 4, 9, 12]<br/><strong class="lu iu">arr_alpha</strong>.sort # -&gt; [<em class="lq">"aa", "ba", "bb", "cb,"</em>]</span><span id="1fe0" class="mx lw it lu b gy nc mz l na nb"><em class="lq"># permanently change original arr</em><br/><strong class="lu iu">arr_num</strong>.sort!<br/><strong class="lu iu">arr_alpha</strong>.sort!</span></pre><p id="4b3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">反转顺序:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-reverse" rel="noopener ugc nofollow" target="_blank">#反转</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="c828" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(first mid last)</span><span id="ab4f" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong>.reverse # -&gt; [<em class="lq">"last", "mid", "first"</em>]<br/><strong class="lu iu">arr</strong> # -&gt; [<em class="lq">"first", "mid", "last"</em>]</span><span id="5fbf" class="mx lw it lu b gy nc mz l na nb"># permanently change original arr<br/><strong class="lu iu">arr</strong>.reverse!</span><span id="546b" class="mx lw it lu b gy nc mz l na nb"># useful for sorting in reverse order<br/><strong class="lu iu">arr</strong>.sort.reverse</span></pre><p id="1373" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">随机化顺序:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-shuffle" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> # </strong>洗牌</a>和#洗牌！随机化元素的顺序，洗牌只是一个副本，然后洗牌！在阵列本身上:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="f2c2" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = [1,2,3,4]<br/><strong class="lu iu">arr</strong>.shuffle <em class="lq"># -&gt; [2, 1, 3, 4]</em><br/><strong class="lu iu">arr</strong> <em class="lq"># -&gt; [1, 2, 3, 4]</em></span><span id="80c9" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong>.shuffle! # <em class="lq">-&gt; [4, 2, 1, 3]</em><br/><strong class="lu iu">arr</strong> # -&gt; <em class="lq">[4, 2, 1, 3]</em></span></pre><p id="058d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">奖励:从数组中选取随机值:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-sample" rel="noopener ugc nofollow" target="_blank"> #sample </a>从数组中返回随机值:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="311c" class="mx lw it lu b gy my mz l na nb">[1,2,3,4].sample<em class="lq"> # -&gt; 1</em><br/>[1,2,3,4].sample <em class="lq"># -&gt; 3</em></span></pre><h1 id="4cb2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">#每个和#地图</strong></h1><p id="82c2" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">这两种方法及其变体可能是ruby中最重要的数组方法。它们都将迭代(遍历)一个数组，但主要区别是<code class="fe lr ls lt lu b">#each</code>将总是返回原始数组，而<code class="fe lr ls lt lu b">#map</code>将返回一个新数组。</p><p id="ecc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">遍历数组:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-each" rel="noopener ugc nofollow" target="_blank">#每一个</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="8b93" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c)<br/><strong class="lu iu">arr.</strong>each do |<strong class="lu iu">val</strong>| <br/>  puts "value is #{<strong class="lu iu">x</strong>}"<br/>end <br/><em class="lq"># will put each value but return:<br/># ["a", "b", "c"]</em></span></pre><p id="3ff1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">用索引遍历数组:</strong> <a class="ae ms" href="https://ruby-doc.org//core-2.6.3/Enumerator.html#method-i-each_with_index" rel="noopener ugc nofollow" target="_blank"> #each_with_index </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="a232" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c)<br/><strong class="lu iu">arr</strong>.each_with_index do |<strong class="lu iu">val, idx</strong>| <br/>  puts <em class="lq">“index #{</em><strong class="lu iu"><em class="lq">idx</em></strong><em class="lq">}: #{</em><strong class="lu iu"><em class="lq">val</em></strong><em class="lq">}”</em> <br/>end <br/><em class="lq"># still returns:<br/># ["a", "b", "c"]</em></span></pre><p id="dbc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">用每个对象创建一个新对象</strong>:<a class="ae ms" href="https://ruby-doc.org//core-2.6.3/Enumerator.html#method-i-each_with_object" rel="noopener ugc nofollow" target="_blank"># each _ with _ object</a>是一个有用的方法，可以让你在每次迭代中添加给定的对象。最后，不是返回原始数组，而是返回这个对象。</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="4d0a" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c)<br/><strong class="lu iu">arr</strong>.each_with_object(<strong class="lu iu">{}</strong>) do |<strong class="lu iu">value</strong>, <strong class="lu iu">result</strong>|<br/>  <strong class="lu iu">result</strong>[<strong class="lu iu">value</strong>] = <strong class="lu iu">value</strong>.upcase<br/>end<br/><em class="lq"># returns: <br/># {"a"=&gt;"A", "b"=&gt;"B", "c"=&gt;"C"}</em></span></pre><p id="f316" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你也可以使用<code class="fe lr ls lt lu b">#with_object</code>将<code class="fe lr ls lt lu b">#each_with_index</code>链接在一起，例如将数组快速缝合到对象中:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="9249" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c)</span><span id="fbe1" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong><br/>  .each_with_index<br/>  .with_object(<strong class="lu iu">{}</strong>) do |(<strong class="lu iu">value, idx</strong>), <strong class="lu iu">result</strong>|<br/>    <strong class="lu iu">result</strong>[<strong class="lu iu">value.to_sym</strong>] = "I was index #{idx}"<br/>  end</span><span id="50e7" class="mx lw it lu b gy nc mz l na nb"><em class="lq"># returns: <br/></em># {<br/>#   "a"=&gt;"I was index 0", <br/>#   "b"=&gt;"I was index 1", <br/>#   "c"=&gt;"I was index 2"<br/># }</span></pre><p id="016a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">遍历数组并创建一个新数组:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-map" rel="noopener ugc nofollow" target="_blank"> #map </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="60d1" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c) <br/><strong class="lu iu">arr2</strong> = arr.map do |<strong class="lu iu">value</strong>| <br/>  “#{<strong class="lu iu">value</strong>}!!” <br/>end </span><span id="cf7a" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr2</strong> <em class="lq"># -&gt; [ “a!!”, “b!!”, “c!!”]</em><br/><strong class="lu iu">arr</strong> <em class="lq"># -&gt;[ “a”, “b”, “c” ]</em></span></pre><p id="65eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">正如ruby中常见的“！”意味着不返回副本，#map！将改变原始数组:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="3a51" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c) <br/><strong class="lu iu">arr</strong>.map! do |<strong class="lu iu">value</strong>| <br/> <em class="lq"> “#{</em><strong class="lu iu">value</strong><em class="lq">}!!”</em> <br/>end</span><span id="6a8a" class="mx lw it lu b gy nc mz l na nb"><strong class="lu iu">arr</strong><em class="lq"> # -&gt; [ “a!!”, “b!!”, “c!!”]</em></span></pre><p id="3c95" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> #map.with_index: </strong>通过链接<a class="ae ms" href="https://apidock.com/ruby/Enumerator/with_index" rel="noopener ugc nofollow" target="_blank"> #with_index </a>，可以像以前一样访问索引。请注意，#map和#with_index是两个独立的方法，与#each_with_index不同:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="831b" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = %w(a b c)<br/><strong class="lu iu">arr</strong>.map.with_index do |<strong class="lu iu">value, idx</strong>|<br/><em class="lq">  "index #{</em><strong class="lu iu">idx</strong><em class="lq">} is '#{</em><strong class="lu iu">value</strong><em class="lq">}'"</em><br/>end</span><span id="dd0a" class="mx lw it lu b gy nc mz l na nb"><em class="lq">#returns: <br/># [<br/>#   "index 0 is 'a'", <br/>#   "index 1 is 'b'", <br/>#   "index 2 is 'c'"<br/># ] </em> </span></pre><h1 id="162d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">其他有用的方法</h1><p id="1c1c" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><strong class="kw iu">检查数组是否为空:</strong><a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-empty-3F" rel="noopener ugc nofollow" target="_blank">#空？</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="beef" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu"> arr</strong>.empty? <em class="lq"># returns true or false</em></span></pre><p id="f4d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">连接(组合)数组:</strong>注意数组相加的顺序很重要</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="b123" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr1</strong> = [1, 2, 3]<br/><strong class="lu iu">arr2</strong> = [4, 5, 6]<br/><strong class="lu iu">arr3</strong> = [7, 8, 9]</span><span id="60ae" class="mx lw it lu b gy nc mz l na nb"># leaves originals alone <br/><strong class="lu iu">arr1</strong> + <strong class="lu iu">arr3</strong> + <strong class="lu iu">arr2</strong><br/><em class="lq"># returns: <br/># [1, 2, 3, 7, 8, 9, 4, 5, 6]</em></span><span id="1ce8" class="mx lw it lu b gy nc mz l na nb"><em class="lq"># if you want to permanently alter original <br/># use concat</em><br/><strong class="lu iu">arr1</strong>.concat(arr2)<br/><strong class="lu iu">arr1</strong> # -&gt;<em class="lq"> [1, 2, 3, 4, 5, 6]</em></span></pre><p id="6189" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">查看是否有符合条件的值:</strong> <a class="ae ms" href="https://apidock.com/ruby/Enumerable/any%3F" rel="noopener ugc nofollow" target="_blank"> #any？</a>返回true或false，如果<em class="lq">数组中至少有</em>项满足条件，则为true，否则为false:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="7869" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = [1,2,3,4]   <br/><strong class="lu iu">arr</strong>.any? do |<strong class="lu iu">num</strong>| <br/>  <strong class="lu iu">num</strong> &gt; 2   <br/>end      <br/><em class="lq"># returns true</em></span></pre><p id="7ba3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">查看所有值是否符合条件:</strong>使用<a class="ae ms" href="https://apidock.com/ruby/Enumerable/all%3F" rel="noopener ugc nofollow" target="_blank"> #all </a>检查每个单项是否符合条件，反之使用<a class="ae ms" href="https://apidock.com/ruby/Enumerable/none%3F" rel="noopener ugc nofollow" target="_blank"> #none </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="3d21" class="mx lw it lu b gy my mz l na nb"><strong class="lu iu">arr</strong> = [1,2,3,4]   <br/><strong class="lu iu">arr</strong>.all? do |<strong class="lu iu">num</strong>| <br/>  <strong class="lu iu">num</strong> &lt; 100<br/>end      <br/><em class="lq"># returns true</em></span><span id="18ad" class="mx lw it lu b gy nc mz l na nb"><em class="lq"># check for the reverse with none?<br/></em><strong class="lu iu">arr</strong> = [1,2,3,4]   <br/><strong class="lu iu">arr</strong>.none? do |<strong class="lu iu">num</strong>| <br/>  <strong class="lu iu">num</strong> &lt; 100<br/>end<br/><em class="lq"># returns false</em></span></pre><p id="95a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">查找匹配条件的第一个值:</strong><a class="ae ms" href="https://apidock.com/ruby/Enumerable/find" rel="noopener ugc nofollow" target="_blank">#查找</a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="ad79" class="mx lw it lu b gy my mz l na nb">[1, 2, 3, 4].find do |<strong class="lu iu">num</strong>| <br/>  <strong class="lu iu">num</strong>.even? <br/>end <br/><em class="lq"># returns 2</em></span></pre><p id="9bec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">返回符合条件的所有值:</strong> <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-select" rel="noopener ugc nofollow" target="_blank"> #select </a></p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="455c" class="mx lw it lu b gy my mz l na nb">[1, 2, 3, 4].select do |<strong class="lu iu">num</strong>| <br/>  <strong class="lu iu">num</strong>.even? <br/>end <br/><em class="lq"># returns [2, 4]</em></span></pre><p id="2c1d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你只关心满足条件的元素数量，那么使用<a class="ae ms" href="https://apidock.com/ruby/String/count" rel="noopener ugc nofollow" target="_blank"> #count </a>。它只返回值的数量:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="6f78" class="mx lw it lu b gy my mz l na nb">[1, 2, 3, 4, 5, 6].count do |<strong class="lu iu">num</strong>| <br/>  <strong class="lu iu">num</strong>.even? <br/>end <br/><em class="lq"># returns 3</em></span></pre><p id="6b57" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">删除重复值或零值</strong> : <a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-uniq" rel="noopener ugc nofollow" target="_blank"> #uniq </a>剔除重复值，<a class="ae ms" href="https://ruby-doc.org/core-2.6.3/Array.html#method-i-compact" rel="noopener ugc nofollow" target="_blank"># contact</a>剔除零值。它们都返回数组的副本，使用#uniq！还是#紧凑！要永久改变原始阵列:</p><pre class="kj kk kl km gt mt lu mu mv aw mw bi"><span id="3c28" class="mx lw it lu b gy my mz l na nb">[1, 2, 3, 1, 2, 4].uniq <br/># returns [1, 2, 3, 4]</span><span id="3e89" class="mx lw it lu b gy nc mz l na nb">[1, nil, 2, nil, 3].compact<strong class="lu iu"><br/></strong># returns [1, 2, 3]</span></pre><p id="cbab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">仅此而已！我的意思是，这不是所有的方法，只是我有空间的方法。</p><p id="e01a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">大家编码快乐，</p><p id="67f5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">麦克风</p></div></div>    
</body>
</html>