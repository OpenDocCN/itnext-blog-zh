<html>
<head>
<title>TypeScript-aware React hooks for global state</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">支持类型脚本的全局状态反应挂钩</h1>
<blockquote>原文：<a href="https://itnext.io/typescript-aware-react-hooks-for-global-state-b6e2dfc0e9a7?source=collection_archive---------2-----------------------#2018-10-28">https://itnext.io/typescript-aware-react-hooks-for-global-state-b6e2dfc0e9a7?source=collection_archive---------2-----------------------#2018-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2d3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">React钩子很牛逼。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f21840df7661b75754780f60c71a553e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OIEFD3ToTnb4VBXIFwJYEQ.png"/></div></div></figure><p id="cc32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">React Hooks API是React v16.7的一个新提议。它支持将所有组件编写为具有完整功能的函数。您可以开发“定制挂钩”来添加新的功能。虽然它还没有发布，我想介绍一个新的库来支持全局状态。注意，还是实验。</p><h2 id="e424" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">图书馆</h2><p id="20d0" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">它叫做“反应钩子全局状态”，在<a class="ae ly" href="https://www.npmjs.com/package/react-hooks-global-state" rel="noopener ugc nofollow" target="_blank"> npm </a>中可用。也请签出GitHub库。</p><div class="lz ma gp gr mb mc"><a href="https://github.com/dai-shi/react-hooks-global-state" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">戴式/反应钩式-全局-状态</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">钩子API反应的简单全局状态。通过创造一个新的世界，为Dai-Shi/react-hooks-global-state的发展作出贡献</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">github.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq ky mc"/></div></div></a></div><h2 id="7efb" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">如何用它编码</h2><p id="f2a7" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">首先，您需要定义一个全局状态，并导出一个提供者和一个自定义挂钩。</p><pre class="kp kq kr ks gt mr ms mt mu aw mv bi"><span id="3ac4" class="la lb it ms b gy mw mx l my mz">import { createGlobalState } from 'react-hooks-global-state';<br/><br/>export const { GlobalStateProvider, useGlobalState } = createGlobalState({<br/>  counter: 0,<br/>  person: {<br/>    age: 0,<br/>    firstName: '',<br/>    lastName: '',<br/>  },<br/>});</span></pre><p id="6a35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，使用钩子实现一个组件。</p><pre class="kp kq kr ks gt mr ms mt mu aw mv bi"><span id="6dcf" class="la lb it ms b gy mw mx l my mz">import * as React from 'react';<br/><br/>import { useGlobalState } from './state';<br/><br/>const Counter = () =&gt; {<br/>  const [value, update] = useGlobalState('counter');<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;span&gt;<br/>        Count:<br/>        {value}<br/>      &lt;/span&gt;<br/>      &lt;button type="button" onClick={() =&gt; update(v =&gt; v + 1)}&gt;+1&lt;/button&gt;<br/>      &lt;button type="button" onClick={() =&gt; update(v =&gt; v - 1)}&gt;-1&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};<br/><br/>export default Counter;</span></pre><p id="e2e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">即使您使用了两次<code class="fe na nb nc ms b">Counter</code>组件，它们也共享状态。</p><pre class="kp kq kr ks gt mr ms mt mu aw mv bi"><span id="3047" class="la lb it ms b gy mw mx l my mz">import * as React from 'react';<br/><br/>import { GlobalStateProvider } from './state';</span><span id="6522" class="la lb it ms b gy nd mx l my mz">import Counter from './Counter';<br/>import Person from './Person'; // Refer the code in the repository<br/><br/>const App = () =&gt; (<br/>  &lt;GlobalStateProvider&gt;<br/>    &lt;h1&gt;Counter&lt;/h1&gt;<br/>    &lt;Counter /&gt;<br/>    &lt;Counter /&gt;<br/>    &lt;h1&gt;Person&lt;/h1&gt;<br/>    &lt;Person /&gt;<br/>    &lt;Person /&gt;<br/>  &lt;/GlobalStateProvider&gt;<br/>);<br/><br/>export default App;</span></pre><p id="8dac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完整的代码在资源库的<code class="fe na nb nc ms b">examples/02_typescript</code>文件夹中。您可以通过克隆存储库来尝试这个示例，并运行:</p><pre class="kp kq kr ks gt mr ms mt mu aw mv bi"><span id="0341" class="la lb it ms b gy mw mx l my mz">git clone <a class="ae ly" href="https://github.com/dai-shi/react-hooks-global-state.git" rel="noopener ugc nofollow" target="_blank">https://github.com/dai-shi/react-hooks-global-state.git</a><br/>npm install<br/>npm run examples:typescript</span></pre><p id="5f64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启动并运行后，打开<a class="ae ly" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>。</p><h2 id="77f9" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">这是打字稿吗？</h2><p id="f5a9" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">其实是的！它是完全类型化的，而且代码中没有任何隐式类型。示例代码是用TypeScript编写的，但是库本身是用带有类型定义的JavaScript编写的，所以您可以随意使用它。</p><h2 id="4a42" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">有什么反馈吗？</h2><p id="3403" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">通过媒体、Twitter或GitHub问题获得反馈。谢谢！</p><h2 id="28f2" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">变更日志</h2><ul class=""><li id="6cb4" class="ne nf it js b jt lt jx lu kb ng kf nh kj ni kn nj nk nl nm bi translated"><em class="nn">【2018–10–28】:首发。</em></li><li id="b057" class="ne nf it js b jt no jx np kb nq kf nr kj ns kn nj nk nl nm bi translated"><em class="nn">【2018–11–08】:跟随库API变化，让例子更直观。</em></li><li id="7891" class="ne nf it js b jt no jx np kb nq kf nr kj ns kn nj nk nl nm bi translated"><em class="nn">【2018–11–12】:基于上下文API再次改变库API。</em></li></ul></div></div>    
</body>
</html>