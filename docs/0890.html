<html>
<head>
<title>Creating simple application with GoJS, part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用GoJS创建简单的应用程序，第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/creating-simple-application-with-gojs-part-2-c33139e934ba?source=collection_archive---------6-----------------------#2018-06-13">https://itnext.io/creating-simple-application-with-gojs-part-2-c33139e934ba?source=collection_archive---------6-----------------------#2018-06-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="87ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上一篇文章中，我向您展示了如何开始使用GoJS应用程序。我解释了如何创建一个图表，以及如何使用它来显示数据。让我们更进一步，以适当的方式设置边。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/faee774332955fc6bf2671164f74a669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KOn10YqYuGsceop4LBlxzg.jpeg"/></div></div></figure><blockquote class="kx ky kz"><p id="0512" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated">与<a class="ae le" href="http://www.synergycodes.com" rel="noopener ugc nofollow" target="_blank"> Synergy Codes </a>合作撰写的帖子。</p></blockquote><p id="8cc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">找第一部分？在<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/creating-simple-application-with-gojs-part-1-e3c320765def"> ITNEXT </a>上检查。</p><h1 id="5af7" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">港口</strong></h1><p id="6d08" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">虽然我们的图表看起来越来越好，但仍有一些突出的问题。首先，它不能被编辑(你唯一能做的就是移动节点并使用CTRL键克隆它们)，其次，我们可能希望在节点的特定点之间绘制边。这在从SVG路径创建的对象中尤其明显——最好是从左边设置入口，从右边设置出口。但是要做到这一点，我们首先需要定义端口。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/4aa728786d18160b31418920cc4f1717.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*6QvZkFkLKl-ZExn9XXnwXw.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">图一。完成本教程的第一部分后，我们有什么</figcaption></figure><p id="c58e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">端口是节点的一部分，只有一个功能，即相对于对象的其余部分设置边。它们可能由已经存在的节点元素组成(甚至是一个完整的节点)，也可能是专门为此目的而创建的新元素。通过设置<strong class="jp ir"> portId </strong>字段的值来定义端口。我们还可以做一些其他的事情，例如:定义我们是否可以从端口创建新的链接(<strong class="jp ir"> fromLinkable </strong> field)以及我们是否可以向它附加新的链接(<strong class="jp ir"> toLinkable </strong>)。出于此示例的目的，端口将被定义为可见的形状，但它们可以是任何对象(包括不可见的对象)。</p><h1 id="579b" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">为节点模板设置端口</h1><p id="a5d5" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">在第一个节点模板(黑色圆圈)的情况下，我们希望将端口放在正中间。为了清楚地表明这是边缘的位置，我们将改变圆的颜色，并为它设置一个固定的大小。我们还将对其进行配置，使其能够从该端口双向创建连接。在这种情况下，我们将这样定义形状:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">清单1。用端口展开的形状的定义</figcaption></figure><p id="3ff6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我已经提到的，为<strong class="jp ir"> portId </strong>字段设置一个值很重要。但是，该值可以是空字符串。如果我们分配一个空字符串，这个端口将是默认端口。</p><p id="0623" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于第二个节点模板(SVG路径)，我们希望在它的左侧和右侧定义端口。有两种方法可以做到这一点:将元素的排列方式更改为水平，并按照端口-主形状-端口的顺序设置形状，或者更改为定点，然后将端口设置在主形状居中的左右位置。第二种方法更灵活，所以我们将使用这种方法。在左侧，我们将插入与第一个形状相同的矩形，并设置它，以便您只能链接到它。在右边，我们将插入一个矩形，从这里我们只能引导边缘。为了区分它们，我们应该给它们不同于空字符串的标识符(例如，入口和出口)。这个定义是这样的:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">清单2。用两个端口扩展的形状的定义</figcaption></figure><p id="8fb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于第三个模板(两个矩形)，让我们只修改顶部的正方形。我们将通过添加一个带有空字符串的<strong class="jp ir"> portId </strong>来使它成为一个端口，并且我们将把<strong class="jp ir">从可链接的</strong>和<strong class="jp ir">设置为可链接的</strong>到<strong class="jp ir">真的</strong>。创建端口后，图表应该是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/c856dc792577e6234442f5e5301667af.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*52TwNNFDeu548tTScdS5Mg.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">图二。端口的初步配置图</figcaption></figure><h1 id="6c11" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">设置链接以使用端口</h1><p id="ed63" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">如上图所示，端口在第一和第三种情况下工作得很好，但在第二种情况下就不行了。在绘制链接时也会发生同样的事情。在第一类和第三类之间绘图没有问题，但是第二类的边会跳出端口。出现这种情况有两个原因。首先，我们没有在链路模型中定义应该在哪个端口之间建立连接。其次，我们还没有在模型中设置如何存储端口之间的连接。所以让我们回到<strong class="jp ir"> initDiagram </strong>和模型的定义。我们需要给<strong class="jp ir"> GraphLinksModel </strong>添加两个字段:<strong class="jp ir"> linkFromPortIdProperty </strong>和<strong class="jp ir"> linkToPortIdProperty </strong>。这些决定了我们如何定义模型中使用的端口。此外，我们应该在<strong class="jp ir"> linkDataArray </strong>中定义如何处理节点2和3(属于第二类的节点)的边。这些变化应该是这样的:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">清单3。允许使用端口的模型变化</figcaption></figure><p id="5468" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图中的边应该是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/de3cf30075d3d274f4c06109d0174c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*ZaULlugaa4ac3olRdpTS8A.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">图3。正确配置端口后的示意图</figcaption></figure><p id="ffa4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一部分，我们将对这张图进行最后的润色。至于目前的部分，你可以在这里查看结果:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr mo l"/></div></figure><p id="cfb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">想要更多吗？查看本教程的第三部分！</p><p id="e178" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">帖子也发表在<a class="ae le" href="http://www.synergycodes.com/blog/" rel="noopener ugc nofollow" target="_blank"> Synergy Codes的博客</a>上，你可以在这里查看<a class="ae le" href="http://www.synergycodes.com/blog/simple-gojs-application-setting-and-editing-edges" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="637d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你想了解更多关于GoJS的知识吗？<a class="ae le" href="https://synergycodes.com/gojs-ebook/" rel="noopener ugc nofollow" target="_blank">你可以在这里下载免费电子书</a>！</p></div></div>    
</body>
</html>