<html>
<head>
<title>Serve react component with Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为反应元件提供导轨</h1>
<blockquote>原文：<a href="https://itnext.io/serve-react-component-with-rails-67efa4b5785d?source=collection_archive---------4-----------------------#2018-02-21">https://itnext.io/serve-react-component-with-rails-67efa4b5785d?source=collection_archive---------4-----------------------#2018-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/40b2b3251749808ef5fa04bf64156705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohQul8IFYtRTzpGbKaIovA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">webgrinder.pl</figcaption></figure><p id="bcb3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用React作为前端和Rails后端是一个惊人的组合。为此我使用了<a class="ae la" href="https://github.com/reactjs/react-rails#use-with-asset-pipeline" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> react-rails </strong> </a> gem，这是一个使用react和rails的灵活工具。</p><p id="7d56" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fserve-react-component-with-rails-67efa4b5785d" rel="noopener ugc nofollow" target="_blank"> <em class="lb">点击这里在LinkedIn上分享这篇文章</em> </a></p><h1 id="3d06" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">与链轮资产管线一起使用</h1><p id="0586" class="pw-post-body-paragraph kc kd iq ke b kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz ij bi translated">将<code class="fe mf mg mh mi b">react-rails</code>添加到gem文件。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="bb3e" class="mr ld iq mi b gy ms mt l mu mv">gem 'react-rails'</span></pre><p id="9c96" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随后是以下命令</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="a6e1" class="mr ld iq mi b gy ms mt l mu mv">$ bundle install<br/>$ rails g react:install</span></pre><p id="fab0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mf mg mh mi b">react:install</code>生成器将自动在您的资产管道中包含react JavaScript库</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="f576" class="mr ld iq mi b gy ms mt l mu mv"><strong class="mi ir">create</strong> app/assets/javascripts/components <br/><strong class="mi ir">insert</strong> app/assets/javascripts/application.js <br/><strong class="mi ir">create</strong> app/assets/javascripts/components.js<br/><strong class="mi ir">create</strong> app/assets/javascripts/server_rendering.js<br/><strong class="mi ir">create</strong> config/initializers/react_server_rendering.rb</span></pre><p id="6dcb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">安装完成！</p><h1 id="c9c9" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第一部分</h1><p id="945d" class="pw-post-body-paragraph kc kd iq ke b kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz ij bi translated">我们需要做的第一件事是在components文件夹中建立一个<strong class="ke ir"> jsx </strong>文件。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="6ac9" class="mr ld iq mi b gy ms mt l mu mv"><em class="lb">// app/assets/javascripts/components/first.es6.jsx </em></span><span id="5a6e" class="mr ld iq mi b gy mw mt l mu mv">class <strong class="mi ir">FirstComponent</strong> extends <strong class="mi ir">React</strong>.<strong class="mi ir">Component</strong>{</span><span id="cb94" class="mr ld iq mi b gy mw mt l mu mv"><strong class="mi ir">   constructor</strong>(props, context) {<br/>      super(props, context);<br/>      this.state = { <br/>         name: props.name,<br/>      };<br/>   }</span><span id="186c" class="mr ld iq mi b gy mw mt l mu mv"><strong class="mi ir">   componentDidMount</strong>(){}</span><span id="6805" class="mr ld iq mi b gy mw mt l mu mv"><strong class="mi ir">   render</strong>() {<br/>      return (<br/>         <!-- -->&lt;div&gt;<br/>            &lt;h1&gt;Hello: {this.state.name}&lt;/h1&gt;<br/>         &lt;/div&gt;<br/>      <!-- -->)<br/>   }<br/>}</span></pre><blockquote class="mx my mz"><p id="3f04" class="kc kd lb ke b kf kg kh ki kj kk kl km na ko kp kq nb ks kt ku nc kw kx ky kz ij bi translated"><strong class="ke ir">阅读</strong> : <a class="ae la" href="https://reactjs.org/docs/react-component.html#the-component-lifecycle" rel="noopener ugc nofollow" target="_blank">反应组件生命周期</a></p></blockquote><h1 id="cccd" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">服务器端渲染</h1><p id="843e" class="pw-post-body-paragraph kc kd iq ke b kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz ij bi translated">要让Rails渲染React组件，有两种方法。</p><h2 id="9e69" class="mr ld iq bd le nd ne dn li nf ng dp lm kn nh ni lq kr nj nk lu kv nl nm ly nn bi translated">使用反应组件视图助手</h2><p id="51c0" class="pw-post-body-paragraph kc kd iq ke b kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz ij bi translated">在你的视图中使用<code class="fe mf mg mh mi b">react_component</code>助手方法，即<em class="lb"> index.html.erb </em></p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="580b" class="mr ld iq mi b gy ms mt l mu mv">&lt;%= react_component('FirstComponent', {name: 'John'}, {prerender: true}) %&gt;</span></pre><p id="b8cd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mf mg mh mi b">react_component</code>是反应轨道的一部分。在本例中，它用于将assets目录下components文件夹中名为<code class="fe mf mg mh mi b">FirstComponent</code>的组件放到视图中。</p><h2 id="996b" class="mr ld iq bd le nd ne dn li nf ng dp lm kn nh ni lq kr nj nk lu kv nl nm ly nn bi translated">使用控制器动作</h2><p id="492d" class="pw-post-body-paragraph kc kd iq ke b kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz ij bi translated">react-rails gem允许我们创建一个呈现react组件的控制器动作。这消除了对<em class="lb"> html.erb </em>模板的需要。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="b558" class="mr ld iq mi b gy ms mt l mu mv"><em class="lb"># app/controllers/some_controller.rb</em><br/><strong class="mi ir">class</strong> <strong class="mi ir">SomeController</strong> <strong class="mi ir">&lt;</strong> ApplicationController<br/>  <strong class="mi ir">def</strong> <strong class="mi ir">index</strong><br/>    render component: '<!-- -->FirstComponent<!-- -->', props: { name: 'Jhon' }<br/>  <strong class="mi ir">end</strong><br/><strong class="mi ir">end</strong></span></pre><p id="085b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">太好了！我们只是渲染我们的第一个组件。</p><h1 id="9eb8" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><strong class="ak">结论</strong></h1><p id="936b" class="pw-post-body-paragraph kc kd iq ke b kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv me kx ky kz ij bi translated">使用react-rails可以使用嵌入式ruby HTML创建页面的一部分，使用react组件创建页面的另一部分。世界林业人员协会(Woodmen of the World)..</p><p id="923d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="lb">(通过给别人</em>帮助别人找到我在Medium上的文章👏🏽<em class="lb">下图。)</em></p></div></div>    
</body>
</html>