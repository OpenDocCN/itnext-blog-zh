<html>
<head>
<title>Flutter Provider State Management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振供应商状态管理</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-provider-state-management-456db14aa77?source=collection_archive---------2-----------------------#2020-03-31">https://itnext.io/flutter-provider-state-management-456db14aa77?source=collection_archive---------2-----------------------#2020-03-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6be5521455f47e6f7d90b1ba0ecfb7cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8JDlwe0of8vSBO89"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@andrewtneel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安德鲁·尼尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="f05b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在flutter中创建任何更大的应用程序时，有一种管理状态的方法是必不可少的。有许多不同类型的状态管理选项。Bloc、RxDart、MobX只是你在flutter社区中可能听说过的几个名字。我确信它们都有自己有用的方式，可以帮助不同的项目完成不同的事情，但是我个人最喜欢的控制状态的方式是使用Provider。</p><p id="6a25" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如其创建者雷米·罗塞莱(【https://twitter.com/remi_rousselet】)所说，提供商本身并不是一个国家管理解决方案。它更像是一种用于创建状态管理的工具。事实上，有些软件包使用Provider为您创建状态管理包。尽管这似乎有悖直觉，但这也是我更喜欢提供商而不是其他解决方案的主要原因。使用Provider，即使您必须做更多的工作，您也可以完全控制您的状态所发生的一切。为了使它工作，不需要添加太多的样板文件。</p><p id="2ea3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我还想指出，我不是RxDart或MobX方面的专家。我只深入研究了Provider和Bloc，因为它们似乎是最受欢迎的。从我的经验来看，使用Bloc没有任何问题，对于更大的项目，它可能会节省编码人员的时间。但对我个人来说，我重视拥有控制权，随着时间的推移，事情越简单越好。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="82c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是现在从provider的实际工作方式开始。有三个主要的小部件，您将需要有一个完整的状态管理选项与提供者一起工作。它们是ChangeNotifier、ChangeNotifierProvider和Consumer。Provider.of也是一个重要的部分，但这更像是一种检索状态的方式。</p><p id="0438" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们深入研究之前，我想给你一个状态管理如何工作的简单视觉效果。ChangeNotifierProvider将向应用程序提供状态。然后，在应用程序内部，可以在模型内部激活一个事件，然后模型将相应地更新状态，持有状态的使用者应该在必要时更新任何UI元素。这可能有点令人困惑，让我们再深入分析一下。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lk"><img src="../Images/b4c11d778a8a4449d46968697b41ae72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FhloT2WwXNmkBBsZ"/></div></div></figure><p id="926b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">型号</strong></p><p id="7857" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">模型将是保存状态的实际事物。该模型需要扩展ChangeNotifier才能使其全部工作。事件也可以在模型内部。状态在模型中应该是私有的，所以只有事件可以改变状态。如果有任何人需要在状态改变时被更新，您需要调用notifyListeners()来通知任何监听状态的人。那么您还应该创建一个访问器来访问该状态。下面是一个存储用户正在关注的人员列表的模型示例。</p><pre class="le lf lg lh gt ll lm ln lo aw lp bi"><span id="6fa9" class="lq lr it lm b gy ls lt l lu lv">class Following extends ChangeNotifier {<br/>  final List&lt;String&gt; _followingList = [];</span><span id="2792" class="lq lr it lm b gy lw lt l lu lv">List&lt;String&gt; get followingList =&gt; _followingList;</span><span id="2836" class="lq lr it lm b gy lw lt l lu lv">add(String name) {<br/>    _followingList.add(name);<br/>    notifyListeners();<br/>  }</span><span id="a2f4" class="lq lr it lm b gy lw lt l lu lv">remove(String name) {<br/>    _followingList.removeWhere((element) =&gt; element == name);<br/>    notifyListeners();<br/>  }<br/>}</span></pre><p id="9ef2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">状态</strong></p><p id="99e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来使用ChangeNotifierProvider，您将向它下面的任何小部件提供状态。有几种方法可以访问小部件中的状态/模型。最简单的方法是使用Provider.of。您可以将它设置为一个变量，然后使用它来访问模型中的所有内容。您可以获取它的当前状态，并由此发送一个事件。</p><p id="bcc5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最终值= Provider.of <foo>(上下文)；</foo></p><p id="67d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你需要根据状态改变用户界面，那么消费者就是你要走的路。Consumer允许您访问状态，并允许您使用该状态构建UI。这里的关键区别在于，每当状态实际发生变化时，它都会被重新构建。还记得notifyListeners()函数吗？好吧，那就通知消费者它需要被重建。</p><p id="2ee9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">事件</strong></p><p id="f3a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以在消费者内部或使用Provider.of调用该事件。然后，如我在模型部分中所述，可以对该事件进行操作，并将状态更新为新值。然后，如果您想让任何人对状态变化采取行动，不要忘记调用notifyListeners()。</p><p id="23be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是Provider的全部内容。就像我说的，一旦你理解了如何使用它，它就非常简单明了。您的状态可以很容易地管理，没有太多的样板文件。使用ChangeNotifier、ChangeNotifierProvider和Consumer，您可以获得所需的所有功能。一旦您了解并完全理解了这些内容，您就可以研究包中的其他类型的提供者，比如当一个状态依赖于另一个状态时使用的ProxyProvider。</p><p id="c595" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读！</p><p id="37d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Instagram: @amateurcoder</p><p id="0a94" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">推特:@tadaspetra</p></div></div>    
</body>
</html>