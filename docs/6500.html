<html>
<head>
<title>Chrome Extension Development with Nx Workspace &amp; Angular v13 — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Nx Workspace和Angular v13开发Chrome扩展—第3部分</h1>
<blockquote>原文：<a href="https://itnext.io/chrome-extension-development-with-nx-workspace-angular-v13-part-3-f824c0baf75f?source=collection_archive---------3-----------------------#2021-12-04">https://itnext.io/chrome-extension-development-with-nx-workspace-angular-v13-part-3-f824c0baf75f?source=collection_archive---------3-----------------------#2021-12-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b24417ca6d6608f5f6a3682f4379deee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PMzoZwbaE54iYTRdSR3MsA.png"/></div></div></figure><p id="89fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我试图为个人使用创建一个简单的Chrome扩展。然后指出这可以使用HTML、CSS &amp; JavaScript来完成。</p><p id="5e76" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/chrome-extension-development-with-nx-workspace-angular-v13-48cf3d2c2a41"> <strong class="kd iu">第一部分:入门</strong> </a> <strong class="kd iu"> <br/> </strong> <a class="ae kz" href="https://medium.com/@dalenguyen/chrome-extension-development-with-nx-workspace-angular-v13-f9163e545c8f" rel="noopener"> <strong class="kd iu">第二部分:更改背景颜色</strong></a><strong class="kd iu"><br/></strong><a class="ae kz" href="https://medium.com/@dalenguyen/chrome-extension-development-with-nx-workspace-angular-v13-part-3-f824c0baf75f" rel="noopener"><strong class="kd iu">第三部分:添加上下文菜单</strong></a><strong class="kd iu"><br/></strong><a class="ae kz" href="https://medium.com/@dalenguyen/chrome-extension-development-with-nx-workspace-angular-v13-part-4-948fcc51e0f8" rel="noopener"><strong class="kd iu">第四部分:发送HTTP请求</strong><strong class="kd iu"><br/></strong></a><a class="ae kz" href="https://dalenguyen.medium.com/chrome-extension-development-with-nx-workspace-angular-v13-part-5-7245829ea87c" rel="noopener"><strong class="kd iu">第五部分:添加内容脚本</strong> </a></p><p id="b8d3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://github.com/dalenguyen/dalenguyen.github.io/tree/dev/apps/ext-utils" rel="noopener ugc nofollow" target="_blank"> Github示例</a></p><blockquote class="la lb lc"><p id="0a05" class="kb kc ld kd b ke kf kg kh ki kj kk kl le kn ko kp lf kr ks kt lg kv kw kx ky im bi translated">使用<code class="fe lh li lj lk b">chrome.contextMenus</code> API向Google Chrome的上下文菜单添加项目。您可以选择上下文菜单附加内容适用于哪些类型的对象，如图像、超链接和页面。</p></blockquote><p id="be9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我将向您展示如何创建搜索功能。当您在网站上选择一个单词或短语时，您可以右键单击并在DuckDuckGo中搜索这些单词。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ll"><img src="../Images/0ec819fddc112ef8dbb8c330ae11bb2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzvN_te_ZKGXpgCbR11Osg.png"/></div></div></figure><p id="be79" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请确保您遵循前面的部分，以便为chrome扩展开发设置Angular &amp; Nx。</p><p id="09ef" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">第一步:为上下文菜单添加权限</strong></p><pre class="lm ln lo lp gt lq lk lr ls aw lt bi"><span id="6d7a" class="lu lv it lk b gy lw lx l ly lz">// manifest.json</span><span id="d911" class="lu lv it lk b gy ma lx l ly lz">"permissions": ["storage", "activeTab", "scripting", "<strong class="lk iu">contextMenus</strong>"]</span></pre><p id="2760" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以为contextMenus指定图标，即icons对象下的16x16像素图标。</p><p id="39da" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">步骤2:创建新的上下文菜单</strong></p><p id="dec6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以通过更新<code class="fe lh li lj lk b">background.ts</code>文件来创建新的上下文菜单。</p><pre class="lm ln lo lp gt lq lk lr ls aw lt bi"><span id="bcef" class="lu lv it lk b gy lw lx l ly lz">// background.ts</span><span id="1802" class="lu lv it lk b gy ma lx l ly lz">chrome.runtime.onInstalled.addListener(() =&gt; {<br/>  // create new menu<br/>  chrome.contextMenus.create({<br/>    id: 'searchForWord',<br/>    title: 'Search DuckDuckGo for: %s',<br/>    contexts: ['selection'],<br/>  })<br/>})</span><span id="a709" class="lu lv it lk b gy ma lx l ly lz">// function that handles selection search<br/>const searchForWord = (info: chrome.contextMenus.OnClickData, tab: chrome.tabs.Tab | undefined) =&gt; {</span><span id="f86d" class="lu lv it lk b gy ma lx l ly lz"> // create a new tab with selection text for searching <br/> chrome.tabs.create({<br/>    url: '<a class="ae kz" href="https://duckduckgo.com/?q='" rel="noopener ugc nofollow" target="_blank">https://duckduckgo.com/?q='</a> + info.selectionText,<br/>  })<br/>}</span><span id="7abf" class="lu lv it lk b gy ma lx l ly lz">// event handling for menu<br/>chrome.contextMenus.onClicked.addListener(searchForWord)</span></pre><p id="d3d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">创建一个新的上下文菜单非常简单。之后，您只需要重新构建并重新加载扩展。</p><p id="8929" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://twitter.com/dale_nguyen" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">在Twitter上关注我</strong> </a>了解Angular、JavaScript &amp; WebDevelopment的最新内容👐</p></div></div>    
</body>
</html>