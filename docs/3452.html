<html>
<head>
<title>Laravel and Vue: Creating a Portfolio website with a CRUD admin panel — Chapter 12</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第12章</h1>
<blockquote>原文：<a href="https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-12-f35917a9d5c8?source=collection_archive---------8-----------------------#2019-12-18">https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-12-f35917a9d5c8?source=collection_archive---------8-----------------------#2019-12-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="27b9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">重构组合控制器</h2></div><p id="d413" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们已经构建了能够执行CRUD功能的PortfolioEditor。</p><p id="7411" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">创建</strong> —我们可以使用<strong class="kk iu"> addItemModal添加一个投资组合项目🌟</strong></p><p id="92ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> READ </strong> —我们可以从route中获取投资组合项目并显示到<strong class="kk iu"> PortfolioEditorTable中🌟</strong></p><p id="1fa2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">更新</strong> —我们可以使用<strong class="kk iu">更新项目模型来更改投资组合项目的详细信息🌟</strong></p><p id="0024" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">删除</strong> —使用DELETE和<strong class="kk iu"> confirmDeleteModal </strong>删除投资组合项目🌟</p><p id="8b6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在需要重构项目组合控制器。第一件事是删除任何空函数。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="a2e8" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">删除空函数</h2><p id="c73f" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">如果我们看一看<strong class="kk iu">PortfolioController.php</strong>，我们可以看到有空的函数。我们可以去掉这些功能。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="796b" class="ll lm it mo b gy ms mt l mu mv">/̶*̶*̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶ ̶S̶h̶o̶w̶ ̶t̶h̶e̶ ̶f̶o̶r̶m̶ ̶f̶o̶r̶ ̶c̶r̶e̶a̶t̶i̶n̶g̶ ̶a̶ ̶n̶e̶w̶ ̶r̶e̶s̶o̶u̶r̶c̶e̶.̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶ ̶@̶r̶e̶t̶u̶r̶n̶ ̶\̶I̶l̶l̶u̶m̶i̶n̶a̶t̶e̶\̶H̶t̶t̶p̶\̶R̶e̶s̶p̶o̶n̶s̶e̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶/̶<br/>̶ ̶ ̶ ̶ ̶p̶u̶b̶l̶i̶c̶ ̶f̶u̶n̶c̶t̶i̶o̶n̶ ̶c̶r̶e̶a̶t̶e̶(̶)̶<br/>̶ ̶ ̶ ̶ ̶{̶<br/>̶ ̶ ̶ ̶ ̶ ̶ ̶ ̶ ̶/̶/̶<br/>̶ ̶ ̶ ̶ ̶}̶</span></pre><p id="85ad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以使注释更具体地针对我们的代码。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="6aca" class="ll lm it mo b gy ms mt l mu mv"><strong class="mo iu">/̶*̶*̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶ ̶D̶i̶s̶p̶l̶a̶y̶ ̶a̶ ̶l̶i̶s̶t̶i̶n̶g̶ ̶o̶f̶ ̶t̶h̶e̶ ̶r̶e̶s̶o̶u̶r̶c̶e̶.̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶<br/>̶ ̶ ̶ ̶ ̶ ̶*̶ ̶@̶r̶e̶t̶u̶r̶n̶ ̶\̶I̶l̶l̶u̶m̶i̶n̶a̶t̶e̶\̶H̶t̶t̶p̶\̶R̶e̶s̶p̶o̶n̶s̶e̶<br/>̶*̶/̶</strong></span><span id="b453" class="ll lm it mo b gy mw mt l mu mv"><strong class="mo iu"><em class="mx">// Display a listing of all the portfolio items.</em></strong><em class="mx"><br/>public function </em>index() {<br/>    <em class="mx">return </em>PortfolioItem::<em class="mx">all</em>();<br/>}</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="6c5f" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">将函数移动到单独的文件中</h2><p id="3b0e" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">如果我们查看api.php文件，我们可以看到以下与ProfileEditor组件相关的路线</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="01f8" class="ll lm it mo b gy ms mt l mu mv">Route::<em class="mx">get</em>('/portfolio', 'PortfolioController@index');<br/>Route::<em class="mx">post</em>('/portfolio', 'PortfolioController@store');<br/>Route::<em class="mx">post</em>('/portfolio/{id}', 'PortfolioController@update');<br/>Route::<em class="mx">delete</em>('/portfolio/{id}', 'PortfolioController@destroy');</span></pre><p id="318f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该保留<strong class="kk iu">索引</strong>、<strong class="kk iu">储存</strong>、<strong class="kk iu">更新</strong>和<strong class="kk iu">销毁</strong>。其他函数可以放在单独的文件中。</p><p id="08c6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，让我们创建单独的文件</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="4c7c" class="ll lm it mo b gy ms mt l mu mv"><strong class="mo iu">php artisan make:controller PortfolioItemStorer</strong></span></pre><p id="9022" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们在控制器文件夹中有一个名为<strong class="kk iu">PortfolioItemStorer.php</strong>的文件</p><p id="44d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们要转移到这个文件中的函数是</p><ul class=""><li id="da92" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nd ne nf ng bi translated">resizeAndStore</li><li id="e2f4" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">makeSmallImage</li><li id="edda" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">制作大型图像</li><li id="8a2c" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">商店详情</li></ul><p id="f09f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PortfolioItemStorer.php现在👇</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="c12a" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">&lt;?php<br/><br/>namespace </em>App\Http\Controllers;<br/><br/><em class="mx">use </em>App\PortfolioItem;<br/><em class="mx">use </em>Illuminate\Http\Request;<br/><br/><em class="mx">class </em>PortfolioItemStorer <em class="mx">extends </em>Controller<br/>{<br/>    <em class="mx">private function </em>resizeAndStore($file, $hashName) {<br/>        $img = Image::<em class="mx">make</em>($file);<br/>        $img-&gt;backup();<br/>        $this-&gt;makeSmallImage($img, $hashName);<br/>        $img-&gt;reset();<br/>        $this-&gt;makeLargeImage($img, $hashName);<br/>    }<br/><br/>    <em class="mx">private function </em>makeSmallImage($img, $hashName) {<br/>        $dir = 'public/itempics/small/';<br/>        $fullpath = $dir . $hashName;<br/>        $contents = $img-&gt;resize(320, 240)-&gt;encode();<br/>        Storage::<em class="mx">put</em>($fullpath, $contents);<br/>    }<br/><br/>    <em class="mx">private function </em>makeLargeImage($img, $hashName) {<br/>        $dir = 'public/itempics/large/';<br/>        $fullpath = $dir . $hashName;<br/>        $contents = $img-&gt;resize(640, 480)-&gt;encode();<br/>        Storage::<em class="mx">put</em>($fullpath, $contents);<br/>    }<br/><br/>    <em class="mx">private function </em>storeDetails($hashName, $item) {<br/>        $item-&gt;img_path = $hashName;<br/>        $item-&gt;description = request()-&gt;description;<br/>        $item-&gt;name = request()-&gt;name;<br/>        $item-&gt;save();<br/>    }<br/>} </span></pre><p id="808d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该将<code class="fe nm nn no mo b"><strong class="kk iu"><em class="mx">use </em>Intervention\Image\Image;</strong></code>添加到顶部，因为在<strong class="kk iu">resizeAndStore(</strong>$ img =<strong class="kk iu">Image</strong>::<em class="mx">make</em>($ file)中需要它；)和<code class="fe nm nn no mo b"><strong class="kk iu"><em class="mx">use</em> Storage</strong></code> <strong class="kk iu"> </strong>，因为在makeSmallImage和makeLargeImage函数中都需要。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="bf4f" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">use </em>App\PortfolioItem;<br/><em class="mx">use </em>Illuminate\Http\Request;<br/><strong class="mo iu"><em class="mx">use </em>Intervention\Image\Image;<br/><em class="mx">use</em> Storage</strong></span></pre><p id="f9bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还应该删除前两个导入(<code class="fe nm nn no mo b"><strong class="kk iu">use</strong></code>行)，因为它们在PortfolioItemStorer中的任何地方都没有使用</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="3343" class="ll lm it mo b gy ms mt l mu mv"><strong class="mo iu">u̶s̶e̶ ̶A̶p̶p̶\̶P̶o̶r̶t̶f̶o̶l̶i̶o̶I̶t̶e̶m̶;̶<br/>u̶s̶e̶ ̶I̶l̶l̶u̶m̶i̶n̶a̶t̶e̶\̶H̶t̶t̶p̶\̶R̶e̶q̶u̶e̶s̶t̶;̶</strong><br/><em class="mx">use </em>Intervention\Image\Image;<br/><em class="mx">use</em> Storage</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="ccc9" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">如何在单独的文件中调用方法</h2><figure class="mj mk ml mm gt nq gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi np"><img src="../Images/160b328dff2e36a6577a89d4768be154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xi5aQ_YiLfsVRE25"/></div></div><figcaption class="nx ny gj gh gi nz oa bd b be z dk translated">由<a class="ae ob" href="https://unsplash.com/@ptrikutam?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">帕万·特里库塔姆</a>在<a class="ae ob" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5162" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们在同一个文件中调用函数时，我们使用<code class="fe nm nn no mo b"><strong class="kk iu">$this-&gt;</strong></code> <strong class="kk iu">。</strong>到<strong class="kk iu"> </strong>使用名为<strong class="kk iu"> PortfolioItemStorer </strong>的单独文件，我们必须使用<code class="fe nm nn no mo b"><strong class="kk iu">PortfolioItemStorer::</strong></code>。</p><p id="0d92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们相应地修改PortfolioController的<code class="fe nm nn no mo b"><strong class="kk iu">store</strong></code>函数。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="cf0d" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">public function </em><strong class="mo iu">store</strong>(StorePortfolioItemRequest $request) {<br/>    $file = $request-&gt;itempic;<br/>    $hashName = $file-&gt;hashName();<br/>    <strong class="mo iu">$̶t̶h̶i̶s̶-̶&gt;̶r̶e̶s̶i̶z̶e̶A̶n̶d̶S̶t̶o̶r̶e̶(̶$̶f̶i̶l̶e̶,̶ ̶$̶h̶a̶s̶h̶N̶a̶m̶e̶)̶;̶</strong><br/>    <strong class="mo iu">PortfolioItemStorer::<em class="mx">resizeAndStore</em>($file, $hashName);</strong><br/>    $item = <em class="mx">new </em>PortfolioItem();<br/>    <strong class="mo iu">$̶t̶h̶i̶s̶-̶&gt;̶s̶t̶o̶r̶e̶D̶e̶t̶a̶i̶l̶s̶(̶$̶h̶a̶s̶h̶N̶a̶m̶e̶,̶ ̶$̶i̶t̶e̶m̶)̶;̶</strong><br/>    <strong class="mo iu">PortfolioItemStorer::<em class="mx">storeDetails</em>($hashName, $item);</strong><br/>}</span></pre><p id="af12" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也应该以同样的方式修改<code class="fe nm nn no mo b"><strong class="kk iu">update</strong></code>函数</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="e4bf" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">public function </em><strong class="mo iu">update</strong>(UpdatePortfolioItemRequest $request, $id) {<br/>    $item = PortfolioItem::<em class="mx">find</em>($id);<br/>    <em class="mx">if </em>($request-&gt;hasFile('itempic')) {<br/>        $file = $request-&gt;itempic;<br/>        $hashName = $file-&gt;hashName();<br/>        <strong class="mo iu">$̶t̶h̶i̶s̶-̶&gt;̶r̶e̶s̶i̶z̶e̶A̶n̶d̶S̶t̶o̶r̶e̶(̶$̶f̶i̶l̶e̶,̶ ̶$̶h̶a̶s̶h̶N̶a̶m̶e̶)̶;̶</strong><br/>        <strong class="mo iu">PortfolioItemStorer::<em class="mx">resizeAndStore</em>($file, $hashName);</strong><br/>        $item-&gt;img_path = $hashName;<br/>    }<br/>    <em class="mx">if </em>($request-&gt;filled('description')) $item-&gt;description = request()-&gt;description;<br/>    <em class="mx">if </em>($request-&gt;description === <em class="mx">null</em>) $item-&gt;description = '';<br/>    $item-&gt;name = $request-&gt;name;<br/>    $item-&gt;save();<br/>}</span></pre><p id="b827" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个函数正在调用<strong class="kk iu">portfolio item store</strong>的<code class="fe nm nn no mo b"><strong class="kk iu">resizeAndStore</strong></code>方法，这是:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="b30e" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">private function </em>resizeAndStore($file, $hashName) {<br/>    $img = Image::<em class="mx">make</em>($file);<br/>    $img-&gt;backup();<br/>    $this-&gt;makeSmallImage($img, $hashName);<br/>    $img-&gt;reset();<br/>    $this-&gt;makeLargeImage($img, $hashName);<br/>}</span></pre><p id="4b4e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">重要的</strong> : <code class="fe nm nn no mo b"><strong class="kk iu">private</strong></code>函数<strong class="kk iu">无法从其他文件</strong>中调用，我们必须将这些函数改为<code class="fe nm nn no mo b"><strong class="kk iu">public static</strong></code>。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="2a1e" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">将私有静态更改为公共静态</h2><p id="eafb" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">应将<strong class="kk iu"> resizeAndStore </strong>函数修改为<code class="fe nm nn no mo b"><strong class="kk iu"> public static </strong></code>函数，而不是<code class="fe nm nn no mo b"><strong class="kk iu">private</strong></code>函数。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="a34c" class="ll lm it mo b gy ms mt l mu mv"><strong class="mo iu">p̶r̶i̶v̶a̶t̶e̶</strong> <strong class="mo iu"><em class="mx">public</em></strong><em class="mx"> </em><strong class="mo iu"><em class="mx">static</em></strong><em class="mx"> function </em>resizeAndStore($file, $hashName) {<br/>    $img = Image::<em class="mx">make</em>($file);<br/>    $img-&gt;backup();<br/>    $this-&gt;makeSmallImage($img, $hashName);<br/>    $img-&gt;reset();<br/>    $this-&gt;makeLargeImage($img, $hashName);<br/>}</span></pre><p id="8e1d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> storeDetails </strong>也是从store()函数调用的，所以我们也需要使<code class="fe nm nn no mo b"><strong class="kk iu">public static</strong></code> <strong class="kk iu"> </strong>也是如此。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="3cb2" class="ll lm it mo b gy ms mt l mu mv"><strong class="mo iu">p̶r̶i̶v̶a̶t̶e̶</strong> <strong class="mo iu"><em class="mx">public</em></strong><em class="mx"> </em><strong class="mo iu"><em class="mx">static </em></strong><em class="mx">function </em>storeDetails($hashName, $item) {<br/>    $item-&gt;img_path = $hashName;<br/>    $item-&gt;description = request()-&gt;description;<br/>    $item-&gt;name = request()-&gt;name;<br/>    $item-&gt;save();<br/>}</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="bfb8" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">调用同一类的静态函数</h2><p id="8a6f" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">我们需要将resizeAndStore的<code class="fe nm nn no mo b"><strong class="kk iu">$this-&gt;</strong></code> <strong class="kk iu"> </strong>改为<code class="fe nm nn no mo b"><strong class="kk iu">self::</strong></code></p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="849d" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">public static function </em>resizeAndStore($file, $hashName) {<br/>    $img = Image::make($file);<br/>    $img-&gt;backup();<br/>    <strong class="mo iu"><em class="mx">self</em></strong>::<em class="mx">makeSmallImage</em>($img, $hashName);<br/>    $img-&gt;reset();<br/>    <strong class="mo iu"><em class="mx">self</em></strong>::<em class="mx">makeLargeImage</em>($img, $hashName);<br/>}</span></pre><p id="5695" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该将makeSmallImage和makeLargeImage从<code class="fe nm nn no mo b"><strong class="kk iu">private</strong></code>函数改为<code class="fe nm nn no mo b"><strong class="kk iu">private static</strong></code></p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="4efa" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">private </em><strong class="mo iu"><em class="mx">static</em></strong><em class="mx"> function </em>makeSmallImage($img, $hashName) {<br/>    $dir = 'public/itempics/small/';<br/>    $fullpath = $dir . $hashName;<br/>    $contents = $img-&gt;resize(320, 240)-&gt;encode();<br/>    Storage::<em class="mx">put</em>($fullpath, $contents);<br/>}<br/><br/><em class="mx">private </em><strong class="mo iu"><em class="mx">static</em></strong><em class="mx"> function </em>makeLargeImage($img, $hashName) {<br/>    $dir = 'public/itempics/large/';<br/>    $fullpath = $dir . $hashName;<br/>    $contents = $img-&gt;resize(640, 480)-&gt;encode();<br/>    Storage::<em class="mx">put</em>($fullpath, $contents);<br/>}</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="e45d" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">检查使用线路</h2><p id="46ab" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated"><strong class="kk iu">PortfolioItemStorer.php</strong>的<code class="fe nm nn no mo b"><strong class="kk iu">use</strong></code>行应该是:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="0bc1" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">use </em>Intervention\Image\Facades\Image;<br/><em class="mx">use </em>Storage;</span></pre><p id="3127" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">PortfolioController.php</strong>的<code class="fe nm nn no mo b"><strong class="kk iu">use</strong></code>线应为:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="300c" class="ll lm it mo b gy ms mt l mu mv"><em class="mx">use </em>App\Http\Requests\StorePortfolioItemRequest;<br/><em class="mx">use </em>App\Http\Requests\UpdatePortfolioItemRequest;<br/><em class="mx">use </em>App\PortfolioItem;</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="947d" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">重构PortfolioController概述</h2><p id="604e" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">在这里的重构过程中，我们有:</p><p id="2950" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-移除了空函数<br/> -移除了与一个独立文件间接相关的函数</p><p id="c4d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-使用<code class="fe nm nn no mo b"><strong class="kk iu">FileNameHere:: </strong></code>而不是<code class="fe nm nn no mo b"><strong class="kk iu">$this</strong></code> <br/>调用独立文件中的方法-将函数从私有改为公共静态，以便它们可以从其他文件中调用</p><p id="6f3c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-调用同一类的静态函数，即将<code class="fe nm nn no mo b"><strong class="kk iu">$this</strong></code>更改为<code class="fe nm nn no mo b"><strong class="kk iu">self::</strong></code></p><p id="667f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-检查了<code class="fe nm nn no mo b"><strong class="kk iu">use</strong></code>线路，确保不多也不少于<strong class="kk iu">条需要的线路</strong></p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="b6b0" class="oc lm it bd ln od oe of lq og oh oi lt jz oj ka lw kc ok kd lz kf ol kg mc om bi translated">列出清单—第12章结束</h1><p id="1cce" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">我们可以从列表中勾掉<strong class="kk iu">重构PortfolioController </strong>。</p><ul class=""><li id="1014" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nd ne nf ng bi translated">前端验证(用于更新functionality)☑️</li><li id="00bb" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">后端验证(用于更新functionality)☑️</li><li id="50c6" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">更新和删除功能(阅读是done)☑️</li></ul><p id="2b76" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><ul class=""><li id="b73e" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nd ne nf ng bi translated">重构PortfolioController☑️</li></ul><p id="66b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><ul class=""><li id="c128" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nd ne nf ng bi translated">带文本的图像(Portfolio.vue)</li><li id="b0e4" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">具有更大图像和描述的模型(Portfolio.vue)</li><li id="ddd2" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">modal (Portfolio.vue)上的关闭按钮</li></ul><p id="70cf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在第13章，我们将建立投资组合的公共视图。</p><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-13-981b0cc36c34"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第13章</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">建立投资组合的公共视图</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">itnext.io</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe nv oq"/></div></div></a></div></div></div>    
</body>
</html>