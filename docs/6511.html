<html>
<head>
<title>Modern C++ in Advent of Code: Day6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代C++代码的出现:第6天</h1>
<blockquote>原文：<a href="https://itnext.io/modern-c-in-advent-of-code-day6-aca753568b8c?source=collection_archive---------2-----------------------#2021-12-06">https://itnext.io/modern-c-in-advent-of-code-day6-aca753568b8c?source=collection_archive---------2-----------------------#2021-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3472" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是代码问世的第六天。今天，我们将把指数增长转化为常数空间解，并看看编译时编程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/037524b607f0cd3acfb6eba2219b6463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxPAWnKxBRH_TPRpD4ihcg.png"/></div></div></figure><p id="021f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一如既往，请先尝试解决问题，然后再看解决方案。对于本系列中的所有文章，<a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">查看此列表</a>。</p><h1 id="774a" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第六天:第一部分和第二部分</h1><p id="4c29" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们的任务是模拟每七天繁殖一次的灯笼鱼种群(新一代需要额外的两个周期来“成长”)。不幸的是，模拟这样一个系统迫使我们避免模拟每个个体，因为我们会很快耗尽内存。</p><p id="649d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么，我们如何重新表述这个问题，这样我们就不需要跟踪每个人了？考虑到具有相同内部定时器的所有lanternfish行为相同，因此我们可以跟踪具有内部定时器的每个状态的lanternfish的数量，该状态将永远是<code class="fe mb mc md me b">0..8</code>。在每一天，我们删除第一个元素，即繁殖镧系鱼的数量，将所有其他镧系鱼转移到更低的内部状态，并将繁殖镧系鱼添加到状态<code class="fe mb mc md me b">6</code>(对于父母)和<code class="fe mb mc md me b">8</code>(对于后代)。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="27c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用<code class="fe mb mc md me b">std::deque</code>来简化状态转换。</p><p id="8985" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于测试，我们有一个简单的测试来检查灯笼鱼是否正确繁殖，然后使用来自AoC的测试数据:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="d69c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实现遵循概述的结构:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="1451" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要小心，因为我们很容易用<code class="fe mb mc md me b">uint32_t</code>溢出，这就是为什么我们用<code class="fe mb mc md me b">UINT64_C(0)</code>实例化<code class="fe mb mc md me b">std::accumulate</code>，强制运行总和为<code class="fe mb mc md me b">uint64_t</code>(第19行)。我们还在复制时检查溢出(第26行)。</p><p id="f076" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在我们的main中，我们读取一行输入并循环所需的代数:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h1 id="5c46" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第6天:编译时解决方案</h1><p id="14df" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">因为今天问题的解决方案非常简单，所以我决定提供一个额外的好处，一个在编译时完全计算的解决方案。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="8c28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了现代的C++，我们可以避免过去典型的模板代码。Constexpr函数现在允许高表达性，并且许多标准库设施都可以作为<code class="fe mb mc md me b">constexpr</code>使用。</p><h1 id="1a86" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">链接和技术说明</h1><p id="8d97" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">每日解决方案存储库位于:<a class="ae kl" href="https://github.com/HappyCerberus/moderncpp-aoc-2021" rel="noopener ugc nofollow" target="_blank">https://github.com/HappyCerberus/moderncpp-aoc-2021</a>。</p><p id="f894" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看此列表，了解《代码降临日》的其他相关文章。</p><p id="be97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请不要忘记亲自尝试一下<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">代码</a>的问世。</p><h1 id="18ad" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">感谢您的阅读</h1><p id="3baa" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">感谢您阅读这篇文章。你喜欢吗？</p><p id="86a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还在T4的YouTube上发布视频。你有问题吗？在Twitter或LinkedIn上联系我。</p></div></div>    
</body>
</html>