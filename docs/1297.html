<html>
<head>
<title>How to Write Your Own Reusable React Component Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何编写自己的可重用React组件库</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-write-your-own-reusable-react-component-library-a57dc7c9a210?source=collection_archive---------0-----------------------#2018-09-03">https://itnext.io/how-to-write-your-own-reusable-react-component-library-a57dc7c9a210?source=collection_archive---------0-----------------------#2018-09-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/de61e598a58d23070b2b7889834448a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hnfJ-qA3ZBs0a3_o"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@sapegin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Artem Sapegin </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的“棕色马克杯旁的MacBOok Pro”</figcaption></figure><p id="8996" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您是否发现自己在多个项目中反复使用一些相同的组件？这是非常常见的，花一点时间将它们编译成一个可重用的项目，您可以节省时间并提高您在未来项目中的效率。</p><p id="4188" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我将一步一步地创建一个样板文件，你可以用它来启动你自己的组件库。正如我在上一篇文章中提到的那样，<a class="ae kc" href="https://medium.com/@cwlsn/github-personal-project-7d9d40b62e39" rel="noopener">我还将开发需求并在此过程中提出拉取请求。</a></p><p id="ac2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们开始编码之前，我对新项目的第一条规则是总是想出一个名字和标志。它帮助我参与到项目中，并完成最后10%的工作，这可能需要80%的时间。此外，一个相关的表情符号可以帮助你将来计划做的任何品牌或营销。我的大多数同事认为我拿这种事情开玩笑。我是认真的。</p><p id="7867" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你有了自己酷的名字和logo，继续在GitHub上创建你的库。我把我的叫做冲洗-反应。就像冲洗，反应，重复。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/3e8ddd1feca5a30f685b15ade50161c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*JGqYxhSOEP38Q2skgVzwvg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">一滴和一个周期图标…漂亮的鼻子。</figcaption></figure><p id="dbe3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以做这个东西了。第一步是设置<a class="ae kc" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack </a>来将我们的组件构建到一个可以被其他项目导入的文件中。在本例中，我们将在最后向<a class="ae kc" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>发布。</p><h1 id="a9c2" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">设置Webpack</h1><p id="047a" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">Webpack可能相当吓人。在使用它几年后，我仍然喜欢尽可能简单的安装文件。这就是我们在这里要做的！您可以查看我的回购第一期<a class="ae kc" href="https://github.com/cwlsn/rinse-react/issues/1" rel="noopener ugc nofollow" target="_blank">中列出的要求，因此我将只讨论基本目标:</a></p><ol class=""><li id="e20b" class="mj mk iq kf b kg kh kk kl ko ml ks mm kw mn la mo mp mq mr bi translated">接受一个文件，比如一个<code class="fe ms mt mu mv b">src/index.js</code>类型的文件，输出一个文件，比如<code class="fe ms mt mu mv b">dist/rinse.js</code>。</li><li id="9633" class="mj mk iq kf b kg mw kk mx ko my ks mz kw na la mo mp mq mr bi translated">处理所有我们想要的酷文件类型。</li><li id="ffac" class="mj mk iq kf b kg mw kk mx ko my ks mz kw na la mo mp mq mr bi translated">偷偷加入一些新的项目管理。</li><li id="4458" class="mj mk iq kf b kg mw kk mx ko my ks mz kw na la mo mp mq mr bi translated">不要忘记<code class="fe ms mt mu mv b">npm init</code>，因为我们正从零开始！</li></ol><p id="9de2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<a class="ae kc" href="https://github.com/cwlsn/rinse-react/pull/2" rel="noopener ugc nofollow" target="_blank">第一次拉取请求</a>中可以找到对我们的基本repo(只是GitHub的init中的许可证和自述文件)的更改。</p><h1 id="b988" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">创建我们的第一个组件</h1><p id="98d7" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">构建这些配套样式库的好处之一是，我们可以很快开始编写一些真正的代码。我们希望确保我们可以随时扩展这个库，所以我喜欢从一开始就采用一种相当健壮的方法来组织文件夹。你可以在第一期中查看这个任务<a class="ae kc" href="https://github.com/cwlsn/rinse-react/issues/3" rel="noopener ugc nofollow" target="_blank">的需求，但这里是我通常的做法:</a></p><pre class="lc ld le lf gt nb mv nc nd aw ne bi"><span id="e918" class="nf lh iq mv b gy ng nh l ni nj">src<br/>·· components<br/>···· Button<br/>······ index.js (export file)<br/>······ Button.js (actual component code)<br/>······ README.md (document each component!)</span></pre><p id="b6d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终还会有一些其他的东西在里面，比如单元测试，可能还有一些故事书文件(或者其他可视化测试辅助工具)。一开始，用一个专用的导出文件来导入然后导出一个组件似乎有点大材小用，但是一旦您添加了许多依赖项并将组件封装在翻译和状态中，它就会派上用场。如果您想稍后介绍TypeScript，这也会有所帮助，但那是另一个话题了。</p><p id="85ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想仔细阅读第一部分的内容和某些方面的解释，<a class="ae kc" href="https://github.com/cwlsn/rinse-react/pull/4" rel="noopener ugc nofollow" target="_blank">查看拉动请求</a>。</p><h1 id="ea76" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">怎样才能看到自己的作品？</h1><p id="b054" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">开发这些组件时的一个问题是，在其他项目中使用它们会使链接和本地开发变得不可靠。对我们来说幸运的是，有一些方法可以记录和可视化组件，这样你就可以独立于其他项目进行工作。当你完成并推上你的甜蜜共享组件库时，你就可以知道你的应用程序中会有什么了。</p><p id="19fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有一些方法，一些著名的方法包括<a class="ae kc" href="https://github.com/mdx-js/mdx" rel="noopener ugc nofollow" target="_blank"> MDX </a>和<a class="ae kc" href="https://github.com/styleguidist/react-styleguidist" rel="noopener ugc nofollow" target="_blank"> Styleguidist </a>，但是对于这个目的，我认为<a class="ae kc" href="https://github.com/storybooks/storybook" rel="noopener ugc nofollow" target="_blank">故事书</a>最适合。为了开始这段旅程，我一如既往地提出了一个问题。</p><p id="2add" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Storybook的最新版本4.0.0 alpha支持Babel 7和Webpack 4，所以我们将使用现有技术的绝对领先优势。随着时间的推移和版本变得更加稳定，我在这里作为样板文件开始的开源项目将会更新。</p><p id="3a49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要查看Storybook是如何配置的，您可以<a class="ae kc" href="https://github.com/cwlsn/rinse-react/pull/6" rel="noopener ugc nofollow" target="_blank">查看pull请求</a>。</p><h1 id="bbb2" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">开发和发布</h1><p id="833f" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">在这一点上，我们实际上已经拥有了开始制造东西所需的所有工具。我们有一个可以在屏幕上看到的示例组件。我喜欢这个“所有组件的东西都放在同一个文件夹中”的业务的原因之一是因为一个叫做<a class="ae kc" href="https://github.com/diegohaz/generact" rel="noopener ugc nofollow" target="_blank"> Generact </a>的工具。这将允许您快速复制和智能重命名组件，包括它们的导出和故事。如果您有其他文件，比如样式或者单元测试，它们将会被类似地复制。</p><p id="2378" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们如何使用这些新组件？对于这个例子，我已经向npm发布了我的回购。你可以在它的<a class="ae kc" href="https://www.npmjs.com/package/rinse-react" rel="noopener ugc nofollow" target="_blank"> npm/rinse-react页面</a>上查看。</p><p id="ad2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以将此软件包作为依赖项安装:</p><pre class="lc ld le lf gt nb mv nc nd aw ne bi"><span id="6e2f" class="nf lh iq mv b gy ng nh l ni nj">$ npm i -S rinse-react</span></pre><p id="bd2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在React项目中，尝试放置一个按钮。</p><pre class="lc ld le lf gt nb mv nc nd aw ne bi"><span id="1276" class="nf lh iq mv b gy ng nh l ni nj">// In your component<br/>import { Button } from 'rinse-react';</span><span id="3b2e" class="nf lh iq mv b gy nk nh l ni nj">// In your render function<br/>&lt;Button type="submit" onClick={this.submit}&gt;Hello!&lt;/Button&gt;</span></pre><p id="d88c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您已经克隆了自己的副本并对其进行了重命名，那么在第一次发布时，您只需运行:</p><pre class="lc ld le lf gt nb mv nc nd aw ne bi"><span id="e101" class="nf lh iq mv b gy ng nh l ni nj">$ npm login<br/># Enter your username, password and email for npmjs.com<br/>$ npm publish</span></pre><p id="360b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于未来版本，根据您的更改，您可以升级版本:</p><pre class="lc ld le lf gt nb mv nc nd aw ne bi"><span id="b853" class="nf lh iq mv b gy ng nh l ni nj">$ npm version [major|minor|patch]<br/>$ npm publish</span></pre><p id="0782" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的库现在位于云中，可以在任何JavaScript项目中作为依赖项使用。</p><h1 id="ac0f" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">接下来呢？</h1><p id="659c" class="pw-post-body-paragraph kd ke iq kf b kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw mi ky kz la ij bi translated">在我们新创建的图书馆中，有相当多的地方需要改进。这篇文章的目标(在Git中，从tag 1.0.0到更早的版本)是建立并运行一个MVP组件库。你可以扩大你自己的图书馆，从几件事开始:</p><ul class=""><li id="ec92" class="mj mk iq kf b kg kh kk kl ko ml ks mm kw mn la nl mp mq mr bi translated"><a class="ae kc" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">打字稿</a></li><li id="f0dd" class="mj mk iq kf b kg mw kk mx ko my ks mz kw na la nl mp mq mr bi translated"><a class="ae kc" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank">玩笑</a>测试</li><li id="f0b6" class="mj mk iq kf b kg mw kk mx ko my ks mz kw na la nl mp mq mr bi translated">CI喜欢<a class="ae kc" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> Travis </a>或<a class="ae kc" href="https://circleci.com/" rel="noopener ugc nofollow" target="_blank"> Circle </a></li><li id="6077" class="mj mk iq kf b kg mw kk mx ko my ks mz kw na la nl mp mq mr bi translated">一些类似于<a class="ae kc" href="https://docsify.js.org/#/" rel="noopener ugc nofollow" target="_blank"> docsify </a>的静态文档</li></ul><p id="8a68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想到一些很酷的东西要添加，请发微博给我！编码快乐！</p></div></div>    
</body>
</html>