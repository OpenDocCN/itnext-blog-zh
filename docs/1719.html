<html>
<head>
<title>Long parameter lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">长参数列表</h1>
<blockquote>原文：<a href="https://itnext.io/long-parameter-lists-d7a50f0b4fac?source=collection_archive---------4-----------------------#2019-01-09">https://itnext.io/long-parameter-lists-d7a50f0b4fac?source=collection_archive---------4-----------------------#2019-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/4191ee60a0455e1770dfa13f421fd09d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUqQOnQYyJLRtu3QIdu06g.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">马库斯·斯皮斯克在<a class="ae jd" href="https://unsplash.com/photos/xekxE_VR0Ec?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><div class=""/><p id="8fcd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，假设我们有一个<code class="fe lb lc ld le b">UIButton</code>子类，我们希望它可以在调用点定制，所以我们向它的<code class="fe lb lc ld le b">init</code>方法添加了两个参数:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="2e4f" class="ln lo jg le b gy lp lq l lr ls">final class Button: UIButton { <br/>    init(textColor: UIColor, borderColor: UIColor) <br/>} </span><span id="d98c" class="ln lo jg le b gy lt lq l lr ls">// ... </span><span id="1f87" class="ln lo jg le b gy lt lq l lr ls">let button = Button(textColor: .darkText, <br/>                    borderColor: .darkText)</span></pre><p id="6f72" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来很好。</p><p id="ebc7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">过了一段时间，需要定制它的背景颜色，这时我们需要另一个参数:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="e915" class="ln lo jg le b gy lp lq l lr ls">final class Button: UIButton { <br/>    init(textColor: UIColor, borderColor: UIColor, backgroundColor: UIColor) <br/>} </span><span id="2c29" class="ln lo jg le b gy lt lq l lr ls">// ... </span><span id="6cea" class="ln lo jg le b gy lt lq l lr ls">let button = Button(textColor: .white,<br/>                    borderColor: .white, <br/>                    backgroundColor: .darkText)</span></pre><p id="f27a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">仍然没有那么糟糕，尽管我开始争论。</p><p id="1cef" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">又过了一段时间，我们现在需要让它变大或变小，有圆角或没有圆角，并且有时在触摸时有动画效果。再添加三个参数将会阻塞实现站点<em class="lu">和</em>调用站点。</p><p id="6816" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以添加默认参数，以使调用网站更漂亮，但这仍然不是我们所能做到的最好的。如果我们将所有这些参数包装在一个<code class="fe lb lc ld le b">Config</code>对象中并用于<code class="fe lb lc ld le b">init</code>会怎么样？</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="b7de" class="ln lo jg le b gy lp lq l lr ls">final class Button: UIButton { <br/>    init(config: Config) <br/>} </span><span id="f1c3" class="ln lo jg le b gy lt lq l lr ls">extension Button { </span><span id="f387" class="ln lo jg le b gy lt lq l lr ls">    struct Config { <br/>        var textColor: UIColor = .darkText <br/>        var borderColor: UIColor = .darkText <br/>        var backgroundColor: UIColor? = nil <br/>        var animatesOnTouch = false <br/>        var cornerRadius: CGFloat? = nil <br/>    } <br/>} </span><span id="0fd6" class="ln lo jg le b gy lt lq l lr ls">// ... </span><span id="e23d" class="ln lo jg le b gy lt lq l lr ls">let button1 = Button(config: Button.Config()) </span><span id="a6f2" class="ln lo jg le b gy lt lq l lr ls">var config = Button.Config() <br/>config.textColor = .white<br/>config.borderColor = .white <br/>config.backgroundColor = .darkText <br/>config.animatesOnTouch = true <br/>config.cornerRadius = 8 </span><span id="a897" class="ln lo jg le b gy lt lq l lr ls">let button2 = Button(config: config)</span></pre><p id="d358" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">init</code>是干净的，调用点也是干净的，我们只在需要的时候创建一个定制的<code class="fe lb lc ld le b">Config</code>对象，并且只设置我们需要的属性。</p><p id="9d6d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来好多了，不是吗？几乎任何语言都可以使用相同的方法。</p><p id="40eb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一个额外的提示，我喜欢嵌套相关的对象，就像我们的例子中的<code class="fe lb lc ld le b">Config</code>。比起<code class="fe lb lc ld le b">ButtonConfig</code>，我更喜欢<code class="fe lb lc ld le b">Button.Config</code>；虽然它们基本上是一样的，从字符的数量到发音，但是嵌套的对象在语义上更正确，更有组织性。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="4e26" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lu">你可以在我的博客上找到更多这样的文章，或者你可以订阅我的</em> <a class="ae jd" href="https://rolandleth.us19.list-manage.com/subscribe?u=0d9e49508950cd57917dd7e87&amp;id=7e4ef109bd" rel="noopener ugc nofollow" target="_blank"> <em class="lu">月报</em> </a> <em class="lu">。最初发表于</em><a class="ae jd" href="https://rolandleth.com/tech/blog/long-parameter-lists" rel="noopener ugc nofollow" target="_blank"><em class="lu">rolandleth.com</em></a><em class="lu">。</em></p></div></div>    
</body>
</html>