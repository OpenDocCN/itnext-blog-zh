<html>
<head>
<title>How to Create Search Engine-friendly Internationalized Web Apps with Angular Universal and ngx-translate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Angular Universal和ngx-translate创建搜索引擎友好的国际化Web应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-search-engine-friendly-internationalized-web-apps-with-angular-universal-and-510c658f2e41?source=collection_archive---------5-----------------------#2019-09-09">https://itnext.io/how-to-create-search-engine-friendly-internationalized-web-apps-with-angular-universal-and-510c658f2e41?source=collection_archive---------5-----------------------#2019-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ae29232799e648eaa5386786c77122f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gPsZ0Y7PlpnfEBMN.jpg"/></div></div></figure><p id="e7a0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">搜索引擎优化(SEO)对于许多有角度的单页应用程序(spa)是很重要的。你可以用Angular Universal建立SEO友好的Angular网站，但是你如何让你的应用程序在你的网站支持的每一种语言中都SEO友好呢？Google、Yandex和百度可能会请求您的页面使用英语、西班牙语、俄语或中文:如何让您的服务器端呈现返回正确的语言？</p><p id="a700" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">答案是<a class="ae kz" href="http://www.ngx-translate.com/" rel="noopener ugc nofollow" target="_blank"> ngx-translate </a>，Angular的国际化(<a class="ae kz" href="https://en.wikipedia.org/wiki/Internationalization_and_localization" rel="noopener ugc nofollow" target="_blank"> i18n </a>)和本地化库。这个模块使得使用翻译文件变得容易，这些文件为客户端和服务器端的渲染提供了正确的语言。这篇文章将告诉你如何使用它。</p><p id="f2eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本帖中，我们将:</p><ul class=""><li id="76c9" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">用一个组件——主页——创建一个角度应用程序</li><li id="c58e" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">使用<a class="ae kz" href="https://angular.io/guide/universal" rel="noopener ugc nofollow" target="_blank"> Angular Universal </a>添加用于SEO目的的服务器端渲染</li><li id="4daf" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">用<a class="ae kz" href="https://github.com/ngx-translate/core" rel="noopener ugc nofollow" target="_blank"> ngx-translate </a>设置四种语言的国际化</li></ul><p id="ef05" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要完成本文中的任务，您需要安装以下软件:</p><ul class=""><li id="ff51" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated"><a class="ae kz" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js和npm</a>(node . js安装也会安装NPM。)</li><li id="6dbc" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated"><a class="ae kz" href="https://cli.angular.io/" rel="noopener ugc nofollow" target="_blank">角度CLI </a></li></ul><h1 id="a469" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">设置Angular项目并运行Hello World！</h1><p id="eb5e" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">每个Angular项目都是从软件包的安装和初始化开始的。在命令提示符下键入以下内容:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="2891" class="na lp it mw b gy nb nc l nd ne">ng new angular-universal-i18n --style css --routing false</span></pre><p id="9097" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">项目初始化后，导航到其目录:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="27a4" class="na lp it mw b gy nb nc l nd ne">cd angular-universal-i18n</span></pre><p id="4fc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">并通过键入以下命令运行应用程序:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="174c" class="na lp it mw b gy nb nc l nd ne">ng serve -o</span></pre><p id="b26e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您应该在控制台中看到以下输出:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="f7c4" class="na lp it mw b gy nb nc l nd ne">** Angular Live Development Server is listening on localhost:4200, open your browser on http://localhost:4200/ **</span><span id="af9e" class="na lp it mw b gy nf nc l nd ne">Date: 2018-10-29T08:58:37.685Z<br/>Hash: cb54e4608cfb1115882b<br/>Time: 7682ms<br/>chunk {main} main.js, main.js.map (main) 10.7 kB [initial] [rendered]<br/>chunk {polyfills} polyfills.js, polyfills.js.map (polyfills) 227 kB [initial] [rendered]<br/>chunk {runtime} runtime.js, runtime.js.map (runtime) 5.22 kB [entry] [rendered]<br/>chunk {styles} styles.js, styles.js.map (styles) 15.9 kB [initial] [rendered]<br/>chunk {vendor} vendor.js, vendor.js.map (vendor) 3.29 MB [initial] [rendered]</span></pre><p id="a8ec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe ng nh ni mw b">-o</code>标志将在您的默认浏览器中打开应用程序。(在Chrome版本63或更高版本中，您必须设置标志来打开没有有效安全证书的HTTP链接和站点，如localhost)。您可以手动导航到命令输出中提供的URL。</p><p id="3016" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您应该会在浏览器中看到以下屏幕:</p><figure class="mr ms mt mu gt ju gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/31a73d1f5f6b3d3f217509e5006914bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*YMuZFDvEKwc4rIiw.png"/></div></figure><h1 id="fb11" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">使用Angular Universal实现服务器端渲染</h1><p id="f2a9" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">现在，我们已经准备好使用<a class="ae kz" href="https://angular.io/guide/universal" rel="noopener ugc nofollow" target="_blank"> Angular Universal </a>将服务器端渲染添加到我们的应用程序中，这是一种在服务器上渲染网页的技术，因此搜索引擎爬虫可以快速轻松地读取您网站的页面。要安装它，请执行以下命令:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="5b07" class="na lp it mw b gy nb nc l nd ne">ng add @ng-toolkit/universal</span></pre><h1 id="af12" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">验证服务器端呈现工作正常</h1><p id="29ee" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">通过运行应用程序并对其执行卷曲请求，检查Angular Universal是否正常工作:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="fff5" class="na lp it mw b gy nb nc l nd ne">npm run build:prod;npm run server</span><span id="2780" class="na lp it mw b gy nf nc l nd ne">curl http://localhost:8080</span></pre><p id="1c9b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您不想使用curl，您可以在浏览器中打开url并检查页面源代码。结果应该是相同的，如下所示:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="848f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您想赶上这一步:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="9c71" class="na lp it mw b gy nb nc l nd ne">git clone <a class="ae kz" href="https://github.com/maciejtreder/angular-universal-i18n.git" rel="noopener ugc nofollow" target="_blank">https://github.com/maciejtreder/angular-universal-i18n.git</a><br/>cd angular-universal-i18n<br/>git co step1<br/>npm install<br/>ng serve -o</span></pre><h1 id="3a0b" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">使用ngx-translate为应用程序添加国际化功能</h1><p id="8fd4" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">让我们让我们的应用程序对世界各地的用户更加友好。为了实现这一点，我们将使用<a class="ae kz" href="https://github.com/ngx-translate/core" rel="noopener ugc nofollow" target="_blank"> ngx-translate库</a>为其添加国际化(i18n)。我们将为网站访问者提供可点击的链接，他们可以使用这些链接在不同的翻译之间进行切换。这些翻译将从。每种语言的json文件由<code class="fe ng nh ni mw b">ngx-translate</code>提供。对于我们的<code class="fe ng nh ni mw b">app.component.html</code>模板中的每个<code class="fe ng nh ni mw b">translate</code>键，一个翻译后的值将被注入。</p><p id="0f82" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">第一步是安装依赖项:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="28d5" class="na lp it mw b gy nb nc l nd ne">npm install @ngx-translate/core @ngx-translate/http-loader</span></pre><p id="96d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为翻译创建以下文件结构:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="dcc1" class="na lp it mw b gy nb nc l nd ne">src/assets/i18n/en.json<br/>src/assets/i18n/es.json<br/>src/assets/i18n/ru.json<br/>src/assets/i18n/zh.json</span></pre><p id="42ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在每个文件中放置下列键值对。对于<code class="fe ng nh ni mw b">src/assets/i18n/en.json</code>:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="041a" class="na lp it mw b gy nb nc l nd ne">{<br/>"Welcome to": "Welcome to",<br/>"Here are some links to help you start": "Here are some links to help you start"<br/>}</span></pre><p id="dda7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe ng nh ni mw b">src/assets/i18n/es.json</code>:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="0397" class="na lp it mw b gy nb nc l nd ne">{<br/>"Welcome to": "Bienvenido a",<br/>"Here are some links to help you start": "Aquí hay algunos enlaces para ayudarte a comenzar"<br/>}</span></pre><p id="115b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe ng nh ni mw b">src/assets/i18n/ru.json</code>:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="2e1b" class="na lp it mw b gy nb nc l nd ne">{<br/>"Welcome to": "Добро пожаловать в",<br/>"Here are some links to help you start": "Вот несколько ссылок, которые помогут вам начать"<br/>}</span></pre><p id="6648" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe ng nh ni mw b">src/assets/i18n/zh.json</code>:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="83f4" class="na lp it mw b gy nb nc l nd ne">{<br/>"Welcome to": "欢迎来到",<br/>"Here are some links to help you start": "以下是一些可帮助您入门的链接"<br/>}</span></pre><p id="6ce3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们提供了四种语言的翻译。现在我们将在应用程序中实现翻译机制。用以下代码替换<code class="fe ng nh ni mw b">src/app/app.browser.module.ts</code>的内容，导入<code class="fe ng nh ni mw b">ngx-translate</code>模块和翻译加载程序:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="24c3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们在这里做的是从<code class="fe ng nh ni mw b">@angular/common/http</code>库中导入<code class="fe ng nh ni mw b">HttpClientModule</code>。我们需要它提供一个<code class="fe ng nh ni mw b">HttpClient</code>，它被<a class="ae kz" href="https://en.wikipedia.org/wiki/Dependency_injection" rel="noopener ugc nofollow" target="_blank">注入</a>到工厂方法中，用于使用HTTP请求加载翻译文件:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="49d1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我们导入TranslateModule并在其中提供我们的加载器:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="bbb3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们还需要将<code class="fe ng nh ni mw b">TranslateModule</code>导入到<code class="fe ng nh ni mw b">src/app/app.module.ts</code>文件中:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2125" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用以下代码替换<code class="fe ng nh ni mw b">src/app/app.component.html</code>模板中的代码，以提供用于语言间切换的翻译键和链接:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1d2e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在浏览器端代码中提供国际化的最后一步是在我们的组件中实现<code class="fe ng nh ni mw b">switchLanguage</code>方法，并为活动区域提供默认翻译。在<code class="fe ng nh ni mw b">src/app/app.component.ts</code>中进行以下更改:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="3161" class="na lp it mw b gy nb nc l nd ne">ng serve -o</span></pre><p id="8e06" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">导航到<a class="ae kz" href="http://localhost:4200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4200 </a>并将所选语言更改为西班牙语后，我们可以看到:</p><figure class="mr ms mt mu gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/945cc435c5d99416e01b3605ac46a3df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xZ5qCfRCk2LgWubh.jpg"/></div></div></figure><p id="7293" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您想赶上这一步:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="9217" class="na lp it mw b gy nb nc l nd ne">git clone <a class="ae kz" href="https://github.com/maciejtreder/angular-universal-i18n.git" rel="noopener ugc nofollow" target="_blank">https://github.com/maciejtreder/angular-universal-i18n.git</a><br/>cd angular-universal-i18n<br/>git co step2<br/>npm install<br/>ng serve -o</span></pre><h1 id="5386" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">添加服务器端国际化</h1><p id="d83a" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">查看我们的客户端实现是否破坏了服务器端的任何东西。通过运行以下命令，在服务器模式下启动应用程序:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="9385" class="na lp it mw b gy nb nc l nd ne">npm run build:prod<br/>npm run server</span></pre><p id="4643" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">导航到<a class="ae kz" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>后，我们可以看到我们的应用程序不再工作:</p><figure class="mr ms mt mu gt ju gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/e51bc5268eb94c8ceddd12a585c39e7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*5930Z2SLkOm-jSSH.png"/></div></figure><p id="9e44" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">可以在控制台中看到更多错误信息:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="ec40" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了解决这个问题，我们也需要在服务器模块中提供<code class="fe ng nh ni mw b">TranslateModule</code>。在<code class="fe ng nh ni mw b">src/app/app.server.module.ts</code>中进行以下更改:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="97ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们还需要在<code class="fe ng nh ni mw b">src/app/app.component.ts</code>中做一些改变，以便在服务器端实现i18n。用以下代码替换内容:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e89e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当以用户代理指定的URI请求页面时，附加代码通过读取用户代理(浏览器或网络爬虫)发送的HTTP <code class="fe ng nh ni mw b">accept-language</code>报头来确定用户代理的当前语言。为了检索这个头，我们需要注入<code class="fe ng nh ni mw b">@nguniversal/express-engine/tokens</code>中提供的<code class="fe ng nh ni mw b">@REQUEST</code>。</p><p id="121a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">之后，我们通过使用<code class="fe ng nh ni mw b">isPlatformBrowser</code>方法和<code class="fe ng nh ni mw b">@PLATFORM_ID</code>令牌来确定我们是在浏览器端还是在服务器端执行代码。如果我们在浏览器端，我们用和以前一样的方式设置语言，通过从翻译服务中检索它。如果我们在服务器端，我们从头部读取它:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="c298" class="na lp it mw b gy nb nc l nd ne">lang = (this.request.headers['accept-language'] || '').substring(0, 2);</span></pre><p id="d8e1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们还需要在typescript配置文件中做一些小的改动，<code class="fe ng nh ni mw b">src/tsconfig.app.json</code>:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="6be6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将<code class="fe ng nh ni mw b">node</code>值添加到了<code class="fe ng nh ni mw b">types</code>部分。我们需要它，因为当我们执行服务器端渲染时，我们使用<code class="fe ng nh ni mw b">fs</code>直接从文件系统加载翻译文件。</p><h1 id="8a5e" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">测试服务器端国际化呈现</h1><p id="7f6d" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">我们已经完成了服务器端的翻译。通过运行应用程序并使用定制的头执行curl请求来检查它。构建并运行应用程序，如下所示:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="2881" class="na lp it mw b gy nb nc l nd ne">npm run build:prod<br/>npm run server</span></pre><p id="aaa0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后发出curl请求，将俄语(ru_RU)指定为当前用户代理语言:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="45fe" class="na lp it mw b gy nb nc l nd ne">curl http://localhost:8080 --header "accept-language: ru_RU"</span></pre><p id="175d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">或者，在主页上点击Pусский язык后，您可以在浏览器的<em class="nn">开发工具</em>中检查页面源代码。但是，请注意，使用“查看页面源代码”将重新加载页面，并显示英语(或您的默认)语言版本。</p><p id="fa7b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">结果应该是这样的:</p><figure class="mr ms mt mu gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="a275" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">耶！正如我们所料，我们的网站呈现在服务器端，俄语翻译已经应用！</p><p id="72a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您想赶上这一步:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="ca2b" class="na lp it mw b gy nb nc l nd ne">git clone <a class="ae kz" href="https://github.com/maciejtreder/angular-universal-i18n.git" rel="noopener ugc nofollow" target="_blank">https://github.com/maciejtreder/angular-universal-i18n.git</a><br/>cd angular-universal-i18n<br/>git co step3<br/>npm install<br/>npm run build:prod<br/>npm run server</span></pre><h1 id="8d11" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">摘要</h1><p id="2368" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">今天，我们讨论了所有成熟应用程序面临的一个重要挑战:国际化。如你所见；您可以为服务器端呈现带来国际化，使您的应用程序搜索引擎在您支持的每种语言中都得到优化。</p><p id="c479" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nn">本帖原载于</em> <a class="ae kz" href="https://www.twilio.com/blog/create-search-engine-friendly-internationalized-web-apps-angular-universal-ngx-translate" rel="noopener ugc nofollow" target="_blank"> <em class="nn"> Twilio博客</em> </a> <em class="nn">。</em>如果你想了解更多关于Angular Universal的技术，请查看我在Twilio博客上的帖子:<a class="ae kz" href="https://www.twilio.com/blog/angular-universal-javascript-node-js-aws-lambda" rel="noopener ugc nofollow" target="_blank">在AWS Lambda上开始使用无服务器Angular Universal</a>。</p><p id="6dd4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这篇文章中使用的代码的GitHub库可以在这里找到:<a class="ae kz" href="https://github.com/maciejtreder/angular-universal-i18n" rel="noopener ugc nofollow" target="_blank">https://github.com/maciejtreder/angular-universal-i18n</a>。也可以通过contact@maciejtreder.com、<a class="ae kz" href="https://www.maciejtreder.com/" rel="noopener ugc nofollow" target="_blank">https://www.maciejtreder.com</a>或@maciejtreder (GitHub、Twitter、StackOverflow、LinkedIn)联系我。</p></div></div>    
</body>
</html>