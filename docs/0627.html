<html>
<head>
<title>Make Firebase Cloud Functions Testing Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让Firebase云功能测试变得简单</h1>
<blockquote>原文：<a href="https://itnext.io/make-firebase-cloud-functions-testing-easy-78d15a5b4be3?source=collection_archive---------2-----------------------#2018-04-20">https://itnext.io/make-firebase-cloud-functions-testing-easy-78d15a5b4be3?source=collection_archive---------2-----------------------#2018-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4c161f1fc512a9a6dfbb7a64de7de297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGLVD4OsDN2aO8B979sh_g.png"/></div></div></figure><p id="809d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://firebase.google.com/docs/functions/" rel="noopener ugc nofollow" target="_blank"> Firebase云功能</a>是自动响应由Firebase功能和HTTPS请求触发的事件的绝佳工具。</p><p id="8178" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有几种方法可以测试firebase的功能，而不必在每次需要检查时都部署它。这需要很多时间。坏事可能会发生，诸如此类…</p><p id="7a58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">合适的方式是局部测试。你可以在firebase网站上阅读关于<a class="ae kw" href="https://firebase.google.com/docs/functions/local-emulator" rel="noopener ugc nofollow" target="_blank">如何本地测试firebase功能</a>的google官方指南。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="7bff" class="lg lh iq lc b gy li lj l lk ll">// Spoiler alert. You will run this command </span><span id="42c8" class="lg lh iq lc b gy lm lj l lk ll">firebase server # to emulate both HTTP functions and hosting</span></pre><p id="87c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一种方法是自己安装<a class="ae kw" href="https://firebase.google.com/docs/admin/setup" rel="noopener ugc nofollow" target="_blank"> Firebase Admin SDK </a>。我会用TypeScript来做——我喜欢TypeScript:)</p><p id="2675" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以在<a class="ae kw" href="https://github.com/dalenguyen/firebase-functions-snippets/blob/master/local-test-easy.js" rel="noopener ugc nofollow" target="_blank"> my github </a>上查看JavaScript版本。</p><p id="9129" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你需要做的第一件事是启动一个项目</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="2b53" class="lg lh iq lc b gy li lj l lk ll">npm init # You what to do next</span></pre><p id="bfd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装<strong class="ka ir"> firebase-admin </strong> npm包</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="cfa2" class="lg lh iq lc b gy li lj l lk ll">npm install g ts-node # For running typescript files<br/>npm install firebase-admin --save</span></pre><p id="ca7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建您的<strong class="ka ir"> index.ts </strong>文件</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="6a24" class="lg lh iq lc b gy li lj l lk ll">/**<br/> * Typescript version (index.ts)<br/> */ <br/><br/>import * as admin from 'firebase-admin';<br/>import { serviceAccount } from './serviceAccountKey';<br/><br/>admin.initializeApp({<br/>    credential: admin.credential.cert({<br/>        projectId: serviceAccount.project_id,<br/>        clientEmail: serviceAccount.client_email,<br/>        privateKey: serviceAccount.private_key<br/>    }),<br/>    databaseURL: serviceAccount.database_url<br/>})</span></pre><p id="fd9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将您的<strong class="ka ir"> serviceAccountKey.json </strong>编辑为<strong class="ka ir"> serviceAccountKey.ts </strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="c9b4" class="lg lh iq lc b gy li lj l lk ll">// serviceAccountKey.ts<br/><br/>export const serviceAccount = {<br/>  "project_id": "your-project-id",  <br/>  "private_key": "-----BEGIN PRIVATE KEY-----blah-blah-blah=\n-----END PRIVATE KEY-----\n",<br/>  "client_email": "dalenguyen@.iam.gserviceaccount.com",  <br/>  "database_url": "https://dalenguyen.firebaseio.com"<br/>}</span></pre><p id="0ebc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以从项目设置中的<strong class="ka ir">服务帐户</strong>选项卡生成新的私钥。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ln"><img src="../Images/348d2b09d94c27601a2c803cdf35dbc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2JENxj8je-G_JPfdf4baaw.png"/></div></div></figure><p id="1cec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">设置完成后，现在您可以通过运行以下命令在本地测试您的功能</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="b9c9" class="lg lh iq lc b gy li lj l lk ll">ts-node index.ts </span></pre><p id="719f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更具体地说，您可以使用<strong class="ka ir">console . log(' any ')</strong>来测试您的方法。它会显示在你的终端上。</p><p id="2f02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi">— — — — — — — — — — — — — — — — — — — — — — — —</p><p id="bd21" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请检查Firebase函数片段的存储库。我会经常更新它；)</p><p id="2bb3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/dalenguyen/firebase-functions-snippets" rel="noopener ugc nofollow" target="_blank">https://github.com/dalenguyen/firebase-functions-snippets</a></p></div></div>    
</body>
</html>