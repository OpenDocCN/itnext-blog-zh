<html>
<head>
<title>Build a voting website that doesn’t crash — part two. Now with Amplify.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立一个不会崩溃的投票网站——第二部分。现在用Amplify。</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-voting-website-that-doesnt-crash-part-two-now-with-amplify-9e4746b757e7?source=collection_archive---------0-----------------------#2019-06-07">https://itnext.io/build-a-voting-website-that-doesnt-crash-part-two-now-with-amplify-9e4746b757e7?source=collection_archive---------0-----------------------#2019-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="74ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第一篇文章中，我们在不到一个小时的时间里建立了一个无服务器的投票网站。现在让我们再做一次，这次使用AWS Amplify。</p><p id="b3ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我给自己设定了一个挑战，在一个小时内建立一个高度可扩展的、<a class="ae km" href="https://vote.jbes.dev/" rel="noopener ugc nofollow" target="_blank">无服务器投票网站</a>，并在<a class="ae km" rel="noopener ugc nofollow" target="_blank" href="/build-a-voting-website-that-doesnt-crash-under-load-in-under-an-hour-1c0948307773">这篇文章</a>中发表了结果。虽然这是一个概念验证，但部署过程并不理想——我必须手动创建一个DynamoDB表，设置API网关并配置我的IAM权限，这与捆绑和托管前端是分开的。</p><p id="5e9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇博文中，我再次探讨了这个问题，仍然使用Vue作为前端，但这次引入了AWS Amplify作为协调后端的一种方式。目标是生成相同的应用程序，但具有更少的活动部分和更易于维护的架构，以便将来进行修改。</p><h1 id="ab9d" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">为什么我们需要放大器？</h1><p id="a500" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">使用无服务器后端开发JavaScript前端的一个问题是，您最终会有两个不同的代码库，实际上创建了两个不同的应用程序。这使得在两者之间同步变更变得很困难，尤其是在处理多个版本或不同环境时(例如，dev和prod)。</p><p id="15a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通常还涉及大量样板代码——仅仅是为DynamoDB表设置一个基本的CRUD接口，就需要同样的100行代码来反复实现REST API。将精力集中在为客户关心的特性编写代码上是很好的，而不必担心管道问题。</p><p id="4ab7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Amplify是相当长一段时间以来web和移动应用程序开发人员的最大新闻。这是AWS为web和移动开发设计的固执己见的框架，但对于JavaScript开发人员来说，它包括了所有最流行的单页应用程序库和框架，如React和Vue。它将后端服务视为您可以与之交互的组件，并代表您管理所有的配置和交互。</p><p id="c4cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简而言之，如果你有一个需要数据库、授权和S3桶的web前端，不用再找了——我们可以在几分钟内从Amplify完成所有这些工作，而无需冒险进入AWS控制台。最初的投票应用程序使用API Gateway与DynamoDB交互来管理投票记录，在本练习中，我们将使用由Amplify框架管理的相同组件。</p><blockquote class="lq"><p id="d58a" class="lr ls iq bd lt lu lv lw lx ly lz kk dk translated">在<a class="ae km" href="https://aws-amplify.github.io/docs/" rel="noopener ugc nofollow" target="_blank">https://aws-amplify.github.io/docs/</a>了解更多关于Amplify框架的信息。</p></blockquote><h1 id="392a" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky ma la lb lc mb le lf lg mc li lj lk bi translated">入门指南</h1><p id="caf4" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">首先，在我们开始之前，确保您已经安装了节点和AWS CLI 。我使用的是VSCode，但是你可以随意使用你最喜欢的IDE。</p><h2 id="eeb5" class="md ko iq bd kp me mf dn kt mg mh dp kx jy mi mj lb kc mk ml lf kg mm mn lj mo bi translated">设置Vue应用程序:</h2><ol class=""><li id="36b4" class="mp mq iq jp b jq ll ju lm jy mr kc ms kg mt kk mu mv mw mx bi translated">为应用程序创建一个空目录，并在这里打开一个控制台。</li><li id="d26b" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">安装Vue CLI: <code class="fe nd ne nf ng b">npm install -g @vue/cli</code>。</li><li id="1b89" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">创建一个新的Vue项目:<code class="fe nd ne nf ng b">vue create pollcounter</code>。接受项目默认值。</li><li id="f51a" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">换上新的目录:<code class="fe nd ne nf ng b">cd pollcounter</code>。</li></ol><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nh"><img src="../Images/cc2aed49101c0f577ef3c65d2e4228f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CvYQ4mKU88OQjAFT4jExSQ.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">在VSCode中初始化Vue项目。</figcaption></figure><h2 id="ffa8" class="md ko iq bd kp me mf dn kt mg mh dp kx jy mi mj lb kc mk ml lf kg mm mn lj mo bi translated">设置放大器:</h2><ol class=""><li id="65c0" class="mp mq iq jp b jq ll ju lm jy mr kc ms kg mt kk mu mv mw mx bi translated">现在安装Amplify及其Vue专用组件:<code class="fe nd ne nf ng b">npm install --save aws-amplify aws-amplify-vue</code>。</li><li id="a9b8" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">初始化放大:<code class="fe nd ne nf ng b">amplify init</code>。接受默认值，并根据您的环境回答问题，例如:</li></ol><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/5a91d33bd80854c574b31559ef3b1c50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*kMfuCtsxK6TbdBX8izV22g.png"/></div></figure><p id="7aac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在您的AWS帐户中创建一些资源，之后您就可以在Vue项目中使用Amplify了。</p><h1 id="f6b4" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">配置后端服务</h1><p id="60ae" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">在这一步中，我们将为应用程序定义AWS服务。上一次，我们在AWS控制台中手动完成了这项工作，但是这里要简单得多。该应用程序的架构如下所示:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ny"><img src="../Images/5947b2b8abf327f67252942bff979bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHdevqE7CbsKrjf-2F5h7w.png"/></div></div></figure><p id="3832" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了在Amplify中实现这一点，我们发出命令<code class="fe nd ne nf ng b">amplify add api</code>，然后回答配置过程中的提示:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nz"><img src="../Images/e9b8de09b5d0c9eb4b96a5f6be45006d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*keTL1LcYkYFeRlvDUTButA.png"/></div></div></figure><p id="0e93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里的一个重要部分是为资源提供有意义的名称——这使得后面的过程更加容易。一旦到达<em class="kl">创建一个新的DynamoDB表</em>，继续回答，如下所示:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi oa"><img src="../Images/d52c9b8164a7c4c473d79c2be47e0f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQZ7ne07N5Neg2Hr38v9Tw.png"/></div></div></figure><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ob"><img src="../Images/ad87f46b4f9c986825386e010dd36b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5qcHj5m2JhngHr5xNst0rw.png"/></div></div></figure><p id="7ae8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，选择“否”添加另一个路径并完成设置。文件app.js现在应该在编辑器中打开了——在这里您可以看到它已经为我们的API资源连接了基本方法。投票应用程序只使用两种方法:</p><ul class=""><li id="3874" class="mp mq iq jp b jq jr ju jv jy oc kc od kg oe kk of mv mw mx bi translated">GET:用于检索投票总数。</li><li id="dba4" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk of mv mw mx bi translated">邮寄:用于投票。</li></ul><p id="49ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以删除delete和PUT方法，因为不会用到它们。</p><p id="a68e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们替换app.post方法—在我们的例子中，我们希望更新投票计数，而不是插入一个项目:</p><pre class="ni nj nk nl gt og ng oh oi aw oj bi"><span id="bf2b" class="md ko iq ng b gy ok ol l om on">/************************************<br/>* HTTP post method for insert object *<br/>*************************************/</span><span id="2696" class="md ko iq ng b gy oo ol l om on">app.post(path, function(req, res) {</span><span id="6a00" class="md ko iq ng b gy oo ol l om on">  if (userIdPresent) {<br/>   req.body['userId'] =<br/>   req.apiGateway.event.requestContext.identity.cognitoIdentityId || UNAUTH;<br/>  }</span><span id="2988" class="md ko iq ng b gy oo ol l om on">  const UpdateAttribute = req.query['vote'] === 'no' ? 'votesNo' : 'votesYes'</span><span id="b98b" class="md ko iq ng b gy oo ol l om on">  let updateItemParams = {<br/>    TableName: tableName,<br/>    Key: {<br/>      partitionKey: 'poll-001',<br/>      sortKey: 'total'<br/>    },<br/>    UpdateExpression: `set ${UpdateAttribute} = ${UpdateAttribute} + :val`,<br/>    ExpressionAttributeValues:{<br/>      ":val": 1<br/>    },<br/>    ReturnValues:"UPDATED_NEW"<br/>  }</span><span id="4009" class="md ko iq ng b gy oo ol l om on">  dynamodb.update(updateItemParams, (err, data) =&gt; {<br/>    if(err) {<br/>      res.statusCode = 500;<br/>      res.json({error: err, url: req.url, body: req.body});<br/>    } else {<br/>      res.json({success: 'post call succeed!', url: req.url, data: data})<br/>    }<br/>  })<br/>})</span></pre><p id="461a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在已经为部署做好了准备——在控制台中输入<code class="fe nd ne nf ng b">amplify push</code>,它将部署到您的AWS帐户。</p><p id="6c01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然已经创建了DynamoDB表，但是它是空的——我们需要添加一个条目来初始化轮询的值。在AWS控制台中打开表，单击创建项目，然后添加以下项目:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi op"><img src="../Images/6e005a3d0c485fc402e11bae3f1af0c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nUX5rc4ZryBIWotXhPchew.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">设置轮询计数器的初始值。</figcaption></figure><h1 id="734f" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">最后，添加前端</h1><p id="2c06" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">最初的应用程序是一个VueJS组件——除了一些小的变化，它在这里是一样的。首先，让我们连接main.js。</p><h2 id="5cb9" class="md ko iq bd kp me mf dn kt mg mh dp kx jy mi mj lb kc mk ml lf kg mm mn lj mo bi translated">修改main.js</h2><p id="8181" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">主布局使用Vue Bootstrap，因此从命令行(和主项目目录)运行该命令来安装必要的组件:</p><pre class="ni nj nk nl gt og ng oh oi aw oj bi"><span id="a273" class="md ko iq ng b gy ok ol l om on">npm i bootstrap bootstrap-vue --save</span></pre><p id="d34e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，让我们将必要的Amplify和Bootstrap包添加到main.js文件中，以确保在应用程序启动时加载这些包。用以下内容替换整个main.js:</p><pre class="ni nj nk nl gt og ng oh oi aw oj bi"><span id="c49b" class="md ko iq ng b gy ok ol l om on">import Vue from 'vue'<br/>import App from './App.vue'<br/>import Amplify from 'aws-amplify'<br/>import awsmobile from './aws-exports'</span><span id="406d" class="md ko iq ng b gy oo ol l om on">Amplify.configure(awsmobile)</span><span id="8322" class="md ko iq ng b gy oo ol l om on">import BootstrapVue from 'bootstrap-vue'<br/>import 'bootstrap/dist/css/bootstrap.css'<br/>import 'bootstrap-vue/dist/bootstrap-vue.css'</span><span id="3688" class="md ko iq ng b gy oo ol l om on">Vue.use(BootstrapVue)<br/>Vue.config.productionTip = false</span><span id="ccfa" class="md ko iq ng b gy oo ol l om on">new Vue({<br/>  render: h =&gt; h(App),<br/>}).$mount('#app')</span></pre><h2 id="cd31" class="md ko iq bd kp me mf dn kt mg mh dp kx jy mi mj lb kc mk ml lf kg mm mn lj mo bi translated">App.vue</h2><p id="fa6a" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">与任何Vue文件一样，它被分为模板、脚本和样式部分。用以下内容替换现有模板部分:</p><pre class="ni nj nk nl gt og ng oh oi aw oj bi"><span id="5ef8" class="md ko iq ng b gy ok ol l om on">&lt;template&gt;<br/>  &lt;div id="app" class="hello"&gt;</span><span id="925b" class="md ko iq ng b gy oo ol l om on">&lt;h1&gt;Welcome to the Serverless Voting App. Now with Amplify!&lt;/h1&gt;<br/>      &lt;h4&gt;Click to vote on this very important issue.&lt;/h4&gt;<br/>      &lt;h4&gt;You can vote as many times as you like. Click away!&lt;/h4&gt;</span><span id="80af" class="md ko iq ng b gy oo ol l om on">&lt;b-row align-h="center" class="mt-5"&gt;<br/>      &lt;b-card-group deck&gt;<br/>        &lt;b-card bg-variant="success" text-variant="white" header="Vote Yes" class="text-center" footer-tag="footer"&gt;<br/>          &lt;b-card-text&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/b-card-text&gt;<br/>          &lt;b-button size="lg" variant="primary"  <a class="ae km" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="vote('yes')"&gt;Button&lt;/b-button&gt;<br/>          &lt;em slot="footer"&gt;{{ votesYes }} voted&lt;/em&gt;<br/>        &lt;/b-card&gt;</span><span id="28b1" class="md ko iq ng b gy oo ol l om on">&lt;b-card bg-variant="danger" text-variant="white" header="Vote No" class="text-center" footer-tag="footer"&gt;<br/>          &lt;b-card-text&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/b-card-text&gt;<br/>          &lt;b-button size="lg" variant="primary" <a class="ae km" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="vote('no')"&gt;Button&lt;/b-button&gt;<br/>          &lt;em slot="footer"&gt;{{ votesNo }} voted&lt;/em&gt;<br/>        &lt;/b-card&gt;<br/>      &lt;/b-card-group&gt;<br/>    &lt;/b-row&gt;<br/>    &lt;b-row align-h="center" class="mt-5"&gt;<br/>      &lt;p&gt;Questions? Ask James &lt;a href="<a class="ae km" href="https://twitter.com/jbesw" rel="noopener ugc nofollow" target="_blank">https://twitter.com/jbesw</a>"&gt;<a class="ae km" href="http://twitter.com/jbesw" rel="noopener ugc nofollow" target="_blank">@jbesw</a>&lt;/a&gt;.&lt;/p&gt;<br/>    &lt;/b-row&gt;<br/>  &lt;/div&gt;  <br/>&lt;/template&gt;</span></pre><p id="0050" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在文件的底部，用以下代码替换style部分:</p><pre class="ni nj nk nl gt og ng oh oi aw oj bi"><span id="ab61" class="md ko iq ng b gy ok ol l om on">&lt;style&gt;<br/>#app {<br/>  font-family: 'Avenir', Helvetica, Arial, sans-serif;<br/>  -webkit-font-smoothing: antialiased;<br/>  -moz-osx-font-smoothing: grayscale;<br/>  text-align: center;<br/>  color: #2c3e50;<br/>  margin-top: 60px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="c239" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在有趣的部分是脚本部分。Amplify允许我们在不需要http库(例如Axios或request)的情况下调用API，并且我们可以在不知道端点URL的情况下通过名称调用API。我们只需在该部分的顶部添加一个导入，然后使用Amplify的API接口，如下所示:</p><pre class="ni nj nk nl gt og ng oh oi aw oj bi"><span id="a849" class="md ko iq ng b gy ok ol l om on">&lt;script&gt;<br/>import { API } from 'aws-amplify'<br/>export default {<br/>  name: 'app',<br/>  data() {<br/>    return {<br/>      apiName: 'pollCounterAPI',<br/>      votesYes: 0,<br/>      votesNo: 0<br/>    }<br/>  },<br/>  methods: {<br/>    vote: async function (vote) {<br/>      const init = {<br/>        queryStringParameters: {<br/>          vote<br/>        }<br/>      }<br/>      const response = await API.post(this.apiName, '/votes', init)<br/>      if (vote === 'yes') this.votesYes = response.data.Attributes.votesYes<br/>      if (vote === 'no') this.votesNo = response.data.Attributes.votesNo<br/>    },<br/>    updateVotes: async function () {<br/>      const response = await API.get(this.apiName, '/votes/poll-001')<br/>      this.votesNo = response[0].votesNo<br/>      this.votesYes = response[0].votesYes    <br/>    }<br/>  },<br/>  created () {<br/>    this.updateVotes()<br/>    setInterval(this.updateVotes, 3000)<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><h1 id="0fd5" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">部署到AWS云</h1><p id="1318" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">以前，您必须运行<code class="fe nd ne nf ng b">npm run build</code>，然后将生成的dist文件夹文件复制到您已经准备好的S3存储桶中，并可选地设置CloudFront分发。这个过程很容易出错，因为您必须正确设置各种权限，并且在部署后续版本时很容易出错。</p><p id="c894" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Amplify介绍了一种使用<a class="ae km" href="https://docs.aws.amazon.com/amplify/latest/userguide/welcome.html" rel="noopener ugc nofollow" target="_blank"> Amplify控制台</a>无缝部署应用程序的简单方法。你只需要将控制台指向你的代码库，它就可以<em class="kl">自动</em>完成剩下的工作。让我们试试这个。</p><ol class=""><li id="01a2" class="mp mq iq jp b jq jr ju jv jy oc kc od kg oe kk mu mv mw mx bi translated">转到<a class="ae km" href="https://console.aws.amazon.com/amplify/" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/amplify/</a>。</li></ol><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi oq"><img src="../Images/5e5edeff0cc1c56ed9fc1aac469d5a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3WzaJHc6r_a-7S8IACQu8w.png"/></div></div></figure><p id="9d4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.单击部署下的“开始”。在下一个屏幕中，选择GitHub并按照步骤授权访问您的GitHub存储库。单击下一步。</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi or"><img src="../Images/6ac9d0c11c3a3f6b33f72ac7839ac311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FeB7y_BuMK_ZeoTlybL7yQ.png"/></div></div></figure><p id="a234" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.选择GitHub repo和分支，然后单击下一步:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi os"><img src="../Images/f35a5187934f36d3b85f54ccc89952f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cw_mBNa_xudJL2OiouJfGw.png"/></div></div></figure><p id="994c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.在“构建设置”下，选择创建新环境，单击“创建新角色”,并按照步骤创建具有必要权限的Amplify IAM用户:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ot"><img src="../Images/80422348a5e7dff8edb3e18612a89d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YgwaNC1gbehavZyATJ7J5Q.png"/></div></div></figure><p id="dd40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.查看设置，然后单击“保存并部署”。屏幕顶部的横幅显示部署已经开始:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ou"><img src="../Images/23f99fe1c89e280f8fc48f2e4c32e14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJl3PtWKCknj0JNp-Nv4-Q.png"/></div></div></figure><p id="d6f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这需要几分钟的时间来完成，然后您会看到以下屏幕:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ov"><img src="../Images/bbeec70177a44cb6c2b0c06fe797be45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyEMxpah9-y2Hz5STMoJ_g.png"/></div></div></figure><p id="8d36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过程的最后，Amplify返回一个URL，您可以在那里看到部署的应用程序。</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ow"><img src="../Images/17c4d46d973e4248cfd0fa59f253d1c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VuYIKXUjGwbjqnT_AFivnQ.png"/></div></div></figure><p id="6d5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Amplify Console还显示了您的网站如何在各种移动分辨率下呈现的截图，提供了快速的完整性检查，以确保您没有任何明显的布局问题:</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi ox"><img src="../Images/aaf8956b0ba42a5478c5370860df05b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJqmstwFdimqGtUYyXb4zw.png"/></div></div></figure><h1 id="257c" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">结论</h1><p id="a5be" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">对于使用Vue或React等单页面应用程序的web应用程序开发人员来说，Amplify提供了一种简单的方式来配置和部署AWS服务，所有这些都来自一个代码存储库。在本文中，我们仅仅触及了它的皮毛，但是您可以看到使用这个框架管理关键资源的简单性。</p><p id="5247" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本系列的后续部分中，我将添加授权、多个环境，并用实时GraphQL解决方案替换REST API。同时，如果你有任何问题，请在评论中告诉我。</p><blockquote class="lq"><p id="1eac" class="lr ls iq bd lt lu lv lw lx ly lz kk dk translated">从<a class="ae km" href="https://github.com/jbesw/amplify-pollCounter" rel="noopener ugc nofollow" target="_blank">https://github.com/jbesw/amplify-pollCounter</a>下载该项目的代码。</p></blockquote></div></div>    
</body>
</html>