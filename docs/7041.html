<html>
<head>
<title>CKAD Scenarios ReadinessProbe and Container-Build</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CKAD场景就绪探测和容器构建</h1>
<blockquote>原文：<a href="https://itnext.io/ckad-scenarios-readinessprobe-and-container-build-6c73a835d9b7?source=collection_archive---------3-----------------------#2022-05-23">https://itnext.io/ckad-scenarios-readinessprobe-and-container-build-6c73a835d9b7?source=collection_archive---------3-----------------------#2022-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ada3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">CKAD关于ReadinessProbes和使用Podman或Docker构建容器的交互式场景</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1dceeff0918242ac5cdcb3fbf08936c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4rrLfnQTVLRQfhDsBENJFQ.png"/></div></div></figure><h1 id="2c4e" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">免费CKAD场景？是啊！</h1><p id="8447" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">(我们也已经有了<a class="ae mf" href="https://killercoda.com/killer-shell-cka" rel="noopener ugc nofollow" target="_blank"> CKA </a>和<a class="ae mf" href="https://killercoda.com/killer-shell-cks" rel="noopener ugc nofollow" target="_blank"> CKS </a>的)</p><p id="47fe" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><a class="ae mf" href="https://killercoda.com/killer-shell-ckad" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">killercoda.com/killer-shell-ckad</strong></a></p><h1 id="1c45" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">本周情景</h1><p id="7d11" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">本周我们增加了两个场景:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://killercoda.com/killer-shell-ckad"><div class="gh gi ml"><img src="../Images/5ab7985b723ab61140ea77fe16d41fe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zpUs4xkr5Z2_OGessWebJA.png"/></div></a></figure><h1 id="c465" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">ReadinessProbe</h1><p id="0c7e" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><a class="ae mf" href="https://killercoda.com/killer-shell-ckad/scenario/readiness-probe" rel="noopener ugc nofollow" target="_blank">访问场景</a></p><p id="aae1" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在这个场景中，要求您创建image <code class="fe mm mn mo mp b">httpd</code>的部署，这是Apache HTTP服务器。如果没有为Pod定义ReadinessProbe，一旦容器启动，K8s服务就会向Pod发送流量。</p><p id="df25" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">但是启动Apache或在Pod中运行的其他工具可能需要时间，或者在启动过程中可能会出现错误。为此，定义一个ReadinessProbe非常重要。</p><h2 id="371f" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">探针概述</h2><p id="4575" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">ReadinessProbes和LivenessProbes将一直定期执行<strong class="ll ir">。</strong></p><p id="32d7" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">如果定义了StartupProbe，ReadinessProbes和LivenessProbes将不会执行，直到StartupProbe成功。</p><p id="2f7c" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">就绪探测失败* </strong> : Pod不会被标记为就绪，也不会接收任何流量</p><p id="ea92" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> LivenessProbe失败*</strong>:Pod内的容器将重新启动</p><p id="00cf" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> StartupProbe失败*</strong>:Pod内的容器将重新启动</p><p id="c0bc" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">*失败:失败次数超过使用<code class="fe mm mn mo mp b">failureThreshold</code>配置的次数</p><h1 id="2548" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">构建并运行容器</h1><p id="9095" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><a class="ae mf" href="https://killercoda.com/killer-shell-ckad/scenario/container-build" rel="noopener ugc nofollow" target="_blank">访问场景</a></p><p id="7898" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在这个场景中，您需要从头开始创建一个非常简单的容器。你可以用Docker或者Podman来做这个。CKAD考试可能需要知识来<a class="ae mf" href="https://github.com/cncf/curriculum" rel="noopener ugc nofollow" target="_blank">定义、构建和修改容器图像</a>。</p><h2 id="4f7d" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">容器术语</h2><p id="30c8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><em class="nc">docker file/container file</em>:命令列表，从该列表可以构建<em class="nc">图像</em></p><p id="6e66" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><em class="nc">镜像</em>:二进制文件，包含所有要作为<em class="nc">容器</em>运行的数据/需求</p><p id="2672" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><em class="nc">容器</em>:运行<em class="nc">图像</em>的实例</p><p id="0a91" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><em class="nc">注册表</em>:我们可以推/拉<em class="nc">图像</em>的地方</p><h1 id="1f09" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">下一步是什么？</h1><p id="f34c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们计划每周创建新的CKAD挑战，并在此发布。接下来你想看什么主题？请在评论中告诉我们！</p><h1 id="4d7f" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">保持最新和通知！</h1><p id="2e36" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><a class="ae mf" href="https://twitter.com/killercoda" rel="noopener ugc nofollow" target="_blank">推特</a></p><p id="a50c" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><a class="ae mf" href="https://www.linkedin.com/company/killercoda" rel="noopener ugc nofollow" target="_blank">领英</a></p><h1 id="a84b" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">结束了</h1><p id="5b34" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">【killercoda.com】|<a class="ae mf" href="https://killer.sh/" rel="noopener ugc nofollow" target="_blank">killer . sh</a></p></div></div>    
</body>
</html>