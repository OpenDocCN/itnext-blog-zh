<html>
<head>
<title>Getting started with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub操作入门</h1>
<blockquote>原文：<a href="https://itnext.io/getting-started-with-github-actions-fe94167dbc6d?source=collection_archive---------1-----------------------#2020-07-30">https://itnext.io/getting-started-with-github-actions-fe94167dbc6d?source=collection_archive---------1-----------------------#2020-07-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f8fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文提供了对<a class="ae ko" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> GitHub Actions </a>的介绍，它是GitHub的原生CI/CD和自动化系统。</p><p id="1ed5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文首先解释了GitHub操作的基本概念，比如工作流、作业和步骤，然后给出了几个简单的示例工作流来帮助您快速入门。您可以在自己的存储库中运行所有这些工作流。</p><h1 id="40dd" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">内容</h1><ul class=""><li id="b58c" class="ln lo it js b jt lp jx lq kb lr kf ls kj lt kn lu lv lw lx bi translated"><a class="ae ko" href="#a1b5" rel="noopener ugc nofollow"> <strong class="js iu">什么是GitHub动作？</strong> </a></li><li id="fb35" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="#1e27" rel="noopener ugc nofollow"> <strong class="js iu">基本概念</strong> </a></li><li id="c64d" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="#d5a2" rel="noopener ugc nofollow"> <strong class="js iu">重要参考文献</strong> </a></li><li id="250b" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="#7e36" rel="noopener ugc nofollow"> <strong class="js iu">示例工作流1 — Hello World！</strong> </a></li><li id="55db" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="#7061" rel="noopener ugc nofollow"> <strong class="js iu">示例工作流2 —问题迎宾</strong> </a></li><li id="ff64" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="#8640" rel="noopener ugc nofollow"> <strong class="js iu">示例工作流3 —发布资产创建者</strong> </a></li><li id="07a9" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="#8815" rel="noopener ugc nofollow"> <strong class="js iu">结论</strong> </a></li></ul><h1 id="a1b5" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">什么是GitHub Actions？</h1><p id="8f4b" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated"><a class="ae ko" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> GitHub Actions </a>是GitHub在2018年推出的CI/CD和通用自动化系统。它被集成到GitHub中，并在每个GitHub库中默认启用。GitHub Actions是完全免费的。</p><p id="6b37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用GitHub Actions，您可以做与使用工具类似的事情，例如<a class="ae ko" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank"> Jenkins </a>、<a class="ae ko" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> Travis CI </a>、<a class="ae ko" href="https://circleci.com/" rel="noopener ugc nofollow" target="_blank"> Circle CI </a>、<a class="ae ko" href="https://drone.io/" rel="noopener ugc nofollow" target="_blank"> Drone CI </a>、<a class="ae ko" href="https://www.atlassian.com/software/bamboo" rel="noopener ugc nofollow" target="_blank"> Bamboo </a>、<a class="ae ko" href="https://www.jetbrains.com/teamcity/" rel="noopener ugc nofollow" target="_blank"> TeamCity </a>或<a class="ae ko" href="https://www.appveyor.com/" rel="noopener ugc nofollow" target="_blank"> AppVeyor </a>。然而，与这些工具相反，GitHub Actions直接在GitHub上运行，这意味着您的CI/CD和自动化逻辑与您的代码位于同一位置。这有几个优点:</p><ul class=""><li id="2cc5" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated">您不需要注册单独的CI/CD服务(例如Travis CI、Circle CI、Drone CI、AppVeyor)。</li><li id="1775" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated">您不需要安装和管理自己的CI/CD服务(例如Jenkins、Bamboo、TeamCity)。</li><li id="09dd" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated">您不需要设置webhooks和访问令牌来将CI/CD服务连接到GitHub——因为GitHub Actions已经在GitHub中了！</li></ul><p id="c0ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所有这些优势使得我们有必要看看GitHub Actions提供了什么以及如何使用它。这就是这篇文章要讲的！</p><h1 id="1e27" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">基本概念</h1><p id="b75b" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">让我们从基础开始。以下是GitHub动作最重要概念的概述:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mj"><img src="../Images/a70614426d9c411a57fdf85633117e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8mUtip6z_oydfLi4P86KUw.png"/></div></div></figure><h2 id="4220" class="mv kq it bd kr mw mx dn kv my mz dp kz kb na nb ld kf nc nd lh kj ne nf ll ng bi translated">工作流程</h2><p id="a443" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">每个GitHub库可以包含一个或多个<strong class="js iu">工作流</strong>。每个工作流都在repo的<code class="fe nh ni nj nk b">.github/workflows</code>目录中的一个单独的YAML中定义。多个工作流可以同时并行运行。</p><h2 id="6069" class="mv kq it bd kr mw mx dn kv my mz dp kz kb na nb ld kf nc nd lh kj ne nf ll ng bi translated">事件</h2><p id="eee7" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">工作流由一个或多个<strong class="js iu">事件</strong>触发。事件可以是内部GitHub事件(如推送、发布或拉取请求)、预定事件(在特定时间触发，如cron作业)或任意外部事件(由对GitHub API的webhook调用触发)。</p><h2 id="567a" class="mv kq it bd kr mw mx dn kv my mz dp kz kb na nb ld kf nc nd lh kj ne nf ll ng bi translated">乔布斯</h2><p id="03fd" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">一个工作流由一个或多个<strong class="js iu">任务</strong>组成。一个作业包含一组命令，这些命令将在触发工作流时运行(参见下面的<a class="ae ko" href="#e4c4" rel="noopener ugc nofollow">步骤</a>)。默认情况下，当触发工作流时，其所有作业并行运行。但是，您可以定义选定作业之间的依赖关系，使它们按顺序运行。</p><h2 id="7f36" class="mv kq it bd kr mw mx dn kv my mz dp kz kb na nb ld kf nc nd lh kj ne nf ll ng bi translated">滑行装置</h2><p id="ad67" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">每个作业在特定的<strong class="js iu">转轮</strong>上运行。runner是一个由GitHub托管的虚拟机，带有您选择的操作系统(Linux、macOS或Windows)。您也可以使用<a class="ae ko" href="https://docs.github.com/en/actions/hosting-your-own-runners" rel="noopener ugc nofollow" target="_blank">自托管跑步者</a>，在这种情况下，您可以完全控制跑步者的硬件和软件。</p><h2 id="e4c4" class="mv kq it bd kr mw mx dn kv my mz dp kz kb na nb ld kf nc nd lh kj ne nf ll ng bi translated">步伐</h2><p id="a097" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">一个作业由一系列<strong class="js iu">步骤</strong>组成。一个步骤可以是一个外壳命令，也可以是一个动作(见下面的<a class="ae ko" href="#6fe1" rel="noopener ugc nofollow">动作</a>)。一个作业的所有步骤在与该作业相关联的运行器上按顺序运行。默认情况下，如果某个步骤失败，将跳过作业的后续步骤。</p><h2 id="b863" class="mv kq it bd kr mw mx dn kv my mz dp kz kb na nb ld kf nc nd lh kj ne nf ll ng bi translated">行动</h2><p id="60f4" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">一个<a class="ae ko" href="https://docs.github.com/en/actions/creating-actions/about-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">动作</strong> </a>是一个可重复使用的代码单元，可以作为一个作业的一个步骤。动作可以有输入和输出。你可以<a class="ae ko" href="https://docs.github.com/en/actions/creating-actions" rel="noopener ugc nofollow" target="_blank">创建自己的动作</a>或者使用GitHub社区共享的动作。共享操作分布在GitHub市场上，有几千个。</p><h1 id="d5a2" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">重要参考</h1><p id="5f6f" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">现在您已经了解了GitHub动作的基本概念，让我们来看看一些您在使用GitHub动作时会经常用到的文档:</p><ul class=""><li id="f7ee" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">工作流语法参考</strong> </a> —包含工作流文件的完整语法规范。</li><li id="bd59" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">触发工作流的事件</strong> </a> —包含可用作工作流触发器的事件的完整列表。</li><li id="be48" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="https://docs.github.com/en/actions/reference/software-installed-on-github-hosted-runners" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">安装在GitHub托管的运行程序上的软件</strong> </a> —包含安装在GitHub提供的各种运行程序上的工具的完整列表。</li><li id="a91c" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">上下文和表达式语法</strong> </a> —包含可用于每个工作流运行的所谓<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts" rel="noopener ugc nofollow" target="_blank">上下文</a>的规范。上下文包括各种上下文信息，如先前步骤的输出、机密和触发工作流的事件的有效负载。</li><li id="e940" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> Webhook事件和有效负载</strong> </a> —包含可以触发您的工作流的事件的有效负载的规范。事件有效负载包含在工作流可用的<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts" rel="noopener ugc nofollow" target="_blank">上下文</a>中。</li><li id="5382" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><a class="ae ko" href="https://docs.github.com/en/rest/reference" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> GitHub REST API参考</strong> </a> —事件有效载荷可能包含一个或多个GitHub API对象。例如，<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#pull_request" rel="noopener ugc nofollow" target="_blank">pull_request</a></code>事件的有效载荷包含一个<a class="ae ko" href="https://docs.github.com/en/rest/reference/pulls#get-a-pull-request" rel="noopener ugc nofollow" target="_blank"> <em class="nl">拉请求</em> </a> API对象。GitHub REST API参考包含了这些API对象的规范。</li></ul><p id="d3d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了这些参考，您就可以开始使用GitHub操作了！</p><p id="6ad7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面，您将创建三个GitHub动作工作流示例，您可以立即在自己的GitHub存储库中试用。</p><h1 id="7e36" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">示例工作流1 — Hello World！</h1><p id="8761" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">这个工作流除了打印“Hello World！”每当发生对存储库的推送时，都被转换为运行程序的标准输出。以下是此工作流程的完整代码:</p><figure class="mk ml mm mn gt mo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="3766" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看一下这个工作流的定义:</p><ul class=""><li id="2e76" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated">工作流的名称是<code class="fe nh ni nj nk b"><strong class="js iu">hello-world</strong></code>(由<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#name" rel="noopener ugc nofollow" target="_blank">name</a></code>字段定义)。</li><li id="32e6" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated">工作流由<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#push" rel="noopener ugc nofollow" target="_blank">push</a></code>事件触发(由<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#on" rel="noopener ugc nofollow" target="_blank">on</a></code>字段定义)。</li><li id="669a" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated">工作流包含一个ID为<code class="fe nh ni nj nk b"><strong class="js iu">my-job</strong></code>的单一作业(这也是作业的名称)。</li><li id="6afc" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b">my-job</code>作业使用<code class="fe nh ni nj nk b"><strong class="js iu">ubuntu-latest</strong></code> GitHub托管的运行程序(由<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on" rel="noopener ugc nofollow" target="_blank">runs-on</a></code>字段定义)。在撰写本文时，<code class="fe nh ni nj nk b">ubuntu-latest</code> runner <a class="ae ko" href="https://docs.github.com/en/actions/reference/virtual-environments-for-github-hosted-runners#supported-runners-and-hardware-resources" rel="noopener ugc nofollow" target="_blank">对应的是Ubuntu 18.04 LTS </a>。</li><li id="355e" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b">my-job</code>作业包含一个名为<code class="fe nh ni nj nk b"><strong class="js iu">my-step</strong></code>的步骤。这一步执行外壳命令<code class="fe nh ni nj nk b"><strong class="js iu">echo "Hello World!"</strong></code>。</li></ul><blockquote class="no np nq"><p id="f97a" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">请记住，您可以在GitHub Actions文档的<a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">工作流语法参考</strong> </a>页面上查找工作流定义的所有语法元素。</p></blockquote><p id="fc63" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要将这个工作流添加到您的GitHub存储库中，首先在您的存储库中创建一个名为<code class="fe nh ni nj nk b">.github/workflows</code>的目录(您可以使用现有的GitHub存储库或者创建一个新的)。然后把上面的工作流文件保存在这个目录下，把修改推送到GitHub。</p><p id="f5a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，在GitHub上，点击<strong class="js iu"> <em class="nl">动作</em> </strong>标签:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nu"><img src="../Images/6276cb3e4720f19fd222318051a37711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6J89qBwCBQZA6738cLlXKA.png"/></div></div></figure><p id="4487" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在左侧，您应该会看到您的<code class="fe nh ni nj nk b">hello-world</code>工作流。而且由于这个工作流是由推送触发的，而你刚推了GitHub，工作流就已经被触发并运行了。您可以在屏幕右侧看到此工作流的运行:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nv"><img src="../Images/856f579cce2f187ed4580320bebfb169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*feghXEcl5AsHt6wbyqPHAA.png"/></div></div></figure><p id="eb6a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从现在开始，每当有人推送到你的GitHub库，这个工作流就会被触发，上面屏幕的右侧会增加一个新的运行。</p><p id="1521" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要检查工作流的现有运行，请单击它。这会将您带到一个新的屏幕，您可以在左侧看到工作流的所有作业。点击<code class="fe nh ni nj nk b">my-job</code>作业，您应该会看到作业的所有步骤:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nw"><img src="../Images/7ea14490753a2c99ae650d42d3c8473e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQJOLy4K8VtNVtAAUAs2XA.png"/></div></div></figure><p id="0983" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以看到三个步骤，<code class="fe nh ni nj nk b">Set up job</code>、<code class="fe nh ni nj nk b">my-step</code>和<code class="fe nh ni nj nk b">Complete job</code>。第一步和最后一步是由GitHub Actions自动添加的。<code class="fe nh ni nj nk b">my-step</code>步骤是您在工作流程文件中定义的步骤。</p><p id="d431" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以点击每一步来显示更多的信息。继续点击<code class="fe nh ni nj nk b">my-step</code>步骤:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/fd907004e9d701b0d2c0ef9e07559fd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*PPAYFm6r_h1nJFRyNGgwZQ.png"/></div></figure><p id="0c25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是你的“你好，世界！”留言！</p><p id="8dda" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">祝贺您，您刚刚创建并运行了GitHub Actions工作流！</strong></p><blockquote class="no np nq"><p id="d93f" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">该工作流将在每次推送至存储库时运行。因此，如果您决定将这个工作流留在您的存储库中，预计会看到它的许多运行。</p></blockquote><p id="c321" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">显然，这个工作流不是很有用——它所做的只是将消息打印到运行程序的标准输出中，没有人会看到它。</p><p id="a27a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以，接下来让我们创建一个更有用的工作流！</p><h1 id="7061" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">示例工作流2 —问题欢迎</h1><p id="aadc" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">此工作流将向新问题添加评论，并向创建问题的用户致以友好的问候。这看起来是这样的:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ny"><img src="../Images/bbd5377d6cb6f722502007eac2020c53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DXSyBwGgB3R7mQCLsiBpHg.png"/></div></div></figure><p id="d0ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是这个工作流程的完整代码:</p><figure class="mk ml mm mn gt mo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c8f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个工作流引入了几个新概念——特别是，<a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#example-using-multiple-events-with-activity-types-or-configuration" rel="noopener ugc nofollow" target="_blank">事件活动类型</a>、<a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables" rel="noopener ugc nofollow" target="_blank">环境变量</a>、<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank">上下文</a>和<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token" rel="noopener ugc nofollow" target="_blank">GITHUB_TOKEN</a></code>。</p><p id="66df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们来深究一下吧！</p><p id="1cdb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，您可以在<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#on" rel="noopener ugc nofollow" target="_blank">on</a></code>字段中看到，工作流是由<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#issues" rel="noopener ugc nofollow" target="_blank">issues</a></code>事件触发的。<code class="fe nh ni nj nk b">issues</code>事件是由GitHub上的多个活动引起的，比如当一个问题<em class="nl">打开</em>、<em class="nl">编辑</em>、<em class="nl">删除</em>、<em class="nl">关闭</em>等等。这些被称为<code class="fe nh ni nj nk b">issues</code>事件的<strong class="js iu">活动类型</strong>。</p><blockquote class="no np nq"><p id="1109" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">在GitHub Actions文档的<a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#issues" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">事件触发工作流</strong> </a>页面可以看到<code class="fe nh ni nj nk b">issues</code>事件的所有活动类型。</p></blockquote><p id="ee30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nh ni nj nk b"><a class="ae ko" href="http://wo" rel="noopener ugc nofollow" target="_blank">types</a></code>关键字允许将事件的触发器缩小到一个或多个活动类型。在您的情况下，您只希望在打开新问题时运行工作流程(而不是在编辑或删除问题时)。因此，<code class="fe nh ni nj nk b">opened</code>活动类型用于<code class="fe nh ni nj nk b">types</code>字段。</p><p id="686d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，工作流由一个名为<code class="fe nh ni nj nk b">my-job</code>的作业组成，该作业由一个名为<code class="fe nh ni nj nk b">my-step</code>的步骤组成。该步骤包含一个<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepsenv" rel="noopener ugc nofollow" target="_blank">env</a></code>字段，该字段定义了三个<strong class="js iu">环境变量</strong>、<code class="fe nh ni nj nk b">REPO</code>、<code class="fe nh ni nj nk b">OWNER</code>和<code class="fe nh ni nj nk b">ISSUE_NUMBER</code>。这些环境变量将由步骤的shell命令使用。</p><blockquote class="no np nq"><p id="aca6" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">T <!-- -->在<a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepsenv" rel="noopener ugc nofollow" target="_blank">步骤级</a>、<a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idenv" rel="noopener ugc nofollow" target="_blank">作业级</a>和<a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#env" rel="noopener ugc nofollow" target="_blank">工作流级</a>上有一个<code class="fe nh ni nj nk b">env</code>字段。定义环境变量的级别决定了变量的范围。</p></blockquote><p id="be59" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">环境变量的值从<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">上下文</strong> </a>中检索(特别是<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" rel="noopener ugc nofollow" target="_blank">github</a></code>上下文)。上下文是类似JSON的结构，可自动用于工作流的所有步骤。它们包含不同类型的上下文信息，可以用<code class="fe nh ni nj nk b">${{...}}</code>符号来访问。</p><blockquote class="no np nq"><p id="5b29" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">在GitHub Action docs的<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">上下文和表达式语法</strong> </a>页面可以找到所有上下文类型的列表。</p></blockquote><p id="b7b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的工作流中，使用了<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" rel="noopener ugc nofollow" target="_blank">github</a></code>上下文。<code class="fe nh ni nj nk b">github</code>上下文包含一些关于当前工作流运行的信息(比如运行的ID)，以及触发工作流的事件的有效负载。事件有效载荷包含在<code class="fe nh ni nj nk b">github</code>上下文的<code class="fe nh ni nj nk b"><strong class="js iu">github.event</strong></code>字段中。</p><p id="6b62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上述工作流是由<code class="fe nh ni nj nk b">issues</code>事件触发的，也就是说<code class="fe nh ni nj nk b">github.event</code>字段的内容就是<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#issues" rel="noopener ugc nofollow" target="_blank">issues</a></code>事件的有效载荷。</p><blockquote class="no np nq"><p id="c40e" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">在GitHub文档的<a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#issues" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> webhook事件和有效载荷</strong> </a>页面可以找到<code class="fe nh ni nj nk b">issues</code>事件有效载荷的说明。</p></blockquote><p id="3607" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您查看<code class="fe nh ni nj nk b">issues</code>事件有效负载的<a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#issues" rel="noopener ugc nofollow" target="_blank">规范</a>，您可以看到它包含一个<code class="fe nh ni nj nk b">issue</code>字段和一个<code class="fe nh ni nj nk b">repository</code>字段:</p><ul class=""><li id="3eaa" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b">issue</code>字段的值是<a class="ae ko" href="https://docs.github.com/en/rest/reference/issues#get-an-issue" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> <em class="nl">问题</em> </strong> </a> API对象(描述事件关于的问题)。</li><li id="6cb8" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b">repository</code>字段的值是<a class="ae ko" href="https://docs.github.com/en/rest/reference/repos#get-a-repository" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> <em class="nl">仓库</em> </strong> </a> API对象(描述事件发生的GitHub仓库)。</li></ul><blockquote class="no np nq"><p id="fca4" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">你可以在<a class="ae ko" href="https://docs.github.com/en/rest/reference" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> GitHub REST API参考</strong> </a>中找到各种GitHub API对象的规范。</p></blockquote><p id="5e1e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过<code class="fe nh ni nj nk b">github</code>上下文访问这些API对象的所有字段，这就是上面的工作流所做的:</p><ul class=""><li id="e669" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">${{ github.event.repository.name }}</strong></code>:这是运行工作流的存储库的名称。</li><li id="f119" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">${{ github.event.respository.owner.login }}</strong></code>:这是存储库所有者的用户名。</li><li id="6941" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">${{ github.event.issue.number }}</strong></code>:这是事件所涉及的问题的编号。</li></ul><p id="a187" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这意味着，为了找出可以通过<code class="fe nh ni nj nk b">github</code>上下文访问的信息，您可能需要挖掘三个嵌套层次的数据结构:<code class="fe nh ni nj nk b">github</code>上下文、事件负载和API对象。以下是对<code class="fe nh ni nj nk b">issues</code>活动的总结:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi gj"><img src="../Images/8470133f482445043e052696f3067a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3S8UQblZaRoxA5jZHfUfg.png"/></div></div></figure><p id="3f73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些不同数据结构的文档位于不同的位置。这里有一个总结:</p><ol class=""><li id="53bf" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn nz lv lw lx bi translated"><code class="fe nh ni nj nk b">github</code>上下文:<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">上下文和表达式语法</strong> </a></li><li id="6ea8" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn nz lv lw lx bi translated">事件负载:<a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> webhook事件和负载</strong> </a></li><li id="3962" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn nz lv lw lx bi translated">API对象:<a class="ae ko" href="https://docs.github.com/en/rest/reference" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> GitHub REST API引用</strong> </a></li></ol><p id="e261" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">牢记这些参考文档对于充分利用工作流中的可用上下文信息至关重要！</p><p id="b5ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在评估上下文表达式之后，三个环境变量将包含以下值:</p><ul class=""><li id="6451" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">REPO</strong></code>:运行工作流的存储库的名称。</li><li id="1f5a" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">OWNER</strong></code>:存储库所有者的用户名。</li><li id="0057" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">ISSUE_NUMBER</strong></code>:已创建的问题编号。</li></ul><p id="b1ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们来看看步骤的shell命令。</p><p id="af1e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该工作流程的目的是为现有的GitHub问题添加评论。这可以通过<strong class="js iu"> GitHub API </strong>来完成，特别是调用<a class="ae ko" href="https://docs.github.com/en/rest/reference/issues#create-an-issue-comment" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> <em class="nl">创建问题注释</em> </strong> </a> API端点。</p><p id="c58d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该API端点具有以下<a class="ae ko" href="https://docs.github.com/en/rest/reference/issues#create-an-issue-comment" rel="noopener ugc nofollow" target="_blank">规范</a>:</p><pre class="mk ml mm mn gt oa nk ob oc aw od bi"><span id="9fd5" class="mv kq it nk b gy oe of l og oh">POST /repos/{owner}/{repo}/issues/{issue_number}/comments</span></pre><p id="1153" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">需要一个名为<code class="fe nh ni nj nk b">body</code>的主体参数，其中包含注释文本。</p><blockquote class="no np nq"><p id="bd0a" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">你可以在<a class="ae ko" href="https://docs.github.com/en/rest/reference" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> GitHub REST API参考</strong> </a>中找到所有GitHub API端点的规范。</p></blockquote><p id="92e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">工作流使用<code class="fe nh ni nj nk b"><a class="ae ko" href="https://curl.haxx.se/" rel="noopener ugc nofollow" target="_blank">curl</a></code>来发出这个POST请求。URL由三个环境变量<code class="fe nh ni nj nk b">REPO</code>、<code class="fe nh ni nj nk b">OWNER</code>和<code class="fe nh ni nj nk b">ISSUE_NUMBER</code>构成，这三个变量之前已经设置好了。</p><p id="b630" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nh ni nj nk b">body</code>参数的内容——将是注释的文本——指定如下:</p><pre class="mk ml mm mn gt oa nk ob oc aw od bi"><span id="b467" class="mv kq it nk b gy oe of l og oh">"Hello ${{ github.event.issue.user.login }}, thanks for your issue!"</span></pre><p id="c7b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请注意，这包括对<code class="fe nh ni nj nk b">github</code>上下文的另一个访问:创建事件的用户的用户名是从➡️ <a class="ae ko" href="https://docs.github.com/en/rest/reference/issues#get-an-issue" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> <em class="nl">发布</em> </strong> </a> API对象、➡️ <code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#issues" rel="noopener ugc nofollow" target="_blank">issues</a></code>事件有效载荷、➡️ <code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" rel="noopener ugc nofollow" target="_blank">github</a></code>上下文中检索的。</p><p id="08a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">👉记住嵌套数据结构的三个层次！</p><blockquote class="no np nq"><p id="2440" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">您可以在工作流文件中的任何地方使用<code class="fe nh ni nj nk b">${{ }}</code>表达式，甚至在单引号字符串中。</p></blockquote><p id="f87a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在只差一块:<strong class="js iu">认证</strong>。对GitHub API的每个调用都必须经过身份验证，所以您的请求必须包含一些凭证！</p><p id="0369" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，GitHub Actions提供了一个非常有价值的特性——<code class="fe nh ni nj nk b">GITHUB_TOKEN</code>。<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token" rel="noopener ugc nofollow" target="_blank">GITHUB_TOKEN</a></code>是一个GitHub认证令牌，在每个工作流中都自动可用。它包含在<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts" rel="noopener ugc nofollow" target="_blank">secrets</a></code>上下文中，可以通过<code class="fe nh ni nj nk b"><strong class="js iu">${{ secrets.GITHUB_TOKEN }}</strong></code>访问。</p><p id="3f4b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以使用<code class="fe nh ni nj nk b">GITHUB_TOKEN</code>对GitHub API进行经过认证的API调用。为此，您必须将它作为一个<a class="ae ko" href="https://swagger.io/docs/specification/authentication/bearer-authentication/" rel="noopener ugc nofollow" target="_blank"> HTTP承载令牌</a>包含在API请求中。这就是工作流中的<code class="fe nh ni nj nk b">curl</code>命令的作用。</p><blockquote class="no np nq"><p id="ad0a" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated"><code class="fe nh ni nj nk b"><em class="it">GITHUB_TOKEN</em></code>与一个名为<code class="fe nh ni nj nk b"><em class="it">github-actions</em></code>的特殊GitHub bot帐户相关联。这意味着你用<code class="fe nh ni nj nk b">GITHUB_TOKEN</code>执行的任何GitHub操作都将在<code class="fe nh ni nj nk b">github-actions</code>前正式完成。这就是工作流创建的问题评论将来自<code class="fe nh ni nj nk b">github-actions</code>的原因。</p></blockquote><p id="e3c0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">代码说明到此结束！</strong></p><p id="6358" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要将这个工作流添加到您的存储库中，请将其保存在<code class="fe nh ni nj nk b">.github/workflows</code>目录中，并将更改推送到GitHub。</p><p id="a004" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，继续在您的存储库中创建一个问题。</p><p id="47e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这应该会触发工作流程，几秒钟后，您应该会在您的问题下看到一条带有来自<code class="fe nh ni nj nk b">github-actions</code>的问候的评论:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi oi"><img src="../Images/970486f59281b55d4195f80b5b7448b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEFZiw4Yegzr9EPTUrJj1A.png"/></div></div></figure><p id="20c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">您刚刚为您的存储库实现了问题处理自动化！</strong></p><p id="0db5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了问候用户，您还可以在工作流中实现任何其他逻辑。例如，您可以解析问题的文本以确保某种格式，<a class="ae ko" href="https://docs.github.com/en/github/managing-your-work-on-github/applying-labels-to-issues-and-pull-requests" rel="noopener ugc nofollow" target="_blank">将标签</a>应用于问题，通知用户，在外部问题跟踪系统中创建票据，等等。</p><p id="303a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您完成这些任务所需的所有信息都可以在工作流中找到，并且您可以用它做的事情是无限的！</p><p id="7bc1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，让我们转到另一个在现实生活中有用的工作流程。</p><h1 id="8640" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">示例工作流3-发布资产创建者</h1><p id="c38a" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">该工作流将为新的<a class="ae ko" href="https://docs.github.com/en/github/administering-a-repository/about-releases" rel="noopener ugc nofollow" target="_blank"> GitHub版本</a>创建发布资产。特别是，它将创建一个包含要分发的文件的归档文件，以及一个包含归档文件的SHA256哈希的校验和文件。这看起来是这样的:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi oj"><img src="../Images/7c92704436d41297acdb2e2e3bedf267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzxI8N4wfQ1WmUAJ4clNmg.png"/></div></div></figure><p id="cb53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是这个工作流程的完整代码:</p><figure class="mk ml mm mn gt mo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="45d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该工作流使用与<code class="fe nh ni nj nk b"><a class="ae ko" href="#7061" rel="noopener ugc nofollow">issue-greeter</a></code>工作流相似的概念，但是增加了<a class="ae ko" href="https://docs.github.com/en/actions/creating-actions/about-actions" rel="noopener ugc nofollow" target="_blank">动作</a>的用法。</p><p id="a0ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以，让我们浏览一下代码！</p><p id="f3ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，工作流由<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#release" rel="noopener ugc nofollow" target="_blank">release</a></code>事件触发，特别是由<code class="fe nh ni nj nk b"><strong class="js iu">published</strong></code>活动类型触发。也就是说，无论何时发布版本，工作流程都会运行(但不会在起草、编辑或删除版本时运行)。</p><p id="ed0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该工作流包含一个名为<code class="fe nh ni nj nk b">my-job</code>的作业，该作业包含一个定义名为<code class="fe nh ni nj nk b"><strong class="js iu">ARCHIVE_NAME</strong></code>的环境变量的<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idenv" rel="noopener ugc nofollow" target="_blank">env</a></code>字段。这是将要创建的归档的名称。</p><p id="31d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">档案名称的形式是<code class="fe nh ni nj nk b"><strong class="js iu">&lt;repo&gt;-&lt;tag&gt;</strong></code>，其中<code class="fe nh ni nj nk b">&lt;repo&gt;</code>是存储库的名称，<code class="fe nh ni nj nk b">&lt;tag&gt;</code>是发布版本的标签名称。按照惯例，一个版本的标签名称对应于该版本的版本，因此归档资产将具有类似于<code class="fe nh ni nj nk b">abc-v0.1.0.tar.gz</code>或<code class="fe nh ni nj nk b">xyz-2.4.2.tar.gz</code>的名称。</p><p id="3948" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">存储库名称和发布标签名称是以与<code class="fe nh ni nj nk b"><a class="ae ko" href="#7061" rel="noopener ugc nofollow">issue-greeter</a></code>工作流相似的方式从<code class="fe nh ni nj nk b">github</code>上下文中提取的。特别是:</p><ul class=""><li id="7c46" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">${{ github.event.repository.name }}</strong></code>是存储库的名称。</li><li id="db13" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">${{ github.event.release.tag_name }}</strong></code>是发布的标签名。</li></ul><blockquote class="no np nq"><p id="1b44" class="jq jr nl js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated">参见<code class="fe nh ni nj nk b"><a class="ae ko" href="#7061" rel="noopener ugc nofollow">issue-greeter</a></code>工作流的说明，查找被访问的三个嵌套数据结构的文档。</p></blockquote><p id="d916" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，让我们继续工作的步骤:</p><ul class=""><li id="b549" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">download-source</strong></code>步骤下载存储库的源代码档案(由GitHub自动添加到每个版本中)。源代码档案的URL是从<code class="fe nh ni nj nk b">github</code>上下文中提取的。</li><li id="8e6e" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">unzip-source</strong></code>步骤将下载的源代码文件解压到一个以<code class="fe nh ni nj nk b">ARCHIVE_NAME</code>环境变量命名的目录中。</li><li id="47c6" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">clean-source</strong></code>步骤从解压缩的目录中删除任何不需要的文件。这个工作流只删除了<code class="fe nh ni nj nk b">.github</code>目录，但是您可以删除任何其他您不想分发的文件。</li><li id="db8b" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">create-archive</strong></code>步骤将清理后的目录压缩到<code class="fe nh ni nj nk b">.tar.gz</code>档案中。归档文件以<code class="fe nh ni nj nk b">ARCHIVE_NAME</code>环境变量命名。</li><li id="4ad8" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">create-checksum</strong></code>步骤计算归档文件的SHA256散列，并将其保存在名为<code class="fe nh ni nj nk b">checksum.txt</code>的文件中。</li></ul><p id="3190" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此时，您在运行程序上本地拥有了两个资产:归档文件和校验和文件。唯一缺少的是将它们上传到发布版。</p><p id="89e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为此，工作流使用了一个<a class="ae ko" href="https://docs.github.com/en/actions/creating-actions/about-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">动作</strong> </a>。动作是可重复使用的代码单元，可以作为一个步骤包含在工作流中(代替shell命令)。</p><p id="9e45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">特别是，工作流使用了分布在<a class="ae ko" href="https://github.com/marketplace?type=actions" rel="noopener ugc nofollow" target="_blank"> GitHub Marketplace </a>上的<code class="fe nh ni nj nk b"><a class="ae ko" href="https://github.com/marketplace/actions/upload-a-release-asset" rel="noopener ugc nofollow" target="_blank">upload-release-asset</a></code>动作。<code class="fe nh ni nj nk b">upload-release-asset</code>动作允许将资产上传到现有的GitHub版本——这正是您想要做的！</p><p id="e368" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过在步骤中使用<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepsuses" rel="noopener ugc nofollow" target="_blank">uses</a></code>关键字(而不是<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepsrun" rel="noopener ugc nofollow" target="_blank">run</a></code>关键字)来使用动作。大多数动作需要输入，这些输入可以通过<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepswith" rel="noopener ugc nofollow" target="_blank">with</a></code>关键字提供。有些动作还需要设置某些环境变量，这可以通过关键字<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idstepsenv" rel="noopener ugc nofollow" target="_blank">env</a></code>来完成。</p><p id="7d96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">GitHub Marketplace上的操作页面或GitHub存储库中记录了操作所需的输入。例如，<code class="fe nh ni nj nk b">upload-release-asset</code>动作被记录在GitHub Marketplace上的<a class="ae ko" href="http://Upload a Release Asset" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">“上传发布资产”</strong> </a>下。</p><p id="7dfd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe nh ni nj nk b">upload-release-asset</code>动作需要以下<strong class="js iu">输入</strong>:</p><ul class=""><li id="e99c" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">upload_url</strong></code>:GitHub API URL，用于将资产上传到发行版。</li><li id="1576" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">asset_path</strong></code>:资产在滑道上的位置。</li><li id="c957" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">asset_name</strong></code>:GitHub上资产的期望名称。</li><li id="e4f9" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><code class="fe nh ni nj nk b"><strong class="js iu">asset_content_type</strong></code>:资产的MIME内容类型。</li></ul><p id="1208" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该操作还需要一个名为<code class="fe nh ni nj nk b"><strong class="js iu">GITHUB_TOKEN</strong></code>的环境变量，其中包含一个有效的GitHub认证令牌(比如<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token" rel="noopener ugc nofollow" target="_blank">GITHUB_TOKEN</a></code>)。</p><p id="f5fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总之，这会导致下面的<code class="fe nh ni nj nk b">upload-release-asset</code>动作调用(以<code class="fe nh ni nj nk b">upload-archive</code>步骤为例):</p><pre class="mk ml mm mn gt oa nk ob oc aw od bi"><span id="2224" class="mv kq it nk b gy oe of l og oh"><strong class="nk iu">-</strong> <strong class="nk iu">name:</strong> upload-archive<br/>  <strong class="nk iu">uses:</strong> actions/upload-release-asset@v1<br/>  <strong class="nk iu">with:</strong><br/>    <strong class="nk iu">upload_url:</strong> ${{ github.event.release.upload_url }}<br/>    <strong class="nk iu">asset_path:</strong> ${{ env.ARCHIVE_NAME }}.tar.gz<br/>    <strong class="nk iu">asset_name:</strong> ${{ env.ARCHIVE_NAME }}.tar.gz<br/>    <strong class="nk iu">asset_content_type:</strong> application/gzip<br/>  <strong class="nk iu">env:</strong><br/>    <strong class="nk iu">GITHUB_TOKEN:</strong> ${{ secrets.GITHUB_TOKEN }}</span></pre><p id="cff7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从<code class="fe nh ni nj nk b">github</code>上下文中检索到<code class="fe nh ni nj nk b">upload_url</code>输入的URL，从<code class="fe nh ni nj nk b">ARCHIVE_NAME</code>环境变量中构造出<code class="fe nh ni nj nk b">asset_path</code>和<code class="fe nh ni nj nk b">asset_name</code>输入的文件名。<code class="fe nh ni nj nk b">GITHUB_TOKEN</code>环境变量被设置为<code class="fe nh ni nj nk b">secrets.GITHUB_TOKEN</code>中的<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token" rel="noopener ugc nofollow" target="_blank">GITHUB_TOKEN</a></code>。</p><p id="8b53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里的一个特点是通过<code class="fe nh ni nj nk b">env</code>上下文访问<code class="fe nh ni nj nk b">ARCHIVE_NAME</code>环境变量。<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#env-context" rel="noopener ugc nofollow" target="_blank">env</a></code>上下文保存当前步骤可访问的所有环境变量的值。注意，用<code class="fe nh ni nj nk b">$</code>符号访问环境变量在这里不起作用，因为这是一个特定于shell的符号，上面的表达式不在shell中执行。</p><p id="fa92" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">代码说明到此结束！</strong></p><p id="a85c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">像往常一样，要将这个工作流添加到您的存储库中，请将工作流文件保存在<code class="fe nh ni nj nk b">.github/workflows</code>目录中，并将其推送到GitHub。</p><p id="b511" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，继续在您的存储库中创建一个新的版本:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/495316d6ae680dc697b65c0be40ac113.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*gpiS5tPIjBhXg5yyhxN0Ww.png"/></div></figure><p id="9184" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为发布选择一个合适的标签名称、标题和描述，并发布它。发布应该会触发您的工作流，几秒钟后，您应该会看到两个所需的资产被自动添加到您的发布中:</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi oj"><img src="../Images/7c92704436d41297acdb2e2e3bedf267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzxI8N4wfQ1WmUAJ4clNmg.png"/></div></div></figure><p id="1912" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">您刚刚为您的存储库自动创建了发布资产！</strong></p><p id="0e57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但你不必就此止步。您可以根据自己的具体情况轻松调整此工作流。例如，如果您开发一个Go应用程序，您可以包含从源代码为多个平台构建二进制文件的步骤，并将它们作为附加资产上传。您可以上传任意多的资产，并且可以任意命名它们。</p><h1 id="8815" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">结论</h1><p id="6d2b" class="pw-post-body-paragraph jq jr it js b jt lp jv jw jx lq jz ka kb md kd ke kf me kh ki kj mf kl km kn im bi translated">本文介绍了<a class="ae ko" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> GitHub Actions </a> — GitHub的原生CI/CD和自动化系统。GitHub动作的基本概念有<a class="ae ko" href="https://docs.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#workflow" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">工作流</strong> </a>，<a class="ae ko" href="https://docs.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#event" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">事件</strong> </a>，<a class="ae ko" href="https://docs.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#job" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">作业</strong> </a>，<a class="ae ko" href="https://docs.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#runner" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">跑者</strong> </a>，<a class="ae ko" href="https://docs.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#step" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">步骤</strong> </a>，以及<a class="ae ko" href="https://docs.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#action" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">动作</strong> </a>。</p><p id="93ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">工作流在<code class="fe nh ni nj nk b">.github/workflows</code>目录下的YAML文件中定义。当一个工作流文件被推送到GitHub时，它会被GitHub动作自动拾取，并在触发它的事件发生时运行。</p><p id="cd48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文还展示了三个示例工作流:</p><ol class=""><li id="1068" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn nz lv lw lx bi translated"><code class="fe nh ni nj nk b"><a class="ae ko" href="#7e36" rel="noopener ugc nofollow"><strong class="js iu">hello-world</strong></a></code>:打印“Hello World！”。</li><li id="33da" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn nz lv lw lx bi translated"><code class="fe nh ni nj nk b"><a class="ae ko" href="#7061" rel="noopener ugc nofollow"><strong class="js iu">issue-greeter</strong></a></code> : <strong class="js iu"> </strong>给新问题添加评论。</li><li id="8c29" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn nz lv lw lx bi translated"><code class="fe nh ni nj nk b"><a class="ae ko" href="#8640" rel="noopener ugc nofollow"><strong class="js iu">release-asset-creator</strong></a></code>:将发布资产添加到新的发布中。</li></ol><p id="7505" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些工作流引入了基本的GitHub动作特性，例如<a class="ae ko" href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank"><strong class="js iu"/></a><a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">环境变量</strong></a><a class="ae ko" href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#webhook-events" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">活动类型</strong></a><a class="ae ko" href="https://docs.github.com/en/actions/creating-actions/about-actions" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">动作</strong> </a>，以及<code class="fe nh ni nj nk b"><a class="ae ko" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token" rel="noopener ugc nofollow" target="_blank">GITHUB_TOKEN</a></code>。</p><p id="053b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，还有更多GitHub动作没有在本文中讨论，包括:</p><ul class=""><li id="a8bd" class="ln lo it js b jt ju jx jy kb mg kf mh kj mi kn lu lv lw lx bi translated"><em class="nl">手动和通过外部事件触发工作流。</em></li><li id="9b4f" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><em class="nl">在工作流程中安全使用机密数据。</em></li><li id="6817" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><em class="nl">顺序执行作业。</em></li><li id="92bc" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><em class="nl">有条件地执行作业和步骤。</em></li><li id="0075" class="ln lo it js b jt ly jx lz kb ma kf mb kj mc kn lu lv lw lx bi translated"><em class="nl">动态设置环境变量和输出。</em></li></ul><p id="7a19" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所有这些概念将在以后的文章中讨论。所以，敬请期待！</p></div></div>    
</body>
</html>