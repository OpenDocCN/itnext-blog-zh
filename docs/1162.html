<html>
<head>
<title>Javascript : Convert HTML + CSS to PDF. Print HTML in Seconds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript:将HTML + CSS转换成PDF。几秒钟内打印HTML</h1>
<blockquote>原文：<a href="https://itnext.io/javascript-convert-html-css-to-pdf-print-supported-very-sharp-and-not-blurry-c5ffe441eb5e?source=collection_archive---------0-----------------------#2018-08-02">https://itnext.io/javascript-convert-html-css-to-pdf-print-supported-very-sharp-and-not-blurry-c5ffe441eb5e?source=collection_archive---------0-----------------------#2018-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a55830efee8cf3eba105480d47a5fd2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GGBirGvjkcvRzuYc"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">这可能是你的HTML</figcaption></figure><div class=""/><p id="966e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我目前正在做的一个个人项目涉及到将一个样式化的HTML节点树转换成客户端可打印的PDF资产。</p><p id="fab1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我花了很长时间寻找最终的解决方案，经历了很多磨难。</p><p id="748a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我将与您分享我的解决方案，我相信它非常容易使用，并且我将讨论其他方法的优缺点。</p><p id="d6a8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">只需两分钟即可实现。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="cb8b" class="lh li jf bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">设置</h1><blockquote class="mf mg mh"><p id="7ebf" class="kc kd mi ke b kf kg kh ki kj kk kl km mj ko kp kq mk ks kt ku ml kw kx ky kz ij bi translated"><strong class="ke jg"> <em class="jf">仅供参考:</em> </strong> <em class="jf">我使用React，所以我使用</em> <code class="fe mm mn mo mp b"><em class="jf">npm / yarn</em></code> <em class="jf">来添加库，使用ES6 </em> <code class="fe mm mn mo mp b"><em class="jf">import</em></code> <em class="jf">语句。不使用那些包管理器，你可以使用一个简单的</em> <code class="fe mm mn mo mp b"><em class="jf">&lt;script&gt;&lt;/script&gt;</em></code> <em class="jf">标签来集成库。</em></p></blockquote><p id="24e5" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它将带你:</p><ul class=""><li id="bbd4" class="mq mr jf ke b kf kg kj kk kn ms kr mt kv mu kz mv mw mx my bi translated">两个运行在客户端的Javascript库。</li><li id="5ef3" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">Javascript的5行实际代码</li></ul><p id="bb3e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它要求:</p><ul class=""><li id="9404" class="mq mr jf ke b kf kg kj kk kn ms kr mt kv mu kz mv mw mx my bi translated">基本的Javascript知识</li><li id="6e53" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated"><strong class="ke jg">jsPDF:</strong>T3】</li><li id="2d4a" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated"><strong class="ke jg"> html2canvas : </strong> <code class="fe mm mn mo mp b">yarn add html2canvas</code></li></ul></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="bc2f" class="lh li jf bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">小片</h1><figure class="ne nf ng nh gt is"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="6123" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">流程如下:</p><ul class=""><li id="e467" class="mq mr jf ke b kf kg kj kk kn ms kr mt kv mu kz mv mw mx my bi translated">您想要转换成PDF的HTML节点树首先使用<code class="fe mm mn mo mp b">html2canvas</code><strong class="ke jg">转换成画布(第4行)</strong></li><li id="4b29" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">然后，<strong class="ke jg">使用A4格式创建空的PDF结构。顺便说一下，我们告诉jsPDF使用<code class="fe mm mn mo mp b">mm</code>作为下一个操作的单位(第5行)</strong></li><li id="c585" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">差不多完成了，我们<strong class="ke jg">使用<code class="fe mm mn mo mp b">canvas.toDataURL('image/png')</code>(第6行)把画布变成PNG图像</strong>。</li><li id="4e6d" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">然后，该P <strong class="ke jg"> NG图像被粘贴到坐标<code class="fe mm mn mo mp b">(0,0)</code>处的空PDF </strong>中，并在<code class="fe mm mn mo mp b">(211,298)</code>处调整大小(第6行)。A4幅面宽210毫米，高297毫米，所以我在粘贴图像时多使用了一毫米，以避免边缘出现白条。</li><li id="de93" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">最后，我们提示浏览器使用<code class="fe mm mn mo mp b">pdf.save(filename)</code>(第7行)下载新生成的PDF。</li></ul><figure class="ne nf ng nh gt is"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="4899" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">另一个函数将<code class="fe mm mn mo mp b">quality</code>作为参数，从1(默认质量)开始，允许您获得具有SVG外观的更清晰的PDF。</p><p id="0bc8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这个<code class="fe mm mn mo mp b">quality</code>只是用来首先把HTML节点树变成画布的尺度。它越大，PDF就越清晰和沉重(在我的一个复杂节点结构上使用<code class="fe mm mn mo mp b">quality = 4</code>产生60 MB的PDF，而<code class="fe mm mn mo mp b">quality = 1</code>产生800 KB的PDF)。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="c715" class="lh li jf bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">考虑</h1><p id="0c0e" class="pw-post-body-paragraph kc kd jf ke b kf nk kh ki kj nl kl km kn nm kp kq kr nn kt ku kv no kx ky kz ij bi translated">这项技术可以让你用5行代码在几秒钟内打印出基于HTML的pdf。</p><p id="3d84" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它已经在多个浏览器上进行了测试，截至2018年8月1日，使用我的Chrome浏览器没有遇到任何问题。</p><p id="c0ff" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">尽管如此，请考虑以下几点:</p><ul class=""><li id="3f7f" class="mq mr jf ke b kf kg kj kk kn ms kr mt kv mu kz mv mw mx my bi translated">这是一个PDF格式的图像。不是实际的文本。</li><li id="89b6" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">这些生成的PDF文件不允许您选择/复制/粘贴文本，因为其中没有文本。超链接等也是如此。</li><li id="1ddb" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">随着质量的提高，您的pdf可能会变得非常沉重。</li></ul><p id="653f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke jg">仍然:</strong></p><ul class=""><li id="cef6" class="mq mr jf ke b kf kg kj kk kn ms kr mt kv mu kz mv mw mx my bi translated">非常容易实现</li><li id="f1b9" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">既不是代码重组，也不是调整。</li><li id="e7b0" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">在客户端像charm一样工作，利用了两个久经考验的库(jsPDF和html2canvas)。</li><li id="7966" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">使用3或4作为<code class="fe mm mn mo mp b">quality</code>修饰符，你的pdf看起来会像SVG文件。超清晰无模糊。</li><li id="34a6" class="mq mr jf ke b kf mz kj na kn nb kr nc kv nd kz mv mw mx my bi translated">没有多少库允许直接的HTML + CSS到PDF的转换。</li></ul></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="fd93" class="lh li jf bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">感谢阅读</h1><p id="5b38" class="pw-post-body-paragraph kc kd jf ke b kf nk kh ki kj nl kl km kn nm kp kq kr nn kt ku kv no kx ky kz ij bi translated">告诉我它是否像救了我的命一样救了你的命。</p><p id="9887" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">查看我的最新文章:</p><div class="ip iq gp gr ir np"><a href="https://dmware.fr/disable-categories-tags-and-author-pages-on-your-wordpress-website/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jg gy z fp nu fr fs nv fu fw je bi translated">禁用WordPress网站上的类别、标签和作者页面</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">我在网上找不到任何简单的超快解决方案，所以这是我的。它将带你:它假设…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">dmware.fr</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ix np"/></div></div></a></div><p id="40b1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">欢迎致电<strong class="ke jg"> david.mellul@outlook.fr ☕️😃</strong></p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/964621a3b2a0bdf3a7f1510106bd3b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FjLuOLwV2eSjHJWj"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">“白色马克杯中的卡布奇诺，木质桌子上的白色泡沫艺术”作者<a class="ae of" href="https://unsplash.com/@takeshi2?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">吴仪</a>在<a class="ae of" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上</figcaption></figure></div></div>    
</body>
</html>