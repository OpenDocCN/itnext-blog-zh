<html>
<head>
<title>How To Predict StarCraft II Battle Outcomes with Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用机器学习预测星际争霸2战斗结果</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-predict-starcraft-ii-battle-outcomes-with-machine-learning-40d527a2f7a4?source=collection_archive---------0-----------------------#2020-04-21">https://itnext.io/how-to-predict-starcraft-ii-battle-outcomes-with-machine-learning-40d527a2f7a4?source=collection_archive---------0-----------------------#2020-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jn jo jp jq"><div class="bz fp l di"><div class="jr js l"/></div></figure><p id="b09f" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">最近我采访了拉夫尔和不寻常，他们是成功的星际争霸2机器人名为微型机器的创造者。在采访中，他们描述了他们的机器人如何使用来自<a class="ae kr" href="https://github.com/HalfVoxel/sc2-libvoxelbot" rel="noopener ugc nofollow" target="_blank"> sc2-libvoxelbot </a>的战斗模拟器来模拟某些单位之间的战斗结果，并使用这些模拟来选择是进攻还是撤退。</p><p id="a89c" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">战斗模拟器是一个很棒的工具，让我想起了我在2017年参加BlizzCon人工智能峰会时的一个想法。目标是训练一个机器学习算法来预测部队之间的战斗结果。在本教程中，我们将实现这一目标。</p><p id="8bda" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">为了简单起见，我们将使用两个人族机器人，让他们选择建造1到10个陆战队员，然后让他们互相攻击。我们将记录几场比赛的结果，然后将这些结果输入到机器学习算法中，看看它能有多准确。</p><h1 id="dd94" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">1.建造基本的人族机器人</h1><p id="ff3c" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">人族机器人非常简单，和你在我以前的教程中看到的机器人非常相似，但是这次有一些性能上的改进。创建一个名为<code class="fe lv lw lx ly b">terran_agent.py</code>的文件，我们可以导入我们的库:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="30e2" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来，我们将用三种方法创建我们的<code class="fe lv lw lx ly b">TerranAgent</code>类，这三种方法将允许机器人建造补给站、兵营和训练海军陆战队:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="b915" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">现在我们有了特殊的攻击方法。首先，如果有任何敌军单位，我们会把我们的单位送到地图中间去和他们战斗。这确保了地形、建筑或任何其他因素可以从战斗中移除，从而确保一个干净的结果。一旦敌人的军队被击败，我们将集中火力攻击他们的建筑来快速结束游戏。</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="4032" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">最后，在step方法中，我们将整理机器人做出决策所需的所有信息。通过在这里的单个循环中这样做，我们消除了以后重复循环单元的需要。这种性能改进对我们的bot的速度有很大的影响。</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="b60a" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">为了防止海军陆战队生产过剩，我们需要跟踪有多少人在我们的军营排队。为了做到这一点，我们循环通过军营的所有订单。如果订单的值为<code class="fe lv lw lx ly b">511</code>，这意味着一名海军正在排队:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="8312" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">我们还将整理一些关于敌军的数据:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="b10a" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">最后，如果这是游戏的第一步，我们将记录基本位置，以便将来的计算更简单一些:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="06b1" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">你可以在这里看到这个文件的最终版本<a class="ae kr" href="https://github.com/skjb/pysc2-tutorial/blob/master/Battle%20Predictor/terran_agent.py" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="478e" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">2.创造敌方特工</h1><p id="9737" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">现在创建一个名为<code class="fe lv lw lx ly b">battle_tvt.py</code>的新文件，并添加一些导入:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="b5eb" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">为了确保代理只在他们都准备好的时候攻击，我们使用了一个战斗管理器作为中心通信工具。当预测者和敌人都准备好了，他们就可以进攻了:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="0739" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来我们创建我们的<code class="fe lv lw lx ly b">EnemyAgent</code>类，接收战斗管理器作为参数:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="710c" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">在我们的步骤方法中，如果是游戏的第一步，我们想随机选择一个数量的陆战队员来建造，并在战斗管理器中记录这个数量。我们还重置了敌人的准备状态:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="3d03" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这里的最后一行将把敌方海军陆战队的数量输出到控制台，这样你就可以跟踪每场比赛中的决策。</p><p id="78aa" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">在我们执行任何行动之前，我们还希望更新敌人的就绪状态，以防到了攻击的时候:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="b6a8" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">现在，我们把建造建筑和训练海军陆战队的所有逻辑放进去。首先，我们要检查两个代理是否都准备好了，如果是的话，我们将攻击，否则我们继续建造顺序。</p><p id="8362" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这个序列是非常重要的，一旦我们标志着代理人准备好了，我们不想在游戏的剩余时间里建造任何建筑或训练任何陆战队员，否则结果将会是扭曲的。这就是为什么我们把攻击检查放在第一位。</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="524e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">你还可以在这里看到另一个重要的逻辑，我们将海军陆战队的数量添加到排队的海军陆战队数量中，并与我们的目标进行比较。这样做是很重要的，以确保我们不会过度生产海军陆战队。</p><h1 id="65f1" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">3.创建预测代理</h1><p id="0b46" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">接下来我们将创建我们的<code class="fe lv lw lx ly b">PredictorAgent</code>类。这个职业与<code class="fe lv lw lx ly b">EnemyAgent</code>非常相似，但是有一些细微但非常重要的区别。</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="1463" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">您可以看到的第一个区别是，我们设置了预测器海洋目标，并重置了预测器就绪状态。</p><p id="9475" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">为了跟踪每场比赛的结果，我们将让预测代理在最后一步将结果输出到一个CSV文件:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="e6ec" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来，我们添加准备就绪检查，确保使用预测值:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="0085" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">然后，我们添加攻击和构建顺序，再次使用预测值:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><h1 id="3960" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">4.让它跑起来</h1><p id="38ac" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">最后，在文件中，我们添加了代码，使代理之间相互竞争。首先，我们创建一个战斗管理器实例，并将其提供给每个代理:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="c222" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">然后我们添加正常的游戏循环代码。在这种情况下，我们使用Flat128地图，这样我们可以避免地形扭曲结果。我们使用相对较低的分辨率64，步长乘数128，这有助于我们的机器人快速前进许多构建进度，这意味着它将运行得更快。我们还将禁用战争迷雾，这样视觉就不会改变结果。</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="6340" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这个文件的最终版本可以在<a class="ae kr" href="https://github.com/skjb/pysc2-tutorial/blob/master/Battle%20Predictor/battle_tvt.py" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="f60f" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">现在运行您的代码，它应该完成20集，并将所有结果输出到<code class="fe lv lw lx ly b">tvt.csv</code>。</p><h1 id="a350" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">5.分析结果</h1><p id="a095" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">为了选择正确的机器学习算法来解决您的问题，在图表上绘制结果会很有帮助。</p><p id="ae8e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">创建一个名为<code class="fe lv lw lx ly b">plot_tvt.py</code>的新文件，并添加一些导入:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="35d2" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来，我们将读取CSV文件中的所有行:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="5129" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">然后，我们可以将这些值添加到图表中。在这种情况下，我们将添加一个预测值为“赢”的绿点(值为1)或预测值为“输”的红点(值为-1):</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="9633" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来，我们可以添加一些标签和限制，使图形更好看一些:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="87bf" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">最后，我们展示图表:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="8389" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">我的图表看起来是这样的，但是你的会略有不同，因为海军人数是随机的:</p><figure class="lz ma mb mc gt jq gh gi paragraph-image"><div class="gh gi me"><img src="../Images/ac7f9e8cb7cfcf5203343cb03aec02b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*wD1n07zL1h0NEAXHWVHx5Q.png"/></div></figure><p id="56f4" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">我们需要一个分类算法来帮助我们尽可能好地区分“赢”和“输”这两个类别。幸运的是，有一种专门为此设计的算法叫做逻辑回归。</p><p id="b8f4" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">为了帮助您了解算法是如何工作的，这里有一个在每场比赛后训练算法的动画，这条线显示了“决策边界”或算法从“赢”切换到“输”的点:</p><figure class="lz ma mb mc gt jq gh gi paragraph-image"><div class="gh gi me"><img src="../Images/2951ae582ea053b72ccd68d3991ba7e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/1*kdTqf2tIf7LUobfdjBx4fw.gif"/></div></figure><p id="6d83" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">你可以在这里看到这个文件<a class="ae kr" href="https://github.com/skjb/pysc2-tutorial/blob/master/Battle%20Predictor/plot_tvt.py" rel="noopener ugc nofollow" target="_blank">的最终代码。</a></p><h1 id="487b" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">6.训练算法</h1><p id="697d" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">创建一个名为<code class="fe lv lw lx ly b">train_tvt.py</code>的新文件，并添加以下导入:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="4317" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">接下来，我们要读取CSV中的行并构建两个数据集，第一个数据集将包含预测者和敌人的陆战队计数，第二个数据集将包含结果:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="97e8" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这是我原来的<a class="ae kr" href="https://github.com/skjb/pysc2-tutorial/blob/master/Battle%20Predictor/tvt.csv" rel="noopener ugc nofollow" target="_blank"> CSV </a>文件:</p><pre class="lz ma mb mc gt mh ly mi mj aw mk bi"><span id="652b" class="ml kt iq ly b gy mm mn l mo mp">3,7,-1<br/>9,7,1<br/>1,3,-1<br/>6,8,-1<br/>2,3,-1<br/>1,5,-1<br/>9,3,1<br/>7,8,-1<br/>1,3,-1<br/>7,3,1<br/>3,9,-1<br/>8,10,-1<br/>1,2,-1<br/>6,5,1<br/>3,3,1<br/>2,10,-1<br/>8,8,1<br/>10,6,1<br/>3,9,-1<br/>8,9,-1</span></pre><p id="50ed" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">在阅读了这个文件之后，<code class="fe lv lw lx ly b">inputs</code>的值看起来会是这样的:</p><pre class="lz ma mb mc gt mh ly mi mj aw mk bi"><span id="7297" class="ml kt iq ly b gy mm mn l mo mp">[(3, 7), (9, 7), (1, 3), (6, 8), (2, 3), (1, 5), (9, 3), (7, 8), (1, 3), (7, 3), (3, 9), (8, 10), (1, 2), (6, 5), (3, 3), (2, 10), (8, 8), (10, 6), (3, 9), (8, 9)]</span></pre><p id="ab04" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">之后<code class="fe lv lw lx ly b">labels</code>的值看起来类似于:</p><pre class="lz ma mb mc gt mh ly mi mj aw mk bi"><span id="65b1" class="ml kt iq ly b gy mm mn l mo mp">[0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0]</span></pre><p id="6bc9" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">幸运的是<a class="ae kr" href="https://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> scikit-learn </a>库包含了一个逻辑回归算法，所以我们首先创建一个实例:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="e1cb" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">为了检查机器学习算法的准确性，通常将数据集分成训练集和测试集。我们可以将我们的<code class="fe lv lw lx ly b">inputs</code>和<code class="fe lv lw lx ly b">labels</code>值输入到<code class="fe lv lw lx ly b">train_test_split</code>函数中，以获得训练集和测试集:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="a6c0" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">术语“标签”通常用于描述分类算法的输出或预测。在这种情况下，有两个标签，赢或输，用值1和0表示。</p><p id="af7e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">默认情况下，train_test_split函数使用75%的数据进行训练(我们的数据集中有15行)，剩余的25%用于测试(我们的数据集中有5行)。</p><p id="084e" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">现在，我们可以通过输入训练数据和标签来训练我们的逻辑回归算法:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="80ed" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">然后，我们要求算法对测试数据进行预测:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="7252" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">最后，我们可以将预测与真实的测试集结果进行比较:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="fabb" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">你应该会发现这里的最后一行输出一个介于0.8 (80%)和1.0 (100%)之间的值，由于随机的数据集，结果可能会有所不同。随着更多的数据，你会发现准确率稳定在90%左右，例如我训练了1000场比赛:</p><figure class="lz ma mb mc gt jq gh gi paragraph-image"><div class="gh gi me"><img src="../Images/c31ed2e6ec80c7b5e10f74dd9f59628a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*UWFQ-VK4SeHZk2eCd19GRg.png"/></div></figure><p id="d75f" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这导致了91.2%的准确率。如果你看上面的图表，你会发现有一些你可能没有预料到的有趣情况，例如6个敌方陆战队员对预测者的7个导致了失败，8个敌方陆战队员对预测者的10个也是如此。即使双方的海军陆战队人数相等，结果也可能是这样或那样。</p><p id="6567" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这个“灰色区域”意味着90%左右的准确率实际上可能非常接近您从系统中所能获得的最高准确率。</p><p id="fca7" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这个文件的最终版本可以从<a class="ae kr" href="https://github.com/skjb/pysc2-tutorial/blob/master/Battle%20Predictor/train_tvt.py" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><h1 id="3b0b" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">7.扩展和实现</h1><p id="76b0" class="pw-post-body-paragraph jt ju iq jv b jw lq jy jz ka lr kc kd ke ls kg kh ki lt kk kl km lu ko kp kq ij bi translated">我们在本教程中涉及的例子非常简单，但是我已经扩展到包括更复杂的军队组成和比赛，它们都达到了90%以上的准确率。我尝试的一个场景是陆战队员对狂热者，它有99%的准确率:</p><figure class="lz ma mb mc gt jq gh gi paragraph-image"><div class="gh gi me"><img src="../Images/d342cf0fced67789eb6fe774960f9a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*s82bZHg8SkoaA5kHys5KJg.png"/></div></figure><p id="dbda" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">一旦你训练了你的比赛，你可以保存所学的数据。首先添加一个导入:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="3a05" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">然后，在对整个数据集而不仅仅是测试集进行训练之后，您可以转储数据。</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="15c6" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">然后你需要做的就是加载数据，让你的算法做一个预测，比如:</p><figure class="lz ma mb mc gt jq"><div class="bz fp l di"><div class="md js l"/></div></figure><p id="0c9a" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">这将会产生如下结果:</p><pre class="lz ma mb mc gt mh ly mi mj aw mk bi"><span id="d536" class="ml kt iq ly b gy mm mn l mo mp">[0]</span></pre><p id="ad87" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">预测速度非常快，所以你可以定期运行它，而不会对你的机器人的速度产生重大影响。为了最终的优化，你应该加载它一次，并多次调用<code class="fe lv lw lx ly b">predict</code>。</p><p id="11db" class="pw-post-body-paragraph jt ju iq jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ij bi translated">如果你喜欢这个教程，请在<a class="ae kr" href="https://www.patreon.com/skjb" rel="noopener ugc nofollow" target="_blank"> Patreon </a>上支持我。也请和我一起上<a class="ae kr" href="https://discord.gg/zXHU4wM" rel="noopener ugc nofollow" target="_blank"> Discord </a>，或者关注我上<a class="ae kr" href="https://www.twitch.tv/skjb" rel="noopener ugc nofollow" target="_blank"> Twitch </a>、<a class="ae kr" href="https://medium.com/@skjb" rel="noopener"> Medium </a>、<a class="ae kr" href="https://github.com/skjb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>、<a class="ae kr" href="https://twitter.com/theskjb" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae kr" href="https://www.youtube.com/channel/UCZcEvhpV4_6llcrWrWQ2wsg" rel="noopener ugc nofollow" target="_blank"> YouTube </a>。</p></div></div>    
</body>
</html>