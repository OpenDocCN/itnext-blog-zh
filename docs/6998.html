<html>
<head>
<title>Terraform Cheat Sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Terraform备忘单</h1>
<blockquote>原文：<a href="https://itnext.io/terraform-cheat-sheet-3f7c5c55cfbc?source=collection_archive---------0-----------------------#2022-05-11">https://itnext.io/terraform-cheat-sheet-3f7c5c55cfbc?source=collection_archive---------0-----------------------#2022-05-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="846e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">命令参考与有用的例子！</h2></div><p id="00db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时，您只想直接找到需要与特定工具一起使用的命令，而不必浏览所有文档。在本帖中，我将重点介绍Terraform CLI中常用的命令，这样您就可以轻松地直接开始操作了！</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/adf5960398ad724195b194ba17340f53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H3eA4_jlQJDeaSgpJ9IVGw.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae lu" href="https://unsplash.com/s/photos/list?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e12a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本命令参考指南是在编写时使用Terraform的最新版本1.1.9编写的。随着时间的推移，可以添加新的命令和子命令，但不应该有太大的变化。您可以在此获得Terraform的最新版本:</p><div class="lv lw gp gr lx ly"><a href="https://www.terraform.io/downloads" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">HashiCorp的下载| Terraform</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">软件包管理器brew tap hashi corp/tap brew install hashi corp/tap/terraform MAC OS二进制下载带宽由…提供</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.terraform.io</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm lo ly"/></div></div></a></div></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="483b" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">地形命令快速参考</h1><h2 id="5ad0" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">内容</h2><ul class=""><li id="f240" class="ny nz it kk b kl oa ko ob kr oc kv od kz oe ld of og oh oi bi translated">寻求帮助</li><li id="2b2a" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">显示你的地形版本</li><li id="4562" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">格式化您的Terraform代码</li><li id="1ce2" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">初始化您的目录</li><li id="f905" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">下载并安装模块</li><li id="dcb1" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">验证您的地形代码</li><li id="5649" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">规划您的基础设施</li><li id="0ef2" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">部署您的基础设施</li><li id="0701" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">摧毁你的基础设施</li><li id="e016" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">“污染”或“不污染”你的资源</li><li id="c1eb" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">刷新状态文件</li><li id="c6df" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">查看您的状态文件</li><li id="60ea" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">操作您的状态文件</li><li id="c28a" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">将现有基础设施导入Terraform状态</li><li id="c203" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">获取提供商信息</li><li id="0556" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">管理您的工作区</li><li id="5c08" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">查看您的输出</li><li id="4e3b" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">释放工作区的锁定</li><li id="aa3f" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">登录和注销远程主机(Terraform Cloud)</li><li id="3100" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">制作依赖关系图</li><li id="bc46" class="ny nz it kk b kl oj ko ok kr ol kv om kz on ld of og oh oi bi translated">测试你的表情</li></ul></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h2 id="d250" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">获得帮助</strong></h2><p id="ee69" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform -help</code> —获取可执行的命令列表及描述。可以与任何其他子命令一起使用，以获取更多信息。</p><p id="66f0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform fmt -help</code> —显示<code class="fe or os ot ou b">fmt</code>命令的帮助选项。</p><h2 id="fa0c" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">显示你的地形版本</strong></h2><p id="f673" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform version</code> —显示您的Terraform的当前版本，并在有更新版本可供下载时通知您。</p><h2 id="bcfd" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">格式化您的地形代码</strong></h2><p id="750f" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated">这应该是创建配置文件后运行的第一个命令，以确保使用HCL标准格式化代码。这使得跟踪更容易，并且有助于协作。</p><p id="296b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform fmt</code> —使用HCL语言标准格式化您的Terraform配置文件。</p><p id="cf73" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform fmt --recursive</code> —也格式化子目录中的文件</p><p id="ec0a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform fmt --diff</code> —显示原始配置文件和格式更改之间的差异。</p><p id="25d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform fmt --check</code> —在自动化CI/CD管道中很有用，检查标志可用于确保配置文件格式正确，否则退出状态将为非零。如果文件格式正确，退出状态将为零。</p><h2 id="fcd6" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">初始化你的目录</strong></h2><p id="559c" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform init</code> —为了准备与Terraform一起使用的工作目录，<code class="fe or os ot ou b">terraform init</code>命令执行后端初始化、子模块安装和插件安装。</p><p id="a878" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform init -get-plugins=false</code> —初始化工作目录，不要下载插件。</p><p id="be2e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform init -lock=false</code> —初始化工作目录，后端迁移时不要持有状态锁。</p><p id="2d8d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform init -input=false</code> —初始化工作目录，禁用交互提示。</p><p id="d8d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform init -migrate-state</code> —重新配置后端，并尝试迁移任何现有状态。</p><p id="ee79" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform init -verify-plugins=false</code> —初始化工作目录，不验证哈希公司签名的插件</p><p id="e1bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于<code class="fe or os ot ou b">terraform init</code>命令的详细纲要，请看<a class="ae lu" href="https://faun.pub/terraform-init-command-overview-with-quick-usage-examples-752a5719c317" rel="noopener ugc nofollow" target="_blank">我的帖子</a>！</p><h2 id="6146" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">下载并安装模块</strong></h2><p id="8087" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated">注意这通常不是必需的，因为这是<code class="fe or os ot ou b">terraform init</code>命令的一部分。</p><p id="a342" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform get</code> —下载并安装配置所需的模块。</p><p id="e908" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform get -update</code> —根据可用模块检查已安装模块的版本，如果可用，则安装新版本。</p><h2 id="7557" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">验证您的地形代码</strong></h2><p id="55ca" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform validate</code> —验证目录中的配置文件，并且不访问任何远程状态或服务。<code class="fe or os ot ou b">terraform init</code>应该在此命令之前运行。</p><h2 id="ec72" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">规划您的基础设施</strong></h2><p id="5376" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform plan</code> —计划将生成一个执行计划，向您显示将采取什么行动，而不实际执行计划的行动。</p><p id="6a3f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform plan -out=&lt;path&gt;</code> —将计划文件保存到给定路径。然后可以传递给<code class="fe or os ot ou b">terraform apply</code>命令。</p><p id="ea54" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建一个摧毁所有物体的计划，而不是通常的行动。</p><h2 id="ce80" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">部署</strong>你的<strong class="ak">基础设施</strong></h2><p id="b3bf" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply</code> —根据配置文件创建或更新基础架构。默认情况下，将首先生成一个计划，并需要在应用之前进行审批。</p><p id="4dd0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply -auto-approve</code> —应用更改，无需以交互方式向计划键入“是”。在自动化CI/CD管道中很有用。</p><p id="39d5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply &lt;planfilename&gt;</code> —提供使用<code class="fe or os ot ou b">terraform plan -out</code>命令生成的文件。如果提供，Terraform将在没有任何确认提示的情况下采取计划中的措施。</p><p id="0411" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply -lock=false</code> —在地形应用操作期间，不要保持状态锁定。如果其他工程师可能对同一工作空间运行并发命令，请谨慎使用。</p><p id="3816" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply -parallelism=&lt;n&gt;</code> —指定并行运行的操作数量。</p><p id="c3dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply -var="domainpassword=password123"</code> —传入一个变量值。</p><p id="9f41" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply -var-file="varfile.tfvars"</code> —传入包含在文件中的变量。</p><p id="cba6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform apply -target=”module.appgw.0"</code> —仅将更改应用于目标资源。</p><h2 id="4f11" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">摧毁</strong>你的<strong class="ak">基础设施</strong></h2><p id="2c24" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform destroy</code> —破坏Terraform管理的基础设施。</p><p id="e4f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform destroy -target=”module.appgw.0"</code> —仅销毁目标资源。</p><p id="c3ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform destroy -auto-approve</code> —销毁基础设施，无需对计划交互式键入“是”。在自动化CI/CD管道中很有用。</p><h2 id="b249" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">“污染”或“不污染”你的资源</h2><p id="f23e" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated">使用<code class="fe or os ot ou b">taint</code>命令将资源标记为未完全运行。它将被删除并重新创建。</p><p id="9885" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform taint vm1.name</code> —污染指定的资源实例。</p><p id="3018" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform untaint vm1.name</code> —取消对已经被污染的资源实例的着色。</p><h2 id="e2ac" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">刷新状态文件</strong></h2><p id="2a02" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform refresh</code> —用包含Terraform中被管理资源信息的更新元数据修改状态文件。不会修改您的基础设施。</p><h2 id="bc60" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">查看</strong>你的<strong class="ak">状态文件</strong></h2><p id="45e7" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform show</code> —以人类可读的格式显示状态文件。</p><p id="3fb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform show &lt;path to statefile&gt;</code> —如果您想要读取特定的状态文件，您可以提供该文件的路径。如果没有提供路径，则显示当前状态文件。</p><h2 id="ec6a" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">操纵</strong>你的<strong class="ak">状态文件</strong></h2><p id="26ed" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state</code> —以下子命令之一必须与该命令一起使用，以操作状态文件。</p><p id="efdc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state list</code> —列出当前状态文件中跟踪的所有资源。</p><p id="4f35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state mv</code> —移动状态中的项目，例如，当您需要告诉Terraform项目已被重命名时，这很有用，例如<code class="fe or os ot ou b">terraform state mv vm1.oldname vm1.newname</code></p><p id="f2ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state pull &gt; state.tfstate</code> —获取当前状态并将其输出到本地文件。</p><p id="0bf4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state push</code> —从本地状态文件更新远程状态。</p><p id="96a6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state replace-provider hashicorp/azurerm customproviderregistry/azurerm</code> —替换提供者，这在切换到使用自定义提供者注册表时很有用。</p><p id="bbf7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state rm</code> —从状态文件中删除指定的实例。在Terraform之外手动删除资源时非常有用。</p><p id="a0d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform state show &lt;resourcename&gt;</code> —显示状态文件中指定的资源。</p><h2 id="3c39" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">将现有基础设施导入Terraform状态</h2><p id="4b6b" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform import vm1.name -i id123</code> —将id为123的虚拟机导入到vm1.name下配置文件中定义的配置中</p><p id="89d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform import vm1.name -i id123 -allow-missing-config</code> —如果配置块不存在，导入并允许。</p><h2 id="f2a2" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated"><strong class="ak">获取提供商信息</strong></h2><p id="2fdc" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform providers</code> —显示配置文件中使用的提供者及其要求的树。</p><h2 id="07b1" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">管理您的工作区</h2><p id="0c02" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform workspace</code> —以下子命令之一必须与workspace命令一起使用。当工程师想要测试稍微不同的代码版本时，工作区会很有用。不建议使用工作区来隔离或分离不同开发阶段之间的相同基础架构，例如开发/ UAT /生产，或不同的内部团队。</p><p id="bb99" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform workspace show</code> —显示当前工作空间的名称。</p><p id="3642" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform workspace list</code> —列出您的工作区。</p><p id="c50e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform workspace select &lt;workspace name&gt;</code> —选择一个指定的工作空间。</p><p id="ec2f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform workspace new &lt;workspace name&gt;</code> —创建一个具有指定名称的新工作区。</p><p id="6a00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform workspace delete &lt;workspace name&gt;</code> —删除指定的工作空间。</p><h2 id="4a86" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">查看您的输出</h2><p id="70b9" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform output</code> —列出当前保存在状态文件中的所有输出。默认情况下，它们显示在<code class="fe or os ot ou b">terraform apply</code>的末尾，如果您想单独查看它们，该命令会很有用。</p><p id="c32a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform output -state=&lt;path to state file&gt;</code> —列出保存在指定状态文件中的输出。</p><p id="89b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform output -json</code> —以JSON格式列出保存在状态文件中的输出，以使它们成为机器可读的。</p><p id="5ccc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform output vm1_public_ip</code> —列出状态文件中保存的特定输出。</p><h2 id="b0b0" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">释放工作区的锁定</h2><p id="8fdc" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform force-unlock &lt;lock_id&gt;</code> —从您的工作区中删除具有指定锁ID的锁。当一个锁被“卡住”时，通常是在不完全的地形运行之后，这是很有用的。</p><h2 id="551b" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">登录和注销远程主机(Terraform Cloud)</h2><p id="c188" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform login</code> —使用浏览器获取terra form cloud(app . terra form . io)的API令牌。</p><p id="c023" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform login &lt;hostname&gt;</code> —登录到指定的主机。</p><p id="ff0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform logout</code> —默认情况下，对于terra form Cloud(app . terra form . io)，在登录后删除本地存储的凭据。</p><p id="bc07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform logout &lt;hostname&gt;</code> —以指定的主机名登录后，删除本地存储的凭据。</p><h2 id="529a" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">制作依赖关系图</h2><p id="9477" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform graph</code> —用点语言生成一个图形，显示状态文件中对象之间的依赖关系。这可以通过一个叫做Graphwiz的程序来渲染。</p><p id="8bc7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform graph -plan=tfplan</code> —使用指定的计划文件(使用<code class="fe or os ot ou b">terraform plan -out=tfplan</code>生成)生成依赖图。</p><p id="8336" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe or os ot ou b">terraform graph -type=plan</code> —指定要输出的图形类型，可以是<code class="fe or os ot ou b">plan, plan-refresh-only, plan-destroy,</code>或<code class="fe or os ot ou b">apply</code>。</p><h2 id="76cd" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">测试你的表情</h2><p id="f0a6" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated"><code class="fe or os ot ou b">terraform console</code> —允许使用命令行在交互式控制台上测试和浏览表达式。例如1+2:)</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h2 id="85d2" class="nm mv it bd mw nn no dn na np nq dp ne kr nr ns ng kv nt nu ni kz nv nw nk nx bi translated">摘要</h2><p id="4a08" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oo kt ku kv op kx ky kz oq lb lc ld im bi translated">本指南将帮助您在使用Terraform CLI时直接获得所需的命令！</p><p id="3c05" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想要更多的Terraform内容？点击这里查看我在Terraform上的其他文章！</p><p id="581d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">干杯！🍻</p><div class="lv lw gp gr lx ly"><a href="https://www.buymeacoffee.com/jackwesleyroper" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">Jack Roper正在Azure、Azure DevOps、Terraform、Kubernetes和Cloud tech上写博客！</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">希望我的博客能帮到你，你会喜欢它的内容！我真的很喜欢写技术内容和分享…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="mh l"><div class="ov l mj mk ml mh mm lo ly"/></div></div></a></div></div></div>    
</body>
</html>