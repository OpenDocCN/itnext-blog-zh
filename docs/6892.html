<html>
<head>
<title>A new Android TreeView implementation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个新的Android TreeView实现</h1>
<blockquote>原文：<a href="https://itnext.io/a-new-android-treeview-implementation-9b27ca9854af?source=collection_archive---------3-----------------------#2022-04-04">https://itnext.io/a-new-android-treeview-implementation-9b27ca9854af?source=collection_archive---------3-----------------------#2022-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9b50694b6431a49641f68f2a69900a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qpeP_-YnTO7obLvYc6AOg.png"/></div></div></figure><p id="58d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，在2022年初，我想创建一个文件树，就像你在任何代码编辑器或IDE中看到的那样，表示项目结构，你可以做一些操作，如展开或折叠目录，我在GitHub中搜索了许多树视图实现，但我发现其中一些已经很多年没有维护过了，并且示例项目不能在新的Android Studio版本上运行，其他实现从头开始创建自定义视图并绘制树，但它们不能正确地工作，因为有大量的节点和其他限制。</p><p id="21a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我开始创建一个列表，其中包含所有这些功能的一组功能，以及GitHub问题上要求的一组功能，以便从中获得灵感，这样我就可以创建一个通用而有用的实现，每个人都可以轻松定制和扩展，因此，我想介绍这个新的<a class="ae kw" href="https://github.com/amrdeveloper/treeview" rel="noopener ugc nofollow" target="_blank"> TreeView </a>库。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/075accd0a084ca19e4e1910735d8f1c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*bqYXJw8i1PsPOwt8FbrxUQ.gif"/></div></figure><p id="cb18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">主要目标是使<a class="ae kw" href="https://github.com/amrdeveloper/treeview" rel="noopener ugc nofollow" target="_blank">树形视图</a>易于使用，几乎不受限制地定制和扩展，并与新的android版本保持同步，那么你能用<a class="ae kw" href="https://github.com/amrdeveloper/treeview" rel="noopener ugc nofollow" target="_blank">树形视图</a>做什么呢？</p><p id="5990" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">TreeView没有任何自定义视图，您需要的只是一个普通的recycle view，这样您就可以获得recycle view回收和性能的好处，也可以获得2D滚动，而无需任何自定义布局，就像您希望让您的普通recycle view具有2D滚动一样，TreeView有一个自定义的recycle view适配器，带有随时可用的单击和长单击侦听器，我们可以在将来添加更多侦听器，所以每个TreeNode都不需要有一个对它的侦听器的引用。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/5c4763e4adc418d046c5e9d4bcb4e5a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*4XLRimYWlARVisgmgzb62A.gif"/></div></figure><p id="0d3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以拥有任意数量的根，也可以拥有任意数量的列表项布局，而无需扩展和覆盖默认的适配器，我已经使用工厂设计模式实现了这一点，因此您需要将TreeViewHolderFactory传递给适配器构造函数，该构造函数将每个列表项布局映射到它的ViewHolder，因此您所需要的就是为该布局创建一个View Holder，并将其添加到工厂中。</p><p id="91c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">TreeView还支持许多操作，如展开和折叠节点和分支或按级别展开和折叠所有节点，您还可以获得当前选择的节点和任何节点的父节点，所有这些功能的实现都封装在TreeNodeManager类中，因此我们可以轻松地为它们编写单元测试，如果您想要不同的实现，您可以轻松地创建一个自定义的TreeNodeManager并将其传递给适配器。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/144cffb5dcede79dc16deb89c30ce3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*B33uwSfmD1VvyLn6vP3FkQ.gif"/></div></figure><p id="8c0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于如何安装、使用和扩展的所有细节都写在TreeView网站上，并附有示例，如果您面临任何问题或有任何疑问，请随时在<a class="ae kw" href="https://github.com/amrdeveloper/treeview" rel="noopener ugc nofollow" target="_blank"> Github </a>资源库上创建新问题，以便我们可以快速帮助您。</p><p id="0bd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个实现是现成的，如果你有任何想法或要求，请随时分享或贡献和添加它们，你也可以在网站上找到所有的细节。</p><p id="2c8c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">TreeView Github:<a class="ae kw" href="https://github.com/amrdeveloper/treeview" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">AMR developer/TreeView</strong></a><br/>TreeView网站:<a class="ae kw" href="https://amrdeveloper.github.io/TreeView/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">Github.io/TreeView</strong></a></p><p id="8ea9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae kw" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> GitHub </strong> </a>，<a class="ae kw" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> LinkedIn </strong> </a>，<a class="ae kw" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Twitter </strong> </a>上找到我。</p><p id="8803" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受编程😋。</p></div></div>    
</body>
</html>