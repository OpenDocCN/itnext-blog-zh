<html>
<head>
<title>Notific8 — From Old School to Modern: The Finale</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通知8——从老派到现代:大结局</h1>
<blockquote>原文：<a href="https://itnext.io/notific8-from-old-school-to-modern-the-finale-6a8814b4c9af?source=collection_archive---------2-----------------------#2019-05-04">https://itnext.io/notific8-from-old-school-to-modern-the-finale-6a8814b4c9af?source=collection_archive---------2-----------------------#2019-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/86f2827e496f1f9463052c498ed82794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jhmzu8jUms8MgXTNB_A4aA.png"/></div></div></figure><p id="ab8d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">重写Notific8是一次很棒的经历。web开发的世界发展很快，自库最初创建以来，前端开发领域发生了很多变化。这次重写让我有机会在改进库的同时应用其中的很多内容。</p><p id="9c01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇总结性的文章中，我想强调一些重大的变化和它们背后的想法。</p><h1 id="72e8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">以打字打的文件</h1><p id="d899" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">选择Typescript对我来说是一个相当容易的决定。ES2015+增加了许多新功能和语法增强，改善了开发体验。添加了类型和实验特性，Typescript更进了一步。</p><p id="f3d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我喜欢使用typescript有几个主要原因:</p><ol class=""><li id="690a" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated">有了打字功能，我就不会在代码中犯引入bug的愚蠢错误</li><li id="ff49" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">虽然没有在这个项目中使用，但它经常为新版本的es(如decorators)引入实验性的特性和建议</li><li id="983b" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">许多ide，如Visual Studio Code(在重写开发过程中使用的工具)可以选择用于自动完成的类型和建议，以帮助加速开发</li></ol><h1 id="2720" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">承诺</h1><p id="dea9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">利用承诺是另一个很容易做出的决定。虽然要弄清楚它们到底属于哪里可能是一个挑战，但我从一开始就知道它们会使处理通知变得更容易。</p><h1 id="fd47" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">CSS自定义属性(CSS变量)</h1><p id="33ad" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">该库在其开发的早期就使用了Sass。原因之一是允许使用变量来使开发更容易。</p><p id="034a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，CSS自定义属性在几年前被引入CSS规范，并从此获得了相当广泛的浏览器支持。利用自定义属性可以更自然地使用浏览器功能，并减少所需的代码量。这也意味着消费者开发人员可以使用开发人员工具在浏览器中调整颜色值，而不必在进行最终更改之前测试组合时重新编译CSS。</p><p id="bf3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Notific8的未来版本将更多地构建这一功能，使开发人员能够更容易地引入已经编译过的主题版本，然后更容易地从他们自己的样式表中定义自定义颜色。</p><h1 id="46f3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">可重复使用的通知</h1><p id="2010" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">很久以前我就意识到有必要多次显示同一个通知。过去，开发人员每次都必须创建一个新的实例，这是一件痛苦的事情。在旧代码中很难确定如何正确地做到这一点，但重写给了我从一开始就这样做的机会。</p><p id="7703" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">利用ES2015+类使这变得容易得多。现在，一个通知可以重复使用多次。这意味着当同一个通知需要显示多次时，它只在内存中创建一个实例，并且通知中的事件处理程序只被附加一次。可以在开发人员的代码库中跟踪同一个实例，然后稍后再次调用<code class="fe mn mo mp mq b">open</code>函数来重新打开通知。</p><h1 id="9c07" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">构建工具链</h1><p id="70bc" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">该项目在使用什么工具进行构建方面有了一些变化。直到重写之前，该工具一直使用Grunt。然而，Grunt最近似乎很少看到像Webpack这样的工具接管了它的职责。</p><p id="f150" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个项目比较小，比较简单。需要任何类型的构建的唯一两件事是源Sass文件和源Typescript文件。只需使用基本的工具并创建简单的命令在package.json文件中运行就足够了，这使得完全消除构建设置的需要成为可能。还有一个变化是，输出JavaScript是一个ES2015+模块，旨在由最终开发人员使用构建工具导入到现代项目或转换，因此库的构建系统不再进行缩小或混淆。</p><h1 id="634d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">演示页面</h1><p id="bf85" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">旧的演示页面只是:旧。它使用了帕格，意味着又一件需要澄清的事情。它还引入了一个CSS库，看起来很棒，但经常与Notific8风格冲突。决定改变它意味着删除了另一组构建步骤，使得旧的工具链不再有用。</p><p id="f585" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">新的演示使用了Vue。这是一个非常轻量级的库，易于使用。Vue还提供了一个使用现代库或框架在项目中实现Notific8的例子。这也意味着能够为演示抛弃对jQuery的需求。</p><h1 id="062d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">放弃IE支持</h1><p id="88e0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">出于某种原因，仍然有一些人选择使用Internet Explorer(或者我喜欢称之为Internet Exploder)。它已经过时多年，目前只收到安全补丁，但也即将结束。</p><p id="1072" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我和我的同事每天都在试图支持它时遇到问题。就在最近，我不得不在工作中专门为IE写一些代码，这让我有些畏缩，但这是唯一能工作并让包变大的东西。</p><p id="bb17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此时，已是2019年。微软多年来一直告诉人们停止使用它，在撰写本文时，他们正在更换Edge，使用Chromium作为其核心。Chrome(和其他chrome衍生产品)和Firefox特别添加了一个很棒的网络浏览环境，并且定期快速更新。考虑到其他浏览器经常推出的新功能，用非常非常有限的功能集来支持一个不断缩小的浏览器是没有意义的。</p><h1 id="0a0f" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">最后的想法</h1><p id="6b3c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">最终，重写库可能需要一年多的时间，但从长远来看，这是值得的。我对最终结果非常满意，并认为它在一个更好的地方继续发挥它的作用。我对未来有一些计划和实验，但这些会在适当的时候到来。</p><p id="5d0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您关注本系列。这可能花了很长时间，但我希望这是值得的，我感谢你花时间通读所有的帖子。</p><h1 id="a5db" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">最终代码</h1><p id="1515" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">最终代码存放在https://github.com/willsteinmetz/notific8的GitHub上。完整的代码发布在版本<a class="ae mr" href="https://github.com/willsteinmetz/notific8/tree/5.0.0" rel="noopener ugc nofollow" target="_blank"> 5.0.0 </a>中，是查看整个系列中工作的代码示例的版本。</p></div></div>    
</body>
</html>