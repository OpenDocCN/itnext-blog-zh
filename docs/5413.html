<html>
<head>
<title>Dimension — A CSS inspired distance calculating package for Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">dimension——一个受CSS启发的颤振距离计算软件包</h1>
<blockquote>原文：<a href="https://itnext.io/dimension-a-css-inspired-distance-calculating-package-for-flutter-e0604f62e707?source=collection_archive---------6-----------------------#2021-02-27">https://itnext.io/dimension-a-css-inspired-distance-calculating-package-for-flutter-e0604f62e707?source=collection_archive---------6-----------------------#2021-02-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="ebab" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">CSS提供了<length> / <percentage>数据类型，使得网站的响应设计更加容易。它还允许一些方便的功能，如:</percentage></length></p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="da7e" class="lb lc iq kx b gy ld le l lf lg">max(10px, 10%)<br/>calc(10px + 10%)<br/>clamp(10px, 50%, 20px)</span></pre><p id="b02b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Flutter的布局系统不同于web，它不使用CSS。但是在我看来，能够做一些类似于CSS为更容易响应的设计目的所提供的事情仍然是有益的。</p><p id="dce0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这就是为什么我创建了<a class="ae lh" href="https://pub.dev/packages/dimension" rel="noopener ugc nofollow" target="_blank">维度</a>包(正式名称为length_unit)。基类简称Dimension，下面是这个类的接口(实现略):</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="5e37" class="lb lc iq kx b gy ld le l lf lg">abstract class Dimension {<br/>  const Dimension();<br/><br/>  double toPX({double? constraint, Size? screenSize});<br/><br/>  @protected<br/>  Dimension? add(Dimension other) =&gt; null;<br/><br/>  Dimension operator +(Dimension other);<br/><br/>  Dimension operator -();<br/><br/>  Dimension operator -(Dimension other);<br/><br/>  Dimension scale(double t);<br/><br/>  static Dimension max(Dimension value1, Dimension value2);<br/><br/>  static Dimension min(Dimension value1, Dimension value2);<br/><br/>  static Dimension clamp(Dimension min, Dimension value, Dimension max);</span><span id="ead5" class="lb lc iq kx b gy li le l lf lg">  Dimension? lerpFrom(Dimension? a, double t);<br/><br/>  Dimension? lerpTo(Dimension? b, double t);<br/><br/>  static Dimension? lerp(Dimension? a, Dimension? b, double t);<br/>}</span></pre><p id="e216" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以看到它支持加法和减法。还支持Lerp(补间)。像min、max和clamp这样的函数应该像CSS提供的那样工作，并且可以嵌套。我们只需要调用toPX()方法将一个Dimension实例转换成Flutter使用的PX值。</p><p id="464c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">维度是抽象的。您实际使用的是长度类:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="e7e2" class="lb lc iq kx b gy ld le l lf lg">class Length extends Dimension {<br/>  final double value;<br/>  final LengthUnit unit;<br/><br/>  const Length(this.value, {this.unit = LengthUnit.px});</span><span id="f237" class="lb lc iq kx b gy li le l lf lg">  ...</span><span id="aa00" class="lb lc iq kx b gy li le l lf lg">}</span></pre><p id="94ca" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">它有一个值和一个单位。支持的单位有:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="de73" class="lb lc iq kx b gy ld le l lf lg">enum LengthUnit {<br/>  <em class="lj">///logic pixel<br/>  </em>px,<br/>  <em class="lj">///percent of the parent size<br/>  </em>percent,<br/>  <em class="lj">///percent of the screen width<br/>  </em>vw,<br/>  <em class="lj">///percent of the screen height<br/>  </em>vh,<br/>}</span></pre><p id="073a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要创建长度实例，请编写:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="902b" class="lb lc iq kx b gy ld le l lf lg">var length=Length(10.0, unit: LengthUnit.percent);</span></pre><p id="e7e3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">或者使用那些方便的扩展方法:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="e6df" class="lb lc iq kx b gy ld le l lf lg">length=10.toPXLength; //10 px<br/>length=10.toPercentLength; // 10% of the parent constraint<br/>length=10.toVWLength; //10% of the screen width<br/>length=10.toVHLength; //10% of the screen height</span></pre><p id="3b54" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后将长度转换为px值:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="278b" class="lb lc iq kx b gy ld le l lf lg">double px=length.toPX(constraint: 100, screenSize: MediaQuery.of(context).size);</span></pre><p id="f6a7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">约束值是百分比单位，应由用户提供。可以通过调用LayoutBuilder来获取父约束大小。</p><p id="0a75" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下面是创建响应容器的一个片段:</p><figure class="ks kt ku kv gt lk"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="6906" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Dimension类支持序列化/反序列化(就像我开发的其他包一样)，包括函数调用和多长度实例的组合。</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="d72c" class="lb lc iq kx b gy ld le l lf lg">Dimension length=Dimension.clamp(10.toPXLength+10.toVWLength, 100.toPXLength+20.toPercentLength, Dimension.max(500.toPXLength, 50.toVWLength));<br/>String jsonStr=json.encode(length.toJson());<br/>Dimension newLength=parseDimension(jsonStr);</span></pre><p id="dd9f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">dimension包更像是一个帮助器类，让你根据父约束和屏幕大小快速计算一些距离。如果你有这个包的用例，欢迎在下面评论。谢谢大家！</p><figure class="ks kt ku kv gt lk gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/5aeeedbfd1cdd2001e02fe2480ee88f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*afUk10hYjTMGGiVVWKbGzA.gif"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">在两个响应尺寸之间制作动画</figcaption></figure></div></div>    
</body>
</html>