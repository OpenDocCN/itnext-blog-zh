<html>
<head>
<title>Build a Project Management Tool with Vue.js, Node.js and Apollo — Part 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue.js、Node.js和Apollo构建一个项目管理工具——第5部分</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-5-d59e6e345e39?source=collection_archive---------3-----------------------#2018-08-16">https://itnext.io/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-5-d59e6e345e39?source=collection_archive---------3-----------------------#2018-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="bc75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">各位Vue.js爱好者和Node.js爱好者以及阿波罗爱好者们，你们好！让我们开始第5部分吧！</p><blockquote class="kl km kn"><p id="51c1" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-software-with-vue-js-and-apollo-part1-d12ee75a7641">第1部分—构建简单的GraphQL API </a></p><p id="23be" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part2-47fbe5dc2de4">第2部分—构建MongoDB模式和电子邮件表单</a></p><p id="f5bf" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-3-69a7bf9f2f1b">第3部分—认证</a></p><p id="583b" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-4-40fbe0625d32">第4部分——建立工作空间</a></p><p id="e0a3" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">第5部分—文件夹的CRUD功能(这一部分)</p></blockquote><p id="6d60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ko">本教程的代码可以在</em> <a class="ae ks" href="https://github.com/kenzotakahashi/enamel/tree/part5" rel="noopener ugc nofollow" target="_blank"> <em class="ko">这里</em> </a> <em class="ko">找到。或者如果你想跟着一起，你可以在这里</em>  <em class="ko">克隆part 4分支</em> <a class="ae ks" href="https://github.com/kenzotakahashi/enamel/tree/part4" rel="noopener ugc nofollow" target="_blank"> <em class="ko">。</em></a></p><h1 id="088b" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">创建文件夹</h1><p id="0c9d" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">将模式定义添加到<code class="fe lw lx ly lz b">server/src/schema.graphql</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="387b" class="mi ku iq lz b gy mj mk l ml mm">type Mutation {<br/>  ...<br/>  createFolder(parent: String, name: String!): Folder<br/>}</span></pre><p id="6bc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解析器如下所示:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="ee24" class="mi ku iq lz b gy mj mk l ml mm">Mutation: {<br/>  ...<br/>  async createFolder(_, {parent, name}, context) {<br/>    const userId = getUserId(context)<br/>    const folder = await Folder.create({<br/>      name,<br/>      parent: parent || undefined,<br/>      shareWith: parent ? [] : [{<br/>        kind: 'Team',<br/>        item: (await User.findById(userId)).team<br/>      }]<br/>    })<br/>    return await Folder.findById(folder.id).populate('shareWith.item')<br/>  }<br/>},</span></pre><p id="4cca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果文件夹是根文件夹(没有父文件夹)，则将团队设置为<code class="fe lw lx ly lz b">shareWith</code>。如果这个文件夹是一个子文件夹，<code class="fe lw lx ly lz b">shareWith</code>只是一个空数组。稍后，我们将构建一个表单来更改文件夹的共享状态，但是您不能在创建新文件夹时设置共享状态。虽然你可以在Wrike中这样做，但我不想在多个地方实现相同的功能。</p><p id="c020" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是服务器。</p><p id="c389" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将此添加到<code class="fe lw lx ly lz b">client/src/constants/query.gql</code></p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="b598" class="mi ku iq lz b gy mj mk l ml mm">mutation CreateFolder($parent: String, $name: String!) {<br/>  createFolder(parent: $parent, name: $name) {<br/>    ...FolderFields<br/>  }<br/>}</span></pre><p id="970f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是<code class="fe lw lx ly lz b">client/src/views/Workspace.vue</code>的更新版本(CSS除外):</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="ab6d" class="mi ku iq lz b gy mj mk l ml mm">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;div class="container"&gt;<br/>      &lt;aside class="tree-root"&gt;<br/>        &lt;div v-if="getTeam.id" class="tree-item"<br/>            <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>.right.stop.prevent="$store.commit('changeActiveWidget', `folder${getTeam.id}`)"<br/>            <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>.left.stop="$router.push({name: 'folder', params: {id: getTeam.id}})"&gt;<br/>          &lt;div class="tree-plate"  v-bind:class="{active: $route.params.id === getTeam.id}"&gt;<br/>            &lt;div class="circle"&gt;&lt;/div&gt;              <br/>            &lt;span class="folder no-select-color teamname"&gt;{{ getTeam.name }}&lt;/span&gt;<br/>            &lt;plus-button <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openModal" color="white"&gt;&lt;/plus-button&gt;</span><span id="154e" class="mi ku iq lz b gy mn mk l ml mm">&lt;div class="dropdown-content left" v-show="activeWidget === `folder${getTeam.id}`"&gt;<br/>              &lt;div <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openModal"&gt;Add Folder&lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;</span><span id="2b86" class="mi ku iq lz b gy mn mk l ml mm">&lt;FolderTree<br/>          v-for="folder in getFolders"<br/>          :key="folder.id"<br/>          :model="folder"<br/>          :team="getTeam.id" &gt;<br/>        &lt;/FolderTree&gt;<br/>      &lt;/aside&gt;</span><span id="5d8b" class="mi ku iq lz b gy mn mk l ml mm">&lt;div class="workspace-main"&gt;<br/>        &lt;router-view :key="$route.fullPath"&gt;&lt;/router-view&gt;<br/>      &lt;/div&gt;</span><span id="d69c" class="mi ku iq lz b gy mn mk l ml mm">&lt;FolderForm v-if="showModal" :config="{parent: ''}" <a class="ae ks" href="http://twitter.com/close" rel="noopener ugc nofollow" target="_blank">@close</a>="showModal = false"&gt;&lt;/FolderForm&gt;<br/>    &lt;/div&gt;</span><span id="a393" class="mi ku iq lz b gy mn mk l ml mm">&lt;/div&gt;</span><span id="d8db" class="mi ku iq lz b gy mn mk l ml mm">&lt;/template&gt;</span><span id="ba8f" class="mi ku iq lz b gy mn mk l ml mm">&lt;script&gt;<br/>import { mapState } from  'vuex'<br/>import FolderTree from '@/components/FolderTree'<br/>import FolderForm from '@/components/FolderForm'<br/>import { GetFolders, GetTeam } from '../constants/query.gql'</span><span id="a135" class="mi ku iq lz b gy mn mk l ml mm">export default {<br/>  components: {<br/>    FolderTree,<br/>    FolderForm,<br/>  },<br/>  computed: mapState(['activeWidget']),<br/>  data() {<br/>    return {<br/>      showModal: false,<br/>      getFolders: [],<br/>      getTeam: {}<br/>    }<br/>  },<br/>  apollo: {<br/>    getTeam: {<br/>      query: GetTeam,<br/>    },<br/>    getFolders: {<br/>      query: GetFolders,<br/>      error(error) {<br/>        console.error(error)<br/>      },<br/>    }<br/>  },<br/>  methods: {<br/>    openModal() {<br/>      this.$store.commit('changeActiveWidget', null)<br/>      this.showModal = true<br/>    },<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="1b62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有三个新组件。<code class="fe lw lx ly lz b">FolderTree</code>是递归渲染文件夹的树组件。<code class="fe lw lx ly lz b">FolderForm</code>是一个创建新文件夹的模态窗体。<code class="fe lw lx ly lz b">PlusButton</code>只是一个SVG图标。我们还有一个突变<code class="fe lw lx ly lz b">changeActiveWidget</code>。</p><p id="8d84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们在<code class="fe lw lx ly lz b">client/src/components/icons</code>中创建<code class="fe lw lx ly lz b">PlusButton.vue</code>(创建<code class="fe lw lx ly lz b">icons</code>文件夹):</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="f128" class="mi ku iq lz b gy mj mk l ml mm">//<!-- -->client/src/components/icons/PlusButton.vue<br/>&lt;template&gt;<br/>  &lt;div class="plus-button"<br/>    <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>.stop="$emit('click')"&gt;<br/>    &lt;svg :height="size || 16" :width="size || 16" viewBox="0 0 15 15"&gt;<br/>      &lt;g fill-rule="evenodd"&gt;<br/>        &lt;path :fill="circleColor[color]" d="M7.5 15a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm0-1a6.5 6.5 0 1 0 0-13 6.5 6.5 0 0 0 0 13z"&gt;&lt;/path&gt;<br/>        &lt;path :fill="plusColor[color]" d="M7 7H4v1h3v3h1V8h3V7H8V4H7v3z" id="plus_light_icon" &gt;&lt;/path&gt;<br/>      &lt;/g&gt;<br/>    &lt;/svg&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b59e" class="mi ku iq lz b gy mn mk l ml mm">&lt;script&gt; <br/>export default {<br/>  name: 'plus-button',<br/>  props: ['size', 'color'],<br/>  data() {<br/>    return {<br/>      circleColor: {<br/>        'white': 'rgba(255,255,255,.6)',<br/>        'grey': 'rgba(0, 0, 0, 0.32)',<br/>      },<br/>      plusColor: {<br/>        'white': '#fff',<br/>        'grey': 'rgba(0, 0, 0, 0.32)',</span><span id="2dbd" class="mi ku iq lz b gy mn mk l ml mm">}      <br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span><span id="0ff2" class="mi ku iq lz b gy mn mk l ml mm">&lt;style scoped&gt;<br/>.plus-button {<br/>  display: flex;<br/>  cursor: pointer;<br/>  width: 16px;<br/>  height: 16px;<br/>}</span><span id="bb6f" class="mi ku iq lz b gy mn mk l ml mm">&lt;/style&gt;</span></pre><p id="bf8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想在全球范围内注册它，所以将它添加到<code class="fe lw lx ly lz b">client/src/main.js</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="70ef" class="mi ku iq lz b gy mj mk l ml mm">import PlusButton from '@/components/icons/PlusButton.vue'</span><span id="77d2" class="mi ku iq lz b gy mn mk l ml mm">Vue.component('plus-button', PlusButton)</span></pre><p id="9581" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，<code class="fe lw lx ly lz b">FolderTree.vue</code>。</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="7d2b" class="mi ku iq lz b gy mj mk l ml mm">//client/src/components/FolderTree.vue<br/>&lt;template name="tree"&gt;<br/>  &lt;li&gt;<br/>    &lt;div class="tree-item"<br/>        <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>.right.stop.prevent="$store.commit('changeActiveWidget', `folder${model.id}`)"<br/>        <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>.left.stop="$router.push({name: 'folder', params: {id: model.id}})"&gt;<br/>      &lt;span <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="toggle" class="fold-button"<br/>        v-bind:class="{active: $route.params.id === model.id}"<br/>        v-bind:style="{visibility: isFolder ? 'visible' : 'hidden'}"&gt;<br/>        &lt;i :class="`fas fa-angle-${open ? 'down' : 'right'}`"&gt;&lt;/i&gt;<br/>      &lt;/span&gt;<br/>      &lt;div class="tree-plate" v-bind:class="{active: $route.params.id === model.id}"&gt;<br/>        &lt;span class="folder no-select-color"&gt;{{ model.name }}&lt;/span&gt;</span><span id="dbff" class="mi ku iq lz b gy mn mk l ml mm">&lt;div class="dropdown-content left" v-show="activeWidget === `folder${model.id}`"&gt;<br/>          &lt;div <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openModal"&gt;Add Folder&lt;/div&gt;<br/>          &lt;!-- &lt;div <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteFolder"&gt;Delete&lt;/div&gt; --&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="ab80" class="mi ku iq lz b gy mn mk l ml mm">&lt;ul class="tree" v-show="open" v-if="isFolder"&gt;<br/>      &lt;tree<br/>        v-for="folder in getFolders"<br/>        :key="folder.id"<br/>        :model="folder"<br/>        <a class="ae ks" href="http://twitter.com/open" rel="noopener ugc nofollow" target="_blank">@open</a>="openArrow"<br/>      &gt;<br/>      &lt;/tree&gt;<br/>    &lt;/ul&gt;</span><span id="6a69" class="mi ku iq lz b gy mn mk l ml mm">&lt;FolderForm v-if="showModal" :config="modalConfig" <a class="ae ks" href="http://twitter.com/close" rel="noopener ugc nofollow" target="_blank">@close</a>="showModal = false"&gt;&lt;/FolderForm&gt;<br/>  &lt;/li&gt;<br/>&lt;/template&gt;</span><span id="5452" class="mi ku iq lz b gy mn mk l ml mm">&lt;script&gt;<br/>import { mapState } from 'vuex'<br/>import FolderTree from './FolderTree'<br/>import FolderForm from './FolderForm'<br/>import { GetFolders } from '../constants/query.gql'</span><span id="2daf" class="mi ku iq lz b gy mn mk l ml mm">export default {<br/>  name: 'tree',<br/>  components: {<br/>    'tree': FolderTree,<br/>    FolderForm<br/>  },<br/>  props: ['model', 'team'],<br/>  data() {<br/>    return {<br/>      open: false,<br/>      showModal: false,<br/>      modalConfig: {},<br/>      getFolders: []<br/>    }<br/>  },<br/>  mounted() {<br/>    if (this.$route.params.id === this.model.id) {<br/>      this.$emit('open')<br/>    }<br/>  },<br/>  computed: {<br/>    isFolder: function () {<br/>      return this.getFolders.length &gt; 0<br/>    },<br/>    ...mapState(['activeWidget'])<br/>  },<br/>  apollo: {<br/>    getFolders: {<br/>      query: GetFolders,<br/>      variables() {<br/>        return { parent: this.model.id }<br/>      },<br/>      error(error) {<br/>        console.error(error)<br/>      },<br/>    }<br/>  },<br/>  methods: {<br/>    toggle() {<br/>      if (this.isFolder) {<br/>        this.open = !this.open<br/>      }<br/>    },<br/>    openModal(mode) {<br/>      this.$store.commit('changeActiveWidget', null)<br/>      this.showModal = true<br/>      this.modalConfig = {<br/>        parent: this.model.id<br/>      }<br/>    },<br/>    openArrow() {<br/>      this.open = true<br/>      this.$emit('open')<br/>    },<br/>  },<br/>  watch: {<br/>    '$route' (to, from) {<br/>      if (to.params.id === this.model.id) {<br/>        this.$emit('open')<br/>      }<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="8582" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你熟悉如何在Vue.js中实现一棵树，这大部分应该很容易理解。一开始不明显的一点是<code class="fe lw lx ly lz b">this.$emit(‘open’)</code>。当您直接输入文件夹的URL或创建新文件夹时，您希望自动展开树并显示文件夹。为此，对于每个文件夹，检查当前路径是否与文件夹的id匹配。如果是，通过调用<code class="fe lw lx ly lz b"><a class="ae ks" href="http://twitter.com/open" rel="noopener ugc nofollow" target="_blank">@open</a>=”openArrow"</code>打开父树。我在<code class="fe lw lx ly lz b">mounted</code>和<code class="fe lw lx ly lz b">watch</code>都这样做。</p><p id="e4f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用了一个字体很棒的图标，所以在<code class="fe lw lx ly lz b">client/public/index.html</code>中包含这个库:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="cb0a" class="mi ku iq lz b gy mj mk l ml mm">&lt;link rel="stylesheet" href="<a class="ae ks" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" rel="noopener ugc nofollow" target="_blank">https://use.fontawesome.com/releases/v5.1.0/css/all.css</a>" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous"&gt;</span></pre><p id="5c84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有<a class="ae ks" href="https://github.com/FortAwesome/vue-fontawesome" rel="noopener ugc nofollow" target="_blank"> vue-fontawesome </a>，但是我发现很难用。</p><p id="7ef2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，创建<code class="fe lw lx ly lz b">FolderForm.vue</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="3cc2" class="mi ku iq lz b gy mj mk l ml mm">// client/src/components/FolderForm.vue<br/>&lt;template&gt;<br/>  &lt;div class="modal-mask white" <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="$emit('close')"&gt;<br/>    &lt;div class="modal-wrapper"&gt;<br/>      &lt;div class="modal-container" <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>.stop="$store.commit('changeActiveWidget', null)"&gt;</span><span id="50a1" class="mi ku iq lz b gy mn mk l ml mm">&lt;h3&gt;Create folder&lt;/h3&gt;</span><span id="8da2" class="mi ku iq lz b gy mn mk l ml mm">&lt;el-form :model="form" <a class="ae ks" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.native.prevent="createFolder"&gt;<br/>          &lt;el-input type="text" name="foldername" ref="foldername" v-model="form.name"<br/>            placeholder="folder name" <a class="ae ks" href="http://twitter.com/keyup" rel="noopener ugc nofollow" target="_blank">@keyup</a>.esc="$emit('close')"&gt;<br/>          &lt;/el-input&gt;<br/>        &lt;/el-form&gt;</span><span id="d8cc" class="mi ku iq lz b gy mn mk l ml mm">&lt;div class="button-group"&gt;<br/>          &lt;el-button type="primary" <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="createFolder"&gt;Create&lt;/el-button&gt;<br/>          &lt;el-button type="text" <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="$emit('close')"&gt;Cancel&lt;/el-button&gt;<br/>        &lt;/div&gt;</span><span id="34b3" class="mi ku iq lz b gy mn mk l ml mm">&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="c4d2" class="mi ku iq lz b gy mn mk l ml mm">&lt;script&gt;<br/>import { CreateFolder, GetFolders } from '../constants/query.gql'</span><span id="7e29" class="mi ku iq lz b gy mn mk l ml mm">export default {<br/>  props: ['config'],<br/>  data() {<br/>    return {<br/>      form: {<br/>        name: '',<br/>      }<br/>    }<br/>  },<br/>  mounted() {<br/>    this.$refs.foldername.focus()<br/>  },<br/>  methods: {<br/>    createFolder() {<br/>      const { name } = this.form<br/>      if (!name) return<br/>      const parent = this.config.parent<br/>      this.$apollo.mutate({<br/>        mutation: CreateFolder,<br/>        variables: {name, parent},<br/>        update: (store, { data: { createFolder } }) =&gt; {<br/>          const variables = parent ? { parent } : {}<br/>          try {<br/>            const data = store.readQuery({<br/>              query: GetFolders,<br/>              variables<br/>            })<br/>            data.getFolders.push(createFolder)<br/>            store.writeQuery({<br/>              query: GetFolders,<br/>              variables,<br/>              data<br/>            })<br/>          } catch(err) {<br/>            console.log(err)<br/>          }<br/>        }<br/>      }).then(({ data: { createFolder } }) =&gt; {<br/>        this.$emit('close')<br/>        this.$router.push({name: 'folder', params: {id: createFolder.id} })<br/>      }).catch((error) =&gt; {<br/>        console.log(error)<br/>      })<br/>    }<br/>  }<br/>}</span><span id="b4ae" class="mi ku iq lz b gy mn mk l ml mm">&lt;/script&gt;</span><span id="d893" class="mi ku iq lz b gy mn mk l ml mm">&lt;style scoped&gt;</span><span id="d75e" class="mi ku iq lz b gy mn mk l ml mm">.modal-container {<br/>  width: 400px;<br/>}</span><span id="0dce" class="mi ku iq lz b gy mn mk l ml mm">.radio-group {<br/>  padding: 20px 0;<br/>}</span><span id="b1a9" class="mi ku iq lz b gy mn mk l ml mm">.description {<br/>  position: relative;<br/>  left: 28px;<br/>  font-size: 12px;<br/>  color: rgba(0, 0, 0, 0.56);<br/>  line-height: 1.67;<br/>  padding-bottom: 10px;<br/>}</span><span id="bf9d" class="mi ku iq lz b gy mn mk l ml mm">.button-group {<br/>  margin-top: 20px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="a545" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我安装了<code class="fe lw lx ly lz b">this.$refs.foldername.focus()</code>来自动对焦表单，因为不幸的是，本机自动对焦只在第一次有效。</p><p id="90b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们第一次在阿波罗上看到<code class="fe lw lx ly lz b">update</code>。给定相同的参数，Apollo从缓存中查询数据。这意味着在每次变异之后，你必须明确地告诉Apollo，“嘿，这个参数的查询已经改变了”。更多信息，请参考<a class="ae ks" href="https://www.apollographql.com/docs/react/essentials/mutations.html" rel="noopener ugc nofollow" target="_blank">阿波罗</a>和<a class="ae ks" href="https://akryum.github.io/vue-apollo/guide/apollo/mutations.html#server-side-example" rel="noopener ugc nofollow" target="_blank">vue-阿波罗</a>文档。</p><p id="985d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lw lx ly lz b">update</code>的一个棘手之处在于，如果<code class="fe lw lx ly lz b">readQuery</code>中指定的查询还没有被调用，它会给出一个奇怪的错误。一个典型的例子是在<code class="fe lw lx ly lz b">/folders</code>中有一个列表，在<code class="fe lw lx ly lz b">/folders/new</code>中有一个表单。在<code class="fe lw lx ly lz b">/folders</code>中查询文件夹列表。但是，如果您直接导航到<code class="fe lw lx ly lz b">/folders/new</code>，文件夹尚未被查询。如果此时调用mutation并尝试更新文件夹查询，将会出现错误。因此，在<code class="fe lw lx ly lz b">update</code>上使用try &amp; catch是一个很好的做法。只要你这样做，你就会没事。</p><p id="619c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，更新<code class="fe lw lx ly lz b">client/src/store.js</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="0b0c" class="mi ku iq lz b gy mj mk l ml mm">import Vue from 'vue'<br/>import Vuex from 'vuex'</span><span id="1f46" class="mi ku iq lz b gy mn mk l ml mm">Vue.use(Vuex)</span><span id="25a1" class="mi ku iq lz b gy mn mk l ml mm">export default new Vuex.Store({<br/>  state: {<br/>    userId: localStorage.getItem('user-id'),<br/>    activeWidget: null,<br/>  },<br/>  mutations: {<br/>    changeActiveWidget(state, key) {<br/>      state.activeWidget = state.activeWidget === key ? null : key<br/>    }<br/>  }<br/>})</span></pre><p id="fa24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我应该注意到在Apollo中有一个状态管理库叫做<a class="ae ks" href="https://www.apollographql.com/docs/link/links/state.html" rel="noopener ugc nofollow" target="_blank"> apollo-link-state </a>。它允许您管理本地状态，而无需使用另一种状态管理，如vuex或redux。这很吸引人，我尝试了一下。但是，它比较笨重，不像vuex那样成熟。在一个地方管理所有的州确实有一些好处，但我不认为它们大到足以取代vuex。</p><p id="9505" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">考验的时候到了！可以点击加号按钮，也可以双击团队，会弹出模态表单:</p><figure class="ma mb mc md gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mo"><img src="../Images/6460bec2e3d07c02bf22ad39fd4a1c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QNo25tkX_T4guIW-CJ1TVg.png"/></div></div></figure><p id="dd56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入名称并提交。您将看到一个正在创建的文件夹。您也可以创建一个子文件夹，并创建一个<em class="ko">的子文件夹，即</em>子文件夹…</p><figure class="ma mb mc md gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mw"><img src="../Images/f227dbae6e0bc972a832cc6923730ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ElmGeqFL539do1FXn9-GnA.png"/></div></div></figure><p id="5623" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后我想做一个应用程序:)</p><p id="1d8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能已经注意到下拉菜单不会消失，除非你点击它。要解决这个问题，请更新<code class="fe lw lx ly lz b">client/src/App.vue</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="d85e" class="mi ku iq lz b gy mj mk l ml mm">&lt;template&gt;<br/>  &lt;div id="app" <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="$store.commit('changeActiveWidget', null)"&gt;<br/>    &lt;router-view&gt;&lt;/router-view&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><h1 id="becd" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">更新文件夹</h1><p id="a83f" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">接下来我们要做的是更新一个文件夹。一如既往，让我们从<code class="fe lw lx ly lz b">server/src/schema.graphql</code>开始:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="f42c" class="mi ku iq lz b gy mj mk l ml mm">type Mutation {<br/>  ...<br/>  updateFolder(id: String!, input: FolderInput): Folder<br/>}</span><span id="f875" class="mi ku iq lz b gy mn mk l ml mm">input FolderInput {<br/>  name: String<br/>  parent: String<br/>  description: String<br/>  shareWith: [ShareInput]<br/>}</span><span id="3c87" class="mi ku iq lz b gy mn mk l ml mm">input ShareInput {<br/>  kind: String<br/>  item: String<br/>}</span></pre><p id="d9f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解析器如下所示:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="e948" class="mi ku iq lz b gy mj mk l ml mm">Mutation {<br/>  ...<br/>  async updateFolder(_, {id, input}, context) {<br/>    const userId = getUserId(context)<br/>    return await Folder.findOneAndUpdate(<br/>      { _id: id },<br/>      { $set: input },<br/>      { new: true }<br/>    ).populate('shareWith')<br/>  },<br/>}</span></pre><p id="2ed2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">GraphQL的输入与MongoDB配合得很好。您可以只设置输入，这比单独设置每个字段要干净得多。</p><p id="ab16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将此添加到<code class="fe lw lx ly lz b">client/src/constants/query.gql</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="e0e8" class="mi ku iq lz b gy mj mk l ml mm">mutation UpdateFolder($id: String!, $input: FolderInput) {<br/>  updateFolder(id: $id, input: $input) { ...FolderFields }<br/>}</span></pre><p id="fc38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是<code class="fe lw lx ly lz b">client/src/views/FolderDetail.vue</code>的更新版本:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="8e45" class="mi ku iq lz b gy mj mk l ml mm">&lt;template&gt;<br/>  &lt;div class="white card max-height"&gt;<br/>    &lt;div class="folder-header"&gt;<br/>      &lt;form <a class="ae ks" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="updateFolder"&gt;<br/>        &lt;input class="no-outline header-title folder-name" type="text" name="taskname" ref="taskname"<br/>          v-model="folderName" <a class="ae ks" href="http://twitter.com/keyup" rel="noopener ugc nofollow" target="_blank">@keyup</a>.esc="cancel"&gt;<br/>        &lt;/input&gt;<br/>      &lt;/form&gt;<br/>    &lt;/div&gt;<br/>   <br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="baf3" class="mi ku iq lz b gy mn mk l ml mm">&lt;script&gt;<br/>import { UpdateFolder } from '../constants/query.gql'</span><span id="2e44" class="mi ku iq lz b gy mn mk l ml mm">export default {<br/>  data() {<br/>    return {<br/>      folderName: this.folder.name,<br/>    }<br/>  },<br/>  props: ['folder'],<br/>  mounted() {<br/>    document.title = `${this.folder.name} - enamel`<br/>  },<br/>  methods: {<br/>    updateFolder(e) {<br/>      const name = this.folderName<br/>      if (name === this.folder.name) {<br/>        this.cancel(e)<br/>        return<br/>      }<br/>      this.$apollo.mutate({<br/>        mutation: UpdateFolder,<br/>        variables: { id: this.folder.id, input: {name} },<br/>      }).then(() =&gt; {<br/>        this.cancel(e)<br/>      }).catch((error) =&gt; {<br/>        console.log(error)<br/>      })<br/>    },<br/>    cancel(e) {<br/>      e.target.blur()<br/>    }<br/>  }</span><span id="5593" class="mi ku iq lz b gy mn mk l ml mm">}<br/>&lt;/script&gt;</span></pre><p id="e523" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能会注意到，在这个突变中我们没有<code class="fe lw lx ly lz b">update</code>。这是因为Apollo足够聪明，能够根据id知道哪个对象正在被更新。这样就不用手动更新了。阿波罗帮你省了很多事。显然，您确实需要查询id，这样才能工作。</p><p id="f557" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们来测试一下。单击右侧的文件夹名称并进行编辑。当您按enter键时，其他组件中的文件夹名称也将得到更新。太棒了。</p><figure class="ma mb mc md gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mx"><img src="../Images/1f12f36c9eb71b63b19d957282e4b134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zoPLXYbdWgdXTOdHju7qQ.png"/></div></div></figure><h1 id="b12c" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">删除文件夹</h1><p id="af99" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我们来实现删除。</p><p id="727b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lw lx ly lz b">server/src/schema.graphql</code></p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="e2e2" class="mi ku iq lz b gy mj mk l ml mm">type Mutation {<br/>  deleteFolder(id: String!): Boolean<br/>}</span></pre><p id="6578" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lw lx ly lz b">server/src/resolvers.js</code>。我正在递归删除子文件夹。</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="3f07" class="mi ku iq lz b gy mj mk l ml mm">async function deleteSubfolders(id) {<br/>  const folders = await Folder.find({parent: id})<br/>  for (const folder of folders) {<br/>   await deleteSubfolders(folder.id)<br/>   await Folder.deleteOne({_id: folder.id})<br/>  } <br/>}</span><span id="d10a" class="mi ku iq lz b gy mn mk l ml mm">Mutation {<br/>  ...<br/>  async deleteFolder(_, {id}, context) {<br/>    const userId = getUserId(context)<br/>    await Folder.deleteOne({_id: id})<br/>    deleteSubfolders(id)<br/>    return true<br/>  },<br/>}</span></pre><p id="39f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lw lx ly lz b">client/src/constants/query.gql</code></p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="162a" class="mi ku iq lz b gy mj mk l ml mm">mutation DeleteFolder($id: String!) {<br/>  deleteFolder(id: $id)<br/>}</span></pre><p id="3baa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就像创建一个新文件夹一样，通过右键单击文件夹可以删除文件夹。因此，取消<code class="fe lw lx ly lz b">client/src/components/FolderTree.vue</code>中这一行<code class="fe lw lx ly lz b">&lt;div <a class="ae ks" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>=”deleteFolder”&gt;Delete&lt;/div&gt;</code>的注释，并添加以下代码:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="5b12" class="mi ku iq lz b gy mj mk l ml mm">import { GetFolders, DeleteFolder } from '../constants/query.gql'</span><span id="087a" class="mi ku iq lz b gy mn mk l ml mm">methods: {<br/> ...<br/>  deleteFolder() {<br/>    const { id, parent } = this.model<br/>    this.$apollo.mutate({<br/>      mutation: DeleteFolder,<br/>      variables: {id},<br/>      update: (store) =&gt; {<br/>        const variables = this.team ? {} : {parent}<br/>        const data = store.readQuery({<br/>          query: GetFolders,<br/>          variables<br/>        })<br/>        data.getFolders.splice(data.getFolders.findIndex(o =&gt; o.id === id), 1)<br/>        store.writeQuery({<br/>          query: GetFolders,<br/>          variables,<br/>          data<br/>        })<br/>      }<br/>    }).then(() =&gt; {<br/>      this.$router.replace({<br/>        name: "folder",<br/>        params: {id: this.team || parent},<br/>      })<br/>    }).catch((error) =&gt; {<br/>      console.log(error)<br/>    })<br/>  },<br/>},</span></pre><p id="0f18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，<code class="fe lw lx ly lz b">update</code>从缓存中删除文件夹。它不会删除文件夹的子文件夹，但是因为除非您键入URL，否则无法在UI上访问子文件夹，所以这就足够了。</p><p id="7274" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">若要测试代码，请删除包含子文件夹的文件夹。检查数据库以确认父文件夹和子文件夹都已删除。</p><figure class="ma mb mc md gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi my"><img src="../Images/16a4b6e9b6282db8402d7ad303ed6a2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5e5xmQccDKKVnXfYKLUNEA.png"/></div></div></figure><h1 id="88e1" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">额外材料:缓存重定向</h1><p id="67e9" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我希望你现在已经意识到阿波罗的力量了。让我向您展示Apollo的一个很酷的特性:<a class="ae ks" href="https://www.apollographql.com/docs/react/advanced/caching.html#cacheRedirect" rel="noopener ugc nofollow" target="_blank">缓存重定向</a>。当我们向<code class="fe lw lx ly lz b">getFolder</code>查询某个特定文件夹的数据时，实际上该数据已经存在于<code class="fe lw lx ly lz b">getFolders</code>缓存中。那么为什么不从缓存中获取数据呢？阿波罗允许你用<code class="fe lw lx ly lz b">cacheRedirects</code>做到这一点。将此代码添加到<code class="fe lw lx ly lz b">client/src/main.js</code>:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="557b" class="mi ku iq lz b gy mj mk l ml mm">const cache = new InMemoryCache({<br/>  cacheRedirects: {<br/>    Query: {<br/>      getFolder: (_, args, { getCacheKey }) =&gt; {<br/>        return getCacheKey({ __typename: 'Folder', id: args.id })<br/>      },<br/>    },<br/>  }<br/>})</span></pre><p id="e8f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这段代码说，“当我查询<code class="fe lw lx ly lz b">getFolder</code>时，在<code class="fe lw lx ly lz b">Folder</code>缓存中找到id为的文件夹。”<code class="fe lw lx ly lz b">__typename</code>由Apollo根据GraphQL模式中定义的返回类型自动创建。Apollo使用类型名和id的组合来惟一地标识缓存中的每个数据。</p><p id="29fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要测试缓存重定向，请转到调用<code class="fe lw lx ly lz b">getFolders</code>的<code class="fe lw lx ly lz b">localhost:8080/w</code>。然后在Chrome开发工具中检查<code class="fe lw lx ly lz b">offline</code>。然后点击你的一个文件夹。您可以看到，即使<code class="fe lw lx ly lz b">getFolder</code>不可用，它也会在其他组件中显示文件夹名称。</p><figure class="ma mb mc md gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mz"><img src="../Images/d770dad09ce4f772d460f0a8bab718a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUpjJEEi5yhYedh7EIreew.png"/></div></div></figure><p id="a09f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确认这一点的另一种方法是在<code class="fe lw lx ly lz b">client/src/views/Folder.vue</code>中打印查询结果</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="640f" class="mi ku iq lz b gy mj mk l ml mm">apollo: {<br/>    getFolder: {<br/>      query: GetFolder,<br/>      variables() {<br/>        return {id: this.$route.params.id}<br/>      },<br/>      result ({data: { getFolder }}) {<br/>        console.log(getFolder)<br/>        this.folder = getFolder<br/>        this.folderName = this.folder.name<br/>        if (this.isTeam) {<br/>          document.title = `${this.folder.name} - enamel`          <br/>        }<br/>      },<br/>    }<br/>  },</span></pre><figure class="ma mb mc md gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mz"><img src="../Images/0878c6a18602f6583825ec8ffcad814b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBgp_oto_tb6tfTpskb9jg.png"/></div></div></figure><p id="d22f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这太酷了。当我第一次了解到这一点时，我感到非常震惊。</p><h1 id="c629" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">接下来:使用任务</h1><p id="7c3b" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">现在我们已经设置了文件夹，我们可以创建任务了。</p><p id="3790" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">非常感谢你能坚持这么久。我不确定还会有多少部分，但我想在第10部分之前完成。我一直在给珐琅添加越来越多的功能。现在，您可以评论、移动文件夹和任务、查看通知、重新排序任务、查看团队成员的工作量等。但是我试图将本教程的范围限制到最低限度，否则它将是一个永无止境的教程。此外，一旦你对技术栈有了基本的了解，你就可以想出如何构建几乎任何东西。</p><p id="e1ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你对珐琅在生产中的样子很好奇，你可以去<a class="ae ks" href="http://www.enamel.tech/" rel="noopener ugc nofollow" target="_blank">http://www.enamel.tech/</a>或者在github上查看<a class="ae ks" href="https://github.com/kenzotakahashi/enamel_client" rel="noopener ugc nofollow" target="_blank">客户端</a>和<a class="ae ks" href="https://github.com/kenzotakahashi/enamel_server" rel="noopener ugc nofollow" target="_blank">服务器</a>的源码。</p><p id="c8a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将在第6部分再见！</p><p id="d278" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，请给它一些掌声！这激励我尽快写下一部分。</p></div></div>    
</body>
</html>