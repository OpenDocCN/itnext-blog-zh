<html>
<head>
<title>Build a Project Management Tool with Vue.js, Node.js and Apollo — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue.js、Node.js和Apollo构建一个项目管理工具——第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-project-management-software-with-vue-js-and-apollo-part1-d12ee75a7641?source=collection_archive---------1-----------------------#2018-08-02">https://itnext.io/build-a-project-management-software-with-vue-js-and-apollo-part1-d12ee75a7641?source=collection_archive---------1-----------------------#2018-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/32225bec412c8d0fe47300e10baa6739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gb0HLf6szo9QCqcNHiBybA.png"/></div></div></figure><p id="891a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最近，我创建了一个名为珐琅的项目管理工具。它现在被我的雇主使用，希望我能把它卖给更多的客户。</p><p id="8df6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个系列教程中，我们将从头开始构建这个应用程序:</p><blockquote class="kw kx ky"><p id="8700" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">第1部分—构建一个简单的GraphQL API(这一部分)</p><p id="23be" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part2-47fbe5dc2de4">第2部分—构建MongoDB模式和电子邮件表单</a></p><p id="f5bf" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-3-69a7bf9f2f1b">第三部分——认证</a></p><p id="588c" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-4-40fbe0625d32">第四部分——打造工作空间</a></p><p id="9cd7" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part-5-d59e6e345e39">第5部分—文件夹的CRUD功能</a></p></blockquote><p id="b1d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">教我如何构建自己的产品听起来有点奇怪。教程结束时，你会知道如何建立我的产品，所以你可以成为我的竞争对手。但是建立一个企业不仅仅是一个产品。所以我一点也不担心。你可以随意使用代码。</p><p id="4a51" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我这样做的原因是我学到了很多东西，一路上也很开心，我想和你分享我的经验。</p><h1 id="2864" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们到底在建造什么？</h1><p id="e4cf" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">我们正在构建的本质上是一个简化版的Wrike。也和体式差不多。Wrike有很多功能，但我们只开发了以下功能:</p><ul class=""><li id="f0f8" class="mh mi iq ka b kb kc kf kg kj mj kn mk kr ml kv mm mn mo mp bi translated">文件夹和子文件夹</li><li id="8f77" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated">任务和子任务</li><li id="9239" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated">用户认证</li><li id="c126" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated">组</li><li id="8dc4" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated">设置状态、设置截止日期，并为任务分配成员</li><li id="1265" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated">与团队、组或成员共享文件夹</li><li id="be92" class="mh mi iq ka b kb mq kf mr kj ms kn mt kr mu kv mm mn mo mp bi translated">记时间日志</li></ul><p id="c8c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还是很多啊！</p><p id="31bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有几个应用程序的截图。</p><p id="33a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">工作区是应用程序的主视图。在左侧，您可以看到团队、文件夹和子文件夹。中间是所选文件夹中的任务列表。右边是任务细节。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/5506cb7f21fa0d8e327371cdf5e16820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9R7JLAH7tCzdXHYP_tZ7Xg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">工作空间</figcaption></figure><p id="b7c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是帐户页面，您可以在其中管理用户和组。用户有一个角色:管理员、普通用户、协作者或外部用户。Wrike也有这些角色，但是对于我们的app来说，更简单。我将在以后的文章中解释每个角色之间的区别。我们也可以创建一个组。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/e94aa81583ba4eb4165087662b25a6e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3eea1-GKjyx5GQI3836wpA.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">帐户页面</figcaption></figure><h1 id="9ea4" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">技术堆栈</h1><p id="6a4c" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">这是我们将要使用的技术堆栈。</p><p id="206a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">前端— Vue.js，Vuex，Vue路由器，Apollo</p><p id="8516" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">后端— node.js、Express、Apollo、graphql-yoga</p><p id="07cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">DB — MongoDB</p><p id="0e4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是典型的fullstack JS栈，除了Apollo。Apollo是GraphQL之上的一个库。我在客户端和服务器端都使用Apollo，但是它们是独立的。如果你愿意，你可以只使用客户机或服务器。</p><h1 id="3ab9" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">要求</h1><p id="cbeb" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">这是一个高级教程。要构建的东西太多了，所以我不打算详细解释每项技术。</p><p id="d110" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你应该知道Vue.js和MongoDB。Backend只是一个简单的API服务器，所以只要你懂javascript和ES6，我想你就没问题了。对GraphQL的基本理解是有帮助的，但是我将尽可能多地解释Apollo，因为它不太为人所知，而且信息也不容易找到。</p><p id="14c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还没有决定是否解释CSS。通常一个web开发的教程要么用CSS框架，要么完全跳过讲解，这是合理的。但是当我开发这个应用的时候，实际上我最纠结的是CSS。有太多的事情我不知道，我花了很多时间在谷歌上搜索。我将尝试解释棘手的部分，但除此之外，只要复制粘贴CSS，你就可以了。</p><h1 id="0157" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">让我们构建后端</h1><p id="84e6" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">说够了。我们写点代码吧！我们打算先创建后端。</p><p id="1580" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kz">完整的代码可以在</em><a class="ae ld" href="https://github.com/kenzotakahashi/enamel/tree/part1" rel="noopener ugc nofollow" target="_blank"><em class="kz">github</em></a><em class="kz">上找到。</em></p><p id="91a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建一个根目录<code class="fe ne nf ng nh b">enamel</code>并在其中创建一个<code class="fe ne nf ng nh b">server</code>文件夹。</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="875e" class="nm lf iq nh b gy nn no l np nq">mkdir enamel &amp;&amp; cd enamel<br/>git init<br/>mkdir server &amp;&amp; cd server</span></pre><p id="490d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe ne nf ng nh b">server</code>中，用下面的代码创建<code class="fe ne nf ng nh b">package.json</code>:</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="2d93" class="nm lf iq nh b gy nn no l np nq">// server/package.json<br/>{<br/>  "name": "enamel_server",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "app.js",<br/>  "scripts": {<br/>    "start": "node src/app.js",<br/>    "dev": "./node_modules/nodemon/bin/nodemon.js src/app.js"<br/>  },<br/>  "author": "",<br/>  "license": "ISC",<br/>  "dependencies": {<br/>    "bcrypt": "^2.0.1",<br/>    "dotenv": "^6.0.0",<br/>    "graphql": "^0.13.2",<br/>    "graphql-yoga": "1.14.10",<br/>    "jsonwebtoken": "^8.3.0",<br/>    "moment": "^2.22.2",<br/>    "mongoose": "^5.1.5",<br/>    "nodemailer": "^4.6.7",<br/>    "nodemon": "^1.17.5"<br/>  }<br/>}</span></pre><p id="3050" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些都是后端的依赖项。不是很多，你不觉得吗？我是说，快递在哪？你在这里看不到Express，因为graphql-yoga 包含了它。graphql-yoga是一种基于Apollo构建的graphql服务器框架。</p><p id="da8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">继续安装依赖项。</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="4611" class="nm lf iq nh b gy nn no l np nq">yarn</span></pre><p id="37a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者你更喜欢npm，</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="ab70" class="nm lf iq nh b gy nn no l np nq">npm i</span></pre><p id="3299" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">趁我还没忘记，补充一下<code class="fe ne nf ng nh b">.gitignore</code></p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="d5de" class="nm lf iq nh b gy nn no l np nq">// server/.gitignore<br/>.DS_Store<br/>node_modules/<br/>npm-debug.log*<br/>yarn-debug.log*<br/>yarn-error.log*</span><span id="8234" class="nm lf iq nh b gy nr no l np nq">.env</span></pre><p id="5ac9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果还没有，下载MongoDB并运行这个过程。</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="7f69" class="nm lf iq nh b gy nn no l np nq">mongod</span></pre><p id="e645" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe ne nf ng nh b">server</code>中创建<code class="fe ne nf ng nh b">.env</code>并放置mongoDB URI:</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="23cb" class="nm lf iq nh b gy nn no l np nq">MONGODB_URI=mongodb://localhost:27017/enamel</span></pre><p id="c7f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe ne nf ng nh b">server</code>中创建<code class="fe ne nf ng nh b">src</code></p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="997e" class="nm lf iq nh b gy nn no l np nq">mkdir src</span></pre><p id="c667" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，该目录如下所示:</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/56d5a99352798ac336e307391d4e778c.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*f3WGtLpg5piZTFEoSOSEPw.png"/></div></figure><h1 id="b8a9" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">应用代码</h1><p id="7743" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">在<code class="fe ne nf ng nh b">server/src</code>内部，创建<code class="fe ne nf ng nh b">app.js</code>并粘贴这段代码。这个文件将来不会改变。</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="4ef8" class="nm lf iq nh b gy nn no l np nq">// server/src/app.js<br/>const { GraphQLServer } = require('graphql-yoga')<br/>const mongoose = require('mongoose')<br/>require('dotenv').config()<br/>const resolvers = require('./resolvers')</span><span id="8dc5" class="nm lf iq nh b gy nr no l np nq">mongoose.connect(process.env.MONGODB_URI, { useNewUrlParser: true })<br/>const db = mongoose.connection<br/>db.on("error", console.error.bind(console, "connection error"))<br/>db.once("open", function(callback){<br/>  console.log("Connection Succeeded")<br/>})</span><span id="ad25" class="nm lf iq nh b gy nr no l np nq">const server = new GraphQLServer({<br/>  typeDefs: 'src/schema.graphql',<br/>  resolvers,<br/>  context: req =&gt; req,<br/>})</span><span id="4391" class="nm lf iq nh b gy nr no l np nq">const options = {<br/>  port: process.env.PORT || 5500,<br/>  endpoint: '/graphql',<br/>  subscriptions: '/subscriptions',<br/>  playground: '/playground',<br/>}</span><span id="359b" class="nm lf iq nh b gy nr no l np nq">server.start(options, ({ port }) =&gt; console.log(`Server is running on port ${port}`))</span></pre><p id="2982" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建GraphQLServer，您需要typeDefs和解析器。我喜欢将typeDefs保存在一个单独的文件中，所以让我们创建<code class="fe ne nf ng nh b">schema.graphql</code>并将这段伪代码:</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="1acc" class="nm lf iq nh b gy nn no l np nq">// server/src/schema.graphql<br/>type Query {<br/>  test: String<br/>}</span></pre><p id="c389" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和<code class="fe ne nf ng nh b">resolvers.js</code></p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="5c1b" class="nm lf iq nh b gy nn no l np nq">// server/src/resolvers.js<br/>const resolvers = {<br/> Query: {<br/>  test (_, args, context) {<br/>   return 'Hello World!'<br/>    }<br/> }<br/>}</span><span id="dfdc" class="nm lf iq nh b gy nr no l np nq">module.exports = resolvers</span></pre><p id="d611" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们有了基本的代码集，让我们运行服务器:</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="fc3c" class="nm lf iq nh b gy nn no l np nq">yarn dev</span></pre><p id="fb8f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">去<code class="fe ne nf ng nh b">localhost:5500/playground</code>你会看到一个漂亮的GraphQL游乐场。让我们运行刚刚定义的查询。在左侧键入查询，然后</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/39691d9d4c87817c669f5fc03f6dee0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0bvCThHWHKKaku1x4i_fPg.png"/></div></div></figure><p id="1b22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用nodemon在文件改变时自动重启。但是，默认情况下，它不会像<code class="fe ne nf ng nh b">schema.graphql</code>那样观察非js文件上的文件变化。要解决这个问题，请在<code class="fe ne nf ng nh b">package.json</code>的末尾添加以下内容</p><pre class="mw mx my mz gt ni nh nj nk aw nl bi"><span id="647f" class="nm lf iq nh b gy nn no l np nq">"nodemonConfig": {<br/>  "ext": "js,json,graphql"<br/>}</span></pre><p id="0ed7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是第1部分！如果需要，可以查看<a class="ae ld" href="https://github.com/kenzotakahashi/enamel/tree/part1" rel="noopener ugc nofollow" target="_blank"> github </a>作为参考。</p><p id="d7f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<a class="ae ld" href="https://medium.com/@kenzotakahashi2/build-a-project-management-tool-with-vue-js-node-js-and-apollo-part2-47fbe5dc2de4" rel="noopener">第二部</a>中，我们将继续构建后端。</p><p id="1a88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我不确定完成这个教程需要多少博客帖子，或者这个教程多快可以得到，但是如果你喜欢这个帖子，请给它一些掌声！它激励我写更多。</p><p id="f3ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将在下一篇文章中看到你！</p></div></div>    
</body>
</html>