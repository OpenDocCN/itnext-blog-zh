<html>
<head>
<title>What I Learned Developing Games from Scratch with Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从用Flutter开发游戏中学到了什么</h1>
<blockquote>原文：<a href="https://itnext.io/what-i-learned-developing-games-from-scratch-on-flutter-a2eda59460e5?source=collection_archive---------4-----------------------#2019-09-14">https://itnext.io/what-i-learned-developing-games-from-scratch-on-flutter-a2eda59460e5?source=collection_archive---------4-----------------------#2019-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0ec880dfce5b6398daa0344138f345a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fji0LbHIHbYhP0R9vcXGrg.jpeg"/></div></div></figure><p id="b8a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“Dart工程师探索堆栈溢出‘Flutter game dev’部分”，照片由<a class="ae kw" href="https://www.instagram.com/lena_5z/" rel="noopener ugc nofollow" target="_blank"> Elena Zhuravleva </a>拍摄。</p><p id="401a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">曾几何时，每个软件工程师都会想到自己写游戏。作为一个纸牌飞人或僵尸网络游戏生存制作狂，有时它会让你发疯，你是多么想现在就写下它。</p><p id="16cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">人类大脑的连接方式，哦，这个非常聪明的优化机器，我们经常倾向于用我们已经熟悉的东西或者每个人都使用的东西来开始我们的项目。前者是我的选择，那正是我激动万分的时期。长话短说，我已经开始用它写一个游戏，下面是我学到的东西。</p><h1 id="794b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#1: Dart社区喜欢以“F”开头的库名。</h1><p id="0cd5" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我知道这似乎是一个牵强的说法，但这里有一些来自<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/pub.dev"> pub.dev </a>的数字:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/2e6097c359ef248d61c1845ead64c46f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5E9ZycE0zNAqmQRo"/></div></div></figure><p id="2d5c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并且特别有<strong class="ka ir"> 907 </strong>(超过<strong class="ka ir"> 74% </strong>)名称以<strong class="ka ir"> <em class="mf">打头</em> </strong>的套餐。因此，如果您在dart生态系统中遗漏了什么，尝试寻找<em class="mf"> "f" </em>单词:)</p><p id="e6a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">数据由以下<a class="ae kw" href="https://pptr.dev/" rel="noopener ugc nofollow" target="_blank">木偶师</a>收集🙌脚本:</p><pre class="mb mc md me gt mg mh mi mj aw mk bi"><span id="197a" class="ml ky iq mh b gy mm mn l mo mp">const puppeteer = require('puppeteer');<br/>const alphabet = 'poiuytrewqlkjhgfdsamnbvcxz'.split('');</span><span id="0f70" class="ml ky iq mh b gy mq mn l mo mp">(async () =&gt; {<br/>  let results = {};<br/>  const browser = await puppeteer.launch({args: ['--no-sandbox', '--disable-setuid-sandbox']});<br/>  const page = await browser.newPage();</span><span id="86f3" class="ml ky iq mh b gy mq mn l mo mp">  await page.setViewport({ width: 1024, height: 768 });<br/>  <br/>  for (let char of alphabet) {<br/>    await page.goto(`https://pub.dev/packages?q=package%3A${char}`);<br/>    const el = await page.$('.package-count span');<br/>    const count = await (await el.getProperty('textContent')).jsonValue();</span><span id="809e" class="ml ky iq mh b gy mq mn l mo mp">    results[char] = parseInt(count);<br/>    await page.screenshot({path: `pub/${char}.png`});<br/>  }</span><span id="e3ad" class="ml ky iq mh b gy mq mn l mo mp">  console.log(JSON.stringify(results, null, 2));</span><span id="c283" class="ml ky iq mh b gy mq mn l mo mp">  await browser.close();<br/>})();</span></pre><h1 id="1020" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#2: Flutter的顶级游戏引擎是Flame🔥</h1><p id="f3ff" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">对上述说法的另一个证明，<a class="ae kw" href="https://flame-engine.org/" rel="noopener ugc nofollow" target="_blank"> Flame </a>是Flutter的顶级游戏引擎，截至2019年9月。这是一个很棒的库，具有方便的API，允许你避免自己实现游戏循环和组件抽象，并且允许方便地将其嵌入到你的小部件树中的某个地方。然而，火焰仍然远离那些被认为“小型”的引擎(如<a class="ae kw" href="https://phaser.io/" rel="noopener ugc nofollow" target="_blank"> Phaser </a>、<a class="ae kw" href="https://www.pixijs.com/" rel="noopener ugc nofollow" target="_blank"> Pixi.js </a>或<a class="ae kw" href="https://www.babylonjs.com/" rel="noopener ugc nofollow" target="_blank"> Babylon.js </a>)，也远离像<a class="ae kw" href="https://www.unrealengine.com/en-US/" rel="noopener ugc nofollow" target="_blank">虚幻引擎</a>或<a class="ae kw" href="https://unity.com/" rel="noopener ugc nofollow" target="_blank"> Unity </a>这样的怪物。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/4a2a2399cc9ef9fafa6bce7bc01eda6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/0*GA2Ty0Nbi3Jo1yTJ"/></div></figure><p id="9b51" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从好的方面来说，Flame的简单性很棒，它允许你简单地阅读它的源代码，并快速修改你的代码来做它应该做的事情，而不是花半天时间在文档和社区门户网站上寻找<strong class="ka ir">that method，它做你需要的</strong>。他们的<a class="ae kw" href="https://jap.alekhin.io/2d-casual-mobile-game-tutorial-flame-flutter-part-1" rel="noopener ugc nofollow" target="_blank">指南</a>并没有提到黑盒和魔法。同时，如果你需要具体的东西，<em class="mf">几乎可以肯定</em>，它还没有出现。</p><p id="e22f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mf">免责声明:本人与火焰游戏引擎无关，以上观点主观。</em></p><h1 id="e363" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#3:自己写</h1><p id="871a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">是的，这可能是一个相当大的范式转变，特别是如果你来自现代<em class="mf"> Javascript </em>的富饶之地，NPM<em class="mf"/><a class="ae kw" href="http://www.modulecounts.com/" rel="noopener ugc nofollow" target="_blank">有超过一百万个软件包</a>随时可用。Dart 还没有出现，你将会陷入这样一种境地:你需要的东西还没有被世界上的任何人写出来。</p><p id="a2e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好的一面是，它会让你以你意想不到的方式扩展你的工程专业知识。有一点需要注意的是，如果你正在为游戏开发而探索Flutter，你可能已经不害怕未知了，所以<a class="ae kw" href="https://www.abbreviations.com/term/235205" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> WIY </strong> </a>一路走好！</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/89601ad9edc214847db9a53ee300c9e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*kfrZaiQ_-vACVk2A"/></div></figure><p id="4378" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，准备好为你自己的等级提升、库存、设置持久性等等编写系统吧。</p><h1 id="2ced" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#4: Flutter让你完全控制屏幕上显示的内容</h1><p id="d0da" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这是真的，而且一个不同时<em class="mf">和</em>，所以有点量子的说法。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/0df63ea0308446af70279d2311d09991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QhW9CZPEHMBsghPz"/></div></div></figure><p id="99e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mf">图片来源:</em><a class="ae kw" href="https://www.youtube.com/channel/UCsXVk37bltHxD1rDPwtNM8Q" rel="noopener ugc nofollow" target="_blank"><em class="mf">Kurzgesagt——总而言之</em> </a></p><p id="2c16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">折叠这个语句的波函数，您会观察到自己处于这样一种情况，即您真的控制了屏幕上的每一个像素，但是没有多少Dart代码使用常见的Flutter APIs或小部件。但与此同时，利用框架的渲染能力会在多个方面限制您，因此如果您停留在widgets框架内，将无法获得相同级别的控制。但是，就像任何量子现象一样，现实最终会处于两种状态。游戏内UI和画布的Flutter和widgets，以及实际需要_full_ control的地方的自定义画师。因此，你仍然可以获得实际界面的Flutter APIs的惊人便利，但可以完全访问canvas以获得实际的游戏视图。</p><h1 id="22e1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#5:完全控制未满</h1><p id="3932" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">是的，是的，我对文章情节中的这种老套扭曲感到抱歉，但如果你真的考虑使用Flutter进行游戏开发，因为它可以“完全控制”屏幕上发生的事情，那么你应该知道一些限制。</p><p id="d964" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，如果你在寻找真正的力量，你很可能最终会在<strong class="ka ir"> dart:ui </strong>层使用Flutter。你可以在<a class="ae kw" href="https://medium.com/@maksimrv/flutter-through-the-abstractions-forest-5d165ecdb406" rel="noopener"> Flutter:穿越抽象森林中找到更多关于Flutter分层架构的信息🌲</a>文章。哦，好家伙，那层<em class="mf">是镖</em>。在我们之间，我对那里发生的一些事情还没有准备好。一些限制是:</p><p id="3f40" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-画布内容只能通过绑定的<a class="ae kw" href="https://api.flutter.dev/flutter/dart-ui/PictureRecorder-class.html" rel="noopener ugc nofollow" target="_blank"> PictureRecorder </a>异步访问。我试过，这意味着你不能在每一帧后复制游戏图像的全部内容，对每个像素进行一些变换，然后再渲染回来。</p><p id="b4e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-您无法使用<strong class="ka ir"> dart:ui </strong>画布访问完整的<a class="ae kw" href="https://skia.org/" rel="noopener ugc nofollow" target="_blank"> Skia </a> API。所以如果你想为你的游戏写一些着色器，现在还不可能。</p><p id="9002" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-<strong class="ka ir">dart:ui</strong><a class="ae kw" href="https://api.flutter.dev/flutter/dart-ui/Path-class.html" rel="noopener ugc nofollow" target="_blank">Path</a>对象不允许您访问路径内的点数据，尽管它显然是可用的。</p><p id="3a57" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-如果你想在游戏中使用3D场景，你需要自己编写所有的投影逻辑。这是可能的，但它将纯粹在CPU上运行，所以从性能和时间投资的角度来看，这不是一个好主意。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/38767f6587bc7df2a576425e9dad5d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*7CdAsAiO82Qhj6N9"/></div></figure><p id="2e9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">总的来说，在这个层面上使用Flutter感觉有API和实现的差距，它不能直接应用于2D UI渲染，但同时，如果你的利基是雪碧2D游戏，你可能不会受到太多的限制。</p><h1 id="336a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">那么我甚至应该考虑用Flutter做手游吗？</h1><p id="eb9b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">用flutter写游戏是一种冒险，用它写一个冒险游戏将是冒险平方。就我个人而言，我喜欢Dart和Flutter生态系统，也不害怕做一些令人讨厌的编码，比如编写BMP编码器或转换矩阵的插值器。但这可能对你不适用，所以如果你在寻找一个答案，如果Flutter对于编写移动游戏是可行的，就像在数百个其他博客帖子中一样，答案将是量子。</p><p id="cadf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">是</strong>如果<em class="mf">这些</em>中至少有两个<em class="mf">为真</em>:</p><ul class=""><li id="f2a6" class="mv mw iq ka b kb kc kf kg kj mx kn my kr mz kv na nb nc nd bi translated">你这样做是为了<em class="mf">乐趣</em>和<em class="mf">经验</em>的一个<em class="mf">副业</em></li><li id="84b8" class="mv mw iq ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">你正在<em class="mf">享受</em> <em class="mf">飞镖</em>和<em class="mf">飘起</em>的生态系统</li><li id="bebc" class="mv mw iq ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">你不介意<em class="mf">编程</em>一些基础的东西<em class="mf">从头开始</em></li></ul><p id="6fb7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">否，</strong>如果<em class="mf">这些</em>中的任何一个<em class="mf">为真</em>:</p><ul class=""><li id="4a4e" class="mv mw iq ka b kb kc kf kg kj mx kn my kr mz kv na nb nc nd bi translated">你在为你的下一个产品寻找最快的营销方式</li><li id="ca77" class="mv mw iq ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">你没有任何在其他技术平台开发游戏的经验</li></ul><p id="df7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，简单地说，它还没有准备好进入黄金时间，但它绝对是一个值得探索和跟踪的有趣的技术组合。</p><p id="42f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢你来到这里！如果你有任何关于用Flutter编写游戏的有趣故事，请在评论中留言或给我留言<a class="ae kw" href="mailto:av@av.codes" rel="noopener ugc nofollow" target="_blank"> av@av.codes </a>，我想我们会有话题可聊的！</p><p id="dcd2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是的，你不会在这个帖子中看到任何关于我自己的游戏或任何东西的无耻插件:)</p><p id="f0ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">祝你和Flutter(可能还有Flame)玩得开心！</p></div></div>    
</body>
</html>