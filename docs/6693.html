<html>
<head>
<title>Flutter: mind your dependencies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振:注意你的依赖</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-mind-your-dependencies-52072df6d96?source=collection_archive---------1-----------------------#2022-01-31">https://itnext.io/flutter-mind-your-dependencies-52072df6d96?source=collection_archive---------1-----------------------#2022-01-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e840" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你想对你的flutter/dart项目中的依赖关系有一个总体的了解，并保持它们的良好秩序吗？让我们看看有哪些工具可以帮助解决这个问题。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/42610f25c9defc2c434a876953dec0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ukDIXyotBtJ7-f3f7HGuaA.png"/></div></div></figure><h1 id="c997" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">`颤振pub deps '命令</h1><p id="6b5d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><code class="fe ma mb mc md b">flutter pub deps [--style=&lt;style&gt;] [--[no-]dev] [--executables]</code></p><blockquote class="me mf mg"><p id="be22" class="jn jo mh jp b jq jr js jt ju jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj kk ij bi translated">该命令打印包的依赖关系图。该图包括包使用的<a class="ae ml" href="https://dart.dev/tools/pub/glossary#immediate-dependency" rel="noopener ugc nofollow" target="_blank">直接依赖关系</a>(如pubspec中所指定的)，以及由直接依赖关系引入的<a class="ae ml" href="https://dart.dev/tools/pub/glossary#transitive-dependency" rel="noopener ugc nofollow" target="_blank">传递依赖关系</a>。</p></blockquote><p id="fbef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里 阅读更多关于<a class="ae ml" href="https://dart.dev/tools/pub/cmd/pub-deps" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">命令的内容。这是针对<code class="fe ma mb mc md b">connectivity_plus</code>包的命令输出示例:</strong></a></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/6317a822448bb689bc465efa503ce849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VyptTBSXl73EPQjb4tFR1g.png"/></div></div></figure><p id="53e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，您可以使用VSCode来分析相同的结果:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/3ce9ffd72e9847b4a6b859abb0287846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pTDk3BGn_oepF7ipqUB3Qg.png"/></div></div></figure><h2 id="b98d" class="mo ky iq bd kz mp mq dn ld mr ms dp lh jy mt mu ll kc mv mw lp kg mx my lt mz bi translated">包依赖的风格</h2><blockquote class="me mf mg"><p id="6ceb" class="jn jo mh jp b jq jr js jt ju jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj kk ij bi translated">Pub支持两种类型的依赖:常规依赖和<em class="iq">开发依赖。</em>开发依赖不同于常规依赖，因为<em class="iq">您所依赖的包的开发依赖被忽略</em>。</p><p id="275e" class="jn jo mh jp b jq jr js jt ju jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj kk ij bi translated">决定是常规依赖还是开发依赖的规则很简单:如果依赖是从您的<code class="fe ma mb mc md b">lib</code>或<code class="fe ma mb mc md b">bin</code>目录中导入的，那么它需要是常规依赖。如果只是从<code class="fe ma mb mc md b">test</code>、<code class="fe ma mb mc md b">example</code>等进口。它可以也应该是一个开发依赖项。</p></blockquote><h1 id="d6ea" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">`依赖项_验证程序'工具</h1><p id="1995" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这是一个开源的<strong class="jp ir"> </strong> <a class="ae ml" href="https://github.com/Workiva/dependency_validator" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">工具</strong> </a>，它验证一个包的依赖项是否遵循<a class="ae ml" href="https://dart.dev/tools/pub/dependencies" rel="noopener ugc nofollow" target="_blank">发布约定</a>以及最佳实践。</p><blockquote class="me mf mg"><p id="edf6" class="jn jo mh jp b jq jr js jt ju jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj kk ij bi translated">通过比较在pubspec.yaml中声明的包的依赖项与通过import语句实际使用的依赖项，该工具能够识别各种与依赖项相关的问题:缺少依赖项、提升不足、提升过度和未使用的依赖项。</p></blockquote><p id="61f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个工具很酷的一点是，如果有人违反了最佳实践，你可以将它用作CI渠道中的验证步骤，并使PR失败。当你有一个里面有很多包的<a class="ae ml" href="https://en.wikipedia.org/wiki/Monorepo#:~:text=In%20version%20control%20systems%2C%20a,stored%20in%20the%20same%20repository.&amp;text=Many%20attempts%20have%20been%20made,other%2C%20newer%20forms%20of%20monorepos." rel="noopener ugc nofollow" target="_blank">单回购</a>时，这是非常有用的。</p><p id="3b72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便说一下，<a class="ae ml" href="https://melos.invertase.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">美洛斯CLI工具</strong> </a>对于flutter/dart monorepo项目非常方便。</p><h1 id="6d61" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">“lakos”工具</h1><p id="a61c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><a class="ae ml" href="https://pub.dev/packages/lakos" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> lakos </strong> </a>是一个命令行工具和库，它可以:</p><ul class=""><li id="b2b2" class="na nb iq jp b jq jr ju jv jy nc kc nd kg ne kk nf ng nh ni bi translated">在Graphviz <code class="fe ma mb mc md b">dot</code>中可视化内部Dart库依赖关系。</li><li id="205e" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">检测依赖循环。</li><li id="e94c" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">识别孤儿。</li><li id="5871" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">计算有用的依赖图度量。</li></ul><p id="a845" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个忽略测试，用指标在lakos上运行的例子:</p><pre class="km kn ko kp gt no md np nq aw nr bi"><span id="1507" class="mo ky iq md b gy ns nt l nu nv">lakos -o dot_images/lakos.metrics_no_test.dot -m -i test/** .</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nw"><img src="../Images/696cab8b9d2ab1cc0e6d31bcd2b89862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dTNkMlXJjhrLnIFr.png"/></div></div></figure><p id="1420" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以收集额外的指标，并在CI渠道中使用它们，尤其是在检测到依赖循环时。</p><h1 id="995e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">来源</h1><div class="nx ny gp gr nz oa"><a href="https://dart.dev/tools/pub/dependencies" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">包依赖关系</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">依赖性是pub包管理器的核心概念之一。依赖项是您的包中的另一个包…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">dart.dev</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kv oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://dart.dev/tools/pub/cmd/pub-deps" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">dart酒吧部门</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">Deps是pub工具的命令之一。$ dart pub deps[-style =][-[no-]dev][-executables]此命令…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">dart.dev</p></div></div><div class="oj l"><div class="op l ol om on oj oo kv oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://pub.dev/packages/dependency_validator" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">依赖项_验证器| Dart包</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">帮助您找到缺失、提升不足、提升过度和未使用的依赖项的工具。将以下内容添加到您的…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">公共开发</p></div></div><div class="oj l"><div class="oq l ol om on oj oo kv oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://www.workiva.com/careers/workiva-life-blog/validating-dart-dependencies-and-you" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">正在验证Dart依赖关系和您！</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">让我们在一个名为depenency_validator的工具的帮助下，让您的Dart依赖项保持一致</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.workiva.com</p></div></div><div class="oj l"><div class="or l ol om on oj oo kv oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://pub.dev/packages/lakos" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">lakos |飞镖包</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">lakos是一个命令行工具和库，可以:在Graphviz dot中可视化内部Dart库依赖关系。检测…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">公共开发</p></div></div><div class="oj l"><div class="os l ol om on oj oo kv oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://melos.invertase.dev/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">美洛斯</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">关于使用美洛斯许可证的项目#美洛斯是一个CLI工具，用于帮助管理具有多个包的Dart项目(也…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">melos .转化酶. dev</p></div></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://stackoverflow.com/questions/57174506/dependency-diagram-in-dart-flutter" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">Dart/Flutter中的依赖图？</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">感谢贡献一个堆栈溢出的答案！请务必回答问题。提供详细信息并分享…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">stackoverflow.com</p></div></div><div class="oj l"><div class="ot l ol om on oj oo kv oa"/></div></div></a></div></div></div>    
</body>
</html>