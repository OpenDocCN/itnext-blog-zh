# 优化 AWS RDS 成本

> 原文：<https://itnext.io/optimizing-aws-rds-cost-209f3572818?source=collection_archive---------2----------------------->

在我们与许多在[topcloudops.com](https://topcloudops.com)使用 AWS 的客户合作的过程中，我们意识到任何 AWS 客户成本中最重要的一部分总是 RDS。在许多情况下，RDS 的成本几乎占总成本的 50%。

这就是为什么我们必须优化这项服务，以降低我们云的总体成本。

在 topcloudops.com T2，我们总是会问以下问题:

## 1.我们在为我们不需要的资源付费吗？

我们希望使用 Cloudwatch 或 [CloudWisdom](https://www.virtana.com/create-account-optimize/) 等工具发现的第一件事是:

**我们是否有未使用的实例:**
很多时候，我们在客户的账户上发现资源已被调配，但它们并未被使用，例如，测试数据库或开发 POC。在这种情况下，这是一个容易的胜利。我们只需进行备份并移除未使用的资源。

**我们正在使用大小合适的实例:**
选择合适的实例是了解您的 CPU、内存和 IOPS 使用情况的游戏。这就是 CloudWatch 便于理解实例如何被使用，以及我们可以在哪里找到未使用的资源的地方。如果我们可以更改为更小的实例，那么每次降级时我们都可以节省高达 50%的成本。

**我们是否使用了正确的存储:** 在这里，一切都是为了调整您需要的 IOPs。如果调配太多 IOPs，存储成本可能会飙升。最好的方法是使用历史指标来了解数据库的使用情况。您还必须了解 IOPs 级别的瓶颈在哪里，并适当地调整实例的大小。

**我们是否使用了过多的存储:** 有时我们会发现实例配置了过多的存储，我们需要考虑到我们需要为每 1gb 的存储付费。因此，最好的办法是打开 RDS 上的 autoscaling 选项，这样每当我们用完可用空间时，RDS 就会逐渐增加存储，而不会分配太多空间。

**实例是否需要持续运行:**
有时候我们发现数据库只需要在营业时间或者一天中的某些时段使用。对于这些情况，我们建议客户在不使用数据库时将其关闭，因为 RDS 是按小时付费的。如果我们每月只让实例工作 160 小时，而不是 720 小时，我们可以节省高达 80%的成本。

**我们真的需要在 RDS 上运行我们的实例吗:**
RDS 附带了一大堆我们需要付费购买的功能，也许在我们的用例中我们并不真的需要它们。我们总是可以选择在 EC2 实例上运行数据库。这可以节省大约 50%的成本。

## 2.我们选择了正确的定价模式吗？

**按需与保留:**
在 AWS 领域，按需实例通常是更昂贵的选择，如果不是始终如此的话。因此，如果我们知道我们将在一段时间内使用数据库，最好的办法就是使用保留实例。关于预订实例需要知道的一件事是，如果你预先付款，你可以得到进一步的折扣。真正有所不同的是从按需到预约。
让您了解可能的节约

预留 1 年(无预付款)= ====> ~ **40%折扣**

预留 1 年期(预付)= ====> ~ **46%的折扣(差别不大)**

预留 3 年(前期)= ====> ~64 **%折扣**

**我们在哪个区域运行我们的实例:** 选择正确的区域会有很大的不同。例如，如果我们选择美国东部(俄亥俄州)，我们将支付 0.29 美元每小时的费用，但如果我们在南美洲(圣保罗)运行，我们将支付 0.6 美元每小时，这是两倍。

选择正确的地区可以为你节省 10%到 50%的费用。

我希望这有所帮助，

Guillermo Quiros，
AWS 认证解决方案架构师