<html>
<head>
<title>Top GitOps Tactics to Build Secure Cloud-Native Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建安全的云原生基础架构的顶级GitOps策略</h1>
<blockquote>原文：<a href="https://itnext.io/top-gitops-tactics-to-build-secure-cloud-native-infrastructure-7c70f5d4cbf4?source=collection_archive---------4-----------------------#2021-11-15">https://itnext.io/top-gitops-tactics-to-build-secure-cloud-native-infrastructure-7c70f5d4cbf4?source=collection_archive---------4-----------------------#2021-11-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7dbd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在企业向云迁移的推动下，GitOps的采用率正在上升。我们可以将它的日益流行归因于它在简化基础设施管理方面的效率。因此，云安全是一个必不可少的组件。</p><p id="0fc2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<a class="ae ko" href="https://www.weave.works/technologies/gitops/" rel="noopener ugc nofollow" target="_blank"> GitOps </a>帮助公司加快交付和上市时间的同时，它也有助于提高持续集成(CI)和持续交付(CD)管道的安全性。它可以作为开发人员在整个软件开发生命周期(SDLC)中识别和解决潜在漏洞的基础。</p><p id="ede8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基础设施即代码(IaC)和GitOps一起支持CI、CD、版本控制和协作。在这个场景中，DevOps团队将只与Git接口交互。所有集成和部署都将完全自动化。</p><h1 id="c057" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">为什么GitOps很重要？</h1><p id="5fb8" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">当您在集中式存储库中管理应用程序、IaC和状态时，您可以自动化大量IT操作。这种方法减轻了开发人员的负担，因为它通过代码来管理安全性和合规性。</p><p id="f728" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">利用CI/CD管道和IaC的企业在实施之前使用一系列线性测试和关卡来部署更新。它还补充了敏捷和<a class="ae ko" href="https://www.magalix.com/blog/what-is-devsecops-and-why-is-it-important" rel="noopener ugc nofollow" target="_blank"> DevOps </a>协议和最佳实践。</p><p id="d134" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在云环境中，如果应用程序流量突然增加，您可能会遇到一些性能问题和(当然)糟糕的用户体验。要解决这个问题，您可以快速增加云原生应用程序的资源分配。</p><p id="2c16" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以定义特定的资源增量，并将这些更改推送到存储库。在这种情况下，其他开发人员会很快审查和验证变更，并批准生产和部署。</p><p id="39b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些类型的事件初始化Git操作符，并触发GitOps CI/CD管道。Git操作员必须比较状态，将新配置识别为状态变化，并自动编排底层基础设施以匹配所需的状态。</p><p id="e3e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是，您必须监控自动生成和通知的潜在故障。在没有潜在问题的情况下，它会自动修改您的资源分配，以满足新的用户需求。如果失败或者出现配置错误，您可以简单地回滚到以前的状态并重新开始。</p><p id="6461" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以利用GitOps来控制变更，并将其作为单一的事实来源进行验证，例如:</p><h2 id="00eb" class="ls kq it bd kr lt lu dn kv lv lw dp kz kb lx ly ld kf lz ma lh kj mb mc ll md bi translated">变更是可审计的</h2><p id="95bd" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">版本控制跟踪发布的内容，并允许您按需回滚。根据提交历史，对存储库上的注释、评审和决策进行审计跟踪。</p><h2 id="1d36" class="ls kq it bd kr lt lu dn kv lv lw dp kz kb lx ly ld kf lz ma lh kj mb mc ll md bi translated">配置为代码(CaC)</h2><p id="7487" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">管理你在Git上的所有<a class="ae ko" href="https://www.redhat.com/en/topics/automation/what-is-yaml" rel="noopener ugc nofollow" target="_blank"> YAML </a>文件，以快速检查你是否符合安全策略。因为访问策略是在配置文件中声明的，所以您可以很快知道谁有权访问以及访问什么。</p><h2 id="cd9b" class="ls kq it bd kr lt lu dn kv lv lw dp kz kb lx ly ld kf lz ma lh kj mb mc ll md bi translated">将生产与Git中的期望状态相匹配</h2><p id="ecf0" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">作为事实的单一来源，代码和基础设施变更的标准工作流以及对漂移的自动警告提高了可靠性并降低了人为错误的风险。在这种情况下，权限、安全扫描和测试有助于使您的更改更加安全和高度可靠，从而避免基础结构漂移。</p><p id="3bda" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在高级GitOps环境中，您还可以对Git存储库进行更改，并通过用于质量保证(QA)测试的标签将它们自动应用到实时基础设施中。</p><h1 id="c62f" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">GitOps如何影响云安全？</h1><p id="4870" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">几年前，早期采用者为他们的基础设施代码和应用程序代码维护两个或更多独立的Git存储库。两个不同的团队经常管理这些。这种方法旨在限制风险半径，但最近，事情开始发生变化。</p><p id="d3c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">GitOps将一切都视为代码的能力对安全性有着巨大的影响。当所有的安全策略都编码好了，你就可以很容易地把所有的东西都放在版本控制中。在这种情况下，所有的变更都将被修改并被推送到一个自动化的管道中，该管道反过来验证、部署并持续监控所有的变更。</p><h2 id="276e" class="ls kq it bd kr lt lu dn kv lv lw dp kz kb lx ly ld kf lz ma lh kj mb mc ll md bi translated">一切如代码实现持续的云安全</h2><p id="208b" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">GitOps作为单一的事实来源，有助于提高云安全性，确保不变性和开发速度。在这种情况下，您不必等到开发周期结束时才考虑安全性测试，因为您很早就将安全性转移到了左边。</p><h2 id="c787" class="ls kq it bd kr lt lu dn kv lv lw dp kz kb lx ly ld kf lz ma lh kj mb mc ll md bi translated">策略即代码支持早期反馈</h2><p id="9e25" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">云原生应用的安全性测试是每个迭代的一部分。例如，编写策略并在提交时实施它们，可以提供早期测试和关于可能在管道末端产生安全问题的更改的反馈。</p><p id="8b8b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这意味着您可以在代码投入生产之前很久就识别并消除错误和漏洞。GitOps安全方法补充了持续集成和CI/CD协议，确保每个人都遵循安全最佳实践。</p><h1 id="9506" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">什么是作为代码的策略？</h1><p id="54b2" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated"><a class="ae ko" href="https://www.magalix.com/blog/what-is-policy-as-code" rel="noopener ugc nofollow" target="_blank">策略即代码</a>本质上是一个编纂策略的概念。通过将安全策略提交给代码，您可以编写代码计划来自动化和管理安全策略。</p><p id="f9f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当实现用高级语言创建的代码策略时，您必须利用策略执行引擎或平台。这种方法通过在特定集群或整个公司内实施某些规则，帮助维护组织内的安全标准。</p><p id="d4bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些基于代码的规则存在于文本文件中，确保开发团队始终遵循最佳实践。</p><p id="9800" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过将一切视为代码，GitOps有助于提高开发管道中几个不同元素的安全性(包括策略和配置)。当所有这些结合在一起时，开发人员可以更快地迭代版本控制，实现持续集成，测试自动化，以及Git中的其他特性。</p><p id="efbd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当开发人员利用自动化时，他们拥有对基础设施模板的完全可审计性和版本控制。这种方法有助于通过清晰的关注点分离来提高开发速度。这意味着您不需要访问CI/CD平台或生产环境就可以将代码推送到存储库中。</p><p id="897f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种分离有助于增强安全协议，并允许团队采用<a class="ae ko" href="https://www.cyberark.com/what-is/least-privilege/#:~:text=The%20principle%20of%20least%20privilege,perform%20his%2Fher%20job%20functions." rel="noopener ugc nofollow" target="_blank">最小特权</a>的实践。这意味着只有少数经过验证的用户可以访问更小的攻击面。</p><p id="1cd1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您使用的是Kubernetes外部机密，您也可以将它们安全地存储在您的云原生机密存储中。这种方法能够自动地、独立于Git地按需快速旋转任何秘密。您还可以对每个秘密使用细粒度的基于角色的访问控制(RBAC)。</p><p id="282d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">说到安全，GitOps也让开发者承担责任。它通过在整个SDLC中嵌入安全扫描和防护栏，使整个过程变得更加容易。</p><p id="12bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当您用代码来加强您的安全状态时，您会对以下威胁保持警惕:</p><ul class=""><li id="d2e1" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated">Git用户互相模仿。</li><li id="65bc" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">黑客移除安全功能。</li><li id="89ad" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">不安全的旧版本Git。</li><li id="7c52" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">恶意用户试图重写历史。</li></ul><p id="5768" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">任何潜在的bug或对设定状态的偏离都会在开发周期的早期被发现。因此，您可以使用GitOps作为策略，将安全性进一步左移。</p><p id="2cc7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您面临对管道的更改导致数据泄露的情况，您可以回到GitOps并触发快速响应来解决问题。当您将IaC存储在存储库中时，您还可以快速确定其中受影响的代码行。</p><p id="88f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当有可能快速识别攻击的规模和范围时，您可以更快地做出响应和恢复。这种方法有助于降低风险，减少违规发生的可能性。</p><p id="ccc2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Magalix，我们的业务是通过策略即代码(PaC)以编程方式执行安全标准。这种方法有助于为云原生应用构建以开发人员为中心的CI/CD体验。</p><h2 id="4e16" class="ls kq it bd kr lt lu dn kv lv lw dp kz kb lx ly ld kf lz ma lh kj mb mc ll md bi translated">在您的组织中实施PaC有助于:</h2><ul class=""><li id="132f" class="me mf it js b jt ln jx lo kb ms kf mt kj mu kn mj mk ml mm bi translated">只需点击一下鼠标，即可在Kubernetes集群间应用治理标准</li><li id="6ecb" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">跨云环境部署定制的策略检查</li><li id="3b0c" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">在SDLC的早期验证基础架构合规性</li><li id="70aa" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">通过在DevOps工作流中实施PaC来巩固您的基础架构</li></ul><p id="077d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在您的云原生环境中使用正确的行动手册和GitOps工作流，您的开发运维团队可以更快地创新，而不会影响安全性或合规性。您还可以定制您的组织策略，并通过代码自动执行它们。</p><p id="e20f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文原载于Magalix:<br/><a class="ae ko" href="https://www.magalix.com/blog/top-gitops-tactics-to-build-secure-cloud-native-infrastructure" rel="noopener ugc nofollow" target="_blank">https://www . Magalix . com/blog/top-gitops-tactics-to-build-secure-cloud-native-infra structure</a></p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="f07a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="nc">最初发表于</em><a class="ae ko" href="https://www.magalix.com/blog/top-gitops-tactics-to-build-secure-cloud-native-infrastructure" rel="noopener ugc nofollow" target="_blank"><em class="nc"/></a><em class="nc">。</em></p></div></div>    
</body>
</html>