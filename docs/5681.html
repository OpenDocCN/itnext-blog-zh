<html>
<head>
<title>Raspberry Pi read-only kiosk mode: 2021 complete tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Raspberry Pi只读信息亭模式:2021完整教程</h1>
<blockquote>原文：<a href="https://itnext.io/raspberry-pi-read-only-kiosk-mode-the-complete-tutorial-for-2021-58a860474215?source=collection_archive---------0-----------------------#2021-05-02">https://itnext.io/raspberry-pi-read-only-kiosk-mode-the-complete-tutorial-for-2021-58a860474215?source=collection_archive---------0-----------------------#2021-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9b20" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">包括网络设置软件和远程控制</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9b68e00a5106b78820cd9fa0c302c3bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQE2UYJ_JLq89afq0Ax2sA.png"/></div></div></figure><p id="6ffc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章，这篇教程，是因为一个简单的原因而写的:我在其他地方找不到类似的东西。</p><p id="1cdb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">更新:这个教程有了新版本</strong></p><div class="lq lr gp gr ls lt"><a href="https://petrjahoda.medium.com/raspberry-pi-read-only-kiosk-mode-2022-complete-tutorial-df7fc051fdaf" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">Raspberry Pi只读信息亭模式:2022完整教程</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">包括网络设置软件和远程控制</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">petrjahoda.medium.com</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ks lt"/></div></div></a></div><p id="cf44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我想要一套完整的说明，如何改变一个新的unboxed Raspberry Pi变成一个设备，可以在后台使用触摸屏的其他设备。</p><p id="ea0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我想让结果看起来像你在下面看到的那样(捷克语版)。一个带有触摸显示屏和树莓派的设备。我想要一个平稳的启动进入一些“设置”屏幕，在那里我可以改变网络和设置一个服务器地址，这将自动加载，如果一切正常。在这种情况下，服务器地址是一个包含最终软件的网页。像一些工厂的软件(像<a class="ae mi" href="https://github.com/petrjahoda/sklabel_cutting_webservice" rel="noopener ugc nofollow" target="_blank">这种</a>)、银行、停车场等等。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/ec6ad29a5aeff2d1fd488465f5913dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lh7UXXcHhj4qSYrk34qQMA.jpeg"/></div></div></figure><p id="237f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本教程是一个完整的教程，你可以使用和改变你想要的。本教程是一个工作教程(截至2021年4月)，基于他人的工作。我只是把它们结合在一起。因为我结合了互联网上不同的东西，很多时候我不确定谁是真正的原作者，所以我不能写下每篇教程的每个作者。如果你是一个作者，并且正在阅读这篇文章，请随时联系我，我会很乐意更新这篇文章。</p><p id="3219" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我还增加了一些功能，比如远程重启、远程关机、远程截图等。因此，用户可以创建网页并管理所有连接的设备。</p><p id="7ef4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在该过程中使用了树莓Pi 4b。</p><p id="3e12" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">亲爱的读者，如果你发现一些事情没有按预期工作，请与我联系，我们将努力找到解决问题的办法，并更新文章，使之更加准确。</p><p id="5182" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了使它完整，这里是一个最终结果的照片，显示了带有触摸键盘的“设置屏幕”(捷克版本)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/5336d3de31c9ba28b4fe31dd2f2754c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWXYyEbFFjFZ4lUJepM2XQ.jpeg"/></div></div></figure><p id="6a0b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">后端web服务是用Go编写的(前端是普通的html+css+js ),使用本教程:</p><div class="lq lr gp gr ls lt"><a href="https://medium.com/swlh/create-go-service-the-easy-way-de827d7f07cf" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">以简单的方式创建Go服务</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">适用于Windows、Linux、MacOS和Docker</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="mk l me mf mg mc mh ks lt"/></div></div></a></div><p id="07a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">源代码可以在这里找到:</p><div class="lq lr gp gr ls lt"><a href="https://github.com/petrjahoda/rpi_kiosk_webservice" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">petrjahoda/rpi _ kiosk _ web service</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">通过在GitHub上创建一个帐户，为petrjahoda/rpi _ kiosk _ web service开发做出贡献。</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">github.com</p></div></div><div class="mc l"><div class="ml l me mf mg mc mh ks lt"/></div></div></a></div></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="f655" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">1.准备树莓酱</h1><ul class=""><li id="0e0b" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">从<a class="ae mi" href="https://www.raspberrypi.org/software/" rel="noopener ugc nofollow" target="_blank">官方网站</a>使用raspbian Pi成像仪安装raspbian lite</li><li id="87e6" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo apt-get update &amp;&amp; sudo apt-get upgrade</code>进行更新和升级</li><li id="de8b" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo raspi-config</code>:启用控制台自动登录、启用ssh、启用过扫描(或禁用欠扫描)</li><li id="dd75" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo apt-get install maim</code>安装maim</li><li id="5695" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo apt-get install network-manager</code>安装网络管理器</li><li id="02f3" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo systemctl enable NetworkManager</code>启用网络管理器作为服务</li><li id="eceb" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo systemctl start NetworkManager</code>将网络管理器作为服务启动</li><li id="fcf7" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo systemctl mask dhcpcd</code>禁用旧的dhcp服务</li><li id="23ed" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo apt-get install ufw</code>安装ufw</li><li id="df5e" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo ufw allow 9999</code>启用端口9999</li><li id="c4c3" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo reboot now</code>重启</li></ul></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="913e" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">2.在kiosk模式下安装Chromium</h1><ul class=""><li id="5464" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo apt-get install --no-install-recommends xserver-xorg x11-xserver-utils xinit openbox</code>安装先决条件</li><li id="d756" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo apt-get install --no-install-recommends chromium-browser</code>安装铬合金</li><li id="b130" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano /etc/xdg/openbox/autostart</code>编辑自动启动文件，插入以下行:</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="8bd3" class="oj mu it oe b gy ok ol l om on"># Disable any form of screen saver / screen blanking / power management<br/>xset s off<br/>xset s noblank<br/>xset -dpms</span><span id="5828" class="oj mu it oe b gy oo ol l om on"># Allow quitting the X server with CTRL-ATL-Backspace<br/>setxkbmap -option terminate:ctrl_alt_bksp</span><span id="da50" class="oj mu it oe b gy oo ol l om on"># Start Chromium in kiosk mode<br/>sed -i 's/"exited_cleanly":false/"exited_cleanly":true/' ~/.config/chromium/'Local State'<br/>sed -i 's/"exited_cleanly":false/"exited_cleanly":true/; s/"exit_type":"[^"]\+"/"exit_type":"Normal"/' ~/.config/chromium/Default/Preferences<br/>chromium-browser --start-fullscreen --kiosk --incognito --noerrdialogs --disable-translate --no-first-run --fast --fast-start --disable-infobars --disable-features=TranslateUI --disk-cache-dir=/dev/null  --password-store=basic --disable-pinch --overscroll-history-navigation=disabled --disable-features=TouchpadOverscrollHistoryNavigation 'http://localhost:9999'</span></pre><p id="10f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> <em class="op">附加信息:</em></strong><em class="op">chromium-browser有一个附加标志:</em> <code class="fe ob oc od oe b"><em class="op">temporary-unexpire-flags-m80</em></code> <em class="op">。这个标志从2021年6月20日起从chromium中删除，所以上面的命令被更新。感谢Paul den Hertog提供的信息。有一种可能性是，当你将来阅读这篇文章时，有些标志是不必要的。</em></p><ul class=""><li id="6f42" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano .bash_profile</code>使一切在引导时启动，插入以下行:</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="2565" class="oj mu it oe b gy ok ol l om on">[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; startx -- -nocursor</span></pre><blockquote class="ot ou ov"><p id="41b2" class="ku kv op kw b kx ky ju kz la lb jx lc ow le lf lg ox li lj lk oy lm ln lo lp im bi translated"><em class="it">提示:按下</em> <code class="fe ob oc od oe b"><em class="it">Ctrl-Alt-Backspace</em></code> <em class="it">可以杀死chromium并进入命令行</em></p></blockquote></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="d64a" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">3.将程序数据复制到Raspberry</h1><ul class=""><li id="408d" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">将rpi_linux复制到/home/pi中</li><li id="0411" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">将/config/*复制到/home/pi/*中</li><li id="c809" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">将/html/*复制到/home/pi/*中</li><li id="843f" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">将/css/*复制到/home/pi/*中</li><li id="5995" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">将/js/*复制到/home/pi/*中</li><li id="1649" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">将/font/*复制到/home/font/*中</li></ul><blockquote class="ot ou ov"><p id="c46c" class="ku kv op kw b kx ky ju kz la lb jx lc ow le lf lg ox li lj lk oy lm ln lo lp im bi translated"><em class="it">示例:使用scp复制rpi程序文件:</em> <code class="fe ob oc od oe b"><em class="it">scp rpi/rpi_linux pi@&lt;ipaddress&gt;:/home/pi</em></code> <em class="it"> &gt; </em></p><p id="f0ec" class="ku kv op kw b kx ky ju kz la lb jx lc ow le lf lg ox li lj lk oy lm ln lo lp im bi translated"><em class="it">示例:使用scp复制所有目录:</em> <code class="fe ob oc od oe b"><em class="it">scp -r config html css js font pi@&lt;ipaddress&gt;:/home/pi</em></code></p></blockquote></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="baa7" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">4.使程序作为服务运行</h1><ul class=""><li id="a6a4" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano /lib/systemd/system/zapsi.service</code>创建新文件，插入以下行:</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="3824" class="oj mu it oe b gy ok ol l om on">[Unit]<br/>Description=Zapsi Service<br/>ConditionPathExists=/home/pi/rpi_linux<br/>After=network.target<br/>[Service]<br/>Type=simple<br/>User=root<br/>Group=root<br/>LimitNOFILE=1024<br/>Restart=on-failure<br/>RestartSec=10<br/>startLimitIntervalSec=60<br/>WorkingDirectory=/home/pi<br/>ExecStart=/home/pi/rpi_linux<br/>PermissionsStartOnly=true<br/>StandardOutput=syslog<br/>StandardError=syslog<br/>SyslogIdentifier=zapsi_service<br/>[Install]<br/>WantedBy=multi-user.target</span></pre><ul class=""><li id="8185" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo chmod 755 /lib/systemd/system/zapsi.service</code>确保文件可执行</li><li id="a98d" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo systemctl enable zapsi.service</code>使服务自动启动</li><li id="7bf7" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo systemctl start zapsi.service</code>立即启动服务</li></ul><blockquote class="ot ou ov"><p id="0048" class="ku kv op kw b kx ky ju kz la lb jx lc ow le lf lg ox li lj lk oy lm ln lo lp im bi translated"><em class="it">提示:使用</em>和<code class="fe ob oc od oe b"><em class="it">journalctl -f -u zapsi.service</em></code>搜索日志</p></blockquote></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="d739" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">5.干净的启动屏幕和信息</h1><ul class=""><li id="cac3" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano /boot/config.txt</code>禁用启动彩虹:添加线<code class="fe ob oc od oe b">disable_splash=1</code></li><li id="24ce" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano /boot/cmdline.txt</code>禁用引导信息:在第一行<code class="fe ob oc od oe b">silent quiet splash loglevel=0 logo.nologo vt.global_cursor_default=0</code>的末尾添加，用<code class="fe ob oc od oe b">console=tty3</code>替换<code class="fe ob oc od oe b">console=tty1</code></li><li id="ae26" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">禁用引导自动登录终端信息:运行<code class="fe ob oc od oe b">touch ~/.hushlogin</code>，运行<code class="fe ob oc od oe b">sudo nano /etc/systemd/system/getty@tty1.service.d/autologin.conf</code>，用<code class="fe ob oc od oe b">ExecStart=-/sbin/agetty --skip-login --noclear --noissue --login-options "-f pi" %I $TERM</code>替换<code class="fe ob oc od oe b">ExecStart=-/sbin/agetty --autologin pi --noclear %I xterm-256color</code>行</li></ul></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="9c92" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">6.将Raspberry Pi设为只读</h1><ul class=""><li id="4a93" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">移除交换</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="66d9" class="oj mu it oe b gy ok ol l om on">sudo dphys-swapfile swapoff<br/>sudo dphys-swapfile uninstall<br/>sudo update-rc.d dphys-swapfile remove</span></pre><ul class=""><li id="470d" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">更新和升级一切</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="71d3" class="oj mu it oe b gy ok ol l om on">sudo apt-get update<br/>sudo apt-get dist-upgrade<br/>sudo apt-get upgrade<br/>sudo BRANCH=next rpi-update</span></pre><ul class=""><li id="5296" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo reboot now</code>重启</li><li id="8c53" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo mkinitramfs -o /boot/initrd</code>创建initramfs</li><li id="2ebe" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo curl https://gist.githubusercontent.com/paul-ridgway/d39cbb30530442dca416734c3ee70162/raw/c490df8be1976dd062a8b5f429ef42ed1b393ecb/ro-root.sh -o /bin/ro-root.sh</code>添加脚本</li><li id="986b" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo chmod +x /bin/ro-root.sh</code>使脚本可执行</li><li id="21a5" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano /boot/config.txt</code>将这些行添加到配置文件的末尾</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="1023" class="oj mu it oe b gy ok ol l om on">initramfs initrd followkernel<br/>ramfsfile=initrd<br/>ramfsaddr=-1</span></pre><ul class=""><li id="0af9" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo nano /boot/cmdline.txt</code>将此文本添加到cmdline文件的末尾</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="4345" class="oj mu it oe b gy ok ol l om on">init=/bin/ro-root.sh</span></pre><ul class=""><li id="9393" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用<code class="fe ob oc od oe b">sudo reboot now</code>重启</li></ul><blockquote class="ot ou ov"><p id="db3e" class="ku kv op kw b kx ky ju kz la lb jx lc ow le lf lg ox li lj lk oy lm ln lo lp im bi translated"><em class="it">提示:根分区挂载为</em> <code class="fe ob oc od oe b"><em class="it">/ro</em></code> <em class="it">，您可以使用</em> <code class="fe ob oc od oe b"><em class="it">sudo mount -o remount,rw /ro</em></code> <em class="it">使其可写，例如，使用</em> <code class="fe ob oc od oe b"><em class="it">touch /ro/home/pi/test.txt</em></code> <em class="it">创建一个永久文件，并使用</em> <code class="fe ob oc od oe b"><em class="it">sudo mount -o remount,ro /ro</em></code> <em class="it">使其全部恢复为只读，该文件将在引导后保留。这是你可以做一些改变的方法，这些改变在重启后仍然存在。</em></p></blockquote></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="175e" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">7.密码</h1><ul class=""><li id="2032" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">密码为<code class="fe ob oc od oe b">3600</code>的用户<code class="fe ob oc od oe b">pi</code></li><li id="8443" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">设置密码为<code class="fe ob oc od oe b">3600</code></li></ul></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="b5f4" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">8.远程管理</h1><ul class=""><li id="3ff8" class="nl nm it kw b kx nn la no ld np lh nq ll nr lp ns nt nu nv bi translated">在<code class="fe ob oc od oe b">http://&lt;ipaddress&gt;:9999/screenshot</code>的实际截图</li><li id="c9b9" class="nl nm it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">使用javascript远程重启(比如绑定某个按钮):</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="9883" class="oj mu it oe b gy ok ol l om on">let data = {<br/>  password: "3600"<br/>};<br/>fetch("/restart", {<br/>  method: "POST",<br/>  body: JSON.stringify(data)<br/>}).then((result) =&gt; {<br/>  console.log(result)<br/>}).catch((error) =&gt; {<!-- --> <br/>  <!-- -->console.log(error)<br/>});</span></pre><ul class=""><li id="28fe" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用javascript远程关机(比如绑定某个按钮):</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="8b42" class="oj mu it oe b gy ok ol l om on">let data = {<br/>  password: "3600"<br/>};<br/>fetch("/shutdown", {<br/>  method: "POST",<br/>  body: JSON.stringify(data)<br/>}).then((result) =&gt; {<br/>  console.log(result)<br/>}).catch((error) =&gt; {<br/>  console.log(error)<br/>});</span></pre><ul class=""><li id="2b8a" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用javascript设置dhcp(比如绑定某个按钮):</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="02fc" class="oj mu it oe b gy ok ol l om on">let data = {<br/>  password: "3600",<br/>  server: server.value,         // server web, example: 192.168.86.100:80/terminal/1<br/>};<br/>fetch("/dhcp", {<br/>  method: "POST",<br/>  body: JSON.stringify(data)<br/>}).then((result) =&gt; {<br/>  console.log(result)<br/>}).catch((error) =&gt; {<br/>  console.log(error)<br/>});</span></pre><ul class=""><li id="2e32" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">使用javascript设置static(比如绑定到某个按钮上):</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="4955" class="oj mu it oe b gy ok ol l om on">let data = {<br/>  password: "3600",     <br/>  ipaddress: ipaddress.value,   // ip address, example: 192.168.86.128<br/>  mask: mask.value,             // mask, example: 255.255.255.0<br/>  gateway: gateway.value,       // gateway, example: 192.168.86.1<br/>  server: server.value,         // server web, example: 192.168.86.100:80/terminal/1<br/>};<br/>fetch("/static", {<br/>  method: "POST",<br/>  body: JSON.stringify(data)<br/>}).then((result) =&gt; {<br/>  console.log(result)<br/>}).catch((error) =&gt; {<br/>  console.log(error)<br/>});</span></pre><ul class=""><li id="3adb" class="nl nm it kw b kx ky la lb ld oq lh or ll os lp ns nt nu nv bi translated">检查电缆是否已连接(如捆绑在某个按钮上):</li></ul><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="e1c0" class="oj mu it oe b gy ok ol l om on">fetch("/checkCable", {<br/>  method: "POST",<br/>}).then((result) =&gt; {<br/>  result.text().then(function (data) {<br/>    let connected = JSON.parse(data);<br/>    console.log(connected["Result"])<br/>    });<br/>}).catch((error) =&gt; {<br/>  console.log(error)<br/>});</span></pre></div></div>    
</body>
</html>