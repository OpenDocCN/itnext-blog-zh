<html>
<head>
<title>The Reason Why I Love Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我喜欢Docker的原因</h1>
<blockquote>原文：<a href="https://itnext.io/the-reason-i-love-docker-1410820a7c36?source=collection_archive---------4-----------------------#2020-04-26">https://itnext.io/the-reason-i-love-docker-1410820a7c36?source=collection_archive---------4-----------------------#2020-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="315d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Docker是什么，它能帮助我们什么，为什么要使用它，谁在使用它。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4250dd676425e370b5764f8097ae2b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b45WH7HHExZq88GsFxtNDA.png"/></div></div></figure><h1 id="1d2a" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">码头工人——你好伙计</h1><p id="fb37" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">当你加入一家新公司时。您必须克隆并安装一个新项目。是啊，问题来了。你需要安装Java，Spring boot，Mysql，Kafka，然后尝试运行…构建失败。您检查错误日志:丢失Redis。好的，然后安装Redis。但是你用的是Windows，在Windows上安装Redis比Ubuntu或者Linus要难。所以你决定…用Ubuntu。</p><p id="2742" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">那天晚上你安装了Ubuntu。建造。Oke，又失败了。你向领导求助= &gt;缺少一些环境变量。但是在运行项目之前，你再次问他是否需要其他东西。“你有没有运行‘mvn install’来安装软件包”——没有，我当然没有。好吧，上次建…不，这不是最后一次。失败了。一些关于Mysql的错误，可能是版本不匹配。项目中使用的Mysql是mysq5.7。但是你已经安装了MySQL 8…哦，我的天哪</p><p id="d11a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">好吧，另一个故事。当你必须维护3-4个项目时，每个项目都需要Golang(用它的包安装Golang是可怕的，相信我)，NodeJS，MySQL，Kafka，有一天他安装了，嘣，Kafka死了。你不知道如何拆卸和重装。仍然显示错误。相关项目之所以这么崩溃，是因为都需要卡夫卡来运行。他很伤心，从那以后，每当他在服务器上安装任何东西，他的手都会颤抖，就像你第一次见到你的爱人一样。😄</p><p id="bcb0" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">那么，…解决方案是什么？</p><h1 id="af37" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">什么是Docker</h1><p id="3434" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">从这样的问题和其他几十个原因，Docker诞生了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/eea8d19fc645e89d57d95d72bc3735fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*pCZ49HSOKbye2gNS3wPvUg.png"/></div></figure><p id="85ce" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">Wiki上关于Docker的定义:</p><blockquote class="mo mp mq"><p id="c1bd" class="lm ln mr lo b lp mi ju lr ls mj jx lu ms mk lx ly mt ml mb mc mu mm mf mg mh im bi translated">Docker是一组平台即服务产品，使用操作系统级虚拟化来交付称为容器的软件包中的软件。容器是相互隔离的，捆绑了它们自己的软件、库和配置文件；他们可以通过明确定义的渠道相互交流。</p></blockquote><p id="e052" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我的定义，更简单:</p><p id="d6f3" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">Docker是一个工具，允许我们在特定的环境中运行项目，定义清晰，独立于原始环境。</p><h1 id="6ece" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">什么码头工人能帮助我们。</h1><ul class=""><li id="b652" class="mv mw it lo b lp lq ls lt lv mx lz my md mz mh na nb nc nd bi translated">Docker给你一个具体的目标环境，比如你需要Ubuntu配Java 10，NodeJS 6.0 Mysql 5.7。你所需要做的就是声明一个文件，docker会为你完成剩下的工作。(我稍后会谈到它是如何工作的)</li><li id="d0eb" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">Docker中的环境独立于原始环境:Docker将为您创建一个“虚拟”环境，无论您的原始操作系统是什么，您都可以在其中运行您的项目。因此，无论你是在Windows还是Mac上，你仍然可以在Ubuntu环境或任何环境(目前支持Docker)下运行该项目</li><li id="ab0c" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">定义后的Docker环境将是“不可变的”。您可以在任何具有您定义的相同环境的计算机上设置。</li><li id="e703" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">每个项目都有一个特定的配置文件。10年后，当你再次阅读该项目时，你仍然知道运行该项目需要什么，应该做什么。您只需要将配置文件交给其他人，他们自己就会知道该做什么。</li><li id="cfcd" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">因为每个项目我们都可以在单独的环境下设置，项目不会冲突(你有2个项目，一个用Mysql 5.7，另一个用Mysql 8，你会怎么做？想想Docker)。从而最小化相互依赖，安装、添加和删除库时，配置不会受到其他项目的影响。</li><li id="4003" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">Docker可以帮助自动愈合(自我恢复，重新启动)，如果发生错误。</li></ul><h1 id="4bc1" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated"><strong class="ak">虚拟机呢</strong></h1><p id="6a98" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">你听说过VMWare或Virtual Box吧。</p><p id="0486" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">但是我认为，虚拟机最大的缺点之一是沉重、非常复杂、非常慢的安装。使用虚拟机时，我们必须为其削减固定数量的资源，导致根操作系统和虚拟机共享硬件，降低了二者的性能。，当你遇到需要重新安装的错误时，你会体验到这种痛苦。</p><p id="08bb" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">有了Docker，它将创建一个“虚拟环境”，而不再是一个虚拟机。因此，它将与外部环境共享硬件、RAM、CPU，..速度将是相同的，与原始环境共享文件。此外，在Docker中创建一个“虚拟”环境只需一个或几个命令就可以快速轻松地完成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/c394889c03f21fc50714d7c9ae4d02e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7-CVNlw3HlPVc4FM4ZP-w.png"/></div></div></figure><h1 id="4f22" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">为什么我需要Docker</h1><ul class=""><li id="f21c" class="mv mw it lo b lp lq ls lt lv mx lz my md mz mh na nb nc nd bi translated">当我们的项目有很多人一起工作时，Win用户，Mac用户，Linux用户。但是在每个操作系统上安装软件和库的方式是不同的。安装时也可以对项目进行更改。这导致项目在不同的操作系统上不正确地运行。</li><li id="a1d3" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">每个项目都需要很多东西来搭配:MySQL，Redis，extensions，…而记住安装每一个都很累，记住如何正确配置更累。而且最大火的是安装有故障的时候，但是错误擦除完了和重装是不一样的。</li><li id="9b98" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">每个项目都需要很多东西来搭配:MySQL，Kafka，Redis，extensions，…而记住安装每一个都很累，记住如何正确配置更累。</li><li id="21a2" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">当我们有许多项目，共享许多东西，这导致当我们想要改变，修改一个共享资源，将影响相关的项目。</li><li id="f421" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">有一个案例让我感到非常痛苦。那就是当我们移动环境的时候(比如移动服务器)，我们需要移动旧的项目，移动到新的环境。如何移动所有的数据，用数十亿的东西从头开始重新配置。</li></ul><p id="706d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">Docker会用一种非常简单容易的方式帮你解决上面的事情。(是啊，非常非常容易)。</p><h1 id="a756" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">谁在使用Docker</h1><p id="1bb5" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">每个人，每个人:谷歌、脸书、亚马逊、推特、阿里巴巴……以及我工作的公司。可能你的公司，你朋友的公司都在用Docker。</p><p id="efd2" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">此外，我们还有其他工具与Docker配合使用，以获得更多好处:</p><ul class=""><li id="bfd7" class="mv mw it lo b lp mi ls mj lv nk lz nl md nm mh na nb nc nd bi translated">Kubernetes:管理Docker运行的项目的工具，管理日志，出错时自动修复，自动缩放，自动部署，自动和自动。</li><li id="9b4b" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">CI / CD:测试、检查错误和部署到真实环境都是自动完成的，不再需要安装杂乱的工具来自动部署。</li><li id="8caa" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">Github、Gitlab、Bitbucket、…等源代码管理平台对Docker的支持。</li></ul><p id="7327" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">凭借Docker带来的所有伟大的东西，这就是Docker今天极其受欢迎的原因。</p><h1 id="b609" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">Docker中你需要知道的定义</h1><p id="ecb6" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">在Docker中，会有很多我们需要了解的东西。所以我提几个基本概念，是必须的，也是经常用到的。</p><p id="e5d4" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">图像<br/> </strong>图像是Docker中最基本的单位之一。图像将定义一个环境及其内容。如果我们的应用程序想要运行，它需要图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/feb519c72ef5191663aa9511566cfe98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AZo5TPq803dyk6tIJgR_A.png"/></div></div></figure><p id="e152" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">例如，在Image中，我们可以定义以下组件(或仅一个):</p><ul class=""><li id="113f" class="mv mw it lo b lp mi ls mj lv nk lz nl md nm mh na nb nc nd bi translated">环境:Ubuntu 18.04</li><li id="9d44" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">Python 3</li><li id="27b7" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">MySQL 5.7</li></ul><p id="1b6b" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">一些有用的命令:</p><ul class=""><li id="8813" class="mv mw it lo b lp mi ls mj lv nk lz nl md nm mh na nb nc nd bi translated">列出最近创建的图像</li></ul><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="3ba3" class="nt kv it np b gy nu nv l nw nx">$ docker images</span></pre><ul class=""><li id="ce23" class="mv mw it lo b lp mi ls mj lv nk lz nl md nm mh na nb nc nd bi translated">按名称和标签列出图像</li></ul><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="726a" class="nt kv it np b gy nu nv l nw nx">$ docker images java</span></pre><p id="b26d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">容器</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/5450cada33eaf69d8495e9957af32ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bOrphmm1BtsoUc9rND7lmw.png"/></div></div></figure><p id="d9f8" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">A <code class="fe nz oa ob np b">Container</code>是<code class="fe nz oa ob np b">Image</code>的一个实体。最简单的理解就是:<code class="fe nz oa ob np b">Image</code>是一个类，<code class="fe nz oa ob np b">Container</code>是从那个类初始化的对象。</p><p id="c3a0" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">从一个映像中，我们可以初始化数百个容器。每个项目可以包含从一个或多个图像创建的一个或多个容器。例如，我们有一个Python项目:</p><ul class=""><li id="e998" class="mv mw it lo b lp mi ls mj lv nk lz nl md nm mh na nb nc nd bi translated">Ubuntu环境-&gt;需要Ubuntu映像18.04</li><li id="3983" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated">Python 3 -&gt; Python 3图像(OpenJDK)</li></ul><p id="a6e5" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">因此，在运行上述项目时，我们需要创建2个容器:一个Ubuntu容器和一个Python 3容器。</p><p id="a65b" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> Port <br/> </strong>因为Docker中的环境是完全独立于原环境的。因此，为了能够使用Docker中运行的应用程序，我们需要从Docker打开端口，以便外部可以呼叫进来。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/33eef4035fccd300430593b183efc836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*FdgzqG1raRiLuT0S25RyHg.png"/></div></figure><p id="ba51" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">如上图所示，我们有一个运行在Docker容器中的Tomcat服务器。在容器中，我们为外部访问环境开放端口8080。从外部环境，我们开放端口8888，以便真正的用户(在您的计算机之外)可以访问。因此，用户将访问端口8888，以便与Docker容器中运行的应用程序进行通信。</p><p id="1d98" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">卷<br/> </strong>因为Docker环境是独立的，所以Docker中运行的应用的文件系统也是独立的。事实上，几乎总是需要在根环境和Docker环境之间交换文件:DB存储、日志存储、图像……因此根环境要访问Docker中运行的应用程序的文件系统，我们需要这个卷</p><p id="eca8" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们使用根环境的卷来告诉Docker:如果您创建了一个新的日志文件，请记住为我保存它，然后为我创建一个日志文件的“投影”。当我在我这边(外部)编辑/删除时，或者当我在我这边编辑/删除时，必须在两个环境中更改日志文件(从外部环境安装到Docker中)</p><h1 id="162f" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">设置Docker &amp; Docker-撰写</h1><p id="3f21" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><strong class="lo iu">码头工人安装</strong></p><ul class=""><li id="3682" class="mv mw it lo b lp mi ls mj lv nk lz nl md nm mh na nb nc nd bi translated"><a class="ae od" href="https://docs.docker.com/docker-for-windows/install/" rel="noopener ugc nofollow" target="_blank">为Windows安装。</a></li><li id="0755" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated"><a class="ae od" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" rel="noopener ugc nofollow" target="_blank">为Ubuntu安装。</a></li><li id="6083" class="mv mw it lo b lp ne ls nf lv ng lz nh md ni mh na nb nc nd bi translated"><a class="ae od" href="https://docs.docker.com/v17.12/docker-for-mac/install/" rel="noopener ugc nofollow" target="_blank">为Mac安装。</a></li></ul><p id="7b2c" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">检查您是否成功安装:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="de0e" class="nt kv it np b gy nu nv l nw nx">docker --version</span></pre><p id="db2e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> Docker-compose安装</strong></p><p id="197b" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">要在Docker中运行项目，可以使用以下命令来运行每个容器:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="ec95" class="nt kv it np b gy nu nv l nw nx">docker run container1<br/>docker run container2<br/>docker run container3<br/>.........................</span></pre><p id="2e82" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">但是在运行实际项目的时候，大多数时候我们会使用docker-compose来运行项目，因为我们对于1个项目总是需要1个以上的容器。</p><p id="03b7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">Docker-compose是一个同时配置和运行多个Docker容器的工具。使用docker-compose将使我们更容易运行一个或几个容器，并帮助我们轻松地对项目有一个概述。</p><h1 id="f22c" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">结论</h1><p id="112d" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">关于Docker和Docker带来的好处，我已经给大家简单介绍过了。希望你能在下一个项目中使用它。再见。</p></div></div>    
</body>
</html>