<html>
<head>
<title>Azure DevOps Pipelines: Naming and Tagging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure DevOps管道:命名和标记</h1>
<blockquote>原文：<a href="https://itnext.io/azure-devops-pipelines-naming-and-tagging-edea78b20478?source=collection_archive---------0-----------------------#2020-04-20">https://itnext.io/azure-devops-pipelines-naming-and-tagging-edea78b20478?source=collection_archive---------0-----------------------#2020-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5a2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本周的帖子中，我们将讨论更改管道运行的命名，以提供更多信息，以及在管道运行时标记我们的来源。这篇文章将使用一个在过去几周的文章中构建的示例Azure DevOps项目。如果你想知道这个项目进展如何，可以看看下面的帖子。</p><p id="ba9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://elanderson.net/2020/02/getting-started-with-azure-devops/" rel="noopener ugc nofollow" target="_blank">Azure devo PS入门</a><br/><a class="ae kl" href="https://elanderson.net/2020/03/pipeline-creation-in-azure-devops/" rel="noopener ugc nofollow" target="_blank">Azure devo PS中的管道创建</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/03/azure-devops-publish-asp-net-core/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps为ASP.NET核心发布工件</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/03/azure-devops-pipelines-multiple-jobs-in-yaml/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps管道:YAML的多个作业</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/03/azure-devops-pipelines-reuseable-yaml/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps管道:可重用的YAML </a> <br/> <a class="ae kl" href="https://elanderson.net/2020/04/azure-devops-pipelines-use-yaml-across-repos/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps管道:跨Repos使用YAML</a><br/><a class="ae kl" href="https://elanderson.net/2020/04/azure-devops-pipelines-conditionals-in-yaml/" rel="noopener ugc nofollow" target="_blank">Azure devo PS管道:YAML的条件</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/a1a0f1fc645a1a05c5c24e0fbed1ded9.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*EBCw6fLJA5-spZqT.png"/></div></figure><h2 id="8320" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">命名</h2><p id="1d48" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">默认情况下，管道运行使用当前日期命名，并带有一个数字来表示管道在一天中运行的次数。例如，2020年3月17日的第四次构建将以名称<strong class="jp ir"> 20200317.4 </strong>加上最后一次提交的描述开始。如果您需要，您可以通过在您的YAML中使用一个<strong class="jp ir"> name </strong>元素来更改这个命名方案。和其他与YAML相关的东西一样，你拥有和管道中的其他东西一样的信息，可以用来构建任何可能对你的情况有帮助的名字。对于我们的例子，我们将通过在我们的YAML文件的顶部添加下面的<strong class="jp ir"> name </strong>元素，将分支名称添加到运行日期和计数的前面。</p><pre class="kn ko kp kq gt ls lt lu lv aw lw bi"><span id="d972" class="ku kv iq lt b gy lx ly l lz ma">name: $(SourceBranchName)_$(date:yyyyMMdd)$(rev:.r)<br/><br/>resources:      <br/>  repositories: <br/>  - repository: Shared<br/>    name: Playground/Shared<br/>    type: git <br/>    ref: master #branch name<br/><br/>trigger: none</span></pre><p id="6eb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以上将导致<strong class="jp ir"> master_20200317.4 </strong>使用与上述相同的示例。下面的屏幕截图显示了示例管道中这一变化的实际结果。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/3452bde004d0d45d0775438bd16f756d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lk_Syv4OSSJHATcl.png"/></div></div></figure><h2 id="aebb" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">磨尖</h2><p id="1faa" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">在运行管道时标记源代码有助于准确了解管道运行时包含的内容。在这里，我们将使用Azure DevOps来自动标记成功的构建。在管道中，您想要标记单击<strong class="jp ir">编辑</strong>按钮，就像您要编辑管道的YAML一样。然后点击<strong class="jp ir">三个点</strong>，选择<strong class="jp ir">触发</strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mg"><img src="../Images/872f9384d0d6e69871be641ce4dea9b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wTCEMsxxR_pO0tj8.png"/></div></div></figure><p id="284a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在点击<strong class="jp ir"> YAML </strong>选项卡，然后<strong class="jp ir">获取源代码</strong>，在标记源代码下，我们将选择成功时的<strong class="jp ir"/>，这样标记将仅在构建成功完成时发生。另外，请注意<strong class="jp ir">标签</strong> <strong class="jp ir">格式</strong>，它允许您更改标签的命名方式。完成后，确保<strong class="jp ir">保存</strong>您的更改。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mh"><img src="../Images/1b82a0a49d96cfc10f0c2ab867604b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*admS2xUGFlvQFSk5.png"/></div></div></figure><p id="0255" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在运行了包含上述变更的构建之后，转到项目的<strong class="jp ir"> Repos </strong>区域。从<strong class="jp ir">文件</strong>中点击<strong class="jp ir">历史</strong>，从那里你可以看到包含在构建中的最后一次提交的标签，这里显示为<strong class="jp ir"> master_20200325.1 </strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mi"><img src="../Images/b4235a5796c6a8b46b8b65949383c35f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RDQMEP3RtrZrwRFb.png"/></div></div></figure><h2 id="02e8" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">包扎</h2><p id="e0c4" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">为你的构建使用清晰的命名可以让你一目了然的得到很多信息，但是要确保你包含的信息是有用的确实需要一些思考。当查看历史以了解什么发布了什么版本时，标记也是非常有用的，当然，它们也可以用于分支。下周回来看看当Azure DevOps自动标记由于任何原因无法工作时如何手动标记。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="a6f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mq">原载于</em> <a class="ae kl" href="https://elanderson.net/2020/04/azure-devops-pipelines-naming-and-tagging/" rel="noopener ugc nofollow" target="_blank"> <em class="mq">埃里克·安德森</em> </a> <em class="mq">。</em></p></div></div>    
</body>
</html>