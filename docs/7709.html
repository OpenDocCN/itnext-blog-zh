<html>
<head>
<title>7 Bad Code Smells In Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">7 Typescript中的不良代码味道</h1>
<blockquote>原文：<a href="https://itnext.io/7-bad-code-smells-in-typescript-e1cb397723c6?source=collection_archive---------0-----------------------#2022-12-29">https://itnext.io/7-bad-code-smells-in-typescript-e1cb397723c6?source=collection_archive---------0-----------------------#2022-12-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e342" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让你的代码更加可重用、可读和可重构</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/329ca28dfb242c8161bdefd43ba610cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WI0ghqO3dds8Jh3Y0HIr8g.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">肖恩·托马斯在<a class="ae ky" href="https://unsplash.com/photos/44RX_wJlmE8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="329f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名软件工程师，你可能听说过或经历过代码味道的概念。代码气味是程序源代码的任何特征，可以指出更深层次的问题。</p><p id="af21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单地说，代码气味通常不是bug，它们不是技术上不正确的。但是它们指出了设计中的弱点，这些弱点可能会减慢开发速度或增加错误的风险。我们的目标是编写可读、可重用和可重构的软件。</p><p id="0b63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将讨论Typescript中的7种糟糕的代码味道。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="c490" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">1.使用可搜索的名称</h2><p id="c77f" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们读的代码总是比写的多。重要的是，我们编写的代码是可读和可搜索的。</p><p id="7101" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="c664" class="nf md it nb b be ng nh l ni nj">// What is 36000000 for?<br/>setTimeout(restart, 36000000);</span></pre><p id="fa77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="3fca" class="nf md it nb b be ng nh l ni nj">// Declare them as capitalized named constants.<br/>const MILLISECONDS_PER_HOUR = 60 * 60 * 1000; // 36000000<br/><br/>setTimeout(restart, MILLISECONDS_PER_HOUR);</span></pre><h2 id="0c41" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">2.不要添加不必要的上下文</h2><p id="6680" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果你的类/类型/对象名告诉你一些事情，不要在你的变量名中重复。</p><p id="6340" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="cffd" class="nf md it nb b be ng nh l ni nj">type User = {<br/>  userName: string;<br/>  userLastName: string;<br/>  userAge: number;<br/>}<br/><br/>function print(user: User): void {<br/>  console.log(`${user.userName} ${user.userLastName} (${user.userAge})`);<br/>}</span></pre><p id="b18d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="70f9" class="nf md it nb b be ng nh l ni nj">type User = {<br/>  name: string;<br/>  lastName: string;<br/>  age: number;<br/>}<br/><br/>function print(user: User): void {<br/>  console.log(`${user.name} ${user.lastName} (${user.age})`);<br/>}</span></pre><h2 id="4a67" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">3.函数参数(理想情况下为2个或更少)</h2><p id="eb67" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果我们的函数有两个以上的参数，那么它们做得太多了。一个或两个论点是理想的，容易测试，如果可能的话，应该避免三个。</p><p id="3dcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="dfe6" class="nf md it nb b be ng nh l ni nj">type UserStatus = 'online' | 'offline';<br/>function createUser(name: string, lastName: string, age: number, status: UserStatus) {<br/>  // ...<br/>}<br/><br/>createUser('Gapur', 'Kassym', 29, 'online');</span></pre><p id="e434" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="a243" class="nf md it nb b be ng nh l ni nj">type UserStatus = 'online' | 'offline';<br/>type User = { name: string, lastName: string, age: number, status: UserStatus };<br/><br/>function createUser(user: User) {<br/>  // ...<br/>}<br/><br/>createUser({<br/>  name: 'Gapur',<br/>  lastName: 'Kassym',<br/>  age: 29,<br/>  status: 'online'<br/>});</span></pre><h2 id="e15d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">4.！某物和功能()</h2><p id="3f0a" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是(ab)使用短路评估。但是很难调试，并且在许多情况下很难找到实际上是什么在起作用:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="b279" class="nf md it nb b be ng nh l ni nj">myVariable &amp;&amp; myFunction();</span></pre><p id="f949" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这相当于:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="40ed" class="nf md it nb b be ng nh l ni nj">if (myVariable) {<br/>    myFunction()<br/>}</span></pre><p id="37ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="91b5" class="nf md it nb b be ng nh l ni nj">const userAge = 19;<br/>const ageLimit = 18;<br/><br/>userAge &gt;= ageLimit &amp;&amp; voteForPresident();</span></pre><p id="d6ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="cae0" class="nf md it nb b be ng nh l ni nj">const userAge = 19;<br/>const ageLimit = 18;<br/><br/>if (userAge &gt;= ageLimit) {<br/>  voteForPresident();<br/>}</span></pre><h2 id="3949" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">5.使用Object.assign或spread运算符设置默认对象</h2><p id="77c7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="46a9" class="nf md it nb b be ng nh l ni nj">type User = {<br/>  name: string | undefined,<br/>  lastName: string | undefined,<br/>  age: number | undefined,<br/>};<br/><br/>function createUser(user: User) {<br/>  user.name = user.name || 'User';<br/>  user.lastName = user.lastName || '';<br/>  user.age = user.age || 18;<br/>  // ...<br/>}<br/><br/>createUser({ name: 'Gapur' });</span></pre><p id="194b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="f8d6" class="nf md it nb b be ng nh l ni nj">type User = {<br/>  name: string | undefined,<br/>  lastName: string | undefined,<br/>  age: number | undefined,<br/>};<br/><br/>function createUser(user: User) {<br/>  const userWithDefaultValues = {<br/>    name: 'User',<br/>    lastName: '',<br/>    age: 18,<br/>    ...user,<br/>  };<br/>  // ...<br/>}<br/><br/>createUser({ name: 'Gapur' });</span></pre><h2 id="10f9" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">6.避免副作用</h2><p id="2a8c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">重点是避免常见的错误，比如在没有任何结构的对象之间共享状态，使用任何人都可以编写的可变数据类型。</p><p id="2a90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="9ca8" class="nf md it nb b be ng nh l ni nj">// Global variable referenced by following function.<br/>let name = 'Robert C. Martin';<br/><br/>function toBase64() {<br/>  name = btoa(name);<br/>}<br/><br/>toBase64();<br/>// If we had another function that used this name, now it'd be a Base64 value<br/><br/>console.log(name); // expected to print 'Robert C. Martin' but instead 'Um9iZXJ0IEMuIE1hcnRpbg=='</span></pre><p id="0abc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="7ad3" class="nf md it nb b be ng nh l ni nj">const name = 'Robert C. Martin';<br/><br/>function toBase64(text: string): string {<br/>  return btoa(text);<br/>}<br/><br/>const encodedName = toBase64(name);<br/>console.log(name);</span></pre><h2 id="5a20" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">7.避免消极条件句</h2><p id="c35d" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">不良做法:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="8ada" class="nf md it nb b be ng nh l ni nj">type UserStatus = 'online' | 'offline';<br/><br/>function isUserNotOnline(status: UserStatus): boolean {<br/>  // ...<br/>}<br/><br/>if (isUserNotOnline(status)) {<br/>  // ...<br/>}</span></pre><p id="3227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请改为这样做:</p><pre class="kj kk kl km gt na nb nc bn nd ne bi"><span id="bfe3" class="nf md it nb b be ng nh l ni nj">type UserStatus = 'online' | 'offline';<br/><br/>function isUserOnline(status: UserStatus): boolean {<br/>  // ...<br/>}<br/><br/>if (!isUserOnline(status)) {<br/>  // ...<br/>}</span></pre><h1 id="14e9" class="nk md it bd me nl nm nn mh no np nq mk jz nr ka mn kc ns kd mq kf nt kg mt nu bi translated">结论</h1><p id="741b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">感谢阅读，希望这篇文章对你有用。编码快乐！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f1e3" class="nk md it bd me nl nv nn mh no nw nq mk jz nx ka mn kc ny kd mq kf nz kg mt nu bi translated">资源</h1><div class="oa ob gp gr oc od"><a href="https://startup-cto.net/10-bad-typescript-habits-to-break-this-year/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">今年要改掉的10个打字坏习惯</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">TypeScript和JavaScript在过去几年中稳步发展，我们在过去几年中养成的一些习惯…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">startup-cto.net</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://javascript.plainenglish.io/clean-code-in-typescript-a183d43f3bf0" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">清除类型脚本中的代码</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">介绍</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="om l"><div class="os l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://github.com/labs42io/clean-code-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">GitHub-labs 42 io/Clean-Code-typescript:适用于TypeScript的干净代码概念</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">适用于TypeScript的干净代码概念。灵感来自干净代码javascript。软件工程原理，来自…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">github.com</p></div></div><div class="om l"><div class="ot l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>