<html>
<head>
<title>Weird Things I Encountered In My Development Journey Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在开发过程中遇到的奇怪事情解释如下</h1>
<blockquote>原文：<a href="https://itnext.io/weird-things-i-encountered-in-my-development-journey-explained-545de8b5ac31?source=collection_archive---------5-----------------------#2021-05-06">https://itnext.io/weird-things-i-encountered-in-my-development-journey-explained-545de8b5ac31?source=collection_archive---------5-----------------------#2021-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d7b7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Ruby:几乎所有东西都是对象</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6e9a70662ef73c33657134aa7e64d1b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-07Yc95hbSyPRat_t_h9g.png"/></div></div></figure><p id="fea9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在了解Ruby的早期，我建议我的朋友读几本书来学习这门语言。我们只是浏览一下这本书，因为我们认为我们已经很擅长这门语言了，因为我们创建了我们的<a class="ae ln" href="https://shanshaji.medium.com/weird-things-i-encountered-in-my-development-journey-explained-210b1aae7cfc" rel="noopener"> <em class="lo">巧妙的杂货店销售应用程序，它也销售文具</em> </a> <em class="lo">。但是第一段深深震撼了我们——它让我们意识到，像所有的新手开发者一样，我们也有过不合理自信的时候。</em></p><blockquote class="lp lq lr"><p id="fca9" class="kr ks lo kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated"><a class="ae ln" href="https://ruby-doc.com/docs/ProgrammingRuby/html/intro.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">你操纵的一切都是对象，那些操纵的结果本身就是对象。</strong> </a></p></blockquote><p id="67c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是的，甚至是字符串和数字！嗯，这确实有道理，不然字符串怎么会有object_id方法呢？你操作的一切都是对象，即使它是整数、字符串、数组等等。因此，如果一切都是对象，而对象是类的实例，那么应该存在用方法定义的类。由于object_id同时存在于integer类和string类中，我们以为会有一个父类。我们可以用<code class="fe lv lw lx ly b">ancestors</code>方法来查找:</p><pre class="kg kh ki kj gt lz ly ma mb aw mc bi"><span id="585c" class="md me iq ly b gy mf mg l mh mi">1.object_id<br/>=&gt; 3<br/>1.class<br/>=&gt; Integer<br/>1.class.ancestors<br/>=&gt; [Integer, Numeric, Comparable, Object, PP::ObjectMixin, Kernel, BasicObject]</span><span id="e37d" class="md me iq ly b gy mj mg l mh mi">"Foo".class.ancestors<br/>=&gt; [String, Comparable, Object, PP::ObjectMixin, Kernel, BasicObject]</span></pre><p id="2fc6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">几乎所有的Ruby类都自动从Object类继承，这解释了为什么我们在几乎所有的东西中都有object_id方法。所有的Ruby对象都是与生俱来的能力，它们知道如何执行这些能力，因为它们是Ruby对象。</p><p id="1cb6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这本书的前几行给了我们很多启示。我们知道一切都是对象，我们向对象发送消息/调用对象上的方法。我们愉快地回到了随意浏览Ruby文本的状态。</p><p id="0764" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这时，我的朋友拦住了我，问我“那么数学运算符是如何工作的呢？”对此我回答道，“你说‘怎么做’是什么意思？”"</p><p id="0656" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">"好吧，如果一切都是一个对象，如果我们在一个对象上调用方法，<code class="fe lv lw lx ly b">a + b</code>是如何工作的？"嗯，这让我很惊讶，我从来没有想过。为了更好地了解这一点，我做的第一件事是通过调用整数实例上的<code class="fe lv lw lx ly b">methods</code>来检查整数可用的方法。</p><pre class="kg kh ki kj gt lz ly ma mb aw mc bi"><span id="e2c1" class="md me iq ly b gy mf mg l mh mi">2.methods # Returns an array of public and protected methods</span></pre><p id="b7f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe lv lw lx ly b">methods</code>返回了大量公共的和受保护的方法，包括<code class="fe lv lw lx ly b">+</code>方法，它帮助我们理解<code class="fe lv lw lx ly b">a + b</code>是解析器魔术，它粗略地将其转换为<code class="fe lv lw lx ly b">a.+ b</code></p><pre class="kg kh ki kj gt lz ly ma mb aw mc bi"><span id="58b1" class="md me iq ly b gy mf mg l mh mi">1 + 2<br/>=&gt; 3<br/>1.+(2)<br/>=&gt; 3</span></pre><p id="8ae6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以为了在幕后证明<code class="fe lv lw lx ly b">a + b</code>调用<code class="fe lv lw lx ly b">a.+(b)</code>，我决定开放Integer类并改变<code class="fe lv lw lx ly b">+</code>方法以返回减去的值而不是增加的值。</p><ul class=""><li id="132b" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated"><em class="lo">由于某种原因，这段代码在irb中不工作，但在pry中工作正常。</em></li></ul><pre class="kg kh ki kj gt lz ly ma mb aw mc bi"><span id="2773" class="md me iq ly b gy mf mg l mh mi">class Integer<br/>  def +(num)<br/>    self - num   # self is the integer on which + method is called<br/>  end<br/>end<br/>=&gt; :+<br/>2 + 3<br/>=&gt; -1</span></pre><p id="dd9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">简而言之，“你在Ruby中处理的所有东西要么是一个对象，要么是一个计算结果为对象的构造，每个对象都是某个类的一个实例。”明白吗？</p></div></div>    
</body>
</html>