<html>
<head>
<title>Stateful API Fuzzing using RESTler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用RESTler的有状态API模糊化</h1>
<blockquote>原文：<a href="https://itnext.io/stateful-api-fuzzing-using-restler-6f42344f29df?source=collection_archive---------0-----------------------#2021-07-08">https://itnext.io/stateful-api-fuzzing-using-restler-6f42344f29df?source=collection_archive---------0-----------------------#2021-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0b8b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">微软的开源工具包</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e470056bbbec7f2d2f49636b96a72b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQBorusYXK8xXiMeeZNJRg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mattyzzy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马特·张</a>在<a class="ae ky" href="https://unsplash.com/s/photos/cyber-security?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="43e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近偶然发现了一篇来自<a class="ae ky" href="https://medium.com/pragmatic-programmers" rel="noopener">务实程序员</a>的文章<a class="ae ky" href="https://medium.com/pragmatic-programmers/the-goals-of-api-testing-6f3bf9bb8f0" rel="noopener">API测试的目标</a>，这篇文章深入讨论了测试REST APIs时需要考虑的各种目标。我想知道更多关于这个话题的信息，这让我看到了微软研究院最近发表的一篇关于API模糊测试的文章。</p><p id="9ee7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将解释这个概念，并尝试一个开源工具来模糊测试一些示例API。本文期望您对REST APIs有一个基本的了解。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ad99" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是起毛？</h1><p id="22ca" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">根据OWASP——</p><blockquote class="mz"><p id="c60e" class="na nb it bd nc nd ne nf ng nh ni lu dk translated"><em class="nj">模糊测试</em>或<em class="nj">模糊化</em>是一种黑盒软件测试技术，它基本上包括以自动方式使用畸形/半畸形数据注入来发现实现缺陷。</p></blockquote><p id="bb95" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">简单的模糊测试通过提供随机输入来监控应用程序的行为。起毛并不是一个非常新的技术，威斯康星大学的原始工作可以追溯到1988年。</p><p id="2a60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的二十年里，模糊化已经成为一种主流的测试技术，用来发现应用程序中的错误和安全问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="21f4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">起毛类型</h1><p id="6fca" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">微软研究描述了三种类型的模糊化—</p><ul class=""><li id="ed62" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">黑盒模糊化</li><li id="ac8a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">基于语法的模糊化</li><li id="bc5a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">白盒起毛</li></ul><p id="0273" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">黑盒</strong> fuzzing随机生成变异的输入，并根据这些输入测试接口，观察行为。</p><p id="0806" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu">基于语法的模糊化</strong>中，用户为测试中的应用提供输入语法。语法帮助用户激发他们的创造力，这有助于带来关于应用程序的更多见解。</p><p id="55c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">白盒模糊化从一个格式良好的输入开始，然后它动态地执行程序，并从执行过程中遇到的条件分支中找出约束。重复该过程，直到发现所有执行路径。</p><p id="359c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与其他两种相比，白盒模糊更加精确，因为它提供了更多的覆盖范围。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2868" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">为什么起毛？</h1><ul class=""><li id="b560" class="np nq it lb b lc mu lf mv li od lm oe lq of lu nu nv nw nx bi translated">Fuzzing帮助您找到手动和静态分析工具经常遗漏的漏洞。</li><li id="419a" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">如果您的程序需要来自不可信的应用程序或执行大型复杂数据解析的程序的数据，Fuzzing可以提供非常有价值的见解。</li></ul><p id="b947" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里阅读不同的模糊向量<a class="ae ky" href="https://owasp.org/www-project-web-security-testing-guide/v41/6-Appendix/C-Fuzz_Vectors" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="fd7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">OWASP ZAP等工具支持模糊化各种界面，如UI、命令行界面等。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4ae6" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">API模糊化</h1><p id="483c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，大多数应用程序使用REST APIs提供接口。在微服务的世界里，不同的服务通过API相互对话。因此，毫无疑问，API是现代应用程序的重要组成部分。</p><p id="aa82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您构建API时，每个API都要执行特定的任务。因此，以一种<strong class="lb iu">有状态</strong>的方式对API进行模糊测试以获得更好的结果是非常必要的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fc8e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">雷斯勒</h1><p id="5dc8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RESTler是第一个有状态REST API fuzzing工具,用于通过REST API自动测试云服务，并发现这些服务中的安全性和可靠性缺陷。</p><p id="e9be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RESTler接受开放API规范作为输入，分析规范，生成并执行测试。RESTler动态地从以前的响应中学习，帮助它探索更多的路径，并潜在地发现更多的bug。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="35fa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">REST APIs示例</h1><p id="ff9f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">要试用RESTler，您需要一组API。这里我将使用著名的<a class="ae ky" href="https://github.com/swagger-api/swagger-petstore" rel="noopener ugc nofollow" target="_blank">pet store</a>API项目。</p><p id="fb5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我克隆了回购并执行</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="d9c8" class="om md it oi b gy on oo l op oq">git clone <a class="ae ky" href="https://github.com/swagger-api/swagger-petstore" rel="noopener ugc nofollow" target="_blank">https://github.com/swagger-api/swagger-petstore</a></span><span id="ac99" class="om md it oi b gy or oo l op oq">cd swagger-petstore</span><span id="8969" class="om md it oi b gy or oo l op oq">mvn package jetty:run</span></pre><p id="f54a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切正常，您应该能够看到Petstore Swagger UI。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/d3e4c75b453fc945221d9ce418946d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1EObPTa42NlQOcr7Ok1bQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="19cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">安装RESTler</h1><p id="71b3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RESTler到目前为止还没有提供二进制安装。因此，您需要克隆repo并在本地构建它。</p><p id="550b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RESTler的先决条件—</p><ul class=""><li id="3c80" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">Python 3.8.2</li><li id="3cab" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">。Net 5.0</li></ul><p id="51c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，您需要创建一个目录</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="ae5c" class="om md it oi b gy on oo l op oq">mkdir restler_bin</span><span id="8678" class="om md it oi b gy or oo l op oq">git clone <a class="ae ky" href="https://github.com/microsoft/restler-fuzzer.git" rel="noopener ugc nofollow" target="_blank">https://github.com/microsoft/restler-fuzzer.git</a></span><span id="ec55" class="om md it oi b gy or oo l op oq">python3 ./build-restler.py --dest_dir &lt;Full Path for restler_bin dir&gt;</span></pre><p id="5fda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一切顺利，您的RESTler二进制文件应该可以使用了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0bc2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">开始运转</h1><p id="77b8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">接下来，我运行一个快速入门程序来模糊Petstore APIs。为此，你需要—</p><ul class=""><li id="8f76" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><a class="ae ky" href="http://localhost:8080/api/v3/openapi.json" rel="noopener ugc nofollow" target="_blank">打开API规范</a>下载并保存。(假设您已经在运行Petstore应用程序)</li><li id="14e0" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">更新openapi.json文件以指向正确的URL—<em class="og">" servers ":[{ " URL ":" http://localhost:8080/API/v3 " }]</em></li></ul><p id="914b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你需要运行快速启动程序—</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="6359" class="om md it oi b gy on oo l op oq">cd &lt;Path to restler-fuzzer dir&gt;</span><span id="9d40" class="om md it oi b gy or oo l op oq">python3 restler-quick-start.py --api_spec_path &lt;Full path to openapi.yml&gt;  --restler_drop_dir &lt;Full path to restler_bin dir&gt;</span></pre><p id="141c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在执行结束时，您应该会看到如下所示的结果—</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/270f0b89f888c95d11acab924ec654a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hh9nA7Mctz_cW0r2PzQDeg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">RESTler执行</figcaption></figure><p id="51d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里RESTler针对API执行了fuzzing，没有发现任何错误。</p><p id="9eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以在<code class="fe ou ov ow oi b">restler_working_dir</code>目录下查看完整的日志。</p><p id="e209" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终的统计数据如下所示</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/e36212f0272b8704e75bfe6b795b669a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g84ENBEK8m7fhK2HGfTdOg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">最终统计</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3184" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在演示服务器上运行RESTLer</h1><p id="b74b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">RESTler repo提供了一个托管API的演示服务，如下所示</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/ef72321065d7140d8181b86dbfc2759e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZ8apBPUn_fgWplRCeFcIw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">演示服务器—我的博客API</figcaption></figure><p id="53dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以按照<a class="ae ky" href="https://github.com/microsoft/restler-fuzzer/blob/main/demo_server/README.md" rel="noopener ugc nofollow" target="_blank">这一页</a>上给出的说明让演示服务器启动&amp;运行。</p><p id="8e65" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我在演示服务器开放API规范上运行了快速入门程序—</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="d77b" class="om md it oi b gy on oo l op oq">python3 restler-quick-start.py --api_spec_path /Users/tanmaydeshpande/work/restler/restler-fuzzer/demo_server/swagger.json  --restler_drop_dir /Users/tanmaydeshpande/work/restler/restler_bin --ip 0.0.0.0 --port 8888</span></pre><p id="4eb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下所示—</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/a2d9a52e17a98864afb685173e80a5d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHexi7pCMlpfKBnY5VwuyA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">运行在演示服务器上的RESTlet</figcaption></figure><p id="0c26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您可以看到请求覆盖率为5/6。</p><p id="e898" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在位于</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="955a" class="om md it oi b gy on oo l op oq">restler_working_dir/Test/RestlerResults/experiment&lt;&gt;/logs</span></pre><p id="dbe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以看看最终的统计数据</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/d5cff71f49d50224cc162098a4b285e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcKdWZ2_7H0v9lcvljVwdA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">最终统计</figcaption></figure><p id="ef51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以浏览<code class="fe ou ov ow oi b">network.testing.*</code>文件，了解发送的确切请求和收到的响应，如下所示——</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/a060af643c4e293c5c6e183273a83895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-6u32sYjJjgWEYx6g5HtEg.png"/></div></div></figure><p id="f3dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，测试执行是使用选项<code class="fe ou ov ow oi b">fuzzlean</code>运行的。接下来，您需要运行一些积极的测试</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="aad5" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">真正的警察</h1><p id="60c6" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在之前的运行中，我们使用了快速启动脚本来运行精益模糊化。现在，让我们运行完整的fuzzing。</p><p id="b2b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="og">警告</em> </strong> <em class="og"> —请记住，这种类型的模糊处理会导致服务器停机，因此不应该在生产服务器上运行。</em></p><p id="2f01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，您需要编译OpenAPI规范。这里我使用了来自Petstore应用程序的OpenAPI规范。</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="8e1c" class="om md it oi b gy on oo l op oq">dotnet /Users/tanmaydeshpande/work/restler/restler_bin/restler/Restler.dll compile --api_spec /Users/tanmaydeshpande/work/restler/openapi.json</span></pre><p id="853c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将生成<code class="fe ou ov ow oi b">Compile</code>目录，其中包含语法、配置、引擎等文件。</p><p id="468e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，你运行模糊测试—</p><pre class="kj kk kl km gt oh oi oj ok aw ol bi"><span id="f0bb" class="om md it oi b gy on oo l op oq">dotnet /Users/tanmaydeshpande/work/restler/restler_bin/restler/Restler.dll fuzz --grammar_file /Users/tanmaydeshpande/work/restler/Compile/grammar.py --dictionary_file /Users/tanmaydeshpande/work/restler/Compile/dict.json --settings /Users/tanmaydeshpande/work/restler/Compile/engine_settings.json --no_ssl --time_budget .1</span></pre><p id="8927" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我运行了0.1小时的模糊测试，即大约6分钟。</p><p id="f395" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦执行完成，你可以看到结果—</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/364f35218da3725ce8005db6ee028332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lqfTVJLamcODchT6jIgFAw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">模糊结果</figcaption></figure><p id="b5da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您可以看到fuzzing发现了以下几类错误—</p><ul class=""><li id="5b38" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated">InvalidDynamicObjectChecker _ 20x:2</li><li id="784e" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">PayloadBodyChecker_500: 54</li><li id="ce84" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated">main_driver_500: 12</li></ul><p id="a67d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以查看日志目录来了解这些错误并修复它们。绒毛越长越好，因为它可以产生更好的效果。</p><p id="9812" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过查看<a class="ae ky" href="https://github.com/microsoft/restler-fuzzer/tree/main/docs/user-guide" rel="noopener ugc nofollow" target="_blank">用户指南</a>来尝试各种功能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="02f4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="139c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如您在这里看到的，RESTler可以非常强大地检测到通过常规测试技术很容易发现的错误。微软SDLC流程建议对所有产品的每个不可信接口进行模糊处理。所以试试吧！</p><p id="02dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">快乐起毛！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="688b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">参考</h1><ul class=""><li id="004d" class="np nq it lb b lc mu lf mv li od lm oe lq of lu nu nv nw nx bi translated"><a class="ae ky" href="https://owasp.org/www-community/Fuzzing" rel="noopener ugc nofollow" target="_blank">https://owasp.org/www-community/Fuzzing</a></li><li id="b340" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://patricegodefroid.github.io/public_psfiles/cacm2012.pdf" rel="noopener ugc nofollow" target="_blank">https://patricegodefroid . github . io/public _ PS files/cacm 2012 . pdf</a></li><li id="d1fe" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.microsoft.com/en-us/research/publication/restler-stateful-rest-api-fuzzing/" rel="noopener ugc nofollow" target="_blank">https://www . Microsoft . com/en-us/research/publication/restler-stateful-rest-API-fuzzing/</a></li><li id="26c8" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.zaproxy.org/docs/desktop/addons/fuzzer/" rel="noopener ugc nofollow" target="_blank">https://www.zaproxy.org/docs/desktop/addons/fuzzer/</a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/83023a176e5a381c7e7619e109da9ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/0*Tsg9YCwqqI-4WbR0.png"/></div></figure><h1 id="591f" class="mc md it bd me mf pd mh mi mj pe ml mm jz pf ka mo kc pg kd mq kf ph kg ms mt bi translated">嘿，如果你喜欢这个故事，看看<a class="ae ky" href="https://deshpandetanmay.medium.com/membership" rel="noopener">中级会员</a>！只要5美元/月！</h1><p id="dc47" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><em class="og">你的会员费直接支持我和你阅读的其他作家。你也可以在媒体上看到所有的故事。</em></p><h1 id="5943" class="mc md it bd me mf pd mh mi mj pe ml mm jz pf ka mo kc pg kd mq kf ph kg ms mt bi translated"><a class="ae ky" href="https://deshpandetanmay.medium.com/membership" rel="noopener">现在就成为中等会员吧！</a></h1></div></div>    
</body>
</html>