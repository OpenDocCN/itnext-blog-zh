<html>
<head>
<title>ASP.NET Core: Identity Scaffolding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ASP.NET核心:身份脚手架</h1>
<blockquote>原文：<a href="https://itnext.io/asp-net-core-identity-scaffolding-953b18a7777e?source=collection_archive---------6-----------------------#2019-04-07">https://itnext.io/asp-net-core-identity-scaffolding-953b18a7777e?source=collection_archive---------6-----------------------#2019-04-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="22ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我相信我们都已经开始了一个新的web项目，然后需要在以后添加身份验证。这篇文章将介绍使用Visual Studio中的身份搭建特性的过程。</p><h1 id="26c9" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">样品</h1><p id="7971" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">对于这个例子，我从使用以下命令创建的新web应用程序开始。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="b9d0" class="lx km iq lt b gy ly lz l ma mb">dotnet new webapp</span></pre><p id="c044" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你有任何。NET Core 3 previews installed我建议在运行应用程序创建之前，在要创建应用程序的目录中添加一个<strong class="jp ir"> global.json </strong>文件。我在当前的预览版中遇到了一些脚手架的问题。以下是我的<strong class="jp ir"> global.json </strong>的内容为例。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="06b9" class="lx km iq lt b gy ly lz l ma mb">{ "sdk": { "version": "2.2.104" } }</span></pre><h1 id="5fd4" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">脚手架</h1><p id="cd17" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在Visual Studio中右键单击该项目并选择<strong class="jp ir">添加&gt;新的脚手架项目</strong>。</p><figure class="lo lp lq lr gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mc"><img src="../Images/feccb7443a19189da997085b7173687a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pKXmnhWplbNu-vdw.png"/></div></div></figure><p id="ee86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在左侧列表的<strong class="jp ir">添加脚手架</strong>对话框中，选择我们想要的<strong class="jp ir">标识</strong>项的中间区域的<strong class="jp ir">标识</strong>，然后点击<strong class="jp ir">添加</strong>按钮。</p><figure class="lo lp lq lr gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mk"><img src="../Images/b3eda2c0d87d78a064cce4ba92201934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uMAVv8AzuynWkRNb.png"/></div></div></figure><p id="dc87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，在<strong class="jp ir"> Add Identity </strong>对话框中，您可以选择想要覆盖所提供身份的哪些部分。我将对所有值采用默认值。一个例外是<strong class="jp ir">数据上下文类</strong>，我使用字段右侧的加号按钮添加一个新的，因为这个项目目前没有任何数据访问。完成后，点击<strong class="jp ir">添加</strong>按钮。</p><figure class="lo lp lq lr gt md gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/6704b3faeb38f30b46a8cd7397f9e8cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/0*j_I3HweFMdUiLlg6.png"/></div></figure><p id="810a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大约一分钟后，身份生成将完成，一个文本文件也将完成，并有一些后续步骤。由于项目类型的原因，我们开始时唯一需要做的事情就是实体框架迁移。以下是文件中的说明，该文件将使用支持ASP.NET核心的身份所需的新数据来创建/更新您的数据库。</p><blockquote class="mm mn mo"><p id="8af7" class="jn jo mp jp b jq jr js jt ju jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj kk ij bi translated"><em class="iq">生成的数据库代码需要实体框架核心迁移。运行以下命令:</em></p><p id="4788" class="jn jo mp jp b jq jr js jt ju jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj kk ij bi translated"><em class="iq"> 1。dotnet ef迁移添加CreateIdentitySchema <br/> 2。dotnet ef数据库更新</em></p><p id="dd9f" class="jn jo mp jp b jq jr js jt ju jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj kk ij bi translated">或者从Visual Studio包管理器控制台:<br/> 1。添加-迁移CreateIdentitySchema <br/> 2。更新-数据库</p></blockquote><p id="f92e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<strong class="jp ir"> Pages/Shared </strong>目录中，打开<strong class="jp ir"> _Layout.cshtml </strong>文件，将以下内容添加到您想要显示注册和登录链接的位置。我在现有的导航链接之后添加了这个。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="4b76" class="lx km iq lt b gy ly lz l ma mb">&lt;partial name="_LoginPartial"/&gt;</span></pre><h1 id="20d1" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">包扎</h1><p id="13dc" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">这是一个非常容易处理的功能，可以很容易地为现有项目添加标识。您仍然会错过从一开始就创建带有标识的项目所带来的一些好处，比如显示带有用户名的欢迎消息，但是如果您需要的话，可以添加这些内容。</p><p id="4ad6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于这个主题的官方文件涵盖了比这篇文章更多的场景。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="1175" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mp">原载于2019年4月7日</em><a class="ae mt" href="https://elanderson.net/2019/04/asp-net-core-identity-scaffolding/" rel="noopener ugc nofollow" target="_blank"><em class="mp">【elanderson.net</em></a><em class="mp">。</em></p></div></div>    
</body>
</html>