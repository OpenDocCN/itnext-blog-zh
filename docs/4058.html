<html>
<head>
<title>Currency Picker And Formatter With Ionic React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有离子反应的货币拾取器和格式化器</h1>
<blockquote>原文：<a href="https://itnext.io/currency-picker-and-formatter-with-ionic-react-ede8e2ff53df?source=collection_archive---------3-----------------------#2020-04-18">https://itnext.io/currency-picker-and-formatter-with-ionic-react-ede8e2ff53df?source=collection_archive---------3-----------------------#2020-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4fa0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为用Ionic和React开发的应用程序构建一个货币选择器和格式化程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bf8da822a62a08ca9c9b55996134f599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vNyq4W-5NQoeX5jo8TqBQw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/free?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@pawelj?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Pawel Janiak </a>拍摄</figcaption></figure><p id="4ce6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我每天分享<a class="ae ky" href="https://medium.com/@david.dalbusco/one-trick-a-day-d-34-469a0336a07e" rel="noopener">一招</a>直到原定的瑞士新冠肺炎隔离期结束的日期，2020年4月19日。离第一个里程碑还有一天。希望更好的日子就在前面。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a6e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在为今天的博客帖子寻找一个主题想法，我想到也许我可以分享我从<a class="ae ky" href="https://tietracker.app.link/" rel="noopener ugc nofollow" target="_blank">领带追踪器</a>中学到的一些东西⏱️，一个简单的，开源的，免费的时间追踪应用程序，我用<a class="ae ky" href="https://ionicframework.com/" rel="noopener ugc nofollow" target="_blank"> Ionic </a>和<a class="ae ky" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>开发的。</p><p id="86f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是为什么我与你分享我的解决方案，开发一个自定义的货币选择器和格式化程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/1d7da29d057099e7e0c3129f1cc5eedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*YCPfr5rf-N4Tk9l9JusTXA.gif"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="95b3" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">开始</h1><p id="cb30" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果您还没有Ionic React应用程序，您可以按照本教程使用他们的CLI创建一个示例应用程序。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="0f89" class="nf me it nb b gy ng nh l ni nj">ionic start</span></pre><p id="5008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出现提示时，选择“React”，您的应用程序名称，例如模板“blank”。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5eb8" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">货币列表</h1><p id="b6ea" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们打算开发一个自定义的货币选择器，这就是为什么我们需要一个货币列表。为此，我们可以下载<a class="ae ky" href="https://github.com/xsolla/currency-format" rel="noopener ugc nofollow" target="_blank"> Xsolla </a> repo上提供的一个，因为它是免费的，并根据MIT许可证进行许可。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ba35" class="nf me it nb b gy ng nh l ni nj">curl https://raw.githubusercontent.com/xsolla/currency-format/master/currency-format.json -o public/assets/currencies.json</span></pre><p id="50e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用<code class="fe nk nl nm nb b">curl</code>是因为我使用的是Macbook，但重要的是将货币列表保存在assets文件夹中，因为它必须随应用程序一起提供。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="809b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">类型脚本定义</h1><p id="9297" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们需要一个TypeScript定义来处理我们刚刚下载的列表。这就是为什么我们在<code class="fe nk nl nm nb b">./src/definitions/currency.d.ts</code>中创建以下接口。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="d8e9" class="nf me it nb b gy ng nh l ni nj">export interface Currency {<br/>    name: string;<br/>    fractionSize: number;<br/>    symbol: {<br/>        grapheme: string;<br/>        template: string;<br/>        rtl: boolean;<br/>    };<br/>    uniqSymbol: boolean;<br/>}<br/><br/>export interface Currencies {<br/>    [currency: string]: Currency;<br/>}</span></pre><p id="e084" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我不确定使用子文件夹<code class="fe nk nl nm nb b">definitions</code>是不是最好的做法，这只是我做的事情。我不认为这有多大关系，我只是喜欢把我的代码分成包。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e236" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">模态:货币选择器</h1><p id="cddf" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了开发我们的picker，我建议我们使用一个模型。它应该显示可用货币的列表(货币名称和缩写)，允许用户过滤这些，并最终让他/她选择一个。</p><p id="99ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建了一个新的组件<code class="fe nk nl nm nb b">./src/components/CurrenciesModal.tsx</code>,它接收当前所选货币的属性，以及一个关闭模型并传递用户选择的函数。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="d163" class="nf me it nb b gy ng nh l ni nj">interface Props {<br/>    closeAction: Function;<br/>    currency: string;<br/>}</span></pre><p id="ed70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它也包含两种状态。货币列表和一个过滤后的列表，当组件安装时，等于所有列表。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="6b02" class="nf me it nb b gy ng nh l ni nj">const [currencies, setCurrencies] = <br/>      useState&lt;Currencies | undefined&gt;(undefined);<br/>const [filteredCurrencies, setFilteredCurrencies] = <br/>      useState&lt;Currencies | undefined&gt;(undefined);</span></pre><p id="9442" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了初始化这些，我们使用了<code class="fe nk nl nm nb b">useEffect</code>钩子，并读取了之前下载的JSON数据。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="d334" class="nf me it nb b gy ng nh l ni nj">useEffect(() =&gt; {<br/>    initCurrencies();<br/>    // eslint-disable-next-line react-hooks/exhaustive-deps<br/>}, []);<br/><br/>useEffect(() =&gt; {<br/>    setFilteredCurrencies(currencies);<br/>}, [currencies]);<br/><br/>async function initCurrencies() {<br/>    try {<br/>        const res: Response = <br/>                   await fetch('./assets/currencies.json');<br/><br/>        if (!res) {<br/>            setCurrencies(undefined);<br/>            return;<br/>        }<br/><br/>        const currencies: Currencies = await res.json();<br/><br/>        setCurrencies(currencies);<br/>    } catch (err) {<br/>        setCurrencies(undefined);<br/>    }<br/>}</span></pre><p id="fdb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了继续过滤，我们实现了一个函数，它读取用户输入并调用另一个函数，该函数有效地将过滤器应用到我们作为状态对象维护的列表上。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="5786" class="nf me it nb b gy ng nh l ni nj">async function onFilter($event: CustomEvent&lt;KeyboardEvent&gt;) {<br/>    if (!$event) {<br/>        return;<br/>    }<br/><br/>    const input: string = ($event.target as InputTargetEvent).value;<br/><br/>    if (!input || input === undefined || input === '') {<br/>        setFilteredCurrencies(currencies);<br/>    } else {<br/>        const filtered: Currencies | undefined = <br/>                        await filterCurrencies(input);<br/>        setFilteredCurrencies(filtered);<br/>    }<br/>}</span></pre><p id="4a29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们实现了我们的模态图形用户界面，其中包含货币<code class="fe nk nl nm nb b">searchbar</code>和<code class="fe nk nl nm nb b">items</code>的<code class="fe nk nl nm nb b">list</code>。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="7245" class="nf me it nb b gy ng nh l ni nj">&lt;IonSearchbar debounce={500} placeholder="Filter"<br/>              onIonInput={($event: CustomEvent&lt;KeyboardEvent&gt;) =&gt; onFilter($event)}&gt;&lt;/IonSearchbar&gt;<br/><br/>&lt;IonList&gt;<br/>    &lt;IonRadioGroup value={props.currency}&gt;<br/>        {renderCurrencies()}<br/>    &lt;/IonRadioGroup&gt;<br/>&lt;/IonList&gt;</span></pre><p id="6d9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总的来说，我们的组件如下所示:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9162" class="nf me it nb b gy ng nh l ni nj">import React, {useEffect, useState} from 'react';<br/><br/>import {<br/>    IonList,<br/>    IonItem,<br/>    IonToolbar,<br/>    IonRadioGroup,<br/>    IonLabel,<br/>    IonRadio,<br/>    IonSearchbar,<br/>    IonContent,<br/>    IonTitle,<br/>    IonHeader, IonButtons, IonButton, IonIcon<br/>} from '@ionic/react';<br/><br/>import {close} from 'ionicons/icons';<br/><br/>import {Currencies} from '../definitions/currency';<br/><br/>interface Props {<br/>    closeAction: Function;<br/>    currency: string;<br/>}<br/><br/>interface InputTargetEvent extends EventTarget {<br/>    value: string;<br/>}<br/><br/>const CurrenciesModal: React.FC&lt;Props&gt; = (props: Props) =&gt; {<br/><br/>    const [currencies, setCurrencies] = <br/>          useState&lt;Currencies | undefined&gt;(undefined);<br/>    const [filteredCurrencies, setFilteredCurrencies] = <br/>          useState&lt;Currencies | undefined&gt;(undefined);<br/><br/>    useEffect(() =&gt; {<br/>        initCurrencies();<br/>        // eslint-disable-next-line react-hooks/exhaustive-deps<br/>    }, []);<br/><br/>    useEffect(() =&gt; {<br/>        setFilteredCurrencies(currencies);<br/>    }, [currencies]);<br/><br/>    async function initCurrencies() {<br/>        try {<br/>            const res: Response = <br/>                  await fetch('./assets/currencies.json');<br/><br/>            if (!res) {<br/>                setCurrencies(undefined);<br/>                return;<br/>            }<br/><br/>            const currencies: Currencies = await res.json();<br/><br/>            setCurrencies(currencies);<br/>        } catch (err) {<br/>            setCurrencies(undefined);<br/>        }<br/>    }<br/><br/>    async function onFilter($event: CustomEvent&lt;KeyboardEvent&gt;) {<br/>        if (!$event) {<br/>            return;<br/>        }<br/><br/>        const input: string = <br/>              ($event.target as InputTargetEvent).value;<br/><br/>        if (!input || input === undefined || input === '') {<br/>            setFilteredCurrencies(currencies);<br/>        } else {<br/>            const filtered: Currencies | undefined = <br/>                  await filterCurrencies(input);<br/>            setFilteredCurrencies(filtered);<br/>        }<br/>    }<br/><br/>    async function filterCurrencies(filter: string): <br/>                   Promise&lt;Currencies | undefined&gt; {<br/>        if (!currencies) {<br/>            return undefined;<br/>        }<br/><br/>        const results: Currencies = Object.keys(currencies)<br/>            .filter((key: string) =&gt; {<br/>                return ((key.toLowerCase().indexOf(filter.toLowerCase()) &gt; -1) ||<br/>                    (currencies[key].name &amp;&amp; currencies[key].name.toLowerCase().indexOf(filter.toLowerCase()) &gt; -1));<br/>            })<br/>            .reduce((obj: Currencies, key: string) =&gt; {<br/>                obj[key] = currencies[key];<br/>                return obj;<br/>            }, {});<br/><br/>        return results;<br/>    }<br/><br/>    return (<br/>        &lt;&gt;<br/>            &lt;IonHeader&gt;<br/>                &lt;IonToolbar color="primary"&gt;<br/>                    &lt;IonTitle&gt;Picker&lt;/IonTitle&gt;<br/>                    &lt;IonButtons slot="start"&gt;<br/>                        &lt;IonButton <br/>                          onClick={() =&gt; props.closeAction()}&gt;<br/>                          &lt;IonIcon icon={close} slot="icon-only"&gt; <br/>                          &lt;/IonIcon&gt;<br/>                        &lt;/IonButton&gt;<br/>                    &lt;/IonButtons&gt;<br/>                &lt;/IonToolbar&gt;<br/>            &lt;/IonHeader&gt;<br/><br/>            &lt;IonContent className="ion-padding"&gt;<br/>                &lt;IonSearchbar debounce={500} placeholder="Filter"<br/>                 onIonInput={($event: CustomEvent&lt;KeyboardEvent&gt;) =&gt; onFilter($event)}&gt;&lt;/IonSearchbar&gt;<br/><br/>                &lt;IonList&gt;<br/>                    &lt;IonRadioGroup value={props.currency}&gt;<br/>                        {renderCurrencies()}<br/>                    &lt;/IonRadioGroup&gt;<br/>                &lt;/IonList&gt;<br/>            &lt;/IonContent&gt;<br/>        &lt;/&gt;<br/>    );<br/><br/>    function renderCurrencies() {<br/>        if (!filteredCurrencies <br/>            || filteredCurrencies === undefined) {<br/>            return undefined;<br/>        }<br/><br/>        return Object.keys(filteredCurrencies)<br/>                     .map((key: string) =&gt; {<br/>            return &lt;IonItem key={`${key}`}<br/>                            onClick={() =&gt; props.closeAction(key)}&gt;<br/>                &lt;IonLabel&gt;{filteredCurrencies[key].name} ({key})<br/>                &lt;/IonLabel&gt;<br/>                &lt;IonRadio value={key}/&gt;<br/>            &lt;/IonItem&gt;<br/>        });<br/>    }<br/><br/>};<br/><br/>export default CurrenciesModal;</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a952" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">页面:主页</h1><p id="3319" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们的提货人准备好了，我们现在可以使用它。为此，我们将它集成到应用程序的主页面中，即<code class="fe nk nl nm nb b">home</code>页面。我们还添加了一个状态来显示当前选择的货币，我用<code class="fe nk nl nm nb b">CHF</code>初始化了它，因为它是瑞士的货币。</p><p id="cb5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们还实现了一个功能，根据用户使用上述模型选择的货币来更新货币。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9a52" class="nf me it nb b gy ng nh l ni nj">import React, {useState} from 'react';<br/>import {IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonModal, IonButton, IonLabel} from '@ionic/react';<br/><br/>import CurrenciesModal from '../components/CurrenciesModal';<br/><br/>const Home: React.FC = () =&gt; {<br/><br/>    const [currency, setCurrency] = useState&lt;string&gt;('CHF');<br/>    const [showModal, setShowModal] = useState&lt;boolean&gt;(false);<br/><br/>    function updateCurrency(currency?: string | undefined) {<br/>        setShowModal(false);<br/><br/>        if (!currency) {<br/>            return;<br/>        }<br/><br/>        setCurrency(currency);<br/>    }<br/><br/>    return (<br/>        &lt;IonPage&gt;<br/>            &lt;IonHeader&gt;<br/>                &lt;IonToolbar&gt;<br/>                    &lt;IonTitle&gt;Home&lt;/IonTitle&gt;<br/>                &lt;/IonToolbar&gt;<br/>            &lt;/IonHeader&gt;<br/>            &lt;IonContent&gt;<br/>                &lt;IonModal isOpen={showModal} <br/>                 onDidDismiss={() =&gt; setShowModal(false)}&gt;<br/>                    &lt;CurrenciesModal currency={currency}<br/>                                     closeAction={updateCurrency}&gt;<br/>                    &lt;/CurrenciesModal&gt;<br/>                &lt;/IonModal&gt;<br/><br/>                &lt;h1&gt;123.45 {currency}&lt;/h1&gt;<br/><br/>                &lt;IonButton onClick={() =&gt; setShowModal(true)}&gt;<br/>                    &lt;IonLabel&gt;Pick currency&lt;/IonLabel&gt;<br/>                &lt;/IonButton&gt;<br/>            &lt;/IonContent&gt;<br/>        &lt;/IonPage&gt;<br/>    );<br/>};<br/><br/>export default Home;</span></pre><p id="739f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您实现了上面的代码，现在您应该能够运行应用程序并选择货币。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/424ad31ba1ebc862d3d033a772678059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*l7-IXroNBIyWj11Ho1h9gA.gif"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c93f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">格式化货币</h1><p id="225c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">能够选择一种货币固然很好，但是能够使用它就更好了😉。</p><p id="f97f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了格式化我们的金额，我们将使用标准的内置对象<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat" rel="noopener ugc nofollow" target="_blank"> Intl。NumberFormat </a>现在很好地被任何浏览器支持。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="970f" class="nf me it nb b gy ng nh l ni nj">function formatCurrency(value: number): string {<br/>    if (currency === undefined) {<br/>        return new Intl.NumberFormat('fr').format(0);<br/>    }<br/><br/>    return new Intl.NumberFormat('fr', <br/>           { style: 'currency', currency: currency }).format(value);<br/>}</span></pre><p id="d9eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，在上面的函数中，我硬编码了法语，因为法语是我的母语。这可以替换为您选择的语言，或者如果您正在使用带有以下动态语言的<a class="ae ky" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="bc95" class="nf me it nb b gy ng nh l ni nj">import i18n from 'i18next';<br/><br/>function formatCurrency(value: number): string {<br/>    if (currency === undefined) {<br/>        return new Intl.NumberFormat(i18n.language).format(0);<br/>    }<br/><br/>    return new Intl.NumberFormat(i18n.language, <br/>           { style: 'currency', currency: currency }).format(value);<br/>}</span></pre><p id="1ae7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们用函数调用替换值<code class="fe nk nl nm nb b">123.45 {currency}</code>的静态显示。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="a3a8" class="nf me it nb b gy ng nh l ni nj">&lt;h1&gt;{formatCurrency(123.45)}&lt;/h1&gt;</span></pre><p id="b141" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，我们的主页现在应该包含以下代码:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="42af" class="nf me it nb b gy ng nh l ni nj">import React, {useState} from 'react';<br/>import {IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonModal, IonButton, IonLabel} from '@ionic/react';<br/><br/>import CurrenciesModal from '../components/CurrenciesModal';<br/><br/>const Home: React.FC = () =&gt; {<br/><br/>    const [currency, setCurrency] = useState&lt;string&gt;('CHF');<br/>    const [showModal, setShowModal] = useState&lt;boolean&gt;(false);<br/><br/>    function updateCurrency(currency?: string | undefined) {<br/>        setShowModal(false);<br/><br/>        if (!currency) {<br/>            return;<br/>        }<br/><br/>        setCurrency(currency);<br/>    }<br/><br/>    function formatCurrency(value: number): string {<br/>        if (currency === undefined) {<br/>            return new Intl.NumberFormat('fr').format(0);<br/>        }<br/><br/>        return new Intl.NumberFormat('fr', <br/>           { style: 'currency', currency: currency }).format(value);<br/>    }<br/><br/>    return (<br/>        &lt;IonPage&gt;<br/>            &lt;IonHeader&gt;<br/>                &lt;IonToolbar&gt;<br/>                    &lt;IonTitle&gt;Home&lt;/IonTitle&gt;<br/>                &lt;/IonToolbar&gt;<br/>            &lt;/IonHeader&gt;<br/>            &lt;IonContent&gt;<br/>                &lt;IonModal isOpen={showModal} <br/>                          onDidDismiss={() =&gt; setShowModal(false)}&gt;<br/>                    &lt;CurrenciesModal currency={currency}<br/>                                     closeAction={updateCurrency}&gt;<br/>                    &lt;/CurrenciesModal&gt;<br/>                &lt;/IonModal&gt;<br/><br/>                &lt;h1&gt;{formatCurrency(123.45)}&lt;/h1&gt;<br/><br/>                &lt;IonButton onClick={() =&gt; setShowModal(true)}&gt;<br/>                    &lt;IonLabel&gt;Pick currency&lt;/IonLabel&gt;<br/>                &lt;/IonButton&gt;<br/>            &lt;/IonContent&gt;<br/>        &lt;/IonPage&gt;<br/>    );<br/>};<br/><br/>export default Home;</span></pre><p id="8b48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧，我们的货币选择器和格式化程序都在Ionic React应用程序中实现了🎉。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/4faf4d0e0f407bcf9e727d6a57e9b254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*6ugZ2Y2mcpHkmdS4gpNJ6w.gif"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="be07" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">摘要</h1><p id="4399" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">爱奥尼亚和React在一起真的很好玩。结帐<a class="ae ky" href="https://tietracker.app.link" rel="noopener ugc nofollow" target="_blank">领带追踪器</a>当然，您的<a class="ae ky" href="https://github.com/peterpeterparker/tietracker" rel="noopener ugc nofollow" target="_blank">拉动请求</a>来改进应用程序是最受欢迎的😁。</p><p id="2fac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">呆在家里，注意安全！</p><p id="81e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大卫</p></div></div>    
</body>
</html>