<html>
<head>
<title>Create your own Dialog without using any packages!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建自己的对话框，不使用任何软件包！</h1>
<blockquote>原文：<a href="https://itnext.io/create-your-own-dialog-without-using-any-packages-7bb303f62471?source=collection_archive---------1-----------------------#2022-11-27">https://itnext.io/create-your-own-dialog-without-using-any-packages-7bb303f62471?source=collection_archive---------1-----------------------#2022-11-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/f15e42a9f458a4aca7b5d338fc15611a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TdhN1VOT_NlgLVpr2JpRg.jpeg"/></div></div></figure><h2 id="6ff5" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph">神奇的背后——颤动的路线</h2><div class=""/><p id="8d6e" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">在这篇文章中，我们将学习如何创建我们自己的<code class="fe li lj lk ll b">showDialog()</code>函数，并理解真正发生了什么。</p><h2 id="a401" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">动机</h2><figure class="mf mg mh mi gt iv gh gi paragraph-image"><div class="gh gi me"><img src="../Images/0639273e203b3b48f1ca5dab733d3420.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*0C2SqgtJ4N8bjW5k0bGb5g.gif"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="473c" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">先开始考察<code class="fe li lj lk ll b">showDialog</code>吧，看看里面有什么！</p><figure class="mf mg mh mi gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mq"><img src="../Images/81d32ac997c34ab7a621f99ac88a9855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xf7cXGyUkO_72_ogDwGfVg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv">showDialog的过于简化版本</em></figcaption></figure><p id="902c" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">如你所见，<code class="fe li lj lk ll b">showDialog()</code>所做的就是获取小部件并推送，就像<code class="fe li lj lk ll b">DialogRoute</code>使用<code class="fe li lj lk ll b">Navigator</code>一样。没什么特别的！</p><p id="b60d" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">所以，如果我们想创建一个对话框，我们也应该使用<code class="fe li lj lk ll b">Navigator</code>和<code class="fe li lj lk ll b">Route</code>！</p><h2 id="905b" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">但是什么是导航器，为什么我们在对话中需要它？</h2><figure class="mf mg mh mi gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mw"><img src="../Images/b81a4511063ebb2b43d8b8e127b2ba79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8NbeAzMh4_jNsgrSWyGuiQ.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><em class="mv">导航器的简化版本</em></figcaption></figure><p id="698a" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">没错。<code class="fe li lj lk ll b">Navigator</code>也是一个<code class="fe li lj lk ll b">widget</code>！</p><blockquote class="mx"><p id="b50f" class="my mz je bd na nb nc nd ne nf ng lh dk translated">毕竟，一切都是一个小部件，甚至是我，甚至是你，甚至是导航器本身——匿名Flutter开发者</p></blockquote><p id="1b66" class="pw-post-body-paragraph kk kl je km b kn nh kp kq kr ni kt ku kv nj kx ky kz nk lb lc ld nl lf lg lh im bi translated">本质上，<code class="fe li lj lk ll b">Navigator’s</code>的工作是管理一堆<code class="fe li lj lk ll b">Route</code>对象，并在<code class="fe li lj lk ll b">Overlay</code>小部件中可视化地切换小部件。</p><h2 id="ad27" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">什么是叠加，为什么它很重要？</h2><p id="a765" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">基本上，<code class="fe li lj lk ll b">Overlay</code>是一个有点特殊的<code class="fe li lj lk ll b">Stack</code>小部件，它将应用程序包装在<code class="fe li lj lk ll b">navigator</code>中。</p><p id="be6d" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">(你可以在我之前的文章中找到详细的信息！)</p><div class="is it gp gr iu ns"><a rel="noopener  ugc nofollow" target="_blank" href="/create-your-own-toast-without-using-any-packages-6d3828816f7c"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd jo gy z fp nx fr fs ny fu fw jn bi translated">创建自己的吐司不使用任何软件包！</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">在Flutter中，创建覆盖小部件非常容易，所以让我向您展示实现覆盖小部件有多容易！</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">itnext.io</p></div></div><div class="ob l"><div class="oc l od oe of ob og ja ns"/></div></div></a></div><p id="0f34" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">正如你所猜测的，对话框只是UI上的小部件(就像toast小部件一样)，但是在这种情况下，<code class="fe li lj lk ll b">navigator</code>明智地使用<code class="fe li lj lk ll b">Routes</code>来控制它们。这就是为什么他们让我们感觉不一样。</p><p id="dd43" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">是的，我们也可以使用<code class="fe li lj lk ll b">Overlay</code>小部件创建我们自己的小部件，但是我们也想与<code class="fe li lj lk ll b">navigator</code>交互，因为我们不想重新发明轮子！如果我们不使用<code class="fe li lj lk ll b">navigator</code>。我们必须处理所有的<em class="nr">转换、生命周期、后退按钮、可忽略的障碍、</em>等。</p><p id="96be" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">这就是为什么我们也应该知道路线！</p><p id="94cf" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">记住，<code class="fe li lj lk ll b">showDialog()</code>使用<code class="fe li lj lk ll b">DialogRoute</code>也是有原因的。</p><h2 id="c01c" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">但是<code class="fe li lj lk ll b">DialogRoute</code>有什么特别之处呢？</h2><figure class="mf mg mh mi gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/ea4c5119443e925ad80c2e6798c7ed6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zExawD74xAaiO2v5pZZ0jQ.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">对话路由继承模式</figcaption></figure><p id="f008" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">从祖先那里获得超能力！让我告诉你怎么做！</p><figure class="mf mg mh mi gt iv"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="a933" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">让我们看看，在每一步，我们继承了什么！</p><h2 id="85b2" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated"><a class="ae ok" href="https://api.flutter.dev/flutter/widgets/Route-class.html" rel="noopener ugc nofollow" target="_blank">路线</a> - &gt;基本路线</h2><p id="f48f" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">" Route是一个与导航器交互的基类."</p><h2 id="d2b5" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated"><a class="ae ok" href="https://api.flutter.dev/flutter/widgets/OverlayRoute-class.html" rel="noopener ugc nofollow" target="_blank">重叠路由</a> - &gt;知道如何与重叠交互的路由</h2><p id="24fa" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">在<a class="ae ok" href="https://api.flutter.dev/flutter/widgets/Navigator-class.html" rel="noopener ugc nofollow" target="_blank">导航器</a>的<a class="ae ok" href="https://api.flutter.dev/flutter/widgets/Overlay-class.html" rel="noopener ugc nofollow" target="_blank">覆盖图</a>中显示部件的路线。"</p><h2 id="b1b7" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated"><a class="ae ok" href="https://api.flutter.dev/flutter/widgets/TransitionRoute-class.html" rel="noopener ugc nofollow" target="_blank">过渡路线</a> - &gt;一条可以变魔术的路线</h2><p id="9480" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">"有入口和出口转换的路线."</p><h2 id="a9eb" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">后面有障碍物的路线</h2><p id="074a" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">"阻止与先前路由交互的路由。"</p><h2 id="512c" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated"><a class="ae ok" href="https://api.flutter.dev/flutter/widgets/PopupRoute-class.html" rel="noopener ugc nofollow" target="_blank">弹出</a> - &gt;显示在当前路线上方的路线</h2><p id="9e34" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">"在当前路线上覆盖一个小部件的模态路线."</p><h2 id="96c2" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated"><a class="ae ok" href="https://api.flutter.dev/flutter/widgets/RawDialogRoute-class.html" rel="noopener ugc nofollow" target="_blank"> RawDialogRoute </a> - &gt;预先配置好的对话路径</h2><p id="03a8" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">"一个通用的对话框路径，允许自定义弹出对话框."</p><h2 id="c49c" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated"><a class="ae ok" href="https://api.flutter.dev/flutter/material/DialogRoute-class.html" rel="noopener ugc nofollow" target="_blank">对话路由</a> - &gt;一个现成的、预先设计好的路由</h2><p id="a8f3" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">具有材料进入和退出动画、模态屏障颜色和模态屏障行为的对话路径</p><p id="89b7" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><em class="nr">(句子均引用自</em> <a class="ae ok" href="https://api.flutter.dev" rel="noopener ugc nofollow" target="_blank"> <em class="nr">官方api文档</em> </a> <em class="nr">)。)</em></p><blockquote class="ol om on"><p id="8bc3" class="kk kl nr km b kn ko kp kq kr ks kt ku oo kw kx ky op la lb lc oq le lf lg lh im bi translated">这里的教训是:当我们调用<code class="fe li lj lk ll b">showDialog()</code>时，它调用<code class="fe li lj lk ll b">navigator.push()</code>并且当<code class="fe li lj lk ll b">navigator</code>推动某物时，如果它是<code class="fe li lj lk ll b">PopupRoute</code>，它得到生命周期(从<code class="fe li lj lk ll b">Navigator</code>)、家庭(从<code class="fe li lj lk ll b">OverlayRoute</code>)、过渡(从<code class="fe li lj lk ll b">TransitionRoute</code>)、障碍(从<code class="fe li lj lk ll b">ModalRoute</code>)，并且出现在一条路线上(从它自己)。</p></blockquote><p id="8582" class="pw-post-body-paragraph kk kl je km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">无论如何，如果我们得到了主要的想法，让我们看看代码，学习如何创建我们自己的对话框！</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="6796" class="or ln je bd lo os ot ou lr ov ow ox lu oy oz pa lx pb pc pd ma pe pf pg md ph bi translated">对话示例</h1><h2 id="2fc1" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">1.设计一个对话</h2><p id="0692" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">创建你自己的对话框部件</p><figure class="mf mg mh mi gt iv"><div class="bz fp l di"><div class="pi oj l"/></div></figure><h2 id="d54a" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">2.创建您自己的对话框</h2><p id="a6ad" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">在这个例子中，我将使用<code class="fe li lj lk ll b">PopupRoute</code>来进行我自己的配置。如果你想要预先配置的对话框，你可以使用<code class="fe li lj lk ll b">RawDialogRoute</code>或者<code class="fe li lj lk ll b">DialogRoute</code>，就像<code class="fe li lj lk ll b">showDialog()</code>所做的一样。</p><figure class="mf mg mh mi gt iv"><div class="bz fp l di"><div class="pi oj l"/></div></figure><h2 id="549a" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">3.为可重用代码创建showCustomDialog方法</h2><p id="32a6" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">为了让事情变得更简单，我对它进行了扩展。</p><figure class="mf mg mh mi gt iv"><div class="bz fp l di"><div class="pi oj l"/></div></figure><h2 id="7d4f" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">4.想用就用吧！</h2><figure class="mf mg mh mi gt iv"><div class="bz fp l di"><div class="pi oj l"/></div></figure><h2 id="4ecb" class="lm ln je bd lo lp lq dn lr ls lt dp lu kv lv lw lx kz ly lz ma ld mb mc md jk bi translated">GitHub链接</h2><p id="7167" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">您可以在这里获得完整的项目示例</p><div class="is it gp gr iu ns"><a href="https://github.com/rei-codes/custom_dialog_example" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd jo gy z fp nx fr fs ny fu fw jn bi translated">GitHub-rei-codes/custom _ dialog _ example</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">如何创建自己的自定义对话框，而不用从头开始使用任何软件包。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="pj l od oe of ob og ja ns"/></div></div></a></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="18b2" class="or ln je bd lo os ot ou lr ov ow ox lu oy oz pa lx pb pc pd ma pe pf pg md ph bi translated">感谢您的阅读！</h1><p id="db22" class="pw-post-body-paragraph kk kl je km b kn nm kp kq kr nn kt ku kv no kx ky kz np lb lc ld nq lf lg lh im bi translated">请不要忘记点击👏按钮，并有一个美好的一天！</p></div></div>    
</body>
</html>