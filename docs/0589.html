<html>
<head>
<title>Working with Angular 5 Template Reference Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度5模板参考变量</h1>
<blockquote>原文：<a href="https://itnext.io/working-with-angular-5-template-reference-variable-e5aa59fb9af?source=collection_archive---------0-----------------------#2018-04-06">https://itnext.io/working-with-angular-5-template-reference-variable-e5aa59fb9af?source=collection_archive---------0-----------------------#2018-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/67586ef0450eb249df75bf92b84f032b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*eHzY31ILNXUonoqb4ehj6Q.jpeg"/></div></figure><p id="9327" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">模板引用变量通常是对模板中DOM元素的引用。它也可以是对角度组件或指令或web组件的引用(更多信息请访问<a class="ae ks" href="https://angular.io/guide/template-syntax#ref-vars" rel="noopener ugc nofollow" target="_blank"> Angular.io </a>)。这意味着您可以在模板中的任何地方轻松访问该变量。</p><p id="beca" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用散列符号(#)声明引用变量。<strong class="jw ir"> #firstNameInput </strong>在<code class="fe kt ku kv kw b">&lt;input&gt;</code>元素上声明了一个<strong class="jw ir"> firstNameInput </strong>变量。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="97e9" class="lf lg iq kw b gy lh li l lj lk">&lt;input type="text" #firstNameInput&gt;</span><span id="7b6c" class="lf lg iq kw b gy ll li l lj lk">&lt;input type="text" #lastNameInput&gt;</span></pre><p id="309d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">之后，您可以在模板内的任何地方访问该变量。例如，我将变量作为参数传递给事件。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="f58d" class="lf lg iq kw b gy lh li l lj lk">&lt;button (click)="show(lastNameInput)"&gt;Show&lt;/button&gt;</span></pre><p id="8e6a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请记住，lastNameInput属于HTMLInputElement类型。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="7329" class="lf lg iq kw b gy lh li l lj lk">show(lastName: HTMLInputElement){<br/>    console.log(lastName.value);<br/>}</span></pre><p id="ee2d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">通常，引用变量只能在模板内部访问。但是，您可以使用<strong class="jw ir"> ViewChild </strong> decorator在您的组件内部引用它。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="96de" class="lf lg iq kw b gy lh li l lj lk">import {ViewChild, ElementRef} from '<a class="ae ks" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="6b35" class="lf lg iq kw b gy ll li l lj lk">// Reference firstNameInput variable inside Component<br/><a class="ae ks" href="http://twitter.com/ViewChild" rel="noopener ugc nofollow" target="_blank">@ViewChild</a>('firstNameInput') nameInputRef: ElementRef;</span></pre><p id="61ea" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">之后，您可以在组件内部的任何地方使用<strong class="jw ir"><em class="lm">this . name input ref</em></strong>。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="9ddf" class="lf lg iq kw b gy lh li l lj lk">show(lastName: HTMLInputElement){<br/>  this.fullName = this.nameInputRef.nativeElement.value + ' ' + lastName.value;<br/>}</span></pre><p id="8280" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">使用&lt;ng-模板&gt;工作</strong></p><p id="f78d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在ng-template的例子中，有一点不同，因为每个模板都有自己的一组输入变量。例如:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="b361" class="lf lg iq kw b gy lh li l lj lk">// app.component.html<br/>&lt;ng-template #testingTemplate let-fullName="fullName"&gt;</span><span id="6345" class="lf lg iq kw b gy ll li l lj lk">   &lt;div&gt;Full Name (template): {{fullName}}&lt;/div&gt;</span><span id="e04a" class="lf lg iq kw b gy ll li l lj lk">&lt;/ng-template&gt;</span><span id="bd95" class="lf lg iq kw b gy ll li l lj lk">&lt;ng-container *ngTemplateOutlet="testingTemplate;<strong class="kw ir">context:ctx</strong>"&gt;</span><span id="bf10" class="lf lg iq kw b gy ll li l lj lk">&lt;/ng-container&gt;</span></pre><ul class=""><li id="39e9" class="ln lo iq jw b jx jy kb kc kf lp kj lq kn lr kr ls lt lu lv bi translated">我们使用前缀<strong class="jw ir"> <em class="lm"> let- </em> </strong>来声明输入变量<strong class="jw ir"> <em class="lm">全称</em> </strong></li><li id="b871" class="ln lo iq jw b jx lw kb lx kf ly kj lz kn ma kr ls lt lu lv bi translated">这个变量<strong class="jw ir"> <em class="lm"> fullName </em> </strong>在<strong class="jw ir"> <em class="lm"> ng-template </em> </strong>里面可见，不在外面</li><li id="390e" class="ln lo iq jw b jx lw kb lx kf ly kj lz kn ma kr ls lt lu lv bi translated">为了访问<strong class="jw ir"> <em class="lm"> ng-template </em> </strong>中的变量，我们声明了上下文</li></ul><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="bbe8" class="lf lg iq kw b gy lh li l lj lk">// app.component.ts<br/>export class AppComponent  {</span><span id="6015" class="lf lg iq kw b gy ll li l lj lk">   fullName: string;<br/>   ctx = {fullName: ''}<br/>   ...</span><span id="80b1" class="lf lg iq kw b gy ll li l lj lk">   show(lastName: HTMLInputElement){<br/>      this.fullName = this.nameInputRef.nativeElement.value + ' ' + lastName.value;<br/>      <strong class="kw ir">this.ctx.fullName = this.fullName;</strong><br/>   }</span><span id="a8c6" class="lf lg iq kw b gy ll li l lj lk">}</span></pre><p id="f80e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以在Stackblitz 测试我简单的<a class="ae ks" href="https://stackblitz.com/edit/angular-2-template-reference-variable" rel="noopener ugc nofollow" target="_blank"> Angular 2+模板引用变量。</a></p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="f945" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://twitter.com/dale_nguyen" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">在Twitter上关注我</strong> </a>了解Angular、JavaScript &amp; WebDevelopment的最新内容👐</p></div></div>    
</body>
</html>