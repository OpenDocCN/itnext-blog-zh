<html>
<head>
<title>Create your Own Card Game with Headless Chrome</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用无头浏览器创建你自己的卡牌游戏</h1>
<blockquote>原文：<a href="https://itnext.io/create-your-own-card-game-with-headless-chrome-3888ceaa4b03?source=collection_archive---------2-----------------------#2021-04-25">https://itnext.io/create-your-own-card-game-with-headless-chrome-3888ceaa4b03?source=collection_archive---------2-----------------------#2021-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="20c4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对纸牌游戏有什么想法？设计它。打印出来。卖掉它！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eff92c668a7b786974ccd1bf4bdf5ab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EhDPTFCG2-i9671-"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">安德里克·朗菲尔德在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="bc53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我上一篇文章中提出的头脑风暴提示和挑战的工作中，我认为这会成为一个非常有趣的纸牌游戏。</p><div class="ls lt gp gr lu lv"><a href="https://medium.com/swlh/the-business-idea-game-dbda79011b08" rel="noopener follow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">商业创意游戏</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">让你的创造力源源不断的25个提示</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">medium.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><p id="3565" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个概念包括以用户故事的形式生成许多不同的提示，按照行业和类型对它们进行分组，并按照“扩展包”模式发布这些卡片的不同包。这个游戏可以是单人的，也可以是多人合作的，但不一定有“赢家”或“成功之路”这纯粹是为了激发创造力和思维能力。</p><p id="c899" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这篇文章不是关于这个游戏的概念，所以我将回到正轨。在探索创建一个纸牌游戏的想法时，我走了不同的设计和印刷途径，我相信我偶然发现了一种最大化质量和效率的方法。我发现，通过使用JSON、HTML模板和headless Chrome，可以快速迭代设计，而不是使用Adobe Illustrator、Adobe Indesign或Inkscape等工具手工设计每张卡片。在本教程中，我们还将使用Golang作为与Liquid template engine结合使用的语言，但任何编程语言和模板引擎都可以使用。</p><p id="4b3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">整个过程是:</p><ul class=""><li id="e6f6" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">在印刷服务机构找到一副卡片的可接受尺寸</li><li id="fb32" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">使用模板语言构建一个HTML + CSS模板(我们将使用<a class="ae kv" href="https://shopify.github.io/liquid/" rel="noopener ugc nofollow" target="_blank">液体</a></li><li id="2fd9" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">创建一个程序，将参数注入模板，并通过DevTools协议编写Google Chrome脚本，对模板输出进行截图</li></ul><p id="a855" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例代码可在此处找到:</p><p id="8c56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/csthompson/cardbuilder" rel="noopener ugc nofollow" target="_blank">https://github.com/csthompson/cardbuilder</a></p><h2 id="970b" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">寻找印刷服务</h2><p id="f296" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">创建自定义纸牌游戏的第一步(当然除了设计之外)是找到一个印刷服务，因为这将定义用于构建纸牌的模板。我发现的一个很棒的服务是让玩Cards.com变得更容易。它有许多不同尺寸的选项，定制的盒子，甚至可以定制的小册子，包含在每一副牌中。不管使用哪种印刷服务，大多数都会提供不同尺寸的卡片组和每副卡片组中包含的卡片数量。在这个例子中，我们将使用<a class="ae kv" href="https://www.makeplayingcards.com/design/custom-domino-sized-cards-deck.html" rel="noopener ugc nofollow" target="_blank">多米诺骨牌大小的卡牌</a>。</p><p id="5934" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦您选择了打印的形式因素和各种参数，单击“开始设计”，并为所有卡片选择自定义图像和文本。下一页提供了必要的尺寸，以及批量上传所有图像或卡片正面的实用程序。重要的部分是分辨率，对于多米诺骨牌大小的牌来说是597x1122。这个决议将决定我们为卡片构建HTML模板的方式。</p><h2 id="cb11" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">无头Chrome简介</h2><p id="15d4" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">谷歌Chrome是一款流行的网络浏览器，它提供了一个名为<a class="ae kv" href="https://chromedevtools.github.io/devtools-protocol/" rel="noopener ugc nofollow" target="_blank"> Chrome DevTools协议</a>的编排层。这个编排层允许其他服务和应用程序“检测、检查、调试和分析Chrome、Chrome和其他基于flash的浏览器。”这意味着浏览器基本上可以通过编程来控制，以执行诸如web应用程序的自动化测试、抓取网站或执行<a class="ae kv" href="https://en.wikipedia.org/wiki/Robotic_process_automation" rel="noopener ugc nofollow" target="_blank">机器人流程自动化</a> (RPA)等任务。对于这个用例，我们将在无头模式(无用户界面)下使用Chrome获取HTML页面的<a class="ae kv" href="https://developers.google.com/web/updates/2017/04/headless-chrome#screenshots" rel="noopener ugc nofollow" target="_blank">截图</a>。由此产生的截图将用于我们的扑克牌。</p><h2 id="a88a" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">控制铬</h2><p id="e405" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">有大量不同语言的不同库可以与Chrome DevTools协议交互。与Chrome DevTools交互最流行的组合是<a class="ae kv" href="https://github.com/puppeteer/puppeteer" rel="noopener ugc nofollow" target="_blank">puppeter</a>库，这是一个NodeJS库。然而，我是Golang的忠实粉丝，我发现了令人敬畏的chromedp包，它使与Chrome的交互变得轻而易举。</p><h2 id="3540" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">选择模板语言</h2><p id="11ce" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">Golang通过text/template和html/template包提供了一个令人惊叹的内置模板语言，但是我想改变一下，在这个用例中使用Liquid templating引擎。这个决定背后的主要原因是表明任何语言都可以用于这个用例，只要有可用的模板库(Ruby、Python、C#、Java、Javascript等)。你可能会认为Liquid是驱动<a class="ae kv" href="https://www.shopify.com/" rel="noopener ugc nofollow" target="_blank"> Shopify </a>店面的模板语言。</p><h2 id="5fff" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">构建模板</h2><p id="e2dc" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">一旦选择了模板语言，我们就可以创建实际的模板了。使用印刷服务提供的分辨率(对于此用例为597x1122)，我们将能够定义模板的尺寸。在这个例子中，我们只是用纯色背景向卡片中添加文本，但是这样做的限制只受HTML和CSS的限制。您可以添加自定义图标，不同的形状，多个部分，图像和任何你能想到的！你可以看到下面的简单模板。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="e1d7" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">将值注入模板</h2><p id="5310" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">一套扑克牌通常有多种不同类型的牌，都遵循相似的设计，但每张牌都有一套独特的属性。这种整体设计的相似性，但在特定属性上的差异使得这个过程对HTML模板非常有益。那么我们如何将这些特定的属性放到模板中呢？我们可以使用JSON文件。</p><p id="3ede" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个包含JSON对象数组的简单文件，其中每个JSON对象代表一张卡片，提供了一种简单的方法来迭代设计和值，而不必每次都调整整组卡片。下面是一个示例JSON文件，其中每张卡都有一个名为“prompt”的属性。你会看到这些提示来自上面链接的文章。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="1f09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的每个JSON对象将被用来定义一个卡片，每个卡片都有一个唯一的提示。查看模板，我们可以清楚地看到“提示”是在哪里注入的:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="78e2" class="my mz iq nz b gy od oe l of og">&lt;div class="prompt"&gt;<br/>    {{card.Prompt}}<br/>&lt;/div&gt;</span></pre><p id="ec88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以让每个对象像我们喜欢的那样复杂，允许像复杂的交易或冒险游戏这样的卡片组。例如，我们甚至可以使用这种<a class="ae kv" href="https://www.w3schools.com/css/css_image_sprites.asp" rel="noopener ugc nofollow" target="_blank">技术</a>将spritesheets加载到卡片中。令人敬畏的精灵可以在<a class="ae kv" href="https://opengameart.org/" rel="noopener ugc nofollow" target="_blank">开放游戏艺术</a>上找到，你可以使用这个<a class="ae kv" href="http://www.spritecow.com/" rel="noopener ugc nofollow" target="_blank">工具</a>计算出每个精灵的偏移量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="cffd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经有了模板和定义的值，我们就可以让它们发挥作用了。</p><h2 id="2bee" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">填充模板并截图</h2><p id="aeae" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">我们的程序将负责两个主要任务。</p><ul class=""><li id="9148" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">填充模板并将其保存为HTML文件</li><li id="8f5a" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">用Chrome截取HTML文件的截图</li></ul><p id="dd3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Golang有一个内置的模板引擎，但正如前面提到的，我们将使用液体，这可以通过这个包来完成:【github.com/osteele/liquid<a class="ae kv" href="https://github.com/osteele/liquid" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="9df8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为Golang是强类型的，所以必须预先定义卡的类型，这样我们才能正确地读取JSON文件。对于复杂的JSON对象，Python或Javascript等语言可能会灵活得多。下面是我们将用来定义每张卡的简单结构:</p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="5805" class="my mz iq nz b gy od oe l of og">type Card struct {<br/>    Prompt string `json:"prompt"`<br/>}</span></pre><p id="5057" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用上面的结构，我们可以读取文件，将JSON“解组”到一片卡片中，并遍历每一张卡片来填充Liquid模板。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="f977" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们深入了解将使用headless Chrome渲染和截图HTML代码的代码。Chrome DevTools允许程序覆盖视口，视口是屏幕的尺寸。以下代码大量借鉴了Golang chromedp包中提供的<a class="ae kv" href="https://github.com/chromedp/examples/tree/master/screenshot" rel="noopener ugc nofollow" target="_blank">示例代码</a>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="ec2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以看到宽度和高度被覆盖，并且应用了一个剪辑来确保我们只捕获由印刷服务定义的尺寸。</p><h2 id="1896" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">运行代码</h2><p id="8b4f" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">下面是运行在<a class="ae kv" href="https://github.com/csthompson/cardbuilder" rel="noopener ugc nofollow" target="_blank">库</a>中找到的代码的步骤。</p><ol class=""><li id="243a" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr oh mq mr ms bi translated">下载并安装最新版本的Golang<a class="ae kv" href="https://golang.org/doc/install" rel="noopener ugc nofollow" target="_blank">https://golang.org/doc/install</a></li><li id="2edd" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr oh mq mr ms bi translated">下载并安装Git<br/><a class="ae kv" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="noopener ugc nofollow" target="_blank">https://Git-SCM . com/book/en/v2/Getting-Started-Installing-Git</a></li><li id="a898" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr oh mq mr ms bi translated">创建一个保存代码的目录，例如:<br/> <code class="fe oi oj ok nz b">mkdir -p ~/workspace/cardbuilder</code> <br/> <code class="fe oi oj ok nz b">cd ~/workspace/cardbuilder</code></li><li id="8460" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr oh mq mr ms bi translated">克隆资源库:<br/> <code class="fe oi oj ok nz b">git clone <a class="ae kv" href="https://github.com/csthompson/cardbuilder" rel="noopener ugc nofollow" target="_blank">https://github.com/csthompson/cardbuilder</a></code></li><li id="ef9f" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr oh mq mr ms bi translated">运行程序:<br/> <code class="fe oi oj ok nz b">go run main.go</code></li></ol><p id="656f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">go.mod文件应该会自动处理所有的依赖项</p><p id="69e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦程序运行，您应该会看到。输出目录中填充的png文件。如果您在运行该程序时有任何问题，请随时在下面发表评论！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/76054fc5223705350698af1c63327cd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*Nz6Hw_tGh5rMx1RTscy9nw.png"/></div></figure><h2 id="9d1e" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">结论</h2><p id="7a6d" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">程序员经常被创造精神所困扰，总想造点什么或者做点什么。源代码可以被看作是无限创造力的工具，那么为什么不把代码用于程序之外的东西呢？通过使用HTML、CSS、一些简单的脚本和headless Chrome，可以很容易地创建一个卡牌游戏，并可能最终发布和用作副业。</p><p id="de1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我很想看看你能想出什么！在推特上关注我，分享你的设计:)【https://twitter.com/CooperThompson8 T2】</p></div></div>    
</body>
</html>