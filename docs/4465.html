<html>
<head>
<title>Azure DevOps Releases: Auto Create New Release After Pipeline Build</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure DevOps版本:在管道构建后自动创建新版本</h1>
<blockquote>原文：<a href="https://itnext.io/azure-devops-releases-auto-create-new-release-after-pipeline-build-ac03d21f726e?source=collection_archive---------1-----------------------#2020-07-06">https://itnext.io/azure-devops-releases-auto-create-new-release-after-pipeline-build-ac03d21f726e?source=collection_archive---------1-----------------------#2020-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d48a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我本周的计划帖子遇到了障碍，决定希望回到Azure DevOps，并展示如何创建一个发布，并在构建管道成功完成时触发该发布。这篇文章将使用相同的Azure DevOps项目，就像这个系列之前所有的文章一样，链接如下。</p><p id="e609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://elanderson.net/2020/02/getting-started-with-azure-devops/" rel="noopener ugc nofollow" target="_blank">Azure devo PS入门</a><br/><a class="ae kl" href="https://elanderson.net/2020/03/pipeline-creation-in-azure-devops/" rel="noopener ugc nofollow" target="_blank">Azure devo PS中的管道创建</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/03/azure-devops-publish-asp-net-core/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps为ASP.NET核心发布工件</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/03/azure-devops-pipelines-multiple-jobs-in-yaml/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps管道:YAML的多个作业</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/03/azure-devops-pipelines-reuseable-yaml/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps管道:可重用的YAML </a> <br/> <a class="ae kl" href="https://elanderson.net/2020/04/azure-devops-pipelines-use-yaml-across-repos/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps管道:跨Repos使用YAML</a><br/><a class="ae kl" href="https://elanderson.net/2020/04/azure-devops-pipelines-conditionals-in-yaml/" rel="noopener ugc nofollow" target="_blank">Azure devo PS管道:YAML的条件</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/04/azure-devops-pipelines-naming-and-tagging/" rel="noopener ugc nofollow" target="_blank"/></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/f466af6ebe90501df0f6fc8689943084.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*IqwVYuAPJ4VzceOL.png"/></div></figure><h2 id="3682" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">创建版本</h2><p id="8326" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">在Azure DevOps中，要创建一个发布，请转到<strong class="jp ir">管道</strong>，然后<strong class="jp ir">发布</strong>。因为这是我们项目的第一次发布，我们有一个<strong class="jp ir">新管道</strong>按钮来点击开始创建过程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/f517dbd0433a6e9cab6521cd9c8819de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PEDrGgnQQ4kMkKJw.png"/></div></div></figure><p id="a6fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">新管道按钮将通过显示一个<strong class="jp ir">选择模板</strong>对话框来开始创建过程。由于我们的发布并没有真正做什么，我们将点击<strong class="jp ir">空任务</strong>选项。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lx"><img src="../Images/027fb801376624a57cf84f61484a35b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HhGubqYZmeWbAwsn.png"/></div></div></figure><p id="b357" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们想要将构建管道中的工件添加到这个版本中。点击<strong class="jp ir">添加神器</strong>开始流程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ly"><img src="../Images/94e2ec3b32947a7cce7b8655b06e05c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*V-XqpNKSPvSKh_Tq.png"/></div></div></figure><p id="d6a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将显示添加工件对话框，它允许我们在工件的源上有很多选项。对于这个设置，我们将使用<strong class="jp ir">构建</strong>的<strong class="jp ir">源类型</strong>，因为我们的工件是Azure DevOps构建的结果。我们需要选择的下一个选项是<strong class="jp ir"> Source </strong>，在这里我们选择想要使用哪个Azure DevOps构建管道中的工件。在这个示例中，我们只有一个选项。一旦选择了信号源，将会显示更多选项，但我们将采用这些选项的默认值，只需单击<strong class="jp ir">添加</strong>按钮。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lz"><img src="../Images/9dd73d6b3c6ff800d17771e619a182cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*F4aI4D021-0yUxMu.png"/></div></div></figure><p id="5792" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了基本的发布设置，点击<strong class="jp ir">保存</strong>按钮。会有一个文件夹的提示。输入一个文件夹名或留空以将发布保存在根目录中，然后点击<strong class="jp ir"> OK </strong>完成保存。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ma"><img src="../Images/fa1799f9d046ddbbb364f300b4a0eecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IvVZVMCoPJFfl1Jq.png"/></div></div></figure><h2 id="9fa8" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">管道构建后自动创建</h2><p id="35ab" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">现在我们已经有了基本的发布管道，我们将在工件上设置一个连续的部署触发器，这样每当一个新的构建完成时。在<strong class="jp ir">工件</strong>区域点击工件上的<strong class="jp ir">照明螺栓</strong>触发器应该打开，我们的示例中只有一个选项。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mb"><img src="../Images/f86c84cad020f5c907fcad258f82098a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ksoxEihA9Ofxw9Cv.png"/></div></div></figure><p id="7c83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个对话框将显示不同的触发选项。我们将<strong class="jp ir">启用</strong>的<strong class="jp ir">持续展开触发器</strong>。请注意，当启用触发器时，有一个选项只为特定分支触发。我经常使用这个选项，只在master上完成构建时触发发布。完成后点击<strong class="jp ir"> X </strong>关闭对话框，然后<strong class="jp ir">保存</strong>释放。我还将该版本重命名为Web App 1 &amp; 2，以便更清楚地了解该版本的功能。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/a6152c0463bc3d49c1510893715c8b16.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*0JbR9DJRCUu3D54H.png"/></div></figure><p id="4f51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在弹出到管道并运行一个构建。构建完成后，返回到发布版本，您将会看到一个新的发布版本被触发，并且在这种情况下是基于发布版本的其余部分是如何设置的来部署的。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mc"><img src="../Images/b405d6ae347a7d0e4785d09c6edd6be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qSEjOJTgM99KI2sZ.png"/></div></div></figure><h2 id="f83c" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">包扎</h2><p id="2a60" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">在这篇文章中，我们创建了我们的第一个版本，它实际上不做任何事情，并将其配置为在构建应用程序时自动部署。我使用类似的设置来自动部署到QA环境。这种设置可以打开大量的场景。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="4df7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mk">原载于</em><a class="ae kl" href="https://elanderson.net/2020/07/azure-devops-releases-auto-create-new-release-after-pipeline-build/" rel="noopener ugc nofollow" target="_blank"><em class="mk"/></a><em class="mk">。</em></p></div></div>    
</body>
</html>