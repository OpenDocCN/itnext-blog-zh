# 了解 Kubernetes 的基本概念 I——pod、标签和复制品介绍

> 原文：<https://itnext.io/understanding-basic-kubernetes-concepts-i-an-introduction-to-pods-labels-and-replicas-9682883c0362?source=collection_archive---------3----------------------->

[![](img/da404c753e519566455b413f3d9b5096.png)](http://www.giantswarm.io)

这篇文章是一系列关于 Kubernetes 基本概念的博客文章中的第一篇。在第二篇 [*中我们谈到部署*](https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-using-deployments-manage-services-declaratively/) *。第三篇文章* [*解释了服务概念*](https://blog.giantswarm.io/basic-kubernetes-concepts-iii-services-give-abstraction/) *，在第四篇文章中，我们看一下* [*秘密和配置图*](https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-iv-secrets-and-configmaps/) *。在第五篇也是最后一篇文章中，我们讨论了* [*守护进程集和*](https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-v-daemon-sets-and-jobs/) *。*

有很多介绍和教程可以帮助你开始使用 Kubernetes。然而，它们中的大部分都集中在展示命令是如何工作的，以及如何让东西运行起来。不要误解我的意思，尝试这些命令是很重要的，但是要真正有效地使用 Kubernetes，你需要更深入地理解这些概念和它们的功能，这样你才能真正按照它们的预期方式使用它们。这对于普通的 Docker 来说尤其困难，因为 Docker 的概念不能直接翻译成 Kubernetes——至少如果你想正确地使用 Kubernetes 的话。

在这篇博文中，我们将看看最基本的概念:pod、标签&选择器和副本集。我不会包括任何实际的使用说明，而是试图只专注于解释概念、它们的功能以及它们的用途。这些只是最基本的概念，你还需要更多的概念来全面了解 Kubernetes，所以请放心，我将在接下来的博客文章中探索更多的概念。

# 分离舱

" Pods 是可以在 Kubernetes 中创建和管理的最小可部署计算单元."说[官方 Kubernetes docs for pod](http://kubernetes.io/docs/user-guide/pods/)。这有时会导致混淆，豆荚是单一的容器，因为这是人们习惯于从 Docker。虽然 pod 可以包含一个容器，但是它们不限于一个，并且可以根据需要包含多个容器。

使这些容器成为一个 pod 的原因是，pod 中的所有容器运行起来就像是在容器出现之前的单一主机上运行一样。因此，它们共享一组 Linux 名称空间，而不是彼此孤立地运行。这导致它们共享一个 IP 地址和端口空间，并且能够通过`localhost`找到彼此或者通过 IPC 名称空间进行通信。此外，pod 中的所有容器都可以访问共享卷，也就是说，如果需要，它们可以在相同的卷上安装和工作。

为了获得所有这些功能，吊舱是一个单一的可展开单元。pod 的每个实例(及其所有容器)总是一起计划。

对于典型的 Docker 用户来说，这是一个非常新的概念。虽然即使没有 Kubernetes，巨型 Swarm 用户也能够使用 pods 很长一段时间，但只有少数人真正这样做。对于一些人来说，这听起来像是从孤立的“每个容器一个进程”回到“一起部署整个灯堆栈”。然而，这并不是 pod 的预期用例。pod 概念的主要动机是支持应用程序容器旁边的协同定位、共同管理的助手容器。这些包括:日志或监控代理、备份工具、数据更改观察器、事件发布器、代理等。如果你不确定一开始用 pod 做什么，你现在可以用它们来处理单个容器，就像你在 Docker 中习惯的那样。

豆荚是 Kubernetes 中最基本的概念。就其本身而言，它是短暂的，一旦死亡就不会被重新安排到新的节点。如果我们想让一个 pod 的一个或多个实例存活，我们需要另一个概念:副本集。但在此之前，我们需要了解什么是标签和选择器。

# 标签和选择器

标签是可以附加到对象上的键/值对，比如 pod，也可以附加到 Kubernetes 中的任何其他对象上，甚至是节点上。它们应该用于指定对用户有意义和相关的对象的识别属性。您可以在创建时将标签附着到对象，并在以后修改它们或添加新标签。

标签可用于组织和选择对象子集。例如，它们通常用于识别版本(测试版、稳定版)、环境(开发、生产版)或层(前端、后端)，但也可以灵活地支持许多其他情况。它们有助于对现代部署管道的多维度进行排序。

标签是 Kubernetes 的一个关键概念，因为它们与选择器一起使用来管理对象或对象组。这样做实际上不需要关于对象的任何特定信息，甚至不需要存在的对象的数量。

尤其是在使用标签选择器时，应该记住对象的数量是未知的这一事实。一般来说，您应该预料到许多对象都带有相同的标签。

[![](img/05f70d0f3eb10ae5435a149e65ea0454.png)](https://www.giantswarm.io/guide-cloud-native-stack?utm_campaign=Blog%20CTA%20Conversion&utm_source=Cloud%20native%20stack%20guide_Blog&utm_medium=Blog%20CTA&utm_term=cloud%20native%20stack%20guide)

目前，Kubernetes 中有两种类型的选择器:基于等式的和基于集合的。前者使用键值对基于基本相等(或不相等)进行过滤。后者功能更强大，允许根据一组值过滤关键字。

使用标签选择器，客户或用户可以识别并随后管理一组对象。这是 Kubernetes 的核心分组原语，在很多地方使用。使用它的一个例子是处理副本集。

# 副本集(和复制控制器)

对于以前读过一些 Kubernetes 的人来说，副本集是下一代复制控制器。目前，主要的区别是副本集支持更高级的基于集合的选择器，因此比复制控制器更灵活。然而，以下解释的要点对两者都适用。

如上所述，pod 本身是短暂的，如果它运行的节点关闭，它不会被重新调度。这就是副本集发挥作用的地方，它确保特定数量的 pod 实例(或*副本*)在任何给定的时间都在运行。因此，如果您想让您的 pod 保持活动状态，您需要确保您有一个相应的副本集，为该 pod 指定至少一个副本。然后，副本集负责为您(重新)调度实例。

如上所述，副本集确保特定数量的副本正在运行。通过修改集合定义中的副本数量，您可以放大和缩小窗格。

副本集不仅可以管理单个 pod，还可以管理基于公共标签选择的一组不同的 pod。这使得副本集能够例如缩放一起构成应用前端的所有单元，而不必为前端中的每个单元具有相同的副本集。

您可以将 pod 的定义直接包含在副本集的定义中，这样就可以一起管理它们。然而，有一个更高层次的概念叫做*部署*，它管理副本集。因此，通常不需要直接创建或操作副本集对象。了解这个概念仍然很重要，因为如果没有这个概念，你将无法理解 Kubernetes 将如何帮助你运行和管理你的应用程序。我将在后续的博客文章中解释部署及其带来的许多特性，现在可以说它们将为您管理您的副本集。

# 进一步阅读

现在您已经了解了一些基本概念，您可以在 Kubernetes 官方文档中阅读更多关于它们及其用法的内容:

试着和它们一起玩，然后可能会转移到一个更高级的例子上，在 T2 当地环境下进行试验。请继续关注这篇解释部署和更多 Kubernetes 概念的博文的后续文章。如需反馈和请求，请联系。

由 [Puja Abbassi](https://twitter.com/puja108) : 开发者倡导者@ [巨型虫群](https://twitter.com/giantswarm)