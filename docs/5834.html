<html>
<head>
<title>SLOs should be easy, say hi to Sloth</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SLOs应该很简单，向Sloth问好</h1>
<blockquote>原文：<a href="https://itnext.io/slos-should-be-easy-say-hi-to-sloth-9c8a225df0d4?source=collection_archive---------0-----------------------#2021-06-06">https://itnext.io/slos-should-be-easy-say-hi-to-sloth-9c8a225df0d4?source=collection_archive---------0-----------------------#2021-06-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/adf29fba91631414ff37c09f705297ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4tYtJVfDD0DpK-jPqksHtg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">库伯内特蜜蜂潜伏SLO与懒惰</figcaption></figure><p id="1389" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">和其他领域一样，在科技领域，每年都有一些热门词汇被说得比其他词汇多。一些例子:</p><ul class=""><li id="ad5c" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">2017年:加密货币和区块链</li><li id="d8ae" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">2018:可观察性和追踪</li><li id="8803" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">2019:服务网格</li><li id="0889" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">2020年:Gitops</li></ul><p id="940d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">今年，最流行的词是SLO。</p><p id="47cc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我相信你最近已经听说过<em class="lo">服务水平目标</em>(不仅仅是因为<a class="ae lp" href="http://sloconf.com/" rel="noopener ugc nofollow" target="_blank"> SLOConf </a>)。SLO并不新鲜，如果你正在阅读这篇文章，很可能你已经熟悉SLI、SLO、SLA、错误预算…行话。</p><p id="7fc2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">除了这个时髦的词，SLO是很棒的，如果你现在没有使用它们，尽可能地探索它们，因为我确信你会从中获得价值。</p><p id="80b9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="lo">现在我将讲述我是如何实现</em> <a class="ae lp" href="https://github.com/slok/sloth" rel="noopener ugc nofollow" target="_blank"> <em class="lo"> Sloth </em> </a> <em class="lo">的，所以如果你愿意，你可以直接跳到</em> <a class="ae lp" href="https://slok.medium.com/slos-should-be-easy-say-hi-to-sloth-9c8a225df0d4#4b95" rel="noopener"> <em class="lo"> Sloth部分</em> </a> <em class="lo">。</em></p><h1 id="2863" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">很久很久以前…</h1><p id="1f06" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">我不知道SLO的确切创建时间，但是，当我开始对SRE文化着迷时，我被介绍给了他们，我第一次阅读它们是在《SRE》的第四章，一段时间后继续在《SRE工作手册》上阅读。</p><p id="39c9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对我来说，SLO不仅仅是一个工具/框架，而是一种思考和应用可观察性的方式。2018 )，一种语言……一句话，<em class="lo">文化</em>。然而，每次我试图在多家公司向朋友、家人、同事解释时，都发生了同样的事情:</p><blockquote class="mt mu mv"><p id="9b92" class="kc kd lo ke b kf kg kh ki kj kk kl km mw ko kp kq mx ks kt ku my kw kx ky kz ij bi translated">每个人都理解SLO、术语、目的……但是他们中的很多人都很难应用它们，理解过程，或者以实际的方式应用它们。</p></blockquote><h1 id="c0c0" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">(2018–2019)服务水平操作员</h1><p id="c531" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">那是2018年，我在<a class="ae lp" href="https://www.spotahome.com/es" rel="noopener ugc nofollow" target="_blank"> Spotahome </a>工作，我是一名平台<em class="lo">工程师/SRE/写代码和做ops的人。我们想在公司里开始应用SLO，那里没有太多的SLO，我们想让它变得简单，所以人们不需要考虑所有现有的SLO条款。</em></p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/a2b859667a2957df85b3ddf578c4d157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5BUo9SV9idWAKP85w8L3Eg.png"/></div></div></figure><p id="8a89" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们创建了一个Kubernetes运营商，其服务的SLOs被定义为<a class="ae lp" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" rel="noopener ugc nofollow" target="_blank"> CRD </a>。我们把它命名为<a class="ae lp" href="https://github.com/spotahome/service-level-operator" rel="noopener ugc nofollow" target="_blank"> <em class="lo">服务等级操作员</em> </a> <em class="lo">。</em>CRD很简单:给我一个关于全部事件(例如请求)的查询，给我一个关于错误事件(例如请求5xx)的查询，操作员将得到一个定期计算的比率(0-1 ),并使用一些度量惯例将其交给Prometheus。</p><p id="1e71" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">操作员工作得很好，我们有非常简单的控制面板，让我们快速了解情况，但是，没有时段窗口指标、警报、SLO元数据信息…我们缺少许多关于SLO的信息，但作为第一步非常好。</p><h1 id="efa3" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">(2019–2020年)阿萨蒂托</h1><p id="bbe1" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">2019年底，我跳槽到了一家名为<a class="ae lp" href="https://cabify.com/" rel="noopener ugc nofollow" target="_blank"> Cabify </a>的新公司。公司的一些团队已经在应用SLO并实施它们。然而，在创建这些SLO普罗米修斯规则时，有许多容易出错的手动任务。甚至，我们开始创建普罗米修斯单元测试来确保这些手工创建的普罗米修斯规则！<strong class="ke ir">那是纯粹的</strong> <a class="ae lp" href="https://sre.google/sre-book/eliminating-toil/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">辛劳</strong> </a> <strong class="ke ir">。</strong></p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/0fc3ad1f1258129aca682555f0721ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*kf77EiYL2T9t4Z_BpCgK9Q.png"/></div></figure><p id="804c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我想到了这一点，以及我们如何做些事情来改善流程，并在公司内部启动了一个新项目。Asadito，生成创建SLI记录规则和基于SLO的警报所需的所有Prometheus规则的CLI(<a class="ae lp" href="https://sre.google/workbook/alerting-on-slos/" rel="noopener ugc nofollow" target="_blank">多窗口多烧录</a>)。主要思想是简单性和灵活性，以提高SLO的采用和当时SLOs的使用。</p><p id="8d35" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">换句话说，我利用我在创建服务级别操作员时获得的一些经验，并对其进行改进，以适应该公司的需求。</p><p id="c873" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">多个团队开始使用这个工具，突然间我们在公司范围内实现了SLO的标准化(只有想要使用它的团队)，你可以发现所有不同团队的SLO，我们有了一个通用的SLO·格拉夫纳仪表板，一个易于理解SLO规格的存储库…</p><p id="672f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是我在2018年与服务级别操作员一起做的事情的一个非常好的演变，并成功地工作。</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c9854b311a0b99e639116d8a98638034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*mUPRuhfQ07OLkTX01ozbeg.jpeg"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">成功！</figcaption></figure><h1 id="4b95" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">《懒惰》</h1><p id="e3e4" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">我已经不在这些公司了。现在是2021年，我仍然认为人们在实施SLO时有困难，不应该是这样。此外，我认为我在过去的公司里在这方面做出了积极的贡献，所以…</p><p id="e497" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在经历了<em class="lo">服务级别操作员</em>和<em class="lo"> Asadito </em>之后，我想要类似的东西，并且可以为每个人所用，并且喜欢我在空闲时间开发的所有东西，OSS。</p><p id="0df5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">打招呼</strong> <a class="ae lp" href="https://github.com/slok/sloth" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> <em class="lo">懒惰</em> </strong> </a> <strong class="ke ir">！</strong></p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/c8d67b1595baa44d039a3931243c95ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*fzNfHeZalcxwCCpJCJU71w.png"/></div></figure><blockquote class="mt mu mv"><p id="6adf" class="kc kd lo ke b kf kg kh ki kj kk kl km mw ko kp kq mx ks kt ku my kw kx ky kz ij bi translated">懒惰很容易为普罗米修斯制造技能等级。易于理解和维护。</p></blockquote><p id="e552" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">是CLI吗？它是Kubernetes控制器/操作器吗？。两者兼而有之，它适应你，所以你可以选择如何使用它。</p><p id="b9ad" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Sloth spec试图移除所有困难的配置部分，这些部分让人们在以实用的方式应用SLOs时感到吃力:奇怪的错误预算公式、不同的时间窗口、不同形式的可视化图形…</p><p id="09ba" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">懒惰注重简单，有安全的默认设置，目的是能够为90–95%的人工作(这就是营销！).如果你在5-10%，我很抱歉，不管怎样，很可能你已经创建了自己的工具或自定义SLO规则。</p><p id="4f31" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们看一个SLO的例子，懒惰会给你带来什么。</p><h2 id="0dd1" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">投机</h2><figure class="na nb nc nd gt jr"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="4be8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">从规范中可以看出，我们为一个服务定义了多个SLO，这背后的想法是每个服务都应该有自己干净简单的SLO清单。这有两个目的:</p><ul class=""><li id="fe98" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">每个服务都有SLO。</li><li id="d3b0" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">记录的服务SLO。</li></ul><p id="d200" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">每个SLO都有一个ID、SLO的目的/目标(例如<em class="lo"> 99.9% </em>)、一个SLI，在本例中是一个SLI <em class="lo">事件</em>类型(还有一个<em class="lo">原始</em> SLI类型)，最后是可选的警报块，用于启用/禁用自动<a class="ae lp" href="https://sre.google/workbook/alerting-on-slos/" rel="noopener ugc nofollow" target="_blank">多窗口多燃烧</a>警报生成。</p><p id="2ea4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">SLI的普罗米修斯查询，在查询中需要一个模板化的变量，<em class="lo"> {{。window}}，</em> SLOth会将生成的规则扩展到所需的SLOs窗口(例如5m、1h、3d……)。</p><h2 id="75c1" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">确认</h2><p id="ea57" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">当Sloth生成SLO规则时，它会验证规范，包括SLI查询、选项……因此错误SLO的反馈循环会尽可能快，并且您不会以错误的SLO结束，也不会花费3小时创建一个简单的SLO。</p><h2 id="7df5" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">用法(CLI)</h2><p id="35f3" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">如果你把它作为一个常规的CLI来使用，例如对于<em class="lo"> gitops </em> ( <em class="lo"> Ding！2020 </em>):</p><pre class="na nb nc nd gt nv nw nx ny aw nz bi"><span id="7536" class="nh lr iq nw b gy oa ob l oc od">sloth generate -i ./myservice-slo.yml</span></pre><h2 id="488b" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">用途(Kubernetes控制器/操作员)</h2><p id="4729" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">如果树懒作为控制器运行，你可以用<em class="lo"> Kubectl </em>自动提交一个类似的清单(它是一个<a class="ae lp" href="https://github.com/slok/sloth/tree/main/pkg/kubernetes/api/sloth/v1" rel="noopener ugc nofollow" target="_blank"> CRD </a>),树懒控制器将生成规则，并将它们存储为普罗米修斯规则，供<a class="ae lp" href="https://prometheus-operator.dev/" rel="noopener ugc nofollow" target="_blank">普罗米修斯操作者</a>使用。</p><p id="1942" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您可以使用以下命令运行控制器:</p><pre class="na nb nc nd gt nv nw nx ny aw nz bi"><span id="4d6a" class="nh lr iq nw b gy oa ob l oc od">sloth kubernetes-controller</span></pre><p id="b1aa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">获取k8s集群中创建的SLO及其状态:</p><pre class="na nb nc nd gt nv nw nx ny aw nz bi"><span id="736d" class="nh lr iq nw b gy oa ob l oc od">kubectl get slos --all-namespaces</span></pre><h2 id="3b5c" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">普罗米修斯法则</h2><p id="ab07" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">懒惰产生的普罗米修斯规则是标准化的。这将使所有SLO的可发现性变得容易，不缺乏信息，并且有一个统一的SLO系统。</p><p id="4fea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些规则可以分为3个方面:</p><ul class=""><li id="a302" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">SLI录音规则。</li><li id="04c4" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">SLO元数据记录规则。</li><li id="3891" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">多窗口-多燃烧警报规则。</li></ul><p id="fc15" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您可以使用这个Prometheus查询获得Sloth生成的所有指标:</p><pre class="na nb nc nd gt nv nw nx ny aw nz bi"><span id="c3e6" class="nh lr iq nw b gy oa ob l oc od">count({sloth_id!=””}) by (__name__)</span></pre><h2 id="d374" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">仪表盘</h2><p id="3234" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">如前所述，所有SLO共享相同的统一实现，因此我们可以创建一个通用的<a class="ae lp" href="https://grafana.com/grafana/dashboards/14348" rel="noopener ugc nofollow" target="_blank"> Grafana仪表板</a>来显示所有SLO状态:</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/bbcfc86ca53cec88fe3b2ab9229e26c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4TtLfijv0b4s00xxxSnDg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我的家庭无线体验SLO在树懒仪表板上。</figcaption></figure><p id="ac11" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">正如你已经知道的，Sloth删除了SLOs的配置棘手的部分，并假设安全的默认值，如月(30d)时间窗口。这样，仪表板上就有一个错误预算消耗图，可以看到每月的预算情况，并据此做出决定(我想也可以设置为每周7天。如果你认为这将是有趣的，请使用评论或GH问题)。</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/1dda561025ebff6d528e16b025407657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ohX1yqIOfbQKDVka2-buw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我的家庭wifi体验SLO错误预算月烧毁图表。</figcaption></figure><h2 id="2dc0" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">警报</h2><p id="66dd" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">我们谈到了<a class="ae lp" href="https://sre.google/workbook/alerting-on-slos/" rel="noopener ugc nofollow" target="_blank">多窗口多燃烧</a>警报，Sloth实现了谷歌描述的标准，它们对于大多数情况来说足够好，因为它跟踪缓慢和快速的基于预算燃烧的错误警报。Sloth将创建两种类型的警报(每种都可以启用或禁用):</p><ul class=""><li id="2a04" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated"><strong class="ke ir">寻呼(关键)警报</strong>:马上注意</li><li id="c45d" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><strong class="ke ir">票(警)警</strong>:有些东西不太对，现在不用着急，有空再看一眼。</li></ul><p id="ae62" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你不需要考虑如何设置警报，因为与其他事情一样，Sloth会在这些不同的情况下设置安全的默认时间窗口来发出警报。</p><h1 id="6bf7" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">将来的</h1><p id="f866" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">而树懒的未来呢？</p><h2 id="b546" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">OpenSLO</h2><p id="377c" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">最近，<a class="ae lp" href="http://openslo.com/" rel="noopener ugc nofollow" target="_blank"> OpenSLO </a>已经作为SLO标准化规范发布。有趣的是，它是在树懒进化的同时被创造出来的，我们彼此并不了解。</p><p id="0ae5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">目前，我正在尝试将树懒规格改为OpenSLO规格。我不认为这将是100%兼容的(例如，OpenSLO没有任何关于警报的内容)，但是，如果我们在Sloth上停止支持OpenSLO，Sloths的规范将会一直保持，并且由于其简单性和全功能规范而成为一等公民。</p><p id="d5db" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">更新(2021/06/30): OpenSLO支持可用</strong></p><figure class="na nb nc nd gt jr"><div class="bz fp l di"><div class="og nu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">发布支持OpenSLO的v0.5.0版本</figcaption></figure><h2 id="39af" class="nh lr iq bd ls ni nj dn lw nk nl dp ma kn nm nn me kr no np mi kv nq nr mm ns bi translated">SLI插件</h2><p id="0eed" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">我对这个功能感到非常兴奋，很快就会推出，请在接下来的一周继续关注…</p><p id="b055" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">更新(2021/06/10): SLI外挂可用</strong> <a class="ae lp" href="https://github.com/slok/sloth/releases/latest" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">最新树懒发布</strong> </a></p><figure class="na nb nc nd gt jr"><div class="bz fp l di"><div class="og nu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">SLI插件发布解释它们的推特帖子</figcaption></figure><p id="aaf4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些是简单的Go文件，任何人都可以在树懒之外开发。Sloth将在启动时加载(传递一些标志以从文件系统读取)。从那时起，任何SLO都可以在SLI规范部分引用这些SLI插件，而不用编写Prometheus查询。您可以想象这种可扩展性的威力，举几个例子:</p><ul class=""><li id="0bf5" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">在公司级别的存储库上共享公共sli，这可以由一个团队或一组有经验的人来维护。</li><li id="8444" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">基于社区的SLI库(公共库、框架、库、应用程序)。</li><li id="93ce" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">复杂的普罗米修斯SLI查询使它们变得简单。</li><li id="bf34" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">避免在团队或公司的多个服务上重复查询…</li><li id="a67d" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">使用SLI插件学习，并作为例子来创建自己的。</li><li id="dffa" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">SLIs上查询的有效性和安全性。</li></ul><p id="ee59" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Sloth将有一个公共的SLI存储库，人们可以对其进行贡献，并且可以比以前更容易地设置SLOs。</p><h1 id="4585" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结论</h1><p id="5b74" class="pw-post-body-paragraph kc kd iq ke b kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">我很快地介绍了树懒能为你做什么，在<a class="ae lp" href="https://github.com/slok/sloth" rel="noopener ugc nofollow" target="_blank">树懒文档</a>上你可以更深入地阅读所有特性。</p><p id="5576" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">三言两语，我喜欢说树懒:</p><blockquote class="mt mu mv"><p id="4b4f" class="kc kd lo ke b kf kg kh ki kj kk kl km mw ko kp kq mx ks kt ku my kw kx ky kz ij bi translated">使SLO的应用变得简单易行。</p></blockquote><p id="d58e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果可以，尝试一些服务，你有<a class="ae lp" href="https://github.com/slok/sloth/releases/latest" rel="noopener ugc nofollow" target="_blank">预构建的二进制文件</a>，只需下载，创建一个简单的规范并生成你的普罗米修斯规则，在不到5分钟的时间内，你就可以启动并运行该服务的SLO，)</p><p id="7d0f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你能给我反馈，意见，或者如果你或你的公司已经在使用它…我将不胜感激！这种反馈激励了我很多。你可以用下面的评论或者GH问题:)</p><p id="590c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢你的阅读，并祝你快乐！</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/73634a11b1b026a8b975fbe9f065a3ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/1*s8Qt2UzpkKAXAA4ojGB7qw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">再见！</figcaption></figure><p id="506f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">哦，我忘了…</p><p id="6120" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">区块链！<em class="lo">(丁！2017) </em>，服网！<em class="lo">(丁！2019).</em></p></div></div>    
</body>
</html>