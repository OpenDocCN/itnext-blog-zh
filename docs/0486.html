<html>
<head>
<title>Create and showcase your own React UI library using Webpack 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Webpack 4创建和展示您自己的React UI库</h1>
<blockquote>原文：<a href="https://itnext.io/your-own-react-ui-library-using-webpack-4-creating-and-showcasing-tutorial-bc777300b039?source=collection_archive---------1-----------------------#2018-03-17">https://itnext.io/your-own-react-ui-library-using-webpack-4-creating-and-showcasing-tutorial-bc777300b039?source=collection_archive---------1-----------------------#2018-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2364a1ac0ec47789cc56721bcd68cf8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SdbWagCZ6YyyY2vJ."/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">泰勒·弗兰塔在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5f04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当在一个有多个项目的公司工作时，您可能希望有设计指南来确保一致性。如果您可以有一个展示您的风格化组件的橱窗，并且仍然能够在其他项目中使用这些组件，就像安装一个npm包一样简单，那会怎么样？</p><p id="9c2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本教程展示了如何使用<a class="ae kc" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a> 4和<a class="ae kc" href="https://github.com/parcel-bundler/parcel" rel="noopener ugc nofollow" target="_blank">package bundler</a>构建一个可重用组件库，展示它们，并能够在其他项目中轻松导入。Webpack将负责处理组件库的捆绑。package bundler将处理组件展示柜的捆绑。</p><p id="09d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于本例，您将构建一个简单的文档展示和一个按钮作为共享组件。所有代码都在<a class="ae kc" href="https://github.com/pmadruga/myUI" rel="noopener ugc nofollow" target="_blank">https://github.com/pmadruga/myUI</a>上</p><h2 id="f251" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">你将要建造的东西</h2><ul class=""><li id="6a3b" class="lu lv iq kf b kg lw kk lx ko ly ks lz kw ma la mb mc md me bi translated">可以在其他项目中使用的UI组件库</li><li id="88bd" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">展示该库所有组件的橱窗</li></ul><p id="412a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们开始吧。🎉</p><h1 id="a414" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">文件夹结构</h1><p id="4cbb" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">让我们从创建一个文件夹结构开始。首先，让我们创建一个标准的文件夹结构。<code class="fe ne nf ng nh b">lib</code>文件夹将包含可重用的React组件，而<code class="fe ne nf ng nh b">docs</code>将包含这些组件的展示以及任何其他需要的文档(例如组件的API)。</p><p id="0f39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，文件夹结构如下所示:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="0a05" class="lb lc iq nh b gy nq nr l ns nt">src/<br/>|- docs<br/> |-index.html<br/> |-index.js<br/>|- lib<br/> |- index.js<br/> |- Button/<br/> |- index.js<br/>dist/<br/>webpack.config.js<br/>package.json</span></pre><h1 id="d62c" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">属国</h1><p id="90aa" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">这是你需要的一切:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="5a92" class="lb lc iq nh b gy nq nr l ns nt">// For showcasing our docs<br/>yarn add react react-dom</span><span id="27b8" class="lb lc iq nh b gy nu nr l ns nt">// For bundling our library and docs<br/>yarn add webpack parcel-bundler webpack-cli webpack-node-externals "babel-loader@^8.0.0-beta" @babel/core @babel/preset-env webpack-node-externals -D</span></pre><h1 id="4b21" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">lib/: react组件库</h1><p id="0f4d" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">我们的React可重用组件库。当捆绑到<code class="fe ne nf ng nh b">/dist/lib</code>中时，你可以在另一个项目中使用它们，通过快速安装成一个npm包，它可以是公共的(可以使用npm注册表)或者私有的(例如，可以使用gemfury)。在<code class="fe ne nf ng nh b">lib</code>文件夹下的<code class="fe ne nf ng nh b">index.js</code>将负责导出库的所有组件。对于这种情况，您将只导出一个简单的按钮。</p><p id="bc4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们的<code class="fe ne nf ng nh b">lib/index.js</code>包含了库导出的所有组件，(在这个例子中是一个简单的按钮)，所以它将包含</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="7e41" class="lb lc iq nh b gy nq nr l ns nt">export { Button };</span></pre><p id="6da2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe ne nf ng nh b">lib/Button/index.js</code>中，您将创建并导出一个简单的按钮。你也可以有样式，它仍然会被捆绑到一个文件中。</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="6e16" class="lb lc iq nh b gy nq nr l ns nt">import React from 'react';</span><span id="62ae" class="lb lc iq nh b gy nu nr l ns nt">const Button = ({ text }) =&gt; &lt;button&gt;{text}&lt;/button&gt;;</span><span id="8ef7" class="lb lc iq nh b gy nu nr l ns nt">export { Button };</span></pre><h1 id="f522" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">docs/:记录和展示组件</h1><p id="1cb5" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated"><code class="fe ne nf ng nh b">docs</code>文件夹将展示我们库的组件以及任何其他需要的文档(比如组件的API)。它只是我们主应用程序中的一个小的React应用程序。当捆绑到/dist/docs中时，它可以很容易地上传到任何地方。使用github页面将是一个很好的例子。</p><p id="5afb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您将创建和<code class="fe ne nf ng nh b">index.js</code>和<code class="fe ne nf ng nh b">index.html</code>，其中第一个包括来自<code class="fe ne nf ng nh b">lib</code>文件夹的组件。</p><p id="1954" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，<code class="fe ne nf ng nh b">index.js</code>将包含</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="6284" class="lb lc iq nh b gy nq nr l ns nt">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import { Button } from '../lib/Button';</span><span id="2dff" class="lb lc iq nh b gy nu nr l ns nt">const App = () =&gt; (<br/>  &lt;div&gt;<br/>    &lt;h1&gt;My UI&lt;/h1&gt;<br/>    &lt;h2&gt;Button&lt;/h2&gt;<br/>    &lt;p&gt;Here's an example of button.&lt;/p&gt;<br/>    &lt;Button text="Click me!" /&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="a45d" class="lb lc iq nh b gy nu nr l ns nt">ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));</span></pre><p id="f0be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有什么太花哨的，主要的要点是，可以看到有一个按钮是从组件库中导入的。</p><h1 id="bc7a" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">网络包.配置. js</h1><p id="9d50" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">如前所述，webpack负责捆绑组件库(而不是文档)。我们来看看它的配置。这里最重要的值是<code class="fe ne nf ng nh b">libraryTarget: ‘commonJS'</code>，它允许单独导出组件。</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="8eb4" class="lb lc iq nh b gy nq nr l ns nt">module.exports = {<br/>  entry: path.resolve(__dirname, 'src/lib/index.js'),<br/>  output: {<br/>    path: path.resolve(__dirname, './build/lib'),<br/>    filename: 'index.js',<br/>    library: '',<br/>    libraryTarget: 'commonjs'<br/>  },<br/>  externals: [nodeExternals()],<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.js$/,<br/>        exclude: /(node_modules|bower_components)/,<br/>        loader: 'babel-loader',<br/>        options: {<br/>          presets: ['@babel/preset-env', '@babel/react']<br/>        }<br/>      },<br/>      {<br/>        test: /\.css$/,<br/>        use: ['style-loader', 'css-loader']<br/>      }<br/>    ]<br/>  }<br/>};</span></pre><h1 id="cfbf" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">Package.json</h1><p id="e5ca" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated">package.json最重要的是“main”。在将库上传到注册表(无论是npm还是gemfury或其他)后，它会指示哪个文件将作为入口点。<code class="fe ne nf ng nh b">./dist/lib/index.js</code>包含了从<code class="fe ne nf ng nh b">lib</code>捆绑的所有代码。</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="4374" class="lb lc iq nh b gy nq nr l ns nt">{</span><span id="1368" class="lb lc iq nh b gy nu nr l ns nt">  "name": "myui",</span><span id="cee4" class="lb lc iq nh b gy nu nr l ns nt">  "version": "0.0.1",</span><span id="404e" class="lb lc iq nh b gy nu nr l ns nt">  "description": "Bootstrapping a UI component library",</span><span id="f005" class="lb lc iq nh b gy nu nr l ns nt">  "main": "./dist/lib/index.js",</span><span id="53d4" class="lb lc iq nh b gy nu nr l ns nt">  "scripts": {</span><span id="718b" class="lb lc iq nh b gy nu nr l ns nt">  "start": "./node_modules/.bin/parcel src/docs/index.html",</span><span id="a1f0" class="lb lc iq nh b gy nu nr l ns nt">  "build": "./node_modules/.bin/webpack --mode=production",</span><span id="6a41" class="lb lc iq nh b gy nu nr l ns nt">  "build:docs": "./node_modules/.bin/parcel build src/docs/index.js -d dist/docs/"</span><span id="6577" class="lb lc iq nh b gy nu nr l ns nt">},</span><span id="eeae" class="lb lc iq nh b gy nu nr l ns nt">  "author": "Pedro Madruga",</span><span id="05f7" class="lb lc iq nh b gy nu nr l ns nt">  "license": "MIT",</span><span id="9781" class="lb lc iq nh b gy nu nr l ns nt">  "dependencies": {</span><span id="92f6" class="lb lc iq nh b gy nu nr l ns nt">    "react": "^16.2.0",</span><span id="b266" class="lb lc iq nh b gy nu nr l ns nt">    "react-dom": "^16.2.0"</span><span id="1ce6" class="lb lc iq nh b gy nu nr l ns nt">},</span><span id="d1fd" class="lb lc iq nh b gy nu nr l ns nt">  "peerDependencies": {</span><span id="16a9" class="lb lc iq nh b gy nu nr l ns nt">    "react": "^16.2.0",</span><span id="880b" class="lb lc iq nh b gy nu nr l ns nt">    "react-dom": "^16.2.0"</span><span id="a286" class="lb lc iq nh b gy nu nr l ns nt">},</span><span id="c16b" class="lb lc iq nh b gy nu nr l ns nt">   "devDependencies": {</span><span id="c4ee" class="lb lc iq nh b gy nu nr l ns nt">   "@babel/core": "^7.0.0-beta.42",</span><span id="698d" class="lb lc iq nh b gy nu nr l ns nt">   "@babel/preset-env": "^7.0.0-beta.42",</span><span id="f6e6" class="lb lc iq nh b gy nu nr l ns nt">   "@babel/preset-react": "^7.0.0-beta.42",</span><span id="780f" class="lb lc iq nh b gy nu nr l ns nt">   "babel-core": "6",</span><span id="d975" class="lb lc iq nh b gy nu nr l ns nt">   "babel-loader": "^8.0.0-beta",</span><span id="c413" class="lb lc iq nh b gy nu nr l ns nt">   "parcel-bundler": "^1.6.2",</span><span id="0a8b" class="lb lc iq nh b gy nu nr l ns nt">   "webpack": "^4.1.1",</span><span id="8b0f" class="lb lc iq nh b gy nu nr l ns nt">   "webpack-cli": "^2.0.12",</span><span id="43b2" class="lb lc iq nh b gy nu nr l ns nt">   "webpack-node-externals": "^1.6.0"</span><span id="14ec" class="lb lc iq nh b gy nu nr l ns nt"> }</span><span id="0bde" class="lb lc iq nh b gy nu nr l ns nt">}</span></pre><h1 id="4c79" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">从另一个项目导入</h1><p id="c3ae" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko nb kq kr ks nc ku kv kw nd ky kz la ij bi translated"><strong class="kf ir">假设您的项目在某处发布</strong>(无论是npm还是gemfury)，这将很容易:</p><p id="bd91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ne nf ng nh b">yarn add myUI</code></p><p id="65da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在你的文件里:</p><p id="a81b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ne nf ng nh b">import { Button } from ‘myUI’</code></p><p id="1b96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样！记得在<a class="ae kc" href="https://github.com/pmadruga/myUI" rel="noopener ugc nofollow" target="_blank">https://github.com/pmadruga/myUI</a>中查看这个例子的存储库</p><p id="efc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">— — — —</p><p id="907e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我是一名软件工程师，也是一家打造MVP的公司<a class="ae kc" href="https://occam.ooo" rel="noopener ugc nofollow" target="_blank"><em class="nv">occam . ooo</em></a><em class="nv">的创始人🚀。我是</em> <a class="ae kc" href="http://scopecreeperspodcast.com" rel="noopener ugc nofollow" target="_blank"> <em class="nv"> Scope爬虫播客</em> </a> <em class="nv">的播客联合主持人🎤，开发者和项目经理就不同的软件开发主题发表见解。</em> <a class="ae kc" href="https://www.meetup.com/React-Native-CPH/" rel="noopener ugc nofollow" target="_blank"> <em class="nv">哥本哈根React Native Meetup</em></a><em class="nv">的协办单位👥一名志愿者帮助外国人融入丹麦。一个绝对的通过代码和同理心创造东西的粉丝。喜欢练拳击🥊。</em></p><p id="9ee5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nv">在推特上关注我</em><a class="ae kc" href="http://twitter.com/pedroforaday" rel="noopener ugc nofollow" target="_blank"><em class="nv">@ Pedro foraday</em></a><em class="nv">。</em></p></div></div>    
</body>
</html>