<html>
<head>
<title>Using WSL 2 to develop Java application on Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用WSL 2在Windows上开发Java应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/using-wsl-2-to-develop-java-application-on-windows-8aac1123c59b?source=collection_archive---------1-----------------------#2020-09-04">https://itnext.io/using-wsl-2-to-develop-java-application-on-windows-8aac1123c59b?source=collection_archive---------1-----------------------#2020-09-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="6896" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">比较使用Maven和Intellij Idea时WSL 2和Windows 10的性能</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/a985efc4402d5f9a903bf78f7fc668ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DRXWCAWQGioM8BzwTOR3A.png"/></div></div></figure><p id="f652" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">作为一名Java开发人员，如果您想在Windows上建立一个开发环境，您有三种选择(我的经验):</p><ul class=""><li id="5fa4" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">下载原生的JDK、Maven和… for Windows，并直接安装在Windows上。</li><li id="305d" class="lr ls iu kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">在VMWare或Virtualbox上安装一个桌面Linux发行版，然后在该虚拟机上安装JDK、Maven和……</li><li id="e217" class="lr ls iu kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">使用Multipass 安装一个<a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/how-to-have-a-clean-dev-environment-like-wsl-2-using-multipass-on-linux-mac-or-windows-6828a78b87d7"> Ubuntu服务器，然后使用<strong class="kx iv"> RDP </strong>连接到它(如果你在Ubuntu服务器上安装了桌面环境)，或者使用<strong class="kx iv"> X服务器</strong>如<strong class="kx iv"> VcXsrv连接到它。</strong></a></li></ul><p id="fdde" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">第一个选项是最直接的，但是如果您在开发过程中需要一些特定的Linux特性，它并不总是有效。第二个和第三个选项对于拥有Linux特性来说是好的，但是它们没有好的性能，并且消耗大量资源。</p><p id="349b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><strong class="kx iv">在本文</strong>中，我将介绍第四个选项(使用WSL 2和X Server)，并将其性能与第一个选项进行比较。</p><h2 id="81d3" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">什么是WSL 2</h2><p id="4857" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">WSL 2经过了彻底的改进，现在我们有了一个由微软构建的完整的Linux内核(<a class="ae mf" href="https://github.com/microsoft/WSL2-Linux-Kernel" rel="noopener ugc nofollow" target="_blank"> WSL2-Linux-Kernel </a>)，它运行在一个轻量级的实用VM(虚拟机)中。WSL 2中的虚拟化技术看起来不像传统的虚拟机(启动缓慢、孤立、消耗大量资源等等)，它在后台管理和运行，无需任何配置。</p><p id="866f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">您可以在此视频中了解更多关于WSL 2架构的信息:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="479f" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">您也可以阅读这篇文章来了解更多关于WSL 2架构和特性的信息:</p><div class="ng nh gq gs ni nj"><a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-about" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">关于WSL 2</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">WSL 2是一个新版本的体系结构，它支持Linux的Windows子系统在…上运行ELF64 Linux二进制文件</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">docs.microsoft.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kt nj"/></div></div></a></div><h2 id="072e" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">安装或更新WSL 2</h2><p id="8788" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">首先你需要在你的Windows机器上安装WSL 2。您可以一步一步地阅读下面的链接来安装WSL 2或将您当前的WSL 1升级到版本2。</p><div class="ng nh gq gs ni nj"><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">在Windows 10上安装用于Linux的Windows子系统(WSL)</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">在Windows上安装任何Linux发行版之前，您必须启用“Linux的Windows子系统”可选…</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">docs.microsoft.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kt nj"/></div></div></a></div><h2 id="9f89" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">发展环境</h2><p id="2f79" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">我使用这些SDK和工具运行了一个样本Java Spring Boot项目:</p><ul class=""><li id="37ea" class="lr ls iu kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae mf" href="https://www.jetbrains.com/idea/download/" rel="noopener ugc nofollow" target="_blank"> IntelliJ IDEA 2020.2.1(社区版)</a></li><li id="40cc" class="lr ls iu kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">AdoptOpenJDK(内部版本1.8.0_265-b01) ( <a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/install-several-versions-of-jdk-gradle-kotlin-scala-spark-and-on-your-os-in-parallel-a7de30f691ad">使用SDK </a>安装)</li><li id="adfb" class="lr ls iu kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">Apache Maven 3.6.3 ( <a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/install-several-versions-of-jdk-gradle-kotlin-scala-spark-and-on-your-os-in-parallel-a7de30f691ad">使用SDK </a>安装)</li></ul><p id="5273" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我使用了一个来自<a class="ae mf" href="https://www.manning.com/books/spring-in-action-fifth-edition" rel="noopener ugc nofollow" target="_blank"> Spring in Action，第五版</a>(第三章——tacos-JPA)的示例项目。为了在WSL 2 中获得最大的I/O性能，我保留了这个项目的两个副本，一个在NTFS文件系统中以便在Windows 10中使用，另一个在安装在WSL 2上的<strong class="kx iv"> Ubuntu 20.04 </strong> (ext4文件系统)中。</p><p id="d4ed" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">最后，我在Windows 10和WSL 2上安装了所有这些软件的相同版本(Ubuntu-20.04)。</p><h2 id="f106" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">在WSL 2中运行IntelliJ Idea GUI</h2><p id="0aa0" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">我最喜欢的IDE是IntelliJ IDEA (Community Edition)，目前，这个IDE没有像<a class="ae mf" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" rel="noopener ugc nofollow" target="_blank">VS Code Remote Development extension</a>这样的远程开发功能，因此，我在Windows 10上使用X Server(<a class="ae mf" href="https://sourceforge.net/projects/vcxsrv/" rel="noopener ugc nofollow" target="_blank"><strong class="kx iv">vcx SRV</strong></a>)来查看Windows中类似IntelliJ IDEA的WSL 2 GUI应用程序。为此，您可以通过此链接配置您的Windows 10和WSL 2:</p><div class="ng nh gq gs ni nj"><a href="https://techcommunity.microsoft.com/t5/windows-dev-appconsult/running-wsl-gui-apps-on-windows-10/ba-p/1493242" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">在Windows 10上运行WSL GUI应用程序</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">在这篇文章中，我将演示如何在Windows桌面上运行Linux GUI(图形用户界面)应用程序…</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">techcommunity.microsoft.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx kt nj"/></div></div></a></div><p id="0cce" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如果你想在Windows 10中使用WSL 2运行Linux GUI应用程序，只需从开始菜单中选择一个快捷方式，你可以关注这篇文章:</p><div class="ng nh gq gs ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/using-windows-10-as-a-desktop-environment-for-linux-7b2d8239f2f1"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">使用WSL 2在Windows 10中快捷地运行Linux GUI应用程序</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">使用Windows 10作为Linux的桌面环境</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">itnext.io</p></div></div><div class="ns l"><div class="oa l nu nv nw ns nx kt nj"/></div></div></a></div><p id="ea65" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">现在，您可以从WSL 2运行IntelliJ Idea，在windows中查看GUI，并开始在Linux上开发。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ob"><img src="../Images/cd0d9d07b4835c609514b4848b6995b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clvsyxFNjcnv-yvBPC4kcA.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">在WSL 2中运行IntelliJ Idea GUI</figcaption></figure><h2 id="804e" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">基准怎么跑？</h2><p id="78e9" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">我使用<a class="ae mf" href="https://github.com/sharkdp/hyperfine" rel="noopener ugc nofollow" target="_blank">超精细基准工具</a>在<code class="fe og oh oi oj b">tacos-jpa</code>项目上运行<code class="fe og oh oi oj b">mvn clean install</code>命令。</p><div class="ng nh gq gs ni nj"><a href="https://github.com/sharkdp/hyperfine" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">sharkdp/超精细</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk">中文 A command-line benchmarking tool. Statistical analysis across multiple runs. Support for arbitrary shell commands…</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">github.com</p></div></div><div class="ns l"><div class="ok l nu nv nw ns nx kt nj"/></div></div></a></div><h2 id="e29a" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">结果</h2><p id="09e3" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">我使用<a class="ae mf" href="https://github.com/sharkdp/hyperfine" rel="noopener ugc nofollow" target="_blank">超精细</a>运行了几次该基准测试，您可以看到其中一个样本:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ol"><img src="../Images/403f5595ce86e5c297f23318ab011bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ukJDrBS1E0QP82GnmlHCIA.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">Windows 10上的“mvn全新安装”(原生)</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj om"><img src="../Images/c6c4e8c5abcf2c44256706f8e0d3aa27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TZcrCMYrUzsHZ0hvanLwfw.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">WSL 2 (Ubuntu-20.04)上的“mvn全新安装”</figcaption></figure><p id="30c4" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">结果对我来说非常令人兴奋，正如你在这个结果中看到的，在WSL 2 (Ubuntu-20.04)上运行<code class="fe og oh oi oj b">mvn clean install</code>比在Windows 10(原生)上运行快大约<strong class="kx iv"> 30%。对于同一台机器上的其他尝试，该百分比介于<strong class="kx iv"> 25%到30% </strong>之间。</strong></p><p id="c52c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我在WSL 2 (Ubuntu-20.04)和Windows 10(原生)上尝试使用<code class="fe og oh oi oj b">Run/Debug Configuration Maven</code>在IntelliJ Idea(与我在终端中使用的JDK和Maven版本相同)中运行<code class="fe og oh oi oj b">mvn clean install</code>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj on"><img src="../Images/572b3919c08c7bc9376cf8941ab959c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*SsUTJKD5BZBfpRzwkdsgRg.png"/></div></figure><p id="ed81" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">而且我看到的几乎是之前的结果(22.203 s)，对于WSL 2 (Ubuntu-20.04)上的IntelliJ Idea，在ide内部手动运行多次<code class="fe og oh oi oj b">mvn clean install</code>之后。但是在这种情况下，两种方法之间的差异不是在25%到30%之间。如你所见，在WSL 2 (Ubuntu-20.04)上在ide内手动运行<code class="fe og oh oi oj b">mvn clean install</code>比在Windows 10(原生)上运行快大约<strong class="kx iv"> 20%。</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oo"><img src="../Images/047e1ac7f80cd081bd7f8b2c11cbbf5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Kva_tCQl4ZSrL6xGkYEaw.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">在WSL 2 (Ubuntu-20.04)上使用IntelliJ Idea的“mvn全新安装”</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj op"><img src="../Images/df56674fe1562733ae0ba93834c8e531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AL7s7-trCYiFssSXRcoiNQ.png"/></div></div><figcaption class="oc od gk gi gj oe of bd b be z dk translated">在Windows 10(原生)上使用IntelliJ Idea的“mvn全新安装”</figcaption></figure><h1 id="b708" class="oq mh iu bd mi or os ot ml ou ov ow mo ka ox kb mr kd oy ke mu kg oz kh mx pa bi translated">结论</h1><p id="035c" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">对于我来说，在使用Java SDKs和工具时，在Windows 10中拥有一个完整的Linux内核，并且具有比Windows native更好的性能(在<strong class="kx iv"> 20%到30% </strong>之间)是非常有价值的。通过这种方式，我可以在Windows上顺利地安装和使用Linux专用工具，如<strong class="kx iv"> Docker </strong>或<strong class="kx iv"> LXD </strong>。</p><h2 id="e42e" class="mg mh iu bd mi mj mk dn ml mm mn dp mo le mp mq mr li ms mt mu lm mv mw mx my bi translated">—更新:</h2><p id="d981" class="pw-post-body-paragraph kv kw iu kx b ky mz jv la lb na jy ld le nb lg lh li nc lk ll lm nd lo lp lq in bi translated">现在windows 11支持原生运行Linux GUI应用！我写了另一篇关于这个的文章。所以你不再需要这个配置了。</p><div class="ng nh gq gs ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/️using-wls-2-and-wslg-for-development-on-windows-11-final-part-70661bb3788c"><div class="nk ab fp"><div class="nl ab nm cl cj nn"><h2 class="bd iv gz z fq no fs ft np fv fx it bi translated">️Using WLS 2和WSLg在Windows 11上的开发(最终部分)</h2><div class="nq l"><h3 class="bd b gz z fq no fs ft np fv fx dk translated">现在windows 11支持原生运行Linux GUI应用！</h3></div><div class="nr l"><p class="bd b dl z fq no fs ft np fv fx dk translated">itnext.io</p></div></div><div class="ns l"><div class="pb l nu nv nw ns nx kt nj"/></div></div></a></div></div></div>    
</body>
</html>