<html>
<head>
<title>Chain of Responsibility Design Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">责任链设计模式</h1>
<blockquote>原文：<a href="https://itnext.io/chain-of-responsibility-design-pattern-99bc6df91237?source=collection_archive---------6-----------------------#2020-04-13">https://itnext.io/chain-of-responsibility-design-pattern-99bc6df91237?source=collection_archive---------6-----------------------#2020-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e9aa" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">SpringBoot应用程序中的实用概述</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fe8aa5a81d083619562b53df4fdcd5aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OlMTSRq37bNfxjGr"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@jjying?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> JJ英</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="6a5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">责任链</strong>设计模式是<a class="ae kv" href="https://en.wikipedia.org/wiki/Design_Patterns" rel="noopener ugc nofollow" target="_blank">四人组</a> (GoF)设计模式之一。</p><p id="f037" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它通常解决以下问题:</p><ul class=""><li id="45c1" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">应该避免将请求的发送方耦合到接收方</li><li id="3122" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">一个以上的接收者可以处理一个请求应该是可能的</li></ul><p id="5a86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">反正如果你想更进一步，更多信息可以在<a class="ae kv" href="https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="de89" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">让我们直接进入实际的…</h1><p id="8029" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在这个故事中，我们将看到如何从零开始创建一个Maven项目，将需要的依赖项导入到<em class="nd"> pom.xml </em>中，以及最后如何开发责任链设计模式。</p><h2 id="c950" class="ne mh iq bd mi nf ng dn mm nh ni dp mq lf nj nk ms lj nl nm mu ln nn no mw np bi translated">Maven原型和依赖性</h2><p id="07dd" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">首先，我们必须创建Maven项目。创建maven项目最容易和最简单的方法是从<a class="ae kv" href="http://maven.apache.org/archetypes/maven-archetype-quickstart/" rel="noopener ugc nofollow" target="_blank">快速入门Maven原型</a>开始:它生成一个示例Maven项目。</p><blockquote class="nq nr ns"><p id="9b06" class="kw kx nd ky b kz la jr lb lc ld ju le nt lg lh li nu lk ll lm nv lo lp lq lr ij bi translated"><em class="iq">显然，可以随意使用</em><a class="ae kv" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank"><em class="iq">spring boot Initializr</em></a><em class="iq">来执行这个任务</em>。</p></blockquote><p id="0223" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，打开一个新的终端，导航到您想要的位置，并复制粘贴以下命令；然后按回车。</p><pre class="kg kh ki kj gt nw nx ny nz aw oa bi"><span id="ba52" class="ne mh iq nx b gy ob oc l od oe">mvn archetype:generate \<br/>-DgroupId=com.mycompany.app \<br/>-DartifactId=my-app \<br/>-DarchetypeArtifactId=maven-archetype-quickstart \<br/>-DarchetypeVersion=1.4 \<br/>-DinteractiveMode=false</span></pre><p id="9adc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">干得好！现在您已经成功地创建了项目，让我们用您最喜欢的IDE打开它。</p><p id="0a82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先要做的是添加父标记，如下所示</p><pre class="kg kh ki kj gt nw nx ny nz aw oa bi"><span id="ff2e" class="ne mh iq nx b gy ob oc l od oe">&lt;parent&gt;<br/>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;<br/>    &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;<br/>&lt;/parent&gt;</span></pre><blockquote class="nq nr ns"><p id="5eae" class="kw kx nd ky b kz la jr lb lc ld ju le nt lg lh li nu lk ll lm nv lo lp lq lr ij bi translated">Maven从您的本地存储库中读取父<em class="iq"> pom </em>，然后它能够通过合并来自父模块和<em class="iq"> pom </em>模块的数据来创建一个有效的<em class="iq"> pom </em>。这样做的原因是有一个中心点来存储可以在所有模块中使用的信息。</p></blockquote><p id="b72c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在此之后，我们想要添加的唯一两个依赖项是<em class="nd">spring-boot-starter-web</em>和<a class="ae kv" href="https://projectlombok.org/" rel="noopener ugc nofollow" target="_blank"> <em class="nd"> Lombok </em> </a>。</p><pre class="kg kh ki kj gt nw nx ny nz aw oa bi"><span id="3a0e" class="ne mh iq nx b gy ob oc l od oe">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;<br/>&lt;/dependency&gt;</span><span id="e85d" class="ne mh iq nx b gy of oc l od oe">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;<br/>    &lt;artifactId&gt;lombok&lt;/artifactId&gt;<br/>    &lt;scope&gt;provided&lt;/scope&gt;<br/>&lt;/dependency&gt;</span></pre><p id="5391" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">真的很好！现在，我们准备开发我们的服务。</p><h2 id="c657" class="ne mh iq bd mi nf ng dn mm nh ni dp mq lf nj nk ms lj nl nm mu ln nn no mw np bi translated">责任链</h2><p id="a089" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">和许多其他人一样，我喜欢将类分为两类:<strong class="ky ir">事件</strong>和<strong class="ky ir">服务</strong>。</p><p id="0919" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事件是来自外部环境的所有那些对象，例如通过REST调用。另一方面，服务负责处理这些传入的事件。每个服务也负责回答这个问题:“我能够处理这个事件吗？”。如果答案是<strong class="ky ir"> yes </strong>，获取事件并处理。<strong class="ky ir">否则</strong>，让我们将事件传递给下一个服务/处理器，而不处理它。</p><h2 id="6b20" class="ne mh iq bd mi nf ng dn mm nh ni dp mq lf nj nk ms lj nl nm mu ln nn no mw np bi translated">事件</h2><p id="2f8c" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在本节中，我们将创建events类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">抽象事件类</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">事件类的具体事件子类</figcaption></figure><h2 id="222d" class="ne mh iq bd mi nf ng dn mm nh ni dp mq lf nj nk ms lj nl nm mu ln nn no mw np bi translated">服务</h2><p id="2063" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在，让我们转到服务。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">抽象处理程序</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">混凝土搬运工</figcaption></figure><p id="1e1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抽象处理程序类对于在链中自动注入所有具体的处理程序子类是至关重要的，我们将在下面看到。</p><h2 id="bc67" class="ne mh iq bd mi nf ng dn mm nh ni dp mq lf nj nk ms lj nl nm mu ln nn no mw np bi translated">配置</h2><p id="fe59" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">继续，创建一个能够准备所有需要的处理程序链的配置类。这里是所有处理程序被注入到链中的地方。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="2bf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显然，您必须修改主类，如下所示</p><pre class="kg kh ki kj gt nw nx ny nz aw oa bi"><span id="d88f" class="ne mh iq nx b gy ob oc l od oe">@SpringBootApplication<br/>public class App {</span><span id="3d72" class="ne mh iq nx b gy of oc l od oe">    public static void main(String[] args) {<br/>        SpringApplication.run(App.class, args);<br/>    }</span><span id="ad80" class="ne mh iq nx b gy of oc l od oe">}</span></pre><h2 id="d57a" class="ne mh iq bd mi nf ng dn mm nh ni dp mq lf nj nk ms lj nl nm mu ln nn no mw np bi translated">休息控制器</h2><p id="814f" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">SpringBoot应用程序如何接收传入事件？通过休息控制器。由于有了<strong class="ky ir"> @class字段</strong>(在抽象事件类中定义)，该控制器使用Jackson映射来获取传入事件的具体实例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div></figure><h1 id="86a6" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="8962" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">太好了！我们刚刚看到了如何在SpringBoot应用程序中开发责任链设计模式。</p><blockquote class="oi"><p id="205f" class="oj ok iq bd ol om on oo op oq or lr dk translated">如果你喜欢，请随意评论和鼓掌。</p></blockquote><p id="d2e4" class="pw-post-body-paragraph kw kx iq ky b kz ot jr lb lc ou ju le lf ov lh li lj ow ll lm ln ox lp lq lr ij bi translated">下一个故事再见！</p></div></div>    
</body>
</html>