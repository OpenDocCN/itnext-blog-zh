# 为什么应该包装异步请求的 5 个理由

> 原文：<https://itnext.io/5-ish-reasons-why-you-should-wrap-fetch-bbd072012536?source=collection_archive---------5----------------------->

![](img/848afd802590cfdbd0833a4abb233e46.png)

[蒙贝](https://unsplash.com/@mongbillablog?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

当您的应用程序扩展时，越来越多您可以做得更好、让您的生活更舒适的事情正在展现出来。

当然，你不能一开始就预测一切，也不应该在每个方面都格外小心。然而，当几率很高，成本很低时，我们应该从一开始就把事情做好。

因此，无论您是使用本机 fetch 还是其他什么库来触发您的异步请求，您都应该从第一天起就包装它并从一个集中的位置执行所有请求。以下是五个原因:

## 1.更好的日志记录体验

有没有发现自己陷入了异步请求中？我想几乎每次都是这样。让我们在全新的获取包装中免费获得它:

我们不要每次都提到`GET`了。

## 2.避免重复提取选项

您的异步请求可能会在整个应用程序中共享一些公共设置。让我们通过将它们嵌入到我们的 fetch 包装中来停止一次又一次地复制和粘贴它们。例如:

## 3.预加载器

嗯，你可能迟早需要一个，而且每次照顾它都不是一件愉快的事。

## 4.实现一次错误处理

实现一次错误处理。例如，让我们来处理 API 错误:

## 5.面向未来

每当您想要开始使用或更改异步请求库时，或者每当出现与异步请求相关的新需求时(例如，实现 CSRF 支持)，您宝贵的 fetch 包装器都会让您的生活变得轻松。

## 还有一些额外的好处:

*   将 fetch 包装器实现为单例或使用全局变量作为助手，可以让您对异步请求进行排队，以实现负载平衡、优先级排序等。
*   对于取消冗余请求也是如此(例如:在 autocomplete 中)。
*   增加了一个延迟选项，这可能对自动保存功能有用。
*   使用 fetch 包装器作为后端和前端之间的适配器。

灵感来了？请随意提及一些其他可以使用 fetch 包装器实现的疯狂的东西。

如果您觉得这篇文章有帮助，请点击👏按钮。欢迎在下面评论或给我发电子邮件到 orenykb@gmail.com。