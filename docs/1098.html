<html>
<head>
<title>Sharing the UI router between AngularJS and Angular 6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AngularJS和Angular 6之间共享UI路由器</h1>
<blockquote>原文：<a href="https://itnext.io/sharing-the-ui-router-between-angularjs-and-angular-6-84f6370ec557?source=collection_archive---------0-----------------------#2018-07-22">https://itnext.io/sharing-the-ui-router-between-angularjs-and-angular-6-84f6370ec557?source=collection_archive---------0-----------------------#2018-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/23b3ef73a63db4c57fb00a569f8c23db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aHsiNjXOAw0Cbq-P8nO8bw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">在AngularJS和Angular 6之间共享UI路由器</figcaption></figure><div class=""/><p id="5402" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我之前的一些帖子里，<a class="ae la" href="https://medium.com/@roelofjanelsinga/angularjs-angular-v6-hybrid-finally-97ac37087de1" rel="noopener">“Angular js+Angular(V6)hybrid(终于！)"</a>和<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/sharing-state-between-angularjs-and-angular-v6-with-redux-75e3abe7f4f3">" Angular js和Angular v6与Redux共享状态"</a>，我已经记录了制作一个混合AngularJS/Angular应用程序的过程。</p><p id="577f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">到目前为止，我已经解释了如何设置Angular应用程序来显示AngularJS和Angular内容(从现在开始，我将使用Angular来指代Angular 6，AngularJS来指代版本v1.x)。随着我在转换应用程序方面的进步，我已经到了开始将整个页面转换成棱角状的时候了。要做到这一点，你可以将整个页面降级为AngularJS指令和组件，并将其注入AngularJS UI路由器，或者你可以使用我发现的一个很棒的包。我们用那个包吧！</p><h1 id="4cc3" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Angular UI混合路由器</h1><p id="b499" class="pw-post-body-paragraph kc kd jf ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">在我的AngularJS应用程序中，我使用的是UI路由器，而不是“普通的”Angular路由器。这样做的唯一原因是UI路由器给了我使用命名路由的选项，而不仅仅是URL。让我们开始这个过程。首先，使用NPM或纱线安装包装:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f7b5" class="mn lc jf mj b gy mo mp l mq mr">yarn add @uirouter/angular-hybrid</span></pre><p id="47b7" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">或者</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2f22" class="mn lc jf mj b gy mo mp l mq mr">npm install @uirouter/angular-hybird --save</span></pre><p id="182e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，在您的AppModule中，导入此模块:</p><figure class="me mf mg mh gt is"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="4430" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">好了，完成了！嗯…差不多了！遵循下一节中的设置步骤后，您可以在AngularJS UI布线中引用任何角度组件。</p><h1 id="9477" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在AngularJS应用程序中需要采取的步骤</h1><p id="8c38" class="pw-post-body-paragraph kc kd jf ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">按照<a class="ae la" href="https://github.com/ui-router/angular-hybrid#getting-started" rel="noopener ugc nofollow" target="_blank">软件包的GitHub页面</a>上描述的步骤，对您的AngularJS安装做一个小小的调整。这将确保AngularJS理解你在做什么。你可以在他们的GitHub页面上获得更多关于这个包<a class="ae la" href="https://github.com/ui-router/angular-hybrid" rel="noopener ugc nofollow" target="_blank">设置的信息。这里有非常重要的信息，以避免某些错误，并确保AngularJS路线和Angular路线得到合并，所以也看看那里。他们建议的Angular应用程序的更改我个人还没有实现，但是，我采取的步骤记录在</a><a class="ae la" href="http://Now you can just refer to any Angular component in your AngularJS UI routing." rel="noopener ugc nofollow" target="_blank">“引导应用程序”</a>一节中。如果你也需要实现其他步骤，就自己看看吧。</p><h1 id="a839" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">静态路由</h1><p id="d91c" class="pw-post-body-paragraph kc kd jf ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">你可能希望在你的AngularJS路由旁边开始建立一些角路由，这是非常容易的。下面我为所有我想在应用程序中显示的静态页面创建了一个模块。这里要特别注意UIRouterUpgradeModule。这次它没有使用forRoot()，而是使用了forChild()，请确保您也这样做。这为您在AppModule中创建的现有路由器提供了额外的路由。</p><figure class="me mf mg mh gt is"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6f76" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，在这之后，您可以简单地在您的AppModule中导入StaticPagesModule，您将能够查看您刚刚定义的角度路线上的页面。</p><h1 id="8462" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态路线</h1><p id="61f8" class="pw-post-body-paragraph kc kd jf ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">我们刚刚定义了一些静态路线，没有任何数据要解析，但普通应用程序大多数时候不会这样工作。您的页面需要数据来呈现列表、表格或您想要显示的任何内容。那么我们如何做到这一点呢？嗯，UI路由器提供了一些方法，这些方法记录得非常糟糕。我只是通过挖掘源代码找到了其中的一些，所以让我来帮助你。注意state对象中的resolve参数，查看我发现的三个不同的选项。可能有更多(或更好)的解决方案，但我至今没有找到。</p><figure class="me mf mg mh gt is"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="2624" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里有五种场景，第一种使用提供的字符串，可以在NgModule的providers部分找到。第二个使用与AngularJS UI路由器相同的语法。第三个选项只是提供一个类，UI路由器会自动解决这个问题。第四个选项类似于第一个选项，但是您可以内联提供一个值。第五个选项是第四个选项的变体，但是显示了您可以在解析器中注入一个解析器。被注入解析器的解析器将不会做任何事情，直到它的依赖被解析。</p><p id="5a76" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我个人最喜欢第三种方法，因为它保持路线干净。当一个路由不需要依赖注入时，你的最佳选择是选项1或2，这取决于你。如您所见，当您使用选项1和3时，您会得到这些“神奇的”路由和转换变量，UI路由器会为您提供这些变量。你可以在那里找到查询参数，你刚来的状态，和你要去的状态，并且可以用于像条件重定向这样的事情。</p><p id="e317" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有很多选项可供您解析数据，因此请找到最适合您的选项，并在整个路线中使用它。</p><h1 id="8cd7" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b75e" class="pw-post-body-paragraph kc kd jf ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">混合UI路由器帮助您将整个应用程序从AngularJS慢慢迁移到Angular。如果您愿意，您可以继续使用AngularJS UI路由器，并降级Angular组件以保持一切与AngularJS兼容，但无论如何，您迟早都需要进行转换。当你开始转换整个页面时，从混合路径开始，否则，从长远来看，你将做两倍的工作。Angular UI Hybrid Router帮助您从v1.x迁移到较新的版本，并保持路由状态对象几乎相同，因此不需要大量的重写。</p><p id="98c8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你对我如何更好地解释有任何提示或建议，请让我知道，我很乐意帮助你并向你学习。</p></div></div>    
</body>
</html>