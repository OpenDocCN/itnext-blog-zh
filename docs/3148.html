<html>
<head>
<title>Tutorial: Build a text translation app with Azure Cognitive Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">教程:用Azure认知服务构建文本翻译应用</h1>
<blockquote>原文：<a href="https://itnext.io/tutorial-build-a-text-translation-app-with-azure-cognitive-services-3dd7f5d013c4?source=collection_archive---------3-----------------------#2019-10-12">https://itnext.io/tutorial-build-a-text-translation-app-with-azure-cognitive-services-3dd7f5d013c4?source=collection_archive---------3-----------------------#2019-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0f64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本教程将借助一个文本翻译示例演示<a class="ae kl" href="https://azure.microsoft.com/services/cognitive-services/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure认知服务</a>的用法，该示例使用部署到<a class="ae kl" href="https://azure.microsoft.com/services/app-service/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure应用服务</a>的简单<a class="ae kl" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Golang </a>应用来实现</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/87250de96786aeabbb77f1e8a7a131f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3E7q1-fheTUKjHS3.png"/></div></div></figure><p id="be1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您将:</p><ul class=""><li id="e33c" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">获得Azure认知和Azure应用服务功能的概述</li><li id="8418" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">浏览一个简单而实用的例子，展示如何使用<a class="ae kl" href="https://docs.microsoft.com/azure/cognitive-services/translator/translator-info-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">认知翻译文本API </a></li><li id="2d47" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">了解如何设置、配置认知服务和应用服务以及应用部署</li></ul><blockquote class="lm ln lo"><p id="9c0e" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated">我希望得到您的反馈和建议😃就<a class="ae kl" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"><em class="iq">tweet/DM</em></a><em class="iq">或者掉个评论！</em></p></blockquote><h1 id="3e2e" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">概观</h1><p id="6f82" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">这里是正在使用的Azure服务的一个快速概述。</p><h1 id="6524" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">Azure认知服务</h1><p id="3ee0" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">Azure认知服务使开发者能够构建智能<a class="ae kl" href="https://docs.microsoft.com/azure/cognitive-services/cognitive-services-and-machine-learning?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> AI和机器学习驱动的</a>应用。它以SDK和API的形式提供了跨越视觉、<a class="ae kl" href="https://azure.microsoft.com/services/cognitive-services/directory/speech/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">语音</a>、<a class="ae kl" href="https://azure.microsoft.com/services/cognitive-services/directory/lang/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">语言</a>、<a class="ae kl" href="https://azure.microsoft.com/services/cognitive-services/directory/search/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">网络搜索</a>和<a class="ae kl" href="https://azure.microsoft.com/services/cognitive-services/directory/decision/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">决策</a>等领域的能力，从而使AI/ML更容易被广大开发人员使用。</p><p id="976c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本例中，我们将使用<a class="ae kl" href="https://docs.microsoft.com/azure/cognitive-services/translator/translator-info-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Translator Text API </a>，它允许您添加60多种语言的多语言用户体验，并且可以在任何硬件平台和任何操作系统上用于文本到文本的语言翻译。</p><blockquote class="lm ln lo"><p id="8c55" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq"> Azure认知服务也有</em> <a class="ae kl" href="https://docs.microsoft.com/azure/cognitive-services/cognitive-services-container-support?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Docker容器</em> </a> <em class="iq">的形式！</em></p></blockquote><h1 id="202b" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">Azure应用服务</h1><p id="c17e" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">Azure App Service使您能够以自己选择的编程语言构建和托管web应用、移动后端和RESTful APIs，而无需管理基础架构。<a class="ae kl" href="https://docs.microsoft.com/azure/app-service/containers/app-service-linux-intro?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">您可以在Linux上使用它</a>在Linux上本地托管web应用程序，以获得支持的应用程序堆栈，并支持多种语言的内置Docker映像<a class="ae kl" href="https://docs.microsoft.com/azure/app-service/containers/app-service-linux-intro?WT.mc_id=medium-blog-abhishgu#languages" rel="noopener ugc nofollow" target="_blank">，如Node.js、Java、Python </a>等。虽然我们使用Golang作为示例应用程序，但我们仍然可以在应用程序服务上托管它，因为它也支持自定义Docker图像！</p><h1 id="cf49" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">先决条件</h1><p id="09bc" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">你需要一个<a class="ae kl" href="https://docs.microsoft.com/azure/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">微软Azure账户</a>——如果你还没有的话，就去<a class="ae kl" href="https://azure.microsoft.com/free/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank">拿一个免费的</a>。另外，确保你已经安装了Azure CLI(应该很快！)</p><h1 id="d76a" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">代码演练…</h1><p id="cc88" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">在我们真正经历设置和部署过程之前，让我们花点时间浏览一下应用程序逻辑</p><blockquote class="lm ln lo"><p id="2176" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">该代码可在</em> <a class="ae kl" href="https://github.com/abhirockzz/azure-cognitive-translateapp" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> GitHub </em> </a>上获得</p></blockquote><p id="3146" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该应用程序有两个部分:</p><ul class=""><li id="0f7b" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">前端:用户可以使用它输入要翻译成特定语言的文本</li><li id="395c" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">后端:一个Go API，接受翻译请求，调用Azure认知服务API并将响应返回给用户</li></ul><blockquote class="lm ln lo"><p id="bd9c" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">来自</em> <a class="ae kl" href="https://docs.microsoft.com/azure/cognitive-services/translator/tutorial-build-flask-app-translation-synthesis?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">的用户界面本教程</em> </a> <em class="iq">被重新用于本例</em></p></blockquote><p id="41eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Go后端提供了一个简单的HTTP服务器。我们为UI注册了一个HTTP处理程序</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="74e4" class="nb lu iq mx b gy nc nd l ne nf">uiHandler := http.FileServer(http.Dir("ui"))<br/>http.Handle("/", uiHandler)</span></pre><p id="ed4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为翻译请求服务的另一个处理程序(为了简洁起见，只显示了代码的相关部分)</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="e312" class="nb lu iq mx b gy nc nd l ne nf">....<br/>http.HandleFunc(translateRoute, func(w http.ResponseWriter, r *http.Request) {<br/>	var userReq request<br/>	err := json.NewDecoder(r.Body).Decode(&amp;userReq)<br/>	response, err := translateText(userReq.Text, userReq.ToLang)<br/>	err = json.NewEncoder(w).Encode(&amp;response)<br/>})<br/>....</span></pre><p id="584e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，启动HTTP服务器</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="722e" class="nb lu iq mx b gy nc nd l ne nf">http.ListenAndServe(":"+port, nil)</span></pre><p id="b622" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ng nh ni mx b">translateText</code>函数负责调用文本翻译API。这是调用翻译器文本API的地方。API端点是以下内容的组合</p><ul class=""><li id="790e" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">作为环境变量(<code class="fe ng nh ni mx b">https://api.cognitive.microsofttranslator.com</code>)传递的基本端点，</li><li id="fbe9" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">一个后缀(<code class="fe ng nh ni mx b">/translate?api-version=3.0"</code>)和</li><li id="f28c" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">作为查询参数(<code class="fe ng nh ni mx b">to</code>)添加的目标语言代码(如<code class="fe ng nh ni mx b">en</code>代表英语)</li></ul><blockquote class="lm ln lo"><p id="8f80" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">如</em> <code class="fe ng nh ni mx b"><a class="ae kl" href="https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;to=de." rel="noopener ugc nofollow" target="_blank"><em class="iq">https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;to=de</em></a></code> <a class="ae kl" href="https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;to=de." rel="noopener ugc nofollow" target="_blank"> <em class="iq">。</em>T24】</a></p></blockquote><p id="2cd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请求体是一个简单的JSON有效负载，包含要翻译的文本</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="f32c" class="nb lu iq mx b gy nc nd l ne nf">func translateText(text, toLang string) (translateAPIResponse, error) {<br/>    ....<br/>    cognitiveServiceEndpoint := baseEndpoint + endpointSuffix + "&amp;to=" + toLang<br/>    reqBody := `[{'Text':'` + text + `'}]`<br/>    req, err := http.NewRequest(http.MethodPost, cognitiveServiceEndpoint, strings.NewReader(reqBody))</span><span id="56b1" class="nb lu iq mx b gy nj nd l ne nf">    req.Header.Add(subscriptionKeyHeader, subscriptionKey)<br/>    req.Header.Add("Content-Type", "application/json")</span><span id="5605" class="nb lu iq mx b gy nj nd l ne nf">    res, err := http.DefaultClient.Do(req)</span><span id="e0fd" class="nb lu iq mx b gy nj nd l ne nf">    var result translateAPIResponse<br/>    err = json.NewDecoder(res.Body).Decode(&amp;result)<br/>    return result, nil<br/>}</span></pre><p id="7573" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">认知服务订阅密钥和API端点所需的环境变量在<code class="fe ng nh ni mx b">init()</code>函数中进行检查，以便在未配置时快速失效</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="b69c" class="nb lu iq mx b gy nc nd l ne nf">func init() {<br/>    subscriptionKey = os.Getenv(subscriptionKeyEnvVar)<br/>    if "" == subscriptionKey {<br/>        log.Fatalf("Please set the %s environment variable", subscriptionKeyEnvVar)<br/>    }<br/>    baseEndpoint = os.Getenv(endpointEnvVar)<br/>    if "" == baseEndpoint {<br/>        log.Fatalf("Please set the %s environment variable", endpointEnvVar)<br/>    }<br/>}</span></pre><p id="5bba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您已经对基本逻辑有了一个大致的了解，让我们来启动并运行所有这些。我们将从建立Azure认知服务开始。</p><h1 id="369a" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">Azure认知服务设置</h1><p id="2b0f" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">创建一个新的Azure资源组来试用这个演示应用程序。</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="fcae" class="nb lu iq mx b gy nc nd l ne nf">export AZURE_RESOURCE_GROUP=[to be filled]<br/>export AZURE_LOCATION=[to be filled e.g. southeastasia]</span><span id="d4b6" class="nb lu iq mx b gy nj nd l ne nf">az group create --name $AZURE_RESOURCE_GROUP --location $AZURE_LOCATION</span></pre><p id="8c70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该会看到类似下面的响应</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="4fad" class="nb lu iq mx b gy nc nd l ne nf">{<br/>    "id": "/subscriptions/1234564b-6705-4cc2-b8ea-9a9036f8b42d/resourceGroups/foobar-resource-group",<br/>    "location": "southeastasia",<br/>    "managedBy": null,<br/>    "name": "foobar-resource-group",<br/>    "properties": {<br/>        "provisioningState": "Succeeded"<br/>    },<br/>    "tags": null,<br/>    "type": null<br/>}</span></pre><p id="e242" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要创建认知服务帐户，您需要:</p><ul class=""><li id="1dcb" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated"><code class="fe ng nh ni mx b">kind</code>您想要使用的服务-由于我们正在使用翻译文本服务，我们将选择<code class="fe ng nh ni mx b">TextTranslation</code></li></ul><blockquote class="lm ln lo"><p id="f6ed" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">用</em> <code class="fe ng nh ni mx b"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/cognitiveservices/account?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-cognitiveservices-account-list-kinds" rel="noopener ugc nofollow" target="_blank"><em class="iq">az cognitiveservices account list-kinds</em></a></code>找到可用认知服务列表 <code class="fe ng nh ni mx b"><em class="iq">kind</em></code> <em class="iq"/></p></blockquote><ul class=""><li id="b2b7" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">您需要的<code class="fe ng nh ni mx b">SKU</code>(定价层)——在本例中，您可以使用自由层SKU ( <code class="fe ng nh ni mx b">F0</code>)。要查找<code class="fe ng nh ni mx b">SKU</code>的详尽列表，请使用<code class="fe ng nh ni mx b">az cognitiveservices account list-skus --kind TextTranslation --location $AZURE_LOCATION</code></li></ul><blockquote class="lm ln lo"><p id="cb8e" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">文档</em>T4】</p></blockquote><p id="8f16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设置所需的环境变量</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="5f96" class="nb lu iq mx b gy nc nd l ne nf">export COGNITIVE_SERVICE_KIND=TextTranslation<br/>export COGNITIVE_SERVICE_SKU=F0<br/>export COGNITIVE_SERVICE_ACCOUNT_NAME=[to be filled e.g. text-translation-service]</span></pre><p id="a48c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要创建帐户</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="83bc" class="nb lu iq mx b gy nc nd l ne nf">az cognitiveservices account create \<br/>    --name $COGNITIVE_SERVICE_ACCOUNT_NAME \<br/>    --resource-group $AZURE_RESOURCE_GROUP \<br/>    --kind $COGNITIVE_SERVICE_KIND \<br/>    --sku $COGNITIVE_SERVICE_SKU \<br/>    --location $AZURE_LOCATION \<br/>    --yes</span></pre><blockquote class="lm ln lo"><p id="26fc" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">为</em><a class="ae kl" href="https://docs.microsoft.com/cli/azure/cognitiveservices/account?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-cognitiveservices-account-create" rel="noopener ugc nofollow" target="_blank"><em class="iq">az cognitive services账户创建</em> </a>的文档</p></blockquote><p id="d582" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要认知服务资源的密钥才能对其进行身份验证。</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="4872" class="nb lu iq mx b gy nc nd l ne nf">az cognitiveservices account keys list \<br/>    --name $COGNITIVE_SERVICE_ACCOUNT_NAME \<br/>    --resource-group $AZURE_RESOURCE_GROUP</span></pre><p id="5890" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该得到两个键作为JSON响应——您可以使用其中任何一个</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="e43e" class="nb lu iq mx b gy nc nd l ne nf">{<br/>"key1": "42d9a082a4242edbaffd42487db8d2ec",<br/>"key2": "2f2ce290b0ae4c42a428b7e6ebe34242"<br/>}</span></pre><p id="14e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，这些订阅密钥包含敏感信息，您不应共享它们。它们应安全储存并定期再生。</p><blockquote class="lm ln lo"><p id="917f" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">文档为</em> <code class="fe ng nh ni mx b"><a class="ae kl" href="https://docs.microsoft.com/cli/azure/cognitiveservices/account/keys?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-cognitiveservices-account-keys-list" rel="noopener ugc nofollow" target="_blank"><em class="iq">az cognitiveservices account keys list</em></a></code></p></blockquote><h1 id="9b0a" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">健全性检查</h1><p id="9f07" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">在继续下一步之前，请检查认知服务设置是否正常工作。您所需要的只是一种访问认知服务REST API的方法。在这种情况下，我使用<code class="fe ng nh ni mx b">curl</code>来测试文本<code class="fe ng nh ni mx b">Hello World</code>到德语(<code class="fe ng nh ni mx b">de</code>)的转换</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="218e" class="nb lu iq mx b gy nc nd l ne nf">export COGNITIVE_SERVICE_API_KEY=[fill in the api/subcription key obtained earlier]</span><span id="a8d2" class="nb lu iq mx b gy nj nd l ne nf">curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;to=de" -H "Ocp-Apim-Subscription-Key: $COGNITIVE_SERVICE_API_KEY" -H "Content-Type: application/json" -d "[{'Text':'Hello World'}]"</span></pre><blockquote class="lm ln lo"><p id="eac4" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><code class="fe ng nh ni mx b"><em class="iq">https://api.cognitive.microsofttranslator.com</em></code> <em class="iq">是翻译API </em>的基本HTTP端点</p></blockquote><p id="6e7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该看到这个带有<code class="fe ng nh ni mx b">"text": "Hallo Welt"</code>的JSON响应，它是翻译后的响应</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="4341" class="nb lu iq mx b gy nc nd l ne nf">[<br/>  {<br/>    "detectedLanguage": {<br/>      "language": "en",<br/>      "score": 1<br/>    },<br/>    "translations": [<br/>      {<br/>        "text": "Hallo Welt",<br/>        "to": "de"<br/>      }<br/>    ]<br/>  }<br/>]</span></pre><h1 id="52e2" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">为翻译应用程序构建Docker映像</h1><blockquote class="lm ln lo"><p id="9913" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated">这一步是可选的。你可以使用我在<a class="ae kl" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"><em class="iq">docker hub</em></a>上提供的预建图像 <code class="fe ng nh ni mx b"><a class="ae kl" href="https://hub.docker.com/r/abhirockzz/azure-translate" rel="noopener ugc nofollow" target="_blank"><em class="iq">abhirockzz/azure-translate</em></a></code> <em class="iq"/></p></blockquote><p id="aecb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用Docker文件构建您自己的映像，并将其推送到您选择的Docker注册表(公共/私有)。</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="4cc5" class="nb lu iq mx b gy nc nd l ne nf">docker build -t [REPOSITORY_NAME/YOUR_DOCKER_IMAGE:TAG] .<br/>//e.g.<br/>docker build -t [abhirockzz/azure-translate:latest] .</span><span id="5f0c" class="nb lu iq mx b gy nj nd l ne nf">//login to your registry<br/>docker login</span><span id="f503" class="nb lu iq mx b gy nj nd l ne nf">//push image to registry<br/>docker push [REPOSITORY_NAME/YOUR_DOCKER_IMAGE:TAG]</span></pre><blockquote class="lm ln lo"><p id="8631" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><a class="ae kl" href="https://docs.microsoft.com/azure/app-service/containers/tutorial-custom-docker-image?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">这里有一个教程</em> </a> <em class="iq">提供了一个如何将</em> <a class="ae kl" href="https://azure.microsoft.com/services/container-registry/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq"> Azure容器注册表</em> </a> <em class="iq">与Azure Web App </em>一起使用的例子</p></blockquote><h1 id="bcbd" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">设置并部署到Azure应用服务</h1><p id="5dff" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">是时候将我们的应用部署到云上了——让我们使用Azure应用服务快速完成这项工作。首先，创建一个应用服务计划，为我们的web应用运行定义一组计算资源。</p><blockquote class="lm ln lo"><p id="8d82" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">关于App服务计划的详细信息，请参见</em> <a class="ae kl" href="https://docs.microsoft.com/azure/app-service/overview-hosting-plans?toc=/azure/app-service/containers/toc.json&amp;WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">文档</em> </a> <em class="iq"/></p></blockquote><p id="001e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该计划与一个<code class="fe ng nh ni mx b">SKU</code>相关联——就像认知服务一样，你也需要为应用服务选择一个<code class="fe ng nh ni mx b">SKU</code>(定价层)。对于这个例子，我们将使用一个小层(<code class="fe ng nh ni mx b">B1</code>)。</p><blockquote class="lm ln lo"><p id="8104" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">接受的值有</em>和<code class="fe ng nh ni mx b"><em class="iq">B1, B2, B3, D1, F1, FREE, P1V2, P2V2, P3V2, PC2, PC3, PC4, S1, S2, S3, SHARED</em></code></p></blockquote><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="7076" class="nb lu iq mx b gy nc nd l ne nf">export APP_SERVICE_PLAN_NAME=[to be filled e.g. my-appsvc-plan]<br/>export APP_SERVICE_SKU=B1</span><span id="44d1" class="nb lu iq mx b gy nj nd l ne nf">az appservice plan create --name $APP_SERVICE_PLAN_NAME --resource-group $AZURE_RESOURCE_GROUP --sku $APP_SERVICE_SKU --is-linux</span></pre><blockquote class="lm ln lo"><p id="d4ca" class="jn jo lp jp b jq jr js jt ju jv jw jx lq jz ka kb lr kd ke kf ls kh ki kj kk ij bi translated"><em class="iq">文档</em>T4】</p></blockquote><p id="9acb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部署应用程序</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="765d" class="nb lu iq mx b gy nc nd l ne nf">export APP_NAME=[to be filled e.g. translateapp]<br/>export APP_DOCKER_IMAGE=[to be filled e.g. abhirockzz/azure-translate]<br/>export COGNITIVE_TRANSLATOR_TEXT_SUBSCRIPTION_KEY=[Cognitive Translator text API key obtained previously]<br/>export COGNITIVE_TRANSLATOR_API_BASE_ENDPOINT=https://api.cognitive.microsofttranslator.com</span><span id="5d55" class="nb lu iq mx b gy nj nd l ne nf">az webapp create --resource-group $AZURE_RESOURCE_GROUP --plan $APP_SERVICE_PLAN_NAME --name $APP_NAME --deployment-container-image-name $APP_DOCKER_IMAGE</span><span id="be55" class="nb lu iq mx b gy nj nd l ne nf">//add the environment variables required by the application</span><span id="41fe" class="nb lu iq mx b gy nj nd l ne nf">az webapp config appsettings set --resource-group $AZURE_RESOURCE_GROUP --name $APP_NAME --settings COGNITIVE_TRANSLATOR_TEXT_SUBSCRIPTION_KEY=$COGNITIVE_TRANSLATOR_TEXT_SUBSCRIPTION_KEY COGNITIVE_TRANSLATOR_API_BASE_ENDPOINT=$COGNITIVE_TRANSLATOR_API_BASE_ENDPOINT</span></pre><h1 id="67b9" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">尝试一些翻译！</h1><p id="8004" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">您应该能够使用浏览器访问您的web应用程序。只需导航至<code class="fe ng nh ni mx b">https://[APP_NAME].azurewebsites.net/</code>，例如<code class="fe ng nh ni mx b"><a class="ae kl" href="https://translateapp.azurewebsites.net/" rel="noopener ugc nofollow" target="_blank">https://translateapp.azurewebsites.net/</a></code></p><p id="76d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用该应用程序很简单。只需输入您想要翻译的文本，并从<strong class="jp ir">翻译到:</strong>下拉菜单中选择目标语言。如果一切顺利，您应该会在<strong class="jp ir">翻译文本:</strong>下看到结果！</p><h1 id="3080" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">一旦你完成了…</h1><p id="afe5" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">删除资源组以删除为认知服务和Azure应用服务创建的所有关联资源</p><pre class="kn ko kp kq gt mw mx my mz aw na bi"><span id="3ad4" class="nb lu iq mx b gy nc nd l ne nf">az group delete --name $AZURE_RESOURCE_GROUP --yes --no-wait</span></pre><h1 id="2825" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">外卖食品</h1><p id="7de3" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">这是一个简单的应用程序，但要理解的关键是，智能AI/ML驱动的应用程序只是一堆API调用，这要归功于Azure Cognitive Servies，它提供了大量的功能，如决策、语言、搜索、语音和视觉！我们使用Azure应用服务来托管应用，但你可以自由选择选项，如<a class="ae kl" href="https://docs.microsoft.com/azure/container-instances/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure容器实例</a>或<a class="ae kl" href="https://docs.microsoft.com/azure/aks/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Kubernetes服务</a>。</p><p id="1bfd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是本文的全部内容，请继续关注更多内容！如果你觉得有用，请点赞并关注😃😃</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div></div>    
</body>
</html>