<html>
<head>
<title>Jupyter Notebook Refactoring Series — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupyter笔记本重构系列—第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/jupyter-notebook-refactoring-series-part-2-899e40163ead?source=collection_archive---------1-----------------------#2020-06-30">https://itnext.io/jupyter-notebook-refactoring-series-part-2-899e40163ead?source=collection_archive---------1-----------------------#2020-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/600e68d41c1bd513720c9e3e11c7a5c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ERtdriFu8CEmV6EQn7lqMA.png"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="6f97" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">重构系列的目标</h1><p id="20b4" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">分享一些有用的技巧和诀窍，帮助数据科学家在Jupyter笔记本上编写干净且可重复的代码。让机器学习、开发、数据和软件工程师的生活变得更简单。</p><p id="efcb" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">这里看第一部<a class="ae mg" rel="noopener ugc nofollow" target="_blank" href="/jupyter-notebook-refactoring-series-part-1-adff1b44dfdb">。这部分专用于<strong class="lf ir">功能</strong>。</a></p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="d098" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">步骤1:警惕过早抽象</h1><p id="fedd" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在深入之前，让我们解释一下Python中的函数是什么。<strong class="lf ir">函数</strong>是一组执行特定任务的相关语句。它有助于将您的代码分割成更小的模块化代码块，避免重复，并使您的代码更加可重用。</p><p id="aa0d" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">Jupyter笔记本分析通常解释和记录<strong class="lf ir">正在发生的事情</strong>和<strong class="lf ir">为什么</strong>。要小心，因为一般的代码重构会大大降低笔记本的可读性。</p><p id="dd68" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">因此，在重构之前，请三思</p><ul class=""><li id="dbad" class="mh mi iq lf b lg mb lk mc lo mj ls mk lw ml ma mm mn mo mp bi translated">哪些部分可以在将来的分析中重复使用，并转换成独立的库；</li><li id="9b20" class="mh mi iq lf b lg mq lk mr lo ms ls mt lw mu ma mm mn mo mp bi translated">哪些部分应该被提取并转换成预处理、训练、后处理脚本或包；</li><li id="216d" class="mh mi iq lf b lg mq lk mr lo ms ls mt lw mu ma mm mn mo mp bi translated">哪些部分应该保持原样。</li></ul></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="5418" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">第二步:轻松制作视觉效果</h1><p id="36a8" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">EDA(探索性数据分析)通常包含大量的可视化内容。我经常看到许多多余的代码一次又一次地产生相同类型的情节。</p><p id="59fb" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">例如，您想要绘制分类值和预测中值目标之间的关系。</p><p id="89a3" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">而不是用Python来做:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="7e45" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">遵循DRY原则(不要重复自己)，定义一个函数，并使用类型提示:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="8362" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">如果你想改变目标列呢？更好的选择是:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="6605" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">步骤3:用lambda应用()</h1><p id="28ad" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">熊猫<a class="ae mg" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html" rel="noopener ugc nofollow" target="_blank">。apply() </a>方法非常强大。它采用一个函数并将其应用于数据框。</p><p id="63c9" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">然而，如果你的lambda太复杂，难以阅读:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="26c8" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">用记录的函数替换注释和lambda:</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="mz na l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="caa8" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">结论</h1><p id="3314" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本系列的第二部分中，我们简要介绍了函数。我们从防止过早抽象的一些预防措施开始。然后转移到轻松产生视觉效果的函数。最后，我们触摸了熊猫。apply()方法。</p><p id="3788" class="pw-post-body-paragraph ld le iq lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma ij bi translated">下一部分将是关于矢量化和单元测试。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="5ac5" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">进一步阅读</h1><ul class=""><li id="f076" class="mh mi iq lf b lg lh lk ll lo nb ls nc lw nd ma mm mn mo mp bi translated"><a class="ae mg" href="https://realpython.com/python-type-checking/" rel="noopener ugc nofollow" target="_blank">Python中的类型提示</a></li><li id="2b8e" class="mh mi iq lf b lg mq lk mr lo ms ls mt lw mu ma mm mn mo mp bi translated"><a class="ae mg" href="https://thispointer.com/pandas-apply-apply-a-function-to-each-row-column-in-dataframe/" rel="noopener ugc nofollow" target="_blank"> pandas.apply():对数据帧中的每一行/列应用一个函数</a></li><li id="7ad7" class="mh mi iq lf b lg mq lk mr lo ms ls mt lw mu ma mm mn mo mp bi translated"><a class="ae mg" href="https://towardsdatascience.com/apply-and-lambda-usage-in-pandas-b13a1ea037f7" rel="noopener" target="_blank">在熊猫中应用和使用λ</a></li><li id="90ef" class="mh mi iq lf b lg mq lk mr lo ms ls mt lw mu ma mm mn mo mp bi translated"><a class="ae mg" href="https://treyhunner.com/2018/09/stop-writing-lambda-expressions/" rel="noopener ugc nofollow" target="_blank">在Python中过度使用lambda表达式</a></li></ul></div></div>    
</body>
</html>