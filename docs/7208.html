<html>
<head>
<title>Flutter Best Practices — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振最佳实践—第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-best-practices-part-2-e9e5c79ccb16?source=collection_archive---------0-----------------------#2022-07-16">https://itnext.io/flutter-best-practices-part-2-e9e5c79ccb16?source=collection_archive---------0-----------------------#2022-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9c77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始…</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/0af4a46dc3afc56d2ad2303e3e33950a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LTVS4NYbceKYJGkR8P0xIQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">颤振最佳实践</figcaption></figure><blockquote class="lb lc ld"><p id="458e" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">以下是其他几集</p><p id="85d1" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">第一集</p><p id="ac34" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated"><a class="ae li" href="https://medium.com/p/747f1bfaec6b" rel="noopener">第三集</a>第三集</p></blockquote><h1 id="d76e" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">视频教程</h1><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">颤振最佳实践—第2部分</figcaption></figure><p id="ea2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="le">以下是今天的五个最佳实践</em> </strong></p><h1 id="cd39" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">1.避免功能部件</h1><p id="6414" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">我们通常会遇到这样的情况，我们需要将UI代码从小部件中分离出来，但是我们避免创建单独的小部件，而是使用返回小部件的函数。这种做法有一些好处，比如你不需要在你的新部件中传递所有的参数，你有更少的代码和文件。但是当您想要检查小部件时，这种方法可能会引起问题。让我们深入了解一下这一点。</p><p id="d94c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你使用功能部件时，代码看起来像这样。</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="5028" class="mt lk iq mp b gy mu mv l mw mx">Widget functionWidget({ Widget child}) {<br/>  return Container(child: child);<br/>}</span></pre><p id="9612" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您现在可以将它用作</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="aaa5" class="mt lk iq mp b gy mu mv l mw mx">functionWidget(<br/>  child: functionWidget(),<br/>);</span></pre><p id="24ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，小部件树看起来会像这样</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="44c3" class="mt lk iq mp b gy mu mv l mw mx">Container<br/>  Container</span></pre><p id="66eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，如果我们使用小部件，我们的小部件看起来像</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="b70f" class="mt lk iq mp b gy mu mv l mw mx">class ClassWidget extends StatelessWidget {<br/>  final Widget child;<br/><br/>  const ClassWidget({Key key, this.child}) : super(key: key);<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return Container(<br/>      child: child,<br/>    );<br/>  }<br/>}</span></pre><p id="ca1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以将它用作</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="0dec" class="mt lk iq mp b gy mu mv l mw mx">ClassWidget(<br/>  child: ClassWidget(),<br/>);</span></pre><p id="7ba7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，小部件树看起来像这样</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="c77b" class="mt lk iq mp b gy mu mv l mw mx">ClassWidget<br/>  Container<br/>    ClassWidget<br/>      Container</span></pre><p id="caac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">优点</strong>:</p><ul class=""><li id="9c08" class="my mz iq jp b jq jr ju jv jy na kc nb kg nc kk nd ne nf ng bi translated">通过使用函数将小部件树分割成多个小部件，您将自己暴露在错误面前，并错过了一些性能优化。</li><li id="0e4c" class="my mz iq jp b jq nh ju ni jy nj kc nk kg nl kk nd ne nf ng bi translated">不能保证你<strong class="jp ir">使用函数会</strong>有bug，但是通过使用类，你<strong class="jp ir">保证</strong>不会面对这些问题。<br/>点击此<a class="ae li" href="https://stackoverflow.com/questions/53234825/what-is-the-difference-between-functions-and-classes-to-create-reusable-widgets/53234826#53234826" rel="noopener ugc nofollow" target="_blank">链接</a>了解更多信息。</li></ul></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h1 id="a6aa" class="lj lk iq bd ll lm nt lo lp lq nu ls lt lu nv lw lx ly nw ma mb mc nx me mf mg bi translated">2.指定变量的类型</h1><p id="cc76" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated"><em class="le">不要</em></p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="e295" class="mt lk iq mp b gy mu mv l mw mx">var count = 10;<br/>final person = Person();<br/>const timeOut = 6000;</span></pre><p id="b65e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="le">做</em></p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="610c" class="mt lk iq mp b gy mu mv l mw mx">final int count = 10;<br/>final Person person = Person();<br/>final String name = 'John Doe';<br/>const int timeOut = 6000;</span></pre><p id="32af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这可能是个人的选择，因为dart允许您在赋值时或在函数/类中不指定类型。根据您的个人喜好，您可能会/可能不会想要使用它。如果你在一个类/函数中直接赋值一个变量类型，编译器可能会给你一个警告。在这种情况下，您可以删除类型，但是当变量是全局变量时，最好保留类型。</p><h1 id="23aa" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">3.用is代替as</h1><p id="2162" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated"><em class="le">不要</em></p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="0996" class="mt lk iq mp b gy mu mv l mw mx">(item as Person).name = 'John Doe';</span></pre><p id="deff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="le">做</em></p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="4054" class="mt lk iq mp b gy mu mv l mw mx">if (item is Person)<br/>item.name = 'John Doe';</span></pre></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h1 id="38eb" class="lj lk iq bd ll lm nt lo lp lq nu ls lt lu nv lw lx ly nw ma mb mc nx me mf mg bi translated">4.如果列表较长，请使用列表中的项目范围</h1><p id="24d0" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">如果您想通过单击按钮或其他方式跳转到特定的索引，ItemExtent将极大地提高性能。</p><p id="fcee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">优点:指定一个itemExtent比让孩子决定他们的范围更有效，因为滚动已经知道孩子的范围以节省时间和精力。</p><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="270d" class="mt lk iq mp b gy mu mv l mw mx">class MyListView extends StatelessWidget {<br/>  final _scrollController = ScrollController();<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      floatingActionButton: FloatingActionButton(onPressed: () {<br/>        _scrollController.jumpTo(<br/>          _scrollController.position.maxScrollExtent,<br/>        );<br/>      }),<br/>      body: ListView(<br/>        controller: _scrollController,<br/>        children: List.generate(10000, (index) =&gt; Text('Index: $index')),<br/>        itemExtent: 600,<br/>      ),<br/>    );<br/>  }<br/>}</span></pre></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h1 id="4aa1" class="lj lk iq bd ll lm nt lo lp lq nu ls lt lu nv lw lx ly nw ma mb mc nx me mf mg bi translated">5.使用？？然后呢。。经营者</h1><pre class="km kn ko kp gt mo mp mq mr aw ms bi"><span id="3f48" class="mt lk iq mp b gy mu mv l mw mx">// Don't<br/>bool isValid =  done == null ? false : true;</span><span id="e8ec" class="mt lk iq mp b gy ny mv l mw mx">// Do<br/>bool isValid = done ?? false;</span><span id="38c0" class="mt lk iq mp b gy ny mv l mw mx">// Don't<br/>bool isValid = done == null ? null : a.b;<br/><br/>// Do<br/>bool isValid = a?.b;</span></pre><blockquote class="lb lc ld"><p id="b429" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">感谢阅读…</p></blockquote></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><blockquote class="lb lc ld"><p id="5674" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated"><strong class="jp ir">更多来了……</strong></p><p id="cb31" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated"><strong class="jp ir">敬请期待，成为颤振中的高手……</strong></p><p id="32bc" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">请在下面分享您的宝贵意见。</p><p id="aef6" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">更多<a class="ae li" href="https://www.coderzheaven.com/" rel="noopener ugc nofollow" target="_blank">教程</a></p><p id="dc0c" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated"><a class="ae li" href="https://www.youtube.com/user/coderzheaven" rel="noopener ugc nofollow" target="_blank">视频教程</a></p></blockquote></div></div>    
</body>
</html>