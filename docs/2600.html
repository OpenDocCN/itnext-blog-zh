<html>
<head>
<title>Immutability: good or bad?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不变性:好还是坏？</h1>
<blockquote>原文：<a href="https://itnext.io/immutability-good-or-bad-f6bfdfd54e70?source=collection_archive---------3-----------------------#2019-06-21">https://itnext.io/immutability-good-or-bad-f6bfdfd54e70?source=collection_archive---------3-----------------------#2019-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/857ec5f8b9ed06aa79189a623d9d7e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ofYbD4OmF9z2Wy_ZLdml6A.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">https://images.app.goo.gl/6KybdxPsoB6EgvvS9<a class="ae kf" href="https://images.app.goo.gl/6KybdxPsoB6EgvvS9" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="2fec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它从灌木丛中跑出来，看起来像只皮卡丘。我把我的扑克球扔向它，突然它变成了一个gyarados。那时我知道我有同上，一个最难在口袋妖怪go中找到的口袋妖怪。对于那些不熟悉同上的人来说，同上是一个口袋妖怪，它本身没有任何能力，可以变成任何其他口袋妖怪。有些人认为同上是最强大的口袋妖怪之一，但也可以很容易地认为它是最弱的口袋妖怪之一。</p><p id="227b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为什么我会在这里谈论口袋妖怪？原来一个同上可以有点像可变性。在编程中，可变性是我们将任何变量变成其他变量的能力。这里我想讨论一下使用不可变语言或者至少使用工具使语言不可变的好处。</p><p id="3faa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如在javascript es6中，我们可以将一个变量声明为<code class="fe le lf lg lh b">let</code>。</p><pre class="li lj lk ll gt lm lh ln lo aw lp bi"><span id="e3a2" class="lq lr it lh b gy ls lt l lu lv">let foo = 'blah'<br/>foo = 1</span></pre><p id="9dfa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">let</code>在javascript中是可变的。这意味着我们可以随时在本地范围内将它更改为我们想要的任何值。</p><p id="8dbb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能是非常强大的，因为我们有能力在任何时候将foo重新分配给我们想要的任何东西(如果你正在使用类似typescript的东西，你将不能改变那个变量的类型)。</p><p id="a37c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="lw">那么你为什么会关心永恒性呢？</em> </strong></p><p id="0a47" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中一个最大的原因是，很难预测在任何时间点每条数据都包含什么。或者换句话说，它增加了复杂性。可变数据本质上是复杂的，因为它可以改变。</p><p id="4203" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您开始接触线程或多处理，您必须开始考虑如何处理数据访问，并确保在需要时拥有正确的数据，而不是修改它。</p><p id="fa54" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们知道复杂性随着可变性的增加而增加。因为我们必须开始考虑如何确保我们拥有的数据不会在其他地方被修改。</p><p id="e781" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们开始看到不变性的一些地方是什么？T11】</p><p id="f4c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们前面看到的，javascript是一种可变的语言。但是我们看到人们正在开发工具来减少它的可变性。</p><p id="67a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">随着组分的引入而发生反应。我们开始看到不可变数据的力量。react中组件的概念是确保每个组件都有不变的变量，除非发生状态变化。这些状态变化应该被认为是对所有数据点的完全改变。一个新的数据槽。</p><p id="9acd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以将每个组件看作是整个解决方案中独立的、可测试的部分。</p><p id="9f38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个为不变性而创建的javascript工具是redux。在redux中，您可以运行一个缩减器，该缩减器为每个缩减器的迭代创建一个新的数据槽。这保证了数据是最新的。</p><p id="5cc7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我没有在项目中使用不变性，我应该开始吗？T3】</p><p id="26da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你的系统不够复杂，没有竞态条件和其他复杂的问题，那么没有。但是大多数系统都有某种竞态条件和异步行为。</p><p id="ec7d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不变性可能是修复给你带来问题的代码部分的好办法。</p><p id="66c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="lw">有没有内置不变性的好语言？</em> </strong></p><p id="d244" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，我们看到越来越多的语言采用了不变性的概念。这些似乎也是最受关注的语言或框架。</p><p id="58c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想了解一门关于不变性的语言，那就去看看erlang。或者更好地看看凤凰。Pheonix构建在erlang之上，它提供了一些很好的后端和前端工具，使erlang更容易使用。</p><p id="f4db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我是严肃对待不变性的项目的粉丝，因为它们更容易推理和调试。</p><p id="12de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你能做些什么来使你的代码更加不可变？T11】</p><p id="1a08" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有什么好主意，请告诉我。</p><p id="d736" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编码快乐！！</p></div></div>    
</body>
</html>