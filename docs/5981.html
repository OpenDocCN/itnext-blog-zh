<html>
<head>
<title>Jenkins Tutorial — Part 1 — Pipelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jenkins教程—第1部分—管道</h1>
<blockquote>原文：<a href="https://itnext.io/jenkins-tutorial-part-1-pipelines-bd1397cf5509?source=collection_archive---------3-----------------------#2021-07-18">https://itnext.io/jenkins-tutorial-part-1-pipelines-bd1397cf5509?source=collection_archive---------3-----------------------#2021-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/db33e99928c2f192994a88ecd2187b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b3aBoqHGrTbt8PvDvF6e-g.jpeg"/></div></div></figure><p id="a8de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Jenkins </strong>是最受欢迎的CI/CD平台之一，用于自动化CI/CD作业。今天，我打算谈谈詹金斯管道。所以让我们开始吧。</p><p id="2f9e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，如果您需要在Kubernetes上安装Jenkins stack，请在我的GitHub个人资料上关注<a class="ae kw" href="https://github.com/ssbostan/jenkins-stack-kubernetes" rel="noopener ugc nofollow" target="_blank"> jenkins-stack-kubernetes </a>。</p><h1 id="a959" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是管道？</h1><p id="11c8" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">流水线是一个作业的定义，它有一些分别执行的阶段。每个阶段都有一个步骤部分，其中包括完成该阶段应分别执行的命令。通过管道，我们定义了Jenkins应该如何为我们的应用程序完成CI/CD流程。可以说，管道运行所有以前由人工运行的进程。</p><h1 id="2687" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">脚本管道与声明管道:</h1><p id="9972" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Jenkins支持两种类型的管道定义。<br/> 1-用Groovy语言编写的脚本管道。2-用Jenkins DSL语言编写的声明性管道。<br/>我们打算谈谈更易读、更易学的Jenkins DSL语言。此外，在这种DSL语言中，我们也可以编写Groovy脚本。</p><h1 id="d4d7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Jenkins管道语法介绍:</h1><p id="d5d3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">下面是一个基本的管道示例。我们来描述一下。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="79c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个管道都以“管道”开始，每个管道都需要两个强制部分“代理”和“阶段”，它们定义了在哪里运行管道阶段以及应该运行什么来完成管道。每个阶段都应该定义一个唯一的名称，并且它们的“步骤”部分可以包含一个或多个在该阶段中运行的命令。</p><p id="8c29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，让我们更深入地描述管道指令…</p><p id="a6b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">管道指令:<strong class="ka ir">代理</strong></p><p id="7c91" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该指令指定在何处运行整个管道或特定阶段。</p><p id="7ac4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在任何可用的代理上执行管道或特定阶段。</p><p id="bf5e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mg mh mi mj b">agent none</code>用于禁用整个管道的全局代理。相反，我们应该在每个阶段定义代理。这里有一个例子:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="43dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mg mh mi mj b">agent label</code>用于执行整个管道或带有特定标签的节点上的特定阶段。这里有一个例子:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="cfd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mg mh mi mj b">agent docker</code>用于执行整个管道或docker容器内的特定阶段。这里有一个例子:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="716c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上述管道的所有阶段都在alpine容器的一个实例中执行。</p><p id="0bf8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该指令是一个特殊的docker相关指令，用于从项目源代码中的现有Docker文件构建Docker映像，并在该构建映像的实例中运行整个管道或特定阶段。要使用这个特殊的指令，您应该将Jenkins连接到您的源代码库，以便Jenkins能够与Dockerfile一起获取项目源代码。这里有一个简单的例子:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="0b2b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其他代理存在，但此时此刻，这些描述的代理应该足够了。另一个代理人如Kubernetes将在后面描述。</p><p id="8463" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">管道指令:<strong class="ka ir">阶段</strong></p><p id="8980" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mg mh mi mj b">stages</code>段包含一个或多个<code class="fe mg mh mi mj b">stage</code>指令。每个阶段都应该有一个唯一的名称。在每个阶段中，我们应该定义包含一个或多个要执行的步骤的<code class="fe mg mh mi mj b">steps</code>部分。</p><p id="ee6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">管道指令:<strong class="ka ir">步骤</strong></p><p id="7540" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mg mh mi mj b">steps</code>部分包含一个或多个应该作为该阶段的一项工作来执行的步骤。本节定义了自动化CI/CD流程应运行的所有任务。</p><p id="74a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下一篇文章中，我将描述可以在<code class="fe mg mh mi mj b">steps</code>部分运行的基本命令。关注我的个人资料。</p><p id="1d53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关注我的领英<a class="ae kw" href="https://www.linkedin.com/in/ssbostan" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/ssbostan</a></p></div></div>    
</body>
</html>