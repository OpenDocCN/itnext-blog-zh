<html>
<head>
<title>Test Secrets, Test Suites</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试秘密，测试套件</h1>
<blockquote>原文：<a href="https://itnext.io/test-secrets-test-suites-99f8390b8d4b?source=collection_archive---------2-----------------------#2021-04-28">https://itnext.io/test-secrets-test-suites-99f8390b8d4b?source=collection_archive---------2-----------------------#2021-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3d080e96d65490c947c751ae4f2cf578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PJl5c3v6SPSF5ouh_AQ-2A.png"/></div></div></figure><p id="6199" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你在谷歌甚至Reddit上的flutterdev论坛上快速搜索，你会空手而归。测试套件的编写只是一个秘密，因为它隐藏在SDK本身的深处。不要等到工作面试时才知道。</p><h1 id="0103" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">背景</strong></h1><p id="e228" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们编写测试套件，以确保UI组件的行为与我们对应用程序设计外观和行为的愿景一致。但是，如果它的构造方式不是用人类的母语；然后，需要更多的认知能力来理解测试通过或失败对那些编写添加到特定测试套件的单独测试的人意味着什么。</p><p id="3ff7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这通常是一个问题，因为当一个人的开发团队在一个月后再次查看代码时，他们已经忘记了代码序列，或者在一个扩展团队的情况下，通常是不同的团队成员编写单独的单元测试来扩展测试套件。</p><p id="de14" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我要感谢易贝大学的flutter应用程序开发团队对flutter SDK的深入研究，以及Flutter团队如何测试Flutter SDK，以找到扩展它的方法，使编写Flutter测试套件变得更加容易。</p><h1 id="fe6a" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">易贝的Give When Then和页面对象插件</strong></h1><p id="abb4" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们将使用易贝的flutter插件是give_when_then和page_object插件。您可以通过以下方式安装它们:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="d756" class="ml la it mh b gy mm mn l mo mp">dev_dependencies:</span><span id="08ad" class="ml la it mh b gy mq mn l mo mp">  given_when_then: ^0.2.0</span><span id="3071" class="ml la it mh b gy mq mn l mo mp">  page_object: ^0.2.0</span></pre><p id="4dcf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">和往常一样，我正在为我的第一本flutter dev书整理代码和设计资料，网址是:</p><p id="f855" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">【https://github.com/fredgrott/flutter_rose_glasses T4】</p><p id="a04d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个特殊的示例repo是fproject_layout repo:</p><p id="5e23" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae mr" href="https://github.com/fredgrott/fproject_layout" rel="noopener ugc nofollow" target="_blank">https://github.com/fredgrott/fproject_layout</a></p><p id="ead7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我将向您展示一个使用give_when_then插件的示例，即app_bar的测试:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="3739" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一个测试套件中总会有两个部分，装具和测试。它是通过扩展建立的，所以当我们编写单元测试时，它读起来几乎像真正的人类英语:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="3e80" class="ml la it mh b gy mm mn l mo mp">group('appbar test', () {</span><span id="04c0" class="ml la it mh b gy mq mn l mo mp">testWidgets('AppBar Title is FProject Layout', harness((given, when, then) async {</span><span id="7eb3" class="ml la it mh b gy mq mn l mo mp">await given.myAppExists();</span><span id="0542" class="ml la it mh b gy mq mn l mo mp">await when.appBarFound();</span><span id="d32a" class="ml la it mh b gy mq mn l mo mp">await then.appBarTitleIs();</span><span id="b103" class="ml la it mh b gy mq mn l mo mp">}));</span><span id="5dea" class="ml la it mh b gy mq mn l mo mp">});</span></pre><p id="1f4b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，当没有编写测试套件的人读到这句话时；理解测试测试什么有点容易。</p><p id="d93b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，让我们开始使用page_object。</p><h1 id="9bcb" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">页面对象</strong></h1><p id="70c7" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">页面对象只是提供了一种更好的方法，通过匹配和查找来抓取屏幕中的组件。我们以专柜app的首页画面为例。通常，我们有一个主页屏幕，如下所示:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="5b56" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们在测试文件夹中创建了一组页面对象:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="3cfa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后我们的主页测试套件变成:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="e852" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">满源</strong></h1><p id="4e07" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">完整的源代码，包括flutter counter应用程序，这是我自己修改的flutter应用程序模板，位于:</p><p id="6bfa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae mr" href="https://github.com/fredgrott/fproject_layout" rel="noopener ugc nofollow" target="_blank">https://github.com/fredgrott/fproject_layout</a></p><h1 id="a021" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">秘密</strong></h1><p id="0506" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">哦，你以为我们结束了！我确实在你眼皮底下偷偷摸摸的藏了些东西！让我们再来看看我们的应用程序栏测试:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="7bd1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你看到的是BDD测试！我们不需要去学习另一种语言！换句话说，我们将BDD和验收测试合并到我们以这种方式编写的每个测试套件中！</p><h1 id="9448" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">结论</strong></h1><p id="b1ab" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">虽然，是的，谷歌改变了一些东西，使我们可以在CI服务器上进行集成仪器测试是好的，但它也有其他真正的好处。我们可以在小部件测试和仪器测试中重用我们的测试技术和策略。</p><p id="02eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们还可以在使用易贝give_when_then和page_object插件的小部件测试中重用使用dart扩展创建可读BDD用例的技术。</p><h1 id="bf48" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">资源</strong></h1><p id="4e95" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">飘动玫瑰眼镜https://github.com/fredgrott/flutter_rose_glasses</p><p id="9039" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">https://github.com/fredgrott/fproject_layout项目布局</p><p id="f22d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一般颤振和飞镖资源；</p><p id="bcae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">https://flutter.dev/community颤振社区资源</p><p id="94e2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">颤振SDK https://flutter.dev/docs/get-started/install</p><p id="3e5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Android Studio IDE https://developer.android.com/studio</p><p id="c08b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">微软的Visual Studio代码https://code.visualstudio.com/</p><p id="1994" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">https://flutter.dev/docs颤振博士</p><p id="6428" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">https://dart.dev/guides dart Docs</p><p id="8569" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">谷歌Firebase移动设备测试实验室<a class="ae mr" href="https://firebase.google.com/docs/test-lab" rel="noopener ugc nofollow" target="_blank">https://firebase.google.com/docs/test-lab</a></p><h1 id="1fb1" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">商标公告</strong></h1><p id="c701" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Google LLC拥有以下商标:飞镖，颤振，机器人，机器人，诺托。苹果公司拥有iOS、MacOSX、Swift和Objective-C的商标。苹果公司拥有SF Pro、Sf Compact、SF mono和New York字体的商标。JetBeans Inc .拥有JetBeans、IntelliJ和Kotlin的商标。甲骨文公司拥有Java商标。微软公司拥有微软视窗操作系统和Powershell的商标。Gradle是Gradle Inc .的商标。Git项目拥有Git的商标。Linux基金会拥有Linux的商标。智能手机OEM自有商标到其手机产品名称。尽我所能，我遵守上述商标的品牌和使用指南。</p><h1 id="4fe2" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">关于弗雷德·格罗特</strong></h1><p id="9035" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我是一个疯狂的SOB，作为一名前android移动开发者，我开始写关于flutter移动应用程序开发、设计和生活的文章(见<a class="ae mr" href="https://fredgrott.medium.com/eff-covid-and-the-gop-e912db0548b8" rel="noopener"> Eff新冠肺炎和GOP </a>)。我会达到关键的每月100万观众大关吗？坐下来看。在<a class="ae mr" href="https://www.xing.com/profile/Fred_Grott/cv" rel="noopener ugc nofollow" target="_blank">邢</a>、<a class="ae mr" href="https://www.linkedin.com/in/fredgrottstartupfluttermobileappdesigner/" rel="noopener ugc nofollow" target="_blank"> LinkedIN </a>、<a class="ae mr" href="https://keybase.io/fredgrott" rel="noopener ugc nofollow" target="_blank"> Keybase </a>、<a class="ae mr" href="https://twitter.com/fredgrott" rel="noopener ugc nofollow" target="_blank"> Twitter </a>这些社交平台上找我。</p></div></div>    
</body>
</html>