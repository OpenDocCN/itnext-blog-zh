<html>
<head>
<title>Importance of testing and why you should start with testing your reducers now…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试的重要性以及为什么您应该现在就开始测试您的减速器…</h1>
<blockquote>原文：<a href="https://itnext.io/importance-of-testing-and-why-you-should-start-with-testing-your-reducers-now-e4acee0efaa5?source=collection_archive---------6-----------------------#2018-04-02">https://itnext.io/importance-of-testing-and-why-you-should-start-with-testing-your-reducers-now-e4acee0efaa5?source=collection_archive---------6-----------------------#2018-04-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/03f99f7a38ef25eefb0693f2ac11406c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aP5GeZXs380aiLx8Vnz7Kw.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图片来自rangle.io</figcaption></figure><blockquote class="kc kd ke"><p id="47c9" class="kf kg kh ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld ij bi translated"><a class="ae le" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fimportance-of-testing-and-why-you-should-start-with-testing-your-reducers-now-e4acee0efaa5%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank">点击这里在LinkedIn上分享这篇文章</a></p></blockquote><p id="1a04" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">如果你想成为顶尖的Angular(单页应用程序)工匠，你需要训练自己，从编写测试开始。这真的很重要，因为在今天的web开发中，有一种将业务逻辑从服务器端转移到客户端的趋势。</p><p id="4fd2" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">在数据库即服务、功能即服务、邮件即服务、认证即服务等时代。，我们倾向于拥有<strong class="ki ir">胖客户端</strong>和<strong class="ki ir">锡服务器</strong>。</p><p id="66a2" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">正因为如此，我们需要小心我们的业务逻辑，我们必须编写大量的测试来覆盖它。</p><p id="7364" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">在现实世界中，每个人都试图尽可能快地迭代，经常忘记写测试。一段时间后，编写测试和重构变得困难甚至不可能。这就是我们的应用程序开始崩溃的地方，这通常会导致失败。</p><p id="58c6" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">在Angular (angular-cli)中，我们有可能在每个组件中编写单元测试，并为整个应用程序编写端到端测试。</p><p id="9694" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">每个组件的单元测试(组件app.component.spec.ts旁边的测试文件)有助于显示组件是否正在编译以及它有哪些依赖关系。这是由Angular CLI自动生成的。</p><p id="b5d1" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">端到端测试可以验证我们软件的行为，它们就像验收测试一样，通常由QA团队编写。</p><p id="b2e0" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">我们不会关注上面提到的测试，因为我看到了使用它们的许多优点和缺点。这不是本文的主题；我们现在就跳过它们。</p><p id="ebe7" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">作为顶级工匠，我们将:</p><ul class=""><li id="9c93" class="li lj iq ki b kj kk kn ko lf lk lg ll lh lm ld ln lo lp lq bi translated">使用NgRx库进行我们的状态管理(甚至是UI状态)</li><li id="990b" class="li lj iq ki b kj lr kn ls lf lt lg lu lh lv ld ln lo lp lq bi translated">避免组件中的本地状态</li><li id="9868" class="li lj iq ki b kj lr kn ls lf lt lg lu lh lv ld ln lo lp lq bi translated">有很多愚蠢的成分</li><li id="66e3" class="li lj iq ki b kj lr kn ls lf lt lg lu lh lv ld ln lo lp lq bi translated">仅在路线下有智能组件</li></ul><p id="9c3e" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">如果我们遵循上面的规则，我们所有的业务逻辑将被隔离并存储在reducers中，这将使我们的应用程序可测试和可预测。</p><p id="589d" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">说到创建减压器、动作和效果，我强烈推荐使用<strong class="ki ir"> ngrx/schematics </strong>库，因为用它们我们会为减压器和效果生成规格文件。作为优秀的工匠，我们需要珍惜时间。</p><p id="34c5" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">对于showcase，让我们构建一个小应用程序。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="377c" class="mf mg iq mb b gy mh mi l mj mk"># install or update angular-cli<br/>npm install @angular/cli -g</span><span id="e012" class="mf mg iq mb b gy ml mi l mj mk"># generate app<br/>ng new ngrx-starter &amp;&amp; cd ngrx-starter</span><span id="83db" class="mf mg iq mb b gy ml mi l mj mk"># install ngrx dependencies<br/>npm install <a class="ae le" href="http://twitter.com/ngrx" rel="noopener ugc nofollow" target="_blank">@ngrx</a>/{store,effects,store-devtools} --save<br/>npm install <a class="ae le" href="http://twitter.com/ngrx/schematics" rel="noopener ugc nofollow" target="_blank">@ngrx/schematics</a> --save-dev</span><span id="3605" class="mf mg iq mb b gy ml mi l mj mk"># tell angular-cli to use ngrx schematics<br/>ng set defaults.schematics.collection=<a class="ae le" href="http://twitter.com/ngrx/schematics" rel="noopener ugc nofollow" target="_blank">@ngrx/schematics</a></span><span id="c4de" class="mf mg iq mb b gy ml mi l mj mk"># generate store <br/>ng generate store State --root --statePath store --module app.module.ts</span><span id="ea04" class="mf mg iq mb b gy ml mi l mj mk"># generate reducers and actions<br/>ng generate reducer Layout -g true --flat false --reducers store/index.ts<br/>ng generate action Layout -g true --flat false</span><span id="0e2e" class="mf mg iq mb b gy ml mi l mj mk">ng generate reducer Posts -g true --flat false --reducers store/index.ts<br/>ng generate action Posts -g true --flat false</span></pre><p id="9d97" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">在layout.reducer中，我们将存储应用程序范围的布局信息。例如:mega菜单是否打开，侧边栏是否可见等。</p><p id="da0c" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">在每个特性缩减器中，我们将存储与特性相关的UI事件，如加载、创建等。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/7f7b51c52ec165d7abdecd2dd34d83fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*bdBCAFsG1N3ShOUiWx3GIg.png"/></div></figure><p id="6944" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">让我们创建两个布局同步动作:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="c91b" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">import </strong>{ Action } <strong class="mb ir">from '@ngrx/store'</strong>;<br/><br/><strong class="mb ir">export enum </strong>LayoutActionTypes {<br/>  <em class="kh">LayoutSidebarVisibleAction </em>= <strong class="mb ir">'[Layout] Sidebar Visible Action'</strong>,<br/>  <em class="kh">LayoutMegaMenuOpenAction </em>= <strong class="mb ir">'[Layout] Mega Menu Open Action'<br/></strong>}<br/><br/><strong class="mb ir">export class </strong>LayoutSidebarVisible <strong class="mb ir">implements </strong>Action {<br/>  <strong class="mb ir">readonly type </strong>= LayoutActionTypes.<em class="kh">LayoutSidebarVisibleAction</em>;<br/><br/>  <strong class="mb ir">constructor</strong>(<strong class="mb ir">public readonly payload</strong>: <strong class="mb ir">boolean</strong>) {}<br/>}<br/><br/><strong class="mb ir">export class </strong>LayoutMegaMenuOpen <strong class="mb ir">implements </strong>Action {<br/>  <strong class="mb ir">readonly type </strong>= LayoutActionTypes.<em class="kh">LayoutMegaMenuOpenAction</em>;<br/><br/>  <strong class="mb ir">constructor</strong>(<strong class="mb ir">public readonly payload</strong>: <strong class="mb ir">boolean</strong>) {}<br/>}<br/><br/><strong class="mb ir">export type </strong>LayoutActions =  LayoutSidebarVisible | LayoutMegaMenuOpen;</span></pre><p id="edd6" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">我们将在layout.reducer中捕获它们</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="699a" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">import </strong>* <strong class="mb ir">as </strong>la <strong class="mb ir">from '../../actions/layout/layout.actions'</strong>;<br/><br/><strong class="mb ir">export interface </strong>State {<br/>  <strong class="mb ir">sidebarVisible</strong>: <strong class="mb ir">boolean</strong>;<br/>  <strong class="mb ir">megaMenuOpen</strong>: <strong class="mb ir">boolean</strong>;<br/>}<br/><br/><strong class="mb ir">export const </strong>initialState: State = {<br/>  <strong class="mb ir">sidebarVisible</strong>: <strong class="mb ir">true</strong>,<br/>  <strong class="mb ir">megaMenuOpen</strong>: <strong class="mb ir">false<br/></strong>};<br/><br/><strong class="mb ir">export function </strong><em class="kh">reducer</em>(state = initialState, action: la.LayoutActions): State {<br/>  <strong class="mb ir">switch </strong>(action.<strong class="mb ir">type</strong>) {<br/><br/>    <strong class="mb ir">case </strong>la.LayoutActionTypes.<em class="kh">LayoutSidebarVisibleAction</em>:<br/><br/>      <strong class="mb ir">return </strong>{ ...state, <strong class="mb ir">sidebarVisible</strong>: action.<strong class="mb ir">payload </strong>};<br/><br/>    <strong class="mb ir">case </strong>la.LayoutActionTypes.<em class="kh">LayoutMegaMenuOpenAction</em>:<br/><br/>      <strong class="mb ir">return </strong>{ ...state, <strong class="mb ir">megaMenuOpen</strong>: action.<strong class="mb ir">payload </strong>};<br/>      <br/>    <strong class="mb ir">default</strong>:<br/>      <strong class="mb ir">return </strong>state;<br/>  }<br/>}</span></pre><p id="31da" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">现在我们要为它们编写测试:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="53fe" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">import </strong>{ <em class="kh">reducer</em>, initialState } <strong class="mb ir">from './layout.reducer'</strong>;<br/><br/><strong class="mb ir">import </strong>* <strong class="mb ir">as </strong>la <strong class="mb ir">from '../../actions/layout/layout.actions'</strong>;<br/><br/><em class="kh">describe</em>(<strong class="mb ir">'Layout Reducer'</strong>, () =&gt; {<br/>  <em class="kh">describe</em>(<strong class="mb ir">'unknown action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should return the initial state'</strong>, () =&gt; {<br/>      <strong class="mb ir">const </strong>action = {} <strong class="mb ir">as any</strong>;<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toBe(initialState);<br/>    });<br/>  });<br/><br/>  <em class="kh">describe</em>(<strong class="mb ir">'LayoutSidebarVisible action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should set sidebar visibility to false'</strong>, () =&gt; {<br/><br/>      <strong class="mb ir">const </strong>action = <strong class="mb ir">new </strong>la.LayoutSidebarVisible(<strong class="mb ir">false</strong>);<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toEqual({... initialState, <strong class="mb ir">sidebarVisible</strong>: action.<strong class="mb ir">payload</strong>});<br/>    });<br/>  });<br/><br/>  <em class="kh">describe</em>(<strong class="mb ir">'LayoutMegaMenuOpen action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should set Mega Menu visibility to true'</strong>, () =&gt; {<br/><br/>      <strong class="mb ir">const </strong>action = <strong class="mb ir">new </strong>la.LayoutMegaMenuOpen(<strong class="mb ir">true</strong>);<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toEqual({... initialState, <strong class="mb ir">megaMenuOpen</strong>: action.<strong class="mb ir">payload</strong>});<br/>    });<br/>  });<br/>});</span></pre><p id="bf0f" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">如果你正在使用WebStorm，你可以通过点击右键菜单轻松运行测试。spec文件并运行它，您也可以对覆盖率做同样的事情。</p><p id="5cba" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">如果您更喜欢使用npm脚本，可以使用命令来完成</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="02bd" class="mf mg iq mb b gy mh mi l mj mk">npm test</span></pre><p id="2cf4" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated"><strong class="ki ir"> <em class="kh">如果你想从WebStorm运行整个测试套件，你可以点击karma.conf.js上的run，然后选择Run… </em> </strong></p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/b5c39d70406bb4ec1e30925bec98c3e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ws9X2_sqZ6hKYgb5JBuZBw.png"/></div></div></figure><p id="7c68" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">让我们对posts.actions做同样的事情</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="d286" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">import </strong>{ Action } <strong class="mb ir">from '@ngrx/store'</strong>;<br/><br/><strong class="mb ir">export enum </strong>PostsActionTypes {<br/>  <em class="kh">GetPostsAction </em>= <strong class="mb ir">'[Posts] Get Posts Action'</strong>,<br/>  <em class="kh">GetPostsActionSuccess </em>= <strong class="mb ir">'[Posts] Get Posts Success Action'</strong>,<br/>  <em class="kh">GetPostsActionFail </em>= <strong class="mb ir">'[Posts] Get Posts Fail Action'<br/></strong>}<br/><br/><strong class="mb ir">export class </strong>GetPosts <strong class="mb ir">implements </strong>Action {<br/>  <strong class="mb ir">readonly type </strong>= PostsActionTypes.<em class="kh">GetPostsAction</em>;<br/>}<br/><br/><strong class="mb ir">export class </strong>GetPostsSuccess <strong class="mb ir">implements </strong>Action {<br/>  <strong class="mb ir">readonly type </strong>= PostsActionTypes.<em class="kh">GetPostsActionSuccess</em>;<br/><br/>  <strong class="mb ir">constructor</strong>(<strong class="mb ir">public readonly payload</strong>: <strong class="mb ir">any</strong>) {}<br/>}<br/><br/><strong class="mb ir">export class </strong>GetPostsFail <strong class="mb ir">implements </strong>Action {<br/>  <strong class="mb ir">readonly type </strong>= PostsActionTypes.<em class="kh">GetPostsActionFail</em>;<br/><br/>  <strong class="mb ir">constructor</strong>(<strong class="mb ir">public readonly payload</strong>: <strong class="mb ir">any</strong>) {}<br/>}<br/><br/><strong class="mb ir">export type </strong>PostsActions = GetPosts | GetPostsSuccess | GetPostsFail;</span></pre><p id="c9af" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">和柱子。减速器</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="0f49" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">import </strong>* <strong class="mb ir">as </strong>pa <strong class="mb ir">from '../../actions/posts/posts.actions'</strong>;<br/><br/><strong class="mb ir">export interface </strong>State {<br/>  <strong class="mb ir">posts</strong>?: <strong class="mb ir">any</strong>;<br/>  <strong class="mb ir">loading</strong>?: <strong class="mb ir">boolean</strong>;<br/>}<br/><br/><strong class="mb ir">export const </strong>initialState: State = {<br/><br/>};<br/><br/><strong class="mb ir">export function </strong><em class="kh">reducer</em>(state = initialState, action: pa.PostsActions): State {<br/>  <strong class="mb ir">switch </strong>(action.<strong class="mb ir">type</strong>) {<br/><br/>    <strong class="mb ir">case </strong>pa.PostsActionTypes.<em class="kh">GetPostsAction</em>:<br/><br/>      <strong class="mb ir">return </strong>{ ...state, <strong class="mb ir">loading</strong>: <strong class="mb ir">true</strong>, <strong class="mb ir">posts</strong>: [] };<br/><br/>    <strong class="mb ir">case </strong>pa.PostsActionTypes.<em class="kh">GetPostsActionSuccess</em>:<br/><br/>      <strong class="mb ir">return </strong>{ ...state, <strong class="mb ir">loading</strong>: <strong class="mb ir">false</strong>, <strong class="mb ir">posts</strong>: action.payload };<br/><br/>    <strong class="mb ir">case </strong>pa.PostsActionTypes.<em class="kh">GetPostsActionFail</em>:<br/><br/>      <strong class="mb ir">return </strong>{ ...state, <strong class="mb ir">loading</strong>: <strong class="mb ir">false</strong>, <strong class="mb ir">posts</strong>: [] };<br/><br/>    <strong class="mb ir">default</strong>:<br/>      <strong class="mb ir">return </strong>state;<br/>  }<br/>}</span></pre><p id="bb1c" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">测试posts.reducer看起来像:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="f555" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">import </strong>{ <em class="kh">reducer</em>, initialState } <strong class="mb ir">from './posts.reducer'</strong>;<br/><strong class="mb ir">import </strong>* <strong class="mb ir">as </strong>pa <strong class="mb ir">from '../../actions/posts/posts.actions'</strong>;<br/><br/><em class="kh">describe</em>(<strong class="mb ir">'Posts Reducer'</strong>, () =&gt; {<br/>  <em class="kh">describe</em>(<strong class="mb ir">'unknown action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should return the initial state'</strong>, () =&gt; {<br/>      <strong class="mb ir">const </strong>action = {} <strong class="mb ir">as any</strong>;<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toBe(initialState);<br/>    });<br/>  });<br/><br/>  <em class="kh">describe</em>(<strong class="mb ir">'GetPostsAction action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should set loading to true'</strong>, () =&gt; {<br/>      <strong class="mb ir">const </strong>action = <strong class="mb ir">new </strong>pa.GetPosts();<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toEqual({ ...initialState, <strong class="mb ir">loading</strong>: <strong class="mb ir">true</strong>, <strong class="mb ir">posts</strong>: []});<br/>    });<br/>  });<br/><br/>  <em class="kh">describe</em>(<strong class="mb ir">'GetPostsActionSuccess action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should set loading to false and fetch posts'</strong>, () =&gt; {<br/>      <strong class="mb ir">const </strong>posts = [{ <strong class="mb ir">post</strong>: <strong class="mb ir">'Title' </strong>}];<br/>      <strong class="mb ir">const </strong>action = <strong class="mb ir">new </strong>pa.GetPostsSuccess(posts);<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toEqual({ ...initialState, <strong class="mb ir">loading</strong>: <strong class="mb ir">false</strong>, <strong class="mb ir">posts</strong>: posts });<br/>    });<br/>  });<br/><br/>  <em class="kh">describe</em>(<strong class="mb ir">'GetPostsActionFail action'</strong>, () =&gt; {<br/>    <em class="kh">it</em>(<strong class="mb ir">'should set loading to false and set posts to empty'</strong>, () =&gt; {<br/>      <strong class="mb ir">const </strong>action = <strong class="mb ir">new </strong>pa.GetPostsFail(<strong class="mb ir">'Unable to load posts'</strong>);<br/><br/>      <strong class="mb ir">const </strong>result = <em class="kh">reducer</em>(initialState, action);<br/><br/>      <em class="kh">expect</em>(result).toEqual({ ...initialState, <strong class="mb ir">loading</strong>: <strong class="mb ir">false</strong>, <strong class="mb ir">posts</strong>: [] });<br/>    });<br/>  });<br/>});</span></pre><p id="27f8" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated">所有这些完成后，我们将通过我们的哑组件使用角度指令实现每个标志的行为，如*ngIf，*ngFor，ngClass，style等。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="f6e5" class="mf mg iq mb b gy mh mi l mj mk">*ngIf="sidebarVisible"<br/>[ngClass]={'loading': loading}<br/>[ngClass]={'mega-menu-open': megaMenuOpen }<br/>....</span><span id="d672" class="mf mg iq mb b gy ml mi l mj mk">[ngClass]={'loading': loading}<br/>[ngClass]={'mega-menu-open': megaMenuOpen }<br/>....</span></pre><p id="0053" class="pw-post-body-paragraph kf kg iq ki b kj kk kl km kn ko kp kq lf ks kt ku lg kw kx ky lh la lb lc ld ij bi translated"><strong class="ki ir">我们假设所有的生态系统(Angular &amp; NgRx)都经过了良好的测试。</strong></p><h1 id="c606" class="mo mg iq bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">奖金</h1><p id="1d2b" class="pw-post-body-paragraph kf kg iq ki b kj nl kl km kn nm kp kq lf nn kt ku lg no kx ky lh np lb lc ld ij bi translated">如果你觉得每次运行测试都要打开新浏览器很烦人，我们可以通过编辑karma.conf.js从Chrome切换到Chrome headless模式</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="3902" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">browsers</strong>: [<strong class="mb ir">'ChromeHeadless'</strong>],<br/><strong class="mb ir">customLaunchers</strong>: {<br/>  <strong class="mb ir">ChromeHeadless</strong>: {<br/>    <strong class="mb ir">base</strong>: <strong class="mb ir">'Chrome'</strong>,<br/>    <strong class="mb ir">flags</strong>: [<br/>      <strong class="mb ir">'--headless'</strong>,<br/>      <strong class="mb ir">'--disable-gpu'</strong>,<br/>      <em class="kh">// Without a remote debugging port, Google Chrome exits immediately.<br/>      </em><strong class="mb ir">'--remote-debugging-port=9222'</strong>,<br/>    ],<br/>  }<br/>},<br/><strong class="mb ir">singleRun</strong>: <strong class="mb ir">true // run test suite only once</strong></span></pre></div></div>    
</body>
</html>