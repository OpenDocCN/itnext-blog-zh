<html>
<head>
<title>Overwrite Previously Printed Lines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">覆盖以前打印的行</h1>
<blockquote>原文：<a href="https://itnext.io/overwrite-previously-printed-lines-4218a9563527?source=collection_archive---------1-----------------------#2022-02-27">https://itnext.io/overwrite-previously-printed-lines-4218a9563527?source=collection_archive---------1-----------------------#2022-02-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="05a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Python中覆盖print语句的两种方法</h2></div><p id="208f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大家好，这里是Thijmen，在这篇文章中我将演示两种方法来使用<a class="ae lb" href="https://en.wikipedia.org/wiki/ANSI_escape_code" rel="noopener ugc nofollow" target="_blank"> ANSI转义sequence cues</a>用Python重写之前 <strong class="kh ir">打印的</strong> <strong class="kh ir">行</strong>。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="lh li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">这篇文章在YouTube上也有视频格式。</figcaption></figure><p id="2b8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想提供连续的输出 <em class="ln">而不弄乱屏幕，撤销打印语句会非常有用。</em></p><p id="432d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每种方法的实现和预期结果略有不同，所以使用哪种方法实际上取决于您的用例。一旦你理解了它们的工作原理，它们的优缺点就会变得显而易见，所以让我们马上开始第一种方法。</p><blockquote class="lo lp lq"><p id="e1ce" class="kf kg ln kh b ki kj jr kk kl km ju kn lr kp kq kr ls kt ku kv lt kx ky kz la ij bi translated">💡在本文中，我提供了一些背景知识，帮助您理解这些方法是如何工作的以及为什么工作。如果你更喜欢速战速决，有TL；博士垫底。</p></blockquote></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="3d05" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">方法1:回车</h1><p id="7350" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated"><em class="ln">快速</em>和<em class="ln">简单。</em></p><h2 id="32ba" class="my mc iq bd md mz na dn mh nb nc dp ml ko nd ne mn ks nf ng mp kw nh ni mr nj bi translated">摘要</h2><ol class=""><li id="d8c4" class="nk nl iq kh b ki mt kl mu ko nm ks nn kw no la np nq nr ns bi translated">打印行，但是以回车符而不是换行符结束。这将光标移回到打印行的开头。</li><li id="34ee" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">打印另一行，但是因为光标现在位于前一行的开头，新的输出将打印在前一行的顶部的<em class="ln">上。</em></li></ol><h2 id="4917" class="my mc iq bd md mz na dn mh nb nc dp ml ko nd ne mn ks nf ng mp kw nh ni mr nj bi translated">方法</h2><p id="2baf" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">默认情况下，Python的<code class="fe ny nz oa ob b">print</code>语句用一个换行符<code class="fe ny nz oa ob b">\n</code>结束传递给函数的每个字符串。这个行为可以用函数的<code class="fe ny nz oa ob b">end</code>参数覆盖，这是这个方法的核心。</p><p id="1511" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们没有用换行符结束输出，而是使用了回车符。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi oc"><img src="../Images/a722091f295c78a558eff350ac1d84b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YrPKnMRsMo3u0p9LVIajYg.png"/></div></div></figure><p id="88ed" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们用回车结束一条<code class="fe ny nz oa ob b">print</code>语句时，我们实质上是将光标<em class="ln"> </em>向后<em class="ln">移动到打印行</em>的开头，而不是移动到下一行。然后，如果我们打印另一个字符串，文本将打印在前一个字符串的“顶部”。在Python中，回车用<code class="fe ny nz oa ob b">\r</code>表示。</p><blockquote class="lo lp lq"><p id="84d0" class="kf kg ln kh b ki kj jr kk kl km ju kn lr kp kq kr ls kt ku kv lt kx ky kz la ij bi translated">💡最初，术语“回车”指的是打字机上的一种机械装置或杠杆，在打完一行文字后，它将机器的打印部件排回到纸的左侧。</p></blockquote><h2 id="728c" class="my mc iq bd md mz na dn mh nb nc dp ml ko nd ne mn ks nf ng mp kw nh ni mr nj bi translated">示例案例</h2><p id="1ce2" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">假设我们有一个简单的字符串，我们希望逐字符打印，每0.5秒打印一个字符:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="oj li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">示例案例(尚未覆盖)。</figcaption></figure><p id="02cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用默认的<code class="fe ny nz oa ob b">print</code>语句，如下所示:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ok"><img src="../Images/c1902ec03e1c8fedc0dfaf8f466e3794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dLZcfoIFARWHF4E5tjbD6A.gif"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">示例案例(尚未覆盖)。</figcaption></figure><p id="fb13" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在看看如果我们用回车来结束每个<code class="fe ny nz oa ob b">print</code>语句会发生什么:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="oj li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">方法1:示例案例(带回车)。</figcaption></figure><p id="6ede" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有字符都打印在同一行！</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/40d338e0422027114b160e0280701972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/1*7n_uM3F_2YhBAEcZ6NBvNw.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">方法1在实践中。</figcaption></figure><p id="dec2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">容易吧？不幸的是，这里有一个警告。因为我们基本上是在前一个输出的之上输出每个连续的<code class="fe ny nz oa ob b">print</code>语句<em class="ln">，所以打印一个比前一行更短的行是不可行的。</em></strong></p><p id="3799" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看看如果我们在循环结束时打印“done”会发生什么:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/ed78c6ca8bdb766a0ce60f869982cc59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/1*0HdsQMNL00u4z16tnxOQ7A.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">方法1警告:打印较短的行。</figcaption></figure><p id="2147" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过<strong class="kh ir">在打印更短的字符串之前清除前面的行</strong>来防止这种情况。</p><p id="125b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第6行的ANSI序列表明光标所在的行<em class="ln">应该被删除(注意for循环末尾的<code class="fe ny nz oa ob b">\r</code>)。通过使用<code class="fe ny nz oa ob b">LINE_CLEAR</code>变量作为<code class="fe ny nz oa ob b">end</code>参数，我们确保不打印额外的换行符。</em></p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="oj li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">方法一:工作实例。</figcaption></figure><h1 id="c810" class="mb mc iq bd md me om mg mh mi on mk ml jw oo jx mn jz op ka mp kc oq kd mr ms bi translated">方法二:“直截了当”</h1><p id="14aa" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">稍微复杂一点，但是<em class="ln">更清洁</em>输出和<em class="ln">更灵活</em><em class="ln"/>。</p><h2 id="c230" class="my mc iq bd md mz na dn mh nb nc dp ml ko nd ne mn ks nf ng mp kw nh ni mr nj bi translated">摘要</h2><ol class=""><li id="25bb" class="nk nl iq kh b ki mt kl mu ko nm ks nn kw no la np nq nr ns bi translated">打印行(默认以换行符结尾)。</li><li id="81bd" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">就在下一个<code class="fe ny nz oa ob b">print</code>语句之前:向上移动光标并清空该行。可以重复此操作来撤消多行打印。</li><li id="24b2" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">打印下一行。</li></ol><h2 id="c963" class="my mc iq bd md mz na dn mh nb nc dp ml ko nd ne mn ks nf ng mp kw nh ni mr nj bi translated">方法</h2><p id="32a2" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在这个方法中，我们不改变用于显示输出的<code class="fe ny nz oa ob b">print</code>语句的<code class="fe ny nz oa ob b">end</code>参数。相反，我们添加了一个额外的 <code class="fe ny nz oa ob b">print</code>语句，该语句使用两个ANSI转义码来清除前一行:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="oj li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">方法二:工作实例。</figcaption></figure><ol class=""><li id="78b8" class="nk nl iq kh b ki kj kl km ko or ks os kw ot la np nq nr ns bi translated">分配给<code class="fe ny nz oa ob b">LINE_UP</code>的ANSI代码表示光标应该上移一行。</li><li id="4f43" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">分配给<code class="fe ny nz oa ob b">LINE_CLEAR</code>的ANSI代码擦除光标所在的行(也用于第一种方法)。</li></ol><p id="b6b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，我们已经修改了<em class="ln"> extra </em> <code class="fe ny nz oa ob b">print</code>语句的<code class="fe ny nz oa ob b">end</code>参数，以防止打印默认换行符。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ou"><img src="../Images/2b2be1ff23b563066afeb6c09de8a965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EkPxuj4kC5aiy4Yd3e8XWg.gif"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">方法二在实践中。</figcaption></figure><p id="2d11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在功能上，这种方法为<strong class="kh ir">提供了两个优于第一种方法的优势</strong>:</p><ol class=""><li id="3030" class="nk nl iq kh b ki kj kl km ko or ks os kw ot la np nq nr ns bi translated">你不用担心下一行的长度。</li><li id="a987" class="nk nl iq kh b ki nt kl nu ko nv ks nw kw nx la np nq nr ns bi translated">光标不会在视觉上干扰打印行。</li></ol><p id="ea23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ln">整齐</em>对吧？</p><h1 id="1035" class="mb mc iq bd md me om mg mh mi on mk ml jw oo jx mn jz op ka mp kc oq kd mr ms bi translated">TL；速度三角形定位法(dead reckoning)</h1><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="oj li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">我们生活忙碌。我懂了。</figcaption></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="5753" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你从这篇文章中学到了一些新东西，请考虑订阅我的<a class="ae lb" href="https://www.youtube.com/channel/UCkihi0v-znRdhS_Fib4Vqxg" rel="noopener ugc nofollow" target="_blank"> YouTube频道</a>。谢谢！🙂</p><p id="e250" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章和相应的视频是我的Python片段系列的一部分，其中我们以字节大小的格式讨论了围绕Python编程的各种主题。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="od oe di of bf og"><div class="gh gi ov"><img src="../Images/3774283fb568ff5e06dc2c325c548090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qAwEeLq7lPG5iXH5MsQ6Pw.png"/></div></div></figure></div></div>    
</body>
</html>