<html>
<head>
<title>Laravel and Vue: Creating a Portfolio website with a CRUD admin panel — Chapter 17</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第17章</h1>
<blockquote>原文：<a href="https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-17-fe8fe8cb979f?source=collection_archive---------5-----------------------#2020-02-11">https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-17-fe8fe8cb979f?source=collection_archive---------5-----------------------#2020-02-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ad70" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">联系方式和电子邮件</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/62c275eebf18558f07669593a7369da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AOtVm-3F-nTv1fz6"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@melindagimpel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">梅林达·金佩尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b2f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们从表单组件开始，我们有一个包含id contact、h1 heading Contact和一个空表单元素的部分。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="faca" class="ma mb it lw b gy mc md l me mf">&lt;template&gt;<br/>    &lt;section id="contact"&gt;<br/>        &lt;h1&gt;Contact&lt;/h1&gt;<br/>        &lt;form&gt;<br/>            <br/>        &lt;/form&gt;<br/>    &lt;/section&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    export default {<br/>        name: "Contact"<br/>    }<br/>&lt;/script&gt;<br/><br/>&lt;style scoped&gt;<br/><br/>&lt;/style&gt;</span></pre><p id="e206" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在表单元素中，我们可以有:</p><ul class=""><li id="c296" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated">姓名的输入</li><li id="d0d5" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">电子邮件地址的输入</li><li id="dae5" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">消息的输入</li><li id="e78c" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">提交表单的输入<code class="fe mu mv mw lw b"><strong class="lb iu">input type="submit"</strong></code></li></ul><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0371" class="ma mb it lw b gy mc md l me mf">&lt;form&gt;<br/>    &lt;input type="text" placeholder="name"/&gt;<br/>    &lt;input type="text" placeholder="email"/&gt;<br/>    &lt;input type="text" placeholder="message"/&gt;<br/>    &lt;input type="submit"/&gt;<br/>&lt;/form&gt;</span></pre><p id="14f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到这样的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/a20e80ae628edbb04bccb4acc725ad3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CvJpOqHCBSKltGjJHPecGg.png"/></div></div></figure><p id="90a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在需要做一些造型</p><h2 id="3c54" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">式样</h2><p id="be4d" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">让我们将联系人部分的样式设置为有一个<code class="fe mu mv mw lw b"><strong class="lb iu">background</strong></code>，和完整的<code class="fe mu mv mw lw b"><strong class="lb iu">height</strong></code> <strong class="lb iu"> </strong>。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d59c" class="ma mb it lw b gy mc md l me mf">section#contact {<br/>    background: springgreen;<br/>    height:100vh;<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/e1fe379d66dc36b595a42f6b2a761a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-YWq058xeNOUHWLi_tHgw.png"/></div></div></figure><p id="4dee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将contact部分的内容居中。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="715d" class="ma mb it lw b gy mc md l me mf">section#contact {<br/>    background: springgreen;<br/>    height:100vh;<br/>    <strong class="lw iu">display: flex;<br/>    justify-content: center;<br/>    align-items: center;</strong><br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/864383813f35ddccb26721730d4b46c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNpmV_Y01E0ej4dKXpyLsg.png"/></div></div></figure><p id="ff17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们改变外观，使内容垂直显示。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7ef9" class="ma mb it lw b gy mc md l me mf">section#contact {<br/>    background: springgreen;<br/>    height:100vh;<br/>    display: flex;<br/>    justify-content: center;<br/>    align-items: center;<br/>    <strong class="lw iu">flex-direction: column;</strong><br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/396e2a29a6ef3542a07db8c8ef92c491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLQsFtYhT53yA7PQhbBQbw.png"/></div></div></figure><p id="0021" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也使形式垂直</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b0c7" class="ma mb it lw b gy mc md l me mf">section#contact form {<br/>    display: flex; <br/>    flex-direction: column;<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/b8a9c59d98dddf2828732393f085ba20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvMOkxtH2Cu5ynbgdol-Lw.png"/></div></div></figure><p id="3fb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输入太小，又太近，我们需要用<code class="fe mu mv mw lw b"><strong class="lb iu">width</strong> </code>把它们放大，用<code class="fe mu mv mw lw b"><strong class="lb iu">margin</strong></code>把它们拉开</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3cb9" class="ma mb it lw b gy mc md l me mf">input {<br/>    width: 500px;<br/>    margin: 10px 0;<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/34504b06527035906bf848496f522379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*jfy6b6_Ebsm18nQxWENqFw.png"/></div></figure><p id="8b74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们仔细观察，我们会发现<code class="fe mu mv mw lw b"><strong class="lb iu">&lt;input type="text"&gt;</strong></code> <strong class="lb iu"> </strong>元素比<code class="fe mu mv mw lw b"><strong class="lb iu">&lt;input type="submit"&gt;</strong></code> <strong class="lb iu"> </strong>元素更宽。这是因为这些输入有不同的<code class="fe mu mv mw lw b"><strong class="lb iu">box-sizing</strong></code> <strong class="lb iu">。</strong>让我们了解一下装箱尺寸<strong class="lb iu">。</strong></p><h2 id="09b0" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">盒子尺寸</h2><p id="9047" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">有两种类型的装箱规格。这些是<code class="fe mu mv mw lw b"><strong class="lb iu">content-box</strong></code>和<code class="fe mu mv mw lw b"><strong class="lb iu">border-box</strong></code>。<code class="fe mu mv mw lw b">&lt;input type="submit"&gt;</code> <strong class="lb iu"> </strong>的默认框尺寸为<strong class="lb iu">边框</strong>，而<code class="fe mu mv mw lw b">&lt;input type="text"&gt;</code>的默认框尺寸为<strong class="lb iu">内容框。</strong></p><p id="2813" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您查看<strong class="lb iu">提交输入</strong>的developer tools/inspect元素，您将在<strong class="lb iu">框模型下看到以下内容。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/580d91b4aa0816eea11b3fd1861f92da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*gNVDm9RMh5X6vSaExqE5iw.png"/></div></figure><p id="c90c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果框尺寸是border-box，浏览器将添加边框和填充作为设置宽度的<strong class="lb iu">部分。</strong></p><p id="0818" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果框的大小是内容框，浏览器将包括一个边框和填充，作为设置宽度的<strong class="lb iu">附加物。</strong></p><p id="0102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">提交</strong>的默认框大小是border-box，所以我们得到3+8+478+8+3 = 500px。</p><p id="89d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我们<code class="fe mu mv mw lw b"><strong class="lb iu">&lt;input type="text"&gt;</strong></code>的盒子模型:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/a6019c4a2dab402416c93bc41900f036.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*WEBl3dXath1GKeZbwua-OQ.png"/></div></figure><p id="fa4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本输入的默认框大小是内容框，所以我们得到1+2+500+2+1</p><p id="a3b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们了解了盒子大小，让我们回到样式上来。</p><h2 id="55cf" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated"><strong class="ak">回到造型</strong></h2><p id="529a" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">让我们给所有输入相同的框大小</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fe1a" class="ma mb it lw b gy mc md l me mf">input {<br/>    width: 500px;<br/>    margin: 10px 0;<br/>    box-sizing: border-box;<br/>}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/a3d031abc0d6bc506e9bec53b69b282e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*gC3Wu7nR2RdVmlPhF86a7w.png"/></div></figure><p id="924e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您在输入框中键入内容时，占位符文本会显示出来。在以下情况下，这可能是一个问题:</p><blockquote class="ny nz oa"><p id="c5f3" class="kz la ob lb b lc ld ju le lf lg jx lh oc lj lk ll od ln lo lp oe lr ls lt lu im bi translated">你正在填写一张表格，你接了一个电话或任何让你离开网站设备(电脑或电话)的事情。当你回来的时候，如果你不记得你填写的是哪一个字段，你将不得不清除所有输入的数据来阅读占位符文本。</p></blockquote><p id="bcc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了避免这个问题，我们可以添加<code class="fe mu mv mw lw b"><strong class="lb iu">label</strong></code>元素，并使用<code class="fe mu mv mw lw b"><strong class="lb iu">for</strong></code>属性将它们与各自的输入相关联。for属性必须链接到输入的<code class="fe mu mv mw lw b"><strong class="lb iu">id</strong></code> <strong class="lb iu"> </strong>属性。</p><p id="71af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简单地说，一个标签用于哪个输入由属性— <code class="fe mu mv mw lw b"><strong class="lb iu">for</strong></code> <strong class="lb iu">来指示。</strong></p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="10ad" class="ma mb it lw b gy mc md l me mf">&lt;label <strong class="lw iu">for="name"</strong>&gt;Name&lt;/label&gt;<br/>&lt;input type="text" placeholder="name" <strong class="lw iu">id="name"</strong>/&gt;</span></pre><h2 id="1ad0" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">对于属性的重要性</h2><p id="02d0" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated"><code class="fe mu mv mw lw b"><strong class="lb iu">for</strong></code>属性之所以重要，是因为<code class="fe mu mv mw lw b"><strong class="lb iu">for</strong></code>允许你点击标签，它将被视为点击输入。也就是说，点击标签会在输入框内给你一个文本光标。</p><p id="e52a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很有帮助，因为你可以合理地点击输入，开始输入，而不是只点击输入，这样更容易使用。</p><p id="1fcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们给每个输入一个id和一个标签(除了提交输入)。给提交输入一个标签可能会导致意外的表单提交。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0e0a" class="ma mb it lw b gy mc md l me mf">&lt;label for="name"&gt;Name&lt;/label&gt;<br/>&lt;input type="text" placeholder="name" id="name"/&gt;<br/>&lt;label for="email"&gt;Email&lt;/label&gt;<br/>&lt;input type="text" placeholder="email" id="email"/&gt;<br/>&lt;label for="message"&gt;Message&lt;/label&gt;<br/>&lt;input type="text" placeholder="message" id="message"/&gt;<br/>&lt;input type="submit"/&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/5bb82b27c112819f7d64f5014d718e39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*J6MdL8Sivd1vvTw4myQz6A.png"/></div></figure><p id="5bd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户应该能够点击提交按钮，消息应该被带到某个电子邮件地址。为此，我们需要建立一个电子邮件API服务。</p><h2 id="b99d" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">设置电子邮件API服务</h2><p id="7596" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">我们可以使用许多电子邮件服务，其中之一是SendInBlue。让我们设置SendInBlue。</p><p id="5be7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先你必须注册SendInBlue，一旦你登录，你必须找到或创建你的api密匙。查找/创建API密钥的地址是:</p><p id="f66c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://account.sendinblue.com/advanced/api" rel="noopener ugc nofollow" target="_blank">https://account.sendinblue.com/advanced/api</a></p><p id="dab6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要在Laravel中使用API键，我们需要:</p><ul class=""><li id="f383" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated"><strong class="lb iu">安装SendinBlue的API v3 Php库</strong></li><li id="761e" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><strong class="lb iu">使表单可提交</strong></li><li id="ac1a" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated"><strong class="lb iu">使用SendInBlue API的功能</strong></li></ul><h2 id="765a" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">正在安装<strong class="ak"> SendinBlue的API v3 Php库</strong></h2><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6ade" class="ma mb it lw b gy mc md l me mf">composer require sendinblue/api-v3-sdk "^6.1.0"<!-- --> </span></pre><h2 id="b30f" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">使表单可提交</h2><p id="daba" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">更改表单以包含v-models，并向提交输入添加一个方法。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3bfd" class="ma mb it lw b gy mc md l me mf">&lt;label for="name"&gt;Name&lt;/label&gt;<br/>&lt;input type="text" placeholder="name" id="name" <strong class="lw iu">v-model="form.name"</strong>/&gt;<br/>&lt;label for="email"&gt;Email&lt;/label&gt;<br/>&lt;input type="text" placeholder="email" id="email" <strong class="lw iu">v-model="form.email"</strong>/&gt;<br/>&lt;label for="message"&gt;Message&lt;/label&gt;<br/>&lt;input type="text" placeholder="message" id="message" <strong class="lw iu">v-model="form.message"</strong>/&gt;<br/>&lt;input type="submit" <strong class="lw iu">@click.prevent="sendmail"</strong>/&gt;</span></pre><p id="eca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">data():</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8a20" class="ma mb it lw b gy mc md l me mf">form: {<br/>    name: '',<br/>    email: '',<br/>    message: '',<br/>},</span></pre><p id="ea9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方法:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="572a" class="ma mb it lw b gy mc md l me mf">appendFormData() {<br/>    let fd = new <strong class="lw iu"><em class="ob">FormData</em></strong>();<br/>    fd.append('name', this.form.name);<br/>    fd.append('email', this.form.email);<br/>    fd.append('message', this.form.message);<br/>    return fd;<br/>},</span><span id="00c4" class="ma mb it lw b gy of md l me mf">sendmail() {<br/>    let fd = this.appendFormData();<br/>    axios.post('api/mail', fd)<br/>},</span></pre><p id="ea86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">api路线:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7c69" class="ma mb it lw b gy mc md l me mf">Route::<em class="ob">post</em>('/mail', 'ContactController@mail');</span></pre><p id="2324" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成ContactController</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="aaf0" class="ma mb it lw b gy mc md l me mf">php artisan make:controller ContactController</span></pre><p id="6856" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是我们将使用SendInBlue API 的<strong class="lb iu">函数的地方</strong></p><h2 id="b053" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated"><strong class="ak">将使用SendInBlue API的函数</strong></h2><p id="e8fb" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">我们现在需要获取SendInBlue提供的代码，并<strong class="lb iu">修改它</strong>以满足我们的需求。</p><p id="0901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">邮件功能的代码摘自此处:</p><div class="og oh gp gr oi oj"><a href="https://developers.sendinblue.com/docs/send-a-transactional-email" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd iu gy z fp oo fr fs op fu fw is bi translated">发送交易电子邮件</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">交易电子邮件用于所有非促销电子邮件:当用户创建帐户时发送，当他们…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">developers.sendinblue.com</p></div></div></div></a></div><p id="7fe8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您向下滚动'<strong class="lb iu">发送交易电子邮件</strong>'页面，您会发现'<strong class="lb iu">使用Sendinblue API客户端创建您的API请求:'</strong></p><p id="5004" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会发现这个盒子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/a0bf8ebd3500324c5855d7b5c6f30d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*DsnSt91Q35r9FnVPzePFqQ.png"/></div></figure><p id="cb7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击php将显示我们需要修改的PHP代码。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fe4c" class="ma mb it lw b gy mc md l me mf">&lt;?php<br/>require_once(__DIR__ . '/vendor/autoload.php');<br/><br/>// Configure API key authorization: api-key<br/>$config = SendinBlue\Client\Configuration::getDefaultConfiguration()-&gt;setApiKey('api-key', 'YOUR_API_KEY');<br/><br/>// Uncomment below line to configure authorization using: partner-key<br/>// $config = SendinBlue\Client\Configuration::getDefaultConfiguration()-&gt;setApiKey('partner-key', 'YOUR_API_KEY');<br/><br/>$apiInstance = new SendinBlue\Client\Api\SMTPApi(<br/>    // If you want use custom http client, pass your client which implements `GuzzleHttp\ClientInterface`.<br/>    // This is optional, `GuzzleHttp\Client` will be used as default.<br/>    new GuzzleHttp\Client(),<br/>    $config<br/>);<br/>$sendSmtpEmail = new \SendinBlue\Client\Model\SendSmtpEmail(); // \SendinBlue\Client\Model\SendSmtpEmail | Values to send a transactional email<br/>$sendSmtpEmail['to'] = array(array('email'=&gt;'testmail@example.com', 'name'=&gt;'John Doe'));<br/>$sendSmtpEmail['templateId'] = 59;<br/>$sendSmtpEmail['params'] = array('name'=&gt;'John', 'surname'=&gt;'Doe');<br/>$sendSmtpEmail['headers'] = array('X-Mailin-custom'=&gt;'custom_header_1:custom_value_1|custom_header_2:custom_value_2');<br/><br/>try {<br/>    $result = $apiInstance-&gt;sendTransacEmail($sendSmtpEmail);<br/>    print_r($result);<br/>} catch (Exception $e) {<br/>    echo 'Exception when calling SMTPApi-&gt;sendTransacEmail: ', $e-&gt;getMessage(), PHP_EOL;<br/>}<br/>?&gt;</span></pre><p id="921f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><?php and ?>之间的代码可以放入邮件功能</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/7ca658858daa669fce3bf6937cf6ae37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DB-4gbC4E795hlHeOoptGw.png"/></div></div></figure><p id="21b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不需要以下两行:</p><ol class=""><li id="0fd8" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ou mm mn mo bi translated">require_once(__DIR__。/vendor/autoload . PHP ')；</li><li id="c7fc" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ou mm mn mo bi translated">$ sendSmtpEmail[' template id ']= 59；</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/cf6d8b9f1d4ee4b32099fcbdb154ea80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*51jHCpjTEZqroTxbZevuaQ.png"/></div></div></figure><p id="bcfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以删除评论</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/84423792dbc14588839c867813cf6c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wCn7m-9w7Ssq059Td8oyfw.png"/></div></div></figure><p id="329c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过添加使用行来缩短函数中的行，从而重构代码</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ce92" class="ma mb it lw b gy mc md l me mf">use GuzzleHttp\Client;<br/>use SendinBlue\Client\Api\SMTPApi;<br/>use SendinBlue\Client\ApiException;<br/>use SendinBlue\Client\Configuration;<br/>use SendinBlue\Client\Model\SendSmtpEmail;<br/>use SendinBlue\Client\Model\SendSmtpEmailSender;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/93f52c030404308efefe01f93fcede37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FcBqMAi8b24b20x6DeWr7g.png"/></div></div></figure><p id="f388" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将数组从()语法改为方括号语法。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6587" class="ma mb it lw b gy mc md l me mf"><strong class="lw iu">$array = array(<br/>    "foo" =&gt; "bar",<br/>    "bar" =&gt; "foo",<br/>);</strong></span><span id="155b" class="ma mb it lw b gy of md l me mf">TO</span><span id="722e" class="ma mb it lw b gy of md l me mf"><strong class="lw iu">$array = [<br/>    "foo" =&gt; "bar",<br/>    "bar" =&gt; "foo",<br/>];</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/c1cdaa34e9861938151c129e82e3f6d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a6h3RzXsfczhryq49g4MGA.png"/></div></div></figure><p id="6e5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还应该缩短config行</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/a1d5206ff937c281f71de057f397f239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OCBP8FZnTLD9aVO4cCzLAQ.png"/></div></div></figure><p id="3389" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们在填充了API密钥的情况下运行此代码，我们会得到以下错误:</p><blockquote class="ov"><p id="5f4e" class="ow ox it bd oy oz pa pb pc pd pe lu dk translated">调用未定义的函数smtpapi()</p></blockquote><p id="27b5" class="pw-post-body-paragraph kz la it lb b lc pf ju le lf pg jx lh li ph lk ll lm pi lo lp lq pj ls lt lu im bi translated">这是因为在SMTPApi之前需要单词new</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/b38205f92694fcd6f223100fdf668aa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*UkChCKF32dW4CH7V4hamNw.png"/></div></figure><h2 id="50b3" class="ma mb it bd my mz na dn nb nc nd dp ne li nf ng nh lm ni nj nk lq nl nm nn no bi translated">一系列错误</h2><p id="9180" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">现在，当我们发送表单时，我们看到以下错误:</p><blockquote class="ov"><p id="e178" class="ow ox it bd oy oz pa pb pc pd pe lu dk translated">消息:[400]客户端错误:` post<a class="ae ky" href="https://api.sendinblue.com/v3/smtp/email`" rel="noopener ugc nofollow" target="_blank">https://api.sendinblue.com/v3/smtp/email`</a>导致` 400错误请求`响应:<br/> {"code":"missing_parameter "，" message":"sender is missing"}</p></blockquote><p id="ede6" class="pw-post-body-paragraph kz la it lb b lc pf ju le lf pg jx lh li ph lk ll lm pi lo lp lq pj ls lt lu im bi translated">错误消息之所以存在，是因为发送者是必不可少的。要添加发件人，我们需要添加以下内容:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="94c5" class="ma mb it lw b gy mc md l me mf">$from = [<br/>    'name' =&gt; request('name'),<br/>    'email' =&gt; request('email')<br/>];<br/>$sendSmtpEmail['sender'] = new SendSmtpEmailSender($from);</span></pre><p id="f823" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提交表单后，您将会收到一条错误消息，指出<strong class="lb iu">主题是必填的</strong></p><blockquote class="ov"><p id="668b" class="ow ox it bd oy oz pa pb pc pd pe lu dk translated">消息:[400]客户端错误:` post<a class="ae ky" href="https://api.sendinblue.com/v3/smtp/email`" rel="noopener ugc nofollow" target="_blank">https://api.sendinblue.com/v3/smtp/email`</a>导致` 400错误请求`响应:<br/> {"code":"missing_parameter "，" message ":"需要主题" }</p></blockquote><p id="d1c8" class="pw-post-body-paragraph kz la it lb b lc pf ju le lf pg jx lh li ph lk ll lm pi lo lp lq pj ls lt lu im bi translated">要添加主题，我们只需添加如下内容:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3b47" class="ma mb it lw b gy mc md l me mf">$sendSmtpEmail['subject'] = 'Contact Form Message';</span></pre><p id="8402" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们将得到以下错误:</p><blockquote class="ov"><p id="c4bb" class="ow ox it bd oy oz pa pb pc pd pe lu dk translated">消息:[400]客户端错误:` post【https://api.sendinblue.com/v3/smtp/email`】T2导致` 400错误请求`响应:<br/> {"code":"missing_parameter "，" message ":"需要htmlContent或text content " }</p></blockquote><p id="5f27" class="pw-post-body-paragraph kz la it lb b lc pf ju le lf pg jx lh li ph lk ll lm pi lo lp lq pj ls lt lu im bi translated">这是要求<strong class="lb iu"> htmlContent或者textContent。这是因为我们既可以发送纯文本电子邮件，也可以发送html电子邮件。</strong></p><p id="e249" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只想从消息输入框中取出明文消息并发送它。</p><p id="779f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mu mv mw lw b">$sendSmtpEmail[‘textContent’] = request(‘message’);</code></p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7f0b" class="ma mb it lw b gy mc md l me mf">public function mail() {<br/>    $config = Configuration::<em class="ob">getDefaultConfiguration</em>()-&gt;setApiKey('api-key', 'API KEY HERE');<br/><br/>    $apiInstance = new SMTPApi(<br/>        new Client(),<br/>        $config<br/>    );<br/><br/>    $sendSmtpEmail = new SendSmtpEmail();<br/>    <strong class="lw iu">$sendSmtpEmail['to'] = [['email'=&gt;'ENTER YOUR EMAIL HERE', 'name'=&gt;'ENTER YOUR NAME HERE']];<br/>    $from = [<br/>        'name' =&gt; request('name'),<br/>        'email' =&gt; request('email')<br/>    ];</strong><br/>    <strong class="lw iu">$sendSmtpEmail['sender'] = new SendSmtpEmailSender($from);<br/>    $sendSmtpEmail['subject'] = 'Contact Form Message';<br/>    $sendSmtpEmail['textContent'] = request('message');</strong><br/>    $sendSmtpEmail['params'] = ['name'=&gt;'John', 'surname'=&gt;'Doe'];<br/>    $sendSmtpEmail['headers'] = ['X-Mailin-custom'=&gt;'custom_header_1:custom_value_1|custom_header_2:custom_value_2'];<br/><br/>    try {<br/>        $result = $apiInstance-&gt;sendTransacEmail($sendSmtpEmail);<br/>        print_r($result);<br/>    } catch (Exception $e) {<br/>        echo 'Exception when calling SMTPApi-&gt;sendTransacEmail: ', $e-&gt;getMessage(), <em class="ob">PHP_EOL</em>;<br/>    }<br/>}</span></pre><p id="a32f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你设置了一个真实的邮箱，这个代码会起作用，你会在你的收件箱里找到邮件。我们可以重写这段代码，以便于阅读。</p><p id="18b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实际发送消息的代码是<code class="fe mu mv mw lw b"><strong class="lb iu">$apiInstance-&gt;sendTransacEmail($sendSmtpEmail)</strong></code></p><p id="67bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过向它添加细节来构建$ sendsmtmpemail(就像已经做的那样),或者我们可以预先编写细节并将它们应用于<strong class="lb iu">$ sendsmtmpemail</strong>,如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f18c" class="ma mb it lw b gy mc md l me mf">public function mail() {<br/>    $config = Configuration::<em class="ob">getDefaultConfiguration</em>()-&gt;setApiKey('api-key',<br/>        '<strong class="lw iu">API KEY HERE</strong>');<br/>    $apiInstance = new SMTPApi(<br/>        new Client(),<br/>        $config<br/>    );<br/>    $from = [<br/>        'name' =&gt; request('name'),<br/>        'email' =&gt; request('email')<br/>    ];<br/>    $to = [<br/>        'name' =&gt; '<strong class="lw iu">E</strong>NTER YOUR NAME HERE',<br/>        'email' =&gt; 'ENTER YOUR OWN EMAIL HERE'<br/>    ];<br/>    $details = [<br/>        'textContent' =&gt; request('message'),<br/>        'sender' =&gt; new SendSmtpEmailSender($from),<br/>        'subject' =&gt; 'Contact Form Message',<br/>        'to' =&gt; [$to]<br/>    ];<br/><br/>    $sendSmtpEmail = new SendSmtpEmail($details);<br/><br/>    try {<br/>        $apiInstance-&gt;sendTransacEmail($sendSmtpEmail);<br/>        return 'done';<br/>    } catch (ApiException $e) {<br/>        return json_decode($e-&gt;getResponseBody(),true)['message'];<br/>    }<br/>}</span></pre><p id="cba9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这两种情况下，都使用SendInBlue库的SendSmtpEmail类。</p><p id="26fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要处理以下问题:</p><ul class=""><li id="4f18" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated">联系人表单验证</li><li id="8e64" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">沿着输入显示服务器端错误</li><li id="e480" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">填写输入时隐藏错误</li><li id="d868" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">输入为空时立即显示错误</li><li id="0dbd" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">使用tenaray运算符代替if语句</li></ul><p id="fd85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在下一章——第18章——讨论这些问题。</p></div></div>    
</body>
</html>