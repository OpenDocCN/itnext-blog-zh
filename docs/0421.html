<html>
<head>
<title>Getting started with kubernetes using Ansible and Terraform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ansible和Terraform开始使用kubernetes</h1>
<blockquote>原文：<a href="https://itnext.io/getting-started-with-kubernetes-using-ansible-and-terraform-741e6bb6ad7a?source=collection_archive---------0-----------------------#2018-03-08">https://itnext.io/getting-started-with-kubernetes-using-ansible-and-terraform-741e6bb6ad7a?source=collection_archive---------0-----------------------#2018-03-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3c62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fgetting-started-with-kubernetes-using-ansible-and-terraform-741e6bb6ad7a" rel="noopener ugc nofollow" target="_blank"> <em class="km">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="2747" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，你想开始玩kubernetes，因为<em class="km">嘿，为什么不</em>。您总是可以在您的桌面上本地运行<a class="ae kl" href="https://kubernetes.io/docs/getting-started-guides/minikube/" rel="noopener ugc nofollow" target="_blank"> Minikube </a>，但是这只是一个单节点集群。我想运行一个多节点集群，对我来说，这就是看到它，感受它；这样我学得更好。构建和运行kubernetes集群不是我的日常工作，所以我需要一种方法来理解所有宣传的内容。</p><p id="aa8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="km">警告</em> </strong> <em class="km">:这不是一个生产部署。与完整的生产部署相比，这种安装有许多缺点。</em></p><p id="1189" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="km">提示</em> </strong> <em class="km">:大部分都是基于从我的Mac上运行。下面使用的一切都是独立于平台的，但是可能需要对本地运行的脚本进行一些调整。</em></p><p id="f2a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是基本流程:(我将在下面详细介绍所有这些步骤。)</p><ol class=""><li id="d172" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk ks kt ku kv bi translated">注册一个AWS账户，然后<a class="ae kl" href="https://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html" rel="noopener ugc nofollow" target="_blank">创建一个访问密钥。</a></li><li id="4c9e" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">下载Terraform并克隆<a class="ae kl" href="https://github.com/magic7s/terraform_aws_spot_instance" rel="noopener ugc nofollow" target="_blank">我的git repo </a>。运行此命令以调配3台主机。</li><li id="0240" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">对于一个非常基本的安装，使用这个<a class="ae kl" href="https://github.com/ben-st/ansible-kubeadm" rel="noopener ugc nofollow" target="_blank"> ansible脚本</a>。我有一个更复杂的应用程序，它安装了一些示例应用程序，并使用Contiv进行容器分段。我的可回答的脚本在这里，我将浏览它们。</li></ol><p id="e411" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TL；这个职位的博士在这里。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="d44e" class="lk ll iq lg b gy lm ln l lo lp">git clone <a class="ae kl" href="https://github.com/magic7s/terraform_aws_spot_instance.git" rel="noopener ugc nofollow" target="_blank">https://github.com/magic7s/terraform_aws_spot_instance.git</a><br/>cd terraform_aws_spot_instance<br/>terraform init<br/>terraform apply<br/>cd ..<br/>git clone <a class="ae kl" href="https://github.com/magic7s/ansible-kubeadm-contiv.git" rel="noopener ugc nofollow" target="_blank">https://github.com/magic7s/ansible-kubeadm-contiv.git</a><br/>cd ansible-kubeadm-contiv<br/># Edit inventory file with public ip addresses from terraform output<br/>ansible-playbook -i inventory site.yml</span></pre></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><figure class="lb lc ld le gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lx"><img src="../Images/339acfc343dae8ef8bc718622966cf87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P93-s095EXeRtVnjHRMsHw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">要调配的AWS环境的基本示意图</figcaption></figure><h1 id="1b1f" class="mj ll iq bd mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf bi translated">使用Terraform提供基础设施</h1><p id="7f61" class="pw-post-body-paragraph jn jo iq jp b jq ng js jt ju nh jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">做同样的事情可能有十几种方法。我选择Terraform在AWS中配置我的虚拟机。为什么？我很懒，不想一直点击AWS控制台来启动三个干净的虚拟机。我不得不这样做大约100次，因为在部署我的集群时，我总是想从头开始。此外，我想在不使用虚拟机时销毁(删除)它们，这样我就不用付费了。</p><p id="b266" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用<a class="ae kl" href="https://aws.amazon.com/ec2/spot/" rel="noopener ugc nofollow" target="_blank">现货实例</a>，因为它们比正常价格低90%。我可以花0.0067美元/小时得到一个m3.medium (3.75G RAM)，有一些缺点；如果亚马逊想把价格提高到高于你的出价，他们会终止你的实例。此外，你不能关闭它，你只能重新启动它。</p><p id="3139" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装Terraform非常简单。它是为您的平台编译的二进制文件。从<a class="ae kl" href="https://www.terraform.io/downloads.html" rel="noopener ugc nofollow" target="_blank">https://www.terraform.io/downloads.html</a>下载并按照说明操作。我将文件复制到<code class="fe nl nm nn lg b">/usr/local/bin/terraform </code>中，这样我就可以从命令行的任何目录中运行它。</p><p id="0585" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下载我的git repo和terraform脚本，在一个安全组中配置三台主机。<a class="ae kl" href="https://github.com/magic7s/terraform_aws_spot_instance" rel="noopener ugc nofollow" target="_blank">https://github.com/magic7s/terraform_aws_spot_instance</a></p><p id="68d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看<a class="ae kl" href="https://github.com/magic7s/terraform_aws_spot_instance/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">自述文件。MD </a>文件，了解如何为您定制脚本的更多信息。</p><p id="7a2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要准备好您的<a class="ae kl" href="https://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html" rel="noopener ugc nofollow" target="_blank"> AWS访问密钥和秘密密钥</a>。我建议您将它放在<code class="fe nl nm nn lg b">~/.aws/credentials</code>中，它应该是这样的:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="2d68" class="lk ll iq lg b gy lm ln l lo lp">[default]</span><span id="73c8" class="lk ll iq lg b gy no ln l lo lp">aws_access_key_id = AAABBBBCCCDDDEEEFFF</span><span id="4516" class="lk ll iq lg b gy no ln l lo lp">aws_secret_access_key = ABC123456%$^&amp;*WWWMMMCCC33658</span></pre><p id="d0c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您安装了<a class="ae kl" href="https://docs.aws.amazon.com/cli/latest/userguide/installing.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a>，您可能已经完成了此操作。</p><p id="a414" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦完成，你就可以运行<code class="fe nl nm nn lg b">terraform init</code>。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="f5be" class="lk ll iq lg b gy lm ln l lo lp">macbook:terraform_aws_spot_instance brad$ terraform init</span><span id="aefb" class="lk ll iq lg b gy no ln l lo lp">Initializing provider plugins...<br/>.... [lots of output omitted]</span><span id="282a" class="lk ll iq lg b gy no ln l lo lp">Terraform has been successfully initialized!</span><span id="ab19" class="lk ll iq lg b gy no ln l lo lp">.... [lots of output omitted]<br/>macbook:terraform_aws_spot_instance brad$</span></pre><p id="60a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查k8s.tf中的aws区域是否正确</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="8432" class="lk ll iq lg b gy lm ln l lo lp">variable "aws_region_name" { default = "us-west-2" }</span></pre><p id="b0bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要将您的SSH公钥预先上传或创建到您正在工作的AWS区域。下面是这样做的说明。您将需要AWS控制台上列出的密钥对的<strong class="jp ir">名称</strong>。</p><figure class="lb lc ld le gt ly gh gi paragraph-image"><div class="gh gi np"><img src="../Images/15492003b26550d878797a0291566b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*500HZPWNFIASScwU-waslg.png"/></div></figure><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="685a" class="lk ll iq lg b gy lm ln l lo lp">variable "ssh_key_name" {default = "braddown-csicolaptop"}</span></pre><p id="0252" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查k8s.tf文件的其余部分，查看是否需要进行任何更改。</p><p id="1114" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行<code class="fe nl nm nn lg b">terraform plan</code></p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="ffdd" class="lk ll iq lg b gy lm ln l lo lp">macbook:terraform_aws_spot_instance brad$ terraform plan<br/>Refreshing Terraform state in-memory prior to plan...<br/>The refreshed state will be used to calculate this plan, but will not be<br/>persisted to local or remote state storage.</span><span id="dee7" class="lk ll iq lg b gy no ln l lo lp">data.external.myipaddr: Refreshing state...<br/>data.aws_ami.ubuntu: Refreshing state...</span><span id="f4ef" class="lk ll iq lg b gy no ln l lo lp">------------------------------------------------------------------------<br/>.... [lots of output omitted]</span><span id="4924" class="lk ll iq lg b gy no ln l lo lp">Plan: 7 to add, 0 to change, 0 to destroy.</span><span id="3ece" class="lk ll iq lg b gy no ln l lo lp">------------------------------------------------------------------------</span><span id="33f0" class="lk ll iq lg b gy no ln l lo lp">Note: You didn't specify an "-out" parameter to save this plan, so Terraform<br/>can't guarantee that exactly these actions will be performed if<br/>"terraform apply" is subsequently run.</span><span id="eb65" class="lk ll iq lg b gy no ln l lo lp">macbook:terraform_aws_spot_instance brad$</span></pre><p id="cc3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你得到任何关于<code class="fe nl nm nn lg b">data.external.myipaddr</code>的错误，检查<code class="fe nl nm nn lg b">./myipaddr.sh</code>是否在你的本地目录中运行。它应该产生类似于{"ip" : "68.231.198.92" }的结果，并且没有错误。如果这不起作用，尝试将其注释掉，并取消对另一行的注释。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="86de" class="lk ll iq lg b gy lm ln l lo lp">data "external" "myipaddr" {</span><span id="9094" class="lk ll iq lg b gy no ln l lo lp"># Pick one or the other. The second one requires an external script but uses DNS instead of https.</span><span id="2648" class="lk ll iq lg b gy no ln l lo lp">#program = ["bash", "-c", "curl -s 'https://api.ipify.org?format=json'"]</span><span id="e6ce" class="lk ll iq lg b gy no ln l lo lp">program = ["bash", "${path.module}/myipaddr.sh"]</span><span id="3633" class="lk ll iq lg b gy no ln l lo lp">}</span></pre><p id="e681" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果一切成功，运行<code class="fe nl nm nn lg b">terraform apply</code>并在提示时回答是。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="cb92" class="lk ll iq lg b gy lm ln l lo lp">macbook:terraform_aws_spot_instance brad$ terraform apply<br/>data.external.myipaddr: Refreshing state...<br/>aws_security_group.k8s_sg: Refreshing state... (ID: sg-00dfd8ca76fe4e4f3)<br/>data.aws_ami.ubuntu: Refreshing state...<br/>aws_security_group_rule.allow_all_myip: Refreshing state... (ID: sgrule-2156153638)<br/>aws_security_group_rule.allow_SG_any: Refreshing state... (ID: sgrule-104774467)<br/>aws_security_group_rule.allow_all_egress: Refreshing state... (ID: sgrule-1753581355)</span><span id="4c3f" class="lk ll iq lg b gy no ln l lo lp">.... [lots of output omitted]</span><span id="7b41" class="lk ll iq lg b gy no ln l lo lp">Apply complete! Resources: 3 added, 0 changed, 0 destroyed.</span><span id="685d" class="lk ll iq lg b gy no ln l lo lp">Outputs:</span><span id="2fae" class="lk ll iq lg b gy no ln l lo lp">master_ip = 54.218.25.205<br/>worker_ips = [<br/>    54.202.109.45,<br/>    34.211.115.248<br/>]<br/>macbook:terraform_aws_spot_instance brad$</span></pre><p id="819d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">恭喜你现在有三个spot实例，运行最新的ubuntu 16.04 ami。公共IP地址应该在底部输出。当我们转移到Ansible并安装kubernetes时，我们将需要这些。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><figure class="lb lc ld le gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nq"><img src="../Images/36e015fed50cafd9041bf0f2b83f6a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NIJK8cePA3OvDI6Fv9DObg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">通过Ansible部署配置</figcaption></figure><h1 id="b809" class="mj ll iq bd mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf bi translated">用Ansible安装kubernetes</h1><p id="3d80" class="pw-post-body-paragraph jn jo iq jp b jq ng js jt ju nh jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">假设你已经安装了<a class="ae kl" href="https://www.python.org/downloads/release/python-364/" rel="noopener ugc nofollow" target="_blank"> python </a>，可以用<code class="fe nl nm nn lg b">pip</code><a class="ae kl" href="http://docs.ansible.com/ansible/latest/intro_installation.html#latest-releases-via-pip" rel="noopener ugc nofollow" target="_blank">安装ansible。您应该至少安装ansible 2.4。检查以确保您运行的是最新版本<code class="fe nl nm nn lg b">ansible --version</code></a></p><p id="7eee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你还没有用所有的ansible脚本克隆我的git repo，现在就从<a class="ae kl" href="https://github.com/magic7s/ansible-kubeadm-contiv" rel="noopener ugc nofollow" target="_blank">https://github.com/magic7s/ansible-kubeadm-contiv</a>开始克隆吧</p><p id="e25d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您应该在本地拥有以下文件。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="8210" class="lk ll iq lg b gy lm ln l lo lp">.<br/>├── deploy_contiv_network_config.yml<br/>├── deploy_istio.yml<br/>├── deploy_sample_apps.yml<br/>├── group_vars<br/>│   └── all<br/>├── inventory<br/>├── LICENSE<br/>├── README.md<br/>├── roles<br/>│   ├── common<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── contiv<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── contiv_network_cfg<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── docker<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── istio<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── kubeadm<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── master<br/>│   │   └── tasks<br/>│   │       └── main.yml<br/>│   ├── sample_apps<br/>│   │   ├── tasks<br/>│   │   │   ├── main.yml<br/>│   │   │   ├── PHPGuestbook.yml<br/>│   │   │   └── WordPressSQL.yml<br/>│   │   ├── templates<br/>│   │   │   ├── guestbook.yaml<br/>│   │   │   └── wordpresssql.yaml<br/>│   │   └── vars<br/>│   │       └── main.yml<br/>│   └── worker<br/>│       └── tasks<br/>│           └── main.yml<br/>└── site.yml</span><span id="c0b1" class="lk ll iq lg b gy no ln l lo lp">22 directories, 22 files</span></pre><p id="a3bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nl nm nn lg b">site.yml</code>是主文件，我们将运行它来安装所有东西。但是，主安装后(docker、kubernetes、contiv等。)你可以运行<code class="fe nl nm nn lg b">deploy_contiv_network_config.yml</code>或者<code class="fe nl nm nn lg b">deploy_sample_apps.yml</code>或者<code class="fe nl nm nn lg b">deploy_istio.yml</code>作为一个单独的脚本。默认情况下，所有东西都将在一次运行中安装。</p><p id="18cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要更新和检查两个文件<code class="fe nl nm nn lg b">group_vars/all</code>和<code class="fe nl nm nn lg b">inventory</code>。</p><ol class=""><li id="7cf3" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk ks kt ku kv bi translated"><code class="fe nl nm nn lg b">kubeadm_token</code>是一个随机生成的令牌，用于认证进入集群的工作节点。</li><li id="984f" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">如果由于某种原因，您的网络接口不是<code class="fe nl nm nn lg b">eth0</code>，您将需要更新<code class="fe nl nm nn lg b">master_ip</code>变量。</li><li id="567e" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated">如果您不想安装示例应用程序或<a class="ae kl" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank"> istio服务网格</a>(这只是另一个示例应用程序)，请将vars文件中的值更改为<code class="fe nl nm nn lg b">false</code>。</li><li id="4541" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk ks kt ku kv bi translated"><code class="fe nl nm nn lg b">contiv_nets</code>所有子网都在集群内使用，它们不需要可路由到外部。将通过主机的IP地址(入站)或NAT(出站)经由端口转换来访问pod(集装箱组)。</li></ol><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="849f" class="lk ll iq lg b gy lm ln l lo lp">## group_vars/all<br/>kubeadm_token: db85f7.cff657b31b20eed5</span><span id="41d6" class="lk ll iq lg b gy no ln l lo lp">master_ip: "{{ hostvars['master1']['ansible_eth0']['ipv4']['address'] }}"</span><span id="71c2" class="lk ll iq lg b gy no ln l lo lp">ansible_remote_user: ubuntu</span><span id="fad1" class="lk ll iq lg b gy no ln l lo lp">kubeadm_reset_before_init: true</span><span id="60b4" class="lk ll iq lg b gy no ln l lo lp">delete_kube_dns: false</span><span id="bbc3" class="lk ll iq lg b gy no ln l lo lp">deploy_sample_apps: true</span><span id="56bd" class="lk ll iq lg b gy no ln l lo lp">deploy_istio: true</span><span id="856e" class="lk ll iq lg b gy no ln l lo lp">contiv_nets:<br/>  # This network name is required for host to access pods.<br/>  contivh1:<br/>    net_type: -n infra<br/>    net_sub:  -s 192.0.2.0/24<br/>    net_gw:   -g 192.0.2.1<br/>  # This is used for pods that do not have a io.contiv.network label<br/>  default-net:<br/>    net_type: -n data<br/>    net_sub:  -s 172.16.10.10-172.16.10.250/24<br/>    net_gw:   -g 172.16.10.1<br/>  blue:<br/>    net_type: -n data<br/>    net_sub:  -s 172.17.0.5-172.17.15.250/20<br/>    net_gw:   -g 172.17.0.1<br/>  green:<br/>    net_type: -n data<br/>    net_sub:  -s 172.18.0.5-172.18.15.250/20<br/>    net_gw:   -g 172.18.0.1</span></pre><p id="0f70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您有来自<code class="fe nl nm nn lg b">terraform apply</code>命令的输出，公共IP地址被输出在底部或运行<code class="fe nl nm nn lg b">terraform output</code></p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="58fb" class="lk ll iq lg b gy lm ln l lo lp">macbook:terraform_aws_spot_instance brad$ terraform output<br/>master_ip = 54.218.113.71<br/>worker_ips = [<br/>    54.190.7.158,<br/>    34.211.12.22<br/>]</span></pre><ol class=""><li id="611b" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk ks kt ku kv bi translated">将ip地址更改为主机的公共IP地址。<strong class="jp ir">注意不要复制粘贴上面工人IP地址之间的逗号。</strong></li></ol><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="84a5" class="lk ll iq lg b gy lm ln l lo lp"># inventory<br/>[master]<br/>master1 ansible_ssh_host=54.218.113.71</span><span id="2451" class="lk ll iq lg b gy no ln l lo lp">[worker]<br/>54.190.7.158<br/>34.211.12.22</span><span id="677c" class="lk ll iq lg b gy no ln l lo lp">[master:vars]<br/>ansible_ssh_common_args='-o StrictHostKeyChecking=no'</span><span id="6643" class="lk ll iq lg b gy no ln l lo lp">[worker:vars]<br/>ansible_ssh_common_args='-o StrictHostKeyChecking=no'</span></pre><p id="5cbd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在此之后，您应该能够运行ansible行动手册。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="aaaf" class="lk ll iq lg b gy lm ln l lo lp">macbook:ansible-kubeadm-contiv brad$ansible-playbook -i inventory site.yml</span><span id="6374" class="lk ll iq lg b gy no ln l lo lp">.... [lots of output omitted]</span><span id="e5e0" class="lk ll iq lg b gy no ln l lo lp">PLAY RECAP *********************************************************************************************************************************************************<br/>34.217.135.160             : ok=16   changed=13   unreachable=0    failed=0<br/>54.213.221.194             : ok=16   changed=13   unreachable=0    failed=0<br/>master1                    : ok=51   changed=41   unreachable=0    failed=0</span></pre><p id="52bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有些任务会失败(并被配置为忽略)，但可以安全地忽略它们。如果播放停止，并且任何主机都有failed=1，则需要进行调查。</p><p id="7e8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在大多数情况下，您可以再次运行行动手册，它只会根据需要进行更新，或者在重新应用之前删除旧配置。这并不是100%万无一失的，在某些情况下，运行<code class="fe nl nm nn lg b">terraform destroy</code>和<code class="fe nl nm nn lg b">terraform apply</code>来删除和启动新主机更容易。[记得更新清单文件中的IP地址]。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="8cc6" class="mj ll iq bd mk ml nr mn mo mp ns mr ms mt nt mv mw mx nu mz na nb nv nd ne nf bi translated">访问和测试kubernetes集群</h1><p id="1e51" class="pw-post-body-paragraph jn jo iq jp b jq ng js jt ju nh jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">如果一切顺利，您应该能够访问新构建的集群。</p><p id="87eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SSH进入主节点。如果你的笔记本电脑的IP地址已经改变，运行<code class="fe nl nm nn lg b">terraform apply</code>，它会检查你的IP地址并更新aws安全组。</p><p id="a760" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查集群是否处于就绪状态:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="1075" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ kubectl get nodes<br/>NAME               STATUS    ROLES     AGE       VERSION<br/>ip-172-31-13-102   Ready     &lt;none&gt;    9m        v1.9.3<br/>ip-172-31-8-222    Ready     &lt;none&gt;    9m        v1.9.3<br/>ip-172-31-9-150    Ready     master    17m       v1.9.3</span></pre><p id="4ea4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查所有pod是否都在运行:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="3c9a" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ kubectl get pods --all-namespaces<br/>NAMESPACE     NAME                                      READY     STATUS    RESTARTS   AGE<br/>default       frontend-5b697d64fb-bvl6l                 1/1       Running   0          9m<br/>default       frontend-5b697d64fb-jck77                 1/1       Running   0          9m<br/>default       frontend-5b697d64fb-zfr56                 1/1       Running   0          9m<br/>default       redis-master-54c674b96-kn76j              1/1       Running   0          9m<br/>default       redis-slave-58d5cbd65d-9msk6              1/1       Running   0          9m<br/>default       redis-slave-58d5cbd65d-dj2tn              1/1       Running   0          9m<br/>default       wordpress-77d578745-7w8lv                 1/1       Running   0          8m<br/>default       wordpress-mysql-5fbdd6545b-qqb8t          1/1       Running   0          8m<br/>kube-system   contiv-etcd-wzckp                         1/1       Running   0          14m<br/>kube-system   contiv-netmaster-cwv2k                    1/1       Running   0          14m<br/>kube-system   contiv-netplugin-6wk6j                    1/1       Running   0          10m<br/>kube-system   contiv-netplugin-9s7kj                    1/1       Running   0          9m<br/>kube-system   contiv-netplugin-pjcc2                    1/1       Running   0          14m<br/>kube-system   contiv-ovs-cq29l                          2/2       Running   0          10m<br/>kube-system   contiv-ovs-hmgw8                          2/2       Running   0          9m<br/>kube-system   contiv-ovs-knl6h                          2/2       Running   0          14m<br/>kube-system   etcd-ip-172-31-9-150                      1/1       Running   0          17m<br/>kube-system   kube-apiserver-ip-172-31-9-150            1/1       Running   0          17m<br/>kube-system   kube-controller-manager-ip-172-31-9-150   1/1       Running   0          17m<br/>kube-system   kube-proxy-fhr4z                          1/1       Running   0          10m<br/>kube-system   kube-proxy-kdk6g                          1/1       Running   0          17m<br/>kube-system   kube-proxy-kz6rj                          1/1       Running   0          9m<br/>kube-system   kube-scheduler-ip-172-31-9-150            1/1       Running   0          17m</span></pre><p id="5add" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查示例应用程序正在运行的服务IP地址和端口:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="85cc" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ kubectl get svc<br/>NAME              TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE<br/>frontend          NodePort       10.96.175.217    &lt;none&gt;        80:31887/TCP   12m<br/>kubernetes        ClusterIP      10.96.0.1        &lt;none&gt;        443/TCP        21m<br/>redis-master      ClusterIP      10.107.116.88    &lt;none&gt;        6379/TCP       12m<br/>redis-slave       ClusterIP      10.105.113.208   &lt;none&gt;        6379/TCP       12m<br/>wordpress         LoadBalancer   10.104.186.47    &lt;pending&gt;     80:30606/TCP   12m<br/>wordpress-mysql   ClusterIP      10.108.198.177   &lt;none&gt;        3306/TCP       12m</span></pre><p id="eb27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以通过<a class="ae kl" href="https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport" rel="noopener ugc nofollow" target="_blank">节点端口</a>访问示例应用程序。群集中的所有主机都将公开一个随机高端口，该端口将被映射到应用程序中。</p><p id="b072" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">示例:</p><ul class=""><li id="d537" class="kn ko iq jp b jq jr ju jv jy kp kc kq kg kr kk nw kt ku kv bi translated">http://54.213.139.136:31887会进入留言簿应用程序</li><li id="71cd" class="kn ko iq jp b jq kw ju kx jy ky kc kz kg la kk nw kt ku kv bi translated">http://54.213.139.136:30606会访问Wordpress应用程序</li></ul></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="c232" class="mj ll iq bd mk ml nr mn mo mp ns mr ms mt nt mv mw mx nu mz na nb nv nd ne nf bi translated">Contiv网络配置</h1><p id="20fd" class="pw-post-body-paragraph jn jo iq jp b jq ng js jt ju nh jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">Contiv 是容器网络插件(CNI ),我们已经部署了三个网络，外加一个基础网络。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="7966" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ netctl net ls<br/>Tenant   Network      Nw Type  Encap type  Packet tag  Subnet                         Gateway      IPv6Subnet  IPv6Gateway  Cfgd Tag<br/>------   -------      -------  ----------  ----------  -------                        ------       ----------  -----------  ---------<br/>default  blue         data     vxlan       0           172.17.0.5-172.17.15.250/20    172.17.0.1<br/>default  contivh1     infra    vxlan       0           192.0.2.0/24                   192.0.2.1<br/>default  default-net  data     vxlan       0           172.16.10.10-172.16.10.250/24  172.16.10.1<br/>default  green        data     vxlan       0           172.18.0.5-172.18.15.250/20    172.18.0.1</span></pre><p id="843b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们所有的吊舱都部署在“蓝色”网络中。我们可以从豆荚的IP地址看出这一点。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="d70a" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ kubectl get pods -o wide<br/>NAME                               READY     STATUS    RESTARTS   AGE       IP            NODE<br/>frontend-5b697d64fb-c9bzn          1/1       Running   0          2m        172.17.0.6    ip-172-31-8-222<br/>frontend-5b697d64fb-ddlc5          1/1       Running   0          2m        172.17.0.5    ip-172-31-13-102<br/>frontend-5b697d64fb-xmwfd          1/1       Running   0          2m        172.17.0.7    ip-172-31-9-150<br/>redis-master-54c674b96-zz6nn       1/1       Running   0          2m        172.17.0.8    ip-172-31-13-102<br/>redis-slave-58d5cbd65d-46gq2       1/1       Running   0          2m        172.17.0.9    ip-172-31-8-222<br/>redis-slave-58d5cbd65d-qpd8h       1/1       Running   0          2m        172.17.0.10   ip-172-31-13-102<br/>wordpress-75d9d5f86b-f7d8r         1/1       Running   0          1m        172.17.0.12   ip-172-31-13-102<br/>wordpress-mysql-5fbdd6545b-xfcgq   1/1       Running   0          1m        172.17.0.11   ip-172-31-8-222</span></pre><p id="9bd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看Contiv中的一些组策略命令。这是一个单一端点组(留言簿web层)。我们可以看到它包含3个端点，已经用标签<code class="fe nl nm nn lg b">io.contiv.net-group = epg-blue-guestbook-web</code>进行了标记</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="8f56" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ netctl group inspect epg-blue-guestbook-web<br/>{<br/>  "Config": {<br/>    "key": "default:epg-blue-guestbook-web",<br/>    "groupName": "epg-blue-guestbook-web",<br/>    "networkName": "blue",<br/>    "policies": [<br/>      "policy-blue-guestbook-web"<br/>    ],<br/>    "tenantName": "default",<br/>    "link-sets": {<br/>      "MatchRules": {<br/>        "default:policy-blue-guestbook-db:10": {<br/>          "type": "rule",<br/>          "key": "default:policy-blue-guestbook-db:10"<br/>        }<br/>      },<br/>      "Policies": {<br/>        "default:policy-blue-guestbook-web": {<br/>          "type": "policy",<br/>          "key": "default:policy-blue-guestbook-web"<br/>        }<br/>      }<br/>    },<br/>    "links": {<br/>      "AppProfile": {},<br/>      "NetProfile": {},<br/>      "Network": {<br/>        "type": "network",<br/>        "key": "default:blue"<br/>      },<br/>      "Tenant": {<br/>        "type": "tenant",<br/>        "key": "default"<br/>      }<br/>    }<br/>  },<br/>  "Oper": {<br/>    "endpoints": [<br/>      {<br/>        "containerName": "frontend-5b697d64fb-ddlc5",<br/>        "endpointGroupId": 6,<br/>        "endpointGroupKey": "epg-blue-guestbook-web:default",<br/>        "endpointID": "0268f0a30adbf76b30c6b0d5910f1f78d5719afd9761507f57a455813a827604",<br/>        "homingHost": "ip-172-31-13-102",<br/>        "ipAddress": [<br/>          "172.17.0.5",<br/>          ""<br/>        ],<br/>        "labels": "map[]",<br/>        "macAddress": "02:02:ac:11:00:05",<br/>        "network": "blue.default",<br/>        "serviceName": "epg-blue-guestbook-web"<br/>      },<br/>      {<br/>        "containerName": "frontend-5b697d64fb-c9bzn",<br/>        "endpointGroupId": 6,<br/>        "endpointGroupKey": "epg-blue-guestbook-web:default",<br/>        "endpointID": "24764b44e343c9352d96da863d2f9a788060487707c13a6a7093e5fb609a5261",<br/>        "homingHost": "ip-172-31-8-222",<br/>        "ipAddress": [<br/>          "172.17.0.6",<br/>          ""<br/>        ],<br/>        "labels": "map[]",<br/>        "macAddress": "02:02:ac:11:00:06",<br/>        "network": "blue.default",<br/>        "serviceName": "epg-blue-guestbook-web"<br/>      },<br/>      {<br/>        "containerName": "frontend-5b697d64fb-xmwfd",<br/>        "endpointGroupId": 6,<br/>        "endpointGroupKey": "epg-blue-guestbook-web:default",<br/>        "endpointID": "2ec34a609b8819553f714c3cf348d96910053a9deee51b6b577a95a691a2cf6c",<br/>        "homingHost": "ip-172-31-9-150",<br/>        "ipAddress": [<br/>          "172.17.0.7",<br/>          ""<br/>        ],<br/>        "labels": "map[]",<br/>        "macAddress": "02:02:ac:11:00:07",<br/>        "network": "blue.default",<br/>        "serviceName": "epg-blue-guestbook-web"<br/>      }<br/>    ],<br/>    "externalPktTag": 1,<br/>    "groupTag": "epg-blue-guestbook-web.default",<br/>    "numEndpoints": 3,<br/>    "pktTag": 1<br/>  }<br/>}<br/>ubuntu@ip-172-31-9-150:~$</span></pre><p id="4bb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以看到所有已配置的组及其与每个组相关联的策略。然后我们显示所有的政策。然后每个规则集关联到每个策略。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="10d6" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ netctl group ls<br/>Tenant   Group                   Network  IP Pool  CfgdTag  Policies                   Network profile<br/>------   -----                   -------  -------  -------  --------                   ---------------<br/>default  epg-blue-guestbook-web  blue                       policy-blue-guestbook-web<br/>default  epg-blue-guestbook-db   blue                       policy-blue-guestbook-db<br/>default  epg-blue-wordpress-web  blue                       policy-blue-wordpress-web<br/>default  epg-blue-wordpress-db   blue                       policy-blue-wordpress-db</span><span id="e517" class="lk ll iq lg b gy no ln l lo lp">ubuntu@ip-172-31-9-150:~$ netctl policy ls<br/>Tenant   Policy<br/>------   ------<br/>default  policy-blue-guestbook-web<br/>default  policy-blue-guestbook-db<br/>default  policy-blue-wordpress-web<br/>default  policy-blue-wordpress-db</span><span id="b3ab" class="lk ll iq lg b gy no ln l lo lp">ubuntu@ip-172-31-9-150:~$ netctl policy rule-ls policy-blue-guestbook-web<br/>Incoming Rules:<br/>Rule  Priority  From EndpointGroup  From Network  From IpAddress  To IpAddress  Protocol  Port  Action<br/>----  --------  ------------------  ------------  ---------       ------------  --------  ----  ------<br/>10    1                                                                         tcp       80    allow<br/>Outgoing Rules:<br/>Rule  Priority  To EndpointGroup  To Network  To IpAddress  Protocol  Port  Action<br/>----  --------  ----------------  ----------  ---------     --------  ----  ------<br/>ubuntu@ip-172-31-9-150:~$ netctl policy rule-ls policy-blue-guestbook-db<br/>Incoming Rules:<br/>Rule  Priority  From EndpointGroup      From Network  From IpAddress  To IpAddress  Protocol  Port  Action<br/>----  --------  ------------------      ------------  ---------       ------------  --------  ----  ------<br/>20    1                                                                             icmp      0     allow<br/>10    1         epg-blue-guestbook-web                                                        0     allow<br/>Outgoing Rules:<br/>Rule  Priority  To EndpointGroup  To Network  To IpAddress  Protocol  Port  Action<br/>----  --------  ----------------  ----------  ---------     --------  ----  ------<br/>ubuntu@ip-172-31-9-150:~$</span></pre><p id="8a9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些组和策略都是通过<code class="fe nl nm nn lg b">roles/sample_apps/vars/main.yml</code>中的Ansible配置的</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="226c" class="mj ll iq bd mk ml nr mn mo mp ns mr ms mt nt mv mw mx nu mz na nb nv nd ne nf bi translated">Istio服务网格</h1><p id="3543" class="pw-post-body-paragraph jn jo iq jp b jq ng js jt ju nh jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">如果您在<code class="fe nl nm nn lg b">group_vars/all</code>文件中有<code class="fe nl nm nn lg b">deploy_istio: true</code>，那么您应该已经安装了<a class="ae kl" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank"> istio </a>和一个示例应用程序<a class="ae kl" href="https://istio.io/docs/guides/bookinfo.html" rel="noopener ugc nofollow" target="_blank"> Bookinfo </a>。</p><p id="70f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该可以通过<code class="fe nl nm nn lg b">istio-ingress</code>服务访问Bookinfo应用程序。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="5317" class="lk ll iq lg b gy lm ln l lo lp">ubuntu@ip-172-31-9-150:~$ kubectl get service -n istio-system<br/>NAME            TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                            AGE<br/>istio-ingress   LoadBalancer   10.110.99.208    &lt;pending&gt;     80:32398/TCP,443:31125/TCP                                         26m<br/>istio-mixer     ClusterIP      10.105.165.158   &lt;none&gt;        9091/TCP,15004/TCP,9093/TCP,9094/TCP,9102/TCP,9125/UDP,42422/TCP   26m<br/>istio-pilot     ClusterIP      10.100.147.149   &lt;none&gt;        15003/TCP,8080/TCP,9093/TCP,443/TCP                                26m</span></pre><p id="eb64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为端口分配是随机的，所以您的端口号会有所不同。我的答案是:<code class="fe nl nm nn lg b"><a class="ae kl" href="http://54.213.139.136:32398/productpage" rel="noopener ugc nofollow" target="_blank">http://54.213.139.136:32398/productpage</a></code></p><p id="6b4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请按照<a class="ae kl" href="https://istio.io/docs/tasks/traffic-management/request-routing.html" rel="noopener ugc nofollow" target="_blank">https://istio . io/docs/tasks/traffic-management/request-routing . html</a>上的示例指南获取更多示例配置任务。所有istio文件都位于<code class="fe nl nm nn lg b">/tmp/istio-0.6.0/</code></p><p id="6598" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽情享受吧！</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="0f7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请提供反馈和/或建议。我用这个过程来学习(和排除故障)各种新技术。我很乐意通过github接受任何代码的拉取请求。如果您注意到本指南中没有解释的任何错误或事情，请让我知道，我会更新它。</p></div></div>    
</body>
</html>