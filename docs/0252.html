<html>
<head>
<title>Copying local files to AWS S3 Bucket (AWS CLI + S3 bucket)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将本地文件复制到AWS S3存储桶(AWS CLI + S3存储桶)</h1>
<blockquote>原文：<a href="https://itnext.io/copy-files-from-local-to-aws-s3-bucket-aws-cli-s3-bucket-9dc898608ff8?source=collection_archive---------1-----------------------#2018-01-26">https://itnext.io/copy-files-from-local-to-aws-s3-bucket-aws-cli-s3-bucket-9dc898608ff8?source=collection_archive---------1-----------------------#2018-01-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de2d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">AWS CLI和S3存储桶</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7540a9d673e12c41575b6f0d5626dc66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8ZerivEoeXlXVbO4.jpeg"/></div></div></figure><p id="4412" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fcopy-files-from-local-to-aws-s3-bucket-aws-cli-s3-bucket-9dc898608ff8" rel="noopener ugc nofollow" target="_blank"> <em class="lo">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="d982" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我当前的项目中，我需要将我的前端代码部署/复制到AWS S3桶中。但是我不知道如何表演。我的一个同事找到了完成这项任务的方法。</p><p id="2ed5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是自始至终的指导方针；如何安装AWS CLI，如何使用AWS CLI，以及其他功能。</p><p id="1ef9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么，让我们从头开始。在我的mac上，我没有安装aws cli，所以我在运行下面的命令时出现了错误。</p><p id="c8f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">打开你的终端，</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="7388" class="lu lv iq lq b gy lw lx l ly lz">$ aws --version<br/><br/>output<br/>-bash: aws: command not found</span></pre><p id="6add" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(在这里我得到了解决办法，【https://qiita.com/maimai-swap/items/999eb69b7a4420d6ab64】)</p><p id="ea1a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们安装brew，如果您还没有安装的话。<br/> <strong class="kt ir"> Step1。安装brew </strong></p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="6b10" class="lu lv iq lq b gy lw lx l ly lz">$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></pre><p id="034f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在windows上安装，下载aws-cli msi。</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="73de" class="lu lv iq lq b gy lw lx l ly lz">https://docs.aws.amazon.com/cli/latest/userguide/awscli-install-windows.html</span></pre><p id="23a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">步骤2。检查brew版本</strong></p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="1b43" class="lu lv iq lq b gy lw lx l ly lz">$ brew -v<br/><br/>output<br/>Homebrew 1.5.2<br/>Homebrew/homebrew-core (git revision 58b9f; last commit 2018-01-24)</span></pre><p id="374d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">步骤3。安装aws cli，使用以下命令</strong></p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="78eb" class="lu lv iq lq b gy lw lx l ly lz">$ brew install awscli</span></pre><p id="f526" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第四步。检查aws cli版本</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="839b" class="lu lv iq lq b gy lw lx l ly lz">$ aws --version<br/><br/>output<br/>aws-cli/1.14.30 Python/3.6.4 Darwin/17.3.0 botocore/1.8.34</span></pre><p id="b265" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太好了，现在是时候配置AWS凭证了。<br/> <strong class="kt ir"> Step5。现在配置aws概要文件</strong></p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="d566" class="lu lv iq lq b gy lw lx l ly lz">$ aws configure<br/>AWS Access Key ID [None]: &lt;your access key&gt;<br/>AWS Secret Access Key [None]: &lt;your secret key&gt;<br/>Default region name [None]: &lt;your region name&gt;<br/>Default output format [None]: ENTER</span></pre><p id="6ff6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有设置都完成了。现在你可以访问你的s3存储桶了。</p><p id="f25a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从这里开始，我们可以学习如何管理我们的水桶。</p><p id="d5fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">管理存储桶</strong> <br/> aws s3命令支持常用的存储桶操作，例如创建、删除和列出存储桶。</p><p id="8249" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 1。列表桶</strong></p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="fdd3" class="lu lv iq lq b gy lw lx l ly lz">$ aws s3 ls<br/><br/>output<br/>2017-12-29 08:26:08 my-bucket1<br/>2017-11-28 18:45:47 my-bucket2</span></pre><p id="f05b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下命令列出了bucket-name/path中的对象(换句话说，bucket-name中由前缀path/)筛选的对象。</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="768f" class="lu lv iq lq b gy lw lx l ly lz">$ aws s3 ls s3://bucket-name</span></pre><p id="aca9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 2。创建存储桶</strong></p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="2681" class="lu lv iq lq b gy lw lx l ly lz">$ aws s3 mb s3://bucket-name</span></pre><p id="3309" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(aws s3 mb命令创建新的存储桶。存储桶名称必须唯一。)</p><p id="e41e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> 3。移除铲斗</strong> <br/>使用aws s3 rb命令移除铲斗。</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="7001" class="lu lv iq lq b gy lw lx l ly lz">$ aws s3 rb s3://bucket-name</span></pre><p id="d9df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，桶必须为空，操作才能成功。要删除非空的存储桶，您需要包括- force选项。</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="5e51" class="lu lv iq lq b gy lw lx l ly lz">$ aws s3 rb s3://bucket-name --force</span></pre><p id="1724" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将首先删除存储桶中的所有对象和子文件夹，然后移除存储桶。</p><p id="d129" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">管理对象</strong> <br/>高级aws s3命令也可以方便地管理亚马逊s3对象。对象命令包括aws s3 cp、aws s3 ls、aws s3 mv、aws s3 rm和sync。cp、ls、mv和rm命令的工作方式与它们的Unix类似</p><p id="a100" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">cp、mv和sync命令包含一个- grants选项，可用于将对象权限授予指定的用户或组。使用以下语法将- grants选项设置为权限列表:</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="3bc5" class="lu lv iq lq b gy lw lx l ly lz">--grants Permission=Grantee_Type=Grantee_ID<br/>         [Permission=Grantee_Type=Grantee_ID ...]</span></pre><p id="2221" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个值包含以下元素:</p><ul class=""><li id="cb0d" class="ma mb iq kt b ku kv kx ky la mc le md li me lm mf mg mh mi bi translated">权限–指定授予的权限，可以设置为read、readacl、writeacl或full。</li><li id="dba9" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated">grantee _ Type–指定如何识别被授权者，可以设置为uri、电子邮件地址或id。</li><li id="7fe2" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated">Grantee _ ID–根据Grantee_Type指定被授权者。</li><li id="b240" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated">尤里——小组的uri。有关更多信息，请参见谁是被授权者？</li><li id="62cb" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated">电子邮件地址–帐户的电子邮件地址。</li><li id="54c0" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated">id–帐户的规范ID。</li></ul><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="d706" class="lu lv iq lq b gy lw lx l ly lz">aws s3 cp file.txt s3://my-bucket/ --grants read=uri=http://acs.amazonaws.com/groups/global/AllUsers full=emailaddress=user@example.com</span></pre><h1 id="2d6f" class="mo lv iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">■从目录中复制多个文件</h1><p id="8897" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">如果你想把一个目录中的所有文件复制到s3 bucket，那么检查下面的命令。</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="c76e" class="lu lv iq lq b gy lw lx l ly lz">aws s3 cp &lt;your directory path&gt; s3://&lt;your bucket name&gt; — grants read=uri=<a class="ae ln" href="http://acs.amazonaws.com/groups/global/AllUsers" rel="noopener ugc nofollow" target="_blank">http://acs.amazonaws.com/groups/global/AllUsers</a> — recursive</span></pre><p id="11ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们使用— recursive标志来表示所有文件都必须递归复制。当使用参数recursive传递时，下面的cp命令递归地将指定目录下的所有文件复制到指定的桶中。</p><p id="c82a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以在复制文件时设置排除或包含标志。</p><pre class="kg kh ki kj gt lp lq lr ls aw lt bi"><span id="c79f" class="lu lv iq lq b gy lw lx l ly lz">aws s3 cp &lt;your directory path&gt; s3://&lt;your bucket name&gt;/ — recursive — exclude “*.jpg” — include “*.log”</span></pre><p id="ce90" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">更多详情，请通过aws官方链接。<br/><a class="ae ln" href="https://docs.aws.amazon.com/cli/latest/userguide/using-s3-commands.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/CLI/latest/user guide/using-S3-commands . html</a></p><p id="b630" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您抽出宝贵的时间阅读。</p><p id="f060" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">享受编码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/441c268b79450537499d8e9c9c0917db.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/0*kV8cM6PGYvrSOCWA.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/7b68a476300dfbd061b3a903130ff093.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/0*wcSnBVNXsMMP510Q.png"/></div></figure><p id="a52d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">感谢&amp;最诚挚的问候<br/> Alok Rawat </strong></p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="8f6c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">最初发表于</em><a class="ae ln" href="https://qiita.com/alokrawat050/items/56820afdb6968deec6a2" rel="noopener ugc nofollow" target="_blank"><em class="lo">qiita.com</em></a><em class="lo">。</em></p></div></div>    
</body>
</html>