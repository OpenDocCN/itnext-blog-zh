<html>
<head>
<title>Git Merge vs Rebase and Where to Use Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git Merge vs Rebase以及在哪里使用它们</h1>
<blockquote>原文：<a href="https://itnext.io/git-merge-vs-rebase-and-where-to-use-them-2a0a6e88769d?source=collection_archive---------4-----------------------#2022-04-18">https://itnext.io/git-merge-vs-rebase-and-where-to-use-them-2a0a6e88769d?source=collection_archive---------4-----------------------#2022-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="0012" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将特征分支合并到主分支有两种工作流程，即“重设基础和快进”和“(适当)合并”。在前一篇文章中，我们已经讨论了这些工作流的含义。现在，是时候讨论何时使用它们了。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/446730b72f8a9fe2d1fc957a7cb34ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nGb9Y9v0hRngzp5_ybyHQw.png"/></div></div></figure><h1 id="7a80" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="7351" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">建议在跳进讨论之前先看一下<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/git-merge-vs-rebase-938950fb218">前传</a>。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="fef1" class="lb lc it bd ld le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly bi translated">合并或改变基础</h1><p id="c002" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">看情况。我会提到一些利弊，并会说什么是我个人做的方式。</p><h2 id="99ee" class="mq lc it bd ld mr ms dn lh mt mu dp ll kb mv mw lp kf mx my lt kj mz na lx nb bi translated">Git图</h2><p id="20b1" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">real merge的第一个特性是它创建的非线性的、有时是混乱的git历史图。使用合并工作流，您的历史也将被总是相同的合并提交所填充:这个分支被合并到另一个分支中。它并没有告诉你太多，只是给你指出了一些方向。</p><p id="765a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们假设您希望在开发时让您的分支与master保持同步。图表会变得很恐怖。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nc"><img src="../Images/e58ac2a385b2e727bfb09647f5871502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vz_QcZb9ABQXnzFS1OPCw.png"/></div></div></figure><p id="dcd7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这与重定基础不同，因为它只是将您的分支提交放在主提交之上。</p><h2 id="4d5a" class="mq lc it bd ld mr ms dn lh mt mu dp ll kb mv mw lp kf mx my lt kj mz na lx nb bi translated">提交消息</h2><p id="41a3" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我们提到过合并提交很烦人。但是让我们假设您有一个包含79个提交的分支，每个提交都有一条类似于“大修复”或“更新README”的消息。通过改变基础和快进，你给你的主人增加了很多垃圾。真正的合并在这里也不是一个好的选择:合并提交指向一堆垃圾。也许一个南瓜合并在这里最有意义。</p><p id="942f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是如果你有一两个精心制作的提交，带有有意义的消息，那么直接把它们添加到主分支比添加另一个“合并分支feature_branch”更有意义。</p><h2 id="159a" class="mq lc it bd ld mr ms dn lh mt mu dp ll kb mv mw lp kf mx my lt kj mz na lx nb bi translated">更新特征分支</h2><p id="ba3a" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">让我们假设您想要从主分支获取更新，并将它们发送到您的特性分支。如果您有79个提交，并且有一个冲突，在rebase的情况下，您可能被迫解决79次冲突(因为提交被一个接一个地添加到主的提示)。当您创建合并提交时，情况并非如此。</p><h1 id="b29f" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">我个人推荐</h1><p id="e7e6" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">“用哪个”的最终答案是“看情况”。它们都不是灵丹妙药，如果没有正确使用git，您可能会把两者都搞得一团糟。</p><p id="fdf0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我使用的工作流程是基于重置基础和快进，但它也非常类似于挤压合并:</p><ol class=""><li id="d82c" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn ni nj nk nl bi translated">为微小的变化创建特征分支</li><li id="e9db" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">添加一些提交</li><li id="734a" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">创建拉取/合并请求</li><li id="aaeb" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">在审查和接受拉/合并请求之后，将特性分支上的提交压缩成一个(手动，不合并)，并为其编写一个有意义的提交消息，链接原始问题ID</li><li id="1f18" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">对主服务器执行快进合并</li></ol><p id="192e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我喜欢保持主分支的整洁和线性，并且每个提交消息都有意义。当有人想获得更多关于代码库中某些变化的上下文时，这很有帮助(通过git责备)。</p><p id="7893" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我遵循此工作流程的其他原因:</p><ul class=""><li id="8a7e" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn nr nj nk nl bi translated">我做一些小的提交，使评审过程对评审者来说更容易</li><li id="d8c5" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">审查完成后，我将它们压缩在一起，这样只有一个提交在主分支上结束</li><li id="9efb" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">我手动挤压，因为这样就可以在最终合并之前检查提交消息(或者甚至由CI自动检查)</li><li id="107a" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">此外，通过手动挤压，我可以自己编写提交消息——通过挤压合并，单击合并按钮的人可以编写提交消息，这不是我们想要的</li><li id="f9d5" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">我对每个拉/合并请求都做一件事，所以对它做一次提交是有意义的</li><li id="2ca9" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">我将最初的问题号/ID链接回提交消息，这既是为了自动关闭问题(GitHub和GitLab都有这方面的机制),也是为了让未来的读者有机会了解该问题的讨论和需求</li></ul><h1 id="178d" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">最后的话</h1><p id="2211" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">由于这篇文章对于一篇“中等”大小的文章来说已经太长了，我将在以后的文章中更深入地研究细节，尤其是以下内容:</p><ul class=""><li id="3124" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn nr nj nk nl bi translated">如何手动挤压提交</li><li id="5334" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">如何链接GitHub和GitLab上的问题</li><li id="fe71" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">拉/合并请求工作流最佳实践</li><li id="f2f3" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">如何在您的配置项上设置提交lint</li></ul><p id="3a2d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下一篇文章部分介绍了最后一个问题:</p><ul class=""><li id="8904" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn nr nj nk nl bi translated"><a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/ten-commandments-of-git-commit-messages-94bd6dcf6e0e">Git提交消息的十诫</a></li></ul><p id="5832" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要获得未来文章的通知，您可以:</p><ul class=""><li id="46b3" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn nr nj nk nl bi translated"><a class="ae ko" href="https://medium.com/subscribe/@aerabi" rel="noopener">订阅</a>我的媒体发布</li><li id="c3fa" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nr nj nk nl bi translated">在Twitter上关注<a class="ae ko" href="https://twitter.com/MohammadAliEN" rel="noopener ugc nofollow" target="_blank">我</a>，获取git上的每周文章和推文</li></ul></div></div>    
</body>
</html>