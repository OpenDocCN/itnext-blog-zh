<html>
<head>
<title>Angular: secure your application routes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular:保护您的应用程序路线</h1>
<blockquote>原文：<a href="https://itnext.io/angular-secure-your-application-routes-a7f71a87e97f?source=collection_archive---------2-----------------------#2018-07-18">https://itnext.io/angular-secure-your-application-routes-a7f71a87e97f?source=collection_archive---------2-----------------------#2018-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2562a005115a37a2642b77c5c9ee9587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xPPPlBuXfUBEj6JFauoLCw.jpeg"/></div></div></figure><p id="d4a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">于是，你写了几十个几十个路由，加了参数，用数据左轮手枪黑了，现在，任何人都可以访问任何页面，但是你真的不想要，你想通过权限提供访问。</p><p id="15ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您的第一步将是创建<code class="fe kw kx ky kz b">CanActivateGuard.</code></p><p id="bb02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是守卫如何知道哪个组件需要哪个许可。</p><p id="2f0b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">建议两种方式:</p><h2 id="3646" class="la lb iq bd lc ld le dn lf lg lh dp li kj lj lk ll kn lm ln lo kr lp lq lr ls bi translated"><strong class="ak">路线数据:</strong></h2><p id="28f3" class="pw-post-body-paragraph jy jz iq ka b kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr lx kt ku kv ij bi translated">对于<strong class="ka ir">您的任何</strong>路线，我们将定义包含所需权限的数据对象。</p><p id="2b00" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">路由配置将如下所示:</p><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="4266" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">警卫看起来会像这样:</p><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><h2 id="cf96" class="la lb iq bd lc ld le dn lf lg lh dp li kj lj lk ll kn lm ln lo kr lp lq lr ls bi translated">2.<strong class="ak">组件装饰器</strong></h2><p id="f9e6" class="pw-post-body-paragraph jy jz iq ka b kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr lx kt ku kv ij bi translated">路由保护将只定义一次。在根路由中，使用<code class="fe kw kx ky kz b">canActivateChild </code>使其也与子路由相关。</p><p id="b168" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，任何路由组件都将使用我们将创建特殊装饰器来定义所需的权限。</p><p id="2d4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Guard将读取组件装饰器，获取其定义的权限，并调用安全服务(或任何其他逻辑)来检查用户是否可以访问该页面。</p><ul class=""><li id="8b9f" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">路线配置:</li></ul><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><ul class=""><li id="cfac" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">装饰者:</li></ul><p id="171d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是decorator函数，它向组件添加一个包含所需权限的字段。(这不会添加到组件实例中，只是在组件构造函数中)</p><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="93ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是我们如何在某个组件上使用装饰器:</p><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><ul class=""><li id="f1ae" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">警卫:</li></ul><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><h1 id="5f65" class="mn lb iq bd lc mo mp mq lf mr ms mt li mu mv mw ll mx my mz lo na nb nc lr nd bi translated">什么比较好？</h1><p id="c617" class="pw-post-body-paragraph jy jz iq ka b kb lt kd ke kf lu kh ki kj lv kl km kn lw kp kq kr lx kt ku kv ij bi translated">在第二个选项中，我们可以为根路由仅定义一次<strong class="ka ir">保护</strong>，这将影响任何将要添加的子根。<br/>没有人需要记住这个保护，在一个大型应用程序中，开发人员每天都会添加一个路由，很容易忘记还需要将保护及其数据添加到配置中。<br/> I <strong class="ka ir">在这种方法中，您只需添加装饰器，就完成了</strong>，<strong class="ka ir">不需要在路线配置中进行修改</strong>。</p></div></div>    
</body>
</html>