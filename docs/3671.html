<html>
<head>
<title>Kubernetes Istio simply visually explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes Istio简单直观地解释了</h1>
<blockquote>原文：<a href="https://itnext.io/kubernetes-istio-simply-visually-explained-58a7d158b83f?source=collection_archive---------1-----------------------#2020-01-28">https://itnext.io/kubernetes-istio-simply-visually-explained-58a7d158b83f?source=collection_archive---------1-----------------------#2020-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="571f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">那么大家都在谈论的这个Istio是什么呢？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/437672b84c324f9565697a9935e7c001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qsnaoptl1U3djpmUH41c8A.jpeg"/></div></div></figure><p id="74d1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">确保您理解了第1部分中的Kubernetes服务:</strong></p><ul class=""><li id="056e" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated">第1部分:<a class="ae lz" href="https://medium.com/swlh/kubernetes-services-simply-visually-explained-2d84e58d70e5?source=friends_link&amp;sk=49a5e832662a689111a6087e1fe1232a" rel="noopener"> Kubernetes服务简单直观地解释了</a></li><li id="e901" class="lq lr it kw b kx ma la mb ld mc lh md ll me lp lv lw lx ly bi translated">第2部分:<a class="ae lz" href="https://codeburst.io/kubernetes-ingress-simply-visually-explained-d9cad44e4419?source=friends_link&amp;sk=e8ca596700f5b58c7ab0d85d4dab6386" rel="noopener" target="_blank"> Kubernetes Ingress简单直观地解释了</a></li><li id="4e1c" class="lq lr it kw b kx ma la mb ld mc lh md ll me lp lv lw lx ly bi translated">第三部分:(本文)</li><li id="a144" class="lq lr it kw b kx ma la mb ld mc lh md ll me lp lv lw lx ly bi translated">第4部分:<a class="ae lz" href="https://medium.com/@wuestkamp/kubernetes-serverless-simply-visually-explained-ccf7be05a689?sk=142c4725e110bcd9ad67f93bd2b37ede" rel="noopener"> Kubernetes无服务器简单直观讲解</a></li></ul><h1 id="eb4d" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">TL；博士/什么是Istio？</h1><p id="2f20" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">Istio是一个服务网格，它允许集群中的pod和服务之间进行更详细、复杂和可观察的通信。</p><p id="41bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它通过用CRDs扩展Kubernetes API来管理这个问题。它将代理容器注入到所有pod中，然后这些pod控制集群中的流量。</p><h1 id="cbce" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">Kubernetes服务</h1><p id="6a00" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">从这里开始，你应该已经了解了Kubernetes服务，你可以阅读本系列的第1部分。我们现在将很快深入Kubernetes服务是如何实现的。我认为这有助于理解Istio如何做相同和不同的事情。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/03401c4865efdccfad7fef92635f5094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEQvfHTdlONaTuQh7oldEg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">图1: Kubernetes本地服务请求</figcaption></figure><p id="c5e1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图1显示了一个Kubernetes集群，它有两个节点和4个pod，每个pod有一个容器。有指向nginx pods的服务<code class="fe nh ni nj nk b">service-nginx</code>和指向python pods的服务<code class="fe nh ni nj nk b">service-python</code>。红线显示了从<code class="fe nh ni nj nk b">pod1-nginx</code>的nginx容器向<code class="fe nh ni nj nk b">service-python</code>服务发出的请求，服务将请求重定向到<code class="fe nh ni nj nk b">pod2-python</code>。</p><p id="a3ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">默认情况下，ClusterIP服务执行简单的随机或循环分发。Kubernetes中的服务不存在于特定的节点上，而是存在于整个集群中。我们可以在图2中看到更多细节:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/514f1737eeae7670cd778cb08fb4072f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZuC2G-FzsstMG_q-OE12Pg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">图2:使用kube-proxy的Kubernetes本地服务请求</figcaption></figure><p id="85f9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图2显示了与图1相同的示例，只是更加详细。Kubernetes中的服务是由运行在每个节点上的<code class="fe nh ni nj nk b">kube-proxy</code>组件实现的。该组件创建iptables规则，将请求重定向到pod。因此服务就是iptables规则。(还有其他不使用iptables的代理模式，但是过程是一样的。)</p><p id="961d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在图2中，我们看到Kubernetes API程序每个都是<code class="fe nh ni nj nk b">kube-proxy</code>。每当服务配置或服务窗格发生变化时，都会发生这种情况。通过这种方式，Kubernetes API(以及整个主节点或控制平面)可以关闭，但服务仍然可以工作。</p><h1 id="435c" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">Kubernetes Istio</h1><p id="1585" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">我们现在来看配置了Istio的同一个示例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/2429606d1c27e08ca65de972a5e51652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdqXungMDEXQtZrflNqeAQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">图3: Istio控制平面程序istio-proxy</figcaption></figure><p id="5444" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图3显示了安装的Istio，它带有Istio控制面板。同样常见的是，每个pod都有第二个名为<code class="fe nh ni nj nk b">istio-proxy</code>的容器，它在创建过程中自动注入到pod中。</p><p id="7ca4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Istio最流行的代理是<a class="ae lz" href="https://www.envoyproxy.io/" rel="noopener ugc nofollow" target="_blank"> Envoy </a>，它拥有惊人的能力。尽管有可能使用其他代理(<a class="ae lz" href="https://www.nginx.com/blog/nginmesh-nginx-as-a-proxy-in-an-istio-service-mesh/" rel="noopener ugc nofollow" target="_blank">比如Nginx </a>)，这就是为什么从现在开始我们只将代理称为<code class="fe nh ni nj nk b">istio-proxy</code>。</p><p id="6174" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以看到<code class="fe nh ni nj nk b">kube-proxy</code>组件不再显示，这样做是为了保持图像干净。这些仍然存在，但拥有<code class="fe nh ni nj nk b">istio-proxy</code>的吊舱将不再使用<code class="fe nh ni nj nk b">kube-proxy</code>组件。</p><p id="57e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每当配置或服务舱发生变化时，Istio控制平面对所有<code class="fe nh ni nj nk b">istio-proxy</code>边车进行编程。类似于图2中Kubernetes API对所有<code class="fe nh ni nj nk b">kube-proxy</code>组件的编程。Istio控制平面使用现有的Kubernetes服务来接收每个服务指向的所有pod。Istio使用pod IP地址实现自己的路由。</p><p id="e3d6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在Istio控制平面对所有<code class="fe nh ni nj nk b">istio-proxy</code>边车进行编程后，它可能看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/268183df34ec09c8433a50a700421dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UjuYdYvsbqJGlowAV_do0Q.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">图4: Istio控制平面对所有Istio代理编程</figcaption></figure><p id="5dcf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在图4中，我们看到Istio控制平面如何将当前配置应用到集群中的所有<code class="fe nh ni nj nk b">istio-proxy</code>容器。为简单起见，这些还包括“ClusterIP”声明。虽然ClusterIP是Kubernetes的内部服务类型。Istio将把Kubernetes服务声明转换成自己的路由声明。但是想象一下图片中显示的情况会有所帮助。</p><p id="1c6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们看看如何使用Istio发出请求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/d849dbb6d3b21771b184bf7cada9b8f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ClFLEg7N-U8YjdX9GJgwhg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">图Istio发出的请求</figcaption></figure><p id="d087" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在图5中，所有的<code class="fe nh ni nj nk b">istio-proxy</code>容器已经由Istio控制平面编程，并包含所有必要的路由信息，如图3/4所示。来自<code class="fe nh ni nj nk b">pod1-nginx</code>的nginx容器请求服务<code class="fe nh ni nj nk b">service-python</code>。</p><p id="f3d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请求被<code class="fe nh ni nj nk b">pod1-nginx</code>的<code class="fe nh ni nj nk b">istio-proxy</code>容器拦截，并被重定向到一个python pod的<code class="fe nh ni nj nk b">istio-proxy</code>容器，该容器随后将其重定向到python容器。</p><h1 id="0eda" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">这里发生了什么？</h1><p id="1a4e" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">图1-5显示了带有nginx和python pods的相同示例Kubernetes应用程序。我们已经看到了使用默认的Kubernetes服务然后使用Istio的请求是如何发生的。</p><p id="1b5a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">重要的事情</strong>:无论使用什么方法，结果都是一样的，应用程序本身不需要改变，只需要改变基础设施代码。</p><h1 id="6e63" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">为什么所有这些，为什么使用Istio？</h1><p id="0cc8" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">如果使用Istio时没有任何变化(nginx pods仍然可以像以前一样连接到python pods ),那么为什么首先要使用Istio呢？</p><p id="4939" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">惊人的优势在于</strong>现在所有流量都通过每个pod中的<code class="fe nh ni nj nk b">istio-proxy</code>容器进行路由。每当一个<code class="fe nh ni nj nk b">istio-proxy</code>接收并重定向一个请求时，它也向Istio控制平面提交关于它的信息。</p><p id="b03d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，Istio控制平面确切地知道请求来自哪个pod，存在哪些HTTP报头，请求从一个<code class="fe nh ni nj nk b">istio-proxy</code>到另一个需要多长时间等等。在有许多服务相互通信的集群中，这允许对所有流量进行更多的观察和更好的控制。</p><h2 id="80ce" class="np mg it bd mh nq nr dn ml ns nt dp mp ld nu nv mr lh nw nx mt ll ny nz mv oa bi translated">高级路由</h2><p id="d4cb" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">Kubernetes内部服务只能将服务请求循环或随机分配给pod。有了Istio，更复杂的方法成为可能。比如根据请求头重定向，如果发生错误或者重定向到最少使用的服务。</p><h2 id="dfd9" class="np mg it bd mh nq nr dn ml ns nt dp mp ld nu nv mr lh nw nx mt ll ny nz mv oa bi translated">部署</h2><p id="8d75" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">它允许将特定百分比的流量路由到特定的服务版本，因此允许绿色/蓝色和淡黄色部署。</p><h2 id="39ba" class="np mg it bd mh nq nr dn ml ns nt dp mp ld nu nv mr lh nw nx mt ll ny nz mv oa bi translated">加密</h2><p id="0a86" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">从<code class="fe nh ni nj nk b">istio-proxy</code>到<code class="fe nh ni nj nk b">istio-proxy</code>之间的集群内部流量可以加密。</p><h2 id="22b2" class="np mg it bd mh nq nr dn ml ns nt dp mp ld nu nv mr lh nw nx mt ll ny nz mv oa bi translated">监控/图形生成</h2><p id="3895" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">Istio连接到像普罗米修斯这样的监控工具。它还可以很好地与Kiali一起显示所有服务及其开箱即用的流量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/7918a5c50b5d6e4ae69eb9383c7f5482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7HCqzSuYof7lujZqTXwWCQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated"><a class="ae lz" href="https://istio.io/docs/tasks/observability/kiali/" rel="noopener ugc nofollow" target="_blank">https://istio.io/docs/tasks/observability/kiali</a></figcaption></figure><h2 id="8481" class="np mg it bd mh nq nr dn ml ns nt dp mp ld nu nv mr lh nw nx mt ll ny nz mv oa bi translated">描摹</h2><p id="331f" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">因为Istio控制平面有大量关于请求的数据，所以可以使用Jaeger等工具进行跟踪和检查。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/a754059ef91e668c59e6e66af37ac8cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VVDu8J0MRpfmhlfxbDKdrg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated"><a class="ae lz" href="https://istio.io/docs/tasks/observability/distributed-tracing/jaeger/" rel="noopener ugc nofollow" target="_blank">https://istio . io/docs/tasks/observability/distributed-tracing/jaeger</a></figcaption></figure><h2 id="5e08" class="np mg it bd mh nq nr dn ml ns nt dp mp ld nu nv mr lh nw nx mt ll ny nz mv oa bi translated">多簇网格</h2><p id="93e3" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">Istio有一个内部服务注册中心，可以使用现有的Kubernetes服务。尽管也可以从集群外部添加资源，甚至将不同的集群连接到一个网格中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/2acbe9c90f35461bce44b8060faf9503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G81ZdoAQgHf1ucP5CcIUyw.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated"><a class="ae lz" href="https://istio.io/docs/ops/deployment/deployment-models/#multiple-clusters" rel="noopener ugc nofollow" target="_blank">https://istio . io/docs/ops/deployment/deployment-models/# multi-clusters</a></figcaption></figure><h1 id="580e" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">边车喷射</h1><p id="c0a5" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">为了让Istio工作，应该是网格一部分的每个pod都需要注射<code class="fe nh ni nj nk b">istio-proxy</code>边车。这可以在pod创建期间为整个名称空间自动完成(通过<a class="ae lz" href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/" rel="noopener ugc nofollow" target="_blank">准入控制器钩子</a>)或者手动完成。</p><h1 id="2376" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">Istio会取代Kubernetes的服务吗？</h1><p id="35f6" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">没有。当我开始使用Istio时，我问自己的一个问题是，它是否会取代现有的Kubernetes服务。答案是否定的。Istio使用现有的Kubernetes服务来获取所有端点/pod IP地址。</p><h1 id="492e" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">Istio是否取代Kubernetes Ingress？</h1><p id="633d" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">(可能在本系列的<a class="ae lz" href="https://codeburst.io/kubernetes-ingress-simply-visually-explained-d9cad44e4419?source=friends_link&amp;sk=e8ca596700f5b58c7ab0d85d4dab6386" rel="noopener" target="_blank">第2部分中读到入口)</a></p><p id="67a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">是的。Istio提供了新的资源，比如Gateway和VirtualService，甚至还附带了ingress转换器<code class="fe nh ni nj nk b">istioctl convert-ingress</code>。一个很好的来源是https://istio.io/docs/concepts/traffic-management的<a class="ae lz" href="https://istio.io/docs/concepts/traffic-management/" rel="noopener ugc nofollow" target="_blank"/></p><p id="f932" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图6显示了Istio网关如何处理入口流量。网关本身也是一个<code class="fe nh ni nj nk b">istio-proxy</code>组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/38b907d492d64eca76c96488c2c59381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wjqpnadF3azeNjSOxXkLHQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">图6: Istio网关</figcaption></figure><h1 id="6966" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">控制平面组件</h1><p id="a8f7" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">Istio控制面板由几个较小的组件组成，如飞行员、调音台、城堡和厨房。如果你喜欢潜得更深，我建议去https://istio.io/docs/ops/deployment/architecture</p><h1 id="b917" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">如果Istio控制平面关闭会发生什么？</h1><p id="8a34" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">因为所有的<code class="fe nh ni nj nk b">istio-proxy</code>边车都已经被编程，Istio控制平面可以下降，交通像以前一样工作。但是不会应用配置更新或创建的新pod。</p><p id="c0f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">虽然对于高级路由，如将流量发送到最少使用的pod，或策略(【https://istio.io/docs/tasks/policy-enforcement】)来说，所有<code class="fe nh ni nj nk b">istio-proxys</code>之间需要通过Istio控制平面进行通信。然后，在允许请求之前，每个<code class="fe nh ni nj nk b">istio-proxy</code>都必须检查回Istio控制平面。</p><p id="ecc1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了让这些配置正常工作，我认为控制平面必须随时可用。如果你有这方面的链接，请在评论中添加。</p><h1 id="0dc4" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">接下来你会做什么？</h1><p id="aa71" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">我写了一篇关于<a class="ae lz" href="https://medium.com/@wuestkamp/kubernetes-istio-canary-deployment-5ecfd7920e1c?source=friends_link&amp;sk=2be48393ac175a2199bf5d486cb91acf" rel="noopener"> Istio Canray部署</a>的示例文章和Github报告。</p><p id="4e74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Istio提供了一个很好的带有一些微服务的示例应用程序。如果你喜欢一头扎进Istio，这是一个不错的开始:<a class="ae lz" href="https://istio.io/docs/setup/getting-started/" rel="noopener ugc nofollow" target="_blank">https://istio.io/docs/setup/getting-started</a></p><p id="717f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你喜欢潜得更深，这个视频也很棒。</p><h1 id="61a9" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">概述</h1><p id="0e00" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">这是一个简单的介绍和广泛的概述，我希望能帮助人们开始。Istio无疑在Kubernetes之上又增加了一层复杂性。尽管对于现代微服务架构，它实际上提供了一种比在应用程序代码本身中实现跟踪或可观察性更简单的方法。</p><h1 id="f901" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">成为Kubernetes认证</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://killer.sh"><div class="gh gi of"><img src="../Images/cf3901a56841fcb55f9e4e17b9f07672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Kbj17_6VncUuoBqNsAzzg.png"/></div></a><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated"><a class="ae lz" href="https://killer.sh" rel="noopener ugc nofollow" target="_blank"> https://killer.sh </a></figcaption></figure></div></div>    
</body>
</html>