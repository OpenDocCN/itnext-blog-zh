<html>
<head>
<title>Deploy a MongoDB, ExpressJS, ReactJS, NodeJS (MERN Stack) Web Application on AWS EC2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS EC2上部署一个MongoDB、ExpressJS、ReactJS、NodeJS (MERN堆栈)Web应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/deploy-a-mongodb-expressjs-reactjs-nodejs-mern-stack-web-application-on-aws-ec2-2a0d8199a682?source=collection_archive---------1-----------------------#2019-09-19">https://itnext.io/deploy-a-mongodb-expressjs-reactjs-nodejs-mern-stack-web-application-on-aws-ec2-2a0d8199a682?source=collection_archive---------1-----------------------#2019-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5791076fecb92d492045d6f5f541f57b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2sfmF8L1xRHjt2KSC1vZbQ.jpeg"/></div></div></figure><p id="9afe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于许多开发人员来说，在AWS上部署全栈Web应用程序一直是个问题。我的许多大学同学分享了他们在尝试将他们的Web应用程序部署到Amazon Web Services (AWS)时的永无止境的可怕经历。与Heroku不同，在Heroku中，舞台已经为您搭建好了，您只需将您的本地Git Repo推送到Heroku，AWS是一种基础设施即服务。换句话说，AWS要求您手动配置和维护虚拟化服务器。您还必须添加数据库实例；选择并设置操作系统；并设置一个负载平衡器，将负载分散到多个应用服务器上。除此之外，您还必须选择满足应用需求的CPU、RAM和存储容量。这听起来确实很复杂，但是我们将详细介绍每一个步骤。我们开始吧！</p><h1 id="729c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在部署之前设置您的项目</h1><h2 id="70c7" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">从React代码中删除Redux开发工具</h2><p id="e190" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">由于我们使用React作为我们的前端，您可能一直在使用Redux Dev Tools Chrome扩展。不幸的是，只有开发工具浏览器扩展的人才能使用你的应用程序。因此，您可能需要考虑删除或注释掉前端代码中集成Redux Dev Tools扩展的部分，以便人们能够使用您的应用程序。</p><h2 id="1908" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">执行React应用程序的生产构建</h2><p id="fdc7" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">当在项目目录中时，在终端中键入以下内容，以执行React应用程序的生产构建，</p><p id="3c2c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">(注意<strong class="kd iu">客户端</strong>在这里是React项目目录的名称。如果你的React项目文件夹不是以<strong class="kd iu">客户端</strong>命名的，确保你的<strong class="kd iu"> cd </strong>进入那个目录，而不是<strong class="kd iu">客户端</strong>目录)</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="31b3" class="lx la it mt b gy mx my l mz na">cd client</span><span id="502e" class="lx la it mt b gy nb my l mz na">npm run build</span></pre><h2 id="9734" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">设置您的节点后端来服务您的静态资产</h2><p id="37d2" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">确保在所有其他路由配置如下之后，您正在为您的<strong class="kd iu"> server.js </strong>中的client/build文件夹中的React<strong class="kd iu">index.html</strong>文件提供服务，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f367" class="lx la it mt b gy mx my l mz na">**Some imports .... **</span><span id="fa57" class="lx la it mt b gy nb my l mz na"><em class="nc">const</em> path = require(“path”);</span><span id="752f" class="lx la it mt b gy nb my l mz na">................ <br/>Other Routes and Code...<br/>...............</span><span id="cb36" class="lx la it mt b gy nb my l mz na">(Add below code after all other routes)</span><span id="aca9" class="lx la it mt b gy nb my l mz na">//Serve Static Assets in production </span><span id="99a4" class="lx la it mt b gy nb my l mz na">//set static folder</span><span id="710b" class="lx la it mt b gy nb my l mz na">app.use(express.static(“client/build”));</span><span id="9a64" class="lx la it mt b gy nb my l mz na">app.get(“*”, (<em class="nc">req</em>, <em class="nc">res</em>) <em class="nc">=&gt;</em> {</span><span id="c3bb" class="lx la it mt b gy nb my l mz na">res.sendFile(path.resolve(__dirname, “client”, “build”, “index.html”));</span><span id="fb0f" class="lx la it mt b gy nb my l mz na">});</span><span id="deb9" class="lx la it mt b gy nb my l mz na">..........<br/>More Code.....<br/>..........</span></pre><h1 id="6aa9" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">创建您的AWS EC2实例</strong></h1><p id="adf5" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated"><strong class="kd iu">步骤1 </strong> —转到您的<a class="ae nd" href="https://us-east-2.console.aws.amazon.com/console/home?region=us-east-2#" rel="noopener ugc nofollow" target="_blank">亚马逊Web服务管理控制台</a>并选择<strong class="kd iu">使用EC2 </strong>启动虚拟机</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/8be2efbb81911c9ca406181ce6b4ef58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zc_F3e52FKtN0jgh1nHeQg.png"/></div></div></figure><p id="f187" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">步骤2  —配置您的实例并启动您的实例</p><p id="3d1c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这一步，你要做的就是</p><ul class=""><li id="590a" class="nf ng it kd b ke kf ki kj km nh kq ni ku nj ky nk nl nm nn bi translated">选择AMI(<strong class="kd iu">Ubuntu Server 18.04 LTS(HVM)</strong>)</li></ul><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/9c9fad3ad860aba5438ceb188ff91ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z7XaeLPqCYLKpwlTwVobBw.png"/></div></div></figure><ul class=""><li id="254d" class="nf ng it kd b ke kf ki kj km nh kq ni ku nj ky nk nl nm nn bi translated">选择一个实例类型(在我们的例子中是<strong class="kd iu"> t2.micro </strong>)</li><li id="7338" class="nf ng it kd b ke no ki np km nq kq nr ku ns ky nk nl nm nn bi translated"><strong class="kd iu">暂不审核推出！</strong></li><li id="6183" class="nf ng it kd b ke no ki np km nq kq nr ku ns ky nk nl nm nn bi translated">选择<strong class="kd iu">下一步:配置实例详细信息</strong></li></ul><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/bf657d6be01fb7759bcc09da21c65e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYv4zBRAG4ZELkcKzEZ9ag.png"/></div></div></figure><ul class=""><li id="7725" class="nf ng it kd b ke kf ki kj km nh kq ni ku nj ky nk nl nm nn bi translated">选择<strong class="kd iu">下一步:添加存储</strong></li></ul><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/a08d67ceee3f63159b78d7b696930f33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wEnX_HXRxoZr22LWoOiZTw.png"/></div></div></figure><ul class=""><li id="d150" class="nf ng it kd b ke kf ki kj km nh kq ni ku nj ky nk nl nm nn bi translated">选择<strong class="kd iu">下一步:添加标签</strong></li></ul><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/888f6763ee188b6367e7db418bfbdf05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*shBiV0wBX_yyGQkOJjL5Yw.png"/></div></div></figure><ul class=""><li id="f1ec" class="nf ng it kd b ke kf ki kj km nh kq ni ku nj ky nk nl nm nn bi translated">选择<strong class="kd iu">下一步:配置安全组</strong></li></ul><p id="3566" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这里，您必须添加另外两个规则。</p><p id="4222" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您会看到已经为您配置了<strong class="kd iu"> SSH </strong>规则。</p><p id="bf6a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择<strong class="kd iu">添加规则</strong>，输入类型为<strong class="kd iu"> HTTP，</strong>端口范围<strong class="kd iu"> </strong>为<strong class="kd iu"> 80 </strong>，源为<strong class="kd iu"> Anywhere。</strong></p><p id="77a8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">重复此过程，类型为<strong class="kd iu"> HTTPS，</strong>端口范围为<strong class="kd iu"> 443 </strong>，来源为<strong class="kd iu">任何地方</strong>。</p><p id="b838" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择<strong class="kd iu">查看并启动</strong>，然后选择<strong class="kd iu">启动</strong>。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/08cdfab777baec69709e3a4f830ac864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mokJ7_9XTII7PavPVeEvQg.png"/></div></div></figure><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/edd901953310a633295a42bab856fa4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l4LZ2ATmrFlYAhCr74i2lw.png"/></div></div></figure><p id="dbc8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">系统将询问您有关密钥对的信息。选择<strong class="kd iu">新建一对</strong>并命名您的密钥对。请确保下载。pem密钥对文件，选择<strong class="kd iu">启动。</strong>您已经成功启动了您的AWS EC2实例！</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/9b3cb735ffd5109c95b347dc526a9732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AN9GdhzElIqH1RevjY5rag.png"/></div></div></figure><h1 id="a9c5" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">连接到您的EC2实例</h1><p id="628e" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">选择<strong class="kd iu">查看实例</strong>。选择您新启动的实例并选择<strong class="kd iu">连接。</strong>按照屏幕上出现的说明，从您的终端使用<strong class="kd iu">嘘</strong>连接到您的EC2实例。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/a1c93437944467e328e008b67dca1e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qra2ZS3ergMeUP7cuUTtfw.png"/></div></div></figure><p id="6127" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用您的终端将<strong class="kd iu">光盘</strong>导入到包含<strong class="kd iu">的目录中。pem </strong>密钥对文件。</p><p id="a87a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您需要修改您的<strong class="kd iu">权限。pem </strong>文件。在您的终端中键入以下命令，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="8ddc" class="lx la it mt b gy mx my l mz na">chmod 400 ./YOUR_KEY_PAIR_NAME.pem</span></pre><p id="bcbd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后您可以使用以下命令将<strong class="kd iu"> SSH </strong>引入EC2实例的Ubuntu服务器，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="96c6" class="lx la it mt b gy mx my l mz na">ssh -i “YOUR_KEY_PAIR_NAME.pem” ubuntu@YOUR_PUBLIC_DNS_IPv4</span></pre><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/a6c1475b11fe856d95c4ba405ab2e791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AuurgX-ZmD1wcZLLRenS8w.png"/></div></div></figure><p id="0554" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您现在已经成功地将<strong class="kd iu">SSH</strong>安装到您的Ubuntu服务器中了！</p><h1 id="2fc9" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">设置您的服务器</h1><p id="29bf" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中键入以下内容来更新你的服务器，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="974f" class="lx la it mt b gy mx my l mz na">sudo apt-get update</span><span id="242a" class="lx la it mt b gy nb my l mz na">sudo apt-get install -y build-essential openssl libssl-dev pkg-config</span></pre><h2 id="dd44" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">设置节点JS、Nginx和Git</h2><p id="14de" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在您的Ubuntu Server终端中键入以下命令来设置NodeJS、Nginx和Git，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="bc53" class="lx la it mt b gy mx my l mz na">sudo apt-get install -y nodejs</span><span id="0f5d" class="lx la it mt b gy nb my l mz na">sudo apt-get install npm -y</span><span id="a8a0" class="lx la it mt b gy nb my l mz na">sudo npm cache clean -f</span><span id="3bbf" class="lx la it mt b gy nb my l mz na">sudo npm install -g n</span><span id="96a3" class="lx la it mt b gy nb my l mz na">sudo n stable</span><span id="54c0" class="lx la it mt b gy nb my l mz na">sudo apt-get install nginx -y</span></pre><h2 id="18a5" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">设置Git</h2><p id="5522" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中键入以下命令来设置Git，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="2c04" class="lx la it mt b gy mx my l mz na">sudo apt-get install git -y</span></pre><h2 id="9865" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">从GitHub克隆您的项目</h2><p id="1d4a" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">本教程假设您已经有了一个本地git repo和一个GitHub远程存储库。如果您不确定如何将您的项目推向GitHub，请查看本<a class="ae nd" href="https://help.github.com/en/articles/adding-an-existing-project-to-github-using-the-command-line" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><p id="5d6b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在您的Ubuntu Server终端中键入以下命令，从GitHub克隆您的项目，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="4671" class="lx la it mt b gy mx my l mz na">cd /var/www</span><span id="6bf3" class="lx la it mt b gy nb my l mz na">sudo git clone {{your project file path on github/git}}</span></pre><p id="82eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">用Nginx </strong>链接您的项目</p><p id="b067" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在你的Ubuntu服务器的终端中键入以下命令，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="33a1" class="lx la it mt b gy mx my l mz na">cd /etc/nginx/sites-available</span><span id="52fc" class="lx la it mt b gy nb my l mz na">sudo vim {{your cloned repository’s name}}</span></pre><p id="91bf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该文件尚不存在的节点。<strong class="kd iu"> Vim </strong>会打开一个空文件，一旦您写入并保存它，它就会在那里。相信我。</p><p id="8d24" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您以前从未使用过<strong class="kd iu"> Vim </strong>，请查看关于基本Vim命令的<a class="ae nd" href="https://linuxhandbook.com/basic-vim-commands/" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><p id="9927" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将下面的代码添加到文件<strong class="kd iu">(偏离路线编辑占位符文本)</strong>中，并通过按下<strong class="kd iu"> esc </strong>键然后键入<strong class="kd iu">来保存文件:wq </strong>然后按下<strong class="kd iu"> return </strong>键来保存并关闭vim编辑器。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="c16c" class="lx la it mt b gy mx my l mz na">server {<br/> listen 80;<br/> location / {<br/> proxy_pass <a class="ae nd" rel="noopener ugc nofollow" target="_blank" href="/{{PRIVATE">http://{{PRIVATE</a>-IP-OF-YOUR-EC2-INSTANCE}}:{{YOUR-NODE-PROJECT-SERVER-PORT-IN-YOUR-CODE}};<br/> proxy_http_version 1.1;<br/> proxy_set_header Upgrade $http_upgrade;<br/> proxy_set_header Connection ‘upgrade’;<br/> proxy_set_header Host $host;<br/> proxy_cache_bypass $http_upgrade;<br/> }<br/>}</span></pre><p id="89d6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过在你的Ubuntu服务器终端中键入以下命令，将<strong class="kd iu">站点启用的</strong>与<strong class="kd iu">站点可用的</strong>链接起来，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="db0d" class="lx la it mt b gy mx my l mz na">sudo ln -s /etc/nginx/sites-available/{{your cloned repository’s name}} /etc/nginx/sites-enabled/{{your cloned repository’s name}}</span></pre><p id="34ad" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在输入下面的命令，从<strong class="kd iu">Nginx</strong><strong class="kd iu">sites-enabled</strong>和<strong class="kd iu"> sites-available </strong>目录中删除默认文件，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="8c93" class="lx la it mt b gy mx my l mz na">sudo rm default</span><span id="bcef" class="lx la it mt b gy nb my l mz na">sudo rm /etc/nginx/sites-enabled/default</span></pre><h2 id="4bb3" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">设置MongoDB(注意:只有当你没有使用像Mongo Atlas等外部MongoDB服务时才这样做。)</h2><p id="01ce" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中输入以下内容，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="deed" class="lx la it mt b gy mx my l mz na">sudo apt-key adv — keyserver hkp://keyserver.ubuntu.com:80 — recv 9DA31620334BD75D9DCB49F368818C72E52529D4<br/>echo “deb [ arch=amd64,arm64 ] <a class="ae nd" href="https://repo.mongodb.org/apt/ubuntu" rel="noopener ugc nofollow" target="_blank">https://repo.mongodb.org/apt/ubuntu</a> xenial/mongodb-org/4.0 multiverse” | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list</span><span id="216e" class="lx la it mt b gy nb my l mz na">sudo apt install udo</span><span id="5d2c" class="lx la it mt b gy nb my l mz na">sudo apt-get update</span><span id="a108" class="lx la it mt b gy nb my l mz na">sudo apt-get install -y mongodb-org --allow-unauthenticated</span></pre><p id="0e44" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过在Ubuntu服务器的终端键入以下命令，创建一个存储数据库文件的目录，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3729" class="lx la it mt b gy mx my l mz na">sudo mkdir /data</span><span id="6adc" class="lx la it mt b gy nb my l mz na">sudo mkdir /data/db</span></pre><p id="23d6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，通过在Ubuntu服务器的终端中键入以下命令来启动MongoDB，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="e086" class="lx la it mt b gy mx my l mz na">sudo service mongod start</span></pre><p id="6e7d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要在服务器启动时配置MongoDB的自动启动，请在Ubuntu服务器的终端中键入以下内容，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="0ca7" class="lx la it mt b gy mx my l mz na">sudo systemctl enable mongod &amp;&amp; sudo systemctl start mongod</span></pre><h2 id="8832" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">安装pm2</h2><p id="2f53" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中输入以下命令来全局安装pm2，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="e0d2" class="lx la it mt b gy mx my l mz na">sudo npm install pm2 -g</span></pre><h2 id="d45e" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">安装克隆项目的节点npm依赖项</h2><p id="193a" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中输入以下内容，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="382f" class="lx la it mt b gy mx my l mz na">cd /var/www/</span><span id="4c99" class="lx la it mt b gy nb my l mz na">sudo chown -R ubuntu {{your cloned repository’s name}}</span><span id="3c4c" class="lx la it mt b gy nb my l mz na">cd {{your cloned repository’s name}}</span><span id="aead" class="lx la it mt b gy nb my l mz na">sudo npm install</span></pre><h2 id="c77d" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">安装克隆项目的React(客户端服务器)npm依赖项，并执行生产构建</h2><p id="1791" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中输入以下内容，</p><p id="c3b1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">(注意<strong class="kd iu">客户端</strong>在这里是React项目目录的名称。如果你的React项目文件夹不是以<strong class="kd iu"> client </strong>命名的，确保你将<strong class="kd iu"> cd </strong>到那个目录，而不是<strong class="kd iu"> client </strong>目录)</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="43bb" class="lx la it mt b gy mx my l mz na">cd client</span><span id="40b3" class="lx la it mt b gy nb my l mz na">sudo npm install</span><span id="113f" class="lx la it mt b gy nb my l mz na">sudo npm run build</span></pre><h2 id="170d" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">启动pm2</h2><p id="c345" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端中输入以下内容，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="ed38" class="lx la it mt b gy mx my l mz na">cd /var/www/{{your cloned repository’s name}}</span><span id="7c01" class="lx la it mt b gy nb my l mz na">pm2 start server.js</span></pre><h2 id="eb06" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">重启Nginx</h2><p id="7d9a" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">在你的Ubuntu服务器的终端输入以下命令来重启Nginx，</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="17c6" class="lx la it mt b gy mx my l mz na">sudo service nginx stop &amp;&amp; sudo service nginx start</span></pre><h2 id="14e8" class="lx la it bd lb ly lz dn lf ma mb dp lj km mc md ln kq me mf lr ku mg mh lv mi bi translated">结论</h2><p id="3980" class="pw-post-body-paragraph kb kc it kd b ke mj kg kh ki mk kk kl km ml ko kp kq mm ks kt ku mn kw kx ky im bi translated">您的MERN堆栈项目现已成功部署在AWS EC2上！现在，如果您在浏览器上键入IPv4公共IP，就可以实时查看您的项目。</p><p id="fb8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您有任何问题，请随时发表评论。此外，如果这帮助了你，请喜欢并与他人分享。我定期发表与web开发相关的文章。考虑<a class="ae nd" href="http://abdullahsumsum.com/subscribe" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">在此处输入您的电子邮件</strong> </a>以了解与web开发相关的最新文章和教程。你也可以找到更多关于我在abdullahsumsum.com做的事情</p></div></div>    
</body>
</html>