<html>
<head>
<title>Your Flutter app doesn’t have to use Material components — introduce the styled components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的Flutter应用程序不一定要使用材质组件——引入风格化组件</h1>
<blockquote>原文：<a href="https://itnext.io/your-flutter-app-doesnt-have-to-use-material-components-introduce-the-styled-components-61994765c4bc?source=collection_archive---------2-----------------------#2021-04-01">https://itnext.io/your-flutter-app-doesnt-have-to-use-material-components-introduce-the-styled-components-61994765c4bc?source=collection_archive---------2-----------------------#2021-04-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="1093" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我喜欢Flutter让你创建漂亮的、可定制的用户界面。有许多内置的小部件供您使用，如果您想要更多的定制，您可以使用CustomPainter并按照您喜欢的方式绘制屏幕。但是当涉及到<strong class="jw ir"> UI组件</strong>如按钮、开关、复选框、滑块等时，我们通常只使用内置的小部件。它们易于使用，并为您提供一些定制能力，但它们必须遵循<strong class="jw ir">材料</strong>或<strong class="jw ir">库比蒂诺</strong>设计准则。如果这是你的目标，它们非常好用。但是，如果你想拥有自己的设计风格或超越这些小部件提供的调整，你可能会想寻找一些第三方软件包。pub.dev上有很多这样的包。然而，可定制性通常仍然有限。如果某个包给了你许多参数来调整，你需要记住它们并学习如何正确使用它们。</p><h1 id="86dd" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">一颗纽扣的关键成分是什么？</h1><p id="4021" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">按钮只是一个矩形区域，可以被按下、悬停或禁用。如果查看内置组件小部件的代码，就会发现它们是根据其内部MaterialState属性显示的。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="62c3" class="me kt iq ma b gy mf mg l mh mi">final Set&lt;MaterialState&gt; _states = &lt;MaterialState&gt;{};<br/><br/>bool get _hovered =&gt; _states.contains(MaterialState.hovered);<br/>bool get _focused =&gt; _states.contains(MaterialState.focused);<br/>bool get _pressed =&gt; _states.contains(MaterialState.pressed);<br/>bool get _disabled =&gt; _states.contains(MaterialState.disabled);</span></pre><p id="5402" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果我们为这些不同的状态提供完整的样式会怎么样？</p><h1 id="3a8f" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">从样式容器到样式按钮</h1><p id="ff28" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">在我之前的文章:<a class="ae mj" rel="noopener ugc nofollow" target="_blank" href="/create-a-squishy-responsive-cyberpunk-button-in-flutter-590488b44a78">https://it next . io/create-a-squishy-responsive-cyber punk-button-in-flutter-590488 b44a 78</a>和<a class="ae mj" rel="noopener ugc nofollow" target="_blank" href="/make-implicit-and-explicit-animations-with-the-responsive-styled-widget-package-7303bffe5c53">https://it next . io/make-implicit-and-explicit-animations-with-the-responsive-styled-widget-package-7303 BF Fe 5c 53</a>中，我介绍了<strong class="jw ir"> Style </strong>和<strong class="jw ir"> StyledContainer </strong>类。样式由以下UI数据类组成:</p><ul class=""><li id="13a6" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">调整大小和对齐</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="511a" class="me kt iq ma b gy mf mg l mh mi">Dimension width<br/>Dimension height<br/>Alignment alignment<br/>Alignment childAlignment<br/>EdgeInsets margin<br/>EdgeInsets padding</span></pre><ul class=""><li id="6aeb" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">形状和装饰</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="27ec" class="me kt iq ma b gy mf mg l mh mi">BoxDecorartion backgroundDecoration<br/>BoxDecorartion foregroundDecoration<br/>List&lt;ShapeShadow&gt; shadows<br/>List&lt;ShapeShadow&gt; insetShadows<br/>MorphableShapeBorder shapeBorder</span></pre><ul class=""><li id="e0da" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">能见度</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="62e7" class="me kt iq ma b gy mf mg l mh mi">bool visible<br/>double opacity</span></pre><ul class=""><li id="6a04" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">转换</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="6130" class="me kt iq ma b gy mf mg l mh mi">SmoothMatrix4 transform<br/>Alignment transformAlignment</span></pre><ul class=""><li id="bb21" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">排印</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="aafd" class="me kt iq ma b gy mf mg l mh mi">DynamicTextStyle textStyle<br/>TextAlign textAlign</span></pre><ul class=""><li id="f135" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">鼠标光标样式</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="5009" class="me kt iq ma b gy mf mg l mh mi">SystemMouseCursor mouseCursor</span></pre><ul class=""><li id="59fb" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">着色器和过滤器</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="965d" class="me kt iq ma b gy mf mg l mh mi">Gradient shaderGradient<br/>ImageFilter imageFilter<br/>ImageFilter backdropFilter</span></pre><h2 id="8f8f" class="me kt iq bd ku mt mu dn ky mv mw dp lc kf mx my lg kj mz na lk kn nb nc lo nd bi translated">风格提供了什么额外的好处？</h2><p id="a91f" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">除了容器小部件接受的参数之外，Style类还支持一些自定义UI数据类，它们可以进行复杂的样式设置，如下所示:</p><p id="f59b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">尺寸</strong>类型来自<a class="ae mj" href="https://pub.dev/packages/dimension" rel="noopener ugc nofollow" target="_blank">尺寸</a>包装。它支持绝对和相对单位。还可以在尺寸上组合/嵌套最小/最大/夹紧功能。你可以把这看作是SizedBox和FractionallySizedBox的超级组合。以前，维度需要从LayoutBuilder获取父约束，这将使IntrinsicWidth和IntrinsicHeight不起作用，我现在创建了一个RenderObject来解决这个问题。</p><p id="1dd1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> ShapeShadow </strong>和<strong class="jw ir">morphableshabeborder</strong>来自<a class="ae mj" href="https://pub.dev/packages/morphable_shape" rel="noopener ugc nofollow" target="_blank"> morphable_shape </a>包。除了BoxShadow已经支持的内容之外，ShapeShadow还支持嵌入阴影和渐变填充。MorpableShapeBorder支持许多常用的形状、形状变形、部分绘制边框边等等。观看fluttershape.com<a class="ae mj" href="https://fluttershape.com/" rel="noopener ugc nofollow" target="_blank">的互动演示。</a></p><p id="7a1f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> DynamicTextStyle </strong>允许您使用绝对/相对值定义字体大小、字母间距等。300%字体大小是默认字体大小的3倍。</p><p id="5036" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> SmoothMatrix4 </strong>类似于Matrix4，但确保所有的变换都可以平滑地动画化。它还允许您使用尺寸作为平移距离，以适应不同的屏幕尺寸。</p><p id="9b3e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">定义样式后，可以使用StyledContainer小部件:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="4cb7" class="me kt iq ma b gy mf mg l mh mi">var widget=StyledContainer(<br/> style: style,<br/> child: …<br/> );</span></pre><p id="89fa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">或者使用AnimatedStyledContainer小部件制作隐式动画。</p><p id="b2fd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们看看StyledButton小部件的构造函数:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="25f0" class="me kt iq ma b gy mf mg l mh mi">StyledButton(<br/>      {Key? key,<br/>      this.onPressed,<br/>      required this.style,<br/>      this.hoveredStyle,<br/>      this.pressedStyle,<br/>      this.disabledStyle,<br/>      this.curve = Curves.linear,<br/>      this.duration = const Duration(milliseconds: 100),<br/>      Widget? child});<br/>StyledButton.builder(<br/>      {Key? key,<br/>      this.onPressed,<br/>      required this.style,<br/>      this.hoveredStyle,<br/>      this.pressedStyle,<br/>      this.disabledStyle,<br/>      this.curve = Curves.linear,<br/>      this.duration = const Duration(milliseconds: 100),<br/>      this.builder});</span></pre><p id="abbc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您需要为不同的按钮状态提供相应的样式。但是请注意，只有默认(空闲)样式是必需的。如果没有提供，其他三种样式将使用该样式。您还可以指定不同状态之间转换的持续时间和动画曲线。子参数是这个按钮的子部件。但是您也可以提供一个可以访问按钮状态的生成器:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1f59" class="me kt iq ma b gy mf mg l mh mi">builder: (context, state) {<br/>      Widget child;<br/>      switch (state) {<br/>         case StyledState.pressed:<br/>            child = Text("TAPPED", key: UniqueKey());<br/>            break;<br/>                <br/>         default:<br/>            child = Text("TAP ME", key: UniqueKey());<br/>            break;<br/>       }<br/>       return AnimatedSwitcher(<br/>         duration: Duration(milliseconds: 200),<br/>         child: child,<br/>       );<br/>}</span></pre><p id="d65f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当您按下按钮时，此生成器将在“点击”和“点击我”文本之间淡入淡出。</p><figure class="lv lw lx ly gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/632262b10999be7950fd3fb2156e4890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UKdL_WYg-1UYQJwuDD_oHA.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">六种样式的按钮设计</figcaption></figure><h1 id="20be" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">可切换组件</h1><p id="f8ae" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">复选框、单选按钮和其他可切换组件不同于按钮，因为它们根据是否被选中而显示不同。因此StyledCheckbox需要selectedStyle而不是pressedStyle参数。</p><figure class="lv lw lx ly gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/4f0f804724fd3583b0e61b1794ac2461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rP1zkUdGng1r5ggM9cGANA.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">样式复选框</figcaption></figure><p id="0f55" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第一个按钮的代码如下所示:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="2167" class="me kt iq ma b gy mf mg l mh mi">StyledCheckbox.builder(<br/>  value: _selected,<br/>  onChanged: (bool value) {<br/>    setState(() {<br/>      _selected = value;<br/>    });<br/>  },<br/>  duration: Duration(milliseconds: 200),<br/>  builder: (BuildContext context, StyledState state) {<br/>    Widget child;<br/>    switch (state) {<br/>      case StyledState.selected:<br/>        child = Row(<br/>          mainAxisSize: MainAxisSize.min,<br/>          mainAxisAlignment: MainAxisAlignment.center,<br/>          children: [<br/>            Icon(Icons.<em class="nq">check</em>),<br/>            Text(<br/>              "CHECKED",<br/>              key: UniqueKey(),<br/>            ),<br/>          ],<br/>        );<br/>        break;<br/>      case StyledState.hovered:<br/>        child = Text(<br/>          "HOVERED",<br/>          key: UniqueKey(),<br/>        );<br/>        break;<br/>      default:<br/>        child = Text(<br/>          "CHECK ME",<br/>          key: UniqueKey(),<br/>        );<br/>        break;<br/>    }<br/>    return AnimatedSwitcher(<br/>      duration: Duration(milliseconds: 200),<br/>      child: child,<br/>    );<br/>  },<br/>  style: neumorphicStyle,<br/>  selectedStyle: neumorphicSelectedStyle,<br/>  hoveredStyle: neumorphicHoveredStyle,<br/>);</span></pre><p id="1c77" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">以下是StyledRadio和StyledToggleButtons的设计:</p><figure class="lv lw lx ly gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/d10a1c0e1bf29bea1194ee9a2af7ab5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*subCCYzZmSgMB8WkQTpPPg.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">StyledRadio</figcaption></figure><figure class="lv lw lx ly gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/a6d1d8d13ea9c3643e77ac5c37170ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rG7mK349FQtEhaiS5wcEQA.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">样式标签按钮</figcaption></figure><h1 id="2189" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">开关和滑块呢？</h1><p id="8341" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">它们的设计更加棘手，因为现在涉及到两个或更多的组件。对于一个开关，您需要为轨道和thumb提供样式。下面是StyledSwitch的构造函数:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="264b" class="me kt iq ma b gy mf mg l mh mi">StyledSwitch(<br/>    {Key? key,<br/>    required this.value,<br/>    required this.onChanged,<br/>    required this.thumbStyle,<br/>    this.thumbHoveredStyle,<br/>    this.thumbSelectedStyle,<br/>    this.thumbDisabledStyle,<br/>    required this.trackStyle,<br/>    this.trackSelectedStyle,<br/>    this.trackHoveredStyle,<br/>    this.trackDisabledStyle,<br/>    this.direction = Axis.horizontal,<br/>    this.curve = Curves.<em class="nq">linear</em>,<br/>    this.duration = const Duration(milliseconds: 100),<br/>    Widget thumbChild,<br/>    });</span></pre><figure class="lv lw lx ly gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/2257b20e259fdc9d71c82a9f378ab0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lUjS9jAIZQu5TZqBewVabw.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">StyledSwitch，最后一个是垂直的</figcaption></figure><p id="22a9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">除了轨道和滑块之外，您可能还想为滑块设计活动轨道或工具提示。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="04ee" class="me kt iq ma b gy mf mg l mh mi">StyledSlider({<br/>  Key? key,<br/>  this.direction = Axis.horizontal,<br/>  required this.value,<br/>  required this.onChanged,<br/>  this.onChangeStart,<br/>  this.onChangeEnd,<br/>  this.min = 0.0,<br/>  this.max = 1.0,<br/>  this.divisions,<br/>  this.label,<br/>  required this.trackStyle,<br/>  required this.thumbStyle,<br/>  this.thumbPressedStyle,<br/>  this.thumbHoveredStyle,<br/>  this.thumbDisabledStyle,<br/>  this.activeTrackStyle,<br/>  this.toolTipStyle,<br/>  this.thumbChild,<br/>  this.curve = Curves.<em class="nq">linear</em>,<br/>  this.duration = const Duration(milliseconds: 100),<br/>})</span></pre><figure class="lv lw lx ly gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/52e238958c2cb0a11606cf97aca14266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aHjTVICHxHHgdgSI1Agvsg.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">StyledSlider</figcaption></figure><p id="a086" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请注意当您轻按或拖移拇指时，它是如何改变大小的。工具提示与thumb/track一样可定制，因为它也使用了StyledContainer。StyledSlider的接口还没有最终完成，因为我可能会添加更多的样式。</p><h1 id="ed32" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">结论</h1><p id="bc4f" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">样式化的组件为<a class="ae mj" href="https://pub.dev/packages/animated_styled_widget" rel="noopener ugc nofollow" target="_blank"> animated_styled_widget </a>包增加了更多的功能。该产品包的主要特点是:</p><ol class=""><li id="5cd6" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr nr mq mr ms bi translated">嵌入阴影、可变形的形状边框、响应尺寸等。事情扑不提供开箱即用。</li><li id="9bfa" class="mk ml iq jw b jx ns kb nt kf nu kj nv kn nw kr nr mq mr ms bi translated">在一个地方组合几个常用的小部件，像容器、文本样式、不透明度、图像过滤器等等，类似于CSS所做的。</li><li id="867f" class="mk ml iq jw b jx ns kb nt kf nu kj nv kn nw kr nr mq mr ms bi translated">隐式和显式动画。滚动动画。与其他小部件全局协调的动画。预定义的动画。</li><li id="cb72" class="mk ml iq jw b jx ns kb nt kf nu kj nv kn nw kr nr mq mr ms bi translated">样式组件:StyledButton、StyledToggleButtons、StyledSwitch、StyledRadio、StyledCheckbox、StyledSlider。</li><li id="3b1d" class="mk ml iq jw b jx ns kb nt kf nu kj nv kn nw kr nr mq mr ms bi translated">序列化支持。</li><li id="b4f5" class="mk ml iq jw b jx ns kb nt kf nu kj nv kn nw kr nr mq mr ms bi translated">零安全。兼容所有运行颤振的平台。</li></ol><p id="a581" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下一步，我可能会支持这个包的主题化。所以你可以定义一个全局按钮样式，按钮悬停样式等。</p><p id="d3e6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">今天到此为止。感谢您的阅读！</p></div></div>    
</body>
</html>