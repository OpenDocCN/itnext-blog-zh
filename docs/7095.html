<html>
<head>
<title>Building Jakarta EE 9 Web application with Servlet Containers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Servlet容器构建Jakarta EE 9 Web应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/building-jakarta-ee-9-web-application-with-servlet-containers-b3acc50c8464?source=collection_archive---------0-----------------------#2022-06-12">https://itnext.io/building-jakarta-ee-9-web-application-with-servlet-containers-b3acc50c8464?source=collection_archive---------0-----------------------#2022-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0c53962a9f236dbf5117a30d6345c682.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HVdOerzrVL2J9vXxELre0w.jpeg"/></div></div></figure><p id="4238" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Jakarta EE world中，许多Java开发人员构建了Java Web应用程序，但他们没有使用成熟的应用服务器(如Payara、WildFly和WebLogic)作为生产环境，而是更喜欢部署到轻量级Servlet容器中并在其上运行，如Apache Tomcat、Eclipse Jetty。</p><p id="fabf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在过去的几年里，我已经准备了<a class="ae kw" href="https://github.com/hantsy/jakartaee8-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">jakartaee 8-starter-boilerplate</a>和<a class="ae kw" href="https://github.com/hantsy/jakartaee9-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">jakartaee 9-starter-boilerplate</a>来帮助开发人员开始一个新的jakartaee项目并部署到流行的应用服务器中。新创建的<a class="ae kw" href="https://github.com/hantsy/jakartaee9-servlet-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">jakartaee 9-servlet-starter-boilerplate</a>项目提供了一个模板来创建Jakarta EE web应用程序并部署到流行的Servlet容器，尤其是。在这个项目中，我集成了以下流行的Jakarta EE组件。</p><ul class=""><li id="f7d3" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">CDI 3.0(焊接4.0)</li><li id="88cf" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">雅加达休息区3.0(泽西岛3.0)</li><li id="4b1e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Jakarta Server Faces 3.0(Mojarra 3.0)</li><li id="656e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">以及上述特性的可传递依赖，包括Jakarta EL、Jarkarta Json处理、Jakarta Json绑定、Jakarta验证(Hibernate Validator)等。</li></ul><p id="64cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在最流行的Servlet容器，如Apache Tomcat、Eclipse Jetty等。内置了雅加达Servlet、雅加达服务器页面、JSTL、雅加达EL和雅加达WebSocket支持。</p><h1 id="74a4" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">先决条件</h1><p id="43ab" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">确保您已经安装了以下软件。</p><ul class=""><li id="25ea" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">JDK 11或17</li><li id="1462" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Apache Maven 3.8</li><li id="e6df" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Apache Tomcat 10.x和Eclipse Jetty 11.x</li><li id="4dd5" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Intellij IDEA社区版或VSCode + Java包</li></ul><p id="8336" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们探索一下<a class="ae kw" href="https://github.com/hantsy/jakartaee9-servlet-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">jakartaee 9-servlet-starter-boilerplate</a>存储库中的集成特性。</p><h1 id="6420" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">配置</h1><p id="f262" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">为了准备下一个stpes中使用的项目，克隆<a class="ae kw" href="https://github.com/hantsy/jakartaee9-servlet-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">jakartaee 9-servlet-starter-boilerplate</a>存储库的源代码，或者通过<a class="ae kw" href="https://maven.apache.org/archetypes/maven-archetype-webapp/" rel="noopener ugc nofollow" target="_blank"> Maven Webapp原型</a>创建一个新的Maven webapp。</p><h1 id="23e7" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达Servlet 5.0</h1><p id="734f" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">Apache Tomcat和Eclipse Jetty在分发包中内置了Jakarta Servlet、Jakarta Pages、Jakarta WebSocket实现。</p><p id="6d01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是在开发阶段，您可以在项目代码中使用这些API。</p><p id="6fe9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe mo mp mq mr b">dependencyManagement</code>部分删除<code class="fe mo mp mq mr b">jakarta.jakartaee-bom</code>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="3f26" class="na lm iq mr b gy nb nc l nd ne">&lt;!-- <a class="ae kw" href="https://mvnrepository.com/artifact/jakarta.platform/jakarta.jakartaee-bom" rel="noopener ugc nofollow" target="_blank">https://mvnrepository.com/artifact/jakarta.platform/jakarta.jakartaee-bom</a> --&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.jakartaee-bom&lt;/artifactId&gt;<br/>    &lt;version&gt;9.1.0&lt;/version&gt;<br/>    &lt;type&gt;pom&lt;/type&gt;<br/>&lt;/dependency&gt;</span></pre><p id="d155" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并在项目<code class="fe mo mp mq mr b">dependencies</code>部分添加以下依赖项。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="88f9" class="na lm iq mr b gy nb nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;<br/>    &lt;version&gt;5.0.0&lt;/version&gt;<br/>    &lt;scope&gt;provided&lt;/scope&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;jakarta.el&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.el-api&lt;/artifactId&gt;<br/>    &lt;version&gt;4.0.0&lt;/version&gt;<br/>    &lt;scope&gt;provided&lt;/scope&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;jakarta.servlet.jsp.jstl&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.servlet.jsp.jstl-api&lt;/artifactId&gt;<br/>    &lt;version&gt;${jakarta.servlet.jsp.jstl.version}&lt;/version&gt;<br/>    &lt;scope&gt;provided&lt;/scope&gt;<br/>&lt;/dependency&gt;</span><span id="a497" class="na lm iq mr b gy nf nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.servlet.jsp.jstl&lt;/artifactId&gt;<br/>    &lt;version&gt;${jakarta.servlet.jsp.jstl.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span><span id="f50c" class="na lm iq mr b gy nf nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.el&lt;/artifactId&gt;<br/>    &lt;version&gt;${jakarta.el.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span><span id="7bda" class="na lm iq mr b gy nf nc l nd ne"> &lt;!-- Optional, only when &lt;f:websocket&gt; is used. --&gt;<br/>&lt;!-- dependency&gt;<br/>    &lt;groupId&gt;org.glassfish&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.json&lt;/artifactId&gt;<br/>    &lt;version&gt;${jakarta.json.version}&lt;/version&gt;<br/>&lt;/dependency --&gt;</span><span id="4dce" class="na lm iq mr b gy nf nc l nd ne">&lt;dependency&gt;<br/>    &lt;!-- Optional, only when &lt;f:validateBean&gt; or &lt;f:validateWholeBean&gt; is used. --&gt;<br/>    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;<br/>    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;<br/>    &lt;version&gt;${hibernate-validator.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="e9a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mo mp mq mr b">jakarta.json</code>和<code class="fe mo mp mq mr b">hibernate-validator</code>是可选的，需要时添加。</p><p id="f7e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建一个空的<em class="ng">src/main/WEB app/we b-INF/WEB . XML</em>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="9d82" class="na lm iq mr b gy nb nc l nd ne">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span id="edd9" class="na lm iq mr b gy nf nc l nd ne">&lt;web-app version="5.0"<br/>         <br/>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br/>         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"&gt;<br/>&lt;/web-app&gt;</span></pre><p id="d3cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，在Jakarta EE 9中，XML名称空间被更新为使用<code class="fe mo mp mq mr b">[https://jakarta.ee/xml/ns/jakartaee](https://jakarta.ee/xml/ns/jakartaee)</code>。</p><h1 id="b9e7" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">CDI 3.0</h1><p id="8bee" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">Weld 4.0与CDI 3.0规范兼容，并且可以与Apache Tomcat和Eclipse Jetty一起工作。</p><p id="91fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加以下依赖项。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="37f5" class="na lm iq mr b gy nb nc l nd ne">&lt;!-- Weld for CDI support --&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.jboss.weld.servlet&lt;/groupId&gt;<br/>    &lt;artifactId&gt;weld-servlet-core&lt;/artifactId&gt;<br/>    &lt;version&gt;${weld.version}&lt;/version&gt;<br/>    &lt;exclusions&gt;<br/>        &lt;exclusion&gt;<br/>            &lt;groupId&gt;jakarta.el&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.el-api&lt;/artifactId&gt;<br/>        &lt;/exclusion&gt;<br/>    &lt;/exclusions&gt;<br/>&lt;/dependency&gt;</span></pre><p id="5ccf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建一个空的<em class="ng">src/main/WEB app/we b-INF/beans . XML</em>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="cce3" class="na lm iq mr b gy nb nc l nd ne">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;beans <br/>       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br/>       xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/beans_3_0.xsd"<br/>       version="3.0"&gt;<br/>&lt;/beans&gt;</span></pre><p id="42a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过JNDI查找使<code class="fe mo mp mq mr b">BeanManager</code>可用。对于Apache Tomcat，在应用程序<em class="ng"> context.xml </em>中创建一个资源。</p><p id="b098" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建一个<code class="fe mo mp mq mr b">src/main/webapp/META-INF/context.xml</code>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="7a5a" class="na lm iq mr b gy nb nc l nd ne">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;Context path="/jakartaee9-servlet-starter-boilerplate"&gt;<br/>    &lt;Resource name="BeanManager"<br/>            auth="Container"<br/>            type="jakarta.enterprise.inject.spi.BeanManager"<br/>            factory="org.jboss.weld.resources.ManagerObjectFactory"/&gt;<br/>&lt;/Context&gt;</span></pre><p id="75c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该路径是运行时的应用程序上下文路径。这里它创建了一个资源<code class="fe mo mp mq mr b">BeanManager</code>。</p><p id="11a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于Eclipse Jetty，创建一个<em class="ng">src/main/WEB app/we b-INF/Jetty-env . XML</em>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="fa0a" class="na lm iq mr b gy nb nc l nd ne">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "https://www.eclipse.org/jetty/configure_10_0.dtd"&gt;<br/>&lt;Configure id="wac" class="org.eclipse.jetty.webapp.WebAppContext"&gt;<br/>    &lt;New id="BeanManager" class="org.eclipse.jetty.plus.jndi.Resource"&gt;<br/>        &lt;Arg&gt;<br/>            &lt;Ref refid="wac"/&gt;<br/>        &lt;/Arg&gt;<br/>        &lt;Arg&gt;BeanManager&lt;/Arg&gt;<br/>        &lt;Arg&gt;<br/>            &lt;New class="javax.naming.Reference"&gt;<br/>                &lt;Arg&gt;jakarta.enterprise.inject.spi.BeanManager&lt;/Arg&gt;<br/>                &lt;Arg&gt;org.jboss.weld.resources.ManagerObjectFactory&lt;/Arg&gt;<br/>                &lt;Arg/&gt;<br/>            &lt;/New&gt;<br/>        &lt;/Arg&gt;<br/>    &lt;/New&gt;<br/>&lt;/Configure&gt;</span></pre><p id="c4c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<em class="ng"> web.xml </em>中添加资源引用。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="149b" class="na lm iq mr b gy nb nc l nd ne">&lt;resource-env-ref&gt;<br/>    &lt;resource-env-ref-name&gt;BeanManager&lt;/resource-env-ref-name&gt;<br/>    &lt;resource-env-ref-type&gt;<br/>        jakarta.enterprise.inject.spi.BeanManager<br/>    &lt;/resource-env-ref-type&gt;<br/>&lt;/resource-env-ref&gt;</span></pre><h1 id="18bc" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达休息站(Jaxrs) 3.0</h1><p id="f131" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">Jersey是Glassfish中默认的JAX-RS实现，现在它是Eclipse EE4J项目下的一个独立项目。此外，其他流行的JAX-RS实现包括Apache CXF，JBoss RestEasy等。</p><p id="754e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe mo mp mq mr b">dependencyManagement</code>部分增加<code class="fe mo mp mq mr b">jersey-bom</code>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="acf2" class="na lm iq mr b gy nb nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;<br/>    &lt;version&gt;${jersey.version}&lt;/version&gt;<br/>    &lt;type&gt;pom&lt;/type&gt;<br/>    &lt;scope&gt;import&lt;/scope&gt;<br/>&lt;/dependency&gt;</span></pre><p id="9122" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加下列依赖项。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="4be6" class="na lm iq mr b gy nb nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;<br/>&lt;/dependency&gt;</span><span id="9388" class="na lm iq mr b gy nf nc l nd ne">&lt;!-- see: <a class="ae kw" href="https://github.com/eclipse-ee4j/jersey/blob/3.x/examples/cdi-webapp/pom.xml#L142" rel="noopener ugc nofollow" target="_blank">https://github.com/eclipse-ee4j/jersey/blob/3.x/examples/cdi-webapp/pom.xml#L142</a> --&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey.ext.cdi&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-cdi1x&lt;/artifactId&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey.ext.cdi&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-cdi1x-servlet&lt;/artifactId&gt;<br/>&lt;/dependency&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey.ext.cdi&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-cdi1x-ban-custom-hk2-binding&lt;/artifactId&gt;<br/>&lt;/dependency&gt;</span><span id="76b7" class="na lm iq mr b gy nf nc l nd ne">&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt;<br/>&lt;/dependency&gt;</span></pre><p id="cdaa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Jersey 3.0仍然依赖HK2这个小型IOC容器，<code class="fe mo mp mq mr b">jersey-media-json-binding</code>通过Jakarta JSON绑定提供JSON searial化和de aria化。</p><p id="8fcc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当Servlet容器启动时，将初始化Jersey支持。</p><p id="fcd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">类似于一般的Jakarta EE应用程序，添加一个简单的<code class="fe mo mp mq mr b">Application</code>类来激活Jakarta REST。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="3146" class="na lm iq mr b gy nb nc l nd ne">@ApplicationPath("/api")<br/>public class RestActivator extends Application {<br/>    @Override<br/>    public Set&lt;Class&lt;?&gt;&gt; getClasses() {<br/>        return Set.of(GreetingResource.class);<br/>    }<br/>}</span></pre><h1 id="019c" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达服务器面向4.0</h1><p id="601e" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">Mojarra是最流行的JSF实现，另一个流行的是Apache MyFaces。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="2bac" class="na lm iq mr b gy nb nc l nd ne">&lt;!-- Jakarta Faces --&gt;<br/>&lt;dependency&gt;<br/>    &lt;groupId&gt;org.glassfish&lt;/groupId&gt;<br/>    &lt;artifactId&gt;jakarta.faces&lt;/artifactId&gt;<br/>    &lt;version&gt;${jakarta.faces.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="0791" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加一个空的<em class="ng">/src/main/WEB app/we b-INF/faces-config . XML</em>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="a626" class="na lm iq mr b gy nb nc l nd ne">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;faces-config<br/>        <br/>        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br/>        xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-facesconfig_3_0.xsd"<br/>        version="3.0"&gt;<br/>    &lt;!-- Put any faces config here. --&gt;<br/>&lt;/faces-config&gt;</span></pre><p id="19a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自JSF 2.3，它增加了一些CDI兼容的功能，如新的范围等。要启用新特性，创建一个简单的配置类来激活它。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="2434" class="na lm iq mr b gy nb nc l nd ne">@FacesConfig(version = Version.JSF_2_3)<br/>@ApplicationScoped<br/>public class FacesCdiActivator {<br/>}</span></pre><h1 id="5e2f" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">例子</h1><p id="bae8" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">接下来，我们来看看这些规范的一些例子。</p><h1 id="bb2e" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达CDI示例</h1><p id="b8de" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">下面的例子是一个简单的CDI bean来构建一个问候消息。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="9ad1" class="na lm iq mr b gy nb nc l nd ne">@ApplicationScoped<br/>public class GreetingService {<br/>    private static final Logger LOGGER = Logger.getLogger(GreetingService.class.getName());<br/>    <br/>    public GreetingMessage buildGreetingMessage(String name) {<br/>        var message = GreetingMessage.of("Say Hello to " + name + " at " + LocalDateTime.now());<br/>        LOGGER.log(Level.INFO, "build message: {0}", message);<br/>        return message;<br/>    }<br/>}</span></pre><p id="7595" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mo mp mq mr b">GreetingMessage</code>是一个POJO类。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="10bd" class="na lm iq mr b gy nb nc l nd ne">@SuppressWarnings("serial")<br/>public class GreetingMessage implements Serializable {</span><span id="4245" class="na lm iq mr b gy nf nc l nd ne">    private String message;</span><span id="cf93" class="na lm iq mr b gy nf nc l nd ne">    public static GreetingMessage of(String s) {<br/>        final var message = new GreetingMessage();<br/>        message.setMessage(s);<br/>        return message;<br/>    }</span><span id="1a92" class="na lm iq mr b gy nf nc l nd ne">    public String getMessage() {<br/>        return message;<br/>    }</span><span id="ea42" class="na lm iq mr b gy nf nc l nd ne">    public void setMessage(String message) {<br/>        this.message = message;<br/>    }<br/>    <br/>    @Override<br/>    public String toString() {<br/>        return "GreetingMessage{" +<br/>                "message='" + message + '\'' +<br/>                '}';<br/>    }<br/>}</span></pre><h1 id="a593" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达Servlet示例</h1><p id="9867" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在这个Servlet类中，我们注入了现有的<code class="fe mo mp mq mr b">GreetingService</code>来处理消息。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="7080" class="na lm iq mr b gy nb nc l nd ne">@WebServlet(urlPatterns = "/GreetingServlet")<br/>public class GreetingServlet extends HttpServlet {<br/>    private static final String PAGE_HEADER = "&lt;html&gt;&lt;head&gt;&lt;title&gt;Jakarta Servlet Example&lt;/title&gt;&lt;/head&gt;&lt;body&gt;";<br/>    private static final String PAGE_FOOTER = "&lt;/body&gt;&lt;/html&gt;";<br/>    <br/>    @Inject<br/>    private GreetingService greetingService;<br/>    <br/>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {<br/>        var name = req.getParameter("name");<br/>        resp.setContentType("text/html");<br/>        var writer = resp.getWriter();<br/>        writer.println(PAGE_HEADER);<br/>        <br/>        // write message to http response<br/>        writer.println("&lt;h1&gt; Hello Servlet &lt;/h1&gt;");<br/>        writer.println("&lt;p&gt;" + greetingService.buildGreetingMessage(name) + "&lt;/p&gt;");<br/>        <br/>        writer.println(PAGE_FOOTER);<br/>        writer.close();<br/>    }<br/>    <br/>}</span></pre><h1 id="432c" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">Jakarta Servlet和页面示例</h1><p id="d044" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">重构上面的示例，将页面视图部分拆分成一个独立的页面文件。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="75ad" class="na lm iq mr b gy nb nc l nd ne">@WebServlet(urlPatterns = "/GreetingPagesServlet")<br/>public class GreetingPagesServlet extends HttpServlet {</span><span id="9411" class="na lm iq mr b gy nf nc l nd ne">    @Inject<br/>    private GreetingService greetingService;</span><span id="fe9f" class="na lm iq mr b gy nf nc l nd ne">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException {<br/>        var name = req.getParameter("name");<br/>        var message = greetingService.buildGreetingMessage(name);<br/>        req.setAttribute("hello", message);<br/>        req.getRequestDispatcher("/hello-pages.jspx").forward(req, resp);<br/>    }</span><span id="107e" class="na lm iq mr b gy nf nc l nd ne">}</span></pre><p id="4200" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将消息对象放入请求属性中，在页面视图中，可以从requestScope指令中读取它。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="1d50" class="na lm iq mr b gy nb nc l nd ne">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;<br/>&lt;jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"<br/>          <br/>          version="2.0"&gt;<br/>    &lt;jsp:directive.page contentType="text/html; charset=UTF-8"<br/>                        pageEncoding="UTF-8"<br/>                        session="false"/&gt;<br/>    &lt;jsp:output omit-xml-declaration="true"/&gt;<br/>    &lt;!-- make it HTML 5 declaration compatiable --&gt;<br/>    &lt;![CDATA[&lt;!DOCTYPE html&gt;]]&gt;<br/>    &lt;html&gt;<br/>    &lt;head&gt;&lt;title&gt;Jakarta Server Pages Example&lt;/title&gt;&lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;h1&gt;Hello Pages&lt;/h1&gt;<br/>        &lt;p&gt;${requestScope.hello.message}&lt;/p&gt;<br/>    &lt;/body&gt;<br/>    &lt;/html&gt;<br/>&lt;/jsp:root&gt;</span></pre><h1 id="f33c" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达面临榜样</h1><p id="868c" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">创建一个Jakarta Faces后端bean，它是一个CDI bean。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="bf8a" class="na lm iq mr b gy nb nc l nd ne">@Named<br/>@RequestScoped<br/>public class Hello {<br/>    <br/>    private String name;<br/>    private GreetingMessage message;<br/>    <br/>    @Inject<br/>    private GreetingService greetingService;<br/>    <br/>    public Hello() {<br/>    }<br/>    <br/>    public Hello(GreetingService greetingService) {<br/>        this.greetingService = greetingService;<br/>    }<br/>    <br/>    public void createMessage() {<br/>        message = greetingService.buildGreetingMessage(name);<br/>    }<br/>    <br/>    public String getName() {<br/>        return name;<br/>    }<br/>    <br/>    public void setName(String name) {<br/>        this.name = name;<br/>    }<br/>    <br/>    public GreetingMessage getMessage() {<br/>        return message;<br/>    }<br/>    <br/>}</span></pre><p id="527d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们来看看<em class="ng"> hello.xhtml </em>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="96c4" class="na lm iq mr b gy nb nc l nd ne">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"<br/>      <br/>      xmlns:f="http://xmlns.jcp.org/jsf/core"<br/>      xmlns:jsf="http://xmlns.jcp.org/jsf"<br/>      xmlns:h="http://xmlns.jcp.org/jsf/html"&gt;<br/>&lt;f:view&gt;<br/>    &lt;h:head&gt;<br/>        &lt;title&gt;Hello, World!&lt;/title&gt;<br/>    &lt;/h:head&gt;<br/>    &lt;h:body&gt;<br/>        &lt;h:form prependId="false"&gt;<br/>            &lt;label jsf:for="name" jsf:required="true"&gt;Enter your name:&lt;/label&gt;<br/>            &lt;input type="text"<br/>                   jsf:id="name"<br/>                   jsf:value="#{hello.name}"<br/>                   jsf:required="true"<br/>                   jsf:requiredMessage="Name is required."<br/>                   placeholder="Type your name here..."<br/>            /&gt;<br/>            &lt;h:message for="name"/&gt;<br/>            &lt;br/&gt;<br/>            &lt;input type="submit" jsf:id="submit" value="Say Hello"  jsf:action="#{hello.createMessage()}"&gt;<br/>                &lt;f:ajax execute="@form" render="@form"/&gt;<br/>            &lt;/input&gt;<br/>            &lt;br/&gt;<br/>            &lt;p id="message"&gt;#{hello.message}&lt;/p&gt;<br/>        &lt;/h:form&gt;<br/>    &lt;/h:body&gt;<br/>&lt;/f:view&gt;<br/>&lt;/html&gt;</span></pre><h1 id="f6a4" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">雅加达REST示例</h1><p id="af61" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在这个例子中，我们重用了<code class="fe mo mp mq mr b">GreetingService</code> bean来处理问候消息。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="3e3c" class="na lm iq mr b gy nb nc l nd ne">@Path("greeting")<br/>@RequestScoped<br/>public class GreetingResource {</span><span id="962a" class="na lm iq mr b gy nf nc l nd ne">    @Inject<br/>    private GreetingService greetingService;</span><span id="214a" class="na lm iq mr b gy nf nc l nd ne">    @GET<br/>    @Path("{name}")<br/>    @Produces(MediaType.APPLICATION_JSON)<br/>    public Response greeting(@PathParam("name") String name) {<br/>        return ok(this.greetingService.buildGreetingMessage(name)).build();<br/>    }<br/>}</span></pre><h1 id="c00c" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">部署并运行应用程序</h1><p id="b6fd" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">要将应用程序部署到生产环境中，首先我们可以将构建的文件打包到一个<code class="fe mo mp mq mr b">war</code>归档文件中，并将其放入servlet容器下的一个可部署文件夹中。然后启动servlet容器，war文件将被检测并部署到servlet容器中。</p><p id="b91a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了简化开发阶段的部署，我们使用maven插件来完成这项工作。</p><h1 id="aeec" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">部署到Apache Tomcat</h1><p id="a667" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">为了将应用程序部署到Apache Tomcat中，我们使用了<code class="fe mo mp mq mr b">cargo-maven3-plugin</code>。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="1e14" class="na lm iq mr b gy nb nc l nd ne">&lt;build&gt;<br/>    &lt;plugins&gt;<br/>        ...<br/>        &lt;plugin&gt;<br/>            &lt;groupId&gt;org.codehaus.cargo&lt;/groupId&gt;<br/>            &lt;artifactId&gt;cargo-maven3-plugin&lt;/artifactId&gt;<br/>            &lt;configuration&gt;<br/>                &lt;container&gt;<br/>                    &lt;containerId&gt;tomcat10x&lt;/containerId&gt;<br/>                    &lt;artifactInstaller&gt;<br/>                        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;<br/>                        &lt;artifactId&gt;tomcat&lt;/artifactId&gt;<br/>                        &lt;version&gt;${tomcat.version}&lt;/version&gt;<br/>                    &lt;/artifactInstaller&gt;<br/>                &lt;/container&gt;</span><span id="c2bb" class="na lm iq mr b gy nf nc l nd ne">                &lt;configuration&gt;<br/>                    &lt;properties&gt;<br/>                        &lt;!-- &lt;cargo.servlet.port&gt;8080&lt;/cargo.servlet.port&gt;--&gt;<br/>                        &lt;cargo.logging&gt;low&lt;/cargo.logging&gt;<br/>                    &lt;/properties&gt;<br/>                &lt;/configuration&gt;<br/>            &lt;/configuration&gt;<br/>        &lt;/plugin&gt;<br/>    &lt;/plugins&gt;<br/>&lt;/build&gt;</span></pre><p id="4cad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mo mp mq mr b">cargo-maven3-plugin</code>控制Tomcat生命周期的开始和停止。</p><p id="58f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行以下命令在Tomcat上运行应用程序。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="39c4" class="na lm iq mr b gy nb nc l nd ne">mvn clean package cargo:run</span></pre><p id="72aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">启动后，打开您的浏览器，检查我们上面创建的示例。</p><p id="9576" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">转到<a class="ae kw" href="http://localhost:8080/jakartaee9-servlet-starter-boilerplate/GreetingServlet?name=Hantsy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee 9-servlet-starter-boilerplate/greeting servlet？name=Hantsy </a>查看Servlet示例。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/a928273cf2a70b281b07e2425e1d6151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fm3DjmDLkCHgu4GI.png"/></div></div></figure><p id="ab03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开<a class="ae kw" href="http://localhost:8080/jakartaee9-servlet-starter-boilerplate/GreetingPagesServlet?name=Hantsy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee 9-servlet-starter-boilerplate/greeting pagessservlet？查看Jakarta服务器页面的结果。</a></p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/12553fcf51a7333ff2a2790f1f176b59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B3rCzV3FDWT9Md1Z.png"/></div></div></figure><p id="bd37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">导航到<a class="ae kw" href="http://localhost:8080/jakartaee9-servlet-starter-boilerplate/hello.xhtml" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee 9-servlet-starter-boilerplate/hello . XHTML</a>并输入姓名，点击问候语按钮，会看到如下结果。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/7f959de445cef13c88cc0f11d25c8545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7dItPMcjb1WayHOG.png"/></div></div></figure><p id="08fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的浏览器中访问<a class="ae kw" href="http://localhost:8080/jakartaee9-servlet-starter-boilerplate/api/greeting/Hantsy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee 9-servlet-starter-boilerplate/API/greeting/Hantsy</a>或者使用<code class="fe mo mp mq mr b">curl</code>命令，你会看到下面的结果。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/9bb7e0f4edf8d264bd141e3afeab7702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ptupU9sXJxnmKUQq.png"/></div></div></figure><p id="6895" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">类似地，我们也可以将cargo配置为使用Eclipse Jetty作为servlet容器。但是Eclipse Jetty提供了一个官方的maven插件，用于将应用程序部署到Jetty服务器中。</p><h1 id="206c" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">部署到Eclipse Jetty</h1><p id="d3bd" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在Jetty 11.x中，Jetty maven插件进行了重构，并在新的pluign中提供了3种部署模式。</p><ul class=""><li id="a08d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">把…嵌入</li><li id="71d5" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">叉状的</li><li id="a019" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">外部的</li></ul><p id="8ba7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">默认模式是<code class="fe mo mp mq mr b">EMBED</code>，类似于之前版本中运行最简单的<code class="fe mo mp mq mr b">jetty:run</code>目标。</p><p id="c00d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mo mp mq mr b">FORKED</code>模式使用分叉线程来运行应用程序。</p><p id="d0ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mo mp mq mr b">EXTERNAL</code>模式在外部独立的Jetty服务器上运行应用程序。</p><h2 id="81ba" class="na lm iq bd ln nl nm dn lr nn no dp lv kj np nq lz kn nr ns md kr nt nu mh nv bi translated">部署到嵌入式Jetty服务器</h2><p id="6178" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">配置jetty maven插件并使用嵌入模式。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="1cc2" class="na lm iq mr b gy nb nc l nd ne">&lt;profile&gt;<br/>    &lt;id&gt;jetty-embed&lt;/id&gt;<br/>    &lt;build&gt;<br/>        &lt;plugins&gt;<br/>            &lt;plugin&gt;<br/>                &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>                &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;<br/>                &lt;configuration&gt;<br/>                    &lt;deployMode&gt;EMBED&lt;/deployMode&gt;<br/>                    &lt;useProvidedScope&gt;true&lt;/useProvidedScope&gt;<br/>                    &lt;httpConnector&gt;<br/>                        &lt;port&gt;9090&lt;/port&gt;<br/>                    &lt;/httpConnector&gt;<br/>                &lt;/configuration&gt;<br/>            &lt;/plugin&gt;<br/>        &lt;/plugins&gt;<br/>    &lt;/build&gt;<br/>    &lt;dependencies&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.servlet.jsp.jstl&lt;/artifactId&gt;<br/>            &lt;version&gt;${jakarta.servlet.jsp.jstl.version}&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.glassfish&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.json&lt;/artifactId&gt;<br/>            &lt;version&gt;${jakarta.json.version}&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;jakarta.el&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.el-api&lt;/artifactId&gt;<br/>            &lt;version&gt;4.0.0&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;</span><span id="4ea2" class="na lm iq mr b gy nf nc l nd ne">        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jetty-plus&lt;/artifactId&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jetty-annotations&lt;/artifactId&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jetty-cdi&lt;/artifactId&gt;<br/>            &lt;version&gt;${jetty.version}&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;<br/>            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;<br/>            &lt;version&gt;1.7.36&lt;/version&gt;<br/>        &lt;/dependency&gt;<br/>    &lt;/dependencies&gt;<br/>&lt;/profile&gt;</span></pre><p id="01c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有<code class="fe mo mp mq mr b">useProvidedScope</code>选项。当它为真时，它将把Maven <em class="ng">提供的</em>范围的依赖项添加到容器类路径并运行应用程序，否则它将使用一个隔离的应用程序类路径来运行应用程序。</p><blockquote class="nw nx ny"><p id="21fa" class="jy jz ng ka b kb kc kd ke kf kg kh ki nz kk kl km oa ko kp kq ob ks kt ku kv ij bi translated">这里我们必须将它设置为true，如果它是false，我们的应用程序将无法运行。</p></blockquote><p id="5af5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行以下命令将应用程序部署到嵌入式Jetty中。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="d39c" class="na lm iq mr b gy nb nc l nd ne">mvn clean jetty:run -Pjetty-embed</span></pre><p id="1a54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于容器类路径中的一些重复的工件，您将看到许多重复类的警告。</p><h2 id="ee1a" class="na lm iq bd ln nl nm dn lr nn no dp lv kj np nq lz kn nr ns md kr nt nu mh nv bi translated">部署到外部Jetty服务器</h2><p id="662c" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">为此创建一个新的Maven概要文件。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="afb5" class="na lm iq mr b gy nb nc l nd ne">&lt;profile&gt;<br/>    &lt;id&gt;jetty-external&lt;/id&gt;<br/>    &lt;build&gt;<br/>        &lt;plugins&gt;<br/>            &lt;plugin&gt;<br/>                &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;<br/>                &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;<br/>                &lt;configuration&gt;<br/>                    &lt;deployMode&gt;EXTERNAL&lt;/deployMode&gt;<br/>                    &lt;webApp&gt;<br/>                        &lt;contextPath&gt;/${project.artifactId}&lt;/contextPath&gt;<br/>                    &lt;/webApp&gt;<br/>                    &lt;jettyHome&gt;${env.JETTY_HOME}&lt;/jettyHome&gt;<br/>                    &lt;modules&gt;jdni,jsp,servlet,glassfish-jstl,websocket-jakarta,cdi-decorate&lt;/modules&gt;<br/>                &lt;/configuration&gt;<br/>            &lt;/plugin&gt;<br/>        &lt;/plugins&gt;<br/>    &lt;/build&gt;<br/>    &lt;dependencies&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.servlet.jsp.jstl&lt;/artifactId&gt;<br/>            &lt;version&gt;${jakarta.servlet.jsp.jstl.version}&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;org.glassfish&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.json&lt;/artifactId&gt;<br/>            &lt;version&gt;${jakarta.json.version}&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>        &lt;dependency&gt;<br/>            &lt;groupId&gt;jakarta.el&lt;/groupId&gt;<br/>            &lt;artifactId&gt;jakarta.el-api&lt;/artifactId&gt;<br/>            &lt;version&gt;4.0.0&lt;/version&gt;<br/>            &lt;scope&gt;provided&lt;/scope&gt;<br/>        &lt;/dependency&gt;<br/>    &lt;/dependencies&gt;<br/>&lt;/profile&gt;</span></pre><p id="6479" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保您已经下载了Eclipse Jetty的副本，并创建一个系统环境变量<code class="fe mo mp mq mr b">JETTY_HOME</code>并将其设置到Eclipse Jetty根文件夹的位置。</p><p id="4e86" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行以下命令，将应用程序部署到独立的Jetty服务器中。</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="1dac" class="na lm iq mr b gy nb nc l nd ne">mvn clean jetty:run -Pjetty-external</span></pre><p id="c497" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查看来自我的Github的完整示例代码。</p></div></div>    
</body>
</html>