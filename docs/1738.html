<html>
<head>
<title>Differentiate between Gatsby environments like a pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样区分盖茨比环境</h1>
<blockquote>原文：<a href="https://itnext.io/differentiate-between-gatsby-environments-like-a-pro-31ae35176eb0?source=collection_archive---------2-----------------------#2019-01-15">https://itnext.io/differentiate-between-gatsby-environments-like-a-pro-31ae35176eb0?source=collection_archive---------2-----------------------#2019-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c5ef00721e58dac5975e8bd27cb6a6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RzefticEj_2RnS1wP44cZQ.png"/></div></div></figure><p id="c8b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你一直在试图找出为什么你的代码的改变是不可见的，你打开了成千上万的标签页，然后突然想到…你打开了生产URL。</p><p id="f062" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我曾经经历过，浪费大量的时间和生产力来解决这个问题是非常容易的，结果发现你甚至没有注意到你的本地开发环境。所以，我有一个很好的建议，可以帮助确保这种事情不会再发生。</p><p id="b62c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Gatsby允许你为一个favicon指定一个图像路径，也可以为一个站点清单指定背景颜色和主题颜色。它可以通过<code class="fe kw kx ky kz b">gatsby-plugin-manifest</code>插件获得。</p><p id="7f0e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以按常规方式将其添加到您的<code class="fe kw kx ky kz b">gatsby-config</code>中，它看起来可能类似于:</p><pre class="la lb lc ld gt le kz lf lg aw lh bi"><span id="dbae" class="li lj iq kz b gy lk ll l lm ln">module.exports = {<br/>  plugins: [<br/>    {<br/>      resolve: `gatsby-plugin-manifest`,<br/>      options: {<br/>        name: `GatsbyJS`,<br/>        short_name: `GatsbyJS`,<br/>        start_url: `/`,<br/>        background_color: `#f7f0eb`,<br/>        theme_color: `#a2466c`,<br/>        // Enables "Add to Homescreen" prompt and disables browser UI (including back button)<br/>        // see https://developers.google.com/web/fundamentals/web-app-manifest/#display<br/>        display: `standalone`,<br/>        icon: `src/images/icon.png`, // This path is relative to the root of the site.<br/>      },<br/>    },<br/>  ],<br/>}</span></pre><p id="b302" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是样板文件，如果你使用任何关于<a class="ae lo" href="https://www.gatsbyjs.org" rel="noopener ugc nofollow" target="_blank">www.gatsbyjs.org</a>的入门或教程，这将成为默认文件——对于停止那些讨厌的差异化问题不是很有用。</p><p id="3a43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将编写两个小函数，它们将接受<code class="fe kw kx ky kz b">NODE_ENV</code>的参数，并决定应该使用什么颜色和图像。然后我们将使用它们来代替上面的十六进制颜色值和图像路径。</p><pre class="la lb lc ld gt le kz lf lg aw lh bi"><span id="6ce2" class="li lj iq kz b gy lk ll l lm ln">const faviconSelector = (env) =&gt; {<br/>    return env === 'production' <br/>      ? 'src/images/icon.png' <br/>      : env === 'staging' <br/>        ? 'src/images/icon-staging.png' <br/>        : 'src/images/icon-development.png'<br/>}</span><span id="d267" class="li lj iq kz b gy lp ll l lm ln">const envColourSelector = (env) =&gt; {<br/>    return env === 'production' <br/>      ? '#7b41c1' // Purple<br/>      : env === 'staging' <br/>        ? '#405ac1' // Blue<br/>        : '#c13f5e' // Red</span><span id="1e31" class="li lj iq kz b gy lp ll l lm ln">}</span></pre><p id="166c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我倾向于确保我的颜色突出，不要太相似，这也值得让你的本地开发环境更激进(反转)或红色阴影，以真正提醒你，你正在处理你的应用程序/网站的开发状态。</p><p id="e153" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在将这些函数放在我们的配置中:</p><pre class="la lb lc ld gt le kz lf lg aw lh bi"><span id="a7d3" class="li lj iq kz b gy lk ll l lm ln"><strong class="kz ir">const { NODE_ENV } = process.env</strong></span><span id="1bcc" class="li lj iq kz b gy lp ll l lm ln">module.exports = {<br/>  plugins: [<br/>    {<br/>      resolve: `gatsby-plugin-manifest`,<br/>      options: {<br/>        name: `GatsbyJS`,<br/>        short_name: `GatsbyJS`,<br/>        start_url: `/`,<br/>        background_color: <strong class="kz ir">envColourSelector(NODE_ENV)</strong>,<br/>        theme_color: <strong class="kz ir">envColourSelector(NODE_ENV)</strong>,<br/>        // Enables "Add to Homescreen" prompt and disables browser UI (including back button)<br/>        // see https://developers.google.com/web/fundamentals/web-app-manifest/#display<br/>        display: `standalone`,<br/>        icon: <strong class="kz ir">faviconSelector(NODE_ENV)</strong>, // This path is relative to the root of the site.<br/>      },<br/>    },<br/>  ],<br/>}</span></pre><p id="e7d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以通过更改<code class="fe kw kx ky kz b">NODE_ENV</code>的值并刷新您的浏览器选项卡来测试您的新配置。</p><p id="6a78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">NODE_ENV=staging gatsby develop</code>或<code class="fe kw kx ky kz b">NODE_ENV=production gatsby build &amp;&amp; gatsby serve</code>或<code class="fe kw kx ky kz b">gatsby develop</code></p><p id="7590" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有什么发展小技巧吗？把它们写在评论里吧，我总是在寻找新的方法来提高我的工作效率。</p></div></div>    
</body>
</html>