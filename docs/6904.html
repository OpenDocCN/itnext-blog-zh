<html>
<head>
<title>Setting up Scalr with Azure DevOps — Add Azure credentials</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Azure DevOps设置Scalr添加Azure凭据</h1>
<blockquote>原文：<a href="https://itnext.io/setting-up-scalr-with-azure-devops-add-azure-credentials-979ddc17d90d?source=collection_archive---------3-----------------------#2022-04-08">https://itnext.io/setting-up-scalr-with-azure-devops-add-azure-credentials-979ddc17d90d?source=collection_archive---------3-----------------------#2022-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4b04" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要开始在Azure DevOps中使用Scalr，需要经历3个初始阶段。在这一系列3篇关于使用Scalr和Azure DevOps的文章中，我将一步一步地介绍每个阶段。</p><p id="a9a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是本系列的第二篇文章，主要关注阶段2 — <strong class="js iu">如何添加Azure凭证</strong>并将它们链接到一个环境。</p><p id="1592" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">如果你错过了该系列的第一篇文章，</strong> <a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/setting-up-scalr-with-azure-devops-picking-a-workflow-d91124a4748c"> <strong class="js iu">点击这里查看——挑选工作流程。</strong> </a></p><p id="0c2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，本系列的第3篇文章将重点介绍如何使用PR automation和通过将CLI插入Azure DevOps来执行Terraform代码和创建工作空间。还有第三种方法可以使用模块注册表来创建工作区，但是这仍然使用VCS连接。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/098468f3dede67997b31f0e3d47b3d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3wzkUvvtbqEKQtDi.png"/></div></div></figure><h2 id="f908" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">提供商凭据</h2><p id="e690" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">为了向我们的云提供商(Microsoft Azure)进行认证，我们需要向Scalr提供一些凭证。凭证可以存储在Scalr中的一个中心位置，使您能够在工作区之间共享它们。它们也可以跨环境共享，但是对于每个环境，每个提供者类型只能有一组凭证(我被告知这个限制将很快被取消，同一个提供者的多个凭证将能够被添加到每个环境中。)凭证被加密并被安全地存储。凭证作为shell变量传递给环境中的所有工作区。通过这样做，团队可以限制谁可以真正访问凭证，并且所有新的工作区将自动继承它们，使得凭证的管理变得非常容易。</p><p id="2d2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇文章中，我们还将展示如何在Azure中创建必要的凭据作为Azure Active Directory应用程序注册，并为其分配适当的角色。</p><p id="2912" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于我们将使用Terraform和Scalr将基础设施部署到Azure，在本系列的第三篇也是最后一篇文章中，我们将展示当在工作区中执行Terraform运行时，提供者凭证如何作为shell变量自动传递给运行。</p><h2 id="3759" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">向Scalr添加凭证</h2><ol class=""><li id="162b" class="lz ma it js b jt lu jx lv kb mb kf mc kj md kn me mf mg mh bi translated">登录Scalr，点击左上角的图标。在下拉菜单中选择“管理账户”。</li></ol><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/e6b62102dc33ec2135a1bf175988a2df.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*08zeSKODa5i0_iPZP2TsIA.png"/></div></figure><p id="2568" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.如果这是您要添加的第一组凭据，您将看到“入门”屏幕和“添加云凭据”按钮。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/d1e906e4e206259ba6e80a90930b4b57.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*WIGTprxTxI-qgoKv31ybow.png"/></div></figure><p id="c639" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者，如果您已经添加了凭据，请再次点击左上方的图标，并从下拉列表中选择“提供商凭据”。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/0d0c256251a5c797a712b77a28a8ce61.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*yCtbSWCc1dZculnxaIINIw.png"/></div></figure><p id="0f9e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.选择“添加凭据”，然后从下拉菜单中选择Azure提供商。注意，如果您想使用一个在Scalr中没有选项的提供者，您可以使用shell变量选项来实现类似的功能。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/cc5ab12b19ba8dd2da54dacdb59bbb9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*i97liktDVKeb4HKHgjQU-g.png"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/096f8afd04b83eebe8e3aa433a1d4a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*CNOAAm7XTBCGiMcJXck4Ig.png"/></div></figure><p id="aa98" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.此时，跳转到Azure门户网站并登录你的账户。点击Azure Active Directory →应用注册。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mn"><img src="../Images/d70ef2f533720983822f46ece82dab2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GiszAvYB82B7TyMH_Lxumw.png"/></div></div></figure><p id="d426" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">记者登记。在下一个屏幕上，复制要点部分中显示的详细信息。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/196158d687cc30ebc1d3f79be85ae221.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*3FM6bnR6aZ94nCPsXvSzdA.png"/></div></figure><p id="7391" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来点击秘密-&gt;新客户秘密</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/b72d1570ad863dcdba687df7cf649e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:296/format:webp/1*diTkR037-PpfangUtjj_oQ.png"/></div></figure><p id="7e8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输入描述和到期日期。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/f9bacb1f79944764e7a3fa96cbd66017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*-E0LuXOinxRORys1YsrcsA.png"/></div></figure><p id="16cd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">按下添加按钮，然后复制机密值。你只能看一次。</p><p id="4632" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们需要向我们希望与Scalr一起使用的Azure订阅授予应用程序注册权限。浏览到您的订阅，并点击访问控制(IAM)。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/19c5159ebac75c409bd796670b6d5bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:356/format:webp/1*wqK1Pu2Rj8LlytJX1x8qow.png"/></div></figure><p id="2bb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">单击角色分配，然后添加-&gt;添加角色分配。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/e11062532c1535bd8f1c49f1e2b2b72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*BwZHB9flGJOtjiccgTMXAA.png"/></div></figure><p id="2a23" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我选择contributor(对订阅有完全访问权限，但不能更改权限)，然后单击next。</p><p id="2819" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">选择“选择成员”,然后在搜索栏中输入您之前设置的应用注册名称。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mt"><img src="../Images/d5c916b0482a44cb87c64dca3475d70d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oB_GOPfgZfjUUL_EenseFw.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/bbfc2c0dbc7d2e4a43a4977d1e2cfca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*zYlWJTAJeiuGQqki8_rj0A.png"/></div></figure><p id="14e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">按选择，然后查看和分配。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mv"><img src="../Images/39d3d979945229853ea369960691c4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QdUtNLjonM26TY2AzHjoqA.png"/></div></div></figure><p id="236f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.回到Scalr，添加您从应用程序注册中复制的详细信息:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/712d4f1d699912ca6b5ad99a24da5141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*qdCYYgzPXPFHKqpCGIerFg.png"/></div></figure><p id="6c5f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">按保存。如果连接成功，您的订阅将显示在下拉订阅菜单中。选择它并按保存。</p><p id="5904" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.通过单击左上角的Scalr图标，然后单击environments，将提供者凭证链接到所需的环境。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/5aed371ee1ed569ec8ac3237317dccdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:526/format:webp/1*GybewTw-wqN3A9DbaT95Tw.png"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi my"><img src="../Images/c3907898f0b4ccb88c06f6e58985fdca.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*gGWWZaoLluz_dEekQXMjiQ.png"/></div></figure><p id="f842" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">选择环境，然后选择提供者凭据选项卡。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/3b411391d9abb248c5a4f89b48e88280.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*VANEYYkA-WS4yRsxfQnt2A.png"/></div></figure><p id="18ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Azure provider的对面，点击Link，然后选择我们之前创建的提供者凭证旁边的复选框。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi na"><img src="../Images/edda9039daea391732df47c09782a6fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QGKdQd5V2bKLEVnBZEMag.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/cf61010d6c18765c9acc82f30f731f3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*enFN-hH1lcoK28m4xuwt1w.png"/></div></figure><p id="1355" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，按保存！</p><h2 id="fd9e" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">摘要</h2><p id="8124" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">在这篇文章中，我们展示了如何在Azure中创建一个应用注册，在订阅中为它分配一个角色，并成功地将其作为提供者凭证添加到Scalr中。然后，我们将提供者凭证链接到Scalr环境。</p><p id="5eeb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/setting-up-scalr-with-azure-devops-picking-a-workflow-d91124a4748c">之前的帖子中，我们将Scalr链接到我们的Azure DevOps VCS提供商</a>。</p><p id="c8ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在下一篇文章中，我们将执行一些Terraform代码来将基础设施部署到Azure！</p><p id="52c3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">干杯！🍻</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/7719a662c95d837aa94b3f1836514491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*5oqdPMWKmEFsEDQxV68oSA.png"/></div></figure><div class="nd ne gp gr nf ng"><a href="https://www.buymeacoffee.com/jackwesleyroper" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">Jack Roper正在Azure、Azure DevOps、Terraform、Kubernetes和Cloud tech上写博客！</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">希望我的博客能帮到你，你会喜欢它的内容！我真的很喜欢写技术内容和分享…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kz ng"/></div></div></a></div></div></div>    
</body>
</html>