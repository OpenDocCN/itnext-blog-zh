<html>
<head>
<title>Setup Visual Studio Code for debugging your Electron application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置Visual Studio代码以调试您的电子应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/setup-visual-studio-code-for-debugging-an-electron-application-with-the-vue-cli-service-c224600fc219?source=collection_archive---------3-----------------------#2020-10-14">https://itnext.io/setup-visual-studio-code-for-debugging-an-electron-application-with-the-vue-cli-service-c224600fc219?source=collection_archive---------3-----------------------#2020-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/60177eab947c82035c637d4845b7c224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ajeu4iSgdF1tGgbX0pvZig.png"/></div></div></figure><p id="c1b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您已经使用Vue CLI为一个电子应用程序创建了一个项目，则无法使用Visual Studio代码(例如，带有断点的代码)立即调试该应用程序。</p><p id="8f9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文基于文章<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/electron-application-with-vue-js-and-vuetify-f2a1f9c749b8"> <em class="kx">使用Vue创建电子应用程序和Vue化</em> </a> <em class="kx">。</em>如果您以前从未使用Vue CLI为电子应用程序设置过项目，请先阅读本文。</p><p id="4799" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以使用以下命令为任何平台(Windows、MacOS或Linux)构建应用程序:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="4664" class="lh li iq ld b gy lj lk l ll lm">npm run electron:build</span></pre><p id="f57c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命令完成后，我们将在子文件夹<em class="kx"> dist_electron/中拥有一个可执行的电子应用程序。</em></p><p id="adc9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以运行以下命令:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="648f" class="lh li iq ld b gy lj lk l ll lm">npm run electron:serve</span></pre><p id="1003" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个命令将把电子应用程序作为开发服务器运行，我们可以使用内置的开发工具直接在电子应用程序中调试它。</p><p id="0f05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这在大多数情况下是可行的，但是从长远来看，应用程序会增长，功能和过程会变得更加复杂。最终，控制台上的输出不再足够。</p><p id="0f2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是为了便于说明，我们将准备一个简单的示例，并输出到控制台，然后用Visual Studio代码进行调试。</p><h1 id="93f9" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">使用console.log进行调试(…)</h1><p id="cf7e" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">这是最常见的技术之一，在大多数情况下，我只能建议不要这样做。对于快速测试，您可以向控制台写入一些输出，但是危险在于，当您不再需要输出时，您会忘记删除它。</p><p id="43ae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们稍微修改一下HelloWorld组件(HelloWorld.vue)。首先，我们添加一个简单的函数，在新窗口中打开一个URL。此外，我们将URL写入控制台。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/5ed86698e2849fc4c6705847e3c3ad37.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*G94CepnJiHQwPev2Gj4jYw.png"/></div></figure><p id="fa15" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在模板部分，我们通过使用click事件而不是href来更新其中一个v-for循环，这将使用相应的URL调用我们的方法。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/399cd523937f147d78d369dfc2565ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4EPICL2KMz9HuPmltmmLNw.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">将href更改为点击事件</figcaption></figure><p id="e1cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">再次启动开发人员服务器:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="626f" class="lh li iq ld b gy lj lk l ll lm">npm run electron:serve</span></pre><p id="8692" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">单击您使用方法更新的链接之一。带有URL的新窗口应该会打开，在开发人员工具的控制台中，我们应该会看到URL的输出。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/b6115b01df1ab8912177b0a0096e7a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1o74fodfLp3BLBzzoGRLFw.png"/></div></div></figure><p id="efbc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是如果我们有一个有几个参数的方法，也许在函数中还有额外的变量呢？然后，在某个时候，将所有内容输出到控制台变得很复杂。</p><p id="5e19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，以一种可以从IDE中调试项目的方式来设置您的IDE更有意义。这也使得一步一步地检查源代码来追溯单个步骤成为可能。</p><h1 id="8c0d" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">为调试设置Visual Studio代码</h1><p id="8dec" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">我一直在寻找一种直接从Visual Studio代码中调试我的一个项目的方法。首先我在<a class="ae kw" href="https://github.com/nklayman/vue-cli-plugin-electron-builder/issues/80#issuecomment-572066368" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到了一个条目。后来我才在电子构建器(Vue CLI)插件的文档中找到这些设置。这有点隐藏，所以我写这篇文章，以便其他开发人员可以更容易地找到和使用这个设置。</p><p id="57d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Vue CLI Plugin Electron Builder的文档中有一个名为<a class="ae kw" href="https://nklayman.github.io/vue-cli-plugin-electron-builder/guide/recipes.html#debugging-with-vscode" rel="noopener ugc nofollow" target="_blank">用VSCode </a>调试的方法，我们可以一步一步地学习。</p><h2 id="9686" class="lh li iq bd lo mw mx dn ls my mz dp lw kj na nb ma kn nc nd me kr ne nf mi ng bi translated">源地图</h2><p id="2db1" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">只有当我们用TypeScript编写项目时，我们才必须激活源地图。源映射是包含映射定义的文件，这些定义将您生成的每段JavaScript代码链接回相应的TypeScript文件的特定行和列。</p><p id="e830" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开文件<em class="kx"> vue.config.js </em>，添加如下内容:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="9495" class="lh li iq ld b gy lj lk l ll lm">module.exports = {<br/>  configureWebpack: {<br/>    devtool: 'source-map'<br/>  }<br/>}</span></pre><p id="0168" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用此设置，Vue CLI将从您的TypeScript文件生成源映射。源地图也是从*生成的。Vue文件，我们将在本例中看到。</p><h2 id="5078" class="lh li iq bd lo mw mx dn ls my mz dp lw kj na nb ma kn nc nd me kr ne nf mi ng bi translated">添加任务和配置</h2><p id="1c4c" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">在子目录<em class="kx">中。vscode/ </em>(在项目的根级别)创建两个文件:<em class="kx"> tasks.json </em>和<em class="kx"> launch.json. </em></p><p id="5c03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将以下内容添加到<em class="kx"> tasks.json: </em></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="4d16" class="lh li iq ld b gy lj lk l ll lm">{<br/>  // See https://go.microsoft.com/fwlink/?LinkId=733558<br/>  // for the documentation about the tasks.json format<br/>  "version": "2.0.0",<br/>  "tasks": [<br/>    {<br/>      "label": "electron-debug",<br/>      "type": "process",<br/>      "command": "./node_modules/.bin/vue-cli-service",<br/>      "windows": {<br/>        "command": "./node_modules/.bin/vue-cli-service.cmd"<br/>      },<br/>      "isBackground": true,<br/>      "args": ["electron:serve", "--debug"],<br/>      "problemMatcher": {<br/>        "owner": "custom",<br/>        "pattern": {<br/>          "regexp": ""<br/>        },<br/>        "background": {<br/>          "beginsPattern": "Starting development server\\.\\.\\.",<br/>          "endsPattern": "Not launching electron as debug argument was passed\\."<br/>        }<br/>      }<br/>    }<br/>  ]<br/>}</span></pre><p id="ffc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将在后台启动作为开发服务器的电子应用程序。因此您的应用程序的UI将不可见。</p><p id="1afe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在最后一步中，将以下内容添加到<em class="kx"> launch.json中:</em></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3034" class="lh li iq ld b gy lj lk l ll lm">{<br/>  "version": "0.2.0",<br/>  "configurations": [<br/>    {<br/>      "name": "Electron: Main",<br/>      "type": "node",<br/>      "request": "launch",<br/>      "protocol": "inspector",<br/>      "runtimeExecutable": "${workspaceRoot}/node_modules/.bin/electron",<br/>      "windows": {<br/>        "runtimeExecutable": "${workspaceRoot}/node_modules/.bin/electron.cmd"<br/>      },<br/>      "preLaunchTask": "electron-debug",<br/>      "args": ["--remote-debugging-port=9223", "./dist_electron"],<br/>      "outFiles": ["${workspaceFolder}/dist_electron/**/*.js"]<br/>    },<br/>    {<br/>      "name": "Electron: Renderer",<br/>      "type": "chrome",<br/>      "request": "attach",<br/>      "port": 9223,<br/>      "urlFilter": "http://localhost:*",<br/>      "timeout": 30000,<br/>      "webRoot": "${workspaceFolder}/src",<br/>      "sourceMapPathOverrides": {<br/>        "webpack:///./src/*": "${webRoot}/*"<br/>      }<br/>    }<br/>  ],<br/>  "compounds": [<br/>    {<br/>      "name": "Electron: All",<br/>      "configurations": ["Electron: Main", "Electron: Renderer"]<br/>    }<br/>  ]<br/>}</span></pre><p id="aaad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这定义了两个配置(一个用于主进程，另一个用于呈现器进程)。compounds部分将结合两种配置，启动主进程并附加到render进程，这样我们就可以调试这两个进程。</p><h2 id="22f7" class="lh li iq bd lo mw mx dn ls my mz dp lw kj na nb ma kn nc nd me kr ne nf mi ng bi translated">选择配置并设置断点</h2><p id="9369" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">因为电子运行两个进程，我们必须在开始调试之前选择化合物配置(<em class="kx">电子:所有)</em>。在我们的方法中设置一个断点，方法是将光标放在要调试的代码行上，然后按F9，或者单击编辑器行号的左侧。您应该会看到一个红色的点，指示该行的断点。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/38fcc88f3b8f3f987dbd29eb84a24791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uqYHJCNrT6-u6aAKxVwILw.png"/></div></div></figure><p id="90c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以按F5或绿色播放图标。您应该会在Visual Studio代码的终端中看到类似的输出。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/f9dd668d5fc882c073288b72b32c81c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A--vLj4vB0z1SbQ-47FuoA.png"/></div></div></figure><p id="281b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，您的电子申请应该会再次启动，您可以再次点击之前的其中一个链接。但是现在应用程序将停止，Visual Studio代码将出现在前台。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/3e4c29a8f47ec3f21e5df77c385bec06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b791qSjD-CdIrvt6-j4N9g.png"/></div></div></figure><p id="11f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，还会显示源代码中要打开URL的位置。此外，还可以看到局部变量。对于F10，每一行都被执行。因此，逐步调试功能是可能的。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/e58b077915c5ee68a9f6066e96f23e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PxBUERhpmT7p447q6I2trA.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">按下F10后</figcaption></figure><p id="9ae8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用F5键，程序继续运行，直到下一个断点。如果您再次单击其中一个链接，应用程序也将再次在断点处停止。</p><h1 id="83f1" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">摘要</h1><p id="ca53" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">这是一个如何设置Visual Studio代码来调试电子应用程序的简单示例。如果您需要更多信息或有任何问题，请告诉我。</p><p id="6530" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完整的例子可以在GitHub上找到:<br/>【https://github.com/bromix/vue-electron-app T2】</p></div></div>    
</body>
</html>