<html>
<head>
<title>Deploying Jakarta EE 9 applications to Apache TomEE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Jakarta EE 9应用程序部署到Apache TomEE</h1>
<blockquote>原文：<a href="https://itnext.io/deploying-jakarta-ee-9-applications-to-apache-tomee-e1a9b9399d9b?source=collection_archive---------2-----------------------#2020-11-29">https://itnext.io/deploying-jakarta-ee-9-applications-to-apache-tomee-e1a9b9399d9b?source=collection_archive---------2-----------------------#2020-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ca9b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Apache TomEE(又名Apache Tomcat + Java EE/Jakarta EE)是一个轻量级的开源Jakarta EE应用服务器。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bbe525b66addc9069a161aebd3e74370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XZgar-TMaqJ9r-ovXsLz_A.png"/></div></div></figure><p id="8acf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">目前它在<a class="ae ln" href="http://tomee.apache.org/download-ng.html" rel="noopener ugc nofollow" target="_blank">下载页面</a>中提供了一个Jakarta EE 9预览版，这个版本是由Eclipse Transformer工具项目从TomEE 8转换而来的<a class="ae ln" href="https://github.com/apache/tomee-jakarta" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="9558" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TomEE 9在下载页面有几个选项，根据您的需求选择一个变体，关于这些变体的详细信息，请前往<a class="ae ln" href="http://tomee.apache.org/comparison.html" rel="noopener ugc nofollow" target="_blank">功能对比</a>页面。</p><blockquote class="lo lp lq"><p id="ef4d" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated"><em class="iq">注意:Apache TomEE是Web Profile兼容的，不是完整Profile的实现。</em></p></blockquote><p id="1b52" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">从我的Github中获取</strong> <a class="ae ln" href="https://github.com/hantsy/jakartaee9-starter-boilerplate" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">源代码</strong> </a> <strong class="kt ir">。</strong></p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="69a5" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">先决条件</h1><p id="5b6b" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">确保您已经安装了以下软件。</p><ul class=""><li id="3a06" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">Java 11 ( <a class="ae ln" href="https://openjdk.java.net/install/" rel="noopener ugc nofollow" target="_blank"> OpenJDK </a>或<a class="ae ln" href="https://adoptopenjdk.net/installation.html" rel="noopener ugc nofollow" target="_blank"> AdoptOpenJDK </a>)</li><li id="2bb1" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated"><a class="ae ln" href="http://maven.apache.org/download.cgi" rel="noopener ugc nofollow" target="_blank">阿帕奇Maven 3.6.3 </a></li><li id="747f" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated"><a class="ae ln" href="http://tomee.apache.org/download-ng.html" rel="noopener ugc nofollow" target="_blank">阿帕奇托米(羽)9.0.0-M3 </a></li></ul></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="9236" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">手动部署</h1><p id="e087" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">作为一个例子，我们选择了<em class="lr"> plume </em>版本，它包含了一个Web Profile的超级特征集合。</p><p id="3af7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将文件从下载的归档文件解压到本地磁盘。TomEE文件结构类似于Apache Tomcat。</p><p id="a43b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要启动TomEE服务器，打开终端窗口，进入TomEE根文件夹，切换到<em class="lr"> bin </em>文件夹，执行以下命令，在单独的窗口中启动TomEE服务器。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="2e84" class="ns md iq no b gy nt nu l nv nw"># Windows<br/>startup.bat<br/># or <br/>catalina.bat start</span><span id="7d6b" class="ns md iq no b gy nx nu l nv nw"># Linux like system.<br/>sh ./startup.sh</span></pre><p id="884c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者通过执行以下命令在同一窗口中运行TomEE服务器。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="340d" class="ns md iq no b gy nt nu l nv nw"># Windows<br/>catalina.bat run</span><span id="4ae7" class="ns md iq no b gy nx nu l nv nw"># Linux like system.<br/>sh ./catalina.sh run</span></pre><p id="7603" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您将在TomEE服务器控制台中看到启动进度。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="15b9" class="ns md iq no b gy nt nu l nv nw">Using CATALINA_BASE:   "D:\appsvr\apache-tomee-plume-9.0.0-M3"<br/>Using CATALINA_HOME:   "D:\appsvr\apache-tomee-plume-9.0.0-M3"<br/>Using CATALINA_TMPDIR: "D:\appsvr\apache-tomee-plume-9.0.0-M3\temp"<br/>Using JRE_HOME:        "D:\jdk11"<br/>Using CLASSPATH:       "D:\appsvr\apache-tomee-plume-9.0.0-M3\bin\bootstrap.jar;D:\appsvr\apache-tomee-plume-9.0.0-M3\bin\tomcat-juli.jar"<br/>Using CATALINA_OPTS:   ""<br/>...</span></pre><p id="a91d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在项目根文件夹中执行以下命令，将项目构建到<em class="lr">目标</em>文件夹中的<em class="lr"> war </em>包中。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="1243" class="ns md iq no b gy nt nu l nv nw">mvn clean package</span></pre><p id="e0bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要部署应用程序，只需将<em class="lr">target/jakartaee 9-starter-boilerplate . war</em>复制到<em class="lr">【tomee安装目录】/webapps </em>文件夹。</p><p id="9ed7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在控制台窗口中，您将看到部署进度自动开始。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="d9b7" class="ns md iq no b gy nt nu l nv nw">29-Nov-2020 15:40:33.673 INFO [Catalina-utility-1] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Deploying web application archive [D:\appsvr\apache-tomee-plume-9.0.0-M3\webapps\jakartaee9-starter-boilerplate.war]<br/>29-Nov-2020 15:40:33.673 INFO [Catalina-utility-1] org.apache.tomee.catalina.TomcatWebAppBuilder.init ------------------------- localhost -&gt; /jakartaee9-starter-boilerplate</span><span id="beb3" class="ns md iq no b gy nx nu l nv nw">...</span><span id="8a67" class="ns md iq no b gy nx nu l nv nw">29-Nov-2020 15:40:37.955 INFO [Catalina-utility-1] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api</a>                 -&gt; com.example.JaxrsActivator@69c1f1fe<br/>29-Nov-2020 15:40:37.955 INFO [Catalina-utility-1] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a>        -&gt; Pojo com.example.GreetingResource<br/>29-Nov-2020 15:40:37.955 INFO [Catalina-utility-1] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}</a> -&gt;      Response greeting(String)<br/>29-Nov-2020 15:40:38.003 INFO [Catalina-utility-1] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Deployment of web application archive [D:\appsvr\apache-tomee-plume-9.0.0-M3\webapps\jakartaee9-starter-boilerplate.war] has finished in [4,330] ms</span></pre><p id="8d5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦部署成功，使用<code class="fe ny nz oa no b">curl</code>命令验证部署结果。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="11c4" class="ns md iq no b gy nt nu l nv nw">curl <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/Hantsy" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/Hantsy</a><br/>{"message":"Say Hello to Hantsy at 2020-11-29T15:44:29.252675900"}</span></pre><p id="46c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要取消部署应用程序，只需从<em class="lr"> [tomee安装目录]/webapps </em>文件夹中删除<strong class="kt ir"> war </strong>文件。请稍等，您将在TomEE控制台中看到取消部署进度。</p><p id="db6a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要停止正在运行的TomEE服务器，只需在TomEE控制台发送一个<code class="fe ny nz oa no b">CTRL+C</code>信号，或者在另一个终端窗口执行shutdown命令。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="025e" class="ns md iq no b gy nt nu l nv nw"># Linux like system.<br/>[tomee install dir]/bin/shutdown  </span><span id="c205" class="ns md iq no b gy nx nu l nv nw"># Windows<br/>[tomee install dir]\bin\shutdown.bat</span></pre></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="598b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">使用TomEE Maven插件</h1><p id="864b" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">Apache TomEE提供了一个官方的maven插件，供开发者在应用开发阶段部署和取消部署应用到TomEE服务器。</p><p id="d7d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<em class="lr"> pom.xml </em>文件中声明<code class="fe ny nz oa no b">plugins</code>下的<code class="fe ny nz oa no b">tomee-maven-plugin</code>。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="ddf5" class="ns md iq no b gy nt nu l nv nw">&lt;plugin&gt;<br/>    &lt;groupId&gt;org.apache.tomee.maven&lt;/groupId&gt;<br/>    &lt;artifactId&gt;tomee-maven-plugin&lt;/artifactId&gt;<br/>    &lt;version&gt;${tomee-maven-plugin.version}&lt;/version&gt;<br/>&lt;/plugin&gt;</span></pre><p id="8046" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">定义一个<code class="fe ny nz oa no b">tomee-maven-plugin.version</code>属性来指定要使用的<code class="fe ny nz oa no b">tomee-maven-plugin</code>的版本。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="d3c7" class="ns md iq no b gy nt nu l nv nw">&lt;tomee-maven-plugin.version&gt;8.0.5&lt;/tomee-maven-plugin.version&gt;</span></pre><blockquote class="lo lp lq"><p id="91f6" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated"><em class="iq">注意:目前</em> <code class="fe ny nz oa no b"><em class="iq">tomee-maven-plugin</em></code> <em class="iq">没有为Jakarta EE 9/TomEE 9提供预览版，但是稳定版(8.0.5)与最新的TomEE 9预览版配合得非常好。</em></p></blockquote><p id="00dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，<code class="fe ny nz oa no b">tomee-maven-plugin</code>将检索最新的稳定版本来服务您的应用程序。在<code class="fe ny nz oa no b">tomee-maven-plugin</code>的<code class="fe ny nz oa no b">configuration</code>中添加以下属性，强制其使用最新的TomEE 9.0.0-M3。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="9eea" class="ns md iq no b gy nt nu l nv nw">&lt;!-- download and run on a managed Apache TomEE server --&gt;<br/>&lt;tomeeVersion&gt;${tomee.version}&lt;/tomeeVersion&gt;<br/>&lt;tomeeArtifactId&gt;apache-tomee&lt;/tomeeArtifactId&gt;<br/>&lt;tomeeGroupId&gt;org.apache.tomee.jakarta&lt;/tomeeGroupId&gt;<br/>&lt;tomeeClassifier&gt;plume&lt;/tomeeClassifier&gt;</span></pre><p id="d01c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">定义一个<code class="fe ny nz oa no b">tomeeVersion</code>来指定TomEE版本。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="db3b" class="ns md iq no b gy nt nu l nv nw">&lt;tomee.version&gt;9.0.0-M3&lt;/tomee.version&gt;</span></pre><blockquote class="lo lp lq"><p id="8461" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated"><em class="iq">注:</em> <code class="fe ny nz oa no b"><em class="iq">tomeeGroupId</em></code> <em class="iq">为</em><strong class="kt ir"><em class="iq">org . Apache . TomEE . Jakarta</em></strong><em class="iq">，与稳定版不同，TomEE 8.0使用的是groupId</em><strong class="kt ir"><em class="iq">org . Apache . TomEE</em></strong><em class="iq">。</em></p></blockquote><p id="60f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，现在运行下面的命令来启动TomEE 9服务器并部署应用程序。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="a928" class="ns md iq no b gy nt nu l nv nw">mvn clean package tomee:run -Ptomee</span></pre><p id="3a2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您将在TomEE控制台中看到以下信息。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="59ef" class="ns md iq no b gy nt nu l nv nw">[INFO] --- tomee-maven-plugin:8.0.5:run (default-cli) @ jakartaee9-starter-boilerplate ---<br/>[INFO] TomEE was unzipped in 'D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee'<br/>[INFO] Removed not mandatory default webapps<br/>[INFO] Installed 'D:\hantsylabs\jakartaee9-starter-boilerplate\target\jakartaee9-starter-boilerplate.war' in D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee\webapps\ja<br/>kartaee9-starter-boilerplate.war<br/>[INFO] TomEE will run in development mode<br/>[INFO] Running 'org.apache.openejb.maven.plugin.run'. Configured TomEE in plugin is localhost:8080 (plugin shutdown port is 8005 and https port is null)<br/>// ...<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Server version name:   Apache Tomcat (TomEE)/9.0.39 (8.0.5)<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Server built:          Oct 6 2020 14:11:46 UTC<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Server version number: 9.0.39.0<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke OS Name:               Windows 10<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke OS Version:            10.0<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Architecture:          amd64<br/>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Java Home:             D:\jdk11<br/>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke JVM Version:           11.0.9.1+1<br/>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke JVM Vendor:            AdoptOpenJDK<br/>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke CATALINA_BASE:         D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee<br/>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke CATALINA_HOME:         D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee</span><span id="5f67" class="ns md iq no b gy nx nu l nv nw">//...</span><span id="aaa1" class="ns md iq no b gy nx nu l nv nw">29-Nov-2020 14:50:28.371 INFO [main] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api</a><br/>        -&gt; com.example.JaxrsActivator@2ab8589a<br/>29-Nov-2020 14:50:28.386 INFO [main] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a><br/>        -&gt; Pojo com.example.GreetingResource<br/>29-Nov-2020 14:50:28.386 INFO [main] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a><br/>/{name} -&gt;      Response greeting(String)<br/>...<br/>29-Nov-2020 14:50:29.325 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG]<br/>took [829] milliseconds.<br/>29-Nov-2020 14:50:29.341 INFO [main] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Starting ProtocolHandler ["http-nio-8080"]<br/>29-Nov-2020 14:50:29.348 INFO [main] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Server startup in [6177] milliseconds</span></pre><p id="05ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您还可以使用<code class="fe ny nz oa no b">tomee-maven-plugin</code>将应用程序部署到正在运行的TomEE服务器，尤其是esp。运行在远程服务器上。</p><p id="fedb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">打开<em class="lr">[tomee install dir]/conf/Tomcat-users . XML</em>文件，取消注释以下配置。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="9160" class="ns md iq no b gy nt nu l nv nw">&lt;!-- Activate those lines to get access to TomEE GUI if added (tomee-webaccess) --&gt;</span><span id="c356" class="ns md iq no b gy nx nu l nv nw">&lt;role rolename="tomee-admin" /&gt;<br/>&lt;user username="tomee" password="tomee" roles="tomee-admin,manager-gui" /&gt;</span></pre><p id="0a4c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">打开<em class="lr">【tomee安装目录】/conf/system.properties </em>文件，取消注释并修改以下项目。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="a866" class="ns md iq no b gy nt nu l nv nw">tomee.remote.support = true<br/>tomee.serialization.class.blacklist = -<br/>tomee.serialization.class.whitelist = com.example.<br/>openejb.system.apps = true<br/>openejb.servicemanager.enabled = true</span></pre><p id="45c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们返回到项目<em class="lr"> pom.xml </em>文件，用以下内容替换之前的<code class="fe ny nz oa no b">tomee-maven-plugin</code>配置。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="911a" class="ns md iq no b gy nt nu l nv nw">&lt;configuration&gt;<br/>    &lt;tomeeHost&gt;localhost&lt;/tomeeHost&gt;<br/>    &lt;user&gt;tomee&lt;/user&gt;<br/>    &lt;password&gt;tomee&lt;/password&gt;<br/>    &lt;path&gt;${project.build.directory}/${project.build.finalName}.war&lt;/path&gt;<br/>&lt;/configuration&gt;</span></pre><p id="b0bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">确保TomEE服务器正在运行，在项目根文件夹中运行以下命令。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="e4b8" class="ns md iq no b gy nt nu l nv nw">mvn clean package tomee:deploy -Ptomee</span></pre><p id="8351" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以在TomEE控制台中查看部署进度信息。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="5560" class="ns md iq no b gy nt nu l nv nw">...<br/>29-Nov-2020 16:56:23.550 INFO [http-nio-8080-exec-8] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api</a>                 -&gt; com.example.JaxrsActivator@affb16f<br/>29-Nov-2020 16:56:23.550 INFO [http-nio-8080-exec-8] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a>        -&gt; Pojo com.example.GreetingResource<br/>29-Nov-2020 16:56:23.550 INFO [http-nio-8080-exec-8] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET <a class="ae ln" href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}</a> -&gt;      Response greeting(String)</span></pre><p id="2fdc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要取消部署应用程序，请执行以下命令。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="5e1a" class="ns md iq no b gy nt nu l nv nw">mvn tomee:undeploy -Ptomee</span></pre></div></div>    
</body>
</html>