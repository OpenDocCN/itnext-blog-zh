<html>
<head>
<title>DNS Debugging with dig</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用dig进行DNS调试</h1>
<blockquote>原文：<a href="https://itnext.io/dns-debugging-with-dig-8da5bb984673?source=collection_archive---------0-----------------------#2022-05-07">https://itnext.io/dns-debugging-with-dig-8da5bb984673?source=collection_archive---------0-----------------------#2022-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d31b11f2953fa21cf9026bdb8664e364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TNYZl7AFseE3SI-4"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@timberfoster?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">蒂姆·福斯特</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="0fca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为一名做大量基础设施、开发和安全工作的软件工程师，我经常发现自己需要检查各种域的DNS记录。</p><h1 id="9d49" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用“挖掘”命令</h1><p id="979b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Dig是一个非常有用的工具。然而，我很少使用它，以至于我从来不记得我想要使用的确切标志集。对于发现，我通常还想搜索所有类型，这需要7个不同的命令！</p><p id="807f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我经常使用的dig命令是:<code class="fe mh mi mj mk b">dig +noall +answer '&lt;domain&gt;' '&lt;type&gt;'</code></p><p id="60ea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我正在检查<code class="fe mh mi mj mk b">gmail.com</code>的记录，我需要运行所有这些命令:</p><figure class="ml mm mn mo gt ju"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">为了得到gmail.com的所有记录</figcaption></figure><p id="9ccf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那是有点打字！如果我想查找<code class="fe mh mi mj mk b">mail.google.com</code>，还有7个命令。</p><p id="f7ea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为一个以效率和简单为乐的人，这是绝对不行的。然而，当dig已经如此擅长时，编写一个新的工具/程序来做这件事是愚蠢的。这里的答案，是一个bash函数！</p><h1 id="0c65" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">输入“digall”命令”</h1><p id="1920" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">digall</code>是一小段bash代码，用于包装for <code class="fe mh mi mj mk b">dig</code>命令，并提供一种简单的方法来运行域的所有查询。它所做的就是遍历每个记录类型，并使用上面提到的标准选项(<code class="fe mh mi mj mk b">+noall +answer</code>)和您指定为第一个参数的主机名或域来调用dig。该脚本还添加了一些颜色/格式，使阅读输出更愉快，因为命令输出应该实用但也很漂亮！</p><p id="3e22" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想在不下载/安装任何东西的情况下试用它，您可以简单地将它粘贴到现有的bash提示符中:</p><figure class="ml mm mn mo gt ju"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="7def" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以替换上面的7个dig命令，但只需:</p><pre class="ml mm mn mo gt mr mk ms mt aw mu bi"><span id="62d1" class="mv lf it mk b gy mw mx l my mz">$ digall gmail.com</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/76f02c26663dbebe06300a06e7ff3960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C7IcVPvUcUnHSzuho9BMXA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">“digall”命令的输出示例</figcaption></figure><h1 id="66e8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">有没有我可以在脚本中运行的版本？</h1><p id="0bc0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">其实是的！可以在Github 上找到<a class="ae kf" href="https://github.com/FreedomBen/digall" rel="noopener ugc nofollow" target="_blank">。您可以在本地将其拉下来，并使用以下命令进行尝试:</a></p><figure class="ml mm mn mo gt ju"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="5c96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在可以运行它了:</p><pre class="ml mm mn mo gt mr mk ms mt aw mu bi"><span id="c51b" class="mv lf it mk b gy mw mx l my mz">$ ./digall gmail.com</span></pre><p id="66ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！我希望你和我一样觉得这个工具很有用。</p></div></div>    
</body>
</html>