<html>
<head>
<title>Basic React Shopping List — create elements and filtering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基本反应购物清单-创建元素和过滤</h1>
<blockquote>原文：<a href="https://itnext.io/basic-react-shopping-list-create-elements-and-filtering-a1a97d8e2490?source=collection_archive---------2-----------------------#2018-05-10">https://itnext.io/basic-react-shopping-list-create-elements-and-filtering-a1a97d8e2490?source=collection_archive---------2-----------------------#2018-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/db419039a286487131dcd0b05e720ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*btz9vW8LPtUJy--rvsqFfg.jpeg"/></div></div></figure><p id="5780" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我将向你展示如何用过滤制作一个非常基本和简单的购物清单。</p><p id="1fb8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我用codepen写代码。</p><p id="4777" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，您需要一个容器来呈现React应用程序，因此我们在HTML部分创建了一个id为“reactContainer”的div，这可能就是您想要的:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="b78f" class="lf lg iq lb b gy lh li l lj lk">&lt;div id=”reactContainer”&gt;<br/> <br/>&lt;/div&gt;</span></pre><p id="9f7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我写了一些SAS代码，但是我没有花太多时间。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="d093" class="lf lg iq lb b gy lh li l lj lk">body<br/>  background: #4abdac<br/>  width: 100vw<br/>  height: 100vh<br/>  <br/>.top<br/>  background: #fc4a1a<br/>  color: white<br/>  border: 2px solid white</span><span id="d32e" class="lf lg iq lb b gy ll li l lj lk">.wb<br/>  background: #dfcde3</span></pre><p id="ca27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是时候开始编写一些React代码了。我只创建了一个组件，在一个真正的应用程序中，你应该创建一些组件。首先，我们添加构造函数和呈现方法。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="436d" class="lf lg iq lb b gy lh li l lj lk">class App extends React.Component <br/>{<br/> constructor(props)<br/> {<br/> super(props);<br/> this.state = {<br/> todosInit: [‘100 kg Meat’,’Ham’, ‘Cheese’],<br/> todos: [],<br/> };<br/> }<br/> <br/> }</span><span id="a877" class="lf lg iq lb b gy ll li l lj lk">render() <br/> {<br/> return (<br/> &lt;div&gt;<br/> &lt;div className=”container top”&gt;<br/> &lt;div className=”row”&gt;<br/> &lt;div className=”col-lg-12"&gt;<br/> &lt;h2 className=”text-center”&gt;Shopping List&lt;/h2&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> ); <br/> }<br/> <br/>}</span><span id="dc59" class="lf lg iq lb b gy ll li l lj lk">ReactDOM.render(&lt;App /&gt;, document.getElementById(‘reactContainer’));</span></pre><p id="5b1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">状态todosInit负责呈现初始列表，而todos将存储所有todos。现在，我们将添加ComponentDidMount，用于在todos状态下插入todosInit，我们将插入两个方法，一个用于管理输入字段中的状态更改，另一个用于向列表中添加新元素。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="2358" class="lf lg iq lb b gy lh li l lj lk">class App extends React.Component <br/>{<br/> constructor(props)<br/> {<br/> super(props);<br/> this.state = {<br/> todosInit: [‘100 kg Meat’,’Ham’, ‘Cheese’],<br/> todos: [],<br/> todoText: ‘’,<br/> message: false<br/> };<br/> this.updateTodoText = this.updateTodoText.bind(this);<br/> this.createTodo = this.createTodo.bind(this);<br/> }<br/> <br/> componentDidMount()<br/> {<br/> this.setState({<br/> todos: this.state.todosInit,<br/> });<br/> }<br/> <br/> updateTodoText (e)<br/> {<br/> this.setState({<br/> todoText: e.target.value<br/> });<br/> }<br/> <br/> createTodo (e)<br/> {<br/> e.preventDefault();<br/> this.setState({ <br/> todos: […this.state.todos, this.state.todoText],<br/> todoText: ‘’,<br/> });<br/> }</span><span id="9010" class="lf lg iq lb b gy ll li l lj lk">render() <br/> {<br/> return (<br/> &lt;div&gt;<br/> &lt;div className=”container top”&gt;<br/> &lt;div className=”row”&gt;<br/> &lt;div className=”col-lg-12"&gt;<br/> &lt;h2 className=”text-center”&gt;Shopping List&lt;/h2&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;div className=”container wb”&gt;<br/> &lt;div className=”row”&gt;<br/> &lt;form onSubmit={this.createTodo}&gt;<br/> &lt;div className=”col-lg-12 input-group”&gt;<br/> &lt;input type=”text”<br/> className=”center-block”<br/> placeholder=”Insert here…”<br/> value={this.state.todoText}<br/> onChange={this.updateTodoText}<br/> /&gt;<br/> &lt;button className=”btn btn-success center-block”&gt;Create&lt;/button&gt;<br/> &lt;/div&gt;<br/> &lt;/form&gt;<br/> &lt;ul&gt;<br/> {this.state.todos.map((todo) =&gt; <br/> {<br/> return (&lt;li key={Math.floor(Math.random() * 10000) + 1}&gt;{todo}&lt;/li&gt;);<br/> }<br/> )} <br/> {this.state.message ? &lt;li&gt;No search results.&lt;/li&gt; : ‘’ }<br/> &lt;/ul&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> ); <br/> }<br/> <br/>}</span><span id="07cb" class="lf lg iq lb b gy ll li l lj lk">ReactDOM.render(&lt;App /&gt;, document.getElementById(‘reactContainer’));</span></pre><p id="1e05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在映射一个州的元素时，您需要向元素添加一个键。我只是用了一个随机数，在实际应用中你不应该用它。现在我们要写过滤部分的代码</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="b4fc" class="lf lg iq lb b gy lh li l lj lk"> filterTodo(e)<br/> { <br/> var updatedList = this.state.todosInit;<br/> updatedList = updatedList.filter((item =&gt;{<br/> return item.toLowerCase().search(<br/> e.target.value.toLowerCase()) !== -1;<br/> }) );<br/> this.setState({ <br/> todos: updatedList,<br/> });<br/> if (updatedList == 0 ) {<br/> this.setState({ <br/> message: true,<br/> });<br/> } else {<br/> this.setState({ <br/> message: false,<br/> });<br/> }<br/> }</span></pre><p id="012f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在向您展示输入字段的完整代码之前，我将向您解释filterTodo方法的逻辑。当搜索字段的输入发生变化时，将调用此方法，并检查列表中是否存在该值。该代码使所有输入值小写，并与我们找到一些匹配，它更新todos状态，并在屏幕上呈现。我创建了一个消息状态，只是为了在没有搜索结果时显示消息“没有找到结果”。</p><p id="119e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在完成了代码，你可以在<a class="ae lm" href="https://codepen.io/nunosoares/pen/zjWpJN" rel="noopener ugc nofollow" target="_blank">https://codepen.io/nunosoares/pen/zjWpJN</a>中阅读并做一些修改。可以回复，展示其他解决方案。玩得开心。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="e998" class="lf lg iq lb b gy lh li l lj lk">class App extends React.Component <br/>{<br/> constructor(props)<br/> {<br/> super(props);<br/> this.state = {<br/> todosInit: [‘100 kg Meat’,’Ham’, ‘Cheese’],<br/> todos: [],<br/> todoText: ‘’,<br/> message: false<br/> };<br/> this.updateTodoText = this.updateTodoText.bind(this);<br/> this.createTodo = this.createTodo.bind(this);<br/> this.filterTodo = this.filterTodo.bind(this);<br/> }<br/> <br/> componentDidMount()<br/> {<br/> this.setState({<br/> todos: this.state.todosInit,<br/> });<br/> }<br/> <br/> updateTodoText (e)<br/> {<br/> this.setState({<br/> todoText: e.target.value<br/> });<br/> }<br/> <br/> createTodo (e)<br/> {<br/> e.preventDefault();<br/> this.setState({ <br/> todos: […this.state.todos, this.state.todoText],<br/> todoText: ‘’,<br/> });<br/> }<br/> <br/> filterTodo(e)<br/> { <br/> var updatedList = this.state.todosInit;<br/> updatedList = updatedList.filter((item =&gt;{<br/> return item.toLowerCase().search(<br/> e.target.value.toLowerCase()) !== -1;<br/> }) );<br/> this.setState({ <br/> todos: updatedList,<br/> });<br/> if (updatedList == 0 ) {<br/> this.setState({ <br/> message: true,<br/> });<br/> } else {<br/> this.setState({ <br/> message: false,<br/> });<br/> <br/> <br/> }<br/> <br/> }</span><span id="08be" class="lf lg iq lb b gy ll li l lj lk">render() <br/> {<br/> return (<br/> &lt;div&gt;<br/> &lt;div className=”container top”&gt;<br/> &lt;div className=”row”&gt;<br/> &lt;div className=”col-lg-12"&gt;<br/> &lt;h2 className=”text-center”&gt;Shopping List&lt;/h2&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;div className=”container wb”&gt;<br/> &lt;div className=”row”&gt;<br/> &lt;form onSubmit={this.createTodo}&gt;<br/> &lt;div className=”col-lg-12 input-group”&gt;<br/> &lt;input type=”text”<br/> className=”center-block”<br/> placeholder=”Insert here…”<br/> value={this.state.todoText}<br/> onChange={this.updateTodoText}<br/> /&gt;<br/> &lt;button className=”btn btn-success center-block”&gt;Create&lt;/button&gt;<br/> &lt;/div&gt;<br/> &lt;/form&gt;<br/> &lt;ul&gt;<br/> {this.state.todos.map((todo) =&gt; <br/> {<br/> return (&lt;li key={Math.floor(Math.random() * 10000) + 1}&gt;{todo}&lt;/li&gt;);<br/> }<br/> )} <br/> {this.state.message ? &lt;li&gt;No search results.&lt;/li&gt; : ‘’ }<br/> &lt;/ul&gt;<br/> &lt;/div&gt;<br/> &lt;input type=”text”<br/> className=”center-block”<br/> placeholder=”Filter here…”<br/> onChange={this.filterTodo}<br/> /&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> ); <br/> }<br/> <br/>}</span><span id="6bb9" class="lf lg iq lb b gy ll li l lj lk">ReactDOM.render(&lt;App /&gt;, document.getElementById(‘reactContainer’));</span></pre></div></div>    
</body>
</html>