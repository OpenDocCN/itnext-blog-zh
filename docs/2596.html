<html>
<head>
<title>The Evolutionary Architecture Recipe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">进化建筑配方</h1>
<blockquote>原文：<a href="https://itnext.io/the-evolutionary-architecture-recipe-c5420d772c6c?source=collection_archive---------2-----------------------#2019-06-20">https://itnext.io/the-evolutionary-architecture-recipe-c5420d772c6c?source=collection_archive---------2-----------------------#2019-06-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="58bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很长一段时间以来，软件行业都遵循着这样的观念，即在编写第一行代码之前，应该开发并完成架构。预先计划的架构方法是建立在需求也应该在编码开始之前确定的概念上的。</p><p id="939c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，敏捷世界挑战了固定需求的概念，观察到需求的定期变化是现代世界的业务需求。从这个角度来看，架构以敏捷的方式拥抱变化。我们称之为进化架构，以强调虽然变化是不可预测的，但架构仍然可以朝着好的方向发展。</p><blockquote class="kl"><p id="ce95" class="km kn iq bd ko kp kq kr ks kt ku kk dk translated">一个可以随着时间的推移轻松发展的架构</p></blockquote><p id="0dd0" class="pw-post-body-paragraph jn jo iq jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ij bi translated">有很多关于人类如何思考和决策的研究。众所周知，人类通常根据假设做出决定，软件业也不例外。</p><p id="cd63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">敏捷思维促进了流程、产品和业务的迭代，这促进了学习周期，有助于公司在该领域知识的驱动下做出更好的决策，并减少由假设驱动的决策。这种思维模式也适用于软件架构，但是我们需要一组高层次的问题和实践来帮助我们从这些学习周期中获得最大收益，并做出更好的架构决策。</p><blockquote class="kl"><p id="1360" class="km kn iq bd ko kp kq kr ks kt ku kk dk translated">好的决策来自于在正确的时间提出正确的问题。</p></blockquote></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h1 id="248b" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">食谱</h1><p id="21b9" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">这是一个烹饪进化架构的基本食谱，在大多数情况下味道都不错，但像任何食谱一样，你可以添加更多的成分或改变它们来改进它。</p><p id="3821" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个流程由在项目周期的不同阶段执行的一组问题来指导。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mk"><img src="../Images/48fbe3719fffee92f4021f1e4e26ee32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pr3XZcPPNFA6DGeTCqgmXg.png"/></div></div></figure></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="c4c3" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated">项目范围是否定义良好？</h2><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/e21b54247216c15f57aa4c25bb328b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*C-f33FCtoyUt03S6rD-xtw.png"/></div></figure><p id="1698" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">项目范围帮助软件架构师定义架构范围，并做出更好的架构决策。项目需求在开发周期中可能会改变，但是它们应该保持在范围的边界内，以避免影响架构方向。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/89c35b6d090546c8d26c6e1e4f523a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*wiU_NCGCS1fQqE-NS215oQ.png"/></div></figure><p id="c938" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">业务分析</strong>对于确定业务需求并对其进行优先排序是必要的，以便定义包含项目范围的MVP文档或迭代产品。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c60a35845a1ff686bd578870882f1194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*ehVq2iU8ZfQ-SEuyG9Ojag.png"/></div></figure><p id="525f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦项目范围被很好地定义，领域驱动的设计实践，如<strong class="jp ir">事件风暴</strong>和<strong class="jp ir">无处不在的语言</strong>帮助团队识别子域并定义跨领域的公共语言。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="b504" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated">子域名被识别了吗？不</h2><p id="4485" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">DDD实践要求领域和技术专家一起工作，以便识别子域，但是当缺乏业务规则方面的知识时，有时会很困难。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nk"><img src="../Images/82bb605047976284184530ac594ffee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*szu3vIOVu6SD71WXxAfHFw.png"/></div></div></figure><p id="b353" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">领域驱动的架构需要对实现它们的子域有深入的了解，否则，架构上的错误抽象会使其更难发展。</p><blockquote class="nl nm nn"><p id="baaa" class="jn jo no jp b jq jr js jt ju jv jw jx np jz ka kb nq kd ke kf nr kh ki kj kk ij bi translated">复制比错误的抽象要便宜得多</p></blockquote><p id="3762" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么，当领域知识严重缺乏时，非领域架构是最佳选择。</p><h2 id="a6f4" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated">是一个遗留项目。</h2><p id="7d75" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">架构决策也依赖于项目状态。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi ns"><img src="../Images/fc9f8811cc07c5a7df189484ebbc0845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mS2vYOzqnw4r_-7F7yC3aw.png"/></div></div></figure><p id="902d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于<strong class="jp ir">绿地</strong>项目，我们应该实施一个简单的架构，专注于项目范围，避免基于假设或过早优化而使其变得更加复杂。</p><blockquote class="nl nm nn"><p id="944c" class="jn jo no jp b jq jr js jt ju jv jw jx np jz ka kb nq kd ke kf nr kh ki kj kk ij bi translated">过早优化是编程中所有罪恶(或者至少是大部分罪恶)的根源——Donald Knuth</p></blockquote><p id="055b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于<strong class="jp ir">棕色地带</strong>(遗留)项目，在开发周期中，架构被迭代以解决技术债务并加速交付。在项目周期中，架构是基于需求变化而迭代的，因为此时是项目范围变化的时候，因此架构应该随着项目一起发展。</p><blockquote class="kl"><p id="6cca" class="km kn iq bd ko kp kq kr ks kt ku kk dk translated">架构应该随着项目一起发展。</p></blockquote><h2 id="1d24" class="mw li iq bd lj mx nt dn ln mz nu dp lr jy nv nc lv kc nw ne lz kg nx ng md nh bi translated">发布和项目迭代</h2><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi ny"><img src="../Images/3b0097e82af2266f6960cc00cbb0d2e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xUDr_iWAMdD7wp4HyVZdig.png"/></div></div></figure><p id="fa4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">项目发布后，我们可以使用分析工具，根据从用户行为中收集的信息，对迭代项目进行业务分析。正如你所注意到的，棕地项目的商业分析不同于绿地项目，它是由市场需求和用户需求驱动的。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nz"><img src="../Images/2b9d4d72819755005ed50945eb2a6792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UPM3y3SKpTihdv8yzPDbiA.png"/></div></div></figure><p id="1549" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当下一个项目迭代开始时，我们有更多的信息来帮助领域和技术专家使用DDD实践来识别或迭代子域。</p><h2 id="7789" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated">子域名被识别了吗？是</h2><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi oa"><img src="../Images/c7ee00cd87fe54c7e0e26757d382ce63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UnexXX4IA8Eubv5X3C2ufA.png"/></div></div></figure><p id="5b66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦确定了所有或至少一个子域，我们就可以采用域驱动的架构。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi ob"><img src="../Images/0765cac2645ab1f04eddca6408232568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ftrcVbaauXcISRG5dMz91Q.png"/></div></div></figure><p id="c456" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为绿地项目确定子领域并不常见，但是当参与项目的人有大量解决特定业务领域问题的经验时，这是可能的。</p><p id="9dbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一些领域驱动的架构，比如微服务，实现起来比其他的更复杂，因此它们需要更多的技术专长来实现。</p><blockquote class="kl"><p id="a691" class="km kn iq bd ko kp kq kr ks kt ku kk dk translated">一些领域驱动的架构需要技术专家来实现它们。</p></blockquote><h2 id="48e0" class="mw li iq bd lj mx nt dn ln mz nu dp lr jy nv nc lv kc nw ne lz kg nx ng md nh bi translated">扼杀者模式</h2><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi oc"><img src="../Images/06ef06bd4ca87c990fec11877991ff60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qSUW5UluUNbad6A_4yO_NQ.png"/></div></div></figure><p id="b631" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个<a class="ae od" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/strangler" rel="noopener ugc nofollow" target="_blank">扼杀者模式</a>是一种稳定迁移遗留项目的方法，不像大爆炸方法，遗留系统被丢弃，新的系统从零开始开发。</p><p id="8291" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种方法包括从遗留系统中移除已识别的域，并在基础设施或代码级别上分离它们。</p><p id="518d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:当应用程序很小或者项目范围发生巨大变化时，有时采用大爆炸方法会更好。</p><h2 id="1276" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated">释放并继续迭代</h2><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi oe"><img src="../Images/825dd14ddfb780d515836586ab77c423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WThArADl2qpRFXYBvAeiqQ.png"/></div></div></figure><p id="650c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们需要再次发布架构变更，所以是时候再次迭代项目和架构了。</p><h2 id="c99d" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated"><strong class="ak">结论</strong></h2><p id="89dc" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">作为软件架构师，我们应该避免做出由假设驱动的决策，相反，我们应该利用每个项目迭代的学习周期来做出由项目范围和收集的知识驱动的决策。</p><h2 id="b0f8" class="mw li iq bd lj mx my dn ln mz na dp lr jy nb nc lv kc nd ne lz kg nf ng md nh bi translated"><strong class="ak">资源</strong></h2><p id="129f" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated"><a class="ae od" href="https://www.thoughtworks.com/books/building-evolutionary-architectures" rel="noopener ugc nofollow" target="_blank">建造进化建筑</a></p><p id="4b75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae od" href="https://medium.com/the-coding-matrix/ddd-101-the-5-minute-tour-7a3037cf53b8" rel="noopener">DDD 101——五分钟之旅</a></p><p id="9984" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想…我想…我在想什么？—推动决策的假设</p></div></div>    
</body>
</html>