<html>
<head>
<title>Kotlin: When properties are evaluated</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当评估属性时</h1>
<blockquote>原文：<a href="https://itnext.io/kotlin-when-properties-are-evaluated-a7db5a8e2799?source=collection_archive---------6-----------------------#2019-03-26">https://itnext.io/kotlin-when-properties-are-evaluated-a7db5a8e2799?source=collection_archive---------6-----------------------#2019-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9749bb143e27ebb4e9c4fcfa33527753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b2RW7YiqhV7dCZU3ZiKRsw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">归属地:【https://www.flickr.com/photos/j_lightning/】T4</figcaption></figure><p id="8904" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Kotlin给出了在类中声明属性的不同方法。它们的声明方式会影响它们的求值时间。</p><p id="2916" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们举一个简单的例子:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="99a3" class="lk ll iq lg b gy lm ln l lo lp">class Test {<br/>    private fun returnSomething(str: String):String {<br/>        println("evaluating $str")<br/>        return str<br/>    }<br/>    <br/>    val testGetEquals <br/>        get() = returnSomething("testGetEquals")  <br/>    val testGetBrackets: String                            <br/>        get() { return returnSomething("testGetBrackets") }<br/>}</span></pre><p id="2c3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建Test实例后，调用<code class="fe lq lr ls lg b">testGetEquals</code>的getter，每次都会通过<code class="fe lq lr ls lg b">returnSomething</code>求值。<code class="fe lq lr ls lg b">testGetBrackets</code>也是如此。</p><p id="00f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我经常这样写我简单的有值属性:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="ec0b" class="lk ll iq lg b gy lm ln l lo lp">val testEquals = returnSomething("testEquals")</span></pre><p id="c13e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是这将testEquals更改为在创建类时只计算一次。如果这是一个Android活动或片段，并且对字符串的评估依赖于您拥有的<code class="fe lq lr ls lg b">Context</code>，这将导致崩溃或不正确的值。</p><p id="30dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我想只评估一次房产科特林还有一招。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="01a3" class="lk ll iq lg b gy lm ln l lo lp">val testLazy by lazy { returnSomething("testLazy") }</span></pre><p id="3d7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也是只评估一次。但是它在第一次被调用时进行了计算。</p><p id="d40a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请点击下面的链接，在科特林游乐场亲自尝试一下</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="d32c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">关于我<br/> </strong>我是一名Kotlin/Java Android开发者承包商。我总是很有兴趣听到你的项目和我能做些什么来互相帮助。<a class="ae kc" href="https://www.wedgetech.co.uk/" rel="noopener ugc nofollow" target="_blank">www.wedgetech.co.uk</a></p></div></div>    
</body>
</html>