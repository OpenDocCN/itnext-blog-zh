<html>
<head>
<title>Understanding the forecasting algorithm: STLF Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解预测算法:STLF模型</h1>
<blockquote>原文：<a href="https://itnext.io/understanding-the-forecasting-algorithm-stlf-model-29d74b3a0336?source=collection_archive---------2-----------------------#2018-05-20">https://itnext.io/understanding-the-forecasting-algorithm-stlf-model-29d74b3a0336?source=collection_archive---------2-----------------------#2018-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="90c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">根据历史信息预测未来</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/69dd97d801b4a3779cf39549794f294e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QHB8AhRSDDKpCV1WU1xFag.png"/></div></figure><h2 id="bc1e" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">介绍</h2><p id="d9cc" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">让我们从理解什么是预测开始？这是对未来价值的最佳预测，提供了从历史数据中学到的洞察力。尽管听起来很简单，但每种预测算法都试图这么做，可惜假设不同。正在讨论的STLF算法试图预测未来，其基础是假设一个时间序列存在不同的属性，以及这些属性有多深。让我们理解这些属性。</p><h2 id="cc32" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">STLF模型</h2><p id="9404" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">使用黄土预测模型可以将STLF定义为季节和趋势分解。那是满嘴的。但是完整的过程可以分为分解和预测，其中一个为另一个铺平道路。STLF模型假设时间序列可以分解为误差、趋势和季节性成分。因此，如果在原始时间序列中寻找模式是困难的，分解可以使这个过程变得稍微容易一些；如果我们能够复制未来的分解模式，预测只不过是重新组合组件。让我们了解每个组件及其含义，</p><ol class=""><li id="a253" class="ls lt iq jp b jq jr ju jv jy lu kc lv kg lw kk lx ly lz ma bi translated"><strong class="jp ir">趋势:</strong>当数据长期增加或减少时，趋势存在。它不必是线性的。</li><li id="a90e" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated"><strong class="jp ir">季节性:</strong>当时间序列受到季节因素(如一年中的某个时间或一周中的某一天)的影响时，就会出现季节性模式。季节性总是有一个固定和已知的频率。</li><li id="d7f4" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated"><strong class="jp ir">错误:</strong>它是我们从时间序列数据中移除趋势和季节性后剩余的随机值。误差项中不应该有模式，如果有，那么我们在分解方面做得很糟糕。</li></ol><h2 id="eb7f" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">分解</h2><p id="c7fa" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">现在我们对组件有了基本的直觉，让我们理解分解过程。在这篇文章中，我们考虑了从1949年到1960年提供每月乘客数量的航空乘客数据集，它看起来像这样，</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/32c3397039a49ee0262ddef86c9b2156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*QVxKXvKWXhRiPJ1ig7Xo8w.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">11年的航空乘客月度数据集</figcaption></figure><p id="dafe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，数据中似乎有某种模式。让我们试着分解时间序列，首先从，</p><p id="c6c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">季节性:</strong>一般来说，如果数据集的季节性由<code class="fe mp mq mr ms b">x</code>个点(周期)组成，那么平均季节性可以通过取所有<code class="fe mp mq mr ms b">i + (i+x) + (i+2x) + …</code>个点的平均值来计算。让我们看看我们的数据集是否有季节性。为此，让我们把每个月的数据画出来。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/433f41b15ce29cd63810ebef4bf75ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*wuusY_pKzjDYKXYY9AWFdA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">每年航空旅客数据集的月图。</figcaption></figure><p id="9736" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从图中我们可以看出，从1月到2月，似乎有一些下降，然后当我们接近7月时，乘客数量似乎有所增加，从8月开始，我们看到乘客数量下降，然后在12月再次增加。由于这种模式在许多年中都很明显，我们可以得出结论，我们的数据具有年度季节性。因此，在我们11年的月度数据中，季节性可以通过取每年的1月、2月等的平均值来计算。复制平均数据来覆盖数据的大小，我们得到这个，</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/38dc3d599a983f76b0b27e892e201726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*lBtKkJOcSRBoYsESGZ6oPg.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">航空旅客数据集的季节性分解</figcaption></figure><p id="1b84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">趋势:</strong>趋势计算无非是平滑数据，对应的是用一个点来表示一桶数据点。这可以帮助我们确定数据的总体趋势。这可以通过移动平均(取一桶数据的加权平均)或黄土平滑(使用局部加权回归来拟合点)来实现。正如STLF的定义所暗示的(L是黄土)，我们在这里将偏好黄土平滑。现在的问题是桶的大小应该是多少，为此将进行局部回归。一个直观的方法是保持它与季节性周期的长度相同。这样我们就否定了趋势成分中的季节性；任何趋势模式都可能与另一种预测洞察力有关。对于航空旅客数据集，由于季节性是每年一次，因此周期将为12(一年中的月数)。我们将用这个桶的大小进行平滑。最终的趋势看起来像这样，</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/df6219d16cdc208577163043bfd3726a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*oigK828gmoqdAxnOlztYPg.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">航空旅客数据集的黄土平滑趋势计算</figcaption></figure><p id="961e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">错误:</strong>这是你从原始数据集中去掉趋势和季节性后得到的结果。因此，在计算完剩余的成分后，将它们从数据集中移除，剩余的假定随机值是错误的。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/2a3c72c8fd39e848f977005eb4bd1e8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*tpGqFQcIwACHb2iW2d8r8w.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">航空乘客数据集的错误组件</figcaption></figure><h2 id="0684" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">预测</h2><p id="b6d1" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">现在我们已经有了所有需要的组件，让我们考虑如何使用这些知识来预测未来的值。谈到季节性，这是我们在数据中发现的模式，由于这种模式在过去几年中重复出现，我们可以假设明年也会发生同样的情况。所以让我们保持季节性不变。现在对于剩下的部分，让我们把趋势和误差结合起来，称这个结合为季节调整数据(因为它是原始的减去季节，明白吗？).现在，如果我们能够在这里做一些预测，我们将关注趋势。从数据中可以明显看出，整个数据中的趋势是增加的，如果我们能够预测未来的趋势，并将其与预测的季节性(这只是去年季节性的平均值)相结合，我们就预测了明年看不到的航空乘客数据集！</p><p id="cd07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，要预测季节性调整数据，有很多选择，从使用朴素方法估计模型到甚至ARIMA模型。但是为了保持这篇文章的简单，因为我们还没有谈到其他的预测模型，让我们在这里使用简单的方法。简单方法表明预测值与最后的明显值相同。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/c78ba0b7e8b0317820e12af154d915b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*7Tw4AOnlo_VtTbLGdEOXDQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">基于朴素预测的航空旅客季节调整数据</figcaption></figure><p id="5b4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，当我们将这些数据与计算出的季节数据结合起来时，我们得到了飞机乘客的预测数据，看起来像是，</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/23d5ae024f1d788add39e584ea64af52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*yZfs0rUd49tAUlvE4xrFZQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">基于朴素方法的航空旅客数据预测</figcaption></figure><p id="73ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">结论</strong></p><p id="f4d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不错，因为我们能够识别和复制季节性，但仍有一些点需要关注。从图中我们可以得出以下结论，</p><ul class=""><li id="ae9e" class="ls lt iq jp b jq jr ju jv jy lu kc lv kg lw kk my ly lz ma bi translated">趋势完全消失，预测值直线上升。</li><li id="5d5d" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk my ly lz ma bi translated">季节性也是不变的，但从数据中可以明显看出，它应该在增加。</li></ul><p id="cd16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么这里出了什么问题呢？一个字的回答，幼稚的方法。一般来说，STLF是非常基本但功能强大的预测技术。只要将它们与ETS和ARIMA结合起来进行季节性调整的数据预测，你就会得到对大量数据的最先进的预测。现在，我们在这里使用的是天真的方法，它有缺点，如它不能模拟趋势，这是显而易见的预测图，因为现在的未来值看起来直。除了naive之外，使用STL的任何其他组合都超出了讨论范围，但是为了展示STL的威力，让我们看看它们会是什么样子。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/0c8961b686c29f785fc48277b021a300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*Gbip8tbezfNiLLZTfZ5PMQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">使用ETS进行季节性调整数据的航空乘客预测</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/d400946778952b12d946f60f6040e67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*TKPAzi94dBIHnxRmivWXOw.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">使用ARIMA季节调整数据的航空旅客预报</figcaption></figure><p id="fea1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也许在另一篇文章中，我们可以讨论每一种方法，以及为什么它们优于简单的方法。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h2 id="f530" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">参考</h2><p id="135c" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">[1]预测:原理与实践— <em class="kl">罗布·J·海曼和乔治·阿萨纳索普洛斯</em></p></div></div>    
</body>
</html>