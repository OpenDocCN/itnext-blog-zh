<html>
<head>
<title>How to Create Four Types of VPN’s Quickly with Wireguard® and Netmaker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Wireguard和Netmaker快速创建四种类型的VPN</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-four-types-of-vpns-quickly-with-wireguard-and-netmaker-1db7a6270a0f?source=collection_archive---------0-----------------------#2021-11-01">https://itnext.io/how-to-create-four-types-of-vpns-quickly-with-wireguard-and-netmaker-1db7a6270a0f?source=collection_archive---------0-----------------------#2021-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/eb7dba5b22c5dc357655f55d4ab881bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*breo4oEZxz2aSoOD6MrGYg.png"/></div></div></figure><p id="9de5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">(这是两部分系列的第1部分)</em></p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="acba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">VPN可以是很多东西。你可能认为你知道VPN是什么…但是你真的知道吗？虚拟专用网络只是通过公共网络发送专用流量。但是，这些流量流向哪里，目的是什么？毕竟，网络有各种形状和大小。</p><p id="ddd3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个由两部分组成的教程中，我们将讨论四种“类型”的VPN，它们可以被认为是使用案例，并用WireGuard和免费网络平台<a class="ae le" href="https://github.com/gravitl/netmaker" rel="noopener ugc nofollow" target="_blank"> Netmaker </a>在10分钟内设置好它们:</p><ul class=""><li id="35b7" class="lf lg iq ka b kb kc kf kg kj lh kn li kr lj kv lk ll lm ln bi translated">个人(私人浏览)</li><li id="c2c7" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated">远程存取</li><li id="0ac7" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated">站点到站点</li><li id="1178" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated">网格(虚拟局域网/广域网)</li></ul><p id="5d2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">WireGuard是一种新的非常快速的VPN技术。通常，VPN会使你的网络变慢。有了WireGuard，差别可以忽略不计。Netmaker在幕后使用WireGuard，可以简化从家庭实验室到企业规模的环境设置。</p><p id="d16c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从描述4种类型的VPN开始。然后，我们将使用一个命令设置一个Netmaker服务器。最后，我们将介绍每种类型的VPN，并快速进行示例设置。注意，这些教程需要一些基本的Linux技能。如果你以前没有接触过终端，你可以跳过这些。</p><p id="d338" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在第一部分中，我们将介绍家庭使用的个人和远程访问VPN。这些用例非常容易设置。在第二部分中，我们将讨论站点到站点和网状VPN，它们要复杂得多，并且面向业务用例。</p><h1 id="d591" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">VPN的四种类型</h1><p id="b79c" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">首先，免责声明。VPN可以有很多很多拓扑。在这里，我们将它分成四个粗略的“类别”，但是在我们浏览教程时要记住，在现实中，VPN可以采用许多任意的设计。这些只是一些有用的和常见的方法来分解它。</p><h2 id="f255" class="mw lu iq bd lv mx my dn lz mz na dp md kj nb nc mh kn nd ne ml kr nf ng mp nh bi translated"><strong class="ak"> #1 -个人VPN(私人浏览)</strong></h2><p id="2e82" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">大多数人都熟悉这种类型的VPN。如果你曾经为你的个人电脑使用过付费的VPN服务，可能是这样的。这种类型的VPN实际上也是类似于#2中的“远程访问”VPN，但是有不同的目的。</p><p id="b0b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它的工作原理是，在你的任何网络流量进入互联网之前，它首先被加密，然后通过一些公司的服务器路由。这样，没有人知道流量的来源，给你一些匿名。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/ff2ef25a62397077caa1e190d91caff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*RHPfMdoQj_-irug4IJfbWg.png"/></div></figure><h2 id="ded2" class="mw lu iq bd lv mx my dn lz mz na dp md kj nb nc mh kn nd ne ml kr nf ng mp nh bi translated"><strong class="ak"> #2 -远程访问VPN </strong></h2><p id="e77a" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">你曾经不得不使用企业VPN吗？如果你在远程工作，就像2021年的许多人一样，答案可能是肯定的。</p><p id="03df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种类型的VPN实际上非常类似于“个人”VPN，只有一个关键区别:VPN“服务器”可以将您的流量路由到公司网络，而不是将您的流量路由到互联网。然而，通常<em class="kw">也是</em>为普通互联网路由流量！这样，他们就可以阻止你整天玩视频游戏和浏览Reddit。</p><p id="4232" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过VPN访问公司网络，您可以访问不在公共互联网上的公司应用程序和服务(人力资源、工资单等)。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/12d68b1bed1854b10e1fa9a65e28c532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*zZKh35_YDKNj-J6FqkdGQg.png"/></div></figure><h2 id="7514" class="mw lu iq bd lv mx my dn lz mz na dp md kj nb nc mh kn nd ne ml kr nf ng mp nh bi translated"><strong class="ak"> #3 -点对点VPN </strong></h2><p id="566f" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">除非你从事网络工程，否则你可能从未遇到过这种情况。尽管如此，你可能已经<em class="kw">经历过</em>而不自知。假设您有两个办公室，A和B。A和B需要相互通信并共享服务，但它们在不同的网络上！他们可以建立一个“站点到站点”的VPN，用一条专用链路把两个网络连接起来，而不是把所有这些服务都暴露在互联网上。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/eb7dba5b22c5dc357655f55d4ab881bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*breo4oEZxz2aSoOD6MrGYg.png"/></div></div></figure><h2 id="f209" class="mw lu iq bd lv mx my dn lz mz na dp md kj nb nc mh kn nd ne ml kr nf ng mp nh bi translated"><strong class="ak"> #4 -网状VPN(虚拟局域网/广域网)</strong></h2><p id="4456" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">由于其复杂性，这是目前最不常见的VPN之一，但它越来越受欢迎。如果您从事高级计算领域的工作，如multi-cloud、Kubernetes或IoT，您很可能会遇到这种情况。在网状VPN中，每台设备都与其它设备有直接的VPN连接。这对于创建“扁平”网络很有用，在这种网络中，您不必通过其他设备路由流量，否则会增加延迟或降低安全性。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d650a5b5c2edd75c1182426bb65be213.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*dqDeVJWv2RntuK8aP-TYnQ.png"/></div></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="f3e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经描述了四个用例，让我们用四个例子来演示它们，使用Netmaker和WireGuard。在每个示例中，我们将使用相同的Netmaker服务器设置不同的VPN，它可以创建和管理许多网络:</p><ul class=""><li id="f9d8" class="lf lg iq ka b kb kc kf kg kj lh kn li kr lj kv lk ll lm ln bi translated">个人:我们将建立一个VPN，用它从我们的手机接入互联网<strong class="ka ir">。</strong></li><li id="ac5d" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated"><strong class="ka ir">远程访问:</strong>我们将建立一个VPN，用它从我们的手机访问<strong class="ka ir">我们的</strong> <strong class="ka ir">家庭网络</strong>。</li><li id="b71d" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated"><strong class="ka ir">站点到站点:</strong>我们将建立一个VPN，并使用它从云环境访问私有子网，反之亦然。</li><li id="c3de" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated"><strong class="ka ir"> Mesh: </strong>我们将建立一个VPN，将不同云中的虚拟机连接在一起，以便它们能够协调工作。</li></ul><p id="2fbc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在第一部分中，我们将讨论前两个例子，这两个例子与个人更相关，然后在第二部分中，我们将继续讨论站点到站点和网状VPN，这两个例子与组织更相关。</p><h1 id="2554" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated"><strong class="ak">入门:部署网络制造者</strong></h1><p id="23f3" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">Netmaker服务器将管理我们的各种网络。Netmaker是一个用于部署和自动化基于WireGuard的网络的平台。我们将运行快速安装。这些说明也可以在GitHub 上的<a class="ae le" href="https://github.com/gravitl/netmaker" rel="noopener ugc nofollow" target="_blank">自述文件中找到。</a></p><p id="e112" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要部署Netmaker，您需要一个云虚拟机，或者任何一台拥有公共IP的机器。我用的是5美元/月的数字海洋水滴(<a class="ae le" href="https://m.do.co/c/496ffcf1e252" rel="noopener ugc nofollow" target="_blank">你可以在这里</a>使用我们的推荐代码获得100美元的免费信用)。</p><p id="c6d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们建议部署一个Ubuntu 20.04实例。最重要的是，你要记得为你的虚拟机<strong class="ka ir">打开防火墙</strong>，并在必要时配置安全组。机器上的以下端口必须打开并且可以访问:</p><ul class=""><li id="9529" class="lf lg iq ka b kb kc kf kg kj lh kn li kr lj kv lk ll lm ln bi translated">443 (TCP和UDP)</li><li id="9212" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated">53 (TCP和UDP)</li><li id="35b1" class="lf lg iq ka b kb lo kf lp kj lq kn lr kr ls kv lk ll lm ln bi translated">51821–51830(UDP)</li></ul><p id="d390" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您使用的是DigitalOcean，这些端口将已经开放。一旦您创建了一个VM并打开了端口，部署Netmaker就变得轻而易举了。只需运行以下命令:</p><pre class="nj nk nl nm gt no np nq nr aw ns bi"><span id="6e9a" class="mw lu iq np b gy nt nu l nv nw">ssh root@yourhost<br/>sudo wget -qO - https://raw.githubusercontent.com/gravitl/netmaker/develop/scripts/nm-quick.sh | bash -s -- -v true -c 10<!-- --> </span></pre><p id="5bb1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该命令将安装WireGuard和其他一些本地依赖项，部署Netmaker，并为Netmaker配置<strong class="ka ir">两个网络:</strong>一个默认(对等)网络和一个“VPN”网络(这是选项<code class="fe nx ny nz np b">-v true -c 10</code>添加的)。</p><p id="b7e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">不要清除输出</strong>，它包含配置网络的重要信息。您可能希望将它保存在文本编辑器中。示例输出:</p><pre class="nj nk nl nm gt no np nq nr aw ns bi"><span id="9695" class="mw lu iq np b gy nt nu l nv nw">checking for root permissions...</span><span id="83d7" class="mw lu iq np b gy oa nu l nv nw">setting flags...</span><span id="1e10" class="mw lu iq np b gy oa nu l nv nw">checking for root permissions...</span><span id="a749" class="mw lu iq np b gy oa nu l nv nw">checking dependencies...</span><span id="acee" class="mw lu iq np b gy oa nu l nv nw">setting caddyfile...</span><span id="085c" class="mw lu iq np b gy oa nu l nv nw">setting docker-compose...</span><span id="dc08" class="mw lu iq np b gy oa nu l nv nw">starting containers...visit dashboard.nm.148-188-172-168.nip.io to log in</span><span id="c2b2" class="mw lu iq np b gy oa nu l nv nw">creating default network (10.101.0.0/16)</span><span id="bd73" class="mw lu iq np b gy oa nu l nv nw">creating default key</span><span id="01be" class="mw lu iq np b gy oa nu l nv nw">configuring netmaker server as ingress gateway</span><span id="c8d9" class="mw lu iq np b gy oa nu l nv nw">finished configuring server and network. You can now add clients.</span><span id="dae9" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">For Linux and Mac clients, install with the following command:</strong></span><span id="6535" class="mw lu iq np b gy oa nu l nv nw">curl -sfL https://raw.githubusercontent.com/gravitl/netmaker/develop/scripts/netclient-install.sh | sudo KEY=eyaJjbb3JcaiaaefI6IjE0N5y4xOa6aDeIeuMTcyaaLjaE2OCIsImFwaWNviJhcGkubm0uMTQ3LTE4Maefi0xNzItMTY4Lm5pcC5pbaDMiLCJhcGloba3NaefiYXBpLm5tLjEa0Ny0xODItMTsrgaBjd2dwb3J0IjoiIiwiZ3JwY3dncHViasrgiIiwiZ3JwaY3dnZW5kxfahiOiIaifQ== sh -</span><span id="320f" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">For Windows clients, perform the following from powershell, as administrator:</strong></span><span id="e599" class="mw lu iq np b gy oa nu l nv nw">1. Make sure WireGuardNT is installed - https://download.wireguard.com/windows-client/wireguard-installer.exe</span><span id="c43f" class="mw lu iq np b gy oa nu l nv nw">2. Download netclient.exe - wget https://github.com/gravitl/netmaker/releases/download/latest/netclient.exe</span><span id="56b6" class="mw lu iq np b gy oa nu l nv nw">3. Install Netclient - powershell.exe .\netclient.exe join -t eyaJjbb3JcaiaaefI6IjE0N5y4xOa6aDeIeuMTcyaaLjaE2OCIsImFwaWNviJhcGkubm0uMTQ3LTE4Maefi0xNzItMTY4Lm5pcC5pbaDMiLCJhcGloba3NaefiYXBpLm5tLjEa0Ny0xODItMTsrgaBjd2dwb3J0IjoiIiwiZ3JwY3dncHViasrgiIiwiZ3JwaY3dnZW5kxfahiOiIaifQ==</span><span id="ec12" class="mw lu iq np b gy oa nu l nv nw">4. Whitelist C:\ProgramData\Netclient in Windows Defender</span><span id="6170" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">For Android and iOS clients, perform the following steps:</strong></span><span id="ea92" class="mw lu iq np b gy oa nu l nv nw">1. Log into UI at dashboard.nm.147-182-172-168.nip.io</span><span id="0bcb" class="mw lu iq np b gy oa nu l nv nw">2. Navigate to "EXTERNAL CLIENTS" tab</span><span id="41ab" class="mw lu iq np b gy oa nu l nv nw">3. Select the gateway and create clients</span><span id="6ae1" class="mw lu iq np b gy oa nu l nv nw">4. Scan the QR Code from WireGuard app in iOS or Android</span><span id="7213" class="mw lu iq np b gy oa nu l nv nw">Netmaker setup is now complete. You are ready to begin using Netmaker.</span><span id="1092" class="mw lu iq np b gy oa nu l nv nw">creating vpn network (10.201.0.0/16)</span><span id="850a" class="mw lu iq np b gy oa nu l nv nw">configuring netmaker server as vpn inlet...</span><span id="70d1" class="mw lu iq np b gy oa nu l nv nw">configuring netmaker server vpn gateway...</span><span id="88f5" class="mw lu iq np b gy oa nu l nv nw">creating client configs...</span><span id="3a9b" class="mw lu iq np b gy oa nu l nv nw">finished configuring vpn server.</span><span id="e9b1" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">To configure clients, perform the following steps:</strong></span><span id="8464" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">1. log into dashboard.nm.148-188-172-168.nip.io</strong></span><span id="9bb6" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">2. Navigate to "EXTERNAL CLIENTS" tab</strong></span><span id="d13c" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">3. Download or scan a client config (vpnclient-x) to the appropriate device</strong></span><span id="7b29" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">4. Follow the steps for your system to configure WireGuard on the appropriate device</strong></span><span id="1848" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">5. Create and delete clients as necessary. Changes to netmaker server settings require regenerating ext clients.</strong></span><span id="5acc" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">Netmaker setup is now complete. You are ready to begin using Netmaker.</strong></span></pre><p id="9579" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这最后一部分(突出显示)是我们将用于我们的第一个VPN。</p><h1 id="1a58" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">个人(私人浏览)VPN</h1><p id="7313" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">正如我们前面讨论的，个人VPN允许你匿名浏览网页。通常，你会付钱给一家公司来为你托管VPN。这里，我们刚刚部署了自己的VPN服务器，所以我们将使用它。</p><p id="9e5b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过使用可选的"-v true "命令运行Netmaker安装脚本，Netmaker为我们建立了一个个人(私人浏览)VPN。我们需要做的就是遵循输出的最后步骤。</p><pre class="nj nk nl nm gt no np nq nr aw ns bi"><span id="d12c" class="mw lu iq np b gy nt nu l nv nw"><strong class="np ir">To configure clients, perform the following steps:</strong></span><span id="e143" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">1. log into dashboard.nm.148-188-172-168.nip.io</strong></span><span id="87ad" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">2. Navigate to "EXTERNAL CLIENTS" tab</strong></span><span id="e9df" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">3. Download or scan a client config (vpnclient-x) to the appropriate device</strong></span><span id="2114" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">4. Follow the steps for your system to configure WireGuard on the appropriate device</strong></span><span id="6114" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">5. Create and delete clients as necessary. Changes to netmaker server settings require regenerating ext clients.</strong></span></pre><p id="c4af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1。导航到控制面板并创建一个管理员用户。</strong></p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/f4d475864b887be099d52c8df9d4ef41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3OwsFCgk-HSfKSX-ynwbA.png"/></div></div></figure><p id="d46b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。使用您的新管理员用户登录。</strong></p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oc"><img src="../Images/ac76a21e2a20768a214aaf279defb942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IVjmrT7cDIgSPaKiZSbWAQ.png"/></div></div></figure><p id="ebc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 3。您将被带到主屏幕。单击右上角的外部客户端。</strong></p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/756008cfefe2ed4e563e07ff2c01a488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jePd-SEJIn0cshzDLo4FZQ.png"/></div></div></figure><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/311a04b405883c7c17a2e722a72f0328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUx_4-5m5ecprrbrDzqglw.png"/></div></div></figure><p id="ff2d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 4。配置客户端:</strong></p><p id="d910" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Netmaker配置了10个VPN客户端，可用于连接WireGuard。此时，您需要决定哪些设备将使用VPN。这些装置<a class="ae le" href="https://www.wireguard.com/install/" rel="noopener ugc nofollow" target="_blank">需要安装铁丝网</a>。对于我们的教程，我将从Mac连接，<a class="ae le" href="https://apps.apple.com/us/app/wireguard/id1451685025?ls=1&amp;mt=12" rel="noopener ugc nofollow" target="_blank">这意味着从苹果商店安装</a>。</p><p id="715b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦你有了应用程序，打开它，并点击“添加隧道”。然后，您可以点击“从QR码创建”，并扫描其中一个客户端的QR码(例如，vpnclient-1。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/b7898b36f0560bcc167ef58393629715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*xd-o2XEGJsMtk8DK4d53_Q.png"/></div></div></figure><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi og"><img src="../Images/0cdea4a82f703ac1894944e5b113c2b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*8Mpa385OXom7_rsSzyIiwg.png"/></div></figure><p id="7e0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">激活隧道，参观whatsmyip.org。您将看到您的IP地址现在是服务器的IP地址。恭喜你。您已经设置了自己的个人VPN。</p><p id="35c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，你准备好更进一步了吗？</p><h1 id="b16e" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">远程访问VPN</h1><p id="aa9f" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">还记得我们说过的“远程访问”VPN吗？通常，它们用于访问工作环境。但是，您可能没有权限配置您公司的网络访问控制。对于本教程，让我们假设您想要访问您的家庭网络。它实际上非常相似。</p><p id="19ae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们需要一个进入家庭网络的“网关”。这可能是路由器，也可能是网络上的设备。Netmaker还不提供对路由器的“官方”支持(尽管它可以在例如OpenWRT上运行)，所以我们将使用网络上的一个设备，即我的个人电脑。</p><p id="465d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要使用Netmaker创建网关，我们需要地址范围和要使用的本地网络接口。首先，从我的电脑上，我将检查我可以访问哪些网络:</p><pre class="nj nk nl nm gt no np nq nr aw ns bi"><span id="4d1f" class="mw lu iq np b gy nt nu l nv nw">afeiszli@alex-sys76:~$ ip route</span><span id="078c" class="mw lu iq np b gy oa nu l nv nw">default via 192.168.40.1 dev wlo1 proto dhcp metric 600</span><span id="8cbd" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">192.168.40.0/24 dev wlo1 proto kernel scope link src 192.168.40.75 metric 600</strong></span></pre><p id="01ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基于此，我的本地网络是192.168.40.0/24，我通过wlo1接口访问该网络。现在，是安装网络客户端的时候了。</p><p id="6ae5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您还记得安装时，创建了两个网络，默认网络和VPN网络。在这个设置中，我们将使用默认的网络。在安装的输出中，有一个部分包含在各种设备上安装的说明:</p><pre class="nj nk nl nm gt no np nq nr aw ns bi"><span id="b33a" class="mw lu iq np b gy nt nu l nv nw"><strong class="np ir">For Linux and Mac clients, install with the following command:</strong></span><span id="2e73" class="mw lu iq np b gy oa nu l nv nw">curl -sfL https://raw.githubusercontent.com/gravitl/netmaker/develop/scripts/netclient-install.sh | sudo KEY=eyaJjbb3JcaiaaefI6IjE0N5y4xOa6aDeIeuMTcyaaLjaE2OCIsImFwaWNviJhcGkubm0uMTQ3LTE4Maefi0xNzItMTY4Lm5pcC5pbaDMiLCJhcGloba3NaefiYXBpLm5tLjEa0Ny0xODItMTsrgaBjd2dwb3J0IjoiIiwiZ3JwY3dncHViasrgiIiwiZ3JwaY3dnZW5kxfahiOiIaifQ== sh -</span><span id="4f9d" class="mw lu iq np b gy oa nu l nv nw"><strong class="np ir">For Windows clients, perform the following from powershell, as administrator:</strong></span><span id="c130" class="mw lu iq np b gy oa nu l nv nw">1. Make sure WireGuardNT is installed - https://download.wireguard.com/windows-client/wireguard-installer.exe</span><span id="d8cf" class="mw lu iq np b gy oa nu l nv nw">2. Download netclient.exe - wget https://github.com/gravitl/netmaker/releases/download/latest/netclient.exe</span><span id="ef34" class="mw lu iq np b gy oa nu l nv nw">3. Install Netclient - powershell.exe .\netclient.exe join -t eyaJjbb3JcaiaaefI6IjE0N5y4xOa6aDeIeuMTcyaaLjaE2OCIsImFwaWNviJhcGkubm0uMTQ3LTE4Maefi0xNzItMTY4Lm5pcC5pbaDMiLCJhcGloba3NaefiYXBpLm5tLjEa0Ny0xODItMTsrgaBjd2dwb3J0IjoiIiwiZ3JwY3dncHViasrgiIiwiZ3JwaY3dnZW5kxfahiOiIaifQ==</span></pre><p id="195a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请记住，网关目前只能安装在Linux设备上。幸运的是，我的电脑运行Linux！所以我们只需运行第一个命令。</p><pre class="nj nk nl nm gt no np nq nr aw ns bi"><span id="76e9" class="mw lu iq np b gy nt nu l nv nw">curl -sfL https://raw.githubusercontent.com/gravitl/netmaker/develop/scripts/netclient-install.sh | sudo KEY=xxxxxx sh -</span><span id="54d9" class="mw lu iq np b gy oa nu l nv nw">checking dependencies...</span><span id="1b04" class="mw lu iq np b gy oa nu l nv nw">wireguard</span><span id="6445" class="mw lu iq np b gy oa nu l nv nw">wireguard is installed</span><span id="bf1a" class="mw lu iq np b gy oa nu l nv nw">no $VERSION provided, fallback to latest</span><span id="82aa" class="mw lu iq np b gy oa nu l nv nw">OS Version = Linux</span><span id="0c8f" class="mw lu iq np b gy oa nu l nv nw">Netclient Version = latest</span><span id="e37b" class="mw lu iq np b gy oa nu l nv nw">Binary = netclient</span><span id="141f" class="mw lu iq np b gy oa nu l nv nw">2021/10/31 11:42:06 [netclient] node created on remote server...updating configs</span><span id="5390" class="mw lu iq np b gy oa nu l nv nw">2021/10/31 11:42:06 [netclient] retrieving peers</span><span id="0bb6" class="mw lu iq np b gy oa nu l nv nw">2021/10/31 11:42:07 [netclient] starting wireguard</span><span id="577b" class="mw lu iq np b gy oa nu l nv nw">2021/10/31 11:42:08 [netclient] joined default</span></pre><p id="0a42" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">太好了！我们现在在网络中。转到控制面板，我们现在可以将这台机器变成一个网关。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/3e84e0bbdb11a53c2cdbf38449598335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gqIFQVW6QGKZzvhSMkwTdQ.png"/></div></div></figure><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/4f70c49c3261602fd4249698d2f084d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HgCcfD4s0GyjZn-ha94qIw.png"/></div></div></figure><p id="928d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">小图标表示机器现在是网关:</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/12d7f8a8c6201fd32dea8cf54a7ad513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B9Lse7sn8_J4qnyhUztHVA.png"/></div></div></figure><p id="e8ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，如果我在家庭网络之外添加一台新机器，它将能够访问该网络上的任何内容。例如，我在192.168.40.30上部署了一个Wordpress站点:</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/f056cdfed0b36b610ae02bd3b841d81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*rT3rSzqbXMrc3LehMFSp7Q.png"/></div></figure><p id="47ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我如何从路上进入这个网站？让我们使用外部客户端，就像我们对个人VPN所做的那样:</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/9d9b27e1351957eef49d00f7e29a994a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-_JOl0WOFTFz8f5dCUXI5w.png"/></div></div></figure><p id="c409" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们点击小加号按钮并确认，然后！</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/975894e479ec821e8c902c97251400f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ac5U7nGOk82rXBwv9_-s-g.png"/></div></div></figure><p id="40ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，像以前一样从手机连接(使用WireGuard应用程序)，然后…</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi og"><img src="../Images/03acdeede50672bab3208c947fa68563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*iOZ7YAkZ63W--3NVwisUmg.png"/></div></figure><p id="8aff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不错！我现在可以在路上访问家庭网络。</p><h1 id="f8b9" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">还有一点</h1><p id="1dbe" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">我们可以很容易地在我们的“VPN”网络上创建“家庭网关”节点，并将两者合二为一！安全访问我们的家庭网络，以及安全访问互联网。那太好了，对吧？如果你感兴趣，我将挑战你自己设置它。</p><h1 id="5d28" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">结论/第二部分</h1><p id="2cac" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">这就结束了我们关于四种VPN的教程的第1部分。订阅第二部分，了解如何配置点对点虚拟网络和网状VPN网络。那真的进入一些沉重的网络材料，并且是为更高级的用户准备的。与此同时，请在我们的<a class="ae le" href="https://gravitl.com/resources" rel="noopener ugc nofollow" target="_blank">资源页面</a>查看更多运行Netmaker的例子。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="20ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="kw">免责声明:</em></strong><em class="kw"/><a class="ae le" href="https://wireguard.com/" rel="noopener ugc nofollow" target="_blank"><em class="kw">wire guard</em></a><em class="kw">是Jason A. Donenfeld的注册商标。</em></p></div></div>    
</body>
</html>