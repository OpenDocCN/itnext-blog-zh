<html>
<head>
<title>Unikernel: between the old and the new</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">单核:新旧之间</h1>
<blockquote>原文：<a href="https://itnext.io/unikernel-between-the-old-and-the-new-5128a04ea3af?source=collection_archive---------0-----------------------#2016-09-12">https://itnext.io/unikernel-between-the-old-and-the-new-5128a04ea3af?source=collection_archive---------0-----------------------#2016-09-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/044ea23b13c8624eae0bee2434efc1b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gjtqVvE8RmLBpA5N.jpg"/></div></div></figure><h2 id="ba2e" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">回望过去</strong></h2><p id="b795" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">两周前，我发表了一篇关于容器技术和虚拟机的<a class="ae lp" href="https://www.linkit.nl/knowledge-base/207/Cloud_container_technology_The_old_and_the_new" rel="noopener ugc nofollow" target="_blank">文章</a>。我解释了这两个概念，进行了比较，并列出了使用容器技术的优点和缺点。随着容器技术的出现，一种新的虚拟化正在出现:<a class="ae lp" href="https://en.wikipedia.org/wiki/Unikernel" rel="noopener ugc nofollow" target="_blank">单内核</a>。</p><p id="d33e" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">快速回顾一下:容器是应用程序大小的虚拟化，它与其他容器共享操作内核。它会影响某些应用程序的便携性、安全性和适用性。尽管虚拟机更安全，但它们在调配和同时使用更多计算资源时速度较慢。</p><p id="eb24" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">另一方面，单核则介于两者之间。它们的应用程序大小类似于容器，但使用独特的内核和操作系统，就像虚拟机一样。它们是包含库操作系统的映像，可以直接在<a class="ae lp" href="https://en.wikipedia.org/wiki/Hypervisor" rel="noopener ugc nofollow" target="_blank">管理程序</a>上运行。</p><h2 id="6203" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">单核、虚拟机和容器是竞争还是填补各自的空白？</strong></h2><p id="2ffb" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">在上一篇文章中，我已经证明了容器的供应速度更快，可伸缩，并且可以共享资源。像容器一样，单核体积小，特别适合某些任务。</p><p id="5ad2" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">虽然我在上一篇文章中说过微服务适合容器化，但unikernels更是如此。这是因为容器仍然共享它们的内核，而unikernels不共享，共享内核仍然会带来某些组织无法接受的风险。unikernel由一堆系统库、运行在hypervisor上的语言运行时层以及应用程序组成。因此，即使你把它比作一个容器，它也是由最少量的组件组成的。</p><p id="3902" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">它不是传统的操作系统，因为操作系统是由unikernel自带的库的组件“组装”而成的。这可以通过一种<a class="ae lp" href="https://en.wikipedia.org/wiki/Type_safety#Type-safe_and_type-unsafe_languages" rel="noopener ugc nofollow" target="_blank">类型安全语言</a>来完成，并允许选择库组件，将代码足迹减少到单一语言。一个单一的、紧凑的和检查良好的代码减少了疏忽的风险、语言的数量和不必要的大量代码，从而提高了安全性。这些组件被组装成一个直接在虚拟机管理程序上运行的可引导映像。这些特征导致了这样一个事实，即单核运行在一个单一的地址空间，没有其他相关的进程，就像传统操作系统那样。</p><p id="dd69" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">因为没有进程，所以当前环境不支持调试。然而<a class="ae lp" href="https://www.linkedin.com/in/larskurth" rel="noopener ugc nofollow" target="_blank"> Lars Kurth </a>认为这个问题可以通过构建适当的接口来连接调试应用程序或包来解决。当前的这个主要缺点阻碍了unikernel实现其潜力，因为调试是任何应用程序环境的基本组成部分。解决方案是从库中完全更改或更新包，并希望用户不要再现该错误。在大多数单核中使用的单一编程语言在未来是一个缺点还是一个优点，仍然存在争议。</p><p id="2f3a" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">另一个不便之处是，为每次不同的运行设置所有需要的模块和服务需要一些时间。但是，一旦被选中，它在资源调配方面比容器快得多，并且使用的资源也更少。正如我在上一段中提到的，这不同于具有默认设置的容器。下面这张来自<a class="ae lp" href="http://www.forbes.com/sites/janakirammsv/2016/01/26/unikernels-the-shiny-new-object-in-the-cloud/#46a144d93b6f" rel="noopener ugc nofollow" target="_blank"> Forbes </a>的图更清晰的说明了这种区别，块越大消耗的资源越多或者说<em class="lv">能够</em>消耗的资源越多。这三个类别都有相同的资源，但在不同的类别中使用方式不同。您可以看到每个应用程序都减少了库和操作系统组件所需的计算资源。它也不像容器那样共享内核。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/58366864241cc5859d8588ac9002f900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/0*tXDCIJMH8j9hyXyv.png"/></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">图1<a class="ae lp" href="http://www.forbes.com/sites/janakirammsv/2016/01/26/unikernels-the-shiny-new-object-in-the-cloud/#46a144d93b6f" rel="noopener ugc nofollow" target="_blank">福布斯</a>云上闪亮的新物体</figcaption></figure><p id="6373" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">uni kernel很容易扩展，需要最少的计算资源，而且由于uni kernel的紧凑特性，它们比容器相对更安全，供应速度也快得多。</p><p id="4e24" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated">在关于容器技术的文章中，我通过一个显示裸机、虚拟机和容器的平均调配时间的<a class="ae lp" href="/files/article/uploads/Virtualization_decoupled_provisioning_from_hardware_deployment._Containers_decouple_provisioning_from_OS_deployment_and_boot-up_by_.png" rel="noopener ugc nofollow" target="_blank">图</a>说明了调配时间的差异。分别是8-24小时，5-10分钟，5-10秒。单核的平均时间是几百毫秒的<a class="ae lp" href="http://unikernel.org/files/2015-nsdi-jitsu.pdf" rel="noopener ugc nofollow" target="_blank"/>。随着时间成为微服务或大型服务的关键组成部分的一个重要因素，单核是正确的选择！</p><h2 id="4066" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">利弊</strong></h2><p id="a553" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">为了加深您对何时使用单核，何时不使用单核的理解，这里列出了利弊。</p><p id="cd61" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated"><strong class="kw ir">优点:</strong></p><ul class=""><li id="f328" class="mf mg iq kw b kx lq lb lr kh mh kl mi kp mj lo mk ml mm mn bi translated"><em class="lv">安全性:</em>通过使用单一类型安全语言而不是多种语言和大量未使用的代码来减少代码占用，从而提高安全性。</li><li id="ea1e" class="mf mg iq kw b kx mo lb mp kh mq kl mr kp ms lo mk ml mm mn bi translated"><em class="lv">引导时间:</em>由于代码占用空间减少，库操作系统和单一语言的引导时间减少到只有几毫秒。</li><li id="0fc9" class="mf mg iq kw b kx mo lb mp kh mq kl mr kp ms lo mk ml mm mn bi translated"><em class="lv">库操作系统:</em>单内核的类型安全语言和设置支持库操作系统，将操作系统简化为应用程序运行所需的组件<em class="lv">。</em></li></ul><p id="fec7" class="pw-post-body-paragraph ku kv iq kw b kx lq kz la lb lr ld le kh ls lg lh kl lt lj lk kp lu lm ln lo ij bi translated"><strong class="kw ir">缺点:</strong></p><ul class=""><li id="e7d8" class="mf mg iq kw b kx lq lb lr kh mh kl mi kp mj lo mk ml mm mn bi translated"><em class="lv">可用性:</em>以目前unikernel的新颖状态，目前只适合微服务。</li><li id="3b55" class="mf mg iq kw b kx mo lb mp kh mq kl mr kp ms lo mk ml mm mn bi translated"><em class="lv">灵活性:</em>要求提前安装库操作系统，如果需要不同的服务，必须提供完全不同的软件包。</li><li id="fc4e" class="mf mg iq kw b kx mo lb mp kh mq kl mr kp ms lo mk ml mm mn bi translated"><em class="lv">生产:</em>尚不可用于生产环境，这是因为单核的新颖特性导致无法调试<em class="lv">。</em></li></ul></div></div>    
</body>
</html>