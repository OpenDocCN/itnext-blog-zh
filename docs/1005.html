<html>
<head>
<title>Sweet and easy CSS-in-JS with Electron-css</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">甜蜜而简单的CSS-in-JS与电子CSS</h1>
<blockquote>原文：<a href="https://itnext.io/stop-using-css-in-js-and-welcome-proper-styling-in-js-with-electron-css-d28536ba3e85?source=collection_archive---------3-----------------------#2018-07-03">https://itnext.io/stop-using-css-in-js-and-welcome-proper-styling-in-js-with-electron-css-d28536ba3e85?source=collection_archive---------3-----------------------#2018-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/fabf11400d65069776537e03c37d0cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*mFrEHEeps0yIhUmCpR7Ysg.gif"/></div></figure><p id="ade2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi kv translated">你可能听说过CSS-in-JS，因为它在过去的几年里已经成为一种害羞的趋势。不计其数的库涌现出来，然而我们似乎仍然无法在流行的开发场景中扎根这个概念。我现在告诉你:感谢上帝。为什么我对CSS-in-JS如此不满？嗯，很简单:是CSS。我以为我们在写Javascript？</p><p id="8f7f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我对所有这些库的主要问题是工作完成了一半的感觉。我们开始将CSS实践转换成一些Javascript pragma，但是中途我们变懒了，所以让我们将选择器放在JSON对象中，这样就可以了。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><figure class="ll lm ln lo gt ju"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">我看不像Javascript！</figcaption></figure><p id="6ea0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">框架试图解决这个问题，今天我写这篇文章来展示我自己的替代方案:电子css。设计框架的黄金法则是:没有字符串，没有选择器。你做的任何事情要么是函数，要么是常数。下面是一个可能的例子:</p><figure class="ll lm ln lo gt ju"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">多一点Javascript-y</figcaption></figure><p id="2502" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">本文将为您提供有效使用电子CSS的基本工具，使其尽可能接近真实的Javascript代码，而不会突然将难看的CSS字符串注入到您的代码中！</p><p id="fa3f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">来秀一下爱:【https://github.com/azukaar/electron-css】T2</p><h1 id="25e1" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">入门指南</h1><p id="8cf4" class="pw-post-body-paragraph jx jy it jz b ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku im bi kv translated">T4:你准备好开始了吗？穿上你最喜欢的编码服，弹出你最好的编辑器，打开你的终端，安装电子css:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="47ba" class="ne lx it na b gy nf ng l nh ni">npm install electron-css</span></pre><p id="f626" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">那很容易！现在让我们将它包含在我们的项目中。在这里您有多种选择，您可以导入它并使用webpack/parcel来构建您项目(如果您使用React，您可能每天都这样做！).或者你可以给HTML页面添加一个<script>标签。如果你懒得设置任何东西，你也可以使用我已经为你设置好的小提琴(使用“在JSFiddle中编辑”按钮) :&lt;/root&gt;</script></p><figure class="ll lm ln lo gt ju"><div class="bz fp l di"><div class="nj lq l"/></div></figure><h1 id="9929" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">基本概念</h1><p id="6f19" class="pw-post-body-paragraph jx jy it jz b ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku im bi kv translated">让我们快速回顾一下电子css如何工作的一些基本概念。这个库的第一个入口点是CSS()函数。它所做的是创建一个随机生成的类名，匹配你传入的CSS。这个类名将存储在一个内部样式表中，一旦使用完毕，最终可能会被内部垃圾收集器删除。如果您尝试console.log它，它将返回一个实现toString()函数的更复杂的对象。</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="2672" class="ne lx it na b gy nf ng l nh ni">const myClass = CSS({<br/>  color: 'red'<br/>});</span></pre><p id="fb32" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">一旦你这样做了，你就可以在任何你喜欢的模板/框架系统中自由地使用类名作为字符串。</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="a599" class="ne lx it na b gy nf ng l nh ni">document.body.innerHTML = `&lt;div class="${myClass}"&gt;&lt;/div&gt;`;</span></pre><h1 id="b188" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">体系结构</h1><p id="b5dc" class="pw-post-body-paragraph jx jy it jz b ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku im bi translated">有两种存储类的方法。首先，如果组件中只有几个类，建议将它们存储在与JS代码相同的文件中。如果您的样式变得太大而不适合您的文件，这可能意味着您需要将代码分成多个组件。在那些例子中，有些语法你可能不熟悉，我将在后面详细描述它们。</p><p id="543e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您真的觉得有必要，您也可以从另一个JS文件中导出这些类，这在为您的应用程序定义布局或主题时非常有用。这样做的时候，建议使用命名约定<code class="fe nk nl nm na b">xxx.style.js</code>来识别组件旁边的样式文件，或者如果它们是全局文件，将它们放在ui/文件夹中，这样就可以用<code class="fe nk nl nm na b">import theme from '../ui/theme'</code>轻松导入它们。</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="0917" class="ne lx it na b gy nf ng l nh ni">// ui/layout.js</span><span id="1bcb" class="ne lx it na b gy nn ng l nh ni">import {CSS} from 'electron-css';</span><span id="069b" class="ne lx it na b gy nn ng l nh ni">const singleColumn = CSS({<br/>  with: '100%'<br/>});</span><span id="1f09" class="ne lx it na b gy nn ng l nh ni">const doubleColumn = CSS({<br/>  with: '50%'<br/>});</span><span id="8340" class="ne lx it na b gy nn ng l nh ni">export {<br/>  singleColumn,<br/>  doubleColumn<br/>};</span></pre><p id="c764" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">对于主题文件:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="930c" class="ne lx it na b gy nf ng l nh ni">// ui/theme.js<br/>import {CSS, color} from 'electron-css';</span><span id="4b92" class="ne lx it na b gy nn ng l nh ni">const mainColor = color.red;<br/>const secondaryColor = color.darken(mainColor, 0.2);</span><span id="91f1" class="ne lx it na b gy nn ng l nh ni">const mainBorderStyle = [secondaryColor, 'solid', '1px'];</span><span id="3aa0" class="ne lx it na b gy nn ng l nh ni">export {<br/>  mainColor,<br/>  secondaryColor,<br/>  mainBorderStyle<br/>};</span></pre><p id="d3ce" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">另一件要注意的事情是对象的命名。在CSS中通常建议命名你的元素而不是描述它们(例如:创建一个. title类而不是. boldAndTall类)。因为我们现在在JS中，你需要重新考虑这个命名规则。拇指的一般规则是:像命名函数一样命名类对象，去掉动词(make/get/set/etc……)。例如，在CSS中你可能会创建一个<code class="fe nk nl nm na b">.highlighted</code>类，在JS中，你会想把你的对象命名为<code class="fe nk nl nm na b">highlight</code>作为一个动作动词(而不是像函数一样命名为<code class="fe nk nl nm na b">setHighlighted</code>)。</p><p id="8dab" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">创建行动类，以便不重复自己太频繁。在CSS中，创建太多的类并管理它们是很麻烦的，但是在JS中，范围和导入使它变得很容易，所以创建尽可能多的类。</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="b094" class="ne lx it na b gy nf ng l nh ni">// bad</span><span id="b11d" class="ne lx it na b gy nn ng l nh ni">.button {<br/>  width: 50px;<br/>  height: 20px;<br/>  color: blue;<br/>}</span><span id="559c" class="ne lx it na b gy nn ng l nh ni">.largeButton {<br/>  width: 150px;<br/>  height: 20px;<br/>  color: blue;<br/>}</span><span id="c52b" class="ne lx it na b gy nn ng l nh ni">// good</span><span id="fae4" class="ne lx it na b gy nn ng l nh ni">const<br/>element = CSS({<br/>  width: '50px',<br/>  height: '20px'<br/>}),<br/>mainColor = CSS({<br/>  color: blue<br/>}),<br/>large = CSS({<br/>  width: '150px'<br/>})<br/>;</span></pre><p id="e0dc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您可能希望从layout.js中导出“large”和“element ”,从theme.js中导出“mainColor ”,以便重用它们。它们不被称为button的事实也使得它们在语义上更容易重用。</p><p id="0a27" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您最不想关心的是避免选择器组合。它们应该在CSS中帮助确定对象的范围(例如样式。列表在里面。文章将防止所有其他列表样式相同)。但是在这里，我们不再使用选择器:你不需要组合。在电子学中，你永远不要试图去做:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="a4c8" class="ne lx it na b gy nf ng l nh ni">const article = CSS({<br/>  ...,<br/>  '.list': {</span><span id="a235" class="ne lx it na b gy nn ng l nh ni">  }<br/>}</span></pre><p id="62da" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你需要在两个独立的对象中创建文章和列表，如果你有其他列表也没关系，因为它们会在其他范围内(谢谢JS！).</p><h1 id="a943" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">JS语法，请多JS！</h1><p id="8d2f" class="pw-post-body-paragraph jx jy it jz b ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku im bi translated">在前面的例子中，我试图混合CSS/JS语法一点，不要太快失去每个人，但从现在开始，我们将学习如何编写纯JS样式，并坚持下去！</p><p id="25df" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这里的经验法则是永远不要使用任何字符串。为什么？因为字符串不是Javascript:它们迫使您使用令人讨厌的字符串连接、引号转义，并且在出现错误时会导致无法检测的问题。</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="2b56" class="ne lx it na b gy nf ng l nh ni">// bad<br/>const large = CSS({<br/>  width: (myWidth * 2) + 'px'<br/>});</span><span id="784c" class="ne lx it na b gy nn ng l nh ni">// good <br/>const large = CSS({<br/>  width: px(myWidth * 2)<br/>});</span></pre><p id="659a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">对于错误</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="c52e" class="ne lx it na b gy nf ng l nh ni">// will not trigger any error<br/>const highlight = CSS({<br/>  color: 'yelow'<br/>});</span><span id="4bcd" class="ne lx it na b gy nn ng l nh ni">// error : color is undefined, line 2<br/>const highlight = CSS({<br/>  color: color.yelow<br/>});</span></pre><p id="edcd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">下面是在代码中使用这些助手时要遵循的基本结构:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="e088" class="ne lx it na b gy nf ng l nh ni">import {CSS, units, color, constants} from 'electron-css';<br/>const {px, pct} = units;<br/>const {margin, borderStyle} = constants;</span></pre><p id="6a62" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">使用JS解构，我们可以得到一个漂亮的语法，在你的代码中展示你需要的助手。</p><figure class="ll lm ln lo gt ju"><div class="bz fp l di"><div class="nj lq l"/></div></figure><p id="d982" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">正如您可能已经注意到的，为了防止对像边框或背景这样的组合规则使用字符串连接，electron-css允许您对任何规则使用数组:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="8fe0" class="ne lx it na b gy nf ng l nh ni">border : [color.red, px(1), borderStyle.solid]</span></pre><p id="78ba" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">请参考这里的文档:<a class="ae lv" href="https://github.com/azukaar/electron-css#more-js-please-" rel="noopener ugc nofollow" target="_blank">https://github.com/azukaar/electron-css#more-js-please-</a>阅读框架中所有可用的助手。无论您使用关键帧、渐变还是mediaqueries，您都不需要任何字符串！</p><h1 id="8a1f" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">测试和发布您的代码</h1><p id="9f75" class="pw-post-body-paragraph jx jy it jz b ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku im bi translated">正如你可能想到的，在你的风格中使用这么多JS意味着你没有权利在一个单独的文件中发布你的CSS。除非您从*.style.js文件中显式导出了所有样式(您可以单独捆绑这些样式),否则完全可以按原样发布这些样式。</p><p id="1ae7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">测试时必须注意:因为类名是随机的，所以它们会扰乱您的快照测试。如果你愿意使用Jest快照，请参考这里的文档，以便使用可预测的类名:【https://github.com/azukaar/electron-css#snapshot-tests】T2</p><h1 id="5c57" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">结论</h1><p id="dde7" class="pw-post-body-paragraph jx jy it jz b ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku im bi translated">我希望这篇文章让你想要接近适当的js风格，而不是使用css-in-js，这不会改善你的代码，甚至在许多方面使它变得笨拙。电子css仍然很年轻，我很高兴收到任何反馈/想法，以推动它朝着正确的方向发展。非常感谢你的阅读。</p><p id="2b57" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">参观:【https://github.com/azukaar/electron-css T4】</p></div></div>    
</body>
</html>