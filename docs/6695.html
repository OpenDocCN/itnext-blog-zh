<html>
<head>
<title>Replace Docker Desktop with lima</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用lima替换Docker桌面</h1>
<blockquote>原文：<a href="https://itnext.io/replace-docker-desktop-with-lima-88ec6f9d6a19?source=collection_archive---------0-----------------------#2022-02-01">https://itnext.io/replace-docker-desktop-with-lima-88ec6f9d6a19?source=collection_archive---------0-----------------------#2022-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/826a86ba17900b5b6157e560ededcaee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lsdrLSAke6XI2cVm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@domenicoloia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">多梅尼科·洛亚</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="bcb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">终于到了我们不得不抛弃这个名为Docker Desktop的渴求更新的工具的那一天。</p><p id="f5c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最初的目标是从Docker桌面转移，但仍然兼容我每天使用的所有Makefiles和构建。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="411b" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">尝试波德曼</h1><p id="37ff" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">Podman的文档看起来很有前途，它实现了所有的docker命令，并带有一个Linux VM。</p><p id="4478" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单的brew安装和几个命令就足够了。第一天，我意识到一个令人悲伤的事实，这是我通常不会想到的。Docker desktop会在Linux虚拟机上自动挂载一些路径，比如Home文件夹。<br/>有一个问题在讨论如何在波德曼<a class="ae kc" href="https://github.com/containers/podman/issues/8016" rel="noopener ugc nofollow" target="_blank">https://github.com/containers/podman/issues/8016</a>上挂载卷，似乎维护者会在4.0版本上添加，但我今天需要一个Docker桌面替换。</p><h1 id="3ca0" class="li lj iq bd lk ll mp ln lo lp mq lr ls lt mr lv lw lx ms lz ma mb mt md me mf bi translated">利马来救援了</h1><p id="87be" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">当我偶然发现这个项目时，我几乎要放弃购买Docker桌面的许可了。<br/><a class="ae kc" href="https://github.com/lima-vm/lima" rel="noopener ugc nofollow" target="_blank">https://github.com/lima-vm/lima</a></p><p id="53b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它拥有一切，自动卷安装，端口转发，并支持英特尔和M1 CPU。</p><p id="afd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我计划让Lima管理一个运行Docker服务器的VM，并将套接字暴露给我的Mac。</p><p id="83cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">安装Lima </strong></p><p id="4668" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ml mm mn mo b">brew install lima docker docker-credential-helper</code></p><p id="6bf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">启动Lima的虚拟机</strong></p><p id="9adc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">项目存储库中有许多例子可以用来启动Linux虚拟机。我们将使用Docker一号。<br/>T20】https://github . com/Lima-VM/Lima/blob/master/examples/docker . YAML</p><p id="d15f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与存储库上的目录相比，我所做的唯一更改是将主目录设置为可写的。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">运行Docker的Lima虚拟机配置</figcaption></figure><p id="b6c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以将这个片段复制到一个名为<code class="fe ml mm mn mo b">docker.yaml</code>的文件中。<br/>运行<code class="fe ml mm mn mo b">limactl start docker.yaml</code></p><p id="8f13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，它会打印最后的设置步骤，然后您就可以享受半无障碍docker体验。</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="9766" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">跑完最后几步，你就可以开始了。</p><p id="2d0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我可以回去继续我的项目，而不用担心我的目录安装在哪里。</p><p id="7b7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你对<code class="fe ml mm mn mo b">docker login</code>有什么问题。确保在您的<code class="fe ml mm mn mo b">~/.docker/config.json</code>上，您已经将凭证存储设置为使用Mac OS钥匙链<code class="fe ml mm mn mo b">"credsStore": "osxkeychain"</code></p></div></div>    
</body>
</html>