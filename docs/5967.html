<html>
<head>
<title>Android parse JSON Key dynamically</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android动态解析JSON密钥</h1>
<blockquote>原文：<a href="https://itnext.io/android-parse-json-key-dynamically-2504e46b39f7?source=collection_archive---------4-----------------------#2021-07-14">https://itnext.io/android-parse-json-key-dynamically-2504e46b39f7?source=collection_archive---------4-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4b55722b50f3562a77ad121986d8ba99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2vDWkhmwfkESwlAhXV9D8w.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">JavaScript对象符号</figcaption></figure><p id="4668" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">JSON代表JavaScript对象符号。它是一种独立的数据交换格式，是XML的最佳替代品。回顾一下，JSON文件有四个主要组成部分:JSON数组、JSON对象、键和值。通常，我们需要获取指定键的值。但是密钥有时候是至关重要的，你需要像一些货币兑换API一样获取它。在本文中，我们将通过两个例子来了解如何动态解析一个键。</p><p id="653b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">首先，用值:</strong>解析JSON键</p><p id="731f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在第一个例子中，我们需要得到货币代码，这是关键。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi la"><img src="../Images/c1b465e624623fcfd6ae63b265a15994.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*Q-8Cslv4cxNNxLJEYyTfwA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">用值解析JSON键</figcaption></figure><p id="1e38" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上图中，货币代码在红框内，旁边的双精度值是它们的汇率。因此，要为它创建我们的模型类，您将定义一个String映射作为键，double作为表示货币代码及其汇率的值。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="4e56" class="lk ll iq lg b gy lm ln l lo lp">@SerializedName(“rates”) <br/>val rates: Map&lt;String, Double&gt;,</span></pre><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="db37" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">货币代码= &gt;关键字(字符串)</p><p id="4cdf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">货币汇率= &gt;值(双精度)</p><p id="02a0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要在适配器中访问它们，必须定义变量对</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="e23d" class="lk ll iq lg b gy lm ln l lo lp">val currentRate: Pair&lt;String, Double&gt; = getItem(position)<br/>val currencyCode = currentRate.first    // code<br/>val currencyRate = currentRate.second   // rate</span></pre><p id="3f14" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这个映射的每一项都是一对字符串键和双精度值。因此，您可以将所有项目作为一个列表或集合，并将它们发送到适配器并显示它们。</p><p id="d6dc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">其次，解析JSON嵌套键及其值</strong></p><p id="25ef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你的值是另一个对象，并且你想要它的键和值，<br/>你应该创建一个字符串映射作为键，另一个映射作为值。这意味着您需要获得嵌套的键，并且您应该创建一个字符串映射作为键，另一个映射作为值。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/5abc7225bc3b56ab4ca2c6cc86f7c86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*6-iOWTmRQAzKy-cusklM_A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">用值解析JSON嵌套键</figcaption></figure><p id="819e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上图中，您的关键字是红框中的日期，您的值是货币代码和汇率，它们将由另一个地图表示。</p><p id="7de5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，为了创建我们的模型类，我们将定义一个字符串映射作为键，另一个映射作为值。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="353e" class="lk ll iq lg b gy lm ln l lo lp">@SerializedName(“rates”) <br/>val rates: Map&lt;String, Map&lt;String, Double&gt;&gt;,</span></pre><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="955b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">key (String)= &gt;日期</p><p id="28a1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">价值(ِAnother地图)</p><p id="528f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">货币代码= &gt;关键字(字符串)</p><p id="5711" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">货币汇率= &gt;值(双精度)</p><p id="a9c3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要在您的活动中访问它们，您需要观察数据并获取它。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="d071" class="lk ll iq lg b gy lm ln l lo lp">val response = data.rates</span><span id="807d" class="lk ll iq lg b gy lt ln l lo lp">val dates = response.keys<br/>val codes = response.values.keys <br/>val rates= response.values.values</span></pre><p id="f5f9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是这一概念的两个例子，可以帮助您在高级和复杂的API中解析JSON。分别在我的app <a class="ae lu" href="https://github.com/Marwa-Eltayeb/CurrencyExchange" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">货币兑换</strong> </a> <strong class="ke ir">中实现。因此，请在您的应用程序中享受使用它们的乐趣。</strong></p><p id="73e2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">编码快乐！</p><p id="3193" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">更多文章:点击<a class="ae lu" href="https://marwa-eltayeb.medium.com/" rel="noopener"> <strong class="ke ir">此处</strong> </a></p><p id="6bb8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">在</strong><a class="ae lu" href="https://github.com/Marwa-Eltayeb" rel="noopener ugc nofollow" target="_blank">GitHub</a>|<a class="ae lu" href="https://www.linkedin.com/in/marwa-eltayeb/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lu" href="https://twitter.com/Marwa_Eltayeb1" rel="noopener ugc nofollow" target="_blank">Twitter</a>上找我</p></div></div>    
</body>
</html>