<html>
<head>
<title>5 Things I love about Strapi, a Node.js headless CMS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我喜欢Strapi的5点，一个Node.js无头CMS</h1>
<blockquote>原文：<a href="https://itnext.io/5-things-i-love-about-strapi-a-node-js-headless-cms-700b4fec544b?source=collection_archive---------0-----------------------#2021-05-19">https://itnext.io/5-things-i-love-about-strapi-a-node-js-headless-cms-700b4fec544b?source=collection_archive---------0-----------------------#2021-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="ac59" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">构建高质量的REST和GraphQL APIs很难。但是有一种简单的方法可以在几分钟内开始。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/99f31236cdbe5713a5006c64b3404eb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46ZZo65XZD-ffJLbGs38xg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">约翰·贝克在<a class="ae le" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d5bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一年前，我开始为一个非常受欢迎的网站开发后端。我尝试过不同的方法、不同的技术，甚至不同的编程语言。然后我开始寻找一个可以帮我轻松集成几个功能的CMS…但是找不到让我满意的CMS。然后我发现了<a class="ae le" href="https://strapi.io/" rel="noopener ugc nofollow" target="_blank"> Strapi </a>，一个惊人的开源无头CMS，拥有我所寻找的一切。我不打算深入回顾它；我想重点谈谈我喜欢这款出色的CMS的五点:</p><h1 id="a026" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">1)不到2分钟即可开始</h1><p id="8f9d" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">当我开始用CMS建立网站时，我从WordPress开始。我一直认为，“没有比开始使用CMS更简单的方法了！”嗯…我完全错了！有了Strapi，一分半钟就能上手！</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="1a39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在您可能想知道:“好极了，但是我如何设置我的数据库连接呢？”。惊人的问题！在Strapi中，您有三种不同的环境:开发、试运行和生产。默认情况下(在开发环境中)，Strapi将建立一个SQLite连接，因此您不需要仅仅为了开发过程而启动一个MongoDB/Postgres/MySQL实例！我为什么提到这三个数据库？因为Strapi是数据库无关的。您可以轻松地从一个数据库切换到另一个数据库(我们实际上在这个网站上从Postgres迁移到MySQL只用了15分钟！).</p><p id="4360" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你不喜欢默认的数据库连接？没关系；您可以如下引导您的新Strapi实例:</p><pre class="kp kq kr ks gt mk ml mm mn aw mo bi"><span id="0789" class="mp lg it ml b gy mq mr l ms mt">npx create-strapi-app</span></pre><p id="abaa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个提示将要求您提供建立数据库连接所需的所有信息。当您准备在staging中测试您的Strapi实例时，您可以只为该特定环境指定一个数据库连接(对于生产环境也是如此)！相当牛逼！</p><h1 id="ccd3" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">2)开箱即用的GraphQL</h1><p id="46e5" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">GraphQL是一项了不起的技术。不久前，我已经在“<a class="ae le" href="https://medium.com/openmindonline/js-monday-12-building-a-graphql-server-c8741684f203" rel="noopener">编写GraphQL服务器</a>”一文中提到过。许多CMS公开了GraphQL APIs，但只有少数是完全免费和开源的。一开始，我只是想测试一下Strapi的功能，GraphQL插件让我大吃一惊！您可以从后台安装它，并且您将准备好在30秒内运行您的查询！</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mu mj l"/></div></figure><p id="dff6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我保证，这些GraphQL查询的质量会让你大吃一惊！绝对是我见过的最简单和高质量的GraphQL界面。</p><h1 id="aa52" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">3)权限</h1><p id="be47" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">当您构建API时，您可能需要将它们的访问权限限制在特定的用户组。例如，您可能有一些必须保护且不能公开共享的敏感数据。Strapi使用其令人惊叹的仪表板使管理这种情况变得极其容易:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="9c87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只需几秒钟，您就可以设置数量惊人的权限规则来保护您的REST/graph QL API！但是，如何认证才能访问这些路由呢？Strapi发布了一个<a class="ae le" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> JWT令牌</a>，您可以在HTTP请求的授权头中使用它。相当惊人！</p><h1 id="a17b" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">4)关系</h1><p id="7f0c" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">处理Strapi实例中数据之间的关系非常简单。假设您正在创建自己的博客，并且有多个作者:在您的数据库中，您可能有“用户”和“文章”两个表，对吗？你将如何处理文章和作者(即“用户”)之间的关系？</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="0497" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">真的那么容易吗？是的，它是！您可以仅使用其后台办公室来处理Strapi实例内部的大量关系，这总是让我无话可说。</p><h1 id="8920" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">5)程序化</h1><p id="dfa7" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">大多数情况下，当您使用CMS时，您需要进行一些定制，以使其行为适应您的业务需求。嗯，Strapi(再一次)有一个惊人的解决方案，可以根据您的需求定制它的行为。我还没有提到，您使用Strapi backoffice定制的大多数设置都保存在文件系统的一些配置文件中。例如，我们之前已经看到，我们在数据库中创建了一个“Articles”表。如果您正在浏览Strapi文件夹中的<code class="fe mv mw mx ml b">/api/articles</code>,您将找到以下目录:</p><ul class=""><li id="123d" class="my mz it js b jt ju jx jy kb na kf nb kj nc kn nd ne nf ng bi translated">配置</li><li id="a1ca" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated">控制器</li><li id="18d7" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated">模型</li><li id="bae9" class="my mz it js b jt nh jx ni kb nj kf nk kj nl kn nd ne nf ng bi translated">服务</li></ul><p id="c19f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这可能会让您想起MVC框架…可能是因为Strapi的行为就像MVC框架一样！事实上，您可以通过API或编辑上述目录中的文件来完成相同的后台任务。例如，你想编辑你的API路由，你可以自定义<code class="fe mv mw mx ml b">/api/articles/config/routes.json</code>文件:</p><pre class="kp kq kr ks gt mk ml mm mn aw mo bi"><span id="c055" class="mp lg it ml b gy mq mr l ms mt">{<br/>  "routes": [<br/>    {<br/>      "method": "GET",<br/>      "path": "/articles",<br/>      "handler": "Articles.find",<br/>      "config": {<br/>        "policies": []<br/>      }<br/>    },<br/>    {<br/>      "method": "GET",<br/>      "path": "/articles/count",<br/>      "handler": "Articles.count",<br/>      "config": {<br/>        "policies": []<br/>      }<br/>    },<br/>    {<br/>      "method": "GET",<br/>      "path": "/articles/:id",<br/>      "handler": "Articles.findOne",<br/>      "config": {<br/>        "policies": []<br/>      }<br/>    },<br/>    {<br/>      "method": "POST",<br/>      "path": "/articles",<br/>      "handler": "Articles.create",<br/>      "config": {<br/>        "policies": []<br/>      }<br/>    },<br/>    {<br/>      "method": "PUT",<br/>      "path": "/articles/:id",<br/>      "handler": "Articles.update",<br/>      "config": {<br/>        "policies": []<br/>      }<br/>    },<br/>    {<br/>      "method": "DELETE",<br/>      "path": "/articles/:id",<br/>      "handler": "Articles.delete",<br/>      "config": {<br/>        "policies": []<br/>      }<br/>    }<br/>  ]<br/>}</span></pre><p id="0d12" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<code class="fe mv mw mx ml b">config.policies</code>中，您可以定义权限规则，允许通过身份验证调用特定的路由。您还可以通过编辑<code class="fe mv mw mx ml b">handler</code>属性来添加和定制由特定路线触发的控制器。但是在哪里为控制器编写Node.js代码呢？在<code class="fe mv mw mx ml b">/api/articles/controllers/Articles.js</code>文件里面！</p><pre class="kp kq kr ks gt mk ml mm mn aw mo bi"><span id="1c5b" class="mp lg it ml b gy mq mr l ms mt">'use strict';<br/>/**<br/> * Read the documentation (https://strapi.io/documentation/3.0.0-beta.x/concepts/controllers.html#core-controllers)<br/> * to customize this controller<br/> */<br/>module.exports = {<br/>  myNewController: async (ctx) =&gt; {<br/>    ctx.body = {<br/>      jsonResponse: true<br/>    }<br/>  }<br/>};</span></pre><p id="4c82" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Strapi构建在一个流行而强大的Node.js web框架<a class="ae le" href="http://web.archive.org/web/20210118101749/https://koajs.com/" rel="noopener ugc nofollow" target="_blank"> Koa </a>之上，所以你可能已经熟悉它的功能了！关于Strapi，我想提到的最后一点是它令人惊叹的回调系统。打开<code class="fe mv mw mx ml b">/api/articles/models/Articles.js</code>文件，您将获得一个高级回调系统，它将对您改进CMS行为有很大帮助:</p><pre class="kp kq kr ks gt mk ml mm mn aw mo bi"><span id="ab8b" class="mp lg it ml b gy mq mr l ms mt">"use strict";<br/>/**<br/> * Lifecycle callbacks for the `Articles` model.<br/> */<br/>module.exports = {<br/>  // Before saving a value.<br/>  // Fired before an `insert` or `update` query.<br/>  beforeSave: async (model, attrs, options) =&gt; {},<br/>  // After saving a value.<br/>  // Fired after an `insert` or `update` query.<br/>  afterSave: async (model, response, options) =&gt; {},<br/>  // Before fetching a value.<br/>  // Fired before a `fetch` operation.<br/>  beforeFetch: async (model, columns, options) =&gt; {},<br/>  // After fetching a value.<br/>  // Fired after a `fetch` operation.<br/>  afterFetch: async (model, response, options) =&gt; {},</span><span id="69dc" class="mp lg it ml b gy nm mr l ms mt">  // Before fetching all values.<br/>  // Fired before a `fetchAll` operation.<br/>  beforeFetchAll: async (model, columns, options) =&gt; {},<br/>  // After fetching all values.<br/>  // Fired after a `fetchAll` operation.<br/>  afterFetchAll: async (model, response, options) =&gt; {},<br/>  // Before creating a value.<br/>  // Fired before an `insert` query.<br/>  beforeCreate: async (model, attrs, options) =&gt; {},<br/>  // After creating a value.<br/>  // Fired after an `insert` query.<br/>  afterCreate: async (model, attrs, options) =&gt; {},<br/>  // Before updating a value.<br/>  // Fired before an `update` query.<br/>  beforeUpdate: async (model, attrs, options) =&gt; {},<br/>  // After updating a value.<br/>  // Fired after an `update` query.<br/>  afterUpdate: async (model, attrs, options) =&gt; {},<br/>  // Before destroying a value.<br/>  // Fired before a `delete` query.<br/>  beforeDestroy: async (model, attrs, options) =&gt; {},<br/>  // After destroying a value.<br/>  // Fired after a `delete` query.<br/>  afterDestroy: async (model, attrs, options) =&gt; {}<br/>};</span></pre><p id="c2f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，您可以定制API的每一个CRUD行为。这可能是我最喜欢的Strapi特性，因为它帮助我只用几行代码和最少的时间就实现了每个目标。</p><h1 id="27fa" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">就这些吗？</h1><p id="c177" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">当然没有！Strapi是一个令人难以置信的工程，它允许您非常快速地构建高质量的REST/graph QL API。我只是想从众多的功能中选出我最喜欢的五个特性，这些功能使Strapi成为一个完整的、可投入生产的CMS。如果你想了解更多关于Strapi的知识，你可以在这里阅读它的文档:<a class="ae le" href="https://strapi.io/documentation" rel="noopener ugc nofollow" target="_blank">https://strapi.io/documentation</a>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><a href="https://github.com/sponsors/micheleriva"><div class="gh gi nn"><img src="../Images/e05f00ed2cddfd2907284cb397168c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xAIiY1uBKSNdw12oq2BbjA.png"/></div></a></figure></div></div>    
</body>
</html>