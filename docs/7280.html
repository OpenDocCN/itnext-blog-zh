<html>
<head>
<title>5 Flutter Tips for Insane Team Productivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">疯狂团队生产力的5个技巧</h1>
<blockquote>原文：<a href="https://itnext.io/5-flutter-tips-for-insane-team-productivity-ec1b4f37f617?source=collection_archive---------1-----------------------#2022-08-09">https://itnext.io/5-flutter-tips-for-insane-team-productivity-ec1b4f37f617?source=collection_archive---------1-----------------------#2022-08-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/323efaae9cedb2248206a952f0f1cae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BzuR2225_6IiJEoFdHMjCQ.png"/></div></div></figure><h1 id="e58e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">1.定义清晰的架构并记录内部最佳实践📃</h1><p id="22d3" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">最重要的事情之一是让所有团队成员达成共识。尤其是在新团队成员入职时，可能会出现这样的问题:</p><ul class=""><li id="f912" class="lu lv iq ky b kz lw ld lx lh ly ll lz lp ma lt mb mc md me bi translated">“我需要更新设计系统，我应该在代码的哪里做？”</li><li id="2de3" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated"><em class="mf">“我们如何在业务逻辑层处理API错误？”</em></li><li id="9944" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated"><em class="mf">“我们有窗口小部件条件渲染的最佳实践吗？”</em></li><li id="ea02" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated"><em class="mf">“我应该为这个特性编写什么样的测试？”</em></li></ul><p id="b442" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">理想情况下，大多数问题应该通过您团队中的<strong class="ky ir">架构</strong>和<strong class="ky ir">最佳实践</strong>的完整文档来回答。</p><p id="ffbd" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">然而，如果您的团队仍然处于没有严格设定最佳实践和缺乏文档的阶段，我强烈建议您<strong class="ky ir">尝试下面的</strong>:</p><ol class=""><li id="ca66" class="lu lv iq ky b kz lw ld lx lh ly ll lz lp ma lt mo mc md me bi translated">与您的开发团队召开一次会议，讨论应用程序的所有不同部分— <em class="mf">从状态管理到小部件等等</em>。</li><li id="dca0" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mo mc md me bi translated">分析、研究并最终<strong class="ky ir">确定第一套指南</strong> <em class="mf">(书面形式)</em> <strong class="ky ir">您认为</strong>哪些指南<strong class="ky ir">会消除团队中<strong class="ky ir">不断出现</strong>的&amp;问题</strong>。</li><li id="9286" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mo mc md me bi translated">尝试<strong class="ky ir">将</strong>指导方针<strong class="ky ir">的第一次迭代</strong> <em class="mf">(例如在你的下一次冲刺中)</em>。</li><li id="43b9" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mo mc md me bi translated">过一会儿<strong class="ky ir">观察结果</strong>并再次与你的团队讨论有用的部分，但也尝试找出定义过于松散或不完整的部分。</li><li id="123e" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mo mc md me bi translated"><strong class="ky ir">根据需要不断重复</strong>文档。<br/>此外，不要忘记重复<em class="mf">(重构)</em>代码中一开始就有问题的部分，对于这些部分，再多的文档也无法提供足够的信息。</li></ol><p id="e73a" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">一致性是关键。一致性伴随着指导方针而来。找到并定义你的标准最佳实践，这将有助于你的团队对你的代码库的细节充满信心。</p><blockquote class="mp mq mr"><p id="e20f" class="kw kx mf ky b kz lw lb lc ld lx lf lg ms ml lj lk mt mm ln lo mu mn lr ls lt ij bi translated">提示:你可以使用免费工具，如<a class="ae mv" href="https://www.notion.so/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"/></a>来记录这些最佳实践。我也是<strong class="ky ir">建筑图</strong>的超级粉丝——以一种易于理解的视觉格式呈现建筑部分。其中一个不错的<strong class="ky ir">免费可视化工具</strong>是<a class="ae mv" href="https://www.figma.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">fig ma</strong></a><strong class="ky ir">/</strong><a class="ae mv" href="https://www.figma.com/figjam/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">fig jam</strong></a>。</p></blockquote></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="f4e6" class="jy jz iq bd ka kb nd kd ke kf ne kh ki kj nf kl km kn ng kp kq kr nh kt ku kv bi translated">2.分离业务和UI逻辑</h1><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d9ea5d9bd9161b2a625e9622225b069f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Wn4rc1baVbZqzRNAn4xEA.png"/></div></div></figure><p id="4299" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">从我的经验来看——<strong class="ky ir">这个是必须的</strong>。我敢说，如果你把业务&amp; UI逻辑纠缠在一起，保持小部件干净几乎是不可能的。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/c535bee8b15b72ed508e41ea462e2749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqNsqh3ipepBLIZpieMK2g.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">如果您的小部件中存在业务逻辑，并且您的应用程序正在增长→是时候找到状态管理解决方案了！:)</figcaption></figure><h2 id="cc7a" class="nr jz iq bd ka ns nt dn ke nu nv dp ki lh nw nx km ll ny nz kq lp oa ob ku oc bi translated">分离的好处:</h2><ul class=""><li id="3abe" class="lu lv iq ky b kz la ld le lh od ll oe lp of lt mb mc md me bi translated">使<strong class="ky ir">易于测试</strong>两个UI &amp;业务逻辑层<strong class="ky ir">分开</strong></li><li id="3f6e" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">更容易的重构</li><li id="01d7" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated"><strong class="ky ir">快速调试</strong></li><li id="a691" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated"><strong class="ky ir">更快地实施新功能</strong></li></ul><p id="c939" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">根据我个人的经验，我可以强烈推荐<a class="ae mv" href="https://pub.dev/packages/bloc" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">集团状态管理包</strong> </a>。它足够成熟和灵活，因此适用于几乎所有的使用案例。如果您害怕BLOC附带的可能的样板代码<em class="mf">(您已经听说过)</em>→您可以阅读<a class="ae mv" rel="noopener ugc nofollow" target="_blank" href="/flutter-blocs-at-scale-2-keeping-blocs-lean-1b659536e3ec"><strong class="ky ir">Flutter:BLOCs at Scale | 2—Keeping BLOCs Lean</strong></a>，其中我讨论了如何利用像可重用块这样的概念，这将减少样板代码的数量。<br/>如果你的app不需要BLOC的所有可能性，可以使用<strong class="ky ir"> Cubit </strong> <em class="mf">(包含在同一个包里)</em>。</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="6f22" class="jy jz iq bd ka kb nd kd ke kf ne kh ki kj nf kl km kn ng kp kq kr nh kt ku kv bi translated">3.将小部件的渲染功能限制在60行代码以内</h1><p id="b756" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果你的小部件是一大堆代码，你的团队将会有很大的问题。大约60行代码的限制是我最喜欢的个人准则，它迫使我和我的团队保持小部件结构良好和清晰。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c0a734972e89d14485350245875e1f39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*95kJS0nUFByQpXujKwKxWQ.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">感谢杰出的设计师Sabina mo wich(<a class="ae mv" href="https://www.behance.net/gallery/131947637/Mobile-Banking-UI-design" rel="noopener ugc nofollow" target="_blank">https://www . behance . net/gallery/131947637/Mobile-Banking-UI-design</a>)允许我使用她的设计🎨</figcaption></figure><p id="4434" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">上图展示了一个例子，说明我们如何在保持代码量最少的同时，在屏幕级别上构建我们的小部件。</p><p id="49bf" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">逻辑上</strong> <strong class="ky ir">将UI分成多个子部分</strong>和<strong class="ky ir">子部件</strong>帮助我们实现一组清晰且可维护的UI代码。</p><p id="330a" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">还在好奇为什么小部件的大小会成为这么大的问题吗？</p><ul class=""><li id="eb72" class="lu lv iq ky b kz lw ld lx lh ly ll lz lp ma lt mb mc md me bi translated">仅仅一个300多行代码的小部件就可能让评审者“精疲力尽”,以至于他可能很容易忘记他之后的深入工作。</li><li id="5e6f" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">当你连续5分钟寻找需要你编辑的代码时，实现简单的UI设计改变变得很麻烦。</li><li id="d305" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">它<strong class="ky ir">阻碍了部件的可重用性</strong>，而<strong class="ky ir">促进了代码复制</strong>。</li></ul><blockquote class="mp mq mr"><p id="cb03" class="kw kx mf ky b kz lw lb lc ld lx lf lg ms ml lj lk mt mm ln lo mu mn lr ls lt ij bi translated">提示:拥有多个小部件比拥有一个大部件要好得多。另外，<strong class="ky ir">使用类部件</strong>而不是函数(出于性能原因)。</p></blockquote><p id="e7ae" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir"> <em class="mf">注意:如果你对如何编写干净的小部件并保持你的UI代码结构化感到好奇，请务必点击我的个人资料上的关注按钮。我将很快深入讨论这个话题。</em> </strong></p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="5e51" class="jy jz iq bd ka kb nd kd ke kf ne kh ki kj nf kl km kn ng kp kq kr nh kt ku kv bi translated">4.围绕包创建API包装器</h1><p id="a3c3" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">当你阅读一个包的文档时，它通常会显示这个包的API 的<strong class="ky ir">直接用法。这让特别缺乏经验的开发人员感到困惑，因为他们认为<strong class="ky ir">在随机位置直接调用包的函数<strong class="ky ir">会污染代码库</strong>是一种好的实践</strong>。</strong></p><p id="a71c" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">只不过通常不是这样——原因如下:</p><ul class=""><li id="5163" class="lu lv iq ky b kz lw ld lx lh ly ll lz lp ma lt mb mc md me bi translated">想象一下，你想用一个类似的包来<strong class="ky ir">替换这个包——现在你需要<strong class="ky ir">重构你整个代码库的所有调用</strong>→这是一个非常平凡的&amp;容易出错的过程。</strong></li><li id="2979" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">随着时间的推移<strong class="ky ir">包会发生突破性的变化</strong>，这意味着我们需要<strong class="ky ir">改变所有代码</strong> <em class="mf">(与上述问题类似)。</em></li><li id="fce8" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">使得编写测试更加困难。</li></ul><blockquote class="og"><p id="c48c" class="oh oi iq bd oj ok ol om on oo op lt dk translated">相反，您应该选择包装服务类，它灵活且易于维护。</p></blockquote><p id="f801" class="pw-post-body-paragraph kw kx iq ky b kz oq lb lc ld or lf lg lh os lj lk ll ot ln lo lp ou lr ls lt ij bi translated"><strong class="ky ir">例如:</strong></p><p id="16ff" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">让我们假设我们想要在我们的应用程序中实现<strong class="ky ir">分析</strong>。在安装了我们选择的分析包<em class="mf">(例如</em> <code class="fe ov ow ox oy b"><em class="mf">firebase_analytics</em></code> <em class="mf"> ) </em>之后，让我们创建一个<code class="fe ov ow ox oy b"><strong class="ky ir">AnalyticsService</strong></code>包装器服务类。这样，我们可以定义自己的API，并且<strong class="ky ir">在未来的包变化方面保持灵活性</strong>。</p><p id="5ee6" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">这个类可能看起来像这样:</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oz"><img src="../Images/9f156464aa703171b922ba713cdd0362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VFjAF2dsb4LKXbmNc3Z25g.png"/></div></div></figure><p id="5924" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">包的<strong class="ky ir">直接使用</strong>与服务类的<strong class="ky ir">使用的比较:</strong></p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/4460eeae18f0830225287472302cafc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gf2-DA8RhdsmvOFy8XMkMw.png"/></div></div></figure><blockquote class="mp mq mr"><p id="4eac" class="kw kx mf ky b kz lw lb lc ld lx lf lg ms ml lj lk mt mm ln lo mu mn lr ls lt ij bi translated">提示:<strong class="ky ir">松耦合</strong>在灵活性和可扩展性方面提供了明显的好处。与长期收益相比，轻微开销的警告(这是样板代码)无关紧要。</p></blockquote></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="35b8" class="jy jz iq bd ka kb nd kd ke kf ne kh ki kj nf kl km kn ng kp kq kr nh kt ku kv bi translated">5.自动化CI/CD</h1><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/f90e70be82557fe0d3d4bc47fe3ecb9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*meJBzbKvmCAFzlvCed37Ow.png"/></div></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">最后但同样重要的是，设置CI/CD管道。</figcaption></figure><p id="7d51" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">建立一个好的<em class="mf">“实现-测试-合并-部署-发布”</em>管道非常重要。虽然每个管道看起来都有一点不同，但它们都有一个共同点，那就是当一个管道投入使用时，它每周都会为你节省几个小时的手工劳动。</p><p id="712f" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">我目前最喜欢的颤振CI/CD工具组合是<strong class="ky ir"> Github Actions +浪子。</strong>该组合使您能够轻松设计可以在不同条件下在不同分支上运行的工作流。</p><p id="81f8" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated"><strong class="ky ir">例如:</strong></p><ul class=""><li id="6e05" class="lu lv iq ky b kz lw ld lx lh ly ll lz lp ma lt mb mc md me bi translated">当你合并一个PR <code class="fe ov ow ox oy b">development &lt;-- feature</code>分支，<strong class="ky ir">你可以运行</strong> dart analyzer / linter，测试，生成文档等等。</li><li id="ccda" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">当你合并一个PR <code class="fe ov ow ox oy b">main &lt;-- development</code>分支时，你可以<strong class="ky ir">运行上面的所有步骤，增加构建/版本号</strong> + <strong class="ky ir">运行快速通道</strong>，其中<strong class="ky ir">构建</strong>发布版本，而<strong class="ky ir">将内部发布版本</strong>部署到谷歌Play商店和App Store。</li></ul><p id="7ab3" class="pw-post-body-paragraph kw kx iq ky b kz lw lb lc ld lx lf lg lh ml lj lk ll mm ln lo lp mn lr ls lt ij bi translated">所有这一切终于可以实现了，不再需要在紧张的期限内(周五晚上)进行大量手动操作。享受你的啤酒🍺🌞</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h2 id="8920" class="nr jz iq bd ka ns nt dn ke nu nv dp ki lh nw nx km ll ny nz kq lp oa ob ku oc bi translated">*谢谢你</h2><p id="b6ff" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">给每一个正在阅读这篇文章并且已经走了这么远的人。<br/>如果你想要<strong class="ky ir">更多类似</strong>的文章，请随意:</p><ul class=""><li id="0d74" class="lu lv iq ky b kz lw ld lx lh ly ll lz lp ma lt mb mc md me bi translated">💬<strong class="ky ir">评论</strong>你自己与Flutter一起工作的经历。也可以随意提出您感兴趣的主题，并认为需要更多的生产准备报道。</li><li id="fc71" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">👏<strong class="ky ir">发几个拍手</strong>。这将激励我继续分享关于颤振开发的生产准备技巧。</li><li id="79e7" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">➕ <strong class="ky ir">在我的媒体上按跟随</strong>，所以你不会错过新的提示。</li><li id="e9bd" class="lu lv iq ky b kz mg ld mh lh mi ll mj lp mk lt mb mc md me bi translated">🔗在你的社区内分享文章。</li></ul></div></div>    
</body>
</html>