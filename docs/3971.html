<html>
<head>
<title>Understanding Refs, branches and dangling commit in Git?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解Git中的引用、分支和悬空提交？</h1>
<blockquote>原文：<a href="https://itnext.io/understanding-refs-branches-and-dangling-commit-in-git-192251773c7c?source=collection_archive---------0-----------------------#2020-04-04">https://itnext.io/understanding-refs-branches-and-dangling-commit-in-git-192251773c7c?source=collection_archive---------0-----------------------#2020-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f364f99cb49801ec5f1fd7647ae096f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lcikom2XRzi0tV7902AzCg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">只是一个免费的股票图像</figcaption></figure><p id="1a86" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你有没有想过“HEAD”在git上是怎么工作的？如何分配、切换和创建分支？什么是超脱头状态？只要耐心听我说几分钟，你现在就不会为将来的事情烦恼了(如果你是个天才，从不犯错的话)。</p><p id="e440" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你理解这篇文章，你就能完全理解重置、重置和恢复的概念。</p><p id="4ff6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">一些你应该已经知道的知识</strong></p><ul class=""><li id="e4c7" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">什么是提交？(只是感觉，不是定义)</li></ul><p id="5cbb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">(如果你已经知道，跳过)提交只是保存在一个项目中的更改，每次你改变一个文件，它会通过给它分配一个唯一的哈希(随机40个字符，几乎是唯一的)来跟踪这些更改，就像你在游戏中保存的检查点，可以在任何检查点开始游戏。</p><p id="87b7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">参考文献</strong></p><blockquote class="lj lk ll"><p id="98ae" class="kc kd lm ke b kf kg kh ki kj kk kl km ln ko kp kq lo ks kt ku lp kw kx ky kz ij bi translated">引用是指向提交的指针。</p></blockquote><p id="be2c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">就是这样。但是让我们从另一个角度来看:</p><p id="1651" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">每个启用git的项目都有。git文件夹，所有脏活都在这里完成，所有关于refs的数据都存储在这里。</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/e04e933ae26f5e898fb9214a487b8587.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*m2rnCb2mFXkeeXyRmib92Q.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">参考文献</figcaption></figure><p id="2f8c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以如果你看到。git/refs存储所有引用的地方，你会发现有两种类型的引用</p><ul class=""><li id="245f" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">分支(头)</li><li id="59e9" class="la lb iq ke b kf lv kj lw kn lx kr ly kv lz kz lf lg lh li bi translated">标签(这个我就跳过了，因为如果你知道参考文献就容易了)</li></ul><p id="c183" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">他的“heads”文件夹有称为branch的引用，这里目前只有branch: <code class="fe ma mb mc md b">master</code>。</p><p id="2c77" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">那么，什么是分支呢？</strong></p><blockquote class="lj lk ll"><p id="fc69" class="kc kd lm ke b kf kg kh ki kj kk kl km ln ko kp kq lo ks kt ku lp kw kx ky kz ij bi translated">分支只是一个指向特定提交的指针。</p></blockquote><p id="db15" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们深入了解一下。我假设你知道如何在项目中提交变更(<code class="fe ma mb mc md b">git add .&amp;&amp;git commit -m "your message" </code>)。我创建了一个git启动的项目，添加了一个文件名"<em class="lm"> hello.txt "，</em>，并使用不同的消息提交它，如下所示:</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/358c985271f78c86871a00710883f222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*oLOObO64FiYUcXqlGTuBWQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">git日志</figcaption></figure><p id="5fc3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">并且这两个提交是关联的，因为最近的提交将具有作为其之前的前一个提交的父提交。这意味着:</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/c7523d7a0c8d033c2a23101d6e2292f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*_v__3lSzzXHcfIdfPBgNvw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">第二次提交的父项是第一个</figcaption></figure><p id="de1a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一个<strong class="ke ir">分支</strong>仅仅是指向其中一个提交的可移动指针。Git中默认的分支名叫做<code class="fe ma mb mc md b">master</code>。当您开始提交时，您会得到一个<code class="fe ma mb mc md b">master</code>分支，它指向您上次提交的内容。每次提交时，<code class="fe ma mb mc md b">master</code>分支指针会自动向前移动。</p><p id="d66b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以，目前<code class="fe ma mb mc md b">master</code>指向这个提交:</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/d910966d7452dc31898af77b1c88f6f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*Aq2le2ho6oF28zFueTqFaQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">状态1</figcaption></figure><p id="bb20" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">那么什么是头呢？</strong></p><p id="c087" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe ma mb mc md b">HEAD</code>git是如何知道你当前正在哪个分支工作的。这是一个指向当前分支名称的指针。当您签出一个新分支或提交一个分支时，它会自动移动。如果它在你头上，让我们实际地看它。</p><p id="cbc9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在假设我们当前的项目处于<em class="lm">状态1，如上图所示，让我们创建一个新的分支</em></p><pre class="lr ls lt lu gt mh md mi mj aw mk bi"><span id="ad2d" class="ml mm iq md b gy mn mo l mp mq">git checkout -b branch1</span></pre><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/4e783147a427e7790068878d5fd8b711.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*9djDlywrx9yp7dF_ciLwoA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我们目前有哪些分支机构</figcaption></figure><p id="0deb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们有两个分支机构。git/ref/heads。而我们现在的分支是<code class="fe ma mb mc md b">branch1</code>。</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/d3bce2ff138d1b0eb453568a76ce908f.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*jxRju8-82s5SMSvdLef4Tg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">状态2</figcaption></figure><p id="f37d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe ma mb mc md b">branch1</code>被创建，它指向与<code class="fe ma mb mc md b">master</code>所指向的相同的提交(最后一次提交)。而现在<code class="fe ma mb mc md b">HEAD</code>正指向branch1。</p><p id="165c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你想知道<code class="fe ma mb mc md b">HEAD</code>当前指向哪里，你可以通过查看“头”文件在。git文件夹。</p><pre class="lr ls lt lu gt mh md mi mj aw mk bi"><span id="5c24" class="ml mm iq md b gy mn mo l mp mq">cat .git/HEAD</span></pre><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/c41b58a13b6eaf28ecde9ae9b98ac1fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*e3K-GhYMifp_GHazT-Vsmg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">head指向存储所有引用的refs文件夹中的branch1。</figcaption></figure><p id="abef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，如果我在处理<code class="fe ma mb mc md b">branch1</code>时提交另一个工作，会发生什么？</p><pre class="lr ls lt lu gt mh md mi mj aw mk bi"><span id="871a" class="ml mm iq md b gy mn mo l mp mq">echo "change on branch1"&gt;hello.txt<br/>git add .<br/>git commit -m "commit 3"</span></pre><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/5bc3d2c4389ad54a0b1755811fe765df.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*1dnqo9vsiPgXSYMDvYtFcA.png"/></div></figure><p id="8512" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe ma mb mc md b">HEAD</code>将随其指向的当前分支移动，即<code class="fe ma mb mc md b">branch1</code>。</p><p id="b4f5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以如果我移回主位，<code class="fe ma mb mc md b">HEAD</code>也移动并指向主位，那么我们可以说:</p><blockquote class="lj lk ll"><p id="047b" class="kc kd lm ke b kf kg kh ki kj kk kl km ln ko kp kq lo ks kt ku lp kw kx ky kz ij bi translated">是一个指针，通常指向我们正在处理的当前分支，因此被证明！！(对，对！).</p></blockquote><p id="aaf6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">回到master后，您再次提交一些内容，这些内容将出现在master分支上，如下所示:</p><pre class="lr ls lt lu gt mh md mi mj aw mk bi"><span id="815f" class="ml mm iq md b gy mn mo l mp mq">git checkout master // switched to master<br/>echo "changing the master branch file"&gt;hello.txt<br/>git add . &amp;&amp; git commit -m "change content in master branch"</span></pre><p id="db65" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在这将会发生:</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/8e895dbaadc4cfab9405419740ef3948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*DED1NTw7HYZWOpFGsuXi4g.png"/></div></figure><p id="f8ab" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但是如果您想查看特定提交的内容呢？这是给你的奖金，如果你已经到达这里(谢谢！).</p><p id="40fd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">无头/脱头状态？</strong></p><p id="54ea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您想查看第一次提交的内容，那么您将检查该特定提交。</p><p id="afbb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">git会做什么，它会将<code class="fe ma mb mc md b">HEAD</code>指向提交</p><pre class="lr ls lt lu gt mh md mi mj aw mk bi"><span id="7630" class="ml mm iq md b gy mn mo l mp mq">git checkout 68c94<br/>&gt; // You are in 'detached HEAD' state...</span></pre><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/8dc71645e0e9551dc80f31844702e9b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*IhvJ0hZ2VZJ4eyd9d_WLjQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">状态5</figcaption></figure><p id="7155" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，第一次提交时的内容在“hello.txt”文件中，因为我们及时返回了！！！。你可以看到<code class="fe ma mb mc md b">HEAD</code>现在指向哪里</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/9f41ad08e6fed97a03110fbfbca44735.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*SPPP1tX42xr4Q85zU0CnIQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">标题指向提交</figcaption></figure><p id="56f0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可以通过这个回到师父那里:</p><pre class="lr ls lt lu gt mh md mi mj aw mk bi"><span id="53c6" class="ml mm iq md b gy mn mo l mp mq">git checkout master</span></pre><p id="67d5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但是如果你想在分离状态下改变一些东西并提交</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/ea9f6268f4a05b070a93ff7d606f40da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*SUIuvO7FVVq8ENWizw3lrQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">状态6</figcaption></figure><p id="9d85" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在<code class="fe ma mb mc md b">HEAD</code>将指向该提交，但是由于该提交没有任何分支引用它，并且如果我们回到主分支，该提交将被垃圾收集，因此被称为<strong class="ke ir">悬空提交</strong>。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="d8a8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢阅读这篇文章！如果你有任何疑问或任何疑问，请随时打电话给我。</p><p id="453a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我的下一篇文章将理解git的重置、复位和恢复。敬请期待！！</p></div></div>    
</body>
</html>