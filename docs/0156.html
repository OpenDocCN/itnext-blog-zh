<html>
<head>
<title>5+ Ways to Persist Data in Node.js/Electron Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js/Electron应用中保存数据的5种以上方法</h1>
<blockquote>原文：<a href="https://itnext.io/5-ways-to-persist-data-in-node-js-electron-apps-87e2aa7251f5?source=collection_archive---------0-----------------------#2017-08-30">https://itnext.io/5-ways-to-persist-data-in-node-js-electron-apps-87e2aa7251f5?source=collection_archive---------0-----------------------#2017-08-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/eb1afbb6967cfd77c896c2828c155c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n4pSChkjFIcpY7iu.png"/></div></div></figure><p id="f4f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们将探索在使用电子平台和web技术构建的跨平台桌面应用程序中保存和检索数据的不同方法，我们还将介绍如何安装所需的工具，编写一些示例代码，然后了解每种方法的优缺点。但是首先，让我们从电子入门开始，对于那些还不熟悉它的人。</p><h1 id="373c" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">电子导论</h1><p id="4c46" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">早在2013年，Github就发布了Electron，允许web开发人员使用他们现有的JavaScript、CSS和HTML前端技能，通过单一代码库为Windows、MAC和Linux构建类似原生的跨平台桌面应用程序。</p><p id="06a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Electron基于谷歌Chromium项目和Node.js平台，这意味着你拥有一个最新网络标准的嵌入式浏览器(多亏了Chromium)和整个Node.js模块，可从NPM获得，供你使用。</p><p id="a403" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于electronic基本上是一个web浏览器，你可以利用最现代的客户端框架和库，比如Angular和React，来构建不仅适用于web，也适用于桌面的应用程序。</p><p id="a230" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你对电子有任何疑问，如果它真的改变了我们开发桌面应用程序的方式，忽略大公司甚至微软都在使用它的事实(你不应该)，你可以简单地从这个<a class="ae lz" href="https://npm-stat.com/charts.html?package=electron" rel="noopener ugc nofollow" target="_blank">链接</a>查看与电子使用相关的NPM统计数据。还有正在进行的通过这个<a class="ae lz" href="https://electron.atom.io/apps/" rel="noopener ugc nofollow" target="_blank">链接</a>使用电子创建的应用程序列表</p><h1 id="dc29" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在电子应用程序中保存数据</h1><p id="4eee" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">首先，你为什么要这样做，也就是持久化数据？<br/>在大多数情况下，应用程序需要持久化数据，原因有很多，例如:</p><ul class=""><li id="58dc" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">保存用户定义的设置:存在许多应用范围的设置或参数，这些设置或参数因用户而异，因此，它们需要由最终用户来设置，并通过某种机制来保存，以避免在应用重启之间丢失它们。</li><li id="8a74" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">保存特定领域的数据:在企业应用程序等数据密集型应用程序中，数据是核心元素，因此持久化和检索是一个至关重要的特性。这种应用程序需要数据存储来跟踪信息或进行进一步的处理和分析。</li><li id="7a8a" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">添加离线支持:如果您的应用程序依赖于在线数据，并且您可能希望添加离线支持，那么您还需要集成一些机制来本地持久化数据。</li><li id="86d3" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">实现缓存:在某些情况下，您可能需要为您的应用程序添加某种类型的网络数据磁盘缓存，例如，为了优化应用程序加载时间，使用SQLite等嵌入式数据库。</li></ul><p id="68ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在开发应用程序时，考虑如何持久化数据是关键的一步，桌面应用程序也不例外。您在应用程序中处理数据的方式会影响应用程序的性能，从而影响最终的用户体验。</p><p id="0d83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有太多可用的机制来持久化数据，从平面文件、键值存储到SQLite和成熟的数据库系统，如MySQL、PostgreSQL和Microsoft SQL Server等。</p><p id="0e04" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用简单的经典存储介质，如平面文件、嵌入式数据库、关系数据库系统或NoSQL数据库。这完全由您决定，但您需要考虑您的应用程序要求，以及每种方法的利弊，以做出正确的决定。</p><h1 id="f5f8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">如何选择在电子应用程序中保存数据的最佳方式？</h1><p id="a3d9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">几乎所有类型的应用都需要某种数据存储和检索，但并不是每种方法都适合所有用例，例如，如果您只需要存储一些配置数据或用户定义的设置，那么平面文件或键值存储(如HTML5 localStorage或HTML5 NoSQL IndexedDB)对于这种任务来说可能是非常有用和简单的机制。</p><p id="7b8f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">localStorage API非常容易使用。对于IndexedDB来说，API有点复杂，但是您可以将它与包装库一起使用，比如Dexie.js，它有一个简单明了的API。</p><p id="3cc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您需要使用简单的结构(即不同数据实体之间的关系很少，属性很少)来持久存储特定于领域的数据，那么SQLite或类似的嵌入式数据库解决方案是这些用例的正确选择。</p><p id="c878" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您正在构建一个复杂的数据库应用程序或数据密集型应用程序，其中包含多个表和关系，那么使用原始SQL可能会令人生畏并且容易出错。因此，ORM将对您有很大的帮助，它允许您轻松地表达您的数据库需求，并让您专注于应用程序的业务领域方面。有许多JavaScript/TypeScript表单可以很好地与电子生态系统集成，如Sequelize、Bookshelf.js和相对较新的TypeORM(基于TypeScript)。</p><p id="7250" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有两种主要类型的数据库:关系数据库和NoSQL数据库。要使用的正确数据库类型在很大程度上取决于这两点:数据库的性质和结构，以及同步要求。但是使用一种数据库类型优于另一种数据库类型的标准是什么呢？为了回答这个问题，让我们想象这样一个场景:你正在为一个需要跟踪制造商、客户、产品、订单和发票等数据的企业构建一个应用程序。这些数据以不同的关系相互关联。例如，一个订单属于一个客户并有许多相关产品，一张发票与某个订单相关，等等。除了存储数据，您还需要能够执行涉及一个实体的简单查询或连接多个实体的复杂查询。</p><p id="9cfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据这些要求，我们可以得出一些要点来帮助我们决定需要使用什么样的数据库系统，例如:</p><ul class=""><li id="228d" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">数据实体可以存储在包含列和行的表格结构中。</li><li id="36b3" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">在开发应用程序时，可以提前预测数据实体列(模式)。</li><li id="ffbe" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">要求数据完整性。</li></ul><p id="5782" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这个用例，关系数据库是一个理想的选择。</p><p id="297c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果模式是不可预测的，不断发展，需要随着时间的推移而改变，数据是不相关的，性能是主要关注点，那么NoSQL数据库是什么使用。</p><p id="5f4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以阅读<a class="ae lz" href="https://www.sitepoint.com/sql-vs-nosql-differences/" rel="noopener ugc nofollow" target="_blank">这篇文章，了解关于SQL和NoSQL比较</a>的更多细节。</p><p id="4e61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">除此之外，还有许多因素你也需要考虑，例如:</p><ul class=""><li id="db97" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">性能，</li><li id="c9b3" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">数据可移植性，</li><li id="1551" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">在基于内存和磁盘IO的数据库中，</li><li id="0aea" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">同步，</li><li id="9836" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">先离线与否，</li><li id="2aa3" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">不管有没有服务器，</li><li id="ca9f" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">不管有没有嵌入，</li><li id="3ea9" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">使用许可证，</li></ul><p id="1893" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，为持久化数据选择正确的方法取决于您的应用程序需求。在这篇文章中，我们将看到一些可能的，简单的和高级的，在你的电子应用中持久化数据的机制。</p><p id="9e71" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想测试代码，当你继续阅读教程时，你需要创建一个新的电子项目，你可以简单地用GitHub快速启动项目来做，所以使用你的终端或命令提示符开始克隆它们的库:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="d2e3" class="mx kx iq mt b gy my mz l na nb">git clone https://github.com/electron/electron-quick-start cd electron-quick-start</span></pre><p id="08c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后安装需求并启动应用程序:</p><p id="c6f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以遵循这个<a class="ae lz" href="https://www.sitepoint.com/desktop-node-apps-with-electron/" rel="noopener ugc nofollow" target="_blank">教程</a>，它会带你安装电子设备，构建和打包一个简单的桌面应用程序。</p><h1 id="f805" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用普通的SQL和MySQL数据库持久化数据</h1><p id="2474" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">MySQL是由Michael Widenius创建的开源关系数据库系统。为了能够在您的系统中使用MySQL，您需要首先安装它，这取决于您的目标操作系统，但它通常是一个容易遵循的过程。因此，在使用本教程中的MySQL或测试MySQL演示之前，请确保为您的系统安装MySQL版本。</p><p id="3ffc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">MySQL可用于大多数主流操作系统，包括Linux、Mac和Windows。</p><h1 id="1855" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">为Node.js安装MySQL客户端</h1><p id="4dbe" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">首先，我们需要从NPM安装Node.js的mysql模块，继续运行:</p><h1 id="6fae" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">引导模块</h1><p id="c42b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">下面是我们使用node-mysql模块对MySQL数据库执行SQL查询需要遵循的步骤:</p><ul class=""><li id="1c2c" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">导入或需要mysql模块</li><li id="ac38" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">创建连接对象</li><li id="f429" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">连接到数据库</li><li id="1f30" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">查询数据库</li><li id="6e46" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">关闭连接</li></ul><p id="4059" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们首先需要mysql模块:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="d748" class="mx kx iq mt b gy my mz l na nb">var mysql = require('mysql');</span></pre><p id="1185" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后创建一个数据库连接，您需要输入MySQL数据库系统凭证和您的数据库名称。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="6303" class="mx kx iq mt b gy my mz l na nb">var connection = mysql.createConnection({ host : 'localhost', user : 'root', password : 'YOUR_PASSWORD', database : 'demodb' });</span></pre><p id="a4b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建连接对象后，我们使用connect()方法实际连接到数据库</p><p id="d0ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此时，我们已经准备好对数据库执行SQL查询。让我们举一个简单的例子</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="733e" class="mx kx iq mt b gy my mz l na nb">connection.query('SELECT 1 + 1 AS result', function (error, results, fields) { if (error) throw error; console.log('1 + 1 = ', results[0].result); });</span></pre><p id="56e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您使用完一个连接，您需要使用end()方法关闭它</p><p id="dc44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，API是清晰的，不言自明的，很容易连接到MySQL数据库，然后执行SQL查询。要获得一个简单完整的使用MySQL的电子演示，一定要查看这个Github库。</p><h1 id="24b3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用MySQL +普通SQL的利弊</h1><p id="c87c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在Electron apps中使用带MySQL的普通SQL有一些优点和缺点，所以让我们从优点开始:* MySQL不限制electronic跨平台特性，因为它可用于electronic支持的所有操作系统(Windows、Linux和MAC)。* MySQL可以很容易地与Electron安装和集成(见上面的代码)。* MySQL Node.js client是一个本机模块，因此无需重新构建即可用于所有面向电子的架构。</p><p id="72a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们看看缺点:</p><ul class=""><li id="a5dd" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">MySQL不与电子应用程序捆绑在一起，因此最终用户需要从您的应用程序中单独安装MySQL(但是您可以使用一些方法在您的应用程序中自动安装MySQL)。</li><li id="fd9b" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">MySQL DBMS对于小型电子项目来说是大材小用。</li></ul><h1 id="1213" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用顺序化ORM (+MySQL)持久化数据</h1><p id="630c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">ORM是使用SQL数据库的智能软件解决方案或抽象，即使您对SQL(关系数据库的本地编程语言)一无所知，它们对于创建和使用具有复杂结构和关系的数据库尤其有用，因此尽管您很欣赏它们，但您并不需要在每个用例中都使用它们。编写原始SQL可能比使用ORM更好，特别是在性能方面，并且不了解SQL不能成为性能下降的借口。</p><h1 id="3006" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">什么是顺序化？</h1><p id="115c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">Sequelize是一个对象关系映射器，它使JavaScript (Node.js)开发人员能够在不实际编写SQL的情况下使用SQL数据库，而是使用JavaScript对象。ORM消除了为执行CRUD(创建、读取、更新和删除)操作而编写原始SQL的需要，并允许您使用一种编程语言编写应用程序代码，还可以访问和使用数据库。</p><p id="f842" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以将Sequelize与许多数据库管理系统和引擎一起使用，例如:PostgreSQL、MySQL、SQLite和MSSQL。</p><h1 id="9e97" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">安装序列</h1><p id="094f" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">安装Sequelize ORM也是使用npm install命令的问题，因此打开您的终端或命令提示符，然后运行:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="38d2" class="mx kx iq mt b gy my mz l na nb">npm install --save sequelize</span></pre><p id="8a3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我们的用例，我们将使用Sequelize和MySQL DBMS，因此您还需要使用以下命令安装MySQL client for Node.js:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="0abd" class="mx kx iq mt b gy my mz l na nb">npm install --save mysql2</span></pre><h1 id="fd35" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用序列</h1><p id="2bad" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">安装Sequelize后，您可以通过首先创建一个到所选数据库的连接来开始使用它，例如:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="92d0" class="mx kx iq mt b gy my mz l na nb">const Sequelize = require("sequelize"); </span><span id="db0d" class="mx kx iq mt b gy nc mz l na nb">const sequelize = new Sequelize('mysql://YOUR_USERNAME:<a class="ae lz" href="https://www.techiediaries.com/cdn-cgi/l/email-protection" rel="noopener ugc nofollow" target="_blank">[email protected]</a>:5432/YOUR_DATABASE_NAME');</span></pre><p id="fe94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以通过这个<a class="ae lz" href="http://docs.sequelizejs.com/class/lib/sequelize.js%7ESequelize.html" rel="noopener ugc nofollow" target="_blank">链接</a>传递许多选项给Sequelize构造函数，检查它们。</p><p id="3e08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在您已经准备好连接到数据库，您可以简单地使用authenticate()方法:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="16c7" class="mx kx iq mt b gy my mz l na nb">sequelize .authenticate() .then(() =&gt; { <br/>console.log('Connection successfully made.'); }) .catch(err =&gt; { console.error('Error connecting to database', err); });</span></pre><p id="ea98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们需要使用sequelize.define('name '，{attributes}，{options})创建一个模型:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="9183" class="mx kx iq mt b gy my mz l na nb">const Product = sequelize.define('product', { name: { type: Sequelize.STRING }, quantity: { type: Sequelize.FLOAT }, cost: { type: Sequelize.FLOAT }, price: { type: Sequelize.FLOAT }, unit: { type: Sequelize.STRING } });</span></pre><p id="f5e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于在顺序表单<a class="ae lz" href="http://docs.sequelizejs.com/manual/tutorial/models-definition.html" rel="noopener ugc nofollow" target="_blank">中创建模型的更多信息，请查看此</a>。</p><p id="5279" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们可以创建SQL表并保存一些数据:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="5eae" class="mx kx iq mt b gy my mz l na nb">Product.sync().then(() =&gt; { return Product.create({ name: 'Product 001', quantity: 10, cost: 100, price: 120, unit: 'kg' }); });</span></pre><p id="b75f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们进行一个查询，检索数据库中的所有产品:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="a329" class="mx kx iq mt b gy my mz l na nb">Product.findAll().then(products =&gt; { console.log(products) })</span></pre><p id="e7c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以通过这个<a class="ae lz" href="http://docs.sequelizejs.com/manual/tutorial/querying.html" rel="noopener ugc nofollow" target="_blank">链接</a>找到更多关于使用Sequelize查询数据库的信息。</p><p id="ede5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以从这个链接在GitHub上找到这种方法的工作演示。</p><h1 id="aeb7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">MySQL和Sequelize ORM方法的优缺点</h1><p id="2875" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">就像前面的方法一样，带有Sequelize ORM的MySQL也有一些优点和缺点。对于专业人士:</p><ul class=""><li id="e965" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">Sequelize支持的DBMS和引擎可用于所有电子平台(Windows、Linux和MAC)。</li><li id="d80e" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">电子应用程序可以很容易地实现，以支持多数据库管理系统(通过应用程序设置)。</li><li id="3164" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">更适合大型电子项目。</li><li id="944f" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">红杉很容易与电子结合。</li><li id="29ce" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">js模块不是本机的，所以它不需要任何重建目标电子ABI(应用程序二进制接口)。</li><li id="f31f" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">用户可以通过SQLite使用你的电子应用程序，而无需安装任何数据库管理系统。</li></ul><p id="8339" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对反对者来说:</p><ul class=""><li id="f1e1" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">用户需要安装底层DBMS(SQLite除外)。</li><li id="9b0a" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">ORMs在你的应用程序和数据库之间增加了另一层，因此产生的电子应用程序可能会有性能降级。</li></ul><p id="dfba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们在示例中使用了MySQL，但是您也可以使用任何Sequelize支持的DBMS/引擎，例如PosgreSQL、MSSQL、Oracle甚至SQLite，只需安装相应的Node.js客户端，并在实例化Sequelize时指定DBMS(参见上面的代码)。</p><p id="29fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更好的是，您可以通过应用程序中的配置选项，轻松地为应用程序用户提供设置DBMS/引擎的选择。</p><h1 id="b2ab" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">其他类似的形式</h1><p id="ca16" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">你也可以使用其他流行的电子表格。为了简洁起见，我们将在没有进一步细节的情况下提及它们:</p><ul class=""><li id="0e93" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated"><a class="ae lz" href="https://github.com/dresende/node-orm2" rel="noopener ugc nofollow" target="_blank"> node-orm2 </a>:类似于Sequelize ORM的Node.js ORM，可以和MySQL/MariaDB、PostgreSQL、MSSQL、Oracle、SQLite、MongoDB、Amazon Redshift一起使用。</li><li id="9705" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><a class="ae lz" href="http://bookshelfjs.org/" rel="noopener ugc nofollow" target="_blank"> Bookshelf.js </a>:基于<a class="ae lz" href="http://knexjs.org/" rel="noopener ugc nofollow" target="_blank"> Knex query builder </a>的另一个Node.js ORM，可以和PostgreSQL、MySQL、MariaDB、SQLite3一起使用。</li><li id="17f2" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><a class="ae lz" href="https://github.com/typeorm/typeorm" rel="noopener ugc nofollow" target="_blank"> TypeORM </a>:类似于Java Hibernate或者PHP主义的类型脚本ORM。它也可以与电子集成。</li></ul><h1 id="67df" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用SQLite持久化数据</h1><p id="a23d" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">SQLite是一个嵌入式(无服务器)单文件SQL数据库引擎。由于SQLite代码是公开的，所以你可以免费使用它，无论是在免费项目还是商业项目中，没有任何限制。SQLite数据库表、索引、触发器和视图包含在一个磁盘文件中。</p><p id="1fdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">SQLite是世界上使用最多的数据库引擎，有很多好的理由，所以让我们看看如何在electronic中使用它。</p><p id="38c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，你也可以把SQLite和SQL ORM一起使用，比如Sequelize或者TypeORM。这是通过将数据库引擎指定为sqlite来更改一个参数的问题。</p><h1 id="0b82" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">安装和重建SQLite3</h1><p id="04f4" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">SQLite3是一个本地Node.js模块，因此如果不将其重新构建为目标电子，就不能直接用于电子。</p><p id="f447" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有许多方法可以做到这一点。你可以从<a class="ae lz" href="https://electron.atom.io/docs/tutorial/using-native-node-modules/" rel="noopener ugc nofollow" target="_blank">电子文档</a>中找到它们。</p><p id="a825" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首次安装电子-重建:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="a667" class="mx kx iq mt b gy my mz l na nb">npm install --save-dev electron-rebuild</span></pre><p id="91d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后安装sqlite3模块:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="6455" class="mx kx iq mt b gy my mz l na nb">npm install sqlite3 --save</span></pre><p id="fbf2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，使用以下内容为电子重建sqlite3:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3109" class="mx kx iq mt b gy my mz l na nb">./node_modules/.bin/electron-rebuild -f -w sqlite3</span></pre><p id="2c05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果过程顺利，你就可以开始了。</p><h1 id="32ac" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用SQLite3</h1><p id="5c09" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">现在让我们看一个如何使用sqlite3的小例子，首先我们需要导入SQLite3模块:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="c51e" class="mx kx iq mt b gy my mz l na nb">const sqlite3 = require('sqlite3');</span></pre><p id="dbf9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后创建一个数据库对象来连接内存中的数据库:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3ec3" class="mx kx iq mt b gy my mz l na nb">var db = new sqlite3.Database(':memory:');</span></pre><p id="ec3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您也可以通过指定文件路径来使用基于文件的数据库:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="114e" class="mx kx iq mt b gy my mz l na nb">var db = new sqlite3.Database('/path/to/database/file.db');</span></pre><p id="d9fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，让我们创建一个表，插入一些值，查询它们，然后在控制台上打印结果:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3035" class="mx kx iq mt b gy my mz l na nb">db.serialize(function () { db.run("CREATE TABLE Products (name, barcode, quantity)"); db.run("INSERT INTO Products VALUES (?, ?, ?)", ['product001', 'xxxxx', 20]); db.run("INSERT INTO Products VALUES (?, ?, ?)", ['product002', 'xxxxx', 40]); db.run("INSERT INTO Products VALUES (?, ?, ?)", ['product003', 'xxxxx', 60]); db.each("SELECT * FROM Products", function (err, row) { console.log(row); }); });</span></pre><p id="67b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，在完成我们的数据库后，我们可以用以下命令关闭它:</p><h1 id="34e9" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">电子版SQLite的利与弊</h1><p id="ddb6" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">就像前面的方法一样，将SQLite与Electron结合使用有一些优点和缺点。让我们从优点开始:</p><ul class=""><li id="746f" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">SQLite可以与您的电子应用程序捆绑在一起，因此最终用户不需要在您的应用程序旁边安装任何东西。</li><li id="d6d0" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">SQLite不会妨碍electronic的跨平台特性，因为它适用于electronic的所有目标平台(Windows、Linux和MAC)。</li><li id="4e54" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">适合中小型项目。</li><li id="2b63" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">除了重新构建gotchas之外，SQLite可以很容易地与electronic集成和使用。</li></ul><p id="6fee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们看看缺点:</p><ul class=""><li id="5f1e" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">SQLite是一个原生模块，所以需要重新编译才能与electronic一起使用。</li><li id="c71b" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">为了针对不同的架构，您需要为每个可能的架构重新构建SQLite。</li></ul><h1 id="e984" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用MongoDB持久化数据</h1><p id="0280" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">MongoDB是一个免费的开源NoSQL数据库系统，可用于Windows、Linux、OS X、Solaris和FreeBSD。</p><h1 id="52e3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">安装MongoDB</h1><p id="5726" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">MongoDB与Electron是分开的，但是要使用它，我们需要集成一个MongoDB客户端，它可以用来连接到MongoDB数据库并与之通信。Mongoose是MongoDB的Node.js客户端，因此在使用与数据库通信之前，您需要先安装它。</p><p id="5540" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用终端或命令提示符运行以下命令:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="9bce" class="mx kx iq mt b gy my mz l na nb">npm install mongoose --save</span></pre><p id="1ddc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来你需要确保为你的目标电子ABI重建猫鼬。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="aa80" class="mx kx iq mt b gy my mz l na nb">npm install electron-rebuild --save ./node_modules/.bin/electron-rebuild -f -w mongoose</span></pre><h1 id="6d8c" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用MongoDB</h1><p id="aeac" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">安装Mongoose客户端后，您首先需要要求它:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="ae49" class="mx kx iq mt b gy my mz l na nb">var mongoose = require('mongoose') ,<br/>Schema = mongoose.Schema ,<br/>ObjectId = Schema.ObjectId;</span></pre><p id="bfe4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来使用以下命令连接到您的数据库:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="d8ce" class="mx kx iq mt b gy my mz l na nb">mongoose.connect('mongodb://localhost/my_database',{useMongoClient:true});</span></pre><p id="cf98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中my_database是您的数据库的名称。</p><p id="51be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后创建您的Mongoose模式:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="a16c" class="mx kx iq mt b gy my mz l na nb">var productSchema = new Schema({ location: ObjectId, date: {type: Date, default: Date.now}, family: {name: String}, name: String, quantity: Number });</span><span id="93fb" class="mx kx iq mt b gy nc mz l na nb">var locationSchema = new Schema({ name: String });</span></pre><p id="66ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，从模式中创建实际的模型:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="79e6" class="mx kx iq mt b gy my mz l na nb">var Product = mongoose.model('Product', productSchema); </span><span id="c7d5" class="mx kx iq mt b gy nc mz l na nb">var Location = mongoose.model('Location', locationSchema);</span></pre><p id="0352" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以使用不同的API对数据库进行CRUD操作。您可以通过创建这些对象的实例并调用它们的save()方法来添加数据库行:</p><p id="2fbe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一些位置:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="69da" class="mx kx iq mt b gy my mz l na nb">var loc001 = new Location({name:'Location001'}).save(); </span><span id="dbda" class="mx kx iq mt b gy nc mz l na nb">var loc002 = new Location({name:'Location002'}).save(); </span><span id="da4c" class="mx kx iq mt b gy nc mz l na nb">var loc003 = new Location({name:'Location003'}).save();</span></pre><p id="d321" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创造一些产品:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="32c9" class="mx kx iq mt b gy my mz l na nb">var product001 = new Product({location:loc001._id, family:{name:"family001"},name:"Product001",quantity:10}).save(); </span><span id="200b" class="mx kx iq mt b gy nc mz l na nb">var product002 = new Product({location:loc001._id, family:{name:"family002"},name:"Product002",quantity:20}).save();</span><span id="6ba3" class="mx kx iq mt b gy nc mz l na nb">var product003 = new Product({location:loc002._id, family:{name:"family001"},name:"Product002",quantity:30}).save();</span></pre><p id="03ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以使用find()方法查询位置和产品:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="6b64" class="mx kx iq mt b gy my mz l na nb">Location.find(function(err, locations) { console.log(locations); }); </span><span id="bc66" class="mx kx iq mt b gy nc mz l na nb">Product.find({location: loc001._id}, function(error, products) { console.log(products); });</span></pre><p id="3bcb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以从这个<a class="ae lz" href="http://mongoosejs.com/index.html" rel="noopener ugc nofollow" target="_blank">链接</a>中找到更多关于可用mongoose APIs的文档。</p><h1 id="f28f" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用MongoDB的利与弊</h1><p id="eb7a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">对于使用MongoDB和电子应用程序的优点:</p><ul class=""><li id="5e79" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">适用于所有电子支持的平台，如Windows、Linux和MAC。所以它不限制电子的跨平台特性。</li><li id="ac3a" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">可轻松安装并与电子集成。</li></ul><p id="1699" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也有一些缺点:</p><ul class=""><li id="ea68" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">不能与Electron捆绑在一起，所以最终用户需要将它与您的应用程序分开安装。</li><li id="d356" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">对于小应用程序来说是过度的。</li></ul><h1 id="0723" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">用NeDB保存数据</h1><p id="b2a0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">NeDB代表Node.js嵌入式数据库，它是一个纯JavaScript模块，没有二进制依赖，其API是MongoDB的子集。NeDB可以用作内存或持久数据库。</p><h1 id="aaf2" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">安装NeDB</h1><p id="6a64" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">您可以通过NPM安装NeDB，包括:</p><p id="23a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您也可以使用bower软件包管理器安装为浏览器设计的版本</p><h1 id="8464" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用NeDB</h1><p id="27ab" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在使用NeDB API之前，您需要NeDB模块使用:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="7517" class="mx kx iq mt b gy my mz l na nb">var Datastore = require('nedb');</span></pre><p id="b90f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，您可以使用以下命令创建内存数据库:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="e927" class="mx kx iq mt b gy my mz l na nb">var db = new Datastore();</span></pre><p id="c22a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或通过指定数据文件(将被创建)的路径的持久数据存储:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f80c" class="mx kx iq mt b gy my mz l na nb">var db = new Datastore({ filename: 'path/to/datafile' });</span></pre><p id="f707" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在对我们创建的数据存储区应用任何操作之前，您需要使用以下命令将其加载到内存中:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="8abd" class="mx kx iq mt b gy my mz l na nb">db.loadDatabase(function (err) { // You can now execute your commands });</span></pre><p id="aebd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还可以在创建数据存储时将autoload参数设置为true，以便在不显式调用loadDatabase()方法的情况下将其自动加载到内存中。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="5305" class="mx kx iq mt b gy my mz l na nb">db = new Datastore({ filename: 'path/to/datafile', autoload: true });</span></pre><p id="afa5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用insert方法插入新文档:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="17f3" class="mx kx iq mt b gy my mz l na nb">var doc = { name: 'product001', quantity : 100 }; db.insert(doc, function (err, newDoc) { // newDoc is the newly inserted document });</span></pre><p id="814e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要获取插入的文档，请使用find()方法:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="5dfe" class="mx kx iq mt b gy my mz l na nb">db.find({ name: 'product001' }, function (err, docs) { // results });</span></pre><h1 id="5518" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用NeDB和电子的利与弊</h1><p id="607e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">就像其他方式一样，将NeDB与Electron结合使用有一些优点和缺点，所以让我们从优点开始:</p><ul class=""><li id="cf20" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">NeDB可以和电子捆绑。</li><li id="303a" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">由于它是纯JavaScript，所以可以与Electron一起使用，无需重新构建。</li><li id="1ff5" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">NeDB可以很容易地与电子集成和使用。</li><li id="6474" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">NeDB适合中小型项目。</li></ul><p id="b5d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于缺点，没有太多关于使用NeDB与电子，除了:</p><h1 id="9e37" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="82da" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在Electron中有很多数据持久化的方法，选择正确的方法主要取决于您的用例。如果只是保存应用程序设置，那么你可以使用简单的机制，如平面文件或HTML5存储API，对于高级数据需求，你应该选择大型数据库解决方案，如MySQL或MongoDB(有或没有ORM)</p><p id="93c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lz" href="http://twitter.com/intent/tweet?text=5+%20Ways%20to%20Persit%20Data%20in%20Node.js/Electron%20Apps&amp;url=https://www.techiediaries.com/electron-data-persistence/&amp;via=" rel="noopener ugc nofollow" target="_blank">在Twitter上分享</a> <a class="ae lz" href="http://www.facebook.com/sharer/sharer.php?u=https://www.techiediaries.com/electron-data-persistence/" rel="noopener ugc nofollow" target="_blank">在脸书分享</a> <a class="ae lz" href="http://plus.google.com/share?url=https://www.techiediaries.com/electron-data-persistence/" rel="noopener ugc nofollow" target="_blank">在Google+上分享</a></p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="6a0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nk">原载于</em><a class="ae lz" href="https://www.techiediaries.com/electron-data-persistence/" rel="noopener ugc nofollow" target="_blank"><em class="nk">www.techiediaries.com</em></a><em class="nk">。</em></p></div></div>    
</body>
</html>