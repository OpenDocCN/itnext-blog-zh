<html>
<head>
<title>Anti-Patterns and Code Smells</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反模式和代码味道</h1>
<blockquote>原文：<a href="https://itnext.io/anti-patterns-and-code-smells-46ba1bbdef6d?source=collection_archive---------0-----------------------#2019-04-21">https://itnext.io/anti-patterns-and-code-smells-46ba1bbdef6d?source=collection_archive---------0-----------------------#2019-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/6449ee8426fe408ac48614850426e039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*BJ-JE9oiadXd58CqJNNNyw.jpeg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片来自<a class="ae kb" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3113828" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><p id="0c45" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">每个人都写完美的代码，对吧。我们都不慌不忙，不用担心最后期限和外部压力，来创建结构如此良好的优雅代码，它应该被视为艺术。</p><p id="9ef8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">对…</p><p id="1174" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">好吧，现实世界是很难原谅的。每个人都走捷径，不得不在好的和好的之间做出选择，然后把事情做完。我们做出牺牲，不良做法渗透进来。其中一些捷径以迂回的方式重复出现。我们称这些为反模式或代码气味。</p><p id="6b86" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这些代码让我们畏缩，并感到恶心。我们诅咒屏幕，发誓要对犯下这种错误的白痴进行报复。</p><p id="ec71" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">谁做了这些垃圾:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="48b5" class="lj lk it lf b gy ll lm l ln lo">git blame pom.xml</span><span id="63bd" class="lj lk it lf b gy lp lm l ln lo">...<br/>efenglu</span></pre><p id="4f56" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">…哦，等等。让我们暂时忽略它。我肯定开发商今天过得很艰难。</p><p id="d302" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我们都经历过。就像任何坏习惯一样，我们需要首先识别习惯并纠正行为。</p><p id="56df" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这是我见过(做过)的一系列糟糕的编程实践，我希望永远不要重复。希望通过识别行为，我们可以在早期解决它，避免以后代价高昂的重构。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/57298aa7e564f68740d28c2423282fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-bavpZlImzlDb0j5jRGF2A.jpeg"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片来自<a class="ae kb" href="https://www.pexels.com/@public-domain-pictures?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">公共领域图片</a>来自<a class="ae kb" href="https://www.pexels.com/photo/food-plate-italian-dinner-41320/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a></figcaption></figure><h1 id="523e" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">意大利面条代码</h1><p id="a82a" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">与一大盘意大利面不同，意大利面代码既不美味也不吸引人。</p><p id="a04e" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">示例:</p><blockquote class="ne nf ng"><p id="d326" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated"><em class="it"> A </em>引用<em class="it"> B </em>哪个引用<em class="it"> C </em>和<em class="it"> D </em>哪个有时引用<em class="it"> A </em>或<em class="it"> E </em>但主要是<em class="it">A’</em>哪个提供……你都明白了吗？现在添加一个使用<em class="it"> G </em>而不是<em class="it"> I </em>的新特性。</p></blockquote><p id="ad68" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">意大利面条式代码是指通过所有间接的、抽象的和最好的意图，我们最终得到的代码在内部来回缠绕。不同代码段之间的界限模糊到了毫无意义的程度。看似分离的代码片段最终被发现是结合在一起的。</p><p id="7877" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">当你试图提取一种能力时，意大利面条式的代码真的露出了它丑陋的一面。就像吮吸意大利面条一样，看起来你已经成功完成了任务，直到它扇了你一巴掌，把酱汁溅得你满衬衫都是。</p><p id="be2d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">为了避免意大利面条式的代码，你应该确定界限，尽可能遵循单一目的的原则。保持较小的代码大小和有限的依赖性。</p><p id="2725" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">并使用围嘴。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8430" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">克隆并拥有</h1><p id="49d3" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">有时候一个软件的行为就像我们想要的那样…除了我们需要稍微修改它。不幸的是，源代码不能轻易接受我们的用例，我们不能或者不想重构它。因此，我们简单地复制实现并修改它以适应我们的需要。</p><p id="b000" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">克隆和拥有是干(不要重复自己)编码原则的对立面。</p><p id="c90f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">有时克隆和拥有自己的模式实际上是"<em class="nh">最佳"</em>方法。但是我们应该谨慎使用它。当发现bug时，克隆和拥有大块代码会导致一场维护噩梦。</p><p id="92eb" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">当使用clone and own only时，我们应该只克隆非常小的可重用代码片段。这些通常应该是对库重构没有意义的模式或策略。提及克隆的来源也是很好的做法。</p><p id="36a0" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">至少这样，当你发现一个错误时，你就可以责怪别人了。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="9196" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">手放在裤子里</h1><p id="15d4" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">你会把手伸进别人的裤子里吗？不。那就不要接触他们的代码。</p><p id="165f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">手放在裤子里是通过所有私有的，甚至有时是公共的API的事情，我们最终接触到了我们真的不应该接触的代码。这打破了关注点的界限，暴露了您实际上不应该知道的代码内部工作的知识。</p><p id="afec" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">通常情况下，开发人员并不知道您正在使用某个特定的功能，他们会认为它是完全安全的，并对其进行重构。其他时候，通过深入代码，您可能会打破关于对象内部的假设。</p><p id="997b" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">一般来说，我们应该遵守API边界，不要将接口类型化到实现类中。实现类是内部的，不应该被引用。更好的是，将实现隐藏在单独的maven依赖项中，并使用依赖注入，或者更好的是，使用类似java模块的东西来确保没有人能够引用它们。</p><p id="0b27" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">应该不惜一切代价避免反射。它很慢，将来几乎肯定会坏掉。你能做某事并不意味着你应该做。</p><p id="a32b" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">尝试重构您的代码以使用公开可用的API。设置知识边界。吃自己的狗粮，在使用自己的API时强迫自己不知道实现细节。如果感觉怪异或尴尬，重构。你不想有人把手伸进你的裤子，所以不要把手伸进他们的！</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/21fcec3ccdd32a64fe204ab6b904dd75.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*IRfutnrsPGAZs7nXuDh-iw.jpeg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片来自<a class="ae kb" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=763246" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>的<a class="ae kb" href="https://pixabay.com/users/wilhei-883152/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=763246" rel="noopener ugc nofollow" target="_blank">威利·海德尔巴赫</a></figcaption></figure><h1 id="50f1" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">纸牌屋</h1><p id="e42a" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">很优雅，几乎是美丽的。但不是因为它写得好，而是因为你不能相信它真的有用！纸牌屋通常是其他反模式的症状。当被告知重构别人的代码时，你通常会发现一个纸牌屋。</p><p id="4ad2" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">为了避免纸牌屋:</p><ul class=""><li id="5ccb" class="nr ns it ke b kf kg kj kk kn nt kr nu kv nv kz nw nx ny nz bi translated">编写简洁的代码</li><li id="5420" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">编写API和接口的测试</li><li id="1539" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">尝试破解你的代码</li></ul><p id="7da1" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果给你一个纸牌搭的房子，在继续之前有必要建立一个坚实的基础。焦点是首先编写现有应用程序的大量单元测试。这将使你熟悉现有的行为，并确保你不会破坏任何东西。开始小块重构。首先编码并保持现有行为。慢慢地，你可以开始加强API并引入更好的模式。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="c0fe" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">唯一的班轮</h1><p id="a4a6" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">出于某种原因，一些开发人员认为世界上只有一定数量的换行符，他们必须作为一种宝贵的资源进行配给。他们常常喜欢将一个大语句压缩成一行代码的能力。这些行通常很复杂，很长，很难读懂。</p><p id="0d65" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">听说过<a class="ae kb" href="https://arstechnica.com/civis/viewtopic.php?f=15&amp;t=1008590" rel="noopener ugc nofollow" target="_blank"> DeCSS 7行Perl脚本</a>吗？</p><p id="3be8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">当编码时，记得考虑那些跟随你的人。你的代码应该易于阅读，并且流畅。每一行应该完成一个工作单元。</p><p id="be4a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">水平滚动条不是你的朋友！</p><p id="6a0c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">三元运算符是一行程序的罪魁祸首。</p><p id="78bc" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你喜欢这个吗:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="3d48" class="lj lk it lf b gy ll lm l ln lo">5 &gt; b ? 3&lt;b ? print "4" : print "2" : print "6" </span></pre><p id="0382" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">或者这个:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="0162" class="lj lk it lf b gy ll lm l ln lo">if ( 5 &gt; b) {<br/>  if ( 3 &lt; b) {<br/>    print "4"<br/>  } else {<br/>    print "2"<br/>  }<br/>} else {<br/>  print "6"<br/>}</span></pre><p id="cfd8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">一般情况下，不要使用三元运算符。对于简单的打印语句，这可能是有用的，但不要嵌套它们。</p><p id="3bc6" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">拆分对多行的长链方法调用。例如，使用流时，请执行以下操作:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="5ca3" class="lj lk it lf b gy ll lm l ln lo">list.stream()<br/>   .filter(...)<br/>   .map(...)<br/>   .filter(...)<br/>   .collect(...)</span></pre><p id="e19d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">使用构建器也是如此:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f0b0" class="lj lk it lf b gy ll lm l ln lo">MyBuilder.newBuilder()<br/>   .setValue1(...)<br/>   .setValue2(...)<br/>   .build()</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi of"><img src="../Images/e5baf574288b9e9104ebb7afee01f1c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zo9t7i-x7tyuzk3l0T5w6g.jpeg"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">照片由来自<a class="ae kb" href="https://www.pexels.com/photo/abc-books-chalk-chalkboard-265076/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kb" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</figcaption></figure><h1 id="bd0d" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">学术</h1><p id="d99a" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">学术程序员以使用别人从未听说过的代码特性而自豪。当他们的代码使用一些模糊的闻所未闻的功能时，他们会很高兴。</p><p id="6741" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">一个常见的例子是位操作。在大多数常规代码中很少需要。所以不要做。</p><p id="b588" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">听说过<a class="ae kb" href="https://en.wikipedia.org/wiki/XOR_swap_algorithm" rel="noopener ugc nofollow" target="_blank"> XOR交换算法</a>吗？这可能是一个奇怪的面试问题，但是看在上帝的份上，千万不要这样做。内存和寄存器并不是那么珍贵的资源。只需使用第三个变量。</p><p id="3b49" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">相反，编写代码时，就好像一个语言新手需要阅读它一样。当然，它可能会更长更冗长，但也更容易阅读。在大多数情况下，你并不像你认为的那样“聪明”。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi og"><img src="../Images/6f955000bc11e94990c9253a4834bd09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4nQP3c7U8UThDohaICMRg.jpeg"/></div></div></figure><h1 id="ef4f" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">每一颗螺丝钉都是一颗钉子</h1><p id="d53f" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">工具只有用在正确的工作上才是好的。仅仅因为你了解了这种漂亮的新语言或新框架，并不意味着你可以使用它。</p><p id="2618" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">当编码时，慢下来问问你自己。</p><blockquote class="ne nf ng"><p id="3cab" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">我是在强迫自己使用这种方法，还是有一种不那么复杂的更简单的方法</p></blockquote><p id="9cd3" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这里，特殊AST转换是一个常见的原因。</p><p id="2bbf" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">坚持使用你的团队已经同意的内置语言结构或特性。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4516" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">过早优化</h1><p id="d843" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">这种常见的反模式非常容易陷入。你看到一段代码，觉得有必要写一个稍微复杂一点的版本，这样会更快。虽然您的意图是正确的，但是您也占用了宝贵的时间，使得代码更加复杂，并且很可能引入更多的bug。</p><p id="17cb" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">现在我们不应该故意写缓慢的代码。</p><p id="c33e" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我们应该首先关注易读的、可维护的代码。如果性能成为一个问题，那么，只有到那时，进行性能分析，并在必要的地方进行重构。通常情况下，它不在你预期的地方。</p><p id="9e27" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">小心过度使用缓存，或将大量数据复制到内存中。这看起来像是一个快速的胜利，但实际上可能没有必要。</p><p id="f87a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">此外，编译器通常可以很好地为您优化代码。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="7f36" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">全局</h1><p id="1f97" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">这包括所有种类的静态变量、方法和导入静态。</p><p id="69e8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在容器和服务的世界中，这个概念扩展到了容器中包含的环境变量、URL、系统属性和可执行文件。</p><p id="39d1" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">全球化充满了陷阱。它们使代码变得脆弱，因为改变一件事会产生深远的后果。很难确定它们用在哪里。全局变量使得测试更加困难，因为几乎不可能为全局变量插入模拟。它们也是安全问题的潜在来源。</p><p id="69f5" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">一般来说，避免他们！</p><p id="ea10" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">避免静态方法和公共静态字段。尽可能使用依赖注入。</p><p id="907a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">避免环境变量和硬编码的url。使用像<a class="ae kb" href="https://github.com/Netflix/eureka" rel="noopener ugc nofollow" target="_blank">尤里卡</a>这样的服务发现机制和像<a class="ae kb" href="https://cloud.spring.io/spring-cloud-config/spring-cloud-config.html" rel="noopener ugc nofollow" target="_blank"> Spring Boot配置</a>这样的外部配置。</p><p id="56bb" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">对于实用程序类，考虑使它们成为接口的可注入bean。尤其是，如果他们的行为很复杂。如果你创建一个实用程序类，保持它的小规模。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi oh"><img src="../Images/a588d26124786d6b51fa2ca92debb950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uy3Veclmz3fYX9mG3JhtYQ.jpeg"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">照片由来自<a class="ae kb" href="https://www.pexels.com/photo/photo-of-pathway-surrounded-by-fir-trees-1578750/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae kb" href="https://www.pexels.com/@souvenirpixels?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">詹姆斯·惠勒</a>拍摄</figcaption></figure><h1 id="cea4" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">快乐路径驱动的发展(HPDD)</h1><p id="1354" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">这一个我是有罪的。我想每个人都在某个时候做过。你写一段代码，直到它为你的一个案例工作。你甚至可以为它写一个测试。</p><p id="911d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">然后你就完事了。</p><p id="be0f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你还没完！</p><p id="d108" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">事实上，这可能是有趣的时间。邪恶的时候到了:)</p><p id="a70d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">试着给它发送坏的东西，无效的参数，空的，未初始化的状态。攻击你的假设，冷酷无情。</p><p id="b11d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">当所有的尘埃落定，你的代码缰绳胜利，现在你完成了。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="2835" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">这永远不会…</h1><p id="3bab" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">就像快乐之路一样，这是懒惰开发者的症状。</p><blockquote class="ne nf ng"><p id="5610" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">“这永远不会为空”</p><p id="f04c" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">“这永远不会引发异常”</p></blockquote><p id="c769" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">六个月后…</p><blockquote class="ne nf ng"><p id="f5fb" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">"嘿，我们的代码坏了，是谁开始抛出这个异常的？"</p></blockquote><p id="46f4" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">防御性编码。</p><p id="2b2c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">永远不要捕捉所有的异常并盲目地抛弃它们。</p><p id="ac0f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">不要对行为做出假设。行为可能会改变，通常是在没有察觉的情况下。</p><p id="9ec9" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果它可以为空，就假设它会为空。</p><p id="5807" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果你发现自己在说“它永远不会…”知道它几乎肯定会。帮你自己一个忙，现在就编码吧。即使它只是抛出IllegalStateException。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="9287" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">就用Maven最新版本</h1><p id="bf06" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">在maven中指定依赖项时，总是为每个依赖项设置一个特定的版本会很麻烦。使用最新版本可能很有诱惑力。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="1bf7" class="lj lk it lf b gy ll lm l ln lo">&lt;<strong class="lf iu">dependency</strong>&gt;<br/>    &lt;<strong class="lf iu">groupId</strong>&gt;org.apache.pulsar&lt;/<strong class="lf iu">groupId</strong>&gt;<br/>    &lt;<strong class="lf iu">artifactId</strong>&gt;pulsar-client&lt;/<strong class="lf iu">artifactId</strong>&gt;<br/>    &lt;<strong class="lf iu">version</strong>&gt;LATEST&lt;/<strong class="lf iu">version</strong>&gt;<br/>&lt;/<strong class="lf iu">dependency</strong>&gt;</span></pre><p id="66c8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">不要！</p><p id="5b9d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">使用最新版本使得可重复的构建几乎不可能，因为你永远不知道你以前构建了什么，现在又将构建什么。</p><p id="564a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">始终使用特定的版本。最起码的版本范围，但即使这样也会给开发人员带来问题。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="cf1e" class="lj lk it lf b gy ll lm l ln lo">&lt;<strong class="lf iu">dependency</strong>&gt;<br/>    &lt;<strong class="lf iu">groupId</strong>&gt;org.apache.pulsar&lt;/<strong class="lf iu">groupId</strong>&gt;<br/>    &lt;<strong class="lf iu">artifactId</strong>&gt;pulsar-client&lt;/<strong class="lf iu">artifactId</strong>&gt;<br/>    &lt;<strong class="lf iu">version</strong>&gt;[2.3.0,3.0.0)&lt;/<strong class="lf iu">version</strong>&gt;<br/>&lt;/<strong class="lf iu">dependency</strong>&gt;</span></pre><p id="7425" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">当使用版本范围时，maven只会在本地没有满足依赖关系的版本范围时解析依赖关系。因此，如果你引入新的东西，你的一些开发人员会开始抱怨他们的构建在本地失败。这是因为他们使用的是以前的版本。如果您使用范围，如果您期待新的功能，请始终更新最低版本。但是如果你要这么麻烦的话，你最好更新版本，忘记版本范围。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="12ed" class="lj lk it lf b gy ll lm l ln lo">&lt;<strong class="lf iu">dependency</strong>&gt;<br/>    &lt;<strong class="lf iu">groupId</strong>&gt;org.apache.pulsar&lt;/<strong class="lf iu">groupId</strong>&gt;<br/>    &lt;<strong class="lf iu">artifactId</strong>&gt;pulsar-client&lt;/<strong class="lf iu">artifactId</strong>&gt;<br/>    &lt;<strong class="lf iu">version</strong>&gt;2.3.0&lt;/<strong class="lf iu">version</strong>&gt;<br/>&lt;/<strong class="lf iu">dependency</strong>&gt;</span></pre><p id="53a4" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">此外，永远不要使用项目外部模块的快照依赖关系。这些是移动的目标。事实上，我建议您使用Maven Enforcer来确保您的库只使用具体版本。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f4a1" class="lj lk it lf b gy ll lm l ln lo">&lt;<strong class="lf iu">plugin</strong>&gt;<br/>    &lt;<strong class="lf iu">groupId</strong>&gt;org.apache.maven.plugins&lt;/<strong class="lf iu">groupId</strong>&gt;<br/>    &lt;<strong class="lf iu">artifactId</strong>&gt;maven-enforcer-plugin&lt;/<strong class="lf iu">artifactId</strong>&gt;<br/>    &lt;<strong class="lf iu">version</strong>&gt;3.0.0-M2&lt;/<strong class="lf iu">version</strong>&gt;<br/>    &lt;<strong class="lf iu">executions</strong>&gt;<br/>        &lt;<strong class="lf iu">execution</strong>&gt;<br/>            &lt;<strong class="lf iu">id</strong>&gt;default-cli&lt;/<strong class="lf iu">id</strong>&gt;<br/>            &lt;<strong class="lf iu">goals</strong>&gt;<br/>                &lt;<strong class="lf iu">goal</strong>&gt;enforce&lt;/<strong class="lf iu">goal</strong>&gt;<br/>            &lt;/<strong class="lf iu">goals</strong>&gt;<br/><br/>            &lt;<strong class="lf iu">configuration</strong>&gt;<br/>                &lt;<strong class="lf iu">rules</strong>&gt;<br/><br/>                    &lt;<strong class="lf iu">requireReleaseDeps</strong>&gt;<br/>                        &lt;<strong class="lf iu">message</strong>&gt;No Snapshots Allowed in releases!&lt;/<strong class="lf iu">message</strong>&gt;<br/>                        &lt;<strong class="lf iu">onlyWhenRelease</strong>&gt;${enforcer.requireReleaseDeps.onlyWhenRelease}&lt;/<strong class="lf iu">onlyWhenRelease</strong>&gt;<br/>                    &lt;/<strong class="lf iu">requireReleaseDeps</strong>&gt;<br/>                &lt;/<strong class="lf iu">rules</strong>&gt;<br/>            &lt;/<strong class="lf iu">configuration</strong>&gt;<br/>        &lt;/<strong class="lf iu">execution</strong>&gt;<br/>    &lt;/<strong class="lf iu">executions</strong>&gt;<br/>&lt;/<strong class="lf iu">plugin</strong>&gt;</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi oi"><img src="../Images/be10b02a12bd2874c46668f8295eca2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0U49CXsf1HteE2Qo3I_UNw.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated"><a class="ae kb" href="https://xkcd.com/1833/" rel="noopener ugc nofollow" target="_blank"> XKCD </a></figcaption></figure><h1 id="2711" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">谁需要代码风格？</h1><p id="01e1" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">所有人！</p><p id="c309" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我们可以就什么是最好的代码风格进行无休止的辩论，但简单的答案是，最好的代码风格是你的团队能够同意的。弄清楚这一点，并执行它。</p><p id="cdd6" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">使用Checkstyle和Sonar之类的工具。不要接受新代码，直到代码符合要求。</p><p id="28ec" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">像代码这样简单的东西，不管是谁写的，看起来都一样，会对代码的可读性和可维护性产生深远的影响。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="28f6" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">角色很贵</h1><p id="c0ce" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">您是否遇到过开发人员使用大量缩写或简短的难以描述的变量名的代码？代码需要被人阅读。不要担心使用稍微长一点的变量名。如果这能让代码更易读，那就去做吧。</p><p id="5ce2" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">不要:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="45e3" class="lj lk it lf b gy ll lm l ln lo">int i<br/>int compObjVerT<br/>long delVarId</span></pre><p id="07cd" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">避免简洁的单字符变量。</p><p id="14d4" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">做:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="aa0e" class="lj lk it lf b gy ll lm l ln lo">for (int i;...)<br/>int compareObjVersion<br/>long deleteVariableId</span></pre><p id="3625" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在for循环或lambda表达式中使用“I”或“It”是可以接受的。但是要小心嵌套循环。如果变量的定义和使用之间的距离超过了几行，那么变量应该有一个描述性的名字。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="53a1" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">Git:更大更少的提交</h1><p id="5a3a" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">我对此完全有罪，我被它烧伤的次数已经记不清了。</p><p id="ca9d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">git最好的特性之一是它是一个分散的存储库。这意味着，您的提交实际上不会进入主线，直到您希望它们进入。</p><p id="9173" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">因此，尽早提交并经常提交。</p><p id="0094" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">使用git作为一种方法来跟踪你的想法的进展。没做完也没关系。继续提交。</p><p id="f213" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这使您可以轻松地恢复到以前的状态。</p><p id="a40c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在你尝试新事物之前，先承诺。</p><p id="49a8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在重构之前，提交。</p><p id="6680" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">见鬼，在你离开一天之前，承诺吧。</p><p id="b128" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">不要担心你的犯罪记录。一旦你真的完成了，你就可以很容易地把这些垃圾合并成一条很好的专业提交消息。</p><h1 id="0a5f" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">Git:无意义的提交消息</h1><p id="d7a4" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">说到提交消息，你见过这个吗:</p><blockquote class="ne nf ng"><p id="c018" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">修理东西</p></blockquote><p id="5e7c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">或者这个</p><blockquote class="ne nf ng"><p id="bf04" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">更新规格</p></blockquote><p id="df76" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">还是这个？！？</p><blockquote class="ne nf ng"><p id="91ad" class="kc kd nh ke b kf kg kh ki kj kk kl km ni ko kp kq nj ks kt ku nk kw kx ky kz im bi translated">与你无关</p></blockquote><p id="6ddf" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">嗯，最后一个有点极端，但你明白我的意思。您提交消息是您告诉其他开发人员您正在做什么的方式。当然，我们可以阅读你的代码，但是消息给了我们上下文。提交消息应该回答“为什么？”有时候“怎么做？”你做了一些事。</p><ul class=""><li id="6a4a" class="nr ns it ke b kf kg kj kk kn nt kr nu kv nv kz nw nx ny nz bi translated">为什么你在修东西？</li><li id="b3a6" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">为什么/怎么破的？</li><li id="7ff4" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">你为什么要更新规格？</li><li id="24b9" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">这对我们的客户有什么影响？</li></ul><p id="d012" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你不需要写论文。这是你的问题跟踪者的工作。提交应该是:</p><ul class=""><li id="b703" class="nr ns it ke b kf kg kj kk kn nt kr nu kv nv kz nw nx ny nz bi translated">短但不要太短</li><li id="6fb1" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">描述性而不重复</li><li id="a786" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">如果你有相关的问题，提出来。</li></ul><p id="a5e7" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">还要遵循良好的提交模板实践:。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="93f9" class="lj lk it lf b gy ll lm l ln lo">short one-line message</span><span id="5633" class="lj lk it lf b gy lp lm l ln lo">followed by blank line and<br/>long multi-line<br/>descriptive message</span></pre><p id="b934" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">遵循这种模式可以很容易地扫描git日志，甚至创建简短的发行说明:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="1904" class="lj lk it lf b gy ll lm l ln lo">git log --pretty=oneline</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="c3d1" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">Git:长寿分支</h1><p id="7d8f" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">你曾经有过一个持续几周或几个月的功能分支吗？一直等到它完美，做了所有的事情，最后才意识到，因为你等了太久，你和师父的距离太远，你的分支现在合并起来太危险了。</p><p id="f08b" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">+1我有</p><p id="c828" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">遵循敏捷宣言。将特征分成小块。并将其合并。然后下一块，合并一下。</p><p id="4c1e" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果它不能做所有的事情，那又怎么样。只要它能工作，不破坏现有的东西，那就好。实际上比好还要好。</p><p id="b42a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">您正在交付新的功能。这太棒了。通常，这是当你发现你需要重新考虑一个设计决策，也许扔掉代码的时候。</p><p id="cddd" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">没关系。你学到了一些东西，并在开发周期的早期而不是晚期解决了它。</p><p id="1b92" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果你在一个分支上工作了几个星期以上，你可能工作的时间太长了。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi oi"><img src="../Images/fa23895b3a1f54dcb1ac171badb8e67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6O2fiWWJy7Ban_oF5AJejg.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated"><a class="ae kb" href="https://xkcd.com/378/" rel="noopener ugc nofollow" target="_blank"> XKCD </a></figcaption></figure><h1 id="8227" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">仅使用IDE</h1><p id="918c" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">我们都有自己喜欢的想法。</p><ul class=""><li id="ee25" class="nr ns it ke b kf kg kj kk kn nt kr nu kv nv kz nw nx ny nz bi translated">IntelliJ</li><li id="3018" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">黯然失色</li><li id="f4e5" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">Netbeans…</li></ul><p id="8c35" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">但是不要让IDE成为拐杖。熟悉每个人都有的最好的IDE终端。</p><p id="d561" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这个神奇的黑匣子没那么恐怖。它非常强大，总是完全按照指示去做，并且很容易重复动作。哦，我有没有提到它的愚蠢快。自由了。</p><p id="57ec" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我想说的是，不要把自己局限在自己喜欢的图形化IDE里。</p><p id="517d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">您应该知道如何在命令行上使用git。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="09a2" class="lj lk it lf b gy ll lm l ln lo">git clone <a class="ae kb" href="https://github.com/torvalds/linux.git" rel="noopener ugc nofollow" target="_blank">https://github.com/torvalds/linux.git</a><br/>git checkout myNewKernelMod<br/>...<br/>git add .<br/>git commit -m "I am amazing!"</span></pre><p id="1ea2" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你应该知道用vi编辑一个文件。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="e5a5" class="lj lk it lf b gy ll lm l ln lo">vi someTime<br/>// i Type some code<br/>// :wq</span></pre><p id="be84" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你应该知道如何使用grep和find。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="8342" class="lj lk it lf b gy ll lm l ln lo">grep -R "strange Stuff" *</span><span id="d845" class="lj lk it lf b gy lp lm l ln lo">find . -name magicFile -exec rm '{}' ';'</span></pre><p id="ec31" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这些简单的工具将使你在任何计算机上成为一股强大的力量。尤其是那些没有UI的服务器。</p><p id="9911" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你不需要成为bash大师。适应就好了，还有RTFM。</p><p id="d8d1" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果你需要帮助，请找一个“人”。(好吧，糟糕的笑话，但说真的，手册页真的很有用。)</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="94e0" class="lj lk it lf b gy ll lm l ln lo">man find</span></pre><p id="3bba" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">或者只问命令本身:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="10b4" class="lj lk it lf b gy ll lm l ln lo">grep --help</span></pre><p id="680b" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">关于终端的最好的事情之一是我可以很容易地与另一个开发者共享一个命令，并且知道它会工作:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="dc2e" class="lj lk it lf b gy ll lm l ln lo">git reset HEAD~1<br/>git clean -f<br/>git commit -m "Commit the changes"</span></pre><p id="07db" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">尝试使用图形IDE界面来解释这一点。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="e414" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">修改输入参数</h1><p id="f034" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">你有没有把一个对象传递给一个方法，方法修改了对象？</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f1fc" class="lj lk it lf b gy ll lm l ln lo">public void trustMe(java.util.Date importantDate); </span></pre><p id="45d0" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这个方法会修改日期吗？显然不应该这样。事实上，你可能会相信它不会。但是有可能。</p><p id="5150" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我见过这样的代码！可怕的狗屎。</p><p id="ef5a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">相反，您应该:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="1699" class="lj lk it lf b gy ll lm l ln lo">public java.util.Date safeTrustMe(java.util.Date importantDate);</span></pre><p id="ade6" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">现在很明显，一个新的日期正在被创造。虽然，他们仍然可以修改我传入的日期，但至少我感到安全，他们不会。</p><p id="ee53" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">为了真正防止这种情况，您应该只传递不可变的对象。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="246f" class="lj lk it lf b gy ll lm l ln lo">public LocalDate safeTrustMe(LocalDate importantDate);</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8cae" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">返回空值</h1><p id="3791" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">Null (IMHO)在几乎所有语言中都是破的。尽管Java是一种强类型语言，但它有一个关键的缺陷。每个引用“可能”都有一个值。不能保证它会。这意味着通常我们不得不基本上不相信任何人。但是这意味着我们的代码中充满了空检查。所以我们走捷径，假设大多数东西不为空。</p><p id="9708" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这导致大多数开发人员认为方法不接受空参数，并且方法从不返回空参数，因此代码有返回空的味道。</p><p id="3e4b" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">但是当我们没有价值的时候呢？</p><p id="a6cc" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在Java的早期版本中，没有真正的选项。你必须返回null。显然，您可以记录这一点，但是大多数开发人员从来没有真正阅读过文档。</p><p id="d6c0" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">用过这个吗:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="f677" class="lj lk it lf b gy ll lm l ln lo">new File("somePath").list()</span></pre><p id="5e52" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你知道它可以返回null吗？</p><p id="fea1" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">谢天谢地，Java 8引入了可选的。对于新代码，没有理由不使用可选的。很明显，返回的值可能不存在。使用Optional，我们可以返回一个描述空值(或缺失值)的非空引用。</p><p id="b14f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">是的，你可以使用@Nullable或者@Nonnull，但是这些就像文档一样。它们不是由编译器或语言强制执行的。</p><p id="e277" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">看在上帝的份上，永远不要返回空集合！</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="a8c6" class="lj lk it lf b gy ll lm l ln lo">List&lt;String&gt; happyString() {<br/>   return null;<br/>}</span></pre><p id="3f5c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">为什么！？！？！？是列表，只返回一个空的！</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="889e" class="lj lk it lf b gy ll lm l ln lo">List&lt;String&gt; happyString() {<br/>    return Collections.empyList();<br/>}</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4b20" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">可投掷的</h1><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="eb94" class="lj lk it lf b gy ll lm l ln lo">try {<br/>...<br/>} catch (Throwable e) {<br/>  throw new IllegalStateException("Bad stuff happened", e);<br/>}</span></pre><p id="02f2" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你真的认为你知道如果出了什么问题该怎么办吗？</p><p id="80d9" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">Throwable的含义很广。它包括像堆错误，JVM错误，很多你没有机会正确处理的东西。</p><p id="4bf8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果堆空间用完了，你会怎么做？</p><p id="0b32" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我告诉你…没什么。你完了，完了，死了，完了！所以不要表现得好像你可以通过捕捉Throwable或Error之类的东西来恢复一样。</p><p id="c3ac" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">不要这样做！</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="4d0c" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">无故投掷</h1><p id="a044" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">您已经捕获了一个异常，并且您将抛出一个新的异常，并带有一条更具描述性的错误消息。太棒了，太棒了！</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="9740" class="lj lk it lf b gy ll lm l ln lo">try {<br/>...<br/>} catch (IOException e) {<br/>  throw new IllegalStateException("failed to write");<br/>}</span></pre><p id="c5ca" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">但是…等等…发生了什么。为什么会失败？你那里就有信息。传下去:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="2cb6" class="lj lk it lf b gy ll lm l ln lo">try {<br/>...<br/>} catch (IOException e) {<br/>  throw new IllegalStateException("failed to write", e);<br/>}</span></pre><p id="cab0" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">有那么难吗？</p><p id="ed29" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果从catch块中抛出异常，请在新的异常中包含异常原因。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="6740" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">无故记录</h1><p id="460e" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">这类似于不重新抛出异常。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="ad4d" class="lj lk it lf b gy ll lm l ln lo">try {<br/>...<br/>} catch (IOException e) {<br/>  log.warn("failed to write");<br/>}</span></pre><p id="27fb" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">再问一次，为什么？为什么写不出来？将异常记录在日志中。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="0d5b" class="lj lk it lf b gy ll lm l ln lo">try {<br/>...<br/>} catch (IOException e) {<br/>  log.warn("failed to write", e);<br/>}</span></pre><p id="7c5d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">没那么难，加到日志里。您可以在日志配置文件中过滤掉它。但是如果你甚至不尝试去记录，你将永远不会拥有它。</p><p id="80f0" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">通常，如果您在catch块中登录，请确保您记录了源异常。如果您静默地捕捉到一个异常，您至少应该添加一个跟踪日志。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="788b" class="lj lk it lf b gy ll lm l ln lo">try {<br/>...<br/>} catch (IOException e) {<br/>  log.trace("Nothing to see here", e);<br/>}</span></pre><p id="cb6c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这样，当出于某种原因需要调试这些“永远不会发生”或“不重要”的代码块时，这些跟踪日志将变得非常有用。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="d40f" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">系统输出日志记录</h1><p id="7f7d" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">说到日志，System.out不是日志。事实上，除非您正在编写某种控制台应用程序，否则永远不要使用System.out。</p><p id="3305" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在我的团队中，我们甚至使用checkstyle来强制执行System.out、System.err等在我们的代码库中任何地方都没有使用。</p><p id="d3c8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">始终使用日志框架。有很多可供选择。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="b5a0" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">系统.退出</h1><p id="5e7f" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">你在写一个控制台应用吗？没有吗？不要用。使用checkstyle来强制禁止任何人使用它。</p><p id="af8d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">System.exit将做到这一点。退出。立刻。</p><p id="5362" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这永远不是你想要的。</p><p id="327a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">而是抛出异常。甚至像IllegalStateException这样的运行时异常。</p><p id="6f7f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果你正在编写一个控制台应用程序，我仍然会质疑System.exit的必要性。如果你从main抛出一个异常，它将传播到JVM中，并导致退出代码为-1。</p><p id="add7" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果您必须严格控制程序返回的退出代码，请仅使用System.exit。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9345056ad94207323930a23cf6b1e870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*oUUK-c5KR3gNj9tt4URfrQ.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片来自<a class="ae kb" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=159359" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><h1 id="af48" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">重新发明轮子</h1><p id="e1f3" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">你会编写自己的java.util.List版本吗？</p><p id="1560" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">还是自己的SQL实现？</p><p id="b847" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">大概不会。</p><p id="17cc" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在你做任何事情之前，先快速搜索一下。看看别人以前有没有做过。你不需要使用他们的实现，但你至少可以从中学习。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/54284dcb4d9f32bbcf4a2a9856acc85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*QmsrY67bPjyxEXDOMfn0rg.jpeg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">来自<a class="ae kb" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=870757" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae kb" href="https://pixabay.com/users/Bru-nO-1161770/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=870757" rel="noopener ugc nofollow" target="_blank">Bruno glt sch</a>的图片</figcaption></figure><h1 id="0852" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">货币的浮点数</h1><p id="4bbd" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">货币需要分数。</p><p id="7ff8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">浮点数提供分数。</p><p id="a504" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">他们不一样。</p><p id="427a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">浮点数是一个模糊数。这意味着它不是一个精确的值。因此它不能做精确的数学运算。</p><p id="2a10" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">如果你的银行说，“我们在你的银行账户上少了几美元”，你会接受吗？不要！</p><p id="1c73" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">那就不要在你的app里做。</p><p id="d64f" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">使用像Joda Money这样的库。或者如果你一定要BigDecimal。</p><p id="2d1d" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">这不仅是一个好主意，这是法律。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/6742f2252737960f0d59b0f02818157c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*rGv68El636flMexPGDTB3g.jpeg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片由<a class="ae kb" href="https://pixabay.com/users/WILLGARD-4665627/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3672347" rel="noopener ugc nofollow" target="_blank"> Willgard Krause </a>提供，来自<a class="ae kb" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3672347" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><h1 id="ec10" class="mc lk it bd md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my bi translated">时间…你做错了</h1><p id="9223" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">对我们人类来说，时间似乎是一件非常明显的事情。但正如爱因斯坦所展示的那样，它绝不是。</p><p id="b35c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">在没有进入量子理论和时间膨胀的情况下，计算机编程中的时间是非常非常困难的。</p><p id="b59e" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">让我们考虑一下2015年12月12日下午2点这样简单的事情。似乎很精确。</p><p id="600a" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">不对！</p><p id="1665" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">由于时区等因素，这个时间可以实时表示任意数量的实际实例。</p><p id="256c" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">为了深入了解时间，我强烈推荐这篇文章，<a class="ae kb" href="https://medium.com/@kstenerud/time-and-timezones-getting-it-right-b91fb31ccca6" rel="noopener">时间和时区:正确对待</a></p><p id="906e" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">总的来说，让自己了解时间的复杂性。完全理解你是如何在你的上下文中使用时间和日期的。不要假设。没有一个正确的答案。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="8e18" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">遗产</h1><p id="4a67" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">你见过5个或更多类深的继承树吗？</p><p id="b67b" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">遗产是伟大的，同时也是可怕的。它允许“是”关系。以及继承行为的能力。这可以减少代码重复。</p><p id="5c73" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">但是我们经常会做过头。</p><p id="7064" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">继承引入了各种奇怪的问题，比如覆盖行为、默认行为、类型化。</p><p id="b060" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">总的来说，合成应该优先于遗传。不要用继承来避免代码重复。它应该只存在于真实的关系中。即便如此，界面可能更适合。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="962b" class="mc lk it bd md me nl mg mh mi nm mk ml mm nn mo mp mq no ms mt mu np mw mx my bi translated">优步函数</h1><p id="d7f8" class="pw-post-body-paragraph kc kd it ke b kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz im bi translated">它可以切片，可以切丁，可以破碎，而且无法测试。</p><p id="a73e" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我们都写过变大的函数。它们有大量的嵌套循环和分支。处理各种不同的配置和条件。</p><p id="9108" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">但是我们会对它们都进行测试吗？你是否编写了单元测试来实际测试每个分支的每个排列。</p><p id="9840" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">有一个常用来判断函数复杂度的度量，<a class="ae kb" href="https://en.wikipedia.org/wiki/Cyclomatic_complexity" rel="noopener ugc nofollow" target="_blank">圈复杂度</a>。此指标允许您为您的功能复杂性分配一个数值。值太高表示有些东西太难测试，应该重构。</p><p id="3f43" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">现在，这不是一个完美的测量，但它是一个开始。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/9cc4efba0c347683cab886a31bfcbc0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*ldXJND38N7PUecQ-n6_qWQ.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">https://xkcd.com/844/<a class="ae kb" href="https://xkcd.com/844/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="6e50" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">那么我们如何写出“好”的代码呢？</p><p id="cc99" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">就像生活中的大多数事情一样，什么是好的完全是主观的。坏与好之间没有完美的分界线。甚至这里提到的一些“反模式”也可能是谨慎的。</p><p id="57ef" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">但是随着我们口味的进化，我们学会了更好地判断食物、行为和领导力。有了经验和知识共享，我们可以更好地判断编码中的良好实践。我们学会识别不好的模式和它们背后的原因。这让我们在未来做出更好的选择，避免陷阱。</p><p id="6ec3" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">我还建议使用工具来实施“好的”编程。</p><p id="beca" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">有很多选择:</p><ul class=""><li id="d3f7" class="nr ns it ke b kf kg kj kk kn nt kr nu kv nv kz nw nx ny nz bi translated"><a class="ae kb" href="https://pmd.github.io" rel="noopener ugc nofollow" target="_blank"> PMD </a></li><li id="5a98" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated"><a class="ae kb" href="https://github.com/spotbugs/spotbugs" rel="noopener ugc nofollow" target="_blank">斑点虫子</a></li><li id="21f0" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated"><a class="ae kb" href="https://www.sonarqube.org" rel="noopener ugc nofollow" target="_blank">声纳</a></li><li id="1c25" class="nr ns it ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated"><a class="ae kb" href="http://checkstyle.sourceforge.net" rel="noopener ugc nofollow" target="_blank">检查样式</a></li></ul><p id="c8a8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">了解这些工具，并将它们集成到您的构建过程中。我今天在这里列出的许多问题以及更多的问题都可以通过使用它们来阻止它们进入您的代码库。</p><p id="c6f8" class="pw-post-body-paragraph kc kd it ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz im bi translated">你“最喜欢”的反模式或代码味道是什么？</p></div></div>    
</body>
</html>