<html>
<head>
<title>Writing koa/nuxt applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写koa/nuxt应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/writing-koa-nuxt-applications-a2d6b73ecde5?source=collection_archive---------3-----------------------#2018-10-23">https://itnext.io/writing-koa-nuxt-applications-a2d6b73ecde5?source=collection_archive---------3-----------------------#2018-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/423cf5cb6900a035dcde9da92685bf9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3fMwtfVkHu-sBh5RcoBOSA.png"/></div></div></figure><p id="f80f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您已经准备好创建新的应用程序了。你以<a class="ae kw" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue 2 </a>作为你的框架</p><p id="5b7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是您希望您的应用程序是:</p><p id="e5de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以你决定用<a class="ae kw" href="https://nuxtjs.org/" rel="noopener ugc nofollow" target="_blank">Nuxt 2</a>&amp;<a class="ae kw" href="https://koajs.com/" rel="noopener ugc nofollow" target="_blank">Koa 2</a><br/>制作一个<a class="ae kw" href="https://hiswe.github.io/2018/12-vue-with-nuxt/" rel="noopener ugc nofollow" target="_blank">通用Web应用程序</a>，它将:</p><ul class=""><li id="21e5" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">紧固第一次渲染</li><li id="e0c8" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">能够在客户端不激活JS的情况下运行</li></ul><p id="57e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">备注:</strong></p><ul class=""><li id="25a7" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">你需要熟悉Koa/Nuxt。</li><li id="7a36" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">要知道Nuxt和Koa都使用了<code class="fe ll lm ln lo b">context (ctx)</code> &amp; <code class="fe ll lm ln lo b">middleware</code>的概念。在下面的帖子中，我已经尽我所能的将它们区分开来，但是如果你感到困惑，请仔细阅读，并尝试将它们分类😅</li><li id="81e1" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">你可以在<a class="ae kw" href="https://github.com/Hiswe/koa-nuxt-example" rel="noopener ugc nofollow" target="_blank"> koa-nuxt-example库</a>中找到我接下来要说的工作示例</li></ul><h1 id="1d51" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">为表达而塑造</h1><p id="9bed" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">因为<a class="ae kw" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> express.js </a>是最常用的Node.js服务器框架，大部分UWA框架<code class="fe ll lm ln lo b">render function</code>都是为它塑造的。</p><p id="cbe8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这意味着在express中，<a class="ae kw" href="https://github.com/nuxt/create-nuxt-app/blob/master/template/server/index-express.js" rel="noopener ugc nofollow" target="_blank"> Nuxt集成是开箱即用的</a>。你只需要像任何快速中间件一样调用它:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4c0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">既然我们想使用Koa，我们将需要制作我们自己的中间件。<br/>不需要考虑太多关于集成的问题，因为这个问题已经解决了，但是<a class="ae kw" href="https://github.com/nuxt/create-nuxt-app/blob/master/template/server/index-koa.js" rel="noopener ugc nofollow" target="_blank"> Nuxt社区</a></p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c1af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你只对服务器渲染感兴趣的话，这将会很完美。</p><h1 id="8745" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">搬运岗位</h1><p id="069f" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">假设我们希望能够发布一个表单。</p><ul class=""><li id="ae7c" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">首先我们将安装/使用<a class="ae kw" href="https://www.npmjs.com/package/koa-router" rel="noopener ugc nofollow" target="_blank"> koa-router </a>和<a class="ae kw" href="https://www.npmjs.com/package/koa-body" rel="noopener ugc nofollow" target="_blank"> koa-body </a></li><li id="baa6" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">然后有了这些，我们将能够处理我们的<code class="fe ll lm ln lo b">POST</code>行动</li><li id="2bd3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">我们可能想在它里面做一个数据库调用(例子中的<code class="fe ll lm ln lo b">doSomethingAsync</code>)</li></ul><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="bc12" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这还不错:</p><ul class=""><li id="ae0a" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">我们现在可以发布一些数据</li><li id="79b1" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">重定向到<code class="fe ll lm ln lo b">/</code>，Nuxt将处理标记</li></ul><p id="1cc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">JSON响应可以稍后由添加</p><ul class=""><li id="f1cd" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">正在检查请求是什么<code class="fe ll lm ln lo b">Content-Type</code>头(<code class="fe ll lm ln lo b">ctx.is('application/json')</code></li><li id="0848" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">不要重定向</li><li id="0d65" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">发回适当的响应</li></ul><h1 id="3c26" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">处理错误</h1><p id="6a56" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我们应该写一个错误中间件。它将确保如果出现问题，我们的应用程序不会崩溃。</p><p id="877f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了捕捉所有的东西，它将是我们的第一个中间件。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e001" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以现在如果有任何东西抛出(DB调用，JSON解析…)，我们将呈现一个打印了错误的页面。</p><h1 id="6111" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">用Nuxt处理服务器数据</h1><p id="15d5" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我们还应该将一些数据验证发送回用户表单。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/347402a1a135429349d401889f3dc255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqA3uRHW4zCdO4DKsWsrGA@2x.jpeg"/></div></div></figure><p id="db3f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了在Nuxt应用程序中显示任何验证，我们需要:</p><ul class=""><li id="3551" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">在我们的发布路由和重定向之间保存数据</li><li id="093e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">将这些数据传递给Nuxt应用程序</li><li id="e2f6" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">用它做点什么</li></ul><h2 id="75dd" class="mz lq iq bd lr na nb dn lv nc nd dp lz kj ne nf md kn ng nh mh kr ni nj ml nk bi translated">Koa会话</h2><p id="5786" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">在路由之间处理数据的最常见方式是使用会话。<br/>为此，我们将使用<a class="ae kw" href="https://www.npmjs.com/package/koa-session" rel="noopener ugc nofollow" target="_blank"> koa-session </a>。</p><p id="1b3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.npmjs.com/package/koa-session#example" rel="noopener ugc nofollow" target="_blank">安装指南</a>非常简单明了。<br/>这将添加一个<code class="fe ll lm ln lo b">ctx.session</code>对象，我们可以在其中传递任何类型的信息。</p><p id="0403" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是要遵循的不同步骤:</p><ul class=""><li id="0cfe" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">验证我们的表单</li><li id="1b98" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">将验证添加到会话</li><li id="b1b3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">将其传递给Nuxt<br/>——因为Nuxt不使用Koa <code class="fe ll lm ln lo b">ctx</code>而是使用<code class="fe ll lm ln lo b">req</code> &amp; <code class="fe ll lm ln lo b">res</code>，将我们的会话信息复制到那些对象中。<br/>–这将在呈现nuxt的中间件之前的Koa中间件中完成</li><li id="4d53" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">通过使用<br/>-一个<a class="ae kw" href="https://nuxtjs.org/guide/routing#middleware" rel="noopener ugc nofollow" target="_blank"> Nuxt中间件</a><br/>-用于Vuex集成的<a class="ae kw" href="https://nuxtjs.org/guide/vuex-store#the-nuxtserverinit-action" rel="noopener ugc nofollow" target="_blank">nuxtServerInit</a><br/>将它集成到Nuxt应用程序中。</li><li id="2b22" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">…既然现在都在Vue领域，就用我们的Vue组件吧。</li></ul><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="8f5d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<em class="nl">商店/index.js </em></p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="6ea0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，我们现在有了一个更新了服务器验证的Vuex商店。使用Vue组件中的mapState助手来访问它。</p><h2 id="7113" class="mz lq iq bd lr na nb dn lv nc nd dp lz kj ne nf md kn ng nh mh kr ni nj ml nk bi translated">无法在发送邮件头后设置它们</h2><p id="e90f" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">现在，我们在POST路径上设置验证，并且不再更新它。</p><p id="9153" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这意味着验证将持续到用户发送一个好的表单。<br/>因此，如果用户更改页面并返回到表单，<strong class="ka ir">应用程序仍将显示最后的验证结果</strong> <em class="nl">。</em> <br/>这是不对的，我们应该清除曾经显示过的验证。</p><p id="c6c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过更新将我们的会话链接到Nuxt的Koa中间件，这应该很容易。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="cf5d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ⚠️但这没用</strong></p><p id="3695" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你会在服务器日志中找到一个<code class="fe ll lm ln lo b">Can't set headers after they are sent</code>。<br/>问题来自于<code class="fe ll lm ln lo b">nuxtMiddleware</code> &amp;它是如何绕过常规Koa流的。</p><p id="942c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常我们设置一个<code class="fe ll lm ln lo b">ctx.body</code>，所有之前的中间件将继续工作。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/23ae7049c463c53ee6b31701d9d95951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xn2R4p1tN_aDwfZHHRqWOw@2x.jpeg"/></div></div></figure><p id="4b41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但这就是这里发生事情</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/1e423a8ad29502e14e50d6463f6485a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5k9M0U616W1UY4OPIb3pw@2x.jpeg"/></div></div></figure><p id="bfc3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了解决这个问题，我们需要确保在Nuxt中间件之前设置我们的头。</p><h2 id="1c77" class="mz lq iq bd lr na nb dn lv nc nd dp lz kj ne nf md kn ng nh mh kr ni nj ml nk bi translated">自动提交:错误的救援</h2><p id="ae19" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">Koa-session允许我们使用<a class="ae kw" href="https://www.npmjs.com/package/koa-session#sessionmanuallycommit" rel="noopener ugc nofollow" target="_blank">manually commit()方法</a>手动发送报头</p><p id="f8be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我们必须像这样重构我们的服务器代码:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="76f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将解决我们的问题❤️ <br/>我们现在只需要记住每次更新会话时调用<code class="fe ll lm ln lo b">manuallyCommit()</code>😶</p><h1 id="df32" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">用Nuxt显示所有错误</h1><p id="b8ef" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我们还有最后一件事要处理。现在我们的<code class="fe ll lm ln lo b">handleError</code>中间件会让Koa显示错误。但是在Nuxt中支持一个<a class="ae kw" href="https://nuxtjs.org/guide/views#error-page" rel="noopener ugc nofollow" target="_blank">错误布局</a>，我们应该利用它。</p><p id="0fa3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们需要修改我们的<code class="fe ll lm ln lo b">handleError</code>中间件:</p><ul class=""><li id="3bdb" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">将错误设置到<code class="fe ll lm ln lo b">ctx.req</code>对象(记住，Nuxt仍然只与<code class="fe ll lm ln lo b">req</code> &amp; <code class="fe ll lm ln lo b">res</code>一起工作)</li><li id="e8ee" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">调用Nuxt来呈现我们的<code class="fe ll lm ln lo b">handleError</code>中间件中的页面</li><li id="abdc" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://nuxtjs.org/guide/routing#middleware" rel="noopener ugc nofollow" target="_blank">编写一个Nuxt中间件</a>，通过调用<a class="ae kw" href="https://nuxtjs.org/api/context" rel="noopener ugc nofollow" target="_blank"> nuxtContext.error </a>来呈现错误页面</li></ul><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="242c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于Nuxt部分:</p><ul class=""><li id="c2f5" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">创建一个<code class="fe ll lm ln lo b">middleware/handle-server-errors.js</code>文件</li><li id="e303" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">请参考<code class="fe ll lm ln lo b">nuxt.config.js</code></li></ul><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="524e" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="25f9" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">让Nuxt和Koa一起工作并不像和Express一起工作那么顺利。我还是更喜欢和Koa一起工作，再多一点样板文件，一切都会好的。</p><p id="c3f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我确信还有改进的空间，但它对我很有效。缺点主要是更多的样板代码和手动处理会话更新。</p><p id="45d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">这里的大部分代码是不必要的，如果</strong></p><ul class=""><li id="ccd3" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">你只是想要一些基本的服务器渲染</li><li id="325a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">您不需要支持任何类型的会话</li></ul><p id="b61d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">支持异步代码应该很容易</strong></p><ul class=""><li id="dd1d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">Koa就是围绕这一点构建的</li><li id="6807" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://nuxtjs.org/guide/vuex-store#the-nuxtserverinit-action" rel="noopener ugc nofollow" target="_blank"> nuxtServerInit </a>支持<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank">异步功能</a></li><li id="ca1e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">同样的道理也适用于<a class="ae kw" href="https://nuxtjs.org/guide/routing#middleware" rel="noopener ugc nofollow" target="_blank"> Nuxt中间件</a></li></ul><p id="3162" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">提醒一下，你可以在这里找到完整的例子<a class="ae kw" href="https://github.com/Hiswe/koa-nuxt-example" rel="noopener ugc nofollow" target="_blank"/></p><p id="edef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">💚<strong class="ka ir"> Nuxt💙KOA </strong></p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="93b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nl">最初发布于</em><a class="ae kw" href="https://hiswe.github.io/2018/13-koa-nuxt/" rel="noopener ugc nofollow" target="_blank"><em class="nl">hiswe . github . io</em></a><em class="nl">。</em></p></div></div>    
</body>
</html>