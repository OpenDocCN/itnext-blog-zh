<html>
<head>
<title>Flutter Navigation with AutoRoute</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动路由颤振导航</h1>
<blockquote>原文：<a href="https://itnext.io/manage-your-navigation-with-autoroute-in-flutter-cc72df48b137?source=collection_archive---------0-----------------------#2022-02-06">https://itnext.io/manage-your-navigation-with-autoroute-in-flutter-cc72df48b137?source=collection_archive---------0-----------------------#2022-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0be3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Flutter中使用AutoRoute管理您的导航</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6a72639fec640aa2ecb77c99984cd040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pTKLsLrcbb-dsSSZ3_5y_Q.png"/></div></div></figure><p id="7b83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">导航对于任何应用都是非常重要的，在社区的帮助下，Flutter有很多解决方案。随着Navigator 2.0的推出，导航解决方案也发生了变化。今天，我将谈论其中一个解决方案AutoRoute…</p><p id="7fcf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">软件包的创建者是这样向我们解释<a class="ae ln" href="https://pub.dev/packages/auto_route" rel="noopener ugc nofollow" target="_blank"> auto_route </a>的；</p><blockquote class="lo lp lq"><p id="23b7" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">什么是自动路由？</p><p id="1529" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">这是一个Flutter导航包，它允许强类型参数传递，轻松的深度链接，并使用代码生成来简化路线设置，也就是说，它需要最少的代码来生成应用程序内导航所需的一切。</p><p id="1f5a" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">为什么选择自动路由？</p><p id="3a83" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">如果您的应用程序需要深度链接或保护路由，或者只是一个干净的路由设置，您将需要使用命名/生成的路由，并且您将最终为中介参数类编写大量样板代码，检查所需的参数，提取参数，以及一堆其他东西。AutoRoute为您做了所有这些，甚至更多。</p></blockquote><p id="139e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我们将看到如何在我们的项目中实现<a class="ae ln" href="https://pub.dev/packages/auto_route" rel="noopener ugc nofollow" target="_blank">自动路线</a>。最后，我将给出一个工作示例。事不宜迟，我们开始吧。</p><h2 id="0f7f" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">入门指南</h2><ul class=""><li id="d04d" class="mo mp iq kt b ku mq kx mr la ms le mt li mu lm mv mw mx my bi translated">让我们从添加<a class="ae ln" href="https://pub.dev/packages/auto_route" rel="noopener ugc nofollow" target="_blank"> auto_route </a>到我们的项目开始。</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="de25" class="lv lw iq na b gy ne nf l ng nh">dependencies:        <br/>  auto_route: [latest-version]        <br/>        <br/>dev_dependencies:        <br/>  auto_route_generator: [latest-version]        <br/>  build_runner: [latest-version]</span></pre><ul class=""><li id="f7bf" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">然后，让我们像这样为我们的路线创建一个路线页面。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="4bce" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">您可以使用replaceInRouteName参数将自动生成的路由名称从ProducDetailsPageRoute缩短为ProductDetailsRoute。</li><li id="a106" class="mo mp iq kt b ku nn kx no la np le nq li nr lm mv mw mx my bi translated">现在我们只需要运行发电机。您可以使用[watch]标志来监视文件系统的编辑和必要的重建。</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="e8da" class="lv lw iq na b gy ne nf l ng nh">flutter packages pub run build_runner watch</span></pre><ul class=""><li id="ba19" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">如果您只想运行一次并退出，请在项目终端中运行这段代码。</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="51ed" class="lv lw iq na b gy ne nf l ng nh">flutter packages pub run build_runner build</span></pre><ul class=""><li id="6011" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">运行我们的发电机后，只剩下一件事要做。让我们转到我们的<code class="fe ns nt nu na b">main.dart</code>文件，像这样修改我们的MaterialApp。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="1411" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这样，我们成功地创建了我们的路线系统。对于导航，我们有不同的方法来导航到我们想要的页面。这里有一些如何根据我们的需要导航的例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h1 id="7c2b" class="nv lw iq bd lx nw nx ny ma nz oa ob md jw oc jx mg jz od ka mj kc oe kd mm of bi translated">奖金</h1><h2 id="80c9" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">传递参数</h2><p id="bac6" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">那是最好的部分！！AutoRoute自动检测并处理您的页面参数，生成的Route对象将提供您的页面需要的所有参数，包括路径/查询参数。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="6b75" class="lv lw iq na b gy ne nf l ng nh"><strong class="na ir">class</strong> <strong class="na ir">ProductDetailsPage</strong> <strong class="na ir">extends</strong> <strong class="na ir">StatelessWidget</strong> {        <br/> <strong class="na ir">const</strong> ProductDetailsPage({<strong class="na ir">required</strong> <strong class="na ir">this</strong>.product});        <br/>        <br/>  <strong class="na ir">final</strong> Product product;     <br/>  ...</span></pre><p id="c04f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在导航时，你可以像这样简单地添加。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="e5b2" class="lv lw iq na b gy ne nf l ng nh">router.push(ProductDetailsRoute(product: product));</span></pre><h2 id="c772" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">返回结果</h2><p id="a22e" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">您可以使用pop完成器返回结果。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="0bb8" class="lv lw iq na b gy ne nf l ng nh"><strong class="na ir">var</strong> result = <strong class="na ir">await</strong> router.push(LoginRoute());</span></pre><p id="7445" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后在你的<code class="fe ns nt nu na b">LoginPage</code>里面弹出结果。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="8057" class="lv lw iq na b gy ne nf l ng nh">router.pop(<strong class="na ir">true</strong>);</span></pre><p id="f537" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是你可以看到，这种方法是动态的，未来可能会有风险。为了避免使用动态值，我们可以使用这个方法来指定。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="7145" class="lv lw iq na b gy ne nf l ng nh">AutoRoute&lt;bool&gt;(page: LoginPage),</span></pre><p id="103b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后当我们导航时，我们可以指定我们期望的结果类型。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="d253" class="lv lw iq na b gy ne nf l ng nh"><strong class="na ir">var</strong> result = <strong class="na ir">await</strong> router.push&lt;bool&gt;(LoginRoute());</span></pre><p id="47e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们用相同的类型。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="9584" class="lv lw iq na b gy ne nf l ng nh">router.pop&lt;bool&gt;(<strong class="na ir">true</strong>);</span></pre><h2 id="d3ec" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">无上下文导航</h2><p id="f984" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">要在没有上下文的情况下导航，您可以简单地将生成的路由器赋给一个全局变量。但是不建议使用全局变量，这被认为是一种不好的做法，大多数时候应该使用依赖注入。可以使用<a class="ae ln" href="https://pub.dev/packages/get_it" rel="noopener ugc nofollow" target="_blank"> get_it </a>进行依赖注入。下面是怎么做的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h2 id="11e8" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">路径参数(动态线段)</h2><p id="4d35" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">您可以通过在动态段前面加上冒号来定义动态段。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="15ec" class="lv lw iq na b gy ne nf l ng nh">AutoRoute(path: '/product/:id', page: ProductDetailsPage),</span></pre><h2 id="1d3c" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">重定向路径</h2><p id="5b2a" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">可以使用<code class="fe ns nt nu na b">redirectTo</code>重定向路径。当<code class="fe ns nt nu na b">/</code>匹配时，以下设置将引导我们到<code class="fe ns nt nu na b">/books</code>。</p><h2 id="4c5c" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">路线守卫</h2><p id="4e21" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">路由守卫是中间件或拦截器，如果不经过指定的守卫，就不能将路由添加到堆栈中，守卫对于限制对特定路由的访问非常有用。我们通过从auto_route包中扩展<code class="fe ns nt nu na b">AutoRouteGuard</code>并在<code class="fe ns nt nu na b">onNavigation</code>方法中实现我们的逻辑来创建一个路由守卫。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="96b6" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">在那之后，我们把我们的警卫分配到我们想要保护的路线上。</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="2899" class="lv lw iq na b gy ne nf l ng nh">AutoRoute(page: ProfileScreen, guards: [AuthGuard]);</span></pre><ul class=""><li id="ceac" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">最后，我们将AuthGuard传递给生成的路由器。</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="a150" class="lv lw iq na b gy ne nf l ng nh"><strong class="na ir">final</strong> _appRouter = AppRouter(authGuard: AuthGuard());</span></pre><h2 id="9272" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">导航观察员</h2><p id="f42e" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la og lc ld le oh lg lh li oi lk ll lm ij bi translated">你可以观察你的导航动作，比如推送、替换、弹出等。我们通过扩展一个<code class="fe ns nt nu na b">AutoRouterObserver</code>实现了一个自动路由观察器，它只是一个支持tab路由的<code class="fe ns nt nu na b">NavigatorObserver</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="64d5" class="mo mp iq kt b ku kv kx ky la ni le nj li nk lm mv mw mx my bi translated">我们简单地像这样添加我们的导航器。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="fe52" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文到此为止。🎉🎉</p><p id="5493" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要了解更多信息，您可以查看这里的官方文档👇👇</p><div class="oj ok gp gr ol om"><a href="https://autoroute.vercel.app/basics/root_router" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">AutoRoute *颤振导航变得简单</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">根路由器是应用程序的顶级路由器，充当应用程序的导航入口点。使用一个…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">autoroute.vercel.app</p></div></div></div></a></div><p id="40aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">感谢您的阅读！</strong>👏👏</p><p id="e5b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你喜欢这篇文章，请点击👏按钮(你知道你可以升到50吗？)</p><p id="7d9d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另外，别忘了关注我，在你的社交网站上分享这篇文章！也让你的朋友知道吧！！</p></div></div>    
</body>
</html>