<html>
<head>
<title>Towards Elixir/Phoenix tasks automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">走向Elixir/Phoenix任务自动化</h1>
<blockquote>原文：<a href="https://itnext.io/towards-elixir-phoenix-tasks-automation-684c0388b100?source=collection_archive---------2-----------------------#2018-02-04">https://itnext.io/towards-elixir-phoenix-tasks-automation-684c0388b100?source=collection_archive---------2-----------------------#2018-02-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3d3dc4e9767745a62e4c013286a1401e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tR3-48I1uCC2rMtCv2OUuQ.png"/></div></div></figure><p id="7162" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Ftowards-elixir-phoenix-tasks-automation-684c0388b100" rel="noopener ugc nofollow" target="_blank"> <em class="kx">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="645c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为一个Elixir迷，我一直在寻找新的工具来帮助我提高Elixir/Phoenix的开发技能。我最近遇到了<a class="ae kw" href="https://github.com/slashmili/ex_guard" rel="noopener ugc nofollow" target="_blank"> ExGuard </a> — <em class="kx"> ExGuard是一个混合命令，用于处理文件系统修改事件。</em></p><p id="c665" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以定制ExGuard来自动执行各种药剂/凤凰任务，以满足个人需求。这样做需要一些步骤。</p><p id="6d82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第一步</strong>:</p><p id="804d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将ex_guard作为依赖项添加到mix.exs中—</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f034" class="lh li iq ld b gy lj lk l ll lm">defp deps <strong class="ld ir">do<br/>  </strong>[<br/>     {:ex_guard, "~&gt; 1.3", only: :dev}<br/>  ]<br/>end</span></pre><p id="6ec8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二步:</strong></p><p id="ae6e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Elixir/Phoenix应用程序的根目录下创建. exguard.exs文件，并将其定制为自动运行commads。一个示例配置文件—</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="1a93" class="lh li iq ld b gy lj lk l ll lm">use ExGuard.Config<br/><br/>guard("formatter", run_on_start: <strong class="ld ir">true</strong>)<br/>|&gt; command("mix format")<br/>|&gt; watch(~r{\.(erl|ex|exs|eex|xrl|yrl)\z}i)<br/>|&gt; ignore(~r{deps})<br/>|&gt; notification(:auto)<br/><br/>guard("credo", run_on_start: <strong class="ld ir">true</strong>)<br/>|&gt; command("mix credo")<br/>|&gt; watch(~r{\.(erl|ex|exs|eex|xrl|yrl)\z}i)<br/>|&gt; ignore(~r{deps})<br/>|&gt; notification(:auto)<br/><br/>guard("test", run_on_start: <strong class="ld ir">true</strong>)<br/>|&gt; command("mix test")<br/>|&gt; watch(~r{\.(erl|ex|exs|eex|xrl|yrl)\z}i)<br/>|&gt; ignore(~r{deps})<br/>|&gt; notification(:auto)</span></pre><p id="0288" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个将运行Elixir 1.6附带的新的awesome <strong class="ka ir"> mix format </strong>命令。您可能需要提供一个. formatter.exs文件，它才能正常工作。查看此处的链接<a class="ae kw" href="https://hashrocket.com/blog/posts/format-your-elixir-code-now" rel="noopener ugc nofollow" target="_blank">了解更多详情。</a></p><p id="d0da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二个将运行credo — <em class="kx">一个针对Elixir的静态分析工具。</em>您需要添加它自己的依赖项，如这里的<a class="ae kw" href="https://github.com/rrrene/credo" rel="noopener ugc nofollow" target="_blank">所述。</a></p><p id="1af5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第三个将运行<strong class="ka ir">混合测试</strong>命令并执行你的药剂/凤凰测试。</p><p id="ce58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">显然，可以适当地添加/删除/修改上面的命令。</p><p id="b0a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里<strong class="ka ir"> run_on_start: true </strong>表示<strong class="ka ir">混合保护</strong>将在启动时运行该命令。</p><p id="dad7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第三步:</strong></p><p id="55ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行下面的命令，只要任何具有上述模式的文件发生变化，相应的命令就会被执行</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="db47" class="lh li iq ld b gy lj lk l ll lm">mix guard </span></pre><h1 id="9ef2" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><strong class="ak">通知</strong></h1><p id="8f1d" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">为了让通知正常工作，您需要正确设置您的终端通知程序。在mac机上，你可以通过自制软件安装<a class="ae kw" href="https://github.com/julienXX/terminal-notifier" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">终端通知程序</strong></a>—</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="e679" class="lh li iq ld b gy lj lk l ll lm">brew install terminal-notifier</span></pre><p id="aade" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于其他平台，请遵循<a class="ae kw" href="https://github.com/slashmili/ex_guard" rel="noopener ugc nofollow" target="_blank"> github </a>上的说明。</p><p id="2830" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦设置完成，<strong class="ka ir">混合防护</strong>应该会显示一个漂亮的通知—</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/de291328e3b4dff4e689a683e82956ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*Q8JZBOOVyfa015Uwug5s3Q.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">对于混合格式命令</figcaption></figure><h1 id="d4e2" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">其他类似工具</h1><p id="9b8f" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">此外，检查此项目以运行Elixir项目的测试—<a class="ae kw" href="https://github.com/lpil/mix-test.watch" rel="noopener ugc nofollow" target="_blank">https://github.com/lpil/mix-test.watch</a></p><p id="abd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然，主要是为了运行测试，它可以被配置为运行其他命令，如<strong class="ka ir"> mix guard </strong>。</p><p id="f446" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kx">这是我在medium上的第一篇帖子。我希望它对一些人有用。更多详细和深入的技术文章，请点击这里或点击</em> <a class="ae kw" href="https://twitter.com/meraj_enigma" rel="noopener ugc nofollow" target="_blank"> <em class="kx"> twitter </em> </a> <em class="kx">关注我。</em></p></div></div>    
</body>
</html>