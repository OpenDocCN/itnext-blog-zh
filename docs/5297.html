<html>
<head>
<title>3 Important Tips to Build a Successful Internal Chrome Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建成功的内部Chrome扩展的3个重要技巧</h1>
<blockquote>原文：<a href="https://itnext.io/3-important-tips-to-build-a-successful-internal-chrome-extension-a7169c5c2923?source=collection_archive---------2-----------------------#2021-02-04">https://itnext.io/3-important-tips-to-build-a-successful-internal-chrome-extension-a7169c5c2923?source=collection_archive---------2-----------------------#2021-02-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e6ae053b2e229566b240116d2f3d0421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJkXje9ibwWuI8s39obq1A.jpeg"/></div></div></figure><p id="e73a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果“内部铬延伸”抓住了你的眼睛，祝贺你！你在一个人数不多但不断增长的开发团队中，他们了解Chrome扩展对他们的公司有多强大。我是<a class="ae kw" href="https://extension.dev" rel="noopener ugc nofollow" target="_blank"> extension.dev </a>的联合创始人，这是构建内部Chrome扩展的最快方式。</p><p id="1e83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">在本文中，我将分享3个重要的技巧，帮助你更成功地构建和部署安全的Chrome扩展供内部使用。</strong></p><p id="3e2a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Chrome扩展不仅仅是为了记住密码；它们帮助从初创公司到财富500强的公司快速扩展并节省大量时间。他们通过让开发人员能够为内部工具添加重要的缺失功能和补丁，定制SaaS，或者自动化重复的浏览器工作流来做到这一点。通过扩展，单个开发人员可以通过以下方式提高整个组织的生产力:</p><ul class=""><li id="b24b" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">向他们的CRM/ERP添加批量上传功能</li><li id="426b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">为他们的用户管理内部工具添加急需的按钮</li><li id="8ad6" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">向GitHub和吉拉添加有用的UI元素</li><li id="9871" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">自动化过去在多个网站上进行的繁琐工作流程</li></ul><p id="e691" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是开发和部署供内部使用的Chrome扩展可能会很困难。此外，扩展有时会引起IT/安全部门不必要的关注。</p><p id="c61f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是你可以做得更好的方法。</p></div><div class="ab cl ll lm hu ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ij ik il im in"><h1 id="afec" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">技巧1:正确部署企业扩展</h1><p id="7ebb" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">一旦您构建了将为您的销售人员每周节省时间的扩展，您如何将它安全地交到他们手中，并持续部署更新而不会被Google审查流程阻止？有丑陋的，好的，好的方法来做这件事。</p><p id="cbfa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你在快速迭代，我们推荐好的部署方式，如果你在内部发布，我们推荐好的方式。请继续阅读，看看是如何做到的。</p><h2 id="a72c" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">丑陋的</h2><p id="8a3f" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">有些开发人员会做这样的事情:</p><p id="eccd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">发布公共扩展</strong></p><ul class=""><li id="ee20" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">请不要这样做。任何人都可以找到您的扩展，嗅探您的API，窃取您的凭证，等等。</li><li id="1b15" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">这种情况我们已经见过很多次了。不信的话，在谷歌上查:<code class="fe ni nj nk nl b">inurl: “<a class="ae kw" href="http://chrome.google.com/webstore/detail" rel="noopener ugc nofollow" target="_blank">chrome.google.com/webstore/detail</a>” “internal”</code>显示省略的结果。</li><li id="217e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">每次你试图推出新版本时，你的扩展都是谷歌审查过程的受害者。这会让你的释放停止。</li></ul><p id="87f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">发布未列出的扩展</strong></p><ul class=""><li id="7b23" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">没那么糟糕，因为没有人能够公开找到这个扩展，但是任何有链接的人仍然可以下载它。如果链接泄漏，这是一个问题。</li><li id="b353" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">每次你试图推出新版本时，你的扩展仍将受到谷歌的审查。</li></ul><h2 id="0b9b" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">很好</h2><p id="6b2c" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">如果你不想让它彻底杀死你，你必须考虑其他选择，如:</p><p id="423f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">主持人。Google Drive上的zip文件</strong></p><ul class=""><li id="5c4d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">发送驱动链接，供人们下载并安装到开发人员模式的浏览器上。</li><li id="8ebd" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">这绕过了谷歌审查和你公司内部的审查。如果它不会打扰你，这是一个很好的方法，你也重视快速发布给你的利益相关者。</li></ul><p id="a45f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">主持人。crx文件远程自动更新</strong></p><ul class=""><li id="9411" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">这让你可以完全独立地托管Chrome扩展，并且你可以公开Chrome扩展的链接以供查看。它也可能觉得这个解决方案更合法。</li><li id="567e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">的更新。crx可以立即部署，加速您的迭代。</li><li id="d050" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">将<code class="fe ni nj nk nl b">update_url</code>键添加到您的<code class="fe ni nj nk nl b">manifest.json</code>中</li></ul><pre class="nm nn no np gt nq nl nr ns aw nt bi"><span id="4929" class="mw lt iq nl b gy nu nv l nw nx">{<br/>  "name": "My extension",<br/>  ...<br/>  "update_url": "&lt;http://myhost.com/mytestextension/updates.xml&gt;",<br/>  ...<br/>}</span></pre><ul class=""><li id="453f" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">安装的扩展将定期轮询包含版本号的XML文件的链接。如果轮询的版本号不同于已安装的扩展，扩展将获取。属性<code class="fe ni nj nk nl b">codebase</code>下的XML响应中指定的crx文件:</li></ul><pre class="nm nn no np gt nq nl nr ns aw nt bi"><span id="c98b" class="mw lt iq nl b gy nu nv l nw nx">&lt;?xml version='1.0' encoding='UTF-8'?&gt;<br/>&lt;gupdate xmlns='&lt;http://www.google.com/update2/response&gt;' protocol='2.0'&gt;<br/>  &lt;app appid='aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'&gt;<br/>    &lt;updatecheck codebase='&lt;http://myhost.com/mytestextension/mte_v2.crx&gt;' version='2.0' /&gt;<br/>  &lt;/app&gt;<br/>&lt;/gupdate&gt;</span></pre><ul class=""><li id="81e7" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">更多细节，请参考<a class="ae kw" href="http://www.dre.vanderbilt.edu/~schmidt/android/android-4.0/external/chromium/chrome/common/extensions/docs/autoupdate.html" rel="noopener ugc nofollow" target="_blank">这些</a> <a class="ae kw" href="https://developer.chrome.com/docs/apps/autoupdate/" rel="noopener ugc nofollow" target="_blank">文章</a>。</li></ul><h1 id="ae65" class="ls lt iq bd lu lv ny lx ly lz nz mb mc md oa mf mg mh ob mj mk ml oc mn mo mp bi translated">好的</h1><p id="aa9c" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated"><strong class="ka ir">发布私有扩展</strong></p><ul class=""><li id="9d82" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">这似乎是显而易见的，但是你不会相信有多少开发人员根本不这么做。</li><li id="65d9" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">私下发布使您能够将对扩展的访问限制在您的电子邮件域中的人，或者指定的“可信测试者”电子邮件地址的白名单中。</li><li id="eff4" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">私下出版可能仍然会使你受到谷歌的审查(更少)，但是这仍然会减慢你的迭代周期。根据我们的经验，私下出版将审查时间缩短到1天，而不是公开Chrome扩展所需的3-7天。</li></ul><p id="0698" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">在您的域中强制安装扩展</strong></p><ul class=""><li id="698b" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">你可以通过谷歌管理控制台强制安装应用和扩展。</li><li id="12b5" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">查看<a class="ae kw" href="https://support.google.com/chrome/a/answer/9296680?hl=en" rel="noopener ugc nofollow" target="_blank"> <em class="mv">管理企业扩展</em>白皮书</a>中标题为“创建您自己的内部网络商店”的部分。</li></ul><p id="bf44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">结论:自主主持。拉链还是。crx文件，一旦你准备好发布到你的组织，就私下发布。</strong></p><h1 id="0dcb" class="ls lt iq bd lu lv ny lx ly lz nz mb mc md oa mf mg mh ob mj mk ml oc mn mo mp bi translated">技巧2:安全的消息传递可以拯救你的生命</h1><p id="7378" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">让您的后台脚本(background.js)盲目地信任数据并监听内容脚本(content.js)可能会导致恶意网站控制您的扩展。你应该假设content.js生活在蛮荒的西部。</p><p id="7d72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">幸运的是，您可以控制何时将输入传递给background.js，以及background.js如何处理它们。请继续阅读，找出方法。</p><p id="0746" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但首先，这里有一些可能出错的方式:</p><h2 id="6a85" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">background.js评估content.js中的输入</h2><ul class=""><li id="ae25" class="kx ky iq ka b kb mq kf mr kj od kn oe kr of kv lc ld le lf bi translated">这有时可能很诱人，但请不要这样做。</li><li id="9e07" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">评估使攻击者很容易窃取用户浏览器中的所有cookies，嗅探存储在background.js中的API密钥，并调用background.js中的API来做可怕的事情。</li></ul><h2 id="ac50" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">content.js诱骗background.js做一些恶意的事情</h2><ul class=""><li id="45b7" class="kx ky iq ka b kb mq kf mr kj od kn oe kr of kv lc ld le lf bi translated">即使不进行评估，content.js也可能说服background.js调用破坏性的API，比如修改/删除用户帐户、进行购买或采购等。如果background.js从不单方面进行有后果的API调用，这个问题可以得到缓解。</li><li id="ef32" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">这可能是因为<a class="ae kw" href="https://spectreattack.com/" rel="noopener ugc nofollow" target="_blank"> Spectre攻击</a>有时允许恶意网站从内容脚本中读取数据，即使这两者是“隔离的”。</li></ul><p id="a34b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是你在background.js中自救的方法:</p><h2 id="481e" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">严格限制权限匹配模式</h2><ul class=""><li id="b909" class="kx ky iq ka b kb mq kf mr kj od kn oe kr of kv lc ld le lf bi translated">这保证了您的扩展只在您公司信任的页面上运行。请尽可能做到这一点。</li><li id="ff01" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">您信任的页面，尤其是如果它们是内部工具或SaaS，不太可能欺骗您的扩展调用破坏性的API，或者将不安全的输入传递到background.js中</li></ul><h2 id="f4b0" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">对于不受信任的页面，坚持使用background.js中的只读API调用</h2><ul class=""><li id="1b6a" class="kx ky iq ka b kb mq kf mr kj od kn oe kr of kv lc ld le lf bi translated">有时，您希望将您的扩展部署到不可信的网站上，尤其是如果您正在构建一个scraper。</li><li id="a1fa" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">为了将不受信任的网站劫持你的内容脚本的影响降到最低，尽量在background.js中尽量少调用write APIs。</li></ul><h2 id="6d3f" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">当直接对来自内容脚本的输入采取操作时要小心</h2><ul class=""><li id="fbc4" class="kx ky iq ka b kb mq kf mr kj od kn oe kr of kv lc ld le lf bi translated">永远不要对内容脚本输入调用eval。</li><li id="110c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">尽量不要做使用background.js打开链接或者调用content.js传过来的API URIs之类的事情</li><li id="59b6" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">对于其他任何事情，在对输入做任何事情之前，都要对其进行净化和验证。对<code class="fe ni nj nk nl b">&amp;</code>、<code class="fe ni nj nk nl b">&lt;</code>、<code class="fe ni nj nk nl b">&gt;</code>、<code class="fe ni nj nk nl b">"</code>、<code class="fe ni nj nk nl b">'</code>等字符进行转义，防止意外XSS。</li></ul><p id="4a66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">结论:小心消息传递，将不受信任的消息限制在background.js中，在所有情况下，确保background.js不会盲目地对来自内容的未经确认的输入采取行动。</strong></p><h1 id="8de6" class="ls lt iq bd lu lv ny lx ly lz nz mb mc md oa mf mg mh ob mj mk ml oc mn mo mp bi translated">技巧3:考虑使用远程托管的前端</h1><p id="c518" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">这件事有很多好处。</p><p id="c64a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在你的UI上快速迭代，而不需要接触扩展代码，完全避免了Google的审核过程或者不得不重新部署。</p><p id="300d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在任何你想要的框架中编写你的前端。</p><p id="c7f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以更轻松地迭代您的接口，而不必将前端放在popup.js或扩展Javascript文件中。</p><p id="9cfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mv">一定要考虑远程托管更多UI组件。这些组件可能看起来像覆盖图、模态图和侧边栏。</em></p><p id="0f3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">方法如下:</p><h2 id="c144" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">iframe注射液</h2><p id="fb01" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">超级简单。只需在Vercel或Netlify之类的服务上托管您的前端，记下托管它的URL，并使用content.js将前端作为iframe注入页面。</p><p id="5dda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是一个代码示例:</p><pre class="nm nn no np gt nq nl nr ns aw nt bi"><span id="4acc" class="mw lt iq nl b gy nu nv l nw nx">this.sidebarWrapper = document.createElement("div");<br/>this.sidebarWrapper.className = "sidebar-wrapper";<br/>this.sidebarWrapper.id = "sidebar-wrapper";</span><span id="c19e" class="mw lt iq nl b gy og nv l nw nx">this.iframe = document.createElement("iframe");<br/>this.iframe.id = "sidebar-iframe";<br/>this.iframe.tabIndex = 0;<br/>this.iframe.src = src;</span><span id="9630" class="mw lt iq nl b gy og nv l nw nx">this.sidebarWrapper.appendChild(this.iframe);<br/>document.body.appendChild(this.sidebarWrapper);</span></pre><p id="b9f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">应该指向你的前端，你应该根据喜好调整iframe的位置和尺寸。</p><h2 id="fa08" class="mw lt iq bd lu mx my dn ly mz na dp mc kj nb nc mg kn nd ne mk kr nf ng mo nh bi translated">但是远程托管的前端将如何与我的扩展对话呢？</h2><p id="6c63" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">很好的问题，很容易回答。</p><p id="f990" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">当你的前端想和你的分机通话时，从前端发送消息到background . js……</strong></p><pre class="nm nn no np gt nq nl nr ns aw nt bi"><span id="c44a" class="mw lt iq nl b gy nu nv l nw nx">chrome.runtime.sendMessage("YOUR_EXTENSION_ID",<br/>	{<br/>		/* whatever data you want */<br/>		command: "DO_SOMETHING",<br/>		source: "REMOTE_FRONTEND",<br/>		payload: {<br/>			/* more random data */<br/>		}<br/>	},<br/>	(response: any) =&gt; {<br/>		resolve(response);<br/>	}<br/>);</span></pre><p id="2c6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">…然后，接收来自后台的消息:</strong></p><pre class="nm nn no np gt nq nl nr ns aw nt bi"><span id="caf0" class="mw lt iq nl b gy nu nv l nw nx">chrome.runtime.onMessageExternal.addListener(<br/>  function(request, sender, sendResponse) {<br/>		if (request.command === "DO_SOMETHING") {<br/>			doSomething(request.payload);<br/>		}<br/> });</span></pre><p id="7c62" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">当你想从你的分机和你的前端通话时，从content.js </strong>开始</p><pre class="nm nn no np gt nq nl nr ns aw nt bi"><span id="acfb" class="mw lt iq nl b gy nu nv l nw nx">window.postMessage({<br/>	/* whatever data you want */<br/>	source: "CONTENT_SCRIPT",<br/>	payload: {<br/>		/* more random data */<br/>	}<br/>}, "REMOTE_FRONTEND_URL" /* important for security */);</span></pre><p id="de1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">结论:远程托管的前端是你的朋友。利用这一点来加速您的开发，在您选择的框架中开发，并避免在Chrome扩展包的范围内编写您的前端。</p><p id="eb39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mv">注意:</em>在将于今年晚些时候更新的清单V3中，公共扩展中将不允许远程托管的前端。如果您在企业内部署，则不受此限制。</p></div><div class="ab cl ll lm hu ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ij ik il im in"><h1 id="3407" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">结论</h1><p id="8308" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">我们希望这些提示能够让你为你的公司构建安全的Chrome扩展，从而提高生产力和工作体验。</p><p id="bce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了更容易地构建企业Chrome扩展，可以考虑注册<a class="ae kw" href="http://extension.dev" rel="noopener ugc nofollow" target="_blank"> extension.dev </a>，这是我正在开发的一个低代码企业Chrome扩展构建器。</p><p id="5add" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="http://extension.dev" rel="noopener ugc nofollow" target="_blank">扩展名. dev </a>:</p><ul class=""><li id="0d4a" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">给你一个低代码的UI编辑器，它也是完全托管的。</li><li id="728e" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">按照最佳安全措施烘烤，这样它就不会沾到你的箱子上。</li><li id="38e3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">为您处理基于角色的访问控制、身份验证和部署。</li><li id="e9a3" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">为您提供分析，以便您可以看到您的扩展所产生的影响。</li></ul><h1 id="5d5c" class="ls lt iq bd lu lv ny lx ly lz nz mb mc md oa mf mg mh ob mj mk ml oc mn mo mp bi translated">参考</h1><ul class=""><li id="bd9f" class="kx ky iq ka b kb mq kf mr kj od kn oe kr of kv lc ld le lf bi translated"><a class="ae kw" href="https://docs.google.com/document/d/1pT0ZSbGdrbGvuCsVD2jjxrw-GVz-80rMS2dgkkquhTY/edit#" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/document/d/1 pt 0 zsbgdrbgvucsvd 2 jjxrw-GVz-80 rms 2d gkkquhty/edit #</a></li><li id="1808" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://support.google.com/chrome/a/answer/2714278#step4" rel="noopener ugc nofollow" target="_blank">https://support.google.com/chrome/a/answer/2714278#step4</a></li><li id="9b9a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="http://www.dre.vanderbilt.edu/~schmidt/android/android-4.0/external/chromium/chrome/common/extensions/docs/autoupdate.html" rel="noopener ugc nofollow" target="_blank">http://www . dre . Vanderbilt . edu/~ Schmidt/Android/Android-4.0/external/chromium/chrome/common/extensions/docs/auto update . html</a></li><li id="e443" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">https://developer.chrome.com/docs/extensions/mv3/messaging/<a class="ae kw" href="https://developer.chrome.com/docs/extensions/mv3/messaging/" rel="noopener ugc nofollow" target="_blank"/></li><li id="adae" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://developer.chrome.com/docs/extensions/mv3/security/#content_scripts" rel="noopener ugc nofollow" target="_blank">https://developer . chrome . com/docs/extensions/mv3/security/# content _ scripts</a></li></ul></div></div>    
</body>
</html>