<html>
<head>
<title>Fetching cryptocurrency prices with CoinGecko using NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CoinGecko和NodeJS获取加密货币价格</h1>
<blockquote>原文：<a href="https://itnext.io/fetching-cryptocurrency-prices-with-coingecko-using-nodejs-29d5455bf57c?source=collection_archive---------2-----------------------#2021-02-28">https://itnext.io/fetching-cryptocurrency-prices-with-coingecko-using-nodejs-29d5455bf57c?source=collection_archive---------2-----------------------#2021-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6db9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用NodeJS获取BTC、瑞士联邦理工学院、TRX和其他加密货币的实时价格</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/c97c183b60a8125ae3ce6ebbb735c9b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*kQB9J1bn7M5cB86yURMvNA.png"/></div></figure><p id="0e11" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">CoinGecko是一个获取加密货币价格的免费API工具，公开提供，没有限制。在写这篇文章的时候，他们跟踪了超过6285枚硬币，关于时间和延迟的数据是可靠的。</p><p id="1e5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本教程介绍了如何使用CoinGecko-API库(<a class="ae kw" href="https://github.com/miscavage/CoinGecko-API" rel="noopener ugc nofollow" target="_blank">https://github.com/miscavage/CoinGecko-API</a>)在NodeJS上使用CoinGecko的基本指南，coin gecko-API库是一个与API交互的包装器。</p><p id="d377" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要安装它，我们使用npm install命令:</p><pre class="kp kq kr ks gt kx ky kz la aw lb bi"><span id="6cfa" class="lc ld it ky b gy le lf l lg lh">npm install coingecko-api</span><span id="4168" class="lc ld it ky b gy li lf l lg lh">const CoinGecko = require('coingecko-api');</span></pre><p id="ebec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">新的可以开始从客户端获取价格。在这种情况下，我选择使用市场bitfinex来获取价格，并且我只请求比特币:</p><pre class="kp kq kr ks gt kx ky kz la aw lb bi"><span id="f7ab" class="lc ld it ky b gy le lf l lg lh">const CoinGeckoClient = new CoinGecko();<br/>    let data = await CoinGeckoClient.exchanges.fetchTickers('bitfinex', {<br/>        coin_ids: ['bitcoin']<br/>    });<br/>    var _coinList = {};<br/>    var _datacc = data.data.tickers.filter(t =&gt; t.target == 'USD');<br/>    [<br/>        'BTC'<br/>    ].forEach((i) =&gt; {<br/>        var _temp = _datacc.filter(t =&gt; t.base == i);<br/>        var _res = _temp.length == 0 ? [] : _temp[0];<br/>        _coinList[i] = _res.last;<br/>    })<br/>console.log(_coinList);</span></pre><p id="f7e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们想获取更多的硬币，我们需要以coin _ ids的形式请求它们，并在以后检测它们，如下例所示:</p><pre class="kp kq kr ks gt kx ky kz la aw lb bi"><span id="077a" class="lc ld it ky b gy le lf l lg lh">const CoinGeckoClient = new CoinGecko();<br/>    let data = await CoinGeckoClient.exchanges.fetchTickers('bitfinex', {<br/>        coin_ids: ['bitcoin', 'ethereum', 'ripple', 'litecoin', 'stellar']<br/>    });<br/>    var _coinList = {};<br/>    var _datacc = data.data.tickers.filter(t =&gt; t.target == 'USD');<br/>    [<br/>        'BTC',<br/>        'ETH',<br/>        'XRP',<br/>        'LTC',<br/>        'XLM'<br/>    ].forEach((i) =&gt; {<br/>        var _temp = _datacc.filter(t =&gt; t.base == i);<br/>        var _res = _temp.length == 0 ? [] : _temp[0];<br/>        _coinList[i] = _res.last;<br/>    })<br/>    console.log(_coinList);</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lj"><img src="../Images/d8424229dffedd2abdf7983600b1d238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bmuMvBYUnljvtS37pM7efQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">CoinGecko结果</figcaption></figure><h1 id="95cb" class="ls ld it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">结论</h1><p id="1d5b" class="pw-post-body-paragraph jq jr it js b jt mp jv jw jx mq jz ka kb mr kd ke kf ms kh ki kj mt kl km kn im bi translated">现在我们可以使用这个库来开发多种项目，从加密钱包到水龙头。根据我们想要实现的解决方案，我会推荐使用套接字或轮询；否则，让用户知道获取价格的最后时间，因为价格可能在此期间变高/变低。</p></div></div>    
</body>
</html>