<html>
<head>
<title>React-Native — Tips, Structure &amp; Solutions for your project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React-Native —为您的项目提供提示、结构和解决方案</h1>
<blockquote>原文：<a href="https://itnext.io/react-native-tips-structure-solutions-for-your-project-cecf5d7ef733?source=collection_archive---------2-----------------------#2019-06-18">https://itnext.io/react-native-tips-structure-solutions-for-your-project-cecf5d7ef733?source=collection_archive---------2-----------------------#2019-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6d90" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为您的redux+react navigation+typescript RN项目提供更好的结构和提示！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f085341b8d924dd9513dbd319094408a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-ftsRk4Ets4_9cOjKTr4w.jpeg"/></div></div></figure><p id="06f5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一段时间以来，我一直在从我使用React Native框架开发的所有应用程序中收集信息，包括我正在做的好的和坏的实践。所以我决定我可以分享一些信息，可能会帮助那里的人！</p><h2 id="0832" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated"><strong class="ak">在项目早期使用类型</strong></h2><p id="fd81" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">不管你的项目一开始是大是小，如果你认为你的应用程序在将来可以扩展，尽早开始是好的。当您的应用程序处于活动状态时，类型可以帮助您避免错误，因为发布新版本会使调试变得困难，并且对其进行任何修复也会变得缓慢。同样，很难将一个现有的项目缓慢地转换成typescript并保持你的类型结构。</p><h2 id="5c6c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">导航，导航，导航</h2><p id="bf9a" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这将是你的系统的核心。没有任何应用程序没有从一个屏幕到另一个屏幕的导航(除了hello world RN示例应用程序😃).在react native生态系统中，没有多少库受到关注，但我认为RN正在推广的一个库是React Navigation，我认为这是值得的，它将会是你所寻找的99%。我同时使用了原生和javascript解决方案，我认为这是最具扩展性的解决方案，因为你可以对它进行大量定制，而且在v3上非常快。</p><h2 id="08e3" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated"><strong class="ak">多个导入常见问题和绝对路径</strong></h2><p id="fed9" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">正如你将在下一点“构建你的项目”中看到的，我的每个文件夹都有一个package.json。这个package.json有那个文件夹的名称，所以我可以在应用程序中使用绝对路径。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="b60e" class="ln lo iq mm b gy mq mr l ms mt">{<br/>  "name": "theme"<br/>}</span></pre><p id="f894" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以读一下<a class="mu mv ep" href="https://medium.com/u/fea4322d14f9?source=post_page-----cecf5d7ef733--------------------------------" rel="noopener" target="_blank">大卫·伍迪</a>的精彩<a class="ae mw" href="https://medium.com/@davidjwoody/how-to-use-absolute-paths-in-react-native-6b06ae3f65d1" rel="noopener">帖子</a></p><p id="b81d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，为了在react native中实现多个导入，您必须使用这个babel.config.js，否则您必须逐个导入它们，因为babel + metro有编译器错误。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="d575" class="ln lo iq mm b gy mq mr l ms mt">module.exports = {<br/>  presets: ['module:metro-react-native-babel-preset'],<br/>  plugins: [<br/>    [<br/>      '@babel/plugin-transform-modules-commonjs',<br/>      {<br/>        strictMode: false,<br/>        allowTopLevelThis: true,<br/>        loose: true,<br/>      },<br/>    ],<br/>  ],<br/>};</span></pre><p id="b034" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你使用react-native矢量图标，这将再次失败。一个临时的修复方法是从它们的dist文件夹中显式地导入它们。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="d2f8" class="ln lo iq mm b gy mq mr l ms mt">import FeatherIcon from 'react-native-vector-icons/dist/Feather';</span></pre><p id="d5fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您还需要为它定义一个全局类型</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="5597" class="ln lo iq mm b gy mq mr l ms mt">declare module 'react-native-vector-icons/dist/Feather';</span></pre><h2 id="56e2" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">构建您的项目</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/1c84afc1d333344479d63fdef26c304f.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*iIEpyZxN2NaFt2zFGuxmEw.png"/></div></figure><p id="1606" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我一直认为构建项目文件夹是最关键的时刻之一，因为这是你在项目中做出的第一个架构决策。当然，当谈到RN时，如果你已经熟悉React，你不需要做太多的改变，但这也是我的建议。</p><p id="b621" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个文件夹必须有一个可以导出所有必要文件的索引文件，这样您就可以对其他文件进行多次导入。当然，这是不可行的，直到今年，你必须分别导入每个模块，但在巴别塔的帮助下，你可以使用这个技巧，你将能够像下面这样导入。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="ade8" class="ln lo iq mm b gy mq mr l ms mt">import { Player, Header } from 'components';</span></pre><p id="8e16" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">屏幕</strong>:屏幕是我们应用的容器组件，是应用的实际屏幕。最好有他们自己的，这样我们就知道我们有哪些屏幕，也知道我们的容器</p><p id="5b99" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">组件:</strong>在这里你可以拥有你的应用程序中不止一次使用的或者不是屏幕的所有全局组件。</p><p id="eee9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">鸭子</strong>:这个文件夹包含了我们所有的应用程序逻辑，因为它保存了我们的redux状态。它以redux的ducks模块化范例命名，redux允许您毫无问题地扩展您的应用程序。一篇好文章可以在这里找到<a class="ae mw" href="https://www.freecodecamp.org/news/scaling-your-redux-app-with-ducks-6115955638be/" rel="noopener ugc nofollow" target="_blank">。我的每只鸭子都由以下文件组成，我如何使用type来绑定redux和typescript，在我的另一篇文章</a>中也提到了<a class="ae mw" href="https://medium.com/@panagiotisvrs/js-types-and-the-road-to-sanity-flow-typescript-dce65c9355cb" rel="noopener"/></p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="e3ca" class="ln lo iq mm b gy mq mr l ms mt">actions - reducer - selectors - types</span></pre><p id="b5f5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了这些文件之外，还有一个<strong class="kt ir"> <em class="my">可选的</em> </strong>文件，名为epics，它保存了所有使用RxJS的副作用逻辑。考虑在这里看一下<a class="ae mw" href="https://medium.com/@panagiotisvrs/handling-redux-side-effects-the-rxjs-way-59c057b12cd4" rel="noopener">。</a></p><p id="a39a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">钩子:</strong>我的应用程序正在使用的所有定制钩子</p><p id="f14c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">服务:</strong>(可选)这通常包含几个服务的实例——推送通知、google tracker等</p><p id="40b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">提供者:</strong>这里我保存了所有为我的应用程序提供数据的函数，比如API调用。</p><p id="7464" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">类型:</strong>我的app需要的全局类型。通常这些是这个文件的起始内容，以避免对图像进行类型检查。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="143f" class="ln lo iq mm b gy mq mr l ms mt">declare module '*.png';<br/>declare module '*.jpg';</span></pre><p id="6b48" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> utils </strong>:任何用于规范化数据或从数组中选取id的全局util。在这里，我将它分解成不同的函数或实用程序等。</p><p id="7c26" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">导航:由于导航是你的应用程序的一个重要组成部分，它需要自己的空间。在这里，我打破了我的导航向下屏幕和堆栈命名。所以如果你打开其中一个文件，你会看到</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="1e8a" class="ln lo iq mm b gy mq mr l ms mt">export const HOME_SCREEN = 'HOME_SCREEN';</span><span id="8fe2" class="ln lo iq mm b gy mz mr l ms mt">or</span><span id="3f94" class="ln lo iq mm b gy mz mr l ms mt">export const INITIAL_STACK = 'INITIAL_STACK';<br/>export const HOME_STACK = 'HOME_STACK';</span></pre><p id="dbb5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些是非常有用的，因为您可以将它们导入到应用程序的每个部分，以避免为您的应用程序提供将来可能会更改的字符串。</p><p id="64cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您的appNavigation创建了一个组件，它保存了所有连接到redux的导航(如果您不使用它，也可以不连接),在这里您可以用上面定义的名称定义堆栈和屏幕</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="08e8" class="ln lo iq mm b gy mq mr l ms mt">const HomeStack = createBottomTabNavigator(<br/>  {<br/>    [HOME_SCREEN]: Home,<br/>  }<br/>);</span></pre><p id="2928" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">主题:</strong>是我为应用程序使用的全局主题属性和功能。因为我在JS中使用CSS，这个文件夹通常包含两个文件functions和globals。函数拥有创建flex等的所有函数，全局函数是颜色、间距等。例如</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="33cc" class="ln lo iq mm b gy mq mr l ms mt">export const flex = css`<br/>  flex: 1;<br/>`;<br/><br/>export const flexCenter = css`<br/>  align-items: center;<br/>  justify-content: center;<br/>`;</span></pre><p id="3c89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">资产</strong>:不在我的截图上，但总有一个资产文件夹保存你所有的本地声音、图像、视频等</p><h2 id="5e09" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">应用动画简单和困难的方式</h2><p id="6a40" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">动画对于任何应用程序都是至关重要的。是那些能让你的应用感觉很自然的东西(当然是！)而且会给人更好的感觉。但是你要确保不要搬起石头砸自己的脚，因为有库可以用，洛蒂和RN动画API。</p><p id="a949" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Lottie会给你一个非常简单的方法来在你的应用程序上显示动画，但是当你构建你的屏幕堆栈时，它会很容易地拖累你的系统。这是因为每个屏幕都会转到上一个屏幕的顶部。这样，你的前一个屏幕仍然是安装的，所以如果你有两个屏幕，动画背景洛蒂动画，你在第二个屏幕两个动画都在运行。所以猜猜当越来越多的时候会发生什么。</p><p id="922f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像animatable这样的库是非常方便的，当然你总是需要把useNativeDriver。<a class="ae mw" href="https://facebook.github.io/react-native/blog/2017/02/14/using-native-driver-for-animated" rel="noopener ugc nofollow" target="_blank">脸书做了一个很棒的帖子解释为什么</a>。</p><p id="adcf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你认为你需要一些定制的东西，那么动画API是你唯一的方法。</p><p id="8e2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请记住，当涉及到动画时，避免远程调试，这将降低您的应用程序的速度，并始终通过检查帧在真实设备上进行测试。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="8361" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">总结一下，这些都不是可以毫无疑问地接受的，我只是说，这些是我在使用React Native为iOS和Android构建应用程序时面临的问题以及我用来处理的技巧和结构。</p><p id="45e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你正在使用的是什么？你觉得这些有用吗？让我知道你的想法！</p><blockquote class="nh"><p id="bd2f" class="ni nj iq bd nk nl nm nn no np nq lm dk translated">如果你喜欢这篇文章，可以考虑点击clap👏你可以随时访问我的其他文章🔥</p></blockquote></div></div>    
</body>
</html>