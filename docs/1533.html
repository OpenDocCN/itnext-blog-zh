<html>
<head>
<title>A deadly simple React bindings library for Redux with Hooks API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个非常简单的带有钩子应用编程接口的Redux反应绑定库</h1>
<blockquote>原文：<a href="https://itnext.io/a-deadly-simple-react-bindings-library-for-redux-with-hooks-api-822295857282?source=collection_archive---------3-----------------------#2018-11-17">https://itnext.io/a-deadly-simple-react-bindings-library-for-redux-with-hooks-api-822295857282?source=collection_archive---------3-----------------------#2018-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="97e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Love Redux和Hooks API。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/3bf9b61a554e2597bc68cbd2d01602f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZeP2blLII_5BH7lXU15tQ.png"/></div></div></figure><blockquote class="la lb lc"><p id="e092" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">有一篇后续文章描述了这个库的实现细节。请在此访问<a class="ae lh" href="https://medium.com/p/483a90de0c71" rel="noopener">。</a></p></blockquote></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="0139" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Redux是reaction的流行库之一。虽然Redux本身不与React绑定，但它经常与允许将Redux状态连接到任何React组件的官方绑定<code class="fe lp lq lr ls b">react-redux</code>一起使用。</p><p id="bcd9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我们提出了另一个绑定库来组合React和Redux。这个库试图对初学者来说简单易行。截至本文撰写之时，这仍是一个实验项目，欢迎反馈。</p><h2 id="3ed3" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">典型的反应还原用法</h2><p id="604a" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">假设我们有一个简单的全球状态。</p><pre class="kp kq kr ks gt mr ls ms mt aw mu bi"><span id="48ba" class="lt lu it ls b gy mv mw l mx my">const initialState = {<br/>  counter: 0,<br/>  person: {<br/>    firstName: 'Harry',<br/>    lastName: 'Potter',<br/>    age: 11,<br/>  },<br/>};</span></pre><p id="6eb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">显示人名的组件如下所示。</p><pre class="kp kq kr ks gt mr ls ms mt aw mu bi"><span id="b43a" class="lt lu it ls b gy mv mw l mx my">const PersonName = ({ firstName, lastName }) =&gt; (<br/>  &lt;div&gt;<br/>    &lt;span&gt;{firstName}&lt;/span&gt;<br/>    &lt;span&gt;{lastName}&lt;/span&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="bedb" class="lt lu it ls b gy mz mw l mx my">const mapStateToProps = state =&gt; ({<br/>  firstName: state.person.firstName,<br/>  lastName: state.person.lastName,<br/>});</span><span id="976b" class="lt lu it ls b gy mz mw l mx my">export default connect(mapStateToProps)(PersonName);</span></pre><p id="f17b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">随着React Hooks API的提出，react-redux寻求支持API [ <a class="ae lh" href="https://github.com/reduxjs/react-redux/issues/1063" rel="noopener ugc nofollow" target="_blank"> 1 </a> ]的方法。一种可能的方法如下。</p><pre class="kp kq kr ks gt mr ls ms mt aw mu bi"><span id="d703" class="lt lu it ls b gy mv mw l mx my">const PersonName = () =&gt; {<br/>  const mapStateToProps = state =&gt; ({<br/>    firstName: state.person.firstName,<br/>    lastName: state.person.lastName,<br/>  });<br/>  const [{ firstName, lastName }] = useRedux(mapStateToProps);<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;span&gt;{firstName}&lt;/span&gt;<br/>      &lt;span&gt;{lastName}&lt;/span&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="502a" class="lt lu it ls b gy mz mw l mx my">export default PersonName;</span></pre><p id="0dd1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在任一情况下，<code class="fe lp lq lr ls b">mapStateToProps</code>都是检测该部分状态是否改变的关键。(技术上，在上面的钩子示例代码中，即使<code class="fe lp lq lr ls b">useRedux</code>没有检测到任何变化，渲染过程也不会停止。我们需要适当的记忆或纾困渲染。)</p><h2 id="54dd" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">反应-钩子-容易-还原</h2><p id="1881" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">特别是对于初学者来说，经常写<code class="fe lp lq lr ls b">mapStateToProps</code>不是件小事，而且它可能偶然包含了昂贵的计算。我们希望通过完全消除此问题来消除它。</p><p id="6c06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">reactor-hooks-easy-redux是我们正在开发的一个库。它仍处于试验阶段，但您可以尝试一下。注意:这是基于未发布的Hooks API，还没有投入生产。</p><div class="na nb gp gr nc nd"><a href="https://github.com/dai-shi/react-hooks-easy-redux" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">dai-shi/react-hooks-easy-redux</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">通过钩子API进行反应的简单Redux绑定。通过创建一个…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">github.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ky nd"/></div></div></a></div><p id="40d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这个库，上面的示例代码如下所示。</p><pre class="kp kq kr ks gt mr ls ms mt aw mu bi"><span id="deef" class="lt lu it ls b gy mv mw l mx my">import { useReduxState } from 'react-hooks-easy-redux';</span><span id="b407" class="lt lu it ls b gy mz mw l mx my">const PersonName = () =&gt; {<br/>  const state = useReduxState();<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;span&gt;{state.person.firstName}&lt;/span&gt;<br/>      &lt;span&gt;{state.person.lastName}&lt;/span&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="a66b" class="lt lu it ls b gy mz mw l mx my">export default PersonName;</span></pre><p id="c4e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这通过代理神奇地工作，即使状态中的计数器属性或年龄属性改变，渲染也不会发生。</p><p id="8d62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以尝试一些例子，也可以写你自己的例子。</p><pre class="kp kq kr ks gt mr ls ms mt aw mu bi"><span id="da4c" class="lt lu it ls b gy mv mw l mx my">git clone <a class="ae lh" href="https://github.com/dai-shi/react-hooks-easy-redux.git" rel="noopener ugc nofollow" target="_blank">https://github.com/dai-shi/react-hooks-easy-redux.git</a><br/>cd react-hooks-easy-redux<br/>npm install<br/>npm run examples:minimal</span></pre><p id="7c5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以将“极小”更改为“typescript”和“deep”等其他示例。</p><p id="fe6c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您也可以在线尝试。</p><div class="na nb gp gr nc nd"><a href="https://codesandbox.io/s/github/dai-shi/react-hooks-easy-redux/tree/master/examples/01_minimal" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">react-hooks-easy-redux-example-CodeSandbox</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">为网络应用定制的在线代码编辑器</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">codesandbox.io</p></div></div><div class="nm l"><div class="ns l no np nq nm nr ky nd"/></div></div></a></div><h2 id="1a0c" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">最终说明</h2><p id="1c9a" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">有些读者可能已经注意到，本文中没有关于行动或<code class="fe lp lq lr ls b">mapDispatchToProps</code>的讨论。这是因为我们的库只支持暴露<code class="fe lp lq lr ls b">dispatch</code>，我们想集中讨论。即使有了<code class="fe lp lq lr ls b">react-redux</code>，我们也建议初学者使用“派遣作为学习的道具”，这样会更直观。</p><h2 id="af64" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">变更日志</h2><ul class=""><li id="c707" class="nt nu it js b jt mm jx mn kb nv kf nw kj nx kn ny nz oa ob bi translated"><em class="ld">【2018–11–17】:首次发布。</em></li><li id="0965" class="nt nu it js b jt oc jx od kb oe kf of kj og kn ny nz oa ob bi translated"><em class="ld">【2018–12–14】:删除bailOutHack，新增</em> <a class="ae lh" href="https://medium.com/p/483a90de0c71" rel="noopener"> <em class="ld">一篇后续文章</em> </a> <em class="ld">。</em></li></ul></div></div>    
</body>
</html>