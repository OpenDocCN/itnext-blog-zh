<html>
<head>
<title>Using PouchDB and SQLite with Ionic 3: A CRUD Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Ionic 3中使用PouchDB和SQLite:一个CRUD示例</h1>
<blockquote>原文：<a href="https://itnext.io/using-pouchdb-and-sqlite-with-ionic-3-a-crud-example-bb326001fce?source=collection_archive---------1-----------------------#2017-11-28">https://itnext.io/using-pouchdb-and-sqlite-with-ionic-3-a-crud-example-bb326001fce?source=collection_archive---------1-----------------------#2017-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="aef3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我们将学习如何使用PouchDB和SQLite创建一个CRUD(创建、读取、更新和删除的缩写)移动应用程序。</p><p id="975a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将讨论以下几点:</p><ul class=""><li id="3083" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">PouchDB是什么？</li><li id="56b2" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如何使用Ionic CLI创建新的Ionic 3项目？</li><li id="07d0" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如何安装SQLite 2 Cordova插件？</li><li id="1d53" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如何添加PouchDB库？</li><li id="f523" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如何添加PouchDB的SQLite适配器？</li><li id="b051" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如何创建使用PouchDB的数据库服务？</li><li id="f4e6" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如何创建不同的页面来显示、创建、编辑和删除数据库记录？</li><li id="33b7" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">最后，如何使用真实的设备在本地提供应用程序？</li></ul><p id="2ab8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本教程假设您已经准备好一台开发机器，并安装了:</p><ul class=""><li id="eee8" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">安装了NodeJS平台和NPM。</li><li id="8a13" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装了Ionic CLI。</li><li id="29ad" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装Java和Android SDK工具，以防您想为Android开发应用程序。</li><li id="89c4" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">用于构建iOS应用程序的MAC和Xcode。</li></ul><p id="f180" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以如果你准备好了！让我们开始吧。</p><h1 id="3854" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">PouchDB是什么？</h1><p id="247e" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">PouchDB在一个基于CouchDB的开源NoSQL(不仅仅是SQL)浏览器数据库中。它的创建是为了使开发人员能够构建离线的第一网络应用程序，即在没有网络连接时能够离线工作的应用程序，通过将数据存储在浏览器的本地数据库中，如本地存储或IndexedDB，以及移动应用程序的SQLite。以及当用户重新在线时与CouchDB服务器同步数据。</p><p id="edf9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于Ionic 3，您可以使用本地存储、IndexedDB或SQLite。前两个选项有存储限制，但速度更快。对于移动设备上的无限存储，无论是Android还是iOS，您都可以使用SQLite。</p><p id="176a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">PouchDB有很多特性。让我们简单地看看它们:</p><ul class=""><li id="c633" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">它是跨浏览器的:它可以在所有主要浏览器中工作，如Mozilla Firefox、谷歌Chrome、Opera、苹果Safari、微软IE(也许还有Edge？)和Node.js平台。</li><li id="bc18" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">它是轻量级的:当gzip压缩时，PouchDB的大小只有46KB。您可以在浏览器中用一个简单的<code class="fe mc md me mf b">&lt;script&gt;</code>标签包含它，或者通过npm安装在NodeJS中。</li><li id="d762" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">它的学习曲线很短:PouchDB API易于学习和使用。</li><li id="4717" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">它具有开箱即用的CouchDB服务器同步功能。</li></ul><h1 id="c621" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建新的Ionic 3项目</h1><p id="62d2" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">让我们从使用Ionic CLI创建一个新的Ionic 3项目开始。因此，继续操作，在Mac/Linux上打开终端，或者在Windows上打开命令提示符，运行下面的命令来生成一个新项目。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="97fa" class="mo la iq mf b gy mp mq l mr ms">$ ionic start ionic3-pouchdb-sqlite blank</span></pre><p id="d1d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">等待项目设置依赖项，然后在根文件夹中导航:</p><p id="433e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，您需要添加一些依赖项，以使PouchDB和SQLite能够工作。</p><h1 id="7017" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">正在安装SQLite Cordova插件</h1><p id="b461" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">在Ionic 2+上，本地SQLite数据库是在本地存储数据时最合适的选择，因为它允许无限的存储，不幸的是，这不是本地存储或IndexedDB的情况。此外，SQLite是一个基于文件的数据库，这使得非常便携。</p><p id="03ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用许多Cordova插件将SQLite支持添加到Ionic应用程序中，例如:</p><ul class=""><li id="333c" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">存储:sqlite的原始Cordova插件。</li><li id="0274" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">cordova-plugin-sqlite-2:前一个插件的分支，具有额外的功能。</li></ul><p id="d878" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们安装叉子:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="1d55" class="mo la iq mf b gy mp mq l mr ms">$ ionic plugin add cordova-plugin-sqlite-2</span></pre><h1 id="ac48" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">添加PouchDB</h1><p id="d7f8" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">为了能够使用PouchDB，您需要安装npm提供的第三方库:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="611b" class="mo la iq mf b gy mp mq l mr ms">$ npm install pouchdb --save</span></pre><h1 id="ea45" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为SQLite添加PouchDB Cordova适配器</h1><p id="980f" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">接下来，您需要安装另一个第三方适配器来使用SQLite和PouchDB</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="38d6" class="mo la iq mf b gy mp mq l mr ms">$ npm install pouchdb-adapter-cordova-sqlite --save</span></pre><p id="099d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是在Ionic应用程序中开始使用PouchDB和SQLite所需安装的全部内容。现在我们开始编码吧！</p><p id="eda2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将建立一个小的应用程序，允许你做CRUD操作，即从PouchDB + SQLIte数据库创建，读取，更新和删除雇员数据。</p><p id="97b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该应用程序有许多屏幕:*雇员屏幕:用删除按钮列出雇员*创建雇员屏幕*更新雇员屏幕</p><h1 id="de31" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">数据库服务</h1><p id="30fa" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我们需要创建的第一件事是数据库服务，它连接到PouchDB并提供不同的方法来处理employees数据库。</p><p id="3654" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，继续使用<code class="fe mc md me mf b">ionic g provider &lt;name&gt;</code>创建一个服务提供商</p><p id="7f2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保您在项目的根文件夹中，然后运行以下命令:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="1171" class="mo la iq mf b gy mp mq l mr ms">ionic g provider employee</span></pre><p id="6df7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该在<code class="fe mc md me mf b">src/providers/employee</code>文件夹中生成一个<code class="fe mc md me mf b">EmployeeProvider</code>提供程序</p><p id="1df5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后添加以下代码</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="2f46" class="mo la iq mf b gy mp mq l mr ms">import { Injectable } from '@angular/core'; import { Http } from '@angular/http'; import 'rxjs/add/operator/map'; import * as PouchDB from 'pouchdb'; import cordovaSqlitePlugin from 'pouchdb-adapter-cordova-sqlite'; @Injectable() export class EmployeeProvider { public pdb; public employees; createPouchDB() { PouchDB.plugin(cordovaSqlitePlugin); this.pdb = new PouchDB('employees.db', { adapter: 'cordova-sqlite' }); } }</span></pre><p id="b37e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这段代码将创建一个名为<code class="fe mc md me mf b">employees.db</code>的SQLite数据库文件，并通过将适配器设置为<code class="fe mc md me mf b">cordova-sqlite</code>来初始化PouchDB数据库，这将指示PouchDB使用SQLite进行存储，而不是浏览器的存储。</p><p id="ec69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保将提供者导入到<code class="fe mc md me mf b">src/app/app.module.ts</code>中，如果没有自动添加，则将其添加到提供者数组中。</p><p id="63e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还要确保导入服务提供者，并在使用它之前将其注入到任何组件的构造函数中。</p><p id="4ecd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们添加CRUD方法:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="c8b2" class="mo la iq mf b gy mp mq l mr ms">create(employee) { return this.pdb.post(employee); }</span></pre><p id="be5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该方法在数据库中创建一个新雇员。</p><p id="627f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mc md me mf b">post()</code>是一个PouchDB API，允许您在PouchDB数据库中创建新对象。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="32af" class="mo la iq mf b gy mp mq l mr ms">update(employee) { return this.pdb.put(employee); }</span></pre><p id="4507" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此方法更新数据库中的现有雇员。请注意，您需要传递一个带有雇员的<code class="fe mc md me mf b">id</code>的雇员对象来进行更新。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="297d" class="mo la iq mf b gy mp mq l mr ms">delete(employee) { return this.pdb.delete(employee); }</span></pre><p id="f1f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该方法从数据库中删除一个雇员。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="25de" class="mo la iq mf b gy mp mq l mr ms">read() { function allDocs(){ this.pdb.allDocs({ include_docs: true}) .then(docs =&gt; { this.employees = docs.rows.map(row =&gt; { row.doc.Date = new Date(row.doc.Date); return row.doc; }); return this.employees; }); } this.pdb.changes({ live: true, since: 'now', include_docs: true}) .on('change', ()=&gt;{ allDocs().then((emps)=&gt;{ this.employees = emps; }); }); return allDocs(); }</span></pre><p id="6031" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">read方法只是通过调用<code class="fe mc md me mf b">.allDocs()</code>方法从数据库中获取所有雇员，该方法返回一个承诺，该承诺解析为数据库中所有雇员的数组。<code class="fe mc md me mf b">map()</code>将<code class="fe mc md me mf b">docs</code>数组映射到<code class="fe mc md me mf b">docs.rows</code>数组，后者只包含数据，没有PouchDB特定的信息，显然，我们不需要这些信息！</p><p id="b1c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码还将<code class="fe mc md me mf b">row.doc.Date</code>(存储为JSON)转换为JavaScript Date()。</p><p id="6d7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还监听PouchDB数据库的变化，因此每当有变化时(在开始检索所有雇员后创建、删除或更新),函数<code class="fe mc md me mf b">allDocs()</code>被再次调用，然后被解析以更新<code class="fe mc md me mf b">employees</code>数组。</p><p id="b269" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，当发生任何变化时，这不是更新employees数组的最有效方法。您可以更改此代码，只更新或删除受影响的项目，而不是整个数组。</p><h1 id="c18e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">构建应用程序UI屏幕</h1><p id="d83b" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">现在我们已经创建了服务提供者，它负责连接PouchDB和SQLite，并提供所有CRUD方法与PouchDB数据库接口。让我们创建不同的页面，允许我们在雇员数据库上列出和执行操作。</p><p id="351e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经有一个生活在<code class="fe mc md me mf b">src/app/pages/home</code>为我们生成的主页。打开<code class="fe mc md me mf b">home.html</code>，然后使用<code class="fe mc md me mf b">&lt;ion-list&gt;</code>更新代码以显示员工列表。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="8bd7" class="mo la iq mf b gy mp mq l mr ms">&lt;ion-header&gt; &lt;ion-navbar&gt; &lt;ion-title&gt;The Employees Database&lt;/ion-title&gt; &lt;ion-buttons end&gt; &lt;button ion-button (click)="addEmployee()"&gt; &lt;ion-icon name="add"&gt;&lt;/ion-icon&gt; &lt;/button&gt; &lt;/ion-buttons&gt; &lt;/ion-navbar&gt; &lt;/ion-header&gt; &lt;ion-content padding&gt; &lt;ion-list&gt; &lt;ion-item *ngFor="let emp of employees" (click)="showDetails(employee)"&gt; &lt;div&gt; &lt;/div&gt; &lt;/ion-item&gt; &lt;/ion-list&gt; &lt;/ion-content&gt;</span></pre><p id="f06f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们需要添加代码以获取<code class="fe mc md me mf b">src/pages/home/home.ts</code>中的雇员，因此打开文件，然后更新它以匹配以下代码:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="d483" class="mo la iq mf b gy mp mq l mr ms">import { Component } from '@angular/core'; import { NavController , ModalController } from 'ionic-angular'; import { EmployeePage } from './../employee/employee.ts'; @Component({ selector: 'page-home', templateUrl: 'home.html' }) export class HomePage { public employees : [] = []; constructor(public navCtrl: NavController,public modalCtrl: ModalController, public employeeProvider : EmployeeProvider) { } ionViewDidEnter() { this.employeeProvider.createPouchDB(); this.employeeProvider.read() .then(employees =&gt; { this.employees = employees; }) .catch((err)=&gt;{}); } showDetails(employee) { let modal = this.modalCtrl.create(EmployeePage, { employee: employee }); modal.present(); } }</span></pre><p id="132e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们需要为员工的详细信息生成一个新页面，因此继续在您的终端中运行以下命令:</p><p id="999d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在<code class="fe mc md me mf b">app/pages/employee</code>中生成一个包含三个文件的<code class="fe mc md me mf b">employee</code>文件夹。打开<code class="fe mc md me mf b">employee.html</code>，然后更新它以匹配以下代码:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="8381" class="mo la iq mf b gy mp mq l mr ms">&lt;ion-header&gt; &lt;ion-navbar&gt; &lt;ion-title&gt; Employee Details&lt;/ion-title&gt; &lt;ion-buttons end *ngIf="canDelete"&gt; &lt;button ion-button (click)="delete()"&gt; &lt;ion-icon name="trash"&gt;&lt;/ion-icon&gt; &lt;/button&gt; &lt;/ion-buttons&gt; &lt;/ion-navbar&gt; &lt;/ion-header&gt; &lt;ion-content&gt; &lt;ion-list&gt; &lt;ion-item&gt; &lt;ion-label&gt;First Name&lt;/ion-label&gt; &lt;ion-input text-right type="text" [(ngModel)]="employee.firstName"&gt;&lt;/ion-input&gt; &lt;/ion-item&gt; &lt;ion-item&gt; &lt;ion-label&gt;Last Name&lt;/ion-label&gt; &lt;ion-input text-right type="text" [(ngModel)]="employee.lastName"&gt;&lt;/ion-input&gt; &lt;/ion-item&gt; &lt;/ion-list&gt; &lt;button ion-button block (click)="addOrUpdate()"&gt;Add/Update Employee&lt;/button&gt; &lt;/ion-content&gt;</span></pre><p id="ccfb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一次更新<code class="fe mc md me mf b">src/pages/employee/employee.ts</code>以添加所需的逻辑代码</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="14d2" class="mo la iq mf b gy mp mq l mr ms">import { Component } from '@angular/core'; import { NavController, NavParams ,ViewController } from 'ionic-angular'; @Component({ selector: 'employee', templateUrl: 'employee.html' }) export class EmployeePage { employee: any = {}; canDelete : false; canUpdate : false; constructor(public navCtrl: NavController, navParams: NavParams, private employeeProvider: EmployeeProvider) { } ionViewDidEnter(){ var employee = this.navParams.get('employee'); if(employee){ this.employee = employee; this.canDelete = true; this.canUpdate = true; } } addOrUpdate() { if (this.canUpdate) { this.employeeProvider.update(this.employee) .catch(()=&gt;{}); } else { this.employeeProvider.create(this.employee) .catch(()=&gt;{}); } this.viewCtrl.dismiss(this.employee); } delete() { this.employeeProvider.delete(this.employee) .catch(()=&gt;{}); this.viewCtrl.dismiss(this.employee); } }</span></pre><h1 id="6fab" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为应用服务</h1><p id="a476" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我们已经用PouchDB和SQLite完成了简单的CRUD示例。现在你可以在本地测试你的应用了。</p><p id="b4a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，继续运行以下命令:</p><p id="b240" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你也可以插入你的Android或iOS设备，在真实的设备上运行应用程序，而不是在浏览器上。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="9c16" class="mo la iq mf b gy mp mq l mr ms">$ ionic run ios $ ionic run android</span></pre><h1 id="4fa7" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论</h1><p id="569a" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">在本教程中，我们一步一步地看到了如何使用Ionic CLI从头开始创建Ionic 3移动应用程序，然后添加了基本的CRUD方法，用于使用PouchDB创建、读取、更新和删除SQLIte数据库中的项目。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="dcaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="na">原载于</em><a class="ae nb" href="https://www.techiediaries.com/ionic-sqlite-pouchdb/" rel="noopener ugc nofollow" target="_blank"><em class="na">www.techiediaries.com</em></a><em class="na">。</em></p></div></div>    
</body>
</html>