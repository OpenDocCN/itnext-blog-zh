<html>
<head>
<title>Logger or Debugger — Which One to Choose?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">记录器和调试器——选择哪一个？</h1>
<blockquote>原文：<a href="https://itnext.io/logger-or-debugger-which-one-to-choose-3f6a72200b15?source=collection_archive---------5-----------------------#2020-06-14">https://itnext.io/logger-or-debugger-which-one-to-choose-3f6a72200b15?source=collection_archive---------5-----------------------#2020-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b7c1b3f831cdedd1e731d1cec160044f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9o68lbtgwztDQ-w519nSg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由Unsplash上的Brendan Church拍摄</figcaption></figure><h1 id="f538" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">介绍</h1><p id="89be" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">调试是发现并解决计算机程序中妨碍计算机软件或系统正确运行的缺陷或问题的过程。调试策略可能涉及交互式调试、控制流分析、单元测试、集成测试、日志文件分析、应用程序或系统级监控、内存转储和分析。”——<a class="ae lz" href="https://en.wikipedia.org/wiki/Debugging" rel="noopener ugc nofollow" target="_blank">维基百科</a></p><p id="94e1" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">或者用一种更有趣的方式:</p><p id="3713" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><em class="ly">“调试就像是犯罪电影中的侦探，而你同时也是凶手。</em> " - <em class="ly">菲利佩·福特</em></p><p id="b56c" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">谈到调试，有许多不同的方法。最常见的是使用记录器或调试器。许多人认为使用调试器是更好的方法，但是我认为两者都有各自的优点和缺点，您应该根据具体情况进行选择。</p><p id="059b" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">如果你写代码，你会遇到错误和缺陷，你会发现有时一个日志记录器是你所需要的，有时一个调试器会更合适。毕竟只是开发者生产力的一种选择。</p><h1 id="b323" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">伐木工道</h1><p id="b8f0" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">让我们看看下面的代码，并尝试找出问题所在。</p><p id="8dc8" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">作为一个JavaScript Logger，我们有以下方法:<strong class="lc ir"> console.log() </strong></p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/ebd1fc1af46a202260c617b4aa3e1edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TDdYz9OwgQyAOSTr_7o3IQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae lz" href="https://carbon.now.sh/?bg=rgba(171%2C%20184%2C%20195%2C%201)&amp;t=seti&amp;wt=none&amp;l=htmlmixed&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%2520%2520%253Cbody%253E%250A%2520%2520%2520%2520%253Clabel%2520for%253D%2522age%2522%253EYour%2520age%253A%253C%252Flabel%253E%250A%2520%2520%2520%2520%253Cinput%2520type%253D%2522number%2522%2520name%253D%2522age%2522%2520id%253D%2522age-input%2522%2520%252F%253E%250A%2520%2520%2520%2520%253Cbr%2520%252F%253E%250A%2520%2520%2520%2520%253Cbr%2520%252F%253E%250A%2520%2520%2520%2520%253Cbutton%2520type%253D%2522submit%2522%2520id%253D%2522submit-btn%2522%253ESubmit%253C%252Fbutton%253E%250A%250A%2520%2520%2520%2520%253Cscript%253E%250A%2520%2520%2520%2520%2520%2520const%2520submitBtn%2520%253D%2520document.getElementById(%2522submit-btn%2522)%253B%250A%2520%2520%2520%2520%2520%2520const%2520ageInput%2520%253D%2520document.getElementById(%2522age-input%2522)%253B%250A%2520%2520%2520%2520%2520%2520submitBtn.addEventListener(%2522click%2522%252C%2520function()%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520if%2520(Number(ageInput.value)%2520%253D%253D%253D%252025)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520alert(%2522Party%2520access%2520granted%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%257D%2520else%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520alert(%2522Access%2520to%2520party%2520denied%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520%253C%252Fscript%253E%250A%2520%2520%253C%252Fbody%253E" rel="noopener ugc nofollow" target="_blank">生</a></figcaption></figure><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/bb70959607569ca47278dfc90c759d54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ui6DA-DvYk_Cu52Svk4vXQ.png"/></div></div></figure><p id="02e7" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">正如你所看到的，我们有一个<strong class="lc ir">数字输入字段</strong>，我们想给那些正好25岁的人一个虚拟的聚会。</p><p id="86dd" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">问题是，即使我们提供数字25作为参数，程序也不会工作。</p><p id="a7d4" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">为了解决这个问题，我们可以使用调试器。因为代码简单易懂，我们将从使用<strong class="lc ir"> console.log </strong>方法打印if语句中的数字开始。</p><p id="5d84" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">在<strong class="lc ir"> if </strong>语句之前，我们添加下面一行:</p><p id="dcb3" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">console.log(ageInput.value, 25, ageInput.value === 25);</code></p><p id="82e1" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">如果我们再次运行代码，我们将在控制台中看到以下输出。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/8906682285ce4d4b6d81ea9b23683625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPQz5uTl2LjjrWEavbCVGQ.png"/></div></div></figure><p id="664b" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">因为浏览器相当智能，如果我们仔细观察，我们可以看到它打印了<strong class="lc ir"> 25 </strong>和<strong class="lc ir"> 25。</strong></p><p id="7cf8" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">但是数字的颜色不一样。这暗示它们有不同的数据类型。</p><p id="0987" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">通过添加以下语句</p><p id="95a5" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">console.log(typeof ageInput.value, typeof 25);</code></p><p id="1f01" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们看到输入的值是一个<strong class="lc ir">字符串</strong>，即使我们将其类型设置为数字。</p><p id="3e92" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">&lt;input type="number" name="age" id="age-input" /&gt;</code></p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/66f325936e11dead0884a6015d2d3b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7qbPmcxXx4ymCZh6qQqhA.png"/></div></div></figure><p id="2928" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">if语句总是将这个表达式评估为false，因为我们使用了三个等号<strong class="lc ir"> === </strong>，这意味着我们比较值和数据类型。</p><p id="fbea" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">为了解决这个问题，我们需要将输入的传入值转换成一个数字。</p><pre class="mg mh mi mj gt mr mo ms mt aw mu bi"><span id="a066" class="mv kd iq mo b gy mw mx l my mz">if (Number(ageInput.value) === 25) {<br/>  ...<br/>}</span></pre><p id="3936" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">这个例子很好地说明了记录器比调试器更有用。</p><p id="88e0" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">同时，JavaScript控制台提供的不仅仅是一个简单的日志。</p><p id="dc6b" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">这里列出了<strong class="lc ir">控制台</strong>对象必须提供的所有方法，您可以在调试过程中使用这些方法。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/58856b87a471305b6d607e91e1d83ab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ui2DxzOk7ehq3j7hNmTpjw.png"/></div></div></figure><ul class=""><li id="1797" class="nb nc iq lc b ld ma lh mb ll nd lp ne lt nf lx ng nh ni nj bi translated"><strong class="lc ir"> console.trace() — </strong>显示一条跟踪信息，显示代码如何在某一点结束；如果你有调用其他函数的函数，并且你想看到执行堆栈，这非常有用</li><li id="4bbe" class="nb nc iq lc b ld nk lh nl ll nm lp nn lt no lx ng nh ni nj bi translated"><strong class="lc ir"> console.debug()、console.info()、console.warn()、console.error() </strong> —如果想在不同级别进行日志记录，非常有用；例如，如果您有一个<strong class="lc ir"> NodeJS </strong>应用程序，其中有一个像<strong class="lc ir"> PM2 </strong>这样的流程管理器，并且您想要错误、警告和信息的日志文件(errors.txt，warning.txt，info.txt)，那么您可以使用这些方法在相应的文件中打印消息</li><li id="7e07" class="nb nc iq lc b ld nk lh nl ll nm lp nn lt no lx ng nh ni nj bi translated"><strong class="lc ir"> console.time() </strong>和<strong class="lc ir"> console.timeEnd() — </strong>该方法启动和停止控制台视图中的计时器，您可以使用它来测量给定代码块的性能(<a class="ae lz" href="https://www.w3schools.com/jsref/met_console_time.asp" rel="noopener ugc nofollow" target="_blank">示例</a>)</li></ul><h1 id="5e34" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">调试器方式</h1><p id="8a69" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">正如我们之前说过的，你应该根据你的需要选择你的武器。在有些情况下，一个日志记录者不会有所帮助，或者实际上让事情变得更加困难。</p><p id="35bf" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">比如下面的代码为例:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/479c8b14bcb71f56df695591860756c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NdBjCY0SmhWPcFlXQZl1ww.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae lz" href="https://carbon.now.sh/?bg=rgba(171%2C%20184%2C%20195%2C%201)&amp;t=seti&amp;wt=none&amp;l=htmlmixed&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=%2520%253Cbody%253E%250A%2520%2520%2520%2520%253Cscript%253E%250A%2520%2520%2520%2520%2520%2520const%2520myFruits%2520%253D%2520%255B%250A%2520%2520%2520%2520%2520%2520%2520%2520%257B%2520name%253A%2520%2522apple%2522%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%257B%2520name%253A%2520%2522cherry%2522%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%257B%2520name%253A%2520%2522peach%2522%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%257B%2520name%253A%2520%2522banana%2522%2520%257D%250A%2520%2520%2520%2520%2520%2520%255D%253B%250A%250A%2520%2520%2520%2520%2520%2520function%2520countBananas(fruits)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520let%2520bananasCount%2520%253D%25200%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fruits.forEach(fruit%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520if%2520((fruit.name%2520%253D%2520%2522banana%2522))%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520bananasCount%252B%252B%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520%257D)%253B%250A%250A%2520%2520%2520%2520%2520%2520%2520%2520return%2520bananasCount%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%250A%2520%2520%2520%2520%2520%2520console.log(countBananas(myFruits))%253B%250A%2520%2520%2520%2520%253C%252Fscript%253E%250A%253C%252Fbody%253E" rel="noopener ugc nofollow" target="_blank">生</a></figcaption></figure><p id="b400" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">这段代码应该打印水果列表中香蕉的数量。在我们的例子中，它应该打印1，但是它有一个错误，如果我们运行它，我们将在控制台视图中看到数字4。</p><p id="cada" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">也许你已经明白了，但是假设我们只是粗略地看了一下这个代码片段，或者这是一个更大项目的一部分，我们没有发现问题。</p><p id="d8d9" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">让我们试着用一个记录器来找出它。在我们的函数<strong class="lc ir"> countBananas() </strong>中，在<strong class="lc ir">让bananasCount = 0之前添加下面一行；</strong></p><p id="e850" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">console.log(myFruits);</code></p><p id="d329" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">如果我们再次运行它，我们将在控制台视图中看到以下输出。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/70d1734e9e1fc80eb3b4ecde5fc101e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*XxPI6O3ZO3eimku50MZJwQ.png"/></div></figure><p id="c31e" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们很容易称这种行为为怪异，因为我们的列表看起来不是这样的。让我们从函数中移除<strong class="lc ir"> console.log </strong>，并在函数调用之前运行它。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/535c928b3a3925ee8ec82df78d3dcd81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wXLTzhQ7XnVDKyybsYb-LQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae lz" href="https://carbon.now.sh/?bg=rgba(171%2C%20184%2C%20195%2C%201)&amp;t=seti&amp;wt=none&amp;l=javascript&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=function%2520countBananas(fruits)%2520%257B%250A%2520%2520let%2520bananasCount%2520%253D%25200%253B%250A%2520%2520fruits.forEach(fruit%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520if%2520((fruit.name%2520%253D%2520%2522banana%2522))%2520%257B%250A%2520%2520%2520%2520%2520%2520bananasCount%252B%252B%253B%250A%2520%2520%2520%2520%257D%250A%2520%2520%257D)%253B%250A%250A%2520%2520return%2520bananasCount%253B%250A%257D%250A%250Aconsole.log(myFruits)%253B%250Aconsole.log(countBananas(myFruits))%253B" rel="noopener ugc nofollow" target="_blank"> RAW </a></figcaption></figure><p id="9c94" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">如果我们再次运行它，我们将看到相同的输出。</p><p id="c530" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">现在更糟了，因为我们在开始函数之前就打印了变量的值。</p><p id="0684" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><em class="ly">在这一点上，我们可能记得对象是作为引用</em> <a class="ae lz" href="https://medium.com/nodesimplified/javascript-pass-by-value-and-pass-by-reference-in-javascript-fcf10305aa9c" rel="noopener"> <em class="ly">发送的，而不是作为值</em> </a> <em class="ly">发送的，也许我们在函数中修改了对象的值。</em></p><p id="47ae" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们看到这里使用记录器是不可行的。</p><p id="2c8b" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">这不是JavaScript控制台的问题，更多的是它的异步行为和工作方式。你可以在这个<a class="ae lz" href="https://stackoverflow.com/questions/23429203/weird-behavior-with-objects-console-log" rel="noopener ugc nofollow" target="_blank">栈溢出帖子</a>上读到更多。</p><p id="4d2b" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">让我们克服这个问题，利用<strong class="lc ir">调试器。</strong>我们来添加以下断点。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/666a07491c35ce65e824f08f4343cccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k04x9dj6ik4RueK8qQb6UA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae lz" href="https://carbon.now.sh/?bg=rgba(171%2C%20184%2C%20195%2C%201)&amp;t=seti&amp;wt=none&amp;l=javascript&amp;ds=true&amp;dsyoff=20px&amp;dsblur=68px&amp;wc=true&amp;wa=true&amp;pv=56px&amp;ph=56px&amp;ln=false&amp;fl=1&amp;fm=Hack&amp;fs=14px&amp;lh=133%25&amp;si=false&amp;es=2x&amp;wm=false&amp;code=function%2520countBananas(fruits)%2520%257B%250A%2520%2520let%2520bananasCount%2520%253D%25200%253B%250A%2520%2520%250A%2520%2520debugger%253B%250A%2520%2520%250A%2520%2520fruits.forEach(fruit%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520if%2520((fruit.name%2520%253D%2520%2522banana%2522))%2520%257B%250A%2520%2520%2520%2520%2520%2520bananasCount%252B%252B%253B%250A%2520%2520%2520%2520%257D%250A%2520%2520%257D)%253B%250A%2520%2520debugger%253B%250A%2520%2520%250A%2520%2520return%2520bananasCount%253B%250A%257D" rel="noopener ugc nofollow" target="_blank">未加工的</a></figcaption></figure><p id="a195" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">当它到达第一个断点时，我们得到以下输出:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nt"><img src="../Images/ed073ae5cf055860a2c8fb9cef580cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JiwyuJJZOvuuOFYJQq4Mrg.png"/></div></div></figure><p id="7262" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">通过使用调试器，我们看到我们的水果数组没有问题，直到这里。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/e5579b70e5af4660f71280cddb88b022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lja29v2wYPIZE4CRf15Fxg.png"/></div></div></figure><p id="f05d" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">但是，到了第二个断点，我们看到我们的对象被<strong class="lc ir"> forEach </strong>循环中的一些代码修改了。</p><p id="33ac" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们现在可以将调试器放在<strong class="lc ir"> forEach </strong>循环中，如果我们继续这样做，我们会发现问题出在<strong class="lc ir"> if </strong>语句中。我们使用了赋值操作符而不是比较操作符。</p><p id="7abc" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们写道</p><p id="bc7d" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">if ((fruit.name = "banana"))</code></p><p id="60ee" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">代替</p><p id="69dd" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">if ((fruit.name == "banana"))</code></p><p id="bf0d" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">或者</p><p id="f5a0" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated"><code class="fe ml mm mn mo b">if ((fruit.name === "banana"))</code></p><p id="8294" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">正如我们所看到的，调试器更适合于代码变得更复杂和执行堆栈增加的情况。</p><h1 id="bae0" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">下一级是什么？</h1><p id="46b3" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这些例子是微不足道的。现实生活中的生产就绪型应用程序呢？</p><p id="0024" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们将如何处理下一个场景，我们有一个用户的应用程序，突然出现一个bug/错误？可以做远程调试吗？</p><p id="cdc7" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">在这种情况下，我们必须在本地设置上创建一个与生产环境相同的开发环境，并尝试复制错误或bug。</p><p id="c62e" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">一旦我们找到它，我们可以发布应用程序的新版本。</p><p id="5f91" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">但是，假设我们更进一步，我们有一个现代架构的现代解决方案。</p><p id="4756" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">我们没有单一的应用程序，而是在云中有微服务甚至无服务器的方法。</p><p id="a875" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">在这种情况下，MTTR/MTTI(平均解决时间/平均识别时间)比率将受到影响。</p><p id="44d5" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">云和容器的兴起导致系统变得更加分散和动态，从而使问题的故障诊断变得越来越困难。</p><p id="7173" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">这种松散解耦的架构使得可观测性变得更加重要，也更加具有挑战性。在无服务器解决方案的情况下，由于其架构的复杂性，这些应用程序在生产中<a class="ae lz" href="https://www.rookout.com/blog/debugging-in-production-how-to-stop-fearing-the-inevitable" rel="noopener ugc nofollow" target="_blank">调试要困难得多</a>。</p><p id="021c" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">没有远程调试过程的空间，因为缺少对服务器和操作系统级别的访问。为了调试这个应用程序，必须能够收集尽可能多的数据/日志。你可以使用平台本身提供的原生云工具，也可以使用商业云工具。</p><p id="17fb" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">谈到在云中调试实时代码，有几个工具可供选择。其中之一是<a class="ae lz" href="https://www.rookout.com/" rel="noopener ugc nofollow" target="_blank"> Rookout </a>，一个数据提取和流水线平台，它提供了一个惊人的能力，可以根据需要从您的实时代码中收集数据。</p><p id="3684" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">可以用于Python，Node.js，。NET和JVM运行时。</p><p id="c097" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">通过设置断点，您可以实时看到应用程序中发生了什么。</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/ac7df11e53a40d08911ebcec6f491bd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSmL_sFTZBNTQ4Mpyv2wCA.png"/></div></div></figure><h1 id="12ac" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="63ab" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">调试过程是我们几乎每天都要经历的事情。</p><p id="32f2" class="pw-post-body-paragraph la lb iq lc b ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt me lv lw lx ij bi translated">尽管这个问题有多种解决方案，但请记住始终选择最符合您需求的方案。从基本应用程序中的简单日志程序，到调试器，甚至代码测试，再到基于云的解决方案的高性能工具。</p></div></div>    
</body>
</html>