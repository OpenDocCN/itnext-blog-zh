<html>
<head>
<title>Common Logstash Use cases with GROK, JSON and Mutate filters.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GROK、JSON和Mutate过滤器的常见Logstash用例。</h1>
<blockquote>原文：<a href="https://itnext.io/common-logstash-use-cases-with-grok-json-and-mutate-filters-elk-logstash-in-docker-filebeat-871ed58c7651?source=collection_archive---------0-----------------------#2019-10-29">https://itnext.io/common-logstash-use-cases-with-grok-json-and-mutate-filters-elk-logstash-in-docker-filebeat-871ed58c7651?source=collection_archive---------0-----------------------#2019-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="84b4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"># ELK # Logstash in Docker # Filebeat # ki Bana # GROK</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8bb039a8fdd38eff755f799de7e4b584.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*vYMtE2W06Q0xH8FQ5k66Jw.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">图片参考:<a class="ae ku" href="https://www.elastic.co/brand" rel="noopener ugc nofollow" target="_blank">https://www.elastic.co/brand</a></figcaption></figure><h2 id="ca4b" class="kv kw it bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">嗨，技术人员，</h2><p id="1a94" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">今天我将解释一些涉及GROK和Mutate插件的常见Logstash用例。</p><p id="fa1b" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">对于下面的例子，我们使用的是<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/docker.html" rel="noopener ugc nofollow" target="_blank"> Logstash 7.3.1 Docker </a>版本以及Filebeat和Kibana(弹性搜索服务)。我们的Spring boot (Log4j)日志如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">Spring Boot日志:<a class="ae ku" href="https://gist.github.com/amilaI/cda9b5856c07ec3b4f6dc19d01a3c557" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/amilaI/cda9b 5856 c 07 EC 3 B4 f 6 DC 19d 01 a 3c 557</a></figcaption></figure><p id="788f" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">让我们看看如何实现以下用例。</strong></p><ol class=""><li id="9534" class="mr ms it lt b lu mk lx ml le mt li mu lm mv mj mw mx my mz bi translated">我们需要提取第一个日志(字符串)中的JSON响应，并将JSON中的每个字段添加/映射到Elasticsearch字段。这样，我们可以通过这些数据字段轻松地创建Kibana可视化或仪表板。</li><li id="ffdb" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">我们需要从上面提到的其余日志中找到并提取一些特定的文本/字符串，如<strong class="lt iu">用户Id </strong>和<strong class="lt iu">登录Id </strong>，并将它们添加为Elastcseach字段。</li><li id="4754" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">从第二个日志“<strong class="lt iu">最终用户标识XXX-XXXX-XXXX </strong>”中提取用户标识字段后，我们需要在Kibana中可视化一个垂直条形图，其中x轴包含提取的用户标识列表，y轴包含“总日志计数”。我们还需要用每个相应的用户名标记x轴用户id。(硬编码标签映射)</li></ol><p id="93ae" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">如何实现以上用例？</strong></p><p id="69be" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">首先，看看最终的Logstash.conf文件是什么样子的，然后让我们一行一行地看。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">final log stash . conf<a class="ae ku" href="https://gist.github.com/amilaI/0a7e44eee5a4176eede010191b4313a3" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/amilaI/0 a7e 44 eee 5a 4176 eede 010191 b 4313 a3</a></figcaption></figure><ol class=""><li id="2bf3" class="mr ms it lt b lu mk lx ml le mt li mu lm mv mj mw mx my mz bi translated">在本例中，Logstash输入来自<a class="ae ku" href="https://www.elastic.co/products/beats/filebeat" rel="noopener ugc nofollow" target="_blank"> Filebeat </a>。</li><li id="7708" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">首先，我们需要通过<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-dissect.html" rel="noopener ugc nofollow" target="_blank"> Logstash剖析过滤插件</a>将Spring boot/log4j日志格式分成时间戳、级别、线程、类别和消息。</li><li id="b2a3" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">有时，时间戳可以采用不同的格式，如“YYYY-MM-dd HH:mm:ss，SSS”或“YYYY-MM-dd HH:mm:ss”。SSS”，所以我们需要在<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-date.html#plugins-filters-date-match" rel="noopener ugc nofollow" target="_blank">日志日期过滤插件</a>的匹配块中包含这些格式。</li><li id="16d2" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">现在让我们从字符串消息中提取JSON对象，并做一些改变。</li><li id="f47e" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">让我们通过Logstash Mutate插件中的<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-copy" rel="noopener ugc nofollow" target="_blank">复制操作来复制消息，并保持原始消息不变，以简化事情。<strong class="lt iu">这是一个可选步骤。</strong></a></li><li id="0189" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">现在让我们通过<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-grok.html" rel="noopener ugc nofollow" target="_blank"> Logstash GROK filer插件</a>将这个JSON字符串设置为一个名为“payload_raw”的临时字段。这里使用的模式是<strong class="lt iu">pattern _ definitions =&gt;{ " JSON " =&gt;" {。*$" } </strong></li><li id="61eb" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">现在，让我们通过<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-json.html" rel="noopener ugc nofollow" target="_blank"> Logstash JSON过滤器插件</a>将JSON字符串转换成实际的JSON对象，这样Elasticsearch就可以将这些JSON字段分别识别为Elasticseatch字段。</li><li id="563c" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">就是这样！最后，我们可以通过Mutate filter插件中的<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-remove_field" rel="noopener ugc nofollow" target="_blank"> remove_field操作删除所有临时字段。</a></li><li id="fa5f" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">对于其他用例，我们只需要<a class="ae ku" href="https://github.com/elastic/logstash/blob/v1.4.0/patterns/grok-patterns" rel="noopener ugc nofollow" target="_blank"> Grok过滤器模式</a>。具体到上面我们只需要“<strong class="lt iu"> GREEDYDATA </strong>”。例如，如果我们需要查找userId并将其映射到一个名为“userId”的字段，我们可以简单地通过“<strong class="lt iu"> %{GREEDYDATA:userId} </strong>”来实现。这与Regex非常相似。</li><li id="6f6c" class="mr ms it lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">我们还可以通过GROK调试器测试和验证这些定制的GROK模式。(<a class="ae ku" href="https://grokdebug.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://grokdebug.herokuapp.com/</a>)</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nf"><img src="../Images/805baa7a6e5045ac1252ceb5d810d533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4MeDJd3gaDFVi5yOGkvgcA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">这是Grok调试器查找<strong class="bd kx"> %{GREEDYDATA:userId} </strong>的方式</figcaption></figure><p id="5344" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">此外，请注意，在logstash.conf的输出部分，我们已经使用<strong class="lt iu">stdout { codec =&gt;ruby debug }</strong>启用了<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-outputs-stdout.html" rel="noopener ugc nofollow" target="_blank"> Logstash调试</a></p><p id="9463" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">好吧！现在我们已经完成了logstash.conf，让我们运行Logstash (Docker)。此外，由于Filebeat被用作Logstash输入，我们也需要启动Filebeat进程。您可以使用以下命令来运行Logstash docker实例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">Logstash docker命令:<a class="ae ku" href="https://gist.github.com/amilaI/16bf3e1c006895facc8b5ddd3150bb88" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/amilaI/16 BF 3 E1 c 006895 facc 8 b5 DDD 3150 bb 88</a></figcaption></figure><p id="776e" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">注意</strong> : <strong class="lt iu">确保使用的docker端口没有被其他应用程序使用。使用network作为主机(— net=host)以避免类似Filebeat日志中出现的错误。</strong></p><p id="0862" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">2019–10–24t 10:25:59.648+0800错误logstash/async.go:256 <strong class="lt iu">未能发布事件原因:客户端未连接</strong><br/>2019–10–24t 10:26:00.755+0800错误管道/输出. go:121 <strong class="lt iu">未能发布事件:客户端未连接</strong><br/>2019–10–24t 10继续发送<br/>2019–10–24t 10:26:0</p><p id="97b3" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">以下是本例中使用的Filebeat.yml。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">filebeat . yml:<a class="ae ku" href="https://gist.github.com/amilaI/27672b0d8f2929eb79855466e1c8157e" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/amilaI/27672 b0d 8 f 2929 EB 79855466 E1 c 8157 e</a></figcaption></figure><p id="3851" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">让我们通过下面的命令运行Filebeat。(稍后，你可以使用<strong class="lt iu"> nohup </strong>来运行Filebeat作为后台服务，甚至使用<a class="ae ku" href="https://www.elastic.co/guide/en/beats/filebeat/current/running-on-docker.html" rel="noopener ugc nofollow" target="_blank"> Filebeat docker </a></p><blockquote class="nk"><p id="26a4" class="nl nm it bd nn no np nq nr ns nt mj dk translated"><strong class="ak">。/file beat-c config . yml-e-d " * "</strong></p></blockquote><p id="fa6f" class="pw-post-body-paragraph lr ls it lt b lu nu ju lw lx nv jx lz le nw mb mc li nx me mf lm ny mh mi mj im bi translated">最后，我们只需更新已配置的日志文件(/apps/test.log)，realtime Filebeat将选择更新的日志。现在，您可以测试和验证logstash插件/GROK过滤器配置。</p><p id="f848" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">如何跟踪日志docker日志？</strong></p><p id="658f" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">您还可以跟踪Logstash Docker实例的日志，</p><blockquote class="nk"><p id="114b" class="nl nm it bd nn no np nq nr ns nt mj dk translated">sudo docker logs-f-tail 500 logstash-test</p></blockquote><blockquote class="nz oa ob"><p id="ece3" class="lr ls oc lt b lu nu ju lw lx nv jx lz od nw mb mc oe nx me mf of ny mh mi mj im bi translated">为什么Filebeat不从我的文件中收集行？</p><p id="9fc0" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">Filebeat可能配置不正确或无法将事件发送到输出。要解决该问题:</p><p id="2f3b" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">确保配置文件指定了您正在收集的文件的正确路径。更多信息参见<a class="ae ku" href="https://www.elastic.co/guide/en/beats/filebeat/1.1/filebeat-configuration.html" rel="noopener ugc nofollow" target="_blank">步骤2:配置Filebeat </a>。</p><p id="ceb2" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">验证文件没有比<code class="fe og oh oi oj b"><a class="ae ku" href="https://www.elastic.co/guide/en/beats/filebeat/1.1/configuration-filebeat-options.html#ignore-older" rel="noopener ugc nofollow" target="_blank"><em class="it">ignore_older</em></a></code>指定的值旧。默认情况下，Filebeat会停止读取超过24小时的文件。您可以通过为<code class="fe og oh oi oj b"><a class="ae ku" href="https://www.elastic.co/guide/en/beats/filebeat/1.1/configuration-filebeat-options.html#ignore-older" rel="noopener ugc nofollow" target="_blank"><em class="it">ignore_older</em></a></code>指定不同的值来改变这种行为。</p><p id="5f8f" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">确保Filebeat能够将事件发送到配置的输出。在调试模式下运行Filebeat以确定它是否成功发布了事件</p><p id="9469" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">。/filebeat -c config.yml -e -d "* "</p><p id="6ab7" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">参考:<a class="ae ku" href="https://www.elastic.co/guide/en/beats/filebeat/1.1/_why_isn_t_filebeat_collecting_lines_from_my_file.html" rel="noopener ugc nofollow" target="_blank">https://www . elastic . co/guide/en/beats/file beat/1.1/_ why _ isn _ t _ file beat _ collecting _ lines _ from _ my _ file . html</a></p></blockquote><p id="4b29" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">接下来，让我们转移到基巴纳。对于这个例子，我在Elasticsearch服务中使用<a class="ae ku" href="https://medium.com/@amila922/email-slack-x-pack-actions-in-elasticsearch-service-cloud-watcher-elk-alerting-445faf01661f" rel="noopener"> Kibana。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ok"><img src="../Images/ca7c3a9c1d5b441804ba8345f96e729d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LR5ZMnruOlTe21DIhBqhIw.png"/></div></div></figure><p id="b3bd" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">您应该能够看到事件消息中包含的所有新字段以及消息、时间戳等。您还需要刷新Kibana索引的字段列表。</p><p id="53b0" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">导航至管理- &gt; Kibana(索引模式)- &gt;选择索引- &gt;刷新字段列表</strong></p><p id="c1e9" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">现在让我们专注于在Kibana中创建一个垂直条形图。</p><p id="2735" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">导航到基巴纳- &gt;可视化- &gt;创建新的可视化- &gt;竖条</strong></p><p id="f1d8" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">根据需要选择索引。</p><p id="3aa5" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">选择“<strong class="lt iu">计数</strong>”作为Y轴的聚合。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/dab585d0669e072da5fd0f059c12a7cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*p3ZCHwwxtit4AFuZ5zUYWA.png"/></div></figure><p id="1c57" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">现在选择X轴<strong class="lt iu">聚合</strong>中的<strong class="lt iu">过滤器</strong>。通过标签功能添加每个用户Id和标签(用户名)映射。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/92add808d0b5ad37e6080dd5e16d6a0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*b_jJ0ycYy8QikCT13xihZA.png"/></div></figure><p id="8a35" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">现在，您应该能够看到预期的条形图可视化。:)</p><p id="976b" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi on translated"><span class="l oo op oq bm or os ot ou ov di">另一种完成标签映射的方式是通过<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-translate.html" rel="noopener ugc nofollow" target="_blank"> Logstash翻译插件</a>。(logstash方式)。既然我们已经提取了userId字段，接下来我们需要的是某种类型的<strong class="lt iu">常量键值数据结构(可以是一个映射或字典)</strong>或<strong class="lt iu">一些在Logstash级别中硬编码的常量数组</strong>。现在Logstash翻译插件来拯救我们了。</span></p><blockquote class="nz oa ob"><p id="4359" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated">翻译过滤器插件是一个通用的搜索和替换工具，它使用配置的哈希和/或文件来确定替换值。目前支持YAML、JSON和CSV文件。每个字典条目都是一个键值对。</p><p id="56de" class="lr ls oc lt b lu mk ju lw lx ml jx lz od mm mb mc oe mn me mf of mo mh mi mj im bi translated"><a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-translate.html#plugins-filters-translate" rel="noopener ugc nofollow" target="_blank">https://www . elastic . co/guide/en/log stash/current/plugins-filters-translate . html # plugins-filters-translate</a></p></blockquote><p id="ceb7" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">好吧！现在我们需要的是一个新字段(在本例中为'<strong class="lt iu">用户名</strong>')，并用给定用户Id (这是<strong class="lt iu">键</strong>)的<strong class="lt iu">对应字典值</strong>填充它。如果字典中有与给定键(userId)匹配的键，相应的值将被映射到“<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-translate.html#plugins-filters-translate-destination" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">目的地</strong> </a>”字段。让我们看看这些设置。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://gist.github.com/amilaI/9c0219de8b285517326b0eb434a83a67" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/ami lai/9c 0219 de 8 b 285517326 b 0 EB 434 a 83 a 67</a></figcaption></figure><p id="49d1" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">就是这样！因此，最终现在您可以轻松地在Kibana中创建相同的条形图，而无需在Kibana级别进行任何过滤器标签映射。</p><p id="3fcd" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">现在让我分享一些我在使用Logstash时遇到的小事情。:)</p><p id="c40e" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">如何在Logstash Conf中打印消息以便调试？</strong></p><p id="359c" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi on translated">有时候，当你调试日志时，你可能需要在日志中打印一些消息来验证。您可以简单地使用Logstash <a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-ruby.html" rel="noopener ugc nofollow" target="_blank"> Ruby过滤器插件</a>来实现这一点，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://gist.github.com/amilaI/a5e5c647f18e3d110d73f379dee4f531" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/ami lai/a5e 5c 647 f 18 e 3d 110d 73 f 379 dee 4 f 531</a></figcaption></figure><p id="5b3b" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">如何美化或适当缩进Logstash conf？</strong></p><p id="c1fb" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">https://beautifier.io/是一个很棒的在线工具，可以缩进或者美化Logstash conf(不仅仅是JSON by Conf)</p><p id="778e" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated"><strong class="lt iu">如何在Logstash中搜索并替换一个字符串？</strong></p><p id="2c2b" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">您可以通过Logstash Mutate插件中的<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-gsub" rel="noopener ugc nofollow" target="_blank"> gsub操作来实现这一点。</a></p><p id="b8b7" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">除此之外，<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-add_field" rel="noopener ugc nofollow" target="_blank"> add_field </a>，<a class="ae ku" href="https://www.elastic.co/guide/en/logstash/current/plugins-filters-mutate.html#plugins-filters-mutate-tag_on_failure" rel="noopener ugc nofollow" target="_blank"> tag_on_failure </a>是我觉得很重要的一些操作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ow"><img src="../Images/893609504fde78f3c4a0f044433bf00c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGNRWRr3S6zhHIV5j_YTKA.jpeg"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://www.incimages.com/uploaded_files/image/970x450/getty_456110931_9709539704500220_74714.jpg" rel="noopener ugc nofollow" target="_blank">https://www . in images . com/uploaded _ files/image/970 x450/Getty _ 456110931 _ 9709539704500220 _ 74714 . jpg</a></figcaption></figure><p id="1656" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">酷！我现在就知道这些。:)希望这篇文章对你有帮助。感谢您的阅读，如果您觉得这篇文章有帮助，请鼓掌！</p><p id="92ab" class="pw-post-body-paragraph lr ls it lt b lu mk ju lw lx ml jx lz le mm mb mc li mn me mf lm mo mh mi mj im bi translated">干杯！！</p></div></div>    
</body>
</html>