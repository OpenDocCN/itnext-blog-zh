<html>
<head>
<title>A Kubernetes Controller for Styra DAS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Styra DAS的Kubernetes控制器</h1>
<blockquote>原文：<a href="https://itnext.io/a-kubernetes-controller-for-styra-das-9aa8e11c9947?source=collection_archive---------2-----------------------#2021-11-16">https://itnext.io/a-kubernetes-controller-for-styra-das-9aa8e11c9947?source=collection_archive---------2-----------------------#2021-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="16b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们刚刚为Styra声明式授权服务开源了我们的Kubernetes控制器。如果你有兴趣通过库伯内特管理OPAs，请继续阅读。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="b499" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是Styra声明式授权服务？</strong></p><p id="418f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Styra DAS是一个控制平面，用于管理地面上的许多OPA实例。类似于istio之于特使，或者Kubernetes之于Kubelets。它告诉那些下游实例他们应该做什么(并报告状态、决策、分析等)。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi kt"><img src="../Images/0fa3235cb5d43c4a8cf90ead12ebfa9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s9FcaiCJ71ryAU_tm28gxA.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">您可以为不同的用例连接许多OPA实例</figcaption></figure><p id="67d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">细粒度访问控制的用例</strong></p><p id="1f3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我确信有很多控制资源访问的用例。以下是一些突出的例子:</p><ol class=""><li id="6d6f" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">OPA作为Kubernetes准入控制者来审核和决定Kubernetes API请求，这为标准的Kubernetes RBAC提供了一个更细粒度的解决方案。</li><li id="7fda" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">网络上的OPA，决定是否允许某人访问网络上的资源。这通常通过<a class="ae kl" href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html" rel="noopener ugc nofollow" target="_blank"> ext_authz过滤器</a>与envoy成对出现。</li><li id="a06b" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">另一个突出的用例来自业务应用程序内部，例如检查是否允许某人从数据库请求某些数据。</li></ol><p id="d7d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无论如何，有许多OPA实例需要管理。</p><p id="96df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Styra DAS中，你使用OPA来控制的每个真实世界的软件系统都由一个<em class="lx">系统</em>来表示。因此，单个<em class="lx">系统</em>可能管理许多不同的opa，所有这些opa都执行相同的策略。例如，如果您想使用OPA在三个Kubernetes集群上实施策略，您将创建三个不同的<em class="lx">系统</em>。如果您还想使用OPA在四个不同的基于特使的服务网格上实施策略，那么您将创建四个额外的<em class="lx">系统</em>。要在Styra DAS中注册一个实例，需要在DAS API中创建一个<em class="lx">系统</em>，检索注册令牌并用该令牌配置实际的OPA实例</p><p id="95b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以通过用户界面手动完成，也可以自动完成。</p><p id="75f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Provider-styra帮助Styra DAS自动管理OPA实例</strong></p><p id="1b8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Provider-styra 是一个Kubernetes控制器，它将Styra DAS API镜像到Kubernetes资源模型中。我们可以通过Kubernetes API以标准化的方式来管理Styra DAS系统(代表OPA实例)的生命周期，而不是通过它们的UI或自定义API实现。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ly"><img src="../Images/f70eda7edf13931f4d2286bf1a04a98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MTYkDSbw5UZj0u1PqCLlA.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">Styra DAS系统和同步回来的OPA令牌的YAML表示</figcaption></figure><p id="31df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为什么要在Kubernetes管理Styra DAS系统？</p><p id="cfcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，有一个基础设施的声明式表示是很好的。但是还有其他好处。</p><p id="585a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">人们已经通过Kubernetes管理应用程序，随着CRDs作为一种扩展机制被接受，我们看到它也被扩展到其他部分。流行的例子是开源项目<a class="ae kl" href="https://crossplane.io/" rel="noopener ugc nofollow" target="_blank"> crossplane </a>或者像<a class="ae kl" href="https://cloud.google.com/config-connector/docs/overview" rel="noopener ugc nofollow" target="_blank"> Google Config Connector </a>这样的专有服务，它们允许你在Kubernetes资源模型中声明性地描述基础设施(而不是Terraform HCI、CloudFormation等等)。</p><p id="4af9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一些优点是在CI/CD管道中重用现有的yaml管理机制。利用Kubernetes RBAC来控制对API的访问。或者基础设施GitOps。或者从Kubernetes API的其他特性中受益，比如变异和验证webhooks，可能是为了更细粒度的访问控制(由OPA btw实现)。</p><p id="5173" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后但同样重要的是，我们可以用交叉平面<a class="ae kl" href="https://crossplane.io/docs/v1.5/reference/composition.html" rel="noopener ugc nofollow" target="_blank">组合</a>创建更高级别的API。这就是真正的好处开始显现的地方。更多关于这方面的内容。</p><p id="0dca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参见供应商-施泰拉的行动</strong></p><p id="2003" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要学习本教程，您需要一个<a class="ae kl" href="https://signup.styra.com/" rel="noopener ugc nofollow" target="_blank"> DAS帐户</a>。在撰写本文时，provider-styra实现了两个对象:<em class="lx">系统</em>和<em class="lx">堆栈</em>。堆栈是另一个特性，它使你能够编写适用于许多不同系统的全局策略(但那是另一篇博文)。</p><p id="daf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然provider-styra可以作为一个独立的Kubernetes控制器使用，但它与<a class="ae kl" href="https://crossplane.io/" rel="noopener ugc nofollow" target="_blank">交叉平面</a>结合使用时功能更加强大。让我们看看如何带他们兜一圈，跟随<a class="ae kl" href="https://crossplane.io/docs/v1.5/getting-started/install-configure.html#using-self-hosted-crossplane" rel="noopener ugc nofollow" target="_blank">官方文件</a>:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="3743" class="me mf iq ma b gy mg mh l mi mj">kind create cluster</span><span id="c59b" class="me mf iq ma b gy mk mh l mi mj">kubectl create namespace crossplane-system<br/><br/>helm repo add crossplane-stable https://charts.crossplane.io/stable<br/>helm repo update<br/><br/>helm install crossplane --namespace crossplane-system crossplane-stable/crossplane --version 1.5.0<br/><br/># (optionally) install the crossplane-cli<br/>curl -sL https://raw.githubusercontent.com/crossplane/crossplane/master/install.sh | sh</span></pre><p id="d1b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">crossplane cli允许我们轻松安装提供商包，但这不是强制性的。您也可以通过kubectl apply -f安装provider(当然可以)，但是为了简单起见，我们使用cli来安装provider-styra:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="b4d6" class="me mf iq ma b gy mg mh l mi mj">kubectl crossplane install provider crossplane/provider-styra:v0.1.0</span></pre><p id="8afb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">过了一会儿，我们可以看到我们的Kubernetes集群能够管理更多资源:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="4d51" class="me mf iq ma b gy mg mh l mi mj">$ kubectl api-resources | grep styra<br/>[...]<br/>stacks    styra.crossplane.io/v1alpha1       false        Stack<br/>systems   styra.crossplane.io/v1alpha1       false        System</span></pre><p id="661d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在provider-styra需要配置为连接到Styra DAS控制平面的端点:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="13ad" class="me mf iq ma b gy mg mh l mi mj">apiVersion: styra.crossplane.io/v1alpha1<br/>kind: ProviderConfig<br/>metadata:<br/>  name: default<br/>spec:<br/>  host: $YOUR_STYRA_INSTANCE          # without https:// prefix<br/>  basepath: '/'<br/>  credentials:<br/>    secretRef:<br/>      key: token<br/>      name: provider-styra-creds<br/>      namespace: crossplane-system<br/>    source: Secret</span></pre><p id="54ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后要做的事情是配置认证:访问<a class="ae kl" href="https://signup.styra.com/" rel="noopener ugc nofollow" target="_blank">https://&lt;STYRA _ INSTANCE&gt;/access-control/API-tokens</a>并创建一个新的令牌，用于在Styra DAS API上认证provider-styra。</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="21fd" class="me mf iq ma b gy mg mh l mi mj">kubectl create secret -n crossplane-system generic provider-styra-creds --from-literal=token=$API_TOKEN</span></pre><p id="c3a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保授予该令牌适当的权限，例如workspace administrator(https://<styra_instance>/access-control/permissions/API-tokens)。</styra_instance></p><p id="30ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们都准备好了，可以创建系统了。以下是Styra DAS的OPA准入控制器示例:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="137f" class="me mf iq ma b gy mg mh l mi mj">apiVersion: styra.crossplane.io/v1alpha1<br/>kind: System<br/>metadata:<br/>  name: example-system<br/>spec:<br/>  forProvider:<br/>    description: "Hello world"<br/>    type: kubernetes:v2<br/>  writeConnectionSecretToRef:<br/>    name: example-system<br/>    namespace: crossplane-system</span></pre><p id="015f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个新的系统应该出现在Styra DAS:</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ml"><img src="../Images/589e87937f16a2aa4a9632d3a201bb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zrL3Ndb-NwV4uj4BvWr0w.png"/></div></div></figure><p id="2a44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了创建系统，provider-styra还帮助您在k8s集群上安装OPAs，以实现k8s准入控制。DAS为kubectl、kustomize和helm提供安装工件。Provider-styra读取资产端点并将helm chart值写回到Kubernetes秘密中，我们可以使用这个秘密将OPA安装到集群中并向styra注册:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="2d6b" class="me mf iq ma b gy mg mh l mi mj">kubectl -n crossplane-system get secret example-system -o json | jq .data.helmValues -r | base64 -d &gt; values.yaml<br/>helm install -n styra-system -f values.yaml styra-k8s-system styra-k8s-system-0.5.4.tgz</span></pre><p id="97db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，我们已经看到了如何在Kubernetes中声明性地控制Styra DAS系统。接下来，我们将完成使用Helm来安装用于准入控制的OPAs。让我们添加提供者-头盔！</p><p id="844e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提供者掌舵的掌舵图部署</strong></p><p id="a37e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/crossplane-contrib/provider-helm" rel="noopener ugc nofollow" target="_blank"> Provider-helm </a>是一个Kubernetes控制器，它管理任何连接的Kubernetes集群中的helm图表。通过交叉平面命令行界面安装提供商helm:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="1c73" class="me mf iq ma b gy mg mh l mi mj">kubectl crossplane install provider crossplane/provider-helm:v0.9.0</span></pre><p id="68a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设置一个<em class="lx">in-cluster</em>provider config，以便我们可以将图表部署到同一个集群中(注意，为了简单起见，这里使用了cluster-admin权限):</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="51b6" class="me mf iq ma b gy mg mh l mi mj">SA=$(kubectl -n crossplane-system get sa -o name | grep provider-helm | sed -e 's|serviceaccount\/|crossplane-system:|g')<br/>kubectl create clusterrolebinding provider-helm-admin-binding --clusterrole cluster-admin --serviceaccount="${SA}"</span><span id="e270" class="me mf iq ma b gy mk mh l mi mj">kubectl apply -f <a class="ae kl" href="https://raw.githubusercontent.com/crossplane-contrib/provider-helm/master/examples/provider-config/provider-config-incluster.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/crossplane-contrib/provider-helm/master/examples/provider-config/provider-config-incluster.yaml</a></span></pre><p id="b4ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以创建一个<em class="lx">版本</em>来自动安装styra agents helm图表:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="0525" class="me mf iq ma b gy mg mh l mi mj">apiVersion: helm.crossplane.io/v1beta1<br/>kind: Release<br/>spec:<br/>  rollbackLimit: 3<br/>  forProvider:<br/>    namespace: styra-system<br/>    chart:<br/>      name: styra-k8s-system<br/>      repository: <a class="ae kl" href="http://chartmuseum.chartmuseum.svc:8080/" rel="noopener ugc nofollow" target="_blank">http://chartmuseum.chartmuseum.svc:8080/</a><br/>      version: "0.5.4"<br/>    valuesFrom:<br/>      - secretKeyRef:<br/>          name: example-system<br/>          namespace: crossplane-system<br/>          key: helmValues<br/>          optional: false<br/>  providerConfigRef:<br/>    name: helm-provider</span></pre><p id="d6c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在部署了OPA作为准入控制器，以及Styra DAS代理。更近了一步，但仍有改进的空间。</p><p id="1cc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">用交叉平面组合连接点</strong></p><p id="1aed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不需要分别描述这两种资源(styra系统和helm chart部署)，而是可以将它们连接成一个组合。</p><p id="c2ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一篇作文有两部分:</p><ol class=""><li id="d174" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">XRD(描述物体看起来应该是什么样子，以及将产生哪个CRD)</li><li id="597f" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">合成(实际的合成，类似于模板/中的helm文件)</li></ol><p id="0b23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个设置中，我们将在一个主机Kubernetes集群中运行虚拟Kubernetes集群。github描述了完整的设置:<a class="ae kl" href="https://github.com/janwillies/virtual-k8s-styra-opa" rel="noopener ugc nofollow" target="_blank">https://github.com/janwillies/virtual-k8s-styra-opa</a></p><p id="c41e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这两个资源，我们可以创建一个或多个集群xrc，它们是组合的命名空间实例:</p><pre class="ku kv kw kx gt lz ma mb mc aw md bi"><span id="483c" class="me mf iq ma b gy mg mh l mi mj">apiVersion: cnp.example.org/v1alpha1<br/>kind: Cluster<br/>metadata:<br/>  name: cluster-1<br/>  namespace: default<br/>spec: {}<br/>---<br/>apiVersion: cnp.example.org/v1alpha1<br/>kind: Cluster<br/>metadata:<br/>  name: cluster-2<br/>  namespace: default<br/>spec: {}</span></pre><p id="c6bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将导致创建两个Kubernetes集群，这两个集群都安装了OPAs，并在Styra DAS中显示:</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mm"><img src="../Images/1cd1f0e063edf5ac1bd14a096a126445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioC8JrfbYVfYAQluDKsm3A.png"/></div></div></figure><p id="d18b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，只需一个Kubernetes资源，我们就可以在Styra上创建一个系统，并使用定制配置部署代理。这是一个简单的API，我们可以分发给开发团队。</p><p id="07a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">平台团队可以为包含电池的Kubernetes集群提供一个API，该集群带有一组默认的代理(用于合规性、安全性、监控等)。</p><p id="6057" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">总结</strong></p><p id="af45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">管理大量OPA实例是一项挑战。Styra DAS提供了一个控制平面来帮助解决这个问题。<a class="ae kl" href="https://github.com/crossplane-contrib/provider-styra" rel="noopener ugc nofollow" target="_blank"> Provider-styra </a>是一个开源的Kubernetes控制器，它将Styra DAS API镜像到Kubernetes资源模型中。这允许将Styra DAS系统(和其他资源)建模为YAML表示，并支持类似GitOps的工作流。</p><p id="6b23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lx">系统</em>的连接令牌从Styra API读入Kubernetes Secrets。借助provider-helm，可以读取连接令牌并完全自动安装连接到Styra DAS控制面板的opa。</p><p id="329b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你对此感兴趣。欢迎在<a class="ae kl" href="https://github.com/crossplane-contrib/provider-styra" rel="noopener ugc nofollow" target="_blank">github.com/crossplane-contrib/provider-styra</a>发表评论或参与进来。你可以在twitter.com/loswillios找到我。</p></div></div>    
</body>
</html>