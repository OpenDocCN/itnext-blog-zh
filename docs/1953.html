<html>
<head>
<title>Hunting For Unused CSS and Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">搜寻未使用的CSS和Javascript</h1>
<blockquote>原文：<a href="https://itnext.io/hunting-for-unused-css-and-javascript-57e8d9bc2a67?source=collection_archive---------2-----------------------#2019-03-01">https://itnext.io/hunting-for-unused-css-and-javascript-57e8d9bc2a67?source=collection_archive---------2-----------------------#2019-03-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="44b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Chrome开发工具提示:代码覆盖抽屉</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7a3899d3d5a723b2f84b5c8c45dce602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P2vHoYhY33Lm9Jqn"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">卡尔·瑟斯特兰德在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c7b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">向用户交付快速应用程序的最佳方式是加载更少的代码。听起来很简单，对吗？开发人员总是在寻找工具来帮助缩小、捆绑和组织他们的代码。我们知道感知加载时间的重要性，也明白如果我们的应用程序不能在几秒钟内提供价值，我们就会失去潜在客户。</p><blockquote class="lf lg lh"><p id="5341" class="jq jr li js b jt ju jv jw jx jy jz ka lj kc kd ke lk kg kh ki ll kk kl km kn im bi translated">快速加载你的资源是很重要的，但是你的CSS是最重要的，因为它是一个阻塞资源。</p></blockquote></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h2 id="4203" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">我们团队的CSS情况</h2><p id="8178" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">CSS会很快失控。没有一个合适的策略，重复的规则会使你的代码混乱，管理你的文件会使开发更具挑战性。</p><p id="44d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的团队最近将几个页面转换成了一个<a class="ae le" href="https://medium.com/@chrisgirard/converting-your-code-base-to-react-1930945dc017" rel="noopener"> React应用</a>，但是继续使用我们现有的CSS基础设施。我们不想重写我们的CSS，我们对规则的可重用性很满意。我们有许多SCSS部分，并把它们按元素和特性分类:变量、图标、按钮、表单、标签等。</p><p id="9390" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们有一个或两个共享的样式表，包含许多页面共享的规则，如导航、按钮和页脚样式。然后，我们有额外的页面特定风格的SCSS文件，如主页，登录页面和定价页面。</p><p id="be1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当转换我们现有的一些页面来反应时，我们做了一些代码清理，并决定我们可以做得更好，减少加载的CSS。我们知道我们有许多未使用的规则，并试图使它变得更好。我们遇到的一个工具被方便地内置到Chrome中——<strong class="js iu">代码覆盖抽屉</strong>。</p><h2 id="7eb9" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">Chrome开发工具命令菜单</h2><p id="689e" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">命令菜单允许您快速运行开发工具命令。打开Chrome Dev Tools，键入<em class="li"> command &gt; shift &gt; p </em>然后输入搜索，自己尝试一下。您可以快速启用3G节流、切换到面板、切换抽屉和许多其他命令。</p><pre class="kp kq kr ks gt mr ms mt mu aw mv bi"><span id="2daf" class="lt lu it ms b gy mw mx l my mz"><em class="li">command &gt; shift &gt; p</em></span></pre><h2 id="1a3e" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">代码覆盖率抽屉</h2><p id="b2b8" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">覆盖抽屉是在Chrome 59中引入的，令人惊讶的是它是一个鲜为人知的功能。它显示了每个文件中未使用的JavaScript和CSS的数量。这显然有很多好处，可以帮助我们使文件尽可能小，并且只加载我们绝对需要的资源。</p><p id="0ba2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您需要通过打开命令菜单，然后选择<strong class="js iu">显示覆盖范围来启用它。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi na"><img src="../Images/7cf2d2614317c1b2b7413d616560e0f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NlAT6Dmqxe60FtfWXMWf7w.png"/></div></div></figure><p id="a177" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">代码覆盖率标签将出现在Chrome开发工具的抽屉部分。要在该部分中切换抽屉和其他选项卡，您可以单击<em class="li"> esc </em>键。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nb"><img src="../Images/091474e2df1cc53648c065933945f304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QcR8H36ZK5ItrBrHAVnuVQ.png"/></div></div></figure><p id="61f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过单击记录或刷新按钮开始捕获。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nc"><img src="../Images/aa07509bb875beeea289e9ac6b0d8cda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WnQbNezfMlYkBOHw_cFFQw.png"/></div></div></figure><p id="b6a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您正在录制，您可以调整浏览器窗口的大小来触发您的媒体查询，希望您会看到未使用的字节减少。如果你点击其中一个网址，你可以看到哪些代码行正在使用。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nd"><img src="../Images/82144c7027081679790736c9459de179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjGQq8fTn5SUM_A64qTo_w.png"/></div></div></figure><h2 id="12c7" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">结果</h2><p id="6731" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">我们88%的CSS没有被使用。呀。乍一看，这似乎真的很糟糕，直到我们意识到动画关键帧、印刷媒体查询、无数的网格类和其他不常用的规则正在被加载。我们能够确定一些不应该加载的明确规则，并为快速获胜而修正它们。</p><blockquote class="lf lg lh"><p id="ffbb" class="jq jr li js b jt ju jv jw jx jy jz ka lj kc kd ke lk kg kh ki ll kk kl km kn im bi translated">Chrome Coverage抽屉是一个很好的起点，因为它可以快速显示我们是否在个人资料页面加载主页样式。</p></blockquote><h2 id="8932" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">后续步骤</h2><p id="5bab" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">在JSX写CSS。太激烈了？这似乎一直是一个被抛弃的想法，但这个争论每年都变得越来越有意义。一旦您开始使用React并希望保存每一个字节，这似乎并不遥远。</p><p id="da26" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的团队正在寻找一个更小的基本CSS文件，并可能将页面样式导入React组件。</p><p id="c8a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Chrome Coverage Drawer是一个很好的工具，可以帮助识别遗留的CSS规则以及隐藏的功能。它甚至可以帮助您将CSS文件重组为一个更加模块化和易于管理的系统。</p><h2 id="1a81" class="lt lu it bd lv lw lx dn ly lz ma dp mb kb mc md me kf mf mg mh kj mi mj mk ml bi translated">继续使用Chrome开发工具</h2><p id="8a5b" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">下面是Chrome团队介绍代码覆盖特性的视频。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="d372" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的团队试图跟上最新的开发变化，以帮助我们更好地调试。Google Chrome大约每两周更新一次，他们通常会发布一个开发视频，介绍开发工具的所有变化。我建议关注他们，因为他们会定期发布更新，让开发者的生活变得更好。</p></div></div>    
</body>
</html>