<html>
<head>
<title>Vue.js and Webpack 4 From Scratch, Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js和Webpack 4从头开始，第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/vuejs-and-webpack-4-from-scratch-part-1-94c9c28a534a?source=collection_archive---------0-----------------------#2018-03-17">https://itnext.io/vuejs-and-webpack-4-from-scratch-part-1-94c9c28a534a?source=collection_archive---------0-----------------------#2018-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9f6d992cf35abccb4e014e298bf9e30c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H9Adf9GRVkGBKi82."/></div></div></figure><h1 id="fd21" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第1部分:启动和运行</h1><p id="de58" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我之前的<a class="ae lu" href="http://medium.com/@petrefax66/getting-started-vue-js-and-visual-studio-code-6990f92e918a" rel="noopener">文章</a>描述了如何使用命令行界面创建Vue.js应用程序。这是最简单的入门方式，将适合大多数需求。然而，尝试走相反的路，完全从零开始构建一个应用程序，当然没有坏处。随着<a class="ae lu" href="https://medium.com/webpack/webpack-4-released-today-6cdb994702d4" rel="noopener"> Webpack 4 </a>的发布，现在是一个很好的时机来走这条雄心勃勃的路线，并通过完全手工制作来学习更多关于构建和捆绑过程的工作原理。</p><p id="aa18" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">在本文中，我将从一个空文件夹开始，为一个Vue.js应用程序创建一个webpack构建，包括:</p><ul class=""><li id="960e" class="ma mb iq ky b kz lv ld lw lh mc ll md lp me lt mf mg mh mi bi translated">使用webpack-dev-server加载热模块</li><li id="6b78" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt mf mg mh mi bi translated">使用eslint的林挺</li><li id="da64" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt mf mg mh mi bi translated">用手写笔进行CSS预处理</li><li id="8bc1" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt mf mg mh mi bi translated">使用@vue/test-utils和Jest进行测试</li></ul><p id="2a30" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">唯一的先决条件是安装node和npm，尽管我将使用VSCode作为我的编辑器。</p><p id="c066" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">本文的最终代码可以在<a class="ae lu" href="https://github.com/dfcook/vue-webpack4-template" rel="noopener ugc nofollow" target="_blank"> github </a>上找到，作为参考，官方的webpack模板无疑将很快更新到Webpack 4。</p><p id="04d7" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">由于这是一个相当长的过程，我将把这篇文章分成几个部分，第一部分将把我们从一个空文件夹带到一个包含与webpack捆绑在一起的Vue组件的简单页面，并在浏览器窗口中打开。</p><p id="492d" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">第2部分将介绍使用babel的热模块重装、造型和传输。</p><p id="9ce0" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><a class="ae lu" href="https://medium.com/@petrefax66/vue-js-and-webpack-4-from-scratch-part-3-3f68d2a3c127" rel="noopener">最后部分</a>涵盖林挺、测试、静态资产和CSS提取。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="ae0f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">首先要做的是创建一个新的文件夹，光盘到它和初始化NPM:</p><p id="3979" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><code class="fe mv mw mx my b">npm init</code></p><p id="bfe1" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">您将被要求提供一些关于项目的信息，在这个阶段接受缺省值是安全的，一旦完成，您将得到一个package.json文件，其中除了元信息之外没有任何内容。现在我们可以开始添加我们的包了。</p><p id="8b40" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><code class="fe mv mw mx my b">npm install --save vue vue-router</code></p><p id="fb78" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这将安装我们的应用程序依赖项。</p><p id="a5ef" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><code class="fe mv mw mx my b">npm install --save-dev webpack webpack-cli</code></p><p id="dd6c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这将安装webpack，使我们能够开始构建我们的应用程序包。</p><h2 id="51fd" class="mz jz iq bd ka na nb dn ke nc nd dp ki lh ne nf km ll ng nh kq lp ni nj ku nk bi translated">应用程序结构</h2><p id="1637" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我喜欢把所有的应用程序代码，我们的javascript和vue组件放在一个名为src的子文件夹中。在这里我将补充:</p><ol class=""><li id="3457" class="ma mb iq ky b kz lv ld lw lh mc ll md lp me lt nl mg mh mi bi translated">app.js:应用入口点。</li><li id="b6b3" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">App.vue:根组件</li><li id="d194" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">pages:包含所有顶级组件的文件夹，每个组件都有一个与之关联的路由条目。</li><li id="81eb" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">组件:包含构建块组件的文件夹。组件将根据功能组织到子文件夹中。</li><li id="48b6" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">路由器:所有vue路由器配置的文件夹。</li></ol><p id="f69e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">如果我使用vuex，我会创建另一个名为store的文件夹来保存我们所有的动作/突变等。</p><p id="c973" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">当我创建这些时，文件夹结构应该是这样的:</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/7fc73730cb119f372a9a6cc531d88afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRQYrW3t2qkOZYezwuPz5A.png"/></div></div></figure><p id="f830" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我们将从最简单的入口点开始我们的app.js:</p><pre class="nn no np nq gt nr my ns nt aw nu bi"><span id="cd90" class="mz jz iq my b gy nv nw l nx ny">import Vue from 'vue'<br/>import App from './App.vue'</span><span id="fa87" class="mz jz iq my b gy nz nw l nx ny">new Vue({<br/>  el: '#app',<br/>  render: h =&gt; h(App)<br/>})</span></pre><p id="2370" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">这将引入我们的app组件，并将其呈现到id为“App”的DOM元素中。我们的应用程序组件目前同样简单:</p><pre class="nn no np nq gt nr my ns nt aw nu bi"><span id="1f17" class="mz jz iq my b gy nv nw l nx ny">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="7087" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">现在我们有了一些Vue代码，我们需要使用Webpack捆绑它，这样它就可以被拉入我们的html。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h2 id="c9fe" class="mz jz iq bd ka na nb dn ke nc nd dp ki lh ne nf km ll ng nh kq lp ni nj ku nk bi translated">网络包</h2><p id="ff01" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Webpack是Javascript应用程序的模块捆绑器，当我们运行webpack命令时，我们要求它从我们的入口点开始，然后构建整个应用程序的依赖关系图，将这些依赖关系拉进一个或多个可以包含在我们的应用程序中的捆绑包。它通过<strong class="ky ir">加载器</strong>支持多种不同的文件类型，加载器将获取没有模块概念的文件(例如css)并以允许它们参与webpack正在构建的整体依赖图的方式处理它们。</p><p id="c226" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">Webpack 4刚刚发布，具有大量新功能，包括:</p><ol class=""><li id="e693" class="ma mb iq ky b kz lv ld lw lh mc ll md lp me lt nl mg mh mi bi translated">优化API的内置分块支持。</li><li id="5504" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">支持5种不同的模块类型，包括Web组装模块。</li><li id="eaef" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">一个“模式”配置设置，它应用了一组合理的缺省值，简单的项目可以仅仅依靠它来决定如何构建你的应用程序。</li><li id="3255" class="ma mb iq ky b kz mj ld mk lh ml ll mm lp mn lt nl mg mh mi bi translated">零配置设置(#0CJS)。如果您提供了模式，那么Webpack将使用默认的输入和输出设置来构建您的应用程序，而不需要配置文件。</li></ol><p id="459c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">所有这些加上更小的包大小和更快的构建时间！</p><p id="cbba" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">让我们尝试一个简单的webpack构建。</p><p id="ecba" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">在我们项目的根目录下，创建一个名为build的文件夹，并添加一个名为webpack.config.dev.js的文件。</p><pre class="nn no np nq gt nr my ns nt aw nu bi"><span id="3659" class="mz jz iq my b gy nv nw l nx ny">'use strict'</span><span id="7108" class="mz jz iq my b gy nz nw l nx ny">const { VueLoaderPlugin } = require('vue-loader')</span><span id="4421" class="mz jz iq my b gy nz nw l nx ny">module.exports = {<br/>  mode: 'development',<br/>  entry: [<br/>    './src/app.js'<br/>  ],<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.vue$/,<br/>        use: 'vue-loader'<br/>      }<br/>    ]<br/>  },<br/>  plugins: [<br/>    new VueLoaderPlugin()<br/>  ]<br/>}</span></pre><p id="6ecf" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">模块部分将包含我们所有的加载器，每个加载器声明至少包含两个属性，test和loader。Test是一个正则表达式，webpack将使用它来标识该加载程序要处理的文件类型，loader是加载程序本身的名称。</p><p id="a2f3" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">为此，我们需要安装更多的依赖项:</p><pre class="nn no np nq gt nr my ns nt aw nu bi"><span id="3ffb" class="mz jz iq my b gy nv nw l nx ny">npm install --save-dev vue-loader vue-template-compiler vue-style-loader css-loader</span></pre><p id="4b79" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">并添加npm构建脚本:</p><pre class="nn no np nq gt nr my ns nt aw nu bi"><span id="d487" class="mz jz iq my b gy nv nw l nx ny">"build": "webpack --config build/webpack.config.dev.js"</span></pre><p id="0d2d" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我们还需要添加一个index.html文件来拉入我们构建的包，将它放在项目的根目录下:</p><pre class="nn no np nq gt nr my ns nt aw nu bi"><span id="f755" class="mz jz iq my b gy nv nw l nx ny">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0"&gt;<br/>    &lt;title&gt;My Vue app with webpack 4&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;script src="dist/main.js" type="text/javascript"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="437b" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">如果您现在运行构建脚本，您应该会看到类似这样的内容:</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/30c05e0193e3b02dfae3912fb3137afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pxfPPRzyQhKNopB4D_2kSA.png"/></div></div></figure><p id="413f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">如果您在浏览器中打开index.html，您应该会看到:</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/8588913284e5adbd1266c70ffe8157b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zFpgviKqRMZdzf5fhsGobg.png"/></div></div></figure><p id="80a8" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">顺便说一下，VSCode有一个扩展“Live Server”，它允许你右击html文件并在一个随需应变的web服务器中启动它们，而不是从你的文件系统中打开它们。最终，我们将使用带有热模块重载的webpack-dev-server来服务我们的应用程序，但目前这只是一个很好的权宜之计。</p><h2 id="aaf3" class="mz jz iq bd ka na nb dn ke nc nd dp ki lh ne nf km ll ng nh kq lp ni nj ku nk bi translated">下一步</h2><p id="4980" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在文章的下一部分，我将创建一个带有一些脚本的组件来演示babel编译并为我们的css配置手写笔。我们将安装webpack-dev-server并配置热模块重载，包括对静态资产的支持。为了完成应用程序，我们将创建一个生产版本，包括拆分供应商模块，并展示如何使用@vue/test-utils和jest测试我们的应用程序。</p></div></div>    
</body>
</html>