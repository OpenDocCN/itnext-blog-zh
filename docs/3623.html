<html>
<head>
<title>Configure IIS with ruby on rails app on windows server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在windows server上使用ruby on rails应用程序配置IIS</h1>
<blockquote>原文：<a href="https://itnext.io/configure-iis-with-ruby-on-rails-app-on-windows-server-95f963bc7c5f?source=collection_archive---------6-----------------------#2020-01-19">https://itnext.io/configure-iis-with-ruby-on-rails-app-on-windows-server-95f963bc7c5f?source=collection_archive---------6-----------------------#2020-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f7c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">顾名思义，RubyOnRails在Windows Server上的应用部署？？？实际上？？</em></p><p id="152c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的，今天我想分享我的经验，我是如何在窗口服务器(IIS)上部署Ruby应用程序的。</p><p id="4839" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大多数Ruby应用程序都部署在Linux系统上(cents、ubuntu、AMI) &amp;从性能的角度来看，这也非常好，开发者也更喜欢在Linux系统上开发，因为与安装在Windows机器上相比，所有的gem都很容易安装在Linux机器上。</p><p id="5fed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们回到主题，<br/>在2018年，我们在Windows服务器上发布了Ruby应用程序，这已经快1.5年了，它运行得非常完美，没有出现任何大问题。关于这个问题，我稍后会讨论。</p><p id="2ab3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和大家分享系统架构。如果你觉得有帮助，请分享并留下你的评论。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/b83541adadc035dcbb6659e793533443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dRXHeqBrENwTk4P-"/></div></div></figure><p id="caf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">起初我们在Linux机器上开始开发，但是突然我们知道我们必须在Windows服务器(IIS)上发布它。当时，我们与客户和车队内部讨论了所有的利弊，但这是一个上帝的愿望，要获得一个新的乘坐。我们接受了这个挑战。</p><p id="03ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在深入研究之前，<br/>我研究了在production env(窗口服务器)上部署RubyonRails应用程序有多大的实用性。我在互联网上找到了一些文章，但看起来像是关于开发环境的部署。</p><p id="174b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">分享申请详情。<br/> <strong class="jp ir">语言:</strong> Ruby <br/> <strong class="jp ir">框架:</strong> Rails <br/> <strong class="jp ir">数据库:</strong> SQL Server 2014 <br/> <strong class="jp ir">平台:</strong>Windows Server(2012)<br/><strong class="jp ir">应用服务器:</strong> Puma</p><p id="39b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在是时候把它放入windows服务器了。</p><p id="bbbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">步骤1:安装Ruby和Rails框架。这一步很容易，因为我过去也是这么做的。所以第一步很清楚。</p><p id="4bcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第二步:在Windows上运行我们的应用程序。 <br/>众所周知，rails默认提供puma服务器，所以我使用了puma，虽然存在一些依赖问题，但已成功解决。最后，我们的应用程序处于运行模式。</p><p id="1ab9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第三步:IIS安装。</strong> <br/>可以找到很多安装IIS的文章。因为我们需要按照一些步骤来安装IIS。所以这一步也很清楚，没有任何问题。</p><p id="e728" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">步骤4:在IIS上部署应用程序。 <br/>打开IIS管理器，然后转到<strong class="jp ir">站点</strong>，右键点击<strong class="jp ir">默认网站</strong>和<strong class="jp ir">添加新应用</strong>。<br/>如下图所述。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ky"><img src="../Images/0bdfcc51782340aef76b81aac56ae696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EJZ7lcE7jlDGortQ"/></div></div></figure><p id="e31b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第五步:配置web.config文件。 <br/>这一步最难。为什么？？？<br/>因为首先你必须创建一个web.config文件，其中包含Ruby应用程序的所有基本设置。<br/>第二个web.config文件的位置(我应该把这个文件放在哪里，在ruby应用程序文件夹里面还是外面)。<br/>第三是，如何在IIS中运行puma服务器。</p><p id="593b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我尝试了许多设置，在IIS和配置文件中做了许多更改。但是没有运气。</p><p id="b10f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">终于有一天，我成功地在IIS中运行了一个Ruby应用程序。耶…干杯。</p><p id="bf63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的第一个是web.config文件，供您参考。第二，请将你的web.config文件复制到你的邮件目录下。(请查看下图。)<br/>3、请检查下面的web.config文件。</p><p id="eb46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设置和配置已完成。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/7d8b577a2934c26aaa525c1da5931e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/0*kkLerbUGoaX6VypV"/></div></figure><p id="a1bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤6:如何设置环境(在开发或生产模式下运行应用程序？).</strong> <br/>在apache或者Nginx中，很容易定义环境。但是这并不是一项容易的任务。所以下一个障碍是:在开发和生产环境中运行我们的应用程序。<br/>这里是开发&amp;生产环境的<strong class="jp ir"> web.config </strong>。<br/> <strong class="jp ir"> ■开发环境:</strong></p><pre class="kn ko kp kq gt la lb lc ld aw le bi"><span id="5459" class="lf lg iq lb b gy lh li l lj lk">&lt;?xml version=”1.0" encoding=”UTF-8"?&gt;<br/>&lt;configuration&gt;<br/> &lt;system.webServer&gt;<br/> &lt;handlers&gt;<br/> &lt;add name=”httpplatformhandler” path=”*” verb=”*” modules=”httpPlatformHandler” resourceType=”Unspecified” /&gt; <br/> &lt;/handlers&gt;<br/> &lt;httpPlatform stdoutLogEnabled=”true” processesPerApplication=”1" stdoutLogFile=”log\rails.log” startupTimeLimit=”20" processPath=”C:\Ruby24-x64\bin\ruby.exe” arguments=”-S puma — env development — dir C:\inetpub\wwwroot\live\&lt;your-project-folder-name&gt; -p %HTTP_PLATFORM_PORT% “&gt;<br/> &lt;environmentVariables&gt; <br/> &lt;environmentVariable name=”RAILS_ENV” value=”development” /&gt; <br/> &lt;/environmentVariables&gt; <br/> &lt;/httpPlatform&gt; <br/> &lt;/system.webServer&gt; <br/>&lt;/configuration&gt;</span></pre><p id="6fc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> ■生产环境:</strong></p><pre class="kn ko kp kq gt la lb lc ld aw le bi"><span id="7b29" class="lf lg iq lb b gy lh li l lj lk">&lt;?xml version=”1.0" encoding=”UTF-8"?&gt;<br/>&lt;configuration&gt;<br/> &lt;system.webServer&gt;<br/> &lt;handlers&gt;<br/> &lt;add name=”httpplatformhandler” path=”*” verb=”*” modules=”httpPlatformHandler” resourceType=”Unspecified” /&gt; <br/> &lt;/handlers&gt;<br/> &lt;httpPlatform stdoutLogEnabled=”true” processesPerApplication=”1" stdoutLogFile=”log\rails.log” startupTimeLimit=”20" processPath=”C:\Ruby24-x64\bin\ruby.exe” arguments=”-S puma — env production — dir C:\inetpub\wwwroot\live\&lt;your-project-folder-name&gt; -p %HTTP_PLATFORM_PORT% “&gt;<br/> &lt;environmentVariables&gt; <br/> &lt;environmentVariable name=”RAILS_ENV” value=”production” /&gt; <br/> &lt;environmentVariable name=”SECRET_KEY_BASE” value=”&lt;generate-your-secret-key&gt;” /&gt; <br/> &lt;/environmentVariables&gt; <br/> &lt;/httpPlatform&gt; <br/> &lt;/system.webServer&gt; <br/>&lt;/configuration&gt;</span></pre><p id="b908" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，它运行良好。但是这是一个非常有趣的新组合(IIS上的ruby on rails)。</p><p id="3a9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你有同样的情况，那么请仔细阅读这篇文章。希望有所帮助。</p><p id="5fa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">■问题</strong>寻找解决方案…</p><p id="dea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你在这篇文章中发现任何错误，请让我知道。</p><p id="67ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你的宝贵时间。</p><p id="6d29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">享受编码。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/00aab8fd08d02671d07934e93b4159a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/0*8TpJqKtmROCG_jYb.png"/></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/df8a3a639505e9877ddde08a51e9df4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/0*9-x0KH6jNUrKHTBf.png"/></div></figure></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="ed5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">原载于2020年1月19日https://qiita.com</em><a class="ae lt" href="https://qiita.com/alokrawat050/items/d757b23a063435a2619c" rel="noopener ugc nofollow" target="_blank"><em class="kl"/></a><em class="kl">。</em></p></div></div>    
</body>
</html>