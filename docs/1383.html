<html>
<head>
<title>Getting a Sample SQL Server Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">获取示例SQL Server数据库</h1>
<blockquote>原文：<a href="https://itnext.io/getting-a-sample-sql-server-database-91f0a5a65c0d?source=collection_archive---------6-----------------------#2018-09-30">https://itnext.io/getting-a-sample-sql-server-database-91f0a5a65c0d?source=collection_archive---------6-----------------------#2018-09-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ace6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如经常发生的那样，这不是我今天要写的文章。前几天，我们在工作中遇到了一个问题，我想写下来，但是要这样做，我需要一个示例数据库(我不能使用工作中的数据)。我想要比我的普通单表联系人数据库更充实的东西。我在google上搜索AdventureWorks，因为这是我经常在示例中看到的示例数据库。</p><h2 id="6334" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">选择</h2><p id="2141" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">事实证明，AdventureWorks并不是目前唯一的SQL Server示例数据库选项。微软有一个<a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/tree/master/samples/databases" rel="noopener ugc nofollow" target="_blank"> SQL Server Samples </a> repo，根据你的需求有三个不同的选项。以下是对所有这些选项的描述和链接。</p><blockquote class="lk ll lm"><p id="6e91" class="jn jo ln jp b jq jr js jt ju jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj kk ij bi translated"><a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/blob/master/samples/databases/wide-world-importers" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"/></a></p><p id="226c" class="jn jo ln jp b jq jr js jt ju jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj kk ij bi translated">SQL Server 2016和Azure SQL数据库的新示例数据库。它展示了SQL Server 2016和Azure SQL数据库的核心功能，适用于事务处理(OLTP)、数据仓库和分析(OLAP)工作负载，以及混合事务和分析处理(HTAP)工作负载。</p><p id="1a7d" class="jn jo ln jp b jq jr js jt ju jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj kk ij bi translated"><a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/blob/master/samples/databases/contoso-data-warehouse" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">contoso-数据仓库</strong> </a></p><p id="d74b" class="jn jo ln jp b jq jr js jt ju jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj kk ij bi translated">说明将数据加载到Azure SQL数据仓库的示例数据仓库。</p><p id="6977" class="jn jo ln jp b jq jr js jt ju jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj kk ij bi translated"><a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/blob/master/samples/databases/adventure-works" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">AdventureWorks</strong></a></p><p id="a01a" class="jn jo ln jp b jq jr js jt ju jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj kk ij bi translated">用于SQL Server的示例数据库和Analysis Services模型。</p></blockquote><p id="9bde" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我不是在处理数据仓库，所以中间的选择是不可能的。AdventureWorks仍然是一个有效的选项，但我不能错过WideWorldImporters，这是用于展示SQL Server 2016的最新示例。</p><h2 id="1010" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">入门指南</h2><p id="58e0" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">确保您已经安装了<a class="ae lj" href="https://www.microsoft.com/en-us/sql-server/sql-server-downloads" rel="noopener ugc nofollow" target="_blank"> SQL Server </a>和<a class="ae lj" href="https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms" rel="noopener ugc nofollow" target="_blank">SQL Server Management Studio</a>。对于SQL Server，我们将使用内部版本。我推荐使用<a class="ae lj" href="https://go.microsoft.com/fwlink/?linkid=853016" rel="noopener ugc nofollow" target="_blank">开发者版</a>，因为只要不在生产中使用，它就能免费提供全套功能。一旦你安装了以上两个软件，是时候下载数据库相关的文件了。</p><p id="fc53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在撰写本文时，这个<a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/releases/tag/wide-world-importers-v1.0" rel="noopener ugc nofollow" target="_blank"> GitHub发布页面</a>包含了最新的入门信息，是的，是从2016年6月开始的。列出了很多选项，但是我们感兴趣的文件是<a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/releases/download/wide-world-importers-v1.0/WideWorldImporters-Full.bak" rel="noopener ugc nofollow" target="_blank">WideWorldImporters-full . bak</a>。如果你正在寻找探索SQL Server 2016的一些新功能，你也应该抓住<a class="ae lj" href="https://github.com/Microsoft/sql-server-samples/releases/download/wide-world-importers-v1.0/sample-scripts.zip" rel="noopener ugc nofollow" target="_blank"> sample-scripts.zip </a>来玩，但这不在这篇文章中讨论。</p><h2 id="508d" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">还原数据库</h2><p id="8e19" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">现在我们已经有了要恢复的数据库的备份，是时候打开SQL Server Management Studio了。在“连接”对话框中，连接到您希望数据库终止的服务器。在本例中，我连接到在本地PC上运行的SQL Server实例。当你全部设置好后，点击<strong class="jp ir">连接</strong>按钮。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/33e75aabf369625ba6e9e1196c508e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/0*QAeBnM4P5Xr3cwuU.png"/></div></figure><p id="2326" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">连接后，您应该会在<strong class="jp ir">对象资源管理器</strong>窗口中看到所选的服务器。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/a4b8ac3018a8643fc99b2d2bc8bb3efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/0*tFn2pi4acWw0MGAP.png"/></div></figure><p id="3076" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">右键单击<strong class="jp ir">数据库</strong>文件夹(或者您喜欢的节点)，然后单击<strong class="jp ir">恢复数据库</strong>。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/5249a4db7577f68d871a91083c2997b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/0*l4jlWPiC7w81Mn_U.png"/></div></figure><p id="bd84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将启动还原数据库对话框。这个对话框充满了内容，但是我们将把重点放在从备份文件恢复数据库所需的最少内容上。首先，选择<strong class="jp ir">设备</strong>选项，然后点击<strong class="jp ir"> … </strong>按钮。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/875775f37cb031e0230fdf4abd53c001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4iW_sDxaTD6h3Z_R.png"/></div></div></figure><p id="8e2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将显示“选择备份设备”对话框。我们要使用<strong class="jp ir">文件的</strong>类型然后点击<strong class="jp ir">添加</strong>按钮。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/4f7ed93c1e1192f504d53e8b8de54319.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/0*LBFtWwoVYNGX26O2.png"/></div></figure><p id="c80c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一个屏幕上，您需要输入备份文件的路径。我不知道为什么，但这不是查找文件的最简单的对话框。我发现使用Windows资源管理器更容易找到备份文件所在的目录，并将其复制到<strong class="jp ir">备份文件位置</strong>。选择正确的目录后，选择备份文件并点击<strong class="jp ir">确定</strong>。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/7d690fd26bea6ca748f81abc1760701d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/0*QJJCjH_YHQ6Mh7Kd.png"/></div></figure><p id="5577" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到<strong class="jp ir">选择备份设备</strong>对话框，点击<strong class="jp ir">确定</strong>按钮继续。这将使您回到<strong class="jp ir">恢复数据库</strong>对话框，该对话框将显示所选备份的信息。点击<strong class="jp ir">确定</strong>按钮开始恢复过程。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/6de97562a979cc3ab9869c62cfd6c8bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AfdAvAX-aznw5aN9.png"/></div></div></figure><p id="67aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大约一分钟后，恢复过程应该完成。如果您在<strong class="jp ir">对象资源管理器</strong>窗口中展开<strong class="jp ir">数据库</strong>节点，您应该会看到列出了恢复的数据库。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mi"><img src="../Images/23a71f3e1dbfe1e6922b0e494ecb2e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/0*ISUWaucSjrVJvZ2O.png"/></div></div></figure><h2 id="0bfb" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">数据生成</h2><p id="806e" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">WideWorldImporters数据库附带了一个存储过程，它将生成当前数据供您使用。这不是一个快速的过程，所以如果您决定运行它，请做好等待的准备。右键单击并选择<strong class="jp ir">新建查询</strong>，为WideWorldImporters数据库打开一个新的查询窗口。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/2022457120c71df0115d5a715adf3064.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/0*sNGVPJQ7NLDdLuW5.png"/></div></figure><p id="f8f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您运行以下查询，它将启动数据生成过程。</p><pre class="ls lt lu lv gt mk ml mm mn aw mo bi"><span id="9da6" class="kl km iq ml b gy mp mq l mr ms">EXECUTE DataLoadSimulation.PopulateDataToCurrentDate<br/>    @AverageNumberOfCustomerOrdersPerDay = 60,<br/>    @SaturdayPercentageOfNormalWorkDay = 50,<br/>    @SundayPercentageOfNormalWorkDay = 0,<br/>    @IsSilentMode = 1,<br/>    @AreDatesPrinted = 1;</span></pre><p id="dd74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">官方文件有更多关于数据生成的细节。从文件来看，它说数据生成每年需要大约10分钟，从2016年开始，所以你看到的是30分钟的最低运行时间(根据我的测试，每年10分钟的数字太低了)。请注意，备份会附带数据，因此只有在您需要最新数据时才需要此过程。</p><h2 id="70f8" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">包扎</h2><p id="594e" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">上面的过程并不难，但是如果你像我一样，没有怎么做过数据库备份，希望这篇文章对你有所帮助。我相信您会发现示例数据库对于尝试SQL Server的一些新功能或者对于可以公开使用的数据源很有帮助。</p><p id="dea1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请务必查看全球进口商的<a class="ae lj" href="https://docs.microsoft.com/en-us/sql/samples/wide-world-importers-what-is" rel="noopener ugc nofollow" target="_blank">官方文档页面</a>。它有更多的信息以及对其他工作负载用例(如数据仓库)的说明。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="c10f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ln">最初发表于</em> <a class="ae lj" href="https://elanderson.net/2018/09/getting-a-sample-sql-server-database/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">埃里克·安德森</em> </a> <em class="ln">。</em></p></div></div>    
</body>
</html>