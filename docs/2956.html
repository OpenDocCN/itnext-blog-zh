<html>
<head>
<title>Create and Publish a React Component Library — the easy way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建和发布React组件库——最简单的方法</h1>
<blockquote>原文：<a href="https://itnext.io/create-and-publish-a-react-component-library-the-easy-way-6d1798974bc6?source=collection_archive---------2-----------------------#2019-09-06">https://itnext.io/create-and-publish-a-react-component-library-the-easy-way-6d1798974bc6?source=collection_archive---------2-----------------------#2019-09-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e8ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在不到10分钟的时间内将您自己的组件库发布到npm。</p><p id="1a0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将创建一个简单的React组件库，我们可以通过npm发布它并在其他React项目中使用它。出于教程的目的，我将创建一个组件，它采用一个<code class="fe ko kp kq kr b">color</code>属性并显示一个具有该颜色的<code class="fe ko kp kq kr b">h1</code>元素。我们开始吧！</p><p id="390f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建React组件库最简单的方法是使用名为<code class="fe ko kp kq kr b">create-react-library</code>的CLI工具。</p><pre class="ks kt ku kv gt kw kr kx ky aw kz bi"><span id="e088" class="la lb it kr b gy lc ld l le lf">npx create-react-library</span></pre><p id="2d13" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将开始一个小的互动过程:</p><ol class=""><li id="640a" class="lg lh it js b jt ju jx jy kb li kf lj kj lk kn ll lm ln lo bi translated">软件包名称将是npm中您的库的名称</li></ol><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lp"><img src="../Images/64c7514c0de166f4d0ec04fd07c538b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*al9aZ4xiYfWpOzO-k8ZT5A.png"/></div></div></figure><p id="6640" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完成后，您将在终端上看到两个命令。</p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lx"><img src="../Images/2af06af2c99cf8df7747613ef12e5e72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wj561pNXNssMxw4aD82GYQ.png"/></div></div></figure><p id="372a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在不同的终端选项卡上运行以上两个命令。他们两个都必须跑。第一个命令监视更改并打包您的库，第二个命令在基本的React应用程序中预览您的库，该应用程序将在您的浏览器中打开。</p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ly"><img src="../Images/9682e281e28464c9b4a6001bc6ff41fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Etcr1RI0KWBjFAb3GH2yOA.png"/></div></div></figure><p id="6a88" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，在文本编辑器中打开您的项目目录，让我们看看其中的几个文件:</p><h2 id="39b9" class="la lb it bd lz ma mb dn mc md me dp mf kb mg mh mi kf mj mk ml kj mm mn mo mp bi translated">/src/索引. js</h2><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mq"><img src="../Images/c5aa4b587d22ffeafa6d386d88264528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JwkPCmkBE-R38JnAJo_GWA.png"/></div></div></figure><p id="a846" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，这是您的库的起始文件。这是您将导出所有组件的地方。现在，一个名为<strong class="js iu">的组件ExampleComponent </strong>被默认导出。</p><h2 id="ecfa" class="la lb it bd lz ma mb dn mc md me dp mf kb mg mh mi kf mj mk ml kj mm mn mo mp bi translated">/example/src/App.js</h2><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mr"><img src="../Images/26b911c85269cabd5072debe4943ba84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xwr76wIkDJlGCmLhy_Masw.png"/></div></div></figure><p id="df31" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在“example”文件夹中，你可以看到同样的<strong class="js iu"> ExampleComponent </strong>是从“colored-heading”导入的，我在上面使用了这个项目名。</p><h2 id="762e" class="la lb it bd lz ma mb dn mc md me dp mf kb mg mh mi kf mj mk ml kj mm mn mo mp bi translated">返回到/src/index.js</h2><p id="c2f1" class="pw-post-body-paragraph jq jr it js b jt ms jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn im bi translated">我要对<code class="fe ko kp kq kr b">/src/index.js</code>做一些改动。</p><ol class=""><li id="048c" class="lg lh it js b jt ju jx jy kb li kf lj kj lk kn ll lm ln lo bi translated">删除了<code class="fe ko kp kq kr b">style.css</code>的导入和文件。</li><li id="588e" class="lg lh it js b jt mx jx my kb mz kf na kj nb kn ll lm ln lo bi translated">将元件名称更改为<code class="fe ko kp kq kr b">ColoredHeadingOne</code>。</li><li id="43cd" class="lg lh it js b jt mx jx my kb mz kf na kj nb kn ll lm ln lo bi translated">增加了颜色道具和道具类型。</li><li id="091c" class="lg lh it js b jt mx jx my kb mz kf na kj nb kn ll lm ln lo bi translated">将<code class="fe ko kp kq kr b">&lt;div&gt;</code>组件更改为<code class="fe ko kp kq kr b">h1</code>组件，并将颜色属性作为样式传递。</li></ol><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nc"><img src="../Images/b5b97dc425d89d0d6552f2ef5dfe883d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*304vJCjRdK-b9kqH-d3MWQ.png"/></div></div></figure><h2 id="fcd7" class="la lb it bd lz ma mb dn mc md me dp mf kb mg mh mi kf mj mk ml kj mm mn mo mp bi translated">在/example/src/App.js中测试</h2><p id="0208" class="pw-post-body-paragraph jq jr it js b jt ms jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn im bi translated">现在，我想导入我的<strong class="js iu"> ColoredHeadingOne，而不是导入<strong class="js iu"> ExampleComponent </strong>。</strong>我还会传一个<code class="fe ko kp kq kr b">color</code>道具。</p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nd"><img src="../Images/a7be399300ef64fb6d1f518ee40e2be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZuVWevR0kSARJfBgLnu-aw.png"/></div></div></figure><h2 id="2091" class="la lb it bd lz ma mb dn mc md me dp mf kb mg mh mi kf mj mk ml kj mm mn mo mp bi translated">在浏览器中测试</h2><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ne"><img src="../Images/c35d78e9d734af119e044c6940a96b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4LbLYK6z6XeHZy5mKXvTw.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">起作用了！</figcaption></figure><h2 id="93fa" class="la lb it bd lz ma mb dn mc md me dp mf kb mg mh mi kf mj mk ml kj mm mn mo mp bi translated">导出多个组件</h2><p id="ccf7" class="pw-post-body-paragraph jq jr it js b jt ms jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn im bi translated">在<code class="fe ko kp kq kr b">/src/index.js</code>中，我们可以导出多个组件。</p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nj"><img src="../Images/0845a174eed98898e2fe5ebd22ea4fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZyoNA9brhRt8UrmQg9hoA.png"/></div></div></figure><p id="04a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了简洁起见，我复制了<strong class="js iu"> ColoredHeadingOne </strong>并将名称改为<strong class="js iu"> ColoredHeadingTwo </strong>，并且<strong class="js iu">删除了两个组件的默认关键字</strong>。</p><p id="ceb2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们将第二个组件导入到<code class="fe ko kp kq kr b">/example/App.js</code></p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nk"><img src="../Images/40b0c48d3fab725cea94a4847b49df26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Zsbjodw_n7TYR8P57vc1g.png"/></div></div></figure><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nl"><img src="../Images/3c47883b63f293b47dea8d46b51ba9ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kv33OERe4TVfS0zzWQO6w.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">ColoredHeadingTwo起作用了！</figcaption></figure><h1 id="5f66" class="nm lb it bd lz nn no np mc nq nr ns mf nt nu nv mi nw nx ny ml nz oa ob mo oc bi translated">推送至Github</h1><p id="1583" class="pw-post-body-paragraph jq jr it js b jt ms jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn im bi translated">仅仅为了额外的东西，让我们把我们的代码推到Github。</p><p id="8643" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，在Github中创建一个repo。<a class="ae oe" href="https://help.github.com/en/articles/create-a-repo" rel="noopener ugc nofollow" target="_blank">导轨</a></p><p id="8405" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在复制您的库HTTPS克隆URL</p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi of"><img src="../Images/9392694e4db5486acc3a9fd2cbdfa71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCBwsYdFA2W9st9m5R5_wA.png"/></div></div></figure><p id="8583" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，在您的项目目录中(在终端中)执行以下操作:</p><pre class="ks kt ku kv gt kw kr kx ky aw kz bi"><span id="b41c" class="la lb it kr b gy lc ld l le lf"><br/>git add -A<br/>git commit -m"Initial Commit"<br/>git <!-- -->git remote add origin &lt;YourRepoHTTPSURL&gt;<br/>// e.g <!-- -->git remote add origin <a class="ae oe" href="https://github.com/skolhustick/colored-heading.git" rel="noopener ugc nofollow" target="_blank">https://github.com/.../....git</a><br/>git push origin master</span><span id="96eb" class="la lb it kr b gy og ld l le lf">Username : &lt;-- Enter your Github username<br/>Password : &lt;-- Enter your Github password</span></pre><p id="9fa7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你的Github repo现在应该更新了。</p><h1 id="4b15" class="nm lb it bd lz nn no np mc nq nr ns mf nt nu nv mi nw nx ny ml nz oa ob mo oc bi translated">发布到npm</h1><p id="4ab0" class="pw-post-body-paragraph jq jr it js b jt ms jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn im bi translated">只需在终端中进入您的项目目录并执行以下命令:</p><pre class="ks kt ku kv gt kw kr kx ky aw kz bi"><span id="7d02" class="la lb it kr b gy lc ld l le lf">npm publish</span></pre><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oh"><img src="../Images/d9f47df726f0fdbe0df7b50bc40d4ce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-WfLPtCMKwwnu-vEenjfA.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">搞定了！</figcaption></figure><p id="a98f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您现在可以在npm中查看新的React组件库了！</p><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oi"><img src="../Images/2f279344979dc4392db4feb7b9553283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MJAxYnnYFvWHpCP3_wCWw.png"/></div></div></figure><h1 id="bdcc" class="nm lb it bd lz nn no np mc nq nr ns mf nt nu nv mi nw nx ny ml nz oa ob mo oc bi translated">主持一个演示网站</h1><p id="40f5" class="pw-post-body-paragraph jq jr it js b jt ms jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj mw kl km kn im bi translated">您可以轻松地将示例文件夹部署到Github页面。在同一个目录中，只需运行:</p><pre class="ks kt ku kv gt kw kr kx ky aw kz bi"><span id="264a" class="la lb it kr b gy lc ld l le lf">npm run deploy</span></pre><figure class="ks kt ku kv gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oj"><img src="../Images/c3e9b069b52a8fe32699ba12f46273ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5pMNMJyeLYcJwuUWH3qXYw.png"/></div></div></figure><p id="7241" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到你在“发布于”后看到的链接，你的演示页面就应该出来了！😍</p><p id="71ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是我们辅导项目的报告:</p><div class="ok ol gp gr om on"><a href="https://github.com/skolhustick/colored-heading" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">skolhustick/彩色标题</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">用颜色渲染一个简单的h1元素！通过创建帐户，为skolhustick/彩色标题开发做出贡献…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb lv on"/></div></div></a></div><p id="493d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是npm包:</p><div class="ok ol gp gr om on"><a href="https://www.npmjs.com/package/colored-heading" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">彩色标题</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">用颜色渲染一个简单的h1元素！</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">www.npmjs.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb lv on"/></div></div></a></div><p id="ab3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是演示页面；</p><div class="ok ol gp gr om on"><a href="https://skolhustick.github.io/colored-heading/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">彩色标题</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">编辑描述</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">skolhustick.github.io</p></div></div></div></a></div><p id="0641" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">希望不久能看到你的图书馆！祝你好运！👍</p></div></div>    
</body>
</html>