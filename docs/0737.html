<html>
<head>
<title>Unit and Integration tests for Angular components. Part 2 out of 3.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角形部件的单元和集成测试。第二部分，共三部分。</h1>
<blockquote>原文：<a href="https://itnext.io/unit-and-integration-tests-for-angular-components-db43486de244?source=collection_archive---------4-----------------------#2018-05-17">https://itnext.io/unit-and-integration-tests-for-angular-components-db43486de244?source=collection_archive---------4-----------------------#2018-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="4773" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">集成测试应该有多深？</h1><p id="44ca" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在我之前的文章中，我已经指出了角形组件测试之间的区别。在我的研究中，我发现了马丁·福勒和谷歌测试博客上的一些有趣的帖子。请参见下面的链接。</p><p id="f1d9" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">你可能已经知道<strong class="kn ir">集成测试</strong>确保应用程序的不同单元<strong class="kn ir">正确地相互通信</strong>。所以你可以想象一个集成测试可能贯穿整个应用程序，测试越来越多的单元在一个完美的流程中一起工作。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/221a7e57c132d7917e405b6d458d282f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*zWJ1D95vCFAy8Zux."/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk translated">单元测试表明它正在工作</figcaption></figure><p id="edd8" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">但是我们真的想要吗？把软件想象成一连串的事件。当所有的链都是好的和健壮的时，软件将是好的和健壮的，但是一次检查整个链太难了。这就是为什么我们把它分开，首先检查每个链接(用单元测试)，然后检查最接近的链接(用集成测试)。</p><p id="bc13" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">它如何应用于Angular？首先对每个角度组件进行简单的测试，然后添加集成测试来检查组件与其第一级子组件的交互。让我们来看看下面的组件结构。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mb"><img src="../Images/7f70b31639c3508f28a34c0aa08b3117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IK8BYK5bcizNksuB68csQw.png"/></div></div></figure><p id="b813" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">dropzone模板看起来像:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="59c5" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">dropzone组件的单元测试配置应该是:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="37f4" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">因此，为了实现浅层单元测试模板，您只需在测试床内部声明被测试的组件，其他什么都不用做。这意味着模板中的所有元素都将被视为简单的DOM节点，并且只应用常见的指令(例如ngIf和ngFor)。</p><p id="0ab1" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">集成测试配置:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="f8ec" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">在单元测试中，会检查所有可能的组件场景:</p><ul class=""><li id="42bf" class="mi mj iq kn b ko lk ks ll kw mk la ml le mm li mn mo mp mq bi translated">将正确的类应用于元素</li><li id="28e4" class="mi mj iq kn b ko mr ks ms kw mt la mu le mv li mn mo mp mq bi translated">正确的值被放入HTML节点</li><li id="2f7a" class="mi mj iq kn b ko mr ks ms kw mt la mu le mv li mn mo mp mq bi translated">鼠标事件等会触发正确的事件。</li></ul><p id="3214" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">在集成测试中，测试集成点</p><ul class=""><li id="8416" class="mi mj iq kn b ko lk ks ll kw mk la ml le mm li mn mo mp mq bi translated">正确的输出事件链</li><li id="a3d7" class="mi mj iq kn b ko mr ks ms kw mt la mu le mv li mn mo mp mq bi translated">正确的输入值链</li></ul><p id="9908" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">不要忘记谷歌的智慧和70/20/10法则。请记住，集成测试只检查流程，并不试图测试功能，这应该由优秀的老单元测试来完成。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><a href="https://docs.google.com/presentation/d/15gNk21rjer3xo-b1ZqyQVGebOp_aPvHU3YH7YnOMxtE/edit#slide=id.g437663ce1_53_98"><div class="gh gi mw"><img src="../Images/3ac4b9a0a7c67809fced28c01bd6db7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4gS12cVYU-2G2Tb4."/></div></a><figcaption class="lx ly gj gh gi lz ma bd b be z dk translated">点击我！</figcaption></figure><p id="bf6d" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">祝你们测试愉快，我的编码朋友们！这是聪明人给你的文章。</p><div class="mx my gp gr mz na"><a href="https://martinfowler.com/bliki/IntegrationTest.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">bliki:集成测试</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">测试类别标签:集成测试确定独立开发的软件单元是否正确工作，当它们…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">martinfowler.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no lv na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://martinfowler.com/bliki/UnitTest.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">bliki:单元测试</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">测试类别极限编程标签:单元测试经常在软件开发中被谈论，并且是一个术语…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">martinfowler.com</p></div></div><div class="nj l"><div class="np l nl nm nn nj no lv na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">拒绝更多的端到端测试</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">在你人生的某个时刻，你可能会想起一部你和你的朋友都想看的电影…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">testing.googleblog.com</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no lv na"/></div></div></a></div></div></div>    
</body>
</html>