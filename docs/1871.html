<html>
<head>
<title>Swift Text-To-Speech tool As Deep As Possible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">尽可能深入的快速文本到语音转换工具</h1>
<blockquote>原文：<a href="https://itnext.io/swift-avfoundation-framework-text-to-speech-tool-f3e3bfc7ecf7?source=collection_archive---------2-----------------------#2019-02-14">https://itnext.io/swift-avfoundation-framework-text-to-speech-tool-f3e3bfc7ecf7?source=collection_archive---------2-----------------------#2019-02-14</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div class="gi gj jr"><img src="../Images/5434480e906e3f9aafcbbbd640c20769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDgVdq8--I5pUyGodlzswg.jpeg"/></div></figure><p id="bd7e" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di"> H </span>有没有想过把文字转换成语音供盲人使用app？苹果在iOS和MacOS系统中都做了一个很棒的<a class="ae lf" href="https://www.apple.com/accessibility/iphone/vision/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka iv"> VoiceOver </strong> </a>功能，通过提供<strong class="ka iv">音频反馈</strong>帮助盲人使用应用程序。幸运的是，苹果公司还为开发者开放了文本到语音的功能。API是<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>，属于<code class="fe lg lh li lj b">AVFoundation</code>框架。本文将讨论使用该API时的<strong class="ka iv">细节</strong>和<strong class="ka iv">陷阱</strong>。</p><p id="a756" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">让我们先对整篇文章有个大概的印象:</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><h1 id="ec75" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">语音合成器</h1><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="9234" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><code class="fe lg lh li lj b">AVSpeechSynthesizer</code>是:</p><ol class=""><li id="837d" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">在<code class="fe lg lh li lj b">AVFoundation</code>框架下</li><li id="cd8d" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">从iOS开始可用<code class="fe lg lh li lj b">7.0</code></li></ol><p id="8b1a" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">它提供了与语音相关的功能:</p><ol class=""><li id="777b" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">玩</li><li id="ebc2" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">中止</li><li id="f6ce" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">继续(仅针对暂停的演讲)</li><li id="0718" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">停止</li></ol><p id="512d" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">重要属性:</strong></p><ol class=""><li id="d801" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">一个队列<code class="fe lg lh li lj b">AVSpeechUtterance</code>，包含一组语音参数:<br/> 1.1文本<br/> 1.2语音<br/> 1.3速率<br/> 1.4音高乘数<br/> 1.5音量(应该更好地命名为“相对音量”)<br/> 1.6发声前延迟<br/> 1.7发声后延迟</li><li id="ed4d" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">带有<strong class="ka iv"> 6 </strong>语音回调的<code class="fe lg lh li lj b">AVSpeechSynthesizerDelegate</code>对象:<br/>2.1 did start<br/>2.2 did finish<br/>2.3 did pause<br/>2.4 did continue<br/>2.5 did cancel<br/>2.6 willSpeakRangeOfSpeechString</li></ol><h1 id="1915" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">AVSpeechUtterance</h1><p id="262f" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di">制作一个</span> <code class="fe lg lh li lj b">VSpeechUtterance</code>用于存储<strong class="ka iv"> 7个语音参数</strong>，这些参数在上述会话中声明。最后会传到<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>输出语音。参见以下代码:</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="222c" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">注1: <br/> </strong>当多个<code class="fe lg lh li lj b">AVSpeechUtterance</code>实例传递到<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>时，它们不会同时<strong class="ka iv">输出</strong>，而是<strong class="ka iv">排队</strong>逐个输出。</p><p id="f2f9" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">注2:</strong><br/>iOS中的音频通道每次只允许<strong class="ka iv">一个音源</strong>。当一个<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>实例正在输出语音时，任何其他<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>实例都不能中断它。来自其他<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>实例<strong class="ka iv">的<code class="fe lg lh li lj b">speak()</code>请求被完全忽略，没有任何运行时错误和警告</strong>。开发人员应该记住这一点。</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><h2 id="c03e" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">AVSpeechUtterance参数1:文本</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="debe" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated">T4框架非常强大，可以识别许多不同的文本格式。见下文的文本和相应的发音:</p><ol class=""><li id="f9ca" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><strong class="ka iv">纯文本</strong>——“Hello world”:“Hello world”</li><li id="b9c8" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><strong class="ka iv">表情符号</strong>——《❤️》:“红心”<br/> <em class="nt"> *它的发音应该和</em><a class="ae lf" href="https://unicode.org/emoji/charts/full-emoji-list.html#1f603" rel="noopener ugc nofollow" target="_blank"><em class="nt">unicode consortium</em></a><em class="nt">或</em><a class="ae lf" href="https://emojipedia.org/" rel="noopener ugc nofollow" target="_blank"><em class="nt">emojipedia</em></a><em class="nt">里说的一样。但是，</em> <strong class="ka iv"> <em class="nt">并不是每一个</em> </strong> <em class="nt">表情符号发音都能和官网上说的吻合。例如，“</em>😀<em class="nt">在iOS中读作</em> <strong class="ka iv">龇牙咧嘴眼睛正常的脸</strong>，在<a class="ae lf" href="https://emojipedia.org/smiling-face-with-open-mouth/" rel="noopener ugc nofollow" target="_blank">表情百科</a> <em class="nt">中读作<strong class="ka iv">咧开嘴的脸</strong>。这将在本文的后面部分讨论。</em></li><li id="8c15" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><strong class="ka iv">前缀单位(美元)</strong>—“$ 100.99”:“一百美元九十九美分”</li><li id="8418" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><strong class="ka iv">后缀单位(厘米)——</strong>“10厘米”:十厘米</li><li id="29b9" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><strong class="ka iv">未发现词—</strong>“hdbjfcng”:“H-D-B-J-F-C-N-G”</li></ol><p id="3f33" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">它可以大大减少开发人员将特殊字符或短语解析成可理解的语音的责任。</p><h2 id="feb4" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">AVSpeechUtterance参数2:语音</h2><p id="d3ac" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi kw translated">世界上有许多不同的语言，每一种语言在不同的国家都有不同的口音。以英语(en)为例，iOS中总共有<strong class="ka iv"> 5种支持的英语口音</strong>。它们是:</p><ol class=""><li id="5c14" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">英国英语</li><li id="fb72" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">美国英语</li><li id="e5bb" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">澳大利亚英语</li><li id="d6da" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">爱尔兰英语</li><li id="44a3" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">南非英语(en-ZA)</li></ol><p id="6897" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">苹果公司通过在iOS中提供<a class="ae lf" href="https://gist.github.com/myrickchow32/6027dd79b4499daeed91367c0afad11b" rel="noopener ugc nofollow" target="_blank"> 52首默认音轨</a>来照顾iOS用户，并且所有音轨都处于“<strong class="ka iv">紧凑</strong>模式。用户可以手动将音轨升级到“<strong class="ka iv">增强</strong>模式，以获得更好的音质。设置(红色)和升级(绿色)的步骤见下图:</p><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gi gj nu"><img src="../Images/3a917c62ba063dcf41d8669bab742d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kie3QU6qRnGEOzUTY-ORfA.png"/></div></div><figcaption class="nz oa gk gi gj ob oc bd b be z dk translated">在iOS设置中查看和升级语音的步骤</figcaption></figure><p id="c4f8" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">有两种方法可以为<code class="fe lg lh li lj b">AVSpeechUtterance</code>的语音参数初始化<code class="fe lg lh li lj b">AVSpeechSynthesisVoice</code>对象:</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><ol class=""><li id="5b81" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><strong class="ka iv">通过声音标识符(不言自明)</strong> <br/>可用声音标识符的列表可以通过<code class="fe lg lh li lj b">AVSpeechSynthesisVoice.speechVoices()</code>来检索。参见以下代码:</li></ol><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="82b6" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv"> 2。通过语音语言代码</strong></p><p id="0dcb" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">语言代码可以是<strong class="ka iv">短格式</strong>或<strong class="ka iv">长格式</strong>。</p><p id="5868" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">例如，英语:</p><ul class=""><li id="c158" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv od mu mv mw bi translated">简短形式:“en”</li><li id="3644" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">长格式:“en-AU”、“en-GB”、“en-IE”、“en-US”、“en-ZA”</li></ul><p id="5268" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">初始化的<code class="fe lg lh li lj b">AVSpeechSynthesisVoice</code>由<strong class="ka iv"> 2个因子</strong>改变:</p><ul class=""><li id="10c2" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv od mu mv mw bi translated">语言代码类型</li><li id="85e4" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">用户是否对特定的口音有自己的偏好。</li></ul><p id="bcb9" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">因素1 —简写/长写语言代码:</strong></p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="c88a" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">对于长形式的“en-AU”，它直接指向<strong class="ka iv">澳大利亚英语</strong>口音。</p><p id="3e03" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">然而，<strong class="ka iv">“en”</strong>代表大范畴“英语”，因而<strong class="ka iv">歧义</strong>。其他例子还有<strong class="ka iv">【es】</strong>(西班牙语)<strong class="ka iv">【fr】</strong>(法语)<strong class="ka iv">【nl】</strong>(荷兰语)<strong class="ka iv">【pt】</strong>(葡萄牙语)<strong class="ka iv">【zh】</strong>(中文)。他们指的是哪种特定的口音？这要看苹果做的定义:</p><ul class=""><li id="6ee2" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv od mu mv mw bi translated">“en”是指<strong class="ka iv">“en-US”</strong></li><li id="09cd" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">“es”是指<strong class="ka iv">“ES-ES”</strong></li><li id="e462" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">“fr”是指<strong class="ka iv">“FR-FR”</strong></li><li id="9564" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">“nl”是指<strong class="ka iv">“NL-NL”</strong></li><li id="6d4f" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">“pt”是指<strong class="ka iv">“PT-PT”</strong></li><li id="7b79" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">“zh”是指<strong class="ka iv">“zh-CN”</strong></li></ul><p id="a5b0" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">因素2:用户对语言类别的偏好</strong></p><p id="833f" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">每个语言类别可能包含<strong class="ka iv">一个重音列表</strong>。以“英语”为例，有5种口音:</p><ol class=""><li id="b1dc" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">英式英语</li><li id="620a" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">美国英语</li><li id="9717" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">澳大利亚英语(<strong class="ka iv"> en-AU </strong></li><li id="1329" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">爱尔兰英语</li><li id="88c8" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">南非英语</li></ol><p id="0c66" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">如果在“en-AU”类别中，<code class="fe lg lh li lj b">AVSpeechSynthesisVoice(language: "en-AU")</code>将返回用户选择的音轨。</p><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div class="gi gj oe"><img src="../Images/aa4fdd06ba8a74fa710b40304d0a5dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*5Hn5eiMNfflQicei5KxOgw.png"/></div></figure><p id="aa68" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">但是，用户可以选择除输入的语言代码<strong class="ka iv">“en-AU”</strong>之外的另一种口音，即<strong class="ka iv"/>“en-US”或“en-GB”或“en-IE”或“en-ZA”。在这种情况下，iOS会将“en-AU”口音的<strong class="ka iv">系统默认声轨</strong>返回给你，即“Karen”，这是固定的。</p><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div class="gi gj of"><img src="../Images/2c7e1df298afd652c6cd926f58d9be17.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*Z00YufquyH8oMZK0eWtzaQ.png"/></div></figure><p id="49a6" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">注意:</strong>如果存在，将返回默认音轨的增强版本。</p><p id="bf0b" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">以下是所有英语口音的系统默认音轨列表:</p><ol class=""><li id="bad5" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">英国英语(en-GB)——<strong class="ka iv">丹尼尔</strong></li><li id="e64d" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">美国英语(en-US)——<strong class="ka iv">萨曼莎</strong></li><li id="40d4" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">澳大利亚英语——卡伦</li><li id="7cd9" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">爱尔兰英语</li><li id="55e8" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">南非英语(en-ZA)——<strong class="ka iv">泰莎</strong></li></ol></div><div class="ab cl og oh hy oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="in io ip iq ir"><h2 id="1703" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">AVSpeechUtterance参数3:音量</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="2dc1" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di">V</span>volume参数是<strong class="ka iv">相对于设备体积的相对体积</strong>，范围从<code class="fe lg lh li lj b">0.0</code>到<code class="fe lg lh li lj b">1.0</code>。</p><p id="0a92" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">在iOS 12中</strong></p><ul class=""><li id="9558" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv od mu mv mw bi translated">共16个音量级别</li><li id="96f5" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">每个级别占最大音量的6.25%。</li></ul><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div class="gi gj on"><img src="../Images/f14448d2b50aef8acd5a84f7a31213a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*_qLVqRYJvNj-8KFLYN-h2g.png"/></div><figcaption class="nz oa gk gi gj ob oc bd b be z dk translated">卷页面的iOS屏幕截图</figcaption></figure><p id="c3b5" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">示例</strong>:</p><ul class=""><li id="f3d4" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv od mu mv mw bi translated">第八音量级别由用户选择</li><li id="f2f1" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated"><code class="fe lg lh li lj b">volume</code>参数设置为<code class="fe lg lh li lj b">0.5</code></li><li id="85d2" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">实际输出音量:<br/> 8 * 0.5 =第四级音量(4 * 6.25% =最大音量的25%)</li></ul><p id="ccf5" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">这可以防止iOS应用程序设置的音量<strong class="ka iv">大于用户首选设备的音量</strong>。</p><h2 id="c2d6" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">AVSpeechUtterance参数4:速率</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="bc5e" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated">T42 ate控制语音输出的速度。范围从<code class="fe lg lh li lj b">0.0</code>到<code class="fe lg lh li lj b">1.0</code>，默认值为<code class="fe lg lh li lj b">0.5</code>。</p><h2 id="1b1a" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">AVSpeechUtterance参数5: PitchMultiplier</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="1858" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated">itchMultiplier控制每个单词发音的清晰度。范围从<code class="fe lg lh li lj b">0.5</code>到<code class="fe lg lh li lj b">2.0</code>，默认值为<code class="fe lg lh li lj b">1.0</code>。</p><p id="1d38" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">如果设置太低，<strong class="ka iv">女声音轨听起来会像男声！</strong>因此，该参数应小心处理，甚至干脆忽略。</p><h2 id="7a1d" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">AVSpeechUtterance参数6 &amp; 7:preutterancedlay &amp; postuterancedlay</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="324d" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di">P</span>reuterancedelay是启动电流<code class="fe lg lh li lj b">AVSpeechUtterance</code>之前的时间延迟，<code class="fe lg lh li lj b">postUtteranceDelay</code>是相反的意思。</p><p id="778c" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">切记:</strong> <br/>两次连续发言之间的总延迟<br/>=<br/><code class="fe lg lh li lj b">postUtteranceDelay</code><strong class="ka iv">上一次</strong> <code class="fe lg lh li lj b">AVSpeechUtterance<br/></code> + <br/> <code class="fe lg lh li lj b">preUtteranceDelay</code>下一次<strong class="ka iv"/><code class="fe lg lh li lj b">AVSpeechUtterance</code>。</p><h1 id="cce9" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">语音操作</h1><p id="6503" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi translated"><code class="fe lg lh li lj b">AVSpeechSynthesizer</code>中提供了<strong class="ka iv"> 4 </strong>语音操作:</p><ol class=""><li id="4bfd" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">玩</li><li id="2706" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">中止</li><li id="7227" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">继续</li><li id="bb95" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">停止</li></ol><h2 id="6c72" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">操作1 —播放:</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="055e" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di"> P </span>铺设语音轨道很简单。只是将<code class="fe lg lh li lj b">AVSpeechUtterance</code>对象传递给<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>实例的<code class="fe lg lh li lj b">speak()</code>。</p><p id="ac33" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">注意多次调用<code class="fe lg lh li lj b">speak()</code><strong class="ka iv">不会拦截当前播放的语音</strong>。所有新添加的音轨都在<strong class="ka iv">队列</strong>中逐一输出。</p><p id="ccaa" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">如果要覆盖当前播放的音轨，必须先用<code class="fe lg lh li lj b">stop()</code>停止。</p><h2 id="7d74" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">操作2 —暂停:</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="e69a" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di"> 2 </span>选项可用于暂停正在播放的语音。它们是:</p><ol class=""><li id="184b" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><strong class="ka iv">avspeechboundary . immediate</strong><br/>语音在当前发音处暂停。</li><li id="89a0" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">语音在整个单词的最后一个发音时暂停</li></ol><p id="1b73" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">示例</strong>:</p><ul class=""><li id="1e24" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv od mu mv mw bi translated">原话:“中”</li><li id="92cf" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">发音:“<strong class="ka iv">我</strong>”—“<strong class="ka iv">迪</strong>”—“<strong class="ka iv">嗯</strong>”</li><li id="7174" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">AVSpeechBoundary.immediate可以在“<strong class="ka iv"> Me </strong>”或“<strong class="ka iv"> Di </strong>”或“<strong class="ka iv"> Um </strong>”处停止讲话</li><li id="8f7f" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv od mu mv mw bi translated">AVSpeechBoundary.word只能在“<strong class="ka iv"> Um </strong>处停止语音</li></ul><h2 id="0d95" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">操作3 —继续:</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="fe06" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">只有当<strong class="ka iv">暂停</strong>而<strong class="ka iv">没有</strong> <strong class="ka iv">停止</strong>时，演讲才能继续。</p><h2 id="e5e2" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">操作4 —停止:</h2><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="f328" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di"> S </span>与<code class="fe lg lh li lj b">pause()</code>类似，有2个选项可以停止正在播放的语音。它们是:</p><ol class=""><li id="563b" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">AVSpeechBoundary.immediate</li><li id="4feb" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">AVSpeechBoundary.word</li></ol><p id="6dfb" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">注意:</strong>停止的发言<strong class="ka iv">无论如何都不能恢复</strong>。如果可能的话，考虑暂停演讲。</p><h1 id="8fe3" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">AVSpeechSynthesizerDelegate</h1><p id="c57d" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di">一个</span> VSpeechSynthesizerDelegate共提供了<strong class="ka iv"> 6个</strong> <strong class="ka iv">回调</strong>，用于显示<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>在输出语音时的不同状态。它们是:</p><ol class=""><li id="cf61" class="mo mp iu ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">开始了</li><li id="c297" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">完成</li><li id="5c8f" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">停顿</li><li id="2b97" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">继续吗</li><li id="c884" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">取消</li><li id="569a" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">willSpeakRangeOfSpeechString</li></ol><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><h2 id="645f" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">案例1 —将演讲播放到结尾:</h2><ol class=""><li id="f8cd" class="mo mp iu ka b kb nc kf nd kj oo kn op kr oq kv mt mu mv mw bi translated">播放演讲(didStart)</li><li id="3bdf" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">完成演讲</li></ol><h2 id="ae53" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">案例2——播放和停止演讲:</h2><ol class=""><li id="c78a" class="mo mp iu ka b kb nc kf nd kj oo kn op kr oq kv mt mu mv mw bi translated">播放演讲(didStart)</li><li id="2214" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">停止演讲</li></ol><h2 id="12cc" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">案例3——播放和继续演讲:</h2><ol class=""><li id="667d" class="mo mp iu ka b kb nc kf nd kj oo kn op kr oq kv mt mu mv mw bi translated">播放演讲(didStart)</li><li id="25d9" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">暂停演讲</li><li id="c75f" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">继续演讲</li><li id="de41" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">直到演讲结束(didFinish)</li></ol><h1 id="3096" class="lq lr iu bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">语音合成器的实用考虑</h1><h2 id="aa40" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">考虑1:英文和其他语言的混合文本</h2><p id="99e7" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi">If you are targeting your app to global market, it sometimes might contain paragraph mixing with texts in <strong class="ka iv">both English and other languages</strong>. Take below string “<strong class="ka iv">Hong Kong (香港) is in Asia.</strong>” as an example:</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="3b50" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">所有紧凑和增强版本的声音轨道可以处理这种情况相当顺利。然而，由于不同声道的口音不同，你不应该期望每个英语单词都有100%流利的英语发音。必须有一点点的交换。</p><h2 id="5644" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">考虑2:应用程序生命周期中的iOS中断AVSpeechSynthesizer</h2><p id="e86f" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi translated">当应用程序被发送到后台(例如，按下Home键)时，iOS自动通过<strong class="ka iv">平滑音量减小</strong>停止<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>，当应用程序再次被发送到前台时，通过<strong class="ka iv">平滑音量增大</strong>恢复。开发者可以监控<code class="fe lg lh li lj b">AppDelegate</code>类中<code class="fe lg lh li lj b"><strong class="ka iv">applicationDidEnterBackground</strong></code>和<code class="fe lg lh li lj b"><strong class="ka iv">applicationDidBecomeActive</strong></code>的状态。这有助于开发者为用户提供满意的用户体验！</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><h2 id="5401" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">考虑3:即使UIViewController被解除或弹出，语音也不会停止</h2><p id="5e00" class="pw-post-body-paragraph jy jz iu ka b kb nc kd ke kf nd kh ki kj ne kl km kn nf kp kq kr ng kt ku kv in bi translated">即使在UIViewController被<strong class="ka iv">解除</strong>或<strong class="ka iv">弹出</strong>之后，iOS仍继续输出语音，因此保存对<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>实例的引用。它阻止UIViewController去初始化，直到<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>完成整个语音。参见以下代码:</p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><p id="d9ab" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">日志:</strong></p><pre class="lk ll lm ln gu or lj os ot aw ou bi"><span id="bb79" class="nh lr iu lj b gz ov ow l ox oy">viewDidDisappear<br/>...<br/>(Wait until AVSpeechSynthesizer completes the whole speech)<br/>...<br/>AVFoundationDemoViewController is deinit.</span></pre><p id="f21a" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv">解决方案:</strong></p><figure class="lk ll lm ln gu jv"><div class="bz fq l di"><div class="lo lp l"/></div></figure><h2 id="b9a0" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">考虑四:用音乐app打断</h2><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div class="gi gj oz"><img src="../Images/ecbaf6769a44313f2cee2875bfa18fe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:396/format:webp/1*O-iab-AID_yPQXTdQojc9A.png"/></div></figure><p id="91aa" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv"> <em class="nt">音乐</em> </strong> app在后台时可以输出声音。但是，它与其他应用程序共享相同的音频通道。这意味着当其他应用程序想要使用音频通道输出声音时，音乐音轨将被停止。前台的应用程序在使用音频通道时拥有更高的特权<strong class="ka iv">。但是，当其他应用程序处理音频通道时，iOS不会恢复原始音乐轨道。UX的设计者应该注意这对用户体验的副作用。</strong></p><h2 id="cd2c" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">考虑5:表情符号的解释</h2><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div class="gi gj pa"><img src="../Images/ba1c9bb1767cf221423e12d7ea38efd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:226/format:webp/1*DIOTdlBOouniCBpoVRxnMg.png"/></div></figure><p id="da16" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">如前所述，<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>支持表情符号，但苹果对每个表情符号有自己的解释。它与Unicode Consortium<em class="nt"/>或<em class="nt"> </em> <a class="ae lf" href="https://emojipedia.org/" rel="noopener ugc nofollow" target="_blank"> Emojipedia </a>的文档并非100%匹配。</p><p id="3741" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">例如，常见的表情符号😀在iOS中读作“<strong class="ka iv">带着正常眼睛的狞笑脸</strong>”，但是在Unicode Consortium 和<a class="ae lf" href="https://emojipedia.org/grinning-face/" rel="noopener ugc nofollow" target="_blank"> Emojipedia </a>中的<a class="ae lf" href="https://unicode.org/emoji/charts/full-emoji-list.html#1f603" rel="noopener ugc nofollow" target="_blank">文档都显示它应该只是“<strong class="ka iv">狞笑脸</strong>”。</a></p><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gi gj pb"><img src="../Images/af15de77430eaa731d784b0f2fdd2876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywRfjsyT6M8hDlDzd0xKHQ.png"/></div></div><figcaption class="nz oa gk gi gj ob oc bd b be z dk translated">截屏来自<a class="ae lf" href="https://unicode.org/emoji/charts/full-emoji-list.html#1f603" rel="noopener ugc nofollow" target="_blank">Unicode Consortium</a>关于表情符号😀</figcaption></figure><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div class="gi gj pc"><img src="../Images/4a7093cedb08d9d597b1f0389d7860ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ezJWIISRLcwm1y3i6XlcqA.png"/></div><figcaption class="nz oa gk gi gj ob oc bd b be z dk translated">从<a class="ae lf" href="https://emojipedia.org/grinning-face/" rel="noopener ugc nofollow" target="_blank">表情百科</a>截取的关于表情的屏幕😀</figcaption></figure><p id="3957" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">这时，你们中的一些人可能会认为Mac中有一个“<strong class="ka iv">字符查看器</strong>”(<strong class="ka iv">命令+控制+空格</strong>)用于输入表情符号，并且每个表情符号都有一个名称。这是苹果的解释吗？答案是“没有”。的名字😀依然是“狞笑脸”。</p><figure class="lk ll lm ln gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gi gj pd"><img src="../Images/098ca04c41058f18aaafa4c97891e54d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rB2EB3Ilt7QmoLnrWLjW0A.png"/></div></div></figure><p id="7ebd" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">在谷歌搜索了很长时间后，我仍然无法找到任何官方文件显示苹果公司如何解读每个emoji符号。如果你能找到任何相关文档，请<strong class="ka iv">在评论区</strong>分享，这将对我有很大帮助。谢谢您们。</p><h2 id="ab12" class="nh lr iu bd ls ni nj dn lw nk nl dp ma kj nm nn me kn no np mi kr nq nr mm ns bi translated">结论:</h2><ol class=""><li id="e5f4" class="mo mp iu ka b kb nc kf nd kj oo kn op kr oq kv mt mu mv mw bi translated"><code class="fe lg lh li lj b">AVSpeechSynthesiser</code>可以识别<strong class="ka iv">纯文本</strong>、<strong class="ka iv">表情符号</strong>、<strong class="ka iv">前缀单元</strong>和<strong class="ka iv">后缀单元</strong>。如果选择正确的语音参数，它还可以处理混合了英语和其他语言单词的<strong class="ka iv">句子。</strong></li><li id="71a9" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><code class="fe lg lh li lj b">AVSpeechSynthesiser</code>有一个 <code class="fe lg lh li lj b"><strong class="ka iv">AVSpeechUtterance</strong></code> <strong class="ka iv"> </strong>的<strong class="ka iv">队列，逐个播放<strong class="ka iv"/>物品，而不是同步播放所有物品。</strong></li><li id="1c3b" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">需要确认<strong class="ka iv">没有其他</strong> <code class="fe lg lh li lj b"><strong class="ka iv">AVSpeechSynthesiser</strong></code> <strong class="ka iv">实例正在输出语音</strong>，否则输出语音的请求将被忽略，不会出现错误信息。</li><li id="99dd" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><code class="fe lg lh li lj b">AVSpeechUtterance</code>中的语音参数根据<strong class="ka iv">输入的语言代码</strong>和<strong class="ka iv">用户选择的特定语言的口音</strong>而变化。</li><li id="f5e6" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">音量参数确保应用程序输出的音量不会高于当前设备的音量。</li><li id="d005" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">停止的讲话<strong class="ka iv">永远不能恢复</strong>。</li><li id="548a" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">可以在<code class="fe lg lh li lj b">AppDelegate.swift</code>中的<code class="fe lg lh li lj b"><strong class="ka iv">applicationDidEnterBackground</strong></code>和<code class="fe lg lh li lj b"><strong class="ka iv">applicationDidBecomeActive</strong></code>处设置<code class="fe lg lh li lj b">AVSpeechSynthesiser</code>的自定义逻辑</li><li id="88e9" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">有必要<strong class="ka iv">停止</strong>任何活动的<code class="fe lg lh li lj b">AVSpeechSynthesiser</code>，以便<strong class="ka iv">成功地对</strong>uiview controller进行去初始化。</li><li id="445c" class="mo mp iu ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><code class="fe lg lh li lj b">AVFoundation</code>框架对表情符号的解读还<strong class="ka iv">不确定</strong>需要进一步考虑。(发现有用信息请留言。)</li></ol><p id="28cb" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">感谢您阅读这篇文章。如需了解更多信息，请在<a class="ae lf" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ myrik _ chow</a>关注我。希望你能更好地理解如何用<code class="fe lg lh li lj b">AVSpeechSynthesizer</code>将文本转换成语音！让我们创建一个伟大的应用程序！😊</p></div></div>    
</body>
</html>