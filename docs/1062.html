<html>
<head>
<title>Testing React application with Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Cypress测试React应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/testing-react-application-with-cypress-fce9e159fec?source=collection_archive---------1-----------------------#2018-07-14">https://itnext.io/testing-react-application-with-cypress-fce9e159fec?source=collection_archive---------1-----------------------#2018-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="06d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cypress是一个让你快速简单地编写和运行集成测试的工具。想了解更多关于赛普拉斯的信息，可以访问赛普拉斯的<a class="ae kl" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank">网站</a>或者<a class="ae kl" href="https://github.com/cypress-io/cypress" rel="noopener ugc nofollow" target="_blank"> github repo </a>。</p><p id="37e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将在我的简单计算器应用程序上演示一个简单的测试。您可以从这个库的<a class="ae kl" href="https://github.com/ahmetkapusuz/calculator-app" rel="noopener ugc nofollow" target="_blank">中克隆示例应用程序。</a></p><p id="780f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，导航到应用程序文件夹，用下面的命令添加cypress作为开发依赖项。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="bb3b" class="kv kw iq kr b gy kx ky l kz la">yarn add --dev cypress</span></pre><p id="a199" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以看到cypress被添加到您的package.json文件中，如下所示:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="c062" class="kv kw iq kr b gy kx ky l kz la">"devDependencies": {<br/>  "cypress": "^3.0.2"<br/>}</span></pre><p id="d8be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要启动cypress，您应该在应用程序根文件夹中运行下面的命令。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="634c" class="kv kw iq kr b gy kx ky l kz la">yarn run cypress open</span></pre><p id="2eb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将打开cypress窗口，并将示例测试文件夹添加到您的项目中。</p><figure class="km kn ko kp gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi lb"><img src="../Images/b29d9f320e4999c14dfd7afc876bb3c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UzrWZWyvWGNxFVycT53HPA.png"/></div></div></figure><p id="3a42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以开始编写集成测试了。</p><p id="6b9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在cypress-&gt;integration文件夹下新建一个文件夹，命名为calculator-app。并创建一个名为calculator_app.spec.js的新文件，这是我们将要编写测试的文件。</p><p id="b8f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果打开Calculator.js文件并查看render函数，可以看到我为每个元素添加了一个额外的属性data-cy。这是为了方便查找元素而添加的，不会影响对类或dom结构的更改。这被Cypress团队定义为最佳实践，你可以从本教程<a class="ae kl" href="https://docs.cypress.io/guides/references/best-practices.html" rel="noopener ugc nofollow" target="_blank">中看到其他最佳实践。</a></p><p id="9943" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们添加我们的第一个测试，这个计算器应该能够添加两个数字。为了测试这一点，我们将下面的代码块添加到calculator_app.spec.js文件中。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="e0d3" class="kv kw iq kr b gy kx ky l kz la">describe('calculator', <strong class="kr ir">function </strong>() {<br/>    beforeEach(<strong class="kr ir">function </strong>() {<br/>       cy.visit('http://localhost:3000');<br/>    });<br/><br/>    it('should add two numbers', <strong class="kr ir">function </strong>() {<br/>        cy.get('[data-cy=button1]').click();<br/>        cy.get('[data-cy=buttonSum]').click();<br/>        cy.get('[data-cy=button2]').click();<br/>        cy.get('[data-cy=buttonEquals]').click();<br/>        cy.get('[data-cy=result]').should('have.value', '3')<br/>    });<br/><br/>    afterEach(<strong class="kr ir">function </strong>() {<br/>        cy.get('[data-cy=buttonClear]').click();<br/>    });<br/>});</span></pre><p id="d0e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这段代码只是访问我们的应用程序运行的http://localhost:3000页面，然后单击一些按钮，然后检查结果值是否正确。并且在每次测试后点击清除按钮来清除输入字段上的最后一个值。</p><p id="41b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要运行这个测试，首先您应该启动应用程序。因此，导航到应用程序文件夹并运行下面的命令:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="3f78" class="kv kw iq kr b gy kx ky l kz la">yarn start</span></pre><p id="6222" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，导航到应用程序文件夹并运行下面的命令来开始您的测试；</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="1764" class="kv kw iq kr b gy kx ky l kz la">yarn run cypress open</span></pre><p id="ebb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将打开cypress窗口，然后您可以单击calculator_app.spec.js来运行您的测试。您应该会看到下面类似的窗口，显示您的测试已经成功运行并完成。</p><figure class="km kn ko kp gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi lj"><img src="../Images/b022a80161ae5b97bfdbf228ea93306f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDS9N0dnt-R226-wzX70zg.png"/></div></div></figure><p id="16d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类似地，您可以为其他操作编写测试。</p><p id="c87e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以用来自这个<a class="ae kl" href="https://github.com/ahmetkapusuz/calculator-app-cypress" rel="noopener ugc nofollow" target="_blank">库</a>的测试来克隆整个应用程序。</p></div></div>    
</body>
</html>