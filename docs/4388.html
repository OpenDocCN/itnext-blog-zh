<html>
<head>
<title>Modern Vue Components without Vetur</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不带Vetur的现代Vue组件</h1>
<blockquote>原文：<a href="https://itnext.io/modern-vue-components-without-vetur-2b815220f41f?source=collection_archive---------3-----------------------#2020-06-21">https://itnext.io/modern-vue-components-without-vetur-2b815220f41f?source=collection_archive---------3-----------------------#2020-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c82be38a342f0b8cf1468f46ef606c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8J5w5RcdFoPd6iz2lkAk3A.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">感谢<a class="ae kf" href="https://www.goodfreephotos.com/germany/other-germany/mountains-and-forest-and-field-in-the-rhine-gorge.jpg.php" rel="noopener ugc nofollow" target="_blank">好的免费照片</a>。</figcaption></figure><p id="6151" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vetur毁了我对编程的兴趣。它在IDE中提供的体验太降级了。TypeScript代码的大部分重构特性都不起作用，monorepos也有bug，等等。在我的TypeScript开发团队中，我们可能花了95%的时间在TypeScript代码上，4%的时间在SCSS代码上(是的，我们有一个为我们编写大部分CSS的设计师)，我们可以慷慨地把1%的时间花在HTML代码上。这就是为什么HTML容器不是编写web应用程序的好格式。</p><p id="1f2b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，一年前，我们改用老方法，抛弃了SFC及其怪异的<code class="fe le lf lg lh b">.vue</code>格式。但是从那以后，我们逐渐创建了一些工具，将<code class="fe le lf lg lh b">.vue</code>格式的大部分好处导入JavaScript和TypeScript源文件。</p><p id="b598" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是我们现在编写Vue组件的方式:</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi li"><img src="../Images/aefece7329ddd78fe71a338f4172d702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qSgHQBIophqNPC7T7VEPg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在Visual Studio代码中。</figcaption></figure><p id="baf3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它是一种新型的<strong class="ki iu">单文件组件</strong>，但是在一个JavaScript(或TypeScript)容器中。我们设法用Webpack加载器预编译了模板。</p><p id="cccf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">IDE还提供HTML和SCSS模板字符串的语法支持。现在问题反过来了:对SCSS和HTML代码编辑的支持还不完善。但是开发人员将大部分时间花在编写JavaScript(或TypeScript)代码上，因此优先支持JavaScript和TypeScript更有意义。</p><h1 id="cdb2" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">如何在JavaScript和TypeScript源文件中添加SFC功能</h1><h2 id="7110" class="ml lo it bd lp mm mn dn lt mo mp dp lx kr mq mr mb kv ms mt mf kz mu mv mj mw bi translated">在项目中添加Webpack加载器</h2><p id="2d9f" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">假设您已经有一个现有的Vue项目。首先，添加两个Webpack加载器，一个用于预编译Vue模板，一个用于提取SASS代码:</p><pre class="lj lk ll lm gt nc lh nd ne aw nf bi"><span id="753a" class="ml lo it lh b gy ng nh l ni nj">npm install --save-dev \<br/>  @enhancedjs/vue-template-in-string-loader \<br/>  @enhancedjs/css-in-template-string-loader</span></pre><p id="2054" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建或编辑<code class="fe le lf lg lh b">vue.config.js</code>文件，然后添加一个<code class="fe le lf lg lh b">configureWebpack</code>部分:</p><pre class="lj lk ll lm gt nc lh nd ne aw nf bi"><span id="7ed1" class="ml lo it lh b gy ng nh l ni nj">const MiniCssExtractPlugin = require("mini-css-extract-plugin"); <em class="nk">// Notice: installed by Vue CLI</em></span><span id="1fb9" class="ml lo it lh b gy nl nh l ni nj">module.exports = {<br/>  runtimeCompiler: false,<br/>  configureWebpack: config =&gt; ({<br/>    module: {<br/>      rules: [<br/>        {<br/>          test: /\.(js|ts)$/,<br/>          exclude: /node_modules/,<br/>          use: [<br/>            {<br/>              loader: "@enhancedjs/vue-template-in-string-loader"<br/>            },<br/>            {<br/>              loader: "@enhancedjs/css-in-template-string-loader",<br/>              options: {<br/>                cssLoaders: [<br/>                  config.mode === "development" ? "vue-style-loader" : MiniCssExtractPlugin.loader,<br/>                  "css-loader",<br/>                  "sass-loader"<br/>                ]<br/>              }<br/>            }<br/>          ]<br/>        }<br/>      ]<br/>    }<br/>  })<br/>};</span></pre><p id="27cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意:如果你使用Vue CLI初始化你的项目，那么<code class="fe le lf lg lh b">mini-css-extract-plugin</code>和<code class="fe le lf lg lh b">vue-style-loader</code>包已经安装好了。</p><h2 id="c2c3" class="ml lo it bd lp mm mn dn lt mo mp dp lx kr mq mr mb kv ms mt mf kz mu mv mj mw bi translated">对于TypeScript项目:添加全局定义文件</h2><p id="8a22" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">这些Webpack加载器将在编译时替换或删除标记的模板字符串，因此没有必要为模板标记提供实现。但是，在TypeScript项目中，必须提供声明。在源目录中为全局声明创建一个文件:</p><pre class="lj lk ll lm gt nc lh nd ne aw nf bi"><span id="56db" class="ml lo it lh b gy ng nh l ni nj"><em class="nk">// global.d.ts</em><br/>declare function vueTemplate(text: TemplateStringsArray): string;<br/>declare function scss(text: TemplateStringsArray): void;</span></pre><h2 id="20f6" class="ml lo it bd lp mm mn dn lt mo mp dp lx kr mq mr mb kv ms mt mf kz mu mv mj mw bi translated">在Visual Studio代码中添加扩展</h2><p id="b123" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">在Visual Studio代码中，打开“扩展”面板，然后搜索:“enhancedjs”。安装以下扩展:</p><ul class=""><li id="8558" class="nm nn it ki b kj kk kn ko kr no kv np kz nq ld nr ns nt nu bi translated"><a class="ae kf" href="https://marketplace.visualstudio.com/items?itemName=enhancedjs.html-in-template-string" rel="noopener ugc nofollow" target="_blank"><strong class="ki iu">html-in-template-string</strong></a>，来自EnhancedJS</li><li id="4a15" class="nm nn it ki b kj nv kn nw kr nx kv ny kz nz ld nr ns nt nu bi translated"><a class="ae kf" href="https://marketplace.visualstudio.com/items?itemName=enhancedjs.sass-in-template-string" rel="noopener ugc nofollow" target="_blank"><strong class="ki iu">sass-in-template-string</strong></a>，来自EnhancedJS。</li></ul><p id="88d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这两个扩展将在标记有<code class="fe le lf lg lh b">vueTemplate</code>和<code class="fe le lf lg lh b">scss</code>的模板字符串中带来自动完成和语法高亮。</p><h1 id="a3c7" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">限制</h1><p id="b945" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">我们的工具可以在专业环境中使用。然而，他们是我们的开源项目，我们的时间有限。以下是当前的一些限制:</p><ol class=""><li id="eb57" class="nm nn it ki b kj kk kn ko kr no kv np kz nq ld oa ns nt nu bi translated">欺骗我们的Webpack加载器是可能的。它们是用简单的正则表达式实现的，而不是用笨重的解析器。例如，不要使用<code class="fe le lf lg lh b">/* multi-line comments */</code>来禁用Vue模板。而是使用多个<code class="fe le lf lg lh b">// single line comments</code>。</li><li id="e292" class="nm nn it ki b kj nv kn nw kr nx kv ny kz nz ld oa ns nt nu bi translated">Visual Studio代码扩展尚未完成。我们只是改编了微软的一些演示工作，没有对它们进行改进。Vue模板特有的语法(<code class="fe le lf lg lh b">v-if</code>、<code class="fe le lf lg lh b">v-for</code>等)。)没有实现，当然我们可以写但是不需要IDE的帮助。SASS edition缺少一些好的东西，比如颜色预览，或者单行注释的快捷方式和高亮显示。</li><li id="488e" class="nm nn it ki b kj nv kn nw kr nx kv ny kz nz ld oa ns nt nu bi translated">有必要在组件的JavaScript代码之前声明Vue模板。</li><li id="0583" class="nm nn it ki b kj nv kn nw kr nx kv ny kz nz ld oa ns nt nu bi translated">我们还没有为限定范围的SCSS实施解决方案。我们目前使用<a class="ae kf" href="https://paleo.casa/pleasant-bem.html" rel="noopener ugc nofollow" target="_blank"> Pleasant BEM </a>约定来代替:它们帮助我们将组件的CSS规则分开。</li></ol><h1 id="2168" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">想做贡献吗？</h1><p id="a68c" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">我最近将Webpack加载器和Visual Studio代码扩展重新组合成一个全新的<a class="ae kf" href="https://github.com/enhancedjs" rel="noopener ugc nofollow" target="_blank"> Github组织，命名为“enhanced js”</a>，这将使为这些项目添加团队成员变得更加容易。我正在等待关于Vue.js的真正和持久的sfc的帮助。请随意贡献。；-)</p></div></div>    
</body>
</html>