<html>
<head>
<title>Analyzing League of Legends dataset with Pandas and Python3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用熊猫和Python3分析英雄联盟数据集</h1>
<blockquote>原文：<a href="https://itnext.io/analyzing-league-of-legends-dataset-with-pandas-and-python3-ac0927e93772?source=collection_archive---------1-----------------------#2018-08-23">https://itnext.io/analyzing-league-of-legends-dataset-with-pandas-and-python3-ac0927e93772?source=collection_archive---------1-----------------------#2018-08-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3779c9aea3e000f98fe04b7572cdd166.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lzaHySKEjOPrOoVRth9_kQ.png"/></div></div></figure><p id="4fb3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇文章中，我使用Pandas data analytics library for python 3在来自<a class="ae kw" href="http://oracleselixir.com/match-data/" rel="noopener ugc nofollow" target="_blank"> Oracle's Elixir </a>的英雄联盟2018年夏季分裂数据集上演示了一些基本的数据分析技术。</p><h1 id="a9fd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">查看单个团队的统计数据</h1><p id="767f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">首先，我希望能够查看一个团队过去的比赛，以及一些有趣的数据。数据集的建立方式是每个游戏出现两次，一次是从每个队的角度。</p><p id="1127" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，假设我们正在审查Echo Fox vs Clutch Gaming，其<code class="fe ma mb mc md b">gameid</code>为<code class="fe ma mb mc md b">1002620109</code>。会有两排；从回声福克斯的角度来看，他们得到了10次击杀，遭受了5次死亡。对于抓机游戏，那是5杀10死。每个玩家的数据显示在一行中，这意味着每场比赛有10行，再加上“团队”的两行，这显示了像<code class="fe ma mb mc md b">teamkills</code>和<code class="fe ma mb mc md b">teamdeaths</code>这样的东西。在这种情况下，<code class="fe ma mb mc md b">player</code>字段就是<code class="fe ma mb mc md b">Team</code>。</p><p id="527d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这意味着要让两个参与者都在一行中，需要做一些工作。首先，需要对数据进行一些基本的清理:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="8ac4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">某些0和1值，例如first blood，被保存为字符串而不是数字。我把它们都转换成浮点数，还把<code class="fe ma mb mc md b">blue</code>和<code class="fe ma mb mc md b">red</code>设为整数值。</p><p id="a495" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，用一个<code class="fe ma mb mc md b">team_games</code>方法获取一个团队的所有游戏。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="37eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行该命令会得到如下表格:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="ab72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了更多的数据。现在我们要的是<code class="fe ma mb mc md b">team_games</code>、<code class="fe ma mb mc md b">opponent_games</code>的反义词:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="acd2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将所有这些放在一起:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="091e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">给出了到目前为止结果的一个很好的总结:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="5a0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经对数据有了一个感觉，让我们做一些实际的分析。</p><h1 id="9aea" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">关于第一滴血/炮塔/龙的统计…</h1><p id="8b89" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">通常一场强有力的早期比赛会决定结果，或者会吗？我们来调查一下。使用我们的<code class="fe ma mb mc md b">team_games</code>函数，我们可以很容易地获得第一血/炮塔的百分比。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="898d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这向我们展示了:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="bdb7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对此有多种解释:TSM没有优先考虑dragon？也许他们有一个弱车道(因此不经常得到第一炮塔)？我们去看看联盟的其他人怎么样？首先制作<code class="fe ma mb mc md b">games_by_league</code>和<code class="fe ma mb mc md b">teams_by_league</code>功能:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="cc83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们可以循环每个团队的统计数据。每个stat在字典中被分配一个键，该值是该类别中每个团队的百分比数组。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="3724" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">…或者不是。我们得到一个错误。原来有一场比赛因为技术原因被取消了，因为没有第一滴血，所以这一栏是空白的。我们可以很容易地解决这个问题，首先把所有的空格都改成<code class="fe ma mb mc md b">np.nan</code>，然后用<code class="fe ma mb mc md b">dropna</code>去掉那些行。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="9698" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们得到了这张漂亮的桌子:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="1b97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了获得更多的背景信息，让我们将每个团队的总胜率相加，并按此排序:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="6cd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们得到:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="c8d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一男爵在7强中相当稳定。他们都在三场比赛之内，但我确实期望有一点或更大的差距。首先，龙，炮塔和血液看起来完全不相关(我们将在后面看到，使用熊猫<code class="fe ma mb mc md b">corr</code>的方法，这确实不是高度相关)。</p><p id="2549" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">黄金守护者有点像局外人——很多第一龙，仅次于团队液体。这可能有很多原因，例如龙的类型，或者一些团队喜欢早期游戏中的丛林者。</p><h1 id="ae65" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用<code class="fe ma mb mc md b">corr</code>查找相关性</h1><p id="825e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">让我们来看看第一条龙，炮塔等和实际赢得游戏是否有关系。创建一个<code class="fe ma mb mc md b">do_correlation</code>函数:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="4f84" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这给了我们:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="b1d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">相关性从-1到+1。-1表示相反的关系。例如，如果第一滴血与结果的相关性为1，这意味着一支球队赢得了他们得到第一滴血的每一场比赛。</p><p id="ca4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不出所料，获得第一男爵与赢得比赛的相关性很高，0.76。第一滴血与第一条龙也有很高的相关性——也许团队获得第一滴血僵尸网络很多，然后过渡到龙？</p><p id="3d72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将蓝色边定义为0，红色边定义为1。注意所有东西都和边负相关。这意味着一边上升，其他的都下降。换句话说，红色尺寸要差得多，至少对团队液体来说是这样。让我们看看这种趋势是否会延伸到其他球队。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="0f78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">给了我们:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="8534" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一男爵仍然是谁会赢的可靠指标。然而，第一条龙和第一个炮塔在很大程度上是不相关的——0.11不是很重要。然而，第一血和第一炮塔之间有很强的联系——也许北美队倾向于玩机器人，经常得到第一血(这导致第一炮塔)？相比韩国最强的地区LCK怎么样？</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="4e83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一炮塔和第一男爵都有较高的相关性。或许LCK更擅长推动优势，将目标转化为胜利？同样，第一滴血与结果没有明显的关系。蓝色的一面略受青睐。</p><h1 id="8110" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论和改进</h1><p id="aba3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">虽然机器学习库是席卷数据科学社区的最新和最伟大的工具，但您可以使用像pandas这样更简单的库来得出一些可靠的结论。我计划写一篇后续文章，使用scikit训练一些模型来预测诸如第一滴血、谁赢了一场比赛等等。</p><p id="ed4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">即使我打算使用机器学习库建立一个预测模型，我通常会先引入熊猫并探索数据，以获得对我正在处理的东西和我想要训练的模型类型的良好直觉。</p><p id="919a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一些需要进一步探索的领域是生成pandas支持的图形(在引擎盖下使用matplotlib ),并对多个赛季甚至多个赛季的单个球员进行一些分析。或许TL从TSM转来的时候主导的bot lane跟着Doublelift？Pandas是进行这种高层次分析的完美工具。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="f96b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mr">原载于</em> <a class="ae kw" href="https://lmiller1990.github.io/electic/" rel="noopener ugc nofollow" target="_blank"> <em class="mr">拉克伦·米勒的博客</em> </a> <em class="mr">。</em></p></div></div>    
</body>
</html>