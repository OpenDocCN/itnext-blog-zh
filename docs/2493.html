<html>
<head>
<title>Build a good-looking IoT device with the Particle Photon, Blynk and a 3D-printed enclosure.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用粒子光子、Blynk和3D打印的外壳构建一个好看的物联网设备。</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-neat-iot-product-with-the-particle-photon-blynk-and-a-3d-printed-enclosure-63d78d871778?source=collection_archive---------2-----------------------#2019-06-02">https://itnext.io/build-a-neat-iot-product-with-the-particle-photon-blynk-and-a-3d-printed-enclosure-63d78d871778?source=collection_archive---------2-----------------------#2019-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/372f6281c19e6eb4ae57db1c012183a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7kk1RheLemdFBrbYp37CUw.png"/></div></div></figure><div class=""/><p id="62d7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">几个月前，我在沙滩上散步，意识到我的软件工程生活道路主要是抽象的逻辑，而不是你可以触摸的东西，有点被海浪拍打海岸迷住，有点被这种物理愿望驱动，我决定建造一个物联网设备来监控我周围的环境，将赋予我平淡无奇的生活以意义。</p><p id="e630" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所有这些的储存库在这里:<a class="ae kw" href="https://github.com/lucavallin/hytta" rel="noopener ugc nofollow" target="_blank">https://github.com/lucavallin/hytta</a></p><h1 id="8409" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">项目简史</strong></h1><p id="b432" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我以前从未使用过这样的设备，从海边一回到家，我就开始研究这个话题，并想出了可能的解决方案。开始时，我的目标不仅是创造一个好的产品，而且将这一经历作为对我的技能的<strong class="ka jc">练习，然而，我不得不审查我的计划几次，因为范围变得要么<strong class="ka jc">太广，一个人完成需要太长时间</strong>，要么最终产品会不那么令人满意(或复制成本太高)。对了，如果你想了解更多关于物联网的知识，这里有<strong class="ka jc">两本我正在读或者已经读过的好书</strong>:<a class="ae kw" href="https://www.wiley.com/en-us/Designing+the+Internet+of+Things-p-9781118430620" rel="noopener ugc nofollow" target="_blank">设计物联网</a>(基础)和<a class="ae kw" href="https://www.packtpub.com/hardware-and-creative/internet-things-architects" rel="noopener ugc nofollow" target="_blank">建筑师物联网</a>(高级)。</strong></p><p id="241a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是一些被放弃的计划:</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ma"><img src="../Images/2bd395b9c9ecbf24fac2cfdd5e72bee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCgta7oGItdICJGNMStPcg.jpeg"/></div></div></figure><ul class=""><li id="99a6" class="mf mg jb ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated"><strong class="ka jc">RaspberryPi和Grove传感器</strong>，两者都非常易于使用，Grove传感器不需要焊接，是原型制作的良好选择。然而，最终的产品太过笨重，整体上很难看，不适合斯堪的纳维亚风格的室内装饰。产品也必须好看。此外，<strong class="ka jc"> RaspberryPi </strong>是一台成熟的电脑，我讨厌设置东西，Arduino和类似的主板有更多我喜欢的即插即用风格。</li><li id="b6d7" class="mf mg jb ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">我想提高我的GoLang技能，并认为在这个项目中使用它可能是一件有趣的事情，但事实证明，Python似乎是这里的王(在RaspberryPi上),大多数传感器库不支持其他语言。我也不得不放弃这个计划，最终，满足于物联网世界中最常见的(也是理智的人的)选择:<strong class="ka jc"> C++ </strong>。</li><li id="2129" class="mf mg jb ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">起初，构建自己的API似乎是一个明智之举——只是我意识到自己做每件事要花多长时间，对我的周末来说太多了。我也考虑过使用AWS IoT或Google Cloud之类的工具，但最终一个完全托管的平台最有意义。</li><li id="bdfb" class="mf mg jb ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">我本来打算只用一些<strong class="ka jc">纸板和胶水来做外壳</strong>，但这并不能真正提供光滑的外观，除非你能生产出谷歌纸板级别的东西。不是我的案子。</li></ul><p id="4119" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来是我经过几个月的尝试后得出的结论，我觉得它很棒。</p><h1 id="4742" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">粒子光子</h1><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/4e09137a9e7d3fb3e1e421179ecb1fe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N7Oh4_Z46HObLF_qBnYXEA.jpeg"/></div></div></figure><p id="72cd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">粒子光子是一项真正令人惊叹的工程。它可以像Arduino一样编程，但它只有信用卡的一半大小，集成了WiFi，在<a class="ae kw" href="https://store.particle.io/products/photon" rel="noopener ugc nofollow" target="_blank">他们的网站</a>或<a class="ae kw" href="https://www.seeedstudio.com/Particle-Photon-SMALL-AND-POWERFUL-WI-FI-CONNECTED-MICROCONTROLLER-p-2527.html" rel="noopener ugc nofollow" target="_blank"> Seeed Studio </a>或<a class="ae kw" href="https://www.kiwi-electronics.nl/photon-met-headers?lang=en" rel="noopener ugc nofollow" target="_blank">这里</a>只需20欧元。</p><p id="ccee" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它的伟大之处在于:</p><ul class=""><li id="aaea" class="mf mg jb ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated"><a class="ae kw" href="https://console.particle.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc">粒子云</strong> </a> <strong class="ka jc">，</strong>一个完全托管的云解决方案，您可以在其中检查电路板的状态，向其发送消息，调用固件中运行的功能，无线更新，一个可以转售给客户的白标门户，集成和认证提供商，以及一个Web-IDE。如果你选择<a class="ae kw" href="https://store.particle.io/collections/cellular" rel="noopener ugc nofollow" target="_blank">任何支持蜂窝的板</a>，你甚至可以在那里管理sim卡。前100台设备完全免费，这真他妈的太棒了。</li><li id="7a2a" class="mf mg jb ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated"><a class="ae kw" href="https://docs.particle.io/reference/developer-tools/cli/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc">粒子CLI </strong> </a> <strong class="ka jc"> </strong>让你设置(这是你要运行的第一个命令)设备的名称、操作系统(一个最小的固件，这样你可以管理板)、WiFi连接和他们的云的授权密钥。还有许多其他命令可用，使您能够编译和刷新固件，或者检查主板中的任何错误。您还可以从资源库中搜索并安装要在您自己的设备中使用的库。</li><li id="41cf" class="mf mg jb ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated"><a class="ae kw" href="https://www.particle.io/workbench/" rel="noopener ugc nofollow" target="_blank"><strong class="ka jc">Particle work bench</strong></a>，一个Visual Studio代码扩展，可以与开发板和CLI无缝协作，允许您从<strong class="ka jc"> IDE做任何事情。</strong></li></ul><p id="cf3b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于它还有很多可以说的，但我只是建议你看看<a class="ae kw" href="https://docs.particle.io" rel="noopener ugc nofollow" target="_blank">粒子文档</a>中的<strong class="ka jc">快速入门/教程/参考</strong>部分。</p><h1 id="d1b0" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">感觉</h1><p id="117e" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">由于上述原因，在抛弃了Grove DHT传感器(<strong class="ka jc"> DHT =数字湿度和温度</strong>)之后，我花了几欧元给自己买了一个<strong class="ka jc">宽松版</strong><strong class="ka jc"/>(没有“包装”，以便可以安装在试验板上——一个小的，这个项目有170个引脚)<strong class="ka jc"> </strong>。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/3dc625ae16f16ed85e18fe5ce2c641fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*laxmd4r436doVJEhYUgHKg.png"/></div></figure><p id="9a81" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">布线是直截了当的，但注意不要颠倒Vcc和GND，因为传感器会爆炸起火(我知道，因为它发生了两次)。根据数据手册，<strong class="ka jc">数据引脚</strong>上还需要一个上拉电阻——我目前没有使用，也没有遇到任何问题，但我不是电子工程师，我可能错得很离谱。</p><p id="5ad5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">重要的是，DHT11传感器(我正在使用的)<strong class="ka jc">不是很精确</strong>，温度可能会相差2度(与DHT22相反，DHT 22更贵、更大、更精确)。</p><h1 id="06fd" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">围场</h1><p id="4cdc" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我最近买了一台3D打印机(这个话题你可以<strong class="ka jc">在这里阅读更多</strong>关于<a class="ae kw" href="https://medium.com/@lucavallin/getting-started-with-3d-printing-7115f1aa87f8" rel="noopener">的内容)，这样我就可以用一个更复杂的盒子代替纸板和胶水的盒子，我可以在</a><a class="ae kw" href="https://www.thingiverse.com/thing:1994442" rel="noopener ugc nofollow" target="_blank"> Thingiverse </a>上找到这个盒子。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mv"><img src="../Images/3a833c13bcced8c65c7dc0e818e18916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ck5fdbEbPcfLRIYefMqUw.jpeg"/></div></div></figure><p id="7bef" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它的设计正好适合粒子光子和我的试验板，为USB电缆、通风和检查板上的状态LED留下了孔。我发现的唯一问题是，由于微控制器的原因，<strong class="ka jc">里面的空气比外面的</strong>要热一点，所以测量是不现实的。这可能会通过固件调整或增加更多的<strong class="ka jc">通风</strong>来解决。</p><p id="2957" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">无论如何，打印两个部分(底座和卡扣式盖子)<strong class="ka jc">需要大约两个小时，并且不需要支架</strong>，即使是侧面的开口。封面最好是上下颠倒印刷，尽管这会影响封面的质量——封面也有点太薄，容易翘曲。</p><h1 id="b47e" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">布林克</h1><p id="f572" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://blynk.io/" rel="noopener ugc nofollow" target="_blank"> Blynk </a>是一个与硬件无关的物联网平台，具有可定制的移动应用、私有云、设备管理、分析和机器学习。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/b9d3ec394c5cd890c2f1dbbe416418c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*M00CObimWiUSIAoIibftyA.jpeg"/></div></figure><p id="e72f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它为构建联网设备提供了完整的解决方案，我选择它是因为它非常适合与tom一起工作，而且<strong class="ka jc">你可以在几个小时内准备好一个完美的应用</strong>，包括所有部分——我真的想不出更完整的概念。此外，还支持多种电路板和语言。</p><ul class=""><li id="08b4" class="mf mg jb ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated"><strong class="ka jc"> Blynk应用</strong>可以从App Store和谷歌Play商店下载。您需要创建一个新项目，选择您希望使用的板，然后您将能够从广泛的组件中选择创建一个仪表板。每个组件都可以以多种方式进行配置，例如你可以定制标签和颜色，但最重要的是，<strong class="ka jc">设备上的引脚</strong>，它将从该引脚获取输入或提供输出(稍后将详细介绍)。他们还提供<strong class="ka jc">白标计划</strong>，所以你可以创建和销售一个基于Blynk的应用程序作为你的产品。</li><li id="78de" class="mf mg jb ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated"><a class="ae kw" href="https://github.com/blynkkk/blynk-library" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> Blynk库</strong> </a> <strong class="ka jc"> </strong>(这里是C++版本)提供了你在应用和设备之间交换消息所需的所有工具。你需要一个<strong class="ka jc">认证令牌(当你创建一个新项目时通过电子邮件提供)</strong>来连接，其他的都在这里解释:<a class="ae kw" href="http://docs.blynk.cc/#blynk-firmware" rel="noopener ugc nofollow" target="_blank">http://docs.blynk.cc/#blynk-firmware</a>。关于Blynk最令人印象深刻的事实是，你可能<strong class="ka jc">最终根本不写任何代码</strong>，读取指令可以在应用程序中配置，一旦客户端在设备上启动，它将自动获取并运行那个<strong class="ka jc">配置</strong>。在这里阅读:http://docs.blynk.cc/#blynk-main-operations-virtual-pins。</li></ul><figure class="mb mc md me gt is gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/658ca9e4ca4f5d9fe28a191f88ba13fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*k26bIZdpPZ5p2-J3ZD4zrQ.png"/></div></figure><ul class=""><li id="623f" class="mf mg jb ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated"><a class="ae kw" href="http://docs.blynk.cc/#blynk-server" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> Blynk服务器</strong> </a> <strong class="ka jc"> </strong>处理与设备之间的通信，您可以使用他们的(有限制，小工具有价格，您也可以免费使用3或4个)或托管您自己的，以访问<strong class="ka jc">无限的组件</strong>。</li></ul><h1 id="048e" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">固件</h1><p id="c800" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">最后，这里是设备固件的样子。首先，确保您在Visual Studio代码中安装了<strong class="ka jc"> Particle Workberch </strong>扩展，并将<em class="my"> project.properties </em>文件放入项目目录(<strong class="ka jc"/><strong class="ka jc">目录结构遵循一组规则</strong>，这些规则有助于保持所有粒子固件的标准和易于理解，请参见此处的文档:<a class="ae kw" href="https://docs.particle.io/tutorials/developer-tools/cli/#working-with-projects-and-libraries" rel="noopener ugc nofollow" target="_blank">https://docs . Particle . io/tutorials/developer-tools/CLI/# working-with-projects-and-libraries</a></p><pre class="mb mc md me gt mz na nb nc aw nd bi"><span id="e436" class="ne ky jb na b gy nf ng l nh ni">name=hytta<br/>dependencies.blynk=0.5.4<br/>dependencies.PietteTech_DHT=0.0.9</span></pre><p id="f036" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该配置除了设置项目名称之外，还定义了两个依赖项，Blynk和从DHT 传感器读取的库。</p><p id="0a91" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">让我们来看看。现在的ino文件:</strong></p><pre class="mb mc md me gt mz na nb nc aw nd bi"><span id="1803" class="ne ky jb na b gy nf ng l nh ni">#include "PietteTech_DHT.h"<br/>#include &lt;blynk.h&gt;<br/><br/>// Setup Blynk serial output for debug prints and auth<br/>// (get the auth token in the Blynk app project settings)<br/>#define BLYNK_PRINT Serial<br/>char blynkAuth[] = "";<br/>BlynkTimer timer;<br/><br/>// Setup DHT sensor DHT11/21/22/AM2301/AM2302 and digital pin (D0 cannot be used)<br/>#define DHTTYPE DHT11<br/>#define DHTPIN D4<br/>PietteTech_DHT DHT(DHTPIN, DHTTYPE);</span></pre><p id="20e9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里我包括了两个库并设置了Blynk客户端，这需要我之前提到的<strong class="ka jc"> auth token </strong>。创建一个BlynkTimer对象，这将用于<strong class="ka jc">定期调用我的读取和发送数据功能</strong>。最后，DHT阅读器按照库文档的规定进行设置(并避免引脚D0，因为它不支持中断，所以与PietteTech_DHT不兼容<strong class="ka jc">。</strong></p><pre class="mb mc md me gt mz na nb nc aw nd bi"><span id="83eb" class="ne ky jb na b gy nf ng l nh ni">void setup()<br/>{<br/>  Serial.begin(9600);<br/>  delay(5000);<br/>  // Read sensor once per minute<br/>  timer.setInterval(60000L, readDHT);<br/>  Blynk.begin(blynkAuth);<br/>  DHT.begin();<br/>}</span></pre><p id="7ba5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">设置功能</strong>建立串行通信，并在向定时器分配运行功能(每分钟一次)后，初始化Blynk客户端和DHT阅读器。</p><p id="0c4c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">分配给定时器的readDHT函数如下:</strong></p><pre class="mb mc md me gt mz na nb nc aw nd bi"><span id="ec09" class="ne ky jb na b gy nf ng l nh ni">// Blynk currently handles the waiting time, if this wasn't the case it would be<br/>// a good rule to wait ~2500ms between each read according to the PietteTech_DHT library<br/>void readDHT()<br/>{<br/>  int result = DHT.acquireAndWait(1000);<br/><br/>  switch (result)<br/>  {<br/>  case DHTLIB_OK:<br/>    Serial.println("OK");<br/>    Particle.publish("status", "OK", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_CHECKSUM:<br/>    Serial.println("Error\n\r\tChecksum error");<br/>    Particle.publish("status", "Checksum error", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_ISR_TIMEOUT:<br/>    Serial.println("Error\n\r\tISR time out error");<br/>    Particle.publish("status", "ISR time out error", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_RESPONSE_TIMEOUT:<br/>    Serial.println("Error\n\r\tResponse time out error");<br/>    Particle.publish("status", "Response time out error", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_DATA_TIMEOUT:<br/>    Serial.println("Error\n\r\tData time out error");<br/>    Particle.publish("status", "Data time out error", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_ACQUIRING:<br/>    Serial.println("Error\n\r\tAcquiring");<br/>    Particle.publish("status", "Acquiring", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_DELTA:<br/>    Serial.println("Error\n\r\tDelta time too small");<br/>    Particle.publish("status", "Delta time too small", PRIVATE);<br/>    break;<br/>  case DHTLIB_ERROR_NOTSTARTED:<br/>    Serial.println("Error\n\r\tNot started");<br/>    Particle.publish("status", "Not started", PRIVATE);<br/>    break;<br/>  default:<br/>    Serial.println("Unknown error");<br/>    Particle.publish("status", "Unknown error", PRIVATE);<br/>    break;<br/>  }<br/><br/>  // Get temperature and humidity, then send some data to serial<br/>  // and the Particle cloud for debugging<br/>  float temperature = DHT.getCelsius();<br/>  Serial.print("Temperature (oC): ");<br/>  Serial.println(temperature, 2);<br/>  Particle.publish("temperature", String(temperature), PRIVATE);<br/><br/>  float humidity = DHT.getHumidity();<br/>  Serial.print("Humidity (%): ");<br/>  Serial.println(humidity, 2);<br/>  Particle.publish("humidity", String(humidity), PRIVATE);<br/><br/>  // Send data to the Blynk API<br/>  Blynk.virtualWrite(0, temperature);<br/>  Blynk.virtualWrite(1, humidity);<br/>}</span></pre><p id="5af5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，它从DHT传感器获取数据，处理一些“坏的”(和好的)结果，<strong class="ka jc">然后获得实际数据</strong>，连同一些调试信息，通过串行发送到带有<strong class="ka jc"><em class="my">Particle . publish</em></strong>的粒子云。在底部，我使用virtualWrite方法将值写入Blynk的虚拟引脚(当Blynk无法根据配置直接读取模拟/数字引脚<strong class="ka jc">但需要更多处理时，用于替代模拟/数字引脚<strong class="ka jc">，就像在这种情况下使用读取逻辑一样)。</strong></strong></p><p id="a9c9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">最后，这是循环:</strong></p><pre class="mb mc md me gt mz na nb nc aw nd bi"><span id="5731" class="ne ky jb na b gy nf ng l nh ni">void loop()<br/>{<br/>  Blynk.run();<br/>  timer.run();<br/>}</span></pre><p id="d86b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Blynk和timer上调用<strong class="ka jc"> run </strong>方法，该方法将负责<strong class="ka jc">处理与Blynk服务器</strong>的通信，并按照规定读取温度和湿度值。</p><p id="2693" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要让它真实，你需要编译固件，把粒子光子放在<a class="ae kw" href="https://docs.particle.io/tutorials/device-os/led/photon/#dfu-mode-device-firmware-upgrade-" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> DFU模式</strong> </a>然后闪一下。过一会儿，你应该开始看到数据进入Blynk应用程序(和粒子云中)。</p><h1 id="fd64" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">一锤定音</h1><p id="3601" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">从那天在海滩上开始，这是一段相当长的旅程，我学到了很多关于物联网、足球和传感器的知识。我再次认识到<strong class="ka jc">坚持最普通的路径</strong>(如在C++和微控制器中)可以非常有助于实现更好的结果，而没有不必要的复杂性，毕竟如果大多数人都这样做是有原因的。</p><figure class="mb mc md me gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/88944b722b2d6351838c61c3cc3402b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_HHYN-KVmrppr_qj_CcRg.png"/></div></div></figure><p id="2b3d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">传感器可能看起来像神秘的物体，但最终它们被证明只是能够感知世界的<strong class="ka jc">电子设备，这要归功于明确定义的物理现象</strong>(如果你不在这个过程中烧掉它们)。</p><p id="1fb3" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">整个项目中最大的推动者是Blynk，如果没有他，我会有太多的事情要做。与设备之间的通信、存储数据和在赏心悦目的仪表板中显示听起来像是一个提高技能的好挑战，但对一个人来说这真的需要很长时间。</p><p id="4a99" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3D打印我自己的外壳<strong class="ka jc">也非常令人满意</strong>，这是我第一次能够完成一个看起来(几乎)像是在商店里买的真实世界的物理设备——很神奇吧？</p><p id="ded8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望你喜欢这个故事，也希望这篇文章能激励你创造出属于你自己的东西😃</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="f685" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc"> <em class="my">想了解更多关于物联网和创新的知识？退房</em></strong><a class="ae kw" href="https://www.linkedin.com/in/lucavallin/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/lucavallin/</a></p></div></div>    
</body>
</html>