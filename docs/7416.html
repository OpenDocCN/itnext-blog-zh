<html>
<head>
<title>Sign Git Commits</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">签署Git提交</h1>
<blockquote>原文：<a href="https://itnext.io/sign-git-commits-7518318b804a?source=collection_archive---------3-----------------------#2022-09-16">https://itnext.io/sign-git-commits-7518318b804a?source=collection_archive---------3-----------------------#2022-09-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f2cd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Linux或Mac上，使用GitHub</h2></div><p id="5aed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Git周刊 #19 <br/>等级:高级🥇</p><p id="e714" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Git是一个非常灵活的工具。它允许一个人使用任何他们想要的名字。因此，举例来说，一个人可能犯了一个错误的代码，并将其归咎于他人。</p><p id="e4a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">主文:</em> <a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/git-change-author-709783e69626"> <em class="lf"> Git:改作者</em> </a></p><p id="58e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么，如何确定提交是真实的并且有一个经过验证的作者呢？签字就行了。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/39f391b91bbd4ceee616a817b7868443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1k98Tg2dja_vkX1uyFt3RA.png"/></div></div></figure><h1 id="9308" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">说明</h1><p id="1d20" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">签名提交是使用GNU隐私卫士，简称GPG完成的。</p><h2 id="0128" class="mp lt it bd lu mq mr dn ly ms mt dp mc kr mu mv me kv mw mx mg kz my mz mi na bi translated">安装GNU隐私保护，GPG</h2><p id="fe64" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">为了能够签署提交，需要首先安装<code class="fe nb nc nd ne b">gpg</code>软件。在Ubuntu上:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="2314" class="mp lt it ne b gy nj nk l nl nm">sudo apt-get install gpa seahorse</span></pre><p id="d31b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Mac上:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="7943" class="mp lt it ne b gy nj nk l nl nm">brew install gpg</span></pre><p id="4f53" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该包很可能适用于其他Linux发行版的本机包管理器。底线是，人们可以在Linux上安装自制软件。</p><h2 id="7bc3" class="mp lt it bd lu mq mr dn ly ms mt dp mc kr mu mv me kv mw mx mg kz my mz mi na bi translated">生成新的GPG键</h2><p id="36de" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">现在，生成一个密钥:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="6c13" class="mp lt it ne b gy nj nk l nl nm">gpg --gen-key</span></pre><p id="340c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该软件将要求您的姓名和电子邮件地址。请确保输入在您的GitHub帐户上验证过的电子邮件地址。如果你想保持你的电子邮件地址的私密性，你可以使用你的GitHub不回复邮件地址。</p><p id="b436" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后会出现一个提示，要求输入密码以保护您的密钥。两次输入一。</p><p id="4dc7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，看看你的钥匙:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="f968" class="mp lt it ne b gy nj nk l nl nm">gpg --list-secret-keys --keyid-format=long</span></pre><p id="5d44" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输出应该是这样的:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="4531" class="mp lt it ne b gy nj nk l nl nm">/home/mohammad/.gnupg/pubring.kbx <br/>------------------------------ <br/>sec   rsa3072/<strong class="ne iu">3AA5C34371567BD2</strong> 2022-09-15 [SC] [expires: 2024-09-14] <br/>      659FF1F3B51AD9F677276E4BC0C2F9C91A262A2D <br/>uid                 [ultimate] Mohammad-Ali A'râbi &lt;44623032+aerabi@users.noreply.github.com&gt; <br/>ssb   rsa3072/42B317FD4BA89E7A 2022-09-15 [E] [expires: 2024-09-14]</span></pre><p id="7b39" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者像这样:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="def1" class="mp lt it ne b gy nj nk l nl nm">/Users/mohammad/.gnupg/secring.gpg<br/>------------------------------------<br/>sec   4096R/<strong class="ne iu">3AA5C34371567BD2</strong> 2016-03-10 [expires: 2017-03-10]<br/>uid                          Mohammad &lt;me@example.com&gt;<br/>ssb   4096R/42B317FD4BA89E7A 2016-03-10</span></pre><p id="9a6f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">无论哪种方式，关键是斜线之后和日期之前的部分(粗体)。复制它并把它交给下面的命令。</p><p id="4b7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们需要告诉git我们使用这个密钥来签署提交:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="80fe" class="mp lt it ne b gy nj nk l nl nm">git config --global user.signingkey <strong class="ne iu">3AA5C34371567BD2</strong></span></pre><p id="12ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二，我们需要导出密钥，以便稍后可以将其提供给GitHub:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="bbc5" class="mp lt it ne b gy nj nk l nl nm">gpg --armor --export <strong class="ne iu">3AA5C34371567BD2</strong></span></pre><p id="55e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保用您自己的密钥替换此命令中的密钥。这个命令显示了一个以<code class="fe nb nc nd ne b">-----BEGIN PGP PUBLIC KEY BLOCK-----</code>开始，以<code class="fe nb nc nd ne b">-----END PGP PUBLIC KEY BLOCK-----</code>结束的密钥。复制它。您也可以将它存储在一个文件中进行安全保管:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="bdb5" class="mp lt it ne b gy nj nk l nl nm">gpg --armor --export <strong class="ne iu">3AA5C34371567BD2</strong> &gt; gpg-key.txt</span></pre><h2 id="1338" class="mp lt it bd lu mq mr dn ly ms mt dp mc kr mu mv me kv mw mx mg kz my mz mi na bi translated">将GPG密钥添加到GitHub帐户</h2><p id="b608" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">下一步是将GPG密钥保存在你的GitHub账户中。进入你的设置中的按键部分:<a class="ae le" href="https://github.com/settings/keys" rel="noopener ugc nofollow" target="_blank">https://github.com/settings/keys</a></p><p id="965e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">点击“新GPG密钥”，将密钥(以<code class="fe nb nc nd ne b">-----BEGIN PGP PUBLIC KEY BLOCK-----</code>开头，以<code class="fe nb nc nd ne b">-----END PGP PUBLIC KEY BLOCK-----</code>结尾的那个)粘贴到大文本区，给它起个名字，然后点击“添加GPG密钥”。</p><h2 id="32e9" class="mp lt it bd lu mq mr dn ly ms mt dp mc kr mu mv me kv mw mx mg kz my mz mi na bi translated">创建您的第一个签名提交</h2><p id="d716" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">进行一些更改，准备好它们，然后提交并传递<code class="fe nb nc nd ne b">-S</code>标志:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="8d0a" class="mp lt it ne b gy nj nk l nl nm">git commit -S -m ":pencil: Add alt text for the header images"</span></pre><p id="9c2d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">操作系统会询问您在开始时设置的密码。输入它。答对了。🎉</p><p id="fd5c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要检查签名，请使用以下命令:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="3e16" class="mp lt it ne b gy nj nk l nl nm">git log --show-signature</span></pre><p id="c90e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输出将类似于以下内容:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="9061" class="mp lt it ne b gy nj nk l nl nm">commit 79db00a5d6724ebf304b268bd696c03aafcdd232 (<strong class="ne iu">HEAD -&gt; master</strong>, <strong class="ne iu">origin/master</strong>, <strong class="ne iu">origin/HEAD</strong>)<br/>gpg: Signature made Do 15 Sep 2022 23:18:52 CEST <br/>gpg:                using RSA key 659FF133B51AA9F677276E4BC1D2F9C91A262A2D <br/>gpg: Good signature from "Mohammad-Ali A'râbi &lt;me@example.com&gt;" [ultimate] <br/>Author: Mohammad-Ali A'râbi &lt;me@example.com&gt; <br/>Date:   Thu Sep 15 23:15:54 2022 +0200 <br/> <br/>    :pencil: Add alt text for the header images</span></pre><p id="279b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你提交，GitHub会给它添加一个“已验证”的徽章:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/c9d25100e6c294fedffd3a85aee71da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*owutUBEsg443CE1CaapvBA.png"/></div></figure><h1 id="360e" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">遗言</h1><p id="8902" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">要告诉git默认签署提交(不通过<code class="fe nb nc nd ne b">-S</code>)，设置以下配置:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="7de8" class="mp lt it ne b gy nj nk l nl nm">git config --global commit.gpgSign true</span></pre><p id="e8e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要签署一个标签，你应该通过一个小的<code class="fe nb nc nd ne b">-s</code>:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="2912" class="mp lt it ne b gy nj nk l nl nm">git tag -s v1.5</span></pre><p id="455a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使标签自动化:</p><pre class="lh li lj lk gt nf ne ng nh aw ni bi"><span id="12cf" class="mp lt it ne b gy nj nk l nl nm">git config --global tag.gpgSign true</span></pre><p id="ecd1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，你可以在git提交消息中添加表情符号。😅</p><p id="d44b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我每周都会在git上写一篇博文。</p><ul class=""><li id="fb5c" class="no np it kk b kl km ko kp kr nq kv nr kz ns ld nt nu nv nw bi translated"><a class="ae le" href="https://medium.com/subscribe/@aerabi" rel="noopener">订阅</a>my Medium publishes，以便在新一期Git周刊出版时获得通知。</li><li id="1e99" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated">在Twitter 上关注<a class="ae le" href="https://twitter.com/MohammadAliEN" rel="noopener ugc nofollow" target="_blank">我，了解更多其他平台上发布的更新和文章。</a></li></ul><h1 id="bb57" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">参考</h1><ul class=""><li id="3852" class="no np it kk b kl mk ko ml kr oc kv od kz oe ld nt nu nv nw bi translated">沙孔、史考特和本·施特劳布。“7.4 Git工具—签署您的作品”。亲Git。</li><li id="28fe" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" href="https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-gpg-key-to-your-github-account" rel="noopener ugc nofollow" target="_blank"> GitHub文档:给你的GitHub账户添加GPG密钥</a></li><li id="9337" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" href="https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key" rel="noopener ugc nofollow" target="_blank"> GitHub文档:生成新的GPG密钥</a></li><li id="8ebf" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" href="https://docs.github.com/en/authentication/managing-commit-signature-verification/signing-commits" rel="noopener ugc nofollow" target="_blank"> GitHub文档:签名提交</a></li><li id="4ebe" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" href="https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key" rel="noopener ugc nofollow" target="_blank"> GitHub Docs:告诉Git你的签名密钥</a></li><li id="113d" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" href="https://gist.github.com/ankurk91/c4f0e23d76ef868b139f3c28bde057fc#github--signing-commits-using-gpg-ubuntumac-closed_lock_with_key" rel="noopener ugc nofollow" target="_blank">库马尔，安库尔。Github:使用GPG签署提交(Ubuntu/Mac) </a></li></ul></div></div>    
</body>
</html>