<html>
<head>
<title>Powerful JS Reduce Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">强大的JS Reduce功能</h1>
<blockquote>原文：<a href="https://itnext.io/powerful-js-reduce-function-58cf47edcb8?source=collection_archive---------0-----------------------#2019-09-23">https://itnext.io/powerful-js-reduce-function-58cf47edcb8?source=collection_archive---------0-----------------------#2019-09-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cdf9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你可以用它来解决任何与数据相关的问题</h2></div><p id="7803" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了ES6 Javascript和更高版本，现在你可以在一个数组上<em class="le">映射</em>、<em class="le">过滤</em>、<em class="le">减少</em>、<em class="le">排序</em>、<em class="le">展平</em>等等。这真的很简单明了，简洁而优雅。</p><p id="ca79" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但有时候，这个榜单的大未知数就是<em class="le">减</em>。</p><blockquote class="lf lg lh"><p id="f082" class="ki kj le kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">你可能还不知道这种方法的威力，让我们来看看。</p></blockquote><p id="4ff3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也许你认为“缩小”一个数组的唯一方法是把它变成“更小”的东西，比如一个数字，或者一个字符串。例如:</p><ul class=""><li id="01a5" class="ll lm it kk b kl km ko kp kr ln kv lo kz lp ld lq lr ls lt bi translated">如果我有数组<em class="le"> [ 1，2，3 ] </em>，我可以通过对其各项求和来减少它，因此<strong class="kk iu"> 1 + 2 + 3 = 6 </strong>，或者通过将它们相乘，因此<strong class="kk iu"> 1 * 2 * 3 = 6 </strong>，或者通过简单地将数字连接成字符，因此字符串<strong class="kk iu"> "123" </strong>。</li></ul><p id="6f52" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，实际上reduce非常强大，可以完成任何数据转换。你可以从<em class="le">数组</em>到<em class="le">数组</em>，<em class="le">数组</em>到<em class="le">编号</em>，<em class="le">数组</em>到<em class="le">对象</em>，<em class="le">对象</em>到<em class="le">数组</em>，或者真的是你能想象到的任何东西。</p><blockquote class="lf lg lh"><p id="d9de" class="ki kj le kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">所以，我要说“<strong class="kk iu"> reduce </strong>”这个名字并没有让它变得公正。名字应该是"<strong class="kk iu"> transform </strong>"然后，在你的脑海中，你总是确定这个函数可以用在很多更多的上下文中。</p></blockquote><p id="9711" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们现在将查看一些代码示例，让我们深入了解它们！</p><h2 id="872d" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">示例集1:总和、和积和最大值</h2><p id="bbf4" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">这个例子代表了思考reduce的“传统方式”。在以下每个示例中，您实际上是在将一个数组简化为一个数字:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/5740d5a66c1246754e5ad9e1c95b9acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*HVK3PBo-oP3TQ20d8r2rLw.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">用REDUCE实现的Sum、SumProduct和Max数</figcaption></figure><p id="bd6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台显示:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/eebd61eb57f499f354f6547b60ccbeff.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*kPQe9Xyn4yRoOuVkfUBadQ.png"/></div></figure><p id="b771" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，只是简单解释一下每个例子:</p><ul class=""><li id="4fa7" class="ll lm it kk b kl km ko kp kr ln kv lo kz lp ld lq lr ls lt bi translated"><strong class="kk iu">求和</strong>:从0开始，取每个元素，求和得到累加值。</li><li id="a0bc" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu"> SumProduct </strong>:从0开始，取每一对(数和因子)，将数*因子求和到累加值中。</li><li id="e539" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu"> MaxNumber </strong>:从零开始，如果没有累加，则返回第一个元素，如果大于累加，则返回数字，否则返回累加值。</li></ul><h2 id="1a1c" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">示例集2:映射、过滤器、过滤器和映射以及平面映射</h2><p id="cbcb" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">现在，我们更进一步，实际实现经典的映射、过滤、过滤然后映射(其他顺序也是可能的)和平面映射函数。所有这些实际上都是reduce(“aka transform”)的子集。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi no"><img src="../Images/9df628abf131e5b8088bae9059167f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*erRJyD0vTCujmBI7yGT-VQ.png"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">使用REDUCE实现的映射、过滤、过滤和映射以及平面映射</figcaption></figure><p id="9322" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台显示:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi np"><img src="../Images/776cf1a92221390804ca87a67189d4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*rtZJ9bQ0vIvyp5MEPmeVaA.png"/></div></div></figure><p id="3ebe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每个示例的简要说明:</p><ul class=""><li id="1db3" class="ll lm it kk b kl km ko kp kr ln kv lo kz lp ld lq lr ls lt bi translated"><strong class="kk iu"> Map </strong>:从一个空数组开始，取一个数组和一个函数，返回累加的值加上应用了函数的当前元素。</li><li id="4fe1" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu"> Filter </strong>:从一个空数组开始，对当前元素进行函数求值，如果<strong class="kk iu">为假</strong>，就返回累加值(所以跳过这个元素)，否则返回累加值加上当前元素。</li><li id="a4a4" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu"> FilterMap </strong>:取一个数组，一个用作过滤器的函数，一个要映射的函数，将前两个过程结合起来。</li><li id="495c" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu"> FlatMap </strong>:从一个空数组开始，取一个数组和一个函数，如果元素本身是一个数组，则将结果分布到累计值上，否则，只返回累计值加上应用了函数的当前元素。</li></ul><h2 id="496c" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">示例集3:唯一、排序和反转</h2><p id="2452" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">这也是可以用reduce实现的非常有用的函数。与本机函数相比，由<em class="le">数组提供的最大优势。原型</em>，如果你愿意，你可以在一个步骤中组合多个转换…但实际上，这个例子的目的只是向你展示reduce函数的更多功能:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/a69b2617c762bd258fa177ebd6459186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*u7I6B43Br09woU_9tbM-5A.png"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">使用REDUCE实现唯一、排序和反向</figcaption></figure><p id="8088" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台显示:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/d1162f0bb23bf00ede6c442687ae57bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*FkJ6Ijqr1ATB4D_bgqwJyg.png"/></div></figure><p id="9a67" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每个示例的简要说明:</p><ul class=""><li id="4ffd" class="ll lm it kk b kl km ko kp kr ln kv lo kz lp ld lq lr ls lt bi translated"><strong class="kk iu"> Unique </strong>:从一个空数组开始，取一个元素，检查它是否已经在累加值中。如果存在，只返回累计值(所以跳过它)，否则返回累计值加上元素。</li><li id="bc9d" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu">排序</strong>:从一个空数组开始，将累加值分成2个集合:元素“小于等于当前值”的集合和元素“大于当前值”的集合。因此，在这之后，只需返回当前元素“在中间”的两个集合。</li><li id="a84c" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu">倒车</strong>:有了ES6，一切都很简单。只需返回值并追加累加值，这样每次迭代的最后一个元素将总是在数组的第一个位置。</li></ul><h2 id="28b4" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">示例集4:对象到数组和数组到对象</h2><p id="01e6" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果减少的同义词“转化”还不清楚的话，从这一点来看确实是显而易见的。有时你需要将一个数组转换成一个对象，反之亦然。可以用什么功能？是啊！减少！</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ns"><img src="../Images/c87d5458f503b88ece09a80914dfb1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*EIP50dEO4aX9fVNXJ8grzg.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">用REDUCE实现的对象到数组和数组到对象</figcaption></figure><p id="ea3d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台显示:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/37c115f71ef5c276b646eef98a820ecb.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*Mp40pBx975r1CyN4qngfKw.png"/></div></figure><p id="90ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每个示例的简要说明:</p><ul class=""><li id="b077" class="ll lm it kk b kl km ko kp kr ln kv lo kz lp ld lq lr ls lt bi translated"><strong class="kk iu"> Object To Array </strong>:从一个空数组开始，遍历对象键(也是一个数组)。对于每个键，也取值(<em class="le"> object[key] </em>)并返回累加值加上<em class="le"> object { key: value } </em>。也许这个例子看起来不是很有用，但是如果您想象您正在使用React呈现一个列表，并且将对象信息作为一个数组是很方便的，那么这个例子就很有用。</li><li id="26ce" class="ll lm it kk b kl nj ko nk kr nl kv nm kz nn ld lq lr ls lt bi translated"><strong class="kk iu">数组到对象</strong>:从一个空对象开始，遍历数组返回一个对象，其中<em class="le"> id </em>字段作为对象的第一级字段，其余字段作为其内容。当您需要将包含实体信息(由id表示)的多个数组分组，并在单个对象中返回所有内容以供进一步处理时，这有时很有用。</li></ul></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="cc3f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，reduce函数可以以一种更传统的方式看起来更像一个流程:INPUT =&gt; PROCESS =&gt; OUTPUT</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ob"><img src="../Images/96ebe5e7b44728d6c6a49f811f685515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oyQOZXOc81XYin-_Ta9QnA.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">还原功能为“传统流程”</figcaption></figure><h2 id="8a0f" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">好处1:减少实际上是增加！</h2><p id="90a3" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">假设您不需要有单个数字作为结果，或者相同的原语，或者甚至相同数量的输入元素，您可以使用<strong class="kk iu"> <em class="le"> reduce </em> </strong>向您的输入数据实际添加新元素。</p><p id="9cdf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个真实世界的例子(简化的),你有一个以某种方式分类的元素列表，你想要显示它们，但是插入一些标题来指示类别。</p><p id="dbe3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi oc"><img src="../Images/cfbd5275d96e010a319a25a8aa9948eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLMLCWgMIgi82bb1rkuawA.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">用部分(作为分隔符/副标题)扩充的元素列表</figcaption></figure><p id="7355" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台显示:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ff920233afa3acdd4d0ca7303cc75028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*JSAcKcd_rPTn4OUWv_p96g.png"/></div></figure><p id="b7c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，您通过组合不同的数据原语来“生成”一个新的列表。当然，没有限制。它可以是任意数量的实体，这些实体可以组合成一个列表，准备传递给DOM进行呈现。</p><h2 id="ab3e" class="lu lv it bd lw lx ly dn lz ma mb dp mc kr md me mf kv mg mh mi kz mj mk ml mm bi translated">好处2:使用reduce处理承诺链(按顺序)</h2><p id="3947" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我发现reduce的另一个非常有用的用法是确保顺序性。当您处理一个承诺链时，通常您需要前一个承诺的结果作为下一个承诺的输入，以此类推。</p><p id="89d5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">化险为夷！</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/7a8e10dcf768abaeae02f490ddcaa243.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*MGrYG86S-pb1cyrXR2CIqg.png"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">承诺链(按顺序),其中每个步骤的结果用作下一步的输入</figcaption></figure><p id="2214" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">控制台显示:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi of"><img src="../Images/7f21d3b051ad4499596a9cd49caa9f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bYjkWXq9GxDCy_AxEVnuAw.png"/></div></div></figure></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="14d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以就此打住。</p><p id="5587" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有的例子都在这个<a class="ae og" href="https://jsfiddle.net/jmaguirrei/yhmvap5o/82/" rel="noopener ugc nofollow" target="_blank"> JS提琴</a></p><p id="3799" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望现在你有更多的想法来使用<strong class="kk iu"> <em class="le"> reduce </em> </strong>在你的项目中产生可读和优雅的代码！</p><p id="1bfb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来自智利<a class="ae og" href="https://emojipedia.org/flag-for-chile/" rel="noopener ugc nofollow" target="_blank"> 🇨🇱 </a>的欢呼！！</p></div></div>    
</body>
</html>