<html>
<head>
<title>Swift UIView lovely animation and transition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速UIView可爱的动画和过渡</h1>
<blockquote>原文：<a href="https://itnext.io/swift-uiview-lovely-animation-and-transition-d34bd623391f?source=collection_archive---------0-----------------------#2019-01-05">https://itnext.io/swift-uiview-lovely-animation-and-transition-d34bd623391f?source=collection_archive---------0-----------------------#2019-01-05</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="e839" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi kp translated">为了改善整体用户体验，操作系统应用程序通常使用大量平滑的动画来使应用程序看起来更漂亮。大量的iOS默认小部件已经用UIKit动画实现了。例如，在UINavigationController中的页面之间转换时的动画，呈现UIViewController和显示系统键盘等。同时，苹果开放UIView动画API，供开发者轻松创建自定义动画。让我们简单看一下那些默认动画是什么样子的。</p><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj ky"><img src="../Images/53ca052ba752b590c94d1683904f1e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*UIHVORThx4xmKdrKxLOiqA.gif"/></div><figcaption class="lg lh gk gi gj li lj bd b be z dk translated">曲线和过渡动画</figcaption></figure><figure class="kz la lb lc gu ld"><div class="bz fq l di"><div class="lk ll l"/></div></figure><h1 id="7960" class="lm ln iu bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">曲线动画</h1><p id="8ac4" class="pw-post-body-paragraph jr js iu jt b ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko in bi translated">UIKit中总共有4个常用的曲线动画选项，每个选项在不同的时间帧中的速度都不同。</p><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj mp"><img src="../Images/cbfc8f33b0d3595d73debd1475756b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*95ZrNaIfLtED-yDhEOKBnw.gif"/></div><figcaption class="lg lh gk gi gj li lj bd b be z dk translated">所有动画都有相同的持续时间— 1.0秒</figcaption></figure><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj mq"><img src="../Images/262bdfe1d2139e93249867e4861e4c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*dxuiawfFp_WMfqlcfVIp9A.png"/></div></figure><p id="351b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">下面是相应的描述:<br/> <em class="mr">(如果你已经从上图中得到了主旨，可以跳过😄)</em></p><ol class=""><li id="8437" class="ms mt iu jt b ju jv jy jz kc mu kg mv kk mw ko mx my mz na bi translated"><strong class="jt iv"> curveEaseIn (Blue) <br/> </strong>虽然它的初速度很低，但在<strong class="jt iv">恒定加速度</strong>下，它在终点达到最高速度。</li><li id="d6e0" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated"><strong class="jt iv"> curveEaseOut(红色)<br/> </strong>一个<code class="fe ng nh ni nj b">curveEaseIn</code>的水平翻转。</li><li id="6313" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated"><strong class="jt iv"> curveEaseInOut(黄色)<br/></strong><code class="fe ng nh ni nj b">curveEaseIn</code>前半段和<code class="fe ng nh ni nj b">curveEaseOut</code>后半段的组合。</li><li id="207c" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated"><strong class="jt iv"> curveLinear(绿色)<br/> </strong>随着<strong class="jt iv">零加速度</strong>，其速度在整个动画中大致保持不变。</li></ol><h2 id="86f5" class="nk ln iu bd lo nl nm dn ls nn no dp lw kc np nq ma kg nr ns me kk nt nu mi nv bi translated">其他曲线动画选项:</h2><ol class=""><li id="62da" class="ms mt iu jt b ju mk jy ml kc nw kg nx kk ny ko mx my mz na bi translated"><strong class="jt iv"> allowUserInteraction </strong>😅！幸运的是，通过设置一个额外的动画选项<code class="fe ng nh ni nj b">allowUserInteraction</code>和原来的曲线动画选项，可以启用交互。见下文:</li></ol><figure class="kz la lb lc gu ld"><div class="bz fq l di"><div class="lk ll l"/></div></figure><p id="223d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">2.<strong class="jt iv">重复</strong></p><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj nz"><img src="../Images/26172f17a697a24952dc3e7ebabcc105.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/1*nhEAIW0bpzO_yg23_IU3ag.gif"/></div></figure><p id="92ce" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">不言自明。简单地无限重复原始动画。要阻止它:</p><figure class="kz la lb lc gu ld"><div class="bz fq l di"><div class="lk ll l"/></div></figure><p id="8541" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">3.<strong class="jt iv">自动反转</strong></p><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj oa"><img src="../Images/92f8aea4a9f035f5ee4436e93d9c2a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/1*YtslW9apEJEEypIc2hnfFA.gif"/></div></figure><ul class=""><li id="016c" class="ms mt iu jt b ju jv jy jz kc mu kg mv kk mw ko ob my mz na bi translated"><code class="fe ng nh ni nj b">autoreverse</code>的定义有点棘手。向前动画与向后动画相反。例如，如果向前动画是<code class="fe ng nh ni nj b">curveEaseIn</code>，向后动画是<code class="fe ng nh ni nj b">curveEaseOut</code>。</li><li id="cf93" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko ob my mz na bi translated">注意，<code class="fe ng nh ni nj b">autoreverse</code>必须与<code class="fe ng nh ni nj b">repeat</code>配合使用，否则反向动画完成后，视图会立即移动到正向动画的原始目的地。</li></ul></div><div class="ab cl oc od hy oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="in io ip iq ir"><h1 id="ade8" class="lm ln iu bd lo lp oj lr ls lt ok lv lw lx ol lz ma mb om md me mf on mh mi mj bi translated">旁注:关注NSLayoutConstraint</h1><p id="a04f" class="pw-post-body-paragraph jr js iu jt b ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko in bi translated">到目前为止，在观看动画的过程中，你还有什么问题吗？🧐</p><pre class="kz la lb lc gu oo nj op oq aw or bi"><span id="1acf" class="nk ln iu nj b gz os ot l ou ov">Q1: What happened to the original leading margin constraint when UIView (e.g. easeInLabel) is horizontally moved? Constantly updating?</span><span id="e7c5" class="nk ln iu nj b gz ow ot l ou ov">Q2: If other views' Auto-Layout constraint is pinned to the position of easeInLabel, will they move at the same time? Will there be any chaos? </span></pre><p id="560e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">苹果公司明确表示，即使有任何转换应用于任何UIView，自动布局也不会更新。这防止了对其他相关UIView的任何重新调整，因此不会发生混乱。</p><blockquote class="ox oy oz"><p id="a4b1" class="jr js mr jt b ju jv jw jx jy jz ka kb pa kd ke kf pb kh ki kj pc kl km kn ko in bi translated">在iOS 8.0及更高版本中，<code class="fe ng nh ni nj b"><em class="iu">transform</em></code>属性不影响自动布局。自动布局根据视图未变换的框架计算视图的对齐矩形。<br/>参考:<a class="ae pd" href="https://developer.apple.com/documentation/uikit/uiview/1622459-transform" rel="noopener ugc nofollow" target="_blank">转换— UIView |苹果开发者文档</a></p></blockquote></div><div class="ab cl oc od hy oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="in io ip iq ir"><h1 id="aecb" class="lm ln iu bd lo lp oj lr ls lt ok lv lw lx ol lz ma mb om md me mf on mh mi mj bi translated">过渡</h1><p id="2fad" class="pw-post-body-paragraph jr js iu jt b ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko in bi translated">共有7个常见的过渡动画选项，可分为3类，由UIKit提供。它们是:</p><ol class=""><li id="0562" class="ms mt iu jt b ju jv jy jz kc mu kg mv kk mw ko mx my mz na bi translated">轻弹</li></ol><ul class=""><li id="dddb" class="ms mt iu jt b ju jv jy jz kc mu kg mv kk mw ko ob my mz na bi translated">transitionFlipFromLeft</li><li id="e824" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko ob my mz na bi translated">transitionFlipFromRight</li><li id="18f0" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko ob my mz na bi translated">过渡触发器</li><li id="da6a" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko ob my mz na bi translated">transitionFlipFromBottom</li></ul><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj pe"><img src="../Images/e6e73b0e1e45fdc8c20c8ed49d822727.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/1*9zj2ubOCcoc3q7q7zKogUw.gif"/></div></figure><p id="3de8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">2.冰上溜石游戏</p><ul class=""><li id="2e69" class="ms mt iu jt b ju jv jy jz kc mu kg mv kk mw ko ob my mz na bi translated">过渡曲线</li><li id="0112" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko ob my mz na bi translated">过渡曲线下降</li></ul><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj pf"><img src="../Images/5d9b756376cd6062455105bc29b72345.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/1*am3lkBTSrIJdfXveA95o1A.gif"/></div></figure><p id="b806" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">3.其他的</p><ul class=""><li id="73b8" class="ms mt iu jt b ju jv jy jz kc mu kg mv kk mw ko ob my mz na bi translated">过渡交叉溶解</li></ul><figure class="kz la lb lc gu ld gi gj paragraph-image"><div class="gi gj oa"><img src="../Images/aa7910fc5e98111e27effdf0cbc0dd83.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/1*G8yoo5BXKxOtaIF2Bk46Cw.gif"/></div></figure><h2 id="c338" class="nk ln iu bd lo nl nm dn ls nn no dp lw kc np nq ma kg nr ns me kk nt nu mi nv bi translated">与其他<code class="fe ng nh ni nj b">UIView.AnimationOptions</code>的组合</h2><p id="af56" class="pw-post-body-paragraph jr js iu jt b ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko in bi translated">过渡动画也可以像之前显示的那样与<code class="fe ng nh ni nj b">allowUserInteraction</code>、<code class="fe ng nh ni nj b">repeat</code>和<code class="fe ng nh ni nj b">autoreverse</code>一起工作。下面是演示代码:</p><figure class="kz la lb lc gu ld"><div class="bz fq l di"><div class="lk ll l"/></div></figure><h1 id="b20a" class="lm ln iu bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">结论</h1><ol class=""><li id="2110" class="ms mt iu jt b ju mk jy ml kc nw kg nx kk ny ko mx my mz na bi translated">动画是让iOS app看起来有吸引力的有力工具！</li><li id="600d" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated">常见的动画有两种，即“曲线动画”和“过渡动画”。</li><li id="0df6" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated">曲线动画选项包括<code class="fe ng nh ni nj b">curveEaseIn</code>、<code class="fe ng nh ni nj b">curveEaseOut</code>、<code class="fe ng nh ni nj b">curveEaseInOut</code>和<code class="fe ng nh ni nj b">linear</code>。它们的初速度和终速度不同。</li><li id="3b0b" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated">过渡选项包括三个主要类别，即<code class="fe ng nh ni nj b">flipping</code>、<code class="fe ng nh ni nj b">curling</code>和<code class="fe ng nh ni nj b">other</code>。所有选项为<code class="fe ng nh ni nj b">transitionFlipFromLeft</code>、<code class="fe ng nh ni nj b">transitionFlipFromRight</code>、<code class="fe ng nh ni nj b">transitionFlipFromTop</code>、<code class="fe ng nh ni nj b">transitionFlipFromBottom</code>、<code class="fe ng nh ni nj b">transitionCurlUp</code>、<code class="fe ng nh ni nj b">transitionCurlDown</code>和<code class="fe ng nh ni nj b">transitionCrossDissolve</code>。</li><li id="a237" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated">曲线动画和过渡动画都可以与其他动画选项配合使用，如<code class="fe ng nh ni nj b">allowUserInteraction</code>、<code class="fe ng nh ni nj b">repeat</code>和<code class="fe ng nh ni nj b">autoreverse</code>。</li><li id="72d1" class="ms mt iu jt b ju nb jy nc kc nd kg ne kk nf ko mx my mz na bi translated">对于<code class="fe ng nh ni nj b">autoreverse</code>，必须将<strong class="jt iv">与<code class="fe ng nh ni nj b">repeat</code>设置在一起，否则会产生奇怪的动画。</strong></li></ol></div><div class="ab cl oc od hy oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="in io ip iq ir"><p id="b702" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">如需了解更多信息，请在<a class="ae pd" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ myrik _ chow</a>关注我。感谢您阅读这篇文章。祝您愉快！😄</p></div></div>    
</body>
</html>