<html>
<head>
<title>State Manager Alternative: A simple, old-school library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">州经理替代方案:一个简单的、老式的图书馆</h1>
<blockquote>原文：<a href="https://itnext.io/state-manager-alternative-a-simple-old-school-library-b06893f4974c?source=collection_archive---------1-----------------------#2018-12-29">https://itnext.io/state-manager-alternative-a-simple-old-school-library-b06893f4974c?source=collection_archive---------1-----------------------#2018-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/557248e37608019ca4332a5eccd372f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-IXxqI2_F-XytX4XqwB2KQ.jpeg"/></div></div></figure><p id="7ebf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我喜欢州经理。我使用状态管理器。比方说，状态管理器用来解决5个问题。在这里，我将向您展示一个替代方案，它只能解决州经理解决的5个问题中的1个。</p><p id="c003" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，不是Redux，Vuex等可以替代的东西。这只是一个简单的、老式的方法来<strong class="ka ir">保持不同组件</strong>之间的变量同步，而不通过一个大道具发送值——见鬼。就这样。</p><p id="ca6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你需要一个拥有中间件、记忆化和更多yerbas的国家经理，它不适合你。</p><p id="e6ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">小心，你可能需要一个有着所有这些yerbas的国家经理，但你可能不需要它。对此要加倍注意。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="117a" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">编码不是目的，而是手段</h1><p id="9e88" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">工作时，我最重要的模式/原则是:</p><ul class=""><li id="0536" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">吻</li><li id="8a0d" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">帕累托原理</li><li id="38ab" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">分量所有的东西！</li><li id="ef8e" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">松耦合</li></ul><p id="133a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建这个状态管理器库时，主要考虑了<strong class="ka ir">帕累托法则</strong>和<strong class="ka ir"> KISS </strong>模式。这意味着。</p><p id="1875" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个状态管理器<strong class="ka ir">不会给你的项目</strong>增加复杂性，它很简单，并且允许你重用你的旧知识(如果你的团队中大多数开发人员是初级人员或者来自后端，这是件好事)。</p><p id="ff73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是好事，同时也是坏事。我刚刚写了我认为好的东西，现在我将写我认为不好的东西:这个库没有遵循当前的~ <em class="mu">宣传~ </em>良好的做法，比如:它不是声明式的，它不是函数式编程(至少在第一个版本中)，以及我相信你会发现的更多东西(人们喜欢发现不好的东西)。</p><p id="797f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有一件更重要的事情，我认为是最重要的:</p><blockquote class="mv mw mx"><p id="2532" class="jy jz mu ka b kb kc kd ke kf kg kh ki my kk kl km mz ko kp kq na ks kt ku kv ij bi translated">我相信，如果你在10个项目中添加一个状态管理器，你可能会添加8次来解决一个问题:“在组件之间保持两个变量同步”。</p><p id="3e71" class="jy jz mu ka b kb kc kd ke kf kg kh ki my kk kl km mz ko kp kq na ks kt ku kv ij bi translated">你只需要一个全局状态对象和几个回调，但是你增加了，比方说，减少了…复杂性，很多复杂性，我的朋友。</p><p id="670a" class="jy jz mu ka b kb kc kd ke kf kg kh ki my kk kl km mz ko kp kq na ks kt ku kv ij bi translated"><code class="fe nb nc nd ne b">duix</code>的想法是覆盖你添加状态管理器的那8次，仅仅是因为你需要在组件之间保持同步变量。就这样。有一个全局的<code class="fe nb nc nd ne b">state</code>对象，你的<code class="fe nb nc nd ne b">set</code>值，或<code class="fe nb nc nd ne b">get</code>值，你可以<code class="fe nb nc nd ne b">subscribe</code>或<code class="fe nb nc nd ne b">unsubscribe</code>，每次有人<code class="fe nb nc nd ne b">set</code>一个新值，所有的订阅者将被调用接收新的和旧的值。</p></blockquote><p id="a6a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">^:我的朋友，这就是帕累托法则。帕累托说20%的<code class="fe nb nc nd ne b">X</code>，产生了80%的<code class="fe nb nc nd ne b">Y</code>。在这种情况下，我们可以说，如果您在项目中添加了一个状态管理器，那么80%的时间您添加它只是为了解决几个(或者仅仅一个)问题:保持组件之间的变量同步。剩下的20%的时间不仅仅是解决“保持var同步”的问题。</p><p id="e877" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，总结一下:你杀人过度了。您正在添加一个为解决大量问题而创建的库，而您只使用它来解决其中的一个问题。它让我想起了<code class="fe nb nc nd ne b">jQuery</code>时代，那时我们添加<code class="fe nb nc nd ne b">jQuery</code>只是为了使用<code class="fe nb nc nd ne b">$</code>作为DOM元素选择器。或者当事情在不到2秒的时间内发生时，添加整个<code class="fe nb nc nd ne b">Moment</code> lib来说“片刻之前”(可以替换为:<code class="fe nb nc nd ne b">if ((Date.now() — initialMoment) &lt; 2000) {</code>)</p><p id="e7cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">这很简单，而且喜欢保持事情简单。</strong></p><p id="2549" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个库叫做<code class="fe nb nc nd ne b">duix</code>，它基本上有三个功能:</p><ul class=""><li id="033b" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated"><code class="fe nb nc nd ne b">duix.set</code></li><li id="7ea2" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated"><code class="fe nb nc nd ne b">duix.get</code></li><li id="17a4" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated"><code class="fe nb nc nd ne b">duix.subscribe</code></li></ul><p id="2510" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你读了这三条，明白这个图书馆将如何运作，那是因为我实现了我的目标。</p><h1 id="32a5" class="ld le iq bd lf lg nf li lj lk ng lm ln lo nh lq lr ls ni lu lv lw nj ly lz ma bi translated"><strong class="ak">DUIX如何工作</strong></h1><ul class=""><li id="b607" class="mg mh iq ka b kb mb kf mc kj nk kn nl kr nm kv ml mm mn mo bi translated">您可以使用<code class="fe nb nc nd ne b">duix.set</code>来设置一个键值对，例如:</li></ul><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><ul class=""><li id="524c" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">您可以使用<code class="fe nb nc nd ne b">duix.get</code>来获取对的值，例如:</li></ul><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><ul class=""><li id="28fd" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">您可以使用<code class="fe nb nc nd ne b">duix.subscribe</code>来订阅一个<code class="fe nb nc nd ne b">callback</code>,每次值改变时都会调用它，例如:</li></ul><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="0075" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">需要知道的重要一点是，<code class="fe nb nc nd ne b">duix.subscribe</code>函数返回<code class="fe nb nc nd ne b">unsubscribe</code>函数，例如:</p><figure class="nn no np nq gt jr"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="3c08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">还有……就这些。</strong></p><p id="1d1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以订阅任何组件的任何var更改，并在值更改时做您想做的任何事情。您还可以随时设置或获取值(以强制的方式)。</p><h1 id="2a0b" class="ld le iq bd lf lg nf li lj lk ng lm ln lo nh lq lr ls ni lu lv lw nj ly lz ma bi translated">如何使用它</h1><p id="41c9" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">你知道如何使用它。去NPM和Github上的<code class="fe nb nc nd ne b">duix</code>库看看就知道了。</p><div class="nt nu gp gr nv nw"><a href="https://www.npmjs.com/package/duix" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">duix</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">只是一个简单的状态管理器</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.npmjs.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok jw nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://github.com/BrodaNoel/duix" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">布罗达尼埃尔/杜伊克斯</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">一个专注于KISS和Pareto原则的州经理——BrodaNoel/duix</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok jw nw"/></div></div></a></div><blockquote class="om"><p id="56eb" class="on oo iq bd op oq or os ot ou ov kv dk translated">对于那些有眼睛看得见的人来说，同步性是一个永远存在的现实</p><p id="1f3c" class="on oo iq bd op oq ow ox oy oz pa kv dk translated">卡尔·荣格</p></blockquote><p id="4d4b" class="pw-post-body-paragraph jy jz iq ka b kb pb kd ke kf pc kh ki kj pd kl km kn pe kp kq kr pf kt ku kv ij bi translated">…去看，去理解，去记忆…</p></div></div>    
</body>
</html>