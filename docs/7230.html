<html>
<head>
<title>How to Use Machine Learning to Build a Pokémon Search Engine — pt. 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何利用机器学习建立一个神奇宝贝搜索引擎— pt。一</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-use-machine-learning-to-build-a-pok%C3%A9mon-search-engine-pt-1-2db1f8551426?source=collection_archive---------1-----------------------#2022-07-22">https://itnext.io/how-to-use-machine-learning-to-build-a-pok%C3%A9mon-search-engine-pt-1-2db1f8551426?source=collection_archive---------1-----------------------#2022-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d315" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">机器学习/项目</h2><div class=""/><div class=""><h2 id="353f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">或者:如何在一个项目中结合对神奇宝贝和机器学习的热情——从零开始！</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7ffcbcdd009bf0f438b8c53000e19059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1LfBkmo8Se9IPcdGnpK4ag.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">我和丹尼尔·卡维尼，意大利2022初学者日的两位老师</figcaption></figure><p id="b4fb" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这篇文章是对我和Daniele Convertini作为<a class="ae ma" href="https://datamasters.it/" rel="noopener ugc nofollow" target="_blank"> Datamasters.it </a>的一部分，在2022年的<a class="ae ma" href="http://pycon.it/" rel="noopener ugc nofollow" target="_blank"> Pycon Italia </a>上组织的研讨会的合理忠实(但略有缩短)的改编，这是专门讨论Python语言的技术会议的意大利版。我们负责初学者日，这是专门为那些想第一次接触Python世界的人举办的研讨会，这真的是一种荣誉和乐趣。我们已经等不及下一版了！</p><p id="d3e0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">顺便说一下，我们决定挑战Python新手的项目是从头开发一个神奇宝贝搜索引擎，内部使用了<a class="ae ma" href="https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm" rel="noopener ugc nofollow" target="_blank"> KNN </a>机器学习算法，也是从头实现的。概括地说，我们的搜索引擎将按照以下步骤工作:</p><ul class=""><li id="30ed" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mg mh mi mj bi translated">首先要求用户输入</li><li id="3a84" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">接受这些输入并<em class="mp">寻找哪个口袋妖怪最像那个输入</em></li><li id="82a5" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">最后向用户显示搜索结果。</li></ul><p id="d15f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">很简单，对吧？嗯，事情比这个稍微复杂一点。对我们的搜索引擎如何工作的描述是超级通用和超级模糊的。它可以指字面上的<em class="mp">任何</em>软件(毕竟，经典的程序流程是:请求一个输入，<em class="mp">用那个输入做一些事情</em>，返回一些结果)。</p><p id="f98f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在我们开始设计和开发一些东西之前，我们首先要了解一些事情。这些是我们必须回答的问题:</p><ol class=""><li id="ec2a" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mq mh mi mj bi translated">神奇宝贝到底是什么？</li><li id="b0ac" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mq mh mi mj bi translated">用户将插入什么输入？</li><li id="8cc9" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mq mh mi mj bi translated">预期输出是什么？</li><li id="b42e" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mq mh mi mj bi translated">我们怎样才能理解用户输入的神奇宝贝<em class="mp">是什么样子的</em>？</li><li id="437e" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mq mh mi mj bi translated">我们想向用户展示什么？我们如何根据相似度对结果进行排序？</li></ol><p id="f5ba" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在我们开始编写搜索引擎代码之前，让我们每次回答一个问题，让我们寻找第一个问题的答案:</p><h1 id="ad1b" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">神奇宝贝到底是什么？</h1><p id="fb4e" class="pw-post-body-paragraph le lf iq lg b lh nj ka lj lk nk kd lm ln nl lp lq lr nm lt lu lv nn lx ly lz ij bi translated">在你从未听说过神奇宝贝的遥远假设中，这里有他们的<a class="ae ma" href="https://en.wikipedia.org/wiki/Pok%C3%A9mon" rel="noopener ugc nofollow" target="_blank">维基百科</a>页面，他们的<a class="ae ma" href="https://pokemon.fandom.com/wiki/Pok%C3%A9mon_Wiki" rel="noopener ugc nofollow" target="_blank">粉丝</a>主页，他们的官方<a class="ae ma" href="https://www.pokemon.com/" rel="noopener ugc nofollow" target="_blank">网站</a>和他们的官方脸书页面(拥有超过750万粉丝)。</p><p id="526f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">简而言之，如果你想阅读的话，网上确实有很多东西。你知道神奇宝贝的可能性更大，因为它是一部动画或神奇的游戏男孩视频游戏(我花了几个小时度过了我现在已经逝去的和心爱的青春期*唉*)。无论如何，重点是神奇宝贝是一种怪物，你可以捕捉、训练、进化(最重要的是)并与其他神奇宝贝战斗以变得更强大。更强，是吧？多少钱？当我们说“一个神奇宝贝<em class="mp">进化</em>”时，我们指的是什么？我们再深入一点。点击他们官方网站的链接后，我们会看到一个包含所有可用神奇宝贝信息的数据库。我们点击一个随机的神奇宝贝(例如<a class="ae ma" href="https://www.pokemon.com/us/pokedex/bulbasaur" rel="noopener ugc nofollow" target="_blank">妙蛙种子</a>)，它会显示出一个神奇宝贝与诸如体重、身高、类型(草、土、精神、火、战斗等)等数据相关联；许多神奇宝贝也有次要类型)，以及分数:</p><ul class=""><li id="5ac5" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mg mh mi mj bi translated">HP(健康点)</li><li id="608e" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">攻击点</li><li id="46f3" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">防御点</li><li id="1798" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">特殊攻击点</li><li id="3262" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">特殊防御点</li><li id="edf3" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">速度</li></ul><p id="885d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一瞥之后，原来Pokédex中的<strong class="lg ja">每只神奇宝贝</strong>都有这些数据。很好！现在我们对神奇宝贝有了更好的理解，它们的基本属性是什么，最重要的是，它们的得分是多少。在这一点上，我们可以问自己:<em class="mp">好，但我们在哪里可以找到关于</em> <strong class="lg ja"> <em class="mp">所有现存神奇宝贝</em> </strong> <em class="mp">(它们超过800个)</em>的数据？我们可以想象一只可爱的小猴子点击官方网站上的每一个Pokédex项目，但是——嘿——我们现在是在2022年，感谢上帝更快的解决方案确实存在。在<a class="ae ma" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>这个连机器学习初学者都非常熟悉的平台上，我们可以很容易地找到数十个包含我们正在寻找的数据的免费下载数据集。你会在Kaggle上找到的最常见的文件格式是<a class="ae ma" href="https://en.wikipedia.org/wiki/Comma-separated_values" rel="noopener ugc nofollow" target="_blank"> CSV </a>(逗号分隔值，一个简单的文本文件——你用记事本创建的文件)。我们选择其中一个数据集:<a class="ae ma" href="https://www.kaggle.com/datasets/abcsds/pokemon" rel="noopener ugc nofollow" target="_blank">这个</a>。数据集中的列(<em class="mp">特征</em>，在机器学习的世界中)是:</p><ul class=""><li id="1b5b" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mg mh mi mj bi translated">#:神奇宝贝ID(非常重要:它是一个<strong class="lg ja">唯一属性</strong>，每个神奇宝贝都有不同的神奇宝贝ID)</li><li id="dafd" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">名称:神奇宝贝的名字</li><li id="962d" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">类型1:每个神奇宝贝至少有一个主要类型，它决定了弱点或对某些类型攻击的抵抗力</li><li id="e68b" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">类型2:一些神奇宝贝有两种类型</li><li id="534a" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">总计:以下所有分数的总和</li><li id="07b6" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">生命值</li><li id="3edc" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">攻击:普通类型攻击的基础调整值</li><li id="89e9" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">防御:抵抗普通类型的攻击</li><li id="1c4a" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">特殊攻击的基础修正值</li><li id="86f7" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">SP防御:抵抗特殊攻击</li><li id="ac9f" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">速度:用于决定哪些神奇宝贝先攻击</li><li id="4580" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">世代:世代数(存在7代神奇宝贝)</li></ul><p id="2359" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们现在可以继续回答下一个问题。</p><h1 id="2dde" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">用户将插入什么输入？</h1><p id="d0bd" class="pw-post-body-paragraph le lf iq lg b lh nj ka lj lk nk kd lm ln nl lp lq lr nm lt lu lv nn lx ly lz ij bi translated">现在我们知道了神奇宝贝到底是什么，我们可以更好地概述我们的搜索引擎应该如何真正工作。</p><p id="af32" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们可以询问用户信息，如名称或类型，并让我们的搜索引擎返回与用户输入的名称相似的神奇宝贝，或者可能是属于某个类别的所有神奇宝贝；相反，我们决定向用户询问6个数字。这些数字将代表与每个神奇宝贝已经拥有的分数相对应的值，并且这些值在不同的神奇宝贝之间是不同的:HP、攻击、防御、特殊攻击、特殊防御和速度。然后，搜索引擎将搜索得分<strong class="lg ja">与用户输入的6个值</strong>最接近的神奇宝贝。我们将这一系列分数称为“<strong class="lg ja">搜索查询</strong>”。</p><h1 id="8383" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">预期输出是什么？</h1><p id="b928" class="pw-post-body-paragraph le lf iq lg b lh nj ka lj lk nk kd lm ln nl lp lq lr nm lt lu lv nn lx ly lz ij bi translated">搜索引擎可能会输出一系列有序的结果。你拿到了吗？<strong class="lg ja">的有序序列</strong>产生，这提出了一个新的问题:在我们的例子中，结果到底是什么？原来，一个结果实际上可能是一个神奇宝贝及其所有数据。如果是这样，我们的搜索引擎基本上会返回一系列神奇宝贝。很有道理，不是吗？用户在搜索查询中插入一些数字(搜索查询的一个例子是:HP = 40，Attack = 45，Defense = 56，等等)，并得到一系列神奇宝贝，最类似于插入的搜索查询。我们正在处理整数，所以第一个结果将是<strong class="lg ja">最相似的神奇宝贝</strong>，第二个结果将是第二个最相似的神奇宝贝，以此类推。其他问题:我们想要多少结果？我们想向用户展示多少个神奇宝贝？全部800？不，坏主意。如果我们这样做，我们的搜索引擎将会不方便使用:没有足够的空间显示800个神奇宝贝的电脑屏幕。如果我们给结果数一个界限会更好。我们的搜索引擎将返回K个神奇宝贝的列表，其中K当然是一个整数。例如，如果K = 5，情况如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/9122bae036c1ce65f93171b74857e488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OdR-xrPr_jn0sw8f"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">K = 5的搜索引擎。图片由作者提供。</figcaption></figure><p id="a742" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">很简单，不是吗？用户插入一些包含6个数字的搜索查询，我们的算法<em class="mp">do stuff</em>，搜索引擎返回K个神奇宝贝的列表。我们很好。我们继续吧。</p><h1 id="f6c0" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">如何才能理解用户输入的神奇宝贝是什么样子的？</h1><p id="c31c" class="pw-post-body-paragraph le lf iq lg b lh nj ka lj lk nk kd lm ln nl lp lq lr nm lt lu lv nn lx ly lz ij bi translated">现在有趣的事情来了。回答这个问题基本上就是<strong class="lg ja">设计我们的搜索引擎算法</strong>。不用说，这是我们项目中最重要的部分，所以我们不妨马上开始。我们现在有什么？让我们来回顾一下。我们有:</p><ul class=""><li id="baac" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mg mh mi mj bi translated">由6个数字组成的输入</li><li id="d0cf" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated"><em class="mp">做stuff</em>的算法</li><li id="d37a" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">由一系列有序的神奇宝贝组成的输出</li></ul><p id="ae8a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">或者，如果我们愿意，我们可以说我们的用户插入了一个<strong class="lg ja">虚构的神奇宝贝</strong>的数据，由于与作者的名字完全一致，我们将它称为<strong class="lg ja"> Pepposaur </strong>，一个野生的神奇宝贝，这里有一张罕见的照片:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi np"><img src="../Images/0a74a06f3f171518534c5dd250945e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/0*o-pQi6EqTQ6v62uq"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。哦，还有图像中的<em class="nq">作者。</em></figcaption></figure><p id="a119" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们的算法到目前为止只是<em class="mp">做stuff</em>因此变成:“我们如何找到与Pepposaur最相似的K神奇宝贝？”</p><p id="e8b4" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这就是我们之前提到的算法发挥作用的地方，而且非常奇怪的是，这似乎是为了回答这些问题而故意制造的 : <strong class="lg ja"> KNN </strong>。KNN代表K近邻。</p><h2 id="66e5" class="nr ms iq bd mt ns nt dn mx nu nv dp nb ln nw nx nd lr ny nz nf lv oa ob nh iw bi translated">k-最近邻</h2><p id="0382" class="pw-post-body-paragraph le lf iq lg b lh nj ka lj lk nk kd lm ln nl lp lq lr nm lt lu lv nn lx ly lz ij bi translated">在机器学习中，KNN是一种监督学习算法，用于回归(即预测连续值)和分类(即预测输出类或标签)。它是基于一个非常简单，但非常有效的概念。假设我们有一个人的列表，并且假设我们知道每个人的体重和臀围(我们称之为<strong class="lg ja">特征</strong>的连续数值)。假设对于每个人，我们都有一个“是/否”指标，告诉我们这个人是否肥胖。现在，假设我们用这些信息构建一个图表，例如，将臀部的周长放在X轴上，将体重放在Y轴上，并根据这个人是否肥胖(红点)将这些点涂上不同的颜色(浅蓝色点)。我们将得到如下图表:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/8e8b4f01f94b53e5b09db6285c7a117b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2T_UqntrqwPNMyn6"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">KNN进行分类。图片由作者提供。</figcaption></figure><p id="d63a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，假设我们有另一个观察结果，我们知道两个特征值(周长和体重)，我们希望<strong class="lg ja">预测</strong>肥胖/非肥胖标志。假设新的观察值像这样放在图中(绿点):</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi od"><img src="../Images/781c357bce46d27619d3ee3ce8064997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p5DJ8--D_LpPw4Gy"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">KNN进行分类。图片由作者提供。</figcaption></figure><p id="c673" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">KNN算法基于新的观察特征做出决定，只需选择最近的K个邻居，并查看在这K个邻居中哪个类最具代表性。在我们的例子中，如果K = 5:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi od"><img src="../Images/69c3c579373b04523c9766d3c3737b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WU5_GxNYpRGIseT0"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">新观察邻居。图片由作者提供。</figcaption></figure><p id="ab1d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">最接近的5个邻居是天体大多数(不肥胖)。因此，新的观察预测了“非肥胖”类别。仅此而已。很简单，不是吗？嗯，在这种情况下，我们使用直线作为点之间的距离测量，而原始算法可以使用不同的和更复杂的距离测量，但这只是<em class="mp">KNN如何工作</em>:做出一个决定，寻找一个新观察的邻居的类(或值，在回归的情况下)。</p><p id="e1c5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在:让我们将KNN应用到我们的用例中。让我们解决问题的关键是替换一个词:从“神奇宝贝更像Pepposaur”开始，我们的搜索引擎将不得不搜索“Pepposaur的<strong class="lg ja">邻居</strong>神奇宝贝”。</p><p id="e475" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们一方面有Pepposaur的特征，另一方面有我们的神奇宝贝数据集。为简单起见，假设我们只考虑一个特性，HP，假设用户输入数字67作为Pepposaur的HP值。让我们尝试绘制(一维的，因为我们只考虑一个特征)Pepposaur和我们数据集中的神奇宝贝的HP。我们会得到这样的结果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/7eb7709f446d281770d5674917e252e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OhddTopqn0tIWAGu"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">单轴图。图片由作者提供。</figcaption></figure><p id="8135" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">理解Pepposaur的邻居是什么样的神奇宝贝非常简单。例如，如果我们想了解哪两个神奇宝贝最接近粉红猪小妹(即，如果K = 2)，很明显这两个是妙蛙草和Charmeleon。如果K = 3，我们也应该把Charizard包括在列表中。如果K = 4，我们还应该包括Venusaur等等。但是，如何才能正式达成这个解决方案呢？我们可以使用的一个简单的数学公式就是Pepposaur的HP和其他神奇宝贝的HP的绝对值之差:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/954daa56ea8e96b41ac577adc14473c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_jyUe6NfRj_SME9m"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="9f94" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是一个与众不同的问题:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/e9d83278a0b9aaee7209d193b7220622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JCR3NLWbUBkLHbvv"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="d2cc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">粗体显示的是距离较短的神奇宝贝，即距离粉红猪小妹最近的<strong class="lg ja">(因此也是最像<strong class="lg ja"/>)神奇宝贝。注意一件事:我们可以计算距离的<strong class="lg ja">平方</strong>的<strong class="lg ja">平方根</strong>，而不是计算距离的绝对值。它会给出和绝对值一样的结果:</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/80a42069c4314fb2f954223484f9e222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C069YV_wZHc2ora2"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="2769" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">好了，现在我们来添加一个轴。我们只是再加一个分数，比如说<strong class="lg ja">攻击点</strong>，做和之前一样的事情，就是我们建一个图。假设这次用户输入54和55作为Pepposaur分数，分别是HP和攻击点。这次的图表将是二维的，因为我们只考虑两个特征，两个轴:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oh"><img src="../Images/829859119c827b6b14785725a4a95b33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gdpxvgWdTPcPCDyH"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="e42d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对剧情的一瞥告诉我们，这一次，最接近的3个神奇宝贝是妙蛙种子、妙蛙草和Charmeleon，但是我们如何用数学的方法来告诉它呢？好了，我们在一个二维图形中:我们可以使用勾股定理并应用欧几里得距离公式来计算两点之间的距离:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oi"><img src="../Images/5a5f5ff73656a819add3188eb20459d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qkongm6nt0JCX0Yv"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="8144" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将使用的公式如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/a939f7d8a43001a6a6a0be9425eaa34f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/0*yb3EnnHqFnMGtNbY"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="c86b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这种情况下，我们也有可能在笛卡尔图上形式化两点之间的“接近”程度，然后计算数据集中每对Pepposaur / Pokemon的距离:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ok"><img src="../Images/34bcd9e8c9da70768f94058f66272486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ij00acO8OYkr_ebZ"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="814c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">粗体字是粉红猪小妹的3个神奇宝贝邻居。</p><p id="04d7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">好，让我们把它变得更难(和完整)。让我们添加另一个轴，包含防御点分数。在这种情况下，我们将构建一个三维图形(x: HP，y: Attack，z: defense)，但要点不会改变:三维上下文中的欧几里德距离公式将是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/773005621717432de0932eb0446e3fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WdBVEu-Wo3A5DAqE"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="91c2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后，我们可以建立一个普通的表，显示Pepposaur和各种神奇宝贝之间的距离。</p><p id="a506" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">欧几里德距离的美妙之处在于它可以与任意数量的轴一起工作，甚至是那些超出可见范围的轴。如果我们继续添加轴，即使我们不能“可视化”数据(因为我们的感知仅限于3维)，我们仍然能够计算欧几里得距离。欧几里德距离的概括是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi om"><img src="../Images/dcdc8c430263bf026426fee1bf2d934b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/0*Ebr4Is7Z2_EJJVoU"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">欧几里德距离。图片由作者提供。</figcaption></figure><p id="4326" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">有了这个公式，我们可以计算出任何一个维的<em class="mp">中两点之间的欧几里德距离。当然，这两个点必须有相同的维数。让我们尝试一个清晰的例子:</em></p><pre class="kp kq kr ks gt on oo op oq aw or bi"><span id="5414" class="nr ms iq oo b gy os ot l ou ov">#            HP  At  Df  SA  SD  Sp</span><span id="1524" class="nr ms iq oo b gy ow ot l ou ov">pepposaur = [54, 55, 60, 42, 49, 25]</span><span id="9cfb" class="nr ms iq oo b gy ow ot l ou ov">bulbasaur = [45, 49, 49, 65, 65, 45]</span></pre><p id="6e43" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们应用这个公式:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/9fc7be8c4823e441bb3687f8b641ec3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H-6S3i2okQB0AXwj"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="6454" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这让我们想到:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/6b94ef7fcdec8a0305c69d74d48a8ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Whla-VORkK76EvMM"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="fa5f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是Pepposaur和妙蛙种子之间的欧几里得距离。我们需要将这个公式应用于数据集中的800多个神奇宝贝来<strong class="lg ja">计算用户作为搜索查询输入的神奇宝贝与数据集中所有神奇宝贝之间的欧氏距离</strong>。</p><h1 id="80cc" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">我们想向用户展示什么？我们如何根据结果的“相似性”进行排序？</h1><p id="5d33" class="pw-post-body-paragraph le lf iq lg b lh nj ka lj lk nk kd lm ln nl lp lq lr nm lt lu lv nn lx ly lz ij bi translated">我们现在拥有的是用户为虚拟神奇宝贝输入的值，以及虚拟神奇宝贝和每个数据集神奇宝贝之间的欧几里德距离(即一个<em class="mp">数字</em>)。现在是时候向用户展示我们搜索引擎的结果了。我们之前说过，搜索引擎按照相关性的顺序显示结果。首先是最相关的结果，然后逐渐是不太相关的结果。在我们的案例中，我们认为什么是“结果”？我们如何订购它们？</p><p id="5677" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">第一个问题的答案很简单。只是一个从数据集中提取内容的字符串:Pokédex ID、名称、代、类型、分数。例如:</p><pre class="kp kq kr ks gt on oo op oq aw or bi"><span id="fb91" class="nr ms iq oo b gy os ot l ou ov">1 — Bulbasaur, type Grass, scores: …</span><span id="0ca7" class="nr ms iq oo b gy ow ot l ou ov">24 — Entei (legendary), type Fire, scores: …</span><span id="0427" class="nr ms iq oo b gy ow ot l ou ov">425 — Drifloon, type Ghost, Flying, scores: …</span></pre><p id="ae57" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">好吧。但是我们如何对它们进行排序呢？我们有一个数据结构，其中每个神奇宝贝都有与用户虚构的神奇宝贝的距离；到目前为止所做的计算，就像我们在我们的数据集中添加了一列，即“与粉红龙的距离”列；我们还可以利用每个神奇宝贝在数据集中的位置(即CSV文件中的行号，从0开始计数)，这对每个神奇宝贝来说都是唯一的，因此可以用来区分各个神奇宝贝。</p><p id="f1a3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后，我们可以将我们的结果存储在一个数据结构中，对于每个神奇宝贝，我们在数据集中存储行的位置以及到Pepposaur的距离。我们真的不需要其他任何东西:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/7fbb30ad7126beafbeff8115f3384e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YPEUjYX1dDW7T4eY"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="883f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了显示我们的搜索引擎的正确输出，我们只需要根据我们在数据结构的每个元素中可以找到的距离对这个数据结构进行排序。该排序过程的输出将是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ox"><img src="../Images/52e4405be92c3bfe637cffb78ecbf83f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r1B7Ya3GsdK1aEAo"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图片由作者提供。</figcaption></figure><p id="fae0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">瞧啊。此时，我们有可能访问最接近Pepposaur的K(在这种情况下K = 3)个元素，然后搜索引擎将返回3个结果(总是因为K = 3)，<strong class="lg ja">按接近度</strong>排序:</p><ul class=""><li id="7b2a" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mg mh mi mj bi translated">排名第一的是指数为1的神奇宝贝，妙蛙草</li><li id="d1ab" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">排名第二的是指数为4的神奇宝贝，查曼德</li><li id="00a2" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">排名第三的是指数为0的神奇宝贝，妙蛙种子</li></ul><p id="17a5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">因此，总而言之，我们的搜索引擎将这样工作:</p><ul class=""><li id="8d0c" class="mb mc iq lg b lh li lk ll ln md lr me lv mf lz mg mh mi mj bi translated">该程序将要求用户输入值</li><li id="a0ed" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">用户将输入6个值作为搜索查询，然后这些值将与一个虚构的神奇宝贝(我们称之为Pepposaur的神奇宝贝)相关联</li><li id="281b" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">该程序将使用KNN算法来搜索最接近Pepposaur的K神奇宝贝；特别是:<br/>将使用欧几里得距离计算每个神奇宝贝和Pepposaur之间的距离<br/>将在一个单独的列表中记住每个神奇宝贝:每个神奇宝贝的行号我们用Pepposaur计算距离，距离本身<br/>将按距离对新创建的列表进行排序</li><li id="edf6" class="mb mc iq lg b lh mk lk ml ln mm lr mn lv mo lz mg mh mi mj bi translated">该程序将显示，最后，前K个结果，按距离排序，作为结果。</li></ul><p id="76de" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，我们已经清楚地了解了我们的程序将如何工作，是时候动手编写一些Python代码了——在下一篇文章中:)。</p><p id="0539" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="mp">psst</em>，<a class="ae ma" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-machine-learning-to-build-a-pokémon-search-engine-pt-2-lets-code-f44cd22c912f">下面是</a>第二部分——实际代码！</p></div></div>    
</body>
</html>