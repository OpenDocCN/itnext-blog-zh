<html>
<head>
<title>A Proposition For a Better Future For Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个关于围棋更美好未来的命题</h1>
<blockquote>原文：<a href="https://itnext.io/a-proposition-for-a-better-future-for-go-a0d0b43d086a?source=collection_archive---------2-----------------------#2022-10-17">https://itnext.io/a-proposition-for-a-better-future-for-go-a0d0b43d086a?source=collection_archive---------2-----------------------#2022-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/3113d68807322d559c9a31b854d3e291.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*3KGM1zFzGW8x44OLwY4zIQ.jpeg"/></div></figure><p id="da52" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是一篇由3篇文章组成的系列文章的总结文章，提出了围棋更美好的未来。在之前的文章中，我们<a class="ae ks" href="https://medium.com/@avivcarmis/what-makes-go-the-best-language-159322c2206a" rel="noopener">讨论了语言的强势一面</a>，<a class="ae ks" href="https://medium.com/@avivcarmis/we-need-to-talk-about-the-bad-sides-of-go-568a1e5adbc6" rel="noopener">展示了有问题的一面</a>。如果你错过了这些，我建议回头看看，因为它们为这一个提供了重要的背景。</p><h2 id="1790" class="kt ku iq bd kv kw kx dn ky kz la dp lb kf lc ld le kj lf lg lh kn li lj lk ll bi translated">本系列的更多内容</h2><ul class=""><li id="648a" class="lm ln iq jw b jx lo kb lp kf lq kj lr kn ls kr lt lu lv lw bi translated"><a class="ae ks" href="https://medium.com/@avivcarmis/what-makes-go-the-best-language-159322c2206a" rel="noopener">是什么让Go成为最好的语言</a></li><li id="13fd" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">我们需要谈谈围棋的不好的一面</li><li id="9137" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated"><a class="ae ks" href="https://medium.com/@avivcarmis/a-proposition-for-a-better-future-for-go-a0d0b43d086a" rel="noopener">一个更美好未来的命题</a></li></ul><p id="5197" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果您将社区约定和命名问题与前一篇文章中提出的异步返回值问题结合起来，您最终会得到<strong class="jw ir">非常流行的库</strong>发布代码，其中包含复杂的100多行函数，使用单字母的未记录变量，在包的另一端声明。这是非常不可读和不可维护的，而且非常普遍。此外，与其他现代语言不同，Go不提供任何类型的运行时值安全。这导致了许多<strong class="jw ir">与值相关的运行时问题</strong>，这些问题很容易避免。</p><p id="c4ec" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我认为作为一种语言和一个社区，Go非常努力地让自己与众不同。一种“<em class="mc">其他语言也有不好的地方，</em> <strong class="jw ir"> <em class="mc">我们会做一切不同的事情</em> </strong>”的方法。其他语言有没有犯设计错误？当然，不可否认的是，C# 和Java 中的<a class="ae ks" href="https://en.m.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions" rel="noopener ugc nofollow" target="_blank">空指针</a>和检查异常<a class="ae ks" href="https://www.artima.com/articles/the-trouble-with-checked-exceptions" rel="noopener ugc nofollow" target="_blank">是被设计者认为是错误的<strong class="jw ir">决策的常见例子。</strong></a></p><p id="a3a3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这些年来，面向对象的方法被滥用了吗？最可怕的事情发生了！在<a class="ae ks" href="https://commandcenter.blogspot.com/2012/06/less-is-exponentially-more.html" rel="noopener ugc nofollow" target="_blank">他的著名演讲</a>中，罗布·派克(围棋的共同设计者)说</p><blockquote class="md"><p id="c4c2" class="me mf iq bd mg mh mi mj mk ml mm kr dk translated">如果说C++和Java是关于类型层次和类型分类的，那么Go就是关于组合的。</p></blockquote><p id="6686" class="pw-post-body-paragraph ju jv iq jw b jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ij bi translated">事实上，组合和继承只是克服代码重复的不同方法。构图有其<a class="ae ks" href="https://en.wikipedia.org/wiki/Composition_over_inheritance#Benefits" rel="noopener ugc nofollow" target="_blank">的好处</a>和<a class="ae ks" href="https://en.wikipedia.org/wiki/Composition_over_inheritance#Drawbacks" rel="noopener ugc nofollow" target="_blank">的弊端</a>。在Pike的声明发表10年后，我听到很多地鼠抨击Java或C++以及他们的OOP方法，声称人们滥用继承。让我们明确一点——人们也会滥用作文。给他们时间。😌由于函数式编程<strong class="jw ir">的兴起，几十年来组合相对于继承的优势可能会达到这个目的。与此同时，我看不出它有什么好处<strong class="jw ir">盲目拒绝好的实践</strong>和来自其他语言的约定。相反，我们应该<strong class="jw ir">仔细检查我们应该采用什么</strong>。几十年的其他语言的经验一定是有价值的。在我看来，他们做了很多。</strong></p><h1 id="fd19" class="ms ku iq bd kv mt mu mv ky mw mx my lb mz na nb le nc nd ne lh nf ng nh lk ni bi translated">对更美好未来的主张</h1><p id="ed16" class="pw-post-body-paragraph ju jv iq jw b jx lo jz ka kb lp kd ke kf nj kh ki kj nk kl km kn nl kp kq kr ij bi translated">我希望看到一个编译时环境，它看起来更像Go，但是允许开发者更富于表现力，以获得可维护性和运行时安全性。但与此同时，允许Go语言本身基本保持不变，而不是像我们许多地鼠担心的那样演变成新的东西。作为地鼠，<strong class="jw ir">为什么我们的工具集中没有两个工具</strong>？🔧🪛</p><figure class="nn no np nq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nm"><img src="../Images/774810674639e936e02f28b108595675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UdosLrmKU5p6zaXAaXznwQ.png"/></div></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">goat——Go编程语言的扩展版本，旨在提高安全性和可维护性</figcaption></figure><p id="5914" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://github.com/goatlang/goat" rel="noopener ugc nofollow" target="_blank">介绍—<strong class="jw ir">色鬼</strong> </a> <strong class="jw ir">。一个新的编译时环境将产生标准的、兼容的、高性能的Go文件，这些文件与任何其他Go项目完全兼容。这意味着他们可以导入常规的Go文件，也可以安全地从任何其他Go文件导入。想围绕山羊的设计和规格点燃一场彻底的讨论，听听大家的看法。地鼠和非地鼠。<strong class="jw ir">快来</strong> <a class="ae ks" href="https://github.com/goatlang/goat/issues" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">加入讨论</strong> </a>，我们需要你的投入！</strong></p><p id="0547" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Goat可以以多种方式实现，从完全透明的编程语言到简单的<strong class="jw ir"> Go代码生成工具</strong>。然而，在这一点上，我们有意避免深入研究实现细节，并希望将重点放在spec上。想象你自己在这样一个令人兴奋的Go-code环境的无限可能性空间中，你看到了什么？通过开放新的GitHub问题来提出新的语法和约定规则，或者通过在开放问题中加入讨论来加入讨论。为了提高安全性和可维护性，你会对Go的编译时间做什么改变，并对Goat的锻造规范提出你的看法。</p><h2 id="5151" class="kt ku iq bd kv kw kx dn ky kz la dp lb kf lc ld le kj lf lg lh kn li lj lk ll bi translated">碎片化呢</h2><p id="e7c3" class="pw-post-body-paragraph ju jv iq jw b jx lo jz ka kb lp kd ke kf nj kh ki kj nk kl km kn nl kp kq kr ij bi translated">让我们花一点时间回顾一下上一篇文章中提出的解决方案，并讨论它们的一致性和简单性。让我们确保为Go留有空间，以保持简单、一致和碎片整理。我们不应该有超过一种可能的方式来表达一些东西。</p><ul class=""><li id="c413" class="lm ln iq jw b jx jy kb kc kf nz kj oa kn ob kr lt lu lv lw bi translated">添加可见性修饰符——为了保持碎片整理，可见性应该只由可见性修饰符派生<strong class="jw ir">。换句话说，大写和小写符号不会影响它们的可见性。</strong></li><li id="936c" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">将内置符号移动到限定了作用域的方法和函数中——内置函数的行为(例如<code class="fe oc od oe of b">cap</code>、<code class="fe oc od oe of b">len</code>和<code class="fe oc od oe of b">make</code>)应该只作为它们各自类型的方法和函数来提供。获取切片长度的唯一方式应该是通过调用<code class="fe oc od oe of b">slice.Len()</code>。内置符号将不可用。</li><li id="f499" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">添加严格的nil支持——在不同的复杂程度下，有几种不同的方法可以实现这一点。不管怎样，编译器应该<strong class="jw ir">防止给不可空的变量</strong>赋值零值，并防止<strong class="jw ir">在没有初始检查的情况下取消对可空变量</strong>的引用。对于那些不熟悉类似机制的人来说，可能需要一两分钟才能掌握。无论哪种方式，都不应该在过程中引入碎片。</li><li id="47a5" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">添加enum支持——enum支持不应与Go中当前存在的任何机制重叠。当你声明一个类型<strong class="jw ir">必须</strong>持有几个可能值中的一个时——enum应该是你的选择，因为没有其他机制支持它。</li><li id="76e8" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">支持结构中的初始值—强制结构字段初始值的机制必须集成到现有机制中。换句话说，我们应该支持<strong class="jw ir">在当前结构语法</strong>中计算和提供结构字段的初始值。不应引入重复或分割。</li><li id="262e" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">添加常量赋值——变量的每个声明都应该<strong class="jw ir">指出它是常量还是变量</strong>。关于这一点，我要补充的是，它需要<strong class="jw ir">移除对速记变量赋值</strong> ( <code class="fe oc od oe of b">:=</code>操作符)的支持，这目前在Go语法中造成了碎片。</li><li id="4b80" class="lm ln iq jw b jx lx kb ly kf lz kj ma kn mb kr lt lu lv lw bi translated">添加对<code class="fe oc od oe of b">go</code>关键字的承诺支持——需要注意的是，添加对承诺的支持不会引入新的并发模型。相反，它应该简单地提供内置支持来跟踪被触发的goroutines的执行并获取它们的结果。这是Go目前不支持的，添加它应该是一致的，并进行碎片整理。</li></ul><p id="6e27" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">不同意什么？提交一期<a class="ae ks" href="https://github.com/goatlang/goat/issues/new" rel="noopener ugc nofollow" target="_blank">新山羊</a>让我们知道。</p><h2 id="db33" class="kt ku iq bd kv kw kx dn ky kz la dp lb kf lc ld le kj lf lg lh kn li lj lk ll bi translated">其他类似Go的语言呢？</h2><p id="5672" class="pw-post-body-paragraph ju jv iq jw b jx lo jz ka kb lp kd ke kf nj kh ki kj nk kl km kn nl kp kq kr ij bi translated">完全披露——我只是在撰写本系列时才了解到<a class="ae ks" href="https://vlang.io/" rel="noopener ugc nofollow" target="_blank"> vlang </a>项目。在写这些文字的时候，我仍然在学习vlang的细节，并且我一直在寻找类似的项目。据我所知，vlang是一种神奇而强大的语言，拥有设计精美的编译时和运行时环境。话虽如此，<code class="fe oc od oe of b">vlang</code>和类似的举措和山羊<strong class="jw ir">还是有本质区别的。当其他项目致力于创造新的令人兴奋的语言时，<strong class="jw ir"> Goat则致力于增强现有语言的能力</strong>。我相信Go是一种神奇的语言，有强大的运行时和令人惊叹的生态系统。我不想失去这些。</strong></p><h1 id="b568" class="ms ku iq bd kv mt mu mv ky mw mx my lb mz na nb le nc nd ne lh nf ng nh lk ni bi translated">摘要</h1><p id="cfc4" class="pw-post-body-paragraph ju jv iq jw b jx lo jz ka kb lp kd ke kf nj kh ki kj nk kl km kn nl kp kq kr ij bi translated">在总结了Go的优点和缺点之后，我们想把精力集中在定义Goat的规范上——Go的扩展版本，旨在提高安全性和可维护性。这个项目将允许Go保持简单和高效，同时允许社区尝试一种扩展的风格。Goat spec应该由社区来驱动，所以它需要任何Gopher和非Gopher的意见和贡献。<a class="ae ks" href="https://github.com/goatlang/goat/issues" rel="noopener ugc nofollow" target="_blank">来加入讨论</a>。❤️</p></div></div>    
</body>
</html>