<html>
<head>
<title>Flutter Riverpod Example And Guide With Networking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter Riverpod示例和联网指南</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-riverpod-example-and-guide-with-networking-b758af7b646b?source=collection_archive---------0-----------------------#2022-08-11">https://itnext.io/flutter-riverpod-example-and-guide-with-networking-b758af7b646b?source=collection_archive---------0-----------------------#2022-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8ca8ddc0856a071d843dc4555b9b402d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DE6p-0k92fZpX7_m0e-QmQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">带网络的Flutter Riverpod</figcaption></figure><p id="4706" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本系列的第一部分中，我们开始简单使用flutter riverpod，只使用我们已经动态加载的JSON数据。</p><p id="b26e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">由于这在第二部分中很少使用，我们将检查如何使用API将我们在上一篇文章中制作的riverpod结构与网络连接起来。请务必查看上一篇文章，因为我们将不会再从头开始来完成这些步骤。</p><p id="f799" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你刚开始使用flutter或一般的开发，那么最好了解两种最常用的处理数据和后端的类型，一般是Firebase或自定义API (HTTP请求)。</p><p id="02e3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们今天要做什么:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/83cf1e742675b8e49ea197773e776782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CwYVi27SBQzkx5en"/></div></div></figure><h2 id="4af7" class="lg lh iq bd li lj lk dn ll lm ln dp lo kn lp lq lr kr ls lt lu kv lv lw lx ly bi translated"><strong class="ak">什么是HTTP请求？</strong></h2><p id="8829" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">由于我们将在这篇文章中使用HTTP请求和一般的网络，我们应该创建一个快速的概述。</p><blockquote class="me mf mg"><p id="d105" class="kc kd mh ke b kf kg kh ki kj kk kl km mi ko kp kq mj ks kt ku mk kw kx ky kz ij bi translated"><em class="iq">客户端向位于服务器上的主机发出HTTP请求，以接收构建内容所需的资源。</em></p><p id="953d" class="kc kd mh ke b kf kg kh ki kj kk kl km mi ko kp kq mj ks kt ku mk kw kx ky kz ij bi translated">当客户端发出请求时，它们使用包含访问服务器资源所需信息的URL(统一资源定位符)。</p><p id="c025" class="kc kd mh ke b kf kg kh ki kj kk kl km mi ko kp kq mj ks kt ku mk kw kx ky kz ij bi translated"><em class="iq"> HTTPS是传统HTTP请求的扩展，通过使用双向加密来保护请求协议，双向加密使用称为SSL的服务器端数字证书。</em></p></blockquote><p id="b8f7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">关于它们还有很多要学习，但这取决于你在本文中的表现(如果你想写一篇关于HTTP请求和Flutter中的网络的文章，请留下你的评论:)</p><h2 id="3a81" class="lg lh iq bd li lj lk dn ll lm ln dp lo kn lp lq lr kr ls lt lu kv lv lw lx ly bi translated"><strong class="ak">颤振中的联网</strong></h2><p id="f9dd" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">http包提供了发出http请求的最简单的方法。Android、iOS和web都支持这个包。在我们的例子中，我们将使用Dio包。只剩下一件简单的事情要做，这样我们的应用程序就可以发出HTTP请求:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/e9096cc69f19ba6500c6721ecf13c3cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fEJpPFLJFv0uFnnw"/></div></div></figure><h2 id="7497" class="lg lh iq bd li lj lk dn ll lm ln dp lo kn lp lq lr kr ls lt lu kv lv lw lx ly bi translated"><strong class="ak">为什么选择Dio而不是HTTP？</strong></h2><p id="1084" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">Dio提供了很多HTTP所缺乏的功能。拦截器、全局配置、表单数据、请求取消、文件下载、超时等等。</p><p id="1b0b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当我们想到网络时，首先想到的不就是CRUD操作吗？然后让我们看看如何使用DIO包来执行CRUD任务。</p><p id="d7f4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我使用<a class="ae la" href="https://mockapi.io/" rel="noopener ugc nofollow" target="_blank"> mockapi </a>为电影创建crud，其结构与我们在第一篇文章的示例中使用的结构相同，这是我们得到的路径:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/9bd0a68e74adbd19b13d326c5ee55ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BjnFiX9rqwgIFWN5"/></div></div></figure><p id="b5aa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">请记住，我们正在重用你可以在<a class="ae la" href="https://github.com/vbalagovic/flutter-riverpod-example" rel="noopener ugc nofollow" target="_blank"> github </a>上找到的<a class="ae la" href="https://blog.devgenius.io/flutter-riverpod-simple-example-and-guide-f183de192445" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中的代码，克隆它并快速调整。</p><p id="aeb7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">首先，我们更新了我们的电影模型:</p><ul class=""><li id="c624" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">添加了id字段，我们现在有后端</li></ul><p id="7a3c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">首先，我们更新了电影服务:</p><ul class=""><li id="ecc5" class="mn mo iq ke b kf kg kj kk kn mp kr mq kv mr kz ms mt mu mv bi translated">创建Dio客户端(我们稍后将提取它)</li><li id="e069" class="mn mo iq ke b kf mw kj mx kn my kr mz kv na kz ms mt mu mv bi translated">更新了所有给定的函数/路线(除了创建)</li></ul><p id="f2ee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这个例子中，您可以看到如何将Dio用于简单的HTTP请求。我们只是以一种简单的方式将获取和过滤方法从JSON转移到服务器。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="b7eb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">根据服务功能，我们还将更新提供商功能:</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="0c14" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">好了，我们的“后端”功能已经准备好了，现在我们只需要更新前端。Filter使用与我们之前使用的相同的功能，我们添加了具有编辑/删除功能的按钮。在“编辑”按钮上，我们创建了一个带有“保存更改”按钮的表单，该表单包含标题、年份和描述。使用“保存更改”按钮，我们将调用提供商更新功能:</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="88c4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">和删除按钮用对话框确认:</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="7470" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">至此，我们完成了故事的一部分，post功能缺失，因此您可以尝试自己实现它:)好的，我们已经获得了所有数据(通过过滤)、编辑、删除，并且这些都保存在我们的服务器上。除了在本教程中，还有一点没有实现，那就是电影的细节视图。</p><p id="595e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因为为此我们将使用一个新的屏幕，所以我将实现用于路由的<a class="ae la" href="https://pub.dev/packages/go_router" rel="noopener ugc nofollow" target="_blank"> go router </a>包。首先，我们需要创建一个MovieDetails屏幕，这里我们将使用future builder，因为在电影卡标题上，click应用程序在服务器上发送一个请求，以通过id获取移动细节，而加载程序正在细节屏幕上旋转。虽然在当前的例子中，所有的信息都已经被获取，你可以把它发送到一个新的屏幕，但我只给你一个例子，为什么它会是一个问题。想象一下，你想给某人发送一个应用程序中特定电影细节的链接..</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="759b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">哦，对了，go路由器实现:</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="17bd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，在电影卡上，我们可以在任何地方点击以下行，进入详细信息屏幕:</p><blockquote class="me mf mg"><p id="3ced" class="kc kd mh ke b kf kg kh ki kj kk kl km mi ko kp kq mj ks kt ku mk kw kx ky kz ij bi translated"><em class="iq">context . push('/$ { movie . id } ')</em></p></blockquote><p id="28d8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">完整代码可以在<a class="ae la" href="https://github.com/vbalagovic/riverpod_movie_example_networking" rel="noopener ugc nofollow" target="_blank"> github </a>:)上找到</p><p id="15d1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">好了，我们基本上拥有了所有应用的全部功能(在这个x中设计并不重要)，现在它缺少了一些部分。因为它的简单性，这段代码并不像我希望的那样好(因为我认为初学者可以很容易地阅读它，我知道对于非初学者来说这很难，但这是最基本的..).在最后一章中，我们将在一个单独的服务中提取Dio，创建存储库，以便我们可以测试我们的代码，并提取所有内容，这样我们的代码将是干净的。</p><p id="ac5c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">直到关于这个主题的下一篇文章，我目前正在写flutter web文章，因为我们刚刚推出了用flutter编写的<a class="ae la" href="https://bargybud.com/" rel="noopener ugc nofollow" target="_blank"> BargyBud </a>网站，我们非常想尝试一下:)你也可以查看用于<a class="ae la" href="https://play.google.com/store/apps/details?id=com.bargybud.app&amp;hl=hr&amp;gl=US" rel="noopener ugc nofollow" target="_blank"> Android </a>或<a class="ae la" href="https://apps.apple.com/us/app/bargybud/id1632586489" rel="noopener ugc nofollow" target="_blank"> iOS </a>:)的flutter应用程序</p></div></div>    
</body>
</html>