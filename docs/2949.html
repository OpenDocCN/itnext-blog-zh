<html>
<head>
<title>Scalable Redux architecture for React Projects with Redux-Saga and Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Redux-Saga和Typescript的React项目的可扩展Redux架构</h1>
<blockquote>原文：<a href="https://itnext.io/scalable-redux-architecture-for-react-projects-with-redux-saga-and-typescript-f6afe1dece9b?source=collection_archive---------1-----------------------#2019-09-05">https://itnext.io/scalable-redux-architecture-for-react-projects-with-redux-saga-and-typescript-f6afe1dece9b?source=collection_archive---------1-----------------------#2019-09-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="32b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Redux是一个在Javascript应用程序中管理数据状态和UI状态的工具。在本教程中，我们将看到如何组织由Redux组成的项目的结构。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/cea4601884b0f5e264329e938e97df4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMwSIreMimFz6B0OmmXaDg.jpeg"/></div></div></figure><p id="3944" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="la"> Redux是JavaScript应用程序的可预测状态容器。它帮助您编写行为一致、在不同环境(客户机、服务器和本机)中运行、易于测试的应用程序。——</em><a class="ae lb" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"><em class="la">https://redux.js.org/</em></a></p><p id="89d8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然Redux在很大程度上与React相关联，但它也可以与其他库一起使用，如Vue、Meteor、Angular等。它也是轻量级的，大约2KB(包括依赖项)，所以您不必担心应用程序变得太大。</p><p id="4d6b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">既然我们已经解决了Redux定义的问题，那么让我们开始开发一个经过测试的、严格类型化的、可伸缩的架构吧！</p></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="f47e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您想直接跳到架构规范，请转到“Redux项目的架构设计”一节。你也可以从<a class="ae lb" href="https://github.com/ersah123/scalable-react-redux-saga" rel="noopener ugc nofollow" target="_blank">这里</a>看一看我为本教程创建的回购。</p><h2 id="bcb9" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">内容</h2><ul class=""><li id="c04b" class="mc md it js b jt me jx mf kb mg kf mh kj mi kn mj mk ml mm bi translated"><a class="ae lb" href="#a23d" rel="noopener ugc nofollow">项目设置</a></li><li id="5af1" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated"><a class="ae lb" href="#310f" rel="noopener ugc nofollow">将Redux整合到项目中</a></li><li id="076f" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated"><a class="ae lb" href="#787c" rel="noopener ugc nofollow">构建Redux </a></li></ul><h2 id="3167" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">先决条件</h2><ul class=""><li id="fa72" class="mc md it js b jt me jx mf kb mg kf mh kj mi kn mj mk ml mm bi translated"><code class="fe ms mt mu mv b">Node v10.x.x</code></li></ul><h1 id="a23d" class="mw lk it bd ll mx my mz lo na nb nc lr nd ne nf lu ng nh ni lx nj nk nl ma nm bi translated">项目设置</h1><p id="2b7d" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">我们将使用带有typescript的<code class="fe ms mt mu mv b">create-react-app</code>开始，但是这个架构也可以应用于任何现有的项目:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="14aa" class="lj lk it mv b gy nu nv l nw nx">$ yarn create react-app my-app --typescript</span></pre><p id="5ecc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我们可以转到项目目录并启动应用程序:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="62d1" class="lj lk it mv b gy nu nv l nw nx">$ yarn start</span></pre><h2 id="9bfc" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">安装依赖项</h2><p id="e1d8" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">显然，我们需要将redux相关的依赖项安装在项目根目录中另一个命令行的代码库中:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="6233" class="lj lk it mv b gy nu nv l nw nx">$ yarn add redux@4.0.4 react-redux@7.1.0 redux-saga@1.0.5 redux-saga-test-plan@4.0.0-beta.4 typesafe-actions@4.4.2 enzyme@3.10.0 redux-mock-store@1.5.3 enzyme-adapter-react-16@1.14.0</span></pre><p id="2f23" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们也添加开发依赖项:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="70d4" class="lj lk it mv b gy nu nv l nw nx">$ yarn add --dev <!-- -->@types/react-redux@<!-- -->7.1.1 @types/enzyme@3.10.3 @types/redux-mock-store@1.0.1 @types/enzyme-adapter-react-16@1.0.5</span></pre><h1 id="310f" class="mw lk it bd ll mx my mz lo na nb nc lr nd ne nf lu ng nh ni lx nj nk nl ma nm bi translated">将Redux集成到项目中</h1><p id="7b29" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">安装后，我们需要对现有代码进行一些更改，为Redux架构准备代码基础。首先，请清除<code class="fe ms mt mu mv b">return</code>中的所有标记。然后用redux存储和容器为redux提供程序添加标记。最终的App.tsx将如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="7b89" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将在<code class="fe ms mt mu mv b">src</code>目录下创建<code class="fe ms mt mu mv b">state</code>文件夹来保存我们的商店配置文件和Redux商店的初始化。</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="f055" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/state &amp;&amp; touch src/state/index.ts</span></pre><p id="57db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了能够基于环境配置中间件，让我们创建一个索引文件来导入存储配置。在本教程中，我们将停留在开发环境中:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="59c0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们需要在同一个目录中创建商店初始化器的开发配置:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="ae83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">出于状态模块化的目的，我们将遵循基于特征的文件夹结构方法。叫做鸭子。你可以在这里了解更多这种模式:<a class="oa ob ep" href="https://medium.com/u/8b318225c16a?source=post_page-----f6afe1dece9b--------------------------------" rel="noopener" target="_blank">freeCodeCamp</a>:<a class="ae lb" href="https://www.freecodecamp.org/news/scaling-your-redux-app-with-ducks-6115955638be/" rel="noopener ugc nofollow" target="_blank">https://www . freeCodeCamp . org/news/scaling-your-redux-app-with-ducks-6115955638 be/</a></p><p id="a82f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，让我们创建我们的第一个鸭子文件夹，它将包含其他鸭子(功能文件夹):</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="23c4" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/state/ducks &amp;&amp; touch src/state/ducks/index.ts</span></pre><p id="1770" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我们需要创建定义应用程序状态的根reducer:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h1 id="787c" class="mw lk it bd ll mx my mz lo na nb nc lr nd ne nf lu ng nh ni lx nj nk nl ma nm bi translated">构建Redux项目</h1><p id="f651" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated"><em class="la"> Redux架构围绕着严格的单向数据流。</em></p><p id="a166" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="la">这意味着应用程序中的所有数据都遵循相同的生命周期模式，使应用程序的逻辑更可预测、更易于理解。它还鼓励数据标准化，这样您就不会有多个彼此不知道的相同数据的独立副本。——</em><a class="ae lb" href="https://redux.js.org/basics/data-flow" rel="noopener ugc nofollow" target="_blank">https://redux.js.org/basics/data-flow</a></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/0c3f64caa17509ceccfc97dd8c2abb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VxWA0VFZq4NZG1mI20PYDw.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk translated">具有Redux-Saga的通用Redux架构</figcaption></figure><p id="92ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在该架构中，数据流如下:</p><ul class=""><li id="b6f0" class="mc md it js b jt ju jx jy kb oh kf oi kj oj kn mj mk ml mm bi translated">组件处理一个事件并调度一个操作</li><li id="2911" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">Redux调用缩减器函数</li><li id="a437" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">相关的减速器功能更新状态</li><li id="fde5" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">监听该状态片变化的容器得到通知</li><li id="425a" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">容器用新的状态和属性更新组件</li><li id="302e" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">如果改变了属性，组件将被重新渲染</li></ul><p id="4b33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与此同时，传奇人物正在倾听某些行动并处理副作用。按产品，它会调度新的动作。</p><p id="7cb4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们继续实现数据流。首先，我们需要一个公共API来消费。为此，我们将使用<a class="ae lb" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSONPlaceholder </a>。</p><p id="fbdc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了保存api URL，我们需要创建。环境文件。添加以下行后，不要忘记重新启动npm服务器:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="52d7" class="lj lk it mv b gy nu nv l nw nx">// .env</span><span id="d7d0" class="lj lk it mv b gy ok nv l nw nx">REACT_APP_JSON_PLACEHOLDER=<a class="ae lb" href="https://jsonplaceholder.typicode.com" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com</a></span></pre><p id="36c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了简单起见，我们将在本教程中只实现GET请求。但是您可以通过创建携带有效负载的新动作来发送到API端点，从而轻松地进行POST。为了使其类型安全，您还应该在此基础上更改操作类型。基于此，我们的可扩展架构和文件夹结构如下所示:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="cc04" class="lj lk it mv b gy nu nv l nw nx">src<br/>├── App.css<br/>├── App.test.tsx<br/>├── App.tsx<br/>├── components<br/>│   ├── post.tsx<br/>│   └── postList.tsx<br/>├── containers<br/>│   ├── __tests__<br/>│   │   └── postList.container.spec.tsx<br/>│   └── postList.tsx<br/>├── index.css<br/>├── index.tsx<br/>├── logo.svg<br/>├── react-app-env.d.ts<br/>├── serviceWorker.ts<br/>└── state<br/>    ├── configureStore.dev.ts<br/>    ├── ducks<br/>    │   ├── index.ts<br/>    │   └── post<br/>    │       ├── __tests__<br/>    │       │   ├── __mockData__<br/>    |       |   |  └── postsData.json    <br/>    |       │   ├── actions.spec.ts<br/>    │       │   ├── reducers.spec.ts<br/>    │       │   └── sagas.spec.ts<br/>    │       ├── actions.ts<br/>    │       ├── reducers.ts<br/>    │       ├── sagas.ts<br/>    │       └── types.ts<br/>    ├── index.ts<br/>    ├── middlewares<br/>    │   └── saga.ts<br/>    └── utils<br/>        └── apiCaller.ts</span></pre><p id="5e04" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为我们将在API中对<code class="fe ms mt mu mv b">posts</code>进行操作，所以文件夹名将被称为‘post’。还将在其中创建测试和模拟数据文件夹，如下所示:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="c7ca" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/state/ducks/post src/state/ducks/post/__tests__ src/state/ducks/post/__tests__/__mockData__</span></pre><p id="0a7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，我们需要在这个文件夹中存储该特性的相关类型。将相关类型添加到类型文件中:类型</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="04d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将需要一些模拟数据用于我们的<code class="fe ms mt mu mv b">post</code>特性，看起来像这样:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="976a" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">行动</h2><p id="3935" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">我们将从编写我们的<code class="fe ms mt mu mv b">post</code>特性的动作开始。为了简单起见，我们不会在本教程中讨论错误处理。我们将首先开始编写测试:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="39a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，写出实际行动:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="5427" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">还原剂</h2><p id="f338" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">我们需要减速器来塑造我们的国家。让我们从测试开始实现:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9028" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">实际的减速器将如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9f3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过这样做，redux已经设置好并可以使用了。下一步是如何处理副作用。</p><h2 id="e720" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">中间件</h2><p id="6ade" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">因为我们希望我们的行为和减少者是纯净的，我们需要在别的地方处理它。最佳实践是使用某种能够监听动作并将其他动作分派给Redux的中间件。有一些选项，但对于本教程，我们将使用Redux-Saga。这也是我们执行Ajax调用的地方。</p><p id="c6e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了保存我们的中间件，我们将在<code class="fe ms mt mu mv b">state</code>目录下创建一个名为<code class="fe ms mt mu mv b">middlewares</code>的新文件夹:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="5f0c" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/state/middlewares &amp;&amp; touch src/state/middlewares/sagas.ts</span></pre><p id="34b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们创建一个saga中间件，用于商店初始化:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="7676" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要使用Redux-saga，我们需要添加新的中间件来存储配置，如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="3c7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">和往常一样，我们将从编写测试开始。使用<code class="fe ms mt mu mv b">redux-saga-test-plan</code>包为传奇编写测试非常简单明了:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="7b43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将写我们的第一个传奇故事来听某些动作:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="8b10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还需要创建一个根传奇来派生我们代码库中的所有特性传奇:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="72f9" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">Ajax调用</h2><p id="3d04" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">我们将首先创建一个新文件夹来保存我们的状态实用程序:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="b215" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/state/utils &amp;&amp; touch src/state/utils/apiCaller.ts</span></pre><p id="6209" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了调用API，我们将使用内置方法<code class="fe ms mt mu mv b">fetch</code>。我们将通过创建一个名为<code class="fe ms mt mu mv b">apiCaller</code>的实用函数来实现这一点。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="6dc8" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">容器</h2><p id="24d1" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">作为最佳实践，我们应该区分容器组件和表示组件。容器组件是Redux存储和表示组件之间的桥梁。容器组件从redux store获取数据，并将数据和动作提供给表示组件。他们倾向于有状态。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/f5cc1fea3fd76465baca99904ee1b417.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*p14FTYpaa0SrvdlxztwWtA.jpeg"/></div></figure><p id="e275" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为容器可以监听多个状态片，所以它们应该进入自己的目录。</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="5a24" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/containers src/containers/__test__</span></pre><p id="07a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们首先开始为容器编写测试:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="be9d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来是实际的集装箱编码:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="f6b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们来创建演示组件:</p><pre class="kp kq kr ks gt nq mv nr ns aw nt bi"><span id="0666" class="lj lk it mv b gy nu nv l nw nx">$ mkdir src/components</span></pre><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="dbb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这样，我们完成了Redux数据流和架构。无论您向这个代码库添加多少功能，复杂性几乎都是一样的。</p><h2 id="73b4" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">下一步是什么？</h2><p id="9c08" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">您可以安装一些工具和依赖项，并将其作为中间件来使用，以简化您的开发并帮助新手更快地上手。</p><ul class=""><li id="3dfc" class="mc md it js b jt ju jx jy kb oh kf oi kj oj kn mj mk ml mm bi translated">冗余记录器</li><li id="c71b" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">redux-devtools-扩展</li></ul><h2 id="3c56" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">结论</h2><p id="f8b5" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">随着我们的前进，我们会根据我们的需求努力设计项目。这使得我们的项目更具可持续性。在这样做的同时，我们学习和总结我们所学到的东西，以便我们可以在未来的项目中重复使用和改进。</p><p id="b072" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Redux已经走过了漫长的道路，并且仍然保持强劲。Redux至今仍很流行，并广泛应用于生产中的许多项目。我们使用的这种架构仍然是最新的，并且工作正常。希望这篇教程能对你的下一个项目有所帮助。</p><p id="6ac1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">干杯！</p></div></div>    
</body>
</html>