<html>
<head>
<title>Build a Tic Tac Toe Game With React/Redux, Babel, Webpack and Material-UI (Part 4 of 5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React/Redux、Babel、Webpack和Material-UI构建一个井字游戏(第4部分，共5部分)</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-4-of-5-f7cb4a611481?source=collection_archive---------8-----------------------#2018-05-02">https://itnext.io/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-4-of-5-f7cb4a611481?source=collection_archive---------8-----------------------#2018-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><ul class=""><li id="61b7" class="ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><a class="ae km" href="https://medium.com/@vanister/learn-react-redux-by-making-a-tic-tac-toe-game-part-1-of-5-dc9111ca09ad" rel="noopener">第1部分—项目设置、依赖关系和Hello Tic Tac Toe！app。</a></li><li id="8520" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated"><a class="ae km" rel="noopener ugc nofollow" target="_blank" href="/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-2-of-5-1608f247690d">第二部分——游戏结构、状态和测试。</a></li><li id="c098" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated"><a class="ae km" rel="noopener ugc nofollow" target="_blank" href="/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-3-of-5-9e5fd9b02fcf">第三部分——游戏性和基本风格。</a></li><li id="f6f3" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated">第4部分——提示、新游戏和更多风格。</li><li id="e7fa" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated"><a class="ae km" rel="noopener ugc nofollow" target="_blank" href="/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-5-of-5-fe2ece35b839">第5部分——清理和事后反思</a>。</li></ul></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="b960" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated"><strong class="jw ir">更新2019年7月22日:</strong>项目依赖关系更新。</p><ul class=""><li id="dabf" class="ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">巴别塔7.x</li><li id="86e0" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated">React 16.x</li><li id="9eae" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated">Redux 4.x</li><li id="90a3" class="ju jv iq jw b jx kn jz ko kb kp kd kq kf kr kh ki kj kk kl bi translated">Webpack 4.x</li></ul><p id="1510" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">查看<a class="ae km" href="https://github.com/vanister/medium.com/blob/part-4/tic-tac-toe/package.json" rel="noopener ugc nofollow" target="_blank"> package.json </a>获取更新的完整列表。</p></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="c8fd" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">在第3部分中，我们添加了材质-用户界面和组件布局，并玩了一个完整的游戏。在这一部分，我们将添加完成游戏所需的剩余组件和样式。</p><h2 id="6c7e" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">标题栏和菜单组件</h2><p id="116a" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">为了让我们能够开始一个新游戏，而不必先玩完整个游戏，我们需要添加一个标题栏和一个菜单组件。</p><p id="bc38" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">标题栏组件是一个容器组件，它将显示游戏的标题并保存游戏的菜单组件。我们认为它是一个容器组件，因为它将保存本地状态并响应来自菜单交互的事件。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="2c0d" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">Menu组件是一个演示组件，它显示一个菜单并调用从标题栏组件传递给它的事件处理程序。</p><p id="d86d" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">我选择了<code class="fe mm mn mo mp b">fiber_new</code>图标，因为它有“新”的字样。你可以从<a class="ae km" href="https://material.io/icons/" rel="noopener ugc nofollow" target="_blank">材质图标</a>中选择任何你想要的图标作为新游戏物品的占位符。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="86ac" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">更新应用程序组件</h2><p id="8d56" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">现在我们已经创建了标题栏和菜单组件，我们将通过用标题栏替换占位符标题来更新应用程序组件。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/f5f8fec64aaa6d341a025bb07fdfdb94.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/1*7O3wW6JipTnQjnHCHpaiiw.gif"/></div></figure><p id="fd27" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">如果我们现在运行游戏，我们应该会看到一个蓝色的标题栏，左侧有一个汉堡菜单，我们可以在这里切换“新游戏”菜单。</p><h2 id="0a57" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">PlayerInfo和GameoverDialog组件</h2><p id="ac31" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">接下来，我们将添加PlayerInfo和GameoverDialog。这将允许我们看到谁是当前的玩家，并在游戏结束时显示一个对话框。该对话框还允许我们触发一个新游戏，而不必关闭它，并使用“新游戏”菜单。</p><p id="3c3d" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">PlayerInfo组件是一个简单的表示组件，它接受一个<code class="fe mm mn mo mp b">player</code>和<code class="fe mm mn mo mp b">gameover</code>并显示当前玩家或游戏结束消息。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="8e2e" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">Gameover对话框，也是一个演示组件，将显示一个获胜的玩家或平局游戏消息，并根据玩家开始新游戏或关闭对话框的动作触发事件。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="0c04" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">更新操作</h2><p id="a87d" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">因为我们要从游戏组件中显示游戏结束对话框，所以我们需要更新<code class="fe mm mn mo mp b">checkWinner</code>操作，如果有赢家，返回一个布尔值。</p><p id="7340" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">在游戏鸭的<code class="fe mm mn mo mp b">test.js</code>文件中，通过将<code class="fe mm mn mo mp b">checkWinner</code>函数的返回值赋给一个变量来更新我们为<code class="fe mm mn mo mp b">checkWinner</code>编写的测试。添加<code class="fe mm mn mo mp b">expect</code>语句，检查每个测试是否返回正确的值。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="dbac" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">打开<code class="fe mm mn mo mp b">operations.js</code>文件，为<code class="fe mm mn mo mp b">hasWinner</code>添加一个变量，将其设置为<code class="fe mm mn mo mp b">true</code>或<code class="fe mm mn mo mp b">false</code>，并将其返回给调用者。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="483b" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">运行<code class="fe mm mn mo mp b">yarn test</code>以确保我们所有的测试仍然通过。</p><h2 id="84c4" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">更新游戏组件</h2><p id="7dc7" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">最后一步是用PlayerInfo和Gameover对话框组件更新游戏组件。</p><p id="7bce" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">像标题栏一样，我们将保留一些本地状态来跟踪是否在游戏结束时显示或隐藏游戏结束对话框。我们将添加两个新的事件处理程序来处理当对话框想要关闭时，以及当玩家点击“是”或“否”时</p><p id="2212" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">当玩家点击“否”或在对话框外的灰色空间(平板电脑或更大的屏幕)时，我们通过将本地状态<code class="fe mm mn mo mp b">showDialog</code>设置为<code class="fe mm mn mo mp b">false</code>来处理。如果玩家点击“是”,我们将调度<code class="fe mm mn mo mp b">newGame</code>动作开始新游戏。</p><p id="b383" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">最后，我们用PlayerInfo组件替换旧的玩家信息。</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/ce878363e4cc22fd9d67903d8de45aa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*FYj3heOo3zH-N_9wdeSG2w.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">手机游戏结束对话</figcaption></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/639c82f8c96207691d1fe4755f2f06fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9jsmHUJ3FAQZ-Zl4kad52w.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">平板电脑或更大的游戏结束对话框</figcaption></figure><h2 id="8646" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">玩完整个游戏</h2><p id="9343" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">运行<code class="fe mm mn mo mp b">yarn start</code>启动完成的游戏。</p><p id="ce1d" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">由于我们首先关注的是移动设备，所以让我们尝试使用Chrome的设备仿真在移动设备上进行游戏。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/628fdc76b4d9e48a0ea85c64ce4f069d.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/1*t2qQ3JWWLICeG1GbSB1_hw.gif"/></div></figure><h2 id="addd" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">可选:部署到Surge.sh</h2><p id="c498" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">如果你真的想在移动设备上玩游戏，你可以在<a class="ae km" href="http://surge.sh/" rel="noopener ugc nofollow" target="_blank"> surge.sh </a>上创建一个免费帐户，安装surge npm模块，然后将<code class="fe mm mn mo mp b">./dist</code>目录部署到一个定制的surge域。</p><p id="e7d4" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">我会用一个新的脚本来更新<code class="fe mm mn mo mp b">package.json</code>文件，你所需要做的就是运行它，一旦你的账户被创建，就可以发布它。</p><pre class="mf mg mh mi gt nd mp ne nf aw ng bi"><span id="3973" class="lh li iq mp b gy nh ni l nj nk">// install surge globally so you can use it anywhere<br/>yarn global add surge</span><span id="b14f" class="lh li iq mp b gy nl ni l nj nk">// then we run the script to publish<br/>yarn surge</span><span id="e460" class="lh li iq mp b gy nl ni l nj nk">// console output:<br/>$ yarn build &amp;&amp; surge ./dist<br/>$ yarn clean &amp;&amp; webpack --config webpack.config.js --progress<br/>$ rimraf ./dist</span><span id="3571" class="lh li iq mp b gy nl ni l nj nk">// build output:<br/>// ...<br/>// ...</span><span id="2765" class="lh li iq mp b gy nl ni l nj nk">// surge sample output:<br/>Running as &lt;your_account&gt;</span><span id="05e8" class="lh li iq mp b gy nl ni l nj nk">project: ./dist</span><span id="f598" class="lh li iq mp b gy nl ni l nj nk">domain: &lt;autogenerated-domain&gt;.surge.sh</span><span id="777e" class="lh li iq mp b gy nl ni l nj nk">upload: [====================] 100% eta: 0.0s (9 files, 3238471 bytes)</span><span id="ad33" class="lh li iq mp b gy nl ni l nj nk">CDN: [====================] 100%</span><span id="f15c" class="lh li iq mp b gy nl ni l nj nk">IP: &lt;surge_ip_address&gt;</span><span id="92b4" class="lh li iq mp b gy nl ni l nj nk">Success! - Published to &lt;autogenerated-domain&gt;.surge.sh</span></pre><p id="85c3" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">运行，<code class="fe mm mn mo mp b">yarn surge</code>，会构建app，然后发布到surge。我已经使用surge将第4部分的代码发布到下面的url。</p><div class="nm nn gp gr no np"><a href="https://super-advice.surge.sh/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">井字游戏—第4部分</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">注意:这可能会在几周后过期…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">超级建议. surge.sh</p></div></div></div></a></div><h2 id="4b84" class="lh li iq bd lj lk ll dn lm ln lo dp lp kb lq lr ls kd lt lu lv kf lw lx ly lz bi translated">未完待续…</h2><p id="ac0a" class="pw-post-body-paragraph ks kt iq jw b jx ma ku kv jz mb kw kx kb mc kz la kd md lc ld kf me lf lg kh ij bi translated">就这样吧，下一集也是最后一集再见。</p><p id="5b4f" class="pw-post-body-paragraph ks kt iq jw b jx jy ku kv jz ka kw kx kb ky kz la kd lb lc ld kf le lf lg kh ij bi translated">本部分来源:【https://github.com/vanister/medium.com/tree/part-4 T2】</p></div></div>    
</body>
</html>