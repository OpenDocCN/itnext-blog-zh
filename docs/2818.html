<html>
<head>
<title>Building CLI Programs in Dart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Dart中构建CLI程序</h1>
<blockquote>原文：<a href="https://itnext.io/building-cli-programs-in-dart-81aaa85caeee?source=collection_archive---------2-----------------------#2019-08-08">https://itnext.io/building-cli-programs-in-dart-81aaa85caeee?source=collection_archive---------2-----------------------#2019-08-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e66f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用Dart构建简单的命令行工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8da492bfe5a5ce0e1f022f42f8395f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1nrqyeBYg4xzkXDZJlxiTg.png"/></div></div></figure><h2 id="0747" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍</h2><p id="2005" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">在本文中，我们将研究用Dart构建简单命令行工具的过程。如果你还不熟悉<a class="ae mj" href="https://dart.dev" rel="noopener ugc nofollow" target="_blank"> Dart </a>，它是一种优秀的语言，具有现代特性，适合构建易于维护和升级的高性能软件。</p><p id="6f39" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">示例项目将演示典型CLI应用程序的简单功能，如参数解析和基本文件系统操作。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="c1cd" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">入门指南</h2><p id="fc6d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">如果您还没有Dart环境，请转到安装页面。要获得项目源代码的副本，请点击这里查看GitHub repo<a class="ae mj" href="https://github.com/kenreilly/dart-cli-tools-demo" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="48b1" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">这个项目是用stagehand创建的，stage hand是一个很棒的Dart包，可以帮助设置Dart和Flutter项目。要使用Dart安装stagehand来构建您自己的命令行(和其他)应用程序:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="4c42" class="ku kv it mx b gy nb nc l nd ne">$ pub global activate stagehand</span></pre><p id="6d10" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">Stagehand为项目类型提供了几个选项，其中之一是<code class="fe nf ng nh mx b">console-full</code>(这是用来创建这个项目的)。要使用stagehand创建命令行应用程序的基本起点，请执行以下操作:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="108a" class="ku kv it mx b gy nb nc l nd ne">$ stagehand console-full <em class="ni">your-project-name</em></span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="b55d" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">应用程序入口点</h2><p id="18f7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">这个程序的主入口点是<strong class="ls iu"> bin/main.dart: </strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="5eb8" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">这是一个非常简单的应用程序，所以这里就不多说了。在更复杂的项目中，这是执行配置和初始化的地方。在这个例子中，参数被简单地传递给<strong class="ls iu"><em class="ni">demo . parse(</em></strong><em class="ni">args</em><strong class="ls iu"><em class="ni">)</em></strong>)。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="d3f1" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">演示类</strong></h2><p id="0ce6" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">下一个要检查的文件是<strong class="ls iu"> lib/demo.dart </strong>,在这里应用程序接受命令行参数并确定要执行的操作，或者在传入不正确的参数时显示使用信息:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="1d34" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">在<strong class="ls iu"> Demo </strong>类中有一些静态方法来处理一些简单的任务，例如在“hello world”示例中打印本地主机名，显示应用程序的使用信息，以及根据传递给应用程序的命令行参数来确定要执行的操作。有像<a class="ae mj" href="https://pub.dev/packages/args" rel="noopener ugc nofollow" target="_blank"> args </a>这样的包可以用来处理参数解析，但是对于这个非常小的项目，我选择保持包的依赖性最小(零)。</p><p id="41d6" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">如果在<code class="fe nf ng nh mx b">scan</code>命令之后传入了第二个参数，那么这个参数将被传递给一个简单的文件系统扫描器(我们接下来将研究它),以对给定的<em class="ni">路径</em>执行基本的目录扫描并显示结果。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="7cb6" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">扫描仪类</h2><p id="86bd" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">我们项目中的最后一个文件是位于<strong class="ls iu"> lib/scanner.dart </strong>中的Scanner类:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="17de" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">在<strong class="ls iu">扫描器</strong>类中，有一个静态的<strong class="ls iu">扫描</strong>方法，它采用一个<em class="ni">路径</em>并开始遍历位于该路径的目录结构。这使用了一个非常简化的<a class="ae mj" href="https://en.wikipedia.org/wiki/Factory_method_pattern" rel="noopener ugc nofollow" target="_blank">工厂方法</a>设计模式，因为它使用了一个静态方法在内部创建自己的实例。当然有许多设计模式存在，这只是其中的一个例子。</p><p id="385a" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">扫描仪的工作方式是从提供的路径开始，通过检索该路径的<a class="ae mj" href="https://api.dartlang.org/stable/2.4.1/dart-io/FileSystemEntity-class.html" rel="noopener ugc nofollow" target="_blank">File system ity</a>对象的列表来遍历该路径，对项目运行<strong class="ls iu"> for </strong>循环，然后如果项目是<a class="ae mj" href="https://api.dartlang.org/stable/2.4.1/dart-io/Directory-class.html" rel="noopener ugc nofollow" target="_blank">目录</a>则遍历该项目，或者如果项目是<a class="ae mj" href="https://api.dart.dev/stable/2.4.1/dart-io/File-class.html" rel="noopener ugc nofollow" target="_blank">文件</a>则打印文件大小。这个条目也可以是一个<a class="ae mj" href="https://api.dart.dev/stable/2.4.1/dart-io/Link-class.html" rel="noopener ugc nofollow" target="_blank">链接</a>(我们的简单例子没有这样的案例，但是可以很容易地添加进去)。</p><p id="b1b4" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">这就是我们的基本文件系统<strong class="ls iu">扫描器</strong>及其操作。这个实用程序可以扩展为执行任意数量的文件系统任务(比如文件搜索或文件类型计数)，接受附加参数，或者处理其他类型的任务。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/f3659dd09809233a2c76b91d210b8fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xYOH_-9ipYqTBtTpwECxUA.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">运行中的超级基本文件系统扫描器</figcaption></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="73f2" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">结论</strong></h2><p id="aac5" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">我希望您喜欢这篇关于使用Dart创建简单命令行工具的文章，Dart是一种功能强大、灵活且极具表现力的语言，同时也拥有<a class="ae mj" href="https://api.dart.dev/stable/2.4.1/index.html" rel="noopener ugc nofollow" target="_blank">优秀的文档</a>，对于许多不同的应用程序都很有用，包括HTTP服务、图像处理器、备份工具以及在现代开发和部署生态系统中运行良好的各种其他实用程序。例如，我的公司在Heroku上部署了一些用Dart开发的基本服务(有关在Heroku上配置构建包和部署Dart应用程序的更多信息，请参见本文)。</p><p id="c7aa" class="pw-post-body-paragraph lq lr it ls b lt mk ju lv lw ml jx ly ld mm ma mb lh mn md me ll mo mg mh mi im bi translated">感谢您的阅读，祝您的下一个Dart项目好运！</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><blockquote class="nq"><p id="a3aa" class="nr ns it bd nt nu nv nw nx ny nz mi dk translated">肯尼斯·雷利(<a class="ae mj" href="https://twitter.com/8_bit_hacker" rel="noopener ugc nofollow" target="_blank"> 8_bit_hacker </a>)是<a class="ae mj" href="https://lvl-up.tech/" rel="noopener ugc nofollow" target="_blank"> LevelUP </a>的CTO</p></blockquote></div></div>    
</body>
</html>