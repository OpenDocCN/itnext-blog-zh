<html>
<head>
<title>Angular End To End (e2e) Testing With Cypress.io</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cypress.io进行角度端到端(e2e)测试</h1>
<blockquote>原文：<a href="https://itnext.io/angular-end-to-end-e2e-testing-with-cypress-io-75333125de4d?source=collection_archive---------3-----------------------#2020-01-18">https://itnext.io/angular-end-to-end-e2e-testing-with-cypress-io-75333125de4d?source=collection_archive---------3-----------------------#2020-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/8f4aaa5de725ea16f7af217ec7e1af71.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/0*J5HBVmXvBOQO4ClK"/></div></figure><p id="baa7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">端到端测试是一种从用户角度测试应用程序的方法。它确保应用程序从头到尾都按照预期运行。</p><p id="97b0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我通常在修复一个错误或添加新功能后运行它，以确保没有任何问题。在我以前的公司，我们甚至每天运行端到端测试，并生成一份报告，显示一切是否正常，这样我们就可以在海关遇到错误之前修复它们。</p><p id="6727" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果您正在使用一个角度应用程序，<a class="ae ks" href="https://www.protractortest.org/" rel="noopener ugc nofollow" target="_blank">量角器</a>是默认的端到端测试框架。今天我将使用Cypress作为端到端测试的替代工具。在<a class="ae ks" href="https://christianlydemann.com/why-i-moved-from-protractor-to-cypress/" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·吕德曼的博客</a>上有一个关于量角器问题的有趣帖子。</p><p id="afe7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，我将向你展示如何将柏树添加到你当前的Angular项目中。</p><p id="ba61" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">第一步:安装柏树</strong></p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="4a10" class="lc ld iq ky b gy le lf l lg lh">yarn add -D cypress @cypress/webpack-preprocessor @types/cypress ts-loader</span></pre><p id="d4a4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后编辑package.json脚本</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="709d" class="lc ld iq ky b gy le lf l lg lh">// package.json </span><span id="4141" class="lc ld iq ky b gy li lf l lg lh">“script”: {<br/>  ...<br/>  "cypress": "cypress open”<br/>}</span></pre><p id="2442" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">第二步:打开样本测试用例</strong></p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="b99d" class="lc ld iq ky b gy le lf l lg lh">yarn cypress</span></pre><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lj"><img src="../Images/8384b8e0409f87d17d800196493abef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlPsJY4zjKnl1awwyROCmQ.png"/></div></div></figure><p id="e750" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这些是供参考的样本测试文件。</p><p id="9a26" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">步骤3:创建您的第一个测试</strong></p><p id="2058" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">测试脚本是JavaScript，您可以通过编辑tsconfig.json来更改为TypeScript</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="97f0" class="lc ld iq ky b gy le lf l lg lh">// cypress/tsconfig.json</span><span id="7e4e" class="lc ld iq ky b gy li lf l lg lh">{<br/>  "include": ["integration/*.ts", "../node_modules/cypress"],<br/>  "compilerOptions": {<br/>    "emitDecoratorMetadata": true,<br/>    "experimentalDecorators": true,<br/>    "skipLibCheck": true<br/>  }<br/>}</span></pre><p id="1c5d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">之后，您可以删除示例文件夹，并在<strong class="jw ir"> cypress/integration </strong>文件夹下创建我们的第一个测试。会出现这样的。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lo"><img src="../Images/dbf4b48f404fd6768e8eecbcdab1e76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDGBdAENAZdhVVjKv-eFyQ.png"/></div></div></figure><p id="31c8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然而，还没有测试用例。为了让cypress正常工作，我们需要添加一些测试用例。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="b8c7" class="lc ld iq ky b gy le lf l lg lh">// cypress/integration/home.spec.ts</span><span id="21e2" class="lc ld iq ky b gy li lf l lg lh">describe('Home Page', () =&gt; {<br/>  before(() =&gt; {<br/>    cy.visit('https://localhost:4200')</span><span id="f24f" class="lc ld iq ky b gy li lf l lg lh">  })</span><span id="ff39" class="lc ld iq ky b gy li lf l lg lh">  it('check the title', () =&gt; {<br/>    cy.get('#title')<br/>      .invoke('text')<br/>      .should('equal', 'Dale Nguyen')<br/>  })<br/>})</span></pre><p id="9657" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是运行第一个测试后的结果。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lp"><img src="../Images/13ddbb290c6f39ef00f6bbf7ed83adae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Xp7KlC-w_RRttRTs0WRJg.png"/></div></div></figure><p id="aacb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在您知道了如何用Cypress为Angular项目编写一个简单的测试脚本。你可以从GitHub 查看我的<a class="ae ks" href="https://github.com/dalenguyen/dalenguyen.github.io/commit/d944ea11b03cd8e4c654c8e7c2cb3d9f8e0695bf#diff-01b2c16fa8dbd554bf70d9c179609c03" rel="noopener ugc nofollow" target="_blank">提交。</a></p><p id="0623" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">希望这有所帮助🙂</p></div></div>    
</body>
</html>