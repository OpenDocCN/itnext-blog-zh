<html>
<head>
<title>Acceptance Test Driven Development with React/Redux — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React/Redux的验收测试驱动开发—第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/acceptance-test-driven-test-with-react-redux-part-1-7ae8cb4fab00?source=collection_archive---------2-----------------------#2018-03-09">https://itnext.io/acceptance-test-driven-test-with-react-redux-part-1-7ae8cb4fab00?source=collection_archive---------2-----------------------#2018-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b279120f59d4fbe8d092b9bf73368491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qpbYhNol9fA_mPBg."/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">"六扇颜色各异的门叠放在一起。"由<a class="ae kc" href="https://unsplash.com/@moren?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莫仁许</a>上<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="359d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="lb">更新1 </em> </strong> : <em class="lb">本文是一个系列的一部分，查看完整系列:</em> <a class="ae kc" href="https://medium.com/@juntao.qiu/acceptance-test-driven-test-with-react-redux-part-1-7ae8cb4fab00" rel="noopener">第一部分</a>、<em class="lb"> </em> <a class="ae kc" href="https://medium.com/@juntao.qiu/acceptance-test-driven-test-with-react-redux-part-2-127949a6e47e" rel="noopener">第二部分</a>、<a class="ae kc" href="https://medium.com/@juntao.qiu/acceptance-test-driven-test-with-react-redux-part-3-903e1e58e706" rel="noopener">第三部分</a>、<a class="ae kc" href="https://medium.com/@juntao.qiu/acceptance-test-driven-development-with-react-redux-part-4-5db545953ed3" rel="noopener">第四部分</a>和<a class="ae kc" href="https://medium.com/@juntao.qiu/acceptance-test-driven-development-with-react-redux-part-5-995577d28eff" rel="noopener">第五部分</a>。</p><p id="d68d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="lb">更新2 </em> </strong>:我出版了一本名为<a class="ae kc" href="https://leanpub.com/build-react-app-with-atdd" rel="noopener ugc nofollow" target="_blank"> <em class="lb">用验收测试驱动开发构建React应用</em> </a>的书，涵盖了更多关于ATDD和React的话题和实践，<a class="ae kc" href="https://leanpub.com/build-react-app-with-atdd" rel="noopener ugc nofollow" target="_blank">请查看</a>！</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="ab7d" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">验收测试驱动开发简介</h1><p id="5305" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">在这个系列中，我们将通过一个真实的例子来学习如何使用<code class="fe mm mn mo mp b">Acceptance test driven development</code>来开发一个web应用程序。如你所知，设计一个好的例子最困难的是你必须同时平衡简单性和复杂性。</p><p id="e8e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你的例子太简单，读者在尝试应用书中学到的方法时会遇到很多意想不到的问题；另一方面，如果例子太复杂，学习曲线将会非常陡峭，他们可能不得不学习许多无用的东西，只是为了跟随例子。</p><p id="f532" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了解决这个问题，我将在本系列中向您展示如何使用主流技术开发一些非常经典的场景，包括:</p><ul class=""><li id="24de" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">前端项目脚手架</li><li id="7caf" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">异步请求处理</li><li id="a467" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">组件化</li><li id="b6bf" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">客户端路由</li><li id="9843" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">状态管理</li><li id="fd29" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">自动化测试</li><li id="1441" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">模拟后端服务</li></ul><h1 id="8430" class="lj lk iq bd ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc ni me mf mg bi translated">技术堆栈</h1><p id="a444" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">具体来说，我们将使用以下库</p><h1 id="426c" class="lj lk iq bd ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc ni me mf mg bi translated">JavaSCript库</h1><ul class=""><li id="81ce" class="mq mr iq kf b kg mh kk mi ko nj ks nk kw nl la mv mw mx my bi translated">反应</li><li id="8ef2" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">反应路由器</li><li id="bce9" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">Redux</li><li id="ace2" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">Axios</li></ul><p id="200b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用<code class="fe mm mn mo mp b">React</code>作为客户端渲染库，<code class="fe mm mn mo mp b">React-router</code>用于客户端路由，<code class="fe mm mn mo mp b">Redux</code>用于状态管理，<code class="fe mm mn mo mp b">axios</code>用于网络请求。对于自动化测试，我们引入了以下库:</p><h1 id="895c" class="lj lk iq bd ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc ni me mf mg bi translated">测试</h1><ul class=""><li id="3681" class="mq mr iq kf b kg mh kk mi ko nj ks nk kw nl la mv mw mx my bi translated">操纵木偶的人</li><li id="3630" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">酶</li><li id="65dc" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">玩笑</li><li id="f17f" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">json-server</li></ul><p id="1dc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来自Google的<code class="fe mm mn mo mp b">Puppeteer</code>作为端到端测试(验收测试)，<code class="fe mm mn mo mp b">Jest</code>作为测试运行者，<code class="fe mm mn mo mp b">Airbnb</code>的<code class="fe mm mn mo mp b">Enzyme</code>用于测试<code class="fe mm mn mo mp b">React</code>组件，最后<code class="fe mm mn mo mp b">json-server</code>用于模拟后端API。</p><p id="8b98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于ATDD只是另一种类型的TDD，它遵循红绿重构循环，可以这样描述:</p><ol class=""><li id="056d" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la nm mw mx my bi translated">编写一个失败的验收测试</li><li id="417a" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la nm mw mx my bi translated">用最简单的方法让它过去</li><li id="b5d3" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la nm mw mx my bi translated">基于代码味道(如硬代码、幻数等)进行重构</li><li id="f5b9" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la nm mw mx my bi translated">基于新的需求添加新的测试(如果我们需要新的验收测试，回到1，否则过程就像传统的TDD一样)</li></ol></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="da57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于我们将在本系列中开发的应用程序，它有3个特性，即:</p><h1 id="43a0" class="lj lk iq bd ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc ni me mf mg bi translated">功能1—图书列表</h1><p id="6361" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">在现实世界中，一个特性的粒度要大得多，通常一个特性可能包含许多用户故事，比如图书列表、分页、列表中一本书的样式等等。让我们假设一个故事只有一个故事:</p><p id="b52e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用这种形式描述用户故事:</p><p id="8365" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mm mn mo mp b">As a user, I want to see a list of books, so that I can learn something</code></p><p id="f3d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">验收标准是:</p><ul class=""><li id="36dd" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">假设系统中有<code class="fe mm mn mo mp b">10</code>本书，用户应该在页面上看到<code class="fe mm mn mo mp b">10</code>项</li><li id="7383" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">在每个项目中，应该显示以下信息:书名，作者，价格，评级。</li></ul><h1 id="0058" class="lj lk iq bd ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc ni me mf mg bi translated">功能2 —图书详情</h1><p id="fc50" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated"><code class="fe mm mn mo mp b">As a user, I want to check the detail of a book, so that I can quickly get the brief without reading through it</code></p><p id="a749" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">验收标准是:</p><ul class=""><li id="cac1" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">用户单击图书列表中的项目，将被重定向到详细信息页面</li><li id="d359" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">详细页面上有:书名、作者、价格、描述、评论</li></ul><h1 id="857d" class="lj lk iq bd ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc ni me mf mg bi translated">功能3 —搜索</h1><p id="59f0" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated"><code class="fe mm mn mo mp b">As a user, I want to search book by its name, so that I can quickly find what I'm interested in</code></p><p id="b3ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">验收标准是:</p><ul class=""><li id="273f" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">用户键入<code class="fe mm mn mo mp b">Refactoring</code>作为关键字</li><li id="e3c3" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">只有名称中包含<code class="fe mm mn mo mp b">Refactoring</code>的书籍才会显示在书籍列表中</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="b228" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本系列的后续文章中，我们将逐步添加功能，并尝试严格应用ATDD。</p></div></div>    
</body>
</html>