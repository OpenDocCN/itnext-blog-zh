<html>
<head>
<title>JavaScript loops comparison and performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript循环比较和性能</h1>
<blockquote>原文：<a href="https://itnext.io/javascript-loops-comparison-and-performance-e4e29db87455?source=collection_archive---------4-----------------------#2019-07-29">https://itnext.io/javascript-loops-comparison-and-performance-e4e29db87455?source=collection_archive---------4-----------------------#2019-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5d810fd42a0bc73ea8186d35e2bc80c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xri4cAqJURAqs2XVKlT4JA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank"> Duomly —编程在线课程</a></figcaption></figure><p id="4052" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文最初发表于:<a class="ae kc" href="https://www.blog.duomly.com/for-loop-while-loop-do-while-loop-and-other-javascript-loops-comparison-and-performance/" rel="noopener ugc nofollow" target="_blank">https://www . blog . duomly . com/for-loop-while-loop-do-while-loop-and-other-JavaScript-loops-comparison-and-performance/</a></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="e9fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">循环在软件开发中起着至关重要的作用，它们被用来迭代数组或其他可迭代的元素。在Javascript中，我们有几种不同类型的循环。有时，我们会混淆在特定情况下应该使用哪个循环，以及哪个循环对我们的性能来说是最好的。<br/>在这篇文章中，我将比较Javascript中的循环，描述它们的优缺点，测试它们的速度。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="7447" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">for…循环和。forEach()</h1><p id="a7ad" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">JavaScript中最常见也是最常用的循环，它在代码块中循环指定的次数。让我们来看看for…loop的代码语法:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="480b" class="mu lj iq mq b gy mv mw l mx my">for (let i = 0; i &lt;= 20; i++) {<br/>    <!-- -->console.log(‘www.duomly.com’);<br/>}</span></pre><p id="070e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它由三个元素组成，用分号分隔。首先，我们需要用<strong class="kf ir">初始化器</strong>初始化开始循环的变量:让I = 0；下一个元素是<strong class="kf ir">测试条件</strong>，它检查代码将执行多少次:i &lt; = 20，最后一个元素是<strong class="kf ir"> updater </strong>，它在每次迭代结束时被调用，以增加或减少循环的计数器。这个循环非常灵活，我们可以在我们决定的任何点运行它，也可以在任何点停止它，这也不难理解。for…loop的缺点是不适合任何一种数据，如果理解不好，很容易搞砸。性能:现在让我们简单地测试一下for…循环在不同浏览器中的速度。我将在Chrome、Safari和Firefox中调用以下代码来检查循环速度:</p><p id="0819" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">性能:</strong></p><p id="58af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们简单测试一下for…循环在不同浏览器中的速度。我将在Chrome、Safari和Firefox中调用以下代码来检查循环速度:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="6648" class="mu lj iq mq b gy mv mw l mx my">var counter = 1000;<br/>var t0 = performance.now();<br/>for (let i = 0; i &lt; counter; i++) {<br/>    <!-- -->console.log(‘www.duomly.com’);<br/>}<br/>var t1 = performance.now();<br/>console.log(“For…loop ” + (t1 – t0) + ” milliseconds.”);</span></pre><p id="eb36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">测试结果:</strong></p><p id="9025" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">铬合金:154.41毫秒</p><p id="f36a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">火狐:243.56毫秒</p><p id="402c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Safari: 13毫秒</p><p id="5d28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在for…loop的情况下，还值得一提的是它可以与。forEach()数组方法。让我们来看看它是如何工作的:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="051d" class="mu lj iq mq b gy mv mw l mx my">var array = [10, 20, 30, 40];<br/>array.forEach((item, index) =&gt; { console.log(item) });</span></pre><p id="968a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如你在上面的例子中看到的。forEach()方法也遍历了一个数组，但是这里我们没有指定condition或者updater，这里我们遍历了给定的数组，我们可以返回每一项。让我们检查一下这个方法的性能:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="5eb1" class="mu lj iq mq b gy mv mw l mx my">var array = Array.from(Array(1000).keys(), n =&gt; n + 1);<br/>var t0 = performance.now();<br/>array.forEach((item, index) =&gt; { console.log(‘www.duomly.com’); });<br/>var t1 = performance.now();<br/>console.log(“.forEach() ” + (t1 — t0) + ” milliseconds.”);</span></pre><p id="215f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">测试结果:</strong></p><p id="49b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">铬合金:156.41毫秒</p><p id="481d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">火狐:180毫秒</p><p id="dbb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Safari: 12毫秒</p><p id="881b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为我们测试的结果，我们可以看到。在Firefox和Safari浏览器中，forEach()方法比for循环快，但在Chrome中，它需要多花大约3ms。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="149b" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">while…循环</h1><p id="39cf" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">While…loop非常类似于for…loop，用于重复代码块，直到条件为假。当执行while循环时，首先评估条件，因此，如果条件在第一次迭代时为假，则有可能根本不会调用代码块。让我们来看看while循环语法:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="de0b" class="mu lj iq mq b gy mv mw l mx my">var counter = 20;<br/>var i = 0;<br/>while (i &lt; counter) {<br/>   console.log(‘www.duomly.com’);<br/>   i++<br/>}</span></pre><p id="04ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">while循环也由测试条件、要执行的代码和更新程序组成。while循环的主要优点是，它可以运行很长时间，直到满足条件，但另一方面，它很容易忘记，如果我们不提供条件，将产生错误的结果，最终将出现无限循环，并将导致应用程序冻结。性能:我们来看看while loop能有多快。同样，我将基于以下代码在Chrome、Firefox和Safari上测试它:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="695c" class="mu lj iq mq b gy mv mw l mx my">var counter = 1000;<br/>var i = 0;<br/>var t0 = performance.now();<br/>while(i &lt; counter) {<br/>    <!-- -->console.log(‘www.duomly.com’);<br/>    <!-- -->i++;<br/>}<br/>var t1 = performance.now();<br/>console.log(“While…loop ” + (t1 – t0) + ” milliseconds.”);</span></pre><p id="a1c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">测试结果:</strong></p><p id="3e15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">铬合金:156.46毫秒</p><p id="dc0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">火狐:243.60毫秒</p><p id="7d9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Safari: 18毫秒</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="21ed" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">do…while循环</h1><p id="aa74" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">Do…while是另一种循环，它的工作方式与while循环几乎相同，但有一个小的区别，首先执行代码块，然后检查条件。让我们来看看do while循环的语法:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="7ac5" class="mu lj iq mq b gy mv mw l mx my">var counter = 1000;<br/>do {<br/>    <!-- -->console.log(‘www.duomly.com’);<br/>    <!-- -->i++;<br/>} while (i &lt; counter);</span></pre><p id="4e6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如您在上面的代码片段中看到的，首先我们有要执行的代码，它将至少运行一次，在第一次条件检查之前。在do{}里面我们也有更新程序，下面有一个条件测试。这个循环的最大优点是，即使条件已经为假，代码也可能至少执行一次。性能:让我们测试另一个流行的Javascript循环的速度。我将再次在Chrome、Firefox和Safari三种浏览器上测试它，代码如下:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="12a1" class="mu lj iq mq b gy mv mw l mx my">var t0 = performance.now();<br/>var counter = 1000;<br/>var i = 0;<br/>do {<br/>    <!-- -->console.log(‘www.duomly.com’);<br/>    <!-- -->i++;<br/>} while (i &lt; counter);<br/>var t1 = performance.now();<br/>console.log(“Do…while loop ” + (t1 – t0) + ” milliseconds.”);</span></pre><p id="0cae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">测试结果:</strong></p><p id="1627" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">铬合金:116.19毫秒</p><p id="3e7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">火狐浏览器:189.71毫秒</p><p id="0214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Safari: 18毫秒</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="ac5e" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">对于…在循环中</h1><p id="ac9a" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">For…in循环是Javascript中的另一个For循环，它允许遍历对象属性，代码块将对每个属性执行一次。让我们看一下代码示例:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="7655" class="mu lj iq mq b gy mv mw l mx my">var person = {<br/>    <!-- -->name: ‘Peter’,<br/>    <!-- -->age: 19,<br/>    <!-- -->city: ‘London’,<br/>}</span><span id="3c2d" class="mu lj iq mq b gy mz mw l mx my">for (let item in person) {<br/>    <!-- -->console.log(‘key: ‘, item, ‘value: ‘, person[item]);<br/>}</span></pre><p id="e448" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如您在示例中看到的，循环中的代码被调用的次数与我们在对象中拥有的属性一样多。在这种循环中没有更新器和条件测试。这种循环的最大优点是可以遍历对象，而这在其他循环中是不可能的。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="d380" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">for…of循环</h1><p id="3d82" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">For…of loop是ES6引入的一个新循环，它还允许迭代具有[Symbol.iterator]属性的可迭代集合。它可以与数组或字符串一起使用。让我们看一下代码示例:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="70e4" class="mu lj iq mq b gy mv mw l mx my">var string = ‘Duomly’;</span><span id="ccb4" class="mu lj iq mq b gy mz mw l mx my">for (let char of string) {<br/>    <!-- -->console.log(char)<br/>}</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="3e27" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">绩效总结</h1><p id="29c9" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在本文中，我测试了三个流行的循环和一个数组方法的性能，分别是for循环、while循环、do…while循环和。forEach()方法。我在三种不同的浏览器中，用相似的代码进行了测试，执行次数相同。现在让我们来看一看我们得到的所有数据的摘要。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/de6b89e2c6844245bd4df56a9412d601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6KDyebuS8l0MsE8LzcL4dg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank"> Duomly —编程在线课程</a></figcaption></figure><p id="a8ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有循环都在Chrome浏览器中进行了测试。从表中我们可以看到do…while循环是最快的。For循环是第二快的。forEach()方法是测试环境中最慢的方法。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="1f9c" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="a2d5" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在本文中，我描述了Javascript编程语言中五种不同的循环，并测试了其中三种的性能。其他两个循环以不同的方式工作，所以比较不可靠。循环的使用在软件开发中非常普遍，但是作为开发人员，我们需要记住正确的实现和避免嵌套循环，因为它对性能有不好的影响。此外，在while循环的情况下，重要的是要注意在某些时候需要为假的条件，以免破坏代码。要掌握Javascript循环知识，请加入我们在www.duomly.com<a class="ae kc" href="http://www.duomly.com." rel="noopener ugc nofollow" target="_blank">的Javascript课程。</a>小心你的循环，好好编码。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/14050edb3dd7375abbe70aa365c6a7a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKddjCbEXWrnBWTZ_25CHw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank"> Duomly —编程在线课程</a></figcaption></figure><p id="a8df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读。</p><p id="ef6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">文章由我们的队友安娜提供。</p></div></div>    
</body>
</html>