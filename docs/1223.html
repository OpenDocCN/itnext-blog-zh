<html>
<head>
<title>Angular Universal: How to add multi language support?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular Universal:如何添加多语言支持？</h1>
<blockquote>原文：<a href="https://itnext.io/angular-universal-how-to-add-multi-language-support-68d83f6dfc4d?source=collection_archive---------0-----------------------#2018-08-14">https://itnext.io/angular-universal-how-to-add-multi-language-support-68d83f6dfc4d?source=collection_archive---------0-----------------------#2018-08-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/03f3086d0335350cbcea714821d28fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2Xvmt6eiU0kNS83HdrHhg.png"/></div></div></figure><p id="5c73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有时候，还是用暗语说比较好。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="5fee" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">客户端</h1><p id="4ef6" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">安装<code class="fe mg mh mi mj b">TranslateModule</code>:</p><pre class="mk ml mm mn gt mo mj mp mq aw mr bi"><span id="a67d" class="ms le iq mj b gy mt mu l mv mw">npm install @ngx-translate/core --save</span></pre><p id="c94e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将其添加到主应用模块<code class="fe mg mh mi mj b">app.module.ts</code>:</p><figure class="mk ml mm mn gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="aa96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是典型的<code class="fe mg mh mi mj b">@ngx/translate</code>模块设置。但是它不能在服务器端工作，因为它会尝试从文件系统中获取翻译。为了让它工作，我们需要从我们的后端获取它们。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="a78c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">服务器端</h1><p id="dba8" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">在angular universal app中，您拥有将为服务器捆绑的服务器应用模块。我们需要使用一个拦截器，它将改变请求路径以从服务器加载翻译。</p><p id="a2d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">给<code class="fe mg mh mi mj b">app.server.module.ts</code>添加一个HTTP拦截器，这样它将只捆绑在服务器捆绑包中。</p><figure class="mk ml mm mn gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><figure class="mk ml mm mn gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="4f03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为这段代码运行在服务器端，所以我们可以使用Node.js功能。这样我们就可以获得我们正在运行的服务器的<code class="fe mg mh mi mj b">PORT</code>。</p><p id="a4d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了让我们的拦截器得到<code class="fe mg mh mi mj b">REQUEST</code>对象，我们需要在呈现我们的通用应用程序时提供它。</p><figure class="mk ml mm mn gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="7ddc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="6510" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="a154" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">当我试图找到解决这个问题的方法时，我找到了<a class="ae mz" href="https://www.npmjs.com/package/@ngx-universal/translate-loader" rel="noopener ugc nofollow" target="_blank">@ ngx-universal/translate-loader</a>。但是现在已经不维护了。</p><p id="d871" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个简单的有角度的HTTP拦截器。</p></div></div>    
</body>
</html>