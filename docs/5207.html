<html>
<head>
<title>How to create D3js v6 calendar heat map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建D3js v6日历热图</h1>
<blockquote>原文：<a href="https://itnext.io/d3-v6-calendar-heat-map-c709fe20e737?source=collection_archive---------1-----------------------#2021-01-12">https://itnext.io/d3-v6-calendar-heat-map-c709fe20e737?source=collection_archive---------1-----------------------#2021-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4343" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Go后端，发送JSON数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ef87246dac8adbc293dd95aae554a135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KAVFtX7cNB5EBT29NZa-hg.png"/></div></div></figure><p id="cc36" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">D3js是一个Javascript库，用于对数据进行图形化处理。在2020年，它被升级到版本6。</p><div class="lq lr gp gr ls lt"><a href="https://d3js.org" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">D3.js -数据驱动的文档</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">D3是一个用HTML、SVG和CSS可视化数据的JavaScript库。</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">d3js.org</p></div></div><div class="mc l"><div class="md l me mf mg mc mh ks lt"/></div></div></a></div><p id="b9e5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这给我们带来了一个小问题。官方示例库不使用Javascript，而是使用特殊的<em class="mi"> Observable Notebook语言。如今，要找到D3js图表的最新版本6示例并不容易。</em></p><p id="c6da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是这篇文章的原因。我无法找到第6版日历热图的工作示例，所以我决定制作一个。</p><p id="dfd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，这项工作是站在别人的肩膀上的。</p><p id="902b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们将使用我在Amelia Wattenberger的书中学到的策略，并在这些步骤的基础上进行构建:</p><ol class=""><li id="69ab" class="mj mk it kw b kx ky la lb ld ml lh mm ll mn lp mo mp mq mr bi translated">访问数据</li><li id="9c9d" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">创建图表维度和比例</li><li id="ba84" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">画画布</li><li id="b434" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">绘制数据</li><li id="eed2" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">设置互动</li><li id="2aaa" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">绘制外围设备</li></ol><p id="cc72" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">截至2021年1月9日，我们将使用最新版本的D3js，即版本6.3.1。我们将使用Go作为web服务器来模拟一些伪真实世界的后端数据发送。我们将使用Goland作为IDE。</p><p id="f236" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你只需要D3js信息，你可以跳过<em class="mi">准备项目</em>。和往常一样，你会在文章末尾找到Github资源库的链接。</p><p id="1015" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这里，您可以找到有关在Go中创建web服务器的更多信息。</p><div class="lq lr gp gr ls lt"><a href="https://medium.com/swlh/create-go-service-the-easy-way-iii-c84489cc1ee0" rel="noopener follow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">作为web服务器提供服务</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">提供HTML、CSS和Javascript文件</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">medium.com</p></div></div><div class="mc l"><div class="mx l me mf mg mc mh ks lt"/></div></div></a></div></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="68cf" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">准备项目</h1><p id="a8ab" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">在戈兰创建新项目，将其命名为<em class="mi"> medium_d3 </em></p><ol class=""><li id="06c8" class="mj mk it kw b kx ky la lb ld ml lh mm ll mn lp mo mp mq mr bi translated">创建两个新目录:<strong class="kw iu"> html </strong>和<strong class="kw iu"> js </strong>。</li><li id="e468" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">下载最新的D3库并保存到这个<strong class="kw iu"> js </strong>目录中。在这个<strong class="kw iu"> js </strong>目录下创建新文件<code class="fe oc od oe of b">homepage.js</code>。</li><li id="e5b3" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">在<strong class="kw iu"> html </strong>目录下创建新文件<code class="fe oc od oe of b">homepage.html</code></li><li id="7b0e" class="mj mk it kw b kx ms la mt ld mu lh mv ll mw lp mo mp mq mr bi translated">在主项目目录下新建三个文件:<code class="fe oc od oe of b">main.go</code>、<code class="fe oc od oe of b">homepage.go</code>和<code class="fe oc od oe of b">log.go</code></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/3f87f3dbd13feabbdcd68e8629b1fe34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DGVQx_VBAh5y4ZnqynfNiQ.png"/></div></div></figure><h2 id="c150" class="oh ng it bd nh oi oj dn nl ok ol dp np ld om on nr lh oo op nt ll oq or nv os bi translated">更新main.go</h2><p id="1dcd" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">下面是创建和运行web服务器服务的完整代码。如果你想知道每个部分的解释，请使用文章前面的链接。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="241b" class="oh ng it bd nh oi oj dn nl ok ol dp np ld om on nr lh oo op nt ll oq or nv os bi translated">更新日志. go</h2><p id="6fd0" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">这个文件只负责记录到控制台，这里没有太多代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="5450" class="oh ng it bd nh oi oj dn nl ok ol dp np ld om on nr lh oo op nt ll oq or nv os bi translated">更新主页. go</h2><p id="2ac1" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">这个文件只包含一个服务页面的函数和一个服务数据的函数。现在两个都空了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="8460" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用内置Goland功能或使用命令<code class="fe oc od oe of b">go get -u all</code>同步所有Go模块。运行<code class="fe oc od oe of b">main.go</code>，不要忘记将其设置为打包模式。如果一切顺利，我们准备走得更远。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="2a61" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">访问数据</h1><p id="7c15" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">切换到<strong class="kw iu">homepage.html</strong>并用下面的代码更新它。这里没有什么特别的，只是加载这两个javascript文件，创建heading和一个<code class="fe oc od oe of b">&lt;div&gt;</code>元素，它将保存我们的日历热图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="d705" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">切换到<strong class="kw iu"> homepage.js </strong>并在下面插入代码。同样，没什么特别的，这段代码只是向<code class="fe oc od oe of b">/get_calendar_data</code>发送一个JSON请求，并打印它返回的任何内容。</p><p id="e371" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过插入<code class="fe oc od oe of b">d3.json</code>获取方法(建立在标准javascript获取方法上)，我们开始使用D3库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="831f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在切换到<strong class="kw iu">主页。转到</strong>并从基础开始。下面的代码创建了三个结构:<code class="fe oc od oe of b">CalendarInput</code>用于传入数据，<code class="fe oc od oe of b">CalendarOutput</code>用于传出数据，<code class="fe oc od oe of b">CalendarData</code>用于数据本身。</p><p id="1853" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">功能是服务<strong class="kw iu">homepage.html</strong>文件并记录到控制台，只是为了知道它是否正常工作。</p><p id="8f7a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">名为<code class="fe oc od oe of b">getCalendarData()</code>的函数暂时将<code class="fe oc od oe of b">calling itself</code>登录到控制台。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="3650" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不是全部测试。在<code class="fe oc od oe of b"><a class="ae ov" href="http://localhost." rel="noopener ugc nofollow" target="_blank">http://localhost</a></code>运行项目并打开浏览器。您应该会在屏幕截图上看到如下信息:我们的web服务器正在充当一个服务，服务主页工作正常，并且这个<code class="fe oc od oe of b">getCalendarData()</code>函数像它应该的那样被调用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/270cef8961facff114cdeae4a79103e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BUJI7qOvOUmLcRiH-YfmSQ.png"/></div></div></figure><p id="4348" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在用下面的代码更新这个<code class="fe oc od oe of b">getCalendarData()</code>函数。一开始，我们解码来自<strong class="kw iu"> homepage.js </strong>的JSON数据并处理错误。</p><p id="d28c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果成功，我们会将收到的数据记录到控制台中。然后，我们准备一些虚拟数据，并将其发送回浏览器。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="61cd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您现在运行代码，您应该看到我们正确地解码了后端Go代码中的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/4f5219da028cd3a757cdfa539c0153ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8HMWudRfoSbP3X5ehEUkjQ.png"/></div></div></figure><p id="a4be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您在浏览器中打开控制台，您应该会看到，我们正在正确地发送回数据，并以Javascript代码对它们进行解码。现在我们可以生成日历热图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/7af907bf2bde1bf054b73abae3f4a72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IKgj1XhEhPHvSniiYG_n-Q.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="b651" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">创建图表维度和比例</h1><p id="739d" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">导航到<strong class="kw iu"> homepage.js </strong>。从现在开始，我们将长期在<code class="fe oc od oe of b">then(data)</code>功能中工作。在<code class="fe oc od oe of b">console.log()</code>函数之后添加一些代码。</p><p id="fddb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这段代码将从我们的数据中创建一个地图。我们以后会用到这张地图。然后我们创建图表维度并进行缩放。</p><p id="56e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图表尺寸很简单，只有宽度和高度，没什么特别的。</p><p id="a248" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe oc od oe of b">d3.scaleQuantize()</code>功能创建刻度。该功能将从0到10 ( <code class="fe oc od oe of b">.domain([0, 100])</code>)的数据值映射到颜色范围(<code class="fe oc od oe of b">.range([“#f3f6e7”, ...)</code>)。</p><p id="7606" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这意味着，例如，<em class="mi">生产值为0的<em class="mi">日期</em>将被映射到<code class="fe oc od oe of b">#f3f6e7</code>，而<em class="mi">生产值为100的<em class="mi">日期</em>将被映射到<code class="fe oc od oe of b">#89ab0f</code>。</em></em></p><p id="6220" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最终，这种缩放将创建出那张<strong class="kw iu">多彩的</strong>热图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="15a0" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">画画布</h1><p id="83be" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">添加几行代码。这里没有什么特别的，代码是从<strong class="kw iu">homepage.html</strong>访问<code class="fe oc od oe of b">calendar-heatmap</code>元素并添加一些维度属性。</p><p id="6991" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有趣的是那段<code class="fe oc od oe of b">.data(d3.range(parseInt(data[“Data”][0][“Date”]), parseInt(data[“Data”][0][“Date”]) + 1))</code>代码。您可以在此定义创建日历的开始和结束年份。</p><p id="14a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，您可以在这里输入<code class="fe oc od oe of b">.data(d3.range(2020, 2022))</code>，它将显示两年:2020年和2021年。在这种情况下，2022年就像一个上限。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="11e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您现在刷新页面，您应该认为这里什么也没有，但是打开您的控制台，您应该看到画布在这里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/394f500d6a1c8743e0c272abd1b50f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h4mFRuk2U4jhMR3ZJc9R9Q.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="d4fa" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">绘制数据</h1><p id="09a8" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">添加另一串代码，这将创建全年的矩形，并使用我们之前定义的<code class="fe oc od oe of b">color</code>函数，使这些矩形变得漂亮。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="23fb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有一件有趣的事。这个日历是基于星期一的。如果你想让它基于周日，你应该改变这两行代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="a8d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您现在刷新浏览器，您应该会看到您的日历快完成了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/832d749d5f6a3165e2826f2c82bb590f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XnOHyVxbhLjezZsXU4bxg.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="2ed3" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">设置互动</h1><p id="7084" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">在我们最终确定日历并使其漂亮之前，我们将添加两个互动。</p><p id="84c7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当您将鼠标悬停在一个日期上时，第一个按钮将添加黑色笔划(当您将鼠标移出时，删除黑色笔划)。</p><p id="cacc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第二个将添加一个简单的文本描述。请看下面的结果。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/e747ff55a4a30b4a3e1136edce1bf8af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4rm0mJEvZTsto7vtAIyASA.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="ad39" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">绘制外围设备</h1><p id="dc9e" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">我们的日历看起来还不像日历，我们现在将修复它。</p><p id="b519" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这段代码将为该日历添加一个文本描述。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="c474" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面的最后一段代码将为所有月份添加一些漂亮的笔画。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="6680" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面的截图是你工作的最终结果，使用最新的D3 v6。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/4e592283c786409ad791271f755f97a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iiVrMSQzETpfOX1jz6bsw.png"/></div></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="ba0b" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">完成代码</h1><p id="880f" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">为了让这个例子看起来更好，导航到你的<strong class="kw iu">主页。转到</strong>，替换生成这两行代码，生成两个虚拟数据…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="ec34" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">…代码如下。这将从上一年的第一天开始生成数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="efab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后导航到<strong class="kw iu"> homepage.js </strong>，只更新一行，这样2020年的数据就会显示出来。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="1076" class="nf ng it bd nh ni nj nk nl nm nn no np jz nq ka nr kc ns kd nt kf nu kg nv nw bi translated">摘要</h1><p id="a84e" class="pw-post-body-paragraph ku kv it kw b kx nx ju kz la ny jx lc ld nz lf lg lh oa lj lk ll ob ln lo lp im bi translated">现在运行代码，您将看到最终结果:日历热图。</p><p id="6446" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您正在使用D3库版本6来生成这个日历。另外，您还可以运行一个简单的web服务器。用Go写的。前端和后端之间的数据交换。</p><p id="185a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">恭喜你。这是你工作的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/1385f7c6bc639ced9dfabbf8cdfd2986.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0aQCxsjpNHZ9CdYpkJQ3uA.png"/></div></div></figure><div class="lq lr gp gr ls lt"><a href="https://github.com/petrjahoda/medium_d3" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd iu gy z fp ly fr fs lz fu fw is bi translated">petrjahoda/medium_d3</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">在GitHub上创建一个帐户，为petrjahoda/medium_d3的开发做出贡献。</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">github.com</p></div></div><div class="mc l"><div class="pa l me mf mg mc mh ks lt"/></div></div></a></div></div></div>    
</body>
</html>