<html>
<head>
<title>Scale your app better with Scaling Cube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用缩放立方体更好地缩放您的应用</h1>
<blockquote>原文：<a href="https://itnext.io/scale-your-app-better-with-scaling-cube-1860930c4d57?source=collection_archive---------5-----------------------#2019-07-07">https://itnext.io/scale-your-app-better-with-scaling-cube-1860930c4d57?source=collection_archive---------5-----------------------#2019-07-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/21a092de363183c29dedad67ea426470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tOlFY9rqAXq6RkgnvcGb4g.jpeg"/></div></div></figure><p id="edcc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一个高质量软件的标志之一是它的伸缩性。在我们的云计算时代，可伸缩性尤其重要。多亏了现代云提供商，有无数种方法可以扩展您的应用程序。</p><p id="ddfc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在《<a class="ae kz" href="https://www.amazon.com/Art-Scalability-Architecture-Organizations-Enterprise/dp/0134032802" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">可伸缩性的艺术</strong> </a>》一书中，作者提出了一个巧妙的模型来表示不同类别的软件伸缩，称为“伸缩立方体”。在本帖中，我们将回顾该模型背后的基本原则，以及为什么在扩展项目时应该考虑它。</p><h1 id="d39f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">缩放立方体的3个轴</h1><p id="f3e4" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">请看这张图表:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi md"><img src="../Images/6f4c7c7ac147e773ccfc967839b80792.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/0*SaGKeIAEgCpv0bqG"/></div></figure><p id="3ed8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上图显示了缩放立方体。左下角表示一个应用程序还没有进行任何可伸缩性改进。另一方面，右上角表示应用程序已经通过了所有三个类别的可伸缩性改进。通常你想瞄准右上角，但是这也取决于你的应用程序的业务需求。</p><p id="d99c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是三个轴表示的内容:</p><ul class=""><li id="21d3" class="mi mj it kd b ke kf ki kj km mk kq ml ku mm ky mn mo mp mq bi translated">x轴:创建克隆的应用程序实例</li><li id="b013" class="mi mj it kd b ke mr ki ms km mt kq mu ku mv ky mn mo mp mq bi translated">y轴:按功能分解成微服务</li><li id="2385" class="mi mj it kd b ke mr ki ms km mt kq mu ku mv ky mn mo mp mq bi translated">z轴:使用数据所有权拆分</li></ul><p id="7840" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们更详细地分解轴。</p><h1 id="5d65" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">x轴:克隆</h1><p id="83af" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">这个轴或多或少是不言自明的。当考虑改进应用程序的负载处理时，首先应该考虑的是生成应用程序的多个实例，并在它们之间平均分配负载。</p><p id="feb5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">与其他两种类型相比，使用X轴扩展应用程序要快得多，而且需要的精力也更少。如今，生成应用程序的附加实例通常是扩展项目的一种廉价而快速的方式。</p><p id="a6e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用X轴缩放有两种方法。</p><ul class=""><li id="bb05" class="mi mj it kd b ke kf ki kj km mk kq ml ku mm ky mn mo mp mq bi translated"><strong class="kd iu">垂直平衡</strong> —为单台机器增加更多资源。</li><li id="766a" class="mi mj it kd b ke mr ki ms km mt kq mu ku mv ky mn mo mp mq bi translated"><strong class="kd iu">水平平衡</strong> —向基础设施添加更多机器。</li></ul><h2 id="0d9d" class="mw lb it bd lc mx my dn lg mz na dp lk km nb nc lo kq nd ne ls ku nf ng lw nh bi translated">垂直平衡</h2><p id="f84b" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">在这种情况下，您可以利用运行应用程序的单台机器上未使用的计算资源。您可以通过实例化多个工作进程来实现这一点，这些工作进程都运行应用程序的一个单独实例。但是，请记住，为了有效地处理这些工作进程，您需要使用某种负载平衡机制。</p><p id="fbab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以使用像<code class="fe ni nj nk nl b"><a class="ae kz" href="https://www.npmjs.com/package/cluster" rel="noopener ugc nofollow" target="_blank">cluster</a></code>这样的NPM包在Node.js中很容易地设置垂直平衡。</p><h2 id="eb9b" class="mw lb it bd lc mx my dn lg mz na dp lk km nb nc lo kq nd ne ls ku nf ng lw nh bi translated">水平平衡</h2><p id="015d" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">第二种平衡是水平平衡。这仅仅意味着将更多运行您的应用程序的机器添加到您的基础设施中。这很容易实现，大多数较小的步骤将由您的云提供商为您处理。AWS和其他云提供商还允许您根据流量动态调整机器数量。</p><p id="1ee3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">大多数时候，云提供商为一个反向代理设置一个单独的服务器，比如<code class="fe ni nj nk nl b"><a class="ae kz" href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" rel="noopener ugc nofollow" target="_blank">Nginx</a></code>，它也充当您的实例的负载平衡器。</p><h2 id="e696" class="mw lb it bd lc mx my dn lg mz na dp lk km nb nc lo kq nd ne ls ku nf ng lw nh bi translated">多个实例的其他优势</h2><p id="f16d" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">添加多个实例无疑可以提高应用程序的响应速度，但是它还有其他好处:</p><ul class=""><li id="b353" class="mi mj it kd b ke kf ki kj km mk kq ml ku mm ky mn mo mp mq bi translated">它使您的应用程序更加防失败:即使您的一个实例意外崩溃，其他实例仍然会处理负载。</li><li id="ee55" class="mi mj it kd b ke mr ki ms km mt kq mu ku mv ky mn mo mp mq bi translated">如果实现零停机策略对您来说至关重要，那么添加多个实例是必须的。例如，在进行更新时，您可以通过将更改逐个应用到实例来避免任何停机时间。</li></ul><p id="40ed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您希望充分利用您的资源来提高应用程序的负载处理能力，您应该考虑同时利用垂直和水平平衡。</p><h1 id="a283" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">y轴:分解</h1><p id="35eb" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">简而言之，Y轴指的是根据功能将单个整体应用拆分为多个独立的微服务。随着无服务器技术的兴起，这种做法正被广泛采用。还有一个很好的理由，采用无服务器架构有很多好处。</p><p id="cf8d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">微服务架构提高了您的负载处理能力，因为多个独立服务比单个整体应用程序提供了更强的计算能力。您可以根据需要通过对服务应用X轴改进来进一步改进。</p><p id="df3e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当您将应用程序分成更小的独立部分时，它的架构也会得到改进。因为这样做，你几乎是被迫在它们之间创建了一个松散的耦合。</p><p id="ed5d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">拥有多个服务还会使您的应用程序更加健壮和防故障，因为一个服务的故障不一定会危及另一个服务的性能。相比之下，在整体架构中，如果应用程序的一部分崩溃而没有得到正确处理，整个实例都会崩溃。</p><p id="e3d9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">今天，由于微服务架构的兴起，几乎任何云提供商都提供了对无服务器计算的支持，包括AWS的Lambdas，谷歌的云功能和Azure的功能。</p><h1 id="90c6" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">z轴:数据分区</h1><p id="0895" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">对于大多数商业应用来说，应用X轴和Y轴应该足够了。但是，如果您有一个大型企业应用程序，并且它的健壮性是非常重要的，那么您可以通过数据分区来进一步改进您的基础设施的设置。请注意，只有在充分应用了X和Y轴的改进后，才应该考虑数据分区。</p><p id="162e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">数据分区是第三个也是最后一个可伸缩性类别，主要适用于数据库。在考虑负载处理时，您还需要考虑数据库的能力。</p><p id="924a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">大多数情况下，您可以基于某种属性将应用程序的数据分离到多个较小的数据库中。确切的属性将取决于您的业务需求，但通常其他属性会根据记录的字母顺序、数据的地理区域等进行划分。</p><h2 id="528c" class="mw lb it bd lc mx my dn lg mz na dp lk km nb nc lo kq nd ne ls ku nf ng lw nh bi translated">数据谱系关系</h2><p id="0644" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">这个概念伴随着微服务。这个想法是让你的服务独立于彼此的数据。这可以通过让每个服务专门负责自己的数据来实现。一种方法是为每个服务提供一个单独的数据库，并使其只能由该服务访问。如果您的应用程序的其他部分需要检索相同的数据，它们必须与您的微服务进行通信。这样做，您将减少基于数据相关性的错误数量。</p><p id="e3e4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个帖子到此为止！</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f0a4145e3adbb81221abe924b74a7494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*0SOX1kvSVlri-Q5a"/></div></figure><p id="8b5a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不管你以前是否知道缩放立方体，你都很可能遇到过本文中讨论的可伸缩性技术。尽管如此，了解这个概念并在尝试扩展应用程序时考虑它还是很有帮助的。</p><p id="2fb5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">感谢您的阅读！</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><p id="fa9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nu">原载于2019年7月7日</em><a class="ae kz" href="https://isamatov.com/scale-your-app-better-with-scaling-cube/" rel="noopener ugc nofollow" target="_blank"><em class="nu">【https://isamatov.com】</em></a><em class="nu">。</em></p></div></div>    
</body>
</html>