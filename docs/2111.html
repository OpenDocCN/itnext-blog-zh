<html>
<head>
<title>Publishing Artifact to Maven Central</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将工件发布到Maven Central</h1>
<blockquote>原文：<a href="https://itnext.io/publishing-artifact-to-maven-central-b160634e5268?source=collection_archive---------4-----------------------#2019-04-02">https://itnext.io/publishing-artifact-to-maven-central-b160634e5268?source=collection_archive---------4-----------------------#2019-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7a03f141a519fb4f6f3eb2170381a872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-2EJ1oq0KPMSUPoBiMKjRg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/@chevanon?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">切瓦农摄影</a>从<a class="ae kf" href="https://www.pexels.com/photo/art-blur-cappuccino-close-up-302899/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄</figcaption></figure><p id="00a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最近，我着手向Maven Central发布我的第一个工件。虽然有许多优秀的文章，但我发现它们并不完全适合我。我想分享我的经历，我在哪里遇到了问题，我学到了什么。</p><h1 id="4d05" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">先前技术</h1><p id="ebf4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我将跳过几个细节。这篇文章是作为一个起点，而不是重复其他伟大作品中已经说过的话。</p><p id="bb8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我要感谢这篇文章<a class="mh mi ep" href="https://medium.com/u/355ff06a8792?source=post_page-----b160634e5268--------------------------------" rel="noopener" target="_blank"> Seun Matt </a>的大力帮助:</p><ul class=""><li id="e6bb" class="mj mk it ki b kj kk kn ko kr ml kv mm kz mn ld mo mp mq mr bi translated"><a class="ae kf" href="https://medium.freecodecamp.org/how-to-upload-an-open-source-java-library-to-maven-central-cac7ce2f57c" rel="noopener ugc nofollow" target="_blank">如何将开源Java库上传到Maven Central </a></li></ul><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/7d22e6053d0167e0f0fcc5603ecdd7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtdKFpdlQQ3yt5synKZZMA.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">来自<a class="ae kf" href="https://www.pexels.com/photo/hand-fruits-rural-gardening-92354/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kf" href="https://www.pexels.com/@mali?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> mali maeder </a>的照片</figcaption></figure><h1 id="45cd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">初始设置</h1><p id="c21c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">显然，我们需要部署一些东西。对我来说，我正在上传我制作的一堆maven瓷砖的人工制品。</p><p id="9975" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://github.com/efenglu/maven" rel="noopener ugc nofollow" target="_blank">鹅峰路/美文</a></p><p id="8e93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保设置您的pom <em class="mx"> groupid </em>、<em class="mx"> artifactid </em>和<em class="mx">版本</em>。工件和版本可以是你想要的任何东西，但是<em class="mx"> groupid </em>应该是你控制的URL域或者类似于你的github组织。没有Github org？好吧，如果你是Github用户，好消息！<strong class="ki iu">你们</strong>是一个组织。</p><p id="8d52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对我来说，我使用:</p><p id="5e83" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">io.github.efenglu</p><h2 id="4d04" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated">Pom项目描述</h2><p id="4a30" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">设置您的pom定义，以包括:</p><ul class=""><li id="f258" class="mj mk it ki b kj kk kn ko kr ml kv mm kz mn ld mo mp mq mr bi translated">名称—通常为<em class="mx">$ { project . groupid }:$ { project . artifact id }</em></li><li id="763b" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">描述</li><li id="cc9d" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">URL—git存储库的URL</li><li id="8597" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">许可证</li><li id="e27b" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">开发商</li><li id="26e7" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">单片机</li><li id="bb6e" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">分布式管理— Sonatype</li></ul><figure class="mt mu mv mw gt ju"><div class="bz fp l di"><div class="np nq l"/></div></figure><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/d1ee21eeb6d3375c5f96920e7e41dba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wra-f9t9cwdwDYQjhovbSg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/photo/man-standing-in-front-of-counter-1833399/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kf" href="https://www.pexels.com/@fotios-photos?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Lisa Fotios </a>拍摄</figcaption></figure><h1 id="04f9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Sonatype设置</h1><p id="60c9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">你需要一个Sonatype的账户。前往sonatype.org<a class="ae kf" href="https://oss.sonatype.org/" rel="noopener ugc nofollow" target="_blank">注册账户。</a></p><p id="7b62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还需要创建一个项目。</p><p id="8580" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">详情请参考本指南:<a class="ae kf" href="https://central.sonatype.org/pages/ossrh-guide.html" rel="noopener ugc nofollow" target="_blank"> OSSRH导轨</a></p><p id="11f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能需要一两天的时间。</p><h2 id="0618" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated">GPG设置</h2><p id="04f6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们需要在所有的艺术品上签名。为此，我们需要一把GPG钥匙。</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="be31" class="my lf it nt b gy nx ny l nz oa">gpg --full-generate-key</span></pre><p id="44dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">别忘了我们需要发布Ubuntu的密钥库的密钥。</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="c420" class="my lf it nt b gy nx ny l nz oa">gpg --keyserver keyserver.ubuntu.com --send-keys ${KEY_ID}</span></pre><h2 id="a4aa" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated">Maven设置</h2><p id="a8e3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们需要将所有凭据存储在pom之外。我们可以通过settings.xml文件做到这一点。</p><p id="6f98" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mx"> ~/.m2/settings.xml: </em></p><figure class="mt mu mv mw gt ju"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="2705" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以将它们直接存储在settings.xml中。但是，有些人可能不喜欢以纯文本形式存储密码。另一种方法是让settings.xml引用一个环境变量，只有在实际发布时才设置这个环境变量。</p><p id="6c49" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要让maven引用环境变量，以“env”开始变量引用。后跟环境变量的名称。</p><p id="42b8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如:</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="65b2" class="my lf it nt b gy nx ny l nz oa">&lt;gpg.passphrase&gt;${env.GPG_PASSPHRASE}&lt;/gpg.passphrase&gt;</span></pre><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/244f2befce01bd9bf467996d11826dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-4l1Q2EAhNiiH-soTdA5IA.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/@chevanon?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">切瓦农摄影</a>从<a class="ae kf" href="https://www.pexels.com/photo/beverage-business-cafeteria-caffeine-302894/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a>拍摄</figcaption></figure><h2 id="539b" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated">Maven构建插件</h2><p id="85cc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们需要添加几个插件:</p><ul class=""><li id="ecfc" class="mj mk it ki b kj kk kn ko kr ml kv mm kz mn ld mo mp mq mr bi translated">javadoc —创建包含javadoc的jar</li><li id="4f16" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">源jar —创建包含源的jar</li><li id="08f6" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">gpg签名插件——为所有没有GPG签名的工件签名</li><li id="831e" class="mj mk it ki b kj nk kn nl kr nm kv nn kz no ld mo mp mq mr bi translated">nexus暂存插件—部署到nexus暂存和发布存储库</li></ul><figure class="mt mu mv mw gt ju"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="ed83" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我把它们放在一个配置文件中，所以它们只在发布期间执行。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/72ca58518e1e3590a4d23f3247a13044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PgFgECv0IFE_EEJKbyNtoQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/@olly?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> bruce mars </a>从<a class="ae kf" href="https://www.pexels.com/photo/man-holding-white-teacup-in-front-of-gray-laptop-842567/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄</figcaption></figure><h1 id="5c18" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">释放；排放；发布</h1><p id="e3d6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">现在我们已经准备好实际执行发布了。</p><p id="ad8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为发布选择一个新版本。最好将它设置为一个环境变量，因为我们会经常用到它:</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="d699" class="my lf it nt b gy nx ny l nz oa">export newVersion=1.0.0</span></pre><h2 id="40c9" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated"><strong class="ak"> <em class="od">设置发布版本</em> </strong></h2><p id="62c2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">将pom的版本设置为发布工件版本</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="b6d2" class="my lf it nt b gy nx ny l nz oa">./mvnw versions:set -DnewVersion=${newVersion} \<br/>   -DgenerateBackupPoms=false</span></pre><h2 id="8a2b" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated"><strong class="ak"> <em class="od">构建和测试</em> </strong></h2><p id="626b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">构建并测试版本，以确保一切都是正确的</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="c273" class="my lf it nt b gy nx ny l nz oa">./mvnw clean install -Prelease</span></pre><h2 id="7ce8" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated"><strong class="ak"> <em class="od">验证GPG签名</em> </strong></h2><p id="8e0c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">验证是否使用了正确的签名来签署工件</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="986b" class="my lf it nt b gy nx ny l nz oa">gpg --verify target/*.pom.asc</span></pre><p id="9714" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您应该会在结果中看到您的电子邮件，如下所示:</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="dda1" class="my lf it nt b gy nx ny l nz oa">gpg: assuming signed data in '***********'<br/>gpg: Signature made Sun Mar 31 22:34:40 2019 CDT<br/>gpg:                using RSA key<br/>**************************<br/>gpg: Good signature from "Erik Englund &lt;<a class="ae kf" href="mailto:englundGiant@gmail.com" rel="noopener ugc nofollow" target="_blank">*****@gmail.com</a>&gt;" [ultimate]</span></pre><h2 id="09f0" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated"><strong class="ak"> <em class="od">部署发布</em> </strong></h2><p id="29c4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">将发布部署到Sonatype</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="1b4f" class="my lf it nt b gy nx ny l nz oa">./mvnw clean deploy -Prelease</span></pre><p id="c83c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设Maven成功了，您的工件应该可以在一个小时左右的时间内从Maven Central获得。你的藏物可能几个小时内不会出现在搜索中心。</p><h2 id="28c6" class="my lf it bd lg mz na dn lk nb nc dp lo kr nd ne ls kv nf ng lw kz nh ni ma nj bi translated"><strong class="ak"> <em class="od">提交和标签释放</em> </strong></h2><p id="a102" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">至此，我们完成了，但是我们还应该在Github上标记我们的发布。</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="0ecc" class="my lf it nt b gy nx ny l nz oa">git add .<br/>git commit -m <strong class="nt iu">"Release ${newVersion}"<br/></strong>git tag ${newVersion}<br/>git push --tags</span></pre><p id="dbd6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不要忘记回滚您的更改，它们不会被添加到主代码库中:</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="71fb" class="my lf it nt b gy nx ny l nz oa">git reset HEAD~1<br/>git checkout .<br/>git clean -fd</span></pre><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/1f4a5697f12e41fa7063f2d005303f68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_HcIGrlPJH2tsROxtdOrZQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>从<a class="ae kf" href="https://www.pexels.com/photo/cheerful-close-up-coffee-cup-208165/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄</figcaption></figure><h1 id="45b6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使自动化</h1><p id="046b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在这一点上，我们的发布过程是手动的。让我们自动化它。</p><p id="d2a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用shell脚本:</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="5868" class="my lf it nt b gy nx ny l nz oa"><strong class="nt iu">#!/bin/bash -e<br/></strong>DIR="<strong class="nt iu">$</strong>( cd "<strong class="nt iu">$</strong>( dirname "<strong class="nt iu">$</strong>{BASH_SOURCE[0]}" )" <em class="mx">&gt;</em>/dev/null 2<em class="mx">&gt;</em>&amp;1 <strong class="nt iu">&amp;&amp; </strong>pwd )"<br/><br/>export VERSION=$1<br/><br/><strong class="nt iu">if [[ -z </strong>"$VERSION"<strong class="nt iu"> ]]</strong>; <strong class="nt iu">then<br/>  </strong>echo "ERROR: Version is undefined"<br/>  exit 1<br/><strong class="nt iu">fi<br/>if [[ -z </strong>"<strong class="nt iu">$</strong>{SONATYPE_USERNAME}"<strong class="nt iu"> ]]</strong>; <strong class="nt iu">then<br/>  </strong>echo "ERROR: SONATYPE_USERNAME is undefined"<br/>  exit 1<br/><strong class="nt iu">fi<br/>if [[ -z </strong>"<strong class="nt iu">$</strong>{SONATYPE_PASSWORD}"<strong class="nt iu"> ]]</strong>; <strong class="nt iu">then<br/>  </strong>echo "ERROR: SONATYPE_PASSWORD is undefined"<br/>  exit 1<br/><strong class="nt iu">fi<br/>if [[ -z </strong>"<strong class="nt iu">$</strong>{GPG_KEYNAME}"<strong class="nt iu"> ]]</strong>; <strong class="nt iu">then<br/>  </strong>echo "ERROR: GPG_KEYNAME is undefined"<br/>  exit 1<br/><strong class="nt iu">fi<br/>if [[ -z </strong>"<strong class="nt iu">$</strong>{GPG_PASSPHRASE}"<strong class="nt iu"> ]]</strong>; <strong class="nt iu">then<br/>  </strong>echo "ERROR: GPG_PASSPHRASE is undefined"<br/>  exit 1<br/><strong class="nt iu">fi<br/><br/></strong>mvn versions:set -DnewVersion=<strong class="nt iu">$</strong>{VERSION} -DgenerateBackupPoms=false<br/>mvn clean deploy -B -P release --settings <strong class="nt iu">$</strong>{DIR}/settings.xml<br/>git checkout .<br/>git tag $VERSION<br/>git push tags</span></pre><p id="6148" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像这样运行脚本:</p><pre class="mt mu mv mw gt ns nt nu nv aw nw bi"><span id="52ee" class="my lf it nt b gy nx ny l nz oa">./release.sh 1.0.2</span></pre><p id="d434" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要查看完整的示例，请访问Github上的my repository:</p><div class="of og gp gr oh oi"><a href="https://github.com/efenglu/maven" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">埃丰卢/马文</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">包含带有许多插件的pom的示例项目</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">github.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow jz oi"/></div></div></a></div><h1 id="4797" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">参考</h1><div class="of og gp gr oh oi"><a href="https://central.sonatype.org/pages/apache-maven.html" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">阿帕奇Maven</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">Apache Maven通过将其所有组件和所需的依赖项发布到中央存储库来启动中央存储库…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">central.sonatype.org</p></div></div><div class="or l"><div class="ox l ot ou ov or ow jz oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://help.github.com/en/articles/generating-a-new-gpg-key" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">生成新的GPG密钥- GitHub帮助</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">GitHub支持几种GPG密钥算法。如果您尝试添加由不受支持的算法生成的密钥，您可能会…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">help.github.com</p></div></div></div></a></div><div class="of og gp gr oh oi"><a href="http://maven.apache.org/plugins/maven-gpg-plugin/usage.html" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">阿帕奇马文GPG插件-用法</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">Apache &gt; Maven &gt;插件&gt; Apache Maven GPG插件&gt;用法</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">maven.apache.org</p></div></div><div class="or l"><div class="oy l ot ou ov or ow jz oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">GnuPrivacyGuardHowto -社区帮助Wiki</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">本页描述如何使用OpenPGP密钥。有关OpenPGP的简要描述，请参见下一节。的…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">help.ubuntu.com</p></div></div></div></a></div><div class="of og gp gr oh oi"><a href="https://medium.freecodecamp.org/how-to-upload-an-open-source-java-library-to-maven-central-cac7ce2f57c" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">如何将开源Java库上传到Maven Central</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">本文从头到尾是一个全面的指南，介绍如何将Java库部署到Maven Central，以便…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.freecodecamp.org</p></div></div><div class="or l"><div class="oz l ot ou ov or ow jz oi"/></div></div></a></div></div></div>    
</body>
</html>