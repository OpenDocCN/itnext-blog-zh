<html>
<head>
<title>Reasons to Love Jest: The Developer Experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">喜欢Jest的理由:开发者体验</h1>
<blockquote>原文：<a href="https://itnext.io/reasons-to-love-jest-the-developer-experience-b00ec93df7bb?source=collection_archive---------2-----------------------#2018-06-28">https://itnext.io/reasons-to-love-jest-the-developer-experience-b00ec93df7bb?source=collection_archive---------2-----------------------#2018-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="bd32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哦是的。Jest的开发者体验正在将编写测试的行为从一件苦差事转变为一段有趣的时间，我保证！🤓</p><p id="e034" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章是我上一篇关于Jest框架的文章的后续:</p><div class="kl km gp gr kn ko"><a href="https://medium.com/p/ae19b49c02c3/" rel="noopener follow" target="_blank"><div class="kp ab fo"><div class="kq ab kr cl cj ks"><h2 class="bd ir gy z fp kt fr fs ku fu fw ip bi translated">喜欢Jest的理由:测试框架- Liran Tal - Medium</h2><div class="kv l"><h3 class="bd b gy z fp kt fr fs ku fu fw dk translated">我真的很喜欢编写测试，Jest将它带到了一个全新的水平。就像我早上起来问自己…</h3></div><div class="kw l"><p class="bd b dl z fp kt fr fs ku fu fw dk translated">medium.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc ld ko"/></div></div></a></div></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/e4943d777148d66422b078cd65e49f55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BImt6BeBv2SHXWsiblU6Fw.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">jest的开发者体验</figcaption></figure><h1 id="dbda" class="ma mb iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">标志</h1><p id="efb5" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">啊，那个标志。不就是好吗？就像它试图告诉你“你会写测试吗？这会很有趣的！”就这样，它引诱你进入</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nd"><img src="../Images/6ea2805cfca98957dc3c964b2de276f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWAE08oNqUDG9lAj5x0qhw.png"/></div></div></figure><p id="6e16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，但严重的是，我只需要在左侧的一个项目排序对齐其余的项目。请原谅我🤷‍.️</p><p id="35ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你愿意的话，关于这个标志的一个趣闻——<br/>最近我听说Jest标志是由<a class="ne nf ep" href="https://medium.com/u/9d26c4a319d4?source=post_page-----b00ec93df7bb--------------------------------" rel="noopener" target="_blank">詹姆斯·皮尔斯</a>在最后一分钟的草图中创造的，他在草图中重复了几个选项(<a class="ae ng" href="https://twitter.com/jamespearce/status/1011494561682620416" rel="noopener ugc nofollow" target="_blank">推特参考</a>)，但更有趣的是<a class="ne nf ep" href="https://medium.com/u/9ea60eb6fc7c?source=post_page-----b00ec93df7bb--------------------------------" rel="noopener" target="_blank">克里斯托夫·中泽友秀</a>提到……彼此相邻的圆圈让他想起一个与缓慢相关的加载动画:-)</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nh"><img src="../Images/7f301d1b914b7b9012f4762530c47bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBVLbY31axYj7tuorTM9mg.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">迭代jest徽标</figcaption></figure></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><h1 id="7a6d" class="ma mb iq bd mc md ni mf mg mh nj mj mk ml nk mn mo mp nl mr ms mt nm mv mw mx bi translated">视觉差异和有效冗长</h1><p id="a362" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">好的开发者体验很大一部分是提高你的生产力。对于测试来说，当测试失败时，您希望快速识别测试中的错误。</p><p id="9f1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以这段代码片段为例:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nn"><img src="../Images/6fbb865f12668a2452d0a197ac370e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sJ4jlKiMDVrYtUj_kPcfPA.png"/></div></div></figure><p id="60f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它在测试的源代码中有一个打印错误。<br/>Jest在控制台中显示错误的方式如下:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi no"><img src="../Images/93ed7bab7af70e7b1db2a0d7b4e98011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wDZ6jaMpLdVP4z-3EleJsQ.png"/></div></div></figure><p id="67c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它为实际文件提供了很好的上下文、行号和指向确切问题的箭头，还用语法高亮显示代码。</p><p id="0a8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你打算在你的断言中比较两个对象吗？<br/>完全没问题。Jest是如此冗长，以至于它会显示出这种巨大的差异，即使是在您比较的对象之间不同的嵌套键也是如此:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi np"><img src="../Images/c3935236147f7d14ec8364ead793d400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjwLHmZwGBzc2dvWXShf3Q.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">嵌套对象的不同断言</figcaption></figure><p id="e38f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">补充说明</strong> : Jest已经非常模块化了，它的许多功能都转移到了社区可以利用的独立模块中。</p><p id="317f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢上面的不同，你可以在你自己的项目中使用它，请看这里:<a class="ae ng" href="http://jestjs.io/docs/en/jest-platform.html#jest-diff" rel="noopener ugc nofollow" target="_blank">http://jestjs.io/docs/en/jest-platform.html#jest-diff</a></p></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><h1 id="6666" class="ma mb iq bd mc md ni mf mg mh nj mj mk ml nk mn mo mp nl mr ms mt nm mv mw mx bi translated">宽松的习俗</h1><h2 id="3be8" class="nq mb iq bd mc nr ns dn mg nt nu dp mk jy nv nw mo kc nx ny ms kg nz oa mw ob bi translated">测试套件惯例</h2><p id="5fcd" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">如果您来自不同的测试运行程序或框架，您将会知道它们在测试套件语法上有所不同。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oc"><img src="../Images/7c8372a934ecd0f22952b6cc4ffd65ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qCglC7g6xU-r2Nmd4Zsh0A.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">跨框架或其版本的不同语法来编写测试</figcaption></figure><p id="8b0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有的用<strong class="jp ir"><em class="od"/></strong>，有的则只能用<strong class="jp ir"> <em class="od">测试()。<br/> </em> </strong>在某些情况下，您可以通过<strong class="jp ir"> <em class="od"> test.skip() </em> </strong>禁用测试，而在其他情况下，您可以通过<strong class="jp ir"> <em class="od"> xit() </em> </strong> <em class="od">禁用测试。</em></p><p id="a4d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用Jest，没关系。它尽最大努力优化生产力，而不是墨守成规。</p><p id="ac4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以编写<strong class="jp ir"><em class="od">【test()</em></strong>，或者嵌套<strong class="jp ir">describe()</strong><em class="od"/><strong class="jp ir">test()</strong>或者直接使用<strong class="jp ir"> <em class="od"> it()。<br/> </em>无脑。</strong></p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oe"><img src="../Images/11a5c15885570da42f04e95249a417d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sRdX97yxaO6greiRoBJS0A.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">就是管用！</figcaption></figure><p id="819f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该为测试使用哪种文件命名约定？谁在乎呢！😜</p><p id="72fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Jest会自动拾取任何<strong class="jp ir"> <em class="od"> *.test.js </em> </strong>或<em class="od"> *.spec.js </em> 文件扩展名，以及<strong class="jp ir"> <em class="od"> __tests__ </em> </strong>目录中的任何文件。</p><h2 id="eb1c" class="nq mb iq bd mc nr ns dn mg nt nu dp mk jy nv nw mo kc nx ny ms kg nz oa mw ob bi translated">友好的CLI</h2><p id="31eb" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">Jest有一个友好的命令行界面，可以帮助你理解意大利面手指的含义:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi of"><img src="../Images/144ba026a2ee2b4fcab8170de0e2403d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6F_p1sfSWpKoKX5KplcZw.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">Jest推荐正确的命令</figcaption></figure><p id="8849" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，这不是一次时间旅行，但它是Jest提高生产率和开发人员友好性的另一个基石。</p><p id="14ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最重要的是小事。</p><h2 id="6277" class="nq mb iq bd mc nr ns dn mg nt nu dp mk jy nv nw mo kc nx ny ms kg nz oa mw ob bi translated">测试双打</h2><p id="4c73" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">在自动化测试中，我们编写并执行单元和集成测试，通常的做法是利用不同种类的测试对来隔离系统的不同部分。</p><p id="d53c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有不同的隔离方法，有不同的目标和行为，但都统称为测试替身。</p><p id="6be2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Sinon等其他库要求您为测试显式声明和选择一种类型的test double(stub、mock、spy ),而Jest将所有内容封装到一个名为Mock object (jest.fn)的入口点中。</p><p id="9b94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过测试代码，可以以不同的方式访问和使用Mock，但本质上，您不需要在测试代码中为测试双精度类型的这种决定而烦恼。这是Jest带来的另一个生产力提升。</p><p id="a64e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也就是说，您仍然应该理解测试原则。</p><blockquote class="og"><p id="da92" class="oh oi iq bd oj ok ol om on oo op kk dk translated">建议阅读马丁·福勒博客中关于测试替身的内容:<a class="ae ng" href="https://martinfowler.com/bliki/TestDouble.html" rel="noopener ugc nofollow" target="_blank">https://martinfowler.com/bliki/TestDouble.html</a></p></blockquote></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><h1 id="f234" class="ma mb iq bd mc md ni mf mg mh nj mj mk ml nk mn mo mp nl mr ms mt nm mv mw mx bi translated">沉浸式观看模式</h1><p id="79e0" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">Jest的观察模式有助于简化您的开发工作流程:</p><ul class=""><li id="b7d1" class="oq or iq jp b jq jr ju jv jy os kc ot kg ou kk ov ow ox oy bi translated">显而易见的是——当变化发生时立即运行测试(在IDE中，或者说您切换了一个分支)。</li><li id="a2f0" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated">Jest会为您决定自动运行哪些测试。它管理关于你的源代码的元数据，所以当一个源代码文件被改变时，它可以学习如何只运行相关的测试文件。</li><li id="39ac" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated">Jest的互动观看模式会告诉你，如果你过滤任何文件类型。例如，如果您使用特定的glob path运行jest，它会将其显示为活动过滤器:</li></ul><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi pe"><img src="../Images/14aa56cfe531e3c939e1043bb093016c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11AevdkhAA2s0hsaHYObkQ.png"/></div></div></figure><ul class=""><li id="7674" class="oq or iq jp b jq jr ju jv jy os kc ot kg ou kk ov ow ox oy bi translated">不再test.only()使它成为您的测试代码，并意外地滑入您的PR。使用Jest，您可以直接从控制台通过文件名或测试名轻松过滤测试运行。因此，只需通过测试名称进行过滤，只有当您对测试文件进行更改时，它才会重新运行:</li></ul><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi pf"><img src="../Images/fb8ae78a4455bc15cdca84662deec677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_YqHsu4xnSoGMSlCTn1qg.png"/></div></div></figure><p id="9fc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该知道的关于测试跑步者的其他事情:</p><ul class=""><li id="4e12" class="oq or iq jp b jq jr ju jv jy os kc ot kg ou kk ov ow ox oy bi translated">Jest将首先运行最慢的测试，以优化并行CPU工作并减少总的测试运行时间。</li><li id="4d49" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated">Jest将首先运行之前失败的测试，以提供快速的反馈循环</li><li id="14ee" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated">Jest将选择测试运行的顺序，因此您绝对不应该期望它们会按字母顺序或其他方式运行。对你来说，它们完全是随机运行的，如果测试文件被命名为<em class="od">01 _ log in fucings . spec . js</em>，<em class="od"> 02_createUsers.spec.js </em>，这将是一个糟糕的做法。</li></ul></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><p id="1a30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么，您喜欢使用Jest时的开发人员体验吗？</p></div></div>    
</body>
</html>