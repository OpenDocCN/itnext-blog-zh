<html>
<head>
<title>Ten Commandments of Git Commit Messages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git提交消息的十诫</h1>
<blockquote>原文：<a href="https://itnext.io/ten-commandments-of-git-commit-messages-94bd6dcf6e0e?source=collection_archive---------2-----------------------#2020-10-06">https://itnext.io/ten-commandments-of-git-commit-messages-94bd6dcf6e0e?source=collection_archive---------2-----------------------#2020-10-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b3a8a0478cdc426ea8b8a23f6d377dc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oa7uIk3hzuB0Opy0ZPXxFg.png"/></div></div></figure><p id="7927" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">git提交消息的十诫试图统一<a class="ae kz" href="https://www.conventionalcommits.org/en/v1.0.0/" rel="noopener ugc nofollow" target="_blank">常规提交1.0.0 </a>、提交消息的<a class="ae kz" href="https://chris.beams.io/posts/git-commit/" rel="noopener ugc nofollow" target="_blank"> 7规则</a>以及Git本身、GitHub和GitLab使用的格式。</p><p id="8d94" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">《布道文》中提到的戒律如下:</p><blockquote class="le lf lg"><p id="7235" class="kb kc lh kd b ke kf kg kh ki kj kk kl li kn ko kp lj kr ks kt lk kv kw kx ky im bi translated">0.git提交消息不应为空<br/> 1。用空行<br/> 2将页眉和页脚分开。将标题限制在72个字符内<br/> 3。主语不能用任何格，只能用句子格。你不应该以句号结束这个主题。你不应该在主语中使用祈使语气。在72个字符处将正文和页脚换行<br/> 7。用身体来解释什么和为什么以及如何<br/> 8。使用类型进行语义版本控制<br/> 9。使用页脚连接到问题并指定重大变更</p></blockquote><h2 id="eee5" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">介绍</h2><p id="c637" class="pw-post-body-paragraph kb kc it kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">第一节，1。Commitlint，是关于建立一个commit linter，它根据戒律验证提交消息。第二节，2。戒律，是对戒律和每条戒律背后的原因的解释。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="16dd" class="mq lm it bd ln mr ms mt lq mu mv mw lt mx my mz lw na nb nc lz nd ne nf mc ng bi translated"><strong class="ak"> 1。承诺</strong></h1><figure class="ni nj nk nl gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/5139a643e92fc1eeb725ed8fbff40cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5Dp_Z3HRFAldK5CU3kEoeg.gif"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">Commitlint CLI演示</figcaption></figure><p id="4e72" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用Node.js，人们可以使用<code class="fe la lb lc ld b">commitlint</code>和<code class="fe la lb lc ld b"><a class="ae kz" href="http://npm.im/commitlint-config-commandments" rel="noopener ugc nofollow" target="_blank">commitlint-config-commandments</a></code>来执行戒律:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="a27d" class="ll lm it ld b gy nu nv l nw nx">npm i -D commitlint-config-commandments @commitlint/cli<br/>echo "module.exports = {extends: ['commandments']};" \<br/>  &gt; commitlint.config.js</span></pre><p id="42c7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">到目前为止，只有戒律1、2、3、4和6是由这个预置配置强制执行的。在初始化linter之后，可以通过命令行通过管道完成林挺:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="6eba" class="ll lm it ld b gy nu nv l nw nx">echo "Feat: Add dry run functionality" | commitlint</span></pre><h2 id="b2a8" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">Git挂钩</h2><p id="b8c8" class="pw-post-body-paragraph kb kc it kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">为了即时处理每个提交消息，可以使用<code class="fe la lb lc ld b">husky</code>来设置一个git挂钩:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="d97a" class="ll lm it ld b gy nu nv l nw nx">npm i -D husky</span></pre><p id="b152" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在你的<code class="fe la lb lc ld b">package.json</code>中添加以下几行:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="e5e5" class="ll lm it ld b gy nu nv l nw nx">"husky": {<br/>  "hooks": {<br/>    "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"<br/>  }<br/>}</span></pre><h2 id="217e" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">特拉维斯·CI</h2><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="2235" class="ll lm it ld b gy nu nv l nw nx">npm install --save-dev @commitlint/travis-cli</span></pre><p id="df74" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后在<code class="fe la lb lc ld b">travis.yml</code>:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="e505" class="ll lm it ld b gy nu nv l nw nx">language: node_js<br/>node_js:<br/>  - node<br/>script:<br/>  - commitlint-travis</span></pre><h2 id="5852" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">GitLab-CI</h2><p id="49a3" class="pw-post-body-paragraph kb kc it kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">创建以下BASH脚本，并将其命名为<code class="fe la lb lc ld b">commitlint.sh</code>或其他名称:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="3905" class="ll lm it ld b gy nu nv l nw nx">if [ $CI_BUILD_BEFORE_SHA == "0000000000000000000000000000000000000000" ]; then<br/>  npx commitlint --from=HEAD~1<br/>else<br/>  npx commitlint --from=$CI_BUILD_BEFORE_SHA;<br/>fi;</span></pre><p id="b0ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后在<code class="fe la lb lc ld b">.gitlab-ci.yml</code>中运行它:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="cce2" class="ll lm it ld b gy nu nv l nw nx">test:commitlint:<br/>  image: node:${NODE_VERSION}<br/>  script:<br/>    - bash commitlint.sh</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="f27c" class="mq lm it bd ln mr ms mt lq mu mv mw lt mx my mz lw na nb nc lz nd ne nf mc ng bi translated"><strong class="ak"> 2。</strong>戒律</h1><p id="b3c2" class="pw-post-body-paragraph kb kc it kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">提交消息具有以下格式:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="f17b" class="ll lm it ld b gy nu nv l nw nx">&lt;header&gt;</span><span id="c072" class="ll lm it ld b gy ny nv l nw nx">[body]</span><span id="3d1b" class="ll lm it ld b gy ny nv l nw nx">[footer]</span></pre><p id="7189" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">符号<code class="fe la lb lc ld b">&lt;x&gt;</code>表示强制占位符，其中<code class="fe la lb lc ld b">[x]</code>表示占位符为可选部分保留一个位置。</p><p id="9bc0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://www.conventionalcommits.org/en/v1.0.0/" rel="noopener ugc nofollow" target="_blank">常规提交版本1.0.0 </a>将报头进一步划分为子部分，实现以下格式:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="4687" class="ll lm it ld b gy nu nv l nw nx">[type]([scope]): &lt;subject&gt;</span><span id="a748" class="ll lm it ld b gy ny nv l nw nx">[body]</span><span id="5f75" class="ll lm it ld b gy ny nv l nw nx">[footer]</span></pre><p id="9ae4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在传统的提交版本1.0.0中，类型是强制的，但是我们想让它保持可选。同样，在没有作用域的情况下，作用域的括号也会消失。</p><h2 id="e1dd" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律0</h2><blockquote class="nz"><p id="812a" class="oa ob it bd oc od oe of og oh oi ky dk translated">git提交消息不应为空</p></blockquote><p id="0826" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">这条基本规则对于接下来的事情是必要的。虽然有可能出现一个空的提交消息或者至少一个<em class="lh">几乎</em>空的消息(例如<code class="fe la lb lc ld b">.</code>作为消息)，但是应该避免，因为它对提交没有任何解释。</p><h2 id="a61d" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律1</h2><blockquote class="nz"><p id="7ed7" class="oa ob it bd oc od oe of og oh oi ky dk translated">用一个空行将页眉和正文分开，将正文和页脚分开</p></blockquote><p id="9583" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">页眉总是一行代码，但是页脚不是这样。可以有很多行，如果没有一个空行将它与正文(或者是空正文的标题)分开，就不可能区分它们。</p><figure class="ni nj nk nl gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/49600ea216c34291c12047a27ea2cb55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mYGSqjcs2EYUsZkBS0Eyng.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">违反戒律1</figcaption></figure><p id="dd2f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">分隔标题和正文的空行虽然不是机械要求的，但可以提高可读性。</p><h2 id="6d62" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律二</h2><blockquote class="nz"><p id="9777" class="oa ob it bd oc od oe of og oh oi ky dk translated">将标题限制在72个字符以内</p></blockquote><p id="476d" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">72的确切数字背后有一个历史原因。过去，程序员用穿孔卡把他们的程序输入机器。穿孔卡片有80列，其中8列是保留的，每行72个字符。</p><figure class="ni nj nk nl gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oo"><img src="../Images/ff16445747c4430428972a9c77d659a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8miliPf_I16gIlSlU5JDA.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">Fortran穿孔卡来自<a class="ae kz" href="https://www.masswerk.at/keypunch/" rel="noopener ugc nofollow" target="_blank">虚拟键穿孔</a></figcaption></figure><p id="6204" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当程序员得到显示器时，屏幕有72列，最大行长度为72个字符。从那时起，这一标准被广泛应用于许多领域。在我们的例子中，GitHub截断超过72个字符的头。</p><h2 id="f63c" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律三</h2><blockquote class="nz"><p id="8165" class="oa ob it bd oc od oe of og oh oi ky dk translated">主语不能用任何格，只能用句子格</p></blockquote><p id="c11b" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">“句子格”是指你以大写字母开头。这条规则背后的主要原因是与git自动生成的提交消息保持一致。</p><p id="fa16" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面举个例子:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="43ed" class="ll lm it ld b gy nu nv l nw nx">Revert "Feat: Add list transformations" <br/>     <br/>This reverts commit 1a18b1cef017f457f6e3d39a7bc7b177dc1b24a4.</span></pre><p id="8fd3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此提交消息是通过恢复提交而生成的。如你所见，没有类型和范围，主语是句子格。</p><h2 id="6885" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律四</h2><blockquote class="nz"><p id="2f63" class="oa ob it bd oc od oe of og oh oi ky dk translated">你不应该用句号来结束这个主题</p></blockquote><p id="2903" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">同样，为了保持一致。查看戒律3中生成的revert消息，头部没有句号，但是主体有。</p><h2 id="b702" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律五</h2><blockquote class="nz"><p id="3062" class="oa ob it bd oc od oe of og oh oi ky dk translated">你不应该在主语中使用祈使语气</p></blockquote><p id="30a0" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">同样，为了保持一致。再次查看戒律3中生成的回复信息，主题有一种命令式的情绪。</p><h2 id="05d6" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律六</h2><blockquote class="nz"><p id="6668" class="oa ob it bd oc od oe of og oh oi ky dk translated">将正文和页脚换行到72个字符</p></blockquote><p id="225b" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">Git不会包装提交消息体。所以，我们应该在<em class="lh">处缠绕一段</em>长度。为什么不是72年的老歌？特别是，它将使正文与标题对齐。</p><h2 id="67c5" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律7</h2><blockquote class="nz"><p id="2d05" class="oa ob it bd oc od oe of og oh oi ky dk translated">用身体来解释什么和为什么以及如何</p></blockquote><p id="6b9b" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">提交包含您所做的更改。所以，提改了什么就多余了。人们回顾这些行为时，通常会感到困惑的是它们背后的原因。下面是一个例子:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="016c" class="ll lm it ld b gy nu nv l nw nx">Remove the HTTPS server</span><span id="6d02" class="ll lm it ld b gy ny nv l nw nx">Removed the HTTPS server from main.ts, as well as the certs folder.</span></pre><p id="c500" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">看了那具尸体，我会说“那么，你到底为什么要那样做”？我所期望的是:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="c277" class="ll lm it ld b gy nu nv l nw nx">Remove the HTTPS server</span><span id="9516" class="ll lm it ld b gy ny nv l nw nx">As we now use NGINX in front of the Node.js server, we won't need<br/>to provide HTTPS by Node.js itself; NGINX does it both for dynamic<br/>and static serves.</span></pre><h2 id="9a65" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律8</h2><blockquote class="nz"><p id="f0b5" class="oa ob it bd oc od oe of og oh oi ky dk translated">使用类型进行语义版本控制</p></blockquote><p id="4e1d" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">提交消息类型最重要的目的是语义版本化。事情是这样的:</p><ul class=""><li id="2981" class="op oq it kd b ke kf ki kj km or kq os ku ot ky ou ov ow ox bi translated">如果你有一个<code class="fe la lb lc ld b">Fix</code>类型，那么版本在最后一部分颠簸:1.2.3 → 1.2.4。</li><li id="eff4" class="op oq it kd b ke oy ki oz km pa kq pb ku pc ky ou ov ow ox bi translated">如果你有一个<code class="fe la lb lc ld b">Feat</code>型，那么版本在中间部分凸起:1.2.3 → 1.3.0。</li><li id="9599" class="op oq it kd b ke oy ki oz km pa kq pb ku pc ky ou ov ow ox bi translated">如果你在页脚有一个<code class="fe la lb lc ld b">BREAKING CHANGE</code>，那么版本在第一部分就颠簸了:1.2.3 → 2.0.0。</li></ul><p id="dc11" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这甚至可以通过适当的工具实现自动化。</p><h2 id="4b10" class="ll lm it bd ln lo lp dn lq lr ls dp lt km lu lv lw kq lx ly lz ku ma mb mc md bi translated">戒律九</h2><blockquote class="nz"><p id="85ee" class="oa ob it bd oc od oe of og oh oi ky dk translated">使用页脚连接到问题并指定重大变更</p></blockquote><p id="8817" class="pw-post-body-paragraph kb kc it kd b ke oj kg kh ki ok kk kl km ol ko kp kq om ks kt ku on kw kx ky im bi translated">像GitHub和GitLab这样的代码托管服务现在足够智能，可以基于提交消息触发操作。页脚是利用这些功能的合适位置:</p><pre class="ni nj nk nl gt nq ld nr ns aw nt bi"><span id="7401" class="ll lm it ld b gy nu nv l nw nx">Add Docker image build process</span><span id="72a5" class="ll lm it ld b gy ny nv l nw nx">Fixes #666</span></pre><p id="498f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，页脚有这一行:</p><ul class=""><li id="ac8a" class="op oq it kd b ke kf ki kj km or kq os ku ot ky ou ov ow ox bi translated">GitHub/GitLab将提交与问题联系起来。提交将出现在问题中。</li><li id="48b8" class="op oq it kd b ke oy ki oz km pa kq pb ku pc ky ou ov ow ox bi translated">GitHub/GitLab在接受拉/合并请求时自动关闭问题。</li><li id="1e96" class="op oq it kd b ke oy ki oz km pa kq pb ku pc ky ou ov ow ox bi translated">未来的开发人员知道提交发生的原因，并可以研究这个问题以了解更多信息。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3778" class="mq lm it bd ln mr ms mt lq mu mv mw lt mx my mz lw na nb nc lz nd ne nf mc ng bi translated">结论</h1><p id="e004" class="pw-post-body-paragraph kb kc it kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">十诫是基于许多现有的标准和经验。这篇文章以及linter都是年轻的，可能会经历更多的审查和修复。要获得更新通知，请在<a class="ae kz" href="https://twitter.com/MohammadAliEN" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我。</p></div></div>    
</body>
</html>