<html>
<head>
<title>Environment Variables in Ruby On Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby On Rails中的环境变量</h1>
<blockquote>原文：<a href="https://itnext.io/environment-variables-in-ruby-on-rails-17e4934cfd71?source=collection_archive---------0-----------------------#2017-11-28">https://itnext.io/environment-variables-in-ruby-on-rails-17e4934cfd71?source=collection_archive---------0-----------------------#2017-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8202" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">(保护您的信息安全)</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/ef4f9c372ed64712e6f2759effba3653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKDB479L3aVjkgykjhv9Qw.jpeg"/></div></div></figure><p id="7e4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kx" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fenvironment-variables-in-ruby-on-rails-17e4934cfd71" rel="noopener ugc nofollow" target="_blank"> <em class="ky">点击这里在LinkedIn </em>上分享这篇文章</a></p><p id="c150" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个应用程序都需要配置设置，如电子邮件帐户凭证或外部服务的API密钥(出于安全目的)。您可以使用环境变量将本地配置设置传递给应用程序。<br/>在Ruby On Rails中有几种使用环境变量的方法，我们也有一个像Figaro gem这样的Gem。</p><p id="5336" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kz translated">将您的环境变量文件保存为私有文件</p><p id="dcaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你使用GitHub来存储和共享代码，并且你的项目是开源的，这意味着任何开发者都可以访问你的代码。你不想与公众分享你的私人信息或API密匙。如果您在一个拥有私有git存储库的团队中协作，您的本地设置可能不适合团队的所有成员。</p><p id="10b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kz translated"><span class="l la lb lc bm ld le lf lg lh di">U</span>T11】唱一个local_env.yml文件:</p><p id="5ced" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将创建一个简单的文件，其中包含使用标准YAML文件格式的每个环境变量的键/值对。</p><p id="a892" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kz translated"><span class="l la lb lc bm ld le lf lg lh di"> C </span> <strong class="jp ir">创建一个文件config/local_env.yml: </strong></p><p id="890c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">#将“您的Gmail用户名”作为ENV[“Gmail用户名”]提供</p><pre class="km kn ko kp gt li lj lk ll aw lm bi"><span id="b30c" class="ln lo iq lj b gy lp lq l lr ls">MAIL_USERNAME: 'Your_Username'<br/>MAIL_PASSWORD: 'Your_Username'</span></pre><p id="fe2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kz translated">开始了。gitignore </p><p id="68de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您已经为您的应用程序创建了git存储库，那么您的应用程序根目录应该包含一个名为. gitignore的文件。</p><p id="02f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的下面添加一行。gitignore文件。</p><p id="ec67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这可以防止config/local_env.yml文件被签入git存储库并供其他人查看。</p><p id="9adc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kz translated"><span class="l la lb lc bm ld le lf lg lh di">R</span>T23】ails应用程序配置文件</p><p id="8580" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设置完env变量后，我们必须将local_env.yml文件设置到config/application.rb文件中。在config/application.rb文件中:</p><p id="95ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加以下代码:</p><pre class="km kn ko kp gt li lj lk ll aw lm bi"><span id="60fd" class="ln lo iq lj b gy lp lq l lr ls">config.before_configuration do<br/>  env_file = File.join(Rails.root, 'config', 'local_env.yml')<br/>  YAML.load(File.open(env_file)).each do |key, value|<br/>    ENV[key.to_s] = value<br/>  end if File.exists?(env_file)<br/>end</span></pre><p id="b4f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的代码从local_env.yml文件中设置环境变量。</p><p id="478d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kz translated"><span class="l la lb lc bm ld le lf lg lh di">U</span>T27】se代码中的环境变量</p><p id="1aaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Rails应用程序中的任何地方使用ENV["MAIL_USERNAME"]。</p><p id="d8a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">举个例子，</p><pre class="km kn ko kp gt li lj lk ll aw lm bi"><span id="464f" class="ln lo iq lj b gy lp lq l lr ls">ActionMailer::Base.smtp_settings = {<br/>    address: "smtp.gmail.com",<br/>    enable_starttls_auto: true,<br/>    port: 587,<br/>    authentication: :plain,<br/>    user_name: ENV["MAIL_USERNAME"],<br/>    password: ENV["MAIL_PASSWORD"],<br/>    openssl_verify_mode: 'none'<br/>    }</span></pre><p id="219d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">享受编码。</p><p id="4ed6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">感谢&amp;问候，<br/> Alok Rawat </strong></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="908d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ky">原载于</em><a class="ae kx" href="https://qiita.com/alokrawat050/items/0d7791b3915579f95791" rel="noopener ugc nofollow" target="_blank"><em class="ky">qiita.com</em></a><em class="ky">。</em></p></div></div>    
</body>
</html>