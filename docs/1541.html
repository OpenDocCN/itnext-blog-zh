<html>
<head>
<title>Webpack 4 write .pug templates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Webpack 4写入。pug模板</h1>
<blockquote>原文：<a href="https://itnext.io/webpack-4-write-pug-templates-c24e5ea07317?source=collection_archive---------2-----------------------#2018-11-19">https://itnext.io/webpack-4-write-pug-templates-c24e5ea07317?source=collection_archive---------2-----------------------#2018-11-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7d9cbca23ece3b03d9d03dc317da7e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apO1lnf-hcJshPTvwTxM5A.png"/></div></div></figure><p id="7e9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">即使webpack是JS的捆绑工具，它也可以扩展到做几乎所有的事情。</p><p id="635d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们看看如何配置webpack来解析和插入数据。帕格文件。</p><h2 id="70e7" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">项目设置</h2><ol class=""><li id="8d2c" class="ls lt it kd b ke lu ki lv km lw kq lx ku ly ky lz ma mb mc bi translated">创建<strong class="kd iu"> package.json </strong>文件</li><li id="9b6e" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">安装<strong class="kd iu">web pack</strong>&amp;<strong class="kd iu">web pack-CLI</strong>&amp;<strong class="kd iu">web pack-dev-server</strong></li><li id="4a51" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">创建一个<strong class="kd iu"> src </strong>文件夹和一个文件<strong class="kd iu"> app.js </strong></li><li id="c8ef" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">在<strong class="kd iu"> package.json </strong>中创建3个脚本</li><li id="1c76" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">创建一个<strong class="kd iu"> webpack.config.js </strong>文件</li><li id="a4cf" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">为<strong class="kd iu"> webpack </strong>创建一个简单的配置</li></ol><p id="8222" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi">— — — — — — — — — — — — — — — — — — — — — —</p><ol class=""><li id="57b0" class="ls lt it kd b ke kf ki kj km mi kq mj ku mk ky lz ma mb mc bi translated">创建一个新文件夹，并在其中运行该命令以生成<strong class="kd iu"> package.json </strong>文件:</li></ol><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="5d42" class="kz la it mq b gy mu mv l mw mx">npm init -y</span></pre><blockquote class="my mz na"><p id="93cb" class="kb kc nb kd b ke kf kg kh ki kj kk kl nc kn ko kp nd kr ks kt ne kv kw kx ky im bi translated"><strong class="kd iu"> -y </strong>将创建文件而不询问任何问题</p></blockquote><p id="3447" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.我们只在开发中需要这个模块，所以我们将把它们作为开发依赖项安装</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="6206" class="kz la it mq b gy mu mv l mw mx">npm i -D webpack webpack-cli webpack-dev-server</span></pre><blockquote class="my mz na"><p id="f33b" class="kb kc nb kd b ke kf kg kh ki kj kk kl nc kn ko kp nd kr ks kt ne kv kw kx ky im bi translated">这和这个是一样的:</p></blockquote><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="e0d5" class="kz la it mq b gy mu mv l mw mx">npm install --save-dev webpack webpack-cli webpack-dev-server</span></pre><p id="c30a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi">3.</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/44bc763bc2fc6d32553a7da4ca9b0a02.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*LauX_wCBLis-dn-18WslKg.png"/></div></figure><p id="f199" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.我们需要<strong class="kd iu"> 3个脚本</strong>:一个在<strong class="kd iu">生产</strong>模式<strong class="kd iu">模式</strong>下运行webpack，一个在<strong class="kd iu">开发模式</strong>下运行，一个启动<strong class="kd iu">开发服务器</strong></p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="7b89" class="kz la it mq b gy mu mv l mw mx">"scripts": {</span><span id="e1af" class="kz la it mq b gy ng mv l mw mx">"build": "webpack --mode=production",</span><span id="1bec" class="kz la it mq b gy ng mv l mw mx">"build:dev": "webpack --mode=development",</span><span id="6185" class="kz la it mq b gy ng mv l mw mx">"start:dev": "webpack-dev-server --mode=development"</span><span id="2011" class="kz la it mq b gy ng mv l mw mx">},</span></pre><p id="a6ae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi">5.</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2a5d7a627c6dd1784b76efcdf46c874a.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*JE0nzDS167zoK4F79lkQfg.png"/></div></figure><p id="cf4c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">6.如果我们希望使用我们的脚本在开发模式和生产模式下运行webpack命令，那么我们必须使用公共配置创建一个单独的配置对象，然后根据webpack命令的参数，我们将添加不同的规则。为了区分生产和开发，我们必须按照以下方式编写</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="d53e" class="kz la it mq b gy mu mv l mw mx">const path = require('path');</span><span id="3f1e" class="kz la it mq b gy ng mv l mw mx">const config = {<br/>  entry: {<br/>    app: './src/app.js'<br/>  },<br/>  output: {<br/>    path: path.resolve(__dirname, 'dist'),<br/>    filename: "[name].bundle.js",<br/>  },<br/>  devServer: {<br/>    port: 3000,<br/>  }<br/>};</span><span id="a07d" class="kz la it mq b gy ng mv l mw mx">module.exports = (env, argv) =&gt; {</span><span id="6e75" class="kz la it mq b gy ng mv l mw mx">if (argv.mode === 'development') {}<br/> if (argv.mode === 'production') {}</span><span id="e019" class="kz la it mq b gy ng mv l mw mx">return config;<br/>}</span></pre><blockquote class="my mz na"><p id="c144" class="kb kc nb kd b ke kf kg kh ki kj kk kl nc kn ko kp nd kr ks kt ne kv kw kx ky im bi translated">这样，我们为应用程序定义了一个入口和输出点，即开发服务器的端口，并且我们创建了一个简单的样板文件来确定我们是在生产模式还是开发模式下运行webpack命令。即使这个简短的教程我们不需要它，但知道你如何做到这一点也是很好的。</p></blockquote><h2 id="bfaa" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">补充。泥料支架</h2><p id="8b07" class="pw-post-body-paragraph kb kc it kd b ke lu kg kh ki lv kk kl km ni ko kp kq nj ks kt ku nk kw kx ky im bi translated">接下来让webpack读取<strong class="kd iu"> pug </strong>文件，并将它们加载到<strong class="kd iu">发行版</strong>文件夹中。</p><ol class=""><li id="0127" class="ls lt it kd b ke kf ki kj km mi kq mj ku mk ky lz ma mb mc bi translated">安装<strong class="kd iu"> pug，pug-loader，html-webpack-plugin </strong></li><li id="c8a6" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">用一些哑数据创建一个文件:<strong class="kd iu"> index.pug </strong>。</li><li id="9515" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">在webpack.config.js文件中编写新规则</li></ol><p id="e39f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi">— — — — — — — — — — — — — — — — — — — — — — —</p><ol class=""><li id="5b9c" class="ls lt it kd b ke kf ki kj km mi kq mj ku mk ky lz ma mb mc bi translated"><strong class="kd iu"> pug </strong>模块:<em class="nb">读取pug文件</em>；<strong class="kd iu"> pug-loader </strong> : <em class="nb">将文件内容作为模板函数返回，这样我们可以在模板中插入数据；</em><strong class="kd iu">html-web pack-plugin:</strong><em class="nb">将从</em><strong class="kd iu"><em class="nb">src</em></strong><em class="nb">文件夹中获取</em><strong class="kd iu"><em class="nb">index . pug</em></strong><em class="nb">文件，并使用另外两个加载器将发出一个新的</em><strong class="kd iu"><em class="nb"/></strong><em class="nb">文件中的</em><strong class="kd iu"><em class="nb">dist</em></strong><em class="nb"/></li></ol><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="32c3" class="kz la it mq b gy mu mv l mw mx">npm i -D pug pug-loader html-webpack-plugin</span></pre><p id="7eec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.在src文件夹中创建一个新的index.pug文件，然后在其中创建一个简单的布局。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/e43e7fcc1cf1e84bed2e33b2a54fee3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQqn9HwbX9ZrjETKwIPpCg.png"/></div></div></figure><p id="7ec5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.在<strong class="kd iu"> webpack.config.js的顶部</strong>文件需要<strong class="kd iu"> html-webpack-plugin </strong></p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="12b6" class="kz la it mq b gy mu mv l mw mx">const HtmlWebpackPlugin = require(‘html-webpack-plugin’);</span></pre><p id="0010" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，在<strong class="kd iu"> devServer </strong>属性之后，添加一个<strong class="kd iu">逗号</strong>，然后编写<strong class="kd iu"> </strong>以下规则。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="e842" class="kz la it mq b gy mu mv l mw mx">plugins: [<br/>  new HtmlWebpackPlugin({<br/>    template: ‘./src/index.pug’<br/>  }),<br/>],<br/>module: {<br/>  rules: [<br/>    { <br/>      test: /\.pug$/,<br/>      use: [“pug-loader”]<br/>    },<br/>  ]<br/>}</span></pre><blockquote class="my mz na"><p id="8519" class="kb kc nb kd b ke kf kg kh ki kj kk kl nc kn ko kp nd kr ks kt ne kv kw kx ky im bi translated">如果我们跑，加上这一点</p></blockquote><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="c2de" class="kz la it mq b gy mu mv l mw mx">npm run build</span></pre><blockquote class="my mz na"><p id="6a90" class="kb kc nb kd b ke kf kg kh ki kj kk kl nc kn ko kp nd kr ks kt ne kv kw kx ky im bi translated">或者</p></blockquote><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="8962" class="kz la it mq b gy mu mv l mw mx">npm run build:dev</span></pre><blockquote class="my mz na"><p id="bc6e" class="kb kc nb kd b ke kf kg kh ki kj kk kl nc kn ko kp nd kr ks kt ne kv kw kx ky im bi translated">您应该会在文件夹<strong class="kd iu"> dist </strong>中看到一个<strong class="kd iu">index.html</strong>文件，该文件正是我们的<strong class="kd iu"> index.pug </strong>文件中的内容。与此同时，我们应该看到另一个名为<strong class="kd iu"> app.bundle.js的文件</strong>这个js文件与我们的html文件通过脚本标签自动链接。所以在新文件发布的最后:<strong class="kd iu">index.html</strong>你应该看到以下内容</p></blockquote><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/1d3cfc162fcd03ecd8586b52073c62f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*xt-LKppX--pwm8RzFzriKw.png"/></div></figure><h2 id="7bc6" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated"><strong class="ak">创建一个局部</strong></h2><p id="20f8" class="pw-post-body-paragraph kb kc it kd b ke lu kg kh ki lv kk kl km ni ko kp kq nj ks kt ku nk kw kx ky im bi translated">接下来，让我们创建一个分部，插入一些虚拟数据，并将这个分部的内容放在主标记中。</p><ol class=""><li id="945a" class="ls lt it kd b ke kf ki kj km mi kq mj ku mk ky lz ma mb mc bi translated">使用以下代码在src文件夹中创建一个新的pug文件(users.pug)</li><li id="2864" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">在app.js内部:需要模板并插入数据</li></ol><p id="af4e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/b1c5d145535ed118d4dc04f75e3a7d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*99fM19NKJsBv5NhqlnpDRg.png"/></div></div></figure><p id="9991" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.在<strong class="kd iu"> app.js </strong>中，我们需要模板，创建一个包含所有插值数据的对象，然后渲染模板。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="3f89" class="kz la it mq b gy mu mv l mw mx">let template = require("./users.pug");</span><span id="32bd" class="kz la it mq b gy ng mv l mw mx">let locals = {<br/>  users: [<br/>    "user1",<br/>    "user2",<br/>    "user3",<br/>    "user4",<br/>    "user5"<br/>  ]<br/>};</span><span id="acf5" class="kz la it mq b gy ng mv l mw mx">document.querySelector("main").innerHTML = template(locals);</span></pre><p id="9159" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在构建应用程序并打开index.html，数据将由JS在客户端呈现。</p><h2 id="c871" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">关于Webpack 4的更多信息</h2><p id="0c58" class="pw-post-body-paragraph kb kc it kd b ke lu kg kh ki lv kk kl km ni ko kp kq nj ks kt ku nk kw kx ky im bi translated">如果你想了解更多关于webpack的知识，我在Udemy上有一个关于Webpack 4的完整课程。</p><p id="3121" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里是打折的链接。</p><p id="4be8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae no" href="https://www.udemy.com/webpack-4-made-simple-for-beginners/?couponCode=MEDIUM" rel="noopener ugc nofollow" target="_blank"> Webpack 4让初学者变得简单</a></p></div></div>    
</body>
</html>