<html>
<head>
<title>A minimalist guide to Dependency Injection in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter中依赖注入的最简指南</h1>
<blockquote>原文：<a href="https://itnext.io/a-minimalist-guide-to-dependency-injection-in-flutter-641d4803c0fd?source=collection_archive---------2-----------------------#2021-11-21">https://itnext.io/a-minimalist-guide-to-dependency-injection-in-flutter-641d4803c0fd?source=collection_archive---------2-----------------------#2021-11-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4f1496bc0e2d7b125764e190d5be45d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2PGKJfDO01v7z8zi_nzRg.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="45f5" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">这是给Flutter用户的使用get_it包的依赖注入的介绍</h2></div><h1 id="866c" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">什么是依赖注入？</h1><p id="bd87" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">基本意思是，某样东西依赖于某样东西。很简单，对吧？:)</p><figure class="mi mj mk ml gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mh"><img src="../Images/69efd305bf96fc0b5b8a3feaa4222717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DOKE8eW4eQVZOzVm0Y5hSA.png"/></div></div></figure><p id="23c5" class="pw-post-body-paragraph ll lm je ln b lo mm kf lq lr mn ki lt lu mo lw lx ly mp ma mb mc mq me mf mg im bi translated">我举个例子解释一下</p><h2 id="8d25" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">问题</h2><p id="6430" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">UserService依赖于DioService</p><figure class="mi mj mk ml gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/06a2d15a3d74744f52fcf4caa53c3229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqzozpwnntYsh4RH_KG0Ew.png"/></div></div></figure><h2 id="5cb4" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">解决办法</h2><p id="6391" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">使用阿迪溶液</p><figure class="mi mj mk ml gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/ffe0de54d389289d94212e901886de1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uyqWkJh6LyiPYdgC324x7A.png"/></div></div></figure><h2 id="7cfc" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">为什么这是一个问题？</h2><p id="064e" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">那是因为每个阶级都应该是独立的。</p><p id="59ae" class="pw-post-body-paragraph ll lm je ln b lo mm kf lq lr mn ki lt lu mo lw lx ly mp ma mb mc mq me mf mg im bi translated">依赖注入是一种编程技术，它使一个类不知道它的依赖来自哪里。</p><h2 id="93bc" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">有什么区别？</h2><p id="92a3" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我们将所有依赖项存储在一个地方，并对它们进行管理！</p><figure class="mi mj mk ml gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/fd0200db9ebc079103c30a17470e3a73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3dvB3txp2ckrQFE0js3-hw.jpeg"/></div></div></figure><h1 id="583a" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">怎么做？</h1><p id="dc78" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我会教你如何用<a class="ae nf" href="https://pub.dev/packages/get_it" rel="noopener ugc nofollow" target="_blank"> get_it </a>包做到这一点，但你可以用<a class="ae nf" href="https://pub.dev/packages/riverpod" rel="noopener ugc nofollow" target="_blank"> riverpod </a>或其他DI包做同样的逻辑。他们基本上在做同样的事情。</p><figure class="mi mj mk ml gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mh"><img src="../Images/72d4f7a830c4af47668aa99e9555d88c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9n-9ix-y8Vr-AyvyOK-gJA.png"/></div></div></figure><p id="c49d" class="pw-post-body-paragraph ll lm je ln b lo mm kf lq lr mn ki lt lu mo lw lx ly mp ma mb mc mq me mf mg im bi translated">您可以通过这两个简单的步骤来使用DI:<code class="fe ng nh ni nj b">register</code>和<code class="fe ng nh ni nj b">get</code>！</p><pre class="mi mj mk ml gt nk nj nl nm aw nn bi"><span id="703c" class="mr ku je nj b gy no np l nq nr">// Just register your class before you use the class</span><span id="590c" class="mr ku je nj b gy ns np l nq nr">class CounterProvider extends ChangeNotifier {<br/>  int count = 0;<br/>}</span><span id="54d5" class="mr ku je nj b gy ns np l nq nr">void main() {<br/>  getIt.registerLazySingleton(CounterProvider.new);<br/>  runApp(MyApp());<br/>}</span><span id="c00f" class="mr ku je nj b gy ns np l nq nr">// and get the class using find method and start using!</span><span id="c119" class="mr ku je nj b gy ns np l nq nr">final counter = getIt&lt;CounterProvider&gt;().count++;</span></pre><h1 id="8af7" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">两种类型的寄存器</h1><ol class=""><li id="fe27" class="nt nu je ln b lo lp lr ls lu nv ly nw mc nx mg ny nz oa ob bi translated"><strong class="ln jf">工厂</strong> —在每次调用中创建一个新实例</li><li id="32f0" class="nt nu je ln b lo oc lr od lu oe ly of mc og mg ny nz oa ob bi translated"><strong class="ln jf"> Singleton </strong> —只创建一个实例，并在每次调用时重用它</li></ol><p id="4773" class="pw-post-body-paragraph ll lm je ln b lo mm kf lq lr mn ki lt lu mo lw lx ly mp ma mb mc mq me mf mg im bi translated">它们有一些变种</p><h2 id="7a01" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">1.注册</h2><p id="a9da" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">实例将在注册后立即创建</p><pre class="mi mj mk ml gt nk nj nl nm aw nn bi"><span id="9229" class="mr ku je nj b gy no np l nq nr">getIt<!-- -->.<strong class="nj jf">registerSingleton</strong>(Controller());<br/>// OR<br/>getIt<!-- -->.<strong class="nj jf">registerFactory</strong>(Controller());</span></pre><h2 id="acc2" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">2.懒人登记员</h2><p id="f679" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">实例只有在第一次被调用时才会被创建</p><pre class="mi mj mk ml gt nk nj nl nm aw nn bi"><span id="2344" class="mr ku je nj b gy no np l nq nr">getIt<!-- -->.<strong class="nj jf">registerLazySingleton</strong>(Controller.new);</span><span id="f771" class="mr ku je nj b gy ns np l nq nr">getIt.<strong class="nj jf">registerLazySingleton</strong>(<br/>  () {<br/>    // ... some logic if needed<br/>    return FirebaseAuth();<br/>  },<br/>)</span></pre><h2 id="c3f3" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">3.registerAsync</h2><p id="ede9" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">你可以用异步操作符注册你的类并创建它！</p><pre class="mi mj mk ml gt nk nj nl nm aw nn bi"><span id="52e9" class="mr ku je nj b gy no np l nq nr">// You can also use them using <strong class="nj jf">registerFactoryAsync</strong></span><span id="ffdf" class="mr ku je nj b gy ns np l nq nr">getIt.<strong class="nj jf">registerSingletonAsync</strong>(() async =&gt; await MyAsyncClass());</span><span id="f71f" class="mr ku je nj b gy ns np l nq nr">getIt.<strong class="nj jf">registerSingletonAsync</strong>(() async {<br/>  final prefs = await SharedPreferences.getInstance();<br/>  await prefs.setInt('counter', 12345);<br/>  return prefs;<br/>});</span></pre><h2 id="6797" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">注意</h2><p id="624e" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">还有一些其他的寄存器类型，但我不会继续下去，因为它有点脱离了上下文。因此，如果你想了解更多关于其他功能的信息，你可以查看文档</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><h2 id="7c77" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">得到</h2><p id="d77e" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">如您所见，获取实例是最简单的部分！</p><pre class="mi mj mk ml gt nk nj nl nm aw nn bi"><span id="3048" class="mr ku je nj b gy no np l nq nr">final controller = getIt.<strong class="nj jf">get</strong>&lt;Controller&gt;();<br/><strong class="nj jf"><br/></strong>final controller = getIt&lt;Controller&gt;();</span></pre></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><h2 id="24a8" class="mr ku je bd kv ms mt dn kz mu mv dp ld lu mw mx lf ly my mz lh mc na nb lj nc bi translated">参考</h2><div class="is it gp gr iu oo"><a href="https://pub.dev/packages/get_it" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd jf gy z fp ot fr fs ou fu fw jd bi translated">get_it | Dart包</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">❤️赞助商这是一个简单的服务定位器，为飞镖和颤振项目提供一些额外的好东西，非常受启发…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">公共开发</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ja oo"/></div></div></a></div><div class="is it gp gr iu oo"><a href="https://www.filledstacks.com/post/flutter-dependency-injection-a-beginners-guide/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd jf gy z fp ot fr fs ou fu fw jd bi translated">颤动依赖注入初学者指南</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">在本教程中，我们将介绍Flutter中被接受的依赖注入的三种形式。我们将看看…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.filledstacks.com</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc ja oo"/></div></div></a></div><div class="is it gp gr iu oo"><a href="https://medium.com/android-news/basics-of-dependency-injection-for-dummies-b844d642e174" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd jf gy z fp ot fr fs ou fu fw jd bi translated">傻瓜依赖注入的基础！</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">在这篇文章中，我将用一种非常基本的方式来谈论依赖注入！这篇文章是针对那些有…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc ja oo"/></div></div></a></div><div class="is it gp gr iu oo"><a href="https://www.codementor.io/@olotintemitope/dependency-injection-explained-in-plain-english-b24hippx7" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd jf gy z fp ot fr fs ou fu fw jd bi translated">用简单的英语解释依赖注入</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">依赖注入是一个软件设计概念，它允许以一种完全…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.codementor.io</p></div></div><div class="ox l"><div class="pf l oz pa pb ox pc ja oo"/></div></div></a></div></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><h1 id="bc30" class="kt ku je bd kv kw pg ky kz la ph lc ld kk pi kl lf kn pj ko lh kq pk kr lj lk bi translated">感谢您的阅读！</h1><p id="5355" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">如果你喜欢这篇文章，请点击👏按钮(你知道你可以升到50吗？)</p></div></div>    
</body>
</html>