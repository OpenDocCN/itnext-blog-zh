<html>
<head>
<title>Easily Edit or View OpenAPI API Specifications Using Free Tools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用免费工具轻松编辑或查看OpenAPI API规范</h1>
<blockquote>原文：<a href="https://itnext.io/easily-edit-or-view-openapi-api-specifications-using-free-tools-33d738630d6a?source=collection_archive---------5-----------------------#2022-05-20">https://itnext.io/easily-edit-or-view-openapi-api-specifications-using-free-tools-33d738630d6a?source=collection_archive---------5-----------------------#2022-05-20</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7a69" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">编辑OpenAPI规范或者在你的网站上显示它们的聪明方法</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6426d411a5b202d3dd3507e4584dde6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NXY9Yjj44vDxdwvT.jpg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">大摇大摆的编辑在行动，作者的形象</figcaption></figure><p id="1d3a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><strong class="lb iv"> OpenAPI文档用YAML或JSON编写，可以用任何程序员编辑器编辑。Swagger编辑器等工具通过立即显示错误和交互式API文档，以交互方式帮助编写OpenAPI规范。由于OpenAPI是一个开放的规范，所以任何公司开发OpenAPI工具的大门都是敞开的。在这篇文章中，我们将使用swagger.io网站上的Swagger编辑器，并尝试一些可以在您的笔记本电脑上运行的替代方法。</strong></p><p id="b672" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">回想一下，OpenAPI是一种记录应用程序编程接口(API)的方法。它最初是作为Swagger规范而存在的，但是当Smart Bear将其贡献给OpenAPI计划时，它的名字就变成了OpenAPI。OpenAPI规范文档以YAML或JSON格式编写。它们描述了对象模式、API方法等等。OpenAPI工具可以生成交互式文档，确定AWS API网关等平台的配置，或者生成客户端或服务器源代码。</p><p id="7ef9" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在整个教程中，我们指的是<code class="fe lv lw lx ly b">todo.yml</code>。您可以使用任何您喜欢的OpenAPI规范。但是，如果您想查看编写本教程时使用的规范，GitHub资源库位于:<a class="ae lz" href="https://github.com/robogeek/typescript-todo-service" rel="noopener ugc nofollow" target="_blank">https://github.com/robogeek/typescript-todo-service</a></p><h1 id="7062" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">在线大摇大摆的编辑器</h1><p id="8b87" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">在线Swagger编辑器是最简单的OpenAPI编辑器。一个导航到网站(<a class="ae lz" href="https://swagger.io/tools/swagger-editor/" rel="noopener ugc nofollow" target="_blank">https://swagger.io/tools/swagger-editor/</a>)并点击现场演示按钮，这将带你到<a class="ae lz" href="http://editor.swagger.io/" rel="noopener ugc nofollow" target="_blank">http://editor.swagger.io/</a>。在这个站点上，您可以开始编辑JSON格式或YAML格式的OpenAPI文档。您最初将编辑Pet Store演示API，但是清除编辑器缓冲区并编辑您的API是很容易的。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj mx"><img src="../Images/14bb62acf8727a3b96916bfd70213ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5iUwFWE85vcZDD5S.png"/></div></div></figure><p id="b6a4" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">编辑面板是一个常规的程序员编辑器，用于编辑JSON或YAML形式的OpenAPI规范。当您编辑OpenAPI规范时，它会交互式地验证代码，并给出错误和警告，帮助完成代码。编辑时，预览窗格会以交互方式显示您正在创建的API的不断更新的交互式摘要。这意味着您可以轻松地探索您的API，并直接确定代码是否符合您的意图。编辑器依靠后端服务来完成检测错误和生成交互式文档的繁重工作。</p><p id="d1e3" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">虽然编辑体验非常好，但它没有与您的本地文件系统集成。这意味着打开一个文件进行编辑，或者将编辑内容保存回你打开的文件，这是很笨拙的，我们将在后面讨论。使用在线编辑器让你受到Smart Bear的支配，依赖于他们继续免费托管这个编辑器的意愿。</p><p id="a8a7" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Smart Bear确实提供付费在线服务Swagger Hub。换句话说，在线编辑器是付费服务的免费演示。</p><h1 id="4ff4" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">在本地安装Swagger编辑器</h1><p id="5c38" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">在您的机器上运行编辑器可能是一个最佳实践，这样您就可以控制自己的命运。Smart Bear使编辑器可以作为Docker容器或使用npm安装的Node.js包使用。这是安装在他们网站上的同一个编辑器，但是你可以在你的电脑上运行它。</p><p id="cfa1" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">不幸的是，Node.js包<code class="fe lv lw lx ly b">swagger-editor</code>没有提供一个清晰描述的运行编辑器的方法。这个包的自述文件是这样写的，就好像你正在使用GitHub(<a class="ae lz" href="https://github.com/swagger-api/swagger-editor" rel="noopener ugc nofollow" target="_blank">https://github.com/swagger-api/swagger-editor</a>)的Git库一样。如果您对源代码感兴趣，这是一个好去处，但是它似乎不适合日常使用。</p><p id="86cd" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">相反，让我们集中使用Docker来运行Swagger编辑器。</p><p id="3e6b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">如果你还没有在你的笔记本上安装Docker，请点击<a class="ae lz" href="https://techsparx.com/software-development/docker/damp/getting-started.html" rel="noopener ugc nofollow" target="_blank">开始使用Docker:安装，第一步</a>获取教程。</p><p id="d257" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">在GitHub库的自述文件中，您可以找到关于使用以下命令运行Docker容器的文档:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="c26d" class="nc mb iu ly b gz nd ne l nf ng">$ docker run -d -p 80:8080 swaggerapi/swagger-editor</span></pre><p id="4612" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">运行这个命令后，您可以在浏览器中进入<code class="fe lv lw lx ly b">http://localhost</code>,在Swagger网站上找到确切的Swagger编辑器。不同之处在于编辑器是在你的电脑上运行的，你有额外的控制余地。</p><p id="bfd7" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">命令行的替代方法是创建一个名为<code class="fe lv lw lx ly b">docker-compose.yml</code>的文件，其中包含:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="75d9" class="nc mb iu ly b gz nd ne l nf ng">version: '3'  </span><span id="d3b3" class="nc mb iu ly b gz nh ne l nf ng">services:<br/>   editor:<br/>     image: swaggerapi/swagger-editor<br/>     ports:<br/>       - 80:8080</span></pre><p id="8383" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">然后，使用以下命令运行它:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="3caa" class="nc mb iu ly b gz nd ne l nf ng">$ docker compose up</span></pre><p id="8a4a" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">注意，这是“T3”，而不是“T4”。Docker tools的最新版本包含一个“<code class="fe lv lw lx ly b">docker compose</code>”命令，看起来具有古老的“<code class="fe lv lw lx ly b">docker-compose</code>”命令的功能。建议切换到新命令，忘掉旧命令。Docker-compose已死，Docker Compose万岁？</p><p id="e43f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">编辑器运行后，用户体验与Swagger网站相同。不同的是你有更多的控制权，因为编辑器是在你的电脑上执行的。</p><h1 id="804c" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">使用Swagger编辑器编辑本地OpenAPI规范文件</h1><p id="6c33" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">无论你是在网站上使用Swagger编辑器，还是在电脑上的Docker下使用，都是同一个Swagger编辑器。让我们讨论一下用它来编辑一个本地文件。我们之前说过编辑本地文件很笨拙。因为是web应用，所以不能直接打开你电脑上的文件，导致笨拙。</p><p id="34fd" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">要编辑OpenAPI规范，点击<em class="ni">文件</em>菜单并选择<em class="ni">导入文件</em>。这将打开一个文件选择器，您可以在其中选择一个本地文件。注意短语“<em class="ni">导入文件</em>”而不是本机应用中使用的“<em class="ni">打开文件</em>”。这个短语提醒您，作为一个web应用程序，它并不直接在文件系统中打开文件。导入后，编辑器包含您选择的规范。</p><p id="3207" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">编辑完规范之后，您将得出一个结论，您希望将文件保存回磁盘。为此，返回<em class="ni">文件</em>菜单，选择<em class="ni">另存为YAML </em>。它不是让您选择文件名，而是将规范保存为下载文件夹中的“<code class="fe lv lw lx ly b">openapi.yaml</code>”。要将此文件保存回您的工作区，您必须从下载中手动复制该文件。</p><p id="294d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这个过程有些笨拙。一方面，保存文件需要两个步骤，保存到<code class="fe lv lw lx ly b">openapi.yaml</code>，然后将该文件移动到原始文件。另一方面，我认为所有IDE用户都应该养成一个习惯，那就是定期键入CTRL-S或COMMAND-S来定期保存您正在编辑的文件。这样做可以将文件保存到磁盘，如果编辑器崩溃，这一点很重要。因为Swagger编辑器在浏览器窗格中，所以不能使用这个习惯。</p><h1 id="9662" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">使用Swagger编辑器自动编辑本地文件</h1><p id="b191" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">Docker命令可以很容易地列出要编辑的文件。这将省去使用<em class="ni">导入文件</em>编辑文件的步骤。</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="fbb7" class="nc mb iu ly b gz nd ne l nf ng">$ docker run -p 80:8080 -v $(pwd):/tmp \<br/>    -e SWAGGER_FILE=/tmp/todo.yml swaggerapi/swagger-editor</span></pre><p id="0e3b" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这将当前目录作为<code class="fe lv lw lx ly b">/tmp</code>挂载到容器中，然后告诉Swagger Editor编辑<code class="fe lv lw lx ly b">/tmp/todo.yml</code>。当你在<code class="fe lv lw lx ly b">http://localhsot</code>上打开浏览器窗口时，你会看到文件已经在那里了。</p><p id="c900" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">将它用作合成文件相当简单。创建一个名为<code class="fe lv lw lx ly b">docker-compose-edit-spec.yml</code>的文件，其中包含:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="c2a8" class="nc mb iu ly b gz nd ne l nf ng">version: '3'  </span><span id="c39f" class="nc mb iu ly b gz nh ne l nf ng">services:<br/>   editor:<br/>     image: swaggerapi/swagger-editor<br/>     ports:<br/>       - 80:8080<br/>     volumes:<br/>       - ./todo.yml:/tmp/todo.yml<br/>     environment:<br/>       - SWAGGER_FILE=/tmp/todo.yml</span></pre><p id="0707" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这与命令行工具的设置相同，但是所有内容都整齐地记录在一个配置文件中。</p><p id="2531" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">要运行此合成文件:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="7d34" class="nc mb iu ly b gz nd ne l nf ng">$ docker compose --file docker-compose-edit-spec.yml up</span></pre><p id="9f49" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">通过给合成文件起这么长的名字，我们能够将多个合成文件用于多种目的。</p><h1 id="2a4b" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">安装Visual Studio代码的OpenAPI扩展</h1><p id="9a38" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">42Crunch的这个扩展本质上是集成到Visual Studio代码中的Swagger编辑器。在VSC，打开扩展面板，搜索“OpenAPI”。在撰写本文时，这个扩展是最好的结果，也是目前为止VSC安装最广泛的OpenAPI工具。</p><p id="2311" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">安装后，打开JSON或YAML文件时，该扩展会自动检测它是否是OpenAPI规范。如果是这样，它添加了对OpenAPI有用的行为。这包括编辑器窗格中的代码完成和代码提示，以及预览窗格。单击VSC工具栏中的预览按钮可触发预览窗格。交互式API视图与Swagger编辑器提供的相同。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/5223d0de35e80ba00668d4adadaf284c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yPZNK-Yytji3dDQu.png"/></div></div></figure><p id="483f" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">因为您正在VSC编辑器中编辑规范，所以您可以直接访问文件系统。例如，您可以随心所欲地键入CTRL-S或COMMAND-S。更重要的是，您不需要手动重命名保存的文件，因为VSC直接保存到打开的文件。</p><p id="12ac" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这解决了前面描述的笨拙。您正在直接编辑本地文件，并直接保存到本地文件。缺点是增加了一些Visual Studio代码的臃肿。</p><h1 id="9bf5" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">使用Swagger UI发布API文档</h1><p id="5f45" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">模型是OpenAPI规范的文档是交互式的。Swagger UI项目(【https://github.com/swagger-api/swagger-ui】T2)是OpenAPI规范的浏览器端查看器。它实际上是Swagger编辑器的预览面板。目的是在公共网站上部署，这样公众就可以查看交互式API文档。</p><p id="141c" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">Swagger UI自述文件讨论了两种安装方法:</p><ol class=""><li id="2765" class="nj nk iu lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">在HTML页面中嵌入一些代码，Swagger UI完全在浏览器中运行。</li><li id="ca97" class="nj nk iu lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">部署Docker容器。</li></ol><p id="9ce2" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">对于HTML部署，请参考Swagger UI团队展示的模板。更多信息请参见:<a class="ae lz" href="https://techsparx.com/software-development/openapi/swagger-ui-viewer.html" rel="noopener ugc nofollow" target="_blank">在一个HTML页面中显示Swagger UI，而不使用服务器端服务</a></p><p id="1035" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">相反，让我们探索使用Docker容器。</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="eb34" class="nc mb iu ly b gz nd ne l nf ng">$ docker run -p 80:8080 \<br/>   -e BASE_URL=/swagger \<br/>   -e SWAGGER_JSON=/foo/swagger.json \<br/>   -v /bar:/foo \<br/>   swaggerapi/swagger-ui</span></pre><p id="cd97" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这使用了一个本地文件，它将是在容器中显示为<code class="fe lv lw lx ly b">/foo/swagger.json</code>的<code class="fe lv lw lx ly b">/bar/swagger.json</code>。虽然这个环境变量是<code class="fe lv lw lx ly b">SWAGGER_JSON</code>，我们也可以提供一个YAML文件。<code class="fe lv lw lx ly b">BASE_URL</code>变量使API查看器出现在不同的URL上，这意味着您不是查看API的<code class="fe lv lw lx ly b">http://localhost/</code>，而是查看<code class="fe lv lw lx ly b"><a class="ae lz" href="http://localhost/swagger." rel="noopener ugc nofollow" target="_blank">http://localhost/swagger</a></code> <a class="ae lz" href="http://localhost/swagger." rel="noopener ugc nofollow" target="_blank">。</a></p><p id="ee57" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这对于在您的笔记本电脑上显示API很有用，但是对于生产部署就不那么有用了。</p><p id="3661" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这里有一个Docker Compose部署，它试图显示一个HTTP URL上可用的API规范。</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="e99a" class="nc mb iu ly b gz nd ne l nf ng">version: '3'  </span><span id="843f" class="nc mb iu ly b gz nh ne l nf ng">services:</span><span id="6768" class="nc mb iu ly b gz nh ne l nf ng">    nginx:<br/>     image: nginx<br/>     networks:<br/>       - openapi<br/>     volumes:<br/>       - .:/usr/share/nginx/html:ro</span><span id="2840" class="nc mb iu ly b gz nh ne l nf ng">    editor:<br/>     image: swaggerapi/swagger-ui<br/>     networks:<br/>       - openapi<br/>     ports:<br/>       - 80:8080<br/>     # volumes:<br/>     #   - ./todo.yml:/tmp/todo.yml<br/>     environment:<br/>       - SWAGGER_JSON_URL=http://nginx/todo.yml<br/>       # - SWAGGER_JSON=/tmp/todo.yml  </span><span id="698d" class="nc mb iu ly b gz nh ne l nf ng">networks:<br/>   openapi:</span></pre><p id="99f4" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这部署了两个容器，一个是NGINX，专门用于服务OpenAPI规范，另一个是Swagger UI。如果我们使用<code class="fe lv lw lx ly b">SWAGGER_JSON_URL</code>和注释掉<code class="fe lv lw lx ly b">SWAGGER_JSON</code>，这将尝试从NGINX服务器中检索<code class="fe lv lw lx ly b">todo.yml</code>。或者，我们可以使用<code class="fe lv lw lx ly b">SWAGGER_JSON</code>而不是<code class="fe lv lw lx ly b">SWAGGER_JSON_URL</code>从本地文件中检索它。</p><p id="2897" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">使用NGINX服务器时，弹出一个错误:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="02dd" class="nc mb iu ly b gz nd ne l nf ng">Failed to load API definition. Fetch error Failed to fetch http://nginx/todo.yml Fetch error Possible cross-origin (CORS) issue? The URL origin (http://nginx) does not match the page (http://localhost). Check the server returns the correct 'Access-Control-Allow-*' headers.</span></pre><p id="6271" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">有了这个合成文件，Swagger UI容器就可以到达位于<code class="fe lv lw lx ly b">http://nginx</code> URL的NGINX容器。然后，它从<code class="fe lv lw lx ly b">http://nginx/todo.yml</code>中检索规格。这意味着由Swagger UI加载的JavaScript从不同的URL加载，而不是OpenAPI规范的源代码，这看起来像一个CORS错误。有一个建议是添加访问控制头，这是值得研究的。</p><p id="af71" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">使用带有Docker合成文件的Swagger UI的最简单的例子是:</p><pre class="kk kl km kn gu my ly mz na aw nb bi"><span id="2b26" class="nc mb iu ly b gz nd ne l nf ng">version: '3'  </span><span id="99d2" class="nc mb iu ly b gz nh ne l nf ng">services:<br/>    editor:<br/>     image: swaggerapi/swagger-ui<br/>     ports:<br/>       - 80:8080<br/>     volumes:<br/>       - ./todo.yml:/tmp/todo.yml<br/>     environment:<br/>       - BASE_URL=/todoapi<br/>       - SWAGGER_JSON=/tmp/todo.yml</span></pre><p id="f986" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">这将本地OpenAPI规范挂载到容器中，告诉Swagger UI使用它，并将其放在<code class="fe lv lw lx ly b">/todoapi</code> URL。</p><p id="1758" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">关于在网页上部署Swagger UI的工作示例，请参见:<a class="ae lz" href="https://techsparx.com/software-development/openapi/swagger-ui-viewer.html" rel="noopener ugc nofollow" target="_blank">在不使用服务器端服务的情况下在HTML页面中显示Swagger UI</a></p><h1 id="0eee" class="ma mb iu bd mc md me mf mg mh mi mj mk ka ml kb mm kd mn ke mo kg mp kh mq mr bi translated">摘要</h1><p id="50d0" class="pw-post-body-paragraph kz la iu lb b lc ms jv le lf mt jy lh li mu lk ll lm mv lo lp lq mw ls lt lu in bi translated">Swagger编辑器和Swagger UI是编辑和查看OpenAPI规范的有用工具。它们可以很容易地在你的笔记本电脑上使用，或者作为网站上的托管服务。</p><p id="615d" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">对于编辑OpenAPI文件，建议使用Visual Studio代码的OpenAPI扩展。</p><p id="3139" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated">OpenAPI是一个开放的规范，使得任何组织都可以使用它，任何公司都可以开发和提供OpenAPI工具。OpenAPI工具的清单很长，而且还在不断增加，位于:<a class="ae lz" href="https://openapi.tools/" rel="noopener ugc nofollow" target="_blank">https://openapi.tools/</a></p></div><div class="ab cl nx ny hy nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="in io ip iq ir"><h1 id="09c5" class="ma mb iu bd mc md oe mf mg mh of mj mk ka og kb mm kd oh ke mo kg oi kh mq mr bi translated">关于作者</h1><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oj"><img src="../Images/6ed54c9bc827198011c67f2ab3f2fbbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*r4ZzJXYFBvRYzn_j.jpg"/></div></figure><p id="af47" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><a class="ae lz" href="https://davidherron.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iv">大卫·赫伦</strong> </a> <strong class="lb iv"> </strong>:大卫·赫伦是一名作家和软件工程师，专注于技术的明智使用。他对太阳能、风能和电动汽车等清洁能源技术特别感兴趣。David在硅谷从事了近30年的软件工作，从电子邮件系统到视频流，再到Java编程语言，他已经出版了几本关于Node.js编程和电动汽车的书籍。</p></div><div class="ab cl nx ny hy nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="in io ip iq ir"><p id="ce77" class="pw-post-body-paragraph kz la iu lb b lc ld jv le lf lg jy lh li lj lk ll lm ln lo lp lq lr ls lt lu in bi translated"><em class="ni">最初发表于</em><a class="ae lz" href="https://techsparx.com/software-development/openapi/edit-openapi-documents.html" rel="noopener ugc nofollow" target="_blank"><em class="ni">https://techsparx.com</em></a><em class="ni">。</em></p></div></div>    
</body>
</html>