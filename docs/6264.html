<html>
<head>
<title>Secure Azure Cosmos DB access by using Azure Managed Identities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过使用Azure托管身份保护Azure Cosmos DB访问</h1>
<blockquote>原文：<a href="https://itnext.io/secure-azure-cosmos-db-access-by-using-azure-managed-identities-55f9fdf48fda?source=collection_archive---------4-----------------------#2021-10-03">https://itnext.io/secure-azure-cosmos-db-access-by-using-azure-managed-identities-55f9fdf48fda?source=collection_archive---------4-----------------------#2021-10-03</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/e7155ec72988216459be62ed927e6e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6iFd1RXsJhRZVzpjpM9kXQ.jpeg"/></div></div></figure><p id="6ae7" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">了解如何使用Azure RBAC连接到Cosmos DB，并通过使用Azure托管身份来提高应用程序的安全性。</p><p id="8c03" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">几个月前，Azure Cosmos DB团队发布了一个新功能，使开发人员能够使用Azure主体(AAD用户、服务主体等)。)和Azure RBAC来连接数据库服务。特性<strong class="kb is">极大地提高了安全性</strong>，并且可以完全取代应用程序中连接字符串和密钥的使用——通常情况下，您应该不时地轮换这些东西，以最小化暴露凭证的风险。此外，您可以在帐户、数据库和容器级别对这些主体应用细粒度的授权规则，并控制每个“用户”能够做什么。</p><p id="1cea" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">为了在你的服务中完全摆脱密码和密钥，微软鼓励开发者使用“管理身份”。托管身份为连接到支持AAD身份验证的Azure资源时要使用的应用程序和服务提供身份。有两种受管身份:</p><ul class=""><li id="7a5d" class="ky kz ir kb b kc kd kg kh kk la ko lb ks lc kw ld le lf lg bi translated"><strong class="kb is">系统分配的身份</strong>:由Azure在服务级别自动创建(例如Azure AppService)，并与it的生命周期相关联。然后，只有该特定Azure资源可以使用该身份来请求令牌，并且当删除服务时，该身份将被自动移除</li><li id="c61f" class="ky kz ir kb b kc lh kg li kk lj ko lk ks ll kw ld le lf lg bi translated">用户分配的身份:独立于Azure服务创建，作为订阅中的独立资源。身份可以分配给多个资源，并且不依赖于特定Azure资源的生命周期</li></ul><p id="5fc3" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">添加托管身份时，Azure还会创建一个专用证书，用于在Azure Active Directory的令牌提供者处请求令牌。当您最终想要访问支持AAD的服务(如Cosmos DB或Azure KeyVault)时，您只需调用本地元数据端点(底层服务/Azure VM—<a class="ae lm" href="http://169.254.169.254/metadata/identity/oauth2/token" rel="noopener ugc nofollow" target="_blank">http://169 . 254 . 169 . 254/metadata/identity/oauth 2/token</a>)来请求令牌，然后使用该令牌对服务进行身份验证—无需使用密码，因为分配的托管身份的证书正用于身份验证。BTW，证书过期前自动为你轮换，完全不需要你操心。这是使用托管身份优于服务主体的一大优势，在服务主体中，您需要自己处理过期的密码。</p><h1 id="19c7" class="ln lo ir bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">样品</h1><p id="849f" class="pw-post-body-paragraph jz ka ir kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ik bi translated"><em class="kx">如果你想跟随教程，从我的个人GitHub账户克隆示例库:</em><a class="ae lm" href="https://github.com/cdennig/cosmos-managed-identity" rel="noopener ugc nofollow" target="_blank"><em class="kx">【https://github.com/cdennig/cosmos-managed-identity】</em></a></p><p id="f10a" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">要查看受管身份和Cosmos DB RBAC功能的运行情况，我们将首先创建一个用户分配的身份和一个数据库，并为该身份添加和分配一个自定义Cosmos DB角色。</p><p id="fa5e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我们将使用Azure Bicep和Azure CLI的组合。首先，让我们创建一个资源组和受管身份:</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="e414" class="mz lo ir mv b gz na nb l nc nd">$ az group create -n rg-cosmosrbac -l westeurope </span><span id="1052" class="mz lo ir mv b gz ne nb l nc nd">$ az identity create --name umid-cosmosid --resource-group rg-cosmosrbac --location westeurope</span></pre><p id="91b8" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">之后，让我们看看如何创建Cosmos DB帐户、数据库和数据容器。为了创建这些资源，我们将使用Azure Bicep模板。让我们来看看它的不同部分。</p><figure class="mq mr ms mt gu js"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="482b" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这些资源的模板很简单:我们创建一个(无服务器的)Cosmos DB帐户，带有一个名为<code class="fe nh ni nj mv b">rbacsample</code>的数据库和一个<code class="fe nh ni nj mv b">data</code>容器。这里没什么特别的。</p><p id="23cf" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">接下来，该模板添加了一个Cosmos DB角色定义。因此，我们需要将之前创建的托管身份的主体ID注入到模板中。</p><figure class="mq mr ms mt gu js"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="f099" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">您可以在模板中看到，您可以确定角色定义的范围(属性<code class="fe nh ni nj mv b">assignableScopes</code>)，这意味着角色可以被分配到哪个级别。在此示例中，它的范围是帐户级别。但是你也可以选择“数据库”或者“容器”级别(更多信息在<a class="ae lm" href="https://docs.microsoft.com/en-us/azure/cosmos-db/how-to-setup-rbac" rel="noopener ugc nofollow" target="_blank">官方文档</a>中)。</p><p id="7da3" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">在权限/动作方面，Cosmos DB提供了细粒度的选项，您可以在定义自定义角色时使用这些选项。您甚至可以使用通配符，我们在当前示例中使用了通配符。让我们来看看一些预定义的操作:</p><ul class=""><li id="e10d" class="ky kz ir kb b kc kd kg kh kk la ko lb ks lc kw ld le lf lg bi translated"><em class="kx">Microsoft.DocumentDB/databaseAccounts/readMetadata</em>:读取账户元数据</li><li id="c0ef" class="ky kz ir kb b kc lh kg li kk lj ko lk ks ll kw ld le lf lg bi translated"><em class="kx">微软。document db/database accounts/SQL databases/containers/items/create</em>:创建项目</li><li id="1de7" class="ky kz ir kb b kc lh kg li kk lj ko lk ks ll kw ld le lf lg bi translated">微软。document db/database accounts/SQL databases/containers/items/read:读取项目</li><li id="b328" class="ky kz ir kb b kc lh kg li kk lj ko lk ks ll kw ld le lf lg bi translated"><em class="kx">微软。document db/database accounts/SQL databases/containers/items/delete</em>:删除项目</li><li id="d8f0" class="ky kz ir kb b kc lh kg li kk lj ko lk ks ll kw ld le lf lg bi translated">微软。document db/database accounts/SQL databases/containers/readchangeed:读取变更提要</li></ul><p id="6143" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">如果你想获得更多关于权限模型和可用动作的信息，那么<a class="ae lm" href="https://docs.microsoft.com/en-us/azure/cosmos-db/how-to-setup-rbac#permission-model" rel="noopener ugc nofollow" target="_blank">文档</a>会提供更多细节。现在，让我们继续我们的示例，分配自定义角色:</p><figure class="mq mr ms mt gu js"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="26b4" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">最后，我们将部署整个模板(您可以在git存储库的根文件夹中找到该模板):</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="d3fe" class="mz lo ir mv b gz na nb l nc nd">$ MI_PRINID=$(az identity show -n umid-cosmosid -g rg-cosmosrbac --query "principalId" -o tsv) </span><span id="4e1e" class="mz lo ir mv b gz ne nb l nc nd">$ az deployment group create -f deploy.bicep -g rg-cosmosrbac --parameters principalId=$MI_PRINID -o none</span></pre><p id="1ac5" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">成功部署模板后，让我们创建一个示例应用程序，它使用托管身份来访问Cosmos DB数据库。</p><h1 id="ae7c" class="ln lo ir bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">应用</h1><p id="6c15" class="pw-post-body-paragraph jz ka ir kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ik bi translated">让我们创建一个使用托管身份访问Cosmos DB的基本应用程序，并在<code class="fe nh ni nj mv b">data </code>容器中创建一个文档用于演示。幸运的是，当使用Cosmos DB SDK时，对于开发人员来说，事情再简单不过了。您只需要使用来自<code class="fe nh ni nj mv b">Azure.Identity</code>包(<a class="ae lm" href="https://docs.microsoft.com/en-us/dotnet/api/azure.identity.defaultazurecredential?view=azure-dotnet" rel="noopener ugc nofollow" target="_blank"> API引用</a>)的<code class="fe nh ni nj mv b">DefaultAzureCredential</code>类的一个实例，所有“繁重”的工作，比如准备和向本地元数据端点发出请求，以及使用生成的令牌，都会自动为您完成。让我们看看应用程序的相关部分:</p><figure class="mq mr ms mt gu js"><div class="bz fq l di"><div class="nf ng l"/></div></figure><h1 id="8570" class="ln lo ir bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">在Azure中使用应用程序</h1><p id="2381" class="pw-post-body-paragraph jz ka ir kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ik bi translated">到目前为止，我们已经为使用托管身份连接到Azure Cosmos DB做好了一切准备:我们创建了一个用户分配的身份、一个Cosmos DB数据库和一个绑定到该身份的自定义角色。我们还有一个基本的应用程序，它通过Azure RBAC连接到数据库，并在容器中创建一个文档。现在让我们创建一个托管和运行应用程序的服务。</p><p id="301a" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">当然，我们可以使用Azure AppService或Azure函数，但让我们在这里稍微夸张一下，创建一个启用了Pod身份插件的Azure Kubernetes服务集群。该插件允许您将预定义的托管身份分配给集群中的pod，并透明地使用底层Azure VM的本地令牌端点(请注意，在撰写本文时，该插件仍处于预览阶段)。</p><p id="ca0a" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">如果您尚未使用该功能，您必须首先在订阅中注册它，并下载Azure CLI extension for AKS preview功能:</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="b691" class="mz lo ir mv b gz na nb l nc nd">$ az feature register --name EnablePodIdentityPreview --namespace Microsoft.ContainerService </span><span id="c7d8" class="mz lo ir mv b gz ne nb l nc nd">$ az extension add --name aks-preview</span></pre><p id="3a2e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">特征注册需要一些时间。您可以通过以下命令检查状态。继续之前，注册状态应为“已注册”:</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="f425" class="mz lo ir mv b gz na nb l nc nd">$ az feature show --name EnablePodIdentityPreview --namespace Microsoft.ContainerService -o table</span></pre><p id="98bc" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">现在，创建Kubernetes集群。为了保持简单和廉价，我们只需向群集中添加一个节点:</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="63f4" class="mz lo ir mv b gz na nb l nc nd">$ az aks create -g rg-cosmosrbac -n cosmosrbac --enable-pod-identity --network-plugin azure -c 1 --generate-ssh-keys </span><span id="8c41" class="mz lo ir mv b gz ne nb l nc nd"># after the cluster has been created, download the credentials <br/>$ az aks get-credentials -g rg-cosmosrbac -n cosmosrbac</span></pre><p id="3680" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">现在，要使用受管身份并将其绑定到集群虚拟机，我们需要为我们的受管身份分配一个名为<code class="fe nh ni nj mv b">Virtual Machine Contributor</code>的特殊角色。</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="e108" class="mz lo ir mv b gz na nb l nc nd">$ MI_APPID=$(az identity show -n umid-cosmosid -g rg-cosmosrbac --query "clientId" -o tsv) <br/>$ NODE_GROUP=$(az aks show -g rg-cosmosrbac -n cosmosrbac --query nodeResourceGroup -o tsv) <br/>$ NODES_RESOURCE_ID=$(az group show -n $NODE_GROUP -o tsv --query "id") </span><span id="0308" class="mz lo ir mv b gz ne nb l nc nd"># assign the role <br/>$ az role assignment create --role "Virtual Machine Contributor" --assignee "$MI_APPID" --scope $NODES_RESOURCE_ID</span></pre><p id="787b" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">最后，我们能够创建一个Pod身份，并为其分配我们的托管身份:</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="d6db" class="mz lo ir mv b gz na nb l nc nd">$ MI_ID=$(az identity show -n umid-cosmosid -g rg-cosmosrbac --query "id" -o tsv) </span><span id="aee7" class="mz lo ir mv b gz ne nb l nc nd">$ az aks pod-identity add --resource-group rg-cosmosrbac --cluster-name cosmosrbac --namespace default --name "cosmos-pod-identity" --identity-resource-id $MI_ID</span></pre><p id="2537" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">让我们看看我们的群集，看看创建了什么:</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="a324" class="mz lo ir mv b gz na nb l nc nd">$ kubectl get azureidentities.aadpodidentity.k8s.io<br/> <br/>NAME                AGE <br/>cosmos-pod-identity 2m34s</span></pre><figure class="mq mr ms mt gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nk"><img src="../Images/89f672a670e619bf22e52c8465ed8e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*diQBJpM3oqdYmLyQ"/></div></div></figure><p id="ba76" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">现在，我们在集群中有了可用的pod标识，并准备好部署示例应用程序。如果您想自己创建Docker映像，您可以使用位于存储库的<code class="fe nh ni nj mv b">CosmosDemoRbac\CosmosDemoRbac</code>文件夹中的<code class="fe nh ni nj mv b">Dockerfile</code>。为了您的方便，Docker Hub上已经有一个预先构建/预先发布的图像。我们现在可以创建pod清单:</p><figure class="mq mr ms mt gu js"><div class="bz fq l di"><div class="nf ng l"/></div></figure><p id="6773" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这里最重要的部分是第7行，在这里我们将之前创建的pod身份绑定到我们的pod。这将使pod中的应用程序容器能够调用集群VM上的本地元数据端点来请求一个访问令牌，该令牌最终用于对Cosmos DB进行身份验证。让我们部署它(你会在根文件夹中找到<code class="fe nh ni nj mv b">pod.yaml</code>文件)。</p><pre class="mq mr ms mt gu mu mv mw mx aw my bi"><span id="f440" class="mz lo ir mv b gz na nb l nc nd">$ kubectl apply -f pod.yaml</span></pre><p id="d7d8" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">当pod启动时，容器会将一些信息记录到<code class="fe nh ni nj mv b">stdout</code>，指示与Cosmos DB的连接是否成功。因此，让我们查询日志:</p><p id="c85c" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">您应该会看到这样的输出:</p><figure class="mq mr ms mt gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nl"><img src="../Images/da64de449432ae982d46673ded185bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VpiazecPqQHcpEHW"/></div></div></figure><p id="5214" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">似乎一切都像预期的那样。在Azure门户中打开你的数据库，看看<code class="fe nh ni nj mv b">data</code>容器。您应该会看到一个条目:</p><figure class="mq mr ms mt gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nm"><img src="../Images/5a6a0fc1337f3dc38d499fefbe8c2bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5Q4otoYDxBR3UjM7"/></div></div></figure><h1 id="b449" class="ln lo ir bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">额外收获:不再有主键！</h1><p id="63ac" class="pw-post-body-paragraph jz ka ir kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ik bi translated">到目前为止，我们可以通过用户分配的Azure托管身份连接到Cosmos DB。为了进一步提高这种场景的安全性，您现在可以<strong class="kb is">完全禁止使用连接字符串和Cosmos DB帐户密钥</strong>，防止任何人使用这种信息访问您的帐户。</p><p id="573b" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">为此，打开<code class="fe nh ni nj mv b">deploy.bicep</code>文件，并将第31行的参数<code class="fe nh ni nj mv b">disableLocalAuth</code>设置为<code class="fe nh ni nj mv b">true</code>(我们现在这样做，因为它——当然——也禁止通过门户访问数据库)。现在，重新应用模板并尝试再次打开Azure门户中的数据浏览器。您将看到您无法再访问您的数据，因为门户使用了幕后的Cosmos DB连接字符串/帐户密钥。</p><figure class="mq mr ms mt gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nk"><img src="../Images/642cf90caec3514512aca51b5bad0562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t_VcX8wgr1cCPSBU"/></div></div></figure><h1 id="0d66" class="ln lo ir bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">摘要</h1><p id="0e97" class="pw-post-body-paragraph jz ka ir kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ik bi translated">在访问Azure服务时摆脱密码(或连接字符串/密钥),转而使用受管身份是增加Azure中运行的工作负载的安全性的一种非常好的方式。这个示例演示了如何将这种方法与Cosmos DB和Azure Kubernetes服务(Pod身份特性)结合使用。当然，它不仅限于这些资源。你可以将这种技术用于其他Azure服务，如Azure KeyVault、Azure存储帐户、Azure SQL数据库等。微软甚至鼓励您应用这种方法来消除云计算中最常用的攻击媒介:暴露的密码(例如，通过错误配置、代码库中泄露的凭证等。).</p><p id="fc02" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我希望这篇教程可以向你展示，应用这种方法是多么容易，并激励你在下一个项目中使用它。黑客快乐，朋友🖖</p><p id="b829" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">你可以在我的私人GitHub账号上找到源代码:<a class="ae lm" href="https://github.com/cdennig/cosmos-managed-identity" rel="noopener ugc nofollow" target="_blank">https://github.com/cdennig/cosmos-managed-identity</a></p><p id="701b" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">顺便说一句，如果你喜欢这个内容，请在Twitter上关注我👇</p><p id="532f" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated"><a class="ae lm" href="https://twitter.com/chrisdennig" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·丹尼格·🖖🇪🇺(@克里斯·丹尼格)/推特</a></p></div><div class="ab cl nn no hv np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ik il im in io"><p id="9757" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">标题图片来源:【https://unsplash.com/@markuswinkler T4】</p></div><div class="ab cl nn no hv np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ik il im in io"><p id="895e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated"><em class="kx">原载于2021年10月3日</em><a class="ae lm" href="https://partlycloudy.blog/2021/10/03/secure-azure-cosmos-db-access-by-using-azure-managed-identities/" rel="noopener ugc nofollow" target="_blank"><em class="kx">http://partly cloudy . blog</em></a><em class="kx">。</em></p></div></div>    
</body>
</html>