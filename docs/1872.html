<html>
<head>
<title>Automatically Remove All Unused Imports in a TypeScript Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动移除TypeScript项目中所有未使用的导入</h1>
<blockquote>原文：<a href="https://itnext.io/automatically-remove-all-unused-typescript-imports-in-a-project-afd4eb0e84b7?source=collection_archive---------3-----------------------#2019-02-14">https://itnext.io/automatically-remove-all-unused-typescript-imports-in-a-project-afd4eb0e84b7?source=collection_archive---------3-----------------------#2019-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class="jn jo gp gr jp jq"><a href="https://ultimatecourses.com/courses/angular/ref/wes.grimes/" rel="noopener  ugc nofollow" target="_blank"><div class="jr ab fo"><div class="js ab jt cl cj ju"><h2 class="bd ir gy z fp jv fr fs jw fu fw ip bi translated">ultimate Angular |专家指导的在线Angular和TypeScript培训课程</h2><div class="jx l"><h3 class="bd b gy z fp jv fr fs jw fu fw dk translated">学习最新的Angular，TypeScript，通过NGRX和超越。通过我们的在线课程，成为在线角度专家。</h3></div><div class="jy l"><p class="bd b dl z fp jv fr fs jw fu fw dk translated">ultimatecourses.com</p></div></div><div class="jz l"><div class="ka l kb kc kd jz ke kf jq"/></div></div></a></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/74b2243b8c84b9e59f2f51446b6e95a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Be06yPbtk8309Mcq.jpg"/></div></div></figure><h1 id="727f" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">问题是</h1><p id="24b6" class="pw-post-body-paragraph lp lq iq lr b ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">最近，我有一个需求，需要以编程方式递归遍历给定项目中的所有<code class="fe mn mo mp mq b">*.ts</code>文件，并删除所有未使用的TypeScript导入。在撰写本文时，如果不打开每个单独的<code class="fe mn mo mp mq b">*.ts</code>文件并在Windows/Linux上点击<code class="fe mn mo mp mq b">CTRL + Shift + O</code>，就无法在Visual Studio代码中做到这一点。经过一些研究，以及Twitter同事的大力帮助，我找到了一个可行的解决方案。这应该适用于Angular、React、Vue.js或任何普通的TypeScript项目。</p><h1 id="7fd2" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">解决方案</h1><p id="79c1" class="pw-post-body-paragraph lp lq iq lr b ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">我们将使用<code class="fe mn mo mp mq b">tslint</code>命令行工具，结合<code class="fe mn mo mp mq b">tslint-etc</code>规则，递归地自动检测并删除目录中所有未使用的导入。如果您有一个大型项目，这个过程可能需要一些时间来运行。修复过程完成后，仔细检查所有文件的正确性非常重要。</p><h2 id="c4bf" class="mr ks iq bd kt ms mt dn kx mu mv dp lb ma mw mx lf me my mz lj mi na nb ln nc bi translated">安装所需的工具</h2><p id="af32" class="pw-post-body-paragraph lp lq iq lr b ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">安装此过程运行所需的以下节点程序包。</p><pre class="kh ki kj kk gt nd mq ne nf aw ng bi"><span id="06aa" class="mr ks iq mq b gy nh ni l nj nk">$ npm install -g typescript tslint tslint-etc</span></pre><h2 id="518e" class="mr ks iq bd kt ms mt dn kx mu mv dp lb ma mw mx lf me my mz lj mi na nb ln nc bi translated">创建一个临时的<code class="fe mn mo mp mq b">tslint</code>配置文件</h2><p id="2788" class="pw-post-body-paragraph lp lq iq lr b ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">在项目的根目录下创建一个名为<code class="fe mn mo mp mq b">tslint-imports.json</code>的新文件。这创建了一个高度集中的tslint进程，它只检查未使用的声明。重要的是<em class="nl">注意到</em>这将在未使用的导入、参数和变量上抛出<code class="fe mn mo mp mq b">tslint</code>错误。我们仅将此用于<code class="fe mn mo mp mq b">--fix</code>流程。因此，<code class="fe mn mo mp mq b">tslint-etc</code>规则只自动修复未使用的导入。</p><p id="771b" class="pw-post-body-paragraph lp lq iq lr b ls nm lu lv lw nn ly lz ma no mc md me np mg mh mi nq mk ml mm ij bi translated">该文件需要以下内容:</p><pre class="kh ki kj kk gt nd mq ne nf aw ng bi"><span id="69d6" class="mr ks iq mq b gy nh ni l nj nk">{<br/>  "extends": [<br/>    "tslint-etc"<br/>  ],<br/>  "rules": {<br/>   "no-unused-declaration": true<br/>  }<br/>}</span></pre><h1 id="7afc" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">运行自动修复流程</h1><p id="0f10" class="pw-post-body-paragraph lp lq iq lr b ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">下面的命令将递归地遍历项目中的所有<code class="fe mn mo mp mq b">*.ts</code>文件，并删除未使用的导入。它会自动将文件保存在适当的位置。</p><p id="e1bf" class="pw-post-body-paragraph lp lq iq lr b ls nm lu lv lw nn ly lz ma no mc md me np mg mh mi nq mk ml mm ij bi translated"><strong class="lr ir">小心！</strong></p><p id="3076" class="pw-post-body-paragraph lp lq iq lr b ls nm lu lv lw nn ly lz ma no mc md me np mg mh mi nq mk ml mm ij bi translated">只有当您使用像<code class="fe mn mo mp mq b">git</code>或<code class="fe mn mo mp mq b">svn</code>这样的源代码控制解决方案时，这个过程才是可逆的，在这里您可以恢复更改。</p><pre class="kh ki kj kk gt nd mq ne nf aw ng bi"><span id="c26d" class="mr ks iq mq b gy nh ni l nj nk">$ tslint --config tslint-imports.json --fix --project .</span></pre><h1 id="f513" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">仔细检查你的文件</h1><p id="ff83" class="pw-post-body-paragraph lp lq iq lr b ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm ij bi translated">在这一点上，我强烈建议你仔细检查你的文件的正确性。这个工具在我的195个<code class="fe mn mo mp mq b">*.ts</code>文件中除了两个之外都有效。其中两个组件更新不正确。我能够通过运行一个<code class="fe mn mo mp mq b">ng build --prod</code>来发现这一点，因为它是一个<code class="fe mn mo mp mq b">Angular</code>应用程序。如果您的项目不使用构建工具，您可以运行手动<code class="fe mn mo mp mq b">tslint --project .</code>。</p><h1 id="a26b" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">资源</h1><ul class=""><li id="10be" class="nr ns iq lr b ls lt lw lx ma nt me nu mi nv mm nw nx ny nz bi translated"><a class="ae oa" href="https://twitter.com/wesgrimes/status/1096134870726774787" rel="noopener ugc nofollow" target="_blank">原推特对话</a></li><li id="fc61" class="nr ns iq lr b ls ob lw oc ma od me oe mi of mm nw nx ny nz bi translated"><a class="ae oa" href="https://palantir.github.io/tslint/usage/cli/" rel="noopener ugc nofollow" target="_blank"> TSLint </a></li><li id="37a3" class="nr ns iq lr b ls ob lw oc ma od me oe mi of mm nw nx ny nz bi translated"><a class="ae oa" href="https://cartant.github.io/tslint-etc/" rel="noopener ugc nofollow" target="_blank"> tslint-etc </a></li></ul></div><div class="ab cl og oh hu oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ij ik il im in"><p id="7e34" class="pw-post-body-paragraph lp lq iq lr b ls nm lu lv lw nn ly lz ma no mc md me np mg mh mi nq mk ml mm ij bi translated"><em class="nl">原载于2019年2月14日</em><a class="ae oa" href="https://wesleygrimes.com/angular/2019/02/14/how-to-use-tslint-to-autoremove-all-unused-imports-in-a-typescript-project.html" rel="noopener ugc nofollow" target="_blank"><em class="nl">wesleygrimes.com</em></a><em class="nl">。</em></p></div></div>    
</body>
</html>