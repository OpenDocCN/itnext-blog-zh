<html>
<head>
<title>Create a SSR + Serverless App with Firebase &amp; Nuxt.js within an hour</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Firebase &amp; Nuxt.js在一个小时内创建一个SSR +无服务器应用</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-a-ssr-serverless-app-with-firebase-nuxt-js-in-an-hour-6e6e03d0b3b8?source=collection_archive---------0-----------------------#2018-09-21">https://itnext.io/how-to-create-a-ssr-serverless-app-with-firebase-nuxt-js-in-an-hour-6e6e03d0b3b8?source=collection_archive---------0-----------------------#2018-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/782187e01c13561714c02bcae23ebfb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*kOiW507cv685oBynO0DqHw.png"/></div></figure><p id="818c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这些天我听到了很多关于Firebase的事情。我查了一下，我的第一个想法是“哇，它看起来很适合构建一个后原型阶段的应用程序”。因为你不需要考虑后端架构，你可以简单地专注于你要做的服务。最重要的是，Firebase可以免费启动！</p><p id="19a6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Vue.js是我最喜欢的框架。用Vue.js做一个web app UI太容易了，Nuxt.js就是在用Vue.js技术让SSR(服务器端渲染)成为可能。我相信Firebase &amp; Nuxt.js的组合可以让你瞬间做出一个web app。</p><p id="dbc4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">找到了<a class="ae ks" href="https://youtu.be/ZYUWsjUxxUQ" rel="noopener ugc nofollow" target="_blank">这个教程视频</a>。它很棒，非常有用，制作精良，但是使用起来有点快。我也意识到我想补充一些东西。这篇文章将会覆盖它们。</p><p id="d004" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这篇文章中，我在我的Mac上使用终端。vim是我的编辑。当您在本教程中看到它时，您可以简单地认为它是打开一个编辑器并编辑文件。我的节点版本是8.11.2，喜欢用<strong class="jw ir">纱</strong>。如果使用npm，则<code class="fe kt ku kv kw b">yarn add</code>与<code class="fe kt ku kv kw b">npm install —-save</code>相同。</p><p id="e3dc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我想离开我在本教程中创建的知识库:<a class="ae ks" href="https://github.com/wataruoguchi/nuxtjs-firebase-example" rel="noopener ugc nofollow" target="_blank">https://github.com/wataruoguchi/nuxtjs-firebase-example</a></p><h1 id="31a5" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">1.创建项目目录</h1><p id="ac99" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated"><code class="fe kt ku kv kw b">&lt;proj&gt;</code>可以是你的项目名称。这个目录将是项目的根目录。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="e6f7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">2.Setup Nuxt.js</h1><p id="a423" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">让我们安装vue-cli，它允许您运行<code class="fe kt ku kv kw b">vue</code>命令。安装纱线是可选的。然后，用模板初始化src文件夹中的项目。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="9392" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">3.编辑主页</h1><p id="bedd" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">我们将编辑索引页面，当应用程序加载时，您首先会看到它。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="a8f8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe kt ku kv kw b">pages/index.vue</code>会是这个样子:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="70ab" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">那很简单！仅显示从<a class="ae ks" href="https://nuxt-ssr.firebaseio.com/facts.json" rel="noopener ugc nofollow" target="_blank">https://nuxt-ssr.firebaseio.com/facts.json</a>获取的列表</p><p id="babc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们编辑用于构建应用程序的配置文件。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="2f0d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在<code class="fe kt ku kv kw b">build</code>节点中添加以下代码块。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="d5a0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">4.让我们在本地主机中启动</h1><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="f39d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">恭喜你。你一定能在<a class="ae ks" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>看到！如果你看到的网页与'查看网页源代码'，你可以告诉它的SSR！</p><h1 id="3f0d" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">5.使用Babel支持旧浏览器</h1><p id="f311" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">我们不仅需要支持最新的浏览器，还需要支持IE等老浏览器。巴别塔就是你要用的工具。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="64d1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Nuxt.js需要知道他们的存在。让我们编辑配置文件。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="9857" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另外，在同一个文件中，你想这样更新<code class="fe kt ku kv kw b">vendor</code>:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="3294" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">尝试运行它，并在浏览器中再次看到它。它不应该有任何错误。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="9b62" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">6.设置Firebase</h1><p id="ade6" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">Firebase有很棒的文档，我只是浏览一下。但以下是我所做的:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="742f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">它告诉你在某一点打开<a class="ae ks" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.firebase.google.com</a>。在浏览器中打开它。</p><p id="9f95" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，在控制台中添加项目。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="30da" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">7.设置云功能</h1><p id="3211" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">让我们设置云函数。是用来做SSR的。服务器端的工作应该由Firebase支持的云功能来完成。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="ce62" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将此行添加到顶层。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="0005" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我们去<code class="fe kt ku kv kw b">functions</code>工作吧</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="e7b0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在顶层加上<code class="fe kt ku kv kw b">"engines": { "node": "8"}</code>。然后，您可以在Firebase中启用节点8。<a class="ae ks" href="https://firebase.googleblog.com/2018/08/cloud-functions-for-firebase-config-node-8-timeout-memory-region.html" rel="noopener ugc nofollow" target="_blank">查看更多</a></p><p id="a0b3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，添加<code class="fe kt ku kv kw b">src/package.json</code>中的所有包</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="007b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在你必须在<code class="fe kt ku kv kw b">functions</code>目录中看到<code class="fe kt ku kv kw b">nuxt</code>目录。</p><h1 id="1cb0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">8.通过云函数运行Nuxt.js</h1><p id="244d" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">我们希望从静态服务器提供静态资产。让我们从<code class="fe kt ku kv kw b">functions</code>中复制静态资产并保存在<code class="fe kt ku kv kw b">public/assets</code>中。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="eb5e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe kt ku kv kw b">functions/index.js</code>下面会是这个样子。应用程序给出请求，并让Nuxt呈现响应。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="0a6e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">9.通过Firebase托管服务静态资产</h1><p id="1720" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">我们不想每次都动态地服务静态资产。让我们静态地为他们服务。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="52e2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，<code class="fe kt ku kv kw b">public</code>目录已经制作完成。让我们在这里复制静态资产</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="8b2c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">10.开始部署吧！</h1><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="b367" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">更新<code class="fe kt ku kv kw b">hosting</code>下的<code class="fe kt ku kv kw b">rewrites</code>。看看它会是什么样子:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="34a8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">好吧，酷。让我们在本地主机上运行firebase。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="d522" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这需要一点时间。当你看到函数变绿时，打开<a class="ae ks" href="http://localhost:5000" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000 </a>。您应该可以在浏览器中看到该页面。</p><p id="e12b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但是，控制台窗口中仍有错误。让我们修理他们。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="63b3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将<code class="fe kt ku kv kw b">publicPath</code>从<code class="fe kt ku kv kw b">/public/</code>更改为<code class="fe kt ku kv kw b">/</code></p><p id="2488" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">同样适用于<code class="fe kt ku kv kw b">functions/index.js</code></p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="4ee2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们转到<code class="fe kt ku kv kw b">src</code>并重新构建应用程序。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="22b6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">再次打开<a class="ae ks" href="http://localhost:5000" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000 </a>。希望您在浏览器的控制台窗口中不会看到错误。</p><p id="5589" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，我们来部署一下！</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="c861" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">等到你看到“✔部署完成！”消息。然后访问“主机网址:”。你看到你建的网页了吗？恭喜你！</p><p id="40ed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">想不到部署SSR app这么容易。我们生活在一个怎样的时代！这种速度将有助于黑客马拉松，或者构建应用程序的alpha版本。我想暂时享受一下Nuxt.js和Firebase。</p><p id="8d2a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">感谢阅读，编码快乐！</p></div></div>    
</body>
</html>