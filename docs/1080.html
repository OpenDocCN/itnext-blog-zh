<html>
<head>
<title>Jib: Getting Expert Docker Results Without Any Knowledge of Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jib:在没有任何Docker知识的情况下获得专家Docker结果</h1>
<blockquote>原文：<a href="https://itnext.io/jib-getting-expert-docker-results-without-any-knowledge-of-docker-ef5cba294e05?source=collection_archive---------1-----------------------#2018-07-18">https://itnext.io/jib-getting-expert-docker-results-without-any-knowledge-of-docker-ef5cba294e05?source=collection_archive---------1-----------------------#2018-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/866242016fbe5391015e386ee0cc1056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSIxjnu_AZoM6BISMZ7tng.png"/></div></div></figure><p id="0aa5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi kw translated">T4:嗯，我有些消息要告诉你。如果你一直在关注我最新的博客帖子，我已经谈了很多关于<a class="ae lf" href="https://www.docker.com/what-docker" rel="noopener ugc nofollow" target="_blank"> Docker </a>的事情，这个惊人的容器化平台使得开发和部署web应用程序比以往任何时候都更容易。第一篇文章<a class="ae lf" href="https://medium.com/@paigen11/docker-101-fundamentals-the-dockerfile-b33b59d0f14b" rel="noopener">介绍了Docker基础知识和Docker CLI。第二款</a><a class="ae lf" href="https://medium.com/@paigen11/docker-102-docker-compose-6bec46f18a0e" rel="noopener">是</a>，介绍了Docker Compose，Docker更复杂，更容易(在我看来)使用，多服务选项。</p><p id="ab25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正确使用的话，Docker是一个非常强大的工具，但是它需要一分钟才能让你明白:</p><ul class=""><li id="c00d" class="lg lh iq ka b kb kc kf kg kj li kn lj kr lk kv ll lm ln lo bi translated">这些命令，</li><li id="bee2" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">文件结构，</li><li id="6a16" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">整个集装箱化的概念本身。</li></ul><p id="7adb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你以前没有用过，这并不容易，有一个明确的学习曲线。但是谷歌，曾经的技术领导者，刚刚发布了一个游戏规则改变者…</p><h2 id="f9d9" class="lu lv iq bd lw lx ly dn lz ma mb dp mc kj md me mf kn mg mh mi kr mj mk ml mm bi translated">会合三角帆</h2><p id="0bb8" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">Jib是一个全新的，刚刚发布的，基于Google容器工具的Java插件，它将容器化你的应用。</p><p id="9cb1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">简而言之:</p><blockquote class="ms mt mu"><p id="d439" class="jy jz mv ka b kb kc kd ke kf kg kh ki mw kk kl km mx ko kp kq my ks kt ku kv ij bi translated">Jib为您的Java应用程序构建Docker和<a class="ae lf" href="https://github.com/opencontainers/image-spec" rel="noopener ugc nofollow" target="_blank"> OCI </a>映像，并作为<a class="ae lf" href="https://github.com/GoogleContainerTools/jib/blob/master/jib-maven-plugin" rel="noopener ugc nofollow" target="_blank"> Maven </a>和<a class="ae lf" href="https://github.com/GoogleContainerTools/jib/blob/master/jib-gradle-plugin" rel="noopener ugc nofollow" target="_blank"> Gradle </a>的插件提供。Github起重臂</p></blockquote><p id="840c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这对我们来说意味着:</p><ul class=""><li id="dd3d" class="lg lh iq ka b kb kc kf kg kj li kn lj kr lk kv ll lm ln lo bi translated">没有<code class="fe mz na nb nc b">Dockerfile</code>设置，</li><li id="ff26" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">没有为Maven或Gradle定制的脚本，</li><li id="e8f2" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">现成的Docker图像生成和发布。</li></ul><p id="4b74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基本上，没有Docker的复杂性，但有Docker的所有好处。</p><p id="16a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">怎么会？一个插件，一个非常简单的插件。下面我会告诉你有多简单。</p><p id="0847" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">在坡道上实施起重臂</strong></p><p id="fff9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Jib有Maven和Gradle插件。我会用格雷尔，因为那是我最熟悉的。</p><p id="bc95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们从<code class="fe mz na nb nc b">build.gradle</code>文件开始。首先，确保你使用的是Gradle 4.6或更高版本——这是Jib所需要的。</p><p id="6d68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，更改文件。在<code class="fe mz na nb nc b">build.gradle</code>的插件部分，添加这一行。</p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/836e9fc0ce51296389023a747548cc15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jutZ3jB83iqBEm6aNikQRA.png"/></div></div><figcaption class="ni nj gj gh gi nk nl bd b be z dk translated">是的，现在生成Docker图像真的很容易。</figcaption></figure><p id="a473" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仅此而已。您已经完成了Java应用程序中所需的更改。</p><p id="e7a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，从命令行运行Gradle任务<code class="fe mz na nb nc b">./gradlew jibDockerBuild</code>。这将生成您的本地Docker映像，并给出它的映像名称和版本。</p><p id="38cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，最后一步，Docker在终端运行命令:<code class="fe mz na nb nc b">docker run -p &lt;host port: Docker app port&gt; &lt;image name: version&gt;</code>。这样你的应用程序就应该启动了。</p><p id="7036" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我制作了一个示例Java应用程序，并将其存储在Github <a class="ae lf" href="https://github.com/paigen11/jib-docker-example" rel="noopener ugc nofollow" target="_blank">这里</a>，因此您可以看到这实际上是多么简单。</p><p id="80e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还把Docker文件留在了那里，所以您可以看到以前运行Docker需要什么。请记住，这个项目仅用于构建和运行本地映像，如果您想推送到Docker hub，请查看Jib官方文档(并检查回来，我可能会就此做后续文章)。</p><p id="80b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我的项目，您将运行相同的<code class="fe mz na nb nc b">./gradlew jibDockerBuild</code>，然后这个Docker运行命令:<code class="fe mz na nb nc b">docker run -p 8080:8080 java-example:1.0.0-SNAPSHOT</code>。</p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f6c0c07d9a14fdd64d95decd29b934de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*h-LxugS5XxTE44En1SVDZg.png"/></div><figcaption class="ni nj gj gh gi nk nl bd b be z dk translated">这是你在浏览器中进入<a class="ae lf" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>时会看到的。</figcaption></figure><p id="9d88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Jib之前，我需要一个完全独立的<code class="fe mz na nb nc b">Dockerfile</code>来指导如何构建我的应用程序来实现这样的奇迹。</p><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/9d9ba295f630439215ef2178f1cd6065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DE3xD7J6q1UBrkOWNG79qw.png"/></div></div><figcaption class="ni nj gj gh gi nk nl bd b be z dk translated">看看这个。这是一个简单的Java应用程序。这些docker文件可以(并且通常是)更大、更复杂。</figcaption></figure><p id="99e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">多亏了Jib，<code class="fe mz na nb nc b">Dockerfiles</code>可以成为过去——至少对于您的Java应用程序来说是这样。另一个好处是，如果你的项目中有一个<code class="fe mz na nb nc b">docker-compose.yml</code>文件，它仍然可以和Jib一起使用。</p><p id="8a58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就我个人而言，我迫不及待地想把这个一行程序放到我团队的所有Spring Boot应用程序中。有了它，我们可以获得Docker容器的强大功能和灵活性，而不需要任何关于Docker的设置和必要知识。</p><p id="2efe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">即使你不是码头专家，有了Jib，你仍然可以从中获益，并在这个过程中看起来像个摇滚明星。尽情享受吧！</p><p id="d8a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">如果你喜欢读这篇文章，你可能也会喜欢我的其他一些博客:</strong></p><ul class=""><li id="5cb2" class="lg lh iq ka b kb kc kf kg kj li kn lj kr lk kv ll lm ln lo bi translated"><a class="ae lf" href="https://medium.com/@paigen11/docker-102-docker-compose-6bec46f18a0e" rel="noopener">Docker 102:Docker-Compose</a></li><li id="0386" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated"><a class="ae lf" href="https://medium.com/@paigen11/docker-101-fundamentals-the-dockerfile-b33b59d0f14b" rel="noopener"> Docker 101:基本面&amp;Docker file</a></li><li id="1b5a" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated"><a class="ae lf" href="https://medium.com/@paigen11/what-is-graphql-really-76c48e720202" rel="noopener">graph QL到底是什么？</a></li></ul></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="8702" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">参考资料和更多资源:</strong></p><ul class=""><li id="ec32" class="lg lh iq ka b kb kc kf kg kj li kn lj kr lk kv ll lm ln lo bi translated">Docker: <a class="ae lf" href="https://www.docker.com/what-docker" rel="noopener ugc nofollow" target="_blank">https://www.docker.com/what-docker </a></li><li id="86d6" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">Jib, Github repo: <a class="ae lf" href="https://github.com/GoogleContainerTools/jib" rel="noopener ugc nofollow" target="_blank"> https://github.com/GoogleContainerTools/jib </a></li><li id="c496" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">Jib,Gradle Plugin: <a class="ae lf" href="https://github.com/GoogleContainerTools/jib/tree/master/jib-gradle-plugin" rel="noopener ugc nofollow" target="_blank">https://github.com/GoogleContainerTools/jib/tree/master/jib-gradle-plugin </a></li><li id="6caf" class="lg lh iq ka b kb lp kf lq kj lr kn ls kr lt kv ll lm ln lo bi translated">Jib Docker Example Repo: <a class="ae lf" href="https://github.com/paigen11/jib-docker-example" rel="noopener ugc nofollow" target="_blank"> https://github.com/paigen11/jib-docker-example </a></li></ul></div></div>    
</body>
</html>