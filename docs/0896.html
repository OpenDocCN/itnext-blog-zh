<html>
<head>
<title>Using JSON Server to Create a Restful Server in 5 seconds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JSON Server在5秒钟内创建一个Restful服务器</h1>
<blockquote>原文：<a href="https://itnext.io/using-json-server-to-create-a-restful-server-in-5-seconds-78b85ccf832b?source=collection_archive---------2-----------------------#2018-06-14">https://itnext.io/using-json-server-to-create-a-restful-server-in-5-seconds-78b85ccf832b?source=collection_archive---------2-----------------------#2018-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dd69cbdd202f843e2e600ba214732036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6_3lmPQVifvrhy3qQl7dLg.jpeg"/></div></div></figure><p id="99f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好的，从技术上来说，你需要做一个<em class="kw">小</em>设置来让<a class="ae kx" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank"> JSON服务器</a>运行，但是要激活它，只需要做以下事情:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="49b7" class="lh li iq ld b gy lj lk l ll lm">json-server --watch db.json</span></pre><p id="d465" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，您的新本地开发服务器启动了。文档中有很多很酷的选项，但我们将只介绍基本的设置，以便您可以快速开始。</p><h1 id="d5b9" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">设置和安装</h1><p id="9687" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">JSON Server是一个节点包，所以你需要安装node，要么从他们的<a class="ae kx" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">站点</a>，要么使用<a class="ae kx" href="https://www.dyclassroom.com/howto-mac/how-to-install-nodejs-and-npm-on-mac-using-homebrew" rel="noopener ugc nofollow" target="_blank">自制</a>(我推荐后者)。一旦安装了Node，使用Node包管理器(Node自带的)来安装包是非常容易的。把这个放进你的控制台:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="bccc" class="lh li iq ld b gy lj lk l ll lm">npm install -g json-server</span></pre><p id="1198" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，现在已经安装好了。如果你得到一个错误，使用“复制到堆栈溢出”的可靠方法。但是，应该没问题。</p><h1 id="0e4f" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">它是如何工作的</h1><p id="9ecc" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">JSON Server将从您的主项目文件夹中取出一个JSON文件，并将其转换成一个RESTful数据库，其中包含所有正确的路径；它甚至可以做类似于<a class="ae kx" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank">搜索查询</a>的事情。实际上，文档会给你一些启动代码，放入你的数据库，这样你就能得到正确的格式。基本模式如下:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b8ca" class="lh li iq ld b gy lj lk l ll lm">{<br/>  "posts": [<br/>    { "id": 1, "title": "json-server", "author": "typicode" },<br/>    { "id": 2, "title": "another post", "author": "Mike" }<br/>  ],<br/>  "comments": [<br/>    { "id": 1, "body": "some comment", "postId": 1 },<br/>    { "id": 2, "body": "another comment", "postId": 1 }<br/>  ],<br/>  "profile": { "name": "typicode" }<br/>}</span></pre><p id="45cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本质上，我们有3个“表”，帖子、评论和个人资料，每个都有自己的RESTful路线。让我们用简介中的命令实际启动我们的服务器来测试一下。<code class="fe mp mq mr ld b">cd</code>到您的web项目的根文件夹并运行:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="e08c" class="lh li iq ld b gy lj lk l ll lm">json-server --watch db.json</span></pre><p id="9898" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样做的目的是在您的计算机端口3000上设置一个本地主机服务器。要查看我们所有的帖子，我们可以转到<a class="ae kx" href="http://localhost:3000/tasks" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/posts</a>，要只查看第一篇帖子，我们可以转到<a class="ae kx" href="http://localhost:3000/tasks" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/posts/1</a>，这是第一篇帖子的ID。它完全符合REST标准，所以注释和概要文件可以用同样的方式访问。同样，要停止服务器，进入终端会话并键入control-c。</p><h1 id="a216" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">添加数据</h1><p id="83b9" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">有很多 <a class="ae kx" href="http://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank">资源</a>可以用来练习<em class="kw">轻松获取</em> JSON数据，但是JSON服务器如此强大的原因在于，你可以同样轻松地<em class="kw">向它发送</em>数据。你可以使用<a class="ae kx" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>或者跳到<a class="ae kx" href="https://medium.com/@mikecronin92/coding-the-5-basic-restful-actions-for-javascript-c25279483e4f" rel="noopener">这篇文章</a>来学习如何使用纯JavaScript与数据库交互。JSON Server是一个非常好的“赝品”,你甚至不用把id和你的对象一起发送，一旦数据被成功添加，服务器就会自动为你创建它们。看:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="8935" class="lh li iq ld b gy lj lk l ll lm">function create(data) {<br/>  let options = {<br/>    method: 'POST',<br/>    headers: {<br/>      'Content-Type': 'application/json'<br/>    },<br/>    body: JSON.stringify(data)<br/>  }<br/>  return fetch(baseUrl, options)<br/>    .then((response) =&gt; response.json)<br/>}</span><span id="025c" class="lh li iq ld b gy ms lk l ll lm">create({title: "check it out", author: "Mike"})</span><span id="6114" class="lh li iq ld b gy ms lk l ll lm">// the server will return the object back with an id<br/>{id: 3, title: "check it out", author: "Mike"}</span></pre><h1 id="b5fc" class="ln li iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">一个小警告:CORS问题</h1><p id="1bcc" class="pw-post-body-paragraph jy jz iq ka b kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr mo kt ku kv ij bi translated">有一点点<strong class="ka ir"><em class="kw"/></strong>的可能性，你可能会在玩的时候得到这个可怕的错误:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/9c4de71f37a6c0ba2381631670bff8c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*vXcu-oceubhatS6u6DNUSA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">哦，太好了，我们打破了一切。</figcaption></figure><p id="5e6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">没有“访问控制允许来源”警告是因为一种叫做CORS的东西。基本上你的浏览器说它不会在两个不同的域之间交换资源。我们的数据库有一个<code class="fe mp mq mr ld b"><a class="ae kx" href="http://localhost" rel="noopener ugc nofollow" target="_blank">http://</a></code>协议，但是我们的index.html文件有一个<code class="fe mp mq mr ld b">file://</code>协议(假设您刚刚打开了您的索引文件来玩您的站点)。所以，为了解决这个问题，使用Python的简单的<a class="ae kx" href="http://www.pythonforbeginners.com/modules-in-python/how-to-use-simplehttpserver/" rel="noopener ugc nofollow" target="_blank"> http服务器程序</a>。你所要做的就是进入一个新的终端窗口，再次进入你的web项目的根目录<code class="fe mp mq mr ld b">cd</code>，然后运行:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="eff7" class="lh li iq ld b gy lj lk l ll lm">python -m SimpleHTTPServer</span></pre><p id="eafe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在您的浏览器中，而不是打开您的索引文件，转到<a class="ae kx" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>查看它。您的数据库将位于3000端口，您的项目将位于8000端口，这意味着CORS将有望不再打扰您。希望如此。</p><p id="486e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家编码快乐，</p><p id="9617" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">迈克</p><p id="d6e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">最新文章:</em> <a class="ae kx" href="https://medium.com/@mikecronin92/how-to-build-a-dynamic-controlled-form-with-react-hooks-2019-b39840f75c4f" rel="noopener">如何用React钩子构建一个动态的、可控的表单</a></p></div></div>    
</body>
</html>