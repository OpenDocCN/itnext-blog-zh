<html>
<head>
<title>Database Creation with DbUp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用DbUp创建数据库</h1>
<blockquote>原文：<a href="https://itnext.io/database-creation-with-dbup-6e28cfbfcbf9?source=collection_archive---------2-----------------------#2020-10-05">https://itnext.io/database-creation-with-dbup-6e28cfbfcbf9?source=collection_archive---------2-----------------------#2020-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3764" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将是一篇简短的帖子，展示如何配置DbUp，以便在我们过去讨论过的迁移功能的基础上创建一个新的数据库。使用下面的帖子来了解我们过去讨论过的DbUp主题。</p><p id="f898" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://elanderson.net/2020/08/database-migrations-with-dbup/" rel="noopener ugc nofollow" target="_blank">使用DbUp进行数据库迁移</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/08/code-based-database-migrations-with-dbup/" rel="noopener ugc nofollow" target="_blank">使用DbUp进行基于代码的数据库迁移</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/08/always-run-migrations-with-dbup/" rel="noopener ugc nofollow" target="_blank">始终使用DbUp运行迁移</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/08/logging-script-output-with-dbup/" rel="noopener ugc nofollow" target="_blank">使用DbUp输出日志脚本</a> <br/> <a class="ae kl" href="https://elanderson.net/2020/09/migrations-in-transactions-with-dbup/" rel="noopener ugc nofollow" target="_blank">使用DbUp进行事务中的迁移</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/acc93938a68015d19f1c30925e8e29f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/0*P8PxYJR7aqmt4ZTm.jpg"/></div></figure><h2 id="62ed" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">数据库创建</h2><p id="13cf" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">创建数据库的代码是一行程序，只需要一个连接字符串，应该在任何迁移之前运行。以下是我们一直在使用的示例应用程序的<strong class="jp ir"> Main </strong>函数的一部分，添加并突出显示了<strong class="jp ir"> EnsureDatabase </strong>行，这是负责数据库创建的代码。</p><pre class="kn ko kp kq gt ls lt lu lv aw lw bi"><span id="b6bf" class="ku kv iq lt b gy lx ly l lz ma">static int Main(string[] args)<br/>{<br/>    var connectionString =<br/>        args.FirstOrDefault()<br/>        ?? "Server=localhost; Database=WideWorldImporters; Trusted_connection=true";<br/><br/>    EnsureDatabase.For.SqlDatabase(connectionString);<br/><br/>    var upgrader =<br/>        DeployChanges.To<br/>                     .SqlDatabase(connectionString)<br/>                     .WithScriptsAndCodeEmbeddedInAssembly(Assembly.GetExecutingAssembly(),<br/>                                                           f =&gt; !f.Contains(".AlwaysRun."))<br/>                     .LogToConsole()<br/>                     .WithTransaction()<br/>                     .Build();<br/><br/>    var result = upgrader.PerformUpgrade();</span></pre><h2 id="cdf6" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">包扎</h2><p id="166d" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">如您所见，在DbUp应用程序中添加创建数据库的功能非常简单。<a class="ae kl" href="https://dbup.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">官方DbUp文档中的数据库创建</a>只是一个注释，很容易被忽略，所以我想写一个帖子来指出它，因为当你需要它时，它是一个强大的功能。在我们的示例中，如果数据库不存在，应用程序将总是尝试创建数据库，但是如果这不符合您的用例，那么可能值得将数据库创建包含在一个参数中，以便用户可以决定是否应该创建数据库。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="a385" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mi">原载于</em> <a class="ae kl" href="https://elanderson.net/2020/10/database-creation-with-dbup/" rel="noopener ugc nofollow" target="_blank"> <em class="mi">埃里克·安德森</em> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>