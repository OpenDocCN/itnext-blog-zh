<html>
<head>
<title>Front-end System Design — Develop Netflix from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">前端系统设计—从零开始开发网飞</h1>
<blockquote>原文：<a href="https://itnext.io/front-end-system-design-develop-netflix-from-scratch-2bb65cb8be52?source=collection_archive---------2-----------------------#2022-10-05">https://itnext.io/front-end-system-design-develop-netflix-from-scratch-2bb65cb8be52?source=collection_archive---------2-----------------------#2022-10-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/732400ad1f930290f5b47153c4fa26c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNSGLPRX7RXhAMpa8BSB3A.jpeg"/></div></div></figure><div class=""/><p id="10ec" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我正在准备一个前端系统设计的问题，找不到太多的材料。面试官可能会要求你从头开始写网飞。有几点:</p><p id="99ec" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你觉得它们有用，请跟我来。</p><h2 id="5a12" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">处理需求:</h2><p id="2a78" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">一个大的项目还必须有一个业务需求和用户故事的广泛文档。第一件事是理解我们为什么做这个项目和阶段。</p><p id="43c0" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">假设产品经理和产品设计师只把它分成2个阶段，但是考虑到工程方面的努力，我们可能认为10个阶段更好。因此，在考虑代码之前，请就阶段进行多次讨论，或者删除那些不能证明其具有高用户价值的UI设计。我们想把用户价值低的UI设计推给Backlog。这意味着我们只有在有多余时间的时候才会做。</p><p id="616f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">阶段是至关重要的，因为它们允许我们快速地向客户交付软件解决方案。如果我们一次完成全部工作，可能需要1-2年的时间。迭代交付可能允许我们在1-2个月内交付第一阶段。</p><h2 id="459b" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">时间估计:</h2><p id="3a0a" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">与团队合作，识别每个页面的智能组件和非智能组件，然后首先评估所有非智能组件。这将让我们更清楚地了解智能组件需要有多复杂。每个组件都应属于贵公司的JIRA机票或同等机票。</p><h2 id="d267" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">屏幕兼容性:</h2><p id="0277" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">网飞涵盖了许多设备。假设我们只考虑网络浏览器。我们仍然需要确保应用程序能够正确显示。我们需要用桌面优先或移动优先的方法来处理UX/用户界面。</p><p id="50d7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">移动优先:它允许开发者考虑页面上的基本内容，因为移动屏幕没有太多空间。然而，移动优先可能会降低产品交付速度，因为大多数复杂的网络应用程序都是在桌面上运行的。比如我不在手机屏幕上写这种媒介。</p><p id="9b8c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">桌面优先:许多web应用程序从桌面优先开始，因为大多数用户在桌面屏幕上使用复杂的web应用程序。此外，还有更多空间来添加花哨的设计。但是，我们可能会显示比我们需要的更多的信息。</p><p id="fbbb" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个类别可能会进入产品设计师的领域，但我仍然认为它们是直觉的权衡。我仍然会谈论他们。</p><h2 id="a1d0" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">工程中的屏幕/浏览器兼容性:</h2><p id="4009" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">使用UI框架，比如Bootstrap。它有一个可定制的设计系统，我们可以在其中定义断点。Bootstrap中的网格系统也很有帮助。</p><p id="c19b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用Polyfill实现跨浏览器兼容性。IE在2022年被弃用。现在应该好办多了。使用https://caniuse.com/的<a class="ae ly" href="https://caniuse.com/" rel="noopener ugc nofollow" target="_blank">来检查API在不同浏览器中的可用性。</a></p><h2 id="9177" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">高级代码设计(角度)第1部分:</h2><p id="36be" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">不同状态管理工具之间的权衡:</p><ol class=""><li id="0836" class="lz ma je kd b ke kf ki kj km mb kq mc ku md ky me mf mg mh bi translated">GRX:要记录的文件太多，很难理解。如果只有一个微小的共享国家，这可能是过度杀戮。</li><li id="11b3" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated"><em class="kz">URL中的查询参数</em>:浏览器历史处理状态的生命周期。易于共享和保存选定的过滤器。例如，在Gmail收件箱中搜索文本也会改变URL中的查询参数。</li><li id="6b94" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated"><em class="kz">本地存储</em>:它会一直保存在浏览器上，直到用户删除它。</li><li id="14e8" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated"><em class="kz">会话存储</em>:它根据浏览器标签持续存在。</li><li id="d571" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated"><em class="kz">组件库</em>:本地状态管理解决方案。如果一个组件没有共享状态，在服务、NGRX和组件级变量中，我更喜欢<a class="ae ly" href="https://v10.ngrx.io/guide/component-store" rel="noopener ugc nofollow" target="_blank">组件存储</a>而不是BehaviorSubject。它自然可以很好地与Observables和异步管道一起工作。</li><li id="b98b" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">服务 : <a class="ae ly" href="https://v10.ngrx.io/guide/component-store" rel="noopener ugc nofollow" target="_blank">组件存储</a>中的行为主体做同样的事情。我不推荐它。</li></ol><h2 id="7975" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">高级代码设计(角度)第2部分:</h2><ol class=""><li id="77f8" class="lz ma je kd b ke lt ki lu km mn kq mo ku mp ky me mf mg mh bi translated">使用onPush策略</li><li id="68b9" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">我们需要微前端吗？</li><li id="9fc3" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">具有角度反应形式、引导和材料组件CDK的设计库</li><li id="3b30" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">智能/非智能组件设计模式</li><li id="6acc" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">独立组件</li><li id="4f79" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">数据可视化库，如d3.js或chart.js</li></ol><h2 id="d6a4" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">可访问性:</h2><p id="36cf" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">从一开始就将linter添加到项目中。有许多可访问性规则，linter是免费审计我们代码的最佳方式。在Angular中，<strong class="kd jf"> @angular-eslint </strong>有可及性规则。阅读更多:<a class="ae ly" href="https://www.bitovi.com/blog/angular-a11y-eslint-rules" rel="noopener ugc nofollow" target="_blank">具有可访问性规则</a></p><h2 id="a559" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">良好做法:</h2><ol class=""><li id="037a" class="lz ma je kd b ke lt ki lu km mn kq mo ku mp ky me mf mg mh bi translated">再次加入棉绒。Angular有一个<a class="ae ly" href="https://github.com/angular-eslint/angular-eslint" rel="noopener ugc nofollow" target="_blank">单边回购</a>，里面有所有的Angular棉绒。这一节介绍特定于框架的知识。我没有时间详细说明，因为这对于系统设计问题来说太具体了。</li><li id="f160" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">避免使用小型第三方库。个体作者不会花费数年时间来维护开源项目。没有人会修复漏洞或升级框架的版本。</li></ol><h2 id="2dd3" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">性能:</h2><p id="e8ca" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">较小的Javascript大小改善了CPU成本、内存使用和下载时间。</p><ol class=""><li id="cf93" class="lz ma je kd b ke kf ki kj km mb kq mc ku md ky me mf mg mh bi translated">不要使用大型第三方库。例如，考虑DateJs over MomentJs。Eslint允许我们添加阻止某些进口的规则。</li><li id="4e1a" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">在页面上使用部分加载。</li><li id="bb3d" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">惰性加载模块。</li><li id="261b" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">通过仅装载折叠上方的内容来增加着陆时间。</li><li id="28f1" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">用<a class="ae ly" href="https://web.dev/vitals/" rel="noopener ugc nofollow" target="_blank"> Google web Vitals </a>分析Web性能:1。最有内容的绘画2。第一输入延迟3。累积布局移位</li><li id="9e7c" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">特定于框架的技术:onPush in Angular。</li><li id="1329" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">避免长任务(&gt; 15毫秒)，这样主线程就不会被阻塞。</li><li id="f504" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">避免大的包(&gt; 50KB)。将其拆分，以便利用Chrome的并行性。</li><li id="68c7" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">避免大型内嵌脚本。Chrome优化不了。</li><li id="bef0" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">将供应商捆绑包与主捆绑包分开。它允许浏览器缓存更多的代码。</li><li id="a6f7" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">如果登录页面是一个静态页面，就不需要加载大量的供应商。我们可以为其他复杂的页面预取大的包。</li></ol><h2 id="58e9" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">测试:</h2><ol class=""><li id="1813" class="lz ma je kd b ke lt ki lu km mn kq mo ku mp ky me mf mg mh bi translated">使用Cypress进行端到端测试。费时，却给了我们最大的自信。</li><li id="3799" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">单元测试复杂函数。服务、减速器、效果等方面的测试功能。</li><li id="313a" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">集成测试:用Angular测试DOM元素。例如，当Web API挂起时，它是否显示加载状态？</li><li id="3cdb" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">由于CPU不同，请使用不同的移动设备、台式机和笔记本电脑设备进行测试。</li><li id="3d51" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">用不同的网速测试。我们可以在DevTool上节流网速。</li></ol><p id="042a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，企业有时动作很快。该产品可能会删除我们两个月前写的内容。在测试上花费太多时间(如1-2周)可能会浪费精力并伤害客户。请在这一点上灵活一些。如果这个项目是一个设计库，测试驱动的方法将会起作用。它通常有版本控制，变更需要多方批准。</p><p id="8087" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">同样，使用<a class="ae ly" href="https://www.guru99.com/white-box-testing.html" rel="noopener ugc nofollow" target="_blank">白盒</a>和<a class="ae ly" href="https://www.guru99.com/black-box-testing.html" rel="noopener ugc nofollow" target="_blank">黑盒</a>测试来进行所有测试:</p><h2 id="b099" class="la lb je bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">安全性:</h2><p id="d9e1" class="pw-post-body-paragraph kb kc je kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">那是我最弱的部分。至少提一些标准做法。</p><ol class=""><li id="0989" class="lz ma je kd b ke kf ki kj km mb kq mc ku md ky me mf mg mh bi translated">避免使用许多第三方库，因为它们可能有安全漏洞。还记得我实习的时候经理给我看了一个比特币挖矿的过程，是在吞噬我们服务器上的CPU。<a class="ae ly" href="https://www.hackread.com/critical-vulnerability-in-drupal-cms-used-for-cryptomining/" rel="noopener ugc nofollow" target="_blank">这是Drupal </a>的安全漏洞。因此，坚持大家伙，如角，角材料，鞋带等。</li><li id="75e3" class="lz ma je kd b ke mi ki mj km mk kq ml ku mm ky me mf mg mh bi translated">避免使用innerHtml属性呈现HTML。它让我们接触到了XSS。</li></ol></div></div>    
</body>
</html>