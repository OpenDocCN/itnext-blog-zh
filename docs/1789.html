<html>
<head>
<title>How to fetch data inside react apps.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在react应用程序中获取数据？</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-fetch-data-inside-react-apps-2ca430c202c5?source=collection_archive---------4-----------------------#2019-01-29">https://itnext.io/how-to-fetch-data-inside-react-apps-2ca430c202c5?source=collection_archive---------4-----------------------#2019-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/976cd37c8b6c343966e0db666376cd62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycqhUTo1LqydeC355iHRoA.jpeg"/></div></div></figure><p id="73da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取数据是现在几乎每个应用程序都要做的事情之一。我们要求数据，我们编辑它，我们保存它。我们的目标是让UX对用户来说尽可能的简单和流畅。有时我们希望在后台获取数据，有时通过单击按钮或向下滚动页面在前台获取数据。现在，我们将了解如何、在哪里以及何时在react应用程序中获取数据。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="ad88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">问题</strong></p><p id="b5a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">问题很简单——我们希望尽快获取数据，这样用户就不必等待很长时间。要做到这一点，我们需要知道我们需要获取什么数据，并且我们需要在意识到这一点之后马上去做。有时候我们能马上做到，有时候不能。假设我们想显示所有用户的好友列表，这将是我们想象的例子。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="f19f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">哪里</strong></p><p id="f550" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建和发送请求的理想位置是我们的入口点。如果我们谈论一般的应用程序，那么每个应用程序的入口点将是index.js。这是第一次呈现的内容，所以我们可能希望在那里获取数据，只有在我们没有路径的情况下。如果我们有路线，并且我们想为每条路线提取不同的数据，该怎么办？首先，我们需要了解我们的切入点是什么？如果对于整个应用程序，它是index.js，那么对于路线，它将是路线组件的渲染函数，例如，它是一个我们已经知道需要为特定路线渲染什么组件的地方。</p><figure class="le lf lg lh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ld"><img src="../Images/b0f6fb5c01c219d3300fbb93a1fd6c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CLewaNkRoyTUG2m8wMB-aQ.png"/></div></div></figure><p id="0c34" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其次，我们需要开始加载数据，等待它被获取，同时显示一个微调器，最后当数据被获取时，我们希望显示组件。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="ca85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">如何</strong></p><p id="8f79" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，现在我们知道什么时候我们需要开始获取数据，让我们来谈谈我们将如何去做。</p><p id="9122" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这取决于您使用什么工具来提供数据，但无论如何这很简单:您需要创建并发送一个XHR请求。调用<code class="fe li lj lk ll b">fetch</code>就可以了。如果你使用redux，你可能最终会使用<a class="ae lm" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank"> sagas </a>或<a class="ae lm" href="https://github.com/reduxjs/redux-thunk" rel="noopener ugc nofollow" target="_blank"> thunk </a>。我个人更喜欢saga，因为它是声明性的，而且用saga比用thunk更容易处理副作用。我们在<a class="ae lm" href="http://twitter.com/unicorndev" rel="noopener ugc nofollow" target="_blank"> @unicorndev </a>是这样做的:</p><figure class="le lf lg lh gt jr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/d4c38e589559001c7c78ced43bc84d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*xaZ0tIqs0uWYOY1j1Yvwzw.png"/></div></figure><p id="e4be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们有一个名为Resolve的组件，它是一个特设组件。获取一个saga →运行它→在获取数据时显示一个微调器→当数据准备好时显示所需的组件(FriendListContaner)。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="0ada" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">当</strong></p><p id="72a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们知道如何以及在哪里获取数据，但是我们什么时候需要这样做呢？很明显，我们需要尽可能早地这样做，所以这将是我们知道需要什么数据的第一个地方。我们有什么选择:</p><ul class=""><li id="b918" class="lo lp iq ka b kb kc kf kg kj lq kn lr kr ls kv lt lu lv lw bi translated">组件安装</li><li id="55b1" class="lo lp iq ka b kb lx kf ly kj lz kn ma kr mb kv lt lu lv lw bi translated">组件将安装</li></ul><p id="c106" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些是最流行的处理副作用的生命周期挂钩。你需要检查这两个钩子之间的区别，但是我们在<a class="ae lm" href="http://twitter.com/unicorndev" rel="noopener ugc nofollow" target="_blank"> @unicorndev </a>使用componentDidMount，但是这是另一个故事了。</p><p id="aed7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">结束</strong></p><p id="51b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是当今软件开发中最常见的问题之一。人们试图用不同的方法来解决这个问题，有些人试图在服务器端获取所有数据，有些人使用查询语言来减少数据量，以便可以更快地获取数据。我希望这篇文章能让您了解如何获取数据以及如何尽可能快地获取数据。</p><p id="316c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有什么？如果您正在学习React，那么您可能也会喜欢这些文章:</p><ul class=""><li id="7f50" class="lo lp iq ka b kb kc kf kg kj lq kn lr kr ls kv lt lu lv lw bi translated"><a class="ae lm" rel="noopener ugc nofollow" target="_blank" href="/a-way-to-learn-react-b95056eafebb">如何学会反应</a></li><li id="9e5e" class="lo lp iq ka b kb lx kf ly kj lz kn ma kr mb kv lt lu lv lw bi translated">【React类和函数的区别</li><li id="887e" class="lo lp iq ka b kb lx kf ly kj lz kn ma kr mb kv lt lu lv lw bi translated"><a class="ae lm" rel="noopener ugc nofollow" target="_blank" href="/how-to-structure-your-react-app-2-2cf3b8040634">如何构建你的应用</a></li></ul><p id="2bf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请点赞&amp;分享。和平。</p></div></div>    
</body>
</html>