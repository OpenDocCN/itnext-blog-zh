<html>
<head>
<title>How ESLint Makes Me a Better React Developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ESLint如何让我成为更好的React开发人员</h1>
<blockquote>原文：<a href="https://itnext.io/how-eslint-makes-me-a-better-react-developer-237fb14c00ae?source=collection_archive---------0-----------------------#2019-02-17">https://itnext.io/how-eslint-makes-me-a-better-react-developer-237fb14c00ae?source=collection_archive---------0-----------------------#2019-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="9e0d" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">JavaScript的松散标准是福是祸</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/1262e5cd6755dbf210365df4c1c58c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*oirPNEaaHEJvSk7IYNCLng.jpeg"/></div></figure><h1 id="d174" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">清洁者代码:唤醒电话</h1><p id="8a38" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated"><span class="l lv lw lx bm ly lz ma mb mc di">我</span>对React党来说有点晚，我只是在大约10个月前才开始认真学习它。是的，我早就听说了。是的，我让同事、泛泛之交和两位开发人员发布了我选择的web dev播客，<a class="ae md" href="https://syntax.fm/" rel="noopener ugc nofollow" target="_blank"> Syntax FM </a>，告诉我它有多棒。是的，我听说过脸书，那个时候它还没有揭露出它大部分不光彩的事情，它创造了它并不断改进它。</p><p id="14d1" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">但是，任何从事web开发超过六个月的人都知道，有大量的JavaScript框架曾经风光一时，但在几周或几个月后就被新的热点所掩盖。所以我坐在我的手上，等着看React是否值得我花时间去学习，每当这个迷因出现在我的互联网订阅上时，我都笑了。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/7b4687912436d98d5c7178a1b29104d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*YF46D1zDeE1uB9EJfufsSQ.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">每当我看到这张照片时，我都会微笑。奥莱利模仿封面是最好的。</figcaption></figure><p id="f1fd" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">当React显然是新的JavaScript动力之选，而且不会很快消失时，我终于同意了，并开始自学。在过去的10个月左右的时间里，我在当前公司支持AngularJS 1.5应用程序的同时，也在学习React。</p><p id="382f" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">在构建更小、更干净、单向的数据流时，必须使用那个充满业务逻辑的单片双向数据绑定AngularJS应用程序，React side项目强化了其他人一直告诉我的东西。反应要好得多。</p><p id="81eb" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">最近，我对自己的React / JavaScript知识和编码能力感觉非常好。我绝不是专家，也没有使用过React的一些最新进展，比如hooks，但是我可以很有见地地谈论一下<code class="fe mo mp mq mr b">state</code>和<code class="fe mo mp mq mr b">props</code>。我可以讨论不同的生命周期渲染方法以及它们的优点。见鬼，我甚至可以讨论Redux和用于状态管理的上下文API，以及为什么像定义的prop类型这样的东西是有益的。</p><p id="3cb4" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">我写了一个<a class="ae md" href="https://github.com/paigen11/mysql-registration-passport" rel="noopener ugc nofollow" target="_blank">全栈、用户注册</a>的应用程序作为学习工具，我为此感到自豪。前端是React和ES6，后端是Node.js，还有一个MySQL数据库，用<a class="ae md" href="https://medium.com/@paigen11/sequelize-the-orm-for-sql-databases-with-nodejs-daa7c6d5aca3" rel="noopener"> Sequelize ORM处理数据库交互</a>。我实现了用于JWT认证的<a class="ae md" rel="noopener ugc nofollow" target="_blank" href="/implementing-json-web-tokens-passport-js-in-a-javascript-application-with-react-b86b1f313436"> Passport.js中间件</a>和Docker Compose<a class="ae md" href="https://medium.com/@paigen11/using-docker-docker-compose-to-improve-your-full-stack-application-development-1e41280748f4" rel="noopener">来立刻启动整个应用程序</a>。我还添加了<a class="ae md" rel="noopener ugc nofollow" target="_blank" href="/password-reset-emails-in-your-react-app-made-easy-with-nodemailer-bb27968310d7">通过电子邮件重置密码</a>功能，以及<a class="ae md" rel="noopener ugc nofollow" target="_blank" href="/setting-up-swagger-in-a-node-js-application-d3c4d7aa56d4"> Swagger API </a>端点测试。</p><p id="5577" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">我用这个小应用做了很多事情，一路上学到了很多东西，写了很多关于我的学习的文章(以上都有链接)。但是后来，我在应用程序中实现了ESLint，认为这是确保我的代码写得很好的好方法。</p><blockquote class="ms"><p id="f8fb" class="mt mu it bd mv mw mx my mz na nb lt dk translated">我再一次感到谦卑，学会了如何写出更好的JavaScript代码。这就是我今天要讲的。</p></blockquote><h1 id="60e6" class="jq jr it bd js jt ju jv jw jx jy jz ka kb nc kd ke kf nd kh ki kj ne kl km kn bi translated">ESLint:ES6 JavaScript的21世纪规则及超越</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/b1deb04c5cd7b4dd60f0c84c22cd8dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*l8WH4NKK5fFyUz9Pre6BnA.png"/></div></figure><h2 id="2e10" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated">这是什么？</h2><p id="f6d8" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你不熟悉ESLint，你可以看看我几个月前写的这篇文章。这篇文章更多的是关于在Visual Studio代码IDE中使用ESLint和Prettier来在开发团队中产生一致的、干净的代码，而开发人员只需付出很少的努力，但它仍然解释了ESLint是如何工作的。</p><p id="b9e5" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">简而言之:</p><blockquote class="ms"><p id="cb9b" class="mt mu it bd mv mw mx my mz na nb lt dk translated">像ESLint这样的林挺工具允许开发人员在不执行JavaScript代码的情况下发现问题。— ESLint网站</p></blockquote><p id="15bb" class="pw-post-body-paragraph kw kx it ky b kz ns lb lc ld nt lf lg lh nu lj lk ll nv ln lo lp nw lr ls lt im bi translated">ESLint是一个名为<code class="fe mo mp mq mr b">.eslintrc</code>的项目报告中的一个文件，它有一个林挺规则列表，该列表贯穿项目的JavaScript代码，并发现有问题的模式或不符合这些规则所规定的特定风格指南的代码。然后，它会提醒开发人员，以便他们可以修复错误。</p><p id="ff63" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">它不会(通常)像Prettier一样重写或重新格式化代码。它也不会告诉你是否有糟糕的商业逻辑。但是它会告诉你是否缺少花括号，返回语句不可达，或者对象/数组可能被析构，等等。</p><h2 id="81d5" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated">为什么ESLint很棒</h2><p id="b608" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这太棒了，因为ESLint不仅找到了让代码变得更好的方法，而且如果您不需要或不同意某些规则，它们可以被更改或忽略(无论是对行、对整个文件还是对整个项目)。</p><p id="9836" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">没有一个规则是相互依赖的，它们都是独立运行的，有些规则甚至可以修复代码本身，使其符合规定的规则。</p><h2 id="a93a" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated"><a class="ae md" href="https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb" rel="noopener ugc nofollow" target="_blank"> Airbnb诚信通</a></h2><p id="213b" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Airbnb遵守的ESLint规则被许多人视为React的黄金标准。他们是严格的，他们是无情的，他们是彻底的。事实上，它们如此受欢迎，以至于Airbnb将它们的ESLint配置创建为一个<a class="ae md" href="https://www.npmjs.com/package/eslint-config-airbnb" rel="noopener ugc nofollow" target="_blank"> NPM包</a>，在我写这篇文章的时候，这个包的周下载量已经超过了100万次。</p><p id="bcbb" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">他们在Github上也有完整的<a class="ae md" href="https://github.com/airbnb/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript风格指南</a>，里面有一些关于编写代码的非常好的建议。但那是一个不同于我今天要去的兔子洞。</p><p id="e72a" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">因为我觉得自己应该保持高标准(*作为一个受虐狂*)，所以我决定使用Airbnb的ESLint规则作为我自己的全栈JavaScript项目的<code class="fe mo mp mq mr b">.eslintrc</code>文件的起点。好家伙，当我打开棉绒的时候，我学到了很多…</p><h1 id="cc5b" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">在埃斯林冷酷无情的林挺之前和之后</h1><h2 id="2c99" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated">我的ESLint设置和开发依赖项</h2><p id="e58c" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我让React应用程序的林挺揭示我自己代码的缺点之前，我必须为我的<code class="fe mo mp mq mr b">package.json</code>文件下载一些开发依赖项，并设置我的<code class="fe mo mp mq mr b">.eslintrc</code>文件。</p><p id="c32b" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><strong class="ky iu">开发依赖关系</strong></p><p id="7dbe" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">我使用<code class="fe mo mp mq mr b">create-react-app</code>为我的全栈应用程序创建初始前端，所以我只需要将一些额外的依赖项添加到我的<code class="fe mo mp mq mr b">package.json</code>文件中，以使Airbnb的ESLint配置工作。</p><pre class="kp kq kr ks gt nx mr ny nz aw oa bi"><span id="c0c2" class="ng jr it mr b gy ob oc l od oe">npm install --save-dev eslint eslint-config-airbnb eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react</span></pre><p id="3dc2" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><strong class="ky iu">。</strong> <code class="fe mo mp mq mr b"><strong class="ky iu">eslintrc</strong></code> <strong class="ky iu">文件</strong></p><p id="71e0" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">然后，一旦所有的包都安装好了，我就这样建立我的<code class="fe mo mp mq mr b">.eslintrc</code>文件。</p><pre class="kp kq kr ks gt nx mr ny nz aw oa bi"><span id="df5e" class="ng jr it mr b gy ob oc l od oe">{  <br/>  "extends": "airbnb",  <br/>  "parser": "babel-eslint",  <br/>  "env": <br/>    {    <br/>      "node": true,    <br/>      "es6": true,    <br/>      "browser": true  <br/>    },  <br/>  "rules": <br/>    {    <br/>      "react/jsx-filename-extension": [1, { "extensions": [".js", ".jsx"] }],    <br/>      "implicit-arrow-linebreak": "off",    <br/>      "comma-dangle": "off",    <br/>      "indent": "off",    <br/>      "no-trailing-spaces": "off"  <br/>    }<br/>  }</span></pre><p id="3d51" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">这就是我所做的全部设置。我按照Airbnb文档的说明添加了<code class="fe mo mp mq mr b">"extends": "airbnb"</code>，添加了我正在用babel传输我的ES6代码，列出了环境，并添加了一些额外的规则来覆盖Airbnb的设置。</p><p id="c8dc" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">这些规则中的大部分都被覆盖了，因为我在VS代码设置中也使用了prettle的代码格式，如果我不关闭ESLint中的规则，prettle会在我每次保存文件时继续重新格式化代码并破坏规则。不过，有点小麻烦。</p><p id="7a1a" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><strong class="ky iu">我定的规则</strong></p><ul class=""><li id="b00a" class="of og it ky b kz me ld mf lh oh ll oi lp oj lt ok ol om on bi translated">我扩展了<code class="fe mo mp mq mr b">react/jsx-filename-extension</code>规则，使其适用于以<code class="fe mo mp mq mr b">.js</code>和<code class="fe mo mp mq mr b">.jsx</code>结尾的文件，因为我所有包含JSX的文件都以<code class="fe mo mp mq mr b">.js</code>结尾。</li><li id="7190" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">我关闭了<code class="fe mo mp mq mr b">implict-arrow-linebreak</code>,因为在保存时更漂亮地重新格式化了它。</li><li id="c7b0" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">我关了<code class="fe mo mp mq mr b">comma-dangle</code>、<code class="fe mo mp mq mr b">indent</code>、<code class="fe mo mp mq mr b">no-trailing-spaces</code>也是因为同样的原因。</li></ul><p id="3cc1" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">除此之外，还有ESLint强调的一次性规则，当我需要的时候，我通过文件或行来关闭它们(比如<code class="fe mo mp mq mr b">console.log</code>)。我相信你也会遇到需要这种例外的情况。</p><h2 id="c183" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated">不启用ESLint</h2><p id="3d86" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们看看在我的项目中启用ESLint之前，我的代码是什么样子的。</p><p id="31e5" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">这是我的两个React组件的例子。第一个是主页文件，第二个是标题栏，它是整个应用程序中可重用的组件。</p><p id="a179" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><code class="fe mo mp mq mr b"><strong class="ky iu">Home.js</strong></code>文件<strong class="ky iu">文件</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi ot"><img src="../Images/e1ae91b6c84ed03a1b4a01589fe81bf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SfmqTNAnhtrnvKeaooL62Q.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">这段代码看起来很漂亮，很谦逊，对吗？没什么特别的毛病。</figcaption></figure><p id="bbbf" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">这个文件初看起来不错，看起来很干净，格式也很好。简单明了。传递给标题栏本身的一个道具，按钮的样式来自其他可重用组件。一切都不言自明。</p><p id="5070" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><code class="fe mo mp mq mr b"><strong class="ky iu">HeaderBar.js</strong></code>文件<strong class="ky iu">文件</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi oy"><img src="../Images/f219a59a316a4358b69a49bfbe9e8458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66BMA0d-9QgESwIkJqYBPQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">再说一遍，在我看来没问题…</figcaption></figure><p id="c55b" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">标题栏文件基本相同。很好的，众所周知的React创建类组件结构，一些标题标题的道具，如果没有提供的话，这是一个默认设置。对我来说没问题。</p><h2 id="68b9" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated">启用ESLint后</h2><p id="49ae" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我在我的项目中打开了ESLint(关于如何在VS代码中这样做的所有细节都在这里<a class="ae md" rel="noopener ugc nofollow" target="_blank" href="/keep-code-consistent-across-developers-the-easy-way-with-prettier-eslint-60bb7e91b76c"/>)，我在我的项目中的几乎每个文件上都看到了以下可怕的东西…</p><p id="b762" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">我欣赏VS Code IDE的一个地方是它有自己独立的“问题”标签，所有的ESLint错误都会在这里显示出来。当我将鼠标悬停在所有愤怒的红色曲线上或点击任何错误时，我会直接在代码中找到这些错误。大概是为了修复它们(或者在必要时忽略它们)。</p><p id="82f9" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">单击出现在愤怒代码上的小灯泡将向您显示违反了什么ESLint规则，并让您选择忽略该行或整个文件的规则，或者转到ESLint规则文档以了解有关如何修复错误的更多信息。</p><p id="5598" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><code class="fe mo mp mq mr b"><strong class="ky iu">Home.js</strong></code> <strong class="ky iu">文件</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi oz"><img src="../Images/daf3b38ab4966252b27602aad6628c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jr28pmZnarybFvO34yWyng.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">😱ESLint对这段代码的感觉和我不一样。所有的事情都是错的。</figcaption></figure><p id="792c" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">嗯……这是怎么回事？为什么到处都是红色的花体字？！？！</p><p id="e2d3" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><code class="fe mo mp mq mr b"><strong class="ky iu">HeaderBar.js</strong></code> <strong class="ky iu">文件</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi pa"><img src="../Images/73caf8ee0fd2b0495b1f987dda799ead.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0snfp2qcUFIbkMRK0IKaQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">啊，看看那些红线…</figcaption></figure><p id="e4a4" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">😱这里也是吗？真的吗？！？这么简单的组件，这就是我看到的？什么给了ESLint？？</p><p id="aad2" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">在我克服了最初对ESLint非常残酷和无情的代码审查的震惊和愤怒之后，我开始修复错误，并学习如何在这个过程中写得更好。</p><p id="fbba" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">我通过阅读<a class="ae md" href="https://eslint.org/docs/rules/" rel="noopener ugc nofollow" target="_blank"> ESLint错误文档</a>(VS Code的ESLint lightbulb扩展将我直接链接到该文档)和检查堆栈溢出来查看如何根据被破坏的规则以正确的方式写东西的例子。</p><h2 id="54b5" class="ng jr it bd js nh ni dn jw nj nk dp ka lh nl nm ke ll nn no ki lp np nq km nr bi translated">ESLint后修复</h2><p id="837c" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看对于相同的文件，新的pro-ESLint-ed代码是什么样子的。</p><p id="8ecc" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><code class="fe mo mp mq mr b"><strong class="ky iu">Home.js</strong></code>文件<strong class="ky iu">文件</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi pb"><img src="../Images/9f2caff3e356fb85585a9a807e78cc61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*muOUAvPMOsN61OglM0bzsQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">😆好多了。看——它是干净的，纯粹的，无状态的，更容易阅读。</figcaption></figure><p id="dfea" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">以下是发生的变化。</p><ul class=""><li id="cdb8" class="of og it ky b kz me ld mf lh oh ll oi lp oj lt ok ol om on bi translated">ESLint检测到这个home文件实际上是一个纯粹的无状态组件，不需要成为React类。相反，它可以写成一个<code class="fe mo mp mq mr b">const</code>变量:<code class="fe mo mp mq mr b">const Home</code>。</li><li id="9c7c" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">它还确定了<code class="fe mo mp mq mr b">&lt;LinkButtons&gt;</code>不需要用花括号括住<code class="fe mo mp mq mr b">buttonText</code>和<code class="fe mo mp mq mr b">link</code>属性，因为这两个属性在<code class="fe mo mp mq mr b">LinkButtons.js</code>组件文件中都被定义为字符串数据类型属性类型。这是它的样子。</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi pc"><img src="../Images/fd812f7a163c770c45dcca7fca2c8414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8y2eSYpSLiKLEijcrNOYsQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">下面是在ESLint出现之前没有定义的“LinkButtons”的道具类型。</figcaption></figure><ul class=""><li id="3e0b" class="of og it ky b kz me ld mf lh oh ll oi lp oj lt ok ol om on bi translated">您还会注意到，在上面的代码片段中，我禁用了关于buttonStyle的ESLint规则:<code class="fe mo mp mq mr b">// eslint-disable-next-line react/forbid-prop-types</code>。我这样做是因为ESLint不喜欢只描述为<code class="fe mo mp mq mr b">object</code>的道具类型(它需要更大的特异性)，但是因为我使用了由我的React材质样式依赖提供的按钮样式，所以我选择不在我自己的道具类型中定义超过<code class="fe mo mp mq mr b">object</code>的道具类型。</li></ul><p id="8021" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">令人高兴的是，有了这些改变，VS代码中显示的问题和红色曲线都消失了。我不得不承认，这段代码看起来确实比我最初的React代码要干净。</p><p id="bc23" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><code class="fe mo mp mq mr b"><strong class="ky iu">HeaderBar.js</strong></code> <strong class="ky iu">文件</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ou ov di ow bf ox"><div class="gh gi pd"><img src="../Images/d63746ebc97f85e69dcabfb5bb8a231f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3HHoaZZkcNXaf8DwhbtHfA.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">同样，看起来更好。定义了Props和默认props，组件是无状态的，标题是从传入的props对象中析构的。</figcaption></figure><p id="754e" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">这是在ESLint之后重写的标题栏可重用组件。</p><ul class=""><li id="43bf" class="of og it ky b kz me ld mf lh oh ll oi lp oj lt ok ol om on bi translated">这个组件也可以写成一个无状态的功能组件，而不是一个React类。它变成了<code class="fe mo mp mq mr b">const HeaderBar</code>。</li><li id="130a" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">ESLint指示我使用ES6 object destructuring从我传递给<code class="fe mo mp mq mr b">headerBar</code>组件的对象中获取<code class="fe mo mp mq mr b">title</code>属性。</li><li id="81c6" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">我没有为组件定义<code class="fe mo mp mq mr b">propTypes</code>或<code class="fe mo mp mq mr b">defaultProps</code>，这种<a class="ae md" href="https://reactjs.org/docs/typechecking-with-proptypes.html" rel="noopener ugc nofollow" target="_blank">类型检查</a>有助于防止错误不必要地输入代码，仅仅因为一个意外的JavaScript类型被作为属性传递。</li></ul><p id="23d6" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">在做了这些改变之后，我的代码被ESLint的严格标准认为是可以接受的。</p><p id="6fc0" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">现在，想象一下，在我的代码库中，几乎所有的文件中都有一系列类似的错误。但是这些错误帮助我学会了如何识别和编写更好的JavaScript和React代码，对此我很感激。</p><p id="0e60" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">我的项目足够小，我可以一个文件一个文件地检查，并在几个会话中修复问题，但是如果要将ESLint实现到一个大型的、已经存在的代码库中，那么在实现新特性时，只修复当前正在处理的文件可能更有意义，直到所有文件都被修复以遵守新的ESLint规则。而不是试图一次性解决所有问题。</p><h1 id="a15f" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="732d" class="pw-post-body-paragraph kw kx it ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">JavaScript是一种解释型语言，它允许开发人员有很多像Java这样的强类型语言无法忍受的回旋余地。大多数时候，我很欣赏这种灵活性，但它也为强类型语言不必处理的错误提供了机会。</p><p id="c467" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">像往常一样，当我开始对自己的JavaScript能力过于自信时，ESLint出现了，把我拉下了几级。但是我认为Airbnb的苛刻是一件好事。</p><p id="ec78" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">它教会了我如何更好地识别React类并将其重构为无状态组件，如何利用ES6的特性，如对象析构，以及如何定义适当的类型来防止不必要的错误发生。它改进了我的代码和我的编码，并将在未来继续这样做。</p><p id="e6bf" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">过几周再来看看，我会写一些关于React或者其他与web开发相关的东西，所以请关注我，这样你就不会错过。</p><p id="90e5" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">感谢您的阅读，我希望这有助于说服您尝试使用您自己的React和JavaScript项目，并提高您自己的项目和编码能力。非常感谢鼓掌和分享！</p><p id="c4c1" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated">如果你喜欢读这篇文章，你可能也会喜欢我的其他一些博客:</p><ul class=""><li id="0216" class="of og it ky b kz me ld mf lh oh ll oi lp oj lt ok ol om on bi translated"><a class="ae md" rel="noopener ugc nofollow" target="_blank" href="/the-absolute-easiest-way-to-debug-node-js-with-vscode-2e02ef5b1bad">调试Node.js最简单的方法——用VS代码</a></li><li id="5443" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated"><a class="ae md" rel="noopener ugc nofollow" target="_blank" href="/using-node-js-to-read-really-really-large-files-pt-1-d2057fe76b33">使用Node.js读取非常非常大的文件(Pt 1) </a></li><li id="0da8" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">用最简单的方法保持开发者代码的一致性——用更漂亮的ESLint</li></ul><p id="4ed8" class="pw-post-body-paragraph kw kx it ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt im bi translated"><strong class="ky iu">参考资料和更多资源:</strong></p><ul class=""><li id="cc6c" class="of og it ky b kz me ld mf lh oh ll oi lp oj lt ok ol om on bi translated">https://github.com/paigen11/mysql-registration-passport MERN github回购应用:<a class="ae md" href="https://github.com/paigen11/mysql-registration-passport" rel="noopener ugc nofollow" target="_blank"/></li><li id="12ce" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">ESLint文档:<a class="ae md" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank">https://eslint.org/</a></li><li id="3f4c" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">https://www.npmjs.com/package/eslint-config-airbnb NPM Airbnb ESLint:<a class="ae md" href="https://www.npmjs.com/package/eslint-config-airbnb" rel="noopener ugc nofollow" target="_blank"/></li><li id="bf1e" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">Airbnb ESLint，Github:<a class="ae md" href="https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb" rel="noopener ugc nofollow" target="_blank">https://Github . com/Airbnb/JavaScript/tree/master/packages/ESLint-config-Airbnb</a></li><li id="cfc3" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">Airbnb JavaScript风格指南，Github:<a class="ae md" href="https://github.com/airbnb/javascript" rel="noopener ugc nofollow" target="_blank">https://github.com/airbnb/javascript</a></li><li id="618c" class="of og it ky b kz oo ld op lh oq ll or lp os lt ok ol om on bi translated">语法FM播客:<a class="ae md" href="https://syntax.fm/" rel="noopener ugc nofollow" target="_blank">https://syntax.fm/</a></li></ul></div></div>    
</body>
</html>