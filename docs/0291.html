<html>
<head>
<title>How not to Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何不哭</h1>
<blockquote>原文：<a href="https://itnext.io/how-not-to-vue-18f16fe620b5?source=collection_archive---------0-----------------------#2018-02-10">https://itnext.io/how-not-to-vue-18f16fe620b5?source=collection_archive---------0-----------------------#2018-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a19a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我在新工作中发现的一系列不好的事情</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/17980e94c3068e23b03123003228aeea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pWo4h-AhSfgyFHDlAkchcw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">有些人会这样做</figcaption></figure><p id="08b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fhow-not-to-vue-18f16fe620b5" rel="noopener ugc nofollow" target="_blank"> <em class="ls">点击这里在LinkedIn上分享这篇文章</em> </a></p><p id="e799" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不久前，我找到了一份新工作。当我第一次看到代码库的时候，我被吓坏了。这里我想展示一下你在Vue.js应用中应该避免的事情。</p><h1 id="b146" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">数据/计算中的静态属性</h1><p id="e2a1" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">没有理由将静态属性传递给<code class="fe mq mr ms mt b">data</code>，尤其是在<code class="fe mq mr ms mt b">computed</code>中。当你这样做时，Vue使这些属性反应，但这是不必要的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/9a6b440175e3b29b708fa75107d74d09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*TUsVw4rEJwhw2iFuSyEWkw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">不要</strong>。电话和城市有无用的反应</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f2f17ef88c9a8c58884c15b56e9e289b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*HYgxVfj99dt-yaGIeSABGw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做</strong>。把它们递给<code class="fe mq mr ms mt b">$options</code>。它更短，这里没有无用的工作</figcaption></figure><h1 id="0d60" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">认为非反应性数据将是反应性的</h1><p id="036b" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">记住:Vue不是巫师。Vue不知道你的<em class="ls"> cookies </em>什么时候更新。</p><p id="a783" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我提到cookies是因为我的同事花了2个小时才明白为什么他的计算属性没有更新。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/d50008256d158743aa61d1d926250c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*mSQ5DXcLOlFK6vfdz-Gyjw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">不要</strong>。计算出的属性应仅基于Vue反应数据。否则，它就不会工作</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/72aa9c8e4bd79ea76786c46b690ff964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*Q7HhvYfTsHNUZLMcnptbhw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做</strong>。手动更新你那些不反应的东西。</figcaption></figure><p id="a4b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，我建议您不要在计算属性中使用任何辅助数据。在您的计算属性中应该没有副作用。这会节省你很多时间。真的</p><h1 id="53b3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">把应该一次性完成的事情混在一起</h1><p id="ccf7" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">混音没问题<em class="ls">*有人马上关闭帖子* </em> …混音在某些情况下没问题:</p><ol class=""><li id="55fe" class="mx my iq kx b ky kz lb lc le mz li na lm nb lq nc nd ne nf bi translated">创建修改Vue实例的插件，提供新功能</li><li id="f156" class="mx my iq kx b ky ng lb nh le ni li nj lm nk lq nc nd ne nf bi translated">在不同组件/整个应用程序中使用通用的特定方法</li></ol><p id="c039" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是有一个人在<code class="fe mq mr ms mt b">mounted</code> hook中用非常缓慢的动作做出了全球混音。为什么不呢？因为它在<strong class="kx ir">的每个</strong>组件挂载上都被调用，但也可能只被调用一次。</p><p id="8ef0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这段代码我就不展示了。相反，为了更清楚，我将向您展示一个更简单的示例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/72a0b933a71ceeace47bee7e0c01f7bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*qCp4mZoUYKb2PPoqDFeByA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">不要。避免在mixins中这样做。当您不需要时，它将在每个组件挂载上被调用</strong></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f754b62e1276e42f7938a3e65f787042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*7-g24ZUvldsPh8XIIPaxTw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。在根实例中完成这项工作。它只会被调用一次。您仍然可以使用<code class="fe mq mr ms mt b">$root</code>访问结果</strong></figcaption></figure><h2 id="dffd" class="nn lu iq bd lv no np dn lz nq nr dp md le ns nt mf li nu nv mh lm nw nx mj ny bi translated">setTimout/setInterval的工作不正确</h2><p id="f438" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">在一次采访中，我团队中的一个前端开发人员问我，我们是否可以在组件中使用超时/间隔。我回答“是”，并想解释如何正确地做这件事，但我被指责为无能。</p><p id="6bdc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我把这部分献给一个人，现在我必须维护他的代码</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/0c6966e83a385228d9724142a79d8ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*FxPRflqqk8K6wRr4jUyFBQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">不要。</strong>可以用音程。但是你忘了用<code class="fe mq mr ms mt b"><strong class="bd lv">clearInterval</strong> and will get error on component unmount</code></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/2e861ddd7c76dbd102da9c3851e06c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*7kBqD5KNSkCTTpP2O7FUgw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。</strong>使用<code class="fe mq mr ms mt b">beforeDestroy</code>挂钩中的<code class="fe mq mr ms mt b"><strong class="bd lv">clearInterval</strong></code>清除间隔</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/dd2274955bd4a8437231fdc062a4d6c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*Tmr7GIY7saojZkOPoVQfuQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。</strong>如果你不想关心，使用<a class="ae lr" href="https://github.com/kelin2025/vue-timers" rel="noopener ugc nofollow" target="_blank"><strong class="bd lv"/></a></figcaption></figure><h1 id="f568" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">变异的父母</h1><p id="a4ef" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">Vue中我非常不喜欢并希望删除的内容(Evan，请)</p><p id="bd83" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我看不到使用<code class="fe mq mr ms mt b">$parent</code>的真实用例。它使组件不灵活，可能会用意想不到的问题迷惑您。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/2b1a63455903141184f89ca98b1c159b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*MYb4iAVzlvQPZDWqCnJM0w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">不要。</strong>如果你试图变异<code class="fe mq mr ms mt b">props</code>，Vue会警告你，但是<strong class="bd lv"> Vue无法通过</strong> <code class="fe mq mr ms mt b"><strong class="bd lv">$parent</strong></code>检测到变异</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/99d61cdee087f93b5d959557661eec0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*pJkabHNu8Gx7f4UMM07FMg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。</strong>使用事件发射器并监听事件。同样，<code class="fe mq mr ms mt b">v-model</code>指令只是<code class="fe mq mr ms mt b">value</code>道具+ <code class="fe mq mr ms mt b">input</code>事件的糖</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/81828c53a4a18d87ad55891b67e54d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*yypns5Qp2y_t7HrsPT5O7g.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。Vue还有一个糖:<code class="fe mq mr ms mt b">.sync</code>修饰符，它在<code class="fe mq mr ms mt b">update:prop</code>事件时更新<code class="fe mq mr ms mt b">prop</code></strong></figcaption></figure><h1 id="d408" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">If/else表单验证</h1><p id="90e4" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">当我发现有手动验证的表单时，我真的很困惑。它会生成大量无用的样板代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/25d2dae525a9319a39b519a6d0d14991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*yn_pt6eFfOIz-RvMEA30gQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">不要。在我的新项目中，我被类似的代码吓坏了。别傻了，有很多解决方法</strong></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/729ddbd42821a8f28b5435e146bf5546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*omOSNM6WmpsYSN3C4dy4dw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。</strong>使用<a class="ae lr" href="https://monterail.github.io/vuelidate/" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lv">取消</strong> </a>。只有一行包含每个字段的验证规则。干净的声明性代码</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/ab718334b21a7e36d3bf121c985fcb8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*_4S2iHw93lSS_GIeceJ_YA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd lv">做。我还做了一个小的<a class="ae lr" href="https://github.com/Kelin2025/vuelidate-forms" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lv">插件</strong> </a>，允许你用一个对象声明表单数据和验证</strong></figcaption></figure><h1 id="bec7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">而不是结论</h1><p id="4f22" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">初级Vue.js开发者做的不全是罪，我敢肯定这个单子可能是无限的。但是我觉得已经足够了。</p><p id="3daa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那么，你在Vue.js项目中看到了哪些<em class="ls"/>有趣的事情？如果您有什么要说的，请在此回复:)</p><p id="38ec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！不要重复愚蠢的错误:)</p><p id="d6d5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">特别感谢对<a class="ae lr" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir">carbon . now . sh</strong></a>有贡献的人。真的很好看！</p></div></div>    
</body>
</html>