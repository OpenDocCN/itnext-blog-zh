<html>
<head>
<title>Passing data between sibling components in React using Context API and React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用上下文API和React挂钩在React中的兄弟组件之间传递数据</h1>
<blockquote>原文：<a href="https://itnext.io/passing-data-between-sibling-components-in-react-using-context-api-and-react-hooks-fce60f12629a?source=collection_archive---------0-----------------------#2019-10-06">https://itnext.io/passing-data-between-sibling-components-in-react-using-context-api-and-react-hooks-fce60f12629a?source=collection_archive---------0-----------------------#2019-10-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3a6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将构建一个带有2个输入的简单react应用程序，其中它们的值将完全同步。在本文中，我将解释使用最新的react特性在react兄弟组件之间发送数据是多么容易。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/546a455547b2e73291ce50c01b904653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FdSxEIpAJFkZgDE5AwJzbA.png"/></div></div></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="6287" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">设置React环境</h1><p id="11fb" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">要在react中启动新的应用程序，您不需要担心所有的设置和配置。我将使用<code class="fe mh mi mj mk b">Create React App</code>环境，它非常简单并且有很好的文档记录。关于这个工具链的所有文档可以在这里找到<a class="ae ml" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="aa6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建react项目</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="c590" class="mq lf iq mk b gy mr ms l mt mu">npx create-react-app sync_inputs</span></pre><p id="7aa1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，你需要导航到文件夹<code class="fe mh mi mj mk b">sync_inputs</code>并启动应用程序</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="2458" class="mq lf iq mk b gy mr ms l mt mu">cd sync_inputs<br/>npm start</span></pre><p id="c187" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mv">注意:</em> </strong>运行这个本地服务器可能会有一些问题。如果你有类似<strong class="jp ir"><em class="mv"/></strong><code class="fe mh mi mj mk b">Attempting to bind to HOST environment variable: <strong class="jp ir">x86_64-apple-darwin13.4.0</strong></code><strong class="jp ir"/>的错误信息，那么<strong class="jp ir"> </strong> <a class="ae ml" href="https://medium.com/@choy/fixing-create-react-app-when-npm-fails-to-start-because-your-host-environment-variable-is-being-4c8a9fa0b461" rel="noopener">这篇</a>文章可能对你有帮助。当我试着运行我的服务器时，我遇到了一个错误<code class="fe mh mi mj mk b">TypeError: fsevents is not a constructor.</code>我在这里找到了很多如何处理它的建议<a class="ae ml" href="https://github.com/facebook/create-react-app/issues/6891" rel="noopener ugc nofollow" target="_blank">，但是个人帮我移除了所有的节点包并重新运行<code class="fe mh mi mj mk b">npm install</code>。之后我运行<code class="fe mh mi mj mk b">npm start</code>，一切正常。此外，使用npm不是必要的。喜欢的话可以用纱。</a></p><p id="b766" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果一切都已安装，并且您的本地服务器正在运行，您需要导航<code class="fe mh mi mj mk b">http://localhost:3000</code>，您应该会在深色背景上看到react徽标。大概是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mw"><img src="../Images/77239302daea448b5f9ba4fb8fd9220c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z84fKweil9V5z2XAO0EUxQ.png"/></div></div></figure><p id="080a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在您的终端中按下<code class="fe mh mi mj mk b">ctrl + c</code>来停止本地服务器，并安装更多的依赖项。</p><p id="e536" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装<a class="ae ml" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">材质UI </a>核心库和它们的图标库来制作漂亮的UI</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="2ce4" class="mq lf iq mk b gy mr ms l mt mu">npm install @material-ui/core<br/>npm install @material-ui/icons</span></pre><p id="c9fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你的<em class="mv"> package.json </em>文件应该是这样的:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="0f2f" class="mq lf iq mk b gy mr ms l mt mu">{<br/>  "name": "sync_inputs",<br/>  "version": "0.1.0",<br/>  "private": <strong class="mk ir">true</strong>,<br/>  "dependencies": {<br/>    "@material-ui/core": "^4.5.0",<br/>    "@material-ui/icons": "^4.4.3",<br/>    "react": "^16.10.2",<br/>    "react-dom": "^16.10.2",<br/>    "react-scripts": "3.2.0"<br/>  },<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>  "eslintConfig": {<br/>    "extends": "react-app"<br/>  },<br/>  "browserslist": {<br/>    "production": [<br/>      "&gt;0.2%",<br/>      "not dead",<br/>      "not op_mini all"<br/>    ],<br/>    "development": [<br/>      "last 1 chrome version",<br/>      "last 1 firefox version",<br/>      "last 1 safari version"<br/>    ]<br/>  }<br/>}</span></pre><p id="b753" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，现在我们有了我们需要的包含所有库的工作环境。现在是时候开始构建我们的应用程序了。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="0f74" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">创建React组件</strong></h1><blockquote class="mx my mz"><p id="4ea6" class="jn jo mv jp b jq jr js jt ju jv jw jx na jz ka kb nb kd ke kf nc kh ki kj kk ij bi translated">在这一部分，我将建立我们的项目结构，并将创建所有的用户界面。</p></blockquote><p id="64e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，在我们项目的<code class="fe mh mi mj mk b">./src</code>目录中创建新文件夹<code class="fe mh mi mj mk b">components</code>。之后在<code class="fe mh mi mj mk b">./src/components</code>中创建两个新组件(<em class="mv"> Input_one.js </em>，<em class="mv"> Input_two.js </em>)。完成所有这些步骤后，您的项目结构应该如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/1c26f079161fbdd2a06e2561e2e2c6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPpFSBNUuiiKDolHtlTNfA.png"/></div></div></figure><p id="63a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接下来的步骤中，我将修改我们的组件来创建一个漂亮的用户界面。</p><p id="c215" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">修改<code class="fe mh mi mj mk b">./src/components/Input_one.js</code>创建一个输入。</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="5ad4" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{makeStyles} <strong class="mk ir">from </strong>"@material-ui/core/styles/index";<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>Paper <strong class="mk ir">from </strong>'@material-ui/core/Paper';<br/><strong class="mk ir">import </strong>InputBase <strong class="mk ir">from </strong>'@material-ui/core/InputBase';<br/><br/>//Material UI Icons<br/><strong class="mk ir">import </strong>IconButton <strong class="mk ir">from </strong>'@material-ui/core/IconButton';<br/><strong class="mk ir">import </strong>SearchIcon <strong class="mk ir">from </strong>'@material-ui/icons/Search';<br/><br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    root: {<br/>        padding: '2px 4px',<br/>        display: 'flex',<br/>        alignItems: 'center',<br/>        width: '100%',<br/>    },<br/>    input: {<br/>        marginLeft: '8px',<br/>        flex: 1,<br/>    },<br/>    iconButton: {<br/>        padding: 10,<br/>    }<br/>});<br/><br/><strong class="mk ir">export default function </strong>Input_one() {<br/>    <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>    <strong class="mk ir">return</strong>(<br/>        &lt;React.Fragment&gt;<br/>            &lt;Grid item xs={12} md={6}&gt;<br/>                &lt;Paper className={classes.root}&gt;<br/>                    &lt;InputBase<br/>                        className={classes.input}<br/>                        placeholder="Input one"<br/>                    /&gt;<br/>                    &lt;IconButton className={classes.iconButton} aria-label="search"&gt;<br/>                        &lt;SearchIcon /&gt;<br/>                    &lt;/IconButton&gt;<br/>                &lt;/Paper&gt;<br/>            &lt;/Grid&gt;<br/>        &lt;/React.Fragment&gt;<br/>    )<br/>}</span></pre><p id="2618" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">修改<code class="fe mh mi mj mk b">./src/components/Input_two.js</code>创建一个输入二。</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="dee2" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{makeStyles} <strong class="mk ir">from </strong>"@material-ui/core/styles/index";<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>Paper <strong class="mk ir">from </strong>'@material-ui/core/Paper';<br/><strong class="mk ir">import </strong>InputBase <strong class="mk ir">from </strong>'@material-ui/core/InputBase';<br/><br/>//Material UI Icons<br/><strong class="mk ir">import </strong>IconButton <strong class="mk ir">from </strong>'@material-ui/core/IconButton';<br/><strong class="mk ir">import </strong>SearchIcon <strong class="mk ir">from </strong>'@material-ui/icons/Search';<br/><br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    root: {<br/>        padding: '2px 4px',<br/>        display: 'flex',<br/>        alignItems: 'center',<br/>        width: '100%',<br/>    },<br/>    input: {<br/>        marginLeft: '8px',<br/>        flex: 1,<br/>    },<br/>    iconButton: {<br/>        padding: 10,<br/>    }<br/>});<br/><br/><strong class="mk ir">export default function </strong>Input_two() {<br/>    <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>    <strong class="mk ir">return</strong>(<br/>        &lt;React.Fragment&gt;<br/>            &lt;Grid item xs={12} md={6}&gt;<br/>                &lt;Paper className={classes.root}&gt;<br/>                    &lt;InputBase<br/>                        className={classes.input}<br/>                        placeholder="Input two"<br/>                    /&gt;<br/>                    &lt;IconButton className={classes.iconButton} aria-label="search"&gt;<br/>                        &lt;SearchIcon /&gt;<br/>                    &lt;/IconButton&gt;<br/>                &lt;/Paper&gt;<br/>            &lt;/Grid&gt;<br/>        &lt;/React.Fragment&gt;<br/>    )<br/>}</span></pre><p id="5180" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mv">注:</em> </strong> <em class="mv"> Input_one </em>和<em class="mv"> Input_two </em>组件几乎相同。现在主要区别在<code class="fe mh mi mj mk b">export default function Input_one()</code>和<code class="fe mh mi mj mk b">export default function Input_two()</code></p><p id="0289" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在修改<code class="fe mh mi mj mk b">./src/App.js</code>文件。在这个文件中，我将创建<em class="mv">容器</em>，其中将存储我们应用程序的所有内容，添加标题并导入我们的<em class="mv">&lt;【Input _ one/&gt;</em>和<em class="mv"> &lt; Input_two/ &gt; </em>组件。</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="6b1b" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{ makeStyles } <strong class="mk ir">from </strong>'@material-ui/core/styles';<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Container <strong class="mk ir">from </strong>'@material-ui/core/Container';<br/><strong class="mk ir">import </strong>Typography <strong class="mk ir">from </strong>'@material-ui/core/Typography';<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>CssBaseline <strong class="mk ir">from </strong>'@material-ui/core/CssBaseline';<br/><strong class="mk ir">import </strong>Toolbar <strong class="mk ir">from </strong>'@material-ui/core/Toolbar';<br/><br/>//Import our Inputs<br/><strong class="mk ir">import </strong>Input_one <strong class="mk ir">from </strong>'./components/Input_one';<br/><strong class="mk ir">import </strong>Input_two <strong class="mk ir">from </strong>'./components/Input_two';<br/><br/>//Styles<br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    toolbarTitle: {<br/>        flex: 1,<br/>    },<br/>});<br/><br/><strong class="mk ir">function </strong>App() {<br/><br/>  <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>  <strong class="mk ir">return </strong>(<br/>      &lt;Container maxWidth="lg"&gt;<br/>          &lt;CssBaseline /&gt;<br/><br/>          {/*Title*/}<br/>          &lt;Toolbar&gt;<br/>              &lt;Typography<br/>                  component="h2"<br/>                  variant="h5"<br/>                  color="inherit"<br/>                  align="center"<br/>                  noWrap<br/>                  className={classes.toolbarTitle}<br/>              &gt;<br/>                  Pass data between react sibling components<br/>              &lt;/Typography&gt;<br/>          &lt;/Toolbar&gt;<br/><br/>          {/*Inputs*/}<br/>          &lt;Grid container spacing={1}&gt;<br/>              &lt;Input_one/&gt;<br/>              &lt;Input_two/&gt;<br/>          &lt;/Grid&gt;<br/><br/>      &lt;/Container&gt;<br/>  );<br/>}<br/><br/><strong class="mk ir">export default </strong>App;</span></pre><p id="781c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成所有这些步骤后，导航至<code class="fe mh mi mj mk b">http://localhost:3000</code>。我们的项目应该是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/cfeeb6d7ce4d44748e4e3a37a77491ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SaCVYnxDFXme8k8pL2ciMQ.png"/></div></div></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="6edb" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建在组件之间传递数据的功能</h1><p id="0273" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">根据React <a class="ae ml" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">文档</a></p><blockquote class="mx my mz"><p id="d483" class="jn jo mv jp b jq jr js jt ju jv jw jx na jz ka kb nb kd ke kf nc kh ki kj kk ij bi translated">当不同嵌套层次的许多组件需要访问某些数据时，主要使用上下文。</p></blockquote><p id="5c1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe mh mi mj mk b">./src/App.js</code>中创建一个上下文对象</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="81f5" class="mq lf iq mk b gy mr ms l mt mu">// Create context object<br/><strong class="mk ir">export const </strong>AppContext = React.createContext();</span></pre><p id="3ae6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后设置初始状态对象，在那里我们存储我们的日期，这应该可以从两个输入访问。</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="84b7" class="mq lf iq mk b gy mr ms l mt mu">// Set up Initial State<br/><strong class="mk ir">const </strong>initialState = {<br/><br/>    inputText: '',<br/><br/>};</span></pre><p id="8d15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在创建函数<code class="fe mh mi mj mk b">reducer</code>，当任何输入的值改变时，它将每次更新我们的初始状态。我们将通过<code class="fe mh mi mj mk b">useReducer</code>使用该功能</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="4f0c" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">function </strong>reducer(state, action) {<br/>    <strong class="mk ir">switch </strong>(action.type) {<br/>        <strong class="mk ir">case </strong>'UPDATE_INPUT':<br/>            <strong class="mk ir">return </strong>{<br/>                inputText: action.data<br/>            };<br/><br/><br/>        <strong class="mk ir">default</strong>:<br/>            <strong class="mk ir">return </strong>initialState;<br/>    }<br/>}</span></pre><p id="05b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据react <a class="ae ml" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank">文档</a></p><blockquote class="mx my mz"><p id="83a5" class="jn jo mv jp b jq jr js jt ju jv jw jx na jz ka kb nb kd ke kf nc kh ki kj kk ij bi translated"><code class="fe mh mi mj mk b">useReducer</code>允许您优化触发深度更新的组件的性能，因为您可以向下传递<code class="fe mh mi mj mk b">dispatch</code>而不是回调。</p></blockquote><p id="7cea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先我们需要从react导入<code class="fe mh mi mj mk b">useReducer</code>。所以现在<code class="fe mh mi mj mk b">./src/App.js</code>的第一行应该是这样的</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="0904" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useReducer } <strong class="mk ir">from </strong>'react';</span></pre><p id="7028" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要初始化<code class="fe mh mi mj mk b">useReducer</code>状态。最简单的方法是将初始状态作为第二个参数传递。我们可以通过添加以下内容来做到这一点:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="011a" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">const </strong>[state, dispatch] = useReducer(reducer, initialState);</span></pre><p id="c9e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mh mi mj mk b">./src/App.js</code>中的最后一部分是将组件<em class="mv"> &lt; Input_one/ &gt; </em>和<em class="mv"> &lt; Input_two/ &gt; </em>包装在<code class="fe mh mi mj mk b">AppContext.Provider.</code>中，每个上下文对象都附带一个提供者React组件，允许消费组件订阅上下文更改。可以嵌套提供程序以覆盖树中更深层次的值。</p><p id="2ea1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在的<code class="fe mh mi mj mk b">./src/App.js</code>应该是那个样子:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="4c00" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useReducer } <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{ makeStyles } <strong class="mk ir">from </strong>'@material-ui/core/styles';<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Container <strong class="mk ir">from </strong>'@material-ui/core/Container';<br/><strong class="mk ir">import </strong>Typography <strong class="mk ir">from </strong>'@material-ui/core/Typography';<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>CssBaseline <strong class="mk ir">from </strong>'@material-ui/core/CssBaseline';<br/><strong class="mk ir">import </strong>Toolbar <strong class="mk ir">from </strong>'@material-ui/core/Toolbar';<br/><br/>//Import our Inputs<br/><strong class="mk ir">import </strong>Input_one <strong class="mk ir">from </strong>'./components/Input_one';<br/><strong class="mk ir">import </strong>Input_two <strong class="mk ir">from </strong>'./components/Input_two';<br/><br/>//Styles<br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    toolbarTitle: {<br/>        flex: 1,<br/>    },<br/>});<br/><br/>// Create context object<br/><strong class="mk ir">export const </strong>AppContext = React.createContext();<br/><br/>// Set up Initial State<br/><strong class="mk ir">const </strong>initialState = {<br/><br/>    inputText: '',<br/><br/>};<br/><br/><strong class="mk ir">function </strong>reducer(state, action) {<br/>    <strong class="mk ir">switch </strong>(action.type) {<br/>        <strong class="mk ir">case </strong>'UPDATE_INPUT':<br/>            <strong class="mk ir">return </strong>{<br/>                inputText: action.data<br/>            };<br/><br/><br/>        <strong class="mk ir">default</strong>:<br/>            <strong class="mk ir">return </strong>initialState;<br/>    }<br/>}<br/><br/><strong class="mk ir">function </strong>App() {<br/><br/>  <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>  <strong class="mk ir">const </strong>[state, dispatch] = useReducer(reducer, initialState);<br/><br/>  <strong class="mk ir">return </strong>(<br/>      &lt;Container maxWidth="lg"&gt;<br/>          &lt;CssBaseline /&gt;<br/><br/>          {/*Title*/}<br/>          &lt;Toolbar&gt;<br/>              &lt;Typography<br/>                  component="h2"<br/>                  variant="h5"<br/>                  color="inherit"<br/>                  align="center"<br/>                  noWrap<br/>                  className={classes.toolbarTitle}<br/>              &gt;<br/>                  Pass data between react sibling components<br/>              &lt;/Typography&gt;<br/>          &lt;/Toolbar&gt;<br/><br/>          {/*Inputs*/}<br/>          &lt;Grid container spacing={1}&gt;<br/>              &lt;AppContext.Provider value={{ state, dispatch }}&gt;<br/>                  &lt;Input_one/&gt;<br/>                  &lt;Input_two/&gt;<br/>              &lt;/AppContext.Provider&gt;<br/>          &lt;/Grid&gt;<br/><br/>      &lt;/Container&gt;<br/>  );<br/>}<br/><br/><strong class="mk ir">export default </strong>App;</span></pre><p id="c80b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要修改我们的<em class="mv"> &lt;输入_一/ &gt; </em>和<em class="mv"> &lt;输入_二/ &gt; </em>组件。</p><p id="658f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于两个输入组件，所有接下来的更改将完全相同。首先我们需要从react导入<code class="fe mh mi mj mk b">useContext</code>。</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="209d" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useContext } <strong class="mk ir">from </strong>'react';</span></pre><p id="7acb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要从应用程序组件导入AppContext</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="cd5a" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>{ AppContext } <strong class="mk ir">from </strong>'../App'</span></pre><p id="e83a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了在组件中使用我们的状态值，我们需要添加</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="b32c" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">const </strong>{state, dispatch} = useContext(AppContext);</span></pre><p id="a017" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个add函数，它将使用<code class="fe mh mi mj mk b">dispatch.</code>更新状态<code class="fe mh mi mj mk b">inputText</code>值。每次我们在任何输入中键入内容时，都会调用这个函数。</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="6e3c" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">const </strong>changeInputValue = (newValue) =&gt; {<br/><br/>    dispatch({ type: 'UPDATE_INPUT', data: newValue,});<br/>};</span></pre><p id="190c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要将<em class="mv">值</em>设置为<em class="mv">状态，inputText </em>和<em class="mv"> onChange </em>事件应该调用函数<code class="fe mh mi mj mk b">changeInputValue</code>。</p><p id="a798" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在<code class="fe mh mi mj mk b">./src/components/Input_one.js</code>应该是这样的:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="f802" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useContext } <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{makeStyles} <strong class="mk ir">from </strong>"@material-ui/core/styles/index";<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>Paper <strong class="mk ir">from </strong>'@material-ui/core/Paper';<br/><strong class="mk ir">import </strong>InputBase <strong class="mk ir">from </strong>'@material-ui/core/InputBase';<br/><br/>//Material UI Icons<br/><strong class="mk ir">import </strong>IconButton <strong class="mk ir">from </strong>'@material-ui/core/IconButton';<br/><strong class="mk ir">import </strong>SearchIcon <strong class="mk ir">from </strong>'@material-ui/icons/Search';<br/><br/>// Import Context<br/><strong class="mk ir">import </strong>{ AppContext } <strong class="mk ir">from </strong>'../App'<br/><br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    root: {<br/>        padding: '2px 4px',<br/>        display: 'flex',<br/>        alignItems: 'center',<br/>        width: '100%',<br/>    },<br/>    input: {<br/>        marginLeft: '8px',<br/>        flex: 1,<br/>    },<br/>    iconButton: {<br/>        padding: 10,<br/>    }<br/>});<br/><br/><strong class="mk ir">export default function </strong>Input_one() {<br/><br/>    <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>    <strong class="mk ir">const </strong>{state, dispatch} = useContext(AppContext);<br/><br/>    <strong class="mk ir">const </strong>changeInputValue = (newValue) =&gt; {<br/><br/>        dispatch({ type: 'UPDATE_INPUT', data: newValue,});<br/>    };<br/><br/>    <strong class="mk ir">return</strong>(<br/>        &lt;React.Fragment&gt;<br/>            &lt;Grid item xs={12} md={6}&gt;<br/>                &lt;Paper className={classes.root}&gt;<br/>                    &lt;InputBase<br/>                        className={classes.input}<br/>                        placeholder="Input one"<br/>                        value={state.inputText}<br/>                        onChange={e =&gt; changeInputValue(e.target.value)}<br/>                    /&gt;<br/>                    &lt;IconButton className={classes.iconButton} aria-label="search"&gt;<br/>                        &lt;SearchIcon /&gt;<br/>                    &lt;/IconButton&gt;<br/>                &lt;/Paper&gt;<br/>            &lt;/Grid&gt;<br/>        &lt;/React.Fragment&gt;<br/>    )<br/>}</span></pre><p id="d9b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而<code class="fe mh mi mj mk b">./src/components/Input_two.js</code>应该长得像:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="dabf" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useContext } <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{makeStyles} <strong class="mk ir">from </strong>"@material-ui/core/styles/index";<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>Paper <strong class="mk ir">from </strong>'@material-ui/core/Paper';<br/><strong class="mk ir">import </strong>InputBase <strong class="mk ir">from </strong>'@material-ui/core/InputBase';<br/><br/>//Material UI Icons<br/><strong class="mk ir">import </strong>IconButton <strong class="mk ir">from </strong>'@material-ui/core/IconButton';<br/><strong class="mk ir">import </strong>SearchIcon <strong class="mk ir">from </strong>'@material-ui/icons/Search';<br/><br/><br/>//Import Context<br/><strong class="mk ir">import </strong>{ AppContext } <strong class="mk ir">from </strong>'../App'<br/><br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    root: {<br/>        padding: '2px 4px',<br/>        display: 'flex',<br/>        alignItems: 'center',<br/>        width: '100%',<br/>    },<br/>    input: {<br/>        marginLeft: '8px',<br/>        flex: 1,<br/>    },<br/>    iconButton: {<br/>        padding: 10,<br/>    }<br/>});<br/><br/><br/><strong class="mk ir">export default function </strong>Input_two() {<br/><br/>    <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>    <strong class="mk ir">const </strong>{state, dispatch} = useContext(AppContext);<br/><br/>    <strong class="mk ir">const </strong>changeInputValue = (newValue) =&gt; {<br/><br/>        dispatch({ type: 'UPDATE_INPUT', data: newValue,});<br/>    };<br/><br/>    <strong class="mk ir">return</strong>(<br/>        &lt;React.Fragment&gt;<br/>            &lt;Grid item xs={12} md={6}&gt;<br/>                &lt;Paper className={classes.root}&gt;<br/>                    &lt;InputBase<br/>                        className={classes.input}<br/>                        placeholder="Input two"<br/>                        value={state.inputText}<br/>                        onChange={e =&gt; changeInputValue(e.target.value)}<br/>                    /&gt;<br/>                    &lt;IconButton className={classes.iconButton} aria-label="search"&gt;<br/>                        &lt;SearchIcon /&gt;<br/>                    &lt;/IconButton&gt;<br/>                &lt;/Paper&gt;<br/>            &lt;/Grid&gt;<br/>        &lt;/React.Fragment&gt;<br/>    )<br/>}</span></pre><p id="755d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在任何输入字段中输入一些内容，您将看到两个输入都将被更新，并且包含相同的值。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/ca8850962c8216eb535eeacfaa6430a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NSJhj5E3dYW7tFu847ZQfg.gif"/></div></div></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="6b58" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">添加不变性助手</h1><p id="2f41" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">所以现在我们的应用程序按照我们预期的方式工作。但是让我们在<code class="fe mh mi mj mk b">./src/App.js</code>中更新我们的初始状态，再增加一个值并显示在页面上。所以现在我们的initialState对象应该是这样的:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="c898" class="mq lf iq mk b gy mr ms l mt mu">// Set up Initial State<br/><strong class="mk ir">const </strong>initialState = {<br/><br/>    inputText: '',<br/>    testText: 'Hello world'<br/><br/>};</span></pre><p id="5096" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们在页面上显示<code class="fe mh mi mj mk b">testText</code>。我们的<code class="fe mh mi mj mk b">./src/App.js</code>文件应该是这样的:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="b9a6" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useReducer } <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{ makeStyles } <strong class="mk ir">from </strong>'@material-ui/core/styles';<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Container <strong class="mk ir">from </strong>'@material-ui/core/Container';<br/><strong class="mk ir">import </strong>Typography <strong class="mk ir">from </strong>'@material-ui/core/Typography';<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>CssBaseline <strong class="mk ir">from </strong>'@material-ui/core/CssBaseline';<br/><strong class="mk ir">import </strong>Toolbar <strong class="mk ir">from </strong>'@material-ui/core/Toolbar';<br/><br/>//Import our Inputs<br/><strong class="mk ir">import </strong>Input_one <strong class="mk ir">from </strong>'./components/Input_one';<br/><strong class="mk ir">import </strong>Input_two <strong class="mk ir">from </strong>'./components/Input_two';<br/><br/>//Styles<br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    toolbarTitle: {<br/>        flex: 1,<br/>    },<br/>});<br/><br/>// Create context object<br/><strong class="mk ir">export const </strong>AppContext = React.createContext();<br/><br/>// Set up Initial State<br/><strong class="mk ir">const </strong>initialState = {<br/><br/>    inputText: '',<br/>    testText: 'Hello world'<br/><br/>};<br/><br/><strong class="mk ir">function </strong>reducer(state, action) {<br/>    <strong class="mk ir">switch </strong>(action.type) {<br/>        <strong class="mk ir">case </strong>'UPDATE_INPUT':<br/>            <strong class="mk ir">return </strong>{<br/>                inputText: action.data<br/>            };<br/><br/><br/>        <strong class="mk ir">default</strong>:<br/>            <strong class="mk ir">return </strong>initialState;<br/>    }<br/>}<br/><br/><strong class="mk ir">function </strong>App() {<br/><br/>  <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>  <strong class="mk ir">const </strong>[state, dispatch] = useReducer(reducer, initialState);<br/><br/>  <strong class="mk ir">return </strong>(<br/>      &lt;Container maxWidth="lg"&gt;<br/>          &lt;CssBaseline /&gt;<br/><br/>          {/*Title*/}<br/>          &lt;Toolbar&gt;<br/>              &lt;Typography<br/>                  component="h2"<br/>                  variant="h5"<br/>                  color="inherit"<br/>                  align="center"<br/>                  noWrap<br/>                  className={classes.toolbarTitle}<br/>              &gt;<br/>                  Pass data between react sibling components<br/>              &lt;/Typography&gt;<br/>          &lt;/Toolbar&gt;<br/><br/>          {/*Inputs*/}<br/>          &lt;Grid container spacing={1}&gt;<br/>              &lt;AppContext.Provider value={{ state, dispatch }}&gt;<br/>                  &lt;Input_one/&gt;<br/>                  &lt;Input_two/&gt;<br/>              &lt;/AppContext.Provider&gt;<br/>          &lt;/Grid&gt;<br/><br/>          {/*display testText value*/}<br/>          &lt;Toolbar&gt;<br/>              &lt;Typography<br/>                  component="h2"<br/>                  variant="h5"<br/>                  color="inherit"<br/>                  align="center"<br/>                  noWrap<br/>                  className={classes.toolbarTitle}<br/>              &gt;<br/>                  {state.testText}<br/>              &lt;/Typography&gt;<br/>          &lt;/Toolbar&gt;<br/>      &lt;/Container&gt;<br/>  );<br/>}<br/><br/><strong class="mk ir">export default </strong>App;</span></pre><p id="07fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果一切都是正确的，你现在应该看到我们输入的“Hello world”文本。开始在任何输入中输入一些东西。你可以看到发生了什么。我们的“Hello word”文本消失了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ng"><img src="../Images/21d74d687ad8780365204964829e589b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pAvCgf_BiOayIViN68GDkA.gif"/></div></div></figure><p id="f85f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这之所以发生，是因为现在每次你在任何输入中输入东西，你都用新的状态完全替换了我们的initialState对象。但是有一个解决方案可以解决这个问题。我们不需要每次都替换我们的initialState对象，只需要更新<code class="fe mh mi mj mk b">inputText</code>值，不接触任何其他状态。为了实现这一点，我们可以使用<a class="ae ml" href="https://github.com/kolodny/immutability-helper" rel="noopener ugc nofollow" target="_blank">不变性助手</a>库，这个库有很好的文档记录。通过在终端中键入命令来安装这个库</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="84d4" class="mq lf iq mk b gy mr ms l mt mu">npm install immutability-helper --save</span></pre><p id="328e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们只需要将这个库导入到我们的<code class="fe mh mi mj mk b">./src/App.js</code>文件中，并根据不变性助手文档更新<code class="fe mh mi mj mk b">reducer</code>函数。所以我们的<code class="fe mh mi mj mk b">./src/App.js</code>文件应该是这样的:</p><pre class="km kn ko kp gt mm mk mn mo aw mp bi"><span id="3c1e" class="mq lf iq mk b gy mr ms l mt mu"><strong class="mk ir">import </strong>React, { useReducer } <strong class="mk ir">from </strong>'react';<br/><strong class="mk ir">import </strong>{ makeStyles } <strong class="mk ir">from </strong>'@material-ui/core/styles';<br/><br/>//Import immutability-helper<br/><strong class="mk ir">import </strong>update <strong class="mk ir">from </strong>'immutability-helper';<br/><br/>//Material UI components<br/><strong class="mk ir">import </strong>Container <strong class="mk ir">from </strong>'@material-ui/core/Container';<br/><strong class="mk ir">import </strong>Typography <strong class="mk ir">from </strong>'@material-ui/core/Typography';<br/><strong class="mk ir">import </strong>Grid <strong class="mk ir">from </strong>'@material-ui/core/Grid';<br/><strong class="mk ir">import </strong>CssBaseline <strong class="mk ir">from </strong>'@material-ui/core/CssBaseline';<br/><strong class="mk ir">import </strong>Toolbar <strong class="mk ir">from </strong>'@material-ui/core/Toolbar';<br/><br/>//Import our Inputs<br/><strong class="mk ir">import </strong>Input_one <strong class="mk ir">from </strong>'./components/Input_one';<br/><strong class="mk ir">import </strong>Input_two <strong class="mk ir">from </strong>'./components/Input_two';<br/><br/>//Styles<br/><strong class="mk ir">const </strong>useStyles = makeStyles({<br/>    toolbarTitle: {<br/>        flex: 1,<br/>    },<br/>});<br/><br/>// Create context object<br/><strong class="mk ir">export const </strong>AppContext = React.createContext();<br/><br/>// Set up Initial State<br/><strong class="mk ir">const </strong>initialState = {<br/><br/>    inputText: '',<br/>    testText: 'Hello world'<br/><br/>};<br/><br/><strong class="mk ir">function </strong>reducer(state, action) {<br/>    <strong class="mk ir">switch </strong>(action.type) {<br/>        <strong class="mk ir">case </strong>'UPDATE_INPUT':<br/>            <strong class="mk ir">return </strong>update(state, { inputText: {$set: action.data}});<br/><br/><br/>        <strong class="mk ir">default</strong>:<br/>            <strong class="mk ir">return </strong>initialState;<br/>    }<br/>}<br/><br/><strong class="mk ir">function </strong>App() {<br/><br/>  <strong class="mk ir">const </strong>classes = useStyles();<br/><br/>  <strong class="mk ir">const </strong>[state, dispatch] = useReducer(reducer, initialState);<br/><br/>  <strong class="mk ir">return </strong>(<br/>      &lt;Container maxWidth="lg"&gt;<br/>          &lt;CssBaseline /&gt;<br/><br/>          {/*Title*/}<br/>          &lt;Toolbar&gt;<br/>              &lt;Typography<br/>                  component="h2"<br/>                  variant="h5"<br/>                  color="inherit"<br/>                  align="center"<br/>                  noWrap<br/>                  className={classes.toolbarTitle}<br/>              &gt;<br/>                  Pass data between react sibling components<br/>              &lt;/Typography&gt;<br/>          &lt;/Toolbar&gt;<br/><br/>          {/*Inputs*/}<br/>          &lt;Grid container spacing={1}&gt;<br/>              &lt;AppContext.Provider value={{ state, dispatch }}&gt;<br/>                  &lt;Input_one/&gt;<br/>                  &lt;Input_two/&gt;<br/>              &lt;/AppContext.Provider&gt;<br/>          &lt;/Grid&gt;<br/><br/>          {/*display testText value*/}<br/>          &lt;Toolbar&gt;<br/>              &lt;Typography<br/>                  component="h2"<br/>                  variant="h5"<br/>                  color="inherit"<br/>                  align="center"<br/>                  noWrap<br/>                  className={classes.toolbarTitle}<br/>              &gt;<br/>                  {state.testText}<br/>              &lt;/Typography&gt;<br/>          &lt;/Toolbar&gt;<br/>      &lt;/Container&gt;<br/>  );<br/>}<br/><br/><strong class="mk ir">export default </strong>App;</span></pre><p id="9f15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你做这些改变时，你的应用程序必须按预期工作。如果你在任何输入中输入一些东西，“Hello world”的标题应该还在页面上。现在我们只更新我们正在处理的值，而不是替换所有的对象。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/e87a04ad373d4f428480a316913e16b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ECWC0bprFI9ld4-RwcfqxQ.gif"/></div></div></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="90ba" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">摘要</h1><p id="3cf2" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">你可以在我的<a class="ae ml" href="https://github.com/bilousov94/sync_inputs" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>上找到这个应用程序的所有最终代码。如你所见，在React兄弟组件之间传递数据现在变得简单了。如果你熟悉Redux，你可能会看到很多熟悉的东西。Context Api允许我们共享数据，这些数据可以被认为是React组件树“全局”数据。这个解决方案对优化我们的React应用程序很有帮助，但是对于具有多个嵌套层次的更复杂的项目，我更喜欢使用<a class="ae ml" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>。如果你处理了我展示给你所有过程，那么你也会很容易理解Redux。</p><p id="5e58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这篇文章对你有很大帮助。我也很想知道其他有趣的方法。请在下面的评论中告诉我你的想法。</p><p id="c68d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🎉快乐编码🎉</p></div></div>    
</body>
</html>