<html>
<head>
<title>Creating simple application with GoJS, part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用GoJS创建简单的应用程序，第3部分</h1>
<blockquote>原文：<a href="https://itnext.io/creating-simple-application-with-gojs-part-3-9bfc8aa8813b?source=collection_archive---------3-----------------------#2018-06-18">https://itnext.io/creating-simple-application-with-gojs-part-3-9bfc8aa8813b?source=collection_archive---------3-----------------------#2018-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9b1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最近我解释了如何创建GoJS图，以及如何设置和样式化边。为了使图表具有充分的交互性，我们仍然需要提供插入元素的选项。为此，我们将创建一个内置于GoJS中的调色板。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f93562e0203939531fcebce2ef38917d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LzSv_Azryh3zRiEEwJrD7A.jpeg"/></div></div></figure><blockquote class="kx ky kz"><p id="ef4f" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated">与<a class="ae le" href="http://www.synergycodes.com" rel="noopener ugc nofollow" target="_blank"> Synergy Codes </a>合作撰写的帖子。</p></blockquote><p id="c8fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一次参加这个系列赛？检查以前的部分！</p><ul class=""><li id="8e6b" class="lf lg iq jp b jq jr ju jv jy lh kc li kg lj kk lk ll lm ln bi translated"><a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/creating-simple-application-with-gojs-part-1-e3c320765def">第一部分——制图基础知识</a></li><li id="b8dd" class="lf lg iq jp b jq lo ju lp jy lq kc lr kg ls kk lk ll lm ln bi translated"><a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/creating-simple-application-with-gojs-part-2-c33139e934ba">第二部分——设置节点边</a></li></ul><h1 id="9106" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">调色板</h1><p id="78f5" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">调色板是一个单独的画布，显示其中定义的所有节点，并允许您将它们转移到主图中。其配置方式与图表类似，但通过创建一个<strong class="jp ir"> go。调色板</strong>对象。然而，为了做到这一点，我们应该首先在包含调色板的HTML文件中添加一个额外的<strong class="jp ir"> div </strong>。我们还可以在JS文件中添加一个函数来初始化调色板，我们也可以在外部使用这个函数(<strong class="jp ir"> initPalette </strong>)。在我们的例子中，我们将把面板放在图的旁边。下面是我们编辑HTML文件的方式:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">清单1。将调色板添加到HTML文件中</figcaption></figure><p id="83c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是完成我们创建的initPalette函数。正如我前面提到的，面板的初始化与图表的初始化没有太大的不同。在这里，我们将第二次使用getTemplates()函数—当我们这样做时，我们不必再次定义形状的外观，只需为调色板定义即可。然而，应该强调的是，我们还可以为形状创建其他外观——当移动到图中时，重要的是元素的类别，而不是它的外观。此外，为了能够从面板传输到图表，我们需要将allowDrop字段添加到图表初始化中，并将其值设置为true。代码应该是这样的:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">清单2。调色板的初始化</figcaption></figure><p id="3e18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在这个应用程序看起来是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c2783868f4627a6d4984ffeca283ed16.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*atuBeOYTUgljSWTuUy2N-g.png"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">图一。添加了调色板的图表</figcaption></figure><h1 id="8338" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">最后的润色—添加网格</h1><p id="dd67" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">最后，为了改善应用程序的外观，让我们再添加两件事情:元素将被捕捉到的网格，以及它们的自动定位。</p><p id="871d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从网格开始。你会在<strong class="jp ir"> diagram.grid </strong>下找到它，我们唯一要做的就是把它的visible属性改成<strong class="jp ir"> true </strong>。为了添加拖动，必须在<strong class="jp ir">diagram . tool manager . dragging tool</strong>下的内置拖动工具中进行配置。我们可以在这里使用两个属性:<strong class="jp ir">isgridsnapanenabled</strong>来启用拖动，以及<strong class="jp ir"> gridSnapCellSize </strong>来定义网格的大小(对于我们的示例，让我们定义一个50x50的大小)。如果我们使用节点大小修改(resizingTool)，我们也将在其中设置类似的字段。下面是负责设置网格的代码:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">清单3。在图表上设置网格</figcaption></figure><h1 id="838f" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">最后一点——节点定位</h1><p id="ac55" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">定位元素最简单的方法是改变图表的布局。默认布局没有定义元素的任何自动排列，它只是排列它们，使它们彼此不重叠。然而，这是由其他布局提供的:<strong class="jp ir"> GridLayout </strong>(放置在网格上)<strong class="jp ir"> TreeLayout </strong>(树)<strong class="jp ir"> ForceDirectedLayout </strong>(将元素相互推开的图形)<strong class="jp ir"> LayeredDigraphLayout </strong>(以列和行排列的图形)和<strong class="jp ir"> CircularLayout </strong>(圆形上节点的排列)。</p><p id="ee92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在图的初始化过程中，我们将布局设置为另一个字段——我们将所选布局的新实例及其可能的配置传递给这个布局。这里有一个我们如何为<strong class="jp ir"> LayeredDigraphLayout </strong>实现它的例子:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">清单4。为图表设置分层有向图布局</figcaption></figure><p id="b1e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">效果如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/795722ebfa5b29cd0cdeed46fbc63120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWFa-wdNKQ-h_0t6kCgzbQ.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">图二。启用网格并设置图层的图表</figcaption></figure><p id="6b1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您也可以查看其他可用的布局，但是您需要记住它们的局限性。例如，<strong class="jp ir"> TreeLayout </strong>将无法处理两条边通向一个节点的情况。</p><p id="3919" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">整个教程的结果你可以在<a class="ae le" href="https://github.com/tswistak/diagram-example-gojs" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>或者Codepen上查看:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ne mx l"/></div></figure><h1 id="87d7" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">摘要</h1><p id="c713" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">正如您在阅读本文时肯定已经理解的那样，我们已经开发了一个高级应用程序，只使用了GoJS库的功能，没有额外的黑客攻击。总共有大约120行JavaScript代码，这清楚地表明我们没有做任何困难的事情。GoJS让我们节省了大量时间，否则我们会花在创建调色板、处理画布上的元素或其他重要的事情上，比如自动定位元素。这个库还提供了其他的优势，比如透明的文档，大量现成的例子，以及来自制作者的非常好的支持。TypeScript用户也会感到满意，因为可以获得官方的类型，以及用TypeScript编写的库的免费扩展。</p><p id="d554" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管我们很想在这一系列文章中展示该库的所有功能，但这是不可能的。我强烈建议你浏览一下开发者网站上的例子。</p><p id="f1b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">帖子也发表在<a class="ae le" href="http://www.synergycodes.com/blog/" rel="noopener ugc nofollow" target="_blank">协同代码的博客</a>上，你可以在这里查看<a class="ae le" href="http://www.synergycodes.com/blog/simple-gojs-application-finishing-touches" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3bcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你想了解更多关于GoJS的知识吗？你可以在这里下载免费的电子书！</p></div></div>    
</body>
</html>