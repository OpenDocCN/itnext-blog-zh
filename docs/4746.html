<html>
<head>
<title>How to Delete Local and Remote Git Branches</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何删除本地和远程Git分支</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-delete-local-and-remote-git-branches-b8ad8baaded6?source=collection_archive---------7-----------------------#2020-09-05">https://itnext.io/how-to-delete-local-and-remote-git-branches-b8ad8baaded6?source=collection_archive---------7-----------------------#2020-09-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/cd6493ee6e443dca6b8f43d7da2a1e1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUr1wZoKIgJVafSTDZQxjQ.png"/></div></div></figure><p id="6ac6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您以前曾经使用Git对Angular代码进行版本控制，那么您很有可能遇到过想要删除一个远程分支或多个分支的情况。这对于开发人员来说是很常见的，尤其是在大型项目中，所以我想写一篇文章来探讨这个主题。</p><p id="9b5d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我们将了解:</p><ul class=""><li id="4e39" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">如何删除Git存储库中的本地分支</li><li id="eb82" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何在Git中删除远程分支</li><li id="b080" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何删除所有已经合并的Git分支</li><li id="bc71" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何删除所有本地分支，而不是远程分支</li><li id="8fb5" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何删除除master之外的所有本地Git分支</li></ul><p id="1d4e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在讨论如何删除远程分支之前，我们首先来看看如何删除本地Git存储库中的分支。</p><blockquote class="ln lo lp"><p id="c019" class="kb kc lq kd b ke kf kg kh ki kj kk kl lr kn ko kp ls kr ks kt lt kv kw kx ky im bi translated"><strong class="kd iu"> <em class="it">注:</em> </strong> <em class="it">版本控制系统是现代web开发中不可或缺的工具，可以帮助你解决与众多任务相关的诸多问题。Git是当今最流行的版本控制系统之一。</em></p></blockquote><p id="ef52" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们继续学习如何<a class="ae lu" href="https://www.techiediaries.com/delete-local-remote-git-branches/" rel="noopener ugc nofollow" target="_blank">在Git </a>中删除本地和远程分支之前，让我们定义一下什么是Git分支以及删除分支的副作用。Git中的分支是指向提交的指针。如果删除一个分支，它会删除指向提交的指针。这意味着，如果您删除了一个尚未合并的分支，并且任何其他分支或标记都无法访问这些提交，Git垃圾收集将最终删除这些无法访问的提交。</p><h1 id="5c83" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">删除本地分支</h1><p id="b3c0" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">让我们从学习如何删除本地分支开始。</p><ol class=""><li id="8f00" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky my lf lg lh bi translated">首先，使用<code class="fe mz na nb nc b">git branch -a</code>命令显示所有分支(本地和远程)。</li><li id="d10b" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky my lf lg lh bi translated">接下来，您可以删除本地分支，使用<code class="fe mz na nb nc b">git branch -d</code>命令，后跟您想要删除的分支的名称。</li></ol><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="e830" class="nl lw it nc b gy nm nn l no np">$ git branch -a # *master # b1 # remote/origin/master # remote/origin/b1 <br/>$ git branch -d b1 # Deleted branch b1.</span></pre><blockquote class="ln lo lp"><p id="fdaf" class="kb kc lq kd b ke kf kg kh ki kj kk kl lr kn ko kp ls kr ks kt lt kv kw kx ky im bi translated"><strong class="kd iu"> <em class="it">注:</em> </strong> <em class="it">你也可以用</em> <code class="fe mz na nb nc b"><em class="it">-D</em></code> <em class="it">旗来代替</em> <code class="fe mz na nb nc b"><em class="it">--delete --force</em></code> <em class="it">命令</em> <code class="fe mz na nb nc b"><em class="it">-d</em></code> <em class="it">。这将使您能够删除本地分支，而不管其合并状态如何。</em></p></blockquote><h1 id="9535" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">删除远程分支</h1><p id="04d8" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">与本地分支不同，您不能使用<code class="fe mz na nb nc b">git branch</code>命令删除远程分支。但是，您需要使用<code class="fe mz na nb nc b">git push --delete</code>命令，后跟您想要删除的分支的名称。您还需要在<code class="fe mz na nb nc b">git push</code>后面指定<code class="fe mz na nb nc b">remote</code>名称(在本例中为<code class="fe mz na nb nc b">origin</code>)。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="2f38" class="nl lw it nc b gy nm nn l no np">$ git branch -a# *master<br/># b1<br/># remote/origin/master<br/># remote/origin/b1$ git push origin --delete b1<br/># [...]<br/># - [deleted] b1</span></pre><h1 id="9e8c" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">如何删除所有未合并的Git分支？</h1><p id="f65b" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">现在我们已经看到了如何删除Git存储库中的本地和远程分支，让我们假设您有多个Git分支。如何删除已经合并的分支？理想情况下，您可以一次完成所有这些操作，而不是一个分支一个分支地删除它们。</p><blockquote class="ln lo lp"><p id="f4df" class="kb kc lq kd b ke kf kg kh ki kj kk kl lr kn ko kp ls kr ks kt lt kv kw kx ky im bi translated"><strong class="kd iu"> <em class="it">注意</em> </strong> <em class="it">:合并是使用</em> <code class="fe mz na nb nc b"><em class="it">git merge</em></code> <em class="it">命令执行的，它简单地表示集成来自另一个分支的变更。</em></p></blockquote><p id="edef" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，您需要使用以下命令获取远程存储库中合并的所有分支:</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="1ea6" class="nl lw it nc b gy nm nn l no np">$ git branch --merged</span></pre><p id="2533" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您有一个合并的分支，您可以使用以下命令简单地删除合并的本地分支:</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="0db4" class="nl lw it nc b gy nm nn l no np">$ git branch -d branch-name</span></pre><p id="fbc5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您想从远程存储库中删除它，请使用以下命令:</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="53c8" class="nl lw it nc b gy nm nn l no np">$ git push --delete origin branch-name</span></pre><h1 id="31f6" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">删除所有本地分支，而不是远程分支</h1><p id="c592" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">您可以使用以下bash命令删除不在远程存储库上的所有本地分支:</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="5b3a" class="nl lw it nc b gy nm nn l no np">$ git branch -r | egrep -v -f /dev/fd/0  &lt;(git branch -vv | grep origin) | xargs git branch -d</span></pre><p id="fb08" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们来分解这个命令:</p><ol class=""><li id="0c9e" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky my lf lg lh bi translated">首先，我们使用<code class="fe mz na nb nc b">git branch -r</code>命令获取所有远程分支</li><li id="05af" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky my lf lg lh bi translated">接下来，我们使用<code class="fe mz na nb nc b">egrep -v -f /dev/fd/0 &lt;(git branch -vv | grep origin)</code>命令获取不在远程的本地分支，</li><li id="4bba" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky my lf lg lh bi translated">最后，我们使用<code class="fe mz na nb nc b">xargs git branch -d</code>命令删除分支。</li></ol><blockquote class="ln lo lp"><p id="bb16" class="kb kc lq kd b ke kf kg kh ki kj kk kl lr kn ko kp ls kr ks kt lt kv kw kx ky im bi translated"><a class="ae lu" href="https://en.wikipedia.org/wiki/Grep" rel="noopener ugc nofollow" target="_blank"> <em class="it"> grep </em> </a> <em class="it">是一个命令行实用程序，用于在纯文本数据集中搜索匹配正则表达式的行。它的名字来源于ed命令g/re/p(全局搜索一个正则表达式并打印匹配行)，效果相同。grep最初是为Unix操作系统开发的，但后来可用于所有类似Unix的系统和其他一些系统，如OS-9。</em></p><p id="c313" class="kb kc lq kd b ke kf kg kh ki kj kk kl lr kn ko kp ls kr ks kt lt kv kw kx ky im bi translated"><a class="ae lu" href="https://en.wikipedia.org/wiki/Xargs" rel="noopener ugc nofollow" target="_blank"> <em class="it"> xargs </em> </a> <em class="it">(“扩展参数”的缩写)是Unix和大多数类Unix操作系统上的一个命令，用于从标准输入构建和执行命令。它将标准输入转换成命令的参数。</em></p></blockquote><h1 id="46c5" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">删除除Master之外的所有本地Git分支</h1><p id="e03e" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">如果您已经完成了本地Git分支，那么移除它们以释放空间通常是一个好的做法。您可以简单地运行以下命令:</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="5831" class="nl lw it nc b gy nm nn l no np">$ git branch | grep -v "master" | xargs git branch -D</span></pre><p id="f188" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们使用<code class="fe mz na nb nc b">grep -v "master"</code>命令搜索分支(不包括主分支)，然后使用<code class="fe mz na nb nc b">git branch -D</code>命令删除它们。</p><h1 id="91da" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">结论</h1><p id="daaa" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">在本文中，我们看到了如何从Git存储库中删除远程和本地分支。我们了解到:</p><ul class=""><li id="0e01" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">如何删除Git存储库中的本地分支</li><li id="ad72" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何在Git中删除远程分支</li><li id="755f" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何删除所有已经合并的Git分支</li><li id="8f3a" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何删除所有本地分支，而不是远程分支</li><li id="ab30" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">如何删除除master之外的所有本地Git分支</li></ul><p id="f586" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">感谢您阅读我的文章，希望对您有所帮助。这篇文章最初发表在<a class="ae lu" href="https://www.techiediaries.com" rel="noopener ugc nofollow" target="_blank">技术刊物</a>上。</p></div></div>    
</body>
</html>