<html>
<head>
<title>Useful APIs that you probably don’t notice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能没有注意到的有用的API</h1>
<blockquote>原文：<a href="https://itnext.io/useful-apis-that-you-probably-dont-notice-a5c62c9366e9?source=collection_archive---------2-----------------------#2018-03-16">https://itnext.io/useful-apis-that-you-probably-dont-notice-a5c62c9366e9?source=collection_archive---------2-----------------------#2018-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3058740061a2d6b5576e49a1998aa761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7nb-owwLC4MMYZTlyFZ7w.png"/></div></div></figure><h1 id="ffc2" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">日期</h1><h1 id="da11" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">获取一个月中的天数</h1><p id="5d2d" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">下月0日是当月的最后一天。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="e8f5" class="md jz iq lz b gy me mf l mg mh">function daysInMonth(year, month) {<br/>    let date = new Date(year, month + 1, 0);<br/>    return date.getDate();<br/>}</span><span id="d961" class="md jz iq lz b gy mi mf l mg mh">/**<br/> * Note that JS Date month starts with 0<br/> * The following computes how many days in March 2017<br/> */<br/>console.log(daysInMonth(2017, 2)); // 31 <br/>// how many days in Feb 2017<br/>console.log(daysInMonth(2017, 1)); // 28<br/>// how many days in Feb 2016<br/>console.log(daysInMonth(2016, 1)); // 29</span></pre><h1 id="16a6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset" rel="noopener ugc nofollow" target="_blank"> getTimezoneOffset </a> —获取当前区域设置(主机系统设置)与UTC之间的时差，以分钟为单位。</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="21b3" class="md jz iq lz b gy me mf l mg mh">let now = new Date(); <br/>console.log(now.toISOString()); //2018-03-12T01:12:29.566Z<br/>// China is UTC+08:00<br/>console.log(now.getTimezoneOffset()); // -480<br/>// convert to UTC <br/>let UTCDate = new Date(now.getTime() + now.getTimezoneOffset() * 60 * 1000);<br/>console.log(UTCDate.toISOString()); //2018-03-11T17:12:29.566Z<br/>//convert to UTC+03:00<br/>let eastZone3Date = new Date(UTCDate.getTime() + 3 * 60 * 60 * 1000);<br/>console.log(eastZone3Date.toISOString()); //2018-03-11T20:12:29.566Z</span></pre><h1 id="b1af" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">JSON</h1><h1 id="2355" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" rel="noopener ugc nofollow" target="_blank"> JSON.stringify(值[，替换者[，空间]]) </a></h1><h1 id="f2d6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">当replacer是函数时—在字符串化值之前应用replacer。</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="4b15" class="md jz iq lz b gy me mf l mg mh">JSON.stringify({<br/>    a: 4,<br/>    b: [3, 5, 'hello'],<br/>}, (key, val) =&gt; {<br/>    if(typeof val === 'number') {<br/>        return val * 2;<br/>    }<br/>    return val;<br/>}); //{"a":8,"b":[6,10,"hello"]}</span></pre><h1 id="c4cb" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">当replacer是数组时—使用replacer作为白名单来过滤关键字</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="baf0" class="md jz iq lz b gy me mf l mg mh">JSON.stringify({<br/>    a: 4,<br/>    b: {<br/>        a: 5,<br/>        d: 6<br/>    },<br/>    c: 8<br/>}, ['a', 'b']); //{"a":4,"b":{"a":5}}</span></pre><h1 id="e6b4" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">空间可以用来美化输出</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="187c" class="md jz iq lz b gy me mf l mg mh">JSON.stringify({<br/>    a: [3,4,5],<br/>    b: 'hello'<br/>}, null, '|--\t');<br/>/**结果:<br/>{<br/>|--    "a": [<br/>|--    |--    3,<br/>|--    |--    4,<br/>|--    |--    5<br/>|--    ],<br/>|--    "b": "hello"<br/>}<br/>*/</span></pre><h1 id="2e98" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">线</h1><h1 id="bc2d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split" rel="noopener ugc nofollow" target="_blank">string . prototype . split([分隔符[，限制]) </a></h1><p id="b7b6" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi">###</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="974a" class="md jz iq lz b gy me mf l mg mh">''.split('') // []</span></pre><h1 id="9447" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">分隔符可以是正则表达式！</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="c228" class="md jz iq lz b gy me mf l mg mh">'abc1def2ghi'.split(/\d/);  //["abc", "def", "ghi"]</span></pre><p id="e077" class="pw-post-body-paragraph kw kx iq ky b kz mk lb lc ld ml lf lg lh mm lj lk ll mn ln lo lp mo lr ls lt ij bi translated">如果分隔符是包含捕获组的正则表达式，则捕获组也会出现在结果中。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="7ca6" class="md jz iq lz b gy me mf l mg mh">'abc1def2ghi'.split(/(\d)/);  // ["abc", "1", "def", "2", "ghi"]</span></pre><h1 id="6888" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank">标记字符串文字</a></h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="6f27" class="md jz iq lz b gy me mf l mg mh">let person = 'Mike';<br/>let age = 28;</span><span id="8e66" class="md jz iq lz b gy mi mf l mg mh">function myTag(strings, personExp, ageExp) {<br/>  let str0 = strings[0]; // "that "<br/>  let str1 = strings[1]; // " is a "</span><span id="d21d" class="md jz iq lz b gy mi mf l mg mh">  // There is technically a string after<br/>  // the final expression (in our example),<br/>  // but it is empty (""), so disregard.<br/>  // var str2 = strings[2];</span><span id="64ed" class="md jz iq lz b gy mi mf l mg mh">  let ageStr;<br/>  if (ageExp &gt; 99){<br/>    ageStr = 'centenarian';<br/>  } else {<br/>    ageStr = 'youngster';<br/>  }</span><span id="23b5" class="md jz iq lz b gy mi mf l mg mh">  return str0 + personExp + str1 + ageStr;<br/>}</span><span id="0862" class="md jz iq lz b gy mi mf l mg mh">let output = myTag`that ${ person } is a ${ age }`;<br/>console.log(output);<br/>// that Mike is a youngster</span></pre><h1 id="aa41" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">空vs未定义</h1><p id="0567" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果不想区分null和undefined，可以用<em class="mp"> == </em></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="a2ea" class="md jz iq lz b gy me mf l mg mh">undefined == undefined //true<br/>null == undefined // true<br/>0 == undefined // false<br/>'' == undefined // false<br/>false == undefined // false</span></pre><p id="c91d" class="pw-post-body-paragraph kw kx iq ky b kz mk lb lc ld ml lf lg lh mm lj lk ll mn ln lo lp mo lr ls lt ij bi translated">不要简单地使用<em class="mp"> == </em>来检查全局变量的存在，因为它会抛出<em class="mp"> ReferenceError </em>。使用<em class="mp">类型的</em>代替。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="3c56" class="md jz iq lz b gy me mf l mg mh">// a is not defiend under global scope<br/>a == null // ReferenceError<br/>typeof a // 'undefined'</span></pre><h1 id="40e7" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">扩展运算符(…)</h1><p id="4911" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">spread运算符适用于对象！</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="91ee" class="md jz iq lz b gy me mf l mg mh">const point2D = {x: 1, y: 2};<br/>const point3D = {...point2D, z: 3};</span><span id="b9f8" class="md jz iq lz b gy mi mf l mg mh">let obj = {a: 'b', c: 'd', e: 'f'};<br/>let {a, ...other} = obj;<br/>console.log(a); //b<br/>console.log(other); //{c: "d", e: "f"}</span></pre><h1 id="a7c8" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">参考</h1><ul class=""><li id="8f94" class="mq mr iq ky b kz la ld le lh ms ll mt lp mu lt mv mw mx my bi translated"><a class="ae mj" href="https://www.amazon.com/Speaking-JavaScript-Depth-Guide-Programmers/dp/1449365035/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1521248539&amp;sr=1-1&amp;keywords=speaking+JavaScript" rel="noopener ugc nofollow" target="_blank">说Javascript </a></li><li id="e601" class="mq mr iq ky b kz mz ld na lh nb ll nc lp nd lt mv mw mx my bi translated"><a class="ae mj" href="https://developer.mozilla.org/en-US/" rel="noopener ugc nofollow" target="_blank"> MDN </a></li></ul><h1 id="d772" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">通知；注意</h1><ul class=""><li id="3fa1" class="mq mr iq ky b kz la ld le lh ms ll mt lp mu lt mv mw mx my bi translated">如果你想了解最新的新闻/文章，请点击<a class="ae mj" href="https://github.com/n0ruSh/the-art-of-reading" rel="noopener ugc nofollow" target="_blank">【观察】</a>订阅。</li></ul></div></div>    
</body>
</html>