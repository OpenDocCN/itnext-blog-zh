<html>
<head>
<title>Kubernetes Secrets in Plain Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纯文本的Kubernetes秘密</h1>
<blockquote>原文：<a href="https://itnext.io/secrets-in-plain-text-13a98f54ef97?source=collection_archive---------1-----------------------#2018-05-11">https://itnext.io/secrets-in-plain-text-13a98f54ef97?source=collection_archive---------1-----------------------#2018-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/741073f72c13fe8f3a51684ec460be98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MDkFtY3tC-YB0YZubahexA.png"/></div></div></figure><p id="2b31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我写了一个简单的方法来解码Kubernetes的秘密，叫做“Kubernetes Secret Decode ”,它位于github 上的<a class="ae kw" href="https://github.com/ashleyschuett/kubernetes-secret-decode" rel="noopener ugc nofollow" target="_blank">。当尝试调试应用程序时，准确地找出哪里出了问题，以及为什么事情没有按预期运行是非常耗时的。我想快速排除的一个难题是，找出我在pod中引用的秘密值是否是我期望的值。使用<code class="fe kx ky kz la b">kubectl</code>实现这一点的一种方法是编写一个go模板，并通过像这样选择每个值来对其进行base64解码<code class="fe kx ky kz la b">kubectl get secrets my-secret -o 'go-template={{index .data "username"}} | base64 -D-</code>。另一种选择是用<code class="fe kx ky kz la b">-o yaml</code>输出整个秘密，然后获取每个值，再一次单独地进行base64解码。但是对我来说，这两种选择都比我所希望的稍微耗费时间和负担。</a></p><p id="7383" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了解决这个问题，我写了一个小工具，你可以通过管道传输一个秘密，它会以纯文本的形式显示整个秘密和数据。你不必学习任何新的命令语法或者离开<code class="fe kx ky kz la b">kubectl</code>接口。你可以简单地运行<code class="fe kx ky kz la b">kubectl get secret my-secret -o yaml | ksd</code>。</p><p id="2b0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在使用上面的命令，你会看到这个</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="a349" class="lj lk iq la b gy ll lm l ln lo">$ kubectl get secret my-secret -o yaml | ksd<br/>apiVersion: v1<br/>data:<br/>  password: password<br/>  username: username<br/>kind: Secret<br/>metadata:<br/>  creationTimestamp: “2018–05–09T21:01:37Z”<br/>  name: my-secret<br/>  namespace: default<br/>  resourceVersion: “20229”<br/>  selfLink: /api/v1/namespaces/default/secrets/my-secret<br/>  uid: 29ef8024–53cc-11e8–967d-080027cd91ae<br/>type: Opaque</span></pre><p id="21aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在查看完我所期望的数据后，我可以继续检查其他可能损坏的数据。希望这也能让别人的一天过得更好。在此随意制作PRs或问题<a class="ae kw" href="https://github.com/ashleyschuett/kubernetes-secret-decode" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>