<html>
<head>
<title>Angular Animations — Stagger Over Static and Async Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度动画-在静态和异步数据上交错</h1>
<blockquote>原文：<a href="https://itnext.io/angular-animations-stagger-over-static-and-async-data-3907c4889479?source=collection_archive---------0-----------------------#2018-02-09">https://itnext.io/angular-animations-stagger-over-static-and-async-data-3907c4889479?source=collection_archive---------0-----------------------#2018-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a01a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><a class="ae kf" href="https://philgetz.github.io/try-angular-animations/#/stagger" rel="noopener ugc nofollow" target="_blank">检查动作中的错开</a></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/69fff0a295968732202a8de43733edb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XV5s03NV8ZVGKkKwiVktfQ.gif"/></div></div></figure><p id="3f65" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><a class="ae kf" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fangular-animations-stagger-over-static-and-async-data-3907c4889479" rel="noopener ugc nofollow" target="_blank"> <em class="lo">点击这里在LinkedIn </em> </a>上分享这篇文章</p><p id="c0af" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">交错动画在表达数据和用户界面的状态方面非常棒，尤其是在列表和网格上。它很容易实现，可以用于静态和异步数据。我将介绍如何设置一个规则的交错动画，然后使用有角度的内置异步管道让它与observables一起工作。</p><h2 id="913f" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">交错的状态和使用</h2><p id="bc55" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">交错是角度动画的一个实验性特征。当有多个迭代项时，如列表或网格等，它提供了延迟动画的能力。当数据传入应用程序时，它创建了一个良好的用户交互，并且当前正在发展，因此本教程可能会随着时间的推移而改变。</p><h1 id="8686" class="mn lq iq bd lr mo mp mq lu mr ms mt lx jw mu jx ma jz mv ka md kc mw kd mg mx bi translated">角度动画的基础</h1><p id="9701" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">包括交错在内的角度动画在组件装饰器中配置(或在一个单独的文件中配置，以具有可重复使用的动画)，并在组件模板上与“@”符号一起使用。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="6f8c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">对于stagger，大约有3个部分可以让它运行起来(可能更多，这取决于具体情况)。</p><ol class=""><li id="9f6a" class="na nb iq ku b kv kw ky kz lb nc lf nd lj ne ln nf ng nh ni bi translated">在组件装饰器中声明动画</li><li id="446b" class="na nb iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">将带有“@”的动画添加到组件模板的父元素中</li><li id="c16d" class="na nb iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">使用给定的数据集制作动画</li></ol><h1 id="8539" class="mn lq iq bd lr mo mp mq lu mr ms mt lx jw mu jx ma jz mv ka md kc mw kd mg mx bi translated">我们走吧</h1><h2 id="9d72" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">首先，不要忘记进口</h2><p id="5bb1" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">这些是你将需要的进口货。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">角度动画为交错动画导入</figcaption></figure><h2 id="0f3c" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">设置动画</h2><p id="c032" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">这个动画从上到下以15px淡入淡出。查看一个工作演示。出于本教程的目的，我不会深入这个动画的各个方面。如果你想知道更多关于正在发生的事情，我会在另一篇博客上发表。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="ff13" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">动画被输入到<a class="ae kf" href="https://angular.io/api/core/Component" rel="noopener ugc nofollow" target="_blank">组件装饰器</a>中，并且可以在任何地方，只要它在装饰器的边界内。</p><h2 id="caad" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">在模板上设置动画</h2><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="2692" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">交错动画应用于呈现数据的父元素。</p><p id="632d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们在动画声明(@ symbol)上绑定一个参数，让它知道有多少元素要应用动画。</p><h2 id="8b3a" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">需要考虑的事项</h2><p id="dfe3" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">根据数据传递到模板的方式，可能会有不同的实现。在这种情况下，假设这要么是静态数据，要么是从生命周期钩子(如NgOnInit)内的组件类订阅的数据。</p><p id="0753" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你只需要错开动画工作在刚刚描述的方法，那么就是这样！如果你已经按照教程到了这一步，你应该可以开始了。</p><h1 id="581a" class="mn lq iq bd lr mo mp mq lu mr ms mt lx jw mu jx ma jz mv ka md kc mw kd mg mx bi translated">与异步管道交错</h1><p id="aa08" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">在本节的范围内，我假设您对数据绑定和RxJS有所了解，因为我们使用的是异步管道。</p><p id="0bf4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你对stagger很着迷，并且想使用淘气的异步管道，你也可以这样做！</p><h2 id="c514" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">一个小细节</h2><p id="b5d4" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">我们在使用异步管道时面临的一个问题是传递“item.length”参数。在下面的代码片段中，我们需要传递这个参数，但是它是未定义的，因为“items”是通过下面的异步管道订阅的。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="8dca" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">不要担心！这里有一些方法可以防止未定义的错误，但仍然使用异步管道。</p><h2 id="543e" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">异步管道和数据绑定</h2><p id="998f" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">第一个解决方案是利用RxJS操作符，比如map。</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="0961" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在RxJS操作符中，我们将数据的长度赋给一个变量。然后，我们继续将这个变量绑定到模板上的动画属性。</p><h2 id="b216" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">异步管道和天然气容器</h2><p id="432d" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">更好的方法是在ng-container上使用异步管道订阅一个可观察对象，然后向下传递数据。</p><p id="3f72" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Ng-container是Angular中的一个结构指令，它不在DOM树中呈现。换句话说，它允许我们操作模板而不留下任何痕迹。如果你以前没有看过<a class="ae kf" href="https://angular.io/guide/structural-directives#ngcontainer" rel="noopener ugc nofollow" target="_blank"> ng-container </a>，看看<a class="ae kf" href="https://angular.io/guide/structural-directives#ngcontainer" rel="noopener ugc nofollow" target="_blank"> Angular docs </a>吧，因为它比以前更好地记录了。</p><p id="e961" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这就是我们的ng-container代码的样子:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="62f0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">通过这种方法，我们可以直接在模板上绑定“item.length”属性，而不需要在组件上创建额外的变量。由于ng-container，我们可以生活在异步管道订阅中，因此我们的值不会不确定。</p><p id="c904" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">从组件的角度来看，现在简单多了，因为我们现在需要的只是一个可观察的返回，仅此而已。</p><p id="3756" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这种方法的另一个好处是我们可以减少异步管道的使用。建议这样做，以避免每次在模板中声明异步管道时重新订阅。</p><h1 id="a6a4" class="mn lq iq bd lr mo mp mq lu mr ms mt lx jw mu jx ma jz mv ka md kc mw kd mg mx bi translated">结论</h1><p id="cff5" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">交错动画对任何用户界面来说都是不错的选择，如果做得好，肯定会受到任何用户的欢迎。我希望本教程有助于说明如何使用静态和异步数据来利用交错动画。</p><p id="664b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你走到这一步，我想感谢你！我相信你会用你的动画和用户界面为用户提供更好的网络体验。</p><h2 id="c377" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">寻找投稿人！我正在开始一个基于角度动画及其使用的<a class="ae kf" href="https://philgetz.github.io/try-angular-animations/#/" rel="noopener ugc nofollow" target="_blank">项目。无论是通过想法、设计、开发、迷因、笑话，我想和你合作，让它变得很棒。</a></h2></div></div>    
</body>
</html>