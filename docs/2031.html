<html>
<head>
<title>I can serverless, and you can too!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我可以不用服务器，你也可以！</h1>
<blockquote>原文：<a href="https://itnext.io/i-can-serverless-and-you-can-too-f68a8f227461?source=collection_archive---------2-----------------------#2019-03-19">https://itnext.io/i-can-serverless-and-you-can-too-f68a8f227461?source=collection_archive---------2-----------------------#2019-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e9a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">了解如何使用无服务器方法为动物园构建复杂的移动应用程序。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/3b8a10d53e08b653be5e06093e110b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*brEVgfqBfzlybJ5snyoFdg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图文鸣谢:<a class="ae lf" href="https://www.freepik.com/free-vector/zoo-petting-zoo-cartoon-design-open-zoo-wild-animals-visitors_2238486.htm" rel="noopener ugc nofollow" target="_blank">https://www . freepik . com/free-vector/zoo-petting-zoo-cartoon-design-open-zoo-wild-animals-visitors _ 2238486 . htm</a>。</figcaption></figure><p id="37e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">走向无服务器的最大障碍之一是克服使用别人的服务来创建你的架构的心理障碍。如果你来自传统的软件开发，并能进行一些实践，这并不总是自然的。但是不要担心——<em class="ko">如果我可以不用服务器，你也可以</em>——我会告诉你怎么做。</p><p id="c011" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">AWS拥有几乎所有的服务，所以让我们看看如何在构建复杂的移动应用程序时很好地利用这些服务。<strong class="js iu">前面没有代码</strong>——这纯粹是为那些对无服务器设计感到紧张的人做的架构练习！</p><p id="1d92" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不要担心——有无数种方法可以构建相同的应用程序，所以如果你有其他想法，请在评论中告诉我。</p><h2 id="f549" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">欢迎来到动物园</h2><p id="2009" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我们的客户有一个动物园。它每天有25，000名游客，在特殊活动和假日期间多达50，000人。该动物园有100个独立的展览。</p><p id="6e85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">他们需要为访问者创建一个移动应用程序，以提高参与度和重复访问。他们预计大约50%的游客会使用该应用程序，因为他们将为应用程序用户推广打折机票。</p><p id="41f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我会见了动物园的主人，这是他们告诉我的:</p><ul class=""><li id="4bac" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated">它应该可以从标准应用商店下载。</li><li id="f1d6" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">提供匿名和登录模式，支持常见的社会登录，也许自定义电子邮件/密码认证。</li><li id="c904" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">游客可以利用他们在围栏中的位置来了解动物，并扫描隐藏在周围的条形码来了解动物园中任何一个非人类的客人。</li><li id="24bb" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">所有用户都可以观看与展品相关的视频，但登录用户可以获得独家内容。</li><li id="dee7" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">游客可以上传照片，但我们必须确保内容适当——记住，周围有孩子。</li><li id="8015" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">当游客在动物园时，他们会收到警报，由动物园管理员推送喂食时间和“遇见动物”讲座。</li><li id="1870" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">他们希望残障游客能够访问位于设施周围的任何标牌的文本到语音转换。</li><li id="5790" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">为海外游客翻译将是伟大的(涵盖尽可能多的语言，因为世界上每个人都来这里)。</li><li id="111c" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">参观者可以“喜欢”一个展览，并在重大事件发生时收到提醒。</li><li id="cc7e" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">这需要经过彻底测试并“正常工作”,因为他们可用的IT支持有限，并且无法管理每天25，000名客人的应用程序问题。当然，他们希望100%正常运行。</li></ul><p id="63bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看起来我们的工作已经完成了，所以让我们集思广益，看看无服务器是如何完成这项工作的。我把所有的主要物品都贴在便利贴上，这样我们就可以跟踪了:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ms"><img src="../Images/58a2cda614f807332682bcb619cd3571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZ47gJiBNJ3rjTAxnHOTSg.png"/></div></div></figure><h2 id="c1a8" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">为什么不用‘老办法’做app呢？</h2><p id="c559" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">如果我们没有无服务器，这将会非常复杂。这个客户没有太多的IT帮助，所以这将是一个持续维护的困难项目。我们需要计算出每天需要多少台服务器来支持潜在的25000到50000用户。我们将需要iPhone和Android开发团队的测试策略来处理所有最流行的设备。</p><p id="db95" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还需要OAuth设置与主要的社会提供者和某处的用户数据库，以及所有的密码管理和重置过程。然后是视频托管，但我们不能使用YouTube，因为有些内容是封闭的。为了构建所有这些，我们必须考虑需要多少开发人员以及这种基础设施的维护开销。</p><p id="4193" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">无服务器方法的目标是真正最小化最后两段中的大部分内容。从实践的角度来看，大量的开发预算和人员可能会消失在硬件的组装、授权管理、数据库和移动部署中。</p><p id="74f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如<a class="ae lf" href="https://twitter.com/ben11kehoe" rel="noopener ugc nofollow" target="_blank">本·凯霍</a>所称的，“无服务器思维”的一部分是重新部署所有的资源来构建你的客户可以看到、触摸到和关心的有价值的功能。这是<em class="ko">关于顾客的一切</em>——我们动物园的游客不太关心我们的基础设施，而更关心长颈鹿什么时候被喂食。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/d840123b5181eb21928d425a5bb8745d.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*by1vidAB6hacH2AcrL2Haw.jpeg"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">长颈鹿矮子就靠你了！信用:<a class="ae lf" href="https://www.freepik.com/free-vector/giraffe-portrait-cartoon-style_1195871.htm" rel="noopener ugc nofollow" target="_blank">https://www . free pik . com/free-vector/giraffe-portrait-cartoon-style _ 1195871 . htm</a></figcaption></figure><h2 id="6c14" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">广泛的要求</h2><p id="cedf" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">很少有要求不是专门针对无服务器的，但是本着使用托管服务和节约资源的精神，我们应该提前解决这些要求:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ms"><img src="../Images/a6111284e95157ef4a5dfddb8ae7869e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jI5llWE4F_4CB0i2yqd-w.png"/></div></div></figure><p id="c6bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以使用像React或Vue这样的单页应用程序框架将它构建成一个web应用程序。但是动物园的主人真的想要一个应用程序，听起来他们会在未来的某个时候发送特别优惠的推送通知(听起来像是一个额外的要求？).</p><p id="249e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">前端工作超出了本练习的范围，但我们应该关注<a class="ae lf" href="https://hackernoon.com/getting-started-with-cross-platform-app-development-in-2019-dd2bf7f6161b" rel="noopener ugc nofollow" target="_blank">跨平台移动开发</a>以避免为iOS和Android构建相同的应用程序两次。<a class="ae lf" href="https://facebook.github.io/react-native/" rel="noopener ugc nofollow" target="_blank">反应原生</a>可能是不错的选择，<a class="ae lf" href="https://flutter.io/" rel="noopener ugc nofollow" target="_blank">颤动</a>也可以。无论哪种方式，我们都希望前端易于管理和构建。</p><p id="47d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">测试移动应用是很棘手的，而且由于Android版本和设备的激增，测试可能会很麻烦。所有者对此并没有说太多，但在最少的IT帮助下，自动化这一过程显然会有所帮助。<a class="ae lf" href="https://aws.amazon.com/device-farm/" rel="noopener ugc nofollow" target="_blank"> AWS Device Farm </a>使用大量实际设备为这个问题提供了一个自动化解决方案。</p><p id="3d38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这也是找到可能不符合客户预算的服务或需求的好时机。例如，100%的正常运行时间要求对建筑师来说是昂贵的，但如果动物园准备接受99.99%的正常运行时间(每年不到1小时)，这将显著改变我们需要建造的东西，并使成本产生巨大差异。在我们开始构建之前，权衡是非常重要的。</p><h2 id="e00a" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">我们需要什么服务？</h2><p id="2df3" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">弄清楚这一点的第一步是查看您可能需要的服务，您可以从需求中推断出一些服务。我草草记下了我的即时想法(红色代表与数据相关的项目，蓝色代表其他所有内容):</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mu"><img src="../Images/b254d369cd4297f0f338a39cdeeea1e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*waapOsclw73tcAWK2xTCJA.png"/></div></div></figure><p id="b987" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于数据相关项目:</p><ul class=""><li id="b259" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated">视频托管只需要<strong class="js iu"> S3 </strong>进行存储，我们可以通过<strong class="js iu"> CloudFront </strong>交付内容。在这种情况下，CloudFront也可以帮助我们使用签名的URL或cookies来限制登录用户的一些内容。</li><li id="cc9b" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">上传的照片也可以保存在<strong class="js iu"> S3 </strong>中。一些图像识别将大大有助于我们检测适当的图像——也许是重新识别？</li><li id="e88c" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">将会有来自动物园管理员的每日事件和警报列表——我想我们可以在<strong class="js iu"> DynamoDB </strong>中管理这个时间表。我稍后将介绍这些警报。</li><li id="3dd7" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">所描述的认证相当普通，可以由<strong class="js iu"> Cognito </strong>处理。这也支持对匿名用户的跟踪，因此如果用户后来转换为登录用户，我们可以记住设置和首选项。</li></ul><p id="3cf9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于其他一切:</p><ul class=""><li id="bc0a" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated">对于文本到语音转换，我们将使用亚马逊Polly创建音频，然后存储在S3进行播放。</li><li id="1a7d" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">语言翻译可以用<strong class="js iu">亚马逊翻译</strong>实现，目前支持从英语开始的21种语言。</li><li id="bd84" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">对于展品提醒，我们可以使用<strong class="js iu"> SNS </strong>让参观者订阅展品。</li></ul><p id="7ee7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个阶段是一个粗略的草图，但是它让我们知道我们将连接哪些服务。这些工具中的每一个都是完全托管的服务，所以我们只需要知道它们如何工作以及如何连接它们。</p><h2 id="2cc0" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">处理文本、图像和视频</h2><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mv"><img src="../Images/6fa8e9cc5cf49c7772567aa9142ccbe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3DU04jJFUeCXXCZ82Mw8A.png"/></div></div></figure><p id="e995" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于像图像和视频这样的二进制数据，S3总是显而易见的选择。事实上，通过集成一些在新对象到达时运行的Lambda函数，我们可以让S3成为这一功能背后的主力。</p><p id="d2a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">动物园应用程序可以有一个S3桶，每个展览都有文件夹，结构如下:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mw"><img src="../Images/cc2939ca29968adb1552453756756ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fO8TLNaGoNeqiZYULxDHaA.png"/></div></div></figure><p id="2473" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每个子文件夹代表系统中的内容类型:</p><ul class=""><li id="4dbe" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated">当动物园管理员保存展品<strong class="js iu">描述</strong>时，会触发一个Lambda函数，该函数调用AWS Translate将文本转换为其他语言，并将结果存储在特定语言的文件夹中(' es '，' de '，' it '等)。).这解决了翻译问题，因为每次更新内容时只需要翻译一次(而不是在最终用户切换语言时)。</li><li id="f19a" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">描述的改变也可以触发Lambda将文件发送给Polly——我们可以将生成的语音保存在<strong class="js iu">音频</strong>文件夹中，并在用户请求时播放。对于多种语言，可以这样做。</li><li id="0783" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">当<strong class="js iu">视频</strong>被保存时，该事件触发一个Lambda，该Lambda使用弹性转码器或<a class="ae lf" href="https://aws.amazon.com/mediaconvert/" rel="noopener ugc nofollow" target="_blank"> Elemental MediaConvert </a>服务来重新处理不同大小的视频，并准备点播观看。这将有助于降低性能和带宽成本。每个上传的视频只需要发生一次。</li></ul><p id="2503" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，对于用户生成的照片，我们将使用一个单独的bucket来触发一个Lambda来分析Rekognition中的照片。我们可以使用这个服务中的<a class="ae lf" href="https://docs.aws.amazon.com/rekognition/latest/dg/moderation.html" rel="noopener ugc nofollow" target="_blank">审核标签</a>来查找不安全的内容，并且我们可以检测照片是否是动物。我们可以检查来自Rekognition的响应，并决定下一步要做什么—如果它是不确定的或可疑的，我们将在添加到主存储桶的<em class="ko"> images </em>文件夹之前标记该图像以供版主使用:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mx"><img src="../Images/f809e35ae325bb9e8d52ead6be134451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWXAxsdwIHiYhgDYmPUEMQ.png"/></div></div></figure><h2 id="1e0d" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">动物园时间表</h2><p id="09c9" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">对于全天即将发生的事件，让我们使用DynamoDB表来存储关于喂食、讲座和其他动物园事件的信息。游客在动物园时只关心当天的事件:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi my"><img src="../Images/f6f337d47f45421f1abe171b7e37eed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RVu7pYkX7_VP6ksRUkYzgA.png"/></div></div></figure><p id="8271" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">前端应用程序将使用一天中所有事件的时间范围来查询该表。动物园管理员将使用单独的管理工具来设置活动。当事件即将发生时，前端会提醒用户，可能会过滤用户喜欢的展品(使用exhibitID属性)。</p><p id="6ddc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这种数据，DynamoDB是一个非常快速且可伸缩的存储选项。该时间表同样可以作为平面文件存储在S3——您可以尝试找到每种方法的优缺点。</p><h2 id="7a7f" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">通知</h2><p id="92ac" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">这个应用程序中有许多通知来源——即将到来的事件、特别警报和“喜欢”的展览上发生的事情——都存储在一个DynamoDB表中。当应用程序在启动时检索初始状态时，它必须监听数据的变化(以防事件被取消或日程发生变化)。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mz"><img src="../Images/4f1392eb343593d9006330b3b27486ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZtBAU_jh_JXSfbyvBI-smg.png"/></div></div></figure><p id="f94b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有一种简单的方法来处理通知需求。我们可以为整个动物园的每个展览设置一个SNS主题。如果访问者“喜欢”一个展览，有效地订阅那里发生的事件，我们只需要为用户订阅那个SNS主题。</p><p id="5fb3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种订阅可能只在参观当天有效，因此可以在动物园关闭后重新设置。SNS可以处理每个主题多达1000万次的订阅，所以我们没有超出限制。这种方法避免了管理大量喜欢的展品(每天25，000个用户和100个展品之间)。</p><p id="be22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们怎样才能做到实时呢？DynamoDB可以发布对流的更改，流可以触发Lambda并发布到SNS主题。然后，这可以发布到AWS IoT，以将警报推送到前端。或者，如果我们使用AppSync或Amplify，我们可以利用这些服务探索推送通知。短信也是可以的，尽管要贵得多(<a class="ae lf" href="https://aws.amazon.com/sns/sms-pricing/" rel="noopener ugc nofollow" target="_blank"> $0.00645每条</a>)，或者我们可以通过SES使用电子邮件。</p><h2 id="61cc" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">将这一切结合在一起</h2><p id="3913" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">通过API Gateway连接前端和后端，这是整个无服务器生态系统中最重要的服务之一。我们可以开发一个API，允许前端获取展品和活动的列表，并订阅展品:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi na"><img src="../Images/6e20f49af4eeea9f95cc389a480422a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*zsu6f7sQ8Bz0wA9OCpp6Lg.png"/></div></figure><p id="ba60" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Cognito将处理授权并负责发放令牌和管理身份，而网关将决定匿名或登录用户是否可以访问某些路由。</p><p id="ef79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当您将所有不同的服务和我们的Lambda函数组合在一起时，我们已经开发了一个后端架构，如下所示:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/9f8d5ad37edd09244b503f94f878951b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DnBPlZSlIt1lDpj56a9ePQ.png"/></div></div></figure><p id="655c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在整个练习中，我们没有提到扩展、负载平衡器或资源调配，而是选择使用可大规模扩展的服务来为我们处理所有这一切。这种设计可以轻松适应动物园预期的流量水平，我们最终可能只需要在后端编写1000行代码来支持整个应用程序。</p><p id="cdc7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">无服务器架构最令人兴奋的部分之一是巨大的灵活性。实际上，应用程序中的特性不断变化，通常会打破传统架构。相比之下，这种设计非常有弹性，可以轻松适应未来的许多变化。</p><p id="9dc9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，我们专注于构建一个分布式系统，而不是一个整体。许多独立的部分，如语言翻译或图像检测，不知道系统的其余部分，可以独立工作。这是无服务器架构的标志之一，也是它如此有效地扩展的原因之一。</p><h2 id="01a0" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">我们建了一个动物园</h2><p id="c1b9" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我们已经开发了一个支持初始需求的架构草图。但是想象一下，如果:</p><ul class=""><li id="c7a3" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated">动物园扩张或开始连锁——我们如何支持多个公园？</li><li id="57d7" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">所有者希望添加“失踪儿童”警报。</li><li id="72bb" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">会员可以赞助一只动物，并通过应用程序付款。</li><li id="1fb5" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">我们启用了一个功能，允许公园里的人们找到彼此。</li><li id="49cc" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated">游客可以通过应用程序购买午餐，并在美食广场领取。</li></ul><p id="49c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">希望这个练习也展示了无服务器方法如何帮助您将注意力集中在客户端问题上，而不是技术解决方案上。如果您能够理解需求，然后决定使用哪些服务，这将有助于最小化您正在编写的定制代码的数量，从而减少您需要支持和维护的数量。</p></div></div>    
</body>
</html>