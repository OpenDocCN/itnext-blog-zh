<html>
<head>
<title>Component vs (UI) Integration vs E2E tests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">组件vs (UI)集成vs E2E测试</h1>
<blockquote>原文：<a href="https://itnext.io/component-vs-ui-integration-vs-e2e-tests-f02b575339dc?source=collection_archive---------2-----------------------#2019-07-25">https://itnext.io/component-vs-ui-integration-vs-e2e-tests-f02b575339dc?source=collection_archive---------2-----------------------#2019-07-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fa25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">UI测试分类。阅读此处或<a class="ae kl" href="https://dev.to/noriste/component-vs-ui-integration-vs-e2e-tests-3i0d" rel="noopener ugc nofollow" target="_blank">dev .</a>上的内容。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/472d84f2b2e01f7623a47ed96932370e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6rCml3gn8XGDsBcqBFkHg.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">由<a class="ae kl" href="https://unsplash.com/@jeremybishop" rel="noopener ugc nofollow" target="_blank">杰里米·毕晓普</a>在<a class="ae kl" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7e7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我正在GitHub上做一个大的<a class="ae kl" href="https://github.com/NoriSte/ui-testing-best-practices" rel="noopener ugc nofollow" target="_blank"> UI测试最佳实践</a>项目，我分享这个帖子来传播它并有直接的反馈。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="931d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谈到UI测试(仅涉及UI，而非底层JavaScript代码)，有三种主要的测试类型:</p><p id="4b19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">组件测试<br/>UI集成测试<br/>端到端(E2E)测试</p><h1 id="345a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">组件测试</h1><p id="19ff" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">UI的单元测试，他们在一个隔离的环境中测试每一个组件。</p><p id="b23d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">独立开发组件很重要，因为它允许您将组件与相应的容器/用途隔离开来。一个组件的存在是为了隔离一个单一的行为/内容(单一责任原则<a class="ae kl" href="https://www.wikiwand.com/en/Single_responsibility_principle" rel="noopener ugc nofollow" target="_blank">),因此，隔离编码是有益的。</a></p><p id="b191" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有许多方法和工具可以独立开发组件，但是由于其有效性和生态系统，story book<a class="ae kl" href="https://storybook.js.org" rel="noopener ugc nofollow" target="_blank">成为了标准选择。</a></p><p id="9209" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">组件有三种类型的契约:生成的输出(<strong class="jp ir"> HTML </strong>)、它们的可视方面(<strong class="jp ir"> CSS </strong>)和外部API(<strong class="jp ir">道具和回调</strong>)。测试每一个方面都可能很麻烦，这就是故事片派上用场的地方。它允许您自动化:</p><p id="d529" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">快照测试</strong>:快照是组件生成的输出，是包含所有渲染HTML的字符串。如果生成的HTML意外或无意地发生了变化，快照测试就会失败，您可以选择这些变化是有意的还是无意的。</p><p id="705a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">视觉回归测试</strong>:组件的视觉方面将<strong class="jp ir">与前一个进行逐个像素的比较</strong>，再次提示您选择是否接受更改。</p><p id="c1a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些测试由<a class="ae kl" href="https://www.npmjs.com/package/@storybook/addon-storyshots" rel="noopener ugc nofollow" target="_blank"> Storyshots </a>在每一个故事书页面(又名“故事”)上自动启动。</p><p id="3a42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">回调测试</strong>:一个小的React容器应用程序通过一些回调来呈现组件。然后，模拟用户交互，并传递预期要调用的回调。<a class="ae kl" href="https://testing-library.com/docs/react-testing-library/" rel="noopener ugc nofollow" target="_blank"> React测试库</a>是这类测试的标准库</p><p id="f5af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">交互/状态测试</strong>:一些与组件的交互期望正确的状态管理。这种测试必须从消费者的角度来写，而不是从内在的角度(例如。用户填充时输入字段的值，而不是内部组件状态)。交互/状态测试应该在键盘事件触发后断言输入字段值。</p><h1 id="e384" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">UI集成测试</h1><p id="072d" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">他们在一个真实的浏览器中运行整个应用程序<strong class="jp ir">,而不需要访问真实的服务器</strong>。这些测试是每个前端开发人员的王牌。他们速度极快，更少暴露于随机故障或假阴性。Cypress 非常适合UI集成测试。</p><p id="3626" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前端应用程序不知道没有真正的服务器:每个AJAX调用都会被测试工具立即解决。静态JSON响应(称为“fixtures”)用于模拟服务器响应。Fixtures允许我们测试前端状态，模拟每一个可能的后端状态。</p><p id="0af5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一个有趣的效果是:fixture<strong class="jp ir">允许你在没有后端</strong>应用程序的情况下工作。你可以把UI集成测试想象成“仅前端测试”。</p><p id="490b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最成功的测试套件的核心是大量的UI集成测试，考虑最适合你的前端应用的测试类型。</p><h1 id="e15b" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">端到端(E2E)测试</h1><p id="7fdc" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">他们运行整个应用程序，与真正的服务器进行交互。从用户交互(其中一个“端”)到业务数据(另一个“端”):一切都必须按照设计工作。E2E测试通常很慢，因为</p><p id="bcb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">他们需要一个<strong class="jp ir">工作后端</strong>应用程序，通常与前端应用程序一起启动。没有服务器你就不能启动它们，所以你要依靠后端开发人员来工作</p><p id="89a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">他们需要<strong class="jp ir">可靠的数据</strong>，在每次测试前播种并清理数据</p><p id="213e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是为什么E2E考试不适合作为唯一/主要的考试类型。它们非常重要，因为它们测试一切(前端+后端),但是必须小心使用，以避免脆弱和长达一小时的测试套件。</p><p id="a511" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在一个包含大量UI集成测试的完整套件中，您可以将E2E测试视为“后端测试”。您应该通过它们测试哪些流程？</p><p id="ee38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">快乐之路:你需要确保，至少，用户能够完成基本操作</p><p id="ed7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对你的企业有价值的一切:幸福之路与否，测试你的企业所关心的一切(显然，对它们进行优先排序)</p><p id="daa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经常发生故障的一切:系统的薄弱环节也必须受到监控</p><p id="a62b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">识别/定义测试的类型有助于对它们进行分组，限制它们的范围，以及选择是否在整个应用程序和部署管道中运行它们。</p><p id="99f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同样，<a class="ae kl" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank"> Cypress </a>是我进行E2E测试的首选工具。</p><h1 id="ab7f" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">明智地命名它们</h1><p id="1e6e" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">您可以编写许多不同的UI测试，并且用一种通用的方式命名<br/>测试文件是一个好习惯。</p><p id="1870" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这很有用，因为通常你只需要运行一种类型的测试，情况可能是:<br/> -在开发过程中， 您只需要运行其中的一些<br/> —您正在更改一些相关的组件，您需要检查生成的标记没有改变<br/> —您正在更改一个全局CSS规则，您只需要运行可视化测试<br/> —您正在更改一个应用流程，您需要运行整个应用集成测试<br/>—您的DevOps同事需要确保一切正常运行，并且最简单的方法是 这样做只是启动E2E测试<br/> -您的构建管道只需要运行集成和E2E测试<br/> -您的监控管道需要一个脚本来启动E2E和监控测试</p><p id="b956" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您明智地命名了您的测试，那么启动其中的某一类测试将会非常容易。</p><p id="05bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">柏树:</p><pre class="kn ko kp kq gt mm mn mo mp aw mq bi"><span id="9320" class="mr lk iq mn b gy ms mt l mu mv">cypress run — spec \”cypress/integration/**/*.e2e.*\”</span></pre><p id="71ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">玩笑:</p><pre class="kn ko kp kq gt mm mn mo mp aw mq bi"><span id="bc9a" class="mr lk iq mn b gy ms mt l mu mv">jest — testPathPattern=e2e\\.*$</span></pre><p id="35af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没有一种全局的方式来命名测试文件，建议可以用:<br/> -您正在测试的主题<br/> -测试的种类(<em class="mw">集成</em>、<em class="mw"> e2e </em>、<em class="mw">监控</em>、<em class="mw">组件</em>等等。)<br/> -选择的测试后缀(<em class="mw">测试</em>、<em class="mw">规格</em>等。)<br/> -文件扩展名(。js，。ts，。jsx，。tsx等。)<br/>都用句号隔开。</p><p id="88df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一些例子可以是<br/> -认证。e2e.test 。ts <br/> -认证。<strong class="jp ir">集成测试</strong>。ts <br/> -现场。<strong class="jp ir">监测</strong>。js <br/> -登录。<strong class="jp ir">组件测试</strong>。tsx <br/>等</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="10a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好👋我是Stefano Magni，我是一名热情的JavaScript开发人员和T2赛普拉斯大使。<br/>我喜欢创造高质量的产品，测试和自动化一切，学习和分享我的知识，帮助别人，在会议上发言和面对新的挑战。<br/>我在意大利比特币初创公司<a class="ae kl" href="https://conio.com/it/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Conio </a>工作。<br/>你可以在<a class="ae kl" href="https://twitter.com/NoriSte?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae kl" href="https://github.com/NoriSte?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> GitHub </a>、<a class="ae kl" href="https://www.linkedin.com/in/noriste/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上找到我。你可以找到我最近所有的文章/演讲等等。这里。</p></div></div>    
</body>
</html>