<html>
<head>
<title>Logging The Flutter Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">伐木颤动的方式</h1>
<blockquote>原文：<a href="https://itnext.io/logging-the-flutter-way-66ddda60d118?source=collection_archive---------1-----------------------#2021-05-25">https://itnext.io/logging-the-flutter-way-66ddda60d118?source=collection_archive---------1-----------------------#2021-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/2d244de00a5563ce18c778b9ae2ccd97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xiHF0Jm1JzGUOuocmpNBdQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Marek Szturc 在<a class="ae kf" href="https://unsplash.com/s/photos/loggers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e018" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为什么要记录颤动的方式？Flutter宇宙中的大多数日志库都是在开发人员日志包的附件库创建之前创建的，因此多次发明了扭曲轮。因此，我将向您展示如何正确使用日志包和logging_appenders。</p><h1 id="adc2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">背景</strong></h1><p id="6db3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">问题是，虽然谷歌在向你介绍小工具方面做得很好；在成熟市场中开发专业应用程序并不需要掌握这些技术。那是我自己分配的工作，推出介质文章和我的颤振设计与开发丛书。</p><p id="389b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我正在撰写几本颤振设计和开发的书籍，并通过撰写中型文章来预览主题和章节。涵盖的一些主题有:</p><p id="00b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">DevOPS</p><p id="7ab3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/tuning-a-cheap-ms-windows-laptop-for-flutter-app-development-572d09cd4d19" rel="noopener">为Flutter开发调试一台廉价的MS Windows笔记本电脑</a></p><p id="7039" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/codex/log-driven-learning-flutter-d76b49b75a8c" rel="noopener">日志驱动学习颤动</a></p><p id="7d8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/uml-coolness-in-flutter-6bb14217b5f2"> UML在颤动中的清凉</a></p><p id="b3be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/lint-like-a-boss-60b85e82c227">像老板一样的线头</a></p><p id="1461" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/mccabe-cycles-in-flutter-3aa913e19428" rel="noopener">麦凯布周期在颤动</a></p><p id="1130" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/getting-real-code-coverage-951231afa2bc" rel="noopener">获得真正的代码覆盖率</a></p><p id="a2fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/lcov-on-windows-7c58dda07080" rel="noopener">Windows上的Lcov</a></p><p id="03fa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/test-secrets-test-suites-99f8390b8d4b">测试秘密，测试套件</a></p><p id="6bcd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/how-to-flutter-internal-packages-cad1285fe8c">如何，颤振内部包</a></p><p id="e26e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/codex/an-architecture-layout-8f414271b2b4" rel="noopener">一个架构布局</a></p><p id="5f58" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/codex/logging-the-expert-way-5beb5c967e44" rel="noopener">测井，专家方式</a></p><p id="1cd4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/catch-flutter-application-exceptions-cad036d0fd4e">捕捉颤振应用异常</a></p><p id="ca57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/codex/flutter-perfect-setup-c5462b412f78" rel="noopener">颤振完美设置</a></p><p id="996b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">视觉的</p><p id="182f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/codex/animations-users-love-75a57a8cad5" rel="noopener">用户喜爱的动画(Rive) </a></p><p id="0d75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://medium.com/p/full-flutter-background-trick-d1ea813470d2" rel="noopener">全扑背景绝招</a></p><p id="e2d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于我的文章出现在多种出版物上，因此保持更新的最佳方式是加入这些社交平台之一，并使用我的个人资料链接关注我:</p><p id="5889" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">LinkedIN<a class="ae kf" href="https://www.linkedin.com/in/fredgrottstartupfluttermobileappdesigner/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIN . com/in/fredgrottstartupfluttermobileappdesigner/</a></p><p id="c054" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">邢<a class="ae kf" href="https://www.xing.com/profile/Fred_Grott/cv" rel="noopener ugc nofollow" target="_blank">的</a></p><p id="2123" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不和<a class="ae kf" href="https://discordapp.com/users/9388/" rel="noopener ugc nofollow" target="_blank">https://discordapp.com/users/9388/</a></p><p id="be7b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Gitter(加入本论坛获取文章链接)<a class="ae kf" href="https://gitter.im/flutter/flutter" rel="noopener ugc nofollow" target="_blank">https://gitter.im/flutter/flutter</a></p><p id="1439" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">slack<a class="ae kf" href="https://app.slack.com/client/TGT6YF2J1/CGS4QDJ56/user_profile/UHK8PNRGU" rel="noopener ugc nofollow" target="_blank">https://app . slack . com/client/TGT 6 yf2 j 1/cgs 4 qdj 56/user _ profile/uhk 8 pnr gu</a></p><p id="d03b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">推特<a class="ae kf" href="https://twitter.com/fredgrott" rel="noopener ugc nofollow" target="_blank">https://twitter.com/fredgrott</a></p><p id="9e38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">中型<a class="ae kf" href="https://fredgrott.medium.com" rel="noopener">https://fredgrott.medium.com</a></p><p id="2014" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Reddit FlutterDev Subedit(只要加入这个论坛，你就会通过Reddit得到通知)<a class="ae kf" href="https://www.reddit.com/r/FlutterDev/" rel="noopener ugc nofollow" target="_blank">https://www.reddit.com/r/FlutterDev/</a></p><p id="c1bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一如既往，文章和书籍的代码可以在以下位置找到:</p><p id="0819" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Github上的flutter design and arch Rosetta<a class="ae kf" href="https://github.com/fredgrott/flutter_design_and_arch_rosetta" rel="noopener ugc nofollow" target="_blank">https://Github . com/Fred grott/flutter _ design _ and _ arch _ Rosetta</a></p><p id="2ef8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我贡献的插件有</p><p id="d961" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">飘起平台的小部件<a class="ae kf" href="https://github.com/stryder-dev/flutter_platform_widgets" rel="noopener ugc nofollow" target="_blank">https://github.com/stryder-dev/flutter_platform_widgets</a></p><p id="3ed2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颤振Rive(播放器)插件<a class="ae kf" href="https://github.com/rive-app/rive-flutter" rel="noopener ugc nofollow" target="_blank">https://github.com/rive-app/rive-flutter</a></p><p id="8fdb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，如果你喜欢这样的想法，只需要花1000-2000个小时完成我的教程，就可以达到Flutter应用程序设计和开发的专家水平；那你知道该怎么做了。</p><h1 id="83aa" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们在努力做什么？</h1><p id="0356" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">看看这个:</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/110a03f372211f87d846b284977b22ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PAEES_UJs_K5tkX4sOolbw.png"/></div></div></figure><p id="4029" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要关闭已实现的洋葱分层架构的整个盒子，必须使用日志记录来找出要修改和记录的重要行为。我们通过日志记录和异常捕获来捕获，这是盒子的右侧。并且，盒子的另一面通过测试。</p><p id="d959" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有哪些用于颤动测井的测井工具？</p><p id="ad0f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颤动测井工具</p><p id="99a4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在2019年之前，没有用于dart的日志记录包，该包获取由开发者日志功能创建的事件并将它们输出到流中。所以创建了一堆第三方插件来收集日志事件，没有人创建一个非常有用的策略。</p><p id="37bb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，使用一种方法来流式传输日志事件输出会带来一些痛苦，因为日志包在文档中很少。因此，我正在教如何使用这个日志包和一些其他的Dart向导工具，以便在每个Flutter应用程序开发项目中使用一套很好的日志记录工具。</p><h1 id="2ef1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">开发者日志功能和日志包</strong></h1><p id="6788" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">dart开发人员包中的日志功能仅记录单个事件。API页面在这里:</p><p id="2309" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">https://api.flutter.dev/flutter/dart-developer/log.html<a class="ae kf" href="https://api.flutter.dev/flutter/dart-developer/log.html" rel="noopener ugc nofollow" target="_blank"/></p><p id="a5a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些级别在日志包的其他地方定义。根据级别类别中的来源，来源页面如下:</p><p id="6f59" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://github.com/dart-lang/logging/blob/master/lib/src/level.dart" rel="noopener ugc nofollow" target="_blank">https://github . com/dart-lang/log in/blob/master/lib/src/level . dart</a></p><p id="d929" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有这些级别:</p><p id="1383" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有0</p><p id="43f1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">稳定在2000年</p><p id="0ced" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最细等级300</p><p id="1304" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">水平仪400</p><p id="c246" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">等级罚款500</p><p id="194a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">级别配置700</p><p id="647c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">等级信息800</p><p id="026b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">水平警告900</p><p id="03a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">严重级别1000</p><p id="f10d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">水平喊1200</p><p id="d6f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">日志包也有一个原始日志类和一个API，这样记录的事件可以输出到流中。而简单记录器提供了更好的API来控制日志包中的记录器；它也有一些不完善之处。所以让我告诉你如何驯服整个混乱。</p><h1 id="56f7" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">日志记录策略</strong></h1><p id="80f2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">让我们一步一步来:</p><p id="e0ca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不可变小部件，它不同于可变小部件，因为我们不能插入可变小部件。</p><p id="8da1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很容易，如果我们初始化一个记录器，我们就不会得到警告，因为我们不再被迫声明一个没有初始化的记录器。并且，初始化单例记录器意味着我们不会为每个dart文件重复初始化记录器。</p><p id="e934" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它的第二部分创建一个适当的mixin，作为特殊命名的日志程序插入，以建立一个用户定义的日志区域。</p><p id="d03d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">应用例外</p><p id="e4da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">应用程序异常，因为它通常在一个带有可选throw PlatformException语句的语句块中；我们可以假设只需要一个简单的logger.info(message)语句就可以了。因此，我们不需要在这个要求上增加任何东西。</p><p id="b903" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">未来尝试、捕捉和出错</p><p id="e61e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，它与应用程序异常相同，因为它已经由记录器的函数处理，只要记录一个事件。</p><p id="e155" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">班</p><p id="ef9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以使用中用于小部件的相同技巧，可以使用专门的日志混合来定义命名日志记录器，从而为该类设置日志记录区域。</p><p id="b057" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">功能</p><p id="1b3e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，只需使用主函数中设置的普通appLogger来初始化appLog函数。</p><p id="29dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为，我将使用logging appenders包；我不必担心给任何控制台日志着色，因为该包中的打印附件会处理这项任务。</p><p id="ec00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们如何实现这一点？</p><h1 id="993d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">包或插件</strong></h1><p id="edfc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">尽管如此，这将是一个内部代码，用于你所有的颤振项目。你可以把它实现为一个插件或者一个包。记住，你有路径技巧来使用插件或包来制作与你所有的flutter项目相关的插件或包。</p><p id="e87c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将从将类型定义为外向工作开始。</p><h1 id="d68b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">种类</strong></h1><p id="aba6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">现在，让我们来玩一些特殊的飞镖魔术。我们有一个抽象类:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6cec" class="mq lf it mm b gy mr ms l mt mu">abstract class LoggingCampType {</span><span id="c687" class="mq lf it mm b gy mv ms l mt mu">Logger get campLogger;</span><span id="486b" class="mq lf it mm b gy mv ms l mt mu">}</span></pre><p id="f85f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我扩展它，那么我的get可以返回一个命名的记录器；但是，我必须说明日志包的Logger类中的两个工厂:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="f5a9" class="mq lf it mm b gy mr ms l mt mu">extension LoggingCampSpawner on LoggingCampType {</span><span id="02bb" class="mq lf it mm b gy mv ms l mt mu">Logger newLogger(String name) =&gt; Logger('${campLogger.fullName}.$name');</span><span id="0cfc" class="mq lf it mm b gy mv ms l mt mu">Logger detachedLogger(String name) =&gt; Logger.detached(name);</span><span id="d26b" class="mq lf it mm b gy mv ms l mt mu">}</span></pre><p id="2490" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">mixin看起来像这样:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="cc97" class="mq lf it mm b gy mr ms l mt mu">mixin UiLoggerMixin implements LoggingCampType {</span><span id="1397" class="mq lf it mm b gy mv ms l mt mu">@override</span><span id="2f34" class="mq lf it mm b gy mv ms l mt mu">Logger get campLogger =&gt; Logger('UILogger - ${runtimeType.toString()}');</span><span id="9f2b" class="mq lf it mm b gy mv ms l mt mu">}</span></pre><p id="8dfa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果很简单，只需开始使用campLogger，就像这样:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a118" class="mq lf it mm b gy mr ms l mt mu">class MyHomePageState extends State&lt;MyHomePage&gt;</span><span id="4863" class="mq lf it mm b gy mv ms l mt mu">with CounterStoreMixin, UiLoggerMixin {</span><span id="32ec" class="mq lf it mm b gy mv ms l mt mu">void incrementCounter() {</span><span id="31ca" class="mq lf it mm b gy mv ms l mt mu">setState(() {</span><span id="9c03" class="mq lf it mm b gy mv ms l mt mu">// This call to setState tells the Flutter framework that something has</span><span id="042f" class="mq lf it mm b gy mv ms l mt mu">// changed in this State, which causes it to rerun the build method below</span><span id="2d5b" class="mq lf it mm b gy mv ms l mt mu">// so that the display can reflect the updated values. If we changed</span><span id="828c" class="mq lf it mm b gy mv ms l mt mu">// _counter without calling setState(), then the build method would not be</span><span id="650c" class="mq lf it mm b gy mv ms l mt mu">// called again, and so nothing would appear to happen.</span><span id="df0b" class="mq lf it mm b gy mv ms l mt mu">campLogger.info("state changed");</span><span id="14aa" class="mq lf it mm b gy mv ms l mt mu">increaseCounter();</span><span id="fe29" class="mq lf it mm b gy mv ms l mt mu">});</span><span id="a54b" class="mq lf it mm b gy mv ms l mt mu">}</span><span id="8c30" class="mq lf it mm b gy mv ms l mt mu">... rest of code here...</span></pre><p id="67a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我在开始展示代码时所说的那样；我们必须与appLogger集成，这需要在应用程序的主要功能中初始化。现在我们看到了appLog初始化代码。</p><h1 id="7b05" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak"> App Logger初始化</strong></h1><p id="7e39" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">应用程序记录器初始化如下所示:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="b52e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我用了两个包；logging包和logging_appenders包我必须为这两个包设置设置。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="36eb" class="mq lf it mm b gy mr ms l mt mu">recordStackTraceAtLevel = Level.ALL;</span><span id="9b64" class="mq lf it mm b gy mv ms l mt mu">appLogger.level = Level.ALL;</span></pre><p id="9baf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将堆栈级别跟踪设置为all，并将日志记录级别设置为all。然后我们必须设置一个监听器来接收日志:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="cd95" class="mq lf it mm b gy mr ms l mt mu">Logger.root.onRecord.listen((record) {</span><span id="9d96" class="mq lf it mm b gy mv ms l mt mu">//I already have accounted for the zone info in my appender and record formatter pairs</span><span id="dc20" class="mq lf it mm b gy mv ms l mt mu">if (record.error != null &amp;&amp; record.stackTrace != null) {</span><span id="23c5" class="mq lf it mm b gy mv ms l mt mu">log('${record.level.name}: ${record.loggerName}: ${record.time}: ${record.message}: ${record.error}: ${record.stackTrace}');</span><span id="dc4a" class="mq lf it mm b gy mv ms l mt mu">log(</span><span id="cc52" class="mq lf it mm b gy mv ms l mt mu">// ignore: prefer-trailing-comma</span><span id="6dbc" class="mq lf it mm b gy mv ms l mt mu">'level: ${record.level.name} loggerName: ${record.loggerName} time: ${record.time} message: ${record.message} error: ${record.error} exception: ${record.stackTrace}');</span><span id="b31a" class="mq lf it mm b gy mv ms l mt mu">} else if (record.error != null) {</span><span id="8828" class="mq lf it mm b gy mv ms l mt mu">log('level: ${record.level.name} loggerName: ${record.loggerName} time: ${record.time} message: ${record.message} error: ${record.error}');</span><span id="29b5" class="mq lf it mm b gy mv ms l mt mu">} else {</span><span id="dddd" class="mq lf it mm b gy mv ms l mt mu">log('level: ${record.level.name} loggerName: ${record.loggerName} time: ${record.time} message: ${record.message}');</span><span id="8432" class="mq lf it mm b gy mv ms l mt mu">}</span><span id="01c1" class="mq lf it mm b gy mv ms l mt mu">});</span></pre><p id="cde2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将日志记录附加器设置为特定的日志格式是:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5b91" class="mq lf it mm b gy mr ms l mt mu">MyDevLogAppender(formatter: const MyDevLogRecordFormatter())</span><span id="a781" class="mq lf it mm b gy mv ms l mt mu">.attachToLogger(Logger.root);</span></pre><p id="0e0a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它利用了loggingcamp中的两个东西:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="61f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">格式化程序是:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="6c2c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">来源</strong></h1><p id="481a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">该软件包的源代码位于:</p><p id="bff9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://github.com/fredgrott/flutter_design_and_arch_rosetta/internal_packages/loggingcamp/" rel="noopener ugc nofollow" target="_blank">https://github . com/Fred grott/flutter _ design _ and _ arch _ Rosetta/internal _ packages/logging camp/</a></p><p id="eab6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它被用在flutter_boilerplate中:</p><p id="477f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://github.com/fredgrott/flutter_design_and_arch_rosetta/foundation_base/flutter_boilerplate/" rel="noopener ugc nofollow" target="_blank">https://github . com/Fred grott/flutter _ design _ and _ arch _ Rosetta/foundation _ base/flutter _ boilerplate/</a></p><h1 id="0d71" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">结论</strong></h1><p id="5d6d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">设置好日志记录基础设施后，我现在可以将未捕获的异常转换为已捕获的异常，并完成完整捕获应用程序行为所需的其余调试日志记录。</p><h1 id="1470" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">资源</strong></h1><p id="80b6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">特定于文章的资源:</p><p id="7c00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颤振设计和arch Rosetta https://github . com/Fred grott/flutter _ design _ and _ arch _ Rosetta</p><p id="ba37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一般颤振和飞镖资源；</p><p id="ce2d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">https://flutter.dev/community颤振社区资源</p><p id="0c35" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颤振SDK https://flutter.dev/docs/get-started/install</p><p id="c198" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Android Studio IDE https://developer.android.com/studio</p><p id="58e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">微软的Visual Studio代码https://code.visualstudio.com/</p><p id="6e6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">https://flutter.dev/docs颤振博士</p><p id="2e90" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">https://dart.dev/guides dart Docs</p><p id="5235" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">谷歌Firebase移动设备测试实验室<a class="ae kf" href="https://firebase.google.com/docs/test-lab" rel="noopener ugc nofollow" target="_blank">https://firebase.google.com/docs/test-lab</a></p><h1 id="3a6d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">商标公告</strong></h1><p id="96bc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Google LLC拥有以下商标:飞镖，颤振，机器人，机器人，诺托。苹果公司拥有iOS、MacOSX、Swift和Objective-C的商标。苹果公司拥有SF Pro、Sf Compact、SF mono和New York字体的商标。JetBeans Inc .拥有JetBeans、IntelliJ和Kotlin的商标。甲骨文公司拥有Java商标。微软公司拥有微软视窗操作系统和Powershell的商标。Gradle是Gradle Inc .的商标。Git项目拥有Git的商标。Linux基金会拥有Linux的商标。智能手机OEM自有商标到其手机产品名称。尽我所能，我遵守上述商标的品牌和使用指南。</p><h1 id="34cf" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">关于弗雷德·格罗特</strong></h1><p id="c071" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我的密钥库档案在:<a class="ae kf" href="https://keybase.io/fredgrott" rel="noopener ugc nofollow" target="_blank">https://keybase.io/fredgrott</a></p></div></div>    
</body>
</html>