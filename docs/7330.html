<html>
<head>
<title>dbt and Amazon Redshift Serverless: Serverless Lakehouse Data Modeling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">dbt和Amazon Redshift无服务器:无服务器Lakehouse数据建模</h1>
<blockquote>原文：<a href="https://itnext.io/dbt-and-amazon-redshift-serverless-serverless-lakehouse-data-modeling-ef9106888137?source=collection_archive---------2-----------------------#2022-08-23">https://itnext.io/dbt-and-amazon-redshift-serverless-serverless-lakehouse-data-modeling-ef9106888137?source=collection_archive---------2-----------------------#2022-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="545f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用dbt对现在普遍可用的Amazon Redshift无服务器云数据仓库中的数据进行转换和建模</h2></div><p id="45d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">【帖子更新于2022年12月30日，以反映dbt的最新版本】</em></p><p id="0237" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">AWS最近<a class="ae lf" href="https://aws.amazon.com/about-aws/whats-new/2022/07/amazon-redshift-serverless-generally-available/" rel="noopener ugc nofollow" target="_blank">宣布</a>2022年7月12日<strong class="kk iu">亚马逊红移无服务器</strong>全面上市(GA)。<a class="ae lf" href="https://docs.aws.amazon.com/redshift/latest/mgmt/working-with-serverless.html" rel="noopener ugc nofollow" target="_blank"> Amazon Redshift无服务器</a>允许数据分析师、开发人员和数据科学家运行和扩展分析，而无需供应和管理数据仓库集群。您可能会发现一些特定的使用案例，在这些案例中，Amazon Redshift Serverless是一款比预配Amazon Redshift更合适的分析工具。好消息是，<a class="ae lf" href="https://www.getdbt.com/product/what-is-dbt" rel="noopener ugc nofollow" target="_blank"> dbt </a>(数据构建工具)与提供的Amazon Redshift和Redshift Serverless兼容。</p><p id="ad84" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的帖子中，我们将探索使用dbt实验室开发的dbt(数据构建工具)来转换基于AWS的数据湖库的数据，该数据湖库由Amazon Redshift Serverless、Amazon Redshift Spectrum、AWS Glue Data Catalog和Amazon S3构建。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/dca5f3eadb19c20bcd15f8b7b679ea90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_eNsK5vEQXhDiaQ_UVnJA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">这篇博文演示了高级架构</figcaption></figure><h1 id="fbf0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">命名空间和工作组</h1><p id="169c" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">正如在<a class="ae lf" href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-console-comparison.html" rel="noopener ugc nofollow" target="_blank"> AWS文档</a>中所概述的那样，配置红移和无服务器红移之间存在许多差异。一个更重要的区别是具有红移无服务器的<strong class="kk iu">名称空间</strong>和<strong class="kk iu">工作组</strong>的概念，而不是具有预配红移的集群。据AWS报道，“<em class="le">亚马逊红移无服务器没有集群的概念。相反，您有一个工作组，其中包含可用于处理工作负载的计算资源，还有一个命名空间，其中包含相关的数据库资源、快照、加密密钥和用户。</em></p><p id="5d92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就我个人而言，我觉得数据服务中不同的层次关系让许多用户感到困惑——数据库实例中的数据库(例如，Amazon RDS)、数据库集群中的数据库(例如，Amazon Aurora和provisioned Redshift)、集群中实例中的数据库(例如，Amazon DocumentDB)以及现在使用Amazon Redshift Serverless的工作组中名称空间中的数据库。</p><h1 id="c759" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">定价</h1><p id="737f" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">另一个显著的区别是亚马逊红移无服务器如何对T2收费。与按每小时/节点计费的调配红移不同，Amazon Redshift无服务器以<strong class="kk iu">红移处理单元(RPUs) </strong>来衡量数据仓库容量。您需要为在RPU运行的工作负载支付费用，这些工作负载以每秒小时为单位(最低收费为60秒)，包括在亚马逊S3以开放文件格式访问数据的查询。此外，主存储容量以GB/月为单位计费为<strong class="kk iu">红移托管存储(RMS) </strong>。</p><h1 id="38af" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">dbt和亚马逊红移无服务器</h1><p id="4b86" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">本文使用的<a class="ae lf" href="https://github.com/garystafford/dbt-redshift-demo" rel="noopener ugc nofollow" target="_blank"> GitHub项目</a>与上一篇文章使用的项目相同，<a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/lakehouse-data-modeling-using-dbt-amazon-redshift-redshift-spectrum-and-aws-glue-fdc5629c3df8">使用dbt、Amazon Redshift、Redshift Spectrum和AWS Glue的Lakehouse数据建模</a>。我将尽量不重复那篇文章中已经涉及的dbt细节。本文将重点讨论如何用Amazon Redshift无服务器集群替换Amazon Redshift提供的集群，以便与dbt一起使用。</p><div class="mt mu gp gr mv mw"><a rel="noopener  ugc nofollow" target="_blank" href="/lakehouse-data-modeling-using-dbt-amazon-redshift-redshift-spectrum-and-aws-glue-fdc5629c3df8"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">使用dbt、Amazon红移、红移光谱和AWS Glue的Lakehouse数据建模</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">了解dbt如何在基于AWS构建的现代云数据湖中简化数据转换和模型具体化</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">itnext.io</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk lq mw"/></div></div></a></div><h1 id="19d8" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">入门指南</h1><p id="97b3" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">如果你是亚马逊红移无服务器的新手，第一次从AWS管理控制台尝试该服务时，你会看到“开始使用亚马逊红移无服务器”屏幕(正下方的<em class="le">)，然后是初始设置屏幕(</em>下方的<em class="le">)。</em></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nl"><img src="../Images/f1b412bab5a58e1ae72dd1c36f054423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CeV48IngMk9Ht6mfPeqwRA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">初始“Amazon Redshift无服务器入门”屏幕</figcaption></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/014d5e6660533d55154a86694b8ef694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jS-R-WWMHEUi2kP_At6tCg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">初始设置屏幕</figcaption></figure><p id="681b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您已经在使用Amazon Redshift Serverless，那么在创建新资源时，您将会体验到稍微不同的屏幕。在这两种情况下，Amazon Redshift无服务器资源的设置是相同的。</p><h2 id="ed7a" class="nn lx it bd ly no np dn mc nq nr dp mg kr ns nt mi kv nu nv mk kz nw nx mm ny bi translated">新工作组</h2><p id="f421" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">首先，创建一个新的<a class="ae lf" href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-workgroup-describe.html" rel="noopener ugc nofollow" target="_blank">工作组</a>，比如<code class="fe nz oa ob oc b">tickit-dbt-demo-ns</code>。选择要与Amazon Redshift无服务器关联的VPC。然后，选择相应的VPC安全组。最后，在VPC中选择要与Amazon Redshift无服务器关联的子网。您必须选择至少三个子网。我们将使用三个子网进行演示，每个子网位于不同的可用性区域(AZs)中。</p><p id="b95f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，对于这个演示，如前一篇文章所述，Amazon Redshift Serverless需要访问AWS Glue和Amazon S3。已配置适当的网络来访问这两项服务。为了进行演示，我使用了<a class="ae lf" href="https://docs.aws.amazon.com/vpc/latest/privatelink/concepts.html" rel="noopener ugc nofollow" target="_blank"> VPC端点</a>，它可以在不使用互联网网关、NAT设备、VPN或AWS Direct Connect的情况下，在红移无服务器VPC和这两种服务之间建立连接。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/e1a69fd308de5f44d76710f0774dcc9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z8fFZVqw5Nod93o9AnSxnw.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">创建新的工作组</figcaption></figure><h2 id="392a" class="nn lx it bd ly no np dn mc nq nr dp mg kr ns nt mi kv nu nv mk kz nw nx mm ny bi translated">基本RPU容量</h2><p id="83e8" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">设置工作组的<a class="ae lf" href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-capacity.html" rel="noopener ugc nofollow" target="_blank">基本RPU产能</a>。默认情况下，基本RPU容量设置为128个rpu，但范围可以从32个rpu到512个rpu，增量为8个rpu。设置较高的基本容量可以提高计算密集型数据处理作业的查询性能。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/93102aec9d8597d311cd9f68766464eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*doZg1VatJk_eOSzSIAAbNw.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">设置工作组的基本RPU容量</figcaption></figure><h2 id="d54e" class="nn lx it bd ly no np dn mc nq nr dp mg kr ns nt mi kv nu nv mk kz nw nx mm ny bi translated">新命名空间</h2><p id="1a52" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">接下来，创建一个新的<a class="ae lf" href="https://docs.aws.amazon.com/redshift/latest/mgmt/serverless-console-namespace-config.html" rel="noopener ugc nofollow" target="_blank">名称空间</a>，比如<code class="fe nz oa ob oc b">tickit-dbt-demo-ns</code>。我建议定制管理员用户的数据库凭证——创建一个具有安全密码的唯一数据库用户。稍后，我们将创建一个专门供dbt使用的用户和组。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/1c02580124a02810db99ef9405c776ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7ulfRJZrTbfkSvCH4NXNA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">创建新的命名空间</figcaption></figure><p id="54dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建新的工作组和命名空间应该只需要几分钟的时间。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/69a9319d571a95e52ae3399aee6dc642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xJwU-1FqjK7nuUVMvKHcRQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">无服务器仪表板</figcaption></figure><p id="a523" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦该过程完成，我们应该会在Amazon Redshift无服务器仪表板上看到一条消息。新的名称空间和工作组现在应该可用了。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/ac2c26e590cf0d529de18afc800d7afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MEWWPHQHzn7Sxo4voUu1rQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">无服务器仪表板</figcaption></figure><h2 id="8827" class="nn lx it bd ly no np dn mc nq nr dp mg kr ns nt mi kv nu nv mk kz nw nx mm ny bi translated">公众可访问性</h2><p id="670f" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们需要让公众能够从VPC以外的地方访问Amazon Redshift Serverless，从本地ide或dbt云访问它。编辑新工作组并启用“打开公共访问”当我们第一次创建工作组时，此选项不可用。</p><p id="073a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保正确配置指定的VPC安全组，仅允许来自您的IP地址或其他指定用户的IP地址的流量到达端口<code class="fe nz oa ob oc b">5439</code>至关重要。对于来自dbt Cloud的访问，dbt将提供一个<a class="ae lf" href="https://docs.getdbt.com/docs/deploy/regions-ip-addresses" rel="noopener ugc nofollow" target="_blank">IP地址列表</a>，您需要使用<code class="fe nz oa ob oc b">/32</code> CIDR后缀将其添加到您的安全组。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/7445c966625cddbd71e6d9c0e4126d80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*znoJ-ZX02kb8fAsJI4nvrA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">更新“可公开访问”设置</figcaption></figure><h2 id="e4f6" class="nn lx it bd ly no np dn mc nq nr dp mg kr ns nt mi kv nu nv mk kz nw nx mm ny bi translated">新数据库、模式、用户、组和授权</h2><p id="8f0d" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">与前一篇文章中的<a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/lakehouse-data-modeling-using-dbt-amazon-redshift-redshift-spectrum-and-aws-glue-fdc5629c3df8">相同，创建两个所需的模式，即<code class="fe nz oa ob oc b">dbt</code>用户和组，应用适当的授权，并分配模式所有权。</a></p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="c4cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成这些任务最简单的方法是从<a class="ae lf" href="https://aws.amazon.com/redshift/query-editor-v2/" rel="noopener ugc nofollow" target="_blank"> Amazon Redshift查询编辑器v2.0 </a>。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/13250d2e691b4a8cc9d484121234150c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*noPOuBLjF-OJKUZ1oBr8XQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">亚马逊红移查询编辑器2.0版</figcaption></figure><h2 id="c397" class="nn lx it bd ly no np dn mc nq nr dp mg kr ns nt mi kv nu nv mk kz nw nx mm ny bi translated">端点配置</h2><p id="5aaa" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">要配置dbt核心(dbt CLI)、IDE或dbt云，您需要新的Amazon Redshift无服务器工作组的端点主机名、端口和数据库。这些信息以及可选的JDBC和ODBC连接字符串可从工作组的配置页面获得。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/3470845134c73266fe4807fc32a95629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSQqlIkvYYolVSXGT9d78g.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">带有连接信息的工作组配置页面</figcaption></figure><p id="f9c0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如<a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/lakehouse-data-modeling-using-dbt-amazon-redshift-redshift-spectrum-and-aws-glue-fdc5629c3df8">上一篇文章</a>所示，使用Amazon Redshift无服务器端点信息配置您的本地dbt核心环境或dbt云。要在本地测试连接，使用<code class="fe nz oa ob oc b">dbt debug</code>命令。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi of"><img src="../Images/95e1f114522e01548b81318542466b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AcEHfEttcRYNX6cTMlHEQg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">使用dbt调试命令确认配置</figcaption></figure><p id="ed39" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！从调配的Amazon Redshift集群切换到Amazon Redshift无服务器集群非常容易。</p><h1 id="eebd" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">使用dbt</h1><p id="0100" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">将dbt与Amazon Redshift Serverless一起使用与在<a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/lakehouse-data-modeling-using-dbt-amazon-redshift-redshift-spectrum-and-aws-glue-fdc5629c3df8">上一篇文章</a>中使用的预配置Amazon Redshift集群相同。从dbt CLI或使用dbt Cloud，我们可以重新编译我们的模型，并将它们重新具体化为新的亚马逊红移无服务器工作组的<code class="fe nz oa ob oc b">demo</code>数据库中的表和视图。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi of"><img src="../Images/53a0627ef0746854caaf33c24eb21d37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IhM4tddVnILHL69x9eQPBg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">创建临时层的模型</figcaption></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi of"><img src="../Images/718917920b67be5db7f15f80c4b4c7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33GVjVpAV9Z2h47RGJEeBA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">创建中间层的模型</figcaption></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi of"><img src="../Images/2f32f85a99fa9f811eb83fe4ea3c93b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qV-sHik58Zn0UwPiF-izg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">创建集市层的模型</figcaption></figure><p id="f33b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回到Amazon Redshift查询编辑器v2.0，我们现在应该观察新的<code class="fe nz oa ob oc b">demo</code>数据库中的模式。在<code class="fe nz oa ob oc b">tickit_demo</code>模式中，我们应该观察总共四个表和九个视图。下面可以看到另外四个视图，它们来自一个不相关的dbt包。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi og"><img src="../Images/e8327abaf00b84f81675cb9d0e3c03d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FTC7NVzFGKwAQempBGYssA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">亚马逊红移查询编辑器2.0版</figcaption></figure><h1 id="6679" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">dbt云</h1><p id="e590" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">在dbt云中使用Amazon Redshift Serverless的体验等同于预配Redshift。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/fce21c46f7af96d846e38bc96f62e122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wixsYcearVprx8cBNpGZMA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">dbt云开发选项卡</figcaption></figure><p id="10a5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有命令的工作方式相同。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/2aa0a73585e1671b83c96e040ae826b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8PVY5kg4zwl-hSORAgFDVQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">dbt云运行</figcaption></figure><h1 id="f6ca" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">无服务器监控亚马逊红移</h1><p id="10c8" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">AWS通过Amazon Redshift Serverless提供了各种日志记录和监控功能。我们可以应用各种细粒度过滤器来细化我们的数据库视图和查询指标。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/e5314a4a308f0aa1e7c35bebe8c2f9dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JN-sc1WzSLdZvR01RxHSgg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">Amazon Redshift无服务器查询和数据库监控</figcaption></figure><p id="ab4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以轻松地监控我们对红移处理单元(rpu)的使用。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/8db5c802602b901afa9f390050ea9448.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dEhF2aK-DqzAGW6prqMg-w.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">监控红移处理单元(rpu)</figcaption></figure><p id="9c09" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，AWS提供了对针对Amazon Redshift Serverless执行的每个查询的查询统计数据和细节的轻松访问。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nm"><img src="../Images/c12df28108b0b450e9bb9772e68f7321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTHS5-RWMBKtPdd04dJO4A.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">单个查询详细信息</figcaption></figure><h1 id="0f19" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="508f" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">在这篇简短的后续文章中，我们探索了dbt与亚马逊红移无服务器系统的集成。您可能会发现一些特定的使用案例，在这些案例中，Amazon Redshift Serverless是一款比预配Amazon Redshift更合适的分析工具。无论哪种方式，您都可以通过简单地编写SQL <code class="fe nz oa ob oc b">SELECT</code>语句来使用dbt转换数据。</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="847e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">这篇博客代表我的观点，而不是我的雇主亚马逊网络服务公司(AWS)的观点。所有产品名称、徽标和品牌都是其各自所有者的财产。除非另有说明，所有图表和插图都是作者的财产。</em></p></div></div>    
</body>
</html>