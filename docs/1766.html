<html>
<head>
<title>Using AAD Pod Identity in your Azure Kubernetes Clusters — what to watch out for!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在您的Azure Kubernetes集群中使用AAD Pod标识—需要注意什么！</h1>
<blockquote>原文：<a href="https://itnext.io/using-aad-pod-identity-in-your-azure-kubernetes-clusters-what-to-watch-out-for-73d5d73960f?source=collection_archive---------3-----------------------#2019-01-22">https://itnext.io/using-aad-pod-identity-in-your-azure-kubernetes-clusters-what-to-watch-out-for-73d5d73960f?source=collection_archive---------3-----------------------#2019-01-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/cf7ed43032d8501853b4c6687548890a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbDD6xkK2hQs3Om7SB-MvA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">尼克·吉奥在<a class="ae jd" href="https://unsplash.com/search/photos/broken-container?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><div class=""><h2 id="77cb" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">关于如何将pods连接到azure服务，同时又不影响安全的几点建议。</h2></div><h2 id="7c3f" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">TL；DR:对于某些类型的环境/工作负载，AAD Pod身份的默认实施可能不够安全。如果您关心安全性，您将需要超越“kubectl apply -f…”。</h2><p id="6f45" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Azure一直在改进其产品，以支持上下文认证。这是由一个名为<a class="ae jd" href="https://docs.microsoft.com/en-gb/azure/active-directory/managed-identities-azure-resources/overview" rel="noopener ugc nofollow" target="_blank">托管身份</a>的功能提供支持的，简单来说，它允许您为Azure计算(即AKS、虚拟机、应用服务等)分配一个身份。然后，该计算机内的应用程序可以请求访问令牌来访问其他Azure服务，如Sql Azure数据库或KeyVault实例。</p><p id="b5b2" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">不涉及太多细节，这是基于Azure <a class="ae jd" href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/instance-metadata-service" rel="noopener ugc nofollow" target="_blank">实例元数据API </a>。一个HTTP端点，当在启用此功能的Azure compute内部调用时，它返回一个新的访问令牌。调用它的URL如下所示:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b683" class="kv kw jg mu b gy my mz l na nb"><a class="ae jd" href="http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&amp;resource=https://management.azure.com/" rel="noopener ugc nofollow" target="_blank">http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01&amp;resource=https://management.azure.com/</a></span></pre><p id="dacc" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">具体来说，在这种情况下，应用程序中的连接字符串不是数据库的“固定”用户名和密码，而是使用运行时生成的访问令牌。可以在<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-connect-msi" rel="noopener ugc nofollow" target="_blank">这里</a>找到一个来自官方文档的为应用服务和Sql Azure设置这个的例子。</p><p id="b42d" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">这个想法非常有趣，并为您的应用程序提供了一些安全优势，例如:</p><ul class=""><li id="4e3d" class="nc nd jg lt b lu mk lx ml le ne li nf lm ng mj nh ni nj nk bi translated"><strong class="lt jh">上下文安全:</strong>对azure资源的访问基于只能从azure内的计算(AK、虚拟机、应用服务等)获取的访问令牌。因此，这将毫不费力地帮助你保持你的环境隔离。为了保持所有SDLC的一致性，您甚至可以使用他们的<a class="ae jd" href="https://www.nuget.org/packages/Microsoft.Azure.Services.AppAuthentication" rel="noopener ugc nofollow" target="_blank"> SDK </a>在本地模拟这种行为。</li><li id="b52a" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj nh ni nj nk bi translated"><strong class="lt jh">需要维护的秘密更少，即攻击面减少:</strong>无需考虑连接字符串或SAS密钥的秘密轮换。每个令牌都是由实例元数据API根据需要自动生成的。</li><li id="e72f" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj nh ni nj nk bi translated"><strong class="lt jh">访问令牌的自动轮换:</strong>所提供的令牌的生存期(TTL)默认为60分钟。然后在过期后自动旋转。</li></ul><p id="d0ae" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">去年，微软启动了一个开源项目，将这个概念引入Kubernetes集群，允许你将Azure Managed Identity绑定到一个正在运行的Pod，它的名字是<a class="ae jd" href="https://github.com/Azure/aad-pod-identity" rel="noopener ugc nofollow" target="_blank"> aad-pod-identity </a>。</p><p id="7aca" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">为了使这里提出的安全问题更清楚，我们将考虑一个多工作负载集群，由至少两个不同的团队共享。他们中的每一个都负责自己的管道、名称空间(在集群中)和资源组(在Azure中)，所有这些都经过了正确的配置，并且考虑到了最少的特权。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/884047cb133fb0641d0740d76fd0ed13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TNwE4bItyal0lpSghbj3Wg.png"/></div></div></figure><p id="9e7c" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">绿色方框代表集群控制平面，而蓝色方框代表Azure控制平面。红色虚线矩形表示A团队应该可以访问的内容，而蓝色虚线矩形表示b团队。</p><p id="9b53" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">上述方法背后的想法是深入实现安全性。确保在任何点受到损害时，它都保持在其附近区域内，并且不会接管整个集群或Azure资源。为了达到这个目标，有很多事情需要做，这超出了本文的范围。这里的目标是强调AAD Pod身份可能会使其更难实现。</p><h1 id="7dde" class="nr kw jg bd kx ns nt nu la nv nw nx ld km ny kn lh kp nz kq ll ks oa kt lp ob bi translated">AAD Pod身份识别是如何工作的？</h1><p id="28c3" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">在进一步讨论之前，首先了解它们是如何结合在一起的，这一点很重要。</p><p id="73b3" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">一旦部署，aad-pod-identity将为您的集群添加一些新功能:</p><h2 id="f44e" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">nomiddleinitial无中名的姓名首字母缩写</h2><p id="9982" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">节点管理身份是一个daemonset，它从每个节点劫持(是的，这与中间人攻击几乎相同)对Azure的Instance Metadata API的所有调用，并通过调用MIC来处理这些调用。</p><h2 id="8423" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">最低抑菌浓度</h2><p id="d7c1" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">托管身份控制器是一个pod，它调用Azure的实例元数据API，缓存本地令牌以及身份和pod之间的映射。</p><h2 id="1e7d" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">AzureIdentity</h2><p id="d230" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">一种新的客户资源类型，代表Kubernetes内部的Azure身份。</p><h2 id="8236" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">AzureIdentityBinding</h2><p id="d6dc" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">一种新的客户资源类型，使用标签将Azure Identities链接到群集中的pod。</p><p id="393c" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">示例应用程序如下所示:</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/05ee49cdbe8691b27f5e5d3096fdb521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AwU7T5DXBho98tacAkg2w.png"/></div></div></figure><p id="62a3" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">有几件事值得注意；</p><ol class=""><li id="2a59" class="nc nd jg lt b lu mk lx ml le ne li nf lm ng mj od ni nj nk bi translated">AzureIdentity和Pod之间的关联，通过标签实现。</li><li id="0897" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj od ni nj nk bi translated">当前版本<strong class="lt jh">要求</strong>azure entity和AzureIdentityBinding对象驻留在默认命名空间中。有<a class="ae jd" href="https://github.com/Azure/aad-pod-identity/pull/140" rel="noopener ugc nofollow" target="_blank">工作在进行中</a>允许它们被命名，然而，它还没有登陆。</li></ol><h1 id="4859" class="nr kw jg bd kx ns nt nu la nv nw nx ld km ny kn lh kp nz kq ll ks oa kt lp ob bi translated">需要注意的场景</h1><p id="3c9d" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">以下是滥用该项目的默认设置可能导致横向移动和权限提升的场景。</p><p id="0c8d" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">其中一些考虑因素可能与您相关，也可能不相关。这在很大程度上取决于您的安全姿态和您的用例。例如，如果您的集群中只有一个应用程序，所有应用程序共享一个Azure身份，或者如果一般来说“最低特权”在您的优先级列表中不算高。:)</p><h2 id="e398" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">1)重用绑定选择器</h2><p id="03a4" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">通过对customer-pod中的aadpodidbinding标签重复使用相同的值，流氓pod将被链接到客户身份。现在，如果它从实例元数据API请求访问令牌，它将被授予一个令牌，允许它执行Azure中允许客户身份的任何操作:</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/b593087dfbea7173a9c383d1f372960c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRYqmfjINLNbhmJju5Rp5Q.png"/></div></div></figure><p id="d18d" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">在这种情况下，对默认命名空间具有读取权限并对群集中的任何其他位置具有创建pod权限的受损帐户将能够代表客户经理身份获取访问令牌。</p><p id="1f1f" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">更有可能发生这种情况的是，AzureIdentity和它的绑定都在一个共享的名称空间中。这意味着多个团队/应用程序可以访问它，即使只是只读的。</p><h2 id="2436" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">2)创建新的Azure身份绑定</h2><p id="6065" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">与上面的场景类似，可以创建一个新的AzureIdentityBinding，链接到现有的客户AzureIdentity。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/30716865c0e9a01786ef44d22216ef36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YSP2Ai-r15ifPRwDl4PSvg.png"/></div></div></figure><p id="bf33" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">此时，必须在默认命名空间中创建AzureIdentityBinding对象。一旦<a class="ae jd" href="https://github.com/Azure/aad-pod-identity/pull/140" rel="noopener ugc nofollow" target="_blank">名称空间得到支持</a>，如果注释forceNamespaced没有设置为true，它也可以部署在其他名称空间中。</p><p id="0901" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">在这种情况下，尝试横向移动的受损帐户将需要对默认命名空间的pod读取和AzureIdentity/Binding写入访问，并在群集内的任何其他位置创建pod访问。</p><h2 id="2cb6" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">3)创建新的AzureIdentity和AzureIdentityBinding</h2><p id="1370" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">上面场景的另一个版本。但是，这次创建了AzureIdentity和AzureIndentityBinding，指向prod-customer-rg资源组中的托管身份。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi og"><img src="../Images/86123fb9731c9e23189d729a747869e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EkFLIyHh9TCMbcCWDW-peg.png"/></div></div></figure><p id="623f" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">访问权限和威胁向量与前面的场景非常相似。</p><h2 id="9710" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">4)对NMI的窃听请求</h2><p id="b35f" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">NMI pod“拦截”对实例元数据API的所有请求，并在内部进行处理。但是，这些流量都不是使用安全通道(TLS)发送的。访问令牌总是以纯文本的形式传输。</p><p id="c60c" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">具有NET_ADMIN功能的特权pods可以窃听在同一节点上安排的任何网络流量，这可以受益于在周围发送的纯文本敏感信息。在这种情况下，更糟糕的是端点地址是众所周知的。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/0a4d1dafaa22f3c1fafe0107a9e8f3a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cTCywRrLBeZc-X_ZUgdXjw.png"/></div></div></figure><p id="31a4" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">请注意，如果群集配置为启用了托管身份，NMI窗格将与Azure实例元数据对话。如果不是，它将改为与Azure AD沟通，在这种情况下，部分沟通将在TLS下进行(从nmi到Azure AD)，部分不会(从请求pod到nmi)。</p><p id="9a5b" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">这比以前的场景要复杂一点，尽管它只需要受影响的帐户拥有create pod访问权限。绝不能有任何东西阻止特权阶层的产生——这是默认行为。</p><p id="1fd6" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">请注意，部署流氓pod的名称空间并不重要。特权pod超越了这种隔离级别，将可以访问其预定节点内的所有流量。</p><h2 id="182f" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">5)获得AKS认证</h2><p id="e3b1" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">目前，AKS以纯文本方式存储用于集群与Azure API对话的SPN(服务主体名称)凭据。该文件在每个节点中都可以使用。这是一个众所周知的问题，我不久前在博客中提到过。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oi"><img src="../Images/dc81b40c836ba1f78ff078d1e3f026ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbe_AoL4D22QHMXiVdbvBg.png"/></div></div></figure><p id="3ebd" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">MIC pod会将该文件安装到自身中，因此，对MIC具有执行访问权限的任何用户(或服务帐户)都可以通过一行代码访问该文件:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="c1f4" class="kv kw jg mu b gy my mz l na nb">kubectl exec MIC-NAME -- cat /etc/kubernetes/azure.json</span></pre><p id="f6f5" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">请注意，aad-pod-identity上提供的现有模板将其所有组件放在默认命名空间中。</p><p id="dc73" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">这里的威胁向量是在默认命名空间中具有pod execute访问权限的任何用户或服务帐户，它们将能够权限升级，至少能够访问集群中的所有Azure资源。例如，它可以操作节点虚拟机、负载平衡器、网络安全组(NSG)等。</p><p id="87d2" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">这也可能是AKS-Engine上的一个问题，如果它是用useManagedIdentity = false设置的。</p><h1 id="6c56" class="nr kw jg bd kx ns nt nu la nv nw nx ld km ny kn lh kp nz kq ll ks oa kt lp ob bi translated">推荐</h1><p id="31bd" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">这里的总体问题是集群控制平面和Azure控制平面之间的横向移动有多容易，毕竟，对于非管理员用户来说，上述场景都不需要集群管理员权限。</p><p id="7280" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">以下建议涵盖了上述实施AAD Pod身份的场景。但它也专注于改善集群内的隔离。是这样的:</p><ul class=""><li id="65de" class="nc nd jg lt b lu mk lx ml le ne li nf lm ng mj nh ni nj nk bi translated">不要将敏感资源存储在跨应用程序共享的Kubernetes命名空间中。如果是这样，请确保您具有精细的权限，以确保角色只能访问他们真正需要的内容。</li><li id="d506" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj nh ni nj nk bi translated">严格控制集群的RBAC。密切监控角色和角色绑定(及其集群级对应部分)的变化。</li><li id="e443" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj nh ni nj nk bi translated">使用pod security策略来限制特权pod的创建。</li><li id="bc3f" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj nh ni nj nk bi translated">密切监控特权吊舱的可疑行为。</li><li id="a7a4" class="nc nd jg lt b lu nl lx nm le nn li no lm np mj nh ni nj nk bi translated">锁定AzureIdentity和AzureIdentity将对象绑定到其应用程序命名空间。此外，一旦该功能可用，将forceNamespaced设置为true。让它看起来像这样:</li></ul><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/4f9f5a690c828b2d52b850f46d4e284b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dN2dH-ILGEp2YItxj-OXDQ.png"/></div></div></figure><h1 id="b025" class="nr kw jg bd kx ns nt nu la nv nw nx ld km ny kn lh kp nz kq ll ks oa kt lp ob bi translated">经过思考…</h1><p id="1932" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">大约二十年前，在微软的安全文献中发现<a class="ae jd" href="https://docs.microsoft.com/en-us/previous-versions/ms995349(v=msdn.10)" rel="noopener ugc nofollow" target="_blank">引用</a>到<strong class="lt jh"> SD3+C </strong>是很常见的。这个概念是:设计安全、默认安全、部署安全和通信安全的简称。基本概念意味着对软件开发中的安全性有一个更全面的看法。</p><p id="22cf" class="pw-post-body-paragraph lr ls jg lt b lu mk kh lw lx ml kk lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">这一概念在当时和现在都是有效的，尤其是当安全性在您的优先级列表中处于较高位置时。然而，很明显，在相当多的开源项目(包括Kubernetes)中，默认安全并不是“首要考虑的”，这需要最终用户提供更多的专业知识来安全地实现它们。</p></div></div>    
</body>
</html>