<html>
<head>
<title>Understanding Reflection and Annotations in Dart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Dart中的反射和注释</h1>
<blockquote>原文：<a href="https://itnext.io/understanding-reflection-and-annotations-in-dart-f1e28efdb064?source=collection_archive---------1-----------------------#2019-06-24">https://itnext.io/understanding-reflection-and-annotations-in-dart-f1e28efdb064?source=collection_archive---------1-----------------------#2019-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e8a4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">编写复杂软件的更简洁的方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c3e8a46435a1989da76fc2dc56a5ce34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2sox1y0AVEhsNcLz1LBsgA.png"/></div></div></figure><p id="6c37" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个视频中，我们将探讨反射的主题，以及如何使用它来编写更干净的软件。反射允许我们在运行时检查和修改程序的结构和行为。我们将使用<strong class="kt ir"> dart:mirrors </strong>库，它包含了实现这一点的帮助类和函数。最后，我们将看一个带有<strong class="kt ir">注释</strong>的常见用例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><h1 id="36fd" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">带反射的基本示例</h1><p id="f76b" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">创建一个<code class="fe mm mn mo mp b">main.dart</code>文件，并从导入我们的<strong class="kt ir"> dart:mirrors </strong>依赖项开始。在我们实现我们的反射逻辑之前，让我们也用我们希望调用的方法定义一个类:</p><pre class="kg kh ki kj gt mq mp mr ms aw mt bi"><span id="7960" class="mu lq iq mp b gy mv mw l mx my"><strong class="mp ir">import 'dart:mirrors';</strong></span><span id="100e" class="mu lq iq mp b gy mz mw l mx my"><strong class="mp ir">main</strong>() { <br/>  <strong class="mp ir">// TODO: Implement Reflection logic </strong><br/>} </span><span id="d0a9" class="mu lq iq mp b gy mz mw l mx my">// Our example class to reflect on <br/>class <strong class="mp ir">Endpoint</strong> { <br/>  handle() =&gt; print('Request received'); <br/>}</span></pre><p id="9e35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了反映类型和对象，我们有三种方法可以使用:</p><ol class=""><li id="1a04" class="na nb iq kt b ku kv kx ky la nc le nd li ne lm nf ng nh ni bi translated"><code class="fe mm mn mo mp b"><strong class="kt ir">reflect()</strong></code>:反映一个类的实例</li><li id="6c99" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated"><code class="fe mm mn mo mp b"><strong class="kt ir">reflectClass()</strong></code>:反映在一个类声明上</li><li id="d01a" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nf ng nh ni bi translated"><code class="fe mm mn mo mp b"><strong class="kt ir">reflectType()</strong></code>反映作为参数传入的类型</li></ol><p id="d15d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的用例中，我们将使用。让我们实例化<code class="fe mm mn mo mp b">Endpoint</code>并通过反射调用句柄方法:</p><pre class="kg kh ki kj gt mq mp mr ms aw mt bi"><span id="64e7" class="mu lq iq mp b gy mv mw l mx my">main() { <br/>  var reflectedClass = <strong class="mp ir">reflect</strong>(Endpoint()); </span><span id="ef81" class="mu lq iq mp b gy mz mw l mx my">  // Invoke the handle() method    <br/>  reflectedClass.<strong class="mp ir">invoke</strong>(Symbol('<strong class="mp ir">handle</strong>'), []); <br/>}</span></pre><p id="96ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后让我们运行这个文件:</p><pre class="kg kh ki kj gt mq mp mr ms aw mt bi"><span id="602c" class="mu lq iq mp b gy mv mw l mx my"><strong class="mp ir">$</strong> dart /path/to/main.dart</span></pre><p id="ff08" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">反射实例为我们提供了一个公开<code class="fe mm mn mo mp b">invoke()</code>方法的<code class="fe mm mn mo mp b">InstanceMirror</code>。我们实例的成员被描述为<code class="fe mm mn mo mp b">Symbol</code>类型。上面的例子通过传递它的<code class="fe mm mn mo mp b">Symbol</code> ic名和一个位置参数数组(如果指定了的话)来调用handle方法。</p><p id="f6ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了传递参数，让我们修改<code class="fe mm mn mo mp b">handle()</code>方法的签名:</p><pre class="kg kh ki kj gt mq mp mr ms aw mt bi"><span id="8fa9" class="mu lq iq mp b gy mv mw l mx my">handle(<strong class="mp ir">String a</strong>) =&gt; print('Request received <strong class="mp ir">$a</strong>');</span></pre><p id="efe5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并将它传递给调用:</p><pre class="kg kh ki kj gt mq mp mr ms aw mt bi"><span id="58eb" class="mu lq iq mp b gy mv mw l mx my">reflectedClass.<strong class="mp ir">invoke</strong>(Symbol('handle'), [<strong class="mp ir">'argument 1'</strong>]); <br/>// =&gt; Request received argument 1</span></pre><p id="6c25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您也可以使用文字形式的<code class="fe mm mn mo mp b">handle()</code>符号:</p><pre class="kg kh ki kj gt mq mp mr ms aw mt bi"><span id="6842" class="mu lq iq mp b gy mv mw l mx my">reflectedClass.invoke(<strong class="mp ir">#handle</strong>, ['argument 1']);</span></pre><p id="2af7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果方法名作为一个操作的值被接收或者作为用户输入被提供，那么您可以使用<code class="fe mm mn mo mp b">Symbol('methodName')</code>方法。<em class="no">理想地当你</em> <strong class="kt ir"> <em class="no">不</em> </strong> <em class="no">预先知道该调用的方法。</em></p><p id="8504" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">查看上面视频中的完整教程。</p><p id="a87c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">→ <a class="ae np" href="https://gist.github.com/graphicbeacon/9fb6c6a951168d6a31d9b2cc442bcbe2" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">获取源代码</strong> </a></p><h1 id="68ce" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">进一步阅读</h1><ul class=""><li id="4aad" class="na nb iq kt b ku mh kx mi la nq le nr li ns lm nt ng nh ni bi translated"><a class="ae np" href="https://api.dart.dev/stable/2.4.0/dart-mirrors/dart-mirrors-library.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">镖:镜像</strong>库文档</a></li><li id="e95e" class="na nb iq kt b ku nj kx nk la nl le nm li nn lm nt ng nh ni bi translated"><a class="ae np" href="https://creativebracket.com/dart-and-mongodb-tutorial-1" rel="noopener ugc nofollow" target="_blank"> Dart和MongoDB教程#1:使用mongo_dart包</a></li></ul></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><h1 id="07f6" class="lp lq iq bd lr ls ob lu lv lw oc ly lz jw od jx mb jz oe ka md kc of kd mf mg bi translated">最后一件事…</h1><p id="3a5d" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">非常感谢我收到的越来越多的兴趣、支持和反馈！</p><p id="3ec4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有鉴于此，我今天推出了<a class="ae np" href="https://bit.ly/creativebracketmerch" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">官方商城</strong> </a>。这是一个很好的机会成为运动的一部分，并保持火焰🔥真实的这将推动高质量内容的生产，涵盖的主题将超越“hello world”应用。</p><p id="a6b5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我还在YouTube频道上点击了800多个订户。<a class="ae np" href="https://youtube.com/CreativeBracket" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">点击订阅并响铃通知</strong> </a>如果你还没有。我计划很快做一个关于代码生成的系列文章。</p><p id="0e87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">喜欢、分享并关注</strong>我，了解Dart的更多内容。<em class="no">谢谢。</em></p><p id="07c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="no">原载于</em><a class="ae np" href="https://creativebracket.com/understanding-reflection-and-annotations-in-dart/" rel="noopener ugc nofollow" target="_blank"><em class="no">creativebracket.com</em></a><em class="no">。</em></p></div></div>    
</body>
</html>