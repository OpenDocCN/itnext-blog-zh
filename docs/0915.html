<html>
<head>
<title>Creating a Task Management Application with Grunt and CoffeeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Grunt和CoffeeScript创建任务管理应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/creating-a-task-management-application-with-grunt-and-coffeescript-3266fe65c4d0?source=collection_archive---------2-----------------------#2018-06-17">https://itnext.io/creating-a-task-management-application-with-grunt-and-coffeescript-3266fe65c4d0?source=collection_archive---------2-----------------------#2018-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="111d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们谈论软件开发时，一般来说，诸如web设计或让某些任务的执行在浏览器中完成(使应用程序更具执行性)等需求对前端框架的要求要高得多。</p><p id="19c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多技术都为此做出了贡献:从CSS预处理程序，如<a class="ae kl" href="https://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"> Sass </a>和<a class="ae kl" href="http://lesscss.org/" rel="noopener ugc nofollow" target="_blank"> Less </a>，它们帮助动态化了以前只有静态的CSS，到压缩、缩小或单元测试库。</p><p id="5800" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，在这个宇宙中仍然产生太多反响的一个主题是任务的自动化，这主要是因为它几乎完全与服务器端联系在一起。</p><p id="61bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在JavaScript世界中，最常用的任务自动化工具之一是<a class="ae kl" href="https://gruntjs.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Grunt </strong> </a>。它诞生的目的是在实践中提高您的项目使用的任何JavaScript材料(包括库和框架)的开发/集成的生产率。</p><p id="645b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Twitter、jQuery和Adobe等许多公司都在他们的项目中使用Grunt，而它可以与多种技术结合使用，如Sass/Less、<a class="ae kl" href="https://handlebarsjs.com/" rel="noopener ugc nofollow" target="_blank"> Handlebars </a>和<a class="ae kl" href="https://coffeescript.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> CoffeeScript </strong> </a>。</p><p id="ef60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">反过来，CoffeeScript引入了我们在CSS处理器中看到的类似的“预编译”概念，但是是针对JavaScript的。通过它，我们可以用一种抽象的、更简单的语言来编译和生成JavaScript。</p><p id="89bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它的语法概念与Ruby之类的语言非常接近，Ruby的第一个版本发布后就吸引了很多人的注意。</p><p id="8d19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，您将主要使用这两种技术，并尝试通过创建一个简单实用的笔记管理应用程序来解决Grunt和CoffeeScript的核心概念，如图1所示。</p><p id="4ca2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同一个应用程序将有一些清单，重点是理解CoffeeScript如何为这种类型的编程模型工作，同时您将看到它与Grunt的集成。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/53114a4d342b7c20f77aae9d824ea1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMWqxy1xg8XaChsXCxBf0A.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc">图一。</strong>任务申请视图</figcaption></figure><h1 id="b059" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">咕哝</h1><p id="8e04" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">简而言之，<em class="mf"> Grunt </em>是一个用于JavaScript项目的基于任务的命令行工具。</p><p id="441e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更详细地说，我们可以说，当处理一个JavaScript项目时，有许多事情需要定期完成，比如缩小文件、运行一些错误检测工具(比如<a class="ae kl" href="http://jshint.com/" rel="noopener ugc nofollow" target="_blank"> JSHint </a>)、运行测试(单一、集成等)。)或实时修改脚本。</p><p id="0b25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您正在将JavaScript代码复制并粘贴到JSHint网站中，您可能会发现使用Grunt有一种更好的方法。即使您正在使用<code class="fe mg mh mi mj b">"cat"</code>对象来连接文件或使用命令行来压缩文件，为您必须完成的所有额外任务提供一个统一的命令集不是很好吗！？</p><p id="b52c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这正是格朗特的提议。有了它，我们可以简单地坚持业务规则和应用程序代码本身，而忘记自动化、生成或管理的重复任务。</p><p id="b377" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，即使分析了我们到目前为止给出的所有概念和例子，许多人仍然认为Grunt是不必要的，在项目中只是作为另一个耗费你时间的工具。因此，让我们考虑一些因素:</p><blockquote class="mk ml mm"><p id="4966" class="jn jo mf jp b jq jr js jt ju jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj kk ij bi translated"><strong class="jp ir">我们真的需要Grunt做的事情吗？</strong></p></blockquote><p id="5acb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大概是的。即使你已经是一个有经验的开发人员，可以处理简单的任务，比如我们快速列出的那些，你可能会使用许多不同的工具来做每一件事Grunt可以帮助你把它们带到相同的环境中。最终，生产力是关键词。</p><blockquote class="mk ml mm"><p id="e43b" class="jn jo mf jp b jq jr js jt ju jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj kk ij bi translated"><strong class="jp ir">但是Grunt运行在Node.js上，你不知道Node… </strong></p></blockquote><p id="d9fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你不需要知道Node.js来使用Grunt，同样你也不需要知道C++来使用Word，或者PHP来使用WordPress。</p><blockquote class="mk ml mm"><p id="8c7c" class="jn jo mf jp b jq jr js jt ju jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj kk ij bi translated"><strong class="jp ir">我们有其他方法来做Grunt做的事情……</strong></p></blockquote><p id="6f78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可能吧，但问题是:<em class="mf">它们都被组织在一个地方，被配置为在需要时自动运行，并为参与您项目的每个人共享吗？</em></p><p id="e3cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Grunt是一个命令行工具，你不知道如何使用这种东西。不幸的是，这实际上是该工具的一个缺点，因为我们没有GUI版本。但是，作为一名开发人员，知道如何处理命令行界面是非常重要的。</p><h1 id="c69f" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">咖啡脚本</h1><p id="0ae1" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">基本上，CoffeeScript是一种编译成JavaScript的小型编程语言。受Ruby和Python等语言的启发，它的语法可以增加源代码的可读性并促进简洁。CoffeeScript的源代码通常比它的JavaScript等价物短得多，这在不牺牲运行时性能的情况下仍然是可能的。</p><p id="676d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">JavaScript框架的优势包括:</p><ul class=""><li id="6a28" class="mq mr iq jp b jq jr ju jv jy ms kc mt kg mu kk mv mw mx my bi translated">CoffeeScript提供了更简洁和一致的语法。大多数开发人员估计，使用CoffeeScript可以减少多达三分之一的最终代码量。</li><li id="b1ad" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">它包含了JavaScript的优点，比如JavaScript的优秀对象模型，同时解决了一些不好的地方，比如去掉了<code class="fe mg mh mi mj b">with</code>语句。</li><li id="8cc0" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">CoffeeScript编译的代码通常和JavaScript代码一样快，甚至更快。</li><li id="422a" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">CoffeeScript提供了许多有用的特性，比如“基于原型的类的修正、对数组和对象的理解、链接的函数文字、安全的词法变量、赋值不匹配”等等。</li></ul><p id="aed4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显然，CoffeeScript有一些缺点，比如在我们得到最终结果之前，在开发人员和JavaScript之间有另一个编译器。作为补偿，它会生成清晰易读的JavaScript代码。</p><p id="75a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，该工具的不断改进使其脱颖而出，并在它没有定义代码调试系统(自版本1.6.1以来已修复)时，从一开始就受到了强烈的批评。</p><p id="0588" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编译器又可以分为两类:运行在JavaScript环境(比如浏览器)中的<em class="mf">核心编译器</em>，以及在命令提示符下实时运行JavaScript的<em class="mf">命令行编译器</em>。</p><h1 id="d27f" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">设置一切</h1><p id="b4a3" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">为了开始我们的应用程序开发，我们需要首先在您的机器上安装一些重要的工具。</p><h2 id="c951" class="ne le iq bd lc nf ng dn li nh ni dp lm jy nj nk lq kc nl nm lu kg nn no ly np bi translated">安装npm</h2><p id="2916" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">由于Grunt是用Node.js构建的JavaScript项目，我们将使用<a class="ae kl" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> npm </strong> </a>进行版本控制。Npm还将用于安装和更新Grunt和<a class="ae kl" href="https://bower.io/" rel="noopener ugc nofollow" target="_blank"> Bower </a>插件(我们将在项目中使用的默认包管理器)。</p><p id="ced0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要安装npm，只需在机器上安装Node.js，因为默认情况下它已经连接到框架。为此，访问<a class="ae kl" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> Node.js下载页面</a>并下载。用于Windows的msi安装文件，根据其版本— 32位或64位(在页面上，您还可以找到用于其他操作系统的安装选项)。</p><p id="37eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行该文件并按照所有步骤执行，不要更改已经默认标记的选项。之后，打开命令提示符并执行以下命令来验证安装是否成功，这一点很重要:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="55a1" class="ne le iq mj b gy nu nv l nw nx">npm -v</span></pre><h2 id="5649" class="ne le iq bd lc nf ng dn li nh ni dp lm jy nj nk lq kc nl nm lu kg nn no ly np bi translated">安装凉亭</h2><p id="e56c" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Bower是前端开发的包经理。它将用于为我们的项目安装客户端库。Bower与npm的相似之处在于，它有助于更容易地安装、升级和配置软件包。</p><p id="29c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">主要区别在于两种工具的实现方式。npm使用嵌套依赖关系树，可以安装一个包的多个版本，而Bower保持依赖关系树扁平，没有嵌套。</p><p id="5893" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这表明使用Bower的每个客户机只需要安装一个依赖版本，从而减少了每个项目对额外空间的需求。</p><p id="e158" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没有Bower，就和传统的从官方网站下载前端库放到项目上一样。不幸的是，这些库不包括自动升级或配置库所需的元数据。使用Bower及其内部缓存，我们将能够根据需要轻松地升级、安装或删除软件包。</p><p id="e4dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦安装了npm，我们可以简单地通过执行以下命令来安装Bower:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="cd41" class="ne le iq mj b gy nu nv l nw nx">npm install –g bower</span></pre><h2 id="b719" class="ne le iq bd lc nf ng dn li nh ni dp lm jy nj nk lq kc nl nm lu kg nn no ly np bi translated">安装咕噜声</h2><p id="4393" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">没有应该在全球范围内安装Grunt的用例。当启动一个新项目时，您必须将其配置为Grunt facet项目，也就是说，告诉您的OS该项目被配置为使用Grunt运行。</p><p id="db70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是首先，只需运行以下命令:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="ea5c" class="ne le iq mj b gy nu nv l nw nx">npm install -g grunt-cli</span></pre><p id="21ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这足以让你的操作系统将Grunt识别为一个正式的操作命令，因为它现在在你的系统变量中。</p><p id="1f99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是这并不是我们创建一个Grunt项目所需要的全部。grunt-cli 负责为我们拥有的每个不同的<em class="mf">grunt文件</em>管理Grunt的最佳版本，允许我们同时拥有多个版本。</p><h1 id="6549" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">创建项目</h1><p id="0c60" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们的下一步是项目的创建和设置。为此，在文件系统中创建一个名为<code class="fe mg mh mi mj b">/notes-app</code>的文件夹。然后，运行以下命令:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="fb90" class="ne le iq mj b gy nu nv l nw nx">npm init</span></pre><p id="6ff0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将创建<code class="fe mg mh mi mj b">package.json</code>文件，这是依赖性管理(对于其他npm配置)所必需的。只要按照要求填写选项，就像我们在清单1 中看到的那样。</p><p id="08fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单1。</strong> package.json文件。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="c9e4" class="ne le iq mj b gy nu nv l nw nx">{<br/>  "name": "notes_app",<br/>  "version": "1.0.0",<br/>  "description": "A simple notes app with Grunt.js and CoffeeScript",<br/>  "main": "index.js",<br/>  "keywords": [<br/>    "gruntjs",<br/>    "coffeescript",<br/>    "npm",<br/>    "js"<br/>  ],<br/>  "author": "Diogo Souza",<br/>  "license": "ISC"<br/>}</span></pre><p id="409a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要将Grunt添加为我们的npm依赖项之一，我们只需运行:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="3220" class="ne le iq mj b gy nu nv l nw nx">npm install grunt --save-dev</span></pre><p id="a4df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在我们的<em class="mf"> devDependencies: </em>中安装最新版本的<em class="mf"> grunt </em>(模块)</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="edd5" class="ne le iq mj b gy nu nv l nw nx">"devDependencies": {<br/>    "babel-core": "^6.26.3",<br/>    "babel-preset-env": "^1.7.0",<br/>    "grunt": "^1.0.3",<br/>    "grunt-babel": "^7.0.0",<br/>    "grunt-contrib-clean": "^1.1.0",<br/>    "grunt-contrib-coffee": "^2.0.0",<br/>    "grunt-contrib-concat": "^1.0.1",<br/>    "grunt-contrib-copy": "^1.0.0",<br/>    "grunt-contrib-cssmin": "^2.2.1",<br/>    "grunt-contrib-htmlmin": "^2.4.0",<br/>    "grunt-contrib-uglify": "^3.3.0",<br/>    "grunt-contrib-watch": "^1.1.0",<br/>    "grunt-usemin": "^3.1.1",<br/>    "load-grunt-tasks": "^4.0.0",<br/>    "matchdep": "^2.0.0"<br/>}</span></pre><p id="8a0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其他依赖项构成了重要的复杂模块，例如用于清理和文件传输操作的<code class="fe mg mh mi mj b">clean/copy</code>、用于缩小的<code class="fe mg mh mi mj b">cssmin/htmlmin</code>、用于驱逐es冲突的<a class="ae kl" href="https://www.npmjs.com/package/grunt-babel" rel="noopener ugc nofollow" target="_blank"> Babel配置</a>等。在你把它们保存到你的文件中之后，不要忘记运行<code class="fe mg mh mi mj b">npm install</code>。</p><blockquote class="mk ml mm"><p id="5261" class="jn jo mf jp b jq jr js jt ju jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj kk ij bi translated">请注意，在您阅读本文时，版本可能已经更改。一定要把它们换成最新的。</p></blockquote><p id="d416" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同时，您可以初始化Bower依赖关系:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="461b" class="ne le iq mj b gy nu nv l nw nx">bower init</span></pre><p id="1807" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个命令将“重用”我们之前插入的npm先前的指令。完成后，运行以下命令，以便将jQuery和Bootstrap依赖项添加到我们的Bower包中(Bower将自动处理jQuery导入，因为它是一个Sass依赖项):</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="545e" class="ne le iq mj b gy nu nv l nw nx">bower install bootstrap-sass</span></pre><blockquote class="mk ml mm"><p id="db58" class="jn jo mf jp b jq jr js jt ju jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj kk ij bi translated">为了正确安装这些依赖项，你需要在你的机器上安装<a class="ae kl" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Git </strong>。</a></p></blockquote><h2 id="7a59" class="ne le iq bd lc nf ng dn li nh ni dp lm jy nj nk lq kc nl nm lu kg nn no ly np bi translated">Gruntfile.js</h2><p id="a4ed" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Gruntfile.js是Grunt配置文件，基本上由清单2 中描述的格式组成。</p><p id="e9b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单2。</strong>grunt file . js配置文件的默认格式。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="01a5" class="ne le iq mj b gy nu nv l nw nx">// constants and functions<br/>module.exports = function(grunt) {<br/>  grunt.initConfig({<br/>     // configs<br/>  });<br/>  // user tasks<br/>}</span></pre><p id="1484" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了简化配置过程，Grunt用户应该理想地存储所有端口、函数和其他常量，这些常量在文件的顶部作为全局变量使用。</p><p id="874d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这确保了如果一个函数或常量突然改变，在顶部编辑全局变量比在文件的每个位置改变它的值要简单得多。</p><p id="1429" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，常数通过为每个未知值指定一个变量名来帮助提供信息。</p><p id="7eb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，Gruntfile将以用户定义的任务列表终止。默认情况下，所有Grunt插件都有各自的任务，可以调用这些任务来执行所需的输出。可以在Gruntfile的末尾引用用户定义的任务来异步运行。</p><p id="d85b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，您可能希望为系统管理员设置一个任务，该任务将通过组合压缩、连接和任务编译来发送web应用程序的生产就绪版本。</p><p id="d964" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以为web开发人员设置一个<code class="fe mg mh mi mj b">"watch"</code>任务，自动编译需要使用build的CoffeeScript或Sass文件。我们来看看<strong class="jp ir">清单3 </strong>。</p><p id="7277" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单3。</strong> Gruntfile初始配置。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="2082" class="ne le iq mj b gy nu nv l nw nx">'use strict';</span><span id="9740" class="ne le iq mj b gy ny nv l nw nx">module.exports = function(grunt) {<br/>   require('load-grunt-tasks')<br/>   require('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks);<br/>   <br/>   var config = {};<br/>   config['watch'] = {<br/>       options: {<br/>           nospawn: true<br/>       },<br/>       coffee: {<br/>           files: ['src/coffee/{,*/}*.coffee'],<br/>           tasks: ['coffee:server']<br/>       },<br/>       compass: {<br/>           files: ['src/styles/{,*/}*.{scss,sass}'],<br/>           tasks: ['compass:server']<br/>       }<br/>   };<br/>   <br/>   config['compass'] = {<br/>       options: {<br/>           sassDir: 'src/styles/sass',<br/>           cssDir: 'src/styles',<br/>           importPath: 'src/bower_components',<br/>           relativeAssets: false<br/>       },<br/>       dist: {},<br/>       server: {}<br/>   };<br/>   <br/>   config['coffee'] = {<br/>       dist: {<br/>           files: [{<br/>               expand: true,<br/>               cwd: 'src/coffee',<br/>               src: '{,*/}*.coffee',<br/>               dest: 'dist/scripts',<br/>               ext: '.js'<br/>           }]<br/>       },<br/>       server: {<br/>           files: [{<br/>               expand: true,<br/>               cwd: 'src/coffee',<br/>               src: '{,*/}*.coffee',<br/>               dest: 'src/scripts',<br/>               ext: '.js'<br/>           }]<br/>       }<br/>   };<br/>   <br/>   // my grunt tasks<br/>   <br/>   grunt.initConfig(config);</span><span id="b36c" class="ne le iq mj b gy ny nv l nw nx">};</span></pre><p id="0d41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个设置明确地告诉Grunt，在对CoffeeScript和Sass文件进行任何直接更改之后，必须重新创建和更新哪些文件，这些文件将分别位于<em class="mf"> /coffee </em>和<em class="mf"> /css </em>文件夹中。</p><p id="fe8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，只有在你的电脑上安装了最新版本的<a class="ae kl" href="https://rubyinstaller.org/downloads/" rel="noopener ugc nofollow" target="_blank">红宝石</a>和<a class="ae kl" href="http://compass-style.org/install/" rel="noopener ugc nofollow" target="_blank">指南针</a>的情况下，它才能工作。安装Ruby后，<code class="fe mg mh mi mj b">gem</code>命令将自动可用。</p><p id="011d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也可以看到两个任务的创建:<code class="fe mg mh mi mj b">compass</code>和<code class="fe mg mh mi mj b">coffee</code>。两者都将分别处理CSS和CoffeeScript文件的部署。请注意，在第一条语句中，我们只是创建了对您的目录的引用，在那里您可以找到Sass依赖CSS文件，并且不接受相对路径来处理导入。</p><p id="aea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第二个示例中，我们创建了<code class="fe mg mh mi mj b">grunt-contrib-coffee</code>任务，并分发了部署和服务器文件。通过<code class="fe mg mh mi mj b">src</code>、<code class="fe mg mh mi mj b">dest</code>和<code class="fe mg mh mi mj b">cwd</code>选项可以查看相同的目录特征。</p><p id="8893" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">读者还应该注意，这些是您在处理文件时需要操作的文件夹。如果你想改变他们的名字，请随意。</p><p id="9dba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，执行以下命令启动控制台中的<em class="mf">“watch”</em>:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="027c" class="ne le iq mj b gy nu nv l nw nx">grunt watch</span></pre><p id="b112" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将启动我们之前创建的<code class="fe mg mh mi mj b">grunt-contrib-watch</code>线程，并在一个无限循环中检查无论何时你对文件进行更改，CSS和JS各自的文件也将生成。现在，让它在后台运行。</p><p id="2353" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为实现中的第一个实际变化，我们将导航到<code class="fe mg mh mi mj b">src/styles/sass</code>文件，并在其中包含以下代码片段:</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="e847" class="ne le iq mj b gy nu nv l nw nx">@import 'bootstrap-sass/lib/bootstrap.scss';</span></pre><p id="c59f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将负责将引导CSS依赖项导入CSS文件。请注意，保存文件后，将在<code class="fe mg mh mi mj b">src/styles</code>文件夹中创建一个新的<code class="fe mg mh mi mj b">main.css</code>文件(作为<em class="mf">“观察”</em>的结果)，其中包含我们在示例中需要的所有CSS内容。</p><p id="8716" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到Gruntfile.js，让我们参考<strong class="jp ir">清单4 </strong>的其余内容。</p><p id="4ca1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单4。Gruntfile.js的其余部分</strong></p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="992f" class="ne le iq mj b gy nu nv l nw nx">config['clean'] = {<br/> build: {<br/>  files: [{<br/>   dot: true,<br/>   src: [<br/>    'dist/*',<br/>    '!dist/.git*'<br/>   ]<br/>  }]<br/> }<br/>};</span><span id="3efd" class="ne le iq mj b gy ny nv l nw nx">config['useminPrepare'] = {<br/> options: {<br/>   dest: 'dist'<br/> },<br/> html: 'src/index.html'<br/>};</span><span id="8bf1" class="ne le iq mj b gy ny nv l nw nx">config['usemin'] = {<br/> options: {<br/>   dirs: ['dist']<br/> },<br/> html: ['dist/{,*/}*.html']<br/>};</span><span id="2c18" class="ne le iq mj b gy ny nv l nw nx">config['htmlmin'] = {<br/> dist: {<br/>  options: {<br/>   collapseBooleanAttributes: true,<br/>   removeAttributeQuotes: true,<br/>   removeRedundantAttributes: true,<br/>   removeEmptyAttributes: true<br/>  },<br/>  files: [{<br/>   expand: true,<br/>   cwd: 'src',<br/>   src: '{,*/}*.html',<br/>   dest: 'dist'<br/>  }]<br/> }<br/>};</span><span id="8a19" class="ne le iq mj b gy ny nv l nw nx">config['babel'] = {<br/> options: {<br/>  sourceMap: true,<br/>  presets: ['env']<br/> },<br/> dist: {<br/>  files: {<br/>   '.tmp/concat/scripts/compiled.js': '.tmp/concat/scripts/compiled.js'<br/>  }<br/> }<br/>};</span><span id="1c88" class="ne le iq mj b gy ny nv l nw nx">config['uglify'] = {<br/> options: {<br/>   mangle: false<br/> }<br/>};</span><span id="4bbf" class="ne le iq mj b gy ny nv l nw nx">config['copy'] = {<br/> build: {<br/>  files: [{<br/>   expand: true,<br/>   dot: true,<br/>   cwd: 'src',<br/>   dest: 'dist',<br/>   src: []<br/>  }]<br/> }<br/>};</span><span id="6779" class="ne le iq mj b gy ny nv l nw nx">config['cssmin'] = {<br/> dist: {<br/>  files: {<br/>   'dist/styles/main.css': [<br/>    'src/styles/{,*/}*.css'<br/>   ]<br/>  }<br/> }<br/>};</span><span id="0cef" class="ne le iq mj b gy ny nv l nw nx">grunt.initConfig(config);</span><span id="4741" class="ne le iq mj b gy ny nv l nw nx">var tasks = [<br/> 'clean:build',<br/> 'useminPrepare',<br/> 'htmlmin',<br/> 'cssmin',<br/> 'concat',<br/> 'babel',<br/> 'uglify',<br/> 'copy',<br/> 'usemin'<br/>];</span><span id="58af" class="ne le iq mj b gy ny nv l nw nx">grunt.registerTask('build', tasks);</span></pre><p id="7cd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有一些要点需要注意:</p><ul class=""><li id="5309" class="mq mr iq jp b jq jr ju jv jy ms kc mt kg mu kk mv mw mx my bi translated">任务<code class="fe mg mh mi mj b">clean</code>、<code class="fe mg mh mi mj b">copy</code>、<code class="fe mg mh mi mj b">useminPrepare</code>、<code class="fe mg mh mi mj b">usemin</code>、<code class="fe mg mh mi mj b">cssmin</code>、<code class="fe mg mh mi mj b">uglify</code>和<code class="fe mg mh mi mj b">htmlmin</code>只是实用程序。它们在每个复杂的项目中都很常见，有助于清理发行文件夹、传输和缩小HTML文件等。</li><li id="93b8" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">任务<code class="fe mg mh mi mj b">babel</code>帮助我们将CoffeeScript编译后生成的最终js文件转换成有效的ES5格式，因为我们使用的一些插件不理解如何处理ES6。</li><li id="0146" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">最后，我们只是通过<code class="fe mg mh mi mj b">registerTask</code>函数将所有想要传递给grunt register的任务名称进行分组。请注意，它们都将在项目构建时按照定义的顺序执行。</li></ul><h2 id="de94" class="ne le iq bd lc nf ng dn li nh ni dp lm jy nj nk lq kc nl nm lu kg nn no ly np bi translated">CoffeeScript文件</h2><p id="e806" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">接下来，在<em class="mf"> src/coffee/app </em>文件夹中创建一个名为<code class="fe mg mh mi mj b">main.coffee</code>的新文件，并将<strong class="jp ir">清单5 </strong>的内容添加到其中。</p><p id="a004" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单5。</strong> main.coffee文件。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="518a" class="ne le iq mj b gy nu nv l nw nx">Task = window.GLOBALS.Task<br/>Panel = window.GLOBALS.Panel</span><span id="5fc5" class="ne le iq mj b gy ny nv l nw nx">$ -&gt;<br/> initialTasks = [<br/>  {<br/>   name: "Clean the house"<br/>   priority: 1<br/>   dueDate: "2018-01-01"<br/>  }<br/>  {<br/>   name: "Go shopping"<br/>   priority: 1<br/>   dueDate: "2018-02-02"<br/>  }<br/>  {<br/>   name: "Pay the bills"<br/>   priority: 2<br/>   dueDate: "2018-03-03"<br/>  }<br/> ]<br/> <br/> tasks = {}<br/> <br/> for task in initialTasks<br/>  tasks[task.name] = new Task task.name, task.priority, task.dueDate, false<br/>  <br/> panel = new Panel $("#tasks-table"), tasks</span></pre><p id="24d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在文件的开头，您可以看到将在示例中使用的两个对象的声明。为了使用CoffeeScript中的类，您必须首先导入它们。</p><p id="9b3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">内容的开始在<code class="fe mg mh mi mj b">-&gt;</code>符号之后，这也将用于确定其他代码块的开始，如方法和构造函数。</p><p id="14b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还要注意，我们创建了<code class="fe mg mh mi mj b">initialTasks</code>变量，它将作为一种<code class="fe mg mh mi mj b">Collection</code>，在视图打开时显示表中的一些对象。</p><p id="1829" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该变量将用于完成通过使用<code class="fe mg mh mi mj b">forEach</code>按顺序创建的任务列表，最终创建一个<code class="fe mg mh mi mj b">Panel</code>对象并将任务列表作为参数传递。</p><p id="b8a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，再创建两个文件:<code class="fe mg mh mi mj b">panel.coffee</code>和<code class="fe mg mh mi mj b">task.coffee</code>。让我们从清单6 中的<strong class="jp ir">任务开始。</strong></p><p id="ed8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单6。</strong> task.coffee文件。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="4218" class="ne le iq mj b gy nu nv l nw nx">class Task<br/> constructor: (@taskName, @priority, @dueDate, @done) -&gt;<br/>  throw "Invalid task description" if @taskName.length is 0<br/>  throw "Invalid priority" if @priority &lt; 1<br/>  throw "Invalid date" if @dueDate.length is 0<br/> <br/> getPriority: -&gt;<br/>  @priority<br/>  <br/> getDueDate: -&gt;<br/>  @dueDate<br/>  <br/> increasePriority: -&gt;<br/>  @priority++<br/>  <br/> finish: -&gt;<br/>  @priority = 0<br/>  @dueDate = 0<br/>  @done = true<br/>  <br/> isDone: -&gt;<br/>  @done<br/> <br/>window.GLOBALS.Task = Task</span></pre><p id="85d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">必须在每个名字的开头使用<code class="fe mg mh mi mj b">@</code>来引用类属性，抛出异常可以通过保留字<code class="fe mg mh mi mj b">throw</code>来完成。请注意，抛出异常的条件总是在相应消息之前的声明之后。</p><p id="30d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了划分块的开始和结束，我们使用缩进和空行，也就是说，每当你想创建一个新的方法或块时，相应地换行。文件的其余部分只是陈述属性的getter/setter，以及完成任务或增加其<code class="fe mg mh mi mj b">priority</code>值的方法。</p><p id="b7e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单7 </strong>展示了管理面板视图的CoffeeScript代码。</p><p id="61e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">清单7。 panel.coffee文件。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="2393" class="ne le iq mj b gy nu nv l nw nx">Task = window.GLOBALS.Task</span><span id="2751" class="ne le iq mj b gy ny nv l nw nx">class Panel<br/>   constructor: (@panel, @tasks) -&gt;<br/>    @init()<br/>    <br/>   init: -&gt;<br/>    _this = this<br/>   <br/>    @render()<br/>   <br/>    $("#btn-add").click -&gt;<br/>     key = $("#input-task").val()<br/>     _this.tasks[key] = new Task key, 1, "2018-03-03", false<br/>     $("#input-task").val("")<br/>     _this.render()<br/>     <br/>   getTasks: -&gt;<br/>    @tasks<br/>    <br/>   setTasks: (tasks) -&gt;<br/>    @tasks = tasks<br/>   <br/>   render: -&gt;<br/>    _this = this<br/>    <br/>    @panel.find("tbody").html ""<br/>    <br/>    for key, value of @tasks<br/>     if value.isDone()<br/>      continue<br/>      <br/>     row = "&lt;tr data-id='#{key}'&gt;<br/>      &lt;td&gt;#{key}&lt;/td&gt;<br/>      &lt;td&gt;#{value.priority}&lt;/td&gt;<br/>      &lt;td&gt;#{value.dueDate}&lt;/td&gt;<br/>      &lt;td&gt;<br/>       &lt;button class='btn btn-primary btn-incr-priority' data-id='#{key}'&gt;+Priority&lt;/button&gt;<br/>       &lt;button class='btn btn-danger btn-finish' data-id='#{key}'&gt;Done&lt;/button&gt;<br/>      &lt;/td&gt;<br/>     &lt;/tr&gt;"<br/>     @panel.find("tbody:last").append(row)<br/>     <br/>    @panel.find(".btn-incr-priority").each -&gt;<br/>     $(this).click -&gt;<br/>      key = $(this).attr("data-id")<br/>      _this.tasks[key].increasePriority()<br/>      _this.render()<br/>      <br/>    @panel.find(".btn-finish").each -&gt;<br/>     $(this).click -&gt;<br/>      key = $(this).attr("data-id")<br/>      _this.tasks[key].finish()<br/>      _this.render()<br/>      <br/>window.GLOBALS.Panel = Panel</span></pre><p id="3311" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mg mh mi mj b">render</code>方法将从HTML页面的<code class="fe mg mh mi mj b">table</code>中检索<code class="fe mg mh mi mj b">tbody</code> DOM对象，并遍历最初在<code class="fe mg mh mi mj b">main.coffee</code>中创建的任务列表。</p><p id="a501" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在迭代中，我们验证任务是否已经完成，这样一个任务就不会被考虑；以及将每个任务的值组装到表的列中。</p><p id="97f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，该方法还将侦听表按钮上的点击，尝试删除或增加该行上的优先级值内容。</p><blockquote class="mk ml mm"><p id="8f28" class="jn jo mf jp b jq jr js jt ju jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj kk ij bi translated">始终注意压痕的使用。非常重要的一点是，要正确地执行它，这样框架才能理解每条指令的开始和结束位置。</p></blockquote><p id="49fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个过程的最后，验证<code class="fe mg mh mi mj b">watch</code>线程已经创建了几个<code class="fe mg mh mi mj b">.js</code>文件，对应于<em class="mf"> src/scripts </em>目录中每个CoffeeScript文件的内容。</p><p id="b3d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在测试之前，我们不能忘记创建HTML文件，该文件将包含要显示的表的内容。为此，在<code class="fe mg mh mi mj b">src</code>文件夹的根目录下创建一个新的<code class="fe mg mh mi mj b">index.html</code>文件，并添加<strong class="jp ir">清单8 </strong>的内容。</p><p id="734c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清单8。</strong>index.html页面。</p><pre class="kn ko kp kq gt nq mj nr ns aw nt bi"><span id="2e4a" class="ne le iq mj b gy nu nv l nw nx">&lt;!doctype html&gt;<br/>&lt;html class="no-js"&gt;<br/>   &lt;head&gt;<br/>       &lt;meta charset="utf-8"&gt;<br/>       &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;<br/>       &lt;title&gt;Task Mgmt App&lt;/title&gt;<br/>       &lt;meta name="description" content=""&gt;<br/>       &lt;meta name="viewport" content="width=device-width"&gt;<br/>       &lt;link rel="stylesheet" href="styles/main.css"&gt;<br/>   &lt;/head&gt;<br/>   <br/>   &lt;body&gt;<br/>       &lt;header class="navbar navbar-static-top navbar-inverse" role="banner"&gt;<br/>           &lt;div class="container"&gt;<br/>               &lt;div class="navbar-header"&gt;<br/>                   &lt;button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse"&gt;<br/>               &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;<br/>               &lt;span class="icon-bar"&gt;&lt;/span&gt;<br/>               &lt;span class="icon-bar"&gt;&lt;/span&gt;<br/>               &lt;span class="icon-bar"&gt;&lt;/span&gt;<br/>             &lt;/button&gt;<br/>                   &lt;a class="navbar-brand"&gt;Task Management App&lt;/a&gt;<br/>               &lt;/div&gt;<br/>               &lt;nav class="collapse navbar-collapse" role="navigation"&gt;<br/>               &lt;/nav&gt;<br/>           &lt;/div&gt;<br/>       &lt;/header&gt;<br/>       &lt;div class="container"&gt;<br/>           &lt;div class="row"&gt;<br/>               &lt;div class="col-lg-12"&gt;<br/>                   &lt;table id="tasks-table" class="table table-hover table-striped table-border"&gt;<br/>                       &lt;thead&gt;<br/>                           &lt;tr&gt;<br/>                               &lt;th&gt;Task&lt;/th&gt;<br/>                               &lt;th&gt;Priority&lt;/th&gt;<br/>                               &lt;th&gt;Due Date&lt;/th&gt;<br/>                               &lt;th&gt;Actions&lt;/th&gt;<br/>                           &lt;/tr&gt;<br/>                       &lt;/thead&gt;<br/>                       &lt;tbody&gt;<br/>                       &lt;/tbody&gt;<br/>                   &lt;/table&gt;<br/>                   &lt;input id="input-task" class="form-control input-sm" style="width: 200px; display: inline-block" /&gt; &lt;a id="btn-add" class="btn btn-primary"&gt;Add&lt;/a&gt;<br/>               &lt;/div&gt;<br/>           &lt;/div&gt;<br/>       &lt;/div&gt;<br/>       &lt;!-- build:js scripts/compiled.js --&gt;<br/>       &lt;script type="text/javascript" src="bower_components/jquery/dist/jquery.js"&gt;&lt;/script&gt;<br/>       &lt;script type="text/javascript" src="scripts/app/init.js"&gt;&lt;/script&gt;<br/>       &lt;script type="text/javascript" src="scripts/entity/task.js"&gt;&lt;/script&gt;<br/>       &lt;script type="text/javascript" src="scripts/entity/panel.js"&gt;&lt;/script&gt;<br/>       &lt;script type="text/javascript" src="scripts/app/main.js"&gt;&lt;/script&gt;<br/>       &lt;!-- endbuild --&gt;<br/>   <br/>       &lt;script type="text/javascript" src="scripts/compiled.js"&gt;&lt;/script&gt;<br/>   &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6754" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这只是一个简单的HTML文件，带有适当的CSS(主要是Bootstrap)和JS导入。此外，我们还按照coffee文件中相同的JavaScript代码要求，创建了向列表添加新任务的按钮。</p><p id="b72f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还要注意，最后JavaScript文件的导入必须按照定义的顺序进行，以避免忘记一些对象，甚至在浏览器中出现不必要的错误。重要的是不要删除它们前后的注释，因为它们将被构建使用。</p><p id="4797" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，要将所有东西编译并正确复制到<code class="fe mg mh mi mj b">/dist</code>文件夹，只需运行<code class="fe mg mh mi mj b">grunt build</code>命令并检查所有文件是否都在那里。</p><h1 id="894d" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="1a8e" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">使用这种工具的优点是，我们只需花时间配置一次所有的东西，版本更新可以通过相应的更新命令自动完成。</p><p id="a844" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你不必成为专家来掌握Grunt和CoffeeScript的功能，但是在开发了这样一个简单的例子之后，我们可以看到它们的潜力。尽管如此，还有很多东西需要探索，比如多态、封装和其他面向对象的概念、列表、动态结构等等。</p><p id="5f7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看官方<a class="ae kl" href="https://gruntjs.com/getting-started" rel="noopener ugc nofollow" target="_blank"> Grunt的入门页面</a>了解更多信息。</p><p id="510e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你也可以在<a class="ae kl" href="https://github.com/diogosouza/notes_app" rel="noopener ugc nofollow" target="_blank">我的GitHub档案</a>中找到这个例子。</p></div></div>    
</body>
</html>