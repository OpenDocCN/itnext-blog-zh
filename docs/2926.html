<html>
<head>
<title>How to make tests using chai and mocha?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用柴和摩卡做测试？</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-make-tests-using-chai-and-mocha-e9db7d8d48bc?source=collection_archive---------0-----------------------#2019-08-31">https://itnext.io/how-to-make-tests-using-chai-and-mocha-e9db7d8d48bc?source=collection_archive---------0-----------------------#2019-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="c36d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">NodeJS应用程序的TDD</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/6177c51121500fcf5d6d652a9cdc66f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IMPoTY-HBFoAAgwX"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">勒内·波洛克在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="34f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">大家好，</p><p id="83a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我将向您展示我们如何使用两个非常棒的工具进行测试:<a class="ae le" href="https://www.chaijs.com/" rel="noopener ugc nofollow" target="_blank">柴</a>和<a class="ae le" href="https://mochajs.org" rel="noopener ugc nofollow" target="_blank">摩卡</a>。</p><p id="b02c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是首先，我想谈谈测试的重要性。为什么测试如此必要？为此，我应该解释一下什么是TDD。</p><p id="59b8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">测试驱动开发</strong> (TDD)是一个软件工程过程，它要求在代码验证之前编写单元测试，这依赖于非常短的开发周期的重复，其中需求在测试用例中被转换。这样一来，首先代码会失败(很惨)，然后开发人员应该编写干净的代码来通过测试。</p><p id="149a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">循环很简单。<strong class="js iu">开发人员编写了一个测试</strong>，这个测试会失败，因为你没有为这些测试开发任何代码，所以开发人员应该<strong class="js iu">检查测试是否失败</strong>。在这之后，<strong class="js iu">开发人员编写干净的代码来使测试通过</strong>。同样，开发人员应该<strong class="js iu">检查是否所有的测试都通过了</strong>，如果没有，就应该回去写代码。最后，我们应该记得让我们的代码总是更好，并且<strong class="js iu">重构</strong>它来创建新的测试。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lf"><img src="../Images/1c3242f5dc4cb0a0dbf7be57f5c06dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tkjb8QNSSpH8Khz5dMAjWQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">TimeDivisionDuplex 时分双工</figcaption></figure><p id="c6c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">考虑到这一点，我们可以谈谈柴和摩卡。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lg"><img src="../Images/e130d1e4ffb1c112bd38adff6e9f80cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/format:webp/1*MOlxL3PiKBfxC0f2S1-Mwg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">摩卡标志</figcaption></figure><p id="d978" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Mocha 是一个运行在Node.js和浏览器中的JavaScript测试框架。Mocha允许异步测试、测试覆盖报告和使用任何断言库。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/d6f2869dcc9d5daba9b5eb024b0fa4d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*9hCO_QRevNSJNFvCKWS7hg.png"/></div></figure><p id="1aca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Chai是一个用于NodeJS和浏览器的BDD / TDD断言库，可以与任何javascript测试框架愉快地配对。</p><p id="01e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基本上，mocha是一个框架，chai是一个库。我们再深入一点摩卡。</p><h1 id="5ef0" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">摩卡:怎么考？</h1><p id="a001" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">摩卡用钩子来组织它的结构。来说说他们吧。</p><ul class=""><li id="e831" class="ml mm it js b jt ju jx jy kb mn kf mo kj mp kn mq mr ms mt bi translated"><strong class="js iu"> describe() </strong>:用来分组，可以嵌套的一样深；</li><li id="314d" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><strong class="js iu"> it() </strong>:是测试用例；</li><li id="e433" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><strong class="js iu"> before() </strong>:它是一个运行在<em class="mz">之前的钩子，首先是</em> it()或describe()；</li><li id="bfab" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><strong class="js iu"> beforeEach() </strong>:是一个运行在<em class="mz"> each </em> it()或describe()之前的钩子；</li><li id="e080" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><strong class="js iu"> after() </strong>:跟在它后面运行()或describe()是钩子；</li><li id="ea7a" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><strong class="js iu"> afterEach() </strong>:运行在<em class="mz"> each </em> it()或describe()之后的一个钩子；</li></ul><p id="f385" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们来看一些场景</p><h2 id="a799" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">场景1:一个测试用例</h2><p id="ed84" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在这种情况下，我们可以只调用一个单独的<strong class="js iu"> it() </strong>，mocha将运行这个唯一的测试。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="84e1" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">场景2:嵌套的测试用例</h2><p id="087a" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在这种情况下，我们可以嵌套一些<strong class="js iu">descriptions()</strong>钩子，最后调用它()来执行测试。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="3cfb" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">场景3:一个测试中的两个测试用例</h2><p id="22f8" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">这里，在describe()中，我们有两个it()来执行测试。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="c9fa" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">场景4:在第一个测试用例之前只运行一次</h2><p id="fcc0" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在这个场景中，在第一个<strong class="js iu">之前，</strong> it() mocha将执行<strong class="js iu"> before() </strong>中的内容，但只执行一次。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="4ce3" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">场景5:在每个测试用例之前运行一次</h2><p id="ef69" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">与before()(或describe())相反，<strong class="js iu"> beforeEach() </strong>是我们拥有的每一个it()【或describe()】的每次执行。如果我们有一个it()，它将只执行一次。如果我们有两个it()，它将被执行两次。如果我们有三个it()，它将被执行三次，如此继续下去。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="795a" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">场景6:大型测试中的两个测试</h2><p id="0f42" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在最后一个场景中，mocha将嵌套describe()并执行它()。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="4f22" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">动手！！！</h1><p id="219e" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">为了看到它的工作，让我们先做一个简单的例子:一个计算器。让我们创建一个测试用例，其中我们的计算器应该计算以下操作:</p><ul class=""><li id="3b11" class="ml mm it js b jt ju jx jy kb mn kf mo kj mp kn mq mr ms mt bi translated">添加</li><li id="5674" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated">减法</li><li id="db99" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated">增加</li><li id="6abf" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated">分开</li></ul><p id="5a68" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将通过mocha使用所有的TDD结构。</p><h2 id="424e" class="na lj it bd lk nb nc dn lo nd ne dp ls kb nf ng lw kf nh ni ma kj nj nk me nl bi translated">创建项目</h2><p id="8a7c" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">首先，让我们创建一个名为<strong class="js iu"> mocha-chai-tests </strong>的项目。</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="8c09" class="na lj it np b gy nt nu l nv nw">$ mkdir mocha-chai-tests<br/>$ cd mocha-chai-tests<br/>$ yarn init</span><span id="c05a" class="na lj it np b gy nx nu l nv nw">or </span><span id="cf3a" class="na lj it np b gy nx nu l nv nw">$ npm init -y</span></pre><p id="ed89" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">装柴和摩卡。</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="4230" class="na lj it np b gy nt nu l nv nw">$ yarn add chai mocha</span><span id="e57a" class="na lj it np b gy nx nu l nv nw">or </span><span id="835e" class="na lj it np b gy nx nu l nv nw">$ npm i chai mocha --save</span></pre><p id="27d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在项目<strong class="js iu">中，创建一个名为<strong class="js iu"> tests </strong>的文件夹和一个名为<strong class="js iu"> calc.js </strong>的文件。</strong></p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="f628" class="na lj it np b gy nt nu l nv nw">$ mkdir tests<br/>$ touch tests/calc.js</span></pre><p id="8166" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们可以创建我们的第一个测试。为此，我们将创建一个describe()来指示我们正在对一个<strong class="js iu">计算器</strong>进行测试，并创建另一个describe()来指示<strong class="js iu">加法</strong>操作。让我们调用一个名为<strong class="js iu">的函数，将两个数相加。我们来测试一下1加1会不会是2。</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">摩卡-柴-测试/测试/计算. js</figcaption></figure><blockquote class="ny nz oa"><p id="7bf7" class="jq jr mz js b jt ju jv jw jx jy jz ka ob kc kd ke oc kg kh ki od kk kl km kn im bi translated">嘿Sam，但是文件<strong class="js iu"> src/calculator.js </strong>不存在。我们该如何处理这件事？</p></blockquote><p id="2dae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不存在，但应该存在。如此之多，如果我们运行测试，我们会得到一个错误。让我们这样做，看看会发生什么。在终端上键入以下命令:</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="352f" class="na lj it np b gy nt nu l nv nw">$ yarn mocha tests/calc.js</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/c605e4af8b11c6495d942527ddeb5137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JV6JbjZlTKN5OKhNN2WnYA.png"/></div></div></figure><p id="8ed9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，为了解决这个问题，让我们创建文件夹<strong class="js iu"> src </strong>和一个名为<strong class="js iu"> src/calculator.js </strong>的空文件。</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="4736" class="na lj it np b gy nt nu l nv nw">$ mkdir src<br/>$ touch src/calculator.js</span></pre><p id="430f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你再次运行测试，你会看到另一个结果。</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="b5d4" class="na lj it np b gy nt nu l nv nw">$ yarn mocha tests/calc.js</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/b2c12943fc16db9bde82d679c7c48774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LjE9b_DWz7dE6nal6MaKiw.png"/></div></div></figure><p id="9331" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">意识到你可以看到计算器包含的结构，加法，以及我们测试的失败。测试告诉我们问题出在<em class="mz">计算器。add不是函数</em>。这是因为我们在<strong class="js iu">src/计算器</strong>中没有任何代码。</p><p id="1764" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始开发<strong class="js iu"> src/calculator.js </strong>上的功能之前，让我们改进我们的测试。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">摩卡-柴-测试/测试/计算. js</figcaption></figure><p id="891d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">解释我做了什么。我创建了名为<strong class="js iu">计算器</strong>的主结构。我正在测试四个数学运算:<strong class="js iu">加法</strong>、<strong class="js iu">减法</strong>、<strong class="js iu">乘法</strong>和<strong class="js iu">除法</strong>，我在每个describe()中构造了它们。因此，在<strong class="js iu">加法</strong>中，我测试1+1=2，然后我使用随机数，我知道它们的和的结果，并确保我的函数是否返回正确的值。我在<strong class="js iu">减法</strong>、<strong class="js iu">乘法</strong>、<strong class="js iu">除法</strong>上也是遵循同样的思路。但是，在<strong class="js iu">除法</strong>中，我增加了一个新的测试:如果分母(除数)为零，我们应该返回<em class="mz">未定义的</em>，因为这个操作是不允许的。</p><p id="9bb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">出于好奇，你可以再次提交测试，看看会发生什么。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/85269f057ae1256883cb9d0497872ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DylNJX63V_QUXLHJxgEOA.png"/></div></div></figure><p id="f922" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们可以进行必要的更改，以使我们的测试通过。让我们编辑文件src/calculator.js。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">mocha-chai-tests/src/calculator . js</figcaption></figure><p id="98c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们再次提交测试…</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oh"><img src="../Images/0d9d7feb2852840b000144bca77b7691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOU3pjiRss6t9M1_u7iIUA.png"/></div></div></figure><p id="0f00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在所有的测试都通过了。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oi nn l"/></div></figure><h1 id="187d" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">使用chai和mocha测试API</h1><p id="6c04" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">正如我们所知道的使用chai和mocha进行测试，让我们使用API进行测试。让我们创建我们的文件夹和文件。在同一个文件夹<strong class="js iu">中，创建:</strong></p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="7bfd" class="na lj it np b gy nt nu l nv nw">$ touch tests/api.js</span></pre><p id="9fbb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">而现在，我们来安装一个新的依赖:<a class="ae le" href="https://www.chaijs.com/plugins/chai-http/" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">柴-http </strong> </a>。它将帮助我们从服务器发出请求。为此，让我们利用并安装<strong class="js iu"> express </strong>。</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="1f50" class="na lj it np b gy nt nu l nv nw">$ yarn add chai-http express </span><span id="13be" class="na lj it np b gy nx nu l nv nw">or</span><span id="d788" class="na lj it np b gy nx nu l nv nw">$ npm i chai-http express</span></pre><p id="d1be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这种情况，我将创建一个名为<strong class="js iu"> createFakeServer </strong>的函数，这意味着它将在测试期间创建一个服务器，并在最后关闭它。另外，我会在柴身上用不同的测试用例。我将创建一个端点，它将返回一个带有一些信息的特定对象，我们将对它进行验证。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0ad5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要在提交结束时关闭服务器，我们应该使用“-exit”mocha选项。</p><pre class="kp kq kr ks gt no np nq nr aw ns bi"><span id="85f0" class="na lj it np b gy nt nu l nv nw">$ yarn mocha --exit tests/api.js </span></pre><p id="c585" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们应该注意一些事情。因为<strong class="js iu">结束</strong>函数被传递了一个<em class="mz">回调</em>，断言被异步运行<em class="mz"/>。这意味着必须使用一种机制来通知测试框架回调已经完成。否则，测试将在检查断言之前通过。在<strong class="js iu">摩卡</strong>中，这是通过使用<strong class="js iu">完成</strong>回调来完成的，这表明回调已经完成，断言可以被验证。🙂</p><h1 id="e442" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="09f0" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">本教程旨在向您展示TDD的理论，以及如何在使用chai和mocha的节点应用程序中使用TDD。</p><p id="f53b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我想感谢你，我的朋友，花时间阅读这篇文章。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj nn l"/></div></figure><p id="0b45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这篇文章能帮助你理解如何使用测试来提高你的开发技能。有什么地方需要改进才能写出更好的文章，欢迎随时告诉我。</p><p id="f0e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完整的项目你可以在我的<a class="ae le" href="https://github.com/samaronybarros" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中找到，搜索<a class="ae le" href="https://github.com/samaronybarros/jwt-app" rel="noopener ugc nofollow" target="_blank"> jwt-app </a>。</p><h1 id="61cb" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">关于我</h1><p id="0048" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">Sam Barros是一名巴西人，作为一名软件工程师在柏林生活和工作。他是一个技术爱好者，他总是用自己的生活来帮助人们。</p><p id="8b0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">连接到:</p><ul class=""><li id="fe40" class="ml mm it js b jt ju jx jy kb mn kf mo kj mp kn mq mr ms mt bi translated"><a class="ae le" href="https://www.linkedin.com/in/sam-barros/" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="09ee" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><a class="ae le" href="https://github.com/samaronybarros" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li><li id="cde7" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><a class="ae le" href="https://medium.com/@samarony.barros" rel="noopener">中等</a></li><li id="180a" class="ml mm it js b jt mu jx mv kb mw kf mx kj my kn mq mr ms mt bi translated"><a class="ae le" href="https://sambarros.com/" rel="noopener ugc nofollow" target="_blank">个人网站</a></li></ul><h1 id="247e" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">我的其他文章</h1><div class="ok ol gp gr om on"><a href="https://medium.com/swlh/how-do-i-deploy-my-code-to-heroku-using-gitlab-ci-cd-6a232b6be2e4" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">如何使用GitLab CI/CD将我的代码部署到Heroku？</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">关于如何使用舞台和生产环境的教程</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ky on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/swlh/http-an-overview-of-web-development-4f6033efb9da" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">HTTP:web开发概述</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">开发者指南</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb ky on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/swlh/authentication-how-to-create-a-nodejs-application-using-jwt-cee8bc5a89fe" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">身份验证:如何使用JWT创建NodeJS应用程序</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">用JSON Web令牌保护API</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pd l oy oz pa ow pb ky on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/swlh/what-do-i-need-to-know-about-git-5017bde0b572" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">关于Git，我需要了解什么？</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">初学者教程</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pe l oy oz pa ow pb ky on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/swlh/how-to-create-your-first-mern-mongodb-express-js-react-js-and-node-js-stack-7e8b20463e66" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">如何创建你的第一个MERN (MongoDB，Express JS，React JS和Node JS)栈</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">嗨伙计们，</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pf l oy oz pa ow pb ky on"/></div></div></a></div></div></div>    
</body>
</html>