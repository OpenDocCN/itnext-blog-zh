<html>
<head>
<title>Firebase Guest Access</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Firebase访客通道</h1>
<blockquote>原文：<a href="https://itnext.io/firebase-guest-access-38775cde50b3?source=collection_archive---------4-----------------------#2018-06-27">https://itnext.io/firebase-guest-access-38775cde50b3?source=collection_archive---------4-----------------------#2018-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/7cbfd90c331e892adcbb36390eb724c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*msgCCTEXCSVXD-YUdR4Kzg.png"/></div></figure><h1 id="b8c0" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">摘要</h1><p id="299c" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在本文中，我们将学习如何轻松地向Firebase应用程序添加“访客”功能，而不必对数据模型进行任何大规模的重构。</p><p id="6042" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">本文适用于管理用户特定数据的应用程序。例如，计算器应用程序可能不需要用户数据，因此不适用。</p><h1 id="8312" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">背景</h1><p id="8bdc" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">你应该为你创建的<strong class="ku ir">任何</strong>和<strong class="ku ir">所有</strong>应用程序提供一个“尝试作为访客”的功能。</p><p id="94cb" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">每当用户注册一项服务并提供他们的电子邮件和密码时，他们都在付出代价:他们放弃了一点隐私，并为换取这项服务而冒了风险。用户不知道他们的数据将被安全地管理。通过注册一项服务，他们相信一家公司会提供他们的一些个人数据。</p><p id="ef79" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">我个人的电子邮件和密码在LinkedIn和Spotify上被盗过。这两家都是大公司，应该拥有保护用户数据的资源和知识。因此，如果它们可以被攻破，我们为什么要相信一个indy开发者，或者任何其他人，可以做得更好呢？</p><p id="449c" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">通常，对于所提供的服务来说，这种风险是值得的。但是不允许用户在注册前试用你的产品，你就剥夺了他们决定是否愿意冒这个风险的能力。最终，一些用户会觉得不值得，你会失去他们。</p><p id="3012" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">可以提供多种级别的访问，下面我概述了其中的三种:</p><h2 id="78c4" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated">访问级别:无访问权限</h2><p id="07d5" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这是最糟糕的访问类型。这是用户不创建帐户就无法通过登录/注册页面的地方。</p><p id="4483" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">在这种访问级别下，用户除了在网站或应用商店看到的截图和描述之外，不知道该应用程序如何工作。</p><p id="bae7" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">例如，我最近发现了一个应用程序，它自称是“一本活生生的旅行日记”。这似乎是一个有趣的应用程序，允许用户分享他们旅行中的照片和笔记。不幸的是，在下载应用程序时，我无法通过登录页面。虽然App Store中的截图看起来不错，但这与应用程序的交互不太一样，我决定不创建帐户或使用应用程序。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/f2cf98ae10cdb8d237a1e0532d23442c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*Ua0S647j5JKX1Kx4ydYY7w.png"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">“注册”或“登录”是唯一的选项…</figcaption></figure><h2 id="dacc" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated">访问级别:只读</h2><p id="a838" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这种类型的访问允许用户查看静态内容和其他用户的内容，但不允许他们在创建帐户之前创建自己的内容。</p><p id="4060" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">这是一种可接受的访问形式，并且非常容易实现。然而，如果生成内容是应用程序功能的一大部分，这种类型的访问会剥夺用户在应用程序上生成内容的体验。</p><p id="881e" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">例如，YouTube允许用户在不创建帐户的情况下观看视频。但如果没有账号，他们就无法订阅频道或上传自己的视频。</p><h2 id="520c" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated">访问级别:访客转换</h2><p id="9414" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这种类型的访问允许用户使用应用程序的每个功能，包括生成内容。用户以匿名“客人”的身份访问该应用程序，如果他们决定喜欢该应用程序并想创建一个帐户，他们的所有内容都会转移到新创建的帐户。</p><p id="bea0" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">比如我做过一个app，曾经叫<a class="ae mq" href="http://vintapp.com" rel="noopener ugc nofollow" target="_blank"> Vint </a>。尽管这款应用已经失效，但它允许用户跟踪他们的车辆维护和里程，并在定期维护到期时给出提醒。</p><p id="575f" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">用户可以作为访客试用该应用程序，如果他们喜欢，他们可以注册一个电子邮件地址，以便将来可以再次登录。应用程序顶部的一个横幅不断提醒他们，他们是作为客人登录的，如果他们想在退出后保存他们的数据，需要注册。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/eda35132167611abadc0eddff38c2347.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*J9jm1BEo-uznukU_eDE-kw.png"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">即使作为客人，我也可以记录“维护历史”顶部的横幅提示我正在使用来宾帐户。</figcaption></figure><p id="9924" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">我相信这种类型的访问是最好的，因为它允许用户在决定是否使用它之前完全预览你的应用程序。幸运的是，有了Firebase身份验证，实现这一点再简单不过了。</p><h1 id="fb47" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">履行</h1><h2 id="d82a" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated">启用“匿名”身份验证</h2><p id="a3c1" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">第一步是在Firebase项目上启用“匿名”身份验证。这就像扳动开关一样简单。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/e1bda74bd8e7fe14fd7f3570bc154a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uu-IW7bvmHaPow2a809R1A.png"/></div></div></figure><h2 id="55db" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated"><strong class="ak">匿名签到</strong></h2><p id="0880" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">接下来，添加一个按钮，允许用户作为来宾试用您的应用程序。按下按钮后，只需调用Firebase函数:</p><pre class="mi mj mk ml gt mx my mz na aw nb bi"><span id="a820" class="lv jv iq my b gy nc nd l ne nf">firebase.auth().signInAnonymously()</span></pre><p id="8572" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">用户将出现在Firebase身份验证控制台中，并将拥有自己的UID。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ng"><img src="../Images/3c93c4167c3bd45578754f6014f7ce05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojL6hTt0yjz_B_LuPmWYTg.png"/></div></div></figure><p id="b70a" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">此时，根据您对应用程序的设置，用户应该能够访问应用程序并与之交互，就像他们使用任何其他身份验证方法登录一样。您可能仍然希望限制匿名用户的某些功能(如更改他们的密码)，因此要确定匿名用户是否登录，您可以检查:</p><pre class="mi mj mk ml gt mx my mz na aw nb bi"><span id="216c" class="lv jv iq my b gy nc nd l ne nf">firebase.auth().currentUser.isAnonymous</span></pre><h2 id="8edc" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated">转换账户</h2><p id="d3f7" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最后，为用户提供将他们的帐户转换为具有登录名和密码的帐户的能力。否则，一旦他们离开应用程序，他们可能无法以匿名用户的身份访问他们生成的数据。我建议在应用程序的顶部放一个横幅，提醒他们是作为客人登录的。</p><p id="510c" class="pw-post-body-paragraph ks kt iq ku b kv lq kx ky kz lr lb lc ld ls lf lg lh lt lj lk ll lu ln lo lp ij bi translated">当用户准备转换时，首先检查他们是否是匿名用户。然后，生成凭证并链接他们的帐户！</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="8242" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="d353" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">努力允许访客访问您创建的任何应用程序。这将使你的应用程序比其他应用程序更胜一筹，你的用户会非常欣赏这一点。</p><h1 id="c03b" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">资源</h1><h2 id="4015" class="lv jv iq bd jw lw lx dn ka ly lz dp ke ld ma mb ki lh mc md km ll me mf kq mg bi translated">视频教程</h2><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="nj ni l"/></div></figure></div></div>    
</body>
</html>