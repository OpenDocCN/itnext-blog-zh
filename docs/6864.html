<html>
<head>
<title>System Design: Typehead Suggestion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系统设计:打字头建议</h1>
<blockquote>原文：<a href="https://itnext.io/system-design-typehead-suggestion-3956d0cec0a4?source=collection_archive---------0-----------------------#2022-03-27">https://itnext.io/system-design-typehead-suggestion-3956d0cec0a4?source=collection_archive---------0-----------------------#2022-03-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="8819" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">问题陈述</h1><p id="e2f6" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">对于任何现代搜索文本来说，键入建议或自动完成都是一个很有影响力的功能。当用户输入文本进行搜索时，它会向用户推荐单词。它根据用户输入的字符给出不同单词或句子的列表。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/75cc99534262b4b6c33fe3e3c0b6e651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Wl19qLc1wN1jXEdf2CHTg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图1: Google Typehead建议</figcaption></figure><p id="d504" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">它帮助用户很好地构建他们的搜索查询。它方便用户搜索可用的和经常搜索的术语。</p><h1 id="f995" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">要求</h1><p id="884e" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">需求是任何产品开发的系统设计策略的重要方面。以下是在需求时必须阐明和涵盖的重要主题:</p><ul class=""><li id="85c4" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">向后运行</li><li id="aed3" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">功能需求</li><li id="c80a" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">非功能性需求</li></ul><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ms"><img src="../Images/0720ffa0239c8a7e3873f64dd2eae56b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xq9hmAylQerILyj8J1x5Gg.jpeg"/></div></div></figure><h1 id="6930" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">向后运行</h1><p id="1451" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">向后运行主要关注客户体验来定义需求。以下是应该牢记的问题:</p><ul class=""><li id="e706" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">识别顾客及其性格类型</li><li id="54bf" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">客户或用户的用例</li><li id="03e7" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">从商业角度考虑问题，而不仅仅是技术角度。</li></ul><p id="627f" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">以下是针对客户或用户的<strong class="kn ir">类型标题建议的功能倒推点:</strong></p><ul class=""><li id="baae" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">客户只需输入有限的字符或单词，就可以得到所需的建议列表。</li><li id="8a78" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">可能有许多客户不精通搜索文本或单词的正确拼写。</li><li id="e615" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">客户不仅会期望加快他们的搜索速度，还会帮助他们更好地表达他们的搜索查询。</li></ul><h1 id="f36e" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">傅</strong>职能要求</h1><p id="fe53" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">功能需求描述了产品的特性或功能。它主要关注其系统或组件的需求。这要从客户体验说起。</p><p id="4313" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated"><strong class="kn ir">字体建议的功能要求</strong></p><p id="dd72" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">当用户在文本框中输入内容时，它会给出一个以他们输入的内容开始并与之匹配的条目列表。</p><p id="6bb3" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">功能需求收集的问题/答案:</p><p id="3641" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">建议的数量。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mt"><img src="../Images/6cc69c8f5cb1f1a940bbf413653a8a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zNdnojhzvPzeUKEiTHuNLQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图2:关于建议数量的问题</figcaption></figure><p id="3fb8" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">建议的顺序。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mu"><img src="../Images/2f23541cfbddbf0b635e62af6f01b6f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6Y5Sb7pzcHUH_S-R0RnSw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图3:关于建议顺序的问题</figcaption></figure><p id="a199" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">本地存储。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mv"><img src="../Images/bc831ebcda2a62304787add8457a9fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5xNBRt17dOQYi_BrZ5un-A.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图4:关于本地存储的问题</figcaption></figure><p id="6df1" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">个性化。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mw"><img src="../Images/f9fe23ab4a0c0fb53d282097a93ec141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cJTRzTSj772hGHD1F4qxw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图5:关于个性化的问题</figcaption></figure><h1 id="a9e4" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">非功能性需求</h1><p id="8de7" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">非功能需求描述了软件系统的质量特征。</p><p id="6cff" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">非功能性需求应考虑以下主题:</p><ul class=""><li id="6589" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">指定缩放要求</li><li id="d99e" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">指定延迟要求</li><li id="9638" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">指定可用性要求</li></ul><p id="4a62" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">与非功能需求相关的问题/答案:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mx"><img src="../Images/ad02469f51ec059e33ad78f5bd68649a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MoKtPACJDzh_w5JJRmNiWQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图6:关于每天搜索次数的问题</figcaption></figure><p id="d9c6" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">用户的搜索延迟。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi my"><img src="../Images/383b8733ea6388691adca0c4f73fedef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ut7jzoT8CAKCsz0-2u1-DQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">问题7:问题-与查看建议的搜索延迟相关</figcaption></figure><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mz"><img src="../Images/6bde4c9e1fc331f75e99905d26db7b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kfbRPsm7B1hjM5jZNUw7pA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">问题8:关于用户为获得建议而需要输入的最少字符数的问题</figcaption></figure><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi na"><img src="../Images/24bb861e832cd04c56494a4925cde116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U7CYNxjo4vfp8OQgh_Uq5g.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">问题8:可用性和可伸缩性</figcaption></figure><h1 id="1987" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">可扩展性评估</h1><p id="b603" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这是任何软件在开始开发之前的一个重要考虑因素。这包括关于用户请求数量的性能测量。基于这种测量系统可以扩大或缩小。它包括硬件、软件和数据库。</p><h2 id="81e6" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">交通量估计</h2><p id="92ca" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">假设系统预计每天有<strong class="kn ir">50亿</strong>次搜索。因此，每秒的搜索次数将是:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nn"><img src="../Images/9844c2ef8f1f10fda7ef15872a1bebb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NIrNZkTK0nODMfJ0sfZ0KQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">问题9:交通量估计</figcaption></figure><p id="f727" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">在50亿个查询中会有很多重复的查询。因此，我们可以假设50亿个查询中有20%是唯一查询。</p><p id="15d9" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">每日唯一查询:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi no"><img src="../Images/ff2ba648bfc9dfa6b370a004e04b9071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U74-ZKBFDITJZqdajmzRuw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">问题10:每日唯一查询</figcaption></figure><p id="ec6d" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">由于在50亿个查询中会有一堆重复，我们可以认为其中只有20%是唯一的。假设我们有1亿个独特的查询，我们希望在这些查询上构建一个索引。</p><h2 id="65cb" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">存储估计</h2><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi np"><img src="../Images/7cdffbd9459719e84dac87ee9f920393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q5BAZm8OsT8I5QjDvfykkw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图11:每个查询的大小估计</figcaption></figure><p id="ea38" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">根据我们的对话，让我们取以下值:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nq"><img src="../Images/a271c7da1232d3c3f5b8d80527023898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XUNxndVmFazOxX_kfbR1jA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图12:查询的平均大小</figcaption></figure><p id="8922" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">让我们根据上述查询大小来计算数据库存储大小:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nr"><img src="../Images/6a5c74bd362a5811a3ec47c3abcf883f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EY4BNm9HUC1zGlChAhrt1A.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图13:1亿个查询的数据库存储大小</figcaption></figure><p id="a7eb" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">每天都会有新的独特的查询出现，对于这些查询，我们也需要估计数据库的大小。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ns"><img src="../Images/5108458c5bdad7afd08cabce49d91ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*poQAmZKPi4nBm0bp9mDIUg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图14:新的唯一查询的存储估计</figcaption></figure><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nt"><img src="../Images/c0d96137b314a76d89d48e854bc74576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7iLNArAXq3uN_iLfu5nMjA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图15:1年的总存储量</figcaption></figure><h2 id="7a87" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">带宽估计</h2><p id="e5b9" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我们预计每秒约有<strong class="kn ir"> 60K </strong>次搜索，因此，typeahead建议服务的总输入数据将为:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nu"><img src="../Images/f858d0e9e720d9fb4289c4d86e4bcb4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DhV1L1TpAAJ_krKQwhidQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图16:每秒的带宽估计值</figcaption></figure><h1 id="f19e" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">算法讨论</h1><p id="901b" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">此外，这个问题与大量字符串及其搜索相关。因此，非常重要的是，要想出一种方法来构造术语，并为这些术语设计一种数据结构，以便这些术语可以很容易地与用户的前缀匹配。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nv"><img src="../Images/b1ab241d0886e177d07f10dcdcfafd1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jalbARseFJvBqlbNW8BSlg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图17:为什么选择数据结构</figcaption></figure><p id="c8ad" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated"><strong class="kn ir"> Trie </strong>是一种令人难以置信的基于字符串前缀的合理数据结构。它用于描述数据检索的特征。它存储可以像图形一样可视化的字符串。它由节点和边组成。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nw"><img src="../Images/65bc798fa1ee3f605e7bee48717b107b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MUGJmfW_4C-9MHn3Vkdzvw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图18:Trie数据结构中搜索查询的存储</figcaption></figure><p id="92d1" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">例如，用户键入单词<strong class="kn ir">‘CAP’</strong>，它会提示以下关键词:</p><ul class=""><li id="368b" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">无檐软平帽</li><li id="6cde" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">标题</li><li id="0004" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">验证码</li><li id="a79c" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">首都</li></ul><p id="36d4" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">在键入单词时，CAP服务将其作为前缀，并遍历trie以构建所有前10个关键词。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nx"><img src="../Images/cd4e0d748df138e95c7319a34d1f91f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G-nuPSd_w3Y2pMvPAcTr1w.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图18:热门或流行的关键词或建议</figcaption></figure><p id="e20e" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">计算每个建议节点。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ny"><img src="../Images/7b852c39d2561066eb9ee2fa6207941e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7T2Td8EPPJc3GyMn5Y5YbA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图19:每个建议节点的计数</figcaption></figure><p id="7c89" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">这里，在上图中，每个搜索到的建议节点都保持其计数，因此根据搜索频率，它将列出如下建议:</p><ul class=""><li id="0e53" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">验证码</li><li id="4b6a" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">帽子</li><li id="c987" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">标题</li><li id="aeaf" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">资本</li></ul><p id="7805" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">为了发现对一个已分配前缀的最佳建议，我们可以遍历它下面的子树。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nz"><img src="../Images/5b76875cf1ed5d7791e2dfd64111467e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zmav-iQGLSFh8GDwApaRKQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图20:效率的提高</figcaption></figure><p id="3557" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">关于树节点的构造和遍历的问题。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oa"><img src="../Images/cc584816ef0aa42279ffc26009184e1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixaSfTiy-rLp0LcElkoKdA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图21:关于树节点的构造和遍历的问题。</figcaption></figure><p id="e55c" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与用户的位置、语言等相关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ob"><img src="../Images/b086f3a1034ff6ca4f3bae3673e10322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lapKNoXFWNh6Rb8DI30Ggg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图22:与用户的位置、语言等相关的问题。</figcaption></figure><p id="586e" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">例如，谷歌的行为如下:我搜索了汽油价格关键字，它的顶部建议来自我的位置和国家。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oc"><img src="../Images/66cb04fa34d18faf0972bfa121eac57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H6mt5gKrS3_5QkWeNgQo6g.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图23:基于用户位置的谷歌建议</figcaption></figure><h2 id="b28f" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">每次搜索的Trie更新策略</h2><p id="82d0" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">与更新trie相关的问题。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi od"><img src="../Images/f38762bd6292cbda31c8b13f17e6182a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2e23S__-0K7O_b6eXC5pA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图24:您将如何更新trie</figcaption></figure><p id="7d59" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">计算频率。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oe"><img src="../Images/f68f77dad6f25a4cfe2c0596eb52c65a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-BccsbDDfRSU2L0x2bvAQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图24:通过Map Reduce计算频率</figcaption></figure><p id="9c6c" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">要更新频率，有一个奇妙的方法叫做“<strong class="kn ir">指数移动平均线(EMA) </strong>”。</p><h2 id="7390" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">指数移动平均线</h2><p id="401a" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">指数移动平均线(EMA)，也称为指数加权移动平均线(EWMA)。它是一个一阶无限脉冲响应滤波器，应用指数递减的加权因子。与旧数据相比，新数据的权重更高。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi of"><img src="../Images/2e4d6b8e6163f53f3dd0c06cf39469ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCjffXtXXlJL3idAcAlzRA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图25: EMA</figcaption></figure><p id="4c95" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">EMA计算的好处:</p><ul class=""><li id="aca5" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">这将增加最新数据的权重。</li></ul><h1 id="5723" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">永久存储的数据库选择</h1><p id="8266" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">如果服务器宕机，我们需要在某个数据库中永久存储trie，以便可以重建trie。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi og"><img src="../Images/db12c90e000b975e436b74171d29fdf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SnMu9n5GaYdRAqxZRckkdQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图26:Trie结构的存储</figcaption></figure><p id="99c5" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">Trie的存储方案如下:</p><p id="a25e" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">让我们看看下面。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oh"><img src="../Images/ea69391dc83b4d26316beee8b57e3e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LM-sXxPG-DGa0_6-xxX__A.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图27: Trie结构</figcaption></figure><p id="88ce" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">我们可以像下面这样存储上面的Trie:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oi"><img src="../Images/3f7431714e737abc511758c2ab2ec21a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Wf3JdW3804xpJeRXaE3Gg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图28:上述trie的存储结构</figcaption></figure><h1 id="d2a9" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">高级系统设计</h1><p id="6a20" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">高层设计(HLD)定义了用于开发系统的架构。架构图提供了整个系统的轮廓，确定了为产品开发的主要组件及其接口。</p><p id="954f" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">低于高层系统设计。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oj"><img src="../Images/f6b051d7582a02f2d143507c7a548908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgQtjtnHxgE3zPH5Oay6hw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图29:高层设计</figcaption></figure><p id="afb9" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与Trie数据库的缩放有关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ok"><img src="../Images/4cfa8601cf411f3b42e997da02c66c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jrXQgFFnS3E8_S46XRntgQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图30: SQL与NoSQL</figcaption></figure><p id="9ca2" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与动物园管理员有关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ol"><img src="../Images/07f5ed6961ca759b18f8cbc9444dd73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9eMXJLM8dW2B5ARaNS6izA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图31:为什么选择动物园管理员？</figcaption></figure><p id="1ece" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与设计中的缓存相关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi om"><img src="../Images/7a4752e73e767a17158a9392429827ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mE-Hvw-00XWAPI1ZMHN3g.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图32:为什么要缓存？</figcaption></figure><p id="48a4" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与快照相关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi on"><img src="../Images/31716daf5f4df493e4d86b9dbc838524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPBYxyd8v6CCGTVM02c0oA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图33:为什么在这里拍快照？</figcaption></figure><p id="49e9" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与数据库的最终一致性有关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oo"><img src="../Images/ade7e39c04dff0c7adc22ac1f991c924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CoYRej-QwWmXIfaa1JYAIg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图34:您将如何维护数据库的最终一致性。</figcaption></figure><p id="a056" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">问题-与容错相关。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi op"><img src="../Images/17a4548772f42bdbd0041748932b30ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-sQtuVoQdX3pBalIK4UY5g.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图35:你将如何使系统容错？</figcaption></figure><h1 id="0114" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">低层次设计</h1><p id="fca8" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">低层次设计(LLD)是一种组件层次的设计方法，追求一步一步的进步过程。这种方法可用于设计数据结构、所需的软件架构、源代码以及最终的性能算法。</p><h2 id="4ba7" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">预计算数据的存储</h2><p id="adf6" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">缓存中的键-值结构将作为前缀(键)-建议(值)。</p><p id="1312" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">键值结构下:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oq"><img src="../Images/0881e78e02117278f6961554ec2420b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KnpJTR3RUmTB6u78Fm2STg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图36:键值存储</figcaption></figure><p id="2fa0" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">这个键值存储存储了top建议。在这里，每一个建议，我们也可以添加计数。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi or"><img src="../Images/1806b27f474ef1aa9ca049bf21cabce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kY1zx6bCeiVeuoyB7_xSAg.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图37:时间复杂度</figcaption></figure><h2 id="0d51" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">API设计</h2><p id="c812" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">下面是基本的API。</p><p id="8e6f" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">获取10大建议列表。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi os"><img src="../Images/f2ce8525d2490b88d26351d3c7826a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*3bkcXGzvDxCbq9WDqqZ-2g.png"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图38:获取建议</figcaption></figure><p id="3aa2" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">已经被搜索超过特定阈值的新的唯一趋势查询将被存储在数据库中。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/d281e7c91b08e5aeabfb9e2cdd3a5ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*pQGcZvYDCwWQR8yCGU9R2w.png"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图39:存储新的唯一查询</figcaption></figure><p id="55b8" class="pw-post-body-paragraph kl km iq kn b ko lz kq kr ks ma ku kv kw mb ky kz la mc lc ld le md lg lh li ij bi translated">一个基本的类图如下:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ou"><img src="../Images/c988209fa3cd9f6c7fb06b0960d6bad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3K1uybWieHV36aUo4EGag.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">图40:类图</figcaption></figure><h1 id="3603" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">考虑</h1><p id="bdeb" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在设计系统、服务或数据库时，需要考虑的事项很少:</p><ul class=""><li id="0426" class="me mf iq kn b ko lz ks ma kw mg la mh le mi li mj mk ml mm bi translated">即使出现问题，您如何确保数据保持正确和完整？</li><li id="427e" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">即使系统的某些部分降级了，您如何为客户提供持续良好的性能？</li><li id="0ab9" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">您如何扩展以应对负载的增加？</li><li id="340c" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">一个好的服务API是什么样子的？</li></ul><h2 id="fc06" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">你如何使你的系统可靠？</h2><ul class=""><li id="a1b7" class="me mf iq kn b ko kp ks kt kw ov la ow le ox li mj mk ml mm bi translated">以最小化出错机会的方式设计系统。例如，设计良好的抽象、API等。</li><li id="2c1f" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">将人们犯最多错误的地方与可能导致失败的地方分离开来。</li><li id="6690" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">在所有级别进行彻底测试。</li><li id="5d7f" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">允许从人为错误中快速轻松地恢复。</li><li id="2915" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">设置详细而清晰的监控，如性能指标和错误率。</li></ul><h2 id="2aa5" class="nb jo iq bd jp nc nd dn jt ne nf dp jx kw ng nh kb la ni nj kf le nk nl kj nm bi translated">总结扩展系统以支持数百万用户</h2><ul class=""><li id="ac43" class="me mf iq kn b ko kp ks kt kw ov la ow le ox li mj mk ml mm bi translated">保持web层无状态。</li><li id="77d9" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">在每一层建立冗余。</li><li id="8bac" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">尽可能多地缓存数据。</li><li id="ab91" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">支持多个数据中心。</li><li id="677a" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">在CDN中托管静态资产。</li><li id="64c6" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">通过分片扩展您的数据层。</li><li id="070a" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">将层划分为单独的服务。</li><li id="cf3b" class="me mf iq kn b ko mn ks mo kw mp la mq le mr li mj mk ml mm bi translated">监控您的系统并使用自动化工具。</li></ul><h1 id="9902" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">结论</h1><p id="828f" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">系统设计是软件开发的关键活动。在提出具体的数据库解决方案之前，一定要理解关于规模、一致性和可用性的要求。询问更多问题，以澄清设计所需的几个因素。您可能需要平衡预算和可用性，因为客户会要求您构建一个有足够能力承受任何合理规模的故障的系统。有几点必须澄清，比如客户或用户可以容忍多长时间的停机时间。从高级组件开始。你必须考虑其他方面，比如如果我们突然收到一波流量或数据，会发生什么。</p></div></div>    
</body>
</html>