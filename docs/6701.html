<html>
<head>
<title>How to create Adapters easily in 2022 as an Android Developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为Android开发者如何在2022年轻松创建适配器</h1>
<blockquote>原文：<a href="https://itnext.io/easyadapter-1-0-0-f392361c699c?source=collection_archive---------2-----------------------#2022-02-02">https://itnext.io/easyadapter-1-0-0-f392361c699c?source=collection_archive---------2-----------------------#2022-02-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/358197f90ea516c8f5c9d9ac18c7166a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dhXfeipoQtMs-3n3nlWXqA.png"/></div></div></figure><p id="f67c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，在Android开发中，几乎每个项目都有一个或多个适配器类来处理视图集合，还有许多不同类型的适配器，如RecyclerAdapter、ListAdapter、Paging2 Adapter、Paging 3 Adapter、ArrayAdapter、ExpandableListAdapter，有时您需要创建一个复杂的适配器类，但大多数时候您需要的只是将模型类与列表项布局绑定，并提供一些额外的侦听器，如此而已，那么我们为什么不能自动创建这些适配器类呢？</p><p id="9971" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在谈论我们将如何自动化它之前，让我们首先谈论我们想要什么特性以及我们想要避免什么问题。</p><p id="a7a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以先说特点？</p><ul class=""><li id="290b" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">声明如何轻松地将数据绑定到视图。</li><li id="343b" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">向任何视图或主列表项布局视图添加侦听器。</li><li id="2428" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">支持一些功能，如加载图像与第三方库，如毕加索，滑翔，线圈。</li><li id="64a6" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">支持适配器类的默认和自定义名称。</li><li id="4eed" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果我们犯了任何错误，请提供清晰的错误消息。</li></ul><p id="6110" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用这种解决方案我们想避免什么问题？</p><ul class=""><li id="5906" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">向运行时添加任何成本。</li><li id="46fe" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">编写复杂的代码来处理这个解决方案。</li><li id="07a5" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">缓慢的构建时间。</li><li id="4934" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">难学。</li><li id="6ed3" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">限制。</li></ul><p id="3909" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么现在这个解决方案是什么？</p><p id="bc9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">解决方案是<strong class="ka ir"> EasyAdapter </strong>,这是一个新的Android注释处理库，可以在编译时根据您的模型类和您的自定义信息生成适配器类。</p><p id="411c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么它是如何工作的呢？</p><p id="6160" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">EasyAdapter只有两种类型的注释，即适配器和绑定注释，第一种类型用于注释模型类，告诉EasyAdapter您希望从这个模型生成什么类型的适配器，以及您希望使用什么列表项，例如</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="0dbb" class="lt lu iq lp b gy lv lw l lx ly">@ListAdapter("com.amrdeveloper.app", "list_item_model")<br/>class Model</span></pre><p id="af89" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此示例告诉库，您想要为模型类生成ListAdapter，并使用“R.layout.list_item_model”作为列表项，例如，您还可以更改生成的名称。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="9625" class="lt lu iq lp b gy lv lw l lx ly">@ListAdapter("com.amrdeveloper.app", "list_item_model", "ModelAdapter")<br/>class Model</span></pre><p id="7d44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在版本1.0.0中，EasyAdapter提供了6种适配器类型，它们是</p><ul class=""><li id="cf7d" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">ArrayAdapter</li><li id="4f73" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">列表适配器</li><li id="2c78" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">回收直升机</li><li id="54fb" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">PagedListAdapter</li><li id="fa69" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">PagingDataAdapter</li><li id="9c84" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">可扩展列表适配器</li></ul><p id="66cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还可以在文档网站上找到关于它们的完整文档和示例</p><p id="f75a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二种注释类型是绑定注释，它们用于绑定或提供特性</p><p id="7e8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，要告诉EasyAdapter您想要使用这个字符串字段作为id为R.id.user_name的TextView的文本，您可以使用@BindText</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="d1a7" class="lt lu iq lp b gy lv lw l lx ly">@BindText("user_name") val name : String</span></pre><p id="1722" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此代码将生成一段代码，用于在id为“R.id.user_avatar”的ImageView类中加载路径为imagePath的图像</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="a833" class="lt lu iq lp b gy lv lw l lx ly">@BindImage(ImageLoader.PICASSO, "user_avatar")<br/>val imagePath : String</span></pre><p id="08f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，您还可以在模型类上使用@BindListener注释来为任何视图生成侦听器</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="9547" class="lt lu iq lp b gy lv lw l lx ly">@BindListener(ListenerType.OnClick) @BindListener(ListenerType.OnClick, "call_button")<br/>...<br/>class Model</span></pre><p id="95fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">EasyAdapter现在将生成两个单击监听器第一个用于列表项本身，另一个用于id为R.id.call_button的视图</p><p id="e82b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在版本1.0.0 10中，绑定注释</p><ul class=""><li id="bc76" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">绑定文本</li><li id="6848" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindImage</li><li id="9eda" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindImageRes</li><li id="d1fd" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindBackgroundColor</li><li id="84ec" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindBackgroundRes</li><li id="66b2" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindAlpha</li><li id="1d98" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindGif</li><li id="7f7e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">绑定可见性</li><li id="740f" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">绑定监听器</li><li id="4a9d" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">绑定可扩展</li><li id="6b24" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">BindExpandableMap</li></ul><p id="bb33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还可以在文档网站上找到关于它们的完整文档和示例</p><p id="b9ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如你所见，使用EasyAdapter并不难，你可以在几分钟内轻松学会。</p><p id="7395" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是EasyAdapter到底是如何工作的呢？</p><p id="9dfb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">EasyAdapter支持2个注释处理器<a class="ae lz" href="https://kotlinlang.org/docs/kapt.html" rel="noopener ugc nofollow" target="_blank"> Kapt </a> (Kotlin注释处理工具)和<a class="ae lz" href="https://kotlinlang.org/docs/ksp-overview.html" rel="noopener ugc nofollow" target="_blank"> KSP </a> (Kotlin符号处理)，可以在源代码中穿行，并通过简单的类型检查从注释中收集信息，以确保例如代表图像路径的@BindImage注释字符串字段，如果需要，显示错误和警告消息。 在我们获得所有需要的信息后，我们使用代码生成器，使用Square的<a class="ae lz" href="https://github.com/square/kotlinpoet" rel="noopener ugc nofollow" target="_blank"> kotlinpoet </a>库生成结果适配器类源代码，然后我们将这些源代码写入输出目录内的适配器文件中:d .我们试图尽可能优化生成的代码，例如，我们避免使用相同的Id调用可变的findViewById，而是使用一个受<a class="ae lz" href="https://en.wikipedia.org/wiki/Symbol_table" rel="noopener ugc nofollow" target="_blank">符号表</a>概念启发的ViewTable类来管理声明的变量并再次重用它们。</p><p id="df6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这只是第一个版本，欢迎每个人通过建议功能、报告问题和对代码库或文档做出贡献来帮助改进这个工具，每个人都可以增加价值。</p><p id="5756" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">github repository:<a class="ae lz" href="https://github.com/amrdeveloper/easyadapter" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">AMR developer/easy adapter</strong></a><br/>网址:<a class="ae lz" href="https://amrdeveloper.github.io/EasyAdapter/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> EasyAdapter </strong> </a></p><p id="b092" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae lz" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> GitHub </strong> </a>，<a class="ae lz" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> LinkedIn </strong> </a>，<a class="ae lz" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Twitter </strong> </a>上找到我。</p><p id="a142" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受编程😋。</p></div></div>    
</body>
</html>