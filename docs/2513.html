<html>
<head>
<title>React Native — Publish Signed APK Android Keystore</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native —发布签名的APK Android密钥库</h1>
<blockquote>原文：<a href="https://itnext.io/react-native-publish-signed-android-apk-c374e09e3fd7?source=collection_archive---------0-----------------------#2019-06-06">https://itnext.io/react-native-publish-signed-android-apk-c374e09e3fd7?source=collection_archive---------0-----------------------#2019-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/4d1f23cb829308dacbc819a3f38e89df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BGsqo8u288-5lcUE"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@tinhkhuong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丁昆</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="f99d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您刚刚开发了所有的react-native代码并测试了所有的应用程序，并且想要在您的真实设备中进行尝试？</p><p id="d933" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在是时候创建Android APK来在真实设备中测试您的应用程序了。</p><p id="733c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Android设备要求所有应用程序都必须用证书进行数字签名。我将解释如何创建您自己的证书，并用您的数字签名签署您漂亮的应用程序。</p><p id="037a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">认证你的应用程序后，你可以将你的应用程序分发给<strong class="ki iu">谷歌Play商店</strong>。</p><h2 id="cf06" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak">让我们从生成登录密钥</strong>开始</h2><p id="d557" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">您可以使用<code class="fe mc md me mf b">keytool</code>生成私有签名密钥。在Windows上<code class="fe mc md me mf b">keytool</code>必须从<code class="fe mc md me mf b">C:\Program Files\Java\jdkx.x.x_x\bin</code>运行。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="c22e" class="le lf it mf b gy mo mp l mq mr">keytool -genkeypair -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000</span></pre><p id="fc03" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Keytool会问你</p><ul class=""><li id="01eb" class="ms mt it ki b kj kk kn ko kr mu kv mv kz mw ld mx my mz na bi translated">密码</li><li id="ca28" class="ms mt it ki b kj nb kn nc kr nd kv ne kz nf ld mx my mz na bi translated">名字和姓氏</li><li id="74cc" class="ms mt it ki b kj nb kn nc kr nd kv ne kz nf ld mx my mz na bi translated">企业中各管理部门</li><li id="159f" class="ms mt it ki b kj nb kn nc kr nd kv ne kz nf ld mx my mz na bi translated">组织</li><li id="ac4a" class="ms mt it ki b kj nb kn nc kr nd kv ne kz nf ld mx my mz na bi translated">城市或地区</li><li id="dbf9" class="ms mt it ki b kj nb kn nc kr nd kv ne kz nf ld mx my mz na bi translated">州或省</li><li id="a387" class="ms mt it ki b kj nb kn nc kr nd kv ne kz nf ld mx my mz na bi translated">两个字母的国家代码</li></ul><p id="8fde" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">密码</strong>是那里必需的一个*</p><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/1ac1877f25390efecfc518a62a21726d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*2TZwuSN1W1MvvbJPoBFBow.png"/></div></figure><p id="31fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Keytool将为您创建<strong class="ki iu">my-release-key . keystore</strong>文件。</p><p id="3269" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你的证书有效期为10000天。</p><h2 id="a97a" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak">用创建的密钥签名应用</strong></h2><p id="9596" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">现在是放置所需目录的键的时候了。</p><p id="9626" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你使用的是mac，你可以用这个命令找到你的<strong class="ki iu"> jdk </strong>路径</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="937e" class="le lf it mf b gy mo mp l mq mr">$ /usr/libexec/java_home</span></pre><p id="5ed0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在使用cd到该目录</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="c611" class="le lf it mf b gy mo mp l mq mr">$ cd /your/jdk/path</span></pre><p id="5517" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将您的<strong class="ki iu">my-release-key . keystore</strong>文件粘贴到那里。</p><p id="fe66" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还需要将密钥放入React本地应用程序，打开您的项目根文件夹，并将目录更改为，</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="b736" class="le lf it mf b gy mo mp l mq mr">$ cd android/app</span></pre><p id="8eb4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在编辑<strong class="ki iu">Android/gradle . properties</strong>文件</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="e440" class="le lf it mf b gy mo mp l mq mr">MYAPP_RELEASE_STORE_FILE=my-release-key.keystore MYAPP_RELEASE_KEY_ALIAS=my-key-alias MYAPP_RELEASE_STORE_PASSWORD=******<br/>MYAPP_RELEASE_KEY_PASSWORD=******</span></pre><p id="7677" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不要忘记将<strong class="ki iu"> ****** </strong>替换为您真实的店铺密码和钥匙密码。</p><h2 id="3e95" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">将签名配置添加到你的应用的gradle配置</h2><p id="a945" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">打开<strong class="ki iu">Android/app/build . gradle</strong>文件。</p><p id="33be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">添加<strong class="ki iu">符号配置版本</strong>和<strong class="ki iu">构建类型版本</strong>如下。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="584d" class="le lf it mf b gy mo mp l mq mr">Edit the file <!-- -->android/app/build.gradle<!-- --> in your project folder, and add the signing config,</span><span id="87b0" class="le lf it mf b gy nh mp l mq mr">...<br/>android {<br/>    ...<br/>    defaultConfig { ... }<br/>    signingConfigs {<br/>        release {<br/>            if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {<br/>                storeFile file(MYAPP_RELEASE_STORE_FILE)<br/>                storePassword MYAPP_RELEASE_STORE_PASSWORD<br/>                keyAlias MYAPP_RELEASE_KEY_ALIAS<br/>                keyPassword MYAPP_RELEASE_KEY_PASSWORD<br/>            }<br/>        }<br/>    }<br/>    buildTypes {<br/>        release {<br/>            ...<br/>            signingConfig signingConfigs.release<br/>        }<br/>    }<br/>}<br/>...</span></pre><h2 id="fde9" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">一切准备就绪！</h2><p id="a8ab" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">现在让我们创建签名的React-Native应用程序APK！😎</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="a258" class="le lf it mf b gy mo mp l mq mr">$ cd android <br/>$ ./gradlew assembleRelease</span></pre><p id="cdea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将创建您的项目apk！</p><p id="eed4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">让我们打开我们在真实设备中创建的应用</strong></p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="f02c" class="le lf it mf b gy mo mp l mq mr">react-native run-android --variant=release</span></pre><p id="2f70" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在你可以开始在真正的android设备上测试你的应用了！</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="0887" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="np">如果你觉得这篇文章很有帮助，你</em> <a class="ae kf" href="https://medium.com/@melihyumak" rel="noopener"> <strong class="ki iu"> <em class="np">可以通过使用我的推荐链接注册一个</em> <a class="ae kf" href="https://melihyumak.medium.com/membership" rel="noopener"> <strong class="ki iu"> <em class="np">中级会员来访问类似的文章</em> </strong> </a> <em class="np">。</em> </strong> </a></p><p id="bedb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="np">跟我上</em> </strong> <a class="ae kf" href="https://twitter.com/hadnazzar" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">推特</strong> </a></p><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/e09adde9fd734db2f987c8df72839da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*NxeTL1qQlC1dv9-b.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在Youtube 上订阅更多内容</figcaption></figure><h1 id="8d23" class="nr lf it bd lg ns nt nu lj nv nw nx lm ny nz oa lp ob oc od ls oe of og lv oh bi translated">编码快乐！</h1><p id="d50c" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">梅利赫</p></div></div>    
</body>
</html>