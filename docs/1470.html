<html>
<head>
<title>Why Is Securing Kubernetes so Difficult?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么保护Kubernetes如此困难？</h1>
<blockquote>原文：<a href="https://itnext.io/why-is-securing-kubernetes-so-difficult-e64f6e30f35c?source=collection_archive---------3-----------------------#2018-10-25">https://itnext.io/why-is-securing-kubernetes-so-difficult-e64f6e30f35c?source=collection_archive---------3-----------------------#2018-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c131c5a58910d760b0a28c969dd99a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRJ47bqjqMJe0vJMeg2aqA.png"/></div></div></figure><p id="1fdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你已经熟悉Kubernetes，标题中的问题可能会在你内心深处引起共鸣。如果你刚刚开始你的<a class="ae kw" href="https://container-solutions.com/what-is-cloud-native/" rel="noopener ugc nofollow" target="_blank">云原生</a>之旅，而Kubernetes代表着一座即将征服的山峰，你会很快意识到这个问题的相关性。</p><p id="0a16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在最好的情况下，安全性是很难的，但是当您的软件应用程序由大量运行在容器中的小型、动态、可伸缩、分布式微服务组成时，它会变得更加困难。不仅仅是环境的短暂性增加了困难，新工作流和工具链的采用也带来了新的安全考虑。</p><p id="0830" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们再深入一点。</p><h1 id="b157" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">技能</h1><p id="ebfd" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">首先，Kubernetes和容器化微服务交付管道中使用的一些其他工具很复杂。他们有一个陡峭的学习曲线，受制于频繁变化的激进发布周期，并且需要相当大的努力来保持平台安全性的所有细微方面的顶部。如果负责安全的团队成员不知道应该如何保护平台，或者更糟糕的是，没有人被分配责任，那么可以想象，平台中可能存在明显的安全漏洞。往好的方面说，这可能会让<a class="ae kw" href="https://arstechnica.com/information-technology/2018/02/tesla-cloud-resources-are-hacked-to-run-cryptocurrency-mining-malware/" rel="noopener ugc nofollow" target="_blank">尴尬</a>，往坏的方面说，可能会产生有害的后果。</p><h1 id="1568" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">焦点</h1><p id="7afd" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">为了成为所选市场的创新者，或者更灵活地响应外部市场力量(例如，客户需求或竞争对手活动)，新老组织、小组织和大组织都在忙于采用DevOps实践。重点是新功能和修复的交付速度，开发和运营之间的传统界限变得模糊。当我们开发和定义我们的集成、测试和交付管道时，我们考虑操作方面是很好的，但是安全性呢？安全不应该是事后的想法；它需要成为软件开发生命周期不可分割的一部分，在过程的每一步都要考虑。遗憾的是，情况往往并非如此，但人们越来越认识到安全性需要“左移”，并在交付渠道中得到满足。这种做法被称为<a class="ae kw" href="https://www.csoonline.com/article/3245748/devops/what-is-devsecops-developing-more-secure-applications.html" rel="noopener ugc nofollow" target="_blank">持续安全。</a></p><h1 id="9ff9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">复杂性</h1><p id="3d38" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我们已经提到了Kubernetes和它的共生工具在本质上很复杂，有点难以掌握。但是情况变得更糟，因为Kubernetes堆栈中有多个层，每个层都有自己的安全考虑。仅仅锁定一层而忽略组成堆栈的其他层是不够的。这有点像锁上门，而让窗户大开着。</p><p id="f625" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不得不考虑和实现多层安全性会增加复杂性。但它也有一个有益的副作用；它提供了“T0”深度防御，这样，如果一个安全机制被潜在攻击者绕过，同一层或另一层中的另一个机制可以介入并使攻击无效。</p><h1 id="3d95" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">保护所有层</h1><p id="5c9c" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">那么，在Kubernetes平台中需要保护哪些层呢？</p><p id="01ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，有一个基础设施层，由机器和它们之间的网络连接组成。这些机器可能由物理或抽象的硬件组件组成，并且将运行操作系统和(通常)Docker引擎。</p><p id="4036" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其次，还有一个由Kubernetes集群组件组成的基础设施层；主节点上运行的控制平面组件，以及与工作节点上运行的容器工作负载交互的组件。</p><p id="3d00" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一层处理对Kubernetes应用各种安全控制，以便控制集群内部的访问，定义运行容器工作负载的策略，并提供工作负载隔离。</p><p id="88ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，工作负载安全层处理容器工作负载本身的安全性、来源和完整性。该安全层不仅应该处理有助于管理工作负载安全性的工具，还应该处理如何将这些工具整合到端到端工作流中。</p><h1 id="1b99" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">一些常见的主题</h1><p id="1a7a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">了解一些贯穿大多数需要我们考虑的层的常见安全主题是很有用的。提前认识到它们，并在它们的应用中采取一致的方法，可以极大地帮助实施安全策略。</p><ul class=""><li id="5fa3" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated"><strong class="ka ir">最小特权原则</strong> —在更广泛的IT安全中普遍应用的原则，它关注的是限制用户和应用服务对可用资源的访问，以使提供的访问仅足以执行分配的功能。这有助于防止特权升级；例如，如果一个容器工作负载受到损害，并且它的部署权限仅够执行其任务，那么损害的后果仅限于分配给该工作负载的权限。</li><li id="1a86" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><strong class="ka ir">软件货币</strong> —保持软件最新对于保持平台安全至关重要。不言而喻，应尽可能快地应用与安全相关的补丁，其他软件组件在应用于生产服务之前，应在测试环境中进行彻底的测试。在部署全新的主要版本(例如2.0)时，需要注意一些事项，一般来说，在生产环境中部署alpha、beta或发布候选版本是不明智的。有趣的是，这并不一定适用于与Kubernetes对象相关的API版本。例如，常用的入口对象的API从Kubernetes v1.1开始就已经是版本<code class="fe mo mp mq mr b">v1beta1</code>了。</li><li id="7e06" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><strong class="ka ir">日志&amp;审计</strong>——能够回头查看是什么或谁发起了特定的动作或动作链，这对于维护平台的安全性非常有价值。应该在平台堆栈的所有层中配置审计事件的日志记录，包括使用审计策略对Kubernetes集群活动的审计。审计日志应该使用日志运送器(如<a class="ae kw" href="https://www.fluentd.org/" rel="noopener ugc nofollow" target="_blank"> Fluentd </a>或<a class="ae kw" href="https://www.elastic.co/products/beats/filebeat" rel="noopener ugc nofollow" target="_blank"> Filebeat </a>)收集并运送到中央存储库，在那里可以使用<a class="ae kw" href="https://www.elastic.co/products/elasticsearch" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>或公共云等工具存储日志以供后续分析。</li><li id="e5f3" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated"><strong class="ka ir">安全性与工作效率的权衡</strong> —在某些情况下，安全性可能会被视为工作效率的障碍；尤其是开发人员的生产力。例如，如果允许开发团队以更快的速度前进，那么允许特权容器的执行所带来的风险可能是可以接受的。对于开发环境、生产环境，甚至是用于学习和尝试的操场环境，安全性和生产力(以及其他因素)之间的权衡是不同的。在一种环境下不可接受的，在另一种环境下可能完全可以接受。然而，与放松安全限制相关的风险不应被忽视；应该仔细计算，并尽可能减轻。例如，特权容器的使用可以通过使用Kubernetes-native安全控制(如RBAC和Pod安全策略)来缓解。</li></ul><h1 id="ee38" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">系列大纲</h1><p id="ad63" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在Kubernetes平台上配置安全性很困难，但并非不可能！这是名为<strong class="ka ir"> <em class="ms">保护Kubernetes for Cloud Native Applications</em></strong>的系列文章中的一篇介绍性文章，旨在揭示Kubernetes平台的安全性。我们不可能涵盖每个主题和每个方面，但我们的目标是提供每个层的安全要求的良好概述，以及我们为客户运行生产级Kubernetes集群的经验中的一些见解。</p><p id="0e5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该系列文章包括以下内容:</p><ul class=""><li id="3e92" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">为什么保护Kubernetes如此困难？(本文)</li><li id="7ac5" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">保护Kubernetes集群的基础设施</li><li id="c72e" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">保护Kubernetes集群组件的配置</li><li id="b5a1" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">对Kubernetes集群应用最佳实践安全控制</li><li id="ea12" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">管理Kubernetes容器工作负载的安全性</li></ul><p id="e6ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由<a class="ae kw" href="https://twitter.com/puja108" rel="noopener ugc nofollow" target="_blank">Puja Abbas si</a>——开发者倡议@ <a class="ae kw" href="https://giantswarm.io/" rel="noopener ugc nofollow" target="_blank">巨型群体</a>撰写</p><div class="mt mu gp gr mv mw"><a href="https://twitter.com/puja108" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">Puja Abbassi (@puja108) |推特</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Puja Abbassi的最新推文(@puja108)。开发者倡导者@ GiantSwarm &amp; Researcher主题:码头工人…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">twitter.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jw mw"/></div></div></a></div></div></div>    
</body>
</html>