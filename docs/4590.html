<html>
<head>
<title>Add a “Now Playing Bar” with SwiftUI to your app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将带有SwiftUI的“正在播放栏”添加到您的应用程序中</h1>
<blockquote>原文：<a href="https://itnext.io/add-a-now-playing-bar-with-swiftui-to-your-app-d515b03f05e3?source=collection_archive---------0-----------------------#2020-08-01">https://itnext.io/add-a-now-playing-bar-with-swiftui-to-your-app-d515b03f05e3?source=collection_archive---------0-----------------------#2020-08-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5787451fe7f2466ff8b20ee201dd5870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0iVXQ3kbtgquTTJY_zMpQ.png"/></div></div></figure><div class=""/><p id="7bb7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当你有一个媒体应用程序时，你可能想要一个“正在播放栏”，就像Spotify、Apple Music、YouTube或播客一样。但是你不需要成为一个媒体应用程序，在底部有一个信息栏。在这篇文章中，我将展示如何添加一个“正在播放栏”和一些例子，关于如何在你的SwiftUI应用中实现一个信息栏。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="f050" class="lg lh je bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">为“正在播放”栏做准备</h1><p id="abbb" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">当你有一个媒体应用程序时，它可能看起来像这样:</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mj"><img src="../Images/af9a7d959aa155f81bb4dcfddeb4163b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bF0do5uyOjGHBJr1siJ8TQ.png"/></div></div></figure><p id="da8d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用这样的代码:</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="e475" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将把这个栏放在<code class="fe mq mr ms mt b">TabView</code>的顶部和内容的上方。我们将使用视图作为输入，然后将Now playing栏放在它上面的一个<code class="fe mq mr ms mt b">ZStack</code>中。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="49ec" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们只需要在<code class="fe mq mr ms mt b">NowPlayingBar(content: _)</code>中包装我们的个人视图，为这个特性做准备。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="294d" class="lg lh je bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">建立“现在玩吧”</h1><p id="eb14" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">你想如何设计酒吧完全取决于你的应用程序看起来怎么样，你的酒吧应该有什么功能。所以我展示了如何重新创建苹果音乐现在播放酒吧用户界面。</p><p id="9638" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">吧台的背景是一个<code class="fe mq mr ms mt b">UIBlurEffect</code>。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="cf71" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">SwiftUI中没有原生的模糊效果，所以我们需要这个<code class="fe mq mr ms mt b">UIViewRepresentable</code>。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="fdc1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该栏只包含一个<code class="fe mq mr ms mt b">HStack</code>，其中包含专辑封面、标题、暂停按钮和前进按钮。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mj"><img src="../Images/d6c8c6846d6b10b38cce5aefbf216005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3lscqxxNuEjupv69ZGnUbg.png"/></div></div></figure><p id="de31" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这看起来棒极了！要在你的应用中实现这一点，用这个<code class="fe mq mr ms mt b">ZStack</code>替换<code class="fe mq mr ms mt b">NowPlayingBar()</code>中的<code class="fe mq mr ms mt b">// Now playing bar</code>。要添加动作，您可以在按钮上添加如下内容:</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="bccf" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当你在iPadOS中使用侧边栏而不是<code class="fe mq mr ms mt b">TabView</code>时，你可以把你的视图作为<code class="fe mq mr ms mt b">NowPlayingBar(content: _)</code>的内容参数，也许可以修改侧边栏，在更大的屏幕上显示更多的内容。当你的应用没有<code class="fe mq mr ms mt b">TabView</code>时，你也可以把它放在<code class="fe mq mr ms mt b">.bottomBar</code>工具栏中。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="9b10" class="lg lh je bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">添加媒体播放器视图</h1><p id="767c" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">您可能已经注意到，封面图像、标题和<code class="fe mq mr ms mt b">Spacer()</code>都被包装在一个<code class="fe mq mr ms mt b">Button</code>中。此按钮应该切换承载媒体播放器详细视图的工作表。</p><figure class="mk ml mm mn gt iv"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="5579" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将<code class="fe mq mr ms mt b">@State</code>放入<code class="fe mq mr ms mt b">NowPlayingView</code>结构的顶部，并用新的<code class="fe mq mr ms mt b">Button</code>替换旧的。目前还不可能像Apple Music那样在Now playing栏和媒体播放器之间创建一个过渡。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="23ec" class="lg lh je bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">例子和想法</h1><p id="dc12" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">虽然这对于媒体应用程序来说最有意义，但它们也可以用来一目了然地显示整个应用程序的信息和操作。</p><h2 id="967b" class="mu lh je bd li mv mw dn lm mx my dp lq km mz na lu kq nb nc ly ku nd ne mc nf bi translated">喝水app</h2><p id="2142" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">你可以向用户展示他的饮酒进度。还有一个记录新饮料的按钮。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/d6f461d5761376bcb8ef73e672700cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g8G7wm1Jx_41pa7dmXRP0g.png"/></div></div></figure><h2 id="89a5" class="mu lh je bd li mv mw dn lm mx my dp lq km mz na lu kq nb nc ly ku nd ne mc nf bi translated">地图应用程序</h2><p id="96b8" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">地图上方的水平<code class="fe mq mr ms mt b">ScrollView</code>，用于快速选择不同的兴趣点类别。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/1dfcbe4220593ee817ac02f2744a986d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QsTJEaGuqMrkUP5hrj9O2A.png"/></div></div></figure><h2 id="2726" class="mu lh je bd li mv mw dn lm mx my dp lq km mz na lu kq nb nc ly ku nd ne mc nf bi translated">股票应用程序</h2><p id="3dec" class="pw-post-body-paragraph kb kc je kd b ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky im bi translated">显示用户的股票，包含重要信息。用户可以用v形手动切换不同的股票，但它们也会在一段时间后自动改变。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/85180369605b8e9c6a92644f92c0d089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s-CDH8o6pJgz1KdyjWW74Q.png"/></div></div></figure><p id="09e5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你也可以实现一个移动股票滚动视图，就像在iOS股票应用程序中一样。</p><figure class="mk ml mm mn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nh"><img src="../Images/84e3643d7de571f00371a816011ecd27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TVVZEQWgjKvltEIGA9UYUw.jpeg"/></div></div></figure></div></div>    
</body>
</html>