<html>
<head>
<title>Use CCXT to calculate Cryptocurrency trade indicators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CCXT计算加密货币贸易指标</h1>
<blockquote>原文：<a href="https://itnext.io/use-ccxt-to-calculate-cryptocurrency-trade-indicators-102a3ac1428e?source=collection_archive---------0-----------------------#2021-01-13">https://itnext.io/use-ccxt-to-calculate-cryptocurrency-trade-indicators-102a3ac1428e?source=collection_archive---------0-----------------------#2021-01-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="88ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">在写作的时候，比特币正在蓬勃发展。这是迄今为止最著名的加密货币。除了比特币，还有很多其他类型的加密货币，通常被称为替代币。经验丰富的交易者使用交易指标在比特币、替代币和其他公认的货币之间进行交易。在这篇文章中，我将介绍一些常用的指标，我将描述如何计算它们，并简要解释一个买/卖策略。</em></p><p id="eb25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">许多贸易指标可以通过使用历史数据来计算。从交易所的某个硬币对(如ETH/BTC)获得正确的数据非常重要。这里我们将使用<a class="ae kp" href="https://github.com/ccxt/ccxt" rel="noopener ugc nofollow" target="_blank"> CCXT </a>。该库在由交易所提供的API之上提供了一个层。CCXT支持<a class="ae kp" href="https://github.com/ccxt/ccxt#supported-cryptocurrency-exchange-markets" rel="noopener ugc nofollow" target="_blank">许多加密货币交易</a>并使它们之间的交互变得容易。在我的例子中，我将使用币安作为交换，使用Python与CCXT库进行交互。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/dc87bb80810dacf5fbb027d6b9c2374c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ts1504_Jk_kL0Te20hqqrg.jpeg"/></div></div></figure><p id="908b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始我的解释之前，我想强调的是，加密货币交易或创建一个交易机器人并没有那么明确。指标试图给出一个指示。它们并不代表绝对的真理。小心使用它，在使用它们之前先测试你的计算。在本文中，我将重点介绍如何计算这些指标。详细的解释通常由外部来源很好地解释。通过使用这个组合，你应该能够创造一个良好的交易策略！</p><p id="c2b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们开始吧！我已经在我的<a class="ae kp" href="https://www.binance.com/en" rel="noopener ugc nofollow" target="_blank">币安</a>账户中生成了API密匙。如前所述，如果您愿意，可以使用不同的交换。甚至可以使用不同的编程语言，如JavaScript或PHP。下面我写了一些代码来导入CCXT库并配置我的exchange。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="8830" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">打印<code class="fe le lf lg lh b">coin_pairs</code>变量的内容将显示交易所支持的所有可能的硬币对(或交易对)。当这些对使用不同的“基础”硬币时，比较它们可能相当困难(例如，比较XLM/联邦理工学院和XRP/BTC之间的价格比比较XLM/BTC和XRP/BTC要困难得多)。这就是为什么我会过滤硬币对，只使用BTC作为基础硬币的原因。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="8359" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们有了可用硬币对的完整列表。我们的策略是遍历这个列表，并为每个硬币对获取必要的历史数据。接下来，我们可以计算交易指标，并创建买入/卖出信号。</p><p id="2704" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae kp" href="https://github.com/ccxt/ccxt/wiki/Manual#ohlcv-candlestick-charts" rel="noopener ugc nofollow" target="_blank"> CCXT为我们提供了一种简单的方法来检索OHLC(V)数据</a>。<em class="ko"> OHLC(V) </em>是加密货币交易数据的汇总形式，代表开盘、盘高、盘低、收盘和成交量。它将作为我们的历史资料。要获取这些数据，我们需要一个已配置的exchange连接和一个时间范围(1m、5m、1h、1d、…)。时间范围定义了测量的持续时间。如果你定义一个5m的时间框架，你将得到某个硬币对在5分钟间隔内的开盘价(O)，最高价(H)，最低价(L)和收盘价(C)。默认情况下，您将有500个指标(如果可用)。当您想要更多或更少的度量时，您可以使用一个可选参数来定义“a since”。(=从某个时间点开始的所有可用指标)。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="b1b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的代码中，我们将获取每对硬币的OHLCV数据。我们使用1小时的时间框架。我们还将通过<a class="ae kp" href="https://pypi.org/project/stockstats/" rel="noopener ugc nofollow" target="_blank"> stockstats </a> <em class="ko">将<a class="ae kp" href="https://pypi.org/project/pandas/" rel="noopener ugc nofollow" target="_blank"> <em class="ko">熊猫</em> </a> <em class="ko"> </em>数据帧转换为<em class="ko"> stockstats </em>数据帧。</em> Stockstats <em class="ko"> </em>是<em class="ko"> pandas </em>数据帧的包装器，提供计算许多不同股票市场指标的能力。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi li"><img src="../Images/aed8ac6f5cf5fb04c549b74285af9cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7c4v5mwnCoMOvB_QERJ5BQ.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">Stockstats数据帧的输出</figcaption></figure><h2 id="5083" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">24小时交易量</h2><p id="d3c3" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">交易量是指某一天买卖双方交换的某个币对的总数。观察一段时间内的成交量模式有助于了解特定股票和整个市场涨跌背后的力量或信念。</p><p id="b649" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">计算24小时交易量的正确方法取决于你如何配置你的时间间隔。如果时间间隔为一天，您可以只获取数据帧的最后一项。如果使用1小时的时间间隔，则必须对最近24次测量进行求和。(参见示例)。这将涵盖24小时的数据。一种更精确、更简单的方法是使用滚动条。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lc ld l"/></div></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ml"><img src="../Images/8ea0dd06d509746f428443bc2e9d755b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aWLTHEt_rwqWgiND_6ifiw.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">这个计算运行了将近18.58小时，因此它包含了将近24小时的数据。</figcaption></figure><p id="dca1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以用交易量来确认趋势，或者识别看涨或看跌的T21信号。这里有更详细的解释。</p><h2 id="872c" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">RSI</h2><p id="ae83" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">相对强弱指数(RSI)衡量最近价格变化的幅度，以评估股票价格的超买或超卖情况。</p><p id="33c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">RSI的传统解释和用法表明，70或以上的值表明一枚硬币正在超买。RSI读数为30或以下表明超卖或低估。</p><pre class="kr ks kt ku gt mm lh mn mo aw mp bi"><span id="2c40" class="ln lo it lh b gy mq mr l ms mt"># Calculate RSI                       <br/>stock_data['rsi_14']                     <br/>print(stock_data)<br/>                       <br/># Get most recent RSI value of our data frame<br/># In our case this represents the RSI of the last 1h                  last_rsi = stock_data['rsi_14'].iloc[-1]                       print(last_rsi)</span><span id="b9eb" class="ln lo it lh b gy mu mr l ms mt"># output (see data below):<br/>39</span></pre><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mv"><img src="../Images/dab3d3b031a12f076108a3f26794268b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAfoy-AcsUdgZ76n2bOYEg.png"/></div></div></figure><p id="240f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">RSI被添加到股票数据中。目前的RSI是39。这不低于30(买入信号)，也不高于70(卖出信号)。目前，这个标志告诉我们要“<a class="ae kp" href="https://en.wikipedia.org/wiki/Hodl" rel="noopener ugc nofollow" target="_blank"> hodl </a>”。在RSI低于30的几个小时前。这可能是买入的好时机。这种解释实际上过于短视。你必须考虑其他几件事。他们在<a class="ae kp" href="https://www.investopedia.com/terms/r/rsi.asp" rel="noopener ugc nofollow" target="_blank">这里</a>有更详细的解释。</p><h2 id="0ee6" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">MACDS麦当劳</h2><p id="a641" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">移动平均线收敛背离(MACD)是一个交易指标，它显示了一个硬币的两个移动平均线(T4)和价格之间的关系。MACD的计算方法是从12期均线中减去26期指数移动平均线。我不想太关注技术方面，尽管当你想在交易策略中使用它时，详细理解它是非常重要的。</p><pre class="kr ks kt ku gt mm lh mn mo aw mp bi"><span id="9ad1" class="ln lo it lh b gy mq mr l ms mt"># Calculate macd<br/>stock_data['macd']<br/>print(stock_data)</span></pre><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mw"><img src="../Images/3b64101a4c21a93c1b154e4a5e9dbf9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s6DKNJtPHUPNcEBYe58evA.png"/></div></div></figure><p id="d1a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果没有图纸，这些值很难解释。我用<a class="ae kp" href="https://pypi.org/project/plotly/" rel="noopener ugc nofollow" target="_blank">巧妙的</a>创建了一个显示MACD行为的图表。在上面的图表中，你可以看到联邦理工学院/BTC的价格。在下图中，你可以看到MACD和MACD(信号)线。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mx"><img src="../Images/f694b5271cc263849f60c84b7e593086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*azaGIr8Jt2ly6Sq3Xd8EOg.png"/></div></div></figure><p id="8e6e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">交易员使用MACD来识别股票价格趋势的方向或严重程度的变化。在<a class="ae kp" href="https://www.investopedia.com/terms/m/macd.asp" rel="noopener ugc nofollow" target="_blank">这里</a>解释的很好。</p><p id="c59f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个非常基本的要点如下:当MACD越过信号线上方(买入)或下方(卖出)时，它触发技术信号。</p><p id="a153" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面我们可以看到MACD(红色)线在1月3日上午9点向上穿过信号(绿色)线。这可能意味着积极的价格演变。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi my"><img src="../Images/d346faa6ceb3a58d4ce0d260facca8d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lyfig1bhxQAYhDHuy50S4g.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">MACD向上穿越信号</figcaption></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mz"><img src="../Images/720ddebdf8e4bdd481852c9f6202f995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tBMF2tqstLRbEEEthAoWhQ.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">ETH/BTC的价格开始上涨</figcaption></figure><p id="1d4c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些“交叉”可以解释为买入或卖出信号。在这里你可以使用下面的代码。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lc ld l"/></div></figure><pre class="kr ks kt ku gt mm lh mn mo aw mp bi"><span id="5aac" class="ln lo it lh b gy mq mr l ms mt">294  2021-01-03T06:00:00.000Z     HOLD<br/>295  2021-01-03T07:00:00.000Z     HOLD<br/>296  2021-01-03T08:00:00.000Z     HOLD<br/>297  2021-01-03T09:00:00.000Z      BUY<br/>298  2021-01-03T10:00:00.000Z     HOLD<br/>299  2021-01-03T11:00:00.000Z     HOLD<br/>...</span></pre><p id="52be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就像之前的指标一样，它并不像描述的那样清晰。还有很多其他的事情要记住！再次<a class="ae kp" href="https://www.investopedia.com/terms/m/macd.asp" rel="noopener ugc nofollow" target="_blank"> Investopedia </a>进行救援，关注重要细节。</p><h2 id="07de" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">结论</h2><p id="d206" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">我希望我的计算和基本解释可以帮助你创建一个良好的交易策略，或者在你开发加密货币机器人的过程中。我建议结合不同的指标，如RSI和MACD。还要检查你的交易所是否支持“测试网”,这样你就可以测试你的机器人，而不用进行真正的买卖。这样你就可以分析你的数据，调整你的机器人！我希望你喜欢它！</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><a href="https://www.buymeacoffee.com/dZb8fLN"><div class="gh gi na"><img src="../Images/83dc7212ef8502659c81086ad58b8d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*bk_C8Um34KavCkO2yzMCZg.png"/></div></a><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">如果你真的喜欢它！</figcaption></figure></div></div>    
</body>
</html>