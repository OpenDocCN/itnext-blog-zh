<html>
<head>
<title>Build a Weather Mobile App with Ionic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Ionic构建一个天气移动应用</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-weather-mobile-app-with-ionic-985d14f94c15?source=collection_archive---------3-----------------------#2022-01-04">https://itnext.io/build-a-weather-mobile-app-with-ionic-985d14f94c15?source=collection_archive---------3-----------------------#2022-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/09566b1167f5f0868dd43d968eba0f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Yb1bKNETV-4Kudap"/></div></div></figure><h1 id="2faa" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="b45d" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在本文中，我将带您了解构建一个移动应用程序的过程，该应用程序提供世界各地的天气信息。使用本教程中的概念，您可以添加尽可能多的位置，甚至自定义位置。这个应用程序将使用Ionic框架和Tomorrow.io天气API来构建</p><p id="4607" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Ionic是一个开源的移动工具包，允许你创建跨平台的网络和移动应用。</p><p id="ffdf" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Tomorrow.io Weather API 为开发人员提供了一套强大的API，可以报告快速、准确、可靠的天气数据，并可灵活用于任何集成。</p><p id="f80d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们开始吧。</p><h1 id="8be6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">入门指南</h1><p id="26a7" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">构建Ionic移动应用的两个先决条件是在你的电脑上安装Node和Ionic。如果您不确定是否安装了它们，请运行以下命令:</p><p id="63fe" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">node -v</code></p><p id="b6e6" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">ionic -v</code></p><p id="dfcf" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这些命令将分别输出您系统上的Node和Ionic的版本。</p><p id="5c5b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果您没有安装它们，请访问<a class="ae lz" href="https://www.nodejs.org" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>下载并安装Node。然后运行下面的命令来安装Ionic:</p><p id="32d0" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">npm install -g ionic</code></p><h1 id="b93c" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">构建Ionic应用程序</h1><p id="6743" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">启动Ionic应用程序非常容易，因为它有很好的启动模板:</p><ul class=""><li id="30da" class="me mf iq ky b kz lu ld lv lh mg ll mh lp mi lt mj mk ml mm bi translated"><strong class="ky ir">标签</strong>:带有默认底部标签的项目，您可以自定义。</li><li id="eb62" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">侧菜单</strong>:已经添加了侧菜单的项目。</li><li id="ca16" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">列表</strong>:列表布局的项目。</li><li id="c666" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">空白</strong>:单页的空项目。</li></ul><p id="00ec" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">对于我们的例子，我们将使用<strong class="ky ir">列表</strong>模板。运行以下命令启动:</p><p id="2860" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">ionic start ionic-weather-project list --type angular</code></p><p id="3b05" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这里，'<em class="ms">离子-天气-项目</em>'是项目名称。你可以给你的孩子起任何你喜欢的名字。</p><p id="e295" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">“列表”是我们正在使用的离子模板。</p><p id="e338" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">“角度型”意味着我们将使用角度作为框架。其他框架有Vue和React。</p><p id="c6f7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果出现添加电容器的提示，使用类型<strong class="ky ir"> y </strong>。</p><p id="c9c9" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">进入目录ionic-weather-project，用VS代码打开</p><p id="63b7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">cd ionic-weather-project</code></p><p id="ed36" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">code .</code></p><p id="a889" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">使用命令运行项目:</p><p id="5fe0" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">ionic serve</code></p><p id="0240" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这将在您的默认浏览器中打开应用程序，网址为<a class="ae lz" href="http://localhost:8100" rel="noopener ugc nofollow" target="_blank"> http://localhost:8100 </a>，如下所示:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/ee697f0d4c6e76267adc30beb557c38f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*T_Q1dh3pLyQV2r_3_t5g9Q.png"/></div></figure><h1 id="f6e0" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">定制和整合它与我们的天气API</h1><p id="297b" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们将获得以下列表中地点的天气信息。要从<a class="ae lz" href="https://www.tomorrow.io/weather-api/" rel="noopener ugc nofollow" target="_blank"> Tomorrow.io Weather API </a>获取天气信息，您需要位置的纬度和经度。在这里，我们将手动获取它们。然而，你可以使用任何地理定位插件。</p><p id="ea6b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">访问<a class="ae lz" href="https://map.google.com" rel="noopener ugc nofollow" target="_blank">谷歌地图</a>，输入地点名称。你可以从网址中得到经度和纬度。</p><p id="673e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">纽约，纽约，美国= 40.6971494，-74.278678676867</p><p id="b2db" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">英国伦敦= 51.5285582，-0.2416813</p><p id="8264" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">迪拜，阿拉伯联合酋长国= 25.0757755556677</p><p id="b12e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">美国加利福尼亚州洛杉矶= 34.0201613，-118.6919217</p><p id="1d88" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">尼日利亚拉各斯。= 6.5480357,3.1438724</p><h1 id="1bda" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">创建位置数据服务文件</h1><p id="7e13" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">转到src/app/services/文件夹，创建一个location.services.ts文件。在下面输入脚本。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/cf8ebf05776066c940ff89874ebcf837.png" data-original-src="https://miro.medium.com/v2/format:webp/1*A3EL8xth5nFG3y36PE-2kg.png"/></div></figure><p id="33d4" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">为了简洁起见，我只添加了2个位置，但是您可以添加所有的位置。它们的地理位置在上面:我把它们列出来了。</p><p id="eacd" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在我们已经有了定位服务，让我们把它放入我们的主页。转到src/home/home.page.html。编辑home.page.html文件，使其标题为Location，并根据获取的位置复制应用程序消息组件。参见下面的代码:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/b3aba922c550415e25a265492c4ecfc5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*E8mK04sSLLpFv-vh02JPwA.png"/></div></figure><p id="0539" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">从位置服务中获取位置。转到src/app/home/home.page.ts，编辑如下:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/88f325e661ec2e927b3a66cffd064ee0.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7PYaBsh5XwxtuuyS6Iccpw.png"/></div></figure><p id="d8ee" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">定制显示位置列表的<app-message>组件。编辑src/app/message/message . component . html和src/app/message/message . component . ts文件，以动态接收位置馈送并相应地在视图中显示它们。</app-message></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/8267d2da4b6a6384bef9e8c02c729e70.png" data-original-src="https://miro.medium.com/v2/format:webp/1*90p6j2tXMwM4r45Xvf8vcw.png"/></div></figure><p id="c71a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">对于message.component.html的文件:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/53077a20cd5a70d45df68ebe8aec266a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*4O4-s4LpVRK56E3Qp6rAww.png"/></div></figure><p id="3f5b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">接下来会发生什么。单击一个位置后，它会将您带到<view-message>组件。你需要更新路线。</view-message></p><p id="0737" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">转到src/app/app-routing.module.ts，将视图消息路径编辑为:</p><pre class="mt mu mv mw gt my md mz na aw nb bi"><span id="beff" class="nc jz iq md b gy nd ne l nf ng">...</span><span id="683d" class="nc jz iq md b gy nh ne l nf ng">{</span><span id="fa29" class="nc jz iq md b gy nh ne l nf ng">    path: "location/:id",</span><span id="43d7" class="nc jz iq md b gy nh ne l nf ng">    loadChildren: () =&gt;</span><span id="1bbc" class="nc jz iq md b gy nh ne l nf ng">        import("./view-message/view-message.module").then(</span><span id="bc1d" class="nc jz iq md b gy nh ne l nf ng">           (m) =&gt; m.ViewMessagePageModule</span><span id="5244" class="nc jz iq md b gy nh ne l nf ng">        ),</span><span id="0466" class="nc jz iq md b gy nh ne l nf ng">},</span><span id="ed0d" class="nc jz iq md b gy nh ne l nf ng">...</span></pre><p id="60cf" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在这一点上，这里是你会有:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/ce5c5fff2d3892af6a2b3fdb201dcb5c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tp4-uTTqak_VDPF7qshTuw.png"/></div></figure><h1 id="476b" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">集成Tomorrow.io天气API</h1><p id="b51e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">首先，您需要注册并获得一个API密钥。有了这个键，就可以调用Tomorrow.io天气API上的各种端点。明天访问<a class="ae lz" href="https://www.tomorrow.io/weather-api/" rel="noopener ugc nofollow" target="_blank">io</a>并报名。您也可以使用您的Google或Github帐户注册。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/f88e4a7277caca99969a83e96f8655f4.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2-pnHfMQfDqLvXYRUkIWpg.png"/></div></figure><h1 id="f242" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">透露您的API密钥</h1><p id="9a1c" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">登录后，单击左侧的开发菜单。在“密钥”下，单击您的密钥前面的“显示”(眼睛图标)以显示它。现在你可以打多个电话了。</p><p id="528d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">不要忘记参考他们强大的<a class="ae lz" href="https://docs.tomorrow.io/reference/welcome" rel="noopener ugc nofollow" target="_blank">文档</a>来使用你想要调用的任何端点。</p><p id="c93e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在本教程中，我们将使用<a class="ae lz" href="https://docs.tomorrow.io/reference/get-timelines" rel="noopener ugc nofollow" target="_blank">检索时间轴(基本)</a>端点来获取我们所在位置的天气信息。</p><p id="6146" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">当调用这个端点时，需要传递几个参数。我们将通过的一些是:</p><ul class=""><li id="c1de" class="me mf iq ky b kz lu ld lv lh mg ll mh lp mi lt mj mk ml mm bi translated"><strong class="ky ir">位置</strong>:我们将使用“latlong”格式，该格式采用位置的纬度和经度，用逗号分隔。</li><li id="aaa5" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">时间步长</strong>:这是接收数据的时间间隔。允许的值为:“最佳”、“1m”、“5m”、“15m”、“30m”、“1h”、“1d”。</li><li id="2b79" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">单位</strong>:接收数据的计量单位。</li><li id="8943" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir"> apikey </strong> *:这是您访问端点的API密钥。</li><li id="d933" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">开始时间</strong>:指报表应该开始的时间。默认为现在。</li><li id="c053" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">结束时间</strong>:返回数据应该停止的时间。我们将使用矩来输入这个。</li><li id="5007" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated"><strong class="ky ir">字段</strong>:这是您希望在结果中出现的返回字段的数组。端点返回很多，您可以在这里指定您想要的。</li></ul><p id="2b75" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们将使用Angular的HttpClient进行调用，并为endTime时刻。让我们安装时刻:</p><p id="9c6e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe ma mb mc md b">npm install moment</code></p><p id="1d3d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后，将HttpClientModule添加到您的app.module.ts中。转到app.module.ts，在顶部导入它，并向其中添加imports数组。</p><pre class="mt mu mv mw gt my md mz na aw nb bi"><span id="2841" class="nc jz iq md b gy nd ne l nf ng">...</span><span id="cb16" class="nc jz iq md b gy nh ne l nf ng">import { HttpClientModule } from "@angular/common/http";</span><span id="d9f6" class="nc jz iq md b gy nh ne l nf ng">...</span><span id="aa97" class="nc jz iq md b gy nh ne l nf ng">imports: [</span><span id="86f3" class="nc jz iq md b gy nh ne l nf ng">    HttpClientModule,</span><span id="5355" class="nc jz iq md b gy nh ne l nf ng">],</span><span id="498f" class="nc jz iq md b gy nh ne l nf ng">...</span></pre><p id="4582" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">让我们从定位服务中调用天气API。在location.services.ts文件中，添加以下内容:</p><pre class="mt mu mv mw gt my md mz na aw nb bi"><span id="b200" class="nc jz iq md b gy nd ne l nf ng">...</span><span id="640c" class="nc jz iq md b gy nh ne l nf ng">import { HttpHeaders, HttpClient } from "@angular/common/http";</span><span id="081b" class="nc jz iq md b gy nh ne l nf ng">...</span><span id="64a0" class="nc jz iq md b gy nh ne l nf ng">baseURL = "https://api.tomorrow.io/v4/";</span><span id="468e" class="nc jz iq md b gy nh ne l nf ng">apiKey = "&lt;yourAPIkey&gt;";</span><span id="c40f" class="nc jz iq md b gy nh ne l nf ng">constructor(<em class="ms">private</em> http: HttpClient) {}</span><span id="ab92" class="nc jz iq md b gy nh ne l nf ng"><em class="ms">public</em> fetchLocationData(latlong) {</span><span id="5459" class="nc jz iq md b gy nh ne l nf ng">&lt;see screenshot below for content of this function&gt;</span><span id="397a" class="nc jz iq md b gy nh ne l nf ng">}</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/d0b9b9b36816e3b5333651c600c6a6ad.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oe7ubX0Sy_eQJI_o1nWo2g.png"/></div></figure><p id="d308" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们刚才在上面的片段中所做的是:</p><ul class=""><li id="3274" class="me mf iq ky b kz lu ld lv lh mg ll mh lp mi lt mj mk ml mm bi translated">我们导入了HttpClient和HttpHeaders模块来调用我们的天气API。</li><li id="2048" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated">我们创建了baseURL和API密钥常量。请注意，API密匙应该在您的环境文件中，而不是上传到任何公共存储库中。</li><li id="5680" class="me mf iq ky b kz mn ld mo lh mp ll mq lp mr lt mj mk ml mm bi translated">我们创建了fetchLocationData()函数，使用前面指定的参数使调用成为天气端点。这个函数接收位置的纬度和经度来获取数据。</li></ul><h1 id="5c9d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">调用组件中的定位服务</h1><p id="9021" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">打开src/app/view-message/view-message . page . ts，从那里呼叫我们的定位服务:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/b0aa537b61940653b175306cc7ecba93.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pTSAMeRpvPw-YkpxKNG6vQ.png"/></div></figure><p id="87d5" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在上面的代码片段中，我们导入了位置服务，称为服务，并将其分配给在类中创建的LocationData变量。</p><p id="0411" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">完成后，我们还需要在视图上显示结果。编辑src/app/view-message/view-message . page . html文件，如下所示:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/d7431e9a98f54482f56246723ba70c10.png" data-original-src="https://miro.medium.com/v2/format:webp/1*CxG4QbYfTS_xFSDJmzEFKQ.png"/></div></figure><p id="0622" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这个代码片段以列表格式显示了从API中检索到的数据。您的页面应该如下图所示:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/b8d62a1d26ecc24fde4bc0fa28846f93.png" data-original-src="https://miro.medium.com/v2/format:webp/1*XVlgHF1ooH_MXijOlpcj_A.png"/></div></figure><p id="a4de" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这标志着教程的结束。完整源代码，可以查看Github上的<a class="ae lz" href="https://github.com/hellotunmbi/ionic-weather-app" rel="noopener ugc nofollow" target="_blank">Ionic Weather App</a></p><h1 id="542f" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="b1af" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是一次精彩的会议，我希望你能跟上。对于任何用例，Tomorrow.io天气API都是健壮和灵活的。尽可能多地研究文档中的用例。您还可以添加图标或创建具有不同布局的应用程序。这完全取决于你。</p></div></div>    
</body>
</html>