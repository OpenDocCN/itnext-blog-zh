<html>
<head>
<title>Golang bits: Better Debugging in VSCode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">golang bits:vs code中更好的调试</h1>
<blockquote>原文：<a href="https://itnext.io/golang-bits-better-debugging-in-vscode-599bc5b018da?source=collection_archive---------0-----------------------#2018-07-15">https://itnext.io/golang-bits-better-debugging-in-vscode-599bc5b018da?source=collection_archive---------0-----------------------#2018-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e9c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">VSCode太棒了！但是对于golang来说，重命名和调试只是…嗯？，继续读下去！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f4e7d10dcca36a8f5dd860ab36de23a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oh2XiV21MwxNDl7yb7imyA.png"/></div></div></figure><h1 id="66f2" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">调试器—最大字符串大小和检查嵌套限制:</h1><p id="e16b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">VSCode中的golang调试体验很差，因为当你到达第三级时，查看深度嵌套的变量被切断，查看字符串被限制为64个字符，这几乎永远不够，数组也是如此，然而，这让我不太困扰。</p><p id="1746" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">vscode团队增加了对delve v2 APIs的支持，但在当前版本(v1.25.0)中，这些仍然是默认关闭的。要打开它，并控制这些讨厌的变量，请更改vscode用户设置以停止使用delve v1 API，并控制MaxStrLen和MaxVeriableRecurse变量，如下所示:</p><p id="c97c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件-&gt;首选项-&gt;设置</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="83d7" class="mf ky iq mb b gy mg mh l mi mj">"go.delveConfig": {<br/>  "useApiV1": <strong class="mb ir">false</strong>,<br/>  "dlvLoadConfig": {<br/>    "followPointers": true,<br/>    "maxVariableRecurse": <strong class="mb ir">3</strong>,<br/>    "maxStringLen": <strong class="mb ir">400</strong>,<br/>    "maxArrayValues": <strong class="mb ir">400</strong>,<br/>    "maxStructFields": -1<br/>  }<br/>}</span></pre><p id="d90a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">*只要记住“maxVariableRecurse”<strong class="jp ir">会</strong>让你的调试变慢，那就玩玩它，看看什么是你能接受的。</p><h1 id="1f77" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">缓慢调试启动:</h1><p id="627d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">关闭windows defender防病毒实时保护:</p><p id="6013" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开始菜单-&gt;搜索“病毒”，点击“病毒和威胁防护”-&gt;点击“病毒和威胁防护设置”-&gt;关闭“实时防护”</p><p id="85b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的windows 10机器上，当按下F5时，它需要很长时间才能启动，以至于我每次启动调试会话时都要等待大约40秒，关闭实时保护使它再次恢复正常。</p><h1 id="c899" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">慢速重命名:</h1><p id="86a6" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">vscode使用golang自己的重命名工具来完成这项工作，但该工具会搜索整个go路径，其中可能有大量通常不相关的代码。这个gorename由prateek派生，禁用全局搜索并进行重命名</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="4e04" class="mf ky iq mb b gy mg mh l mi mj">go get github.com/prateek/gorename</span></pre><p id="c751" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将从源代码编译gorename，现在您应该测试它是否正确安装在您的路径中</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="9b13" class="mf ky iq mb b gy mg mh l mi mj">(on linux/mac:) which gorename<br/>(on windows:) where gorename</span></pre><p id="0694" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还要检查gorename的创建日期，它应该是全新的。</p><h1 id="ecf9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">在golang中创建JSON是一件痛苦的事情</h1><p id="95a7" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在大多数情况下，Go是一种非常容易编写的语言，但是与typescript相比，将json形式化为类型是非常乏味的,“粘贴到JSON”vs code插件使用一个名为<a class="ae mk" href="https://github.com/quicktype/quicktype" rel="noopener ugc nofollow" target="_blank"> quicktype </a>的开源工具来为给定的JSON示例创建非常好的类型，它甚至可以找到相似的类型而不会创建重复的类型，如果你是严格的一方，你可能只需要在最后对几个内部类型进行表面上的重命名，但是现在重命名工作正常了，你可以这样做了..`</p><ul class=""><li id="e2c2" class="ml mm iq jp b jq jr ju jv jy mn kc mo kg mp kk mq mr ms mt bi translated">安装“将JSON粘贴为代码”</li><li id="8ce8" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">重新加载</li><li id="775f" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">创建新的。转到文件</li><li id="6274" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">复制你的json</li><li id="4012" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">按:ctrl + shift + p</li><li id="17b8" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">键入“将json粘贴为代码”，按回车键</li><li id="b63d" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">出现提示时，设置根对象的名称</li><li id="2b6d" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">在需要的地方添加<em class="mz">，省略</em></li></ul></div></div>    
</body>
</html>