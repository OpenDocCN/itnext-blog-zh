<html>
<head>
<title>Write Shorter Conditionals (Using Dictionaries)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">写更短的条件句(使用字典)</h1>
<blockquote>原文：<a href="https://itnext.io/write-shorter-conditionals-using-dictionaries-python-snippets-4-f92c8ce5eb7?source=collection_archive---------2-----------------------#2022-02-07">https://itnext.io/write-shorter-conditionals-using-dictionaries-python-snippets-4-f92c8ce5eb7?source=collection_archive---------2-----------------------#2022-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d190" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">经典If-Else语句和新的Match-Case语句的简明替代。</h2></div><p id="49f4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大家好，这里是Thijmen，在这篇文章中，我将演示经典的<em class="lb"> If-Else </em>语句和Python 3.10中引入的新的<em class="lb"> Match-Case </em>语句的简洁替代。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="lh li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">这篇文章在YouTube上也有视频格式。</figcaption></figure><h2 id="bb35" class="ln lo iq bd lp lq lr dn ls lt lu dp lv ko lw lx ly ks lz ma mb kw mc md me mf bi translated">优点和缺点</h2><p id="2cff" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">这种方法使用一个字典来获得一个条件语句，其中<strong class="kh ir">比</strong>少，而<strong class="kh ir">比</strong>代码更可读。它不会取代代码中的所有If-Else或Match-Case语句，但在很多情况下它肯定是有用的。</p><p id="f056" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">唯一的缺点是它<em class="lb">可能</em>以运行时间的微小减少为代价。本文稍后将详细介绍这一点。</p><h2 id="9322" class="ln lo iq bd lp lq lr dn ls lt lu dp lv ko lw lx ly ks lz ma mb kw mc md me mf bi translated">示例案例</h2><p id="bda0" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">假设我们想要创建一个函数:</p><ol class=""><li id="d559" class="ml mm iq kh b ki kj kl km ko mn ks mo kw mp la mq mr ms mt bi translated">接受一个数字作为参数。</li><li id="1b66" class="ml mm iq kh b ki mu kl mv ko mw ks mx kw my la mq mr ms mt bi translated">验证该数字是否对应于一个月。</li><li id="ef45" class="ml mm iq kh b ki mu kl mv ko mw ks mx kw my la mq mr ms mt bi translated">返回该特定月份的全名。</li></ol><p id="3c09" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果提供的参数不是有效的月份索引，我们将返回一个字符串，指示输入无效。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mz"><img src="../Images/a4bdce068ba2593fe4b269f93dc5f59a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-0w-8ZQhUaIAxlZN2rhhog.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">示例案例的抽象表示。</figcaption></figure><p id="d3a6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们要使用一个<em class="lb"> If-Else </em>语句，该函数将如下所示:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ng li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">使用If- <em class="nh"> Else的示例案例。</em></figcaption></figure><p id="b434" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种方法是使用最近发布的<em class="lb">匹配案例</em>语句:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ng li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">使用匹配案例的示例案例(Python 3.10及更高版本)。</figcaption></figure><p id="4b37" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想强调的是，这两种方法本身都没有问题。毕竟，代码是有效的，并且做了它需要做的事情。</p><p id="d960" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是就<strong class="kh ir">代码清晰度</strong>而言，我认为还有更多的收获。</p><h2 id="8aec" class="ln lo iq bd lp lq lr dn ls lt lu dp lv ko lw lx ly ks lz ma mb kw mc md me mf bi translated">字典法</h2><p id="afae" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">第一步是返回一个字典，该字典使用月份的索引作为键，使用相应的名称作为值。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ng li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">字典方法:步骤1</figcaption></figure><p id="d4ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随后，我们使用<code class="fe ni nj nk nl b">.get()</code>方法获得月份的名称，该名称实际上属于我们作为函数参数提供的数字。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ng li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">字典方法:步骤2</figcaption></figure><p id="2eab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个方法的伟大之处在于，当请求的键不是字典的一部分时，我们还可以指定一个<em class="lb">默认值</em> <em class="lb">返回值</em> <em class="lb">值</em>。在我们的例子中，这是字符串“不是一个月”。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ng li l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">字典法:搞定！</figcaption></figure><p id="015a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是真正的意义所在。整洁，对不对？</p><h2 id="8a5e" class="ln lo iq bd lp lq lr dn ls lt lu dp lv ko lw lx ly ks lz ma mb kw mc md me mf bi translated">速度比较</h2><p id="5dc1" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">正如我所承诺的，我想用一个快速的速度对比来结束这篇文章。</p><p id="e2c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们把我刚刚举例说明的每月百万次的字典方法称为<em class="lb">，我们的总运行时间大约是10秒。</em></p><p id="a119" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe ni nj nk nl b">If-Elif-Else</code>时大约为3.5秒，使用<code class="fe ni nj nk nl b">Match-Case</code>时大约为3.5秒。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nm"><img src="../Images/da2a36c8adfff89385fe43934f396302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lDDUK0O4ik0gA-xBBotOdw.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">一百万次迭代的速度比较(函数范围内的字典)。</figcaption></figure><p id="5edd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然我们的字典conditional的性能最低，但理解这种差异的来源是很重要的。</p><p id="3f70" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们在的<code class="fe ni nj nk nl b">month()</code>函数中定义了我们的字典<em class="lb">,所以它必须为每个函数调用构造一次，这是相当低效的。如果我们在函数之外定义字典并重新运行实验，我们将获得最快的运行时间，大约2.5秒:</em></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi nn"><img src="../Images/0cc1eec855ec7d537c8ed2ae56d739ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96--UfYPHNEWi37-FJ_t0Q.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">一百万次迭代的速度比较(字典在函数范围之外)。</figcaption></figure><h2 id="4424" class="ln lo iq bd lp lq lr dn ls lt lu dp lv ko lw lx ly ks lz ma mb kw mc md me mf bi translated">背景很重要</h2><p id="8e4e" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在代码清晰度和运行时间方面最适合你的当然是<strong class="kh ir">取决于你</strong> <em class="lb">。你会知道对你的具体项目来说什么更重要。</em></p><p id="0e2e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">把这个方法看作是你工具箱中的另一个工具，它有时适合这项工作，有时不适合。</p><p id="415b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总之，这篇文章就到这里。希望你觉得有用，下次再见！</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="5753" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你从这篇文章中学到了一些新东西，请考虑订阅我的YouTube频道。谢谢！🙂</p><p id="e250" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">这篇文章和相应的视频是我的Python片段系列的一部分，其中我们以字节大小的格式涵盖了围绕Python编程的各种主题。</em></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mz"><img src="../Images/521dd512a42291eab498cd99b4911288.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxRiyLoF5Fcrxs3l27BU0w.png"/></div></div></figure></div></div>    
</body>
</html>