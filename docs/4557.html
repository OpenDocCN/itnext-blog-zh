<html>
<head>
<title>Automating Laravel deployment using Ansible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ansible自动化Laravel部署</h1>
<blockquote>原文：<a href="https://itnext.io/automating-laravel-deployment-using-ansible-e494723fc2c9?source=collection_archive---------2-----------------------#2020-07-24">https://itnext.io/automating-laravel-deployment-using-ansible-e494723fc2c9?source=collection_archive---------2-----------------------#2020-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0fb177a35038942c884594dae1841909.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_LHhOC_-FEJ1ILRd.jpg"/></div></div></figure><p id="db26" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你和我一样，几个月来，甚至几年来一直手动地对你的网站进行修改，你应该知道这是一个重复的任务。通常，您从版本控制系统(VCS)中提取变更，运行一些任务来安装生产依赖项和/或编译它们，缓存您的配置，并重新加载某种服务。例如，如果您需要运行数据库迁移，通常是相同的几个步骤加上几个可选步骤。</p><h1 id="c9e9" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">什么是Ansible？</h1><p id="9501" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">你知道，如果有些事情是重复的，你可以自动化它。这就是Ansible的用武之地。最初，Ansible是一个帮助服务器编排和在无限数量的服务器上可靠地重复任务的工具。Ansible最好的部分是你不需要在你的远程机器上安装任何东西。唯一的要求是您需要能够通过SSH连接到您的远程机器。如果你能做到这一点，你可以使用Ansible。</p><p id="c3ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以将Ansible比作一个通过SSH在远程机器上运行命令的大型bash脚本。这两者之间的主要区别是Ansible使一切变得更加简单，并且具有用于抽象许多任务的内置模块。从GitHub提取更改，只指定一个存储库和一个目标文件夹就是这些模块之一。它使写作任务变得更快更容易。</p><h1 id="9d72" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Ansible为什么有用？</h1><p id="036f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我提到过Ansible最初用于服务器编排。由于Ansible本质上是一个易于管理的bash文件，所以您可以让它做任何您想做的事情。这包括使用它来部署您的网站，无论是1台还是1000台服务器。只要可以在所有这些服务器上使用SSH，就可以在所有这些服务器上进行部署。</p><p id="3c5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于我的大多数网站都是使用Laravel构建的，我将提供一个简单的配置来将您的Laravel网站部署到您的服务器，迁移您的数据库，缓存您的配置，并清除您的视图缓存。这是非常基本的，但它是一个起点。这不是一个教程，因为坦率地说，我刚刚开始使用Ansible。</p><h1 id="1a71" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">基本配置</h1><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="e7f6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后您需要创建secrets.yml文件，您可以使用ansible vault:</p><pre class="mc md me mf gt mi mj mk ml aw mm bi"><span id="fe9c" class="mn la it mj b gy mo mp l mq mr">ansible-vault create secrets.yml</span></pre><p id="1d7c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后用这些信息填充它:</p><pre class="mc md me mf gt mi mj mk ml aw mm bi"><span id="6dc1" class="mn la it mj b gy mo mp l mq mr">github_user: your_username <br/>github_token: your_github_access_token</span></pre><p id="a42e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要编辑该文件，可以使用以下命令</p><pre class="mc md me mf gt mi mj mk ml aw mm bi"><span id="94de" class="mn la it mj b gy mo mp l mq mr">ansible-vault edit secrets.yml</span></pre><p id="8406" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这仍然是我正在学习的东西，所以这就是为什么这不是一个完整的教程。但是通过把它放在那里，我已经学到了很多关于使用Ansible的新东西。</p><p id="7b53" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">肯定会有更多关于Ansible的内容，因为我已经爱上了它的易用性和内置的模块数量。等我对它的工作原理有了更深入的了解，我会为它写一个教程。</p><p id="af19" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">发布时间:2020年6月7日</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="389a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mz">最初发表于</em><a class="ae na" href="https://roelofjanelsinga.com/articles/automating-laravel-deployment-using-ansible" rel="noopener ugc nofollow" target="_blank"><em class="mz">【https://roelofjanelsinga.com】</em></a><em class="mz">。</em></p></div></div>    
</body>
</html>