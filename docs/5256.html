<html>
<head>
<title>Azure Arc: All for Azure, and Azure for all!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蔚蓝弧:一切为了蔚蓝，蔚蓝为了一切！</h1>
<blockquote>原文：<a href="https://itnext.io/azure-arc-all-for-azure-and-azure-for-all-6caab88a6085?source=collection_archive---------6-----------------------#2021-01-24">https://itnext.io/azure-arc-all-for-azure-and-azure-for-all-6caab88a6085?source=collection_archive---------6-----------------------#2021-01-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0b4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">多云战略允许组织使用不同提供商提供的不同云服务<strong class="jp ir">。</strong>一些云平台专注于某些服务，或者有可能比其他平台更好的集成解决方案。此外，如今组织仍然受到遗留应用程序的困扰。这些应用程序需要传统的基础架构，并且通常仍在专有的本地硬件上运行。或者，有些组织仍处于云之旅的最前沿，不能或不希望一次性完成迁移。<br/>所有这些都是可以理解的<strong class="jp ir"> </strong>和不可避免的，但是一个组织如何保持对所有这些不同基础设施的<strong class="jp ir"> </strong>控制，同时又不损害Azure云的潜力呢？Azure Arc可能是您的答案。</p><p id="6a8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇博客中，我将大致解释什么是Azure Arc，为什么你想使用它，并提供一个快速入门。</p><h1 id="17a2" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">什么是Azure Arc？</h1><blockquote class="lj lk ll"><p id="aaca" class="jn jo lm jp b jq jr js jt ju jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj kk ij bi translated">Azure Arc通过提供一致的多云和内部管理平台来简化治理和管理。Azure Arc通过将现有资源投影到Azure Resource Manager，使您能够使用单一控制台管理整个环境。您现在可以管理虚拟机、Kubernetes集群和数据库，就像它们在Azure中运行一样。不管他们住在哪里，你都可以使用熟悉的Azure服务和管理功能。Azure Arc使您能够继续使用传统的ITOps，同时引入DevOps实践来支持您的环境中新的云原生模式。— <a class="ae lq" href="https://docs.microsoft.com/en-us/azure/azure-arc/overview" rel="noopener ugc nofollow" target="_blank"> Azure Arc概述— Azure Arc |微软文档</a></p></blockquote><p id="e1a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Azure Arc将微软在Azure上的部署和管理服务Azure Resource Manager扩展到内部、边缘和多云环境。使用Azure Arc，可以从一个门户管理多个云(例如Azure和AWS)和内部环境，例如Azure门户、Azure Lighthouse和/或各种脚本工具。此外，你可以将Azure服务部署到任何基础设施上，并将Azure管理扩展到这些基础设施上。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lr"><img src="../Images/1111611ede2a227d8ba2708480dcbdc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZSkVwFNb5uti2AMD.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">图片由<a class="ae lq" href="https://www.microsoft.com/en-us/" rel="noopener ugc nofollow" target="_blank">微软</a>在<a class="ae lq" href="https://docs.microsoft.com/en-us/azure/azure-arc/overview" rel="noopener ugc nofollow" target="_blank">微软文档</a>上提供</figcaption></figure><p id="20e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你是服务提供商，你会很高兴听到Azure Arc也集成到Azure Lighthouse中。如果你不熟悉Azure Lighthouse，可以看看<a class="ae lq" href="https://rolfschutten.medium.com/azure-lighthouse-msps-let-there-be-light-3da060717b09" rel="noopener">我关于Azure Lighthouse </a>的博客。</p><h1 id="ebc6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">为什么要用Azure Arc？</h1><p id="e321" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">正如在这篇博客的介绍中所说，许多组织在内部、云中和边缘运行混合的应用程序。这些应用程序和(云)平台都有自己的门户、管理工具等。这使得IT环境变得复杂，因此更难管理、更难扩展且效率低下。Azure Arc通过使用本文前面提到的单一平台消除了这种复杂性。因此，Azure Arc直接有助于降低复杂性、提高可伸缩性、可见性和可管理性，间接有助于提高安全性、效率和合规性。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mm"><img src="../Images/c1e9bd607b5a31839f507f677515982e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qpIJ6zzzbGHV-zN4"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">由<a class="ae lq" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> SpaceX </a>在<a class="ae lq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5d2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了前面提到的好处，Azure Arc的主要好处之一是能够在Azure之外使用Azure服务。这使得本机Azure工具，如<a class="ae lq" href="https://docs.microsoft.com/en-us/azure/governance/policy/overview" rel="noopener ugc nofollow" target="_blank"> Azure Policy </a>和<a class="ae lq" href="https://docs.microsoft.com/en-us/azure/governance/resource-graph/overview" rel="noopener ugc nofollow" target="_blank"> Azure Resource Graph </a>可以用于传统和云工作负载。有了Azure Arc，您可以从最新的云创新和自动化中受益，无论您在混合基础架构中的位置如何，都可以进行统一管理。在最初的版本中，Azure Arc包括AI服务、自动化服务、可用性服务、成本管理、数据服务、DevOps服务、Kubernetes管理、安全服务和合规服务。随着时间的推移，更多的Azure服务将通过Azure Arc提供。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mn"><img src="../Images/d16e02512b2b7a6fc1e004036d4fac96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sXmTAu9lwDZQUpmrt4JV_A.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">图片由<a class="ae lq" href="https://www.microsoft.com/en-us/" rel="noopener ugc nofollow" target="_blank">微软</a>在<a class="ae lq" href="https://azure.microsoft.com/en-us/solutions/hybrid-cloud-app/" rel="noopener ugc nofollow" target="_blank">Azure.Microsoft.com</a>上拍摄</figcaption></figure><p id="20eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最重要的是。在管理支持Azure Arc的服务器时，Azure Arc是免费提供的。附加Azure管理服务(Azure Monitor等)。)对Azure虚拟机或启用Azure Arc的服务器的收费可能不同。服务定价可在<a class="ae lq" href="https://azure.microsoft.com/en-us/pricing/details/azure-arc/" rel="noopener ugc nofollow" target="_blank"> Azure Arc定价页面</a>上获得。</p><h1 id="5d43" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">如何开始使用Azure Arc？</h1><p id="1cf2" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">Azure Arc有许多不同的部署场景。在这个快速入门中，我们将了解如何在Azure之外托管的Windows或Linux机器上部署和配置Connected Machine agent，用于教育目的，并感受一下Arc的潜力。对于其他场景，有一个很棒的网站<a class="ae lq" href="https://azurearcjumpstart.io/overview/" rel="noopener ugc nofollow" target="_blank"> Azure Arc Jumpstart </a>，它提供了详细的指南、自动化、代码示例、屏幕截图以及使用Azure Arc所需的一切。</p><h2 id="1e33" class="mo km iq bd kn mp mq dn kr mr ms dp kv jy mt mu kz kc mv mw ld kg mx my lh mz bi translated">开始之前，这里有一些要求:</h2><ul class=""><li id="2493" class="na nb iq jp b jq mh ju mi jy nc kc nd kg ne kk nf ng nh ni bi translated">您需要Azure订阅。如果你没有，你可以<a class="ae lq" href="https://azure.microsoft.com/en-us/free" rel="noopener ugc nofollow" target="_blank">免费创建一个</a>。您还需要是“Azure Connected Machine on boarding”和“Azure Connected Machine Resource Administrator”角色的成员。</li><li id="45ea" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">你的目标机器需要运行一个<a class="ae lq" href="https://docs.microsoft.com/en-us/azure/azure-arc/servers/agent-overview#supported-operating-systems" rel="noopener ugc nofollow" target="_blank">支持的操作系统</a>。您还需要目标计算机上的管理员权限。</li><li id="82f9" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">Linux和Windows的连接机器代理通过TCP端口443安全地与Azure Arc进行出站通信。如果机器通过防火墙或代理服务器连接以通过互联网进行通信，请<a class="ae lq" href="https://docs.microsoft.com/en-us/azure/azure-arc/servers/agent-overview#networking-configuration" rel="noopener ugc nofollow" target="_blank">阅读本文</a>以了解网络配置要求。</li></ul><h2 id="dbe2" class="mo km iq bd kn mp mq dn kr mr ms dp kv jy mt mu kz kc mv mw ld kg mx my lh mz bi translated">步骤1:生成安装脚本。</h2><p id="3855" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">首先，我们将开放<a class="ae lq" href="https://shell.azure.com/" rel="noopener ugc nofollow" target="_blank"> Azure云外壳</a>，并注册微软。HybridCompute和微软。使用下面的命令猜测我们的Azure Arc订阅中的配置资源提供者:</p><pre class="ls lt lu lv gt no np nq nr aw ns bi"><span id="0656" class="mo km iq np b gy nt nu l nv nw">az account set --subscription "&lt;Your Subscription Name&gt;"<br/>az provider register --namespace 'Microsoft.HybridCompute'<br/>az provider register --namespace 'Microsoft.GuestConfiguration'</span></pre><p id="9969" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将生成一个安装脚本来自动下载、安装和建立与Azure Arc的连接。</p><p id="c55d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过使用搜索栏进行搜索，转到Azure门户中的“服务器Azure Arc”部分。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi nx"><img src="../Images/8e2e89640b65dc48cb09361e002940ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Sx7D4mlXM35IIllwV-bEA.png"/></div></div></figure><p id="1f81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们可以生成一个脚本来装载目标服务器。选择“<strong class="jp ir">添加</strong>，并选择选项“<strong class="jp ir">使用交互式脚本添加服务器</strong>”。然后，您将被要求填写您希望在Azure中管理机器的订阅和资源组，并选择将存储机器元数据的Azure区域。该位置不必与资源组的位置在同一区域。</p><p id="221a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你可以下载或复制你的脚本。</p><h2 id="4a79" class="mo km iq bd kn mp mq dn kr mr ms dp kv jy mt mu kz kc mv mw ld kg mx my lh mz bi translated">步骤2:运行脚本，安装代理。</h2><p id="49fc" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">对于Windows服务器来说，这就像执行<em class="lm">一样简单。目标服务器上的/OnboardingScript.ps1 </em>，在提升的64位PowerShell命令提示符下。请确保切换到脚本复制到的文件夹或共享。</p><p id="8f84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于可以直接与Azure通信的Linux服务器，运行以下命令:</p><pre class="ls lt lu lv gt no np nq nr aw ns bi"><span id="d3d2" class="mo km iq np b gy nt nu l nv nw">bash ~/Install_linux_azcmagent.sh</span></pre><p id="51c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果目标计算机通过代理服务器进行通信，请运行以下命令:</p><pre class="ls lt lu lv gt no np nq nr aw ns bi"><span id="4095" class="mo km iq np b gy nt nu l nv nw">bash ~/Install_linux_azcmagent.sh --proxy "&lt;proxy-url&gt;:&lt;port&gt;"</span></pre><h2 id="b1be" class="mo km iq bd kn mp mq dn kr mr ms dp kv jy mt mu kz kc mv mw ld kg mx my lh mz bi translated">第三步:验证和管理！</h2><p id="8f8d" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我们应该验证服务器是否已成功连接到Arc服务。我们可以在Azure门户的“服务器— Azure Arc”部分使用搜索栏进行搜索。在这里，您可以看到连接的服务器资源。</p><p id="22d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您已经启用了Linux或Windows混合机器，并成功连接到Arc服务。</p></div></div>    
</body>
</html>