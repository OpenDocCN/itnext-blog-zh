<html>
<head>
<title>Complete Step-by-Step Firebase Authentication in Angular 2 — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 2中完成逐步Firebase身份验证—第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/part-2-complete-step-by-step-firebase-authentication-in-angular-2-25d284102632?source=collection_archive---------0-----------------------#2017-12-22">https://itnext.io/part-2-complete-step-by-step-firebase-authentication-in-angular-2-25d284102632?source=collection_archive---------0-----------------------#2017-12-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/53ac758cc830ac6f14fad737c05e0020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uW3MFfXpxRErw-GJllBe0g.png"/></div></div></figure><p id="132e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一篇后续文章。如果你还没有看完第一部分，可以在这里找到<a class="ae kw" href="http://bit.ly/2ATpiHr" rel="noopener ugc nofollow" target="_blank"/>。第一部分包括:</p><ul class=""><li id="d33d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">添加启动角度(2)应用程序。</li><li id="cca0" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">添加身份验证</li><li id="c0df" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Twitter认证</li><li id="9274" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">脸书认证</li><li id="47d7" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">Gmail认证</li></ul><p id="5fdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第2部分将带您了解以下内容:</p><ul class=""><li id="04b2" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">保护仪表板页面和其他受保护的页面</li><li id="8533" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">添加注销功能</li><li id="ae9a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">使用Github帐户进行认证</li><li id="3a2c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">常规注册/登录</li></ul><p id="67bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ll">注意，你可以在</em><a class="ae kw" href="https://github.com/hellotunmbi/angular2-authentication-firebase" rel="noopener ugc nofollow" target="_blank"><em class="ll">github</em></a><em class="ll">上找到完整的代码。</em></p><p id="bb1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fpart-2-complete-step-by-step-firebase-authentication-in-angular-2–25d284102632" rel="noopener ugc nofollow" target="_blank"> <em class="ll">点击这里在LinkedIn上分享这篇文章</em> </a></p><p id="a847" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">让我们开始吧！</strong></p><h2 id="7f3a" class="lm ln iq bd lo lp lq dn lr ls lt dp lu kj lv lw lx kn ly lz ma kr mb mc md me bi translated">添加注销功能</h2><p id="1fee" class="pw-post-body-paragraph jy jz iq ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">我们在<code class="fe mk ml mm mn b">auth.service.ts</code>文件中实现了注销功能。让我们在导航中添加按钮，并添加触发auth.service中已有的注销功能的click事件:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="b4fe" class="lm ln iq mn b gy mw mx l my mz">// dashboard.component.html<br/>...</span><span id="895b" class="lm ln iq mn b gy na mx l my mz">&lt;div id="navbar" class="navbar-collapse collapse"&gt;</span><span id="a27a" class="lm ln iq mn b gy na mx l my mz">  &lt;ul class="nav navbar-nav"&gt;</span><span id="d481" class="lm ln iq mn b gy na mx l my mz">    &lt;li class="active"&gt;&lt;a&gt;Home&lt;/a&gt;&lt;/li&gt;</span><span id="0f0c" class="lm ln iq mn b gy na mx l my mz">    &lt;li&gt;&lt;a&gt;About&lt;/a&gt;&lt;/li&gt;</span><span id="3768" class="lm ln iq mn b gy na mx l my mz">    &lt;li&gt;&lt;a&gt;Contact&lt;/a&gt;&lt;/li&gt;</span><span id="042b" class="lm ln iq mn b gy na mx l my mz">  &lt;/ul&gt;</span><span id="fc68" class="lm ln iq mn b gy na mx l my mz">  <strong class="mn ir">&lt;ul class="nav navbar-nav navbar-right"&gt;</strong></span><span id="194d" class="lm ln iq mn b gy na mx l my mz"><strong class="mn ir">    &lt;li&gt;&lt;a href="" (click)="authService.logout()"&gt;Logout&lt;/a&gt;&lt;/li&gt;</strong></span><span id="cb53" class="lm ln iq mn b gy na mx l my mz"><strong class="mn ir">  &lt;/ul&gt;</strong></span><span id="6c78" class="lm ln iq mn b gy na mx l my mz">...</span></pre><h1 id="3f2a" class="nb ln iq bd lo nc nd ne lr nf ng nh lu ni nj nk lx nl nm nn ma no np nq md nr bi translated">保护仪表板页面</h1><p id="b1f4" class="pw-post-body-paragraph jy jz iq ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">仪表板页面只需要经过身份验证的用户访问。这里的步骤将指导您保护其他需要身份验证的页面。因为这只是演示，所以我们只有一个受保护的页面—仪表板。</p><p id="5469" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保护页面中使用的角称为<strong class="ka ir">导航路线保护装置</strong>，共有5个。以下是它们以及它们的使用场景:</p><p id="5d23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mk ml mm mn b">CanActivate</code> —用于决定<strong class="ka ir">路线</strong>是否可以被<strong class="ka ir">激活</strong></p><p id="48f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mk ml mm mn b">CanActivateChild</code> —用于决定<strong class="ka ir">路径子</strong>是否可以被<strong class="ka ir">激活</strong></p><p id="6873" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mk ml mm mn b">CanDeactivate</code> —用于决定<strong class="ka ir">路径</strong>是否可以<strong class="ka ir">去激活</strong></p><p id="aaf1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mk ml mm mn b">CanLoad</code>——决定孩子是否可以装。用于延迟加载</p><p id="631b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mk ml mm mn b">Resolve</code>——在路线激活前执行路线数据检索<em class="ll">。</em></p><p id="0770" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于这些路线防护装置的更多细节可在<a class="ae kw" href="https://angular.io/guide/router#milestone-5-route-guards" rel="noopener ugc nofollow" target="_blank">角度文件</a>中找到</p><p id="01ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为我们服务的路线守卫是<code class="fe mk ml mm mn b">CanActivate</code>守卫，这就是我们将要使用的。</p><p id="fdce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">向仪表板页面添加防护装置</strong></p><ul class=""><li id="2a7e" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">在终端中运行<code class="fe mk ml mm mn b">ng generate service services/auth-guard</code>来生成AuthGuard，并将其放在services文件夹中。</li><li id="0f41" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">因为服务不是在app模块中提供的。我们需要将其导入并添加到app.module.ts文件中@NgModule decorator下的提供者中</li><li id="9088" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">打开<code class="fe mk ml mm mn b">app.routes.ts</code>并从'导入AuthGuard。/services/auth-guard . service '；</li><li id="8a6c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">将<code class="fe mk ml mm mn b">canActivate: [AuthGuard]</code>添加到仪表板路径。</li></ul><p id="d5bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我们的AuthGuard类</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="eb4d" class="lm ln iq mn b gy mw mx l my mz">// services/auth-guard.service.ts</span><span id="cc24" class="lm ln iq mn b gy na mx l my mz">import { AuthService } from './auth.service';<br/>import { Injectable } from '@angular/core';<br/>import { Router, CanActivate } from '@angular/router';</span><span id="6795" class="lm ln iq mn b gy na mx l my mz">@Injectable()<br/>export class AuthGuard implements CanActivate {</span><span id="69e4" class="lm ln iq mn b gy na mx l my mz">    constructor(private router: Router, private authService: AuthService) { }</span><span id="fee7" class="lm ln iq mn b gy na mx l my mz">    canActivate() {</span><span id="37ce" class="lm ln iq mn b gy na mx l my mz">        if ( this.authService.isLoggedIn() ) {</span><span id="95fc" class="lm ln iq mn b gy na mx l my mz">            return true;</span><span id="1a8b" class="lm ln iq mn b gy na mx l my mz">        }</span><span id="db17" class="lm ln iq mn b gy na mx l my mz">        this.router.navigate(['/']);</span><span id="3e69" class="lm ln iq mn b gy na mx l my mz">        return false;</span><span id="cbd4" class="lm ln iq mn b gy na mx l my mz">    }</span><span id="ae6d" class="lm ln iq mn b gy na mx l my mz">}</span></pre><p id="0bdb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，我们通过导入CanActivate类、添加路由器(因为如果用户没有登录，我们需要它来重定向用户)、添加AuthService来检查身份验证，来创建AuthGuard功能。</p><p id="821c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果没有登录就去<code class="fe mk ml mm mn b">http://localhost:4200/dashboard</code>，会被踢出去，重定向到登录页面。</p><h1 id="d3ef" class="nb ln iq bd lo nc nd ne lr nf ng nh lu ni nj nk lx nl nm nn ma no np nq md nr bi translated">使用Github帐户验证</h1><p id="2aff" class="pw-post-body-paragraph jy jz iq ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">这和其他步骤一样简单。但是首先，<a class="ae kw" href="https://github.com/settings/applications/new" rel="noopener ugc nofollow" target="_blank">在Github上注册你的应用</a>成为开发者。您将获得OAuth客户端ID和客户端密码。</p><p id="c770" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">转到Firebase仪表板&gt;开发&gt;登录方法，然后单击Github。单击“启用”允许您输入id:</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/041115b92626f59a1f2815b7e1e9aac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISlxyrPKumlhmJXao-pswQ.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">向Github注册您的应用程序</figcaption></figure><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/3708039069ebc22e29c246e7a7af76f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cdHVwILS3lROlLDCG_RFAg.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">在Firebase仪表板中启用GitHub登录</figcaption></figure><h2 id="ab93" class="lm ln iq bd lo lp lq dn lr ls lt dp lu kj lv lw lx kn ly lz ma kr mb mc md me bi translated"><strong class="ak">在登录页面的“使用Github登录”按钮中添加点击事件。</strong></h2><p id="2eab" class="pw-post-body-paragraph jy jz iq ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">我们在login/login.component.html文件中编辑它，如下所示:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="69fd" class="lm ln iq mn b gy mw mx l my mz">// login/login.component.html</span><span id="73cd" class="lm ln iq mn b gy na mx l my mz">...</span><span id="f2a5" class="lm ln iq mn b gy na mx l my mz">&lt;button type="button" class="btn btn-block (click)="signInWithGithub()"&gt;<br/>   &lt;i class="fa fa-github" aria-hidden="true"&gt;&lt;/i&gt;Login with Github<br/>&lt;/button&gt;</span><span id="cc6f" class="lm ln iq mn b gy na mx l my mz">...</span></pre><p id="aac5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建Github登录功能</p><p id="02bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe mk ml mm mn b">login/login.component.ts</code>文件中，我们添加了处理点击事件的函数。这里:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="370d" class="lm ln iq mn b gy mw mx l my mz">// login/login.component.ts</span><span id="c2d9" class="lm ln iq mn b gy na mx l my mz">...<br/>signInWithGithub() {</span><span id="e943" class="lm ln iq mn b gy na mx l my mz">    this.authService.signInWithGithub()<br/>         .then((res) =&gt; {<br/>            this.router.navigate(['dashboard'])<br/>         })<br/>         .catch((err) =&gt; console.log(err));<br/>    }<br/>...</span></pre><h2 id="fcf4" class="lm ln iq bd lo lp lq dn lr ls lt dp lu kj lv lw lx kn ly lz ma kr mb mc md me bi translated">将Github登录添加到AuthService</h2><p id="f92b" class="pw-post-body-paragraph jy jz iq ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">从上面的代码中，我们从authService调用了<code class="fe mk ml mm mn b">signInWithGithub()</code>，所以我们需要创建那个函数:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="864f" class="lm ln iq mn b gy mw mx l my mz">// services/auth.service.ts</span><span id="be9e" class="lm ln iq mn b gy na mx l my mz">...<br/>signInWithGithub() {<br/>    return this._firebaseAuth.auth.signInWithPopup(<br/>        new firebase.auth.GithubAuthProvider()<br/>    )<br/>}</span><span id="0a6a" class="lm ln iq mn b gy na mx l my mz">...</span></pre><p id="7e02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答对了。我们已经结束了。我没告诉过你吗，这很简单？现在你可以用你的Github账户登录了。</p><h1 id="94ab" class="nb ln iq bd lo nc nd ne lr nf ng nh lu ni nj nk lx nl nm nn ma no np nq md nr bi translated">使用电子邮件和密码定期登录</h1><p id="52c4" class="pw-post-body-paragraph jy jz iq ka b kb mf kd ke kf mg kh ki kj mh kl km kn mi kp kq kr mj kt ku kv ij bi translated">Firebase API现在允许我们创建一个带有电子邮件/密码的用户，并在一个表单中登录。为了为此准备我们的应用程序，我们做了以下工作:</p><p id="fa2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将name、method和ngForm属性标签添加到<code class="fe mk ml mm mn b">login.component.ts</code>文件中的<code class="fe mk ml mm mn b">&lt;form&gt;</code>标签，使其:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="4243" class="lm ln iq mn b gy mw mx l my mz">&lt;form name="userform" method="post" #formCtrl="ngForm"&gt;</span></pre><p id="cdd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">导入<code class="fe mk ml mm mn b">FormsModule</code>并将其添加到<code class="fe mk ml mm mn b">app.module.ts</code>中的导入。这将允许我们在我们的登录表单中使用<code class="fe mk ml mm mn b">[(ngModel)]</code>。</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="9a2c" class="lm ln iq mn b gy mw mx l my mz">// app.module.ts<br/>...<br/>import { FormsModule } from '@angular/forms';</span><span id="e6ca" class="lm ln iq mn b gy na mx l my mz">...</span><span id="dbba" class="lm ln iq mn b gy na mx l my mz">imports: [<br/>  BrowserModule,<br/>  AppRoutes,<br/><strong class="mn ir">  FormsModule,</strong><br/>  AngularFireModule.initializeApp(environment.firebase, 'angular-auth-firebase'),<br/>  AngularFireDatabaseModule,<br/>  AngularFireAuthModule<br/>],</span><span id="063f" class="lm ln iq mn b gy na mx l my mz">...</span></pre><p id="573f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将<code class="fe mk ml mm mn b">ngModel</code>添加到<code class="fe mk ml mm mn b">login.component.html</code>中的用户名和密码输入字段</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="1634" class="lm ln iq mn b gy mw mx l my mz">// login/login.component.html</span><span id="f8d3" class="lm ln iq mn b gy na mx l my mz">...<br/>&lt;div class="form-group"&gt;<br/>  &lt;label for="exampleInputEmail1"&gt;Email address&lt;/label&gt;<br/>  &lt;input type="email" class="form-control" <strong class="mn ir">[(ngModel)]="user.email"</strong> placeholder="Email" <strong class="mn ir">required</strong>&gt;<br/>&lt;/div&gt;</span><span id="1262" class="lm ln iq mn b gy na mx l my mz">&lt;div class="form-group"&gt;<br/>  &lt;label for="exampleInputPassword1"&gt;Password&lt;/label&gt;<br/>  &lt;input type="password" class="form-control" <strong class="mn ir">[(ngModel)]="user.password"</strong> placeholder="Password" <strong class="mn ir">required</strong>&gt;<br/>&lt;/div&gt;<br/>...</span></pre><p id="d21a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当输入字段为空时禁用按钮。在<em class="ll">用电子邮件登录</em>按钮上执行此操作</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="007a" class="lm ln iq mn b gy mw mx l my mz">// login/login.component.html<br/>...<br/>&lt;div class="form-group"&gt;<br/>   &lt;button type="buton" class="btn btn-primary btn-block" style="margin-bottom: 20px" (click)="signInWithEmail()" [disabled]="formCtrl.form.invalid"&gt;</span><span id="49af" class="lm ln iq mn b gy na mx l my mz">   Login with Email<br/>   <br/>   &lt;/button&gt;<br/>&lt;/div&gt;<br/>...</span></pre><p id="df1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<code class="fe mk ml mm mn b">login.component.ts</code>中，我们将把用户输入绑定到用户对象，这样我们就可以把它传递给EmailAuthProvider函数。</p><p id="ec73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们加上这个，就在<code class="fe mk ml mm mn b">export class LoginComponent implements OnInit {</code>下面</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="ef31" class="lm ln iq mn b gy mw mx l my mz">user = {<br/>   email: '',<br/>   password: ''<br/>};</span></pre><p id="576e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们创建<code class="fe mk ml mm mn b">signInWithEmail</code>函数。这个函数将从我们的AuthService调用<code class="fe mk ml mm mn b">signInRegular</code>函数，传递电子邮件和密码作为参数。这里:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="23cd" class="lm ln iq mn b gy mw mx l my mz">// login.component.ts</span><span id="c42f" class="lm ln iq mn b gy na mx l my mz">...<br/>signInWithEmail() {<br/>   this.authService.signInRegular(this.user.email, this.user.password)<br/>      .then((res) =&gt; {<br/>         console.log(res);<br/>   <br/>         this.router.navigate(['dashboard']);<br/>      })<br/>      .catch((err) =&gt; console.log('error: ' + err));<br/>}<br/>...</span></pre><p id="1e3d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们在我们的<code class="fe mk ml mm mn b">AuthService</code>类中创建<code class="fe mk ml mm mn b">signInRegular</code>函数。</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="cf0f" class="lm ln iq mn b gy mw mx l my mz">// auth.service.ts</span><span id="7f59" class="lm ln iq mn b gy na mx l my mz">...<br/>signInRegular(email, password) {</span><span id="b486" class="lm ln iq mn b gy na mx l my mz">   const credential = firebase.auth.EmailAuthProvider.credential( email, password );</span><span id="c210" class="lm ln iq mn b gy na mx l my mz">return this._firebaseAuth.auth.signInWithEmailAndPassword(email, password)</span><span id="d656" class="lm ln iq mn b gy na mx l my mz">}<br/>...</span></pre><p id="5e5b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一切都好极了！</p><p id="6ac1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">快速回顾一下</p><p id="1e2d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个第2部分(<a class="ae kw" href="https://medium.com/@hellotunmbi/step-by-step-complete-firebase-authentication-in-angular-2-97ca73b8eb32" rel="noopener">第1部分可以在这里找到</a>)系列中，我们实现了以下内容:</p><ul class=""><li id="0093" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">保护仪表板页面</li><li id="a85d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">使用Github登录进行认证</li><li id="0c94" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">使用常规电子邮件/密码进行身份验证</li><li id="0d8f" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">增加了注销功能</li></ul><p id="edbe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谢谢你一直坚持到这个阶段。如果你遇到任何挑战或有更好的方法来实现这一点，请随时发表评论。</p><p id="be19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以在<a class="ae kw" href="https://twitter.com/hellotunmbi" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae kw" href="https://github.com/hellotunmbi" rel="noopener ugc nofollow" target="_blank"> Github </a>上关注我</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="ab2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你觉得这篇文章很有帮助，并且想阅读更多，知道我什么时候发表相关文章，请<a class="ae kw" href="https://tinyletter.com/hellotunmbi" rel="noopener ugc nofollow" target="_blank">订阅我的简讯</a>。我保证不会给你发垃圾邮件。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><a href="https://www.buymeacoffee.com/hellotunmbi"><div class="gh gi of"><img src="../Images/a629679250bd54970466aa64242e8f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*vzHMBQN2v_dshzof9eJZEQ.png"/></div></a></figure></div></div>    
</body>
</html>