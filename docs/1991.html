<html>
<head>
<title>Squash, the definitive cloud-native debugging tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Squash，权威的云原生调试工具</h1>
<blockquote>原文：<a href="https://itnext.io/squash-the-definitive-cloud-native-debugging-tool-89614650cc94?source=collection_archive---------3-----------------------#2019-03-08">https://itnext.io/squash-the-definitive-cloud-native-debugging-tool-89614650cc94?source=collection_archive---------3-----------------------#2019-03-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bdd1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">壁球0.5出局。这个新版本解决了企业调试用例，使其成为云原生应用程序最普遍的调试工具。</h2></div><p id="fd1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated">对应用程序进行实时调试的能力是开发过程中必不可少的一部分。这让我很困扰，我经常很难理解开发人员如何能够纯粹依靠日志语句来识别一段代码是否按预期运行。将日志语句添加到您编写的代码中可能是一件很容易的事情，但它绝不应该是高效调试会话的主要工具。</p><p id="6a2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应用程序应该在与它们在生产中运行的环境非常相似的环境中开发。在这样做的时候，你有机会优化我认为最重要的开发指标，也就是交付时间。</p><h1 id="6580" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">期望与现实(生产环境与开发环境)</h1><p id="728a" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">在我的职业生涯中，我所在的团队多次使用JBoss Application Server在本地开发应用程序，然后在其他应用服务器上运行相同的应用程序。出于不同的原因，通常是Weblogic或Websphere。每当我们这样做时，我们的生活变得更加艰难，对交付时间产生了负面影响。这是我的理论:</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/a1e5b4f557feb7a7e45232ef862123a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Ecc7WOW5B7opqJQGTS7eyg.png"/></div></figure><p id="ad6f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你的组织或你的团队早就离开了上图适用的情况。现在你面临不同的情况，比如:</p><ul class=""><li id="bebe" class="mp mq iq kh b ki kj kl km ko mr ks ms kw mt la mu mv mw mx bi translated">大多数应用程序在容器中运行</li><li id="61a5" class="mp mq iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated">你是各种形式、地点和口味的Kubernetes的用户</li><li id="e484" class="mp mq iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated">比起爪哇，我更喜欢Spring Boot或戈朗</li></ul><p id="7bb5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们考虑今天使用微服务的分布式计算的现实时，对云原生调试工具的需求肯定会增加。幸运的是，在这个旅程中，壁球可以成为你的日常朋友，这有两个基本原因:专为云原生工作负载和企业安全考虑而设计。让我们来看看这几点，这也有助于你理解壁球建筑。</p><h1 id="bb7e" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">专为云原生(和Kubernetes)构建</h1><p id="ddba" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">Squash的架构认为云原生部署通常是短暂的。为了实现这一考虑，它与诸如Kubernetes API之类的API接口，创建必要的组件，这些组件将允许您在首选IDE中远程调试应用程序。</p><h2 id="1a8e" class="nd ll iq bd lm ne nf dn lq ng nh dp lu ko ni nj lw ks nk nl ly kw nm nn ma no bi translated">Java 语言(一种计算机语言，尤用于创建网站)</h2><p id="746f" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">让我们来看看下面的流程，这是为了调试一个Java应用程序，例如:</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/8afc45b693b2dd4a45b75536f51229ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*yglN-UW5fVEVhEGiAR9thQ.png"/></div></figure><p id="d7fe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Squash给Java开发人员带来了极好的价值，因为它会在JVM启动时自动找到指定的调试端口。找到端口后，它使用端口转发，然后依靠IDE的功能来利用JDWP。</p><h2 id="ab55" class="nd ll iq bd lm ne nf dn lq ng nh dp lu ko ni nj lw ks nk nl ly kw nm nn ma no bi translated">去</h2><p id="c185" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">对于为Kubernetes运行和开发的Go软件工程师来说，可以说它是必备的。在Kubernetes 中有几种调试Go应用程序的方法，但没有一种像Squash那样流畅和考虑企业场景。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/12499200db88e080ec9dec6b5184d6bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*v6Ii4PteinHMZ6EHTgJ7ZQ.png"/></div></figure><h1 id="d88b" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">安全性</h1><p id="3e67" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">在Solo，我们知道在分布式环境中调试应用程序时考虑安全性是多么重要。为此，Squash有一个非安全模式和一个安全模式。</p><h2 id="d4b7" class="nd ll iq bd lm ne nf dn lq ng nh dp lu ko ni nj lw ks nk nl ly kw nm nn ma no bi translated">不安全模式</h2><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/d54e8f30a81bd456ea4facbc10fbe8ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*JlauBpl0d_weQ4rhA7vDbw.png"/></div></figure><p id="ad06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然这仅适用于本地环境或非常信任开发人员的环境，但它仍然是一个有效的用例。当处于不安全模式时，debug helper(一个名为“Plank”的pod)将假设用户在集群或名称空间上具有提升的权限，这将允许在Linux内核级别控制进程。这变得很有趣，继续阅读关于安全模式。</p><h1 id="0bb8" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">安全模式</h1><p id="7014" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">安全模式假设用户在集群中拥有有限的特权，我认为这是应该的。为了让Plank pod完成它的工作，它需要SYS_PTRACE，一旦一个进程被授予了该权限，就意味着它们可以控制主机中的任何进程。这有多危险。嗯，您可以立即使一个节点发生内核崩溃。我们不想那样。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/099a4dc8f18b0598e68413b4363fbc97.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*ZgrAWMt41sexra8120L6Ew.png"/></div></figure><p id="127f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安全模式与不安全模式的不同之处在于，执行进程发现和附加的部分运行在不同的名称空间中。这种情况允许对调试器进程进行严格控制，同时也不要求开发人员具有提升的特权。它是企业用例的理想选择。</p><p id="226b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上图中，希望在名称空间<strong class="kh ir"> ns-a </strong>上调试应用程序的开发人员比负责调试器运行的名称空间的用户拥有更少的特权。您从调试能力中获益，同时又不牺牲安全性。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/6c6e8ac456e682c8183990ac6ef281f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*k2Kp_rnFUjN_rAZmK9IcRg.png"/></div></figure><h1 id="158a" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">现在试试吧</h1><p id="62d1" class="pw-post-body-paragraph kf kg iq kh b ki mc jr kk kl md ju kn ko me kq kr ks mf ku kv kw mg ky kz la ij bi translated">我们喜欢壁球。我们创建它供我们使用，以协助我们其他项目的开发，如Gloo，一个下一代API网关，和Supergloo，一个服务网格编排平台。事实证明它非常有用，提高了我们的整体生产力。</p><p id="dcb3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们已经投入了宝贵的工程时间来改进壁球文档，我们希望它能很好地为您服务。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="nu nv di nw bf nx"><div class="gh gi nt"><img src="../Images/3772cb267ee56905a55dafadc1be3c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*60hh6V8qbUeivJytyPiqtQ.png"/></div></div></figure><p id="9f3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在就去<a class="ae np" href="https://squash.solo.io" rel="noopener ugc nofollow" target="_blank">网站https://squash.solo.io </a>开始变得更有效率。壁球是开源的，我们欢迎投稿。在<a class="ae np" href="https://github.com/solo-io/squash" rel="noopener ugc nofollow" target="_blank">https://github.com/solo-io/squash</a>随意检查代码。</p></div></div>    
</body>
</html>