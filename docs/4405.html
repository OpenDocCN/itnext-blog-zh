<html>
<head>
<title>Experimenting with Mobx, Dart Extensions and Null Safety</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">试验Mobx、Dart扩展和空安全</h1>
<blockquote>原文：<a href="https://itnext.io/experimenting-with-mobx-and-dart-extensions-444d1d5e1779?source=collection_archive---------4-----------------------#2020-06-24">https://itnext.io/experimenting-with-mobx-and-dart-extensions-444d1d5e1779?source=collection_archive---------4-----------------------#2020-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/728f800da443f4366e51dba60aa98783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ybeeNAqItJVqToRm7zACdA.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片<a class="ae kf" href="https://unsplash.com/@jannerboy62" rel="noopener ugc nofollow" target="_blank">尼克·费恩</a>乘上<a class="ae kf" href="https://unsplash.com/photos/zF_pTLx_Dkg" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="1407" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated"><span class="l lf lg lh bm li lj lk ll lm di"> M </span> obx是一个很棒的Flutter状态管理库，唯一的缺点是编写Mobx商店有点进退两难。</p><p id="cbf0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以选择:</p><h2 id="ea6a" class="ln lo it bd lp lq lr dn ls lt lu dp lv kr lw lx ly kv lz ma mb kz mc md me mf bi translated">使用Mobx代码生成器:</h2><ul class=""><li id="61c0" class="mg mh it ki b kj mi kn mj kr mk kv ml kz mm ld mn mo mp mq bi translated"><strong class="ki iu"> <em class="mr">优点</em> </strong>:语法清晰，样板文件少</li><li id="364c" class="mg mh it ki b kj ms kn mt kr mu kv mv kz mw ld mn mo mp mq bi translated"><strong class="ki iu"> <em class="mr">缺点</em> </strong>:生成代码需要一些时间，您可能需要为您的存储的每次更改运行代码生成器，或者使用构建生成器中的watch选项。</li></ul><h2 id="0304" class="ln lo it bd lp lq lr dn ls lt lu dp lv kr lw lx ly kv lz ma mb kz mc md me mf bi translated">使用不带代码生成器的Mobx:</h2><ul class=""><li id="5de9" class="mg mh it ki b kj mi kn mj kr mk kv ml kz mm ld mn mo mp mq bi translated"><strong class="ki iu"> <em class="mr">优点</em> </strong>:对于<strong class="ki iu"> mobx_codegen </strong>和<strong class="ki iu"> build_runner </strong>没有依赖关系</li><li id="5e60" class="mg mh it ki b kj ms kn mt kr mu kv mv kz mw ld mn mo mp mq bi translated"><strong class="ki iu"> <em class="mr">缺点</em> </strong>:你必须自己写所有的东西(更多的代码意味着更多的错误)。当你有一个大项目时，它是不可扩展的。</li></ul><p id="8ffa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么解决办法是什么呢？这就是我们在本文中使用Dart扩展试图回答的问题吗？</p><h1 id="dbd2" class="mx lo it bd lp my mz na ls nb nc nd lv ne nf ng ly nh ni nj mb nk nl nm me nn bi translated">省道延伸方法:</h1><p id="d3bb" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">它是在Dart 2.7中引入的，扩展方法背后的概念是您可以在对象编译后添加方法。</p><p id="54dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有兴趣了解更多关于扩展方法的知识，你可以在这里阅读:链接。</p><p id="6519" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">颤振中扩展方法的应用；</p><p id="04f5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以在Flutter中扩展方法来简化语法，例如:</p><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><blockquote class="nx ny nz"><p id="7c6d" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated">请注意，这只是你如何在Flutter中使用扩展方法的一个例子，并不是邀请你一直使用它们。记住，权力越大，责任越大。</p></blockquote><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="od nw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">你是超级英雄</figcaption></figure><h1 id="8d2a" class="mx lo it bd lp my mz na ls nb nc nd lv ne nf ng ly nh ni nj mb nk nl nm me nn bi translated">通过Mobx使用Dart扩展:</h1><p id="fb88" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">现在让我们使用Dart扩展方法来尝试和改进Mobx语法。为此，我们将使用这里的计数器示例:<a class="ae kf" href="https://mobx.netlify.app/examples/counter" rel="noopener ugc nofollow" target="_blank">计数器示例Mobx </a></p><p id="148b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不带注释:</p><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">不带注释的Mobx计数器存储</figcaption></figure><p id="b5e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用注释:</p><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">带注释的Mobx计数器存储</figcaption></figure><p id="15d0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们要定义两个扩展方法:第一个将允许我们从Dart对象创建一个可观察对象。第二个是从Dart函数创建动作:</p><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">使用dart扩展方法的Mobx计数器存储</figcaption></figure><p id="e268" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如你从上面的例子中看到的，计数器存储并不比仅仅使用带有扩展方法的Mobx的原始语法更好。但是如果我们试着去做:</p><pre class="nr ns nt nu gt oe of og oh aw oi bi"><span id="2525" class="ln lo it of b gy oj ok l ol om">final increment = _increment.action;</span></pre><p id="158e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您将得到一个错误消息:</p><blockquote class="nx ny nz"><p id="170e" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated">在初始化器中只能访问静态成员。</p></blockquote><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="on nw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">我们怎样才能让它变得更好？</figcaption></figure><h1 id="3ccb" class="mx lo it bd lp my mz na ls nb nc nd lv ne nf ng ly nh ni nj mb nk nl nm me nn bi translated">Dart 2.9和零安全:</h1><p id="2dca" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">Dart SDK的2.9版本引入了空安全(你可以在这里阅读关于<a class="ae kf" href="https://dart.dev/null-safety" rel="noopener ugc nofollow" target="_blank">的所有内容)。在其他特性中，null safety使我们能够使用late关键字。</a></p><blockquote class="nx ny nz"><p id="5813" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated"><strong class="ki iu">重要:</strong>因为空安全还在技术预览版，<strong class="ki iu">不要在生产代码中使用空安全。</strong>但请务必测试该功能，并<a class="ae kf" href="https://github.com/dart-lang/sdk/issues/new?title=Null%20safety%20feedback:%20%5Bissue%20summary%5D&amp;labels=NNBD&amp;body=Describe%20the%20issue%20or%20potential%20improvement%20in%20detail%20here" rel="noopener ugc nofollow" target="_blank">给我们反馈。</a></p></blockquote><p id="5bfe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要使用此功能，您需要切换到<code class="fe oo op oq of b">2.9.0-14.0.dev</code>。在Dart SDK中，您可以通过遵循这里的指令<a class="ae kf" href="https://github.com/dart-lang/samples/tree/master/null_safety/calculate_lix" rel="noopener ugc nofollow" target="_blank">来完成。</a></p><p id="a68f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还需要确保在您的pubspec.yaml文件中更改min SDK版本。</p><figure class="nr ns nt nu gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi or"><img src="../Images/f1a061a5f5ffb11f7f6b952ee7779531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MkNSDinNl37mo2imzXcSVw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">pubspec.yaml</figcaption></figure><p id="1d3c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么，关键字late的基本功能是什么:</p><blockquote class="nx ny nz"><p id="c88d" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated">使用“late”关键字。这是一种方式<br/>告诉Dart:</p><p id="33c3" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated">-您不会马上给那个<br/>字段赋值。</p><p id="bf06" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated">-但是你*要*稍后给它赋一个<br/>值。</p><p id="90f9" class="kg kh mr ki b kj kk kl km kn ko kp kq oa ks kt ku ob kw kx ky oc la lb lc ld im bi translated">-您将确保在访问它之前为它分配一个<br/>值。</p></blockquote><p id="4359" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的代码中应用这一点将导致:</p><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="os nw l"/></div></figure><p id="629f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们的代码非常干净，可读性更好，而不需要使用mobx_codegen。</p><p id="0104" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里列出了一些有用Mobx扩展，如果您愿意，可以在代码中使用:</p><figure class="nr ns nt nu gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h1 id="ec74" class="mx lo it bd lp my mz na ls nb nc nd lv ne nf ng ly nh ni nj mb nk nl nm me nn bi translated">结论:</h1><p id="12ab" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">我希望这个使用Mobx、Dart扩展方法和null安全的实验是有帮助的。你认为这个实验怎么样，你认为它是更好的语法，还是你更愿意坚持使用代码生成器？请在评论中告诉我。下次再见，谢谢你的阅读。</p></div></div>    
</body>
</html>