<html>
<head>
<title>Panning and zooming images in OutSystems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在外部系统中平移和缩放图像</h1>
<blockquote>原文：<a href="https://itnext.io/panning-and-zooming-images-in-outsystems-29fefed6a4fb?source=collection_archive---------2-----------------------#2022-12-13">https://itnext.io/panning-and-zooming-images-in-outsystems-29fefed6a4fb?source=collection_archive---------2-----------------------#2022-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f595" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何将JavaScript组件集成为可重用的小部件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0179086a83a6d33a8a8eaa5467068f21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDW4j-uH8pg0kAQHpht-NQ.png"/></div></div></figure><p id="7daf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我的一个项目中，我需要一个允许在大图像中平移和缩放的小部件。在这个简短的教程中，我想与您分享我是如何基于Timmy Willison的精彩panzoom组件实现它的。</p><h1 id="b354" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">摘要</h1><p id="c865" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">您将在本教程中学到什么:</p><ul class=""><li id="cb93" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">如何集成外部JavaScript组件</li><li id="1749" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">如何实现可重用的小部件</li><li id="9a8b" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">如何在简单的演示应用程序中使用它</li></ul><p id="3c8c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您只需要组件，您可以选择快捷方式，滚动到本文的末尾。</p><h1 id="988a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">你需要什么</h1><p id="6608" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果您想自己跟踪实施情况，您需要:</p><ul class=""><li id="9699" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">一个外部系统账户(一个<a class="ae my" href="https://www.outsystems.com/free-edition/" rel="noopener ugc nofollow" target="_blank">免费的个人环境</a>就足够了)</li><li id="2da9" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">外部系统服务工作室</li><li id="2770" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><a class="ae my" href="https://timmywil.com/panzoom/" rel="noopener ugc nofollow" target="_blank">提米·威廉森的JavaScript panzoom库</a>(麻省理工学院授权)</li></ul><p id="5452" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于本教程，您应该已经有了一些使用外部系统构建反应式web应用程序的经验。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="a40c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为我们的目标是一个可重用的组件，所以我决定将这个项目分成两个独立的外部系统模块:小部件本身和一个测试它的演示应用程序。</p><h1 id="ab86" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">构建可重用的小部件</h1><h2 id="68f8" class="ng lo iq bd lp nh ni dn lt nj nk dp lx la nl nm lz le nn no mb li np nq md nr bi translated">获取panzoom JavaScript库</h2><p id="4e3e" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Timmy Willison已经构建了一个很好的JavaScript组件，它利用CSS转换来实现在网页上平移和缩放的高性能方式。你可以玩玩他的演示，在他的<a class="ae my" href="https://timmywil.com/panzoom/" rel="noopener ugc nofollow" target="_blank">主页</a>上了解更多。GitHub上的所有源代码都有许可证:</p><div class="ns nt gp gr nu nv"><a href="https://github.com/timmywil/panzoom" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">GitHub - timmywil/panzoom:一个使用CSS变换平移和缩放元素的库</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">一个使用CSS变换平移和缩放元素的库:mag: - GitHub - timmywil/panzoom:一个用于…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">github.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div><p id="d34b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以在那里找到几个构建源代码的选项。对于我们的OutSystems组件，我们只需要编译好的JavaScript，它可以从cdn加载:</p><p id="40bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae my" href="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js" rel="noopener ugc nofollow" target="_blank">https://UNP kg . com/@ pan zoom/pan zoom @ 4 . 5 . 1/dist/pan zoom . min . js</a></p><p id="b024" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于各种原因，我想让组件独立于cdn，所以我从cdn链接中抓取了一个缩小的版本，并将其导入到OutSystems模块中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/f591b19cd098ed7482e88cbb4690c729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vUy1xOArxviblvsA0HoPMQ.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">添加panzoom JavaScript</figcaption></figure><h2 id="4f61" class="ng lo iq bd lp nh ni dn lt nj nk dp lx la nl nm lz le nn no mb li np nq md nr bi translated">创建可重用的web块</h2><p id="59ea" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">接下来，我们必须将JavaScript集成为一个可重用的ui组件。在OutSystems中，这是通过(web)块完成的，就像屏幕一样，存在于ui流中。默认情况下，您的模块包含一个名为<em class="op"> MainFlow </em>的流。我建议将其重命名为与您的小部件模块相同的名称，这样以后您可以很容易地在使用它的项目中找到您的模块的所有块。</p><p id="5b0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们重命名ui流，并向其中添加一个新块<em class="op"> Panzoom </em>。由于我们想从其他模块中使用这个web块，我们需要将它的属性<em class="op"> Public </em>设置为<em class="op"> Yes </em>。因为它依赖于panzoom JavaScript，我们还需要添加<em class="op">脚本。将</em>平移至所需的脚本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/49c61cae285d5d881b7a6956700e9a81.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*Y9mU20tWfq_HTSXOTWrzzg.png"/></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">添加panzoom web块</figcaption></figure><p id="c535" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您愿意，也可以添加自定义图标。</p><p id="cbcf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用panzoom小部件的屏幕将通过输入参数与小部件通信。组件本身提供了各种选项，我选择在OutSystems中使用一个结构<em class="op"> PanzoomOptions </em>来保存它们。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="533f" class="ow lo iq os b be ox oy l oz pa">/**<br/> * PanzoomOptions<br/> *<br/> * @property {bool} [Animate] = False<br/> * Whether to animate transitions<br/> *<br/> * @property {bool} [Canvas] = False<br/> * This option treats the Panzoom element's parent as a canvas. Effectively,<br/> * Panzoom binds the down handler to the parent instead of the Panzoom<br/> * element, so that pointer events anywhere on the "canvas" moves its<br/> * children. See issue #472.<br/> * Note: setting this option to true also changes where the cursor style is<br/> * applied (i.e. the parent).<br/> *<br/> * @property {int} [Duration] = 200<br/> * Duration of the transition (ms)<br/> *<br/> * @property {string} [Easing] = "ease-in-out"<br/> * CSS Easing used for transitions<br/> *<br/> * @property {string} [ExcludeClass] = "panzoom-exclude"<br/> * Add this class to any element within the Panzoom element that you want to<br/> * exclude from Panzoom handling. That element's children will also be<br/> * excluded. e.g. links and buttons that should not propagate the click event.<br/> *<br/> * @property {string} [Overflow] = "hidden"<br/> * The overflow CSS value for the parent. Defaults to 'hidden'<br/> *<br/> * @property {decimal} [StartScale] = 1<br/> * Scale used to set the beginning transform<br/> *<br/> * @property {decimal} [StartX] = 0<br/> * X value used to set the beginning transform<br/> *<br/> * @property {decimal} [StartY] = 0<br/> * Y value used to set the beginning transform<br/> *<br/> * @property {string} [TouchAction] = "none"<br/> * This value is used to set touch-action on both the Panzoom element and its<br/> * parent. It is needed because that the native scroll on mobile interferes<br/> * with panning and pinch zooming. Set this to empty string to re-enable<br/> * scrolling on mobile, but note that both scrolling and panning cannot work<br/> * at the same time.<br/> *<br/> * @property {string} [Contain] = ""<br/> * "inside" | "outside"<br/> *<br/> * @property {string} [Cursor] = "move"<br/> * The cursor style to set on the panzoom element<br/> *<br/> * @property {bool} [DisablePan] = False<br/> * Disable panning functionality. Note: disablePan does not affect focal point<br/> * zooming or the contain option. The element will still pan accordingly.<br/> *<br/> * @property {bool} [DisableXAxis] = False<br/> * Pan only on the Y axis<br/> *<br/> * @property {bool} [DisableYAxis] = False<br/> * Pan only on the X axis<br/> *<br/> * @property {bool} [PanOnlyWhenZoomed] = False<br/> * Disable panning while the scale is equal to the starting value<br/> *<br/> * @property {bool} [RoundPixels] = False<br/> * Round x and y values to whole numbers. This can help prevent images and<br/> * text from looking blurry, but the higher the scale, the more it becomes<br/> * necessary to use fractional pixels. Use your own judgment on how much to<br/> * limit zooming in when using this option.<br/> *<br/> * @property {bool} [DisableZoom] = False<br/> * Disable zooming functionality<br/> *<br/> * @property {decimal} [MaxScale] = 4<br/> * The maximum scale when zooming<br/> *<br/> * @property {decimal} [MinScale] = 0.125<br/> * The minimum scale when zooming<br/> *<br/> * @property {decimal} [Step] = 0.3<br/> * The step affects zoom calculation when zooming with a mouse wheel, when<br/> * pinch zooming, or when using zoomIn/zoomOut<br/> */</span></pre><p id="a293" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们已经创建了结构，我们可以将类型为<em class="op"> PanzoomOptions </em>的输入参数<em class="op"> Options </em>和输入参数<em class="op"> ExtendedClass </em>添加到web块中。这将允许以后配置panzoom组件和设置附加的CSS类。我们还需要一个局部变量<em class="op"> PanzoomObject </em>来保存我们的panzoom对象的引用，这样我们就可以通过JavaScript来访问它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/06fe5036299ce9f924e4e77e0883f501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u2JjfYRdajk4605feWlz5Q.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">web块Panzoom的输入参数和局部变量</figcaption></figure><p id="2b7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了让以后的应用程序将平移和可缩放的内容放入小部件，我们还需要向小部件树添加一个容器和一个占位符。该容器是一个获取ExtendedClass als样式类的包装器。占位符的名称对于使用我们组件的开发人员来说是可见的，因此“内容”是一个描述性选项。稍后在我们的JavaScript中也会引用它来标识呈现panzoom组件的HTML元素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/9ea81a21597dcb4d04ae6633f3568a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q09r6ReMNM1dFeEQ9khSbA.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">web块Panzoom的小部件树</figcaption></figure><p id="fd47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了让panzoom变得生动，是时候写点脚本了。当呈现我们的web块的DOM时，我们需要初始化panzoom组件，让它也将其HTML元素呈现到DOM中。为此，我们在OutSystems中有一个<em class="op"> OnRender </em>事件，当块在第一次渲染后准备就绪时触发该事件。</p><p id="fa56" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以将定制的JavaScripts添加到您的OutSystems客户机流中，并在它和OutSystems流之间传输数据，您可以定义输入和输出参数。不幸的是，这里不能选择结构作为数据类型，所以我们必须首先将我们的选项序列化为JSON。如上所述，我们需要一个对panzoom应该渲染到的HTML元素的引用。这是通过参数<em class="op"> ElementId </em>完成的，也是类型<em class="op"> Text </em>。JavaScript将输出一个表示panzoom组件的对象，我们希望将它存储在本地变量<em class="op"> PanzoomObject </em>中。最后，我们在Ready 上触发自己的事件<em class="op">以允许小部件的消费者在初始化panzoom后执行自定义操作。出于稍后描述的原因，我们还将对panzoom对象的引用传递给消费者。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/15d68c3a2c787ab0930dc287ddb51919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMy1XUgUI4aLiK3S3sFrwQ.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">web块Panzoom的OnRender事件处理程序</figcaption></figure><p id="d2b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以将下面的清单复制并粘贴到上面添加的JavaScript中:</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="4f63" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_Init<br/> *<br/> * @param {string} ElementId<br/> * @param {string} Options<br/> * @return {object} PanzoomObject<br/> */<br/>var e = document.getElementById($parameters.ElementId);<br/>if(!e) throw 'Could not find element "' + $parameters.ElementId + '" for panzoom component.';<br/>var o = JSON.parse($parameters.Options);<br/>var p = Panzoom(e, o);<br/>e.parentElement.addEventListener('wheel', p.zoomWithWheel);<br/>e.addEventListener('panzoomchange', (event) =&gt; {<br/>  $actions.PanzoomChange(event.Detail);<br/>})<br/>$parameters.PanzoomObject = p;</span></pre><p id="c28f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如您所见，我们向panzoom的JavaScript事件<em class="op"> panzoomchanged </em>添加了一个事件监听器，该事件监听器调用名为<em class="op"> PanzoomChange </em>的客户端操作。panzoom组件将包含有关更改信息的对象传递给事件处理程序。为了使它的值在OutSystems中可用，我们需要用额外的JavaScript解析事件对象。然后，我们将详细信息<em class="op"> X </em>、<em class="op"> Y </em>和<em class="op">比例</em>(所有类型都是<em class="op">十进制</em>)传递给我们自己的<em class="op"> OnPanzoomChange </em>事件，以通知消费者我们的小部件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/34388aa33e9f38f571fbb80c666604c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEGd-w2Ed8lCjrnmP6NKBQ.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">panzoom的panzoomchanged事件的处理程序</figcaption></figure><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="f5c9" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_GetEventDetail<br/> *<br/> * @param {object} event<br/> * @param {decimal} x<br/> * @param {decimal} y<br/> * @return {decimal} scale<br/> */<br/>var e = $parameters.event;<br/>if(e) {<br/>  $parameters.X = e.x;<br/>  $parameters.Y = e.y;<br/>  $parameters. Scale = e.scale;<br/>}</span></pre><p id="9982" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当web块从外部系统的屏幕上卸载时，为了正确地整理一切，还有另一个事件<em class="op"> OnDestroy </em>。这也是摧毁全景部件的正确位置。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/ca27a5cb95b7bb57943c045fab6d6289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*AiDzioitmWpIaB6XRB-dqA.png"/></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">web块Panzoom的OnDestroy事件处理程序</figcaption></figure><p id="f5cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">JavaScript删除我们在初始化时为鼠标滚轮添加的事件监听器，并调用panzoom对象的相应方法，该对象作为输入参数<em class="op"> PanzoomObject </em>传递，我们在初始化后将其存储到局部变量<em class="op"> PanzoomObject </em>。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="77ab" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_Destroy<br/> *<br/> * @param {string} ElementId<br/> * @param {object} PanzoomObject<br/> */<br/>var p = $parameters.PanzoomObject<br/>if(p) {<br/>    var e = document.getElementById($parameters.ElementId);<br/>    if(e) e.parentElement.removeEventListener('wheel', p.zoomWithWheel);<br/>    p.destroy();<br/>}</span></pre><p id="537c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在还剩下一个重要的块事件:<em class="op"> OnParametersChanged </em>，每当web块的一个输入参数发生变化时，就会触发这个事件。例如，在我们的例子中，当panzoom小工具所在的屏幕改变了<em class="op">选项</em>时，就会发生这种情况。为了正确处理该事件，我们需要更新panzoom组件的选项。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/274ecc2e4aa4a74b401c7e1b8f784cfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*QMozmvShVIzmqlfOyumYTQ.png"/></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">web块Panzoom的OnParametersChanged事件处理程序</figcaption></figure><p id="f5bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个看起来奇怪的客户端动作<em class="op"> Panzoom_SetOptions </em>来自哪里？现在，我们将把它和其他一些客户端动作一起实现，并发布给小部件的消费者。</p><h2 id="b8ef" class="ng lo iq bd lp nh ni dn lt nj nk dp lx la nl nm lz le nn no mb li np nq md nr bi translated">实现一些公共客户端操作来与panzoom交互</h2><p id="13cf" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">您已经学习了通过输入参数和事件与块通信的正式方式。我们在这里集成的panzoom组件额外提供了一些可以直接调用的JavaScript方法。这些都是在初始化期间由我们保存在局部变量<em class="op"> PanzoomObject </em>中的panzoom对象公开的。</p><p id="a7af" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在OutSystems中，块只能公开输入参数和事件，而不能公开客户端操作。因此，使组件的方法对消费者应用程序可用的唯一方法是实现公共客户端操作，并通过我们希望方法在其上执行的panzoom对象传递输入参数。这就是我们在<em class="op"> OnReady </em>活动中把它传递给消费者的原因。</p><p id="ef6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面您会发现客户端动作流和相应的JavaScripts。输入参数<em class="op"> PanzoomObject </em>也作为输入参数传递给所有JavaScripts。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/ee169db3b8ba16333d81c15afb5f64d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e6rLUJStxOZl7JOZpe_Wlg.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">与panzoom组件交互的客户端操作(第1/2部分)</figcaption></figure><p id="b1a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">pan zoom _ get Options</em></strong>返回我们OutSystems结构中当前options对象的副本<em class="op"> PanzoomOptions </em>。因为我们不能在OutSystems中将结构传递给JavaScriptss或从JavaScript传递结构，所以我们必须将其序列化和反序列化为JSON。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="03c9" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_GetOptions<br/> *<br/> * @param {object} PanzoomObject<br/> * @return {string} Options<br/> */<br/>if ($parameters.PanzoomObject) {<br/>  var o = $parameters.PanzoomObject.getOptions();<br/>  $parameters.Options = JSON.stringify(o);<br/>}</span></pre><p id="ea69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op"> Panzoom_GetPan </em> </strong>返回当前平移位置(x/y平移)。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="0f0a" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_GetPan<br/> *<br/> * @param {object} PanzoomObject<br/> * @return {decimal} x<br/> * @return {decimal} y<br/> */<br/>if($parameters.PanzoomObject) {<br/>    var p = $parameters.PanzoomObject.getPan();<br/>    $parameters.X = p.x;<br/>    $parameters.Y = p.y;<br/>}</span></pre><p id="b801" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">pan zoom _ get scale</em></strong>返回当前缩放比例。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="165a" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_GetScale<br/> *<br/> * @param {object} PanzoomObject<br/> * @return {decimal} Scale<br/> */<br/>if($parameters.PanzoomObject) $parameters.Scale = $parameters.PanzoomObject.getScale();</span></pre><p id="74a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op">平移zoom_Pan </em> </strong>平移到给定的x和y坐标。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="2a8a" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_Pan<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {decimal} x<br/> * @param {decimal} y<br/> * @param {bool} Relative<br/> * @param {bool} Force<br/> */<br/>if($parameters.PanzoomObject) {<br/>    $parameters.PanzoomObject.pan(<br/>        $parameters.X,<br/>        $parameters.Y,<br/>        {<br/>            relative: $parameters.Relative,<br/>            force: $parameters.Force<br/>        }<br/>    );<br/>}</span></pre><p id="e8a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">pan zoom _ Reset</em></strong>将平移和缩放复位到<em class="op"> startX </em>、<em class="op"> startY </em>和<em class="op"> startScale </em>。默认情况下，它会忽略全局选项来设置动画(将<em class="op">动画</em>设置为<em class="op">假</em>以覆盖)。该方法还忽略<em class="op"> disablePan </em>、<em class="op"> disableZoom </em>和<em class="op">panonlywhenzoom</em>选项(覆盖set <em class="op"> Force </em>到<em class="op"> False </em>)。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="70d1" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_Reset<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {bool} Animate<br/> * @param {bool} Force<br/> */<br/>if($parameters.PanzoomObject) $parameters.PanzoomObject.reset(<br/>    {<br/>        animate: $parameters.Animate,<br/>        force: $parameters.Force<br/>    }<br/>);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/9fb0f154484e63ca1dea95b80ab294a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9wxD0bIoERgXwcE6dzUYag.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">与panzoom组件交互的客户端操作(第2/2部分)</figcaption></figure><p id="f4ba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">Panzoom _ set options</em></strong>用给定的<em class="op"> PanzoomOptions </em>结构更新pan zoom实例的选项，当然必须序列化为JSON才能传递给JavaScript。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="d3a3" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_SetOptions<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {string} Options<br/> */<br/>if ($parameters.PanzoomObject) {<br/>    var o = JSON.parse($parameters.Options);<br/>    $parameters.PanzoomObject.setOptions(o);<br/>}</span></pre><p id="5768" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op"> Panzoom_Zoom </em> </strong>将Panzoom元素缩放到给定的比例。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="ca7b" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_Zoom<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {decimal} Scale<br/> */<br/>if($parameters.PanzoomObject) $parameters.PanzoomObject.zoom($parameters.Scale);</span></pre><p id="f085" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">pan zoom _ zoom in</em></strong>使用选项中设置的预定增量放大。默认动画，忽略全局选项(设置<em class="op">动画</em>为<em class="op">假</em>覆盖)。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="e2ab" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_ZoomIn<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {bool} Animate<br/> */<br/>if($parameters.PanzoomObject) $parameters.PanzoomObject.zoomIn({ animate: $parameters.Animate, });</span></pre><p id="1190" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">pan zoom _ zoom out</em></strong>使用选项中设置的预定增量缩小。默认动画，忽略全局选项(设置<em class="op">动画</em>为<em class="op">假</em>覆盖)。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="8f18" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_ZoomOut<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {bool} Animate<br/> */<br/>if($parameters.PanzoomObject) $parameters.PanzoomObject.zoomOut({ animate: $parameters.Animate, });</span></pre><p id="aa3f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">Panzoom _ zoom point</em></strong>使用给定的<em class="op">比例</em>和点(<em class="op">ClientX</em>/<em class="op">ClientY</em>)将pan zoom元素缩放到焦点。</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="a0ee" class="ow lo iq os b be ox oy l oz pa">/**<br/> * Panzoom_ZoomToPoint<br/> *<br/> * @param {object} PanzoomObject<br/> * @param {decimal} Scale<br/> * @param {decimal} ClientX<br/> * @param {decimal} ClientY<br/> */<br/>if($parameters.PanzoomObject) $parameters.PanzoomObject.zoomToPoint(<br/>    $parameters.Scale,<br/>    {<br/>        clientX: $parameters.ClientX,<br/>        clientY: $parameters.ClientY<br/>    }<br/>);</span></pre><p id="dd37" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">恭喜，您现在已经将panzoom JavaScript组件集成为OutSystems的可重用小部件。现在是时候在一个演示应用程序中尝试一下了。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h1 id="cd75" class="ln lo iq bd lp lq pi ls lt lu pj lw lx jw pk jx lz jz pl ka mb kc pm kd md me bi translated">构建演示应用程序</h1><p id="151b" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们现在将实现的小演示应用程序的目的是显示SVG图形，并允许“全景缩放”和测试上面实现的功能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/35dffacdd3b9172f0e918de02f8f6833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tIVDLlQf0gv0d-kaCAtlCA.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">演示应用的用户界面</figcaption></figure><p id="c2e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们首先向保存panzoom小部件的模块添加一个依赖项，并激活块、客户端动作和结构的所有复选框。之后，我们必须将主屏幕，我简单地命名为“演示”，添加到<em class="op">主流程</em>中。该布局基于一个<em class="op">自适应块。左栏包含panzoom组件，右栏包含一个控制面板，用于播放演示。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/9971823c67bfcc25d3276cdd39dfba1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jybq1GPLNlj_3_nhkkM-2Q.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">演示ui左栏的小部件树</figcaption></figure><p id="7978" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了配置panzoom组件，我们扩展了添加的<em class="op"> Panzoom </em>块的<em class="op">选项</em>参数。通过这样做，我们可以看到底层结构<em class="op"> PanzoomOptions </em>的所有属性，并为所有选项提供初始值。本例中使用的值适用于所用的tiger图形，但请随意使用它们或根据您想要使用的内容更改它们。该块还具有<em class="op"> ExtendedClass </em>参数，该参数在这里被设置为<em class="op">“全高”</em>以确保panzoom区域占用其父容器中的可用空间。</p><p id="53f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们希望成为可平移和可缩放的内容被放入<em class="op"> Panzoom </em>块的<em class="op">内容</em>占位符中。在这个例子中，我们简单地使用了一个SVG图形。在这个例子中，我们使用一个SVG图形，它的优点是可以无损缩放。为了在OutSystems中直接显示SVG图形，在<em class="op"> OutSystemsUI </em>中有<em class="op"> Utilities\InlineSVG </em>块，它嵌入了给定的<em class="op"> SVGCode </em>。因为这个输入参数的类型是<em class="op"> Text </em>，所以我们必须用双引号将SVG括起来，并对所有包含双引号的内容进行编码。为了您的舒适和这篇文章更好的可读性，您可以在我的要点上找到准备复制的示例图形。请不要忘记给InlineSVG小部件一个名称(这里简称为“SVG”)，因为我们稍后需要它在JavaScript中引用HTML元素。</p><p id="3c21" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">父容器通过使用以下CSS类来设置样式:</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="bcd8" class="ow lo iq os b be ox oy l pp pa">background-neutral-0 padding-m border-radius-soft</span></pre><p id="06ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们想要实现一些代码来测试<em class="op"> Panzoom </em>小部件提供的不同功能。首先，我们需要一个类型为<em class="op"> Object </em>的局部变量<em class="op"> Panzoom </em>来保存Panzoom对象并实现<em class="op"> Panzoom </em>小部件的事件处理程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/899f8ab7ddd32b08d4d8fbf646fd599e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f7Y9CmZ-fR4JL7eZlNZKig.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">panzoom小部件的变量和事件处理程序</figcaption></figure><p id="d83b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">PanzoomOnReady</em></strong>简单地将收到的<em class="op"> PanzoomObject </em>赋值给局部变量<em class="op"> Panzoom </em>。</p><p id="d78e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">PanzoomOnPanzoomChange</em></strong>在每次panzoom组件的状态改变时被触发。为了稍后监视屏幕上的状态，事件处理程序编写了一个<em class="op">文本</em>，并通过使用以下表达式将其分配给局部变量<em class="op"> PanzoomState </em>:</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="76d1" class="ow lo iq os b be ox oy l oz pa">"X: " + X + NewLine() + "Y: " + Y + NewLine() + "Scale: " + Scale</span></pre><p id="568b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二个屏幕栏(右侧)中的控制面板提供了一个用于不同客户端操作的按钮字段和一个用于显示当前全景缩放状态的控件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/6215112a369429eac23f23f4561566be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hl7yYvV6O_hffTxk3OF0NQ.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">演示ui右栏的小部件树</figcaption></figure><p id="0c2e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">控制面板由一个父容器(A)组成，其中排列了三个按钮容器(B ),每个容器有三个按钮。附加属性<em class="op"> title </em>用于获取按钮的简单工具提示。为了简单起见，您可以在这里找到要复制的样式类:</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="6661" class="ow lo iq os b be ox oy l oz pa">Container A: background-neutral-0 padding-m border-radius-soft<br/>Container B: display-flex margin-bottom-m<br/>Buttons:     btn btn-primary flex1</span></pre><p id="4df8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">利用两个附加属性<em class="op"> data-input </em>和<em class="op"> disabled </em>，控件zu display当前panzoom状态由假装为禁用输入控件的容器(C)构成。里面的表达式被绑定到局部变量<em class="op"> PanzoomState </em>。</p><p id="4e84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个按钮都有一个相应的<em class="op"> OnClick </em>事件处理程序，它调用我们的Panzoom组件的相关客户端操作:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/3078a4187e0ef2bc5ce87ef1b9f452b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QP7rRLc-DPucoVJM1rhC8A.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">控制面板按钮的事件处理程序</figcaption></figure><p id="c148" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op">平移【方向】OnClick </em> </strong>调用<em class="op">平移缩放_平移</em>客户端动作，参数如下:</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="c738" class="ow lo iq os b be ox oy l oz pa">Down:  X =   0, Y =  10, Relative = True<br/>Left:  X = -10, Y =   0, Relative = True<br/>Right: X =  10, Y =   0, Relative = True<br/>Up:    X =   0, Y = -10, Relative = True</span></pre><p id="12b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op">缩放点击</em> </strong>使用以下参数缩放至“老虎之眼”:</p><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="135c" class="ow lo iq os b be ox oy l oz pa">Panzoom_Pan:  X = -40, Y = 91, Relative = False<br/>Panzoom_Zoom: Scale = 3.6</span></pre><p id="3153" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">带有齿轮图标的最后一个按钮打开一个弹出对话框，允许用户操作<em class="op"> PanzoomOptions </em>结构的所有选项。为了简单起见，这是作为一个基本的JSON编辑器实现的。因此，我们需要屏幕中的以下局部变量和客户端操作:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pt"><img src="../Images/61ad09b60fc1098be9edd435740033fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bPCA4t17iRZJSNlf3jZMA.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">选项弹出对话框的变量和事件处理程序</figcaption></figure><p id="cb4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op">选项单击</em> </strong>处理当cog按钮被单击时，并通过<em class="op"> Panzoom_GetOptions </em>向panzoom组件请求当前选项，序列化返回的<em class="op"> PanzoomOptions </em>结构，将结果JSON赋给局部变量<em class="op"> OptionsJSON </em>，并通过将<em class="op"> OptionsDialogVisible </em>设置为<em class="op"> True </em>来显示弹出窗口。</p><p id="7de5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="op">options dialogokonclick</em></strong>处理当点击弹出对话框的OK按钮时，在<em class="op"> OptionsJSON </em>中反序列化JSON用户输入，并通过<em class="op"> Panzoom_SetOptions </em>更新panzoom组件。之后，通过将<em class="op">选项对话框可见</em>设置为<em class="op">假</em>来关闭弹出对话框。</p><p id="c1ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="op">选项对话框取消点击</em> </strong>处理点击弹出对话框的取消按钮。</p><p id="4e5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">选项弹出对话框的用户界面构建如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pu"><img src="../Images/0d6ea5b689e31f3fe50b384d35782f54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RdIAI5yyLWtA4qg2Apr0Gg.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">选项弹出对话框的用户界面</figcaption></figure><p id="1f6c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们想要实现的最后一个功能是放大用户双击的图形点的能力。因此，我们必须实现客户端动作<em class="op"> ImageOnDblClick </em>来处理用户双击时的情况，并将其注册为浏览器中的事件侦听器。这可以通过我们放入屏幕的<em class="op"> OnReady </em>事件中的JavaScript来实现。它通过一个输入参数接收InlineSVG小部件的<em class="op"> ElementId </em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pv"><img src="../Images/25e64d002b238af08c491a2c5d211cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1SuFH_WpF64uRfDQELc-Q.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk translated">双击图形的事件处理程序</figcaption></figure><pre class="kg kh ki kj gt or os ot bn ou ov bi"><span id="365d" class="ow lo iq os b be ox oy l oz pa">/**<br/> * ImageAddEventListener<br/> *<br/> * @param {string} ElementId<br/> */<br/>var e = document.getElementById($parameters.ElementId)<br/>e.addEventListener('dblclick',(event) =&gt; {<br/>    $actions.ImageOnDblClick(event.clientX, event.clientY);<br/>});</span></pre><p id="3122" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">干得好！您已经通过了测试，并创建了演示应用程序。现在可以发布和测试应用程序和panzoom组件集成了。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><h1 id="3af0" class="ln lo iq bd lp lq pi ls lt lu pj lw lx jw pk jx lz jz pl ka mb kc pm kd md me bi translated">从熔炉中取出现成的组件</h1><p id="5015" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我已经在out systems Forge(<a class="ae my" href="https://www.outsystems.com/forge/component-overview/14319/panzoom-reactive" rel="noopener ugc nofollow" target="_blank">pan zoom Reactive</a>)上发布了这个组件，所以你也可以在你的应用程序中使用它。如果你留下一些掌声和/或一杯咖啡，我会很高兴😉</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="4ec3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望您喜欢阅读本教程，并在您的环境中重新创建它。如果你对这篇文章感兴趣，我会很高兴你能在媒体上关注我。如果您有任何问题或建议我改进，请通过medium或我的<a class="ae my" href="https://www.outsystems.com/profile/enrntqhemy/" rel="noopener ugc nofollow" target="_blank"> OutSystems档案</a>联系我。</p></div></div>    
</body>
</html>