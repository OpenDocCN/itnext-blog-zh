<html>
<head>
<title>Node-Sass or Dart-Sass : The CSS Preprocessor Dilemma</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node-Sass还是Dart-Sass:CSS预处理器的困境</h1>
<blockquote>原文：<a href="https://itnext.io/the-css-preprocessor-dilemma-node-sass-or-dart-sass-32a0a096572?source=collection_archive---------0-----------------------#2020-09-17">https://itnext.io/the-css-preprocessor-dilemma-node-sass-or-dart-sass-32a0a096572?source=collection_archive---------0-----------------------#2020-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="b87f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一年多前，我在<em class="ko"> StackOverflow </em>上回答了一个关于<a class="ae kp" href="https://stackoverflow.com/questions/56150402/vue-cli-css-pre-processor-option-dart-sass-vs-node-sass/56422541#56422541" rel="noopener ugc nofollow" target="_blank">为Vue CLI </a>选择Node还是Dart-Sass的问题。它获得了很多支持票，我想也许值得更深入地探讨这个话题。</p><h2 id="bd14" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">介绍</h2><p id="0d53" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">本文主要是关于Sass及其预处理器实现:Dart-sass和Node-Sass。</p><p id="0ee8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那么，什么是CSS预处理器呢？</p><blockquote class="lo lp lq"><p id="65c5" class="jq jr ko js b jt ju jv jw jx jy jz ka lr kc kd ke ls kg kh ki lt kk kl km kn im bi translated">CSS预处理器是一个程序，让你从预处理器的独特语法生成CSS。有很多CSS预处理程序可供选择；但是，大多数CSS预处理程序都会添加一些纯CSS中没有的特性，比如mixin、嵌套选择器、继承选择器等等。这些特性使得CSS结构可读性更强，更易于维护。</p><p id="5ec7" class="jq jr ko js b jt ju jv jw jx jy jz ka lr kc kd ke ls kg kh ki lt kk kl km kn im bi translated"><a class="ae kp" href="https://developer.mozilla.org/en-US/docs/Glossary/CSS_preprocessor" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></p></blockquote><p id="ebbe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi lu translated"><span class="l lv lw lx bm ly lz ma mb mc di"> S </span> ass是样式表语言；只是语法和定义的问题。<strong class="js iu"> <em class="ko"> Dart-Sass </em> </strong>和<strong class="js iu"><em class="ko">Node-Sass</em>【1】</strong>是实现。根据Sass语言网站Dart Sass是Sass的主要实现。</p><blockquote class="lo lp lq"><p id="dab5" class="jq jr ko js b jt ju jv jw jx jy jz ka lr kc kd ke ls kg kh ki lt kk kl km kn im bi translated">Dart Sass是Sass的主要实现，这意味着它在任何其他实现之前获得新功能。它速度快，易于安装，并且可以编译成纯JavaScript，这使得它很容易集成到现代web开发工作流中。</p></blockquote><p id="9ed7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您阅读了上面的段落，您可能会决定使用Dart-Sass而不是Node-Sass，这很容易，因为它看起来合法。现在考虑一些要点:</p><ol class=""><li id="403c" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mi mj mk ml bi translated">主要实施✔</li><li id="22e5" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">✔最新功能</li><li id="d98c" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">编译成纯JavaScript？</li><li id="221b" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">易于集成，因为被编译为JS ✔</li></ol><p id="af4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了第三部分，一切看起来都很好。Dart-Sass速度最快，但是它的<a class="ae kp" href="https://www.npmjs.com/package/dart-sass" rel="noopener ugc nofollow" target="_blank"> NPM </a>包是JS编译版本，没有dart-one快。</p><p id="00ac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Node-Sass呢？Node-Sass只是一个封装器，覆盖了<strong class="js iu">LibSass</strong>(Sass的C实现版本)。</p><p id="4fe5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们回顾一下我们现在所拥有的(至少在理论上):</p><ul class=""><li id="7c38" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mr mj mk ml bi translated">Node-Sass:因为LibSass而变得更快</li><li id="81c4" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">Dart-Sass (JS编译版):没有Node-Sass快</li><li id="a699" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">Dart-Sass (Dart版本在Dart VM中运行):最快</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="6294" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们谈论的一切都是理论，让我们做一些基准测试。我使用<strong class="js iu"> Bootstrap 4 </strong> Sass源代码作为我们的测试主题:</p><h2 id="c3f1" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">1-使用DartSass进行测试(在DartVM上)</h2><p id="7757" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">用brew在Ubuntu上安装:<code class="fe mz na nb nc b">brew install sass/sass/sass</code></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="9491" class="kq kr it nc b gy nl nm l nn no">time sass bs4/bootstrap.scss dist/bs4.css</span></pre><p id="e864" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">耗时:0.21秒</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="1960" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">2-使用Dart Sass进行测试(纯JS版本)</h2><p id="d86a" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">安装dart-sass软件包:<code class="fe mz na nb nc b">npm install --save-dev sass</code></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="9b96" class="kq kr it nc b gy nl nm l nn no">.\node_modules\.bin\sass .\bs4\bootstrap.scss dist/bs4-js.css</span></pre><p id="34bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">耗时:1.992秒</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="140c" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">3-使用节点Sass进行测试</h2><p id="fea5" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">安装node-sass包:<code class="fe mz na nb nc b">nppm install --save-dev node-sass</code></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="c52b" class="kq kr it nc b gy nl nm l nn no">.\node_modules\.bin\node-sass .\bs4\bootstrap.scss dist/bs4-ns.css</span></pre><p id="3760" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">耗时:0.605秒</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="6abc" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">概述</h2><p id="92d0" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">在我们的测试场景中，Dart-Sass(在DartVM上)是最快的，node-sass也没那么差，Dart-Sass(纯JS)在性能方面很糟糕<strong class="js iu"> </strong>。</p><figure class="nd ne nf ng gt nq gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d05f90f399ad59b2e3464481d5b24bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*rjsrfe59iAyNmf19F1-8_A.png"/></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">Bootstrap Sass编译不同Sass实现的结果</figcaption></figure><ul class=""><li id="9584" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mr mj mk ml bi translated">在这种特殊情况下，两秒钟没什么大不了的；但是考虑一下Dart-Sass(JS)比Dart-Sass(Dart VM)慢九倍，比node-sass慢三倍。</li><li id="7e50" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">我有一个项目有+20个主题，用node-sass用了30秒，但是我试着用Dart-Sass(JS)，用了一个世纪！</li><li id="bf50" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">虽然Dart-Sass(Dart VM)是最快的，但安装或集成它有点棘手。</li></ul><h2 id="91ad" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">最后的想法？</h2><p id="7f46" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">最终，什么样的实现最适合您的项目始终是您的决定，但是要考虑:</p><ol class=""><li id="1fe3" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mi mj mk ml bi translated">对于较小或典型的Sass项目，Dart-Sass(JS)是完美的，它很容易安装，不需要任何外部绑定依赖，如node-sass。</li><li id="c725" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">如果您的sass文件需要时间来编译，并且如果Node-Sass支持您使用的所有特性，那么就使用Node-Sass吧！</li><li id="659d" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">如果在您的机器上安装Dart-Sass(Dart VM)不成问题，Dart-Sass是最佳选择。</li><li id="2ed2" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">还要考虑Node-Sass是<a class="ae kp" href="https://sass-lang.com/blog/libsass-is-deprecated" rel="noopener ugc nofollow" target="_blank">弃用的</a>，它们不会添加新特性。</li></ol><h2 id="2ab2" class="kq kr it bd ks kt ku dn kv kw kx dp ky kb kz la lb kf lc ld le kj lf lg lh li bi translated">注意事项:</h2><p id="b67e" class="pw-post-body-paragraph jq jr it js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn im bi translated">[1]: Node-sass是一个库，提供Node.js到<strong class="js iu"> Libsass </strong>的绑定，后者是流行的样式表预处理程序Sass的C版本。</p></div></div>    
</body>
</html>