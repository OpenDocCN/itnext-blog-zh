<html>
<head>
<title>Complete Step by Step Firebase Authentication in Angular 2 — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 2 —第1部分中完成逐步Firebase身份验证</h1>
<blockquote>原文：<a href="https://itnext.io/step-by-step-complete-firebase-authentication-in-angular-2-97ca73b8eb32?source=collection_archive---------0-----------------------#2017-08-18">https://itnext.io/step-by-step-complete-firebase-authentication-in-angular-2-97ca73b8eb32?source=collection_archive---------0-----------------------#2017-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/61987d31cefc9e591f0e42d51b05ad56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1tiW8bzzo9goKQA8Nk_Wg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用Firebase在Angular中完成身份验证</figcaption></figure><p id="2a8c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Firebase Authentication提供后端服务、易于使用的SDK和现成的UI库，用于向您的应用程序验证用户。它支持使用密码、电话号码、流行的联合身份提供商(如Google、脸书和Twitter、Github等)进行身份验证。</p><p id="3ab0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是第1部分。它太长了，所以我不得不把它分成两部分。</p><p id="47e0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在整个课程中，我将把<strong class="ke ir"><em class="la"/></strong><em class="la">简称为</em><strong class="ke ir"><em class="la"/></strong><em class="la">。请注意，Angular 1也被称为</em><strong class="ke ir"><em class="la"/></strong><em class="la">。话虽如此。</em></p><p id="d6e6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本教程中，我将带您了解如何使用以下登录方法在Angular应用程序中轻松处理身份验证:</p><ul class=""><li id="1424" class="lb lc iq ke b kf kg kj kk kn ld kr le kv lf kz lg lh li lj bi translated">推特</li><li id="7989" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">脸谱网</li><li id="d8e1" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">常规电子邮件/密码</li><li id="d175" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">开源代码库</li><li id="62a9" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">谷歌邮箱</li></ul><p id="bf5b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一般来说(哦不好意思，编码)</p><p id="8d31" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">按照以下步骤创建新的Angular应用程序。我们将使用角度cli。或者，您可以跳过这一步，在我的github存储库中克隆应用程序的初始版本</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="6f89" class="ly lz iq lu b gy ma mb l mc md">$ ng new angular2-authentication-firebase<br/>$ cd angular2-authentication-firebase<br/>$ ng serve</span><span id="40b5" class="ly lz iq lu b gy me mb l mc md">$ npm install --save font-awesome angular2-fontawesome</span></pre><p id="c1dc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上面的代码中，我们使用angular-cli创建了一个新的Angular应用程序。我们进入目录，使用<em class="la"> ng serve </em>命令为应用程序提供服务。此外，我们引入了FontAwesome库，这样我们就可以利用它的图标。</p><p id="feee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在此步骤之后，如果您的浏览器没有自动打开，请访问<em class="la"> http://localhost:4200 </em></p><p id="0674" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过将以下代码行添加到src/styles.css文件中，在应用程序中包含bootstrap和fontawesome:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="62d7" class="ly lz iq lu b gy ma mb l mc md">@import "~bootstrap/dist/css/bootstrap.min.css";<br/>@import "~font-awesome/css/font-awesome.css";</span></pre><p id="124d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">克隆启动库并开始使用</strong></p><p id="ca01" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我已经创建了一个starter Angular 2应用程序，<a class="ae mf" href="https://github.com/hellotunmbi/angular2-authentication-firebase/tree/starter" rel="noopener ugc nofollow" target="_blank">在这里克隆它</a>。它预装了以下内容。最终版本是<a class="ae mf" href="https://github.com/hellotunmbi/angular2-authentication-firebase/tree/final" rel="noopener ugc nofollow" target="_blank">在这里找到</a></p><ul class=""><li id="3fc7" class="lb lc iq ke b kf kg kj kk kn ld kr le kv lf kz lg lh li lj bi translated">一个登录组件和一个仪表板组件，编写了它们的html和css。</li><li id="870b" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">自举的html和css。</li><li id="ee4c" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">font awesome——社交图标</li></ul><p id="fdc4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">运行命令:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="78bc" class="ly lz iq lu b gy ma mb l mc md">npm install</span></pre><p id="60bf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">看起来是这样的:</p><div class="lp lq lr ls gt ab cb"><figure class="mg jr mh mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/19cbadb5a20882a00219c209202e8621.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*5V-InmzDixrmls_Z8Urcbw.png"/></div></figure><figure class="mg jr mm mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/bc1c58b314cf63e94ed7822061d16dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*1PvdadadnDAP5uBv_ecBYQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk mn di mo mp translated">登录组件和仪表板组件页面</figcaption></figure></div><h2 id="6213" class="ly lz iq bd mq mr ms dn mt mu mv dp mw kn mx my mz kr na nb nc kv nd ne nf ng bi translated">让我们添加身份验证</h2><p id="1e83" class="pw-post-body-paragraph kc kd iq ke b kf nh kh ki kj ni kl km kn nj kp kq kr nk kt ku kv nl kx ky kz ij bi translated">创建一个firebase应用程序。访问<a class="ae mf" href="http://firebase.google.com" rel="noopener ugc nofollow" target="_blank">firebase.google.com</a>并点击签到。然后单击转到控制台。</p><p id="7cdb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">点击添加一个项目，你会看到下面的图像，相应地填写如下:</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/11d72f5b34f37c72f7d3cb5335fac8d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*iOzb1ceRQic2PeQ8uPqfrQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建一个关于firebase.google.com的项目</figcaption></figure><p id="1dd6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">进入仪表板后，单击将Firebase添加到您的web应用程序，并复制配置设置，如下图中突出显示的那样:</p><div class="lp lq lr ls gt ab cb"><figure class="mg jr nn mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/964dd41b29dfe656c2bfe3ffdbe1b766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*lkKWhUEqUiYpPH4-qEi3Kg.png"/></div></figure><figure class="mg jr no mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/20208e9e89eb4c2dca05f1a88be7db0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*BS0Feap_MmAqrMQZyIKjvg.png"/></div></figure></div><p id="96bd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在您的终端中运行以下命令，以获取angularfire2进行身份验证:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="433b" class="ly lz iq lu b gy ma mb l mc md">$ npm install angularfire2 firebase --save</span></pre><p id="9184" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">转到src/environments/environments . ts并粘贴配置，就像下面的代码一样:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="9fc4" class="ly lz iq lu b gy ma mb l mc md"><em class="la">// src/environments/environments.ts</em></span><span id="ed6b" class="ly lz iq lu b gy me mb l mc md">export const environment = {<br/>   production: false,<br/>   firebase: {<br/>      apiKey: "&lt;Your_API_KEY_HERE&gt;",<br/>      authDomain: "AUTH-DOMAIN-HERE",<br/>      databaseURL: "DATABASE-URL-HERE",<br/>      projectId: "PROJECT-ID-HERE",<br/>      storageBucket: "STORAGE-BUCKET-HERE",<br/>      messagingSenderId: "MESSAGING-SENDER-ID-HERE"<br/>   };<br/>};</span></pre><p id="0f0b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">转到app.module.ts并导入AngularFireModule、AngularFireDatabaseModule和AngularFireAuth模块。还要导入环境配置。</p><p id="5db9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">也将它们添加到NgModule decorator下的导入中，如下所示:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="9ad5" class="ly lz iq lu b gy ma mb l mc md"><em class="la">// src/app/app.modules.ts</em></span><span id="b898" class="ly lz iq lu b gy me mb l mc md">import { BrowserModule } from '<a class="ae mf" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>';<br/>import { NgModule } from '<a class="ae mf" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="6fd3" class="ly lz iq lu b gy me mb l mc md">import { AppRoutes } from "./app.routes";</span><span id="1323" class="ly lz iq lu b gy me mb l mc md">import { AppComponent } from './app.component';<br/>import { LoginComponent } from './views/login/login.component';<br/>import { DashboardComponent } from './views/dashboard/dashboard.component';</span><span id="ed37" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">import { environment } from '../environments/environment';<br/>import { AngularFireModule } from 'angularfire2';<br/>import { AngularFireDatabaseModule } from 'angularfire2/database';<br/>import { AngularFireAuthModule } from 'angularfire2/auth';</strong></span><span id="fa4d" class="ly lz iq lu b gy me mb l mc md"><a class="ae mf" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  declarations: [<br/>    AppComponent,<br/>    LoginComponent,<br/>    DashboardComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutes,<br/>    <strong class="lu ir">AngularFireModule.initializeApp(environment.firebase, 'angular-auth-firebase'),<br/>    AngularFireDatabaseModule,<br/>    AngularFireAuthModule</strong><br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="a13a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们创建一个认证服务来实现认证。我们创建服务，以便我们的所有组件可以随时随地访问和使用它。使用angular cli，我们可以这样做:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="a771" class="ly lz iq lu b gy ma mb l mc md">$ ng generate service services/auth</span></pre><p id="bc2f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这将在<em class="la"> src/app/services </em>文件夹中创建auth.service.ts。将其导入到您的模块中。然后，我们将它添加到app.module.ts中的提供程序中。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="16dd" class="ly lz iq lu b gy ma mb l mc md"><em class="la">// src/app/services/app.module.ts</em></span><span id="a7e0" class="ly lz iq lu b gy me mb l mc md">import { BrowserModule } from '<a class="ae mf" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>';<br/>import { NgModule } from '<a class="ae mf" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="4633" class="ly lz iq lu b gy me mb l mc md">import { AppRoutes } from "./app.routes";</span><span id="3061" class="ly lz iq lu b gy me mb l mc md">import { AppComponent } from './app.component';<br/>import { LoginComponent } from './views/login/login.component';<br/>import { DashboardComponent } from './views/dashboard/dashboard.component';</span><span id="2b92" class="ly lz iq lu b gy me mb l mc md">import { environment } from '../environments/environment';<br/>import { AngularFireModule } from 'angularfire2';<br/>import { AngularFireDatabaseModule } from 'angularfire2/database';<br/>import { AngularFireAuthModule } from 'angularfire2/auth';</span><span id="627b" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">import { AuthService } from './services/auth.service';</strong></span><span id="cc7f" class="ly lz iq lu b gy me mb l mc md"><a class="ae mf" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  declarations: [<br/>    AppComponent,<br/>    LoginComponent,<br/>    DashboardComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutes,<br/>    AngularFireModule.initializeApp(environment.firebase, 'angular-auth-firebase'),<br/>    AngularFireDatabaseModule,<br/>    AngularFireAuthModule<br/>  ],<br/>  providers: [<strong class="lu ir">AuthService</strong>],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="c540" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在auth.service.ts文件中，导入AngularFireAuth、firebase和Observable。创建一个可观察的用户变量，在构造函数中注入FirebaseAuth，并创建登录方法。您的auth.service.ts变成:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="ddcf" class="ly lz iq lu b gy ma mb l mc md">// src/app/services/auth.service.ts</span><span id="0230" class="ly lz iq lu b gy me mb l mc md">import { Injectable } from '<a class="ae mf" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Router } from "@angular/router";</span><span id="4900" class="ly lz iq lu b gy me mb l mc md">import { AngularFireAuth } from 'angularfire2/auth';<br/>import * as firebase from 'firebase/app';<br/>import { Observable } from 'rxjs/Observable';</span><span id="be60" class="ly lz iq lu b gy me mb l mc md"><a class="ae mf" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>()<br/>export class AuthService {<br/>  private user: Observable&lt;firebase.User&gt;;</span><span id="7a8b" class="ly lz iq lu b gy me mb l mc md">constructor(private _firebaseAuth: AngularFireAuth, private router: Router) { <br/>      this.user = _firebaseAuth.authState;<br/>  }</span><span id="083a" class="ly lz iq lu b gy me mb l mc md">}</span></pre><h2 id="3b70" class="ly lz iq bd mq mr ms dn mt mu mv dp mw kn mx my mz kr na nb nc kv nd ne nf ng bi translated">使用Twitter登录</h2><p id="02f3" class="pw-post-body-paragraph kc kd iq ke b kf nh kh ki kj ni kl km kn nj kp kq kr nk kt ku kv nl kx ky kz ij bi translated">转到Firebase控制台。单击右侧的“身份验证”菜单项。点按“登录方式”,然后选取“Twitter”。启用它。</p><p id="e998" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">去dev.twitter.com/apps的<a class="ae mf" href="https://dev.twitter.com/apps" rel="noopener ugc nofollow" target="_blank">创建一个应用程序。填写信息，包括将托管您的应用程序的有效URL。</a></p><p id="b877" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">单击“密钥和访问令牌”选项卡。复制用户密钥(API密钥)和用户机密(API机密)，然后粘贴到Firebase控制台中。保存。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/054a51aaaea1c1cf4b09b26e6b07106d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ZTxTJgLieNisp1tiCiiDQ.png"/></div></div></figure><p id="0e3c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当你点击保存，它会为你生成一个链接。从firebase控制台复制链接。转到Twitter开发者仪表板上的<strong class="ke ir">设置</strong>选项卡，将链接粘贴到回拨URL字段。这非常重要(见下图)。</p><div class="lp lq lr ls gt ab cb"><figure class="mg jr nq mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/3f00e176d3acc3b0ab2b06c4462dd3ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*owzrnSgVvIEF1RkxNesvZg.png"/></div></figure><figure class="mg jr nr mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/25ad9b2394e4f3c3767885a3523ae68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*YMvmEc1JoEaRImUKb4qKWw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk ns di nt mp translated">从firebase控制台复制链接到twitter回拨URL</figcaption></figure></div><p id="3969" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在您的auth服务中添加signInWithTwitter()函数，如下所示:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="1f73" class="ly lz iq lu b gy ma mb l mc md">// ...auth.service.ts</span><span id="d115" class="ly lz iq lu b gy me mb l mc md">...    <br/>    signInWithTwitter() {<br/>      return this._firebaseAuth.auth.signInWithPopup(<br/>        new firebase.auth.TwitterAuthProvider()<br/>      )<br/>    }<br/>...</span></pre><p id="4bd1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在您的app/views/login.ts中，导入AuthService，将其注入构造函数并实现Twitter登录</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="0934" class="ly lz iq lu b gy ma mb l mc md">// src/app/views/login/login.component.ts</span><span id="e731" class="ly lz iq lu b gy me mb l mc md">import { Injectable } from '<a class="ae mf" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="d46e" class="ly lz iq lu b gy me mb l mc md">import { AngularFireAuth } from 'angularfire2/auth';<br/>import * as firebase from 'firebase/app';<br/>import { Observable } from 'rxjs/Observable';</span><span id="7350" class="ly lz iq lu b gy me mb l mc md"><a class="ae mf" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>()<br/>export class AuthService {<br/>  private user: Observable&lt;firebase.User&gt;;</span><span id="04e5" class="ly lz iq lu b gy me mb l mc md">constructor(private _firebaseAuth: AngularFireAuth) { <br/>      this.user = _firebaseAuth.authState;<br/>  }</span><span id="bccd" class="ly lz iq lu b gy me mb l mc md">signInWithTwitter() {<br/>      return this._firebaseAuth.auth.signInWithPopup(<br/>        new firebase.auth.TwitterAuthProvider()<br/>      )<br/>    }</span><span id="de5d" class="ly lz iq lu b gy me mb l mc md">}</span></pre><p id="4fbd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在您的登录html文件中添加click函数。打开login.component.html并添加点击功能。参见下面的片段:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="3f0a" class="ly lz iq lu b gy ma mb l mc md">&lt;button type="button" class="btn btn-block" <strong class="lu ir">(click)="signInWithTwitter()"</strong>&gt;<br/>   &lt;i class="fa fa-twitter" aria-hidden="true"&gt;&lt;/i&gt;<br/>      Login with Twitter<br/>&lt;/button&gt;</span></pre><p id="e0f5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">转到您的网络应用程序，然后单击“使用Twitter登录”按钮。它会要求您授权应用程序或使用您的twitter凭据登录，然后带您到仪表板页面。</p><div class="lp lq lr ls gt ab cb"><figure class="mg jr nu mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/c737186a0d93e404037dd0cc2cec6dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*NdW5Sh2twizWYx9_e1eNbQ.png"/></div></figure><figure class="mg jr nv mi mj mk ml paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/dcac8b9de96c1492afeaa16af66d1224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*1PvdadadnDAP5uBv_ecBYQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk nw di nx mp translated">授权twitter应用程序并登录仪表板</figcaption></figure></div><h2 id="f43d" class="ly lz iq bd mq mr ms dn mt mu mv dp mw kn mx my mz kr na nb nc kv nd ne nf ng bi translated">2.与脸书一起登录</h2><p id="e773" class="pw-post-body-paragraph kc kd iq ke b kf nh kh ki kj ni kl km kn nj kp kq kr nk kt ku kv nl kx ky kz ij bi translated">要使用脸书进行认证，请访问<a class="ae mf" href="http://developer.facebook.com" rel="noopener ugc nofollow" target="_blank">developer.facebook.com</a>并用您的Facebook凭证登录。创建/添加新应用。键入显示名称并创建应用ID</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/162064dd8e7136f99a5469852cddc77e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iUvxVS7N3EwiZQLmqtMWlA.png"/></div></div></figure><p id="ca7d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">单击侧面菜单中的设置。复制应用程序ID，显示应用程序秘密，并复制它。去你的firebase控制台。在登录方法下，启用facebook并输入应用id和应用密码。</p><p id="1919" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，让我们将signInWithFacebook()函数添加到登录组件和登录html中。</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="c8ad" class="ly lz iq lu b gy ma mb l mc md">// login.component.ts</span><span id="97e9" class="ly lz iq lu b gy me mb l mc md">...<br/>   signInWithFacebook() {<br/>      this.authService.signInWithFacebook()<br/>      .then((res) =&gt; { <br/>          this.router.navigate(['dashboard'])<br/>        })<br/>      .catch((err) =&gt; console.log(err));<br/>    }<br/>...</span></pre><p id="9621" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们的登录html文件中，让我们一次性添加所有的登录。我们的html变成了:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="1806" class="ly lz iq lu b gy ma mb l mc md">// login.component.html</span><span id="fd65" class="ly lz iq lu b gy me mb l mc md">...<br/>&lt;div class="form-group"&gt;<br/>    &lt;button type="buton" class="btn btn-block" (click)="signInWithFacebook()"&gt;<br/>      &lt;i class="fa fa-facebook" aria-hidden="true"&gt;&lt;/i&gt; <br/>      Login with Facebook<br/>    &lt;/button&gt;</span><span id="6daf" class="ly lz iq lu b gy me mb l mc md">&lt;button type="button" class="btn btn-block" (click)="signInWithTwitter()"&gt;<br/>      &lt;i class="fa fa-twitter" aria-hidden="true"&gt;&lt;/i&gt;<br/>      Login with Twitter<br/>    &lt;/button&gt;</span><span id="d805" class="ly lz iq lu b gy me mb l mc md">&lt;button type="button" class="btn btn-block" (click)="signInWithGithub()"&gt;<br/>      &lt;i class="fa fa-github" aria-hidden="true"&gt;&lt;/i&gt;<br/>      Login with Github<br/>    &lt;/button&gt;</span><span id="0028" class="ly lz iq lu b gy me mb l mc md">&lt;button type="button" class="btn btn-block" (click)="signInWithGoogle()"&gt;<br/>      &lt;i class="fa fa-google" aria-hidden="true"&gt;&lt;/i&gt;<br/>      Login with Google<br/>    &lt;/button&gt;<br/>&lt;/div&gt;                  <br/>...</span></pre><h2 id="e058" class="ly lz iq bd mq mr ms dn mt mu mv dp mw kn mx my mz kr na nb nc kv nd ne nf ng bi translated">使用Google登录</h2><p id="8c3c" class="pw-post-body-paragraph kc kd iq ke b kf nh kh ki kj ni kl km kn nj kp kq kr nk kt ku kv nl kx ky kz ij bi translated">对于Google帐户登录，在firebase控制台中启用Google身份验证，然后单击Save</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/e9fb035e2607a12f704d6cf0e34cc713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z5_RNvBFk_VLGd-H9sz3Gg.png"/></div></div></figure><p id="1881" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们将该函数添加到auth.service.ts文件中，如下所示:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="ff1e" class="ly lz iq lu b gy ma mb l mc md">// src/app/services/auth.service.ts</span><span id="86b8" class="ly lz iq lu b gy me mb l mc md">...</span><span id="f6e7" class="ly lz iq lu b gy me mb l mc md">signInWithGoogle() {<br/>    return this._firebaseAuth.auth.signInWithPopup(<br/>      new firebase.auth.GoogleAuthProvider()<br/>    )<br/>  }</span><span id="3991" class="ly lz iq lu b gy me mb l mc md">...</span></pre><p id="5d5c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">添加以下函数很重要:isLoggedIn()和Logout()。如果用户登录，isLoggedIn()将返回一个布尔类型。这将确保某些页面和显示仅对授权用户可用。</p><p id="1bd0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">logout()函数在被调用时，将当前用户注销。一旦用户使用完应用程序，保护应用程序也很重要。</p><p id="da3b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">完整的auth.service文件如下所示:</p><pre class="lp lq lr ls gt lt lu lv lw aw lx bi"><span id="322d" class="ly lz iq lu b gy ma mb l mc md">import { Injectable } from '<a class="ae mf" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Router } from "<a class="ae mf" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>";</span><span id="213e" class="ly lz iq lu b gy me mb l mc md">import { AngularFireAuth } from 'angularfire2/auth';<br/>import * as firebase from 'firebase/app';<br/>import { Observable } from 'rxjs/Observable';</span><span id="83c9" class="ly lz iq lu b gy me mb l mc md"><a class="ae mf" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>()<br/>export class AuthService {<br/>  private user: Observable&lt;firebase.User&gt;;<br/>  private userDetails: firebase.User = null;</span><span id="3103" class="ly lz iq lu b gy me mb l mc md">constructor(private _firebaseAuth: AngularFireAuth, private router: Router) { <br/>      this.user = _firebaseAuth.authState;</span><span id="1147" class="ly lz iq lu b gy me mb l mc md">this.user.subscribe(<br/>        (user) =&gt; {<br/>          if (user) {<br/>            this.userDetails = user;<br/>            console.log(this.userDetails);<br/>          }<br/>          else {<br/>            this.userDetails = null;<br/>          }<br/>        }<br/>      );<br/>  }</span><span id="1f8e" class="ly lz iq lu b gy me mb l mc md">signInWithTwitter() {<br/>    return this._firebaseAuth.auth.signInWithPopup(<br/>      new firebase.auth.TwitterAuthProvider()<br/>    )<br/>  }</span><span id="d053" class="ly lz iq lu b gy me mb l mc md">signInWithFacebook() {<br/>    return this._firebaseAuth.auth.signInWithPopup(<br/>      new firebase.auth.FacebookAuthProvider()<br/>    )<br/>  }</span><span id="f4cd" class="ly lz iq lu b gy me mb l mc md">signInWithGoogle() {<br/>    return this._firebaseAuth.auth.signInWithPopup(<br/>      new firebase.auth.GoogleAuthProvider()<br/>    )<br/>  }</span><span id="4ff1" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">isLoggedIn() {<br/>  if (this.userDetails == null ) {<br/>      return false;<br/>    } else {<br/>      return true;<br/>    }<br/>  }</strong></span><span id="e725" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">logout() {<br/>    this._firebaseAuth.auth.signOut()<br/>    .then((res) =&gt; this.router.navigate(['/']));<br/>  }<br/>}</strong></span><span id="b0bd" class="ly lz iq lu b gy me mb l mc md">logout() {<br/>    this._firebaseAuth.auth.signOut()<br/>    .then((res) =&gt; this.router.navigate(['/']));<br/>  }<br/>}</span></pre><p id="792a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢你花时间阅读这篇文章，希望对你有所帮助。我将出版第二部分，这将需要:</p><ul class=""><li id="b0a4" class="lb lc iq ke b kf kg kj kk kn ld kr le kv lf kz lg lh li lj bi translated">GitHub认证</li><li id="bf2e" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">常规注册/登录</li><li id="7c22" class="lb lc iq ke b kf lk kj ll kn lm kr ln kv lo kz lg lh li lj bi translated">保护仪表板页面</li></ul><p id="6bdb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">谢谢！敬请分享，点赞，评论。另外，你可以在Twitter上关注我@ <a class="ae mf" href="https://twitter.com/hellotunmbi" rel="noopener ugc nofollow" target="_blank"> hellotunmbi </a>！</p><p id="fcf2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">更新！！！</strong></p><p id="bd8b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae mf" href="https://medium.com/@hellotunmbi/part-2-complete-step-by-step-firebase-authentication-in-angular-2-25d284102632" rel="noopener">第二部分可以在这里找到</a></p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="64ea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你觉得这篇文章很有帮助，并且想阅读更多，知道我什么时候发表相关文章，请订阅我的时事通讯。我保证不会给你发垃圾邮件。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><a href="https://www.buymeacoffee.com/hellotunmbi"><div class="gh gi oh"><img src="../Images/a629679250bd54970466aa64242e8f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*vzHMBQN2v_dshzof9eJZEQ.png"/></div></a></figure></div></div>    
</body>
</html>