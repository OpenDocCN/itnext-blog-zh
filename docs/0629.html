<html>
<head>
<title>Node + Express + LetsEncrypt : Generate a free SSL certificate and run an HTTPS server in 5 minutes or less</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node + Express + LetsEncrypt:在5分钟或更短时间内生成一个免费的SSL证书并运行一个HTTPS服务器</h1>
<blockquote>原文：<a href="https://itnext.io/node-express-letsencrypt-generate-a-free-ssl-certificate-and-run-an-https-server-in-5-minutes-a730fbe528ca?source=collection_archive---------0-----------------------#2018-04-22">https://itnext.io/node-express-letsencrypt-generate-a-free-ssl-certificate-and-run-an-https-server-in-5-minutes-a730fbe528ca?source=collection_archive---------0-----------------------#2018-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/30a420d67821604d69fbbe3818c68ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IaTCWLAA5wQopaOR."/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">《一个戴着手表在MacBook上打字的男人》由<a class="ae jd" href="https://unsplash.com/@bradneathery?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布拉德·内瑟利</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上发表</figcaption></figure><div class=""/><p id="b0c7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在写我的上一篇文章的时候，我在处理LetsEncrypt生成的SSL证书时遇到了很多困难。</p><p id="e6e1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我找不到一步一步的教程，就像预期的那样，因此我决定根据对我有用的东西来写我自己的。</p><blockquote class="lb lc ld"><p id="be79" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><strong class="kf jh">补充说明:</strong>通常，您的主机会提供一键式解决方案，在您的服务器上设置和更新SSL证书。但是如果你像我一样在开发VPS，你就必须手动处理它。</p></blockquote></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="58d3" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">你真正的目的是什么</h1><p id="ded3" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated"><strong class="kf jh">首先</strong>，你需要那几样东西:</p><ul class=""><li id="dd71" class="ms mt jg kf b kg kh kk kl ko mu ks mv kw mw la mx my mz na bi translated">运行在linux发行版上的服务器，具有root访问权限(通过SSH)</li><li id="8ac7" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">https://nodejs.org/en/</li><li id="f78a" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">快递:<code class="fe ng nh ni nj b">npm install express</code></li><li id="8817" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">Certbot</li></ul><p id="9a44" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装certbot，请将这些行复制粘贴到终端中:</p><p id="5bfd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ng nh ni nj b">$ sudo add-apt-repository ppa:certbot/certbot</code></p><p id="2cda" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ng nh ni nj b">$ sudo apt-get update</code></p><p id="13ff" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ng nh ni nj b">$ sudo apt-get install certbot</code></p><p id="4102" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">第二个</strong>，您将使用certbot生成一个SSL证书:</p><p id="79ec" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ng nh ni nj b">$ certbot certonly --manual</code></p><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nk"><img src="../Images/05781edae8c2b571f82a08c64929f8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AaT-oFcSHwqz7UzKVmC5eA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">这张图片是用<a class="ae jd" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank">碳</a>生成的，我非常喜欢这个工具(谢谢都灵先生)</figcaption></figure><p id="ed5f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">键入不带协议部分的域名。比如:<strong class="kf jh">yourdomain.com</strong>甚至<strong class="kf jh"> muchdomain.verysite. </strong></p><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/ecad11f545a3baa8d5f3f9818ab72821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EIBT6Q6CXgRFCbn4Wra4Ww.png"/></div></div></figure><p id="c92a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">键入<strong class="kf jh"> Y </strong>然后<strong class="kf jh">回车。</strong></p><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/ac3835f5e16d6f65de4ef05dd3d94f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LO4rQUadgOojjqdMYRx6bQ.png"/></div></div></figure><p id="153c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意两件事:</p><ul class=""><li id="9d81" class="ms mt jg kf b kg kh kk kl ko mu ks mv kw mw la mx my mz na bi translated"><strong class="kf jh">字符串:</strong>你现在要创建的文件的名称。只需创建它，我们稍后会处理目录。</li><li id="f571" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated"><strong class="kf jh"> a-challenge: </strong>打开刚刚创建的文件，将这个挑战字符串放入其中。没别的，就这一串挑战。</li></ul><p id="fcf6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">现在，不要继续了。您需要使用Node &amp; Express运行web服务器。</strong></p><blockquote class="lb lc ld"><p id="17bd" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">让你的终端在某个地方保持开放</p></blockquote><ul class=""><li id="c33c" class="ms mt jg kf b kg kh kk kl ko mu ks mv kw mw la mx my mz na bi translated"><strong class="kf jh">用你想要的名字创建一个目录</strong>，例如:服务器</li><li id="9876" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated"><strong class="kf jh">在这个目录下，创建一个JS文件来运行你的服务器。</strong>暂时保留为空，因为我将为您提供一个现成的复制/粘贴源代码。</li><li id="4611" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">在这个目录中，创建两个目录:<code class="fe ng nh ni nj b">.well-known</code>，在这个目录中，创建:<code class="fe ng nh ni nj b">acme-challenge</code>。</li><li id="7b05" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">在目录中:<code class="fe ng nh ni nj b">acme-challenge</code>放置你之前创建的文件:<strong class="kf jh">一个字符串</strong></li></ul><p id="38e6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是你应该有的:</p><p id="ec04" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ng nh ni nj b">\server<br/>----\.well-known<br/>--------\acme-challenge<br/>------------a-string<br/>----server.js</code></p><p id="4c2f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">重要提示:</strong>实际上文件名不是<strong class="kf jh"> a-string，</strong>它是一个很长的字母数字串。出于安全考虑，我不能给你看我的。同样适用于<strong class="kf jh">挑战</strong> …</p><h2 id="b993" class="nq lq jg bd lr nr ns dn lv nt nu dp lz ko nv nw md ks nx ny mh kw nz oa ml ob bi translated">你快完成了！</h2><p id="aaec" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">使用您最喜欢的代码编辑器，复制粘贴以下代码:</p><figure class="nl nm nn no gt is"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="edfb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要确认一切正常，请打开浏览器并导航至:<a class="ae jd" href="http://yourdomain.com/.well-known/acme-challenge/a-string" rel="noopener ugc nofollow" target="_blank"><strong class="kf jh">http://yourdomain.com/.well-known/acme-challenge/a-string</strong></a></p><p id="ef04" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的浏览器应该会下载您的质询文件。如果不是这样，一切从头再来。不要碰你的外壳，从目录和文件创建重新启动。</p><p id="7327" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一切正常，回到您的shell并键入<strong class="kf jh"> ENTER。</strong></p><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/8c2baeb9a8b98e54ff8be884bb604f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DuR3iosF8DOPwdS5mNyXJA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">万岁，最后一步就完成了！！</figcaption></figure><p id="80f3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">复制粘贴下面的代码，你将拥有一个全新的HTTPS服务器。</p><figure class="nl nm nn no gt is"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="7888" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导航到:<a class="ae jd" href="https://yourdomain.com," rel="noopener ugc nofollow" target="_blank"><strong class="kf jh">https://yourdomain.com</strong>，</a>你应该会看到“你好！”。</p></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><p id="c038" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很好，您已经到达本教程的结尾。</p><p id="68b5" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">遗言:</p><ul class=""><li id="8e9c" class="ms mt jg kf b kg kh kk kl ko mu ks mv kw mw la mx my mz na bi translated">你可能会遇到错误，从头开始重新启动教程，总的来说不要忘记用你实际的域名修改<strong class="kf jh">yourdomain.com</strong>。同样适用于<strong class="kf jh"> a串</strong>和<strong class="kf jh"> a挑战</strong>。</li><li id="aa3b" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">如果没有效果，让我道歉。StackOverflow会是你最好的朋友。</li><li id="2f99" class="ms mt jg kf b kg nb kk nc ko nd ks ne kw nf la mx my mz na bi translated">本教程旨在让您使用手动方法，以便您可以控制几乎一切。对我来说，这是唯一有效的解决方案。</li></ul></div><div class="ab cl li lj hu lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ij ik il im in"><h1 id="6003" class="lp lq jg bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">感谢阅读</h1><p id="f42c" class="pw-post-body-paragraph kd ke jg kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我希望这篇教程足够有帮助。</p><p id="44e7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在这里查看我的上一篇文章:<a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/creating-a-chatbot-to-book-film-tickets-part-2-435aecdf402d">创建一个可以预订电影票的聊天机器人——第二部分</a></p><p id="1e71" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请随时通过<strong class="kf jh">David . mell ul @ outlook . fr .</strong>联系我</p><p id="bdc1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我对未来文章的建议和要求持开放态度，cya ☕️😃</p><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/d849139018902339803e1cf2ca1b173f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*77KU1VSuBJ_o3b6_."/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com/@takeshi2?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">吴怡</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的“白色马克杯里的卡布奇诺，白色泡沫艺术在木桌上”</figcaption></figure></div></div>    
</body>
</html>