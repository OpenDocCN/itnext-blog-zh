<html>
<head>
<title>Web Components Using Polymer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用聚合物的网组件</h1>
<blockquote>原文：<a href="https://itnext.io/web-components-using-polymer-cd7e2ea8d06e?source=collection_archive---------4-----------------------#2018-06-14">https://itnext.io/web-components-using-polymer-cd7e2ea8d06e?source=collection_archive---------4-----------------------#2018-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="21bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Web组件是一组API，允许您创建本地的、隔离的组件，以便在任何地方使用，而不管框架、库或其他什么。自定义组件的使用与真正的本地组件相同，如输入和按钮。在阅读这篇文章之前，请确保你完全理解了<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/reusable-ui-web-components-72cbe56b0056"> web组件</a>。</p><p id="f494" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">web组件的问题在于浏览器支持——并非所有主流浏览器都支持该规范。为了解决这个问题，我们使用polyfills，但是，并不是所有的功能都可以被填充，例如，阴影DOM隔离是在浏览器内部实现的，不能从外部修补，我们需要在构建组件时考虑这一限制。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/508e7a29be66452a4a02529bbf2538b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rHzCNbST00EYrEPV"/></div></div></figure><p id="2193" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了实现web组件，我们可以使用几个库，其中之一是Polymer。Polymer是一个开源库，用于创建和使用web组件以及一组适用于所有现代浏览器的polyfills。Polymer用一个高级API减少了本地web组件样板文件，有助于关注逻辑而不是样板文件。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/083f75acfd4b8b0d82b1d0444a83a8c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/0*p4DC1GwhImtlp2wp"/></div></figure><p id="d02b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webcomponentsjs是一个聚合依赖项，它提供了一套支持HTML web组件的聚合填充，可以加载到web应用程序中。有两种加载webcomponentsjs的方法——加载包含所有内容的完整包，或者使用webcomponents-loader，它使用特性检测来加载所需的最小量。第一种又快又脏，第二种是常见的选择。</p><p id="7c3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要加载聚合填充，首先需要安装包含它们的模块:</p><pre class="kn ko kp kq gt kz la lb lc aw ld bi"><span id="acf4" class="le lf iq la b gy lg lh l li lj">&gt; npm install — save @webcomponents/webcomponentsj</span></pre><p id="b7e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在主html文件的头中加载脚本标记:</p><pre class="kn ko kp kq gt kz la lb lc aw ld bi"><span id="8675" class="le lf iq la b gy lg lh l li lj">&lt;script src=”./node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js”&gt;&lt;/script&gt;</span></pre><p id="7896" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">加载polyfills足以在任何web应用程序中开始使用web组件。例如，https://www.webcomponents.org/的<a class="ae kl" href="https://www.webcomponents.org/" rel="noopener ugc nofollow" target="_blank">几乎不费吹灰之力就提供了种类繁多的自包含定制组件。为了能够使用具有适当属性的组件，您需要安装脚本，然后添加一个到html文件的链接，或者只是通过CDN使用它。这些脚本已经包含在已安装的HTML文件中，因此不需要加载其他脚本。例如，要使用文本手写识别组件，请遵循</a><a class="ae kl" href="https://www.webcomponents.org/element/MyScript/myscript-text-web" rel="noopener ugc nofollow" target="_blank">定制元素页面</a>中的说明。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/643c6a3bf432c4af98ea58b44de6d957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*xfOw23Bc1mdLoay0"/></div></figure><p id="3d37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">聚合物组件由两部分组成——结构和行为。第一个是用一个<code class="fe ll lm ln la b">dom-module</code>标签描述的，其中的一个<code class="fe ll lm ln la b">template</code>标签包含了实际的阴影DOM以及定制样式和其他标签。第二个是提供组件行为的脚本。这些脚本可以包含在<code class="fe ll lm ln la b">dom-module</code>标签中，正如我们之前看到的，它提供了组件的自主性。另一种方法是除了HTML之外还提供脚本供消费者使用。</p><p id="c4a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将介绍这个库的基础知识，并展示构建一个简单的小型单词计数器组件的过程。Polymer是一个非常强大的库，建议浏览<a class="ae kl" href="https://github.com/Polymer/polymer" rel="noopener ugc nofollow" target="_blank">库页面</a>和<a class="ae kl" href="https://www.polymer-project.org/3.0/docs/devguide/feature-overview" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="39dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将展示如何使用聚合物从我之前的<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/reusable-ui-web-components-72cbe56b0056">帖子</a>中构建相同的单词计数器。首先，我们将创建一个组件类。该类扩展了提供额外聚合物行为的<code class="fe ll lm ln la b">PolymerElement</code>类。要声明支持的属性，我们需要添加一个名为<code class="fe ll lm ln la b">properties</code>的静态属性，并在类中设置Polymer属性值。在声明中，我们还可以使用现有的属性和转换函数来创建计算属性。例如，我们将创建一个保存字数的<code class="fe ll lm ln la b">textCount</code>属性。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="2a90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的例子中，我们还可以看到生命周期功能。所有本地web组件功能都可以像在本地组件中一样在聚合物中使用。生命周期功能如<code class="fe ll lm ln la b">connectedCallback</code>等。聚合物增加了定制的生命周期事件，如<code class="fe ll lm ln la b">ready.</code></p><p id="3618" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了使用组件类，我们将添加组件结构，即包含带有HTML标签和样式的模板标签的HTML文件:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="aa75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">聚合物组件可以使用web组件中的所有功能，例如，我们可以看到我们正在使用槽标签。使用该组件时，使用者可以用与本机web组件相同的方式覆盖默认插槽值。</p><p id="2721" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为高级API的一部分，Polymer通过用方括号写值来提供数据绑定。我们可以看到动态值——text和textCount被绑定到component类中的属性和computer属性。Polymer还支持双向数据绑定，属性数据绑定和属性数据绑定。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/19ba4297737e9c98721dbf517d014373.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/0*Kiyyys4DSpQekGk0"/></div></figure><p id="824a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用新创建的组件对消费者来说是透明的。这意味着当使用该部件时，消费者不知道他正在进口聚合物元件。从消费者的角度来看，它只是一个本地组件。我们仍然可以使用Angular和React等其他库和框架中的组件。</p><p id="af98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当使用单词计数器时，我们需要传入文本属性并可选地覆盖槽。下面是一个使用React和MobX的例子:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="58a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Polymer是一个强大的库，还有很多我们在文章中没有提到的特性。我们可以用静态模板属性在类内部声明模板，可以用扩展属性观察器等等。如果web组件是未来或UI构建模块，那么Polymer将引领一条通向未来的安全之路。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lr"><img src="../Images/88e2b831192a0516d0055b477d4ec8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cdozOIh1LyadRQSV"/></div></div></figure></div></div>    
</body>
</html>