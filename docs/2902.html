<html>
<head>
<title>The joy of creating simple javascript things</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造简单javascript事物的乐趣</h1>
<blockquote>原文：<a href="https://itnext.io/the-joy-of-creating-simple-javascript-things-983d9a1c9aee?source=collection_archive---------4-----------------------#2019-08-25">https://itnext.io/the-joy-of-creating-simple-javascript-things-983d9a1c9aee?source=collection_archive---------4-----------------------#2019-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6c5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">TLDR；</strong>有时候，我发现自己有一个想法，修理小东西是非常无聊的。我知道这不是真的，这更像是一种情绪状态，大多数时候都有办法获得乐趣。我想分享一个小故事。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/79023f3cea043a290f9f784d5f54bb08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSuelIgfeEq-dFPTu9ia1w.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com/@tegethoff?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马克·泰格霍夫</a>在<a class="ae lb" href="https://unsplash.com/search/photos/zen-garden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="c85c" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">代码</h2><p id="9205" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">前一段时间我遇到了代码。这让我感觉就像当我快要碰到一个坑时一样，我无法避免。然后我听到撞击声，责怪自己不够专心。</p><p id="3a0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该代码创建DOM元素并在鼠标移动事件时更新节点的内容。最后一句话的整个描述对我来说就像在加油站抽烟:DOM更新+鼠标移动事件是你一般要分开的东西，至于分成<a class="ae lb" href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0" rel="noopener ugc nofollow" target="_blank">不同执行上下文</a>的例子。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">代码看起来就像这样</figcaption></figure><p id="5bf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没什么不好的。有用！这不是真正的应用程序瓶颈，虽然可能有点慢。你可以注意到有时候。在这种特殊情况下，这没什么大不了的，但我仍然觉得自己碰到了一个坑——这可能会让你在未来付出代价，但却是可以避免的。</p><h2 id="1c49" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">修补坑洞</h2><p id="500d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">作为一名优秀的前端工程师，我知道每当我需要一些东西(比如<a class="ae lb" href="https://www.theregister.co.uk/2016/03/23/npm_left_pad_chaos/" rel="noopener ugc nofollow" target="_blank">左填充</a>，嘿)时，我应该去<code class="fe mc md me mf b">npm</code>或者回到过去的<code class="fe mc md me mf b">bower</code>，甚至是jQuery.com，复制粘贴一些闪亮的金属插件。</p><p id="617e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我这样做了，并找到了十几个小库，用于从JSON或其他一些简洁的方式创建DOM元素。</p><p id="e84b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以将这个库添加到<code class="fe mc md me mf b">package.json</code>中，重写代码，并为拥有更少的技术部门和新的依赖而感到高兴。这太无聊了。</p><p id="9d53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我宁愿多花一点时间，回忆或学习一些东西，找点乐子，为什么不呢？</p><p id="0835" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我从编写一个简单的帮助器来创建DOM节点开始。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">创建DOM元素的助手</figcaption></figure><p id="ff28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用我的新助手重写了代码:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="d47d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在看起来好多了，但这还不够。它仍然不是很高效，而且需要多次更新DOM，<a class="ae lb" href="https://www.reddit.com/r/javascript/comments/6115ay/why_do_developers_think_the_dom_is_slow/" rel="noopener ugc nofollow" target="_blank">，这很昂贵</a>。我不喜欢它的样子，所以在下一次迭代中，我开始重新编写代码，然后更新助手来匹配我需要的东西。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">好看一点的</figcaption></figure><p id="d455" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我知道我需要dom <a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment" rel="noopener ugc nofollow" target="_blank">片段</a>来做更少的dom更新，当你想大量更新DOM并保持UI快速时<code class="fe mc md me mf b">requestAnimationFrame</code>很方便。</p><p id="a36e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再次更新了<code class="fe mc md me mf b">element</code>助手，并做了一个计划外的更改，使这个助手更好:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="3fa1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第8-11行，如果一个孩子是一个数组，那么它看起来像另一个<code class="fe mc md me mf b">element</code>调用的参数。这个小小的变化引发了代码的另一次迭代:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">很好！</figcaption></figure><p id="a45c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我觉得不错。简短而简单，更好的是，现在我有了助手，它可以在应用程序的任何地方使用，并且不到20行代码。</p><p id="343f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我经历了几次反复才达到那个程度。可能我会在这上面多花两倍的时间，来修复可以用其他方法修复的代码，用一个库，或者我可以在第一次迭代后就停下来。</p><p id="9d12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，我想说的是，拥有一个我写的工作的、简单的和漂亮的代码是一件给我带来快乐的事情，这样做很有趣。或许对你来说也是如此。</p><p id="f38e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">—</p><p id="2a84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个故事假设你知道一些javascript和一些关于DOM的知识。如果你是这门语言的新手，没有任何链接可以让你学习一些关于javascript和前端的知识，我对此感到很抱歉</p><ul class=""><li id="9b8a" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">棒极了的javascript  —如果你刚刚开始学习，向下滚动到阅读部分</li><li id="4376" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated"><a class="ae lb" href="https://github.com/sindresorhus/awesome#front-end-development" rel="noopener ugc nofollow" target="_blank">牛逼列表的前端部分</a></li><li id="01de" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">关于前端工程的更多信息<a class="ae lb" href="https://github.com/dypsilon/frontend-dev-bookmarks" rel="noopener ugc nofollow" target="_blank">——有一段时间没有更新，但是列出了许多需要知道的重要信息，可能值得一读。</a></li></ul></div></div>    
</body>
</html>