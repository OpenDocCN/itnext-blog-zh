<html>
<head>
<title>Flutter: Handling your network API calls like a legend using Provider</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter:使用Provider像传奇一样处理网络API调用</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-handling-your-network-api-calls-like-a-legend-using-provider-8c652c0530e3?source=collection_archive---------0-----------------------#2020-05-06">https://itnext.io/flutter-handling-your-network-api-calls-like-a-legend-using-provider-8c652c0530e3?source=collection_archive---------0-----------------------#2020-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/72f66e59f327231b796c3819f343c773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjeBfvYcMo3HeNlHcZ8wyg.png"/></div></div></figure><p id="d882" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi kz translated"><span class="l la lb lc bm ld le lf lg lh di">在</span>我之前的Flutter文章中，我深入研究了利用Bloc架构和Bloc轻松处理和管理我们的Flutter网络API调用<strong class="kd iu"><em class="li"/></strong>。</p><p id="b20d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我想介绍一种不同的方法来管理和连接我们的API网络调用，使用<a class="ae lj" href="https://pub.dev/packages/provider" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">提供者</strong> </a> <strong class="kd iu">，</strong>一个不可思议的状态管理库，<strong class="kd iu"> </strong>即<strong class="kd iu"> <em class="li">更简单的</em> </strong>来使用<strong class="kd iu"> <em class="li">，更好的</em> </strong> <em class="li">来管理</em> <strong class="kd iu"> <em class="li"> </em> </strong>和<strong class="kd iu"> <em class="li">更简单的</em> </strong>:)</p><p id="4771" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我告诉你……</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="0604" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">…有一种更好的方法来调用我们的API。</strong></p><p id="3f59" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有几个人要求我做一个<strong class="kd iu"> <em class="li">登录教程</em> </strong>。所以没有进一步的行动，让我们开始吧。我们将创建一个类似于我们之前创建的小应用程序，只是现在我们将使用<strong class="kd iu"> <em class="li">提供者</em> </strong>进行API调用，并使用<a class="ae lj" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="li">Firebase</em></strong></a><strong class="kd iu"><em class="li"/></strong>和<em class="li">几个很棒的附加组件添加<em class="li">注册</em>和<em class="li">登录认证</em>功能。</em></p><p id="1fcd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我将在本文中介绍的内容是:</p><ol class=""><li id="58f4" class="lq lr it kd b ke kf ki kj km ls kq lt ku lu ky lv lw lx ly bi translated"><strong class="kd iu">供应商介绍</strong></li><li id="282f" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu">初始设置</strong></li><li id="a886" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu"> Firebase设置</strong></li><li id="5551" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu"> Firebase登录和注册</strong></li><li id="d740" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu"> Chucky车型</strong></li><li id="2564" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu">楚基供应商</strong></li><li id="baf9" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu">卡盘供应商预装器</strong></li><li id="dbd1" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky lv lw lx ly bi translated"><strong class="kd iu"> Chucky用户界面屏幕</strong></li></ol></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="de0d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意:</strong> <br/>在你自己的项目<em class="li">和</em><a class="ae lj" href="https://github.com/rgodlontonshaw/apicallslegendprovider" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">已完成的项目这里</strong> </a> <strong class="kd iu"> </strong>看完这篇文章是个好主意，这样你就能彻底了解<em class="li">所有的部分</em>是如何组合在一起的。</p><div class="ml mm gp gr mn mo"><a href="https://github.com/rgodlontonshaw/apicallslegendprovider" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">rgodlontonshaw/apicallslegendprovider</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">演示应用程序展示了Flutter API调用使用提供者和Firebase认证…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc jz mo"/></div></div></a></div><h1 id="dbba" class="nd ne it bd nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bi translated">1.提供商简介</h1><p id="4955" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated"><a class="ae lj" href="https://pub.dev/packages/provider" rel="noopener ugc nofollow" target="_blank"> Provider </a>是我迄今为止发现的Flutter工具箱中最实用、最明智的状态管理包之一。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="da67" class="ol ne it oh b gy om on l oo op">“A mixture between dependency injection (DI) and state management, built with widgets for widgets. It purposefully uses widgets for DI/state management instead of dart-only classes like <!-- -->Stream<!-- -->. The reason is, widgets are very <strong class="oh iu">simple</strong> yet <strong class="oh iu">robust and scalable.</strong>"</span></pre><p id="8eed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">简而言之，提供者允许人们在任何给定的时间点向应用程序的其余部分公开、创建、监听和处置新的对象实例。真的厉害！</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="3fec" class="nd ne it bd nf ng oq ni nj nk or nm nn no os nq nr ns ot nu nv nw ou ny nz oa bi translated">2.初始设置</h1><p id="b68a" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">启动Android Studio。🔥<br/>文件- &gt;新建- &gt;新建Flutter项目- &gt; Flutter应用- &gt;下一步- &gt;项目名称(我称之为“<strong class="kd iu"><em class="li">apicallslegend</em></strong>”)-选择项目的位置- &gt;下一步- &gt;在公司域名下你可以只使用你的姓氏或‘任何东西’。点击下一步。</p><p id="3443" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们将创建将在该应用程序中使用的所有包。将它们命名为“模型”、“网络”、“提供者”、“实用程序”和“视图”，如下所示。</p><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ov"><img src="../Images/a506328347067df1d00e5177fee731ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9J5iAcuL6pZT07QNIfVPMQ.png"/></div></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">包装</figcaption></figure><p id="24ee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，让我们添加一些必需的依赖项。</p><p id="4d46" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在你项目的<code class="fe pa pb pc oh b">pubspec.yaml</code>文件中，我已经把这些人加了进去。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="fef9" class="ol ne it oh b gy om on l oo op"><strong class="oh iu">provider</strong>: ^4.0.5+1<br/><strong class="oh iu">http</strong>: ^0.12.0+4</span></pre><p id="3ba1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行flutter包get或做一个“包get”</p><p id="b090" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于那些想跳过本教程的Firebase认证部分的人来说，你可以直接进入第五章。<br/>我还在应用程序中添加了一个“跳过登录”按钮。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="8c90" class="nd ne it bd nf ng oq ni nj nk or nm nn no os nq nr ns ot nu nv nw ou ny nz oa bi translated">3.Firebase设置</h1><p id="a5f5" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">现在让我们进入我们完整的Firebase设置。<br/>在您项目的<code class="fe pa pb pc oh b">pubspec.yaml</code>文件中，添加。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="8e1c" class="ol ne it oh b gy om on l oo op"><strong class="oh iu">cloud_firestore</strong>: ^0.13.5<br/><strong class="oh iu">firebase_auth</strong>: ^0.16.0<br/><strong class="oh iu">firebase_core</strong>: ^0.4.4+3</span></pre><ul class=""><li id="bc3d" class="lq lr it kd b ke kf ki kj km ls kq lt ku lu ky pd lw lx ly bi translated">转到<a class="ae lj" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">https://firebase.google.com/</a></li><li id="b2ef" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky pd lw lx ly bi translated">点击<strong class="kd iu">开始</strong></li><li id="b8a2" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky pd lw lx ly bi translated">点击<strong class="kd iu"> +添加项目</strong></li><li id="93c5" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky pd lw lx ly bi translated">创建项目(第1步，共3步)→ <br/>输入项目名称→ " <strong class="kd iu"> API调用图例"</strong> → <br/>继续→(第2步，共3步)→继续→ <br/>(第2步，共3步)选择帐户→创建项目。<br/>“您的新项目准备好了”→继续，您现在应该会看到此屏幕。</li></ul><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pe"><img src="../Images/3cb1913638bf09d8db01a0bfbdc46f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2esMXit3F3W9o1A7UTiAmg.png"/></div></div></figure><p id="3084" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以将您的应用程序添加到iOS、Android、Web或Unity。<br/>我们暂时选择安卓。</p><ul class=""><li id="fd8a" class="lq lr it kd b ke kf ki kj km ls kq lt ku lu ky pd lw lx ly bi translated">选择<strong class="kd iu">安卓图标</strong></li><li id="e8b3" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky pd lw lx ly bi translated">进入<em class="li">安卓-&gt;app-&gt;build . gradle</em></li><li id="f4d2" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky pd lw lx ly bi translated">选择<strong class="kd iu"><em class="li">application id</em></strong>(也要确保你的<em class="li"> minSdkVersion </em>至少是21)复制粘贴到<strong class="kd iu">“注册app”</strong>部分。</li></ul><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pf"><img src="../Images/6c22a1af876aa4d793f623782ba38901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnY5Sf48z0d0JZk8lgg1FQ.png"/></div></div></figure><ul class=""><li id="2eaf" class="lq lr it kd b ke kf ki kj km ls kq lt ku lu ky pd lw lx ly bi translated">点击<strong class="kd iu">注册</strong> → <strong class="kd iu">下载</strong>→<em class="li">Google-services . JSON</em>配置文件，并将其复制粘贴到android- &gt; app文件夹中。</li><li id="fa31" class="lq lr it kd b ke lz ki ma km mb kq mc ku md ky pd lw lx ly bi translated">在你的<em class="li">Android-&gt;</em><em class="li">build . gradle</em>文件中添加Firebase SDK <br/>添加这些依赖项</li></ul><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="ad81" class="ol ne it oh b gy om on l oo op">dependencies {<br/> classpath <strong class="oh iu">‘com.android.tools.build:gradle:3.5.0’<br/> </strong>classpath <strong class="oh iu">“org.jetbrains.kotlin:kotlin-gradle-plugin:</strong>$kotlin_version<strong class="oh iu">”<br/> </strong><em class="li">// Add the google services classpath<br/> </em>classpath <strong class="oh iu">‘com.google.gms:google-services:4.3.3’<br/></strong>}</span></pre><p id="ee38" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">把这个加到你的<em class="li">Android-&gt;</em>app-&gt;<em class="li">build . gradle</em>底部</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="44c2" class="ol ne it oh b gy om on l oo op">apply plugin: ‘com.google.gms.google-services’</span></pre><p id="46f4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这在你的依赖关系中</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="cfd3" class="ol ne it oh b gy om on l oo op">implementation <strong class="oh iu">'com.google.firebase:firebase-analytics:17.2.2'</strong></span></pre><p id="9e67" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击下一个的<strong class="kd iu">，您将看到下面的屏幕。👇</strong></p><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pg"><img src="../Images/60b4597c0dc68396534e33bf7aaab3d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6XUH9SIsqD8NeWj7YS05g.png"/></div></div></figure><p id="e478" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在模拟器或你的手机和viola上运行你的Flutter项目！您应该会看到这个屏幕。👇</p><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ph"><img src="../Images/079533eb04e05ddd2f2429b6411f2584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QVuHRJHxVbVLpt4mwfewUA.png"/></div></div></figure><p id="73f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">嘣！！就是这样！！我们的项目现在可以使用我们的Firebase服务了，因为我们已经将它添加到控制台中，并将Firebase SDK添加到我们的项目中。</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pi lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">火焰基地。哇！</figcaption></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="f065" class="nd ne it bd nf ng oq ni nj nk or nm nn no os nq nr ns ot nu nv nw ou ny nz oa bi translated">4.Firebase登录和注册</h1><p id="aaa2" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">进入我们的下一步，实际实施。💪💪💪</p><p id="237c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们现在需要去激活我们想要使用的登录方法。<br/>在本教程中，我们将使用电子邮件和密码进行认证，尽管你<em class="li">可以</em>使用电话、推特、谷歌等。</p><p id="8e99" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">进入你的Firebase控制台，在你的项目面板中进行<em class="li">认证</em>。</p><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pj"><img src="../Images/1e592467a3a0683b726081ce61efea2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pF8Pp7iOMvbeKFwWX-m4aQ.png"/></div></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">消防基地控制台</figcaption></figure><p id="8346" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击<strong class="kd iu">登录方式，</strong>然后启用<strong class="kd iu">邮箱/密码</strong>。</p><figure class="lk ll lm ln gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi pk"><img src="../Images/79e137bb52872a82b23045a4e5daf8d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZ7DFCWrsa7UkaHyiLwwJw.png"/></div></div></figure><p id="537b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">用户界面屏幕+功能</strong></p><p id="ad55" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在进入我们的两个UI屏幕，实现登录和注册的功能。除了一些细微的修改外，它们几乎是完全相同的。</p><p id="97d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注册屏幕</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">注册屏幕</figcaption></figure><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">登录屏幕</figcaption></figure><p id="ef62" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如你在两个界面上看到的，我们初始化了Firebase实例，以备后用。很简单。</p><p id="ed38" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">final _ authFirebase</strong>= firebase auth。<em class="li">实例</em>；</p><p id="4a95" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">功能</strong></p><p id="0ea3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注册:<br/>所以在我们的注册界面中，你会在GestureDetector下的_registerButton()中看到这段代码。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="bf87" class="ol ne it oh b gy om on l oo op"><strong class="oh iu">if </strong>(<strong class="oh iu">_formPageKey</strong>.<strong class="oh iu">currentState</strong>.validate()) {<br/>  setState(() {<br/>    <strong class="oh iu">isLoading </strong>= <strong class="oh iu">true</strong>;<br/>  });<br/>  <strong class="oh iu">try </strong>{<br/>    <strong class="oh iu">final </strong>newUser =<br/>        <strong class="oh iu">await _authFirebase</strong>.createUserWithEmailAndPassword(<br/>            email: <strong class="oh iu">_userEmail</strong>.<strong class="oh iu">text</strong>, password: <strong class="oh iu">_userPassword</strong>.<strong class="oh iu">text</strong>);<br/>    <strong class="oh iu">if </strong>(newUser != <strong class="oh iu">null</strong>) {<br/>      Navigator.<em class="li">push</em>(<br/>        <strong class="oh iu">context</strong>,<br/>        MaterialPageRoute(builder: (context) =&gt; LoginScreen()),<br/>      );<br/>    }<br/>  } <strong class="oh iu">catch </strong>(e) {<br/>    setState(() =&gt; <strong class="oh iu">isLoading </strong>= <strong class="oh iu">false</strong>);<br/>    Commons.<em class="li">showError</em>(<strong class="oh iu">context</strong>, e.message);<br/>    <strong class="oh iu">_pageKey</strong>.<strong class="oh iu">currentState</strong>.showSnackBar(<br/>        SnackBar(content: Text(<strong class="oh iu">"Could not register."</strong>)));<br/>  }<br/>}</span></pre><p id="a440" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们首先验证我们的文本字段，然后我们设置一个状态来告诉我们的页面我们正在加载。然后，我们使用我们的<strong class="kd iu"> _authFirebase实例</strong>用电子邮件和密码注册我们的用户。一旦你从“utils”文件夹(来自原始项目)中获取了所有需要的类，并运行你的应用程序，你就可以通过应用程序在Firebase上创建一个新用户了！👍</p><p id="5ce0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于我们的登录:</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="41c6" class="ol ne it oh b gy om on l oo op"><strong class="oh iu">if </strong>(<strong class="oh iu">_formPageKey</strong>.<strong class="oh iu">currentState</strong>.validate()) {<br/>  setState(() {<br/>    <strong class="oh iu">isLoading </strong>= <strong class="oh iu">true</strong>;<br/>  });<br/>  <strong class="oh iu">try </strong>{<br/>    <strong class="oh iu">final </strong>newUser =<br/>        <strong class="oh iu">await _authFirebase</strong>.signInWithEmailAndPassword(<br/>            email: <strong class="oh iu">_userEmail</strong>.<strong class="oh iu">text</strong>, password: <strong class="oh iu">_userPassword</strong>.<strong class="oh iu">text</strong>);<br/>    print(newUser.toString());<br/>    <strong class="oh iu">if </strong>(newUser != <strong class="oh iu">null</strong>) {<br/>      _login();<br/>    }<br/>  } <strong class="oh iu">catch </strong>(e) {<br/>    Commons.<em class="li">showError</em>(<strong class="oh iu">context</strong>, e.message);<br/>    setState(() =&gt; <strong class="oh iu">isLoading </strong>= <strong class="oh iu">false</strong>);<br/>    <strong class="oh iu">_pageKey</strong>.<strong class="oh iu">currentState</strong>.showSnackBar(<br/>        SnackBar(content: Text(<strong class="oh iu">"Could not login."</strong>)));<br/>  }<br/>}</span></pre><p id="bfdb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">类似的过程，除了现在我们使用Firebase的<em class="li">signingwithemailandpassword</em>方法。</p><p id="1634" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在去导入<strong class="kd iu"><em class="li">initializeproviderdatascreen</em></strong>，这是我们将数据预加载到ChuckyProvider中的启动类。</p><p id="bd27" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这就结束了我们的Firebase认证位！我打赌你没想到会这么简单，是吗？干得好。</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pm lp l"/></div></figure><h1 id="f13b" class="nd ne it bd nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bi translated">5.Chucky模型</h1><p id="0289" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">好吧，现在开始我们的恰奇部分。</p><p id="9492" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">从JSON生成你的模型</strong> : <br/>如前所述，你可以通过<strong class="kd iu"> <em class="li">利用这个插件</em> </strong>为Android Studio <a class="ae lj" href="https://plugins.jetbrains.com/plugin/11460-json2dart" rel="noopener ugc nofollow" target="_blank"> <em class="li">此处</em> </a> <em class="li">或</em> <a class="ae lj" href="https://github.com/typ0520/JsonToDartClass" rel="noopener ugc nofollow" target="_blank"> <em class="li">此处</em> </a> <em class="li"> </em> <strong class="kd iu"> <em class="li">(首选项—插件)</em> </strong>。从您的端点用大块的JSON创建您的所有模型，而无需在几秒钟内编写一行代码。</p><p id="8311" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们只会到达两个终点。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="9e2b" class="ol ne it oh b gy om on l oo op"><a class="ae lj" href="https://api.chucknorris.io/jokes/categories" rel="noopener ugc nofollow" target="_blank">https://api.chucknorris.io/jokes/categories</a><br/>and<br/><a class="ae lj" href="https://api.chucknorris.io/jokes/random?category={category}" rel="noopener ugc nofollow" target="_blank">https://api.chucknorris.io/jokes/random?category={category}</a></span></pre><p id="b00d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一旦安装了插件，通过右键单击您的“模型”包-&gt;<br/>New-&gt;Dart classes from JSON-&gt;键入一个类名并点击generate，从有效负载端点复制并粘贴JSON数据。对这两个类都这样做，不要忘记添加非空检查/默认值，这样你将得到如下所示的两个类。</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">卡盘类别</figcaption></figure><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">卡盘响应</figcaption></figure><h1 id="2819" class="nd ne it bd nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bi translated">6.Chucky提供商</h1><p id="32cc" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">在您的main.dart文件中，将它添加到your _MyAppState: <br/>这是在您的应用程序中注册您的提供者。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="f21c" class="ol ne it oh b gy om on l oo op">@override<br/>Widget build(BuildContext context) {<br/>  <strong class="oh iu">return </strong>MultiProvider(<br/>      providers: [<br/>        ChangeNotifierProvider(create: (context) =&gt; ChuckyProvider()),<br/>        ChangeNotifierProvider(create: (context) =&gt; ChuckyJokeProvider()),<br/>      ],<br/>      child: MaterialApp(<br/>          title: <strong class="oh iu">'Api Calls like a Legend with Provider'</strong>,<br/>          theme: chuckyTheme,<br/>          home: SplashScreen()));<br/>}</span></pre><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">Chucky提供商</figcaption></figure><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">Chucky笑话提供商</figcaption></figure><p id="cc15" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们这里的提供者本质上做一件事，一个API调用，得到一个响应，然后将响应数据弹出到相关的保存变量中。一旦从API获取了数据，就可以随时调用这些函数。</p><p id="8f5d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您的提供商可能有许多功能。比如说，在我们的ChuckyProvider中，我们想要更新chuckCategories。</p><p id="89ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以有这样一个函数。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="5dd2" class="ol ne it oh b gy om on l oo op"><strong class="oh iu">void </strong>updateData(ChuckCategories data) {<br/>  <strong class="oh iu">chuckCategories </strong>= data;<br/>}</span></pre><h1 id="1c36" class="nd ne it bd nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bi translated">7.Chucky提供程序预加载程序(InitializeProviderDataScreen)</h1><p id="79b8" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">我们的<strong class="kd iu"> InitializeDataScreen </strong>调用ChuckyProvider并获取初始的chucky类别数据。如果你想为你的应用批量下载数据，你可以使用多个函数来调用和加载多个提供商。</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div></figure><h1 id="3c3d" class="nd ne it bd nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bi translated">8.Chucky用户界面屏幕</h1><p id="49d9" class="pw-post-body-paragraph kb kc it kd b ke ob kg kh ki oc kk kl km od ko kp kq oe ks kt ku of kw kx ky im bi translated">因此，在我们的<em class="li">chucky _ categories _ view . dart</em><br/>中，我希望您在这里记下我们的初始状态。好了，我们现在要做的就是(这是理解提供者用法的基本<strong class="kd iu"/>)进入我们的ChuckyProvider，获取我们的chuckCategories，然后将它赋给我们类中的chuckCategories变量。重要的是要注意，当我们加载我们的<strong class="kd iu"> <em class="li">初始化ProviderDataScreen </em> </strong> ☝️.时，我们已经调用了端点API来获取Chuck类别因此，chuckCategories已经从chuck provider获得了所有数据，现在它的美妙之处在于，我们可以在任何时候通过调用这一行代码—<br/><em class="li">provider . of&lt;chuck provider&gt;(</em><strong class="kd iu"><em class="li">context</em></strong><em class="li">，听:</em> <strong class="kd iu"> <em class="li">，从应用程序中的<strong class="kd iu">任何地方</strong>访问<strong class="kd iu">已经加载的chuck categories数据</strong></em> <strong class="kd iu"> <em class="li">恰克类别。<br/> </em> </strong> <em class="li">不需要StreamBuilders，不需要FutureBuilders(本例)。</em></strong></p><p id="9cc6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这就是使用提供商的好处和本质。</p><pre class="lk ll lm ln gt og oh oi oj aw ok bi"><span id="4255" class="ol ne it oh b gy om on l oo op">@override<br/><strong class="oh iu">void </strong>initState() {<br/>  <strong class="oh iu">chuckCategories </strong>=<br/>      Provider.<em class="li">of</em>&lt;ChuckyProvider&gt;(<strong class="oh iu">context</strong>, listen: <strong class="oh iu">false</strong>).<strong class="oh iu">chuckCategories</strong>;<br/>  <strong class="oh iu">super</strong>.initState();<br/>}</span></pre><p id="54ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们使用来自chuckCategories的数据来构建我们的屏幕。</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">卡盘类别</figcaption></figure><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pl lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">查克笑话</figcaption></figure><p id="7586" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于我们的Chucky笑话屏幕，我们将使用FutureBuilder从我们的ChuckyJokeProvider获取数据，因为我们还没有初始化来自我们的<strong class="kd iu"><em class="li">IntializeProviderDataScreen</em></strong>的数据，因为我们需要用户从选择的类别中输入。</p><p id="8b5f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里的美妙之处在于，一旦提供商加载了数据，我们就可以在应用程序的任何地方访问这些数据。</p><p id="cea6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您应该会得到这样的结果:</p><figure class="lk ll lm ln gt ju"><div class="bz fp l di"><div class="pn lp l"/></div><figcaption class="ow ox gj gh gi oy oz bd b be z dk translated">传奇的Chucky提供商应用程序</figcaption></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="a6e5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">女士们先生们，本章到此结束。我希望你能从这篇文章中更深入地了解如何在你的应用中更好地使用提供商。</p><p id="2c03" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">快乐的编码，最重要的是快乐的飞舞。:)</p><p id="a76c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完成的项目可以在这里找到:</p><div class="ml mm gp gr mn mo"><a href="https://github.com/rgodlontonshaw/apicallslegendprovider" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">rgodlontonshaw/apicallslegendprovider</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">演示应用程序展示了Flutter API调用使用提供者和Firebase认证…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc jz mo"/></div></div></a></div><p id="228b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Ryan Godlonton-Shaw是一名全职移动工程师。</p></div></div>    
</body>
</html>