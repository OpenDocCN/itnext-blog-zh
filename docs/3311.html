<html>
<head>
<title>Build a Server-less Application using AWS Lambda Functions with Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Lambda函数和Netlify构建一个无服务器应用程序</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-server-less-application-using-aws-lambda-functions-with-netlify-525b8326ce77?source=collection_archive---------6-----------------------#2019-11-19">https://itnext.io/build-a-server-less-application-using-aws-lambda-functions-with-netlify-525b8326ce77?source=collection_archive---------6-----------------------#2019-11-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/48fc8ec4776e77fc4685f95aa43e891d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScW6Wci1iEsOBo4YSnbKug.png"/></div></div></figure><p id="f6d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">能够在无需管理服务器的情况下运行服务器端任务，让您可以更少地担心基础架构和可伸缩性，更多地关注应用程序本身。但是没有服务器你怎么运行服务器端的任务呢？嗯，有一个服务器运行这些任务。但是你不管理那个服务器！像<strong class="kd iu"> AWS </strong>、<strong class="kd iu"> GCP </strong>、<strong class="kd iu"> Azure </strong>等云提供商。动态地负责服务器的分配和供应。此外，<strong class="kd iu">功能即服务</strong> ( <strong class="kd iu"> FaaS </strong>)是一个允许开发者通过功能利用无服务器计算的概念。有趣的是，服务器端代码运行在使用<strong class="kd iu">事件</strong>触发的容器中。基本上，您所要做的就是在云上部署一个功能，它可以根据您的应用程序/客户端的请求独立运行，而不必维护一个完整的<strong class="kd iu"> REST </strong>服务器并担心可伸缩性。这些函数通常被称为<strong class="kd iu">λ函数</strong>。然而，需要注意的是，无服务器架构的一切都是无状态的。</p><h1 id="57a5" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为什么是Netlify？</h1><p id="0d0f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">许多<strong class="kd iu"> FaaS </strong>像<strong class="kd iu"> AWS Lambda </strong>设置起来非常复杂，非常适合大规模应用。<strong class="kd iu"> Netlify </strong>使用由<strong class="kd iu"> AWS </strong>驱动的<strong class="kd iu"> Lambda函数</strong>，但是为我们简化并自动化了大部分过程。Netlify提供的设置Lambda函数的便利为我们打开了一个可能性的世界。</p><h1 id="8175" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">概观</h1><p id="4a70" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们将构建一个<strong class="kd iu">无服务器</strong> web应用程序，允许用户使用<strong class="kd iu"/><a class="ae mc" href="https://github.com/sendgrid/sendgrid-nodejs/tree/master/packages/mail" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">send grid API</strong></a>发送自定义电子邮件。将我们的<strong class="kd iu"> API密钥</strong>暴露给客户端是一个安全问题。然而，我们将使用Lambda函数向<a class="ae mc" href="https://github.com/sendgrid/sendgrid-nodejs/tree/master/packages/mail" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Sendgrid API </strong> </a>发出发送电子邮件的请求，而不是必须设置和管理一个完整的后端服务器来对客户端隐藏应用程序逻辑。我们将使用<strong class="kd iu">普通Javascript </strong>和<strong class="kd iu"> HTML </strong>和<strong class="kd iu"> CSS </strong>来设置我们的客户端，并使用<strong class="kd iu"> NodeJS </strong>来设置我们的Lambda函数。在本地测试了我们的Lambda函数之后，我们将把它们部署到Netlify上的客户端。我们还将使用免费的SSL证书为我们的无服务器应用程序设置一个自定义域。</p><h1 id="d47c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建Sendgrid帐户并创建API密钥</h1><p id="48e1" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">请注意，如果您已经有了一个Sendgrid帐户和一个API密匙，请随意跳到Git设置。</p><p id="1a24" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以在这里 创建您的免费Sendgrid帐户<a class="ae mc" href="https://sendgrid.com" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">。</strong></a></p><h2 id="24a5" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">创建API密钥</h2><p id="77f7" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">成功登录后，进入侧边栏设置选项下的API Keys部分。选择右上角的<strong class="kd iu">创建API密钥</strong>选项。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/3f139d69719626d00eef3de18b394109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aea3sZGyKyi_ESohjTQl4Q.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">创建发送网格API密钥</figcaption></figure><p id="3809" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">给你的API密匙一个名字，并允许完全访问。然后选择<strong class="kd iu">创建&amp;视图</strong>。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/2c3609caa25fa8fb1a039466930bdfe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O2MGSmMKtypbJl0WX2JfZQ.png"/></div></div></figure><p id="85d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后将显示您的API密钥。不要忘记拷贝并保存在某个地方。我们将在稍后配置lambda函数来发送电子邮件时使用它。</p><h1 id="b6f5" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在Github上创建本地Git回购和远程Git回购</h1><p id="7b68" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在<strong class="kd iu"> Github </strong>上创建了存储库之后，在您的终端上的一个单独的文件夹中运行以下命令，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="54c6" class="md la it mz b gy nd ne l nf ng">git init<br/>touch README.md <br/>touch .gitignore<br/>echo node_modules &gt; .gitignore<br/>git add README.md .gitignore<br/>git commit -m "first commit"<br/>git remote add origin YOUR_GITHUB_REPO_HTTPS_URL<br/>git push -u origin master</span></pre><p id="b0bc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们创建一个本地repo，创建一个<strong class="kd iu"> README.md </strong>文件，创建一个<strong class="kd iu">。gitignore </strong>文件忽略<strong class="kd iu">节点模块</strong>文件夹，我们将在设置好<strong class="kd iu"> NodeJS </strong>项目后创建该文件夹，添加并提交我们的更改，然后推送到Github上的远程存储库。</p><h1 id="7880" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">NodeJS设置</h1><p id="5897" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在同一个文件夹中，运行<strong class="kd iu"> npm init </strong>来设置你的NodeJS项目。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/446e6f45b36ec987ff3a56fd4cefa789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HmMDncB9s2-5JoyAf4qtEw.png"/></div></div></figure><h2 id="31ab" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">项目相关性</h2><p id="51c9" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们将使用一组与<strong class="kd iu"> NodeJS </strong>的依赖关系来配置我们的Lambda函数。从您的目录在终端中运行以下命令，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="9147" class="md la it mz b gy nd ne l nf ng">npm i netlify-lambda @sendgrid/mail</span></pre><p id="3a80" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">netlify-lambda是一个命令行工具，它将帮助我们构建和服务我们的lambda函数。你可以在这里 查看它的文档<a class="ae mc" href="https://github.com/netlify/netlify-lambda" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">。而且，<strong class="kd iu"> @sendgrid/mail </strong>包将允许我们使用<a class="ae mc" href="https://github.com/sendgrid/sendgrid-nodejs/tree/master/packages/mail" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Sendgrid API </strong> </a>发送邮件。</strong></a></p><h2 id="d6db" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">在package.json中设置服务和构建脚本</h2><p id="f40f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">用以下脚本替换<strong class="kd iu"> package.json </strong>中的现有脚本，这样我们就可以<strong class="kd iu">服务</strong>和<strong class="kd iu">构建</strong>我们的lambda函数，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="0fec" class="md la it mz b gy nd ne l nf ng">"lambda-serve": "netlify-lambda serve functions"<br/>"lambda-build": "netlify-lambda build functions"</span></pre><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">package.json</figcaption></figure><p id="b4d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意'<strong class="kd iu"> functions' </strong>是我们根文件夹中包含lambda函数的文件夹的名称。</p><h1 id="a8a0" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">设置Lambda函数</h1><p id="e4a8" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">从终端在项目的根目录下运行以下命令，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="3112" class="md la it mz b gy nd ne l nf ng">mkdir functions</span></pre><p id="d3d3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如前所述，<strong class="kd iu"> functions </strong>是包含lambda函数的文件夹，文件夹中的每个文件都包含独立无状态lambda函数的代码。</p><h2 id="358f" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">设置<strong class="ak"> netlify.toml </strong>文件</h2><p id="0a95" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们还需要项目根目录中的<strong class="kd iu"> netlify.toml </strong>文件。</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">netlify.toml</figcaption></figure><p id="d15f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意，这是根据<a class="ae mc" href="https://docs.netlify.com/functions/build-with-javascript/#format" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Netlify文档</strong> </a>完成的。<strong class="kd iu"> functions </strong>变量值被设置为构建文件夹的名称，在我们的例子中命名为<strong class="kd iu"> lambda </strong>。</p><h2 id="9598" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">Netlify Lambda函数如何工作的快速概述</h2><p id="4f22" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">下面是每个函数的格式，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="b696" class="md la it mz b gy nd ne l nf ng">exports.handler = function(event, context, callback) {<br/>    // your server-side code....<br/>    <br/>    //return successful (no error) response with body "Hello, World"<br/>    callback(null, {<br/>    statusCode: 200,<br/>    body: "Hello, World"<br/>    });<br/>}</span></pre><p id="1af6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">每个保存lambda函数的JS文件必须导出一个<strong class="kd iu">处理程序</strong>，如上所述。调用无服务器功能时，Netlify提供<strong class="kd iu">事件</strong>和<strong class="kd iu">上下文</strong>参数。然而，我们提供可选的<strong class="kd iu">回调</strong>参数。</p><p id="9fb7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当调用无服务器端点时，函数接收到<strong class="kd iu">事件</strong>对象。调用时关于应用程序上下文的信息，例如包含用户数据的<strong class="kd iu"> JSON Web令牌(JWT) </strong>包含在<strong class="kd iu">上下文</strong>参数中。</p><p id="1156" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">回调</strong>用于返回对触发事件的响应，可以是错误或成功的响应对象。回调包含两个参数。第一个参数包含错误对象(如果有的话)，否则为null，第二个参数包含响应对象。</p><p id="c4ea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">想了解更多，推荐你看一下<a class="ae mc" href="https://docs.netlify.com/functions/build-with-javascript/#format" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Netlify文档</strong> </a>。</p><h2 id="f237" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">设置发送电子邮件的Lambda函数</h2><p id="3336" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们将在functions文件夹中创建一个文件<strong class="kd iu">sendmeil . js</strong>，该文件配置我们的lambda函数，当客户端触发时，该函数将通过与<a class="ae mc" href="https://github.com/sendgrid/sendgrid-nodejs/tree/master/packages/mail" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">send grid API</strong></a><strong class="kd iu"/>通信来发送电子邮件。</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="32f2" class="md la it mz b gy nd ne l nf ng">touch ./functions/sendEmail.js</span></pre><p id="80b4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们将使用相同的结构来定义我们的lambda函数，如上面概述中所解释的。由于我们将使用用户在事件正文中提供的电子邮件地址和文本发送电子邮件，我们知道这将是一个<strong class="kd iu"> POST </strong>请求。</p><h2 id="881e" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">仅服务于POST请求的错误检查</h2><p id="8141" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">首先，我们需要添加一些错误检查来确保我们的函数只服务于带有<strong class="kd iu"> POST </strong>请求<strong class="kd iu">的事件。下面是我们函数的样子，</strong></p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="f958" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以通过在终端上运行项目目录中的以下命令来测试这个lambda函数，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="08e4" class="md la it mz b gy nd ne l nf ng">npm run lambda-serve</span></pre><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/819cedc1a5c34df3e4f336c62c7b3d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F96J0cN18m4HCaGdhGxVZQ.png"/></div></div></figure><p id="aa71" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这将在项目的根目录下创建一个名为<strong class="kd iu"> lambda </strong>的构建文件夹，其中将包含我们的lambda函数的构建版本。同样，这个命令允许我们在<strong class="kd iu">端口9000上提供我们的lambda函数。</strong>因此，如果我们向<strong class="kd iu">localhost:9000/send email</strong>发出一个<strong class="kd iu"> POST </strong>请求，我们将得到一个成功的响应。此外，由于我们增加了错误检查，我们的功能将只由一个<strong class="kd iu"> POST </strong>请求触发。您可以使用<a class="ae mc" href="https://www.getpostman.com" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> PostMan </strong> </a>测试功能如下:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/0cab654b1f25d45854f03145a621789f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rx4K3sZp4Dkd6jcRPH-63Q.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">成功的发布请求</figcaption></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/014c437bf60d374989f109e003502939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TWkY-JlB7517yqiVP8nU5Q.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">不成功的获取请求</figcaption></figure><h2 id="7bc7" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">将Sendgrid API与Lambda函数集成</h2><p id="afca" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们现在将导入之前安装的sendgrid npm包。我们还将配置我们的函数来接受具有以下主体的事件，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="fca9" class="md la it mz b gy nd ne l nf ng">{<br/> "to": TO_EMAIL_ADDRESS,<br/> "subject": SUBJECT_OF_EMAIL,<br/> "message": EMAIL_BODY<br/>}</span></pre><p id="408a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意</strong>错误检查和输入验证超出了本教程的范围，所以我们假设事件总是由有效的主体输入触发。</p><p id="078d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">还要注意的是，为了这个教程，我们将使用<strong class="kd iu">test@example.com</strong>作为<strong class="kd iu">发件人</strong>的电子邮件地址。我们在lambda函数中创建的email对象将包含<strong class="kd iu">到</strong>的电子邮件地址、<strong class="kd iu">发件人</strong>的电子邮件地址、<strong class="kd iu">主题</strong>和<strong class="kd iu">消息。</strong>不要忘记使用<strong class="kd iu"> JSON.parse() </strong>解析来自<strong class="kd iu">事件主体</strong>的传入数据，并使用<strong class="kd iu"> JSON.stringify()将响应中的JS对象转换为JSON字符串。</strong></p><p id="2b22" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，我们需要将下面的头添加到我们的函数回调调用中，以确保当我们与客户一起测试lambda函数时，不会遇到与<strong class="kd iu"> CORS </strong>相关的问题。</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="5a47" class="md la it mz b gy nd ne l nf ng">//to enable cors on local development when we test our client</span><span id="13c4" class="md la it mz b gy nl ne l nf ng">headers: {</span><span id="f9cd" class="md la it mz b gy nl ne l nf ng">   "Access-Control-Allow-Origin": "*",</span><span id="9fee" class="md la it mz b gy nl ne l nf ng">   "Access-Control-Allow-Headers":</span><span id="69f0" class="md la it mz b gy nl ne l nf ng">   "Origin, X-Requested-With, Content-Type, Accept"</span><span id="0cbb" class="md la it mz b gy nl ne l nf ng">}</span></pre><p id="d824" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是我们的lambda函数的样子，</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="ce61" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">邮递员测试</h2><p id="5dac" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">如前所述，我们将发送一个POST请求到<strong class="kd iu">localhost:9000/send email</strong></p><p id="0eae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，现在我们将向请求传递一个主体，当函数被触发时，事件将包含该主体。我们将从<strong class="kd iu"> PostMan </strong>向我们的请求传递<strong class="kd iu">原始JSON数据</strong>，如下所示:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/c8086a5a04320aa23f003474769163aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uNdQekDRbfw1XAYbiXzJeQ.png"/></div></div></figure><p id="db59" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们收到以下关于成功的JSON响应，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="381e" class="md la it mz b gy nd ne l nf ng">{"result": "success"}</span></pre><p id="74a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您的输入有效，您应该会在收件箱中看到带有正确发件人电子邮件地址、主题和邮件正文的电子邮件。</p><h1 id="02ac" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">客户端</h1><p id="342b" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">如前所述，我们将使用普通Javascript构建我们的客户端。此外，我们将使用<a class="ae mc" href="https://getbootstrap.com/docs/4.0/getting-started/introduction/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">Twitter Bootstrap 4</strong></a>来设计我们的标记。</p><h2 id="c096" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">设置HTML文件</h2><p id="ba64" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在你的项目根目录下创建一个HTML文件，命名为<strong class="kd iu">index.html</strong>。</p><p id="ec94" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不要忘记在你的HTML文件头中添加引导4 <strong class="kd iu"> CDN </strong>。</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="8c1b" class="md la it mz b gy nd ne l nf ng">&lt;link</span><span id="71df" class="md la it mz b gy nl ne l nf ng">rel="stylesheet"</span><span id="2e62" class="md la it mz b gy nl ne l nf ng">href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"</span><span id="7f03" class="md la it mz b gy nl ne l nf ng">integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"</span><span id="4188" class="md la it mz b gy nl ne l nf ng">crossorigin="anonymous"</span><span id="283c" class="md la it mz b gy nl ne l nf ng">/&gt;</span></pre><p id="7891" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面的完整标记对您来说应该非常直观。主体内部的所有东西都被包装在一个引导容器组件中。在容器内部有两行，每一行有一个全尺寸12宽度的列。第一列包含一个<strong class="kd iu"> h1标签</strong>，第二列包含表单。我还添加了几个引导类来对表单进行一些样式设计。你可以随意设计自己的风格。在表单之后是一个<strong class="kd iu"> p </strong> <strong class="kd iu">标签</strong>，它将包含我们的lambda函数在提交时返回的表单提交反馈。一些元素已经被分配了一个<strong class="kd iu"> id </strong>，这在JS文件中会很有用。不要忘记在主体的末尾添加一个<strong class="kd iu">脚本标签</strong>来链接Javascript和标记。</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="effe" class="md la it mz b gy nd ne l nf ng">&lt;script src=”./js/main.js”&gt;&lt;/script&gt;</span></pre><p id="48c6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最终的<strong class="kd iu">index.htm</strong>l文件如下:</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="74ed" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">设置Javascript文件</h2><p id="217b" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在根目录下新建一个文件夹，命名为<strong class="kd iu"> js </strong>。另外，在<strong class="kd iu"> js </strong>文件夹中创建一个新的Javascript文件，并将其命名为<strong class="kd iu"> main.js. </strong></p><p id="75d1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">JS文件看起来也应该非常简单。</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="60b3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们的JS文件包含了一个URL常量，赋值为<a class="ae mc" href="http://localhost:9000/sendEmail." rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">http://localhost:9000/sendmail</strong></a><strong class="kd iu">。注意</strong>在Netlify上部署我们的无服务器应用程序之前，我们将更改这个URL。</p><p id="213d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们还有一个<strong class="kd iu">异步</strong>函数<strong class="kd iu"> sendEmail(url，data) </strong>，它使用<strong class="kd iu"> fetch API </strong>向给定的url发出<strong class="kd iu"> POST </strong>请求，并返回一个<strong class="kd iu">承诺。</strong></p><p id="d9f8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，我们还选择表单元素和其他相关元素来提交数据并显示相关的服务器端反馈。</p><h2 id="c2ab" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">测试客户端</h2><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/34adf63971227e60b1dfc77b81c05414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LQefWYRlN9qEn5YJRMFz9g.png"/></div></div></figure><p id="7a22" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在用各种有效的输入测试了客户端之后，我确信我们的客户端和lambda函数正在工作，电子邮件正在发送。部署时间到了！</p><h1 id="176d" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在Netlify上部署无服务器应用程序</h1><h2 id="9904" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">创建网络帐户</h2><p id="1c32" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">如果你还没有这样做，你可以在这里 创建一个免费账户<a class="ae mc" href="https://www.netlify.com" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">。请注意，我们将使用Github存储库在Netlify上进行部署。</strong></a></p><h2 id="ea3e" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">将函数文件夹添加到。gitignore</h2><p id="1a6f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">由于我们将只部署名为<strong class="kd iu"> lambda、</strong>的构建文件夹，我们还可以将<strong class="kd iu"> functions </strong>文件夹添加到<strong class="kd iu">中。gitignore </strong>文件。这就是我们的<strong class="kd iu">。gitignore </strong>文件应该是这样的，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="dea9" class="md la it mz b gy nd ne l nf ng">node_modules</span><span id="48ba" class="md la it mz b gy nl ne l nf ng">functions</span></pre><h2 id="8c78" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">从函数文件夹中删除API键</h2><p id="ee01" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们希望能够从环境变量中访问我们的API键，我们将从Netlify仪表板中配置这些环境变量。将设置API键的那一行更改为:</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="2eef" class="md la it mz b gy nd ne l nf ng">sgMail.setApiKey(process.env.API_KEY);</span></pre><h2 id="edc4" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">更改客户端URL/端点</h2><p id="916b" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在<strong class="kd iu"> main.js、</strong>文件中，我们使用<a class="ae mc" href="http://localhost:9000/sendEmail" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">http://localhost:9000/sendmail</strong></a><strong class="kd iu"/>作为我们的URL。这只是为了在本地测试我们的lambda函数。在部署之前，我们必须将其更改为以下内容，</p><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="127c" class="md la it mz b gy nd ne l nf ng">/.netlify/functions/sendEmail</span></pre><h2 id="8e0b" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">推送至Github</h2><pre class="mq mr ms mt gt my mz na nb aw nc bi"><span id="548a" class="md la it mz b gy nd ne l nf ng">git add .</span><span id="9d07" class="md la it mz b gy nl ne l nf ng">git commit -m "Ready to Deploy"</span><span id="2bac" class="md la it mz b gy nl ne l nf ng">git push -u origin master</span></pre><h2 id="4339" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">网络生活仪表板</h2><p id="4136" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">从您的仪表板中选择<strong class="kd iu">来自Git的新站点</strong>选项。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/6b8a43496b955b4d1e06e16b5b6e6aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jitk4Kx_cOtbaYmwnI9Mpw.png"/></div></div></figure><p id="9851" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择<strong class="kd iu"> Github </strong>作为您的Git提供者。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/f2d2b64409bbe20d5868703f31ac1975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OBr7pTRzG9Mu2k2kyqP6vQ.png"/></div></div></figure><p id="60fe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">搜索并选择您的存储库。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/40d126112fa47f42de9a698eadace91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67-PSBN9k0g7IVvSdKY0eg.png"/></div></div></figure><p id="b99e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要部署的分支:<strong class="kd iu">主</strong></p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/f3e0de3b875f197e4f2e8e8b664ecdf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Buv43LXN69TmKnbnKTIO7g.png"/></div></div></figure><p id="9d50" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在高级构建设置下，添加您的Sendgrid API密钥并选择<strong class="kd iu">部署站点。</strong></p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/e37c3b1a495cec4c649cf66443fd66a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h50rDvMCWQS-iVsP-1AuUw.png"/></div></div></figure><p id="5124" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">部署后，Netlify还将在<strong class="kd iu">netlify.com</strong>下为我们的应用程序生成一个子域。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/c2a669c6ef83c681626a6449e4c7744b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*khtmP1mpknAGrs_5OIpX_g.png"/></div></div></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/2f6f363d93a9a0e7d2d362ba147c2aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2xOsMfRphnBSfXMUz91IA.png"/></div></div></figure><p id="c98c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Netlify将管理运行我们的lambda函数的服务器，我们不必担心可伸缩性。哦耶<strong class="kd iu">！</strong></p><h1 id="2ab5" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">自定义域和SSL</h1><p id="66d8" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我个人更喜欢用<a class="ae mc" href="https://www.shareasale.com/r.cfm?u=2198460&amp;m=46483&amp;b=518798" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">作为我的域名注册商。您还可以使用此<a class="ae mc" href="https://shareasale.com/r.cfm?b=1407373&amp;u=2198460&amp;m=46483&amp;urllink=&amp;afftrack=" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">链接</strong> </a>获得<a class="ae mc" href="https://shareasale.com/r.cfm?b=1407373&amp;u=2198460&amp;m=46483&amp;urllink=&amp;afftrack=" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">独家优惠:顶级域名最高可享受80%的折扣，同时享受免费Whois隐私</strong> </a> <strong class="kd iu">！</strong></strong></a></p><p id="5891" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，您可以使用任何注册服务商来遵循本指南。</p><h2 id="4c83" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">向Netlify应用程序添加自定义域</h2><p id="d9c0" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">从您部署的应用程序的仪表板中选择<strong class="kd iu">域设置</strong>。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/2cdb608e6b84edf23d0f12ba6c6b8f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*whI6l80oZ-c1IEGjkBqavA.png"/></div></div></figure><p id="6f1f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择<strong class="kd iu">添加自定义域。</strong></p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/6992048c556fa13e109b9bcdb7bcb8e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxdQhQv3wZitWRUMXvoHpQ.png"/></div></div></figure><p id="80d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">键入您的自定义域名并选择<strong class="kd iu">验证。</strong></p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/1b47e72cb3989f9b0723f856ca41acad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_qmKh9yD-cdbWfJOydL6Q.png"/></div></div></figure><p id="c9ee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择<strong class="kd iu">检查DNS配置。</strong></p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/213b5d75e57a110a49f43e90d09ef40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*158NWbs1onAuiCfaeoL3pg.png"/></div></div></figure><p id="d1fe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了验证我们的DNS，我们需要向我们的域名DNS添加记录。</p><ul class=""><li id="eb1e" class="nm nn it kd b ke kf ki kj km no kq np ku nq ky nr ns nt nu bi translated">CName记录:将<strong class="kd iu"> www </strong>指向<strong class="kd iu">distracted-shaw-9335f7.netlify.com。</strong></li><li id="2cc4" class="nm nn it kd b ke nv ki nw km nx kq ny ku nz ky nr ns nt nu bi translated">一条记录:将<strong class="kd iu"> @ </strong>指向<strong class="kd iu">104.198.14.52</strong></li></ul><p id="0fa4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请注意，<strong class="kd iu"> www </strong>和<strong class="kd iu"> @ </strong>(根域)指向的值可能因您的域而异。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/04c428070c21912389e1f87250858365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qv1Nr8xp3MxMLAfJ65NlDw.png"/></div></div></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/79cbcd7e58f53e63cea9d29415fa5e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qs1YAn7EsFb31_udmLUpdw.png"/></div></div></figure><h2 id="d42c" class="md la it bd lb me mf dn lf mg mh dp lj km mi mj ln kq mk ml lr ku mm mn lv mo bi translated">配置域注册商</h2><p id="5399" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">如前所述，我个人更喜欢使用<a class="ae mc" href="https://www.shareasale.com/r.cfm?u=2198460&amp;m=46483&amp;b=518798" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> NameCheap </strong> </a>作为我的域名注册商。如果你正在使用Namecheap，你可以使用这个<a class="ae mc" href="https://www.shareasale.com/u.cfm?d=491929&amp;m=46483&amp;u=2198460" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">链接</strong> </a>来访问他们的<a class="ae mc" href="https://www.shareasale.com/u.cfm?d=491929&amp;m=46483&amp;u=2198460" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">最新促销优惠</strong> </a>。但是，您可以使用任何注册服务商来遵循本指南。</p><p id="5fb2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们需要将<strong class="kd iu"> CName </strong>和<strong class="kd iu"> A </strong>记录<strong class="kd iu"> </strong>添加到我们的域中。</p><p id="4073" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在您的<a class="ae mc" href="https://www.shareasale.com/r.cfm?u=2198460&amp;m=46483&amp;b=518798" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">name priest</strong></a><strong class="kd iu"/>仪表盘上，为相应的域选择<strong class="kd iu">管理</strong>。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/43722ad4d410ae2b0c8ffdcda0addf95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SB-tEpTi7NygoRsuAvtbxA.png"/></div></div></figure><p id="e939" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择<strong class="kd iu">高级DNS。</strong></p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/67810f641b93fdc67f074cfa85ae4fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTQZ5w2cAHL1FPnV1BIpbg.png"/></div></div></figure><p id="5541" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">添加您的<strong class="kd iu"> CName </strong>和<strong class="kd iu"> A </strong>记录<strong class="kd iu">和</strong>并保存更改。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/b93affcbcd1a5024225214c2a0e2ac5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X72IpacRLtBS24C94-7_uw.png"/></div></div></figure><p id="4064" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请注意，传播更改可能需要48小时。然而，这通常需要5-10分钟。</p><p id="387b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，您应该能够在您的Netlify的域设置中看到DNS配置已经过验证，并且应该能够使用您的自定义域名访问您的应用程序！</p><p id="b75c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，我们仍然需要配置Netlify提供的免费SSL证书。</p><p id="7bfe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在域设置页面上，向下滚动并选择<strong class="kd iu"> HTTPS </strong>部分下的<strong class="kd iu">验证DNS配置</strong>。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/dd2ffb21912756ee0f3f1c6c7a89ebb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VnhFJ2ynFSExK6QshG8pVw.png"/></div></div></figure><h1 id="f92b" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论</h1><p id="f763" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">值得注意的是，我们在本教程中仅仅触及了皮毛，还有更多<strong class="kd iu">无服务器架构</strong>可以提供！这是<strong class="kd iu"> </strong> <a class="ae mc" href="https://github.com/abdamin/netlify_serverless_aws_lambda_tutorial" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">链接</strong> </a> <strong class="kd iu"> </strong>到<strong class="kd iu"> Github库</strong>的链接，带有我们应用的完整代码。</p><p id="a0a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您有任何问题，请随时发表评论。此外，如果这帮助了你，请喜欢并与他人分享。我定期发表与web开发相关的文章。考虑<a class="ae mc" href="https://abdullahsumsum.com/subscribe" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">在此输入您的电子邮件</strong> </a>以了解与web开发相关的最新文章和教程。你也可以找到更多关于我在abdullahsumsum.com做的事情</p></div></div>    
</body>
</html>