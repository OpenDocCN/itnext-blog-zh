<html>
<head>
<title>React Context and Hooks: Pass data and update it easily</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Context和Hooks:轻松传递数据和更新数据</h1>
<blockquote>原文：<a href="https://itnext.io/react-context-and-hooks-pass-data-and-update-it-easily-d2f659cceab?source=collection_archive---------0-----------------------#2022-03-28">https://itnext.io/react-context-and-hooks-pass-data-and-update-it-easily-d2f659cceab?source=collection_archive---------0-----------------------#2022-03-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/26a5ef91bcd8b008c3dab3b529efdccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sgb_s4UICBLvwG3dae83eg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">封面图像</figcaption></figure><p id="424b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/react-context-and-hooks-an-excellent-way-to-pass-data-26c3f48b9bf5">之前的文章</a>中，我们研究了什么是上下文以及如何传递值。在本文中，我们将研究如何从子组件中更新上下文值。对于我们的主题示例，这意味着单击按钮将会在亮和暗之间切换主题。</p><h1 id="22e6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">更新上下文值</h1><p id="e86f" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">在上一篇文章中，我们通过提供者组件直接传递了主题。尽管该值被传递给了<code class="fe me mf mg mh b">ThemeButton.js</code>和<code class="fe me mf mg mh b">ThemeWindow.js</code>组件，但是我们不能更新该值。</p><p id="9c24" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了在两种主题类型之间切换，我们还需要传递一个函数。这个功能将允许我们在两个主题之间切换。</p><p id="09cf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以我们需要通过Provider组件将这个函数和黑暗主题一起传递。为此，我们可以创建一个包含主题和功能的有状态对象。这种方式React可以跟踪主题，并在更新时执行必要的重新渲染。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/1e57d6ef02b1f9f09ccca8f95ee6a684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FHqFaFdV7TWRCye_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建有状态对象</figcaption></figure><p id="52e5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这很简单。包含主题类型和函数的有状态对象通过提供者组件传递。虽然<code class="fe me mf mg mh b">ThemeWindow</code>组件只需要很小的改动，但是我们确实需要在<code class="fe me mf mg mh b">ThemeButton</code>组件中实现这个功能。</p><h1 id="66a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">实现主题切换功能</h1><p id="9ac3" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">实现这个函数不需要做什么特别的事情。按下按钮时调用它会切换主题。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/89b9b291f8691ff966b1b8d6604ca562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d3Svr-PtL6YHMeGH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">向ThemeButton组件添加主题切换功能</figcaption></figure><p id="c6d6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">就这么简单。点击该按钮，将执行<code class="fe me mf mg mh b">switchTheme()</code>功能。这将更新有状态值，从而触发重新渲染。最后，更新后的主题将呈现在<code class="fe me mf mg mh b">ThemeWindow</code>组件中。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/1e08e89bb07586ad44b6a13bb2d5574a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RIFKJSG92gGNUHfw"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">反映ThemeWindow组件中的微小变化</figcaption></figure><h1 id="7321" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">包扎</h1><p id="7acd" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">这是上一篇关于React上下文的文章的结论。如您所见，React Context是一个强大的工具。</p><p id="4cc8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，这个简单的例子并没有真正展示它的威力。在有几十个组件的复杂应用程序中，值和状态需要传递给几个不同的组件，React Context将使这项工作比普通的props容易得多。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="0f73" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mu">原载于</em> <a class="ae la" href="https://niharraoteblog.netlify.app/update-context-from-child-component" rel="noopener ugc nofollow" target="_blank"> <em class="mu">我的博客</em> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>