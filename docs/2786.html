<html>
<head>
<title>Take advantage of your git hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用你的git钩子</h1>
<blockquote>原文：<a href="https://itnext.io/take-advantage-of-your-git-hooks-62a594c9e0d?source=collection_archive---------3-----------------------#2019-08-01">https://itnext.io/take-advantage-of-your-git-hooks-62a594c9e0d?source=collection_archive---------3-----------------------#2019-08-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a03c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您是javascript开发人员，您可以在git存储库的hooks文件夹中放些什么呢</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ef587df239fe94c3aa163259b6516437.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qjLvpWK_gU1N2GRy"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">弗朗切斯科·温加罗在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></figcaption></figure><p id="8f91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">什么是git挂钩？如果你已经开发了很多年，却没有听说过git挂钩，也没有真正使用过它们，我不会感到惊讶。</p><p id="6054" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Git挂钩基本上是bash文件，可以在git命令前/后运行。</p><p id="ccb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么这很有帮助？老实说，有很多不同的钩子你可能永远不会使用。但是我发现了一些有用的方法。尤其是当我在一个大型开发团队中工作时。</p><p id="f981" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是您可以使用的所有git挂钩的列表</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5b35" class="ma mb it lw b gy mc md l me mf">applypatch-msg<br/>post-update<br/>pre-push.sample<br/>prepare-commit-msg<br/>commit-msg<br/>pre-applypatch<br/>pre-rebase<br/>update<br/>fsmonitor-watchman<br/>pre-commit<br/>pre-receive</span></pre><p id="1ddb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在你隐藏的。本地存储库中的git文件夹。</p><p id="6367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">路径:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4055" class="ma mb it lw b gy mc md l me mf">.git/hooks/</span></pre><p id="f0c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你现在看那里，你应该会看到一堆样本文件，你可以用它们来开始编写你自己的钩子。</p><p id="b9f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想把重点放在我发现非常有用的一个钩子上。这个挂钩是提交前挂钩。我将向你们展示我在预提交钩子里放了什么，希望最后你们也会想做同样的事情。</p><h1 id="025e" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">较美丽</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/dd99d8755669ef11f6df1103262c4181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lpxi-R5Lo5N2vOWLsm2jzw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">https://prettier.io/</a></figcaption></figure><p id="3f83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">什么更漂亮？(<a class="ae ky" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">摘自他们的网站</a>)</p><blockquote class="my mz na"><p id="300f" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">固执己见的代码格式化程序</p><p id="a424" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">支持多种语言</p><p id="ddf4" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">与大多数编辑器集成</p><p id="844b" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">选择不多</p></blockquote><p id="e33f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我为什么要用它呢？我了解到每个人对代码应该如何格式化都有自己的看法。如果有一件事是我讨厌的，那就是浪费我的时间和我的同事争论格式问题。老实说，有些事情你一开始不会喜欢。但是如果你有机会的话，你会惊讶地发现这种格式对你来说是多么的有用。</p><p id="9df6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么使用git仓库这么好？你发现自己花在拉取请求和评论无关紧要的事情上的时间减少了。它也使得拉取请求看起来更加清晰。</p><p id="dc0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，下面是在您的系统上安装pretty需要做的事情(pretty支持多种语言，但它的主要语言是javascript，所以我将向您展示如何使用javascript)。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ab1c" class="ma mb it lw b gy mc md l me mf">yarn add prettier --dev --exact</span><span id="5613" class="ma mb it lw b gy nf md l me mf">or</span><span id="a35d" class="ma mb it lw b gy nf md l me mf">npm install --save-dev --save-exact prettier</span></pre><p id="1736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我也更喜欢在我的git钩子上使用quit-quick，因为它更快。下面是如何安装它。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6620" class="ma mb it lw b gy mc md l me mf">yarn add pretty-quick --dev</span><span id="f161" class="ma mb it lw b gy nf md l me mf">or</span><span id="902c" class="ma mb it lw b gy nf md l me mf">npm install --save-dev pretty-quick</span></pre><p id="ba58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在导航到您的。git/hooks文件</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9596" class="ma mb it lw b gy mc md l me mf">cd {repo-directory}.git/hooks</span></pre><p id="11ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的命令中创建一个名为pre-commit和paste的文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="0351" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ni nj nk lw b">pretty-quick</code>之前的一行只是允许输出被打印到控制台，这样你就可以看到发生了什么。</p><p id="96c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果你在你的仓库中，你应该看到每次提交时运行得更漂亮。</p><p id="e8b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，如果你在一个大的存储库中，并且你在整体上运行得更好，你将有很多git的变化。所以如果我是你，我不会在整个代码库上运行它，除非你的整个团队都同意。</p><h1 id="f31d" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">林挺</h1><p id="700d" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">好吧，所以如果有什么东西与漂亮相伴，那就是林挺。我甚至无法解释为什么林挺是编写javascript代码的开发团队中的一员。在林挺发现了如此多的虫子。现在，重要的是你要找到一套适合你的团队的规则。</p><p id="7013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的建议是遵循airbnb的风格指南。他们有一个很棒的规则集，并且很好地解释了为什么他们选择了不同的规则集。</p><p id="62da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有一个林挺规则的链接。</p><p id="49b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将它添加到您的git挂钩中，您需要首先将它安装到您的项目中。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fd8d" class="ma mb it lw b gy mc md l me mf">npm install eslint --save-dev</span></pre><p id="169a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在全局范围内安装它，你就不需要在钩子中添加对node_modules文件夹的引用。</p><p id="1c1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢在钩子文件中运行的另一个工具是<code class="fe ni nj nk lw b">eslint-friendly-formatter</code></p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="37ce" class="ma mb it lw b gy mc md l me mf">npm install eslint-friendly-formatter --save-dev</span></pre><p id="e9e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我是你，我也会全局安装它，这样当你把它放在你的git钩子中时，你就不必引用节点模块文件夹了。</p><p id="ff88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在预提交文件中，确保将这一行添加到末尾。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="3d5b" class="mg mb it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">结论</h1><p id="d2a7" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">您的整个文件现在应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="78dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果您签入代码，您应该会看到预提交钩子正在运行。</p><p id="9c34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我知道它是如何为你工作的！也让我知道你使用的其他提交钩子以及它们是如何帮助你的！</p><p id="d0b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p></div><div class="ab cl nq nr hx ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="im in io ip iq"><p id="c797" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="nb"> Avery Duffin </em> </strong> <em class="nb">是</em> <a class="ae ky" href="https://www.developerswholunch.com" rel="noopener ugc nofollow" target="_blank"> <em class="nb">【开发者午餐】</em> </a> <em class="nb">的所有者和创始人，这是一个播客和博客，旨在帮助那些学习编程并寻求在软件开发领域建立职业生涯的人。他目前在</em><a class="ae ky" href="https://www.rainfocus.com/" rel="noopener ugc nofollow" target="_blank"><em class="nb">rai focus</em></a><em class="nb">担任软件工程师，居住在美国犹他州。你可以在</em><a class="ae ky" href="https://twitter.com/DuffinAvery" rel="noopener ugc nofollow" target="_blank"><em class="nb">Twitter</em></a><em class="nb">和</em><a class="ae ky" href="https://www.linkedin.com/in/avery-duffin-69317228/" rel="noopener ugc nofollow" target="_blank"><em class="nb">linkedIn</em></a><em class="nb">上和他联系。</em></p></div></div>    
</body>
</html>