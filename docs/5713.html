<html>
<head>
<title>How to use the Firebird database with Rust language</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Rust语言使用火鸟数据库</h1>
<blockquote>原文：<a href="https://itnext.io/firebird-rust-92e9043261cc?source=collection_archive---------0-----------------------#2021-05-08">https://itnext.io/firebird-rust-92e9043261cc?source=collection_archive---------0-----------------------#2021-05-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/736077a7b459e6971d90ae8afa3b709a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kI6LpgZcTiOAb3huZpmsRw.png"/></div></div></figure><h1 id="19d8" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="8894" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">首先，我想向你展示一下Rust编程语言。它是一种开源语言，提供了一个没有运行时或垃圾收集器的平台，速度非常快，内存管理非常棒。同样非常重要的是，它有一个<a class="ae lu" href="https://doc.rust-lang.org/book/" rel="noopener ugc nofollow" target="_blank">优秀的文档</a>。</p><p id="778e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">对于数据存储，我们有<a class="ae lu" href="https://firebirdsql.org" rel="noopener ugc nofollow" target="_blank">火鸟数据库</a>。它有许多特点，是稳定和非常快。</p><p id="fb9e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><a class="ae lu" href="https://github.com/fernandobatels/rsfbclient/graphs/contributors" rel="noopener ugc nofollow" target="_blank">我们制作了</a>rsfbclient机箱，用于提供访问火鸟的安全API。</p><p id="947e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><a class="ae lu" href="https://medium.com/@luisfbatels/como-utilizar-o-banco-de-dados-firebird-com-a-linguagem-rust-812630dc0058" rel="noopener"> <em class="ma">葡萄牙语</em> </a> <em class="ma">。</em></p><h1 id="a79c" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置环境</h1><p id="de42" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">你一定已经安装了<a class="ae lu" href="https://rustup.rs/" rel="noopener ugc nofollow" target="_blank"> rust toolkit </a>。而且，如果你想使用原生firebird连接器，你还需要安装<a class="ae lu" href="https://firebirdsql.org/en/firebird-3-0-7/" rel="noopener ugc nofollow" target="_blank">Firebird</a>。</p><p id="22f5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">然后，你只需要使用<a class="ae lu" href="https://doc.rust-lang.org/cargo/" rel="noopener ugc nofollow" target="_blank"> cargo </a>创建一个新的rust项目:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="e9f5" class="mk jz iq mg b gy ml mm l mn mo">cargo new fbtest</span></pre><p id="86c8" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">测试项目:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="82d9" class="mk jz iq mg b gy ml mm l mn mo">cd fbtest<br/>cargo run</span></pre><h1 id="46d0" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">选择客户端变体</h1><p id="d796" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">rsfbclient提供了三种访问数据库的实现:动态链接、动态加载和纯rust。<a class="ae lu" href="https://doc.rust-lang.org/cargo/reference/features.html" rel="noopener ugc nofollow" target="_blank">功能</a> <em class="ma">联动</em>、<em class="ma">动载荷</em>和<em class="ma">纯锈</em>使能哪一个。</p><p id="ba3c" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">默认情况下，板条箱使用第一个选项。因此，我们只需要将其添加到<strong class="ky ir"> <em class="ma"> Cargo.toml </em> </strong>的依赖项部分即可:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="7edd" class="mk jz iq mg b gy ml mm l mn mo">[dependencies]<br/>rsfbclient = “0.16.0”</span></pre><p id="213f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">测试项目:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="8532" class="mk jz iq mg b gy ml mm l mn mo">cargo run</span></pre><h1 id="7860" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">准备项目</h1><p id="30b5" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在<strong class="ky ir"> <em class="ma"> main.rs </em> </strong>上，我们需要导入crate并修改main函数来返回它产生的错误:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="cfed" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">测试项目:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="69eb" class="mk jz iq mg b gy ml mm l mn mo">cargo run</span></pre><h1 id="78d5" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">数据库连接</h1><p id="42a1" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在选择了客户机变体之后，我们需要选择连接类型。板条箱有两个选项:连接生成器或字符串:</p><h2 id="0208" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated">使用连接生成器:</h2><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h2 id="ddbf" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated">使用字符串:</h2><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="5019" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">从数据库获取数据</h1><p id="5d48" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在，让我们从数据库中获取一些行。在我们的测试中，我们将使用<strong class="ky ir"> <em class="ma"> mon$attachments </em> </strong>表。rsfbclient提供了一个API，我们只需要在其中声明预期的类型，它将负责执行强制转换和其他操作。</p><p id="3165" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">随着连接的打开，我们只需要调用<a class="ae lu" href="https://docs.rs/rsfbclient/0.16.0/rsfbclient/prelude/trait.Queryable.html#method.query" rel="noopener ugc nofollow" target="_blank">查询</a>方法。此方法可用于以下格式:</p><h2 id="2964" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated">元组:</h2><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h2 id="5498" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated"><a class="ae lu" href="https://docs.rs/rsfbclient/0.16.0/rsfbclient/struct.Row.html" rel="noopener ugc nofollow" target="_blank">行</a>结构:</h2><p id="b88b" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这种格式下，您可以动态地访问列。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="dac9" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">插入数据</h1><p id="4c5f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">要在数据库上插入数据，或者在没有光标的情况下执行任何其他操作符，我们需要使用<a class="ae lu" href="https://docs.rs/rsfbclient/0.16.0/rsfbclient/trait.Execute.html" rel="noopener ugc nofollow" target="_blank"> execute </a>方法。例如:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="e8e6" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">与<strong class="ky ir"> <em class="ma">查询</em> </strong>方法一样，该方法也支持以下格式的参数:</p><h2 id="923b" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated">元组:</h2><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h2 id="d30c" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated">结构:</h2><p id="e8b2" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">所有实现<a class="ae lu" href="https://docs.rs/rsfbclient/0.16.0/rsfbclient/trait.IntoParams.html" rel="noopener ugc nofollow" target="_blank"> IntoParams </a>特征的结构都可以用作参数。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="04d4" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">关闭连接</h1><p id="449f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">由于rust的<a class="ae lu" href="https://doc.rust-lang.org/rust-by-example/scope.html" rel="noopener ugc nofollow" target="_blank">作用域规则</a>，一旦连接变量超出作用域，连接就会被关闭。</p><p id="69cc" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">不过，您可以使用<a class="ae lu" href="https://docs.rs/rsfbclient/0.16.0/rsfbclient/struct.Connection.html#method.close" rel="noopener ugc nofollow" target="_blank">关闭</a>方法手动关闭连接。</p><h2 id="2f45" class="mk jz iq bd ka mr ms dn ke mt mu dp ki lh mv mw km ll mx my kq lp mz na ku nb bi translated">考虑</h2><p id="aa98" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">本文仅仅展示了语言和数据库之间的少量交互。因此，一些特性和资源被遗漏了，但是你可以在<a class="ae lu" href="https://docs.rs/rsfbclient/0.16.0" rel="noopener ugc nofollow" target="_blank">机箱文档</a>中看到它们。此外，我们已经实现了<a class="ae lu" href="https://github.com/fernandobatels/rsfbclient/tree/master/examples" rel="noopener ugc nofollow" target="_blank">许多示例</a>。</p><p id="6031" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">为了跟踪rsfbclient的开发，您可以访问我们的资源库:<a class="ae lu" href="https://github.com/fernandobatels/rsfbclient" rel="noopener ugc nofollow" target="_blank">https://github.com/fernandobatels/rsfbclient</a></p><p id="51e5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">感谢您的关注，下次再见！</p><figure class="mb mc md me gt jr gh gi paragraph-image"><a href="https://ko-fi.com/L3L843YUI"><div class="gh gi nc"><img src="../Images/d9b1c672bb1cb70e8343c6c35d2a6084.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*Z6asMslnCAWLqXHhV7LgWw.jpeg"/></div></a></figure></div></div>    
</body>
</html>