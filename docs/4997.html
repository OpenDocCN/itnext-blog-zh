<html>
<head>
<title>Designing Restful APIs using an API-First Approach — Documentation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用API优先的方法设计Restful APIs文档</h1>
<blockquote>原文：<a href="https://itnext.io/restful-apis-api-documentation-d911664c16a6?source=collection_archive---------3-----------------------#2020-11-12">https://itnext.io/restful-apis-api-documentation-d911664c16a6?source=collection_archive---------3-----------------------#2020-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b0d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去的几个月里，我一直在写关于如何使用OpenAPI开发更好的API的文章。我们可以看到OpenAPI和它的生态系统有多强大。</p><p id="9b03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了保持标准，并向您展示OpenAPI如何提高开发人员的生产力，并为那些使用您的API的人提供更好的体验，我将讨论API文档。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/228fa0b9fc9fa41d116aea91a24ca0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EkIdMBbwyvjBjwEV73K2jQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">由<a class="ae lb" href="https://pixabay.com/users/kerttu-569708/" rel="noopener ugc nofollow" target="_blank"> Kerttu </a>在<a class="ae lb" href="https://pixabay.com/photos/book-wall-books-wall-decorative-1151405/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</figcaption></figure><p id="9bdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">API开发人员必须牢记的最重要的事情是尽可能提供更好的开发人员体验，并实现这一挑战。我们可能会使用一些很棒的工具和实践。</p><h1 id="2c8d" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">📕API文档——API指南</h1><p id="0806" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">API文档是促进良好开发体验的基本实践，但是，不幸的是，大多数API没有利用这种实践来交付更好的API。</p><p id="fdab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个好的API文档从一个好的API设计开始，所以在这之后，当API提供者需要解释一些API设计中不清楚的东西时，清晰的描述可以提高客户的理解。其他实践，如<strong class="jp ir">代码样本</strong>和<strong class="jp ir"> API控制台</strong>将会是开发者体验的蛋糕糖衣。</p><h1 id="6a63" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><a class="ae lb" href="https://emojipedia.org/memo/" rel="noopener ugc nofollow" target="_blank">📝</a>ReDoc——成功的文档</h1><p id="5049" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">ReDoc是一个开源项目，它的Github库<a class="ae lb" href="https://github.com/Redocly/redoc" rel="noopener ugc nofollow" target="_blank">中有超过11，000颗星星，它相信文档是API的基础。它是一个强大的工具，使用OpenAPI(以前称为Swagger)作为事实的来源，为API提供了一个文档门户。</a></p><h2 id="92b2" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">创建API文档</h2><p id="ee5e" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在官方文档中，有几个构建ReDoc项目的选项。今天我将向你展示如何使用<a class="ae lb" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> React Create App </a>建立一个ReDoc项目。</p><blockquote class="mr ms mt"><p id="6a9c" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated">请记住，我使用的是我在本系列开始时与您分享的同一个<a class="ae lb" href="https://github.com/nicolastakashi/todoapp-openapidocuments" rel="noopener ugc nofollow" target="_blank"> Git存储库</a>。</p></blockquote><h2 id="3c3d" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">开始吧</h2><p id="3661" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">首先，让我们运行下面的命令来创建一个新的react项目。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="9084" class="mf ld iq mz b gy nd ne l nf ng">npx create-react-app docs</span></pre><p id="1100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要添加ReDoc及其依赖项。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="680b" class="mf ld iq mz b gy nd ne l nf ng">yarn add redoc mobx styled-components core-js</span></pre><p id="1654" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们可以配置ReDoc并查看API文档输出。要配置它，您需要编辑App.js文件，如下例所示。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">ReDoc —反应设置</figcaption></figure><p id="c8dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">信不信由你，我们完成了ReDoc基本配置。还有更多的选项可以配置，比如主题、模式标题、滚动等等。</p><p id="d589" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们将OpenAPI文档作为JSON捆绑到docs文件夹中，使ReDoc能够呈现它。为此，您需要运行下面的命令。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="25db" class="mf ld iq mz b gy nd ne l nf ng">swagger-cli bundle specs/api.yaml -o ./docs/src/api.json -t json</span></pre><h1 id="1a4f" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">🧑‍💻睁大眼睛</h1><p id="abdc" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">毕竟，我们将看到ReDoc是什么样子，以及我们可以做些什么来改进ReDoc使用OpenAPI作为事实来源创建的API文档。</p><p id="a6a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是为了不失去习惯，运行另一个命令来启动文档项目。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="cf4f" class="mf ld iq mz b gy nd ne l nf ng">yarn start</span></pre><p id="5f9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你可以享受它的样子了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/c4c2fc993030853c9d2d3a2e60ac31dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aFa1H9NEKJ73vZv9V3JXSg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">ReDoc — API文档</figcaption></figure><p id="2057" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您在上面看到的，它看起来很棒，并且配置所需的一切都很简单。</p><h2 id="9e74" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">Brading您的文档</h2><p id="8c9a" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">为了让它更加激动人心，你可以添加一个API标志，将下面的内容添加到info部分的OpenAPI中。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="c3b5" class="mf ld iq mz b gy nd ne l nf ng">x-logo:<br/>    url: "<a class="ae lb" href="https://img.icons8.com/nolan/452/todo-list.png" rel="noopener ugc nofollow" target="_blank">https://img.icons8.com/nolan/452/todo-list.png</a>"<br/>    backgroundColor: "#FFFFFF"<br/>    altText: "Logo"</span></pre><p id="ca4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，重启应用程序以查看下面的输出。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/0193a688bbbf1d5bd3eb9618bf68d60d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NAOmCh_wWp-QMxOcCkzv0Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">ReDoc —品牌文档</figcaption></figure><h2 id="2796" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">赠送给API消费者的礼物</h2><p id="ece9" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">将API设计与API文档相结合，开发人员几乎拥有了使用API所需的一切。</p><p id="b35e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您希望在API使用过程中进一步改善开发人员的体验，您可以提供代码示例。</p><p id="d764" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">令我们高兴的是，redoc很好地支持了这一点，添加了一个名为<code class="fe nk nl nm mz b">x-codeSamples</code>的扩展，包含您想要提供的样本列表。</p><p id="b4f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码样本支持最流行的语言，你可以点击<a class="ae lb" href="https://github.com/github/linguist/blob/master/lib/linguist/popular.yml" rel="noopener ugc nofollow" target="_blank">这里</a>查看可用列表。</p><p id="c2fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码示例结构如下所示。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="fa22" class="mf ld iq mz b gy nd ne l nf ng">lang: JavaScript<br/>source: console.log('Hello World');</span></pre><p id="9709" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将在一个单独的文件中使用示例，以提高可读性，因为代码示例可能非常广泛。代码示例将位于以下目录结构下。</p><pre class="km kn ko kp gt my mz na nb aw nc bi"><span id="9ad2" class="mf ld iq mz b gy nd ne l nf ng">.<br/>├── js<br/>│   ├── tasks<br/>│   │   ├── get.yaml<br/>│   │   └── post.yaml<br/>│   └── tasks-by-id<br/>│       ├── delete.yaml<br/>│       ├── get.yaml<br/>│       └── put.yaml<br/>└── shell<br/>    ├── tasks<br/>    │   ├── get.yaml<br/>    │   └── post.yaml<br/>    └── tasks-by-id<br/>        ├── delete.yaml<br/>        ├── get.yaml<br/>        └── put.yaml</span></pre><p id="ecf7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我可以将代码示例扩展添加到OpenAPI path部分，并重启应用程序以查看下面的结果。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nn"><img src="../Images/eb4a5377be4ad6b1215104f0de7a5709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*foZS6gmrBCuxX1VoQgD29Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">ReDoc —代码示例</figcaption></figure><p id="d81a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，与API交互变得更加容易，我们可以创建您想要向API消费者提供多少样本。</p><h1 id="0dae" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">🏁结论</h1><p id="d4cb" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">正如我们所看到的，ReDoc使用以前在API设计会议中创建的OpenAPI文档作为事实的来源，不费吹灰之力就提供了一个很好的API文档门户。</p><p id="b823" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ReDoc一直在发展，在项目backlog中有一个API控制台特性，对我来说，这个特性将使项目更上一层楼。</p><p id="ffdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像往常一样，所有代码都可以在<a class="ae lb" href="https://github.com/nicolastakashi/todoapp-openapidocuments" rel="noopener ugc nofollow" target="_blank"> Github库</a>中获得。让我知道你认为这个策略怎么样？你已经知道了吗？</p><p id="d586" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">评论下面，大家来分享一下经验吧。</p><p id="2296" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢它，并很快见到你。</p></div></div>    
</body>
</html>