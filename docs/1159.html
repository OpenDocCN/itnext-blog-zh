<html>
<head>
<title>The PRPL Pattern for Progressive Web Applications using Angular 6+</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Angular 6+的渐进式Web应用程序的PRPL模式</h1>
<blockquote>原文：<a href="https://itnext.io/the-prpl-pattern-for-progressive-web-applications-using-angular-6-f7237b7dc2a7?source=collection_archive---------4-----------------------#2018-08-01">https://itnext.io/the-prpl-pattern-for-progressive-web-applications-using-angular-6-f7237b7dc2a7?source=collection_archive---------4-----------------------#2018-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/719c15d4793c41dca291033ea20f091c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U47GLVoJEXnLdYFpy0-ItA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="http://www.savingcontent.com" rel="noopener ugc nofollow" target="_blank">www.savingcontent.com</a></figcaption></figure><p id="777a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">PRPL模式是一种用于构建现代渐进式web应用程序的新技术。</p><p id="2265" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">它的意思是服务于一个客户端(CSS，JS和其他静态资产)只有什么将被客户端在当前请求的页面上使用。在此基础上，资源将被缓存。</strong></p><ul class=""><li id="eaa2" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">它提高了应用程序的启动速度</li><li id="1c7b" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">不要在不必要的编译未使用的JS上花费时间</li><li id="0b30" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">更快地与应用程序进行初始交互</li><li id="7775" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">减少服务器和客户端之间的字节交换</li></ul><p id="07af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">PRPL代表:</p><ul class=""><li id="59b3" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kf ir">推送</strong>初始URL路由的关键资源</li><li id="4ab5" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir">渲染</strong>初始路线</li><li id="e7c5" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir">预缓存</strong>剩余路线</li><li id="a85b" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir">延迟加载</strong>并按需创建剩余路线</li></ul><p id="415e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lp">更多详情:</em></p><ul class=""><li id="aadc" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><a class="ae kc" href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/" rel="noopener ugc nofollow" target="_blank"><em class="lp">https://developers . Google . com/web/fundamentals/performance/prpl-pattern/</em></a></li><li id="2bb9" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://developers.google.com/web/progressive-web-apps/checklist" rel="noopener ugc nofollow" target="_blank"><em class="lp">https://developers . Google . com/web/progressive-we b-apps/check list</em></a></li></ul><h1 id="c601" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">有角的</h1><p id="132d" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">由于<a class="ae kc" href="https://angular.io" rel="noopener ugc nofollow" target="_blank"> Angular framework </a>包含了所有必要的部分，我们将构建一个使用该模式的简单应用程序。</p><p id="a374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用的角度特征有:</p><ul class=""><li id="b033" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">服务人员</li><li id="5d81" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">惰性装载</li><li id="bdc3" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">使用angular-cli构建和捆绑</li></ul><h1 id="432b" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">应用</h1><p id="36c4" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我们将建立一个仅移动清洁应用程序(订单清洁服务)。我们借用的素描来自:<a class="ae kc" href="https://www.sketchappsources.com/free-source/1955-cleaning-app-order-flow-sketch-freebie-resource.html" rel="noopener ugc nofollow" target="_blank">www.sketchappsources.com</a></p><p id="46ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">草图已经由<a class="ae kc" href="https://www.behance.net/maxkhomenko" rel="noopener ugc nofollow" target="_blank"> Max Khomenko </a>完成</p><p id="e5a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用<a class="ae kc" href="https://www.figma.com" rel="noopener ugc nofollow" target="_blank"> Figma </a>加载Sketch并导出必要的资产:<a class="ae kc" href="https://www.figma.com/file/VdyF2hYyzFtpFmb7fXzGPc0v/Cleaning-App" rel="noopener ugc nofollow" target="_blank">https://www . fig ma . com/file/vdyf 2 hyyzftpfmb 7 fxzgpc 0v/Cleaning-App</a></p><h2 id="1843" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">图书馆和技术</h2><p id="752d" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">出于尺寸和性能的考虑，我们不会使用任何UI库或任何第三方组件。</p><ul class=""><li id="448e" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">我们将把<a class="ae kc" href="https://necolas.github.io/normalize.css/8.0.0/normalize.css" rel="noopener ugc nofollow" target="_blank"> normalize.css </a>的内容复制到我们的main style.css中</li><li id="0658" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">我们将使用Flex作为元素定位的方法。</li></ul><p id="3c6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不会在本教程中详细讨论如何编写HTML、CSS和TypeScript，所有这些都可以在本文末尾的GitHub链接中找到。</p><h2 id="775c" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">结构</h2><p id="35e7" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">应用程序结构将如下图所示:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/efddc8f081ebfcbecf1414f4b68cd413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*507EmpQvSLxDWCyMcefhOA.png"/></div></div></figure><h2 id="a98d" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">拔靴带</h2><p id="a6e4" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">使用(<em class="lp">创建一个新的Angular应用程序在此之前，我们需要安装</em><a class="ae kc" href="http://twitter.com/angular/cli" rel="noopener ugc nofollow" target="_blank"><em class="lp">@ Angular/CLI</em></a><em class="lp">@ 6 . 0 . 8版本，因为在最新版本6.1.1中</em><a class="ae kc" href="http://twitter.com/angular/pwa" rel="noopener ugc nofollow" target="_blank"><em class="lp">@ Angular/pwa</em></a><em class="lp">模块</em>):</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="8152" class="mt lr iq nl b gy np nq l nr ns">ng new <strong class="nl ir">cleaning-app</strong> --routing -p capp --skip-git &amp;&amp; cd cleaning-app</span></pre><p id="bc7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将使用(<em class="lp">将PWA工具添加到我们的应用程序中。至于angular-cli，我们将安装该模块的0.6.8版本，因为在最新版本中有一个bug </em>。):</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="6621" class="mt lr iq nl b gy np nq l nr ns">ng add <a class="ae kc" href="http://twitter.com/angular/pwa" rel="noopener ugc nofollow" target="_blank">@angular/pwa</a>@0.6.8 --project <strong class="nl ir">cleaning-app</strong></span></pre><p id="ec53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在添加这个库的过程中，我们将在我们的存储库中获得几个文件。我们需要改变其中的一些。</p><p id="11e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们生成了一个图标，并替换了src/assets/icons中的默认图标。<br/>我们在src/manifest.json中做了一些改动(name、short_name和theme_color与我们的app匹配)。最后看起来是这样的:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="bcef" class="mt lr iq nl b gy np nq l nr ns">{<br/>  <strong class="nl ir">"name"</strong>: <strong class="nl ir">"Cleaning Service"</strong>,<br/>  <strong class="nl ir">"short_name"</strong>: <strong class="nl ir">"CA"</strong>,<br/>  <strong class="nl ir">"theme_color"</strong>: <strong class="nl ir">"#48b3e2"</strong>,<br/>  <strong class="nl ir">"background_color"</strong>: <strong class="nl ir">"#fafafa"</strong>,<br/>  <strong class="nl ir">"display"</strong>: <strong class="nl ir">"standalone"</strong>,<br/>  <strong class="nl ir">"scope"</strong>: <strong class="nl ir">"/"</strong>,<br/>  <strong class="nl ir">"start_url"</strong>: <strong class="nl ir">"index.html"</strong>,<br/>  <strong class="nl ir">"icons"</strong>: [...]<br/>}</span></pre><h2 id="4f42" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">模块</h2><p id="c12d" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">然后，我们将在应用程序中添加五个模块:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="30fa" class="mt lr iq nl b gy np nq l nr ns">ng generate module Step1 --routing<br/>ng generate module Step2 --routing<br/>ng generate module Step3 --routing<br/>ng generate module Final --routing<br/>ng generate module Shared</span></pre><h2 id="2a36" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">按指定路线发送</h2><p id="95f4" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我们将延迟加载所有模块:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="78d2" class="mt lr iq nl b gy np nq l nr ns"><strong class="nl ir">import </strong>{ NgModule } <strong class="nl ir">from '@angular/core'</strong>;<br/><strong class="nl ir">import </strong>{ Routes, RouterModule } <strong class="nl ir">from '@angular/router'</strong>;<br/><br/><strong class="nl ir">const </strong>routes: Routes = [<br/>  {<br/>    <strong class="nl ir">path</strong>: <strong class="nl ir">''</strong>,<br/>    <strong class="nl ir">pathMatch</strong>: <strong class="nl ir">'full'</strong>,<br/>    <strong class="nl ir">redirectTo</strong>: <strong class="nl ir">'step1'<br/>  </strong>},<br/>  {<br/>    <strong class="nl ir">path</strong>: <strong class="nl ir">'step1'</strong>,<br/>    <strong class="nl ir">loadChildren</strong>: <strong class="nl ir">'src/app/step1/step1.module#Step1Module'<br/>  </strong>},<br/>  {<br/>    <strong class="nl ir">path</strong>: <strong class="nl ir">'step2'</strong>,<br/>    <strong class="nl ir">loadChildren</strong>: <strong class="nl ir">'src/app/step2/step2.module#Step2Module'<br/>  </strong>},<br/>  {<br/>    <strong class="nl ir">path</strong>: <strong class="nl ir">'step3'</strong>,<br/>    <strong class="nl ir">loadChildren</strong>: <strong class="nl ir">'src/app/step3/step3.module#Step3Module'<br/>  </strong>},<br/>  {<br/>    <strong class="nl ir">path</strong>: <strong class="nl ir">'final'</strong>,<br/>    <strong class="nl ir">loadChildren</strong>: <strong class="nl ir">'src/app/final/final.module#FinalModule'<br/>  </strong>}<br/>];<br/><br/>@NgModule({<br/>  <strong class="nl ir">imports</strong>: [RouterModule.<em class="lp">forRoot</em>(routes, { <strong class="nl ir">useHash</strong>: <strong class="nl ir">true </strong>})],<br/>  <strong class="nl ir">exports</strong>: [RouterModule]<br/>})<br/><strong class="nl ir">export class </strong>AppRoutingModule { }</span></pre><h2 id="4054" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">状态</h2><p id="9718" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我们可以从应用程序草图中确定一种可能的状态。我们的应用程序只有一个流，因此我们将只使用一个服务和一个模型。</p><p id="8225" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要一个服务来保持应用程序的状态(选定的选项)。这将通过提供服务来实现。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="be90" class="mt lr iq nl b gy np nq l nr ns">ng generate service shared/services/Offer</span></pre><p id="1b4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将创建报价模型</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="8725" class="mt lr iq nl b gy np nq l nr ns">ng generate class shared/services/Offer --type model</span></pre><p id="5857" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">具备所有必要的属性。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="1c0e" class="mt lr iq nl b gy np nq l nr ns"><strong class="nl ir">export class </strong>Offer {<br/>  <strong class="nl ir">total </strong>= 0;<br/>  <strong class="nl ir">beds </strong>= 0;<br/>  <strong class="nl ir">baths </strong>= 0;<br/>  <strong class="nl ir">windows</strong>: <strong class="nl ir">boolean</strong>;<br/>  <strong class="nl ir">ironing</strong>: <strong class="nl ir">boolean</strong>;<br/>  <strong class="nl ir">fridge</strong>: <strong class="nl ir">boolean</strong>;<br/>  <strong class="nl ir">oven</strong>: <strong class="nl ir">boolean</strong>;<br/>  <strong class="nl ir">when</strong>: Date;<br/>  <strong class="nl ir">time</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">location</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">name</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">city</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">mobile</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">email</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">notes</strong>: <strong class="nl ir">string</strong>;<br/>  <strong class="nl ir">waitingAtHome</strong>: <strong class="nl ir">boolean</strong>;<br/>  <strong class="nl ir">keysAndSecurity</strong>: <strong class="nl ir">boolean</strong>;<br/>  <strong class="nl ir">keyUnderDoormat</strong>: <strong class="nl ir">boolean</strong>;<br/>}</span></pre><p id="7291" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">重要的是，我们可以在流程结束后转储完整状态。</p><p id="6744" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<a class="ae kc" href="https://github.com/vladotesanovic/cleaning-app/blob/master/src/app/shared/services/offer.service.ts" rel="noopener ugc nofollow" target="_blank"> offer.service.ts </a>中，我们为offer属性创建了所有必要的set和unset方法。</p><h2 id="7f37" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">共享的</h2><p id="97aa" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">顾名思义，共享模块将包含共享组件</p><p id="e323" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们在应用程序草图中指出的，我们将有四个共享组件:标题、输入、按钮和步骤组件。我们将在共享模块中创建它们:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="95e7" class="mt lr iq nl b gy np nq l nr ns">ng generate component shared/components/Header -c 'OnPush' --module shared/shared.module.ts --export</span><span id="adf3" class="mt lr iq nl b gy nt nq l nr ns">ng generate component shared/components/Input -c 'OnPush' --module shared/shared.module.ts --export</span><span id="63b8" class="mt lr iq nl b gy nt nq l nr ns">ng generate component shared/components/Button -c 'OnPush' --module shared/shared.module.ts --export</span><span id="815e" class="mt lr iq nl b gy nt nq l nr ns">ng generate component shared/components/Step -c 'OnPush' --module shared/shared.module.ts --export</span></pre><p id="9b51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用OnPush标记组件意味着这个组件是一个哑组件，只有在输入发生变化时才会触发变化检测。</p><h2 id="3650" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">第一步</h2><p id="9e6d" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我们需要为每一步准备一个初始组件，我们称之为Home。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="8a46" class="mt lr iq nl b gy np nq l nr ns">ng generate component step1/components/Home --module step1/step1.module.ts</span></pre><p id="9346" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在app sketch上注意到，我们有一个重复的组件(减少和增加按钮)，因此我们将在步骤1模块中创建它。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="77d9" class="mt lr iq nl b gy np nq l nr ns">ng generate component step1/components/controls --module step1/step1.module.ts -c 'OnPush'</span></pre><p id="dcb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有不在下面的组件都应该是哑组件，并标上OnPush。</p><p id="f574" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们第一步的最终设计如下:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/e4f82decf7ff94544f1973d147e6636d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V-WRbYK_xmCSqRhmD6U6gw.png"/></div></div></figure><h2 id="d68b" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">第二步</h2><p id="0c41" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">同样，我们正在为此模块创建一个home组件。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="4edd" class="mt lr iq nl b gy np nq l nr ns">ng generate component step2/components/Home --module step2/step2.module.ts</span></pre><p id="73de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在添加了提供服务所需的所有方法和带有CSS的HTML之后，我们的组件看起来像这样:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/133d66bd883570cda88faede0185240c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*998u-LNymN0PUsvnYp4M6Q.png"/></div></div></figure><h2 id="ebef" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">第三步</h2><p id="1416" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">对于第2步，我们为这个模块创建一个home组件。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="a59c" class="mt lr iq nl b gy np nq l nr ns">ng generate component step3/components/Home --module step3/step3.module.ts</span></pre><p id="4341" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在放置了所有必要的样式后，它现在看起来像这样:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/56afc0be429f331b72676a4c2f917566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eiEjraPyuMfBe_jIjSmX_Q.png"/></div></div></figure><h2 id="4411" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">最后一步</h2><p id="b3f5" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">同样，从以上所有我们正在创建一个家庭组件。</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="3d6c" class="mt lr iq nl b gy np nq l nr ns">ng generate component final/components/Home --module final/final.module.ts</span></pre><p id="f01d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在此页面上标识了选项组件，我们将使用以下内容创建它:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="6d1c" class="mt lr iq nl b gy np nq l nr ns">ng generate component final/components/option --module final/final.module.ts -c 'OnPush'</span></pre><p id="3fa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在样式化和导入了所有必要的组件之后，它看起来像是:</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/29a2be52055bd82f46ab8648a5fc8b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQtStAa2vM3Ej0DQkSQNyA.png"/></div></div></figure><h2 id="d4b3" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">压缩</h2><p id="4fe0" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">因为angular-cli不能开箱即用地对JS和CSS文件进行gzip压缩，所以我们将使用gulp脚本来实现这一点，我们将在ng build命令之后触发该脚本。</p><h2 id="fa10" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">脱机的</h2><p id="dd20" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">应用程序在脱机模式下工作，但是没有为此编写业务逻辑(例如，在本地存储中聚合订单)。</p><h2 id="f393" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">Lighthouse的性能和测试</h2><p id="d317" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我们的目标是在第一秒为我们的客户提供html，我们已经实现了，正如你在Lighthouse页面上看到的。</p><figure class="ng nh ni nj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/464b77cf1a9adf693457d202262f3be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sQMt2WdjTdOT25NA5V12fA.png"/></div></div></figure><p id="4dcd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能已经注意到了，我们在可访问性方面有一些问题(标题的颜色和缩放选项)，但这是由于应用程序的设计，我现在不想改变这一点。</p><h2 id="5ad6" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">存储库和演示</h2><p id="25f7" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">演示app用<strong class="kf ir"> now.sh部署(而且要用手机打开)</strong>:<a class="ae kc" href="https://cleaning-app-sjgglugavc.now.sh" rel="noopener ugc nofollow" target="_blank">https://cleaning-app-sjgglugavc . now . sh</a></p><p id="0b17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有源代码都可以在GitHub上找到:【https://github.com/vladotesanovic/cleaning-app T4】</p><h2 id="7da1" class="mt lr iq bd ls mu mv dn lw mw mx dp ma ko my mz me ks na nb mi kw nc nd mm ne bi translated">结束语</h2><p id="e682" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">如果有人有兴趣完成(赞助)和商业化这个应用程序，请让我知道。也许我们可以从中创造一些好的东西。:)</p></div></div>    
</body>
</html>