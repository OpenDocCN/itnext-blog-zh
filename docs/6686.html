<html>
<head>
<title>Spice up your Infrastructure as Code with TACOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用玉米卷为您的基础设施增添代码的味道</h1>
<blockquote>原文：<a href="https://itnext.io/spice-up-your-infrastructure-as-code-with-tacos-1a9c179e0783?source=collection_archive---------1-----------------------#2022-01-30">https://itnext.io/spice-up-your-infrastructure-as-code-with-tacos-1a9c179e0783?source=collection_archive---------1-----------------------#2022-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/7ce2cd6bb25d98e05a8a022fe39436cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S5siyTwA_-5W29gz"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">乍得·蒙塔诺在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><div class=""><h2 id="3323" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">墨西哥卷饼供应商评论</h2></div><h2 id="90f0" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">介绍</h2><p id="227b" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">这篇文章将帮助你了解什么是玉米饼，并根据他们的能力选择供应商。sre、运营工程师或架构师会发现这些内容非常有用。</p><blockquote class="mk ml mm"><p id="4d09" class="lr ls mn lt b lu mo kh lw lx mp kk lz mq mr mb mc ms mt me mf mu mv mh mi mj ij bi translated"><em class="jg">如果你是一个热情的厨师，或者想知道你的烹饪技能如何帮助你编写代码，你会失望的。</em></p></blockquote><h2 id="2b86" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">基础设施作为代码</h2><p id="895d" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">IaC 是一种常见的模式，虚拟化基础设施和辅助服务可以使用几乎任何语言表达的配置来管理，通常托管在源代码库中。</p><p id="b0bd" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">IaC支持自动、可重复且可靠地创建和维护任何虚拟化基础架构。这对于按需创建环境以及管理多个提供商的基础设施尤为重要。</p><h2 id="7e70" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">地形基础</h2><p id="6a7c" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Hashicorp的<a class="ae jd" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank"> Terraform </a>和围绕它构建的开源生态系统如今是基础设施的事实上的标准，代码为IaC。独立的terraform工作流很棒，但在大规模使用时会很快变得难以管理。</p><blockquote class="mk ml mm"><p id="9b22" class="lr ls mn lt b lu mo kh lw lx mp kk lz mq mr mb mc ms mt me mf mu mv mh mi mj ij bi translated"><em class="jg">如果你想了解一个替代的云原生的，Kubernetes powered的工具，以数据的形式走向基础设施，请查看我最近的博客</em><a class="ae jd" href="https://medium.com/itnext/infrastructure-as-code-the-next-big-shift-is-here-9215f0bda7ce" rel="noopener"><em class="jg"/></a><em class="jg">关于</em> <a class="ae jd" href="https://crossplane.io/" rel="noopener ugc nofollow" target="_blank"> <em class="jg">交叉平面</em> </a> <em class="jg">。</em></p></blockquote><p id="d579" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">标准terraform工作流的典型简单实施包括:</p><ul class=""><li id="0424" class="mw mx jg lt b lu mo lx mp le my li mz lm na mj nb nc nd ne bi translated">利用terraform runner或独立容器将Terraform CLI集成到CI/CD管道中</li><li id="bf00" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">配置terraform远程后端以存储状态，从而实现不同团队之间的协作</li><li id="a7e4" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">如果启用了并发运行，则需要锁定状态文件，以避免在单一环境中运行时被覆盖</li></ul><p id="a4f0" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">上述步骤对于标准地形工具来说是可行的，但是在此过程中也需要应对一些挑战:</p><ul class=""><li id="6c0e" class="mw mx jg lt b lu mo lx mp le my li mz lm na mj nb nc nd ne bi translated">与常见的开发最佳实践相集成，如代码审查、通过合并请求进行更新、处理功能分支</li><li id="cf59" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">RBAC；随着解决方案的成熟，不同的角色可以在不同的环境中执行不同的任务，例如仅应用、删除等</li><li id="3470" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">审核历史记录—谁运行了什么，结果是什么，恢复到以前状态的能力</li><li id="512d" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">基础设施治理和政策，例如使用OPA或Kyverno</li><li id="95aa" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">为开发/QA团队提供高效的自助服务，如创建和销毁测试环境</li></ul><p id="3503" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">以正确的方式大规模实施IaC非常困难！如果在本地或混合环境中完成，这将更加困难。这样做意味着投入大量时间和资源来设计、开发和维护解决方案。</p><h2 id="7873" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">该吃玉米卷了</h2><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/0f9f1570c1c352dc4e92003376ed4654.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/0*8MfU8Yin0aVnAods.png"/></div></figure><p id="520f" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">TACOS代表</p><p id="5b00" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">自动化公司和T4公司的软件</p><p id="1b76" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">它为解决大规模操作IaC的问题提供了一个框架。</p><h1 id="fbee" class="np kw jg bd kx nq nr ns la nt nu nv ld km nw kn lh kp nx kq ll ks ny kt lp nz bi translated">使用玉米卷的好处</h1><h2 id="32f7" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">云工作空间</h2><p id="66ca" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">通常，SaaS产品通过集成以下内容来提供统一的抽象层:</p><ul class=""><li id="9d21" class="mw mx jg lt b lu mo lx mp le my li mz lm na mj nb nc nd ne bi translated">terraform运行时环境、状态、历史、秘密和变量管理，</li><li id="7dd6" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">RBAC —精细分级的权限</li><li id="6106" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated">由Terraform管理的特定环境的策略管理。</li></ul><h2 id="d40f" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">远程操作模式</h2><p id="8688" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">一个好处来自于运行时关注点的远程操作模式。值得注意的是，任何提供云工作区的供应商通常也提供在您的环境(本地或云)中设置运行程序的能力，因此只有运行时和UI部分在云上。可以在防火墙后安全地管理实际部署和配置/数据。</p><h2 id="b302" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">远程状态管理</h2><p id="9a39" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">另一个好处是能够管理由不同版本的terraform创建的不同环境</p><p id="6986" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">远程状态管理是可选的。我们可以将远程状态存储在云提供商(如S3存储区或本地存储区)中，并且只使用云工作区。</p><h2 id="6496" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">RBAC</h2><p id="348a" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">基于角色的访问控制，针对谁可以在项目或组级别计划和应用terraform运行。能够在工作区级别管理访问。</p><h2 id="e5c7" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">可观察性</h2><p id="fa87" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">玉米饼提供了更好的可视性，让人们了解在整个生命周期中，地球环境所发生的变化。搜索多条管道以查看添加、修改、删除了哪些资源变得更加容易。在TACOS中可以很容易地访问这些信息，还可以看到谁或什么触发了该操作的信息。我们还可以看到地形图的历史。</p><h2 id="ed47" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">作为代码的策略</h2><p id="006f" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">TACOS还可以利用策略代码来改善治理和安全性。TACOS可以利用像Open Policy Agent这样的工具，通过阻止不符合terraform代码的合并请求到主分支来工作。这些策略可以在Kubernetes集群策略之间重用。</p><h2 id="2985" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">推荐玉米饼流程</h2><p id="e7f8" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">下图显示了根据GitOps原则推荐的TACOS流程。</p><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oa"><img src="../Images/3a351bed8e1c30cd7d7db95f4b5848cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_hZv2Esx1ba0sPlqwixPEg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">点击/收缩以缩放</figcaption></figure><p id="0e6e" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">值得指出的是，除了通过Web UI直接与TACOS提供者通信，还可以使用CLI或REST API webhooks。</p><p id="af37" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">该图仅捕获了基础设施供应部分。一旦虚拟机或其他基础架构准备就绪，就可以开始工作负载部署。应用程序部署可以由TACOS提供触发，但它应该是一个单独的管道。</p><h2 id="c571" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">安全考虑</h2><p id="d289" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">大多数墨西哥卷饼供应商都提供了一个自我托管的选项，让墨西哥卷饼经营者在防火墙后面。存储用于管道触发、SSH凭证等的变量和秘密可以在自托管的保管库或TACOs提供商保管库中完成。</p><h1 id="484b" class="np kw jg bd kx nq nr ns la nt nu nv ld km nw kn lh kp nx kq ll ks ny kt lp nz bi translated">玉米卷供应商概述</h1><h2 id="4ac0" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">特拉格朗特</h2><p id="5a19" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Terragrunt 不是玉米卷，但它可能是我们试图搜索terraform自动化时发现的第一个开源东西。这是另一个在plain terraform上添加测试层的二进制文件。Terragrunt的主要目标是保持terraform代码干燥。不仅在我看来，它是一个相关的工具，而terraform本身还不够成熟。Terraform模块的良好使用以及良好的基础设施设置结构和配置正在解决这些问题。</p><h2 id="d223" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">亚特兰蒂斯</h2><p id="3a25" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated"><a class="ae jd" href="https://www.runatlantis.io/" rel="noopener ugc nofollow" target="_blank"> Atlantis </a>也不是一个完整的TACOS，但它是第一个尝试将terraform自动化添加到PRs的开源工具。可将PRs的Webhooks与Terraform代码更改配置为与Atlantis二进制文件(必须托管在基础架构中)通信，terraform计划和最终应用可在Atlantis二进制文件中运行。它将输出反馈给PR以获得可见性，并且该流程还可以配置为仅合并具有成功terraform计划的PR。</p><p id="98c9" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">这一功能目前在所有的墨西哥卷饼中都有(通过VCS流程)。有趣的事实是，设计亚特兰蒂斯的开发者目前在哈希公司工作。</p><h2 id="f857" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Terraform云TFC/Terraform企业TFE</h2><p id="723b" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">来自T <a class="ae jd" href="https://www.hashicorp.com/products/terraform" rel="noopener ugc nofollow" target="_blank"> erraform </a>原始发明者——hashi corp的提议。它们都可以提供相同的功能，主要区别在于托管模式。TFE是一个私有安装，其中TFC是一个典型的多租户SaaS产品。它涵盖了本文开头提到的所有领域。我将使用它作为参考解决方案，并提及其他产品的不同之处。</p><p id="14fc" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">这里还有一个有用的概念是<a class="ae jd" href="https://www.terraform.io/docs/cloud/workspaces/notifications.html" rel="noopener ugc nofollow" target="_blank">通知</a>，它可以在工作区发生各种事件后触发webhooks、发送电子邮件或通知slack channel。</p><h2 id="558c" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Scalr</h2><p id="1ee2" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Scalr 拥有与TFC/TFE非常相似的产品，包括所有主要功能。他们公开宣传自己是TFC/TFE的替代品，但价格公平。他们还提供多租户SaaS和自我管理的解决方案。</p><p id="956a" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">Scalr有一个<a class="ae jd" href="https://docs.scalr.com/en/latest/workspaces.html#custom-hooks" rel="noopener ugc nofollow" target="_blank">定制钩子</a>的概念，可以增强terraform工作流。它可以在terraform计划或应用之前或之后分别运行其他terraform命令(如fmt)、shell脚本和API调用。</p><p id="f82d" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">Scalr还有经典的<a class="ae jd" href="https://docs.scalr.com/en/latest/webhooks.html" rel="noopener ugc nofollow" target="_blank"> webhooks </a>，可以在各种事件后触发。配置在webhooks和端点之间进行内部分割。它还集成了Zapier。</p><p id="b894" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">Scalr有RBAC层和继承的概念(也用于凭证等)。).它可以作为产品和非产品或项目之间的区别。云凭证可以在顶层定义，然后向下传播到特定的工作区。授权配置也是如此。</p><p id="fd85" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">我们可以使用工作区<a class="ae jd" href="https://docs.scalr.com/en/latest/state_sharing.html" rel="noopener ugc nofollow" target="_blank">状态共享</a>在“平台”和“项目范围”环境之间共享信息。这更多是Terraform本身的问题，Scalr正在帮助实现可访问性。</p><p id="d6e5" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">在我看来，Scalr有一个更好的UI，有更多关于Terraform运行的信息。例如，一个视图，每个资源类型有几个添加、更改、删除的资源，并带有深入查看详细信息的选项。当试图在一个很长的列表中查看某个特定的东西时，请将它与普通的terraform平面图输出进行比较。</p><h2 id="ca53" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Env0</h2><p id="f9e3" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Env0 有墨西哥卷饼的功能，但它与TFC或Scalr有很大不同。它更接近于一个通用的CI/CD系统，因为他们非常关注<a class="ae jd" href="https://docs.env0.com/docs/custom-flows" rel="noopener ugc nofollow" target="_blank">定制流</a>，其中任何类型的脚本、ansible等等。可以添加到Terraform工作流中(应用前和应用后等。).他们支持terraform和Terragrunt(我觉得已经不重要了)模板。</p><p id="4c7b" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">它可以进行自动<a class="ae jd" href="https://docs.env0.com/docs/drift-detection" rel="noopener ugc nofollow" target="_blank">漂移检测</a>，在外部进程或用户从Terraform外部更改云环境后，Env0可以发出通知或采取措施。</p><p id="65ed" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">Env0有一个有趣的成本管理概念。它可以监控实际成本并将其与terraform部署相关联，还可以为团队和用户设置支出限制。</p><p id="dd3d" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">它还可以与TTL的整个环境，并自动删除它们。<a class="ae jd" href="https://docs.env0.com/docs/policy-ttl" rel="noopener ugc nofollow" target="_blank">策略TTL </a>有助于功能环境的设置。</p><p id="7cd6" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">除了上面提到的有趣的功能，我还有很多其他的问题。它不提供对状态文件的访问，它们是在幕后被管理的。我也没有找到任何与Terraform CLI集成的选项，所以它似乎不支持经典的远程运行，如TFC或Scalr。文档没有提供足够的细节。</p><h2 id="cd85" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">太空升降机</h2><p id="9f62" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated"><a class="ae jd" href="https://spacelift.io/" rel="noopener ugc nofollow" target="_blank"> Spacelift </a>和Env0一样有TACOS功能，但也和TFC或Scalr有很大不同，但和Env0不同。它也在某种程度上更接近于通用的CI/CD系统，并且它可能是最可定制的TACOS。除了terraform，它还支持Pulumi，并计划支持CloudFormation、Ansible和ARM模板。它希望提供一个包装器和类似的用户体验，而不管选择的“后端”技术。</p><p id="4cc1" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">关于定制，它还提供了<a class="ae jd" href="https://docs.spacelift.io/concepts/stack/stack-settings#customizing-workflow" rel="noopener ugc nofollow" target="_blank">定制工作流</a>，可以在terraform计划、销毁等之前和之后添加shell脚本。但是它也支持定制的runner图像，实际上任何东西都可以添加到Docker图像中。此外，可以将任意文件装载到运行容器中。但这些文件必须先上传到Spacelift。</p><p id="433e" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">它可以进行自动<a class="ae jd" href="https://docs.spacelift.io/concepts/stack/drift-detection" rel="noopener ugc nofollow" target="_blank">漂移检测</a>，其中Spacelift可以在一些外部过程或用户从Terraform外部改变云环境后通知或采取行动。</p><p id="76ea" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">除了在云工作区(在Spacelift中称为堆栈)之间共享远程状态的经典方法之外，它还允许共享<a class="ae jd" href="https://docs.spacelift.io/concepts/configuration/context#introduction" rel="noopener ugc nofollow" target="_blank">内部环境</a>这看起来是一种更好的方法，但需要更多的研究。</p><p id="b6b8" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">看来Spacelift也在推进一个私有的模块注册，并为带有<a class="ae jd" href="https://docs.spacelift.io/vendors/terraform/module-registry#tests" rel="noopener ugc nofollow" target="_blank">测试</a>的模块提供类似的CI/CD。</p><p id="4c0e" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">Spacelift还拥有最具可定制性的选项来配合<a class="ae jd" href="https://www.youtube.com/watch?v=GWWybopkyko&amp;t=2s" rel="noopener ugc nofollow" target="_blank"> OPA政策</a></p><h2 id="fd9d" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">玉米卷供应商比较矩阵</h2><p id="4c16" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">下表提供了各种IaC功能以及给定提供者对这些功能的支持的高级概述。</p><figure class="nl nm nn no gt is"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h2 id="e5ee" class="kv kw jg bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">额外资源</h2><ul class=""><li id="45b8" class="mw mx jg lt b lu lv lx ly le od li oe lm of mj nb nc nd ne bi translated"><a class="ae jd" href="https://www.youtube.com/watch?v=4MLBpBqZmpM&amp;ab_channel=CloudPosse" rel="noopener ugc nofollow" target="_blank">不同玉米卷供应商的比较</a></li><li id="d88f" class="mw mx jg lt b lu nf lx ng le nh li ni lm nj mj nb nc nd ne bi translated"><a class="ae jd" href="https://www.reddit.com/r/terraform/comments/lkylzk/scalr_vs_spacelift_vs_atlantis_vs_env0_bake_off/" rel="noopener ugc nofollow" target="_blank"> Reddit上有一个关于墨西哥玉米卷的讨论</a></li></ul><h1 id="c1d9" class="np kw jg bd kx nq nr ns la nt nu nv ld km nw kn lh kp nx kq ll ks ny kt lp nz bi translated">结论</h1><p id="7127" class="pw-post-body-paragraph lr ls jg lt b lu lv kh lw lx ly kk lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">TACOS将常见的平台级任务具体化。复杂的生产级terraform代码库通常需要TACOS支持。在全力投入Terraform之前，请考虑上述要求以及您的组织将如何支持它们。</p><p id="b22e" class="pw-post-body-paragraph lr ls jg lt b lu mo kh lw lx mp kk lz le mr mb mc li mt me mf lm mv mh mi mj ij bi translated">特别感谢<a class="ae jd" href="https://www.linkedin.com/in/oldrich-vykydal/" rel="noopener ugc nofollow" target="_blank"> Oldrich Vykydal </a>帮助整理这篇文章。</p></div></div>    
</body>
</html>