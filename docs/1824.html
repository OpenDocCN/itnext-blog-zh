<html>
<head>
<title>Service Preview: Accelerating your design-code-test cycle with Ambassador and Telepresence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">服务预览:通过大使和远程呈现加速您的设计代码测试周期</h1>
<blockquote>原文：<a href="https://itnext.io/service-preview-accelerating-your-design-code-test-cycle-with-ambassador-and-telepresence-a7d069d66273?source=collection_archive---------3-----------------------#2019-02-06">https://itnext.io/service-preview-accelerating-your-design-code-test-cycle-with-ambassador-and-telepresence-a7d069d66273?source=collection_archive---------3-----------------------#2019-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9570" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开发微服务的开发人员面临着一个与设计-编码-测试周期相关的常见挑战:在开发过程中针对其他服务进行集成测试。例如，工程师经常被迫创建(潜在的脆弱和不现实的)模拟，或者试图在本地构建一个完整的堆栈。基于<a class="ae kl" href="https://www.telepresence.io" rel="noopener ugc nofollow" target="_blank">网真</a>本地到远程Kubernetes项目的<a class="ae kl" href="https://www.getambassador.io/pro" rel="noopener ugc nofollow" target="_blank"> Ambassador Pro </a>的新服务预览功能旨在帮助开发人员解决这个问题，加速他们的设计代码测试周期。</p><h1 id="9e81" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">当前微服务开发的挑战</h1><p id="a0bf" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">假设Jane Developer正在她的笔记本电脑上编写API服务。该服务使用来自其他几个后端服务的数据。Jane想用后端服务对她的代码更改进行集成测试。在传统的开发环境中，Jane有以下选择:</p><ol class=""><li id="e06d" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">本地测试。Jane可以在本地设置所有后端服务。这使得她的本地开发环境更加复杂，并确保她的环境是最新的，而没有不断更新服务的维护难题。此外，如果她的后端服务需要大量内存/CPU，这个选项可能不实用。</li><li id="530d" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">在远程Kubernetes集群上进行测试。Jane可以远程部署所有服务。这使得测试变得更加麻烦，因为她必须提交代码并等待CI系统为集群构建和部署新的Docker映像。此外，出于测试目的，Jane必须维护她自己的私有集群(或名称空间),因为其他开发人员也不想看到她的更改。</li></ol><h1 id="f4e5" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">服务预览简介</h1><p id="c9ca" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">今天，我们将推出服务预览版，作为Ambassador Pro的一部分。有了服务预览，Jane有了更快、更简单的选择。在这个模型中，Jane(和她团队中的其他工程师)使用一个共享的环境，比如staging。来自Jane的请求被路由到Jane的笔记本电脑，因此Jane可以预览这些更改。重要的是，来自其他工程师的请求不会被路由到她的笔记本电脑，而是被路由到运行在临时环境中的Jane服务的稳定版本。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi md"><img src="../Images/f539dfdc3176df0992ef8d082a5d72e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H8yIhQtgFm6QJUXRj9xAGQ.png"/></div></div></figure><p id="713c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，Jane的开发工作流程变成了:</p><ol class=""><li id="9f14" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">在开发环境中，在她的笔记本电脑上本地运行服务，使用她最喜欢的IDE进行更改。</li><li id="e991" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">在提交之前，运行服务预览来查看Jane的服务所依赖的其他服务的这些变化。这些其他服务部署在共享环境中，例如，暂存。</li><li id="64cc" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">Jane可以向Ambassador发送测试请求，Ambassador会通过Telepresence将她的请求动态地发送到她的笔记本电脑上。其他用户将看不到她的任何更改。</li><li id="7b12" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">一旦对她的更改感到满意，Jane就提交她的代码，并允许CI将这些更改部署给其他所有人。</li></ol><h1 id="2c4f" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">为什么要服务预览？</h1><p id="cb1e" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们构建了Service Preview，为应用程序开发人员提供本地和云开发的优势。服务预览<em class="mp">不是</em>CI/CD的替代品——相反，它有助于加速开发的“<a class="ae kl" href="https://mitchdenny.com/the-inner-loop/" rel="noopener ugc nofollow" target="_blank">内循环</a>”(如果你对更多背景感兴趣，<a class="ae kl" href="https://www.slideshare.net/datawire/kubecon-na-2018-effective-kubernetes-develop-turbocharge-your-dev-loop-philip-lombardi" rel="noopener ugc nofollow" target="_blank"> Phil Lombardi在KubeCon NA 2018 </a>上就此发表了演讲)。</p><ol class=""><li id="b295" class="lp lq iq jp b jq jr ju jv jy lr kc ls kg lt kk lu lv lw lx bi translated">你得到了本地开发的好处:使用你喜欢的IDE，快速迭代反馈，热重装。</li><li id="30cf" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">您可以获得云开发的好处:无限的计算/内存，真实的测试环境。</li><li id="b3d3" class="lp lq iq jp b jq ly ju lz jy ma kc mb kg mc kk lu lv lw lx bi translated">您的组织可以采用一个<strong class="jp ir">共享开发/集成测试环境</strong> <em class="mp">，</em>，其中每个开发人员都能够针对其他人的最新服务版本进行测试。这也可以减少为您的工程团队维护开发基础设施的成本。</li></ol><p id="c766" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这最后一点可能是我们在您的团队中采用服务预览的最大好处。在微服务应用程序中，服务被持续部署，导致应用程序成为不断移动的目标。借助Service Preview，开发人员可以在一个共享环境中测试其他所有人服务的最新版本。</p><h1 id="6f12" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">入门指南</h1><p id="4cea" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">服务预览版还在测试阶段，是Ambassador Pro的核心功能之一，还有单点登录和速率限制。要开始，请查看<a class="ae kl" href="https://www.getambassador.io/docs/dev-guide/service-preview/" rel="noopener ugc nofollow" target="_blank">服务预览教程</a>。</p><p id="1e0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mp">本文原载于</em> <a class="ae kl" href="https://blog.getambassador.io/service-preview-accelerating-your-design-code-test-cycle-with-ambassador-and-telepresence-4e560d9872c5" rel="noopener ugc nofollow" target="_blank"> <em class="mp">大使博客</em> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>