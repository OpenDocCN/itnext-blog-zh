<html>
<head>
<title>DataStore — CRUD (Create Read Update Delete)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据存储— CRUD(创建读取更新删除)</h1>
<blockquote>原文：<a href="https://itnext.io/datastore-crud-create-read-update-delete-2bceac8312e2?source=collection_archive---------2-----------------------#2020-05-26">https://itnext.io/datastore-crud-create-read-update-delete-2bceac8312e2?source=collection_archive---------2-----------------------#2020-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/1ef912caab0809ebbd8a02fd929b0828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9cp92cxjNcYkHS77PP3tCw.png"/></div></div></figure><div class=""/><h1 id="2d84" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">再见Redux，MobX，阿波罗！</h1><p id="a404" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">后端和前端的线断了！国家管理者进化的创新一步。</p><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="ea7e" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">开发web和移动应用程序最困难的任务之一是在设备之间同步数据和执行离线操作。理想情况下，当设备离线时，您的客户应该能够继续使用您的应用程序，不仅可以访问数据，还可以创建和修改数据。当设备恢复在线时，应用程序必须重新连接到后端，同步数据并解决冲突(如果有的话)。正确处理所有极端情况需要大量无差别的代码，即使在具有自主突变和增量同步的设备上使用AWS AppSync SDK缓存时也是如此。</p><p id="aed9" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">Amplify DataStore在设备上提供持久存储，以便在您连接到互联网或离线的情况下记录、读取和监控数据变化，并且还可以轻松地与云以及设备之间同步数据。</p><p id="69a5" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">Amplify DataStore允许开发人员使用分布式数据编写应用程序，而无需为离线或在线脚本编写额外的代码。</p><p id="2424" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">您可以在没有AWS帐户的情况下在仅本地模式下离线使用Amplify DataStore，或者使用AWS AppSync和Amazon DynamoDB提供整个后端。</p><p id="8e60" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">数据存储包括使用GraphQL后端的增量同步和几个冲突解决策略。</p><h1 id="d696" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">AWS Amplify DataStore相对于Redux、MobX、Apollo、Relay、选择器的优势:</h1><p id="1412" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">将AWS Amplify与Redux相比较，MobX是不正确的，因为AWS Amplify不仅是一个状态管理器，还是一个客户端-服务器，所以在客户端-服务器类中我们将它与Apollo和Relay相比较。</p><h1 id="eaa3" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">1.即时开箱即用。</h1><p id="28e5" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我认为，如果一个企业的移动应用程序没有受到使用web sockets技术实现的订阅事件的影响，就不能认为这个企业是认真的。现在有多少应用程序在web套接字上工作？我认为不会，因为实时是开发者在后台和前端的额外工作。对于我们来说，AWS Amplify上的<a class="ae mf" href="https://fullstackserverless.github.io/docs/amplify-01" rel="noopener ugc nofollow" target="_blank">full stack server less</a>开发人员，实时是开箱即用的，无论是在前端还是后端，我们不需要为每个模型编写集成web sockets的实现代码，因为它是自动生成的，我们还需要为所有生成的代码编写文档，在我们的项目中基于GraphQL schema指令实现。为了不被大话吓到，我给你看一个来自<a class="ae mf" href="https://fullstackserverless.github.io/docs/amplify-03" rel="noopener ugc nofollow" target="_blank">上一课</a>的例子，商店在AWS Amplify中是如何定义的:</p><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><p id="21ef" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">这就决定了店内的模式，不仅是前端，后端也是如此。前端和后端的一个真实来源。是的，是的，我看到我这辈子还会不止一次重复，既然这是一个杀手级的特性和妙语vs Redux，MobX，Apollo，Relay。</p><p id="1847" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">就是这个架构，不同于Redux，MobX，Apollo，抹去了后端和前端之间的界限。并将AWS Amplify数据存储置于每个人之上</p><p id="68fc" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如果您来自后端，那么您不再需要向数据库中编写解析器并将订阅拖到每个数据模型中。</p><p id="9675" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">无服务器——这是后端开发人员开始学习前端的时候，因为他们的服务只需要用于那些跟不上时代的项目，并且他们不能实时生活。</p><h1 id="13e0" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">2.代码生成。</h1><p id="ec96" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">什么是代码生成，你可以不用我在维基百科上阅读，除非你知道它的意思，这让我们想起了你自己。用fetch还是axios？通过向深林API发送请求，我们也是结合Redux，MobX，Apollo，Relay来写的。这是今天的另一条新闻！你不再需要编写这些API调用，你只需要调用它们。这意味着您不再需要使用服务器请求代码创建这个庞大的daddy，因为在AWS Amplify DataStore中，它们也是基于您的存储在您的项目中生成的，由它们的第一个项目的完全相同的GraphQL图定义。这是一个命令:</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="1a97" class="mm jz jb mi b gy mn mo l mp mq">npm run amplify-modelgen</span></pre><p id="cea0" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">结果，我们得到了包含生成代码的models文件夹。</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mr"><img src="../Images/3b6ba1bb53183eed705ca7b4e973a5da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9yGQ8Y6HKcU_ufUY0nr2jw.png"/></div></div></figure><p id="4b71" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">和推送到服务器后的graphql文件夹，所有请求都在Flow、TS或普通JavaScript中。</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/c3fd181f8a11687eeca97aa5e19baf69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cyJwN8mKDvtKnsqZJnGHfQ.png"/></div></div></figure><h1 id="bea5" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">3.离线数据和云同步</h1><p id="8cb2" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">应用程序在线后，无需编写额外的代码向服务器发送请求。有时你会发现自己处于一个不可靠的情况，但你最好等待更长的时间，而不是明显失败的行动。Apollo有apollo-link-retry，它在默认尝试之间提供指数级回滚和服务器请求。的确，他(目前)不处理响应中GraphQL错误的重试，只处理网络错误。Redux、MobX当然没有这个解决方案，因为它们不是客户端，你必须使用第三方中间件，因为REST就像一个退休的祖父，有任何孙子孙女的支持。<a class="ae mf" href="https://fullstackserverless.github.io/docs/amplify-02" rel="noopener ugc nofollow" target="_blank"> GraphQL vs REST </a>的详细分析。AWS Amplify DataStore不仅有一个apollo-link-retry的模拟，还有一个内置的可定制的熟悉编程模型，在云中具有自动版本控制、冲突检测和解决。</p><p id="d9c4" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在AWS Amplify的缺点中，我想提一下Apollo hooks的加载和开箱即用的错误减少了前端编写的代码量。</p><p id="3c8c" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae mf" href="https://aws-amplify.github.io/docs/js/datastore" rel="noopener ugc nofollow" target="_blank">官方文件</a></p><p id="00c6" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">本课结束时，我们将与您一起收集使用Amplify DataStore的移动应用程序:</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/0951419cbe66748d9a006feb345afb33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94pQbPD1bBm6flHjoqu0rQ.png"/></div></div></figure><h1 id="3b3f" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">走吧。</h1><p id="5165" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们的AWS放大支持聊天<a class="ae mf" href="https://discord.gg/Ntuttww" rel="noopener ugc nofollow" target="_blank">不和</a></p><p id="91b9" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">该器件的最终代码可在<a class="ae mf" href="https://github.com/fullstackserverless/startup/tree/datastore" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/342577d5100184f294435772f4b5ca62.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*lCDgpRx7NF2PpdXinXYOoA.png"/></div></figure><h1 id="d367" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">克隆存储库</h1><p id="5dec" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果继续上一课，可以直接进入步骤5。</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="d137" class="mm jz jb mi b gy mn mo l mp mq">git clone <a class="ae mf" href="https://github.com/fullstackserverless/startup.git" rel="noopener ugc nofollow" target="_blank">https://github.com/fullstackserverless/startup.git</a></span></pre><p id="033d" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">转到项目文件夹</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="5fb2" class="mm jz jb mi b gy mn mo l mp mq">cd startup</span></pre><p id="3f66" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">安装依赖项</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="081b" class="mm jz jb mi b gy mn mo l mp mq">yarn</span></pre><p id="634e" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">或者</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="bc3e" class="mm jz jb mi b gy mn mo l mp mq">npm install</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/090d7312e94c38086c38931961178a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*Yx4A6GbZ_D12xDuXeBrjtA.png"/></div></figure><h1 id="5d7b" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">注册您的AWS帐户</h1><p id="762d" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">对于那些还没有注册的AWS我们按照<a class="ae mf" href="https://aws-amplify.github.io/docs/" rel="noopener ugc nofollow" target="_blank">这个</a>指令进行注册📃通过视频教程ем，我们检查了所有5个步骤。</p><blockquote class="mv mw mx"><p id="c1e6" class="kw kx my ky b kz ma lb lc ld mb lf lg mz mc lj lk na md ln lo nb me lr ls lt ij bi translated">你需要一张银行卡💳，哪里应该超过1个亿💵在这里，我们看到并放入了Amplify命令行界面(CLI)</p></blockquote><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/9a3b802716edc9254471e713d5cd16c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*nrqhShuHYxq2Y0JxguuHzQ.png"/></div></figure><h1 id="d0d2" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">在React本地项目中初始化AWS Amplify</h1><p id="fe95" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在React本地项目的根目录中初始化我们的AWS Amplify项目。</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="801b" class="mm jz jb mi b gy mn mo l mp mq">amplify init</span></pre><p id="df58" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">我们回答这些问题:</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/89941d97fe6bc63c6f4b57fe3bca15bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRS5sq2YawZsDHmWM3o_Zw.png"/></div></div></figure><p id="ffdb" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">项目已初始化🚀</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/753c1b2c3c4510bc347ae4b5f944888c.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*r0cP2YH6lqANqZkqmn5pJA.png"/></div></figure><h1 id="7968" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">连接身份验证插件</h1><p id="d246" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在应用程序已经在云中了，您可以添加一些特性，比如允许用户注册我们的应用程序并登录。</p><p id="8889" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">我们连接认证功能。</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="0222" class="mm jz jb mi b gy mn mo l mp mq">amplify add auth</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/ea7e0d55a7369ad5d3881c95b9b9a886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zrdg_9KsRlMb_j5QBsGuw.png"/></div></div></figure><p id="b28c" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">向云提交更改💭</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="c17a" class="mm jz jb mi b gy mn mo l mp mq">amplify push</span></pre><p id="f55d" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">✔所有的资源都在云中更新</p><p id="7e90" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">我们收集项目并检查认证的操作。</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ne"><img src="../Images/41470d5e7a07ca9f8c3052e759577ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCNadrIb1mb6rSor6dus4g.png"/></div></div></figure><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/28cd1538cc652f572a200c53c67bbdd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*0jhAmkd3gCTB8SzZNpHDqw.png"/></div></figure><h1 id="cfd4" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">放大应用程序</h1><p id="bbcb" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">开始使用数据存储的最快方法是使用npx脚本amplify-app。</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="fc40" class="mm jz jb mi b gy mn mo l mp mq">npx amplify-app@latest</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/529850b38f27f1011d380a50b4df1a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*NL7CyGCAX99NrKLzbsmF_g.png"/></div></figure><h1 id="5789" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">安装依赖项</h1><p id="78e3" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">详细安装<a class="ae mf" href="https://aws-amplify.github.io/docs/js/datastore#setup" rel="noopener ugc nofollow" target="_blank">此处</a></p><p id="0828" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如果您有一个React本机Cli，那么</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="72eb" class="mm jz jb mi b gy mn mo l mp mq">yarn add @aws-amplify/datastore @react-native-community/netinfo @react-native-community/async-storage</span></pre><p id="dccb" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如果您使用React Native&gt; 0.60，则运行以下iOS命令:</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="309f" class="mm jz jb mi b gy mn mo l mp mq">cd ios &amp;&amp; pod install &amp;&amp; cd ..</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/72ee675db630c197f51f76a7094b818b.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*rolm1ehZDm27ctpcGH2FnQ.png"/></div></figure><h1 id="55a9" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">连接API插件(应用程序同步)</h1><p id="2ede" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果您在最后一课的<a class="ae mf" href="https://fullstackserverless.github.io/docs/amplify-03" rel="noopener ugc nofollow" target="_blank">中连接了它，则跳过这一步。如果没有，连接API插件</a></p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="690a" class="mm jz jb mi b gy mn mo l mp mq">amplify add api</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/1df46d95626eb453161f5a4f8bdc2a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*msUZAufY61k9yxeVXhw4Uw.png"/></div></div></figure><p id="1266" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在选定项目之后，GraphQL模式将在<code class="fe ng nh ni mi b">amplify/backend/api/&lt;datasourcename&gt;/schema.graphql</code>中打开，我们在这里插入这个模型:</p><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><p id="89a8" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">这里有更多关于<a class="ae mf" href="https://fullstackserverless.github.io/docs/amplify-03#schemagraphql" rel="noopener ugc nofollow" target="_blank">的信息</a></p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/c144a08056ef34d9b9fbfc0050a2cde0.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*nJNV6rtZtaTE82tDNsX-vQ.png"/></div></figure><h1 id="bfe4" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">模型生成</h1><p id="b249" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">对数据建模并创建数据存储所使用的模型是开始的第一步。GraphQL作为JavaScript、iOS和Android对于这个过程的通用语言，在与云端同步时也作为网络协议使用。GraphQL也支持一些特性，比如AppSync中的Automerge。可以使用NPX脚本或从命令行使用Amplify CLI来生成模型。</p><blockquote class="nj"><p id="8855" class="nk nl jb bd nm nn no np nq nr ns lt dk translated"><em class="nt">您不需要AWS帐户来运行它并在本地使用数据存储，但是，如果您想要与云同步，建议您按照上一课的说明安装和配置Amplify CLI</em></p></blockquote><p id="37ed" class="pw-post-body-paragraph kw kx jb ky b kz nu lb lc ld nv lf lg lh nw lj lk ll nx ln lo lp ny lr ls lt ij bi translated">由于我们在上一课中描述了电路，现在我们可以运行命令了</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="c703" class="mm jz jb mi b gy mn mo l mp mq">npm run amplify-modelgen</span></pre><p id="6e91" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">并在src/models文件夹中获取生成的模型</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/bfc57dc865dc410a55bf06a9335aabc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*Vg7BFx9bx5pt3iLw80TLWA.png"/></div></figure><h1 id="6636" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">更新API</h1><p id="3e54" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们包括所有API的数据存储</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="c697" class="mm jz jb mi b gy mn mo l mp mq">amplify update api</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/c4227436b1355d416d7f2211430fba2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*miti7MDcyKo5Ji0IOmxP3A.png"/></div></div></figure><p id="5067" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">向云提交更改💭</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="7171" class="mm jz jb mi b gy mn mo l mp mq">amplify push</span></pre><p id="8bae" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">✔所有的资源都在云中更新</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/950400d714d9f201bad17eb0a392719c.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*34Iq4EM0N4sLOda9cL8lEw.png"/></div></figure><h1 id="1bba" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">阅读</h1><p id="9525" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">创建Jobs main src/screens/Jobs/Jobs main . js屏幕</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ne"><img src="../Images/e11daac2c41b25a8c69fcef5d44590b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ulmiYfbkGxVQle_4ZGNERQ.png"/></div></div></figure><p id="b862" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在这个屏幕上，我们将使用pagination选项进行查询，其中的数字是通过useQuery钩子得到的，它将向我们返回一个数组，我们将把这个数组发送到Flatlist。</p><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><p id="7bb6" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">要披露空缺的详细信息，请创建屏幕job detail src/screens/Jobs/job detail . js</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ne"><img src="../Images/7682b67293c659cf525126ffcc88c5a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S2mpYIzkYAiI_Z1s4HgzyQ.png"/></div></div></figure><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/60b592e243819f7aabf90912374f7094.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*gfA8xM8cgZ819WI2fml10Q.png"/></div></figure><h1 id="6818" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">创建更新删除</h1><p id="5375" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">创建屏幕JobAdd src/screens/Jobs/JobAdd . js，我们在其中执行函数CREATE UPDATE DELETE</p><figure class="lu lv lw lx gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ne"><img src="../Images/2c9ac4dfaef626f6fe09bb6195f58ec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFnQVZzdpW0mt1fsblVuLQ.png"/></div></div></figure><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><p id="8e25" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在screens/Jobs/index.js中，我们导出屏幕</p><pre class="lu lv lw lx gt mh mi mj mk aw ml bi"><span id="9cad" class="mm jz jb mi b gy mn mo l mp mq"><em class="my">export</em> * <em class="my">from</em> './JobsMain'</span><span id="d540" class="mm jz jb mi b gy oa mo l mp mq"><em class="my">export</em> * <em class="my">from</em> './JobDetail'</span><span id="c720" class="mm jz jb mi b gy oa mo l mp mq"><em class="my">export</em> * <em class="my">from</em> './JobAdd'</span></pre><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/db15959dbf686cc957472e18f48106b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*OivmpRShGT_8OBEXQLFuOg.png"/></div></figure><h1 id="89cc" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">航行</h1><p id="810a" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">添加导入作业屏幕并将它们连接到StackNavigator</p><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><figure class="lu lv lw lx gt is gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/16a86f1b76a7009acf9f686d0c2213fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*4K58-DUHMVXALADVN9M1_Q.png"/></div></figure><h1 id="a903" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">作业按钮</h1><p id="b42d" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在screens/Authenticator/User/index . js中编辑用户屏幕</p><figure class="lu lv lw lx gt is"><div class="bz fp l di"><div class="mg lz l"/></div></figure><p id="646b" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">构建应用程序并进行测试</p><h2 id="4d5e" class="mm jz jb bd ka ob oc dn ke od oe dp ki lh of og km ll oh oi kq lp oj ok ku ol bi translated"><a class="ae mf" href="https://fullstackserverless.github.io/docs/amplify-04#done-" rel="noopener ugc nofollow" target="_blank"> # </a>搞定了✅</h2><h1 id="cd71" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">参考资料:</h1><p id="4b62" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><a class="ae mf" href="https://aws-amplify.github.io/" rel="noopener ugc nofollow" target="_blank">https://AWS-amplify . github . io</a></p><p id="4051" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae mf" href="https://learning.oreilly.com/library/view/full-stack-serverless/9781492059882/" rel="noopener ugc nofollow" target="_blank">https://learning . oreilly . com/library/view/full-stack-server less/9781492059882/</a></p><p id="0313" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae mf" href="https://www.altexsoft.com/blog/engineering/graphql-core-features-architecture-pros-and-cons/" rel="noopener ugc nofollow" target="_blank">https://www . altex soft . com/blog/engineering/graph QL-core-features-architecture-pros-and-cons/</a></p><p id="0a76" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae mf" href="https://engineering.fb.com/core-data/graphql-a-data-query-language/" rel="noopener ugc nofollow" target="_blank">https://engineering . FB . com/core-data/graph QL-a-data-query-language/</a></p><p id="b477" class="pw-post-body-paragraph kw kx jb ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae mf" href="https://graphql.org/learn" rel="noopener ugc nofollow" target="_blank">https://graphql.org/learn</a></p><figure class="lu lv lw lx gt is gh gi paragraph-image"><a href="https://www.patreon.com/fullstackserverless"><div class="gh gi om"><img src="../Images/e4b39fe8ea6b64823bf021c3647a7f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AMFtkl_QvKCKVEKBL6Avvw.png"/></div></a></figure></div></div>    
</body>
</html>