<html>
<head>
<title>Custom Theme using Theme Extensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用主题扩展自定义主题</h1>
<blockquote>原文：<a href="https://itnext.io/custom-theme-using-theme-extensions-8afb67248d2b?source=collection_archive---------1-----------------------#2022-12-16">https://itnext.io/custom-theme-using-theme-extensions-8afb67248d2b?source=collection_archive---------1-----------------------#2022-12-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1b13af527e198bfc43b66cd1da36a70f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HPc30sYxRMBIRD3R_HZZqg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">颤振中的主题扩展</figcaption></figure><h1 id="2ae7" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">视频教程</strong></h1><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">颤振中的主题扩展</figcaption></figure><p id="c261" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">主题扩展是在Flutter 3中引入的。</p><p id="bf49" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated"><strong class="li ir">但是什么是主题扩展呢？</strong></p><p id="d612" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">顾名思义，它有助于用我们自己的扩展来扩展内置的主题。</p><p id="6426" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">让我们来看一个例子</p><p id="8e19" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">因此，当你创建一个flutter应用程序时，你的基本根部件将如下所示</p><pre class="la lb lc ld gt me mf mg bn mh mi bi"><span id="047f" class="mj kd iq mf b be mk ml l mm mn"> return MaterialApp(<br/>      title: 'Flutter Theme Extensions',<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.blue,<br/>      ),<br/>      home: const HomePage(),<br/> );</span></pre><p id="306f" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">在这里，如果你想改变主题，你基本上可以自定义主题数据，但你不能添加你自己的属性，如下所示。</p><pre class="la lb lc ld gt me mf mg bn mh mi bi"><span id="255e" class="mj kd iq mf b be mk ml l mm mn">return MaterialApp(<br/>      title: 'Flutter Theme Extensions',<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.blue,<br/>        'myColor': '#FFAABBCC' // won't work<br/>      ),<br/>      home: const HomePage(),<br/> );</span></pre><p id="c4c2" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">但是如果我想要，我该怎么做呢？</p><p id="5407" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">扩展来了。</p><pre class="la lb lc ld gt me mf mg bn mh mi bi"><span id="78c2" class="mj kd iq mf b be mk ml l mm mn">return MaterialApp(<br/>      title: 'Flutter Theme Extensions',<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.blue,<br/>        extensions: &lt;ThemeExtension&lt;dynamic&gt;&gt;[<br/>           // your colors and styles<br/>        ],<br/>      ),<br/>      home: const HomePage(),<br/> );</span></pre><p id="0568" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">让我们看看如何创建一个。创建一个名为“MyColors”的新类。</p><pre class="la lb lc ld gt me mf mg bn mh mi bi"><span id="3087" class="mj kd iq mf b be mk ml l mm mn">import 'package:flutter/material.dart';<br/><br/>@immutable<br/>class MyColors extends ThemeExtension&lt;MyColors&gt; {<br/>  //<br/>  const MyColors({<br/>    required this.success,<br/>    required this.failure,<br/>  });<br/><br/>  final Color? success;<br/>  final Color? failure;<br/><br/>  @override<br/>  ThemeExtension&lt;MyColors&gt; copyWith({Color? success, Color? failure}) {<br/>    return MyColors(<br/>      success: success ?? this.success,<br/>      failure: failure ?? this.failure,<br/>    );<br/>  }<br/><br/>  @override<br/>  ThemeExtension&lt;MyColors&gt; lerp(ThemeExtension&lt;MyColors&gt;? other, double t) {<br/>    if (other is! MyColors) {<br/>      return this;<br/>    }<br/>    return MyColors(<br/>      success: Color.lerp(success, other.success, t),<br/>      failure: Color.lerp(failure, other.failure, t),<br/>    );<br/>  }<br/><br/>  @override<br/>  String toString() {<br/>    return 'MyColors(success: $success, failure: $failure)';<br/>  }<br/><br/>  static const light = MyColors(<br/>    success: Color(0xFF28A745),<br/>    failure: Color.fromARGB(255, 128, 7, 35),<br/>  );<br/><br/>  static const dark = MyColors(<br/>    success: Color.fromARGB(255, 226, 234, 8),<br/>    failure: Color.fromARGB(255, 205, 127, 18),<br/>  );<br/>}</span></pre><p id="ef14" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">在上面的代码中，我只声明了两个变量success和false。</p><p id="ce1b" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">并覆盖两个方法<strong class="li ir"> copyWith </strong>和<strong class="li ir"> lerp </strong>返回新的MyColor。</p><p id="cc13" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">为了方便起见，声明了两个方法“light”和“dark”用于不同的模式，并用每种模式的颜色进行了初始化。</p><h1 id="4ed4" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">用法</strong></h1><p id="e593" class="pw-post-body-paragraph lg lh iq li b lj mo ll lm ln mp lp lq lr mq lt lu lv mr lx ly lz ms mb mc md ij bi translated">现在在UI中，您可以像访问任何其他主题变量一样访问它。</p><pre class="la lb lc ld gt me mf mg bn mh mi bi"><span id="56df" class="mj kd iq mf b be mk ml l mm mn"> Widget build(BuildContext context) {<br/>    final myColors = Theme.of(context).extension&lt;MyColors&gt;()!;<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        title: const Text('Flutter Theme Extensions'),<br/>      ),<br/>      body: Container(<br/>        alignment: Alignment.center,<br/>        padding: const EdgeInsets.all(30),<br/>        child: Column(<br/>          children: [<br/>            Text(<br/>              'Hello Flutter',<br/>              style: Theme.of(context).textTheme.bodyLarge,<br/>            ),<br/>            const SizedBox(height: 30),<br/>            Container(<br/>              width: 200,<br/>              height: 200,<br/>              color: _failure ? myColors.failure : myColors.success,<br/>            ),<br/>            const SizedBox(height: 30),<br/>            TextButton(<br/>              onPressed: () {<br/>                setState(() {<br/>                  _failure = !_failure;<br/>                });<br/>              },<br/>              child: Text(_failure ? 'Failure' : 'Success'),<br/>            )<br/>          ],<br/>        ),<br/>      ),<br/>    );<br/>  }</span></pre><p id="d011" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">在上面的代码中</p><pre class="la lb lc ld gt me mf mg bn mh mi bi"><span id="ff8c" class="mj kd iq mf b be mk ml l mm mn">final myColors = Theme.of(context).extension&lt;MyColors&gt;()!;</span></pre><p id="807b" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">有助于获得my colors<strong class="li ir">和MyColors </strong>，然后你可以通过myColors.success和myColors.failure来访问我们的自定义主题颜色。通过这种方式，MyColors成为了(上下文)小部件的一部分。</p><p id="bb98" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">非常简单方便。</p><p id="dcaa" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">观看<a class="ae mt" href="https://www.youtube.com/watch?v=7lFIDCnK6Dg&amp;ab_channel=MobileProgrammer" rel="noopener ugc nofollow" target="_blank">视频教程</a>以了解它的运行情况。</p><p id="54be" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">如果你觉得这篇文章有用，请鼓掌分享。</p><p id="cf0b" class="pw-post-body-paragraph lg lh iq li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>