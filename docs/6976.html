<html>
<head>
<title>Using LightSail with CloudFront and Route53</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将LightSail与CloudFront和Route53配合使用</h1>
<blockquote>原文：<a href="https://itnext.io/how-configure-a-wordpress-site-with-lightsail-using-cloudfront-and-route-53-c52ce5719b82?source=collection_archive---------0-----------------------#2022-05-02">https://itnext.io/how-configure-a-wordpress-site-with-lightsail-using-cloudfront-and-route-53-c52ce5719b82?source=collection_archive---------0-----------------------#2022-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1682" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我们将使用CloudFront和Route 53建立一个带有LightSail的WordPress站点。</p><p id="1224" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便说一句，如果你是一名云工程师，你可能会有兴趣加入topcloudops.com网络。伟大的客户，伟大的项目，伟大的薪酬。</p><p id="3e23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你只想孤立地做一个WordPress网站，使用Lightsail是很棒的。您可以配置一个域并将其指向您的网站，添加一个负载平衡器来分配负载，并添加分布以使用AWS edges网络高效缓存内容。看起来棒极了！但事实并非如此。</p><p id="53c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问题是当你使用Lightsail时，你已经有了一个AWS账户，这个账户有一个route 53来管理你的域名，有一个CloudFront来处理你的发布。在这种情况下，结合使用两者是很难设置的。</p><p id="744f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我将以mydomain.com域为例，向您展示如何配置Route 53和Cloudfront。</p><p id="f8c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以还是言归正传吧。</p><ol class=""><li id="2565" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><strong class="jp ir">创建一个Lighsail WordPress实例</strong> <br/>转到Lightsail，点击创建实例，选择正确的位置(与你现有堆栈的其余部分相同)一个操作系统(Linux对我来说似乎是一个没有大脑的东西)，和Bitnami WordPress映像。</li></ol><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/7e39a2b458151a061a7670eed65c5d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*QEdb5vMWqF92CwQTaOJwag.png"/></div></figure><p id="d7c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择你的方案，我会选择最便宜的，考虑到大部分内容会由CloudFront CDN交付，只有login和admin没有缓存。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/7b508ea60e43c18aa14807ef870045bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QK7iGBwO_OK5-GdFd2yX-A.png"/></div></div></figure><p id="da40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，选择实例的数量，我们就完成了。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi li"><img src="../Images/5f502cb2ee19bed5b506f0596edf2642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fdfihtnvClypagNurWiDTw.png"/></div></div></figure><p id="4ae5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于本教程，我将只选择一个，因为我们将使用静态IP指向origin.mydomain.com，如果我们决定有多个，我们将需要使用负载平衡器来分配负载或加权延迟路由53策略。如果您使用负载均衡器，每月会有18美元的额外费用</p><p id="4005" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，现在单击create，等待实例启动并运行。</p><p id="28aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir">创建静态Ip: </strong></p><p id="0c18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我之前提到的，现在是时候给我们的LightSail实例分配一个静态Ip了，这样我们就可以将origin.mydomain.com指向它。如果我们不这样做，IP可能会因不同的事件而改变，我们的路由将不再有效。为此，我们需要在新实例中单击-&gt;转到Network选项卡，然后单击create static IP。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/46ae02f23643d11f03d8c6d4debbdbc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zsHV1xM9KIsfHYSlC7h2_A.png"/></div></div></figure><p id="fb42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<strong class="jp ir">创建一条指向origin.mydomain.com的记录:</strong></p><p id="d1f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了一个静态IP，我们将转到53号路由，创建一个A记录，将origin.mydomain.com指向我们的静态IP。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/6f7d979a6dfd01b12fdc5515f180ba75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*plNorm0CjaZJL50I-WzEIA.png"/></div></figure><p id="4e9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，请转到Route53-&gt;打开您的托管区域-&gt;使用此配置创建一个A记录:</p><p id="6155" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">记录名称<strong class="jp ir">origin.mydomain.com<br/>记录类型<strong class="jp ir">一条记录<br/>值</strong>我们的LightSail实例的静态IP。</strong></p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/60542f70cf56ce50d96e8e66b39662f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*ITqta8P0webtNjl-x-JPBA.png"/></div></figure><p id="5f6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们让DNS传播更改5分钟，键入origin.mydomain.com将把我们导向我们的实例。但是只支持HTTP。</p><p id="7fd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.<strong class="jp ir"> LightSail实例SSL证书。</strong></p><p id="739f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经为LightSail实例完成了Route 53配置，我们需要安装SSL证书，以便能够在我们的实例和Cloudfront之间建立SSL连接。在我们可以生成证书之前，需要步骤3。</p><p id="b436" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，请转到LightSail-&gt;打开您的实例-&gt;点击按钮使用SSH连接。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/e2b7f8c1450fa3ce218b40901a54953a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RxH45-R7NUPegcPzLXQ-Qw.png"/></div></figure><p id="6896" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将打开一个终端，我们接下来要做的是从Bitnami执行这个脚本，使用L <em class="lm"> etsencrypt生成SSL证书。</em></p><p id="302d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ln lo lp lq b">sudo /opt/bitnami/bncert-tool</code></p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/f2e943c668a00be8e6ae01b074371631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPsNXC076Z2_i8MhoHjxtw.png"/></div></div></figure><p id="52f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们执行，它将询问我们要生成证书的域:我们将在空格分隔的列表中键入以下内容</p><p id="129f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">origin.mydomain.com<a class="ae kl" href="http://www.mydomain.com" rel="noopener ugc nofollow" target="_blank">www.mydomain.com</a>mydomain.com</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lr"><img src="../Images/955bf6f6be7315f6342ccc13a13b6d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WsPYkrhklbjTvAXnbp9dEg.png"/></div></div></figure><p id="55b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，将询问我们是否要在证书中包含<a class="ae kl" href="http://www.origin.mydomain.com" rel="noopener ugc nofollow" target="_blank">www.origin.mydomain.com</a>，我们将键入(n)</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lr"><img src="../Images/9e31d770ec79980e050b7fa8c7882adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s6LE0qPI2bg8op3hE44CJA.png"/></div></div></figure><p id="ca9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，它将询问我们是否要从www-&gt; origin设置重定向，我们将为所有重定向问题键入(n)。</p><p id="be31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一个问题我们会回答是。</p><p id="06d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们让脚本来完成这项工作，我们已经为Lighsail实例完成了SSL证书配置。</p><p id="b920" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们应该可以输入https://origin.mydomain.com了</p><p id="b1f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 5。创建用于CloudFront的SSL证书。</strong></p><p id="e606" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要完成这一部分，我们需要在AWS控制台上转到证书管理:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/1c51baa51ac21367d431a7ec4009c795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-tcbYjY98A4dk6Aqi0rP4g.png"/></div></div></figure><p id="246a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在那里，我们将单击申请新证书。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/22485bb94510a051e4a8c7e40251589f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjSNO_sfsW9ZPCpC3EacWQ.png"/></div></figure><p id="2424" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择申请公共类型证书。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ls"><img src="../Images/8861aa05a604e44965724f5ef68c72f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m3_5jLeHMMPcbsklu6M_Zg.png"/></div></div></figure><p id="20f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在完全限定的域中，我们将键入mydomain.com，然后我们将单击“向此证书添加另一个名称”按钮，并添加<a class="ae kl" href="http://www.mydomain.com." rel="noopener ugc nofollow" target="_blank">www.mydomain.com。</a>我们需要一个支持多个子域的证书，因为CloudFront只接受一个证书，我们希望我们的发行版同时服务于<a class="ae kl" href="https://mydomain.com" rel="noopener ugc nofollow" target="_blank">https://mydomain.com</a>和<a class="ae kl" href="https://mydomain.com" rel="noopener ugc nofollow" target="_blank">https://www.mydomain.com</a></p><p id="8779" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在验证上，方法选择DNS验证。</p><p id="13b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将单击“请求”按钮，然后转到“证书列表”窗口。单击刷新按钮，您将看到您的请求处于待定状态。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ls"><img src="../Images/b2445f211637cae669183c833e90f7ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ImQJORuvmtll-Z52m22q1g.png"/></div></div></figure><p id="cf88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要进行验证，请单击证书ID链接转到详细信息页面。<br/>你会看到这样一个页面。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lt"><img src="../Images/76a5876b345e0dc56aeb356f76611cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8D41UlK4IXFTggNbqI8-2g.png"/></div></div></figure><p id="7ac9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个页面上，我们需要单击Create records in Route 53按钮，这样就可以执行域所有权的验证。</p><p id="dc2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您点击按钮，您将进入以下页面:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ls"><img src="../Images/e6274c1ec7c5d12badcb0581b1dff528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQN7_7QCHEbn2yHl1Qerrw.png"/></div></div></figure><p id="f7e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击创建。等待几分钟并刷新您的证书列表页面。</p><p id="9298" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该会看到您的证书的状态从待定变为已颁发。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ls"><img src="../Images/95cfcc78ed1d78ca35afbc620d6459d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDapbf__OXxGor4775MvuQ.png"/></div></div></figure><p id="4ea0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 6。创建一个以origin.mydomain.com为原点的CloudFront分布。</strong></p><p id="f874" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要创建您的CloudFront发行版，您需要进入AWS控制台并搜索CloudFront。主页是这样的。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lr"><img src="../Images/aaaf1180bd5ed3496ed2d855f405e0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLsK8VOoLLPqSqpdx5R5SA.png"/></div></div></figure><p id="36ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击创建分销:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lu"><img src="../Images/48f43f278e45e0f6cb5e2ad625322660.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOhhrK04INU_UdZJKbOojg.png"/></div></div></figure><p id="4c73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在origin，domain中输入您的源域(在我们的例子中是origin.mydomain.com ),其余部分保留默认值。转到页面的设置部分。首先，在备选域名中添加<a class="ae kl" href="http://www.mydomain.com," rel="noopener ugc nofollow" target="_blank">www.mydomain.com</a>,这样分配将与www子域一起工作。<br/>其次，添加我们在上一节中创建的自定义SSL证书，它应该在Combobox的一个选项中可用。这将允许发行版与HTTPS一起工作。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lv"><img src="../Images/8d22d48e82b73d00b4b8dbe5addcd317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceoTGRHlDMOFtzn49WQicw.png"/></div></div></figure><p id="b142" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击创建。这将创建一个具有原点和默认行为的分布。</p><p id="40e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 7。将WordPress推荐的行为添加到我们的发行版中。</strong></p><p id="596b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了充分利用Cloudfront缓存并确保所有站点功能正常工作，我们需要使用AWS推荐的最佳实践来定制我们的分发行为(更多信息请访问<a class="ae kl" href="https://docs.aws.amazon.com/whitepapers/latest/best-practices-wordpress/cloudfront-distribution-creation.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/white papers/latest/best-practices-WordPress/Cloudfront-distribution-creation . html</a>)</p><p id="1676" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们将如下进行:</p><p id="fe4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">a.为静态内容添加行为</p><p id="5bc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">静态内容在WordPress中由这两条路径提供:<br/> wp-content/*和wp-includes/* <br/>我们想要的是允许Cloudfront为我们缓存所有这些内容。为此，请转到您的发行版的详细信息页面，然后单击“行为”选项卡。一旦有你会看到一个创建行为按钮。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/f4560f48f85ab23593444fa9ced5e5f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzTzphYc9Fpot1VeaSXfXg.png"/></div></div></figure><p id="cc44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击后，您将看到行为设置页面，我们需要在其中进行如下配置:</p><p id="94a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先设置wp-content/*的路径。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/7781929a916cc9790dc64d8df9fb39ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*s6ARrckY_1qBvJo5sO17XQ.png"/></div></figure><p id="5669" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第二，设置allow方法，在本例中只是GET和HEAD，我们允许HTTP和HTTPS。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/64c7241c0828666c7333da043eb4cb5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*e8dmaKTzaUo1-nOjTfiRQw.png"/></div></figure><p id="1c1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第三，使用传统的缓存设置来设置缓存头、cookies和查询字符串。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/60b17513bc41db1fe730d8651443bbfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*U6wcHnsv4Hko4_v648ZlGg.png"/></div></figure><p id="338b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击保存，我们需要为wp-includes/*做同样的事情</p><p id="765a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">b.为动态管理员页面添加行为</p><p id="2838" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于管理页面，WordPress使用这两个路径提供内容:wp-admin/*和wp-login.php</p><p id="62e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，让我们用下面的配置为这两条路径中的每一条创建一个行为。</p><p id="e601" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先设置wp-admin/*的路径</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/a3f0d46767cdbac597d6fe41aee29ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*42QA5V3koujosOHXi1BFWQ.png"/></div></figure><p id="ca50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其次，设置allow方法，在本例中是所有的方法，我们需要将所有流量重定向到HTTPS以强制加密。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/4b82e8b29b39b43b1e2c316f582517fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Og4G2SU82icxPkspf4EyRw.png"/></div></figure><p id="15c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第三，使用传统缓存设置配置动态内容的缓存，并允许所有头、查询字符串和cookies。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lw"><img src="../Images/7d19cc84544563aa03ea94b3db47a109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*oa109GLNHBV4FPJSo9rzKQ.png"/></div></div></figure><p id="527e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要为wp-login.php之路做同样的事情。</p><p id="6823" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">c.为动态前端添加行为</p><p id="8e18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这由分布的默认行为来管理。要进行配置，请选择默认行为，然后单击编辑。</p><p id="c69e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先设置allow方法，在本例中是所有方法，我们需要将所有流量重定向到HTTPS以强制加密。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/4b82e8b29b39b43b1e2c316f582517fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Og4G2SU82icxPkspf4EyRw.png"/></div></figure><p id="657e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于缓存，这些是使用传统缓存设置的设置。<br/> <strong class="jp ir">头文件</strong>:主机，CloudFront-Forwarded-Proto，CloudFront-Is-Mobile- <strong class="jp ir">查看器</strong>，CloudFront-Is-Tablet-Viewer，CloudFront-Is-Desktop-Viewer<br/><strong class="jp ir">查询</strong>:All<br/><strong class="jp ir">Cookies</strong>:comment _ *，wordpress_*，wp-settings-*</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/671fd78d04c6911c5be5915b9833b816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*1UnWMiVAMxNrSiGHFJJrkw.png"/></div></figure><p id="1466" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们完成了发行。</p><p id="5b6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个表格总结了正确运行WordPress发行版所需的行为。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lx"><img src="../Images/e6b7bf3702e39dff045579fb18e05b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Rhu8803Oq8K4ng8nIuY-A.png"/></div></div></figure><p id="17af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 8。设置Route 53裸域和www子域。</strong></p><p id="00fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一部分是将Route 53裸域配置为指向CloudFront分布，并为子域www创建一个CNAME条目，以将流量转发到裸域。</p><p id="420b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以让我们去53号公路托管区。在我们的例子中是mydomain.com。</p><p id="2381" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击创建新记录:</p><p id="f41f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们将为裸域键入以下配置:<br/> <strong class="jp ir">记录类型</strong><br/><strong class="jp ir">将流量路由到</strong>别名到CloudFront分发，选择您最近创建的分发，并确保您选择了正确的区域。将路由策略留给简单路由。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/028ad15f8687cd28e4dd2d9a4432d004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*4Bq26L9dglD71GAIWSJLjA.png"/></div></figure><p id="a01b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存并为www转发创建新记录:</p><p id="5070" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">记录名称将为<a class="ae kl" href="http://www.mydomain" rel="noopener ugc nofollow" target="_blank"> www.mydomain </a>。com <br/>记录的类型是CNAME <br/>值将是<a class="ae kl" href="http://www.mydomain" rel="noopener ugc nofollow" target="_blank"> mydomain </a>。com</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/174807eea294c4092b558a3fe1c73607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*ZtZFG5GAHHzFnzouoVReZw.png"/></div></figure><p id="240e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们终于完成了！！！我们已经用CloudFront建立了一个WordPress Lighsail实例。给它几分钟来传播DNS的变化，我们应该有mydomain.com由CloudFront服务。</p></div></div>    
</body>
</html>