<html>
<head>
<title>Build a Tic Tac Toe Game With React/Redux, Babel, Webpack and Material-UI (Part 3 of 5)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React/Redux、Babel、Webpack和Material-UI构建一个井字游戏(第3部分，共5部分)</h1>
<blockquote>原文：<a href="https://itnext.io/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-3-of-5-9e5fd9b02fcf?source=collection_archive---------0-----------------------#2018-04-29">https://itnext.io/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-3-of-5-9e5fd9b02fcf?source=collection_archive---------0-----------------------#2018-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="7398" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated"><a class="ae kp" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fbuild-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-3-of-5–9e5fd9b02fcf%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank">点击这里在LinkedIn </a>上分享这篇文章</p></blockquote></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><ul class=""><li id="6319" class="kx ky iq jt b ju jv jy jz kz la lb lc ld le ko lf lg lh li bi translated"><a class="ae kp" href="https://medium.com/@vanister/learn-react-redux-by-making-a-tic-tac-toe-game-part-1-of-5-dc9111ca09ad" rel="noopener">第1部分—项目设置、依赖关系和Hello Tic Tac Toe！app。</a></li><li id="8520" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated">第二部分——游戏结构、状态和测试。</li><li id="c098" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated">第三部分——游戏性和基本风格。</li><li id="f6f3" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated"><a class="ae kp" rel="noopener ugc nofollow" target="_blank" href="/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-4-of-5-f7cb4a611481">第4部分——提示、新游戏和更多风格</a>。</li><li id="e7fa" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated"><a class="ae kp" rel="noopener ugc nofollow" target="_blank" href="/build-a-tic-tac-toe-game-with-react-redux-babel-webpack-and-material-ui-part-5-of-5-fe2ece35b839">第5部分——清理和事后反思</a>。</li></ul></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><p id="7db5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated"><strong class="jt ir">更新2019年7月22日:</strong>项目依赖关系更新。</p><ul class=""><li id="dabf" class="kx ky iq jt b ju jv jy jz kz la lb lc ld le ko lf lg lh li bi translated">巴别塔7.x</li><li id="86e0" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated">React 16.x</li><li id="9eae" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated">Redux 4.x</li><li id="90a3" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated">Webpack 4.x</li></ul><p id="1510" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">查看<a class="ae kp" href="https://github.com/vanister/medium.com/blob/part-3/tic-tac-toe/package.json" rel="noopener ugc nofollow" target="_blank"> package.json </a>获取更新的完整列表。</p></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><p id="8f9b" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">我们最后停止编写游戏duck，它包含了玩完整的井字游戏所需的所有redux状态代码。现在我们将添加一些组件来渲染状态并玩一个游戏。我们将使用Material-UI来设计游戏风格，并使其适应移动、平板和桌面屏幕尺寸。最后，测试以确保我们可以玩一个完整的游戏，其中有一个赢家或平局。</p><h2 id="2a35" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">最后的依赖项</h2><p id="5626" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">我们首先将最后两个依赖项添加到项目中:</p><ul class=""><li id="4deb" class="kx ky iq jt b ju jv jy jz kz la lb lc ld le ko lf lg lh li bi translated"><code class="fe mm mn mo mp b">material-ui@1.0.0-beta.43</code> —实现Google材质设计的React组件库(版本1.0.0-beta.43)。</li><li id="c32b" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated"><code class="fe mm mn mo mp b">classnames</code> —将类组合成单个字符串以分配给组件的<code class="fe mm mn mo mp b">className</code>属性的实用程序。</li></ul><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="4f76" class="lo lp iq mp b gy my mz l na nb">yarn add classnames<br/>yarn add --dev material-ui@next</span></pre><h2 id="026d" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">游戏性和风格</h2><p id="87c5" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">Material-UI 或MUI实现了Google Material Design，包含了我们构建UI所需的所有组件。我们将利用网格、图标、应用程序栏和模态来使我们的游戏手机友好。</p><h2 id="a5e7" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">更新入口点</h2><p id="d2d8" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">我们不使用MUI提供的额外字体和图标库，而是直接从Google的CDN引用它们。打开<code class="fe mm mn mo mp b">index.html</code>文件，添加MUI的字体和图标参考。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="c6d4" class="lo lp iq mp b gy my mz l na nb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>  <strong class="mp ir">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500"&gt;</strong></span><span id="245f" class="lo lp iq mp b gy nc mz l na nb"><strong class="mp ir">  &lt;link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"&gt;</strong><br/>  ...<br/>  ...<br/>&lt;/head&gt;</span><span id="81e5" class="lo lp iq mp b gy nc mz l na nb">&lt;body&gt;<br/>  ...<br/>&lt;/body&gt;</span><span id="0a98" class="lo lp iq mp b gy nc mz l na nb">&lt;/html&gt;</span></pre><p id="db88" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">然后，我们需要更新我们的<code class="fe mm mn mo mp b">index.js</code>文件，以便在游戏首次加载时调度一个新游戏。</p><figure class="mq mr ms mt gt nd"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="74f5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">由于我们没有持续状态，我们可以做一个快速检查，如果初始状态为空，然后在我们渲染应用程序组件之前调度一个动作来开始一个新游戏。</p><h2 id="13ca" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">正在清理应用程序组件</h2><p id="e56d" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">在最后一部分中，我们添加了一些临时代码来验证我们的redux存储和ducks工作正常。我们现在可以清理代码并开始设计应用程序组件了。</p><figure class="mq mr ms mt gt nd"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="c354" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">游戏组件</h2><p id="07c5" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">游戏组件将是我们的第一个容器组件，当游戏被玩家交互时，它将使用duck来获取状态和调度动作。</p><figure class="mq mr ms mt gt nd"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk translated">列出我们的道具类型是一个好主意，即使大部分(如果不是全部的话)来自更高级的组件(第65-71行)。</figcaption></figure><p id="3364" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">由于这是游戏的一个核心组件，我们想设计它的风格，使它能够适应屏幕尺寸的变化。当屏幕是移动尺寸时，我们将它布置在两行的网格中，当屏幕是平板电脑或更大时，我们将它布置在两列的网格中。</p><p id="b16c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">如果我们定义每个网格项目总计12个大小，那么网格组件将为我们处理屏幕断点。</p><p id="4c5e" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">我们还添加了一个事件处理程序<code class="fe mm mn mo mp b">handleBoardOnMove</code>，来处理用户点击游戏中的方块。</p><h2 id="44ea" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">电路板组件</h2></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><p id="bad0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">Material-UI使用JS 中的<a class="ae kp" href="https://material-ui-next.com/customization/css-in-js/" rel="noopener ugc nofollow" target="_blank"> CSS将一个将属性映射到类的JavaScript对象转换成可以应用于组件中元素的CSS类。</a></p><p id="bc09" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">你可能已经看到了应用和游戏组件中的<code class="fe mm mn mo mp b">withStyles</code>和<code class="fe mm mn mo mp b">const styles = () =&gt; ({...})</code>模块。它们在那里很少使用，但在这里却被大量使用来设计电路板组件的样式。我们将样式隔离到组件中，而不是CSS文件中，因为它们只适用于特定的组件。这使得更新样式及其使用位置变得容易，而不是必须在CSS文件中查找，然后在组件中找到。缺点是很难跟踪组件中自动生成的类名以及它们应用于组件的特定顺序。</p><figure class="mq mr ms mt gt nd gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/e5d4f03c5e17305c7c1bc1866c3fda7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZwWFIgWo0YuTAC6g-6oLA.png"/></div></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk translated">JS或JSS中CSS的示例输出</figcaption></figure></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><p id="b690" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">棋盘是一个简单的表示组件，它将从游戏组件中获取棋盘状态，并将其呈现在网格中。当一个方块被点击时，它还会调用带有坐标的<code class="fe mm mn mo mp b">handleBoardOnMove</code>处理程序。</p><figure class="mq mr ms mt gt nd"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="3bca" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">样式:</p><ul class=""><li id="2c6d" class="kx ky iq jt b ju jv jy jz kz la lb lc ld le ko lf lg lh li bi translated"><code class="fe mm mn mo mp b">square</code> —游戏网格中一个100x100px的正方形。</li><li id="4308" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated"><code class="fe mm mn mo mp b">marked</code> —如果有玩家占据方块，则应用此样式，它设置不允许的光标样式，以便玩家知道这是一个不能点击的方块。</li><li id="49fb" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated"><code class="fe mm mn mo mp b">row</code> —网格中的一行，居中对齐。</li><li id="27fc" class="kx ky iq jt b ju lj jy lk kz ll lb lm ld ln ko lf lg lh li bi translated"><code class="fe mm mn mo mp b">x_y</code> —使网格看起来像传统井字游戏网格的边框样式。如果我们把它应用到所有的正方形，我们会得到一个每个边界都被填充和加厚(重叠)的框格。</li></ul><h2 id="4711" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">方形部件</h2><p id="7d26" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">最后，我们有平方部分。这是另一个表示组件，它接受一个玩家并呈现一个代表该玩家或空白的图标。我们应用了一种字体大小样式，使其足够大以填充大部分正方形。</p><p id="cb7e" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">我从<a class="ae kp" href="https://material.io/icons/" rel="noopener ugc nofollow" target="_blank">材质图标中选择了两个与<code class="fe mm mn mo mp b">X</code>和<code class="fe mm mn mo mp b">O</code>非常相似的图标</a>。不一定要用我选的，任何图标都可以。</p><figure class="mq mr ms mt gt nd"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="f991" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">玩个游戏！</h2><p id="73ff" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">运行<code class="fe mm mn mo mp b">yarn start</code>我们应该可以玩一个完整的游戏。我们必须刷新浏览器来开始一个新游戏，但我们将在下一部分中通过添加一个带有汉堡菜单的标题和一个告诉我们谁赢了并可以选择开始一个新游戏的对话框来解决这个问题。</p><figure class="mq mr ms mt gt nd gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/ea4ac9a5d76f8e4f66f95c85f6034b60.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*cjnCBZhwPDsj7O1Tvcd-iQ.gif"/></div></figure><h2 id="04d0" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kz lx ly lz lb ma mb mc ld md me mf mg bi translated">未完待续…</h2><p id="4aae" class="pw-post-body-paragraph jq jr iq jt b ju mh jw jx jy mi ka kb kz mj ke kf lb mk ki kj ld ml km kn ko ij bi translated">在下一部分，我们将通过添加标题、菜单、玩家信息和一个在游戏结束时通知玩家的对话框来完成游戏。</p><p id="3948" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kz kd ke kf lb kh ki kj ld kl km kn ko ij bi translated">这部分的来源可以在这里找到:<a class="ae kp" href="https://github.com/vanister/medium.com/tree/part-3" rel="noopener ugc nofollow" target="_blank">https://github.com/vanister/medium.com/tree/part-3</a></p></div></div>    
</body>
</html>