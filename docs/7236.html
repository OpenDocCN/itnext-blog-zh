<html>
<head>
<title>Terraform Providers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">平台提供商</h1>
<blockquote>原文：<a href="https://itnext.io/terraform-providers-cbb37e3974ea?source=collection_archive---------3-----------------------#2022-07-25">https://itnext.io/terraform-providers-cbb37e3974ea?source=collection_archive---------3-----------------------#2022-07-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ac50" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提供者用有用的例子解释！</h2></div><h2 id="0afc" class="ki kj it bd kk kl km dn kn ko kp dp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated"><strong class="ak">概述</strong></h2><p id="503f" class="pw-post-body-paragraph le lf it lg b lh li ju lj lk ll jx lm kr ln lo lp kv lq lr ls kz lt lu lv lw im bi translated">在本文中，我们将讨论平台提供者。首先，我们将看看Terraform中提供者的目的，以及如何使用和引用它们。然后，我们将通过示例查看一些可用的提供者。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/f62f31e03f1632eb4c1d1340546702cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_TF41GE3B9jE_O9qKeqzdw.jpeg"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">克里斯托弗·高尔在<a class="ae mn" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="94f3" class="ki kj it bd kk kl km dn kn ko kp dp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">Terraform中的提供商是什么？</h2><p id="6590" class="pw-post-body-paragraph le lf it lg b lh li ju lj lk ll jx lm kr ln lo lp kv lq lr ls kz lt lu lv lw im bi translated">Terraform中的provider是一个插件，支持与API进行交互。这包括云提供商和软件即服务提供商。提供者在Terraform配置代码中指定，告诉Terraform它需要与哪些服务进行交互。</p><p id="e211" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">有数百个可用的提供商可以与Terraform一起使用，这使它成为一个非常通用的工具。Terraform的流行很大程度上源于这样一个事实，即它是平台不可知的，并且可以被如此广泛地使用，而不是可能特定于平台的语言，如微软Azure ARM模板或Bicep(仅与Azure API交互)。</p><p id="d873" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">一旦指定了一个提供者，每个提供者都会创建一个可用于Terraform代码的<code class="fe mt mu mv mw b">resources</code>和<code class="fe mt mu mv mw b">data</code>类型的列表。这些在文档中列出，可在<a class="ae mn" href="https://registry.terraform.io/browse/providers" rel="noopener ugc nofollow" target="_blank"> Terraform注册表中找到。</a></p><p id="77ea" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">每个提供程序都是独立于Terraform本身发布的，每个版本都提供了额外的功能和错误修复。每个提供商都有自己的发布节奏。提供商通常由Hashicorp(提供提供商的公司的专门团队)管理(例如，<code class="fe mt mu mv mw b">mongodb</code>提供商的Mongo)，或者由对提供商使用的产品或平台感兴趣的社区团体、用户和志愿者管理。</p><ul class=""><li id="88b4" class="mx my it lg b lh mo lk mp kr mz kv na kz nb lw nc nd ne nf bi translated">Hashicorp维护的提供商在文档页面上被标记为“官方”。</li><li id="6b34" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated">标记为“已验证”的提供商归官方第三方技术供应商所有。供应商也是HashiCorp技术合作伙伴计划的成员。</li><li id="d97c" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated">标记为“社区”的提供者由Terraform社区中的成员或组发布。</li></ul><p id="b0af" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">在不太可能的情况下，如果基础设施的提供商不存在，您可以尝试使用Terraform进行供应，或者您希望为您的产品开发一个提供商，您可以这样做。提供者是用Go编写的，并利用Terraform插件SDK。</p><p id="748f" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">在Terraform工作流程的<code class="fe mt mu mv mw b">terraform init</code>阶段，下载并安装Terraform提供程序。它们可以从公共注册表或本地注册表或镜像中下载。如果提供程序不在<code class="fe mt mu mv mw b">.terraform</code>子目录中，则下载该提供程序，如果已经存在，则不再下载。还会检查版本号。更改配置文件中的版本号会导致下载该版本的提供程序。然而，为了节省带宽和加快运行时间，可以使用CLI配置文件中的<code class="fe mt mu mv mw b">plugin_cache_dir</code>来指定可选插件缓存的使用，该配置文件为每个用户配置CLI行为(<code class="fe mt mu mv mw b">terraform.rc</code>或<code class="fe mt mu mv mw b">.terraformrc</code>)。例如</p><pre class="ly lz ma mb gt nl mw nm nn aw no bi"><span id="dd28" class="ki kj it mw b gy np nq l nr ns">plugin_cache_dir   = "$HOME/.terraform.d/plugin-cache"</span></pre><p id="4086" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">在Terraform cloud或Terraform Enterprise中运行时，总是下载插件。</p><h2 id="dea3" class="ki kj it bd kk kl km dn kn ko kp dp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">提供商配置</h2><p id="2a85" class="pw-post-body-paragraph le lf it lg b lh li ju lj lk ll jx lm kr ln lo lp kv lq lr ls kz lt lu lv lw im bi translated">应该在Terraform项目的根模块中声明提供者配置。它们可以在任何<code class="fe mt mu mv mw b">.tf</code>文件中声明，但是我建议要么将它们放在<code class="fe mt mu mv mw b">main.tf</code>中，专门为提供者创建一个<code class="fe mt mu mv mw b">providers.tf</code>文件，而不是其他文件，要么创建一个包含<code class="fe mt mu mv mw b">required_providers</code>块并指定Terraform版本的<code class="fe mt mu mv mw b">versions.tf</code>文件。任何子模块都从根模块接收它们的提供者配置。</p><p id="5750" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">使用<code class="fe mt mu mv mw b">providers</code>块配置提供者。一些提供商要求配置某些信息，如端点URL或云区域。根据您需要使用的提供者，相关的文档应该详细说明您需要配置哪些设置以及示例。要找到每个提供商的信息，请单击文档页面右上角的“使用提供商”按钮。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/9d952d3f71880aa99322399af21dc379.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*AkO79YwwoUoLOCZWysd4ZA.png"/></div></figure><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8bc0cebe2cc466fc55054057dccd8d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*jM5kzfx7YVNe8ckYTZhzKw.png"/></div></figure><p id="0481" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">在上面显示的Microsoft Azure provider <code class="fe mt mu mv mw b">azurerm</code>的例子中，提供者源代码和版本在<code class="fe mt mu mv mw b">required_providers</code>部分指定。然后<code class="fe mt mu mv mw b">providers</code>块包含提供者所需的配置选项。例如，<code class="fe mt mu mv mw b">azurerm</code>包括<code class="fe mt mu mv mw b">features</code>、<code class="fe mt mu mv mw b">clientid</code>、<code class="fe mt mu mv mw b">subscription_id</code>、<code class="fe mt mu mv mw b">tenant_id</code>等。通常，提供者配置选项包括向平台进行身份验证的各种方式。</p><p id="134e" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">在Providers块中还可以指定两个元参数，<code class="fe mt mu mv mw b">version</code>和<code class="fe mt mu mv mw b">alias</code>。<code class="fe mt mu mv mw b">version</code>已被弃用，不应再使用，应在<code class="fe mt mu mv mw b">required_providers</code>块中指定。<code class="fe mt mu mv mw b">alias</code>元参数对于使用相同的提供者很有用，但是具有不同的配置选项。再次使用我们的<code class="fe mt mu mv mw b">azurerm</code>示例，这方面的一个经典案例是当您的Terraform代码需要引用多个订阅时。这里可以指定不同的<code class="fe mt mu mv mw b">subscription_id</code>值，调用资源或模块可以使用别名引用特定的提供者。例如，提供程序块可以这样配置:</p><pre class="ly lz ma mb gt nl mw nm nn aw no bi"><span id="2646" class="ki kj it mw b gy np nq l nr ns">provider "azurerm" {<br/>  aubscription_id = "4321-4321-4321-4321"</span><span id="66cc" class="ki kj it mw b gy nv nq l nr ns">}</span><span id="172c" class="ki kj it mw b gy nv nq l nr ns">provider "azurerm" {<br/>  alias = "subscriptionA"<br/>  subscription_id = "1234-1234-1234-1234"<br/>}</span></pre><p id="308a" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">资源本身引用特定的提供者来访问不同的订阅:</p><pre class="ly lz ma mb gt nl mw nm nn aw no bi"><span id="0533" class="ki kj it mw b gy np nq l nr ns">resource "azurerm_resource_group" "rg1" {<br/>  provider = <!-- --> azurerm.subscriptionA<br/>  <!-- -->.<br/>  .<br/>}</span></pre><p id="9bc9" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">如果子模块需要特定的提供者，可以使用<code class="fe mt mu mv mw b">providers</code>元参数来引用它。</p><p id="378a" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">如果一个提供者没有配置<code class="fe mt mu mv mw b">alias</code>选项，它将被认为是默认的，并被所有配置使用，除非另一个提供者被明确指定。</p><h2 id="7542" class="ki kj it bd kk kl km dn kn ko kp dp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated"><strong class="ak">常用提供商</strong></h2><ul class=""><li id="36a3" class="mx my it lg b lh li lk ll kr nw kv nx kz ny lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/azurerm/latest" rel="noopener ugc nofollow" target="_blank">蔚蓝</a></li><li id="bc16" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/aws/latest" rel="noopener ugc nofollow" target="_blank"> AWS </a></li><li id="b5d1" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/google/latest" rel="noopener ugc nofollow" target="_blank">谷歌云</a></li><li id="b987" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a></li><li id="13a5" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/oracle/oci/latest" rel="noopener ugc nofollow" target="_blank">甲骨文云</a></li><li id="e1bc" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/aliyun/alicloud/latest" rel="noopener ugc nofollow" target="_blank">阿里云</a></li></ul><h2 id="21fd" class="ki kj it bd kk kl km dn kn ko kp dp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">其他有用的提供者</h2><ul class=""><li id="c36f" class="mx my it lg b lh li lk ll kr nw kv nx kz ny lw nc nd ne nf bi translated">Azure <a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/azuread/2.25.0" rel="noopener ugc nofollow" target="_blank">活动目录</a></li><li id="4bfb" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/ad/0.4.4" rel="noopener ugc nofollow" target="_blank">活动目录</a></li><li id="7422" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated">天蓝色<a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/azurestack/0.10.0" rel="noopener ugc nofollow" target="_blank">栈</a></li><li id="8c77" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/namespaces/CiscoDevNet" rel="noopener ugc nofollow" target="_blank">思科</a></li><li id="e4e9" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/cloudflare/cloudflare/3.18.0" rel="noopener ugc nofollow" target="_blank">云闪</a></li><li id="1d74" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/namespaces/CheckPointSW" rel="noopener ugc nofollow" target="_blank">检查站</a></li><li id="119f" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/DataDog/datadog/3.12.0" rel="noopener ugc nofollow" target="_blank"> Datadog </a></li><li id="2994" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/helm/2.6.0" rel="noopener ugc nofollow" target="_blank">舵</a></li><li id="8ce6" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated">哈希公司产品供应商— <a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/vault/3.7.0" rel="noopener ugc nofollow" target="_blank">金库</a>、<a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/consul/2.15.1" rel="noopener ugc nofollow" target="_blank">领事</a>、<a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/nomad/latest" rel="noopener ugc nofollow" target="_blank">游牧</a>、<a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/boundary/1.0.9" rel="noopener ugc nofollow" target="_blank">边界</a></li><li id="248e" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/namespaces/F5Networks" rel="noopener ugc nofollow" target="_blank"> F5 </a></li><li id="3ba9" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated">帕洛阿尔托市</li><li id="fb02" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated">太空飞船</li><li id="8927" class="mx my it lg b lh ng lk nh kr ni kv nj kz nk lw nc nd ne nf bi translated"><a class="ae mn" href="https://registry.terraform.io/providers/hashicorp/vsphere/latest" rel="noopener ugc nofollow" target="_blank"> VMWare vSphere </a></li></ul><h2 id="96ee" class="ki kj it bd kk kl km dn kn ko kp dp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">摘要</h2><p id="92be" class="pw-post-body-paragraph le lf it lg b lh li ju lj lk ll jx lm kr ln lo lp kv lq lr ls kz lt lu lv lw im bi translated">在学习Terraform时，了解提供者如何在Terraform中工作，以及知道如何利用Terraform注册表中的可用提供者是一个重要的关键概念。</p><p id="04fa" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">有关更多信息，请查看官方文档:</p><div class="nz oa gp gr ob oc"><a href="https://www.terraform.io/language/providers" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">提供者-配置语言|哈希公司的Terraform</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">搜索Terraform文档动手操作:尝试HashiCorp Learn上的使用提供者执行CRUD操作教程…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.terraform.io</p></div></div><div class="ol l"><div class="om l on oo op ol oq mh oc"/></div></div></a></div><p id="9d40" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">想要更多的Terraform内容？点击这里查看我在Terraform上的其他文章！</p><p id="825d" class="pw-post-body-paragraph le lf it lg b lh mo ju lj lk mp jx lm kr mq lo lp kv mr lr ls kz ms lu lv lw im bi translated">干杯！🍻</p><div class="nz oa gp gr ob oc"><a href="https://www.buymeacoffee.com/jackwesleyroper" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">Jack Roper正在Azure、Azure DevOps、Terraform、Kubernetes和Cloud tech上写博客！</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">希望我的博客能帮到你，你会喜欢它的内容！我真的很喜欢写技术内容和分享…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq mh oc"/></div></div></a></div></div></div>    
</body>
</html>