<html>
<head>
<title>JavaScript Type Coercion (Implicit Conversion) and Why to use “===” and avoid “==”.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript类型强制(隐式转换)以及为什么要使用“===”并避免“==”。</h1>
<blockquote>原文：<a href="https://itnext.io/javascript-type-coercion-implicit-conversion-and-why-to-use-and-avoid-ea9a38ecc777?source=collection_archive---------1-----------------------#2020-05-26">https://itnext.io/javascript-type-coercion-implicit-conversion-and-why-to-use-and-avoid-ea9a38ecc777?source=collection_archive---------1-----------------------#2020-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="6e67" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">JavaScript中什么是类型强制？</h1><p id="520b" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">类型强制是值从一种数据类型到另一种数据类型的自动或隐式转换。例如，将字符串值转换为等效的数字值。这也称为类型转换。</p><p id="4369" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">类型强制很有用，但会导致不一致。</p><p id="b157" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">让我们举个小例子，</p><h2 id="7749" class="lo jo iq bd jp lp lq dn jt lr ls dp jx kw lt lu kb la lv lw kf le lx ly kj lz bi translated"><strong class="ak">类型强制的结果不一致</strong></h2><blockquote class="ma mb mc"><p id="216a" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">示例:1</p><p id="3f63" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">类型强制的好处</p></blockquote><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/8c00cbb06201babfc0874a483732fff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*Ss229jCD7x4PBtGib8Sbqw.png"/></div></figure><p id="8034" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上面的例子中，我们正在比较两只股票的价格，并将输出写入控制台。</p><p id="eb47" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><em class="md">stock price是数字，stock price是字符串。</em></p><p id="3719" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在if条件中，<em class="md">if(stock aprice</em><strong class="kn ir"><em class="md">= =</em></strong><em class="md">stockBPrice)，</em>我们比较的是数值和字符串值。</p><p id="f1b9" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">为了比较这两个值，我们使用双等号(==)，<em class="md">这种</em>相等比较称为抽象相等比较。抽象比较是使用类型强制完成的，这意味着JavaScript将尝试自动转换类型以产生结果。</p><p id="37ba" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上面的例子中，JavaScript将把字符串值转换成数字值，然后进行比较。下面是if条件的输出。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4ecc72a3cedd90adbe524791ce36e864.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*FevV_yLaD8szvO7Z7ayNzQ.png"/></div></figure><p id="3f48" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">要阅读更多关于JavaScript如何执行抽象等式比较的内容，请查看<a class="ae mq" href="http://ecma-international.org/ecma-262/5.1/#sec-11.9.3" rel="noopener ugc nofollow" target="_blank">http://ecma-international.org/ecma-262/5.1/#sec-11.9.3</a></p><p id="194e" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">到目前为止，我们已经看到了类型强制的好处。</p><blockquote class="ma mb mc"><p id="2d3c" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">示例:2</p><p id="a0a3" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">无意的类型强制</p></blockquote><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/735fb3c24b488776fffffcec2f9f11ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*uPtqxS3unlq1jZ2C6PsdTA.png"/></div></figure><p id="67e7" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上面的代码片段中，<em class="md"> stockAPrice是数字，stockBPrice是字符串。</em></p><p id="7e06" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在，如果我们决定每种股票买一个数量，让我们试着把它们加起来，算出总投资。</p><p id="54aa" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><em class="md">let total investment = stock aprice+stockBPrice；</em></p><p id="8146" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上面的语句中，我们将数字和字符串值相加。这与我们在前面的例子中做的等式比较非常相似，但是JavaScript的类型强制行为不同。下面是上述代码片段的输出，</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/4daa5ea975d326ec3fd3f178854ffd4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*tMwQ-qK1Pn2wYaTK4IESNQ.png"/></div></figure><p id="28dc" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在这种情况下，它将数字值转换成字符串值(<em class="md">与等式比较</em>相反)，我们得到串联的字符串。我们期望加法，即<em class="md"> totalInvestment = 24。</em></p><p id="8de7" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">根据上面两个例子，我们看到类型强制产生不一致的结果。</p><p id="8399" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><strong class="kn ir">避免类型强制的不一致结果</strong></p><p id="80de" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">现在让我们看看如何避免类型强制，</p><blockquote class="ma mb mc"><p id="4584" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">示例:1</p><p id="0209" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">将抽象相等比较更改为严格相等比较(将“==”替换为“===”)</p></blockquote><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/b5bd062cd0c2be6496797a83dab9f154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*IhF9RbzMpmG6846aKD5DIA.png"/></div></figure><p id="c268" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们修改了例1。</p><p id="f29d" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated"><em class="md">stock price是数字，stock price是字符串。</em></p><p id="d900" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在if条件中，<em class="md">if(stock aprice</em><strong class="kn ir"><em class="md">==</em></strong><em class="md">stockBPrice)，</em>我们在比较数值和字符串值但是我们用“===”替换了“= =”。</p><p id="bbef" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">为了比较这两个值，我们使用<strong class="kn ir"> <em class="md">三重等号</em> </strong> (===)，<em class="md">这种</em>相等比较称为严格相等比较。只有当值具有相同的类型和相等的值时，严格比较才会返回true。下面是输出，</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/15df311dc6cda1541d6055e1288897d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*3xQn3coXKZOSDpS3P3h9lg.png"/></div></figure><p id="23eb" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">要阅读更多关于如何严格执行相等比较的内容，请查看<a class="ae mq" href="http://ecma-international.org/ecma-262/5.1/#sec-11.9.6" rel="noopener ugc nofollow" target="_blank">http://ecma-international.org/ecma-262/5.1/#sec-11.9.6</a></p><blockquote class="ma mb mc"><p id="a39b" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">示例:2</p><p id="b194" class="kl km md kn b ko lj kq kr ks lk ku kv me ll ky kz mf lm lc ld mg ln lg lh li ij bi translated">显式转换类型</p></blockquote><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/28dcf67f270a5409d3eb032ed9a55917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*nJeY-hFVPvH9CN84_llcUA.png"/></div></figure><p id="a527" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">在上面的代码片段中，<em class="md"> stockAPrice是数字，stockBPrice是字符串。</em></p><p id="e0b0" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">为了找出总投资额，我们需要将它们相加，但现在为了避免类型强制，我们将显式地将它们转换为数值。通过提供显式类型，我们指示JavaScript不应用自动类型转换，而是使用我们显式定义的类型。在我们的例子中，它是数字。</p><p id="0451" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">输出以下显式转换后，</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/3755babb47df459d48c0b28f258bc800.png" data-original-src="https://miro.medium.com/v2/resize:fit:334/format:webp/1*mK1fACOzYuE2us1s8klHKA.png"/></div></figure><p id="b959" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">我们得到了预期的输出，而不是连接。</p><p id="94b5" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">结论:</p><ul class=""><li id="0806" class="mx my iq kn b ko lj ks lk kw mz la na le nb li nc nd ne nf bi translated">避免“==”，使用“===”。双等号(==)执行抽象的相等比较，三等号(===)执行严格的相等比较。</li><li id="2b9b" class="mx my iq kn b ko ng ks nh kw ni la nj le nk li nc nd ne nf bi translated">在执行算术运算时，不要特别依赖JavaScript的自动类型转换。必要时提供显式类型转换。</li><li id="52c1" class="mx my iq kn b ko ng ks nh kw ni la nj le nk li nc nd ne nf bi translated">要阅读更多关于抽象等式比较如何执行的内容，请阅读<a class="ae mq" href="http://ecma-international.org/ecma-262/5.1/#sec-11.9.3" rel="noopener ugc nofollow" target="_blank">http://ecma-international.org/ecma-262/5.1/#sec-11.9.3</a></li><li id="9b15" class="mx my iq kn b ko ng ks nh kw ni la nj le nk li nc nd ne nf bi translated">要了解更多关于如何执行严格的相等比较，请阅读<a class="ae mq" href="http://ecma-international.org/ecma-262/5.1/#sec-11.9.6" rel="noopener ugc nofollow" target="_blank">http://ecma-international.org/ecma-262/5.1/#sec-11.9.6</a></li></ul><p id="851f" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">感谢阅读。点击查看我的博客<a class="ae mq" href="https://fullstackdeveloperparag.wordpress.com/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="04c0" class="pw-post-body-paragraph kl km iq kn b ko lj kq kr ks lk ku kv kw ll ky kz la lm lc ld le ln lg lh li ij bi translated">请让我知道您的反馈或任何改进建议。</p></div></div>    
</body>
</html>