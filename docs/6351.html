<html>
<head>
<title>Getting started with CCXT Crypto Exchange Library and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CCXT加密交换库和Python入门</h1>
<blockquote>原文：<a href="https://itnext.io/getting-started-with-ccxt-crypto-exchange-library-and-python-93175d5a898d?source=collection_archive---------0-----------------------#2021-10-23">https://itnext.io/getting-started-with-ccxt-crypto-exchange-library-and-python-93175d5a898d?source=collection_archive---------0-----------------------#2021-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/816b6ccc8d6818a91313e6876774f43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rRyGKdfn0ygFxMvP.png"/></div></div></figure><p id="e016" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经在我的气流相关的文章<a class="ae kw" href="http://blog.adnansiddiqi.me/using-apache-airflow-etl-to-fetch-and-analyze-btc-data/" rel="noopener ugc nofollow" target="_blank">中使用了CCXT库。在这篇文章中，我将专门讨论这个库，以及如何使用它从交易所或交易自动化中提取不同类型的数据。</a></p><h1 id="263a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是CCXT</h1><p id="8e07" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir">C</strong>rypto<strong class="ka ir">C</strong>currency e<strong class="ka ir">X</strong>change<strong class="ka ir">T</strong>rading Library aka CCXT是一个用于加密货币交易和电子商务的JavaScript / Python / PHP库，支持许多比特币/以太/替代币交易市场和商户API。它与超过100个交换机连接。这个库最好的一个特点就是<em class="ma">交换竞技</em>，也就是不管你用币安还是FTX，套路的签名都是一样的。它有Python、Javascript和PHP版本。它支持不同交易所提供的公共和私有API，但是我将只讨论几个公共API端点。</p><h1 id="9312" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">开发设置</h1><p id="41ff" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">安装库非常容易。你所要做的就是在终端中运行<code class="fe mb mc md me b">pip install ccxt</code>。</p><p id="f3b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，库安装好了，我们接个交换机吧。我现在正在连接币安交易所。</p><h2 id="1947" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">连接到exchange</h2><p id="9b0f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">第一步也是最明显的一步是首先连接交换机，这相当容易。</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="1840" class="mf ky iq me b gy mz na l nb nc"># Connect binance binance = ccxt.binance()</span></pre><h2 id="e76e" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">装载市场</h2><p id="f0fd" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">交易所已连接，现在该加载交易所提供的所有市场了。通常，它不被使用，但是它能给你一个很好的主意某一双是否可用。</p><h2 id="0f61" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">获取股票</h2><p id="d73e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">让我们获取与BTC/USDT相关的信息。</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="a977" class="mf ky iq me b gy mz na l nb nc">btc_ticker = binance.fetch_ticker('BTC/USDT') btc_ticker</span></pre><p id="e8ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它返回:</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="b631" class="mf ky iq me b gy mz na l nb nc">{'symbol': 'BTC/USDT', 'timestamp': 1634909924391, 'datetime': '2021-10-22T13:38:44.391Z', 'high': 65564.0, 'low': 62000.0, 'bid': 63363.89, 'bidVolume': 1.32351, 'ask': 63363.9, 'askVolume': 0.27138, 'vwap': 63105.52714333, 'open': 65470.0, 'close': 63363.9, 'last': 63363.9, 'previousClose': 65469.99, 'change': -2106.1, 'percentage': -3.217, 'average': None, 'baseVolume': 53395.84423, 'quoteVolume': 3369572897.3972454, 'info': {'symbol': 'BTCUSDT', 'priceChange': '-2106.10000000', 'priceChangePercent': '-3.217', 'weightedAvgPrice': '63105.52714333', 'prevClosePrice': '65469.99000000', 'lastPrice': '63363.90000000', 'lastQty': '0.00843000', 'bidPrice': '63363.89000000', 'bidQty': '1.32351000', 'askPrice': '63363.90000000', 'askQty': '0.27138000', 'openPrice': '65470.00000000', 'highPrice': '65564.00000000', 'lowPrice': '62000.00000000', 'volume': '53395.84423000', 'quoteVolume': '3369572897.39724530', 'openTime': 1634823524391, 'closeTime': 1634909924391, 'firstId': 1109039843, 'lastId': 1110609081, 'count': 1569239}}</span></pre><p id="26c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">除了股票和时间戳，它还返回开盘价、最高价、最低价、收盘价、成交量、买价和卖价等数据点。</p><h2 id="9ce6" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">获取OHLCV数据</h2><p id="d08d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">获取OHLCV数据非常简单，您所要做的就是:</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="61a4" class="mf ky iq me b gy mz na l nb nc">btc_usdt_ohlcv = binance.fetch_ohlcv('BTC/USDT','1d',limit=100)</span></pre><p id="02e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，第一个参数是交易对，第二个参数是持续时间，它告诉你是否需要一天级别的数据，分钟，或一个月。每个OHLCV条目代表一个烛台。由于持续时间的差异是一天，数据将始终处于从UTC午夜12点开始的24小时差异中。最后一个参数<code class="fe mb mc md me b">limit</code>是可选的。打印时，数据以下列格式返回:</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="a320" class="mf ky iq me b gy mz na l nb nc">[[1634774400000, 66001.4, 66639.74, 62000.0, 62193.15, 68538.64537], [1634860800000, 62193.15, 63732.39, 62000.0, 62680.01, 24059.82478]]</span></pre><p id="8bd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">数据以以下格式返回:时间戳、开盘、盘高、盘低、收盘和成交量。让我们把它变得有趣。我将从币安和FTX交易所提取BTC/USDT价格，并绘制出<em class="ma">收盘价</em>的图表。</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0de4b52b9e06887b301e577cb8e42cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tNO3OtCtUhzUg99l.png"/></div></div></figure><p id="e29d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">收盘vs成交量怎么样？</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/dc11d975816a2f4b983dec6a6928725b.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*BbY-cNnCBjQtGKWn.png"/></div></figure><p id="6a56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很脏，对吧？就好像一个小孩在纸上画了一些东西，但是这叫做<em class="ma">波动</em>！</p><h2 id="c5d2" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">获取订单簿</h2><p id="6ecb" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">现在让我们调出币安和FTX的订单簿。</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="9e4a" class="mf ky iq me b gy mz na l nb nc">orderbook_binance_btc_usdt = binance.fetch_order_book('BTC/USDT') orderbook_ftx_btc_usdt = ftx.fetch_order_book('BTC/USDT') </span><span id="e091" class="mf ky iq me b gy ne na l nb nc">bids_binance = orderbook_binance_btc_usdt['bids'] asks_binanace = orderbook_binance_btc_usdt['asks'] df_bid_binance = </span><span id="e59e" class="mf ky iq me b gy ne na l nb nc">pd.DataFrame(bids_binance, columns=['price','qty']) df_ask_binance = pd.DataFrame(asks_binanace, columns=['price','qty'])</span></pre><p id="b913" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们绘制图表！</p><pre class="mr ms mt mu gt mv me mw mx aw my bi"><span id="3c50" class="mf ky iq me b gy mz na l nb nc">fig, (ax1, ax2) = plt.subplots(2, figsize=(10, 8), dpi=80) ax1.plot(df_bid_binance['price'], </span><span id="53f5" class="mf ky iq me b gy ne na l nb nc">df_bid_binance['qty'],label='Binance',color='g') ax1.fill_between(df_bid_binance['price'], <br/>df_bid_binance['qty'],color='g') ax2.plot(df_ask_binance['price'], df_ask_binance['qty'],label='FTX',color='r') </span><span id="54e6" class="mf ky iq me b gy ne na l nb nc">ax2.fill_between(df_bid_binance['price'], df_bid_binance['qty'],color='r') ax1.set_title('Ask Price vs Quantity for Binance') ax2.set_title('Bid Price vs Quantity for Binance')<br/>plt.show()</span></pre><p id="67a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它会产生…</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0e43b6d01dea851a7f89bface2eb6f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y5VQO-X-e8wpsdkw.png"/></div></div></figure><p id="ad09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很酷，不是吗？</p><h1 id="5ec1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="2f65" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这是对<em class="ma"> CCXT </em>库的简单介绍。我只是触及了表面。如果你感兴趣，你可以基于这个库创建一个交易机器人。有几个以前做过。像往常一样，代码可以在<a class="ae kw" href="https://github.com/kadnan/CCXTPythonTutorial" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="2fd8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">原载于2021年10月23日</em><a class="ae kw" href="http://blog.adnansiddiqi.me/getting-started-with-ccxt-crypto-exchange-library-and-python/" rel="noopener ugc nofollow" target="_blank"><em class="ma">http://blog . adnansiddiqi . me</em></a><em class="ma">。</em></p></div></div>    
</body>
</html>