<html>
<head>
<title>How I’ve slashed the cost of my DEV environments by 90%</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何将开发环境的成本削减了90%</h1>
<blockquote>原文：<a href="https://itnext.io/how-ive-slashed-the-cost-of-my-dev-environments-by-90-9c1082ad1baf?source=collection_archive---------0-----------------------#2020-07-20">https://itnext.io/how-ive-slashed-the-cost-of-my-dev-environments-by-90-9c1082ad1baf?source=collection_archive---------0-----------------------#2020-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c29b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">创建可复制开发机器的教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fd45d5d6cf6b5283f2339fcb58a39243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lhnMJsxNqhdEkKZBMljFrw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">云中的编码——Shutterstock</figcaption></figure><h1 id="7afd" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">问题是:</h1><p id="22c8" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">当你编写代码时，你需要一台或多台机器来编写和测试代码。</p><p id="47f2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这些天，我通常用Golang编写后端代码Node.js，用REACT编写前端代码。在Linux机器上开发和测试更容易，但是我的“日常”机器运行在Windows上。</p><p id="8d9d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">此外，代码最终将部署在Linux机器上或作为一个无服务器应用程序。</p><p id="ba97" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">最后但同样重要的是，我不总是在同一台电脑后面。</p><ul class=""><li id="dec7" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">当我在野外时，我有一台笔记本电脑。</li><li id="a156" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">我办公室里还有一台电脑。</li><li id="ded0" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">在过去的几个月里，我一直在家工作，就像很多人一样。</li></ul><h1 id="0e98" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">要求:</h1><ul class=""><li id="96e6" class="mo mp iq lp b lq lr lt lu lw nc ma nd me ne mi mt mu mv mw bi translated">我想要一台可以用来编写和测试代码的机器。</li><li id="3c36" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">解决方案应该是负担得起的(我不想买更多的硬件)。</li><li id="18a2" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">我想使用<a class="ae nf" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>(我最喜欢的编辑器)，使用我需要的所有扩展和组件。</li><li id="3e47" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">我需要能够在不到5分钟内启动并运行。</li></ul><h1 id="bf41" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">想法是:</h1><ul class=""><li id="fcc3" class="mo mp iq lp b lq lr lt lu lw nc ma nd me ne mi mt mu mv mw bi translated">不要依赖我的本地机器编码。</li><li id="235f" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">每次我需要编码时，在云中配置一个标准的、干净的、预配置的虚拟机。</li><li id="7ec3" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">一旦我完成编码就销毁机器，这样我就不会为我不需要的资源付费。</li></ul><h1 id="8dcb" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">今天存在的(不够好):</h1><h2 id="e838" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">AWS云9:</h2><p id="4604" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">AWS Cloud 9是一个优秀的解决方案，但是它不能运行Visual Studio代码。它也可能有点贵。</p><h2 id="7773" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">Visual Studio代码中的SSH扩展:</h2><ul class=""><li id="ea98" class="mo mp iq lp b lq lr lt lu lw nc ma nd me ne mi mt mu mv mw bi translated">您仍然需要连接到主机。</li><li id="61a9" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">除非实现一些奇怪/复杂的配置，否则不能使用大多数调试工具和组件。</li></ul><h1 id="dfb5" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">解决方案是:</h1><p id="16c1" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我使用运行Ubuntu 18–04 LTS的Google云计算引擎实例(一个虚拟机)作为我的开发服务器。</p><p id="2a10" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我建议您使用<a class="ae nf" href="https://cloud.google.com/compute/docs/instances/preemptible" rel="noopener ugc nofollow" target="_blank">计算引擎可抢占实例</a>:</p><ul class=""><li id="b7a3" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">它们比标准虚拟机便宜得多(比常规实例便宜80%)。<br/>一台通常每月花费24.27美元的“T5”n1-standard-1机器，作为一台可抢占机器，每月仅花费7.30美元。</li><li id="5072" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">由于这些机器上没有永久存储的东西，所以过一段时间就消失也没关系。</li></ul><p id="8620" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我使用Google Chrome远程访问与开发服务器进行交互。</p><p id="b57d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我使用一个代码库(Github):</p><ul class=""><li id="a53f" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">来托管配置开发服务器的脚本。这样，每当我需要开发服务器时，我都可以拥有一个标准的环境。</li><li id="a444" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">来托管和管理我在那台机器上创建和测试的代码。</li></ul><p id="9a6c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以下是我如何做的一步一步的说明。</p><h1 id="dc8a" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">先决条件:</h1><h2 id="62ce" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">您需要具备的条件:</h2><ul class=""><li id="af3d" class="mo mp iq lp b lq lr lt lu lw nc ma nd me ne mi mt mu mv mw bi translated">一个谷歌云平台账号。</li><li id="45f5" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">在您的GCP项目上创建计算引擎实例的权限。</li><li id="2cd7" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">安装在本地机器上的Chrome浏览器。</li></ul><h2 id="02b2" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">连接到您的GCP控制台:</h2><p id="95eb" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">登录你的<a class="ae nf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>。</p><p id="a6ac" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">打开谷歌云壳终端:点击GCP主控制台页面右上角的图标。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/96aee2820ba78655ee0b43da2771de6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:234/format:webp/1*cg-DDHrIc1U_-1AlTLxSag.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">打开谷歌云外壳的按钮</figcaption></figure><p id="3a23" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">云外壳控制台打开:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/aa1d68d3fa149dd56d5bb2b0426b7e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sXe8dOWJkcinzWEOdEqmg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带有打开的云外壳会话的Google控制台</figcaption></figure><h2 id="23bf" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">为机器保留一个静态IP地址:</h2><p id="f499" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">为了方便与该开发机器之间的连接，我们将创建一个特定的IP地址，并将其连接到该虚拟机。</p><p id="c5ec" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这并不是绝对必要的，但是为您的开发机器拥有一个持久的IP地址是非常有用的。</p><p id="ebec" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在运行该命令之前，您可以编辑我在<strong class="lp ir">粗体</strong>中突出显示的值，并用适合您的值替换它们。</p><p id="45e1" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">将以下代码复制并粘贴到GCP云外壳中，以保留IP地址:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="75b3" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute addresses create <strong class="nv ir">tutorial-dev-vm-ip</strong> \<br/> — project=<strong class="nv ir">tutorials-fbo</strong> \<br/> — network-tier=<strong class="nv ir">STANDARD</strong> \<br/> — region=<strong class="nv ir">asia-southeast1</strong></span></pre><p id="3550" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">让我们来分解这个命令:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="e73f" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute addresses create <strong class="nv ir">tutorial-dev-vm-ip</strong></span></pre><p id="0b40" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们正在创建一个名为`<strong class="lp ir"> tutorial-dev-vm-ip </strong>的IP地址</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="e438" class="ng kw iq nv b gy nz oa l ob oc"> — project=<strong class="nv ir">tutorials-fbo</strong></span></pre><p id="3e15" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们正在项目`<strong class="lp ir">教程-fbo </strong>中创建这个IP地址</p><ul class=""><li id="4b5d" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">该项目必须存在。</li><li id="523c" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">如果不指定，则在当前项目中创建IP地址。</li></ul><p id="54f8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">详见</em> <a class="ae nf" href="https://cloud.google.com/resource-manager/docs/creating-managing-projects" rel="noopener ugc nofollow" target="_blank"> <em class="od">关于如何创建项目的谷歌文档</em> </a> <em class="od">。</em></p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="cad8" class="ng kw iq nv b gy nz oa l ob oc"> — region <strong class="nv ir">asia-southeast1</strong></span></pre><p id="58ff" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">IP地址所属的区域是“<strong class="lp ir">亚洲-东南亚1 </strong>”。</p><ul class=""><li id="1dcd" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">确保这与您将创建虚拟机的区域是同一个区域。</li><li id="8308" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">选择一个离你近的区域。</li><li id="40af" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">您可以在<a class="ae nf" href="https://cloud.google.com/compute/docs/regions-zones#available" rel="noopener ugc nofollow" target="_blank">谷歌地区和区域列表</a>上看到可用区域列表。</li></ul><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="90bd" class="ng kw iq nv b gy nz oa l ob oc"> — ip-version IPV4</span></pre><p id="90a7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这是一个IP v4地址。</p><p id="beb8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">你可以在</em> <a class="ae nf" href="https://cloud.google.com/sdk/gcloud/reference/compute/addresses/create" rel="noopener ugc nofollow" target="_blank"> <em class="od">关于g cloud compute addresses create</em></a>的Google文档中看到关于保留IP地址不同选项的详细解释。</p><h2 id="14b3" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">创建防火墙规则以访问虚拟机:</h2><p id="3971" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果您需要对代码进行一些测试，在开发机器上打开http和https端口是很好的。</p><p id="afe5" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">允许http访问的规则:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="c1c4" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute firewall-rules create <strong class="nv ir">allow-http</strong> \<br/> — project=<strong class="nv ir">tutorials-fbo</strong> \<br/> — direction=INGRESS \<br/> — network=default \<br/> — action=ALLOW \<br/> — rules=tcp:80 \<br/> — source-ranges=<strong class="nv ir">0.0.0.0/0</strong> \<br/> — target-tags=<strong class="nv ir">http-server</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/4d66cf8b20ffafd49f9a1155935fb821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FjLe3qONL4KOWqWqPFnC4w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Google Cloud Shell的屏幕截图—创建http防火墙规则</figcaption></figure><p id="f77b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">让我们也分解这个命令:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="e07a" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute firewall-rules create <strong class="nv ir">allow-http</strong></span></pre><p id="a6a2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们正在创建一个名为“<strong class="lp ir"> allow-http </strong>”的防火墙规则。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="ad2e" class="ng kw iq nv b gy nz oa l ob oc"> — project=<strong class="nv ir">tutorials-fbo</strong></span></pre><p id="9540" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们在项目“<strong class="lp ir">教程-fbo </strong>”中创建了这个规则。如果不指定，规则将在当前项目中创建。该项目必须存在。</p><p id="174e" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">详见</em> <a class="ae nf" href="https://cloud.google.com/resource-manager/docs/creating-managing-projects" rel="noopener ugc nofollow" target="_blank"> <em class="od">关于如何创建项目的谷歌文档</em></a><em class="od"/>。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="5994" class="ng kw iq nv b gy nz oa l ob oc"> — direction=INGRESS </span></pre><p id="5370" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">此规则适用于传入流量。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="9c99" class="ng kw iq nv b gy nz oa l ob oc"> — network=<strong class="nv ir">default</strong> </span></pre><p id="611a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这是本项目`<strong class="lp ir">默认</strong> ` VPC的规则。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="ab6a" class="ng kw iq nv b gy nz oa l ob oc"> — action=ALLOW </span></pre><p id="5cc6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这是一个允许访问的规则(与拒绝相对)。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="865c" class="ng kw iq nv b gy nz oa l ob oc"> — rules=tcp:<strong class="nv ir">80</strong> </span></pre><p id="ea42" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">规则本身是关于TCP端口http协议的标准端口)。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="2ae3" class="ng kw iq nv b gy nz oa l ob oc"> — source-ranges=<strong class="nv ir">0.0.0.0/0</strong> </span></pre><p id="7ab2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">互联网上的任何机器都可以访问。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="0d9b" class="ng kw iq nv b gy nz oa l ob oc"> — target-tags=<strong class="nv ir">http-server</strong></span></pre><p id="ff63" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果项目中的资源具有标签`<strong class="lp ir"> http-server </strong>`,将应用此规则。</p><p id="1f5c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">你可以在gcloud compute firewall的</em> <a class="ae nf" href="https://cloud.google.com/sdk/gcloud/reference/compute/firewall-rules/create" rel="noopener ugc nofollow" target="_blank"> <em class="od"> Google文档-规则创建</em> </a> <em class="od">上看到不同选项的详细解释。</em></p><p id="7776" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们还希望允许来自安全http连接的访问。我们用来连接机器的Chrome远程桌面需要打开端口443。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="e8b4" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute firewall-rules create <strong class="nv ir">allow-https</strong> \<br/> — project=<strong class="nv ir">tutorials-fbo</strong> \<br/> — direction=INGRESS \<br/> — network=default \<br/> — action=ALLOW \<br/> — rules=tcp:443 \<br/> — source-ranges=<strong class="nv ir">0.0.0.0/0 </strong>\<br/> — target-tags=<strong class="nv ir">https-server</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/835e580e4d12188d68033a7bdf071852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUC4WBa29Nu1NTwtCUrg5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Google Cloud Shell的屏幕截图—创建https防火墙规则</figcaption></figure><h1 id="1c4b" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">简短版本—创建并访问开发服务器:</h1><p id="e789" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">前面所有的步骤只需要一次。</p><p id="52fa" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这是每次您需要做一些编码时创建和访问开发机器的步骤的简短版本。</p><h2 id="1664" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">创建新的开发机器:</h2><p id="b785" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果你想知道更多关于这个步骤的细节，请阅读本文中的“扩展版本——创建开发服务器”一段。</p><p id="bb24" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">登录你的<a class="ae nf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>，打开谷歌云外壳终端。</p><p id="823a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">复制你需要的脚本。如果您没有我的脚本，您可以使用它:它可以在Github上获得(法律声明:使用风险自担！).</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="b07a" class="ng kw iq nv b gy nz oa l ob oc">git clone <a class="ae nf" href="https://github.com/franck-boullier/utils.git" rel="noopener ugc nofollow" target="_blank">https://github.com/franck-boullier/utils.git</a></span></pre><p id="d451" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">并移动到脚本所在的文件夹。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="24e0" class="ng kw iq nv b gy nz oa l ob oc">cd ~/utils/installation</span></pre><p id="5a72" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">找到您为该虚拟机创建的保留IP地址，并将其存储在一个变量中。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="6c9c" class="ng kw iq nv b gy nz oa l ob oc"><strong class="nv ir">IP_ADDRESS_DEV_MACHINE</strong>=$(gcloud compute addresses list \<br/> — filter=”name:<strong class="nv ir">tutorial-dev-vm-ip</strong> AND region:<strong class="nv ir">asia-southeast1</strong>" \<br/> — format=”value(address_range())”<br/> )</span></pre><p id="397d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">创建虚拟机的命令:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="4843" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute instances create <strong class="nv ir">tutorial-dev-vm</strong> \<br/> — project=<strong class="nv ir">tutorials-fbo</strong> \<br/> — zone=<strong class="nv ir">asia-southeast1-b</strong> \<br/> — machine-type=<strong class="nv ir">n1-standard-1</strong> \<br/> — preemptible \<br/> — image=<strong class="nv ir">ubuntu-1804-bionic-v20200716</strong> \<br/> — image-project=<strong class="nv ir">ubuntu-os-cloud</strong> \<br/> — boot-disk-size=<strong class="nv ir">10GB</strong> \<br/> — boot-disk-type=<strong class="nv ir">pd-standard</strong> \<br/> — boot-disk-device-name=<strong class="nv ir">tutorial-dev-vm</strong> \<br/> — metadata-from-file startup-script=<strong class="nv ir">tutorial-dev-machine.sh</strong> \<br/> — network-tier=<strong class="nv ir">STANDARD \</strong><br/> — address=<strong class="nv ir">$IP_ADDRESS_DEV_MACHINE \</strong><br/> — subnet=<strong class="nv ir">default</strong> \<br/> — tags=<strong class="nv ir">http-server</strong>,<strong class="nv ir">https-server \</strong><br/> — labels=<strong class="nv ir">os=ubuntu-18–04-lts,cost-alloc=tutorials,usage=golang,configuration=v1–1–0</strong></span></pre><p id="cbdf" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您可以在浏览器上通过SSH从您的虚拟机实例列表连接到您新创建的开发机器(确保您选择了正确的项目)。</p><p id="a063" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">将您的用户帐户添加到远程机器上的chrome-remote-desktop Linux组。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="7e5b" class="ng kw iq nv b gy nz oa l ob oc">sudo usermod -a -G chrome-remote-desktop $USER</span></pre><p id="fa26" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">并注销</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="87a7" class="ng kw iq nv b gy nz oa l ob oc">logout</span></pre><h2 id="0821" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">要连接到您的远程机器:</h2><p id="806f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果你想知道更多关于如何做的细节，去这篇文章中的“连接到远程开发服务器”一段。</p><p id="09fc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">转到<a class="ae nf" href="https://remotedesktop.google.com/headless" rel="noopener ugc nofollow" target="_blank"> Chrome远程桌面页面，设置对新机器的访问</a>，并按照说明获取允许访问远程虚拟机所需的代码。</p><p id="ac15" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">通过SSH web连接将远程虚拟机的访问代码复制到远程虚拟机，运行该代码，并在出现提示时提供一个六位数的PIN。</p><p id="6f45" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">使用<a class="ae nf" href="https://remotedesktop.google.com/access" rel="noopener ugc nofollow" target="_blank">谷歌Chrome远程桌面</a>访问远程虚拟机。</p><p id="52e4" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">开始编码！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/89936ef7edaf3a660637d766e37fe95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zhnwNUGJJgHYcQoI7phZ_w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">连接到开发机器——Visual Studio代码是开放的并且正在工作</figcaption></figure><h1 id="3a87" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">完成后—删除虚拟机:</h1><p id="88b6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">完成代码工作后，提交并推送至您最喜欢的代码库。</p><p id="8746" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">并删除开发机器:</p><p id="e3f3" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">登录您的<a class="ae nf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Cloud控制台</a>，打开Google Cloud Shell终端。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/aa1d68d3fa149dd56d5bb2b0426b7e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sXe8dOWJkcinzWEOdEqmg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带有打开的云外壳会话的Google控制台</figcaption></figure><p id="a669" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">删除机器的命令是:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a12c" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute instances delete <strong class="nv ir">tutorial-dev-vm</strong> \<br/> — zone=<strong class="nv ir">asia-southeast1-b</strong></span></pre><p id="8408" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">结果是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/5fe8c08cc3eae04cb9359e918fb7163c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DUAxvS3kP6LU9jPOMA3BPg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">完成后，删除您的开发机器。</figcaption></figure><h1 id="f26c" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">下次您需要开发环境时:</h1><p id="0c46" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">再次创建新的开发服务器。</p><p id="fb9b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">使用<a class="ae nf" href="https://remotedesktop.google.com/" rel="noopener ugc nofollow" target="_blank"> Chrome远程桌面网站</a>连接到开发服务器。</p><h1 id="f686" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">扩展版本—创建开发服务器:</h1><p id="8eea" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这是对之前“短版”更详细的解释。</p><p id="b506" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">结果是相同的，但这将帮助您了解它如何工作的更多细节。</p><p id="66fb" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">登录你的<a class="ae nf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>，打开谷歌云外壳终端。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/aa1d68d3fa149dd56d5bb2b0426b7e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sXe8dOWJkcinzWEOdEqmg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带有打开的云外壳会话的Google控制台</figcaption></figure><h2 id="0186" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">获取您预订的IP地址:</h2><p id="cf01" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">验证您是否保留了可以使用的固定IP地址。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="ea28" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute addresses describe <strong class="nv ir">tutorial-dev-vm-ip</strong> \<br/> — region=<strong class="nv ir">asia-southeast1</strong></span></pre><p id="6352" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">输出应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/a117be60e90db3823eadff7e79dc2b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3DNAqkFH2g9LAWiyBKB-Vw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">关于为您的开发机器保留的IP地址的细节</figcaption></figure><p id="358c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将把那个新保留的IP地址复制到一个本地变量`<strong class="lp ir">IP _ ADDRESS _ DEV _ MACHINE</strong>`；这使得接下来的步骤更加简单。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="2a2d" class="ng kw iq nv b gy nz oa l ob oc"><strong class="nv ir">IP_ADDRESS_DEV_MACHINE</strong>=$(gcloud compute addresses list \<br/> — filter=”name:<strong class="nv ir">tutorial-dev-vm-ip</strong> AND region:<strong class="nv ir">asia-southeast1</strong>" \<br/> — format=”value(address_range())”<br/> )</span></pre><p id="dab5" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">检查是否一切如预期进行。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="6916" class="ng kw iq nv b gy nz oa l ob oc">echo $<strong class="nv ir">IP_ADDRESS_DEV_MACHINE</strong></span></pre><p id="6287" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">输出应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/7630d70f0d98dc661d381b42dbc9041d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A7VbofoZuCco_3L9XEH-Bw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">验证IP地址是否在本地变量中导出</figcaption></figure><h2 id="2514" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">获取脚本以准备机器:</h2><p id="bc00" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果您没有我的脚本，您可以使用它:它可以在Github上获得(法律声明:使用风险自担！).</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a10b" class="ng kw iq nv b gy nz oa l ob oc">git clone <a class="ae nf" href="https://github.com/franck-boullier/utils.git" rel="noopener ugc nofollow" target="_blank">https://github.com/franck-boullier/utils.git</a></span></pre><p id="5cd8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将在本教程中使用的脚本会在虚拟机上安装以下内容:</p><ul class=""><li id="3690" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">Xcfe:所以当你登录虚拟机时，你可以有一个熟悉的图形用户界面。</li><li id="adc4" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">Chrome远程桌面从你的电脑访问虚拟机。</li><li id="2947" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">Firefox:测试你将要构建的代码。</li><li id="a254" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">Chrome:测试你将要构建的代码。</li><li id="0ce3" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">谷歌云SDK，这样你就可以在需要的时候与谷歌云平台互动。</li><li id="b54c" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">AWS CLI，以便您可以在需要时与AWS服务和资源进行交互。</li><li id="a821" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">Visual Studio代码。</li></ul><h2 id="4d21" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">创建新的虚拟机:</h2><p id="9c3d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在运行下面的命令之前，您可以编辑我在<strong class="lp ir">粗体</strong>中突出显示的值，并用适合您的值替换它们。</p><p id="fb33" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">移动到安装脚本的下载目录。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a652" class="ng kw iq nv b gy nz oa l ob oc">cd ~/utils/installation</span></pre><p id="9f08" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">创建虚拟机:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="5e0b" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute instances create <strong class="nv ir">tutorial-dev-vm</strong> \<br/>    --project=<strong class="nv ir">tutorials-fbo</strong> \<br/>    --zone=<strong class="nv ir">asia-southeast1-b</strong> \<br/>    --machine-type=<strong class="nv ir">n1-standard-1</strong> \<br/>    --preemptible \<br/>    --image=<strong class="nv ir">ubuntu-1804-bionic-v20200716</strong> \<br/>    --image-project=<strong class="nv ir">ubuntu-os-cloud</strong> \<br/>    --boot-disk-size=<strong class="nv ir">10GB</strong> \<br/>    --boot-disk-type=<strong class="nv ir">pd-standard</strong> \<br/>    --boot-disk-device-name=<strong class="nv ir">tutorial-dev-vm</strong> \<br/>    --metadata-from-file startup-script=<strong class="nv ir">tutorial-dev-machine.sh</strong> \<br/>    --network-tier=<strong class="nv ir">STANDARD \</strong><br/>    --address=<strong class="nv ir">$IP_ADDRESS_DEV_MACHINE \</strong><br/>    --subnet=<strong class="nv ir">default</strong> \<br/>    --tags=<strong class="nv ir">http-server</strong>,<strong class="nv ir">https-server \</strong><br/>    --labels=<strong class="nv ir">os=ubuntu-18-04-lts,cost-alloc=tutorials,usage=golang,configuration=v1-1-0</strong></span></pre><p id="6f03" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">让我们来分解这个命令:</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="b1ce" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute instances create <strong class="nv ir">tutorial-dev-vm</strong></span></pre><p id="09fa" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们正在创建一个名为“<strong class="lp ir"> tutorial-dev-vm </strong>”的实例。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a7dd" class="ng kw iq nv b gy nz oa l ob oc"> — project=<strong class="nv ir">tutorials-fbo</strong></span></pre><p id="3405" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们在项目`<strong class="lp ir">教程-fbo </strong>'中创建了这个规则。该项目必须存在。</p><p id="0441" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果不指定，实例将在当前项目中创建。</p><p id="4ee0" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">参见</em> <a class="ae nf" href="https://cloud.google.com/resource-manager/docs/creating-managing-projects" rel="noopener ugc nofollow" target="_blank"> <em class="od">关于如何创建项目的谷歌文档</em> </a> <em class="od">了解更多细节</em>。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="4bac" class="ng kw iq nv b gy nz oa l ob oc"> — zone=<strong class="nv ir">asia-southeast1-b</strong> </span></pre><p id="1ed3" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将在“<strong class="lp ir"> asia-southeast1-b </strong>”区域中部署该实例。<br/>确保该区域与您创建IP地址的区域相同。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a4b6" class="ng kw iq nv b gy nz oa l ob oc"> — machine-type=<strong class="nv ir">n1-standard-1 </strong></span></pre><p id="18b2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">该机器是一台“n1-标准-1”机器。</p><p id="6378" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您可以在<a class="ae nf" href="https://cloud.google.com/compute/docs/machine-types" rel="noopener ugc nofollow" target="_blank"> Google可能的机器类型列表</a>上看到您可以构建的可能的机器列表。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a4bb" class="ng kw iq nv b gy nz oa l ob oc"> — preemptible</span></pre><p id="b9d7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们正在优化成本。谷歌抢占实例不是问题。如果发生这种情况，我们将重新创建一个新的。</p><p id="5996" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">详见</em> <a class="ae nf" href="https://cloud.google.com/compute/docs/instances/preemptible" rel="noopener ugc nofollow" target="_blank"> <em class="od">可抢占虚拟机上的谷歌文档</em></a><em class="od"/>。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="22a2" class="ng kw iq nv b gy nz oa l ob oc"> — image=<strong class="nv ir">ubuntu-1804-bionic-v20200716</strong> \<strong class="nv ir"><br/></strong> — image-project=<strong class="nv ir">ubuntu-os-cloud</strong></span></pre><p id="5390" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们使用的是来自“<strong class="lp ir"> ubuntu-os-cloud </strong>”项目的“<strong class="lp ir">Ubuntu-1804-bionic-v 2020 07 16</strong>”图像。</p><p id="4df9" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">通过运行命令，您可以看到可用图像及其关联项目的列表</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="b18e" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute images list</span></pre><p id="6825" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在你的GCP云壳上。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="d760" class="ng kw iq nv b gy nz oa l ob oc"> — boot-disk-size=<strong class="nv ir">10GB</strong> \<br/> — boot-disk-type=<strong class="nv ir">pd-standard</strong> \<br/> — boot-disk-device-name=<strong class="nv ir">tutorial-dev-vm</strong> \</span></pre><p id="7f3f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">引导盘是一个大小为“<strong class="lp ir"> 10GB </strong>的“<strong class="lp ir"> pd标准</strong>盘。它将被命名为`<strong class="lp ir">教程-开发-虚拟机</strong></p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="9485" class="ng kw iq nv b gy nz oa l ob oc"> — metadata-from-file startup-script=<strong class="nv ir">tutorial-dev-machine.sh</strong> </span></pre><p id="704f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这是将作为安装过程的一部分运行的脚本。</p><p id="e12f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">当启动脚本存在时，计算引擎执行以下操作:</p><ul class=""><li id="1e2a" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">将启动脚本复制到实例中的本地文件。</li><li id="f88c" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">设置文件的运行权限。</li><li id="d4bb" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">运行文件。</li></ul><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="4404" class="ng kw iq nv b gy nz oa l ob oc"> — network-tier=<strong class="nv ir">STANDARD</strong> </span></pre><p id="4ded" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们不需要超快的网络性能，我们正在优化成本。</p><p id="8623" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将使用`<strong class="lp ir">标准</strong>网络层，而不是`<strong class="lp ir">高级</strong>网络层。</p><p id="4c1d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="od">更多信息</em>参见 <a class="ae nf" href="https://cloud.google.com/network-tiers" rel="noopener ugc nofollow" target="_blank"> <em class="od">谷歌关于网络服务层级的文档</em> </a> <em class="od">。</em></p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="8869" class="ng kw iq nv b gy nz oa l ob oc"> — address=<strong class="nv ir">$IP_ADDRESS_DEV_MACHINE</strong></span></pre><p id="7b9f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">该机器的IP地址将是我们在上一步中创建的保留IP地址。这里我们使用我们之前设置的变量，而不是硬编码的值。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="53c9" class="ng kw iq nv b gy nz oa l ob oc"> — subnet=default </span></pre><p id="1975" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们对该虚拟机使用该项目的默认子网。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="b424" class="ng kw iq nv b gy nz oa l ob oc"> — tags=<strong class="nv ir">http-server</strong>,<strong class="nv ir">https-server</strong> </span></pre><p id="dee8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这是两个标签:`<strong class="lp ir"> http-server </strong>和`<strong class="lp ir"> https-server </strong>，它们是我们在上一步创建防火墙规则时创建的。</p><p id="3f3a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们将使用Google Chrome来访问该机器，这样就可以通过https协议访问虚拟机。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="b653" class="ng kw iq nv b gy nz oa l ob oc"> — labels=<strong class="nv ir">os=ubuntu-18–04-lts</strong>,<strong class="nv ir">cost-allocation=tutorials</strong>,<strong class="nv ir">usage=golang</strong>,<strong class="nv ir">configuration=v1–1–0</strong><br/>My own specific labels that I want to attach to that instance:</span></pre><p id="33a6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以下是我使用的一些有用的标签:</p><ul class=""><li id="dc26" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">`<strong class="lp ir">OS = Ubuntu-18–04-lts</strong></li><li id="f7c9" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">`<strong class="lp ir">成本分配=教程</strong>` 1</li><li id="6726" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">`<strong class="lp ir">用法=golang </strong>`</li><li id="cddc" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">`<strong class="lp ir">配置= v1–1–0</strong></li></ul><p id="2bbc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">I <em class="od">如果你想更好地理解所有可用的参数，你可以在</em> <a class="ae nf" href="https://cloud.google.com/sdk/gcloud/reference/compute/instances/create" rel="noopener ugc nofollow" target="_blank"> <em class="od"> Google文档上看到所有附加选项的详细解释，用于g cloud compute instances create</em></a>。</p><p id="611b" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">虚拟机已经为我们准备好了。</p><p id="e564" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们现在需要配置Chrome Remote来访问那台机器。</p><h1 id="3919" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">设置Chrome远程桌面:</h1><p id="d191" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这部分教程来自于关于如何设置Chrome Remote的谷歌文档。</p><p id="8373" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">要启动远程桌面服务器，您需要有一个Google帐户的授权密钥，以便连接到它。</p><p id="a2d7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">转到您的虚拟机实例的<a class="ae nf" href="https://console.cloud.google.com/compute/instances" rel="noopener ugc nofollow" target="_blank">列表。</a></p><p id="3d42" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您应该会看到新创建的虚拟机:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/ebc447d22c493b4f152c112bfa79dc5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cg9iMstAgeFGxOLd1hrENA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">该项目中您的虚拟机列表—我们的实例已经创建</figcaption></figure><p id="df9c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">单击SSH按钮连接到您的虚拟机</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/889931f61254c9d8442d680c0f1073f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:152/format:webp/1*TJWxMNN0MDabaKz6GmylBQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在web浏览器中访问SSH连接</figcaption></figure><p id="ac24" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您应该会看到一个新的浏览器窗口打开。</p><p id="d607" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">它看起来会像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/fdcdd7b6616715cb8cc4616d49ad2383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t839IK-5PBF3Y62nfd4ZZQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">通过浏览器中的SSH连接到开发机器。</figcaption></figure><p id="f497" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">将您的用户帐户添加到chrome-remote-desktop Linux组。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="8c92" class="ng kw iq nv b gy nz oa l ob oc">sudo usermod -a -G chrome-remote-desktop $USER</span></pre><p id="56f2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">并注销</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="ff4d" class="ng kw iq nv b gy nz oa l ob oc">logout</span></pre><p id="828a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">使用本地机器上的Chrome浏览器，进入Chrome远程桌面设置页面。你可以通过这个链接进入那个页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/489ef3d218538ceaab59efcc18e486f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIxxbH7NfqgrAHbYp36L_g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">设置远程访问—步骤1</figcaption></figure><p id="3467" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">点击“开始”</p><p id="cd59" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您现在应该会看到这个页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/49c7cafea8c7027e9a4ddf961597d608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aSoCIzyt_v61bLPid2oyqQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">设置远程访问—步骤2</figcaption></figure><p id="f2df" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">点击<strong class="lp ir">下一步</strong>:不再需要下载或安装任何东西；这已经由我们在创建虚拟机时指定的脚本完成了。</p><p id="a1bc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">下一页应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/1a324541be0c03fdb95cfcc8b8c996a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2FzM9AySlvd_0TJzVDPcvQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">设置远程访问—步骤3</figcaption></figure><p id="8ba6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们使用Debian Linux命令(第三段代码)在VM(远程)实例上设置和启动Chrome远程桌面服务。</p><p id="951f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">要链接远程虚拟机和您的Google帐户，请使用授权码。</p><p id="fb5c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">复制命令</p><p id="fcff" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">通过再次点击<strong class="lp ir"> SSH </strong>按钮，重新连接到您的实例(开发机器)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/ebc447d22c493b4f152c112bfa79dc5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cg9iMstAgeFGxOLd1hrENA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">该项目中的虚拟机列表—重新连接到您的实例</figcaption></figure><p id="1a10" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">将该命令复制到连接到您的实例的SSH窗口，然后运行该命令。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="651c" class="ng kw iq nv b gy nz oa l ob oc">                     <strong class="nv ir">EXAMPLE — DO NOT USE</strong><br/>DISPLAY= /opt/google/chrome-remote-desktop/start-host \<br/> — code=”4/xxxxxxxxxxxxxxxxxxxxxxxx” \<br/> — redirect-url=”https://remotedesktop.google.com/_/oauthredirect" \<br/> — name=</span></pre><p id="3cb8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">确保使用您复制的代码。不要使用上面的例子。</p><p id="fed6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">复制刚刚打开的SSH窗口上的代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/fdcdd7b6616715cb8cc4616d49ad2383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t839IK-5PBF3Y62nfd4ZZQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">这是你需要复制谷歌远程访问代码的地方</figcaption></figure><p id="8085" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">不要复制谷歌云外壳上的代码。</p><p id="3a20" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">运行命令(单击enter)。</p><p id="3219" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">系统会提示您输入一个六位数的PIN。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/6a28599ea3bbee9cc7aa90a7add89522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*EtFGCMZABAkuKr-Qb-QqYg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">输入实例的六位数PIN</figcaption></figure><p id="69fc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">按照要求输入一个六位数的PIN并确认。</p><h2 id="27af" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">故障排除1:</h2><p id="5bf2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">当您尝试在远程虚拟机上配置远程连接时，如果您遇到如下错误</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/7a96f8737bac2e2c58915b6dfa3f3145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/0*wNB5lF4z9ZUv2hct"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">错误-没有安装chrome remote</figcaption></figure><p id="4ff6" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这可能是因为安装脚本仍在运行。</p><p id="3396" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">等待一分钟，然后重试。</p><p id="a92f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">故障排除2:</p><p id="97b1" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果您收到这样的错误消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/4121aa8b4356907955975bc98a4f646a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uJwrHH4PHggddn4a"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">错误消息— OAuth错误</figcaption></figure><p id="1e71" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">代码可能已过期。密码只在几分钟内有效。</p><p id="e32c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">点击Chrome远程桌面设置页面上的重新开始按钮，然后重试。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/de8f14485dc1f16cd0baaf82dd1d7f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/0*r3leO8Spu1Z6FLC_"/></div></figure><h1 id="89c1" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">连接到远程开发服务器:</h1><p id="b20c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在你的本地电脑上，打开谷歌Chrome浏览器，进入Chrome远程桌面网站。</p><p id="d0b3" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您应该在那里看到您的远程机器:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/fa51f5358140410edf77679097a44e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xEyI2qlQ1XCU5HHj"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Chrome远程桌面—机器是可访问的</figcaption></figure><p id="5879" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">单击远程桌面实例的名称。</p><p id="af6d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">出现提示时，输入您之前创建的PIN，然后单击箭头按钮进行连接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/73bed103efa6b597427aa51628aaa0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/0*_K3ln31H3XJKI8kc"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">输入您的PIN以连接到远程实例</figcaption></figure><p id="4763" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">你接通了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/5f427043ceca7d4707b3074a0a46ef50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O6nbaICl34IiI9y5"/></div></div></figure><h2 id="a0b6" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">故障排除3:</h2><p id="6d3d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果您在尝试连接到远程机器时看到这样的屏幕:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/8cd469b7464c66babd8c73c49e0b3f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VTbXxjkaNtkjhZJZ"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">尝试连接到远程机器时出错</figcaption></figure><p id="e352" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">很可能安装脚本还没有完成。</p><p id="90e2" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">单击确定。</p><p id="4d7f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">等待一分钟，然后重试。</p><h2 id="aa1c" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">如果您没有要连接的问题:</h2><p id="08e4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">接受默认设置</p><p id="b28f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">转到应用&gt;&gt;开发&gt; &gt; Visual Studio代码</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/7d794d0eab92c64a673cfa88fad9ad0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/0*w-Mz0jAOgX29rf_X"/></div></figure><p id="d1ae" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">编码快乐！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/46280d23b6ee25eb918440d8ea9211b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SvmqJios5lO94gzH"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">连接到开发机器——Visual Studio代码是开放的并且正在工作</figcaption></figure><h1 id="b1ea" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">就是这样！</h1><p id="07d9" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在本文中，您已经看到了如何创建一个可负担得起的、标准的、临时的、托管在云中的开发环境。</p><p id="7293" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">那个环境有你需要编码的工具，包括Visual Studio代码。</p><p id="0d99" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">我们还看到了如何从Google Chrome远程桌面访问这个环境。</p><p id="b0cb" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">对于本教程，我使用了谷歌云平台。如果您更熟悉AWS，您可以使用Amazon Web Services和EC2实例。</p><p id="0781" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这就是我如何将开发服务器的成本降低了大约90%:我只在需要的时候使用临时实例！</p><h1 id="25ae" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">清理:</h1><p id="6bd1" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">知道如何撤销事情总是好的…</p><h2 id="d01a" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">删除保留的IP地址:</h2><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="ec72" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute addresses delete <strong class="nv ir">tutorial-dev-vm-ip</strong> \<br/> — region=<strong class="nv ir">asia-southeast1</strong></span></pre><h2 id="f49d" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated">删除防火墙规则:</h2><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="9688" class="ng kw iq nv b gy nz oa l ob oc">gcloud compute firewall-rules delete <strong class="nv ir">allow-http<br/></strong>gcloud compute firewall-rules delete <strong class="nv ir">allow-https</strong></span></pre></div></div>    
</body>
</html>