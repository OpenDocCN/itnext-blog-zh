<html>
<head>
<title>Script-Server: The Open Source Tool Everyone Should Use (Or at Least Know About)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">脚本服务器:每个人都应该使用(或者至少了解)的开源工具</h1>
<blockquote>原文：<a href="https://itnext.io/script-server-the-open-source-tool-everyone-should-use-or-at-least-know-about-41f28a1191c3?source=collection_archive---------3-----------------------#2020-01-10">https://itnext.io/script-server-the-open-source-tool-everyone-should-use-or-at-least-know-about-41f28a1191c3?source=collection_archive---------3-----------------------#2020-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d54c74c98cf868f85546234c9014bf50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P1JhoeS8g4GbzoAp.png"/></div></div></figure><p id="4a14" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">人人都爱开源:)</p><p id="8195" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为什么？因为它是免费的。很有帮助。它很灵活。有时这是唯一有效的方法，仅仅是因为开发开源解决方案的社区已经遇到了您刚刚遇到的问题，许多优秀的人才聚集在一起，利用开源的力量创建了一个非常好的定制解决方案。</p><p id="4953" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇博文中，我将讨论一个具体的开源工具，这个工具并不为很多技术人员所知，由<a class="ae kw" href="https://github.com/bugy" rel="noopener ugc nofollow" target="_blank"> Bugy </a>开发的名为<a class="ae kw" href="https://github.com/bugy/script-server" rel="noopener ugc nofollow" target="_blank"> Script-Server </a>。</p><h1 id="b794" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">这是什么？</h1><p id="de61" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Script-Server是一个智能的Web-UI(也可以通过命令行运行),其中您可以在一个用户友好的设置中公开脚本/Ansible行动手册。您不需要修改脚本——您只需将每个脚本的配置添加到脚本服务器中，它会负责适当的UI、验证、执行等。意思是-每个人都可以使用它并运行脚本(见<a class="ae kw" href="https://script-server.net/" rel="noopener ugc nofollow" target="_blank">演示</a>)，不需要任何技术知识，也不需要任何权限，因为脚本运行的权限设置在后端，与最终用户权限无关。</p><h1 id="1b7b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">这是给谁的？</h1><p id="aa59" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">如果你有剧本，翻译剧本等。，并且您希望让您公司的非技术人员也能使用它们，从而减少他们对您的IT/系统/DevOps团队的依赖——这个工具就是为您准备的。</p><h1 id="5f0d" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我是怎么开始用的？</h1><p id="4cbd" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">一位来自非技术团队的同事(让我们称她为Betty)每月有一项任务(不在固定日期),从外部位置下载<a class="ae kw" href="https://en.wikipedia.org/wiki/Zip_%28file_format%29" rel="noopener ugc nofollow" target="_blank"> zip </a>文件，在特定服务器上解压缩，分析文件的统计数据和散列值，并向Betty发回一份报告。</p><p id="d402" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为一名DevOps工程师，我的信条之一是将简单的事情自动化。我将Betty的重复任务确定为自动化的一个很好的候选，并创建了一个可行的剧本来执行这个流程。</p><p id="ec1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是每个月贝蒂都会开一张吉拉票，让我的团队去运行它，因为她没有权限在她那端运行Ansible playbook。</p><p id="880f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大约在那个时候，一个团队成员分享了他使用“脚本服务器”的经历，这是一个为非技术人员提供服务的工具；我很快意识到，这个工具可能是一个很好的方式，可以让Betty独立地获得她的报告，并减少对我的团队的不必要的依赖。</p><p id="af74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为解决方案的一部分，我给贝蒂提供了一个脚本服务器的链接(托管在我这边的一个服务器上)，并授予她登录权限，这给了她运行这个过程所需的独立性(并最小化了她打开的吉拉门票的数量)😉).</p><p id="1416" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">参见上面Betty登录并输入她需要的特定脚本后所看到的截图(在封面照片中点击“执行”后的输出)。</p><h1 id="97a2" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">那么…是什么让这个工具如此伟大呢？</h1><p id="d602" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">毫无疑问，脚本服务器的主要价值在于它以定制的方式包装了脚本/剧本，允许暴露变量/参数下拉列表、复选框、文本等。(Ansible中的额外变量，常规脚本中的参数)。从用户体验的角度来看，这意味着在UI中动态地请求脚本参数/变量(从而消除了查看脚本本身以查看它期望获得哪些参数的需要)。</p><p id="da91" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，上面的截图显示了一个名为“batch _ date”(2019–04)的变量。“batch_date”实际上是在Ansible剧本“playbook.yml”中定义的额外的var，并且通过Ansible中的变量名到具有配置脚本的UI中的变量名的映射定义链接到脚本服务器。</p><p id="33a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了举例说明这是如何工作的，请参见下面的脚本:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="dc27" class="mj ky iq mf b gy mk ml l mm mn">{<br/> "name": "Very parameterized",<br/> "script_path": "scripts/parameterized.sh",<br/> "working_directory": "./samples",<br/> "description": "This script does nothing except accepting a lot of parameters and printing them",<br/> "allowed_users": [<br/> "*"<br/> ],<br/> "include": "${Simple Text}.json",<br/> "parameters": [<br/> {<br/> "name": "Simple Int",<br/> "param": " - simple_int",<br/> "type": "int"<br/> },<br/> {<br/> "name": "Simple Boolean",<br/> "param": " - simple_bool",<br/> "no_value": true,<br/> "description": "Boolean One"<br/> },<br/> {<br/> "name": "Multiple selection",<br/> "param": " - multiselect",<br/> "type": "multiselect",<br/> "description": "Multiselect list",<br/> "values": [<br/> "Black cat",<br/> "Brown dog",<br/> "Green parrot",<br/> "Red fox"<br/> ]<br/> }<br/> ]<br/>}</span></pre><p id="ff17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本例中，我们有一个调用执行脚本“scripts/parametered . sh”的配置脚本，该配置脚本为执行脚本定义参数和变量。</p><p id="2fa7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本质上，脚本服务器的工作方式是，如果您的执行脚本需要参数，您必须使用配置脚本来运行它——如果它只是执行没有任何参数的命令，您可以直接从脚本服务器运行它(在演示站点中,“colortest”就是一个例子)。</p><p id="b81c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完整的文件可以在<a class="ae kw" href="https://github.com/bugy/script-server/blob/master/samples/configs/parameterized.json" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="5dea" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">脚本服务器支持哪些脚本？</h1><p id="2ef0" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">脚本服务器是语言无关的——它可以运行从Perl到PHP到Python的任何语言的脚本；Ansible行动手册也可以运行(需要包装一下，但这是为收益付出的小小代价)。它支持您在配置脚本中定义的多种类型的输入或“参数”(列表/自由文本/硬编码)，以允许脚本使用的灵活性(无论通过命令行需要什么参数，都可以通过脚本服务器UI提供)。</p><h1 id="200f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">用户管理</h1><p id="2477" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Script-Server还支持身份验证(<a class="ae kw" href="https://support.google.com/a/answer/6087519?hl=en" rel="noopener ugc nofollow" target="_blank"> Gmail SAML </a>)和授权，通过定义哪些用户/组可以访问每个“域”(域是您运行脚本的区域——如果您愿意，它可以是单个脚本或ansible-playbooks的整个文件夹)。来自<a class="ae kw" href="https://script-server.net/" rel="noopener ugc nofollow" target="_blank">演示</a>的示例—定义用户X能够运行“计算器”，但不能运行“井字游戏”。</p><h1 id="4a9e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">会话中执行</h1><p id="1a19" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在浏览器中运行脚本-服务器会话是防弹的——它基于最终用户的会话，因此即使最终用户关闭浏览器并重新打开它——他/她也会看到会话保持不变，并且运行没有被中止。</p><h1 id="bbcd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">脚本服务器作为开源的力量</h1><p id="ad10" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">即使你还没有弄清楚如何在你的公司中使用这个工具，或者你在你的终端上实现它时遇到了一些限制，这个工具的创建者是非常敏感的，所以你可以打开GitHub问题，你会得到快速有效的响应(我可以从个人经验证明，当我错过一个特定的功能时，我在GitHub <a class="ae kw" href="https://github.com/bugy/script-server" rel="noopener ugc nofollow" target="_blank">脚本服务器</a>仓库上打开一个问题，<a class="ae kw" href="https://github.com/bugy" rel="noopener ugc nofollow" target="_blank"> Bugy </a>对我的问题做出了响应，甚至按照我的建议添加了我要求的特性/功能)。您也可以为这个项目做出贡献，让这个工具变得更加强大，与更多的用例相关联。</p><h1 id="9864" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">综上</h1><p id="c7db" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">开源社区正在成长。甚至蓝色巨人在最近收购Red Hat时也认识到了开源的力量。随着越来越多的人测试和修复代码，这种增长只会让开源项目变得更好、更安全。开源社区的发展在技术层面上对我们的职业生涯产生了积极的影响——通过提供各种各样的解决方案来实现；在个人层面上，通过提供一种回馈社区的方式。</p><p id="c75f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Script-Server是一个非常强大和灵活的工具，允许从一个中心位置运行脚本和剧本，具有“简单易懂”的外观，不需要权限或预先了解脚本如何工作，我强烈建议您查看一下。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="4cc6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">资源:</strong></p><p id="08d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">"<a class="ae kw" href="https://github.com/bugy/script-server" rel="noopener ugc nofollow" target="_blank">脚本服务器</a> "-链接到脚本服务器GitHub存储库页面。</p><p id="dbb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/bugy" rel="noopener ugc nofollow" target="_blank"> Bugy </a> —链接到脚本服务器创建者的Github页面。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="28d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢<a class="ae kw" href="https://medium.com/u/8cb8e88c4f51?source=post_page-----9777051d384f----------------------" rel="noopener"> Dalya Gartzman </a>和<a class="ae kw" href="https://medium.com/u/763aa8dba8a8?source=post_page-----9777051d384f----------------------" rel="noopener"> Shifra Goldberg </a>帮助编辑本文。</p></div></div>    
</body>
</html>