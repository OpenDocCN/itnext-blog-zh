<html>
<head>
<title>Flutter Web: Should I use it? (Part 2— Performance)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter Web:我应该使用它吗？(第2部分—性能)</h1>
<blockquote>原文：<a href="https://itnext.io/flutter-web-should-i-use-it-part-2-performance-d801d122fc3e?source=collection_archive---------2-----------------------#2021-06-27">https://itnext.io/flutter-web-should-i-use-it-part-2-performance-d801d122fc3e?source=collection_archive---------2-----------------------#2021-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7afbf99491e9e0d71d28725d4e3c816e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DTmKsPfjSR-mjw7sqeVwyQ.jpeg"/></div></div></figure><p id="d2d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你喜欢这个系列的第一部分，在那里我介绍了SEO和Web Scrappers以及它们对Web使用Flutter的影响，如果你还没有读过，它绝对值得一读。</p><div class="kw kx gp gr ky kz"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-web-should-i-use-it-part-1-seo-842d87ff9d28"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">Flutter Web:我应该使用它吗？(第1部分—搜索引擎优化)</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">有很多关于Web抖动及其弱点的讨论，在这一部分，我们将讨论SEO和web scrappers。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">itnext.io</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><p id="c861" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这一部分中，我们将探讨SEO的另一个重要因素，即性能。当搜索引擎抓取您网站的文本内容，以便能够对其进行分析和分类，供用户搜索时使用时，他们也会密切关注您网站的性能。</p><p id="f709" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">性能是通过几种方式来衡量的，其中最重要的要考虑，也可能是我们作为开发人员可以解决或至少减轻的最简单的方式是下载时间和首次有意义绘图的时间。</p><h2 id="0fc6" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated">下载时间…</h2><p id="9932" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">下载时间应该是显而易见的，但这是你的网站完成下载到用户的浏览器所需要的时间，或者在搜索引擎测试“浏览器”的情况下，自然越快越好，改善的方法将是减少网站的整体负载和优化网络请求，在某些情况下更多是更少。</p><p id="e74a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个现代的浏览器可以处理大量的网络请求，从几十个到几百个，所以大量的小的、可缓存的文件比一个单独的捆绑文件更有用，JS devs会记住<code class="fe mm mn mo mp b">vendeor.js</code>文件。</p><p id="a800" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在web的Flutter的例子中，有效负载仍然很大，在Flutter 2发布后，我组装了一个小应用程序，从一个干净的石板开始研究零安全，而不是升级现有的项目。</p><p id="8e24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用riverpod构建的单个页面和单个API调用非常简单。你可以看看<a class="ae mq" href="https://crypto_pricing.codemagic.app" rel="noopener ugc nofollow" target="_blank">这里的</a>，还有<a class="ae mq" href="https://github.com/RemeJuan/crypto_pricing" rel="noopener ugc nofollow" target="_blank">的源代码</a>。</p><p id="24cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里的有效负载大小，对于一个HTML构建来说，大约是3MB，在React中，它可能大约是400kb，如果不是更小的话，它将是下载大约3MB的web程序集运行时的canvas构建的两倍。</p><h2 id="19bc" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated">是时候开始有意义的绘画了…</h2><p id="b4a6" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">这是一个衡量对用户来说有意义的东西出现在屏幕上需要多长时间的指标，这些东西超过了浏览器的默认白色页面或者你的网站的主要背景颜色。</p><p id="af76" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这可能是文本，甚至是一个加载微调，向用户表明正在发生的事情。</p><p id="2968" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以想象，这受到下载速度的影响，除非你下载了足够多的网站，否则你实际上没有多少东西可以在屏幕上绘制，在Flutter的情况下，你主要是在屏幕上出现任何东西之前等待<code class="fe mm mn mo mp b">main.js</code>完成下载。</p><h2 id="ddf7" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated">分析性能…</h2><p id="a13b" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">对于那些以前没有听说过它的人来说，衡量网站性能的一个更常见的工具是<a class="ae mq" href="https://developers.google.com/web/tools/lighthouse/" rel="noopener ugc nofollow" target="_blank">谷歌的灯塔</a>，在这里你可以输入你的或任何网站地址，并获得相当多的关于网站性能和瓶颈的有用信息，这些信息对于找到改善网站性能的最佳方法非常有价值。</p><p id="2aab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Lighthouse将为您提供web和移动两方面的分析，随着移动成为目前更重要的考虑因素之一，更大比例的用户通过移动设备而不是电脑在网站/应用上花费时间。</p><p id="bc76" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以看看我之前提到的那个小应用的分数<a class="ae mq" href="https://developers.google.com/speed/pagespeed/insights/?url=https%3A%2F%2Fcrypto_pricing.codemagic.app%2F&amp;tab=mobile" rel="noopener ugc nofollow" target="_blank">这里是</a>，因为你会看到移动端的分数相当低，桌面端的分数略高。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/3204e3dd576ee39961c0d204b179c603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7o-l3Sou38uSn-7ex1YoUw.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk translated">灯塔评分(移动)的加密定价应用程序。</figcaption></figure><p id="b236" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，该网站“失败”的第一个指标是<em class="na">第一次内容丰富的绘画，</em>这仅发生在15s左右，可能慢了13-14秒。</p><p id="3152" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在页面的更下方，您将看到指向该站点特定“痛点”的特定诊断，其中一个主要诊断是<code class="fe mm mn mo mp b">main.js</code>文件，该文件现在非常大，因此不仅需要一些时间来下载，还需要一些时间来处理。</p><p id="c754" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还需要考虑这是针对html构建运行的，可以选择构建flutter，指定使用“canvaskit”或“html”作为渲染引擎，因为我必须指定HTML，但是默认情况下，它将有效地构建两者，在桌面上选择“canvaskit ”,在移动上选择“HTML”。</p><p id="5716" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这意味着在桌面上，将有额外的2.5-3mb用于“wasm”web程序集文件，这是“canvaskit”所需的，这将对下载速度和首次内容丰富的绘画产生额外的成本。</p><p id="b1d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Lighthouse也是用户第一次访问或每次部署的第一次访问的指标，这几乎是最糟糕的情况，后续访问会快得多，因为许多(如果不是大多数)文件会缓存在用户的设备上，所以他们应该会在每次应用部署时经历一次长时间的延迟。</p><h2 id="4a8b" class="lo lp iq bd lq lr ls dn lt lu lv dp lw kj lx ly lz kn ma mb mc kr md me mf mg bi translated">我们能做些什么来改善这些…</h2><p id="1bca" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">对于这两个因素中的任何一个，现在作为开发者你都不能做太多的事情来帮助改善或减轻这些，当然，除非你有足够的经验来帮助核心团队改善Flutter web。</p><p id="e854" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们只需等待他们改进编译器，也许给我们更多一点对如何构建包的控制权，如果我们可以将包分成更小的块，并将所有的要素放在一个<code class="fe mm mn mo mp b">main.js</code>中，其余的代码放在块中，我们就可以大大缩短下载和首次有意义的绘制时间。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="107f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一次我们将进入其他因素，我相信，你作为开发者在为你的项目决定Flutter时应该考虑的。</p><p id="7254" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢，鼓掌(或50)会很棒，如果你真的喜欢，一杯<a class="ae mq" href="https://www.buymeacoffee.com/remelehane" rel="noopener ugc nofollow" target="_blank">咖啡</a>会很棒。</p><p id="4f84" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><div class="ms mt mu mv gt kz"><a href="https://remelehane.medium.com/developing-on-an-m1-mac-flutter-563c8dcc28f" rel="noopener follow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">在M1 Mac上开发(颤振)</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">作为一名开发新款M1 Macbook Pro的Flutter and React开发人员，我有一个简短的见解</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">remelehane.medium.com</p></div></div><div class="li l"><div class="ni l lk ll lm li ln jw kz"/></div></div></a></div><div class="kw kx gp gr ky kz"><a rel="noopener  ugc nofollow" target="_blank" href="/react-to-flutter-one-developers-journey-part-1-f101443bff82"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">应对颤振:一个开发者的旅程—第1部分</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">对一个React开发人员迁移到Flutter的体验有一点了解</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">itnext.io</p></div></div><div class="li l"><div class="nj l lk ll lm li ln jw kz"/></div></div></a></div></div></div>    
</body>
</html>