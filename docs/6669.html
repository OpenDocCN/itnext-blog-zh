<html>
<head>
<title>How to write a clean API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何编写一个干净的API</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-write-a-clean-api-9466e9ba3f55?source=collection_archive---------1-----------------------#2022-01-23">https://itnext.io/how-to-write-a-clean-api-9466e9ba3f55?source=collection_archive---------1-----------------------#2022-01-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/feb590a0d9912b723a2c56482c63b75c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HQozCq9F9masZkVLEYw3fA.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="c3d9" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">REST API或RESTful API(无论什么)和其他东西的最佳实践</h2></div><p id="3ee5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我实际上是一名前端开发人员，但我也遭受了糟糕的API响应。</p><p id="f4a1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所以据我所知，我想做一个小向导。如果我知道有什么不对的地方，请告诉我。</p><h2 id="5490" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">清洁API的关键要求</h2><ul class=""><li id="4d5d" class="mi mj je kv b kw mk kz ml lc mm lg mn lk mo lo mp mq mr ms bi translated">简单(扁平比嵌套好。)</li><li id="3af5" class="mi mj je kv b kw mt kz mu lc mv lg mw lk mx lo mp mq mr ms bi translated">保持一致(开始前标准化风格)</li><li id="bdf5" class="mi mj je kv b kw mt kz mu lc mv lg mw lk mx lo mp mq mr ms bi translated">确保安全(实施HTTPS并验证内容类型与)</li><li id="d3fd" class="mi mj je kv b kw mt kz mu lc mv lg mw lk mx lo mp mq mr ms bi translated">轻量级(缩小和压缩你的回答)</li><li id="f077" class="mi mj je kv b kw mt kz mu lc mv lg mw lk mx lo mp mq mr ms bi translated">允许筛选、排序和分页</li><li id="ba21" class="mi mj je kv b kw mt kz mu lc mv lg mw lk mx lo mp mq mr ms bi translated">使用正确的HTTP方法(GET / POST / PUT..。)</li><li id="6116" class="mi mj je kv b kw mt kz mu lc mv lg mw lk mx lo mp mq mr ms bi translated">使用正确的响应状态(不要对所有事情都使用<code class="fe my mz na nb b">200</code>！)</li></ul><p id="4abd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最重要的是..。</p><h2 id="3776" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">无论你做什么，都要记录下来！</h2><p id="a260" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">你可能是世界上最好的API设计者，但是没有文档，你的API就像死了一样。</p><p id="1f84" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">可以使用API设计工具如<a class="ae nf" href="https://swagger.io" rel="noopener ugc nofollow" target="_blank"> Swagger </a></p><h2 id="6a58" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">让我们来谈谈一些语法规则</h2><h1 id="1f9c" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">1.避免文件扩展名</h1><h2 id="70d5" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">不良</strong>:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="61ad" class="lp lq je nb b gy nz oa l ob oc">/users/{id}/pending-orders.json</span></pre><h2 id="e44a" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="82d9" class="lp lq je nb b gy nz oa l ob oc">/users/{id}/pending-orders</span></pre><h1 id="7f9b" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">2.避免删节</h1><h2 id="0c3b" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="be03" class="lp lq je nb b gy nz oa l ob oc">/users/{id}/tel-no</span></pre><h2 id="06dd" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="dda5" class="lp lq je nb b gy nz oa l ob oc">/users/{id}/phone-number</span></pre><h1 id="16d7" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">3.避免行话</h1><h2 id="49e9" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="00fc" class="lp lq je nb b gy nz oa l ob oc">/users/{id}/pan</span></pre><h2 id="ba4d" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="b31f" class="lp lq je nb b gy nz oa l ob oc">/users/{id}/card-number</span></pre><h1 id="0bac" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">4.集合使用复数名称</h1><h2 id="2ca0" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="7905" class="lp lq je nb b gy nz oa l ob oc">/user</span></pre><h2 id="5f20" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="b9fc" class="lp lq je nb b gy nz oa l ob oc">/users</span></pre><h1 id="22b0" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">5.使用名词而不是动词</h1><p id="fde1" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">别忘了！HTTP方法的存在是有目的的！</p><h2 id="66da" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="52d9" class="lp lq je nb b gy nz oa l ob oc">GET  /getusers<br/>POST /updateuser/{userId}</span></pre><h2 id="561e" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="00e6" class="lp lq je nb b gy nz oa l ob oc">GET /users<br/>PUT /users/{userId}</span></pre><h1 id="7421" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">6.对URL使用烤肉串大小写</h1><h2 id="97ba" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="660a" class="lp lq je nb b gy nz oa l ob oc">/systemOrders<strong class="nb jf"> </strong>or /system_orders</span></pre><h2 id="fdf7" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="6b90" class="lp lq je nb b gy nz oa l ob oc">/system-orders</span></pre><h1 id="700d" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">7.将camelCase用于JSON</h1><h2 id="08f0" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">不良</strong></h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="a44f" class="lp lq je nb b gy nz oa l ob oc">{<br/>  user_name: "ehe"<br/>}</span></pre><h2 id="18e8" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">好的</strong></h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="7a6a" class="lp lq je nb b gy nz oa l ob oc">{<br/>  userName: "ehe"<br/>}</span></pre><h1 id="9261" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">8.想想未来，考虑版本控制</h1><h2 id="0fe0" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="f767" class="lp lq je nb b gy nz oa l ob oc">http://api.domain.com/users</span></pre><h2 id="b367" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="4d40" class="lp lq je nb b gy nz oa l ob oc">http://api.domain.com/v1/users</span></pre><h1 id="2c67" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">9.接受极限和偏移参数</h1><p id="d7c3" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">在<code class="fe my mz na nb b">GET</code>操作中始终接受<code class="fe my mz na nb b">limit</code>和<code class="fe my mz na nb b">offset</code>参数。</p><h2 id="ff34" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="5b48" class="lp lq je nb b gy nz oa l ob oc">GET /shops?offset=5&amp;limit=5</span></pre><p id="8176" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是因为它是前端分页所必需的。</p><h1 id="a3c0" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">10.将URL中的关系用于嵌套资源</h1><h2 id="4599" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">示例:</h2><p id="2fcc" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">获取属于商店5的产品13的详细信息。</p><h2 id="e9cd" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">不好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="ab4e" class="lp lq je nb b gy nz oa l ob oc">GET /products/20?shopId=5</span></pre><h2 id="2e0c" class="lp lq je bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">好:</h2><pre class="nr ns nt nu gt nv nb nw nx aw ny bi"><span id="a6b3" class="lp lq je nb b gy nz oa l ob oc">GET /shops/2/products/31</span></pre><h1 id="f54d" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">(奖励)考虑监控</h1><p id="4df5" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">这不是强制性的，但是建议这样做</p><p id="e022" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe my mz na nb b">/health</code>:检查API的健康状态</p><p id="760d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe my mz na nb b">/version</code>:用最新版本号响应请求</p><p id="45c7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe my mz na nb b">/metrics</code>:提供一些指标，比如平均响应时间。</p><h1 id="dc86" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">12.(奖金2)示例表</h1><p id="22a5" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">这张表几乎很好地解释了一切</p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/99cfd0692aeb6a5e86ff74769b4f9882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9P6mGTMD_f3Xfwf-.png"/></div></div><figcaption class="oe of gj gh gi og oh bd b be z dk translated"><a class="ae nf" href="https://medium.com/linkit-intecs/rest-resource-naming-best-practices-cbee65f37a62" rel="noopener">https://medium . com/linkit-intecs/rest-resource-naming-best-practices-cbee 65 f 37 a 62</a></figcaption></figure><h1 id="ac97" class="ng lq je bd lr nh ni nj lu nk nl nm lx kk nn kl ma kn no ko md kq np kr mg nq bi translated">参考</h1><p id="a637" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated"><a class="ae nf" href="https://google.github.io/styleguide/jsoncstyleguide.xml?showone=Property_Name_Format" rel="noopener ugc nofollow" target="_blank">https://google.github.io/styleguide/jsoncstyleguide.xml?showone = Property _ Name _ Format</a></p><div class="is it gp gr iu oi"><a href="https://nordicapis.com/10-best-practices-for-naming-api-endpoints/" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jf gy z fp on fr fs oo fu fw jd bi translated">命名API端点的10多种最佳实践|北欧APIs |</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">仔细考虑命名API端点有很多理由。为API端点选择合理的名称可以…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">nordicapis.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow ja oi"/></div></div></a></div></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><h1 id="8270" class="ng lq je bd lr nh pe nj lu nk pf nm lx kk pg kl ma kn ph ko md kq pi kr mg nq bi translated">感谢您的阅读！</h1><p id="d058" class="pw-post-body-paragraph kt ku je kv b kw mk kf ky kz ml ki lb lc nc le lf lg nd li lj lk ne lm ln lo im bi translated">那是一篇很长的文章，而你大老远跑来这里！你太棒了！请不要忘记鼓掌(也可能你不知道鼓掌可以达到50次，只是在你走的时候点击)</p></div></div>    
</body>
</html>