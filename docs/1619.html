<html>
<head>
<title>Managing Ingress Controllers on Kubernetes: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">管理Kubernetes上的入口控制器:第1部分</h1>
<blockquote>原文：<a href="https://itnext.io/managing-ingress-controllers-on-kubernetes-part-1-784fc42ba397?source=collection_archive---------4-----------------------#2018-12-12">https://itnext.io/managing-ingress-controllers-on-kubernetes-part-1-784fc42ba397?source=collection_archive---------4-----------------------#2018-12-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="43ab" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">什么是入口控制器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/50d629a4a504a1f32f627285001d760f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z_h-YptsGJMlkUKC"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">克里斯·拜尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="3284" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Kubernetes将部署在集群上的服务与集群外部的世界隔离开来。它这样做是为了保护服务免受不请自来的关注。然而，更多的时候，我们需要一个或多个部署的服务，以便在集群之外使用。Kubernetes为实现这一点提供了许多机制，但它提供的最灵活的技术可能是Ingress提供的技术。</p><h2 id="7493" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">为什么不使用负载平衡器类型的服务？</h2><p id="6683" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">部署一个<a class="ae kv" href="https://docs.giantswarm.io/guides/services-of-type-loadbalancer-and-multiple-ingress-controllers/" rel="noopener ugc nofollow" target="_blank">负载平衡器类型的服务</a>，而不是使用入口API，其中一个<a class="ae kv" href="https://blog.giantswarm.io/load-balancer-service-use-cases-on-aws/" rel="noopener ugc nofollow" target="_blank">外部负载平衡器</a>(例如AWS ELB)被自动创建并配置为将外部流量路由到代表服务的pod。然而，这种方法的问题是，它提供了一个相当有限的解决方案，并且它为这种类型的每个服务创建了一个外部负载平衡器。从成本和管理开销的角度来看，创建大量外部的、特定于云的负载平衡器最终可能会成为一个昂贵的提议。相比之下，Kubernetes Ingress API为配置Kubernetes集群的入口提供了很大的灵活性，入口控制器可以作为一个复制服务或单一外部负载平衡器背后的服务进行部署。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://info.giantswarm.io/guide-to-managing-ingress-controllers"><div class="gh gi mq"><img src="../Images/c46c9bc5c32531dc4b9e02fbc12fd9f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*VVAGMXjltR6ssPFbThUjFg.png"/></div></a></figure><h2 id="5aca" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">是什么让使用Ingress成为一个好的选择？</h2><p id="7921" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Ingress提供第7层HTTP路由，使您能够使用单个域名为多个服务提供服务，跨服务副本负载平衡流量，终止SSL，实现SSL直通，等等。</p><p id="9cc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Kubernetes中，入口概念被实现为一个Kubernetes API资源和一个特定于实现的控制器，称为入口控制器。在了解生态系统中的一些不同入口控制器之前，我们先简单介绍一下它们的功能。</p><h2 id="4431" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">入门:创建入口资源</h2><p id="ca8b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">入口资源用于定义路由规则，这些规则决定了外部客户机如何访问Kubernetes集群中运行的服务。这些规则允许基于URL请求的主机和路径进行路由。</p><p id="b246" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面这个简单的例子显示了一个发往主机<code class="fe mr ms mt mu b">acme.com</code>的入口流量规则，其中匹配路径<code class="fe mr ms mt mu b">acme.com/foo</code>的请求被路由到端口<code class="fe mr ms mt mu b">80</code>上名为<code class="fe mr ms mt mu b">svc1</code>的后端服务，匹配路径<code class="fe mr ms mt mu b">acme.com/bar</code>的请求被路由到端口<code class="fe mr ms mt mu b">80</code>上名为<code class="fe mr ms mt mu b">svc2</code>的服务:</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="2a73" class="ls lt iq mu b gy mz na l nb nc">apiVersion: extensions/v1beta1</span><span id="4110" class="ls lt iq mu b gy nd na l nb nc">kind: Ingress</span><span id="0ac8" class="ls lt iq mu b gy nd na l nb nc">metadata:</span><span id="7c77" class="ls lt iq mu b gy nd na l nb nc">name: acme-app-ingress</span><span id="fde7" class="ls lt iq mu b gy nd na l nb nc">spec:</span><span id="0d27" class="ls lt iq mu b gy nd na l nb nc">   rules:</span><span id="56f3" class="ls lt iq mu b gy nd na l nb nc">   - host: acme.com</span><span id="1ce0" class="ls lt iq mu b gy nd na l nb nc">     http:</span><span id="316d" class="ls lt iq mu b gy nd na l nb nc">       paths:</span><span id="8a27" class="ls lt iq mu b gy nd na l nb nc">       - path: /foo</span><span id="a9f6" class="ls lt iq mu b gy nd na l nb nc">         backend:</span><span id="1c53" class="ls lt iq mu b gy nd na l nb nc">           serviceName: svc1</span><span id="d652" class="ls lt iq mu b gy nd na l nb nc">           servicePort: 80</span><span id="60e0" class="ls lt iq mu b gy nd na l nb nc">       - path: /bar</span><span id="2c00" class="ls lt iq mu b gy nd na l nb nc">         backend:</span><span id="1c8b" class="ls lt iq mu b gy nd na l nb nc">           serviceName: svc2</span><span id="4062" class="ls lt iq mu b gy nd na l nb nc">           servicePort: 80</span></pre><p id="74ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">示例入口资源，您可以将它保存到一个文件中，并使用:</em> kubectl apply -f ingress.yml将其应用到集群中</p><blockquote class="nf ng nh"><p id="11a6" class="kw kx ne ky b kz la jr lb lc ld ju le ni lg lh li nj lk ll lm nk lo lp lq lr ij bi translated"><a class="ae kv" href="https://medium.com/@GiantSwarm/managing-ingress-controllers-on-kubernetes-part-2-36a64439e70a" rel="noopener"> <strong class="ky ir">阅读第2部分:<em class="iq">让它真正发生:各种入口控制器</em> </strong> </a></p></blockquote><p id="cba2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由<a class="ae kv" href="https://twitter.com/puja108" rel="noopener ugc nofollow" target="_blank"> Puja Abbassi </a>撰写——开发者倡导者@ <a class="ae kv" href="https://giantswarm.io/" rel="noopener ugc nofollow" target="_blank">巨型蜂群</a></p><div class="nl nm gp gr nn no"><a href="https://twitter.com/puja108" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">puja Abbas si @ # kube con # kube Khan(@ puja 108)| Twitter</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">Puja Abbassi的最新推文@ #KubeCon #KubeKhan (@puja108)。开发者倡导者@ GiantSwarm &amp; Researcher</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">twitter.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc kp no"/></div></div></a></div><p id="0f7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">准备好将您的云原生项目投入生产了吗？只需在https://giantswarm.io/<a class="ae kv" href="https://giantswarm.io/" rel="noopener ugc nofollow" target="_blank">申请免费试用</a></p></div></div>    
</body>
</html>