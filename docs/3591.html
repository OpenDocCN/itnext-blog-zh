<html>
<head>
<title>Migration from ASP.NET Core 3.0 to 3.1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从ASP.NET核心3.0迁移到3.1</h1>
<blockquote>原文：<a href="https://itnext.io/migration-from-asp-net-core-3-0-to-3-1-8fe77bc72739?source=collection_archive---------4-----------------------#2020-01-13">https://itnext.io/migration-from-asp-net-core-3-0-to-3-1-8fe77bc72739?source=collection_archive---------4-----------------------#2020-01-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f39e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">12月3日<a class="ae kl" href="https://devblogs.microsoft.com/dotnet/announcing-net-core-3-1/" rel="noopener ugc nofollow" target="_blank">。NET Core 3.1 </a>发布，其中包括新发布的【ASP.NET】Core 3.1和<a class="ae kl" href="https://devblogs.microsoft.com/dotnet/announcing-entity-framework-core-3-1-and-entity-framework-6-4/" rel="noopener ugc nofollow" target="_blank">实体框架Core 3.1 </a>。这篇文章将从更新的<a class="ae kl" href="https://elanderson.net/category/asp-net-core/asp-net-core-basics/" rel="noopener ugc nofollow" target="_blank">ASP.NET基础系列</a>开始，逐步更新联系人API项目。我做的所有改动都来自微软的<a class="ae kl" href="https://docs.microsoft.com/en-us/aspnet/core/migration/30-to-31?view=aspnetcore-3.1" rel="noopener ugc nofollow" target="_blank">从ASP.NET Core 3.0迁移到3.1 </a> doc。</p><p id="7de4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之前的代码任何改动都可以在<a class="ae kl" href="https://github.com/elanderson/ASP.NET-Core-Basics-Refresh/tree/c1b24de0d44dfc45d379b91d721842656c4ba3d8" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="6228" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">装置</h2><p id="2109" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">如果您是Visual Studio用户，您可以获得。NET Core 3.0通过至少安装<a class="ae kl" href="https://visualstudio.microsoft.com/downloads/" rel="noopener ugc nofollow" target="_blank"> Visual Studio 16.4 </a>。对于不使用Visual Studio的用户，可以下载并安装。NET Core 3.1 SDK从<a class="ae kl" href="https://dotnet.microsoft.com/download/dotnet-core/3.1" rel="noopener ugc nofollow" target="_blank">这里</a>。与以前的版本一样，SDK适用于Windows、Linux和Mac。</p><p id="8c01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装完成后，您可以从命令提示符下运行以下命令来查看。你已经安装的NET Core SDK。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="8b46" class="km kn iq lp b gy lt lu l lv lw">dotnet --list-sdks</span></pre><p id="d5cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该至少看到列出的<strong class="jp ir"> 3.1.100 </strong>。</p><h2 id="b78b" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">项目文件更改</h2><p id="3c99" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">右键单击项目并选择<strong class="jp ir">编辑项目名称. csproj </strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/8f21fd826d613d67cc02a98397fce48e.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/0*xnKo_uNIq1hMizT3.png"/></div></figure><p id="19fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将<strong class="jp ir"> TargetFramework </strong>改为<strong class="jp ir"> netcoreapp3.1 </strong>。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="e06f" class="km kn iq lp b gy lt lu l lv lw">Before:<br/>&lt;TargetFramework&gt;netcoreapp3.0&lt;/TargetFramework&gt;<br/><br/>After<br/>&lt;TargetFramework&gt;netcoreapp3.1&lt;/TargetFramework&gt;</span></pre><p id="66d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，将所有包更新到新版本。根据你的项目，这将会有很大的不同。这可以在csproj文件中手动完成，如果使用Visual Studio，也可以通过NuGet UI来完成。以下是对示例项目的更改。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="f85d" class="km kn iq lp b gy lt lu l lv lw">Before:<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="3.0.0"&gt;<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="3.0.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="3.0.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="3.0.0"&gt;<br/>&lt;PackageReference Include="Microsoft.Extensions.Logging.Debug" Version="3.0.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.IO.RecyclableMemoryStream" Version="1.2.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Design" Version="3.0.0" /&gt;<br/>&lt;PackageReference Include="NSwag.AspNetCore" Version="13.1.3" /&gt;<br/><br/>After:<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="3.1.0"&gt;<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="3.1.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="3.1.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="3.1.0"&gt;<br/>&lt;PackageReference Include="Microsoft.Extensions.Logging.Debug" Version="3.1.0" /&gt;<br/>&lt;PackageReference Include="Microsoft.IO.RecyclableMemoryStream" Version="1.3.2" /&gt;<br/>&lt;PackageReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Design" Version="3.1.0" /&gt;<br/>&lt;PackageReference Include="NSwag.AspNetCore" Version="13.1.6" /&gt;</span></pre><h2 id="b34c" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="6837" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">从3.0到3.1的迁移非常简单，这并不奇怪，因为3.0发布才几个月。尽快升级到3.1非常重要，因为它是长期服务版本，至少在未来3年内会得到支持，而3.0将在几个月内失去支持。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="a161" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mi">原载于</em><a class="ae kl" href="https://elanderson.net/2020/01/migration-from-asp-net-core-3-0-to-3-1/" rel="noopener ugc nofollow" target="_blank"><em class="mi"/></a><em class="mi">。</em></p></div></div>    
</body>
</html>