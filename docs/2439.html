<html>
<head>
<title>Azure — IoT Edge Workloads on Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">azure—Kubernetes上的物联网边缘工作负载</h1>
<blockquote>原文：<a href="https://itnext.io/azure-iot-edge-workloads-on-kubernetes-1065b801cf4f?source=collection_archive---------7-----------------------#2019-05-23">https://itnext.io/azure-iot-edge-workloads-on-kubernetes-1065b801cf4f?source=collection_archive---------7-----------------------#2019-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/bd5e9ca7ee1cc43a3d93f34b802c1874.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ICbA8ojsNLgqXyArVK7p-A.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure物联网与Kubernetes的集成——Kubernetes上Edge的不同解决方案</figcaption></figure><div class=""/><p id="22cc" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">客户和市场需求通常要求物联网解决方案能够快速部署新功能和更新。Kubernetes提供了一个统一的部署模型，允许边缘用户使用Kubernetes原生原语快速、自动地部署新服务并管理其生命周期，这带来了更高级别的管理功能。Kubernetes支持滚动更新形式的零停机部署，这允许关键任务物联网解决方案保持最新，而不会对最终用户(客户)产生影响。除了滚动更新，Kubernetes还提供了丰富的特性集，如高可用性、自动伸缩、入口等。</p><p id="2da5" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">许多物联网解决方案被认为是需要可靠和可用的业务关键型系统。例如，对工厂运营至关重要的物联网解决方案需要随时可用。Kubernetes提供了部署高可用性服务所需的工具。它的架构还允许工作负载独立运行。此外，它们可以重新启动或重新创建，对最终用户没有任何影响。</p><h1 id="e2c2" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">这与Kubernetes现有的基于虚拟Kubelet的Azure物联网边缘连接器有何不同？</h1><p id="aa95" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">Azure已经有了一个基于虚拟Kubelet的实现来支持通过Kubernetes的物联网边缘部署。<a class="ae md" href="https://github.com/Azure/iot-edge-virtual-kubelet-provider" rel="noopener ugc nofollow" target="_blank"> Azure IoT Edge Connector </a>利用虚拟Kubelet项目提供由Azure IoT hub支持的虚拟Kubernetes节点。它将Kubernetes pod规范转换为物联网边缘部署，并将其提交给后台物联网中心。边缘部署包含设备选择器查询，该查询控制部署将应用到边缘设备的哪个子集。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi me"><img src="../Images/ad0af6263d13729a1e7715ba637ca589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qePKAwntgVX2ezrj"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Kubernetes —基于虚拟Kubelet的物联网边缘实施</figcaption></figure><p id="cc1c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里，本地设备必须运行物联网运行时和Docker as CRI，边缘部署创建为Docker容器。</p><p id="0e56" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae md" href="https://github.com/Azure-Samples/iotedge-gateway-on-kubernetes" rel="noopener ugc nofollow" target="_blank">Kubernetes上的IoTedge网关</a>(作为网关部署在Kubernetes上的IoT Edge)使用户能够将Azure IoT Edge工作负载部署到本地的Kubernetes集群，而无需虚拟节点(虚拟kubelet)。IoT Edge注册了一个自定义资源定义(CRD ),代表Kubernetes API服务器的边缘部署。此外，它还提供了一个<a class="ae md" href="https://coreos.com/blog/introducing-operators.html" rel="noopener ugc nofollow" target="_blank">操作符</a>(物联网边缘代理)，用于协调云管理的期望状态和本地集群状态。有了这个解决方案，EdgeAgent现在可以与docker和Kubernetes运行时对话。这种解决方案还以某种方式消除了对主机上特定包的需求(iotedge、iotedgectl等)。)因为该架构涉及与Kubernetes API的直接交互，并且所有控制平面组件都作为pod和容器部署在Kubernetes上。</p><p id="f4ec" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">该解决方案使用户能够将运行在边缘设备上的Kubernetes集群注册为Azure上的物联网边缘设备，并管理从中央Azure门户到分布式边缘设备的应用部署。所有的edge模块都无缝地转换成本地Kubernetes对象，方便用户根据Kubernetes规范直接操作它们。</p><h1 id="78f8" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">架构和组件</h1><p id="f767" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">传统的Azure物联网边缘运行时构成了物联网边缘代理:实例化模块，管理模块的生命周期和监控，向物联网中心报告模块状态。edgeAgent使用它的模块twin来存储这些配置数据。第二个是物联网边缘中心(IoT Edge hub):通过公开与物联网中心相同的协议端点，充当物联网中心的本地代理。这种一致性意味着客户端(无论是设备还是模块)可以连接到物联网边缘运行时，就像连接到物联网中枢一样。</p><p id="9fc2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通常与以前的方法(如虚拟Kubelet，docker as CRI等。)凭证通过主机(OS)上的iotedge运行时配置来管理，通过这种方法，使用新的实体“IoTedged”来执行凭证创建和云连接。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/c9fd11500ed0aa9bdb06be409a7b22cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hm9umHRNvE2aCHed"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Azure Kubernetes-Edge组件</figcaption></figure><p id="0893" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用该解决方案与Azure-IoT Hub进行模块交互的典型工作流包括多个步骤，其中每个组件执行一个明确的操作来设置整个流程:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mk"><img src="../Images/6da29f21a14761e1bc8ce15818e52ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K02XGKFhY3h_707g"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">边缘控制平面和模块工作流</figcaption></figure><p id="9c73" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">分散每个组件，上述三个组件中的每一个都相互交互，以在本地Kubernetes集群上部署来自Azure的模块，并促进与IoT Hub的交互:</p><h1 id="96c3" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">iotedged:</h1><figure class="mf mg mh mi gt is gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/f6a7c0d50c0ae9160a71618f5b306f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/0*zogMjxj-XMNaIcxa"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">库伯内特上的IotEdged</figcaption></figure><h1 id="0ca9" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">边缘代理:</h1><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mm"><img src="../Images/487525474604100af9fad522ce1ff407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uR_fKdjK32kLzUJ1"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes上的edgeAgent</figcaption></figure><h1 id="cd4c" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak"> edgeHub: </strong></h1><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mn"><img src="../Images/261f6075a1e366b63c7cc7c3a86ccbca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*veg9BXS8qRPlccoj"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes上的edgeHub</figcaption></figure><h1 id="f297" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">试验</h1><ol class=""><li id="a4a1" class="mo mp jf ke b kf ly kj lz kn mq kr mr kv ms kz mt mu mv mw bi translated">创建资源组和Azure IoT-Hub:</li></ol><p id="dc7c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里的“IoTEdgeResources”是一个资源组，而“kube-iot”是一个物联网中心</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/bfda35cdaf421879b11bab4256a6e701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FMbH90YFTuJ6myqQ"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">创建Azure资源组</figcaption></figure><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/58f6a24b069974ac3924c7552333354d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iSxYqm9ApxiZwdBX"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">创建Azure物联网中心</figcaption></figure><p id="c122" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">2.注册物联网边缘设备</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/dceba025e09eead637affae6b1f4dc7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sFyoXb5cWqZNDBq4"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">边缘设备注册</figcaption></figure><p id="f7f2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">物联网边缘设备在物联网中心注册，设备连接机密用于Kubernetes上的EdgeAgent部署。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/add6cdda8ebe339bad7401edd36fcb6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ujA6t4c936XBlCCv"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">设备连接信息和部署状态</figcaption></figure><p id="f93c" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">3.在本地Kubernetes集群上部署物联网边缘网关:</p><p id="8bda" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">两个组件“edgeagent”和“iotedged”作为Kubernetes部署进行部署:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/2522ddba76227d9c91a1d65c275f926e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lPos8W-mEAsb8Z7G"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes部署配置</figcaption></figure><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi my"><img src="../Images/c8106e39f7e1d94cf16d50d2395c17e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eTATsXov-Zwjn6Vk"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes上的Edgeagent和Iotedged</figcaption></figure><p id="863e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有的pod都注入了一个代理容器，它负责从edge守护进程获取凭证信息。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/9043b32cc4bee60c9555deb445c571f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HGBT8f10x9liNybs"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EdgeAgent和代理容器</figcaption></figure><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/11cea9c6293a017b653a79558e27ef1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ylsQ0gaEkSEagX5u"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">容器映射— EdgeAgent和Iotedged</figcaption></figure><p id="6b76" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Iotedged使用“设备连接字符串”,这将有助于访问在物联网中心注册的物联网设备。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/43ec6fc90e359b85b741fa05221f4692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LzGFsFw4_iBiBo0g"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Iotedged模块中的主机连接详细信息</figcaption></figure><p id="2d6e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Edgeagent与Iotedged交互以进行身份验证，从而到达注册的边缘设备:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/819d7fa01bfd900431cd1f77b928e720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UT4nPXR5aI9sMezB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">边缘剂</figcaption></figure><p id="ab78" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Iotedged满足身份验证请求:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/758981237a84cad420d4e35fd9a860e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6OwqiypVoKYbDu_-"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">iotedged —授权和凭证</figcaption></figure><p id="7ee2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">4.在本地Kubernetes集群上运行的Edgeagent向IoT Hub上的注册设备报告状态:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/06d1d8d3f5661bd8d90388c8a3d9f932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tWsMIL6oe6hwW9Qs"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">模块状态仪表板</figcaption></figure><p id="f958" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">5.通过物联网中心在本地Kubernetes集群上部署模拟温度模块示例:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/898bf5bfe856c8631eac80aa6bf59db9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EjpLT0RdxH8w0w1L"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">部署模块</figcaption></figure><p id="58fd" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">6.模拟温度传感器作为Kubernetes部署部署在Kubernetes集群内部:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/c1e7ef0129c27c362a88387acb706636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-WWHf1Yf4uo1_TEK"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes上的模拟温度传感器</figcaption></figure><p id="ccd8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">模拟温度传感器盒包含两个容器，一个是应用程序，另一个是代理容器，它与iotedged交互以获取物联网中心凭据信息:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/dac6f9629d8d28e9d8b92b3d5da98bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_qDA1VvhX0tgwYny"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">具有代理容器的模拟温度传感器</figcaption></figure><p id="c344" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在模拟温度传感器旁边还创建了一个edgehub pod，它将用作到IoT Hub的数据通道，使用IoT Hub SDK基于创建部署时指定的路线。</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/28d158d53c9648066a81a83f1eff556f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5G4s2PQSkACnM50H"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">模块路线配置</figcaption></figure><p id="a9f6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">总体而言，部署以及控制平面组件(edgeagent、edgehub、io tweeded)包括如下所示的拓扑:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nb"><img src="../Images/4065ca676b36043f81fb454efefc21d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FXw4jlnHdIzDfs1A"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes拓扑上的边</figcaption></figure><p id="4247" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">模拟温度传感器部署配置在Kubernetes集群上，物联网集线器模块被转换为本地Kubernetes对象，配置如下所示:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/237a80ad3e0927b31d25510cab15d2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eOxOMNa03o2Gl3FC"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">模拟温度传感器Kubernetes配置</figcaption></figure><p id="3abd" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">7.Azure IoT Hub报告本地Kubernetes集群上所有代理和部署的状态:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/20aa413ca751043161a5298783d2094a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GJTmR7MsUpnhxbNR"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">向物联网中心报告Kubernetes上的模块/代理状态</figcaption></figure><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/b683d2e247bcc321f239ab22cd52a087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zEa1R5nr1YXOF9xX"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">功能模块和代理</figcaption></figure><p id="17ac" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">8.EdgeHub开始轮询来自模拟温度传感器的信息:</p><figure class="mf mg mh mi gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/41f8448d33979a71f933a65c3b343aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jyzW10C8NGz9cqUs"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes上的功能模拟温度传感器</figcaption></figure></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="51b1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如上所示，一个Edge模块部署在Azure IoT Hub的本地Kubernetes集群上。上述解决方案还支持用户使用Kubernetes集群中的物联网边缘设备作为下游设备的<a class="ae md" href="https://docs.microsoft.com/en-us/azure/iot-edge/iot-edge-as-gateway" rel="noopener ugc nofollow" target="_blank">网关，使用Kubernetes的其他方面，如网络负载平衡器(满足服务类型的IP:负载平衡器)、StorageClass(动态存储供应)和Voyager、Traefik等入口控制器。路由外部流量。</a></p><p id="55aa" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Azure社区正在围绕Kubernetes平台快速前进和创新。这些进步使得构建可扩展、可靠并部署在分布式联盟中的云原生物联网解决方案成为可能。随着所有这些不断发展的举措，Kubernetes显然已经成为物联网解决方案的关键支持技术。一个新的<a class="ae md" href="https://www.cncf.io/community/webinars/introducing-kubernetes-iot-edge-working-group/" rel="noopener ugc nofollow" target="_blank"> Kubernetes物联网工作组</a>正在研究如何为物联网云和物联网边缘提供一致的部署模式。</p></div></div>    
</body>
</html>