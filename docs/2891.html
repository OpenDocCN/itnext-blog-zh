<html>
<head>
<title>Getting Started with Flutter for Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">with Flutter入门</h1>
<blockquote>原文：<a href="https://itnext.io/getting-started-with-flutter-forweb-c0647ed51b88?source=collection_archive---------2-----------------------#2019-08-23">https://itnext.io/getting-started-with-flutter-forweb-c0647ed51b88?source=collection_archive---------2-----------------------#2019-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4f44" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Dart和Flutter构建出色的web体验</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0dbdf837dfd5aa581f0bb6730b62f215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CMb4Hn7S_YdOgXiKr6581Q.gif"/></div></div></figure><h2 id="f32d" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍</h2><p id="e53c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi mj translated"><span class="l mk ml mm bm mn mo mp mq mr di"> F </span> lutter自2018年末首次亮相以来，一直作为移动开发SDK受到欢迎，随着<code class="fe ms mt mu mv b">web</code>作为目标的加入，这款优秀的SDK现在可供web开发人员使用，以创建令人惊叹的高质量web体验，充分利用最新的web APIs。</p><p id="43a5" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">在本文中，我们将了解如何使用Flutter for Web创建一个简单的网页，该网页由基本布局、一些文本和图像以及一些滚动动画组成，以增加效果。举个简单的例子，它不太可能赢得任何UX设计挑战，但它完成了演示的工作。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="7556" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">环境</h2><p id="0a34" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">要为使用Flutter构建web应用程序建立并运行一个工作环境，您需要安装以下工具:</p><ul class=""><li id="8f5c" class="ni nj it ls b lt mw lw mx ld nk lh nl ll nm mi nn no np nq bi translated"><strong class="ls iu">颤振</strong> : <a class="ae nr" href="https://flutter.dev/docs/get-started/install" rel="noopener ugc nofollow" target="_blank">安装页面此处</a></li><li id="4e6e" class="ni nj it ls b lt ns lw nt ld nu lh nv ll nw mi nn no np nq bi translated"><strong class="ls iu"> Stagehand </strong> : <code class="fe ms mt mu mv b">$ pub global activate stagehand</code>(创建新应用)</li><li id="590b" class="ni nj it ls b lt ns lw nt ld nu lh nv ll nw mi nn no np nq bi translated"><strong class="ls iu">IDE</strong>:IDE或代码编辑器，如<a class="ae nr" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>与<a class="ae nr" href="https://marketplace.visualstudio.com/items?itemName=Dart-Code.dart-code" rel="noopener ugc nofollow" target="_blank">Dart扩展</a></li></ul><p id="8bb2" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">要验证你有一个正常工作的Flutter安装，运行<code class="fe ms mt mu mv b">$ flutter doctor</code>，并确保下载任何缺失的扩展或其他依赖项。</p><p id="e137" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">这个项目的源代码可以在GitHub 上找到。确保在项目目录中运行<code class="fe ms mt mu mv b">$ flutter pub get</code>(除非您有一个支持自动解析依赖关系的环境)。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="5619" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">项目结构</h2><p id="41c5" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">这个项目是用命令<code class="fe ms mt mu mv b">$ stagehand web-simple</code>创建的，它建立了一个空的web项目，还没有<em class="nx"> flutter_web </em>包作为依赖项，所以我们将把它们添加到项目的<strong class="ls iu"> pubspec.yaml </strong>文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="516a" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">这个<strong class="ls iu"> pubspec.yaml </strong>是一个非常典型的Flutter项目，添加了一些用于构建web应用程序的内容，以及带有git repo url和路径的依赖覆盖，因为<em class="nx"> flutter_web </em>包尚未发布到<a class="ae nr" href="https://pub.dev" rel="noopener ugc nofollow" target="_blank">pub.dartlang.org</a>库，如果没有这些覆盖，<code class="fe ms mt mu mv b">pub</code>将会失败。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="50ba" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">应用入口点</h2><p id="2edb" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">让我们来看看主源文件，<strong class="ls iu"> lib/main.dart </strong>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="e7ca" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">对于任何Flutter应用程序来说，这都是一个相当标准的主应用程序文件，它实现了<a class="ae nr" href="https://gist.github.com/kenreilly/21d08d7fe3afb72e66742d4cc99e425b" rel="noopener ugc nofollow" target="_blank"> StatelessWidget </a>，构建了一个<a class="ae nr" href="https://api.flutter.dev/flutter/material/MaterialApp-class.html" rel="noopener ugc nofollow" target="_blank"> MaterialApp </a>，后者包装了<strong class="ls iu"> HomePage </strong> Widget，我们接下来会看到这个widget。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="8d13" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">主页</h2><p id="dde4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">接下来，我们将查看<strong class="ls iu"> lib/home.dart </strong>中的主页:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9d8c" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">这里是我们进入一些真实代码的地方。<strong class="ls iu"> HomePage </strong>类扩展了一个<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html" rel="noopener ugc nofollow" target="_blank"> StatefulWidget </a>，允许它用可变的非最终属性维护自己的内部状态。有一个<em class="nx"> _cards </em>属性，它接受导入的部分定义并返回一个要显示的<strong class="ls iu">部分</strong>对象的列表。_controller属性包含对一个<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/ScrollController-class.html" rel="noopener ugc nofollow" target="_blank"> ScrollController </a>的引用，该控件将用于驱动应用程序其余部分中的动画。</p><p id="df7d" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">这个小部件的<em class="nx"> build </em>方法返回一个<a class="ae nr" href="https://api.flutter.dev/flutter/material/Scaffold-class.html" rel="noopener ugc nofollow" target="_blank"> Scaffold </a>，它包含一个<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/Stack-class.html" rel="noopener ugc nofollow" target="_blank"> Stack </a>(用于在z轴上堆叠小部件)，一个<strong class="ls iu"> Background </strong>用于接收ScrollController来驱动视差动画，一个<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/ListView-class.html" rel="noopener ugc nofollow" target="_blank"> ListView </a>用于显示要滚动的页面部分的列表，在这种情况下，它使用提供的控制器来驱动列表(而不是默认在内部创建一个)。对于在Flutter中管理滚动效果来说，这是一个相当标准的配置，因为它允许创建一个具有自定义行为的控制器，然后用于直接驱动滚动元素，并通过<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/AnimatedWidget-class.html" rel="noopener ugc nofollow" target="_blank"> AnimatedWidget </a>(或通过使用相关概念，如<a class="ae nr" href="https://api.flutter.dev/flutter/widgets/AnimatedBuilder-class.html" rel="noopener ugc nofollow" target="_blank"> AnimatedBuilder </a>)驱动任意数量的动画效果。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="a73f" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">背景</h2><p id="fdca" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">接下来是<strong class="ls iu"> lib/background.dart </strong>中的网站背景:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="ec00" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated"><strong class="ls iu">背景</strong>小部件是AnimatedWidget的一个实现，它接受一个<a class="ae nr" href="https://api.flutter.dev/flutter/dart-ui/Image-class.html" rel="noopener ugc nofollow" target="_blank">图像</a>和一个Listenable对象(或者在本例中是一个ScrollController，它是实现<a class="ae nr" href="https://api.flutter.dev/flutter/foundation/Listenable-class.html" rel="noopener ugc nofollow" target="_blank"> Listenable </a>的许多类中的一个)。listenable的值被传递给超类，以允许应用程序在发生滚动事件时刷新动画小部件。在<em class="nx">构建</em>方法中，执行计算以确定用户在ListView上滚动了多远(使用相同的ScrollController ),并且将该值作为y偏移提供给图像上的alignment属性，这导致缓慢的滚动运动，当与前景中的滚动内容结合时，产生良好的视差效果。此外，还会执行各种空检查，因为当这个小部件第一次呈现时，控制器可能还没有完全初始化和准备好。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="63d1" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated"><strong class="ak">页面部分定义</strong></h2><p id="76b8" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">现在让我们检查一下<strong class="ls iu"> lib/section-def.dart </strong>中的页面定义:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="f060" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated"><strong class="ls iu"> SectionDef </strong>类用于定义页面部分及其名称、描述和图像。此外，该文件中还有部分定义列表，主页使用该列表创建要渲染的<strong class="ls iu">部分</strong>对象列表。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="d495" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">页面部分类</h2><p id="3905" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">最后，我们来看看<strong class="ls iu"> lib/section.dart </strong>中页面部分的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="a0c5" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">这个文件中有两个类，一个是<strong class="ls iu">内容</strong>类，它基本上是一个小的实用工具，在这里用来防止代码块的过度嵌套，这在一个Flutter项目中可能会很快失控；另一个是实际的<strong class="ls iu">部分</strong>类本身，它绘制页面部分，并将以类似方式获得的不透明度应用于背景中的视差滚动效果计算。</p><p id="18d2" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated"><strong class="ls iu">节</strong>类构造函数取当前项的<em class="nx">索引</em>(在节列表中的位置)<em class="nx">总数(节数)、项</em>(节定义)<em class="nx">listanable</em>(驱动动画)。这个类根据它在节定义列表中的位置以及当前的滚动位置来计算它自己的不透明度。这里的目标是在<em class="nx"> 0.2 ( </em>用于当前不在视图中的项目)和1.0(用于滚动到视图中的项目)之间缩放不透明度。这实际上是从数字<em class="nx"> 1.0(最大不透明度)</em>减去项目和当前滚动位置之间距离的绝对值得出的。这样，当项目向任一方向滚动出视图时，它们的不透明度会增加。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h2 id="5a49" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">结论</h2><p id="cc3e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">在写这篇文章的时候，Flutter for Web还在开发中，但是Google的优秀人员正在努力将它合并到Flutter的主分支中，作为iOS和Android的另一个构建目标。</p><p id="454b" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">请随意克隆这个项目的<a class="ae nr" href="https://github.com/kenreilly/flutter-web-example" rel="noopener ugc nofollow" target="_blank">模板repo </a>并对其进行实验以了解更多信息，并查看官方的Flutter for网页以了解更多信息和该项目的最新开发成果。</p><p id="e229" class="pw-post-body-paragraph lq lr it ls b lt mw ju lv lw mx jx ly ld my ma mb lh mz md me ll na mg mh mi im bi translated">感谢阅读！</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><blockquote class="oa"><p id="b1e2" class="ob oc it bd od oe of og oh oi oj mi dk translated">肯尼斯·雷利(<a class="ae nr" href="https://twitter.com/8_bit_hacker" rel="noopener ugc nofollow" target="_blank"> 8_bit_hacker </a>)是<a class="ae nr" href="https://lvl-up.tech/" rel="noopener ugc nofollow" target="_blank"> LevelUP </a>的CTO</p></blockquote></div></div>    
</body>
</html>