<html>
<head>
<title>ASP.NET Core Basics: Blazor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ASP.NET核心基础:Blazor</h1>
<blockquote>原文：<a href="https://itnext.io/asp-net-core-basics-blazor-37ce0e8e4d97?source=collection_archive---------1-----------------------#2018-08-26">https://itnext.io/asp-net-core-basics-blazor-37ce0e8e4d97?source=collection_archive---------1-----------------------#2018-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f513347e0fa78acb7a878b9fa0ce0dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OBav52DCU1GXg--tPk0fEQ.png"/></div></div></figure><p id="8688" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Blazor 是一个单页面应用框架，使用。NET通过<a class="ae kw" href="https://webassembly.org/" rel="noopener ugc nofollow" target="_blank"> WebAssembly </a>和<a class="ae kw" href="https://www.mono-project.com/news/2017/08/09/hello-webassembly/" rel="noopener ugc nofollow" target="_blank"> Mono </a>的魔力在浏览器中运行。看看Blazor是如何运行的。有关更多信息，请访问浏览器。你可以把Blazor想象成Angular或者React，但是用. NET编写。</p><p id="6383" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，这个项目仍然是一个不受支持的实验，不应该用于生产应用程序。这是我直到现在才尝试的部分原因。</p><p id="9a0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将把Blazor项目添加到我的<a class="ae kw" href="https://github.com/elanderson/ASP.NET-Core-Basics" rel="noopener ugc nofollow" target="_blank">ASP.NET核心基础</a>回购中。之前的代码任何改动都可以在<a class="ae kw" href="https://github.com/elanderson/ASP.NET-Core-Basics/tree/fb8cbd05af6453bc077c804c520fd6e15dd6b1ea" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="9679" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">入门指南</h2><p id="2eef" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">作为一项实验，Blazor已经有了一些非常好的文档。这篇文章的大部分内容都与Blazor的<a class="ae kw" href="https://blazor.net/docs/get-started.html" rel="noopener ugc nofollow" target="_blank">入门</a>文档页面相似，但我会尝试边走边记录。首先，确保你有最新版本的<a class="ae kw" href="https://www.microsoft.com/net/download/dotnet-core/2.1" rel="noopener ugc nofollow" target="_blank">。安装了NET Core 2.1.x SDK </a>。</p><p id="dc6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你打算使用Visual Studio，你至少需要15.7版本。此外，您还需要安装<a class="ae kw" href="https://marketplace.visualstudio.com/items?itemName=aspnet.blazor" rel="noopener ugc nofollow" target="_blank"> Blazor语言服务扩展</a>。在Visual Studio中，这可以通过<strong class="ka ir">工具&gt;扩展和更新</strong>菜单来完成。选择<strong class="ka ir">在线</strong>并搜索<strong class="ka ir"> Blazor </strong>。它应该只显示一个项目，您可以单击<strong class="ka ir">下载</strong>开始安装过程。</p><h2 id="0ded" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">项目创建</h2><p id="328d" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">我们将使用。NET CLI安装Blazor模板，并将生成的项目添加到ASP.NET核心基础解决方案中。首先，打开命令提示符，使用下面的命令安装Blazor模板。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="a80d" class="kx ky iq ma b gy me mf l mg mh">dotnet new -i Microsoft.AspNetCore.Blazor.Templates</span></pre><p id="9c4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您使用的是示例代码，我将从现有的<strong class="ka ir"> src </strong>目录中的一个新的<strong class="ka ir"> Blazor </strong>目录运行命令。然后运行下面的命令来创建Blazor项目。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="c07f" class="kx ky iq ma b gy me mf l mg mh">dotnet new blazor</span></pre><p id="1bd2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一个命令会将新项目添加到现有解决方案中。如果命令从与解决方案文件相同的目录中运行，则不需要解决方案文件的路径，但是在我们的示例中，我们是从解决方案文件所在的位置向下两级运行命令。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="320c" class="kx ky iq ma b gy me mf l mg mh">dotnet sln "../../ASP.NET Core Basics.sln" add Blazor.csproj</span></pre><p id="dde9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此时，您可以使用下面的命令来运行应用程序。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="83a3" class="kx ky iq ma b gy me mf l mg mh">dotnet run</span></pre><h2 id="dd03" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">添加联系人列表</h2><p id="4cca" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">与ASP.NET基础知识类别中的另一篇文章一样，我们将添加一个联系人列表页面，从API中提取联系人列表。对于这个例子，API是示例解决方案中已经存在的<strong class="ka ir"> Contacts </strong>项目的一部分。该部分中的所有更改都发生在我们上面创建的<strong class="ka ir"> Blazor </strong>项目中。</p><p id="174c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka ir">页面</strong>目录下添加一个<strong class="ka ir"> ContactList.cshtml </strong>文件，内容如下。这个文件的一些部分将会被分解。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1590" class="kx ky iq ma b gy me mf l mg mh">@page "/contacts"<br/>@inject HttpClient Http<br/><br/>&lt;h1&gt;Contact List&lt;/h1&gt;<br/><br/>@if (contacts == null)<br/>{<br/>    &lt;p&gt;&lt;em&gt;Loading...&lt;/em&gt;&lt;/p&gt;<br/>}<br/>else<br/>{<br/>    &lt;table class="table"&gt;<br/>        &lt;thead&gt;<br/>            &lt;tr&gt;<br/>                &lt;th&gt;ID&lt;/th&gt;<br/>                &lt;th&gt;Name&lt;/th&gt;<br/>            &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            @foreach (var contact in contacts)<br/>            {<br/>                &lt;tr&gt;<br/>                    &lt;td&gt;@contact.Id&lt;/td&gt;<br/>                    &lt;td&gt;@contact.Name&lt;/td&gt;<br/>                &lt;/tr&gt;<br/>            }<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>}<br/><br/>@functions {<br/>    Contact[] contacts;<br/><br/>    protected override async Task OnInitAsync()<br/>    {<br/>        contacts = await Http.GetJsonAsync&lt;Contact[]&gt;("http://localhost:13322/api/contactsApi/");<br/>    }<br/><br/>    class Contact<br/>    {<br/>        public int Id { get; set; }<br/>        public string Name { get; set; }<br/>        public string Address { get; set; }<br/>        public string City { get; set; }<br/>        public string State { get; set; }<br/>        public string PostalCode { get; set; }<br/>        public string Phone { get; set; }<br/>        public string Email { get; set; }<br/>    }<br/>}</span></pre><p id="f971" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这有很多工作要做，所以我们将从函数部分开始，它本质上是一种屏蔽页面所需代码的方法。它可以包含函数、类或页面可能需要的任何其他C#构造。下面只是上面页面的函数部分。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="13a4" class="kx ky iq ma b gy me mf l mg mh">@functions {<br/>    Contact[] contacts;<br/><br/>    protected override async Task OnInitAsync()<br/>    {<br/>        contacts = await Http.GetJsonAsync&lt;Contact[]&gt;("http://localhost:13322/api/contactsApi/");<br/>    }<br/><br/>    class Contact<br/>    {<br/>        public int Id { get; set; }<br/>        public string Name { get; set; }<br/>        public string Address { get; set; }<br/>        public string City { get; set; }<br/>        public string State { get; set; }<br/>        public string PostalCode { get; set; }<br/>        public string Phone { get; set; }<br/>        public string Email { get; set; }<br/>    }<br/>}</span></pre><p id="f0ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的示例中，我们使用函数定义一个Contact类来保存从OnInitAsync函数的API调用中获取的数据。OnInitAsync函数是Blazor组件提供的<a class="ae kw" href="https://blazor.net/docs/components/index.html#lifecycle-methods" rel="noopener ugc nofollow" target="_blank">生命周期函数</a>之一。我们不会深入组件，我建议您查看<a class="ae kw" href="https://blazor.net/docs/components/index.html" rel="noopener ugc nofollow" target="_blank">组件文档</a>以获取更多信息。</p><p id="d7bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">@page "/contacts "定义了该页面将被服务的路线。接下来，@inject HttpClient Http展示了如何使用ASP.NET核心的依赖注入来获取HttpClient的实例。</p><p id="80e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">文件的剩余位是正常的<a class="ae kw" href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/razor?view=aspnetcore-2.1" rel="noopener ugc nofollow" target="_blank">剃刀</a>。函数部分中定义的所有内容都可以在布局中使用。例如，我们使用OnInitAsync填充的联系人列表来循环并创建一个表来显示我们的联系人列表。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1540" class="kx ky iq ma b gy me mf l mg mh">&lt;h1&gt;Contact List&lt;/h1&gt;<br/><br/>@if (contacts == null)<br/>{<br/>    &lt;p&gt;&lt;em&gt;Loading...&lt;/em&gt;&lt;/p&gt;<br/>}<br/>else<br/>{<br/>    &lt;table class="table"&gt;<br/>        &lt;thead&gt;<br/>            &lt;tr&gt;<br/>                &lt;th&gt;ID&lt;/th&gt;<br/>                &lt;th&gt;Name&lt;/th&gt;<br/>            &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            @foreach (var contact in contacts)<br/>            {<br/>                &lt;tr&gt;<br/>                    &lt;td&gt;@contact.Id&lt;/td&gt;<br/>                    &lt;td&gt;@contact.Name&lt;/td&gt;<br/>                &lt;/tr&gt;<br/>            }<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>}</span></pre><h2 id="f238" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">包扎</h2><p id="bd76" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">Blazor是一个非常有趣的概念。我希望它能够通过实验阶段成为一个受支持的项目。这似乎是一个很好的选择。NET开发人员。最终参加选拔是一件非常有趣的事情。去试一试，确保并向微软提供反馈，以便他们可以就如何进行该项目做出明智的决定。</p><p id="4d20" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成的代码可以在这里找到<a class="ae kw" href="https://github.com/elanderson/ASP.NET-Core-Basics/tree/ece8904816ea8224b97088c281505737ab7d867e" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="ef6e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mp">原载于</em> <a class="ae kw" href="https://elanderson.net/2018/08/asp-net-core-basics-blazor/" rel="noopener ugc nofollow" target="_blank"> <em class="mp">安德森</em> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>