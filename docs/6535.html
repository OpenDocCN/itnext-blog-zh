<html>
<head>
<title>Modern C++ in Advent of Code: Day12</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代C++代码的出现:第12天</h1>
<blockquote>原文：<a href="https://itnext.io/modern-c-in-advent-of-code-day12-1de190deb2e4?source=collection_archive---------4-----------------------#2021-12-12">https://itnext.io/modern-c-in-advent-of-code-day12-1de190deb2e4?source=collection_archive---------4-----------------------#2021-12-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="04d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天是代码问世<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">的第十二天。今天，我们将遵循一些简单的限制来寻找穿过洞穴的路径。</a></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/f94479bb6a436f5567e8b4cb27852a91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nFHWwDl1yaCEKYO9oskRfg.png"/></div></div></figure><p id="8f2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一如既往，请先尝试解决问题，然后再看解决方案。对于本系列中的所有文章，<a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">查看此列表</a>。</p><h1 id="9271" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第12天:第一部分</h1><p id="8263" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们今天的输入是一个洞穴图，用相邻对表示。任务是计算从节点“start”开始，到节点“end”结束的洞穴中唯一路径的数量。</p><p id="1636" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没有任何限制，答案通常是无限的，因为在一个简单的图<code class="fe mb mc md me b">S-&gt;A&lt;-&gt;B-&gt;E</code>中，我们可以在A和B之间不断循环，并创建更多独特的路径。所以，为了使这个可行，我们有一个限制。我们只能参观一次小洞穴(用小写名称表示)。</p><p id="6be7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要在内存中很好地表示我们的图形。通常一个方便的方法是邻接表，对于每个节点，我们记住它的邻居。</p><p id="0055" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还需要记住我们已经参观过的小洞穴:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="c363" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一次，我们从AoC获得了三个独特的输入进行测试，这简化了我们的测试:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="5cf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的输入解析中，我们翻译单向输入并存储两个节点的邻接信息:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="16d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，插入(第10行和第13行)仅在映射中不存在键的情况下才会插入。除此之外，我们确保不创建返回“开始”和从“结束”的连接。</p><p id="2e95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于解决方案，这里要实现的核心思想是简单地通过求和来建立可能路径的数量。让我们以AoC的示例图为例:</p><pre class="kn ko kp kq gt mh me mi mj aw mk bi"><span id="cd33" class="ml kz iq me b gy mm mn l mo mp">    start<br/>    /   \<br/>c--A-----b--d<br/>    \   /<br/>     end</span></pre><p id="0f0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<code class="fe mb mc md me b">start</code>开始的路径数是从<code class="fe mb mc md me b">start-&gt;A</code>开始的路径数加上<code class="fe mb mc md me b">start-&gt;b</code>。我们可以继续应用这个想法。以<code class="fe mb mc md me b">start-&gt;A</code>开头的路径数是以<code class="fe mb mc md me b">start-&gt;A-&gt;c</code>、<code class="fe mb mc md me b">start-&gt;A-&gt;end</code>、<code class="fe mb mc md me b">start-&gt;A-&gt;b</code>开头的路径数。至此，我们已经到达了一个终极状态。只有一条路以<code class="fe mb mc md me b">start-&gt;A-&gt;end</code>开始，因为我们永远无法离开<code class="fe mb mc md me b">end</code>。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="6ada" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">路径的数量是从该节点的邻居开始的路径的总和。除了以下例外:如果邻居是一个小洞穴，并且我们已经访问过它(第4行)，则路径数为零(即我们跳过邻居)，如果邻居是<code class="fe mb mc md me b">end</code>(第6行)，则路径数为1。否则，我们记得我们访问了这个邻居，如果它是一个小洞穴，以及从这个邻居开始到总数的路径数(第12行)。</p><p id="4c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这使得我们的主函数只有很少的代码:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="e064" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，我们创建的界面有点笨拙。首先，我们总是从<code class="fe mb mc md me b">start</code>开始，最重要的是，<code class="fe mb mc md me b">Memory</code>对打电话的人没有帮助。我们泄露的只是一个实现细节。所以，让我们来解决这个问题:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h1 id="5112" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第12天:第二部分</h1><p id="9f7a" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">对于第2部分，我们有一个稍微不同的限制。我们被允许重访一个小洞穴。然而，我们只有时间重访其中一个洞穴。</p><p id="9e55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以重用第1部分中的相同逻辑。然而，当我们偶然发现一个我们已经去过的小洞穴时，如果我们还没有去过其他的洞穴，我们就有可能再去一次。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="a81c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们已经访问了这个洞穴(第9行)，如果我们没有访问任何其他洞穴(第10行)，我们允许重访。我们还需要小心回滚，我们首先撤销重新访问(第19–20行)。</p><p id="1345" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">遵循隐藏细节的相同逻辑，我们创建一个包装函数:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="3c1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并扩展我们的main来打印两个结果:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h1 id="dcbe" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">链接和技术说明</h1><p id="6fd5" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">每日解决方案存储库位于:<a class="ae kl" href="https://github.com/HappyCerberus/moderncpp-aoc-2021" rel="noopener ugc nofollow" target="_blank">https://github.com/HappyCerberus/moderncpp-aoc-2021</a>。</p><p id="6f29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">看看这个列表，里面有关于《代号</a>出现的其他日子的文章。</p><p id="df76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请不要忘记亲自尝试<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">降临码</a>。</p><h1 id="fbd9" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">感谢您的阅读</h1><p id="e0dd" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">感谢您阅读这篇文章。你喜欢吗？</p><p id="14ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我也在YouTube上发布视频。你有问题吗？在Twitter或LinkedIn上联系我。</p></div></div>    
</body>
</html>