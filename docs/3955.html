<html>
<head>
<title>App Theming in Flutter — Dark Mode/ Light Mode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振模式下的应用程序主题——暗模式/亮模式</h1>
<blockquote>原文：<a href="https://itnext.io/app-theming-in-flutter-dark-mode-light-mode-27d9adf3cee?source=collection_archive---------0-----------------------#2020-04-01">https://itnext.io/app-theming-in-flutter-dark-mode-light-mode-27d9adf3cee?source=collection_archive---------0-----------------------#2020-04-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/75ed68cac1698293bf663fc6c423dba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nNGE13CX65eT5KmsYV8utA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">颤动中的动态主题</figcaption></figure><p id="e959" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这篇文章中，我们将看到如何在Flutter中对我们的应用进行主题化。<br/>如你所知，谷歌和苹果在他们最新发布的Android 10和iOS 13操作系统中发布了黑暗模式和光明模式。因此，我们必须确保当用户在设备中切换模式时，我们的应用程序能够完美运行。</p><h1 id="980e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">观看Youtube教程</h1><figure class="ly lz ma mb gt jr"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="56fd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们这里有一个简单的屏幕，只有一个列表视图。因此，我们将尝试根据设备主题对该屏幕进行主题化。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="aa41" class="mj lb iq mf b gy mk ml l mm mn">import 'package:flutter/material.dart';<br/>import 'package:provider/provider.dart';<br/>import 'AppNotifier.dart';<br/> <br/>class ThemeDemo extends StatefulWidget {<br/>  <a class="ae mo" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  ThemeDemoState createState() =&gt; ThemeDemoState();<br/>}<br/> <br/>class ThemeDemoState extends State&lt;ThemeDemo&gt; {<br/> <br/>  <a class="ae mo" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        elevation: 0,<br/>        title: Text('Flutter Themes'),<br/>        leading: Icon(Icons.menu),<br/>      ),<br/>      body: Container(<br/>        child: ListView.builder(<br/>          itemCount: 10,<br/>          itemBuilder: (context, pos) {<br/>            return Card(<br/>              elevation: 0,<br/>              child: ListTile(<br/>                title: Text(<br/>                  "Title $pos",<br/>                ),<br/>                subtitle: Text(<br/>                  "Subtitle $pos",<br/>                ),<br/>                leading: Icon(<br/>                  Icons.alarm,<br/>                ),<br/>                trailing: Icon(<br/>                  Icons.chevron_right,<br/>                ),<br/>              ),<br/>            );<br/>          },<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="8cb2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们将在main.dart中添加这个屏幕作为“home”。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="4197" class="mj lb iq mf b gy mk ml l mm mn">void main() {<br/>  runApp(<br/>    HomeApp(),<br/>  );<br/>}<br/> <br/>class HomeApp extends StatelessWidget {<br/>  <a class="ae mo" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Flutter Tutorials',<br/>      debugShowCheckedModeBanner: false,<br/>      home: ThemeDemo(),<br/>    );<br/>  }<br/>}</span></pre><p id="7c3b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你现在运行这个应用程序，你会看到默认的主题，也就是<strong class="ke ir">灯光主题</strong>。</p><p id="9f42" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在让我们给我们的父组件'<strong class="ke ir"> MaterialApp </strong>'添加一个主题。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="df7d" class="mj lb iq mf b gy mk ml l mm mn">MaterialApp(<br/>      title: 'Flutter Theming Tutorials',<br/>      debugShowCheckedModeBanner: false,<br/>      theme: ThemeData.light(),<br/>      home: ThemeDemo(),<br/>);</span></pre><p id="ec1d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">即使指定了ThemeData.light()主题，UI也不会改变，因为应用的默认主题是<strong class="ke ir"> light </strong>主题。</p><p id="6808" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在让我们应用<strong class="ke ir">黑暗主题。</strong></p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="e43a" class="mj lb iq mf b gy mk ml l mm mn">MaterialApp(<br/>      title: 'Flutter Theming Tutorials',<br/>      debugShowCheckedModeBanner: false,<br/>      theme: ThemeData.light(),<br/>      darkTheme: ThemeData.dark(),<br/>      home: ThemeDemo(),<br/>);</span></pre><p id="a64f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里我们已经应用了黑暗主题，所以如果我们在设置中将设备主题从明亮切换到黑暗，我们的UI将会更新。默认情况下，所有白人都会变成黑人，所有黑人都会变成白人，这是由Flutter框架提供的。</p><h1 id="e0e5" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">自定义主题</h1><p id="a4cb" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">现在我们知道“主题”属性接受了ThemeData对象。因此，让我们继续创建一个自定义主题数据。</p><p id="0f2f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，我创建了一个名为“AppTheme.dart”的新文件，并为亮暗主题创建了两个主题。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="766e" class="mj lb iq mf b gy mk ml l mm mn">import 'package:flutter/material.dart';<br/> <br/>class AppTheme {<br/>  //<br/>  AppTheme._();<br/> <br/>  static final ThemeData lightTheme = ThemeData(<br/>    scaffoldBackgroundColor: Colors.teal,<br/>    appBarTheme: AppBarTheme(<br/>      color: Colors.teal,<br/>      iconTheme: IconThemeData(<br/>        color: Colors.white,<br/>      ),<br/>    ),<br/>    colorScheme: ColorScheme.light(<br/>      primary: Colors.white,<br/>      onPrimary: Colors.white,<br/>      primaryVariant: Colors.white38,<br/>      secondary: Colors.red,<br/>    ),<br/>    cardTheme: CardTheme(<br/>      color: Colors.teal,<br/>    ),<br/>    iconTheme: IconThemeData(<br/>      color: Colors.white54,<br/>    ),<br/>    textTheme: TextTheme(<br/>      title: TextStyle(<br/>        color: Colors.white,<br/>        fontSize: 20.0,<br/>      ),<br/>      subtitle: TextStyle(<br/>        color: Colors.white70,<br/>        fontSize: 18.0,<br/>      ),<br/>    ),<br/>  );<br/> <br/>  static final ThemeData darkTheme = ThemeData(<br/>    scaffoldBackgroundColor: Colors.black,<br/>    appBarTheme: AppBarTheme(<br/>      color: Colors.black,<br/>      iconTheme: IconThemeData(<br/>        color: Colors.white,<br/>      ),<br/>    ),<br/>    colorScheme: ColorScheme.light(<br/>      primary: Colors.black,<br/>      onPrimary: Colors.black,<br/>      primaryVariant: Colors.black,<br/>      secondary: Colors.red,<br/>    ),<br/>    cardTheme: CardTheme(<br/>      color: Colors.black,<br/>    ),<br/>    iconTheme: IconThemeData(<br/>      color: Colors.white54,<br/>    ),<br/>    textTheme: TextTheme(<br/>      title: TextStyle(<br/>        color: Colors.white,<br/>        fontSize: 20.0,<br/>      ),<br/>      subtitle: TextStyle(<br/>        color: Colors.white70,<br/>        fontSize: 18.0,<br/>      ),<br/>    ),<br/>  );<br/>}</span></pre><p id="3138" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上面的代码中，正如你所看到的，我们有两个变量分别用于亮主题和暗主题，我们定制了它的一些属性，如“scaffoldBackgroundColor”、“appBarTheme”等。</p><p id="4d4b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">scaffoldBackgroundColor将改变屏幕的背景颜色，appBarTheme将改变你的AppBar的颜色，类似的还有其他风格。</p><h1 id="6e73" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">手动切换主题</h1><p id="217d" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">这里的想法是当用户改变时广播主题改变。现在我们需要一个可以做到这一点的软件包。</p><p id="c33d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，打开您的<strong class="ke ir"> pubspec.yaml </strong>文件并添加“provider”包。</p><p id="5c17" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">运行<strong class="ke ir"> flutter packages get </strong>到你的项目里面的终端，安装这个包。</p><p id="1f7a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们必须写一个类和一个方法来广播主题的变化。因此，让我们创建一个名为“AppStateNotifier”的新类</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="fc46" class="mj lb iq mf b gy mk ml l mm mn">import 'package:flutter/material.dart';<br/> <br/>class AppStateNotifier extends ChangeNotifier {<br/>  //<br/>  bool isDarkMode = false;<br/> <br/>  void updateTheme(bool isDarkMode) {<br/>    this.isDarkMode = isDarkMode;<br/>    notifyListeners();<br/>  }<br/>}</span></pre><p id="e67e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，我们将在UI中添加一个切换小部件，以便在主题之间进行切换。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="2e23" class="mj lb iq mf b gy mk ml l mm mn">Switch(<br/>    value: Provider.of&lt;AppStateNotifier&gt;(context).isDarkMode,<br/>    onChanged: (boolVal) {<br/>        Provider.of&lt;AppStateNotifier&gt;(context).updateTheme(boolVal);<br/>    },<br/>)</span></pre><p id="c601" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们需要添加一个监听器来监听变化和更新主题。我们必须转到最上面的小部件，像这样更新代码。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="56b2" class="mj lb iq mf b gy mk ml l mm mn">void main() {<br/>  runApp(<br/>    ChangeNotifierProvider&lt;AppStateNotifier&gt;(<br/>      builder: (context) =&gt; AppStateNotifier(),<br/>      child: HomeApp(),<br/>    ),<br/>  );<br/>}<br/> <br/>class HomeApp extends StatelessWidget {<br/>  <a class="ae mo" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Consumer&lt;AppStateNotifier&gt;(<br/>      builder: (context, appState, child) {<br/>        return MaterialApp(<br/>          title: 'Flutter Theming Tutorials',<br/>          debugShowCheckedModeBanner: false,<br/>          theme: AppTheme.lightTheme, // ThemeData(primarySwatch: Colors.blue),<br/>          darkTheme:<br/>              AppTheme.darkTheme, // ThemeData(primarySwatch: Colors.blue),<br/>          home: ThemeDemo(),<br/>          themeMode: appState.isDarkMode ? ThemeMode.dark : ThemeMode.light,<br/>        );<br/>      },<br/>    );<br/>  }<br/>}</span></pre><p id="1bea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这里，HomeApp被ChangeNotifierProvider小部件包围，该小部件接收更改并将其发送到“消费者”小部件，以消费它并使用它来进行更改。在上面的代码中，您可以看到基于appState变量更新的“themeMode”属性。当Switch小部件打开时，它会将布尔值true发送给监听器，最后发送给消费者小部件。</p><p id="f072" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mu mv mw mf b">themeMode: appState.isDarkMode ? ThemeMode.dark : ThemeMode.light,</code></p><h1 id="a6e3" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">更新文本主题</h1><p id="89ff" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">现在我们知道了在应用程序中设置的主题，它是在继承的小部件的帮助下设置的。</p><p id="e04c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，要更新文本主题或在我们的自定义主题中声明的任何其他主题，您可以在Theme.of(context)的帮助下访问它。</p><p id="a876" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">比如说。文本小部件可以像这样应用样式。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="d7e7" class="mj lb iq mf b gy mk ml l mm mn">Text(<br/>    "Title $pos",<br/>    style: Theme.of(context).textTheme.title,<br/>),</span></pre><p id="601d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">图标可以这样设置。</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="f50e" class="mj lb iq mf b gy mk ml l mm mn">Icon(<br/>    Icons.alarm,<br/>    color: Theme.of(context).iconTheme.color,<br/>),</span></pre><h1 id="114e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">完整的源代码</h1><p id="a4b3" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">完整的源代码可在以下位置获得</p><p id="b2b9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae mo" href="https://bitbucket.org/vipinvijayan1987/tutorialprojects/src/master/FlutterTutorialProjects/flutter_demos/lib/widgets/ThemeDemo/" rel="noopener ugc nofollow" target="_blank">https://bit bucket . org/vipinvijayan 1987/tutorial projects/src/master/fluttertutorial projects/flutter _ demos/lib/widgets/theme demo/</a></p><p id="fe39" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">请在下面留下您的宝贵意见。</p><p id="0a9d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你觉得这篇文章有用，请点击拍手按钮。</p><p id="cff9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢阅读。</p><p id="ff08" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">关注我的<a class="ae mo" href="https://www.youtube.com/watch?v=yxoKGaDE8cA&amp;feature=emb_logo" rel="noopener ugc nofollow" target="_blank"> Youtube </a>频道获取更多教程。</p><p id="43c5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你觉得这篇文章有用，请给我一些掌声。 </p><p id="5f94" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir"> <em class="mx">你知道你可以鼓掌50次。如果是我应得的，请照做。</em>T12】</strong></p></div></div>    
</body>
</html>