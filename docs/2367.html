<html>
<head>
<title>Server-Side Rendering with React, Redux, and React-Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React、Redux和React-Router进行服务器端渲染</h1>
<blockquote>原文：<a href="https://itnext.io/server-side-rendering-with-react-redux-and-react-router-fa5b67d4965e?source=collection_archive---------0-----------------------#2019-05-13">https://itnext.io/server-side-rendering-with-react-redux-and-react-router-fa5b67d4965e?source=collection_archive---------0-----------------------#2019-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a368844d16b434bfe5475ce3464ef0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a9Tqqylr2Ahfmk1wwRWAAw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">图片来自Unsplash <a class="ae jd" href="https://unsplash.com/@martijnbaudoin" rel="noopener ugc nofollow" target="_blank"> Martijn Baudoin </a></figcaption></figure><div class=""/><h1 id="b9d6" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">TL；博士</strong></h1><p id="873a" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">最近有一场关于服务器端渲染的大讨论。大家都说很难实现和维护。我用<strong class="ld jh"> 3种不同的方法</strong>创建了一个<strong class="ld jh"> React </strong>新闻web应用程序，以便能够理解彼此之间的性能和实现差异。我想让这个应用程序尽可能接近真实世界的用例。我用过；<strong class="ld jh"> React，React-Router，Redux，Node.js，</strong>和<strong class="ld jh"> Express </strong>。您可以通过下面的链接查看每个应用程序；</p><ul class=""><li id="09d8" class="lz ma jg ld b le mb li mc lm md lq me lu mf ly mg mh mi mj bi translated"><strong class="ld jh"> <em class="mk">单页应用</em></strong><a class="ae jd" href="http://bit.ly/spa-react" rel="noopener ugc nofollow" target="_blank"><strong class="ld jh">bit.ly/spa-react</strong></a></li><li id="2cc2" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated"><strong class="ld jh"> <em class="mk">服务器端渲染(通用)</em></strong><a class="ae jd" href="http://bit.ly/ssr-react" rel="noopener ugc nofollow" target="_blank"><strong class="ld jh">bit.ly/ssr-react</strong></a></li><li id="afc1" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated"><strong class="ld jh"> <em class="mk">服务器端渲染用Redis</em></strong><a class="ae jd" href="http://bit.ly/ssr-cached" rel="noopener ugc nofollow" target="_blank"><strong class="ld jh">bit.ly/ssr-cached</strong></a></li></ul></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="779c" class="kd ke jg bd kf kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la bi translated">为什么？</h1><p id="52fc" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我在网上看到了很多关于服务器端渲染的讨论，尤其是在Twitter上。我知道React有很多通用的渲染框架，但是我想自己从头开始构建它，不需要任何黑盒解决方案。但是首先要理解什么是服务器端和客户端渲染。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/e56d53f7853244da697932c7c0e02fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0AIrrQHAhke2mny9VfDmdw.png"/></div></div></figure><h1 id="6150" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">Javascript革命</h1><p id="ae00" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">浏览器比5-10年前更加强大。我们开始用客户端JavaScript创建完整的网站和网络应用。我们开始把这种方法叫做<strong class="ld jh">“单页应用”</strong>。这导致我们创建更多的交互式实时更新的web应用程序。</p><p id="ded0" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated">但是这种方法有一个问题，我们最初的HTML不再包含与该URL相关的所有数据。</p><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="nk nl l"/></div></figure><blockquote class="nm"><p id="2d2e" class="nn no jg bd np nq nr ns nt nu nv ly dk translated">谷歌和社交媒体爬虫对此一点也不高兴</p></blockquote><figure class="nx ny nz oa ob is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nw"><img src="../Images/a8ff8e4b311c46145ab992696cdebf25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JsylByinmaPMMQmeHzO2lg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">客户端渲染(CSR)</figcaption></figure><h1 id="59ca" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">什么是客户端渲染？(企业社会责任)</h1><blockquote class="nm"><p id="8e9f" class="nn no jg bd np nq oc od oe of og ly dk translated"><strong class="ak">在浏览器中渲染应用，一般使用DOM </strong></p></blockquote><p id="1921" class="pw-post-body-paragraph lb lc jg ld b le oh lg lh li oi lk ll lm oj lo lp lq ok ls lt lu ol lw lx ly ij bi translated">服务器呈现的初始HTML是一个占位符，所有脚本加载后，整个用户界面和数据都会呈现在浏览器中。</p><h2 id="353c" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">客户端渲染是如何工作的？</h2><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oy"><img src="../Images/6f9403e1d4d6ee7b0f053e57d6814545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bFkE292yNaxErbbhJ8Ee-w.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">客户端呈现工作方式概述</figcaption></figure><h2 id="0550" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">赞成的意见</h2><ul class=""><li id="b5c4" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">丰富的网站互动</li><li id="fe56" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">初始加载后的快速渲染</li><li id="f7fe" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">部分实时更新</li><li id="9fb4" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">托管和扩展成本更低</li></ul><h2 id="72d5" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">面向连接的网络服务(Connection Oriented Network Service)</h2><ul class=""><li id="939c" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">搜索引擎优化和索引问题</li><li id="88f1" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">主要是初始bundle.js加载持续时间</li><li id="2f13" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">旧移动设备/慢速网络的性能问题</li><li id="6749" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">社交媒体爬虫和分享问题(SMO)</li></ul></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pc"><img src="../Images/68502a3933d8385a8d5d0818941f508e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qe37Y5guIZpo2ODJMBjBUw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">服务器端呈现(SSR)</figcaption></figure><h1 id="063a" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">什么是服务器端渲染？(SSR)</h1><blockquote class="nm"><p id="54ed" class="nn no jg bd np nq oc od oe of og ly dk translated">响应于导航，服务器呈现为服务器上的页面生成完整的HTML。</p></blockquote><p id="1fd0" class="pw-post-body-paragraph lb lc jg ld b le oh lg lh li oi lk ll lm oj lo lp lq ok ls lt lu ol lw lx ly ij bi translated">对于React或任何其他Javascript库/框架的用例；服务器端呈现是一种技术，用于在服务器上呈现通常只有客户端的单页应用程序(SPA ),然后将完全呈现的页面发送到浏览器。</p><h2 id="7bc4" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">服务器端渲染是如何工作的？</h2><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/1c91bb60703fece62ca3c8322d6f3aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SKOU13Gu35WJDL1X35rUaA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">服务器端呈现如何工作的概述</figcaption></figure><h2 id="3850" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated"><strong class="ak">优点</strong></h2><ul class=""><li id="347d" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">一致的搜索引擎优化</li><li id="a7d0" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">性能，初始页面加载</li><li id="ef12" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">适用于社交媒体爬虫和平台(SMO)</li></ul><h2 id="1b12" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">面向连接的网络服务(Connection Oriented Network Service)</h2><ul class=""><li id="ff6d" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">频繁请求</li><li id="40bf" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">慢速页面呈现(TTFB —到达第一个字节的时间)</li><li id="f7c7" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">复杂架构(通用方法)</li></ul></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="eada" class="kd ke jg bd kf kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la bi translated">谷歌如何索引？</h1><p id="8c16" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们提到了单页Javascript应用程序的SEO问题。理解Google index system如何通过服务器端渲染解决这个问题很重要。</p><p id="f012" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated">在Google I/O 2018 JavaScript会议上，John Mueller和Tom Greenaway就搜索引擎如何索引JavaScript做了一些澄清。我们了解到有两波索引，它们是这样工作的:</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pd"><img src="../Images/68b7c511a531b989d86021ae722425ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*adAxURmASBsBzL14A9xhvQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">谷歌的第二波索引系统</figcaption></figure></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="6ecc" class="kd ke jg bd kf kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la bi translated">如何SSR？</h1><p id="1011" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们已经谈了几乎所有的理论部分。让我们把重点放在实现部分，以及我们如何用React实现服务器端渲染。</p><h2 id="1c67" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">方法学</h2><ul class=""><li id="aa76" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">服务器上的初始渲染</li><li id="9ac4" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">显示完整格式的HTML</li><li id="911d" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">JS执行</li><li id="dcab" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">React接管/重新渲染</li></ul><h2 id="7bb2" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">挑战</h2><ul class=""><li id="93df" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">Node.js上的JSX</li><li id="0505" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">服务器上的冗余</li><li id="9842" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">按指定路线发送</li><li id="ff25" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">再水化</li></ul></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><blockquote class="pe pf pg"><p id="4ee3" class="lb lc mk ld b le mb lg lh li mc lk ll ph nh lo lp pi ni ls lt pj nj lw lx ly ij bi translated"><strong class="ld jh">补液</strong></p><p id="5474" class="lb lc mk ld b le mb lg lh li mc lk ll ph nh lo lp pi ni ls lt pj nj lw lx ly ij bi translated">在客户机上“启动”JavaScript视图，以便它们重用服务器呈现的HTML的DOM树和数据。</p></blockquote><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pk"><img src="../Images/b55f69a5db1e782dbd05379e6965248e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x8OYUF7Ns8TdvD1euYHE9w.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">补液<a class="ae jd" href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web" rel="noopener ugc nofollow" target="_blank">图片来源</a></figcaption></figure></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pl"><img src="../Images/b76e6b923b5424e8e8184d5628e29eb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y_PcmZ0zI6geGResdNmd6g.png"/></div></div></figure><h1 id="3d2f" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">React新闻Web应用程序</h1><p id="d64b" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我用React创建了一个基于新闻API的新闻应用程序，有3种不同的方法。我创建了我的自定义实现来理解它是如何工作的。使用Create-React-App定制webpack配置可能会很棘手。</p><h2 id="de47" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated"><strong class="ak">单页应用(黄色)</strong></h2><p id="fe9a" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">经典的单页应用程序。</p><p id="6696" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated"><strong class="ld jh">演示:</strong><a class="ae jd" href="http://bit.ly/spa-react" rel="noopener ugc nofollow" target="_blank">bit.ly/spa-react</a><br/><strong class="ld jh">回购:</strong><a class="ae jd" href="http://bit.ly/spa-repo" rel="noopener ugc nofollow" target="_blank">bit.ly/spa-repo</a></p><h2 id="2b2e" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated"><strong class="ak">服务器端渲染—通用(红色)</strong></h2><p id="bac4" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">初始渲染发生在服务器上(Node.js / Express)。在第一次render和bundle.js加载后，React会重新水合并接管应用程序。这意味着React-Router将处理第一次加载后的每次点击，它将像单页应用程序一样工作。如果您检查源代码，您将看到完整的dom树，其中包含所有数据。如果刷新同一个页面或在URL栏上按enter键，当前页面将由服务器处理。</p><p id="71b6" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated"><strong class="ld jh">试玩:</strong>【bit.ly/ssr-react】<br/><strong class="ld jh">回购:</strong><a class="ae jd" href="http://bit.ly/ssr-repo" rel="noopener ugc nofollow" target="_blank">bit.ly/ssr-repo</a></p><h2 id="4c36" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">使用Redis的服务器端渲染(蓝色)</h2><p id="bd4f" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">与服务器端版本几乎一样。我试图在发送到浏览器之前缓存HTML结果，以查看性能改进。因此，对于某个URL，来自服务器的第一个响应将被缓存在Redis中，第二个响应将来自内存。为了测试这一点，你可以输入一个网址，复制该网址，并再次访问隐姓埋名或另一个浏览器。</p><p id="3349" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated"><strong class="ld jh">演示:</strong>T11】bit.ly/ssr-cached</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="aec2" class="kd ke jg bd kf kg mx ki kj kk my km kn ko mz kq kr ks na ku kv kw nb ky kz la bi translated">性能比较</h1><p id="c990" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">首先，我想检查Google是否能够索引我的通用应用程序。正如你在下面看到的，<strong class="ld jh">它能够毫无问题地看到</strong>所有的页面内容。这也意味着<strong class="ld jh">社交媒体爬虫</strong>也可以毫无问题地抓取我的页面内容。</p><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="pm nl l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">服务器端渲染的Google搜索控制台索引检查</figcaption></figure><p id="da9b" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated">我的第二个测试是关于性能的。我用Lighthouse工具和WepageTest做了一些性能测试。</p><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="pm nl l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">桌面负载比较</figcaption></figure><p id="72e9" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated">我们可以在下面的视频中看到SSR在慢速网络条件下是如何大放异彩的。</p><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="pm nl l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">在Moto G4 — Chrome —慢速网络上进行手机对比</figcaption></figure><h2 id="cc6a" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">灯塔测试</h2><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="pm nl l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">单页应用程序—灯塔结果</figcaption></figure><figure class="nd ne nf ng gt is"><div class="bz fp l di"><div class="pm nl l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">服务器端渲染应用程序—灯塔结果</figcaption></figure><h2 id="9ca6" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">结果比较</h2><p id="adc0" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">请记住，所有这些测试都是在没有大负载的情况下进行的。所以在现实世界中，结果可能会改变。</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pn"><img src="../Images/67f1c46ae2037b063ad8b9996e659bfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Su6M8LrK0NKVEvlmJUMEA.png"/></div></div></figure><h1 id="62af" class="kd ke jg bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="a708" class="pw-post-body-paragraph lb lc jg ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在开发这些应用程序的过程中，我真的很享受，也学到了很多东西。我没有提到很多关于代码的部分，但是你可以在GitHub repos上查看所有的实现。我应该提到的是，这些实现只是概念验证，离产品质量还很远。</p><p id="6ea6" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated">到目前为止，我可以说服务器端渲染不是一个神奇的实现。检查你的企业是否真的需要它是很重要的。你可以在下面看到我固执己见的决定。</p><h2 id="52cb" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">什么时候使用单页应用程序？</h2><ul class=""><li id="d6ff" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">丰富的网站互动</li><li id="c32e" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">网络很快</li><li id="2573" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">最少的服务器资源</li><li id="a65e" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">主脚本很小或延迟加载/分割</li><li id="5f99" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">实时/部分更新</li></ul><h2 id="f71a" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">何时使用服务器端渲染(通用)？</h2><ul class=""><li id="f9df" class="lz ma jg ld b le lf li lj lm oz lq pa lu pb ly mg mh mi mj bi translated">SEO很重要</li><li id="fbcc" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">网络很慢</li><li id="a44d" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">足够的服务器资源</li><li id="6b38" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">主脚本很大，加载很慢</li><li id="b2bb" class="lz ma jg ld b le ml li mm lm mn lq mo lu mp ly mg mh mi mj bi translated">社交分享很重要</li></ul><h2 id="dc91" class="om ke jg bd kf on oo dn kj op oq dp kn lm or os kr lq ot ou kv lu ov ow kz ox bi translated">进一步阅读</h2><div class="ip iq gp gr ir po"><a href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd jh gy z fp pt fr fs pu fu fw jf bi translated">网络渲染|网络|谷歌开发者</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">作为开发人员，我们经常面临影响整个应用程序架构的决策。其中一个…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">developers.google.com</p></div></div><div class="px l"><div class="py l pz qa qb px qc ix po"/></div></div></a></div><div class="ip iq gp gr ir po"><a href="https://medium.com/dev-channel/a-netflix-web-performance-case-study-c0bcde26a9d9" rel="noopener follow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd jh gy z fp pt fr fs pu fu fw jf bi translated">网飞网络性能案例研究</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">改善桌面Netflix.com的交互时间</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">medium.com</p></div></div><div class="px l"><div class="qd l pz qa qb px qc ix po"/></div></div></a></div><p id="dad3" class="pw-post-body-paragraph lb lc jg ld b le mb lg lh li mc lk ll lm nh lo lp lq ni ls lt lu nj lw lx ly ij bi translated"><a class="ae jd" href="https://github.com/brillout/awesome-universal-rendering" rel="noopener ugc nofollow" target="_blank">https://github.com/brillout/awesome-universal-rendering</a></p></div></div>    
</body>
</html>