<html>
<head>
<title>GuPM to manage your Node/JS project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GuPM来管理您的Node/JS项目</h1>
<blockquote>原文：<a href="https://itnext.io/gupm-to-manage-your-node-js-project-b7664503f3de?source=collection_archive---------2-----------------------#2019-07-14">https://itnext.io/gupm-to-manage-your-node-js-project-b7664503f3de?source=collection_archive---------2-----------------------#2019-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f0ce71306809cb3ae7af5bf59d25e6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydp07XT4gPu5wx54ngwZew.png"/></div></div></figure><h1 id="6ae4" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">GuPM简介</h1><p id="f2bd" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">GuPM是一个包管理器，其目标是统一包管理场景。统一并不意味着集中:GuPM的重点还在于通过与分散的存储库合作，确保社区驱动的开发场景，以及用于定制工具行为的强大脚本/插件系统。</p><blockquote class="lx ly lz"><p id="8bd0" class="kz la ma lb b lc mb le lf lg mc li lj md me lm ln mf mg lq lr mh mi lu lv lw im bi translated"><em class="it">本指南假设你熟悉NPM或同等产品(宝石、纱线、美芬等……)。</em></p><p id="38d3" class="kz la ma lb b lc mb le lf lg mc li lj md me lm ln mf mg lq lr mh mi lu lv lw im bi translated">为了阅读这篇文章，你需要在你的机器上安装<a class="ae mj" href="https://github.com/azukaar/gupm" rel="noopener ugc nofollow" target="_blank"> GuPM </a>和<a class="ae mj" href="https://github.com/azukaar/gupm-official" rel="noopener ugc nofollow" target="_blank"> NPM提供者</a>。</p></blockquote><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="ed61" class="mt kc it mp b gy mu mv l mw mx"># Install GUPM<br/>curl -fsSL https://azukaar.github.io/GuPM/install.sh | bash</span><span id="2f38" class="mt kc it mp b gy my mv l mw mx"># Install the NPM Provider<br/>g plugin install https://azukaar.github.io/GuPM-official/repo:provider-npm</span></pre><h1 id="6df1" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">它能做什么</h1><ul class=""><li id="a91b" class="mz na it lb b lc ld lg lh lk nb lo nc ls nd lw ne nf ng nh bi translated">依赖项管理(npm make / npm install)使用多个源(例如，不使用NVM，只需将节点设置为项目的依赖项)</li><li id="227d" class="mz na it lb b lc ni lg nj lk nk lo nl ls nm lw ne nf ng nh bi translated">脚本(g myscript.gs将以跨平台的方式执行您的脚本，对于构建/发布非常有用)</li><li id="1246" class="mz na it lb b lc ni lg nj lk nk lo nl ls nm lw ne nf ng nh bi translated">跨平台环境变量</li><li id="78d4" class="mz na it lb b lc ni lg nj lk nk lo nl ls nm lw ne nf ng nh bi translated">智能Git挂钩(只对更改的文件执行命令)</li><li id="2fac" class="mz na it lb b lc ni lg nj lk nk lo nl ls nm lw ne nf ng nh bi translated">并行执行您的测试/林挺</li></ul><h1 id="d545" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">入门指南</h1><p id="cba6" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们在您的项目中启动一个cli，并键入:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="2a88" class="mt kc it mp b gy mu mv l mw mx">g b -p npm<br/># short-hand for g bootstrap --provider npm</span></pre><p id="e7ed" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">它将询问您是否想要使用gupm.json或package.json。如果您的项目已经存在，gupm可以将其导入到gupm.json中(参见下一段了解gupm.json)。如果你打算发布一个lib到NPM，让人们用NPM安装它，那么你将别无选择，只能跳过导入，继续使用同一个package.json(别担心，GuPM也可以使用package.json！).如果您选择第二种方法，gupm仍然会在您的项目中创建一个gupm.json，让您能够从GuPM的特性中获益。</p><p id="4a17" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">一旦完成，GuPM将生成一个包含基本说明的自述文件。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="64fa" class="mt kc it mp b gy mu mv l mw mx">g make # Install your project's dependencies</span><span id="f905" class="mt kc it mp b gy my mv l mw mx">g i webpack # shorthand for g install webpack</span></pre><p id="d81b" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">您可能想知道:告诉我，如果GuPM是一个通用的包管理器，它怎么知道从NPM安装那些依赖项呢？让我们在项目中深入一点，看看脚手架是做什么的！</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="8e66" class="kb kc it bd kd ke nu kg kh ki nv kk kl km nw ko kp kq nx ks kt ku ny kw kx ky bi translated">了解GuPM</h1><p id="70cf" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">那么我们在这里生成了什么呢？最重要的是，我们生成了一个<code class="fe nz oa ob mp b">gupm.json</code>。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="461a" class="mt kc it mp b gy mu mv l mw mx">{<br/>    "author": "",<br/>    "description": "",<br/>    "licence": "ISC",<br/>    "name": "test",<br/>    "binaries": {},<br/>    "cli": {<br/>        "aliases": {}<br/>    },<br/>    "dependencies": {<br/>        "default": {},<br/>        "defaultProvider": "npm"<br/>    },<br/>    "publish": {<br/>        "destination": "docs/repo",<br/>        "source": []<br/>    }<br/>}</span></pre><p id="3ed8" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">如果您生成项目是为了使用package.json，您应该看到以下内容:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="c66e" class="mt kc it mp b gy mu mv l mw mx">{<br/>    "author": "",<br/>    "cli": {<br/>        "defaultProviders": {<br/>            "install": "npm",<br/>            "make": "npm"<br/>        }<br/>    },<br/>    "licence": "ISC",<br/>    "name": "test"<br/>}</span></pre><p id="8934" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">如果您熟悉package.json，这里已经有一些东西应该可以学习了。首先，名字/作者/描述/许可证是不言自明的。</p><p id="e479" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated"><code class="fe nz oa ob mp b">cli</code>选项允许您定制不同的cli命令在项目中的工作方式。例如，我们可以设置别名(将其视为package.json中的“脚本”)。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="467d" class="mt kc it mp b gy mu mv l mw mx">"cli": {<br/>  "aliases": {<br/>    "start": "node index.js"<br/>  }<br/>},</span></pre><p id="66ca" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">您还可以在这里通过defaultProvider告诉GuPM在使用特定命令时使用特定的提供者。这就是我们如何让GuPM使用npm进行制造和安装。</p><p id="1817" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">在第一个示例中，您可以注意到我们没有在cli选项中设置defaultProvider，但是我们仍然可以直接安装webpack。这是因为在依赖关系中，我们有另一个选项来设置defaultProvider。与那个不同的是，在<code class="fe nz oa ob mp b">resolution</code>阶段，它被设置为默认提供者。为了更好地理解，让我们假设我们已经设置了<strong class="lb iu"> no config </strong>:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="1254" class="mt kc it mp b gy mu mv l mw mx"># First, let's try to install webpack <br/># this will not use NPM <br/># because no defaultProvider is set in gupm.json</span><span id="baf9" class="mt kc it mp b gy my mv l mw mx">g i webpack</span><span id="f3b8" class="mt kc it mp b gy my mv l mw mx"># We can tell GuPM to use NPM to INSTALL a dependency<br/># If you do this, NPM will take over the whole install process<br/># Meaning it will save the dependency to package.json<br/># This is what happens when you set cli.defaultProviders</span><span id="8ab6" class="mt kc it mp b gy my mv l mw mx">g -p npm i webpack</span><span id="0ccd" class="mt kc it mp b gy my mv l mw mx"># A better way to do this, is to still use GuPM's default INSTALL<br/># But tell it to resolve the dependency from NPM<br/># Here, only the RESOLVE stage gets overwritten by NPM<br/># This is what happens when you set dependencies.defaultProvider</span><span id="bd18" class="mt kc it mp b gy my mv l mw mx">g i npm://webpack</span></pre><p id="716f" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">接下来，我们有publish，这很容易理解，如果你决定发布到一个分散的回购，它包含源文件和回购的目的地。</p><p id="303e" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">二进制文件严格等同于package.json中的bin。</p><p id="8613" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">我们需要查看的最后一个文件是<code class="fe nz oa ob mp b">make.gs</code>。如果你决定保留一个package.json，它会和你的gupm.json一起生成，这个文件是在你执行了<code class="fe nz oa ob mp b">g make</code>之后由GuPM <strong class="lb iu">自动执行的(你也可以创建install.gs等等……)。它的作用是告诉GuPM“一旦你安装完GuPM的依赖项，就安装NPM的”。</strong></p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="6e80" class="mt kc it mp b gy mu mv l mw mx">exec('g', ['make', '-p', 'npm']);</span></pre><h1 id="d932" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论</h1><p id="633c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">GuPM的设计考虑到了无缝性，为您的项目提供了最大的灵活性和定制性。这篇文章向您简要介绍了如何轻松地将它与NPM结合使用，当然，您也可以随时查看我们的github(和⭐ it！)以获得关于如何让你成为GuPM忍者的其他文档！</p><div class="oc od gp gr oe of"><a href="https://github.com/azukaar/gupm" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">azukaar/GuPM</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">🐶📦全球通用项目管理器-包管理器，cli工具，脚本为您的所有项目和您的系统…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">github.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot jz of"/></div></div></a></div><p id="0d1c" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">不要犹豫，也可以在Twitter上访问我:</p><div class="oc od gp gr oe of"><a href="https://twitter.com/stepienik" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">扬·斯特皮尼克(@斯特皮尼克)|推特</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">Yann Stepienik (@stepienik)的最新推文。员工英雄的工程主管- Javascript土豆，作者…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">twitter.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot jz of"/></div></div></a></div><p id="3562" class="pw-post-body-paragraph kz la it lb b lc mb le lf lg mc li lj lk me lm ln lo mg lq lr ls mi lu lv lw im bi translated">感谢阅读！</p></div></div>    
</body>
</html>