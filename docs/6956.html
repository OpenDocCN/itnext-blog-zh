<html>
<head>
<title>Git Commit Squash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git提交挤压</h1>
<blockquote>原文：<a href="https://itnext.io/git-commit-squash-64c5b23b188a?source=collection_archive---------3-----------------------#2022-04-25">https://itnext.io/git-commit-squash-64c5b23b188a?source=collection_archive---------3-----------------------#2022-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="3d82" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">挤压提交是将几个提交合并成一个的行为。在git的上下文中，术语“挤压”出现在两个地方:</p><ul class=""><li id="23c6" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated"><a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/git-merge-vs-rebase-938950fb218">挤压合并</a></li><li id="e787" class="ko kp it js b jt ky jx kz kb la kf lb kj lc kn kt ku kv kw bi translated">手动挤压</li></ul><p id="b90b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">挤压合并是一种特殊类型的合并，它自动获取一个分支中的所有提交，将它们挤压在一起，并将结果提交添加到目标分支(通常是主分支)。</p><p id="6f48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">挤压合并在下一期Git Weekly中得到了部分解决:</p><ul class=""><li id="8503" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated"><a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/git-merge-vs-rebase-938950fb218"> Git合并与Rebase:三种类型的合并</a></li></ul><p id="971b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这一期中，我们将讨论如何手动压缩几个提交。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/4415f4b8618e8fb1ab483b792e575593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDE3rCkEHdJ7KkMsofJhYA.png"/></div></div></figure><h1 id="ca18" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">手动挤压</h1><p id="bf67" class="pw-post-body-paragraph jq jr it js b jt mn jv jw jx mo jz ka kb mp kd ke kf mq kh ki kj mr kl km kn im bi translated">可以通过“交互式重置基础”进行手动挤压。让我们假设我们想要一起挤压5个最后的提交。然后，我们将对最后5次提交进行交互式重新排序:</p><pre class="le lf lg lh gt ms mt mu mv aw mw bi"><span id="ec56" class="mx lq it mt b gy my mz l na nb">git rebase -i HEAD~5</span></pre><p id="18de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该命令将启动交互式重置基础。将启动一个编辑器(如<code class="fe nc nd ne mt b">nano</code>)，其内容如下:</p><pre class="le lf lg lh gt ms mt mu mv aw mw bi"><span id="25c1" class="mx lq it mt b gy my mz l na nb">pick f72e7cb Feat: Resurrect flatMap<br/>pick 1a18b1c Feat: Add list transformations<br/>pick 3420af4 3.0.0<br/>pick f55a9ee Docs: Add marble diagrams to README<br/>pick 0433f9d Update README.md</span></pre><p id="c180" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">保持第一行不变，用<code class="fe nc nd ne mt b">s</code>(用于挤压)替换后面各行中的每个<code class="fe nc nd ne mt b">pick</code>:</p><pre class="le lf lg lh gt ms mt mu mv aw mw bi"><span id="7d5d" class="mx lq it mt b gy my mz l na nb">pick f72e7cb Feat: Resurrect flatMap<br/><strong class="mt iu">s</strong> 1a18b1c Feat: Add list transformations<br/><strong class="mt iu">s</strong> 3420af4 3.0.0<br/><strong class="mt iu">s</strong> f55a9ee Docs: Add marble diagrams to README<br/><strong class="mt iu">s</strong> 0433f9d Update README.md</span></pre><p id="c2df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">保存并退出。然后，编辑器再次启动，显示所有5次提交的提交消息。随意删除全部，重写整个消息。保存并退出。这就结束了互动rebase。</p><p id="0d07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要验证挤压是否完成，请执行git日志:</p><pre class="le lf lg lh gt ms mt mu mv aw mw bi"><span id="e49d" class="mx lq it mt b gy my mz l na nb">git log</span></pre><p id="562f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">压缩完成后，如果您想要推送至远程分支，并且已经推送了5次提交中的任何一次，您必须强制执行:</p><pre class="le lf lg lh gt ms mt mu mv aw mw bi"><span id="3eb7" class="mx lq it mt b gy my mz l na nb">git push <a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/git-force-vs-force-with-lease-9d0e753e8c41">--force-with-lease</a></span></pre><h1 id="395f" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">笔记</h1><ul class=""><li id="ce5a" class="ko kp it js b jt mn jx mo kb nf kf ng kj nh kn kt ku kv kw bi translated">在交互式rebase commit picker中，你可以写<code class="fe nc nd ne mt b">squash</code>而不是<code class="fe nc nd ne mt b">s</code>。但是我想简单的<code class="fe nc nd ne mt b">s</code>会更容易写下来。</li><li id="f147" class="ko kp it js b jt ky jx kz kb la kf lb kj lc kn kt ku kv kw bi translated">要了解更多关于自动挤压的知识，请参考我的“<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/16-git-tips-and-tricks-bf08d0602d3b"> 16 Git提示和技巧</a>”。我会写得更详细。</li><li id="a438" class="ko kp it js b jt ky jx kz kb la kf lb kj lc kn kt ku kv kw bi translated"><a class="ae kx" href="https://medium.com/subscribe/@aerabi" rel="noopener">订阅</a>my Medium publishes，以便在新的Git周刊发布时获得通知。</li><li id="1327" class="ko kp it js b jt ky jx kz kb la kf lb kj lc kn kt ku kv kw bi translated">关注Twitter上的<a class="ae kx" href="https://twitter.com/MohammadAliEN" rel="noopener ugc nofollow" target="_blank">我</a>获取git上的每周文章和每日推文。</li></ul></div></div>    
</body>
</html>