<html>
<head>
<title>Sharing global Vue instance between multiple webpack projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在多个webpack项目之间共享全局Vue实例</h1>
<blockquote>原文：<a href="https://itnext.io/sharing-global-vue-instance-between-multiple-webpack-projects-abfb0aa9d3e?source=collection_archive---------5-----------------------#2019-09-08">https://itnext.io/sharing-global-vue-instance-between-multiple-webpack-projects-abfb0aa9d3e?source=collection_archive---------5-----------------------#2019-09-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/44930a853a045cac16f47e120fe774cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*0R8yBf6rwLLB6DiD8bpvHw.gif"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">贷方:<a class="ae jy" href="https://tenor.com/view/homer-simpson-guanchidoguan-clones-clon-simpson-gif-12210267" rel="noopener ugc nofollow" target="_blank">期限</a></figcaption></figure><p id="b6c6" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><em class="kx">这是我的故事的后续:</em> <a class="ae jy" rel="noopener ugc nofollow" target="_blank" href="/adding-vue-components-to-old-school-web-apps-1f6c2339d599"> <em class="kx">将Vue组件添加到老式的web应用</em> </a> <em class="kx">。</em></p><p id="2290" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">如果你试图将Vue与基于插件的CMS系统集成，比如WordPress或Elgg，你很快就会遇到在多个插件之间共享Vue实例的问题。例如，您可能有一个集成了基于Vue的设计系统的插件，比如Vuetify，并对其进行了重新设计以匹配您的项目的外观。在稍后阶段，您决定添加一个新插件，该插件将重用您的设计系统的组件库中的组件。每当插件想要在其上构建组件时，您都可以导入设计系统并设计其样式，但是如果我们可以在多个插件之间共享全局Vue实例呢？</p><p id="69bd" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><code class="fe ky kz la lb b">webpack</code>配置支持<code class="fe ky kz la lb b"><a class="ae jy" href="https://webpack.js.org/configuration/externals/#externals" rel="noopener ugc nofollow" target="_blank">externals</a></code>参数，该参数允许我们定义不会被webpack导入和捆绑的外部依赖项，但将从全局解析。</p><p id="2cd8" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">首先，我们需要将Vue导入到我们的项目中，并确保它被定义为<code class="fe ky kz la lb b">window.Vue</code>。这可以通过使用带有CDN src的<code class="fe ky kz la lb b">&lt;script&gt;</code>标签来实现，或者，如果您使用RequireJS，可以通过手动分配或垫片来实现。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="776d" class="lk ll iq lb b gy lm ln l lo lp">require(['path/to/vue'], function(Vue) {<br/>    window.Vue = Vue;</span><span id="7f74" class="lk ll iq lb b gy lq ln l lo lp">    require([<br/>      'vuetify-plugin/index', <br/>      'stripe-plugin/index', <br/>      'payment-form-plugin/index'<br/>    ], function() {<br/>      // Mount your Vue app<br/>    });<br/>});</span></pre><p id="1846" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在我们可以更新所有子项目中的webpack配置，将Vue定义为外部的。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="0c20" class="lk ll iq lb b gy lm ln l lo lp"><strong class="lb ir">// If you are using laravel-mix<br/>mix</strong>.webpackConfig({<br/>   <strong class="lb ir">externals</strong>: {<br/>      <strong class="lb ir">vue</strong>: <strong class="lb ir">'Vue'</strong>,<br/>   },<br/>});</span><span id="7e1b" class="lk ll iq lb b gy lq ln l lo lp">// Otherwise just update your webpack config, wherever it is defined</span></pre><p id="e03f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">一旦将Vue定义为外部的，就可以继续使用<code class="fe ky kz la lb b">import</code>语法，但是webpack实际上不会导入或捆绑任何东西，而是从全局Vue实例中解析它。</p><p id="9f03" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">通过这种方法，每个插件都可以有自己独立的构建过程，并使用插件、组件、指令和mixins扩展全局Vue实例，这样当另一个插件想要重用它们时，它们已经被定义和配置好了。</p><p id="0f90" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">这将允许您隔离插件中的功能，而不必担心重叠和重复，例如，如果您有10个不同的插件来构建支付表单，您不必为每个插件导入和配置条纹密钥。</p></div></div>    
</body>
</html>