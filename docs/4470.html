<html>
<head>
<title>Angular 10 Rating Form Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度10评级表示例</h1>
<blockquote>原文：<a href="https://itnext.io/angular-10-rating-form-example-4c47b629dd66?source=collection_archive---------6-----------------------#2020-07-06">https://itnext.io/angular-10-rating-form-example-4c47b629dd66?source=collection_archive---------6-----------------------#2020-07-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="ece8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本教程中，我们将通过示例了解如何使用Bootstrap 4、HTML Select和Angular 10表单创建评级组件。我们将使用来自<code class="fe ko kp kq kr b">ng-bootstrap</code>的<code class="fe ko kp kq kr b">ngb-rating</code>组件。我们还将看到如何在反应式表单中使用带有<code class="fe ko kp kq kr b">ngFor</code>指令的HTML选择控件。如何分别使用<code class="fe ko kp kq kr b">[ngValue]</code>和<code class="fe ko kp kq kr b">value</code>属性将select元素绑定到TypeScript对象或字符串文字，以及如何分配默认值以从元素数组中进行选择。</p><blockquote class="ks kt ku"><p id="4512" class="jq jr kv js b jt ju jv jw jx jy jz ka kw kc kd ke kx kg kh ki ky kk kl km kn im bi translated"><a class="ae kz" href="https://ng-bootstrap.github.io/#/home" rel="noopener ugc nofollow" target="_blank"><em class="it">NgBoostrap</em></a><em class="it">是Bootstrap UI组件的角度适配版。使用ng-bootstrap，我们可以很容易地将bootstrap库集成到我们的Angular项目中，并很容易地使用它令人敬畏的UI组件。<br/> Bootstrap经过反复测试，可完全响应多种平台和屏幕尺寸。此外，它现在是几乎所有地方都采用的工业标准。</em></p></blockquote><p id="43d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">HTML表单在大多数web应用程序中是必需的。当您有多个选项并且希望用户在提交表单之前选择其中一个选项时，可以使用表单中的选择。在Angular中，可以将对象用于选项值，而不仅仅是字符串。</p><p id="e424" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个带有选择控件的组件模板示例:</p><p id="3590" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的角度组件中，我们需要一个包含一些城市的<code class="fe ko kp kq kr b">cities</code>数组。</p><p id="68fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用<code class="fe ko kp kq kr b">value</code>属性将城市绑定到<code class="fe ko kp kq kr b">select</code>，但是您也可以使用<code class="fe ko kp kq kr b">ngValue</code>来代替。属性仅用于字符串，而属性可以用于对象。接下来我们将看到另一个用对象代替字符串使用<code class="fe ko kp kq kr b">select</code>的例子。</p><p id="417a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们有一个下拉菜单，需要显示TypeScript数组中对象的名称，这就很方便了。但是当从下拉列表中选择元素时，你需要选择数组元素的<code class="fe ko kp kq kr b">id</code>来查询数据库。在这种情况下，我们需要使用<code class="fe ko kp kq kr b">ngValue</code>,因为它处理TypeScript对象，而不仅仅是字符串。</p><p id="b47d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上一个教程中，您已经看到了如何从npm安装Angular 10 CLI，所以让我们从创建一个新项目开始。</p><h1 id="1cde" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">创建新的Angular 10项目</h1><p id="4d6f" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">让我们从使用以下命令创建一个新的Angular 10项目开始:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="c5bb" class="ml lb it kr b gy mm mn l mo mp">$ ng new AngularRatingExample </span><span id="49f6" class="ml lb it kr b gy mq mn l mo mp">? Would you like to add Angular routing? Yes ? Which stylesheet format would you like to use? CSS</span></pre><h1 id="918c" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">添加ng引导</h1><p id="bb76" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">我们将看到如何在我们的项目中设置Bootstrap来使用<code class="fe ko kp kq kr b">ng-bootstrap</code>设计我们的UI。为此，我们首先需要使用以下命令将npm中的<code class="fe ko kp kq kr b">bootstrap</code>和<code class="fe ko kp kq kr b">ng-bootstrap</code>添加到我们的项目中:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="a16d" class="ml lb it kr b gy mm mn l mo mp">$ cd AngularRatingExample $ ng add @ng-bootstrap/ng-bootstrap</span></pre><p id="790b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将为您的<code class="fe ko kp kq kr b">angular.json</code>文件中指定的默认应用程序安装<code class="fe ko kp kq kr b">ng-bootstrap</code>。</p><p id="db19" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于<code class="fe ko kp kq kr b">ng-bootstrap</code>依赖于i18n，我们还需要使用以下命令将包添加到我们的项目中:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="9633" class="ml lb it kr b gy mm mn l mo mp">$ ng add @angular/localize</span></pre><p id="3f34" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，打开<code class="fe ko kp kq kr b">src/app/app.module.ts</code>文件，在<code class="fe ko kp kq kr b">AppModule</code>的<code class="fe ko kp kq kr b">imports</code>数组中添加<code class="fe ko kp kq kr b">NgbModule</code>和<code class="fe ko kp kq kr b">ReactiveFormsModule</code>，如下所示:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="0563" class="ml lb it kr b gy mm mn l mo mp">// [...] </span><span id="c881" class="ml lb it kr b gy mq mn l mo mp">import { ReactiveFormsModule } from '@angular/forms'; <br/>import { NgbModule } from '@ng-bootstrap/ng-bootstrap';<br/> <br/>@NgModule({ imports: [ // [...] ReactiveFormsModule, NgbModule ], })</span></pre><p id="cdb3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，打开<code class="fe ko kp kq kr b">src/app/app.component.html</code>文件并更新如下:</p><p id="bf1c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们简单地用一些用Bootstrap 4样式的HTML标记包装路由器出口。</p><h1 id="facf" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">创建10度角评级组件</h1><p id="b274" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">接下来，让我们创建一个角度为10°的组件来封装我们的表单。回到您的终端，运行以下命令:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="fff4" class="ml lb it kr b gy mm mn l mo mp">$ ng generate component rating</span></pre><h1 id="230d" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">使用带有反应式表单的<code class="fe ko kp kq kr b">ngFor</code>指令的HTML选择控件</h1><p id="43c2" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">接下来，打开<code class="fe ko kp kq kr b">src/app/rating/rating.component.html</code>文件并添加以下表单:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="52dc" class="ml lb it kr b gy mm mn l mo mp">&lt;form [formGroup]="form" (ngSubmit)="submit()"&gt; </span><span id="83ae" class="ml lb it kr b gy mq mn l mo mp">&lt;div class="form-group"&gt; <br/>  &lt;label&gt;Book&lt;/label&gt; <br/>  &lt;select formControlName="book"&gt; <br/>    &lt;option *ngFor="let book of books" [ngValue]="book"&gt;{{book.name}}&lt;/option&gt; <br/>   &lt;/select&gt; <br/>&lt;/div&gt; </span><span id="b08c" class="ml lb it kr b gy mq mn l mo mp">&lt;div class="form-group"&gt; <br/>   &lt;ngb-rating [max]="5" formControlName="rating"&gt;&lt;/ngb-rating&gt; &lt;/div&gt; </span><span id="18c1" class="ml lb it kr b gy mq mn l mo mp">&lt;button [disabled]="form.invalid || form.disabled" class="btn btn-primary"&gt;<br/>Rate the book!</span><span id="ee8c" class="ml lb it kr b gy mq mn l mo mp">&lt;/button&gt; <!-- --> </span><span id="43b5" class="ml lb it kr b gy mq mn l mo mp">&lt;/form&gt;<!-- --> </span></pre><p id="ea33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们在反应式表单中使用了带有<code class="fe ko kp kq kr b">ngValue</code>的HTML select元素和<code class="fe ko kp kq kr b">ngFor</code>指令。</p><p id="94f6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">是角度重复指令。它只是为列表中的每个元素重复宿主元素。</p><p id="768b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此示例中的语法如下:</p><ul class=""><li id="51fa" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated"><code class="fe ko kp kq kr b">&lt;option&gt;</code>是主体元素。</li><li id="3a6d" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><code class="fe ko kp kq kr b">books</code>保存来自<code class="fe ko kp kq kr b">RatingComponent</code>类的图书列表。</li><li id="bbe2" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><code class="fe ko kp kq kr b">book</code>保存列表中每次迭代的当前book对象。</li></ul><p id="a662" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，更新<code class="fe ko kp kq kr b">src/app/rating/rating.component.ts</code>文件，如下所示:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="3af3" class="ml lb it kr b gy mm mn l mo mp">// [...] <br/>export class RatingComponent implements OnInit <br/>{ </span><span id="d306" class="ml lb it kr b gy mq mn l mo mp">   books = [ { name: 'Book 1' }, { name: 'Book 2' }, { name: 'Book 3' }, { name: 'Book 4' }, { name: 'Book 5' } ]; </span><span id="3777" class="ml lb it kr b gy mq mn l mo mp">form = new FormGroup({ book: new FormControl(this.books[0], Validators.required), rating: new FormControl('', Validators.required), }); </span><span id="99ca" class="ml lb it kr b gy mq mn l mo mp">submit() { console.log(JSON.stringify(this.form.value)); <br/>this.form.reset(); } }</span></pre><p id="b55e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还使用<code class="fe ko kp kq kr b">book: new FormControl(this.books[0], Validators.required)</code>从数组手册中为select提供了一个默认值。第一个参数是默认值。</p><p id="e876" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们需要将我们的评级组件添加到路由器配置中。打开<code class="fe ko kp kq kr b">src/app/app-routing.module.ts</code>文件，更新如下:</p><pre class="md me mf mg gt mh kr mi mj aw mk bi"><span id="c437" class="ml lb it kr b gy mm mn l mo mp">import { NgModule } from '@angular/core';<br/>import { Routes, RouterModule } from '@angular/router'; <br/>import { RatingComponent } from '../rating/rating.component.ts'; const routes: Routes = [ {path: '', component: RatingComponent} ]; </span><span id="bb36" class="ml lb it kr b gy mq mn l mo mp">@NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) <br/>export class AppRoutingModule { }</span></pre><p id="4329" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，您可以使用以下命令启动开发服务器:</p><p id="3163" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个Angular 10教程中，我们已经介绍了如何基于来自<code class="fe ko kp kq kr b">ng-bootstrap</code>的<code class="fe ko kp kq kr b">ngb-rating</code>组件构建一个带有评级组件的基本表单。我们已经看到了如何在反应式表单中使用带有ngFor指令的HTML select控件。如何将select绑定到TypeScript对象而不是string，以及如何为select分配默认值。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="dac6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="kv">最初发布于</em><a class="ae kz" href="https://shabang.dev/angular-10-rating-form-example-ng-bootstrap-select-ngvalue/" rel="noopener ugc nofollow" target="_blank"><em class="kv">https://shabang . dev</em></a><em class="kv">。</em></p></div></div>    
</body>
</html>