<html>
<head>
<title>JavaScript 101: Truthiness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 101:真实</h1>
<blockquote>原文：<a href="https://itnext.io/javascript-101-truthiness-7cfe8b89d1be?source=collection_archive---------3-----------------------#2019-08-13">https://itnext.io/javascript-101-truthiness-7cfe8b89d1be?source=collection_archive---------3-----------------------#2019-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a217" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当处理条件语句(例如，<code class="fe ko kp kq kr b">if</code>语句)时，我们经常从布尔的角度来考虑:一个不是<code class="fe ko kp kq kr b">true</code>就是<code class="fe ko kp kq kr b">false</code>的值。然而，JavaScript条件并没有严格到需要类型为<code class="fe ko kp kq kr b">boolean</code>的实际值。相反，JavaScript条件基于值的<em class="ks">真值</em>进行操作。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/4a38404dab53e8702d1e5d9a6862b598.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*eChmTRd_YHgw-BE7qnUktA.png"/></div></figure><p id="2fe5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JavaScript中的每一个值都有一个固有的真值:不是“真”就是“假”。JavaScript中的条件关心的是值的真实性:这包括<code class="fe ko kp kq kr b">if</code>语句，但也包括像<code class="fe ko kp kq kr b">for</code>和<code class="fe ko kp kq kr b">while</code>这样的结构上的退出条件。通过扩展，“谓词”函数，就像那些传递给数组的<code class="fe ko kp kq kr b"><a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank">filter</a></code>和<code class="fe ko kp kq kr b"><a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find" rel="noopener ugc nofollow" target="_blank">find</a></code>方法的函数一样，也是基于真值来操作的。在所有这些情况下，如果提供的值为“真”，则满足条件，如果为“假”，则不满足条件。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/f7788e3e7e315028e4510eb592379ba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*tcAuAGPT5mZmKQ5bILdBbg.png"/></div></figure><p id="358d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">真值也告诉你当你把一个值传递给<code class="fe ko kp kq kr b">Boolean</code>函数时，你将得到<code class="fe ko kp kq kr b">boolean</code>的哪个值:真值给你<code class="fe ko kp kq kr b">true</code>，假值给你<code class="fe ko kp kq kr b">false</code>。您可以将<code class="fe ko kp kq kr b">Boolean</code>函数视为一种基于其真实性将<em class="ks">值转换为<code class="fe ko kp kq kr b">boolean</code>值的方法。</em></p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><p id="15c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">毫不奇怪，<code class="fe ko kp kq kr b">boolean</code>类型的值具有与其布尔值相对应的真值:<code class="fe ko kp kq kr b">true</code>是真值，<code class="fe ko kp kq kr b">false</code>是假值。除了<code class="fe ko kp kq kr b">false</code>，在JavaScript中只定义了<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank">另外五个falsy值:数字0、空字符串、<code class="fe ko kp kq kr b">null</code>、<code class="fe ko kp kq kr b">undefined</code>和<code class="fe ko kp kq kr b">NaN</code>。JavaScript中的所有其他值都是真的。</a></p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/06fde3bb5b07767a4dc24d0d785b78b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*fYDCaOWdYvuzqBYl_r8XEQ.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">JavaScript中定义的仅有的六个falsy值。</figcaption></figure><p id="1cdc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">人们常常惊讶地发现JavaScript中的一些值实际上是真实的。其中有<em class="ks">任何非零长度的字符串</em>，包括全部由空格组成的字符串，以及falsy值的字符串表示。其他令人惊讶的真值是空数组和空对象。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/0f3daa713d0d71c4f3ecaef0b07be5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*pH1E_o1VPZMUtE3J-uZPYQ.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">有时让开发者惊讶的真实值。</figcaption></figure></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><p id="41a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用真值的另一个地方是应用布尔运算符的时候。这包括布尔否定运算符(即<code class="fe ko kp kq kr b">!</code>，又名“砰”运算符)、布尔逻辑运算符(<code class="fe ko kp kq kr b">&amp;&amp;</code>和<code class="fe ko kp kq kr b">||</code>)和三元运算符(<code class="fe ko kp kq kr b">? … :</code>)。</p><p id="bdf9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">布尔逻辑操作符特别有趣，它产生了一种非常常见的惯用JavaScript模式。<code class="fe ko kp kq kr b">&amp;&amp;</code>和<code class="fe ko kp kq kr b">||</code>操作符被称为<em class="ks">短路</em>操作符，因为它们从左到右计算操作数，并且<em class="ks">在保证表达式值的第一个值处停止</em>。</p><p id="a716" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，如果你或一个真值，结果为真，那么短路或运算符(<code class="fe ko kp kq kr b">||</code>)将从左到右进行，直到找到真值，然后它<em class="ks">停止</em>(“短路”表达式的其余部分)并确定整个表达式为真。如果它没有找到真值操作数，则该表达式被确定为假值。</p><p id="842f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相反，AND运算符(<code class="fe ko kp kq kr b">&amp;&amp;</code>)将从左到右查找一个falsy值。一旦找到一个，它就短路其余的表达式，并确定整个表达式为假。只有当每个操作数都为真时，表达式才被确定为真。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/5ccc87866e3fd424026bee9885a8dbf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*a0mt-Op3ruPgkMGve5k-vg.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">||和&amp;&amp;运算符的短路行为</figcaption></figure><p id="d0ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JavaScript短路操作符的特别之处在于，它们不一定产生<code class="fe ko kp kq kr b">boolean</code>值。相反，它们产生决定表达式真实性的任何值。这显示在左边的例子中:对于<code class="fe ko kp kq kr b">||</code>表达式，最左边的真值操作数是数值<code class="fe ko kp kq kr b">1</code>，因此它成为整个表达式的值。对于<code class="fe ko kp kq kr b">&amp;&amp;</code>表达式，最左边的falsy操作数是空字符串<code class="fe ko kp kq kr b">""</code>，因此它成为表达式的值。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/af7a5a4b2a920dbb71e8615de018db12.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*YDm0M3OCX04n6FVWqxKf4Q.png"/></div></figure><p id="2e2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果表达式没有短路(即只有假值的<code class="fe ko kp kq kr b">||</code>表达式或只有真值的<code class="fe ko kp kq kr b">&amp;&amp;</code>表达式)，则最后一个(最右边的)操作数用作表达式的值。</p><p id="fdea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JavaScript的这一特性通常被用作某种条件的速记语法。例如，<code class="fe ko kp kq kr b">||</code>操作符通常用于为缺失属性、可选参数和其他可能错误的值设置默认值，如下所示:</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/60ebc01b598823438d1e2473bcc14dfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfcRNz2vf6g7hXcHC4Vg7w.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">使用||运算符作为默认值</figcaption></figure><p id="c7d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">类似地使用<code class="fe ko kp kq kr b">&amp;&amp;</code>操作符不太常见，但经常用于控制数组、对象和其他结构中可选项目的包含。例如，下面的例子使用<code class="fe ko kp kq kr b">withBar</code>值作为内嵌条件来控制返回值是否定义了<code class="fe ko kp kq kr b">bar</code>属性。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/4970e05840c51fa625c5f2283dc9aac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZuzGeMop-Ksn3KSBiXIkQ.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk translated">使用&amp;&amp;运算符控制对象属性的包含</figcaption></figure><p id="6f52" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这样做是因为<code class="fe ko kp kq kr b">false</code>(实际上是所有的falsy值)没有可供对象扩展操作符(<code class="fe ko kp kq kr b">…</code>)复制的属性。出于类似的原因，这与数组展开操作符一起工作。</p><p id="68c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一个常见的使用<code class="fe ko kp kq kr b">&amp;&amp;</code>操作符的地方是在JSX，有条件地包含一个子元素:</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/61e2ea76ce2f3406149e1362ae4a9340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*KuwwGa7Xfa2ndnf1k-Ut3g.png"/></div></figure><p id="f052" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个例子中，如果<code class="fe ko kp kq kr b">showTitle</code>是falsy，第二行上的<code class="fe ko kp kq kr b">&amp;&amp;</code>表达式将评估为<code class="fe ko kp kq kr b">showTitle</code>的值，并且JSX处理器将所有的falsy值视为非渲染的。如果<code class="fe ko kp kq kr b">showTitle</code>为true，则表达式计算为<code class="fe ko kp kq kr b">&lt;h1&gt;...&lt;/h1&gt;</code>元素。</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><p id="0b75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">真值是每个JavaScript值所固有的，并且在需要对值进行布尔求值的任何时候都会被运行时隐式使用。依靠真理性可以得到更简洁、更地道的JavaScript代码，尤其是在与短路操作符结合使用时。和往常一样，简洁和惯用的代码可能不太清楚，尤其是对不熟悉这种语言的人来说，所以应该谨慎使用。</p></div></div>    
</body>
</html>