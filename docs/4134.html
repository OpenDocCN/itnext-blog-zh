<html>
<head>
<title>Helm: Kubernetes package manager — an overview, getting started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Helm: Kubernetes包管理器——概述，入门</h1>
<blockquote>原文：<a href="https://itnext.io/helm-kubernetes-package-manager-an-overview-getting-started-ee62cf8b35b7?source=collection_archive---------7-----------------------#2020-05-03">https://itnext.io/helm-kubernetes-package-manager-an-overview-getting-started-ee62cf8b35b7?source=collection_archive---------7-----------------------#2020-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/23dc826559d613d3c8aec76f3a0e2b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/0*d9LnomRPy1hdilAc.png"/></div></figure><p id="dc22" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank">官方文档</a>称Helm为“<em class="kt">Kubernetes</em>的包管理器”，但事实上，Helm不仅仅是一个包管理器——它更是一个应用程序控制工具，用于安装、管理、升级、配置等。</p><p id="fba3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在本帖中，我们将概括介绍Helm，它的图表、模板、变量和存储库。</p><p id="4a7c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这篇文章实际上更像是对帮助的介绍，并没有涵盖一些方面，如版本控制、依赖关系等。</p><p id="f681" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">与Kubernetes本身相比，Helm拥有非常好的<a class="ae ks" href="https://helm.sh/docs/intro/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><ul class=""><li id="9500" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Helm_architecture" rel="noopener ugc nofollow" target="_blank">掌舵架构</a></li><li id="0ce0" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Helm_concepts" rel="noopener ugc nofollow" target="_blank">舵的概念</a></li><li id="4221" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Helm_components" rel="noopener ugc nofollow" target="_blank">舵组件</a></li><li id="e4a5" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Helm_Charts" rel="noopener ugc nofollow" target="_blank">舵图</a></li><li id="66ed" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Files_structure" rel="noopener ugc nofollow" target="_blank">文件结构</a></li><li id="a696" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Preparing_the_environment" rel="noopener ugc nofollow" target="_blank">准备环境</a></li><li id="8c2d" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Minikube_%E2%80%93_a_Kubernetes_cluster" rel="noopener ugc nofollow" target="_blank">mini kube——一个Kubernetes星团</a></li><li id="5613" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Installing_Helm" rel="noopener ugc nofollow" target="_blank">安装舵</a></li><li id="53ef" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Creating_a_Helm_Chart" rel="noopener ugc nofollow" target="_blank">创建舵图</a></li><li id="676f" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Adding_a_template" rel="noopener ugc nofollow" target="_blank">添加模板</a></li><li id="888f" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#chart_linter" rel="noopener ugc nofollow" target="_blank">图表短绒</a></li><li id="07f6" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#chart_install" rel="noopener ugc nofollow" target="_blank">图表安装</a></li><li id="8500" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#chart_uninstall" rel="noopener ugc nofollow" target="_blank">图表卸载</a></li><li id="4d1f" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Template_variables" rel="noopener ugc nofollow" target="_blank">模板变量</a></li><li id="4711" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#chart_upgrade" rel="noopener ugc nofollow" target="_blank">图表升级</a></li><li id="4f2e" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#helm_package" rel="noopener ugc nofollow" target="_blank">头盔组件</a></li><li id="8180" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Helm_repositories" rel="noopener ugc nofollow" target="_blank">舵库</a></li><li id="8ce5" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/#Running_local_Helm_repo" rel="noopener ugc nofollow" target="_blank">运行本地舵回购</a></li></ul><h2 id="15df" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">赫尔姆</h2><p id="f41a" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">Helm通过软件包运行Kubernetes中的应用程序，就Helm而言，它们被称为<strong class="jw ir">图表</strong>，并且<code class="fe mg mh mi mj b">helm</code>允许:</p><ul class=""><li id="6549" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated">创建新图表</li><li id="59aa" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">将图表打包归档(tgz)</li><li id="49d6" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">使用共享图表的存储库来处理共享图表</li><li id="4143" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">在Kubernetes集群中安装和卸载图表</li><li id="21f1" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">管理集群中的图表发布</li></ul><h2 id="40f4" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">舵的概念</h2><p id="d5d1" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">主要的三个概念是:</p><ol class=""><li id="955b" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr mk la lb lc bi translated"><em class="kt">图表</em>:在Kubernetes集群中运行应用程序所需的信息</li><li id="54fe" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr mk la lb lc bi translated"><em class="kt"> config </em>:关于必要配置选项的信息，该图表使用这些配置选项来创建应用程序实例并管理其发布</li><li id="9d78" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr mk la lb lc bi translated"><em class="kt">发布</em> : работающий инстанс <em class="kt">图表</em> -а，связанный с определённым <em class="kt">配置- </em> ом</li></ol><h2 id="68bd" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">舵组件</h2><p id="1001" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">Helm可以分为两个主要部分——客户端本身和Helm库</p><ul class=""><li id="283c" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><em class="kt"> Helm客户端</em>:是一个命令行工具(Helm是用Go编写的)，负责图表创建、使用存储库、发布管理等</li><li id="a94d" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">Helm库:Helm的逻辑部分负责与Kubernetes API一起管理图表、图表发布、集群安装等</li></ul><h2 id="b886" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">舵图</h2><p id="7c50" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">因此，<em class="kt">图表</em> —是一个文件集合，描述了一些Kubernetes资源，这些资源可用于创建单pod应用程序—或整个复合web服务，包括web服务器、前端ap和后端应用程序、缓存服务等。</p><h2 id="abf6" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">文件结构</h2><p id="d51e" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">图表被组织成目录和文件树，其中顶层目录名是图表名。</p><p id="cd38" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">例如:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="5ff4" class="li lj iq mj b gy mt mu l mv mw">$ tree example-chart/<br/>example-chart/<br/>| — Chart.yaml<br/>| — charts<br/>| — templates<br/>| | — NOTES.txt<br/>| | — _helpers.tpl<br/>| | — deployment.yaml<br/>| | — hpa.yaml<br/>| | — ingress.yaml<br/>| | — service.yaml<br/>| | — serviceaccount.yaml<br/>| ` — tests<br/>| ` — test-connection.yaml<br/>` — values.yaml</span></pre><p id="2c18" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这里:</p><ul class=""><li id="ab01" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated"><code class="fe mg mh mi mj b">example-chart</code> : top-catalog，一个图表名称</li><li id="4ab5" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe mg mh mi mj b">Chart.yaml</code>:图表的元数据，描述图表的用途、版本、依赖关系等</li><li id="fc57" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe mg mh mi mj b">charts</code>:一个图表可以包含多个子图表或者<em class="kt">子图表</em>——它们将被存储在这里</li><li id="2ec4" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe mg mh mi mj b">templates</code>:包含使用<a class="ae ks" href="https://golang.org/pkg/text/template/" rel="noopener ugc nofollow" target="_blank"> Go模板</a>应用于Kubernetes集群的模板文件</li><li id="6c1f" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe mg mh mi mj b">NOTES.txt</code> -帮助-为用户显示的文本</li><li id="3e11" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">【Kubernetes部署清单示例</li><li id="b8a2" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">【Kubernetes服务清单示例</li><li id="3d92" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated"><code class="fe mg mh mi mj b">values.yaml</code> -包含模板的默认值</li></ul><p id="8ab4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">好了，理论到此为止——让我们开始实践吧！</p><h2 id="4876" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">准备环境</h2><p id="3716" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">在此将使用Minikube、kubectl和Helm v3:</p><ul class=""><li id="1fb5" class="ku kv iq jw b jx jy kb kc kf kw kj kx kn ky kr kz la lb lc bi translated">minikube v1.9版</li><li id="2085" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">Kubernetes v1.18版</li><li id="bc4d" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">kubectl v1.18.2</li><li id="e453" class="ku kv iq jw b jx ld kb le kf lf kj lg kn lh kr kz la lb lc bi translated">舵-3.2.0</li></ul><h2 id="2a08" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">mini kube——一个Kubernetes星团</h2><p id="521d" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated"><a class="ae ks" href="https://rtfm.co.ua/kubernetes-zapusk-minikube-na-arch-linux/" rel="noopener ugc nofollow" target="_blank">安装</a> <code class="fe mg mh mi mj b"><a class="ae ks" href="https://rtfm.co.ua/kubernetes-zapusk-minikube-na-arch-linux/" rel="noopener ugc nofollow" target="_blank">minikube</a></code>:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="dda7" class="li lj iq mj b gy mt mu l mv mw">$ sudo pacman -S minikube</span></pre><p id="037c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建集群:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="49b2" class="li lj iq mj b gy mt mu l mv mw">$ minikube start<br/>😄 minikube v1.9.2 on Arch rolling<br/>…<br/>🌟 Enabling addons: default-storageclass, storage-provisioner<br/>🏄 Done! kubectl is now configured to use “minikube”</span></pre><p id="f3cf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="05e4" class="li lj iq mj b gy mt mu l mv mw">$ kubectl cluster-info<br/>Kubernetes master is running at <a class="ae ks" href="https://192.168.99.100:8443" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:8443</a><br/>KubeDNS is running at <a class="ae ks" href="https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</a></span></pre><p id="ddec" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">其节点:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="e1bc" class="li lj iq mj b gy mt mu l mv mw">$ kubectl get nodes<br/>NAME STATUS ROLES AGE VERSION<br/>minikube Ready master 4m16s v1.18.0</span></pre><h2 id="b894" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">安装舵</h2><p id="2330" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">Arch Linux —来自存储库:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="681c" class="li lj iq mj b gy mt mu l mv mw">$ sudo pacman -S helm</span></pre><p id="e138" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">macOS —自制:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="ec90" class="li lj iq mj b gy mt mu l mv mw">$ brew install helm</span></pre><p id="fc5d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Debian等—使用Snap:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="2d3a" class="li lj iq mj b gy mt mu l mv mw">$ sudo apt install snapd<br/>$ sudo snap install helm — classic</span></pre><p id="265b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">而且对<code class="fe mg mh mi mj b">helm help</code>真的很有帮助:</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mx"><img src="../Images/f078487a17c0783434dc392a41a4bf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wER0QMkpk7zYTTbh.png"/></div></div></figure><h2 id="f173" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">创建舵图</h2><p id="095b" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">现在，让我们使用模板创建自己的图表，并尝试将其部署到Kubernetes集群中。</p><p id="903c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建新图表:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="9379" class="li lj iq mj b gy mt mu l mv mw">$ helm create example-chart<br/>Creating example-chart</span></pre><p id="29a3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们已经看到了它的内容:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="76e9" class="li lj iq mj b gy mt mu l mv mw">$ tree example-chart/<br/>example-chart/<br/>| — Chart.yaml<br/>| — charts<br/>| — templates<br/>| | — NOTES.txt<br/>| | — _helpers.tpl<br/>| | — deployment.yaml<br/>| | — hpa.yaml<br/>| | — ingress.yaml<br/>| | — service.yaml<br/>| | — serviceaccount.yaml<br/>| ` — tests<br/>| ` — test-connection.yaml<br/>` — values.yaml<br/>3 directories, 10 files</span></pre><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/f2c904bc825d9830069e3464017cf0a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/0*EV1TcW15KxwX45Q8.png"/></div></figure><p id="078f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们检查一下它的部署文件:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="3bb4" class="li lj iq mj b gy mt mu l mv mw">$ cat example-chart/templates/deployment.yaml<br/>apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>name: {{ include “example-chart.fullname” . }}<br/>labels:<br/>{{- include “example-chart.labels” . | nindent 4 }}<br/>spec:<br/>{{- if not .Values.autoscaling.enabled }}<br/>replicas: {{ .Values.replicaCount }}<br/>{{- end }}<br/>…</span></pre><p id="e889" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">和<code class="fe mg mh mi mj b">Values</code>:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="ee68" class="li lj iq mj b gy mt mu l mv mw">$ cat example-chart/values.yaml<br/>Default values for example-chart.<br/>This is a YAML-formatted file.<br/>Declare variables to be passed into your templates.<br/>replicaCount: 1<br/>…</span></pre><p id="fec3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">必须足够明显——因为<code class="fe mg mh mi mj b">templates/deployment.yaml</code>中的<code class="fe mg mh mi mj b">replicas: {{ .Values.replicaCount }}</code>将使用来自<code class="fe mg mh mi mj b">values.yaml</code>的<code class="fe mg mh mi mj b">replicaCount: 1</code>值。</p><p id="e1d0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但不会使用这些文件—让我们创建自己的图表。</p><p id="700b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">移除它们:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="3a9c" class="li lj iq mj b gy mt mu l mv mw">$ rm -rf example-chart/templates/*</span></pre><p id="a35c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在添加我们的配置图。</p><h2 id="dff9" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">添加模板</h2><p id="d880" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">创建一个新文件<code class="fe mg mh mi mj b">example-chart/templates/configmap.yaml</code>，在这里，例如，一个<code class="fe mg mh mi mj b">index.html</code>文件的内容:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="1308" class="li lj iq mj b gy mt mu l mv mw">apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>  name: nginx-configmap<br/>data:<br/>  index.html: "Hello, World</span></pre><h2 id="ef24" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">海图夹</h2><p id="8358" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">在安装图表之前，最好检查其语法——为此使用<code class="fe mg mh mi mj b">helm lint</code>:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="7d7e" class="li lj iq mj b gy mt mu l mv mw">$ helm lint example-chart/<br/>==&gt; Linting example-chart/<br/>[INFO] Chart.yaml: icon is recommended<br/>1 chart(s) linted, 0 chart(s) failed</span></pre><h2 id="0448" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">图表安装</h2><p id="318f" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">再次检查您的<code class="fe mg mh mi mj b">kubectl</code>中配置了哪个集群:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="983b" class="li lj iq mj b gy mt mu l mv mw">$ kubectl config current-context<br/>minikube</span></pre><p id="6e18" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要安装图表，使用<code class="fe mg mh mi mj b">helm install</code>传递一个版本名作为第一个参数，然后是选项和图表文件的路径。</p><p id="b6dd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但同样，在运行实际操作之前，最好使用<code class="fe mg mh mi mj b">--dry-run</code>进行试运行，并添加<code class="fe mg mh mi mj b">--debug</code>以查看更多细节:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="c813" class="li lj iq mj b gy mt mu l mv mw">$ helm install example-chart — dry-run — debug example-chart/<br/>install.go:159: [debug] Original chart version: “”<br/>install.go:176: [debug] CHART PATH: /home/setevoy/Work/RTFM/example-chart<br/>NAME: example-chart<br/>LAST DEPLOYED: Sun May 3 13:17:07 2020<br/>NAMESPACE: default<br/>STATUS: pending-install<br/>REVISION: 1<br/>TEST SUITE: None<br/>USER-SUPPLIED VALUES:<br/>{}<br/>COMPUTED VALUES:<br/>affinity: {}<br/>autoscaling:<br/>enabled: false<br/>maxReplicas: 100<br/>minReplicas: 1<br/>targetCPUUtilizationPercentage: 80<br/>fullnameOverride: “”<br/>image:<br/>pullPolicy: IfNotPresent<br/>repository: nginx<br/>tag: “”<br/>…<br/> — -<br/>Source: example-chart/templates/configmap.yaml<br/>apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>name: nginx-configmap<br/>data:<br/>index.html: “Hello, World”</span></pre><p id="c013" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">好的—没有错误，现在安装:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="cf68" class="li lj iq mj b gy mt mu l mv mw">$ helm install example-chart example-chart/<br/>NAME: example-chart<br/>LAST DEPLOYED: Sun May 3 13:20:52 2020<br/>NAMESPACE: default<br/>STATUS: deployed<br/>REVISION: 1<br/>TEST SUITE: None</span></pre><p id="7a5f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查其状态:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="0023" class="li lj iq mj b gy mt mu l mv mw">$ helm get manifest example-chart<br/> — -<br/>Source: example-chart/templates/configmap.yaml<br/>apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>name: nginx-configmap<br/>data:<br/>index.html: “Hello, World”</span></pre><p id="1194" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">并请示了<code class="fe mg mh mi mj b">kubectl</code>:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="321d" class="li lj iq mj b gy mt mu l mv mw">$ kubectl describe cm nginx-configmap<br/>Name: nginx-configmap<br/>Namespace: default<br/>Labels: app.kubernetes.io/managed-by=Helm<br/>Annotations: meta.helm.sh/release-name: example-chart<br/>meta.helm.sh/release-namespace: default<br/>Data<br/>====<br/>index.html:<br/> — — <br/>Hello, World</span></pre><h2 id="6822" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">图表卸载</h2><p id="25c6" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">同样，您可以删除一个图表——使用<code class="fe mg mh mi mj b">helm uninstall</code>和一个发布名称:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="0808" class="li lj iq mj b gy mt mu l mv mw">$ helm uninstall example-chart<br/>release “example-chart” uninstalled</span></pre><h2 id="2972" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">模板变量</h2><p id="1853" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">好的——一切似乎都在工作，但是我们的ConfgiMap中有静态数据和硬编码的值。</p><p id="b3d5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们改变它，应用模板引擎。</p><p id="2991" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于<code class="fe mg mh mi mj b">helm</code>，您可以使用一组预定义的变量，如<code class="fe mg mh mi mj b">Release.Name</code>，参见<a class="ae ks" href="https://helm.sh/docs/topics/charts/" rel="noopener ugc nofollow" target="_blank">文档</a>中的完整列表。</p><p id="1f74" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">шаблон нашего配置图:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="0315" class="li lj iq mj b gy mt mu l mv mw">apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>  name: {{ .Release.Name }}-configmap<br/>data:<br/>  index.html: "Hello, World"</span></pre><p id="73da" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，添加自己的变量—移除<code class="fe mg mh mi mj b">values.yaml</code>:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="ca78" class="li lj iq mj b gy mt mu l mv mw">$ rm example-chart/values.yaml</span></pre><p id="6e0d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建它，但是只有一行代码:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="4f66" class="li lj iq mj b gy mt mu l mv mw">user: "Username"</span></pre><p id="3563" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，您可以通过<code class="fe mg mh mi mj b">.Values.user</code>在模板中使用它:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="66b7" class="li lj iq mj b gy mt mu l mv mw">apiVersion: v1<br/>kind: ConfigMap<br/>metadata:<br/>  name: {{ .Release.Name }}-configmap<br/>data:<br/>  index.html: "Hello, {{ .Values.user }}"</span></pre><p id="4451" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe mg mh mi mj b">.Values</code>告诉Helm使用<code class="fe mg mh mi mj b">values,yaml</code>获取<em class="kt">用户</em>变量的值。</p><p id="6199" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">应用:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="2252" class="li lj iq mj b gy mt mu l mv mw">$ helm install example-chart example-chart/<br/>NAME: example-chart<br/>LAST DEPLOYED: Sun May 3 13:35:49 2020<br/>NAMESPACE: default<br/>STATUS: deployed<br/>REVISION: 1<br/>TEST SUITE: None<br/>Check:<br/>kubectl get cm<br/>NAME DATA AGE<br/>example-chart-configmap 1 31s</span></pre><p id="2e09" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">内容:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="7ed9" class="li lj iq mj b gy mt mu l mv mw">$ kubectl describe cm example-chart-configmap<br/>Name: example-chart-configmap<br/>Namespace: default<br/>Labels: app.kubernetes.io/managed-by=Helm<br/>Annotations: meta.helm.sh/release-name: example-chart<br/>meta.helm.sh/release-namespace: default<br/>Data<br/>====<br/>index.html:<br/> — — <br/>Hello, Username</span></pre><h2 id="0a78" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">图表升级</h2><p id="075b" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">好吧，但是如果我们想改变用户名字符串呢？</p><p id="f0ad" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您可以删除整个版本，并在<code class="fe mg mh mi mj b">values.yaml</code>中用更改后的值重新部署，或者直接用<code class="fe mg mh mi mj b">--set</code>选项指定:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="0665" class="li lj iq mj b gy mt mu l mv mw">$ helm uninstall example-chart<br/>release “example-chart” uninstalled<br/>helm install example-chart example-chart/ — set user=NewUser</span></pre><p id="4db9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="cb49" class="li lj iq mj b gy mt mu l mv mw">$ kubectl describe cm example-chart-configmap<br/>…<br/>Data<br/>====<br/>index.html:<br/> — — <br/>Hello, NewUser</span></pre><p id="c7c9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另一种方法是使用带有发布名称和新值的<code class="fe mg mh mi mj b">helm upgrade</code>:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="eaff" class="li lj iq mj b gy mt mu l mv mw">$ helm upgrade example-chart example-chart/ — set user=AnotherOneUser<br/>Release “example-chart” has been upgraded. Happy Helming!<br/>…</span></pre><p id="ff39" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">结果是:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="aa98" class="li lj iq mj b gy mt mu l mv mw">$ kubectl describe cm example-chart-configmap<br/>…<br/>Data<br/>====<br/>index.html:<br/> — — <br/>Hello, AnotherOneUser</span></pre><h2 id="71f5" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">头盔组件</h2><p id="9e53" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">为了能够与同事分享我们的图表，我们可以将它打包成tgz文件。</p><p id="2b2a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用<code class="fe mg mh mi mj b">helm package</code>，这将创建一个名为<em class="kt">chart-name-chart-verstion . tgz</em>的新文件。</p><p id="48bf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">版本<code class="fe mg mh mi mj b">helm</code>将从图表的元数据中获取:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="17e0" class="li lj iq mj b gy mt mu l mv mw">$ cat example-chart/Chart.yaml | grep version:<br/>version: 0.1.0</span></pre><p id="68f8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">打包:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="bb8b" class="li lj iq mj b gy mt mu l mv mw">$ helm package example-chart/<br/>Successfully packaged chart and saved it to: /home/setevoy/Work/RTFM/example-chart-0.1.0.tgz</span></pre><p id="786a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查归档的内容:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="ebc1" class="li lj iq mj b gy mt mu l mv mw">$ tar tf example-chart-0.1.0.tgz<br/>example-chart/Chart.yaml<br/>example-chart/values.yaml<br/>example-chart/templates/configmap.yaml<br/>example-chart/.helmignore</span></pre><h2 id="4a88" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">赫尔姆仓库</h2><p id="6b95" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">为了共享我们的打包图表，使用了Helm存储库。</p><p id="5974" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">之前，你可以使用<code class="fe mg mh mi mj b">helm serve</code>来创建一个，但是在Helm v3中它被移除了。</p><p id="e6f0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在使用<code class="fe mg mh mi mj b">helm repo</code>来处理存储库。</p><p id="dd24" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">默认情况下，您已经添加了来自Google的回购:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="755b" class="li lj iq mj b gy mt mu l mv mw">$ helm repo list<br/>NAME URL<br/>stable <a class="ae ks" href="https://kubernetes-charts.storage.googleapis.com/" rel="noopener ugc nofollow" target="_blank">https://kubernetes-charts.storage.googleapis.com/</a></span></pre><h2 id="5642" class="li lj iq bd lk ll lm dn ln lo lp dp lq kf lr ls lt kj lu lv lw kn lx ly lz ma bi translated">运行本地Helm repo</h2><p id="9ddd" class="pw-post-body-paragraph ju jv iq jw b jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr ij bi translated">创建自己的存储库—it；对一个图表执行<code class="fe mg mh mi mj b">helm package</code>就足够了，然后在用于存储图表存档的目录中生成<code class="fe mg mh mi mj b">index.yaml</code>文件。</p><p id="2687" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">作为后端存储，你几乎可以使用任何东西——从Github页面开始，到AWS S3，见<a class="ae ks" href="https://helm.sh/docs/topics/chart_repository/" rel="noopener ugc nofollow" target="_blank">图表库指南</a>。</p><p id="a291" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下面是一个如何运行本地Helm存储库的示例。</p><p id="bccf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建一个目录，将存档的图表移入其中:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="8c19" class="li lj iq mj b gy mt mu l mv mw">$ mkdir helm-local-repo<br/>$ mv example-chart-0.1.0.tgz helm-local-repo/</span></pre><p id="2d5f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">初始化存储库:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="fbd9" class="li lj iq mj b gy mt mu l mv mw">$ helm repo index helm-local-repo/</span></pre><p id="2b98" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查其内容:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="4df1" class="li lj iq mj b gy mt mu l mv mw">$ tree helm-local-repo/<br/>helm-local-repo/<br/>| — example-chart-0.1.0.tgz<br/>` — index.yaml</span></pre><p id="119c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要访问它——运行一个网络服务器，例如一个普通的NGINX:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="76c3" class="li lj iq mj b gy mt mu l mv mw">$ sudo docker run -ti -v $(pwd)/helm-local-repo/:/usr/share/nginx/html -p 80:80 nginx</span></pre><p id="8ac0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查连接:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="1dde" class="li lj iq mj b gy mt mu l mv mw">$ curl localhost/index.yaml<br/>apiVersion: v1<br/>entries:<br/>example-chart:<br/>- apiVersion: v2<br/>appVersion: 1.16.0<br/>created: “2020–05–03T14:04:44.896115358+03:00”<br/>description: A Helm chart for Kubernetes<br/>digest: afa314247a03c4c85f339bda665659f3ab13a5e8656336e14ed37ed7f31b5352<br/>name: example-chart<br/>type: application<br/>urls:<br/>- example-chart-0.1.0.tgz<br/>version: 0.1.0<br/>generated: “2020–05–03T14:04:44.895678349+03:00”</span></pre><p id="2cc8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将此存储库添加到您的本地舵:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="470e" class="li lj iq mj b gy mt mu l mv mw">$ helm repo add example-chart <a class="ae ks" href="http://localhost" rel="noopener ugc nofollow" target="_blank">http://localhost</a><br/>“example-chart” has been added to your repositories</span></pre><p id="53ad" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">检查:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="a45c" class="li lj iq mj b gy mt mu l mv mw">$ helm repo list<br/>NAME URL<br/>stable <a class="ae ks" href="https://kubernetes-charts.storage.googleapis.com/" rel="noopener ugc nofollow" target="_blank">https://kubernetes-charts.storage.googleapis.com/</a><br/>example-chart <a class="ae ks" href="http://localhost" rel="noopener ugc nofollow" target="_blank">http://localhost</a></span></pre><p id="61e4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">尝试搜索图表:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="dd81" class="li lj iq mj b gy mt mu l mv mw">$ helm search repo example<br/>NAME CHART VERSION APP VERSION DESCRIPTION<br/>example-chart/example-chart 0.1.0 1.16.0 A Helm chart for Kubernetes</span></pre><p id="73ef" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">安装它:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="ac5f" class="li lj iq mj b gy mt mu l mv mw">$ helm install example-chart-from-repo example-chart/example-chart<br/>NAME: example-chart-from-repo<br/>LAST DEPLOYED: Sun May 3 14:15:51 2020<br/>NAMESPACE: default<br/>STATUS: deployed</span></pre><p id="53d5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">入住Kubernetes集群:</p><pre class="ml mm mn mo gt mp mj mq mr aw ms bi"><span id="3c86" class="li lj iq mj b gy mt mu l mv mw">$ kubectl get cm<br/>NAME DATA AGE<br/>example-chart-configmap 1 34m<br/>example-chart-from-repo-configmap 1 22s</span></pre><p id="74d9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">大体就是这样。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="94b0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="kt">最初发布于</em> <a class="ae ks" href="https://rtfm.co.ua/en/helm-kubernetes-package-manager-an-overview-getting-started/" rel="noopener ugc nofollow" target="_blank"> <em class="kt"> RTFM: Linux、DevOps、系统管理</em> </a> <em class="kt">。</em></p></div></div>    
</body>
</html>