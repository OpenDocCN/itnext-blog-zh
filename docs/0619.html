<html>
<head>
<title>Creating a chatbot to book film tickets — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个可以预订电影票的聊天机器人—第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/creating-a-chatbot-to-book-film-tickets-part-2-435aecdf402d?source=collection_archive---------1-----------------------#2018-04-18">https://itnext.io/creating-a-chatbot-to-book-film-tickets-part-2-435aecdf402d?source=collection_archive---------1-----------------------#2018-04-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2105ff4e64c77d9ff6967486141f7347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nRga00aM9_R11_cT."/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com/@agkdesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚历山大·奈特</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上发表的“一个名叫Pepper的机器人拿着一个iPad”</figcaption></figure><div class=""/><p id="25b7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">如果你还没有看第一部分，这里是:</em> <a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/creating-a-chatbot-to-book-cinema-shows-part-1-9c13de573a07"> <em class="lb">创建一个聊天机器人来预订电影票——第一部分</em> </a></p><blockquote class="lc ld le"><p id="0e90" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><a class="ae jd" href="https://www.linkedin.com/cws/share?url=hhttps%3A%2F%2Fitnext.io%2Fcreating-a-chatbot-to-book-film-tickets-part-2–435aecdf402d%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank">点击这里在LinkedIn上分享这篇文章</a></p></blockquote><p id="0f78" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">我很感激也很高兴被</strong> <a class="li lj ep" href="https://medium.com/u/2543d8373361?source=post_page-----435aecdf402d--------------------------------" rel="noopener" target="_blank"> <strong class="kf jh">帕特丽夏·杜兰</strong> </a> <strong class="kf jh">从</strong><a class="li lj ep" href="https://medium.com/u/a3488d2b50b2?source=post_page-----435aecdf402d--------------------------------" rel="noopener" target="_blank"><strong class="kf jh">Planeta Chatbot</strong></a><strong class="kf jh">翻译成西班牙语。</strong></p><p id="17f1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">这是西班牙语版本:</em><a class="ae jd" href="https://planetachatbot.com/creando-un-chatbot-para-reservar-entradas-de-cine-c0e7c9c5a0f" rel="noopener ugc nofollow" target="_blank"><em class="lb">Creando un chatbot para reserver entradas de cine—part 1</em></a></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="9d4f" class="lr ls jg bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">第一部分总结</h1><p id="40fe" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">到目前为止，在第一部分的结尾，我完成了创建一个由<a class="ae jd" href="https://www.google.fr/search?q=puppeteer&amp;rlz=1C1CHBF_enFR780FR780&amp;oq=puppeteer&amp;aqs=chrome..69i57j35i39j0l4.1788j0j4&amp;sourceid=chrome&amp;ie=UTF-8" rel="noopener ugc nofollow" target="_blank"><strong class="kf jh"/></a>操纵的基本机器人，它是一个<a class="ae jd" href="https://en.wikipedia.org/wiki/Headless_browser" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh">无头浏览器</strong> </a>。</p><p id="f756" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个机器人可以:</p><ul class=""><li id="ce35" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated">检索法国所有的电影院。</li><li id="88fe" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">告知在选定的电影院有哪些电影。</li><li id="9c0c" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">根据你选择的时间来判断一部电影是否可以预定。</li><li id="6ca9" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">开始预订流程</strong>。</li></ul><p id="f405" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一点非常关键，原因如下。T47】</p><p id="8d88" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">在不同网络的不同电脑上做了大量测试后，我意识到机器人十几次中只有一次能成功订到一部电影的票。</strong></p><p id="5170" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对于一个成熟的自动预订过程来说还不够，但是我认为对于本系列来说已经足够了。</p><p id="523a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想知道:</p><blockquote class="ni"><p id="2959" class="nj nk jg bd nl nm nn no np nq nr la dk translated">这个项目最重要的是什么？</p></blockquote><p id="28b3" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">两条路，要么:</p><ul class=""><li id="1939" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated">我有自己定制的聊天机器人，可以根据需要预订电影票。</li><li id="864b" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">了解如何设置一个聊天机器人，链接到由服务器上的远程应用程序控制的无头浏览器。</li></ul><p id="9069" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我选择了后者，因为有太多我无法克服的技术障碍。</p><p id="e86a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个聪明的媒体读者评论了第一部分，问<em class="lb">(重排)</em> <strong class="kf jh">“你为什么不尝试对订票用的REST API进行逆向工程？”</strong>。</p><p id="b47e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我发现我对这个评论的回答应该是这个系列的第一部分，你应该看一下:<a class="ae jd" href="https://medium.com/@snowmiser/why-dont-you-just-do-a-manual-network-inspection-see-what-urls-are-being-called-and-what-headers-8024e3afb03a" rel="noopener">https://medium . com/@ snowmoser/why-don-you-just-do-a-manual-network-inspection-see-what-URLs-be-called-and-what-headers-8024 E3 AFB 03 a</a></p><p id="2533" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结合章节:<strong class="kf jh">无头浏览器方法的缺点，</strong>它强调了是什么使得这个项目比预期的要困难得多。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="6f84" class="lr ls jg bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">现在怎么办？</h1><p id="5fba" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">这一次我们将重点关注一个由<a class="ae jd" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kf jh">dialog flow</strong></a><strong class="kf jh">(Google)</strong>支持的<strong class="kf jh">聊天机器人。</strong></p><blockquote class="lc ld le"><p id="399f" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><strong class="kf jh">边注:</strong> DialogFlow过去被称为api.ai。这就是为什么在网上搜索如何解决你的问题会得到关于api.ai的结果。记住api.ai = dialogflow。想要更进一步吗？看这里<a class="ae jd" href="https://blog.dialogflow.com/post/apiai-new-name-dialogflow-new-features/" rel="noopener ugc nofollow" target="_blank">https://blog . dialog flow . com/post/apiai-new-name-dialog flow-new-features/</a></p></blockquote><p id="6e09" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们主要关注的是:</p><ul class=""><li id="9557" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated">从零开始创建一个基本的聊天机器人，无需编码。</li><li id="546b" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">理解当聊天机器人接收到一个特定的句子</strong>(意图，场景，随你怎么调用)时，如何调用web服务器上的远程函数。</li></ul><p id="816d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">请注意，DialogFlow是免费的，功能极其强大，但它意味着</em> <strong class="kf jh"> <em class="lb">你就是产品</em> </strong> <em class="lb">。你的聊天机器人通过DialogFlow处理的一切都有可能被谷歌用来改善他们的人工智能。</em></p><p id="225d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行在由<strong class="kf jh"> express </strong>支持的<strong class="kf jh"> Node.js </strong>服务器上的<strong class="kf jh"> Javascript ES6 </strong>将提供<strong class="kf jh">代码示例</strong>。我相信这是在最短的时间内运行服务器的最直接的方法。</p><blockquote class="lc ld le"><p id="d9c4" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><strong class="kf jh">旁注:</strong>读完一篇文章后，我的一个朋友问我<strong class="kf jh">“老兄，你是如何托管你的Node.js应用的？”</strong>。请记住，大多数广泛传播的主机服务通常只支持PHP(因为Joomla、Wordpress和所有这些CMS都运行在PHP上，我认为这只是出于经济考虑)。我告诉他去找:<strong class="kf jh">数字海洋，甘地</strong>和<strong class="kf jh">VPSes</strong>T9【一般】T10。</p></blockquote><p id="0066" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我尽了最大努力使它非常容易使用和实现，我建议你在阅读这篇文章后阅读官方的DialogFlow文档，这只是一个很好的起点。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="7ab2" class="lr ls jg bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">你好世界</h1><p id="bda4" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">首先，您需要将您的Google帐户绑定到DialogFlow。</p><p id="0129" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导航到<a class="ae jd" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh"> dialogflow的网站</strong> </a> <strong class="kf jh">，</strong>你应该看到这个:</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nx"><img src="../Images/51d9aab5cf37e17c6815b0c66766b6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHuO-TyzVRERYD9CjmaJbw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Dialogflow主页</figcaption></figure><p id="337c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击<strong class="kf jh">“免费注册”</strong>按钮，系统会提示您输入您的谷歌账户密码并创建一个新的谷歌项目。这是一个简单易行的步骤。</p><p id="7355" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在您的项目已经创建好了，让我们来看一下DialogFlow面板。</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/21852254e40f23f2eb1e6e24de7710dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5rrTyGGudrFjIPgvQ2UlIQ.png"/></div></div></figure><p id="5359" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如你所见，我的聊天机器人叫做<strong class="kf jh"> Allocine </strong>。</p><p id="229d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该界面由三部分组成:</p><ul class=""><li id="d458" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated"><strong class="kf jh">左侧侧面导航菜单</strong></li><li id="d35d" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">屏幕中央的主要组件</strong></li><li id="ec19" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">右边的聊天界面，你可以在这里测试和调试你的聊天机器人</li></ul><p id="840e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看这个配菜菜单提供了什么:</p><ul class=""><li id="d354" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated">这些是你的聊天机器人处理的场景。</li><li id="620e" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">实体:那些是你定制的数据结构(不是算法结构，如果你喜欢的话，也可以是JSON对象)。事实上，DialogFlow有很多类似<code class="fe od oe of og b">@sys.date, @sys.number</code>之类的内置实体。</li><li id="01ef" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">训练:</strong>这个功能非常强大和直观。它给你一个人们与你的聊天机器人最近聊天的概述，并且它能使你监督学习。假设你的聊天机器人不能理解一个问题，你可以找到这个问题，并告诉“下次，就像在澳大利亚正常的预订场景一样处理它”。</li><li id="a95e" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">集成:</strong>几乎一键集成不同的平台，如脸书、Telegram、Slack、Twitter等。</li><li id="60b6" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">分析:</strong>你已经知道了。</li><li id="2b80" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">履行:</strong>我们将关注什么。它负责将你的聊天机器人绑定到你的服务器，以处理特殊请求。例如，如果有人键入“我想买一个比萨饼”，您可以将这个意图(也称为场景)绑定到您的服务器逻辑。Google还允许那些对Firebase Cloud比较熟悉的人使用它(内置浏览器代码编辑器)。这部分也叫webhooks。</li><li id="c8e9" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">预建代理:</strong>一组非常有用的现有代理，帮助您开始使用Dialogflow。它允许您导入代理，了解它们如何工作，定制它们，等等。</li><li id="eb94" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">闲聊:</strong>正是它听起来的样子。这一部分旨在让您配置您的聊天机器人将如何处理小型会谈。这一部分不应该被忽略，因为它让你的聊天机器人看起来更像人类。</li></ul><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/183db9e06bd8b8e7c7f039cff514f62c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fQyb6nm1mpv2IWNHsq4QGw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">你明白了吗？</figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oi"><img src="../Images/493697a20a4bbb730c1744cf06d28346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HloP2RUR9gZMK0rn."/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Jason Rosewell 在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="b48e" class="lr ls jg bd lt lu oj lw lx ly ok ma mb mc ol me mf mg om mi mj mk on mm mn mo bi translated">让它说话-基础</h1><p id="7b4f" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">导航到<strong class="kf jh">闲聊</strong>面板。</p><p id="2a44" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择一个主题，例如<strong class="kf jh">关于代理</strong></p><blockquote class="lc ld le"><p id="a7aa" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><strong class="kf jh">旁注:</strong> <code class="fe od oe of og b">Agent</code>是用作<code class="fe od oe of og b">Chatbot</code>同义词的术语</p></blockquote><p id="1e36" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">填写字段，每行对应一个问题的可能答案。</p><p id="84e6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例子</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oo"><img src="../Images/a0ca34cb9ff748f78298fdbc34ec056e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A53QnLymLnN1QogIaiXgEg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">不要忘记<strong class="bd lt">保存</strong>按钮和<strong class="bd lt">启用</strong>开关</figcaption></figure><p id="9f95" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后点击右上角的<strong class="kf jh">保存</strong>。</p><p id="f0ea" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用正确的面板试试吧！</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div class="gh gi op"><img src="../Images/dcdbf18b8a990923573933cf52702ab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*X8no9uUU8SYJSaSzXNLHwA.png"/></div></figure><p id="aac8" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你的宝宝刚刚说出了他的第一个单词。</p><p id="ac05" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您有一些额外的信息，如:</p><ul class=""><li id="13d7" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated"><strong class="kf jh"> Google Assistant : </strong>一个模拟器，看看你的聊天机器人在Google Assistant中是如何工作的，有专门的面板和非常有用的调试工具。</li><li id="82ad" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">显示JSON按钮:</strong>对于调试非常有用，你已经得到了大量的信息，比如日期、语言、动作、意图等等。</li><li id="f18b" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">Copy CURL :  CURL是一个命令行界面，允许您非常容易地执行http请求。例如，拥有用户界面和令人敬畏的功能的等同物是<strong class="kf jh"> Postman </strong>。</li></ul><p id="5fca" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从现在开始，你应该能让你的聊天机器人说话，并且有个性。如果允许用户实际输入文本来与你的聊天机器人<strong class="kf jh">互动，那么填充闲聊部分是很重要的(例如，在Facebook Messenger中，你可以自由地禁用该功能，这样用户只能触发按钮来使用你的“聊天机器人”</strong>)</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="9c15" class="lr ls jg bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">挖掘一点——网络钩子</h1><p id="c2c0" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">到目前为止，你的聊天机器人是一个巨大的数据库，充满了硬编码的问题-答案字段。</p><p id="b4bb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们的目标是了解如何让它更动态<em class="lb">(这句话让我立刻想起了另一个关于动态网页从HTML/CSS转换到PHP的旧教程)。</em></p><p id="75cd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">除了有一个由你的服务器驱动的智能聊天机器人之外，webhooks总体上是强大的，因为它允许你将任何东西与聊天界面集成在一起。</strong></p><blockquote class="lc ld le"><p id="9e31" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">这就是为什么利用DialogFlow或任何其他大型聊天机器人平台非常方便，因为它处理所有的NLP部分，与Messenger、Whatsapp等应用程序的集成，以及其他你我无疑都不知道的大问题。</p></blockquote><p id="2222" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我解释一下。例如，如果你想在聊天机器人上建立一个电子商务，你可以。</p><p id="2cd7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">场景:</p><ul class=""><li id="346a" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated"><strong class="kf jh">“嗨，我在找最新款的耐克空气马克斯。”</strong></li><li id="ead9" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">(通过webhook执行数据库请求)-&gt;显示最新的Air Max型号。<strong class="kf jh">“你想买吗？”</strong></li><li id="7238" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">“当然！”</strong></li><li id="020d" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">“输入您的信用卡信息bla bla”</strong></li><li id="662a" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">搞定。</strong></li></ul><blockquote class="lc ld le"><p id="d795" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">这个例子只是为了证明我的观点。这样一个应用程序将会引发巨大的安全问题，巨大的UX问题，而且它会扼杀就业机会，因为不会再有广告了。</p></blockquote><h2 id="ba6b" class="oq ls jg bd lt or os dn lx ot ou dp mb ko ov ow mf ks ox oy mj kw oz pa mn pb bi translated">设置</h2><p id="eae8" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">首先，<strong class="kf jh">从左侧菜单导航至“完成”</strong>。</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pc"><img src="../Images/f9198803e6726de920beed0921480371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AL2WQJnMLf9y-Vd5WbTpA.png"/></div></div></figure><blockquote class="ni"><p id="7d40" class="nj nk jg bd nl nm pd pe pf pg ph la dk translated">HTTPS不是一个选项</p></blockquote><p id="6e4f" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated"><strong class="kf jh">相信我，如果你的SSL证书没有在你的服务器上完美配置，DialogFlow就不会工作。</strong>(我在上面丢了几天，以后见)</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pi"><img src="../Images/921d1e43ac894d404efa849eafc652e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IJr2t3HSdkQcsQf8r7dUuQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">记住它</figcaption></figure><p id="0c28" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以在发送的请求中配置基本身份验证和标头，但这不是强制性的。</p><p id="e615" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其次，<strong class="kf jh">定义一个意图</strong>(一个场景)。</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pj"><img src="../Images/6270b8b96454a28b41849dddfab21b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0rxyphLi4BgFZdQeJ0JbFA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">点击<strong class="bd lt">按钮【创建意图】</strong></figcaption></figure><p id="5695" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，您将被重定向到此配置屏幕。</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pk"><img src="../Images/97ceafcebe735a35b656c353c69c82c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZznrP_iB4kNCO1PuPr4Mgg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><strong class="bd lt">填写</strong>你想要的并点击<strong class="bd lt">按钮保存</strong></figcaption></figure><p id="d683" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个部分的简要描述:</p><ul class=""><li id="f26a" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated"><strong class="kf jh">上下文:</strong>允许你为每个用户定义一个生命周期的变量。<a class="ae jd" href="https://dialogflow.com/docs/contexts" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh">文档</strong> </a></li><li id="55c7" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">事件:</strong>那些是谷歌提供的事件。例如，当用户第一次用“开始”按钮开始对话时。<a class="ae jd" href="https://dialogflow.com/docs/events" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh">文档</strong> </a></li><li id="d97b" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">训练短语:</strong>引用工具提示:“你可以从用户那里期待的，会触发意图的短语”</li><li id="423d" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">动作和参数:</strong> <a class="ae jd" href="https://dialogflow.com/docs/actions-and-parameters" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh">文档</strong> </a></li><li id="9cbd" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">响应:</strong>就像闲聊一样，它允许您配置当意图被触发时使用的默认响应。</li><li id="edc7" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh"> Fulfillment : </strong>如果你希望你的webhook被调用，你需要启用的部分。<a class="ae jd" href="https://dialogflow.com/docs/fulfillment" rel="noopener ugc nofollow" target="_blank"> <strong class="kf jh">文档</strong> </a> <strong class="kf jh">。</strong>请注意，如果您的webhook由于某种原因中断，将使用默认响应，您期望DialogFlow有多智能？😃</li></ul><blockquote class="lc ld le"><p id="7982" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">DialogFlow是有据可查的，真的。文档是交互式的，在代码示例之间有内置的聊天工具，可以帮助你理解事情。花时间在上面，值得。</p></blockquote><p id="1651" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我的配置</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pl"><img src="../Images/7d634387142f9f67876806240ce6d04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K7oUToGnlvA_KMWlMVRt4g.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><strong class="bd lt">太棒了，</strong>现在救你的吧</figcaption></figure><p id="ff8b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试一下以防万一。</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/8b8ffd6f2174fd6b867779e779ad56aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*4Boeu_rSAbQz_CnnIAZDdg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">耶！！！</figcaption></figure><h2 id="11a5" class="oq ls jg bd lt or os dn lx ot ou dp mb ko ov ow mf ks ox oy mj kw oz pa mn pb bi translated">编码部分-用超能力扩展你的聊天机器人</h2><blockquote class="ni"><p id="73b4" class="nj nk jg bd nl nm nn no np nq nr la dk translated">这就是你来的目的</p></blockquote><p id="8054" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">我不会去设置SSL证书或在NodeJs中设置express应用程序。<strong class="kf jh">(下一整篇文章都会在上面，这就是为什么)</strong></p><p id="523c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们假设你的服务器在运行，https工作完美，你的webhook路由是:<code class="fe od oe of og b">/webhook</code>。</p><p id="dab2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> DialogFlow在触发webhook时使用JSON数据执行POST请求。</strong></p><p id="ced8" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是你的处理方式。</p><figure class="ny nz oa ob gt is"><div class="bz fp l di"><div class="pn po l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">就这么简单</figcaption></figure><blockquote class="lc ld le"><p id="bc4e" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">注意，也可以使用Google官方发布的NodeJS包:<a class="ae jd" href="https://github.com/dialogflow/dialogflow-nodejs-client-v2" rel="noopener ugc nofollow" target="_blank">https://github.com/dialogflow/dialogflow-nodejs-client-v2</a></p></blockquote><p id="a4e9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你再次测试。</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/45916c22424199657dd234a9d7f96c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*1N2umpVi9u35WgbkTcrF-g.png"/></div></figure><p id="fbd7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果响应不是来自webhook请求，查看这个文档并点击<strong class="kf jh"> Show JSON </strong>:</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pq"><img src="../Images/8f4a082b5d4921420caa1c2e2fe6d916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B6aUBhI3b0VgWxAe7vFhqA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">截图来自<strong class="bd lt">官方文档</strong></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="5b02" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以更进一步，创建自己的定制实体，阅读文档并构建一个大型项目。例如，我使用DialogFlow的第一个项目是一个简化的汽车预订系统(涉及定制实体和意图)。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="ac2f" class="lr ls jg bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">有趣的事实(没那么多)</h1><p id="4bf0" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">你们中的一些人可能已经注意到，在发表这篇文章之前，我花了比平均时间更多的时间，即使我正努力做到每周一篇文章。</p><p id="5f30" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种延迟是由一个可怕的罪犯造成的:SSL。</p><p id="678f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它毁了我的日子。</p><p id="f29b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，好的一面是，它让我想写一篇关于如何在两分钟内设置一个免费的SSL证书的文章，不管你的服务器运行的是什么操作系统。准备好😃</p><p id="7d22" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh"> DialogFlow不允许用户在不使用HTTPS协议的服务器上使用webhooks。</strong></p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pr"><img src="../Images/1750c65056dc6b40e08e7f85f61f3527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KodHUd_ljzZuyE_X."/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">我，搜索一个真正的手写教程使用LetsEncrypt与NodeJs</figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="a02d" class="lr ls jg bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">感谢阅读</h1><p id="c670" class="pw-post-body-paragraph kd ke jg kf b kg mp ki kj kk mq km kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">我希望你喜欢这篇文章。</p><p id="324f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一个是这个系列的第一部分:</p><ul class=""><li id="894c" class="mu mv jg kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated"><strong class="kf jh">英文</strong>:<a class="ae jd" rel="noopener ugc nofollow" target="_blank" href="/creating-a-chatbot-to-book-cinema-shows-part-1-9c13de573a07">https://it next . io/creating-a-chatbot-to-book-cinema-shows-part-1-9c 13 de 573 a 07</a></li><li id="ba50" class="mu mv jg kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated"><strong class="kf jh">西班牙语:</strong><a class="ae jd" href="https://planetachatbot.com/creando-un-chatbot-para-reservar-entradas-de-cine-c0e7c9c5a0f" rel="noopener ugc nofollow" target="_blank">https://planetachatbot . com/creando-un-chatbot-para-reservar-entra das-de-cine-c 0 e 7c 5 a 0 f</a></li></ul><p id="6136" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于所有可能感到疑惑的人:<strong class="kf jh">这是本系列的第二步，也是最后一步。我正努力让我的内容易于理解，并为初学者和早期高级开发人员重用。</strong></p><p id="b2cd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">不过，我很乐意更进一步，与大家互动，围绕聊天机器人、安全等话题展开辩论和讨论。</strong></p><p id="143c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像往常一样，请随时通过<strong class="kf jh">David . mell ul @ outlook . fr</strong>联系我</p><figure class="ny nz oa ob gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ps"><img src="../Images/e1a7f8e6e8185698f99aa9d91c9e0aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AlTMZ2Ch5-4mDw0V."/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com/@takeshi2?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">吴怡</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的“白色马克杯中的卡布奇诺，白色泡沫艺术在木桌上”</figcaption></figure></div></div>    
</body>
</html>