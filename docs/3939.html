<html>
<head>
<title>Android Notification Styling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android通知样式</h1>
<blockquote>原文：<a href="https://itnext.io/android-notification-styling-cc6b0bb86021?source=collection_archive---------2-----------------------#2020-03-28">https://itnext.io/android-notification-styling-cc6b0bb86021?source=collection_archive---------2-----------------------#2020-03-28</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div class="gi gj jr"><img src="../Images/42c37a608deecafdebbf3e6668f8cbc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*kOlhlrKg6SetsTqMf20EeQ.png"/></div></figure><p id="9e7e" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi kw translated"><span class="l kx ky kz bm la lb lc ld le di"> N </span>通知是通知用户新信息的常用工具。例如，WhatsApp消息通知、未接来电通知和Google Play应用程序更新/下载通知，应有尽有。</p><p id="59d3" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">开发者希望使用不同通知风格来提供更加用户友好的UI / UX。例如，新闻应用程序希望使用<code class="fe lf lg lh li b"><a class="ae lj" rel="noopener ugc nofollow" target="_blank" href="/android-notification-bigtextstyle-bd35f7530eae">BigTextStyle</a></code>来显示新闻的简短摘要，消息应用程序希望使用<code class="fe lf lg lh li b">MessagingStyle</code>来显示对话，照片共享应用程序希望使用<code class="fe lf lg lh li b"><a class="ae lj" rel="noopener ugc nofollow" target="_blank" href="/android-notification-bigpicturestyle-1f293e6cabaf">BigPictureStyle</a></code>来显示上传的图像，等等。</p><figure class="ll lm ln lo gu jv gi gj paragraph-image"><div class="gi gj lk"><img src="../Images/5a27ee5ea646a5427000afd8a934f4cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*yBPxXL72ty2snY2reNF7HQ.png"/></div></figure><p id="276f" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">然而，市场上的大多数应用程序并不显示通知行中的文本。在我看来，属性化的文本比简单的纯文本更能吸引用户！🎉</p><p id="6d0c" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">根据<a class="ae lj" href="https://developer.android.com/training/notify-user/expanded#large-style" rel="noopener ugc nofollow" target="_blank">官方文档</a>，通知文本可以通过HTML标签进行样式化。除了记录的方法之外，文本也可以用<code class="fe lf lg lh li b">Spanned</code>进行样式化，因为所有设置文本的功能都接受<code class="fe lf lg lh li b">CharSequence</code>作为参数。在这篇文章中，我将向你介绍所有的细节和技巧。</p></div><div class="ab cl lp lq hy lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="in io ip iq ir"><h1 id="afd3" class="lw lx iu bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">样式通知文本</h1><p id="6c73" class="pw-post-body-paragraph jy jz iu ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv in bi translated">下面是可以应用于通知文本的样式的示例。</p><figure class="ll lm ln lo gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gi gj mz"><img src="../Images/bbdbfab59366f5fe387ed6e2090be7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i0lzvZaYUDFR4nF3.png"/></div></div><figcaption class="ne nf gk gi gj ng nh bd b be z dk translated">示例截图</figcaption></figure><h2 id="3860" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">方法1) HTML标签</h2><figure class="ll lm ln lo gu jv"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="ac24" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">HTML标签主要用于网页布局，由开始标签和结束标签组成。就像Android布局文件中使用的XML一样。但是，通知样式并不支持所有的HTML标记。在所有支持的HTML标签中，我选择了9个常用标签进行演示:</p><figure class="ll lm ln lo gu jv"><div class="bz fq l di"><div class="nu nv l"/></div></figure><figure class="ll lm ln lo gu jv gi gj paragraph-image"><div class="gi gj nw"><img src="../Images/1c0713c3e6257dce0348c7db7c0dcfea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*uw9yrEu1XkArQpMS.png"/></div></figure><p id="0817" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">如果将上述代码直接输入到类似<code class="fe lf lg lh li b">setContentText(text: CharSequence)</code>的功能中，Android <strong class="ka iv">无法将上述代码识别为HTML样式的文本。将显示纯文本。见上面截图。</strong></p><figure class="ll lm ln lo gu jv"><div class="bz fq l di"><div class="nu nv l"/></div></figure><figure class="ll lm ln lo gu jv gi gj paragraph-image"><div class="gi gj nw"><img src="../Images/ea46099f3accc4bf06888c9a6a0f2891.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*xQ2KRTX4kSmjyKzD.png"/></div></figure><p id="d365" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">为了让Android知道它是一个HTML样式的文本，必须使用一个<code class="fe lf lg lh li b">Html</code>解析器函数<code class="fe lf lg lh li b">fromHtml(source: String, flag: Int)</code>将字符串资源转换成一个<code class="fe lf lg lh li b">Spanned</code>对象，该对象表示一个带有标记的文本。</p><h1 id="4cce" class="lw lx iu bd ly lz nx mb mc md ny mf mg mh nz mj mk ml oa mn mo mp ob mr ms mt bi translated">方法2:跨区</h1><p id="ee79" class="pw-post-body-paragraph jy jz iu ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv in bi translated"><code class="fe lf lg lh li b">Spanned</code>是具有指定范围的标记文本的接口。如果你想了解更多关于Android官方<code class="fe lf lg lh li b">Spans</code>的信息，请阅读下面这篇文章。</p><div class="oc od gq gs oe of"><a href="https://medium.com/@myrickchow32/android-official-spans-all-in-one-6d23167b1bb9" rel="noopener follow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">安卓官方横跨一体机</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">跨度定义每个字符或整个段落的文本样式。大约有30个官方跨度。让我想想…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot jw of"/></div></div></a></div><p id="ac90" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">相对来说，这比使用HTML标签更复杂，因为<code class="fe lf lg lh li b">Spanned</code>范围必须在运行时定义。下面是实现上述HTML代码相同结果的示例代码:</p><figure class="ll lm ln lo gu jv"><div class="bz fq l di"><div class="nu nv l"/></div></figure><p id="eaaa" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">首先，<code class="fe lf lg lh li b">String</code>不能被直接样式化，因此我们需要构造一个<code class="fe lf lg lh li b">SpannableString</code>对象来设置样式，它实现了<code class="fe lf lg lh li b">Spanned</code>。不同的风格由不同的<code class="fe lf lg lh li b">Span</code>类来代表，如<code class="fe lf lg lh li b">StyleSpan</code>、<code class="fe lf lg lh li b">TypefaceSpan</code>、<code class="fe lf lg lh li b">ForegroundSpan</code>等。</p><p id="a1b3" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">第二和第三个参数定义了<code class="fe lf lg lh li b">Span</code>范围的开始和结束索引。开始索引是包含性的，结束索引是排他性的。</p><p id="b56d" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">最后一个参数是一个标志，显示在设置<code class="fe lf lg lh li b">Spanned</code>后如何处理新插入的文本。一般我们可以放一个<code class="fe lf lg lh li b">0</code>来忽略这个标志。</p><p id="37da" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">有关可用<code class="fe lf lg lh li b">Spanned</code>的完整列表，请参考以下官方文档:</p><div class="oc od gq gs oe of"><a href="https://developer.android.com/reference/android/text/style/package-summary" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">android.text.style | Android开发者</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">AccessibilityServiceMagnificationController . OnMagnificationChangedListener</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">developer.android.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot jw of"/></div></div></a></div></div><div class="ab cl lp lq hy lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="in io ip iq ir"><h1 id="adcb" class="lw lx iu bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">摘要</h1><ol class=""><li id="cd6c" class="ov ow iu ka b kb mu kf mv kj ox kn oy kr oz kv pa pb pc pd bi translated">通知中的所有文本都可以通过HTML标签或<code class="fe lf lg lh li b">Spanned</code>来设置样式。</li><li id="ef8d" class="ov ow iu ka b kb pe kf pf kj pg kn ph kr pi kv pa pb pc pd bi translated">Android支持有限的HTML标签。</li><li id="f91e" class="ov ow iu ka b kb pe kf pf kj pg kn ph kr pi kv pa pb pc pd bi translated"><code class="fe lf lg lh li b">Spanned</code>比HTML标签相对更复杂，因为文本范围必须在运行时定义。</li></ol></div><div class="ab cl lp lq hy lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="in io ip iq ir"><h1 id="f7d2" class="lw lx iu bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">想了解更多关于Android通知的信息:</h1><h2 id="548e" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">1.自定义通知</h2><div class="oc od gq gs oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/android-custom-notification-in-6-mins-c2e7e2ddadab"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">Android自定义通知在6分钟内完成</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">定制通知可以包含比默认通知样式提供的更多奇特的小部件。让我们点击…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">itnext.io</p></div></div><div class="oo l"><div class="pj l oq or os oo ot jw of"/></div></div></a></div><p id="8ee5" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated"><strong class="ka iv"> 2。安卓通知一体机</strong></p><div class="oc od gq gs oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/android-notification-all-in-one-8df3e1218e0e"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">安卓通知一体机</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">在21世纪，通知已经成为每个人日常生活的一部分。作为一个Android开发者，最好多了解一些…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">itnext.io</p></div></div><div class="oo l"><div class="pk l oq or os oo ot jw of"/></div></div></a></div><p id="ef88" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">3.BigTextSytle通知</p><div class="oc od gq gs oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/android-notification-bigtextstyle-bd35f7530eae"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">Android通知BigTextStyle尽可能深</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">通知是普通app常见的。当内容太长时，总是使用BigTextStyle。让我们看看技巧和…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">itnext.io</p></div></div><div class="oo l"><div class="pl l oq or os oo ot jw of"/></div></div></a></div><h2 id="ce21" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">4.BigPictureStyleNotification</h2><div class="oc od gq gs oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/android-notification-bigpicturestyle-1f293e6cabaf"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">Android通知BigPictureStyle尽可能深</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">当您希望在通知行显示图像时，可以使用BigPictureStyle通知。这里有一些提示和…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">itnext.io</p></div></div><div class="oo l"><div class="pm l oq or os oo ot jw of"/></div></div></a></div><h2 id="860f" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">5.InboxStyleNotification</h2><div class="oc od gq gs oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/android-inboxstyle-notification-as-deep-as-possible-4d74c0c725f1"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">尽可能深入的Android收件箱通知</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">InboxStyle通知用于显示收到的电子邮件的片段。我发现一个文档问题。让我们看一看…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">itnext.io</p></div></div><div class="oo l"><div class="pn l oq or os oo ot jw of"/></div></div></a></div></div><div class="ab cl lp lq hy lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="in io ip iq ir"><h1 id="638d" class="lw lx iu bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">参考</h1><h2 id="a408" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">1.正式通知文件</h2><div class="oc od gq gs oe of"><a href="https://developer.android.com/training/notify-user/build-notification" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">创建通知| Android开发者</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">当您的应用程序未被使用时，通知会提供有关该应用程序中事件的简短、及时的信息。本页教你…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">developer.android.com</p></div></div><div class="oo l"><div class="po l oq or os oo ot jw of"/></div></div></a></div><h2 id="4a99" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">2.用HTML设计样式</h2><div class="oc od gq gs oe of"><a href="https://developer.android.com/guide/topics/resources/string-resource#StylingWithHTML" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">字符串资源| Android开发者</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">字符串资源通过可选的文本样式和格式为应用程序提供文本字符串。有三个…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">developer.android.com</p></div></div><div class="oo l"><div class="pp l oq or os oo ot jw of"/></div></div></a></div><h2 id="19d1" class="ni lx iu bd ly nj nk dn mc nl nm dp mg kj nn no mk kn np nq mo kr nr ns ms nt bi translated">3.跨区列表</h2><div class="oc od gq gs oe of"><a href="https://developer.android.com/reference/android/text/style/package-summary" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd iv gz z fq ok fs ft ol fv fx it bi translated">android.text.style | Android开发者</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">AccessibilityServiceMagnificationController . OnMagnificationChangedListener</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">developer.android.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot jw of"/></div></div></a></div></div><div class="ab cl lp lq hy lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="in io ip iq ir"><p id="5239" class="pw-post-body-paragraph jy jz iu ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv in bi translated">欢迎您通过<a class="ae lj" href="https://twitter.com/myrick_chow" rel="noopener ugc nofollow" target="_blank">Twitter @ my rik _ chow</a>关注我，了解更多信息和文章。感谢您阅读这篇文章。祝您愉快！😄</p></div></div>    
</body>
</html>