<html>
<head>
<title>Collections State Management Service for Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular的集合状态管理服务</h1>
<blockquote>原文：<a href="https://itnext.io/collection-service-for-angular-d0b64bae9c20?source=collection_archive---------1-----------------------#2022-12-04">https://itnext.io/collection-service-for-angular-d0b64bae9c20?source=collection_archive---------1-----------------------#2022-12-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="94ff" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">在这篇文章中，我将向你展示如何使用</em><a class="ae kg" href="https://github.com/e-oz/ngx-collection" rel="noopener ugc nofollow" target="_blank"><em class="kf">ngx-collection</em></a><em class="kf">库，以及为什么你可能想要这样做。</em></h2></div><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="gh gi kh"><img src="../Images/43ffb75971f687fbeaa5854da84ecc16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LfajOtlLGbzdRdfB"/></div></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk translated">《朗姆酒街》，弗雷德里克·贾德·沃，1922年</figcaption></figure><h1 id="fd30" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">目的</h1><p id="374c" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">每个web应用程序都有一些列表，或者在内部使用一些实体/项目列表。因此，对于不同的web框架，有多个库可以提供帮助。与ngx-collection相比，它们既有区别又有相似之处，请选择您认为更适合和更舒适的产品:)</p><p id="9f7a" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">集合服务将帮助您操作集合:创建一个项目集合，并安全地更新一个或多个项目(不改变它们)。</p><p id="adf4" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">此外，您将获得一个视图模型，可用于监控收集状态:</p><ul class=""><li id="8ee1" class="mq mr iq lr b ls ml lv mm ly ms mc mt mg mu mk mv mw mx my bi translated"><strong class="lr ir">正在读取</strong>(当前正在运行某个请求以替换集合中的所有项目)</li><li id="1320" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated"><strong class="lr ir">正在创建</strong>(正在运行向集合添加新项目的请求)</li><li id="333d" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated"><strong class="lr ir">正在更新</strong></li><li id="761d" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated"><strong class="lr ir">正在删除</strong></li><li id="a3f2" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated"><strong class="lr ir">正在更改</strong>(某些项目当前正在更新或删除)</li><li id="78e5" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated"><strong class="lr ir">正在保存</strong>(当前正在更新或创建一些项目)</li><li id="03ee" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated"><strong class="lr ir">正在处理</strong>(至少有一个正在运行的请求)</li></ul><p id="48c0" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">此外，这个视图还有一个项目列表、它们的状态以及一些其他有用的信息。</p><p id="6421" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">使用这个视图模型和<strong class="lr ir">异步</strong>管道，您可以轻松地修改您的视图，以反映与集合相关的所有过程——微调器、按钮的“禁用”状态、卡片的“展开”/“折叠”状态、项目的“聚焦”/“选定”状态。</p><h1 id="2630" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">利益</h1><p id="5472" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">✅的每一次突变都是异步的:</p><ul class=""><li id="5170" class="mq mr iq lr b ls ml lv mm ly ms mc mt mg mu mk mv mw mx my bi translated">使用OnPush策略处理反应式应用程序；</li><li id="ee91" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">在具有默认更改检测策略的组件中工作；</li><li id="b931" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">可以仅与“异步”管道和subscribe()一起使用，也可以与某些存储一起使用。</li></ul><p id="9be5" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">✅服务公司并不固执己见:</p><ul class=""><li id="9548" class="mq mr iq lr b ls ml lv mm ly ms mc mt mg mu mk mv mw mx my bi translated">它不会规定您应该如何与您的API或其他数据源进行通信；</li><li id="1a3a" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">您决定如何运行和取消您的请求:每个变异方法都返回一个可观察值，因此您可以决定如何编排它们:switchMap、mergeMap、concatMap、forkJoin或其他；</li><li id="3a9d" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">数据源可以是同步的(用“rxjs/of”就行)。</li></ul><p id="6a99" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">✅安全保证:</p><ul class=""><li id="52d1" class="mq mr iq lr b ls ml lv mm ly ms mc mt mg mu mk mv mw mx my bi translated">100%不可变；</li><li id="39bb" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">防止重复；</li><li id="c079" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">错误和异常将被正确处理；</li><li id="79cb" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">严格类型化—高级类型检查和代码完成；</li></ul><h1 id="6918" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">收藏品</h1><p id="ca40" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">假设你是一个艺术收藏家，你需要一个app给你喜欢的画作打分。</p><p id="720b" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">我们可以像这样创造一个新系列:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="e380" class="nj ky iq nf b be nk nl l nm nn"><br/>const paintingsCollection = inject(CollectionService&lt;Painting&gt;({<br/>   comparatorFields: ['url']<br/>});</span></pre><p id="9cfc" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">在这里，您可以注意到收集服务最重要的事情:它需要知道可用于比较对象并声明它们相等的字段。</p><p id="4f94" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">因为在每一次变异中，我们都在重新创建列表(为了有一个不可变的集合)，通常的' === '(通过引用比较对象)是不够的。</p><p id="26cf" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">内置的比较器将允许您使用一个或多个字段、复合字段或嵌套字段。或者，您可以定义您的函数或类，并将其用作比较器。</p><h1 id="55b9" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">数据源</h1><p id="ac45" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">集合服务只有一个职责:操作集合而不修改项目本身。</p><p id="15dd" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">为了提供这些项目，您需要一些服务——可以是使用Angular HttpClient的小型服务，或者是一些具有缓存、失效、交叉更新和其他功能的复杂API客户端——收集服务将使用它们提供的可观察对象。Collection Service中没有用于与数据提供者通信的内置工具，它为您提供了实现的绝对自由和组合不同工具的充分灵活性。</p><p id="ca8b" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">在我们的示例应用程序中，我们将使用一个模拟API客户端行为的简单服务:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="48f1" class="nj ky iq nf b be nk nl l nm nn">export class PaintingsService {<br/><br/>  getPaintings(): Observable&lt;Painting[]&gt; {<br/>    return timer(1000).pipe(<br/>      map(() =&gt;<br/>        [<br/>          {<br/>            url: '...',<br/>            title: 'A Walk at Twilight',<br/>            artist: 'Vincent van Gogh',<br/>            date: '1889-1890',<br/>          },<br/>          {<br/>            url: '...',<br/>            title: 'Siesta',<br/>            artist: 'Joaquín Sorolla',<br/>            date: '1911',<br/>          },<br/>  // ...<br/>        ]  // shuffle<br/>          .map((value) =&gt; ({ value, sort: Math.random() }))<br/>          .sort((a, b) =&gt; a.sort - b.sort)<br/>          .map(({ value }) =&gt; value)<br/>      )<br/>    );<br/>  }<br/><br/>  ratePainting(painting: Painting, rate: number): Observable&lt;Painting&gt; {<br/>    return timer(2000).pipe(<br/>      map(() =&gt; ({<br/>        ...painting,<br/>        rate,<br/>      }))<br/>    );<br/>  }<br/>}</span></pre><p id="127d" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">其中<code class="fe no np nq nf b">Painting</code>模型具有这样的结构:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="9096" class="nj ky iq nf b be nk nl l nm nn">export type Painting = {<br/>  readonly url: string;<br/>  readonly title: string;<br/>  readonly artist: string;<br/>  readonly date: string;<br/>  readonly rate?: number;<br/>};</span></pre><p id="d65c" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">所有的字段都是<code class="fe no np nq nf b">readonly</code>以确保我们不会意外地改变我们的条目。</p><h1 id="1adf" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">成分</h1><p id="875f" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">现在，我们将使用我们的集合:组件，负责呈现和更新项目。</p><p id="2568" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">在这个实现中，我使用NgRx组件存储作为所有组件逻辑的位置。这不是必需的——您可以使用常规订阅来代替，但这是我推荐的做法。让我们不要转移注意力去讨论这背后的推理；)</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="ade0" class="nj ky iq nf b be nk nl l nm nn">export interface PaintingsListState {}<br/><br/>@Injectable()<br/>export class PaintingsListStore extends ComponentStore&lt;PaintingsListState&gt; {<br/>  readonly collection = inject(PaintingsCollection);<br/><br/>  constructor(private readonly api: PaintingsService) {<br/>    super({});<br/>    this.load();<br/>  }<br/><br/>  private readonly load = this.effect((_) =&gt; _.pipe(<br/>      switchMap(() =&gt; this.collection.read({<br/>          request: this.api.getPaintings(),<br/>        })<br/>      )<br/>    )<br/>  );<br/><br/>  readonly rate = this.effect&lt;{ painting: Painting; rate: number }&gt;((_) =&gt;<br/>    _.pipe(<br/>      switchMap(({ painting, rate }) =&gt;<br/>        this.collection.update({<br/>          request: this.api.ratePainting(painting, rate),<br/>          item: painting,<br/>        })<br/>      )<br/>    )<br/>  );<br/><br/>  readonly remove = this.effect&lt;Painting&gt;((_) =&gt;_.pipe(<br/>      mergeMap((painting) =&gt;<br/>        this.collection.delete({<br/>          request: timer(1000),<br/>          item: painting,<br/>        })<br/>      )<br/>    )<br/>  );<br/>}</span></pre><p id="7b2e" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">让我们看看我们的事件处理程序。<br/>首先是<code class="fe no np nq nf b">load</code>:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="fbba" class="nj ky iq nf b be nk nl l nm nn">load = this.effect((_) =&gt; _.pipe(<br/>      switchMap(() =&gt; this.collection.read({<br/>          request: this.api.getPaintings(),<br/>      })<br/>)));</span></pre><p id="a48b" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">当<code class="fe no np nq nf b">load</code>事件发生时，我们将调用<code class="fe no np nq nf b">collection.read()</code>并使用<code class="fe no np nq nf b">api.getPaintings()</code>请求。</p><p id="8cd7" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">然后是<code class="fe no np nq nf b">rate</code>:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="c61a" class="nj ky iq nf b be nk nl l nm nn">rate = this.effect&lt;{ painting: Painting; rate: number }&gt;((_) =&gt;_.pipe(<br/>      switchMap(({ painting, rate }) =&gt;<br/>        this.collection.update({<br/>          request: this.api.ratePainting(painting, rate),<br/>          item: painting,<br/>      })<br/>)));</span></pre><p id="0c3e" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">这里我们使用输入参数，<code class="fe no np nq nf b">painting</code>和<code class="fe no np nq nf b">rate</code>。当一个事件发生时，我们调用<code class="fe no np nq nf b">collection.update()</code>，请求是<code class="fe no np nq nf b">api.ratePainting()</code>，这里我们需要另一个参数:<code class="fe no np nq nf b">item</code>。<br/>它应该是我们想要更新的项目(或者只是具有相同主键的任何对象)。</p><p id="69bd" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">通过使用<code class="fe no np nq nf b">switchMap</code>，我们将取消当前正在运行的<code class="fe no np nq nf b">rate</code>请求(如果现在有正在运行的请求)，因此只有最后一个<code class="fe no np nq nf b">rate</code>将被应用。收集服务将正确处理它，因为每个动作都是异步的。</p><p id="33bf" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">这里最后一个是<code class="fe no np nq nf b">remove</code>:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="1993" class="nj ky iq nf b be nk nl l nm nn">remove = this.effect&lt;Painting&gt;((_) =&gt;_.pipe(<br/>      mergeMap((painting) =&gt;<br/>        this.collection.delete({<br/>          request: timer(1000),<br/>          item: painting,<br/>      })<br/>)));</span></pre><p id="312f" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">和<code class="fe no np nq nf b">rate</code>只有两点不同:<br/> 1。我们使用<code class="fe no np nq nf b">mergeMap</code>是因为我们允许并行删除项目。<br/> 2。我们使用<code class="fe no np nq nf b">timer</code>作为<code class="fe no np nq nf b">request</code>，因为我们的API客户端没有删除项目的方法(毕竟这只是一个模仿)。</p><p id="a76f" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">我们的组件本身将会很小:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="a301" class="nj ky iq nf b be nk nl l nm nn">@Component({<br/>  selector: 'paintings-list',<br/>  templateUrl: './paintings-list.component.html',<br/>  styleUrls: ['./paintings-list.component.scss'],<br/>  changeDetection: ChangeDetectionStrategy.OnPush,<br/>  standalone: true,<br/>  imports: [<br/>    CommonModule,<br/>    // ...<br/>  ],<br/>  providers: [PaintingsListStore],<br/>})<br/>export class PaintingsListComponent {<br/>  protected readonly store = inject(PaintingsListStore);<br/><br/>  protected readonly vm$ = this.store.collection.getViewModel();<br/>}</span></pre><p id="1ff6" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">就是这样！<br/>只有两个字段:商店和视图模型。</p><p id="308c" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">在模板中，我们将呈现一个列表、一个旋转器、一幅画、星级和一个“删除”按钮。为了简洁起见，去掉了一些细节。</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="cd6b" class="nj ky iq nf b be nk nl l nm nn">&lt;ng-container *ngIf="vm$ | async as $"&gt;<br/><br/>  &lt;mat-card class="spinner" *ngIf="$.isReading"&gt;<br/>    &lt;mat-spinner&gt;&lt;/mat-spinner&gt;<br/>  &lt;/mat-card&gt;<br/><br/>  &lt;mat-accordion&gt;<br/>    &lt;mat-expansion-panel<br/>      *ngFor="<br/>        let item of $.items;<br/>        trackBy: store.collection.getTrackByFieldFn('url')<br/>      "<br/>    &gt;<br/>      &lt;mat-expansion-panel-header&gt;<br/>        &lt;mat-panel-title&gt;{{ item.title }}&lt;/mat-panel-title&gt;<br/>      &lt;/mat-expansion-panel-header&gt;<br/><br/>      &lt;ng-template matExpansionPanelContent&gt;<br/>        &lt;mat-card&gt;<br/>          &lt;mat-card-header&gt;<br/>            &lt;mat-card-title&gt;{{ item.artist }}&lt;/mat-card-title&gt;<br/>            &lt;mat-card-subtitle&gt;{{ item.date }}&lt;/mat-card-subtitle&gt;<br/>          &lt;/mat-card-header&gt;<br/><br/>          &lt;img mat-card-image <br/>               [src]="item.url" <br/>               class="frame" <br/>               [ngClass]="{'mutating': $.isMutating}"/&gt;<br/>        &lt;/mat-card&gt;<br/><br/>      &lt;/ng-template&gt;<br/><br/>      &lt;mat-action-row class="actions"&gt;<br/>        &lt;div class="stars" <br/>             [ngClass]="{'spin': $.isUpdating}"<br/>         &gt;        <br/>          &lt;mat-icon (click)="store.rate({ painting: item, rate: 1 })"&gt;<br/>            {{<br/>             item.rate ? 'star' : 'star_border'<br/>            }}<br/>          &lt;/mat-icon&gt;<br/>        &lt;/div&gt;<br/><br/>        &lt;button <br/>          mat-mini-fab <br/>          color="warn" <br/>          [disabled]="$.isDeleting"<br/>          (click)="store.remove(item)"<br/>        &gt;<br/>            &lt;mat-icon&gt;delete&lt;/mat-icon&gt;<br/>        &lt;/button&gt;<br/>      &lt;/mat-action-row&gt;<br/>    &lt;/mat-expansion-panel&gt;<br/>  &lt;/mat-accordion&gt;<br/>&lt;/ng-container&gt;</span></pre><p id="d5fd" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">添加一些样式，我们的应用程序就准备好了:<a class="ae kg" href="https://stackblitz.com/edit/ngx-collection-example?file=src%2Fapp%2Fcollections%2Fpaintings.collection.ts" rel="noopener ugc nofollow" target="_blank"> StackBlitz </a> 🖼️</p><p id="0f2d" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">你可以注意到突出动作的视觉效果。<br/>“删除”按钮可以调用一次，因此在项目被删除时，该按钮被显示为“禁用”。<br/>可以无限制地点击星星，因此星星不会被禁用——只会保存最后一个评级，而之前的请求将被取消。</p><h1 id="4830" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">共享收藏</h1><p id="8a6e" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">这个库的设计原则之一是:使用集合服务应该很容易创建简单的应用程序和组件，但它也应该可以用于任何复杂程度的应用程序和组件。</p><p id="646f" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">使用<a class="ae kg" href="https://github.com/e-oz/ngx-collection" rel="noopener ugc nofollow" target="_blank"> ngx-collection </a>，您可以创建共享集合——如果您的一个组件将更新一个项目，所有其他组件将立即在页面上反映它。为此，您只需要修改“可注入的”装饰参数:</p><pre class="ki kj kk kl gt ne nf ng bn nh ni bi"><span id="b968" class="nj ky iq nf b be nk nl l nm nn">@Injectable({ providedIn: 'root' })<br/>export class PaintingsCollection extends CollectionService&lt;Painting&gt; {<br/>  constructor() {<br/>    super({<br/>      comparatorFields: ['url'],<br/>    });<br/>  }<br/>}</span></pre><h1 id="a82c" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">文档和API</h1><p id="ebdc" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">收集服务有多种方法，但要开始使用它，您只需要知道其中的4种方法:</p><ul class=""><li id="2609" class="mq mr iq lr b ls ml lv mm ly ms mc mt mg mu mk mv mw mx my bi translated">创造</li><li id="6b41" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">阅读</li><li id="c616" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">更新</li><li id="935c" class="mq mr iq lr b ls mz lv na ly nb mc nc mg nd mk mv mw mx my bi translated">删除</li></ul><p id="3294" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">就是这样！</p><p id="7732" class="pw-post-body-paragraph lp lq iq lr b ls ml jr lu lv mm ju lx ly mn ma mb mc mo me mf mg mp mi mj mk ij bi translated">其他方法在这里只是作为附加的实用程序和助手。<br/>完整的API文档可以在资源库(GitHub) 中找到<a class="ae kg" href="https://github.com/e-oz/ngx-collection#readme" rel="noopener ugc nofollow" target="_blank">——它应该回答你所有关于细节的问题，本文中没有解释。</a></p><h1 id="1d1b" class="kx ky iq bd kz la lb lc ld le lf lg lh jw li jx lj jz lk ka ll kc lm kd ln lo bi translated">工具</h1><p id="5a12" class="pw-post-body-paragraph lp lq iq lr b ls lt jr lu lv lw ju lx ly lz ma mb mc md me mf mg mh mi mj mk ij bi translated">作为额外的奖励(不要求你使用或学习)，你可以找到管道和助手，如<code class="fe no np nq nf b">getTrackByFieldFn</code>或<code class="fe no np nq nf b">|itemStatus</code>管道。</p><blockquote class="nr"><p id="34b9" class="ns nt iq bd nu nv nw nx ny nz oa mk dk translated">如果这个库对你有用，我会很高兴的！</p></blockquote></div></div>    
</body>
</html>