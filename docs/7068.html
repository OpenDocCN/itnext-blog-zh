<html>
<head>
<title>Dynamically Theme Your Flutter App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动态主题你的颤振应用</h1>
<blockquote>原文：<a href="https://itnext.io/dynamically-theme-your-flutter-app-59da5037f5df?source=collection_archive---------0-----------------------#2022-05-31">https://itnext.io/dynamically-theme-your-flutter-app-59da5037f5df?source=collection_archive---------0-----------------------#2022-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dbaaeca5125baeb5b8285c26e39785ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lG3c7oX6Rce2oNf-"/></div></div></figure><p id="3311" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如你所知，Flutter最近放弃了它的主要版本更新，即Flutter 3.0。它带来了很多变化，其中之一是我等待了很久的Material You，它在Google IO 2021上正式亮相。不知道你是什么料的，看看这个<a class="ae kw" href="https://material.io/blog/announcing-material-you" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="0fd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自从推出以来，Material You吸引我的一个特点是<a class="ae kw" href="https://m3.material.io/m3/pages/dynamic-color/user-generated-color" rel="noopener ugc nofollow" target="_blank">用户生成方案(UGS) </a>。简单来说，UGS是一种从用户的壁纸中生成由谷歌设计和定义的配色方案的机制。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/626d5113e553e3687c7843ca0c2cf73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/0*61H3Xq84wAJKMn16"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">来源:材料设计3</figcaption></figure><p id="8071" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，每次用户更改壁纸时，都会从中提取一种颜色来生成一个配色方案，用于为我们的应用程序着色。所以每换一个新壁纸，我们app的主题都会变，是不是很神奇？</p><p id="f65c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是的，但唯一需要注意的是，这项功能只能在运行Android S或更高版本的设备上使用。</p><p id="cecf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以让我们在我们的Flutter应用程序中实现这个功能。</p><h2 id="796d" class="lg lh iq bd li lj lk dn ll lm ln dp lo kj lp lq lr kn ls lt lu kr lv lw lx ly bi translated">颤振中动态颜色的实现</h2><p id="ddc4" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">所以我们先导入<a class="ae kw" href="https://pub.dev/packages/dynamic_color" rel="noopener ugc nofollow" target="_blank"> dynamic_color </a>，material.io的官方包</p><p id="56c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个包有一些算法，与操作系统交谈，以产生一个配色方案。</p><p id="081c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它有一个返回明暗配色方案的生成器方法。</p><p id="b069" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，在我们来自flutter的样板代码中，让我们用<strong class="ka ir"><em class="me">dynamic color builder</em></strong>包装MaterialApp小部件</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/1022d262a0bf9952249c922c6ff2b952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1GwWckQGErchFOYWG34Og.png"/></div></div></figure><p id="eb23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意ColorScheme可以是null，这是因为这个功能只针对Android S+，所以如果任何设备没有它，它就会有一个null值。</p><p id="b79f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们使用这些方案来应用到我们的应用程序的主题。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/d0953fa2d2ad6b3c625b42330ba17da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0jfdoTuWpIzSKHACiV24w.png"/></div></div></figure><p id="6d5e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">tada，你已经成功地实现了动态颜色，想看看它看起来怎么样吗？</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/2a40f62393cb2f72bb901e7b4e03f198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_BKVSSWIh11S6suPEUkbg.jpeg"/></div></div></figure><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/b554ccf5d9b16b46a0de1dbd5f3f95ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QvXiTkFwv7JcfHl-DW5Dyw.jpeg"/></div></div></figure><p id="7470" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我非常喜欢这个功能</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="6d14" class="lg lh iq bd li lj lk dn ll lm ln dp lo kj lp lq lr kn ls lt lu kr lv lw lx ly bi translated">奖金</h2><p id="7fd3" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">这只是一个演示，这不是我定义主题的方式。我没有在main.dart文件本身定义主题。此外，UGS不能在低于Android S的设备上运行，因此，它会在这样的设备上抛出一个空错误，破坏我们的应用程序，所以我们需要修复它。</p><p id="8e20" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一个名为AppTheme的自定义类，它有两个静态方法，分别叫做<em class="me"> lightTheme </em>和<em class="me"> darkTheme，</em>，并且都返回<em class="me"> ThemeData，</em>此外，这两个方法都需要c <em class="me"> olorScheme参数。</em></p><p id="a0de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在给你做材料之前，我们习惯于定义自己的配色方案，对吗？我们在这里也会这样做。再做一些修改，这是我们最终代码的样子。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/6864e11f6bd42575cb9402364b3d01d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wygO-2iETSbTecC0oR2OrQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">app _主题. dart</figcaption></figure><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/3f42d08e62d118499e6fefafba2b14fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7bgzyliIFhqveIP1c7iWA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">主.镖</figcaption></figure><p id="79e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以基本上我做的是<em class="me">app theme . light theme(color scheme？lightColorScheme) </em>从DynamicColorBuilder请求配色方案，如果配色方案为空，我将返回自己的自定义配色方案。</p><p id="7c39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里我使用了<em class="me"> ColorScheme.fromSeed() </em>的方法。这是Flutter 3.0中推出的一种新方法，它采用单一颜色并从中生成配色方案。向制作这个的人致敬🍻</p><p id="c2eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是我如何为我的Flutter应用程序构建主题。我很想得到这方面的反馈！</p><p id="a195" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，我们成功地实现了动态配色方案，然后我们处理了可能导致应用程序崩溃的错误。</p><p id="6598" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您阅读这篇文章！😍</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="4e6a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">哦，是的，如果你已经通读了所有这些，这是给你的一份礼物😁：</p><h2 id="2c90" class="lg lh iq bd li lj lk dn ll lm ln dp lo kj lp lq lr kn ls lt lu kr lv lw lx ly bi translated">重要链接:</h2><ol class=""><li id="94ee" class="ms mt iq ka b kb lz kf ma kj mu kn mv kr mw kv mx my mz na bi translated"><strong class="ka ir"> GitHub资源库</strong>—<br/><a class="ae kw" href="https://github.com/RaghavTheGreat1/material_you.git" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/raghavthegreat 1/dynamic-color-flutter . git</a></li><li id="6913" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated"><strong class="ka ir">材料三</strong>——<a class="ae kw" href="https://m3.material.io/" rel="noopener ugc nofollow" target="_blank">https://m3.material.io/</a></li></ol></div></div>    
</body>
</html>