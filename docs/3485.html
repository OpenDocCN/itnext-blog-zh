<html>
<head>
<title>How to Create a Service with HttpClient and Injectable in Angular 9/8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular 9/8中用HttpClient和Injectable创建服务</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-a-service-with-httpclient-and-injectable-in-angular-9-8-e3cc50c24c83?source=collection_archive---------3-----------------------#2019-12-24">https://itnext.io/how-to-create-a-service-with-httpclient-and-injectable-in-angular-9-8-e3cc50c24c83?source=collection_archive---------3-----------------------#2019-12-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="bae9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本教程中，我们将学习如何使用HttpClient构建一个服务，将您的Angular应用程序连接到REST API服务器。</p><p id="26d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将看到如何实现一个角度服务来封装处理从REST API服务器获取数据的代码。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/a58818f87b50623c93587da4330618e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*48uoCeSrFp8grzHfB4YbxQ.png"/></div></div></figure><p id="26c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">角度服务只是一个类型脚本类，您可以使用角度依赖注入器将它注入到其他服务或组件中。</p><h1 id="b163" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">先决条件</h1><p id="e880" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">你需要有节点，NPM和Angular CLI和初始化一个Angular项目。</p><h1 id="61bf" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤1 —导入HttpClient模块</h1><p id="840d" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">打开<code class="fe md me mf mg b">src/app/app.module.ts</code>文件，更新如下:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="20a7" class="ml lb it mg b gy mm mn l mo mp">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';</span><span id="6ab5" class="ml lb it mg b gy mq mn l mo mp">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { HttpClientModule } from '@angular/common/http';</span><span id="d5b6" class="ml lb it mg b gy mq mn l mo mp">@NgModule({<br/>  declarations: [<br/>    AppComponent,<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    HttpClientModule<br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><h1 id="42c7" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤2-创建角度服务</h1><p id="0aa5" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">打开一个新终端并运行以下命令:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="9082" class="ml lb it mg b gy mm mn l mo mp">$ ng generate service backend</span></pre><h1 id="9434" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤3 —导入和注入HttpClient</h1><p id="7764" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">打开<code class="fe md me mf mg b">src/app/backend.service.ts</code>文件，然后导入并注入<code class="fe md me mf mg b">HttpClient</code>，如下:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="b6ab" class="ml lb it mg b gy mm mn l mo mp">import { Injectable } from '@angular/core';<br/>import { HttpClient } from '@angular/common/http';</span><span id="9b92" class="ml lb it mg b gy mq mn l mo mp">@Injectable({<br/>  providedIn: 'root'<br/>})<br/>export class BackendService {</span><span id="ba20" class="ml lb it mg b gy mq mn l mo mp">  constructor(private httpClient: HttpClient) { }<br/>}</span></pre><p id="6f74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们导入<code class="fe md me mf mg b">HttpClient</code>并通过服务构造器注入它。</p><h1 id="1c46" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤4 —定义发送HTTP请求的方法</h1><p id="c96e" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">接下来，定义一个<code class="fe md me mf mg b">get()</code>方法，向服务器发送获取数据的请求:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="1dc5" class="ml lb it mg b gy mm mn l mo mp">import { Injectable } from '@angular/core';<br/>import { HttpClient } from '@angular/common/http';</span><span id="0560" class="ml lb it mg b gy mq mn l mo mp">@Injectable({<br/>  providedIn: 'root'<br/>})<br/>export class BackendService {</span><span id="5b21" class="ml lb it mg b gy mq mn l mo mp">  constructor(private httpClient: HttpClient) { }</span><span id="0666" class="ml lb it mg b gy mq mn l mo mp">  public get(){<br/>    return this.httpClient.get("http://server.com/endpoint");<br/>  }<br/>}</span></pre><p id="2ad9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们调用<code class="fe md me mf mg b">HttpClient</code>的<code class="fe md me mf mg b">get()</code>方法向REST API服务器发送GET请求。</p><h1 id="e8f3" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤5-创建角度组件</h1><p id="54f3" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">回到您的终端，运行下面的命令来生成一个名为home的组件:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="4903" class="ml lb it mg b gy mm mn l mo mp">$ ng generate component home</span></pre><h1 id="fc27" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤6 —注入角度服务</h1><p id="b90b" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">转到<code class="fe md me mf mg b">src/app/home/home.component.ts</code>文件，导入并注入后端服务，如下所示:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="17e7" class="ml lb it mg b gy mm mn l mo mp">import { Component, OnInit } from '@angular/core';<br/>import { BackendService } from '../backend.service';</span><span id="5d5b" class="ml lb it mg b gy mq mn l mo mp">@Component({<br/>  selector: 'app-home',<br/>  templateUrl: './home.component.html',<br/>  styleUrls: ['./home.component.css']<br/>})<br/>export class HomeComponent implements OnInit {</span><span id="64ea" class="ml lb it mg b gy mq mn l mo mp">  data= [];</span><span id="7230" class="ml lb it mg b gy mq mn l mo mp">  constructor(private backendService: BackendService) { }</span><span id="4739" class="ml lb it mg b gy mq mn l mo mp">}</span></pre><h1 id="8a10" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤7 —调用服务方法</h1><p id="4b7b" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">最后，我们可以调用服务的<code class="fe md me mf mg b">get()</code>方法来发送GET请求，如下所示:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="1922" class="ml lb it mg b gy mm mn l mo mp">ngOnInit() {</span><span id="263a" class="ml lb it mg b gy mq mn l mo mp">    this.backendService.get().subscribe((ret: any[])=&gt;{<br/>      console.log(ret);<br/>      this.data = ret;<br/>    })  <br/>  }</span></pre><h1 id="9396" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤8 —用<code class="fe md me mf mg b">ngFor</code>显示数据</h1><p id="9fdc" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">接下来，打开<code class="fe md me mf mg b">src/app/home/home.component.html</code>文件，并按如下方式更新它:</p><pre class="kp kq kr ks gt mh mg mi mj aw mk bi"><span id="f110" class="ml lb it mg b gy mm mn l mo mp">&lt;div&gt;<br/>&lt;ul&gt;<br/>    &lt;li *ngFor="let item of data"&gt;<br/>        {{item.name}}<br/>    &lt;/li&gt;<br/>&lt;/ul&gt;           <br/>&lt;/div&gt;</span></pre><p id="4b0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里，我们假设我们的数据元素有一个<code class="fe md me mf mg b">name</code>属性。</p><p id="0824" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">查看我们的其他<a class="ae mr" href="https://www.techiediaries.com/angular/" rel="noopener ugc nofollow" target="_blank">角度教程</a>。</p><p id="b254" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过作者的个人网站、<a class="ae mr" href="https://twitter.com/ahmedbouchefra" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae mr" href="https://www.linkedin.com/in/mr-ahmed/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae mr" href="https://github.com/techiediaries" rel="noopener ugc nofollow" target="_blank"> Github </a>联系或关注作者。</p><h1 id="4c8a" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="a69a" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在这篇how-to帖子中，我们看到了如何在Angular中创建一个服务，并使用<code class="fe md me mf mg b">HttpClient</code>向REST API后端发送HTTP请求，最后使用<code class="fe md me mf mg b">ngFor</code>指令显示从API返回的数据。</p></div></div>    
</body>
</html>