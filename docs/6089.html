<html>
<head>
<title>Lets put boomerang flow on our laptop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们把飞镖流放在我们的笔记本电脑上</h1>
<blockquote>原文：<a href="https://itnext.io/lets-put-boomerang-flow-on-our-laptop-8a63eac2b9e5?source=collection_archive---------2-----------------------#2021-08-13">https://itnext.io/lets-put-boomerang-flow-on-our-laptop-8a63eac2b9e5?source=collection_archive---------2-----------------------#2021-08-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7a37db4d301605df33280216b4a568e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NYDx4N5kSImv2k4LI-teAw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd kc">笔记本电脑上的回旋镖流</strong></figcaption></figure><p id="1c9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">在过去的几个月里，我们一直致力于将我们的云原生编排工具转换为工作流，也称为</em> <a class="ae lc" href="https://www.useboomerang.io/flow" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="lb">回旋镖流</em> </strong> </a> <em class="lb">以使用</em><a class="ae lc" href="https://tekton.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="lb">Tekton</em></strong></a><em class="lb">的任务和任务运行。它很轻，可扩展，有很好的用户体验，今天我们将把它安装在我们自己的笔记本电脑上。让我们看看如何轻松实现这一目标。</em></p><p id="9c79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想进一步了解什么是<strong class="kf ir">回旋镖流</strong>，我邀请你浏览项目<a class="ae lc" href="https://www.useboomerang.io/flow" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">主页</strong> </a>，去<a class="ae lc" href="https://github.com/boomerang-io/roadmap" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> GitHub </strong> </a>资源库或者从<a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/3.3.1/introduction/getting-started" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> docs </strong> </a>开始。</p><blockquote class="ld le lf"><p id="5f33" class="kd ke lb kf b kg kh ki kj kk kl km kn lg kp kq kr lh kt ku kv li kx ky kz la ij bi translated">Boomerang Flow是一个开源的事件驱动的云原生工作流自动化工具，运行在Kubernetes上，为工作流创建提供了一个无代码的拖放编辑器。我们首先关注最终用户体验，然后才是技术特性。</p></blockquote></div><div class="ab cl lj lk hu ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ij ik il im in"><p id="07a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想尝试工作流编排工具，并且不一定想在各种提供商中提供Kubernetes集群，您仍然可以在您的笔记本电脑上本地运行它。在本文中，我将在一台“<em class="lb">普通</em>”笔记本电脑上进行boomerang flow的端到端安装实践。我运行的是MacBook Pro，配备了2.6 GHz的英特尔i7，内存为16 GB。</p><h2 id="983c" class="lq lr iq bd kc ls lt dn lu lv lw dp lx ko ly lz ma ks mb mc md kw me mf mg mh bi translated">以下是您需要完成的步骤:</h2><ul class=""><li id="d93d" class="mi mj iq kf b kg mk kk ml ko mm ks mn kw mo la mp mq mr ms bi translated">首先，我们将在本地机器上安装一个k8s集群，并配置它的入口控制器，</li><li id="8a5a" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">然后我们将快速部署一个<code class="fe my mz na nb b">mongodb</code>实例，由boomerang流用来存储它的数据，</li><li id="3878" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">接下来，我们将在我们的机器上新的Kubernetes集群中安装boomerang flow项目，</li><li id="9e1c" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">最后，我们将激活它并运行它。</li></ul><h1 id="2b73" class="nc lr iq bd kc nd ne nf lu ng nh ni lx nj nk nl ma nm nn no md np nq nr mg ns bi translated">在本地机器上安装Kubernetes集群</h1><p id="f640" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">首先，我们将使用kind在本地机器上安装一个Kubernetes集群，但是在此之前，我们需要确保在我们的机器上安装了必要的cli工具:<code class="fe my mz na nb b">kubectl</code>、<code class="fe my mz na nb b">helm</code>和<code class="fe my mz na nb b">kind</code>。</p><p id="da04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以遵循以下说明:</p><p id="d3f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 1a。</strong>按照此处的<a class="ae lc" href="https://kubernetes.io/docs/tasks/tools/" rel="noopener ugc nofollow" target="_blank">指示，在本地安装<code class="fe my mz na nb b">kubectl</code>。</a></p><p id="7e0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 1b。</strong>按照此处的<a class="ae lc" href="https://helm.sh/docs/intro/install/" rel="noopener ugc nofollow" target="_blank">中的说明在本地安装<code class="fe my mz na nb b">helm</code>。</a></p><p id="2b29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 1c。</strong>按照此处的说明在本地安装kind或直接运行:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="c73d" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">curl -Lo ./kind </strong><a class="ae lc" href="https://kind.sigs.k8s.io/dl/v0.9.0/kind-darwin-amd64" rel="noopener ugc nofollow" target="_blank"><strong class="nb ir">https://kind.sigs.k8s.io/dl/v0.9.0/kind-darwin-amd64</strong></a><strong class="nb ir"><br/></strong><strong class="nb ir">chmod +x ./kind<br/>mv ./kind /some-dir-in-your-PATH/kind</strong></span></pre><p id="44eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.现在我们已经在本地安装了kind工具，我们需要创建一个Kubernetes集群。这将创建一个单节点集群并添加<code class="fe my mz na nb b">ingress-ready</code>标签，为入口控制器安装做准备。打开一个终端并粘贴以下代码片段(创建和启动集群需要1-2分钟)。</p><figure class="nw nx ny nz gt jr"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="bf57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有集群的pod大约需要2分钟才能启动，因此在进入下一步之前，请确保它们正在运行:</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ok"><img src="../Images/8aed5c5b649814603291fb46f923de42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7r7RlN0GEf6U4vySxb0gRQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">检查所有命名空间中的集群窗格</figcaption></figure><p id="7c90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.通过运行以下命令在集群中安装ingress nginx:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="e4db" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">kubectl apply -f </strong><a class="ae lc" href="https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/kind/deploy.yaml" rel="noopener ugc nofollow" target="_blank"><strong class="nb ir">https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/kind/deploy.yaml</strong></a></span></pre><p id="b601" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将创建一个新的名称空间<code class="fe my mz na nb b">ingress-nginx</code>，然后部署nginx入口控制器容器。确保nginx控制器正在运行，您可能需要等待一分钟，让pod准备就绪。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/ded4893978313b0abf2f5c879e9a91c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kqmKsu4dzQKvBaqncSYL2w.png"/></div></div></figure><p id="41bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.1修补nginx配置，配置代理缓存路径。只需运行即可轻松完成:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="a9b0" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">kubectl patch configmap/ingress-nginx-controller -n ingress-nginx --type merge -p </strong>'<strong class="nb ir">{"data":{"http-snippet": "proxy_cache_path /tmp/nginx levels=1:2 keys_zone=authentication:10m inactive=3s;"}}</strong>'</span></pre><h1 id="84d8" class="nc lr iq bd kc nd ne nf lu ng nh ni lx nj nk nl ma nm nn no md np nq nr mg ns bi translated">安装mongodb实例</h1><p id="46ff" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">Boomerang flow需要在一个<code class="fe my mz na nb b">mongodb</code>实例中持久化其运行数据，如团队、工作流定义、执行和许多其他数据。稍后，boomerang flow安装将运行一个作业(它的安装的一部分),该作业将设置数据库的初始状态。</p><p id="0103" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用来自<code class="fe my mz na nb b">bitnami</code>的舵图，这将简化数据库的安装。首先确保你已经将<code class="fe my mz na nb b">bitnami</code>头盔库添加到你的本地库并且是最新的:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="79f6" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">helm repo add bitnami </strong><a class="ae lc" href="https://charts.bitnami.com/bitnami" rel="noopener ugc nofollow" target="_blank"><strong class="nb ir">https://charts.bitnami.com/bitnami</strong></a><strong class="nb ir"><br/>helm repo update</strong></span></pre><p id="40de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后运行:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="f844" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">helm upgrade --version 7.8.8 --install bmrg-mongodb bitnami/mongodb --set mongodbDatabase=boomerang --set mongodbUsername=boomerang</strong></span></pre><p id="b259" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在继续之前，让我们确保pod已启动并运行。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/97cc730aa0ae39e00c6e133cbca46942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AlrN0aqTNeHarL9tGLy0cg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">显示mongodb 正在运行</figcaption></figure><h1 id="543a" class="nc lr iq bd kc nd ne nf lu ng nh ni lx nj nk nl ma nm nn no md np nq nr mg ns bi translated">安装回飞镖流</h1><p id="5e3a" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">既然繁重的工作已经完成，我们只需将<code class="fe my mz na nb b">boomerang-io</code> Helm chart存储库添加到我们的本地存储中，并确保它知道boomerang flow的版本，就可以安装boomerang flow了。</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="3925" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">helm repo add boomerang-io https://raw.githubusercontent.com/boomerang-io/charts/index</strong></span><span id="36f8" class="lq lr iq nb b gy om of l og oh"><strong class="nb ir">helm repo update</strong></span></pre><p id="6e5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时安装boomerang流只需运行以下命令，这将安装最新的helm版本。你也可以使用<code class="fe my mz na nb b">--version x.y.z</code>安装以前的稳定版本(版本列表可以在<a class="ae lc" href="https://github.com/boomerang-io/roadmap/releases" rel="noopener ugc nofollow" target="_blank">这里</a>看到):</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="f933" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">helm upgrade --version 4.9.7 --install --debug flow boomerang-io/bmrg-flow -f https://raw.githubusercontent.com/boomerang-io/charts/main/examples/flow-basic-auth-values.yaml</strong></span></pre><blockquote class="ld le lf"><p id="04c1" class="kd ke lb kf b kg kh ki kj kk kl km kn lg kp kq kr lh kt ku kv li kx ky kz la ij bi translated">N <strong class="kf ir">注</strong>:值得一提的是，目前的安装是配置boomerang flow后端微服务，只要求128MB或内存。对于本练习，这已经足够了，但是如果您打算运行更复杂的工作流，请确保将分配给Docker守护进程的内存增加到4GB，并将所提供的flow-basic-auth-values.yaml文件中的boomerang流后端微服务配置为1GB。</p></blockquote><p id="15ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦安装完成，我们将看到发行说明。这些很重要，因为它们向我们展示了如何访问该工具以及如何激活它。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/97fa84fcc3e7373a7d34d9b2cfe8bb5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QAaPuq-rPUfJ8XsVMafuCA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">显示<strong class="bd kc">访问端点</strong>以及如何获取<strong class="bd kc">激活码</strong>的发行说明</figcaption></figure><p id="8021" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获取激活码，只需运行指示的命令。它将提取激活码，并将其放入剪贴板缓冲区。在第一次登录后，我们需要将它粘贴到UI中。</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="6aa7" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">kubectl get secret --namespace default bmrg-flow-secrets -o jsonpath="{.data.FLOW_OTC}" | base64 --decode | pbcopy</strong></span></pre><p id="309b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能需要2到3分钟的时间让群集下载并启动映像。接下来，让我们打开浏览器并转到<a class="ae lc" href="https://localhost/flow/apps/flow/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">https://localhost/flow/apps/flow</strong></a></p><p id="c777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在登录屏幕上，我们需要使用以下测试凭证，<code class="fe my mz na nb b">bmrgadmin</code> / <code class="fe my mz na nb b">youll-come-a-waltzing-maltilda-with-me</code>。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/6e303aaf1ba712332306760e3ebb80cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojdWXBBs2-ymjNVmglyhRQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">登录屏幕</figcaption></figure><p id="3981" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一次，我们将需要激活回飞镖流，使用我们之前检索并存储在剪贴板中的激活码。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi op"><img src="../Images/544494ccb94480ecc29ba1b7cb5dee97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33qbNAs7iJ9yUCuEAdV25A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">一次性飞镖流<strong class="bd kc">激活屏幕</strong></figcaption></figure><p id="4807" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">粘贴激活码并提交。我们可能需要刷新流应用程序的浏览器页面来获取新的设置。</p><h1 id="cc95" class="nc lr iq bd kc nd ne nf lu ng nh ni lx nj nk nl ma nm nn no md np nq nr mg ns bi translated">好的，那么现在做什么……</h1><p id="68c1" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">在下一节中，我们将通过创建和执行工作流来测试我们的本地安装。</p><p id="3ee0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在公开文档中有<a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/3.3.1/tutorials/git-hub-issues-bot/#github-issues-bot" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">教程</strong> </a>的专门章节，涵盖了与<a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/3.3.1/tutorials/github-teams-and-organizations" rel="noopener ugc nofollow" target="_blank"> GitHub </a>、<a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/3.3.1/tutorials/email-with-attachments" rel="noopener ugc nofollow" target="_blank"> Sendgrid </a>、<a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/3.3.1/getting-to-know/tasks/#box" rel="noopener ugc nofollow" target="_blank"> Box </a>和<a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/3.3.1/tutorials/manual-approval-output-details" rel="noopener ugc nofollow" target="_blank">手动审批</a>任务的集成。</p><h2 id="65b9" class="lq lr iq bd kc ls lt dn lu lv lw dp lx ko ly lz ma ks mb mc md kw me mf mg mh bi translated">测试我们的本地安装</h2><p id="1cdb" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">打开回飞镖流工具会向我们显示欢迎页面。该工具基于团队和用户，所以我们需要做的第一件事是创建一个团队，并在团队中添加我们自己的用户。</p><p id="fa40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<strong class="kf ir">欢迎</strong>页面打开左上角的汉堡菜单，选择<code class="fe my mz na nb b">Administer</code> ➲ <code class="fe my mz na nb b">Teams</code>。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/354e65dafe63078d9996ec144994044f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3BVOTQcRWt4KpWD-4m1_1g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd kc">欢迎来到</strong>回旋镖流页面</figcaption></figure><p id="dbc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在常规<strong class="kf ir">团队</strong>页面中，按下右上角的<code class="fe my mz na nb b">Create Team</code>按钮。在模态窗口中，填入团队名称，然后按<code class="fe my mz na nb b">Save</code>。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/07f806d8697bb5cb4ab121b5e4c17c5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-JPWQeSDd_O9D5X_FvVHqg.png"/></div></div></figure><p id="6f10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们已经创建了一个团队，我们希望将我们自己的用户<code class="fe my mz na nb b">bmrgadmin</code>添加到这个团队中。选择团队，然后按下<code class="fe my mz na nb b">Add Members</code>按钮。在模态窗口中输入用户名，即<code class="fe my mz na nb b">bmrgadmin</code>，选择结果，然后按<code class="fe my mz na nb b">Add to team</code>。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/6dc5ac814d5aa3ab50cf7fad070fd4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*drGlufl3PEwc5I6V0qkagw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">向团队添加成员</figcaption></figure><p id="cd2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以返回到<strong class="kf ir">工作流</strong>页面来创建新的工作流。我们通过打开左上角的汉堡菜单并选择<code class="fe my mz na nb b">Workflows</code>来实现这一点。由于我们的用户是团队的一部分，我们可以看到团队名称、配额、现有的工作流以及一个<code class="fe my mz na nb b">Create a new workflow</code>按钮。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi or"><img src="../Images/9e0193aa7a2a6a5211c2b19f89d7172a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQt5V7ArQl_1AOuc8IhQqQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">团队的一部分，现在我们可以自动化宇宙</figcaption></figure><p id="abda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让<code class="fe my mz na nb b">Create a new workflow</code>在模态窗口中填充细节。按下<code class="fe my mz na nb b">Create</code>按钮。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi os"><img src="../Images/7b3173cf73c99ec92ed3729929fde845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzECLhMExrkTKiBeYZoRAw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建新的工作流程</figcaption></figure><p id="f44c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在工作流编辑器中，我们可以通过拖放操作来设计和配置工作流。只要我们有一个工作的docker映像，我们就可以疯狂地设计一个使用各种类型的预定义任务和定义自定义任务的工作流。关于这个的更多信息可以在官方文档中找到。现在我们只是将&amp;拖放到可以在<code class="fe my mz na nb b">Utilities</code>类别下找到的<code class="fe my mz na nb b">Execute HTTP Call</code>任务。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi os"><img src="../Images/9171d2d194a4672d8436efcd13927aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjbTrbUWkIMP6d5kATAOeA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用工作流编辑器设计您的工作流</figcaption></figure><p id="df8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们通过点击任务上的小铅笔图标来配置<code class="fe my mz na nb b">Execute HTTP Call</code>任务。我们只想进行一个HTTP调用，返回一个带有200 HTTP状态的json响应。在模态窗口中，用以下值更新字段，并按下<code class="fe my mz na nb b">Apply</code>按钮。</p><ul class=""><li id="b51c" class="mi mj iq kf b kg kh kk kl ko ot ks ou kw ov la mp mq mr ms bi translated"><code class="fe my mz na nb b">URL</code> : <code class="fe my mz na nb b">https://httpstat.us/200</code></li><li id="d410" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">Method</code> : <code class="fe my mz na nb b">GET</code></li><li id="9f4f" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">Headers</code> : <code class="fe my mz na nb b">Accept: application/json</code></li><li id="b6e8" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated"><code class="fe my mz na nb b">Content Type</code> : <code class="fe my mz na nb b">application/json</code></li><li id="d60a" class="mi mj iq kf b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms bi translated">其余的字段可以保持为空</li></ul><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ow"><img src="../Images/cd8f85ec9bb1134ac8c45c9454c71a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vq8l1AaW2ZH6wbVoS1tDWg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">配置<strong class="bd kc">执行HTTP调用</strong>任务</figcaption></figure><p id="5687" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe my mz na nb b">Start</code>、<code class="fe my mz na nb b">End</code>和任务本身连接起来，从前面的任务拖动一条线到下一个任务。</p><p id="20ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦工作流程如下图所示，按右上方的<code class="fe my mz na nb b">Create new version</code>按钮保存更改。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/407733243adb718b1994fbd18b57978c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WphGiPSWQU1EdWl9VlPo2Q.png"/></div></div></figure><p id="3886" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以返回到<strong class="kf ir">工作流</strong>页面，运行新创建的工作流。再次打开左上角的汉堡菜单并选择<code class="fe my mz na nb b">Workflows</code>。按下<code class="fe my mz na nb b">Run it</code> ➲ <code class="fe my mz na nb b">Run and View</code>。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oy"><img src="../Images/9ebf8f953f5b8596004d33f59beccbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6lS1Z93pA4TIwuiLLtaUg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">执行工作流</figcaption></figure><p id="f261" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将进入工作流运行详细信息页面，在这里我们可以实时看到工作流的执行、日志、结果以及取消运行。</p><blockquote class="ld le lf"><p id="b859" class="kd ke lb kf b kg kh ki kj kk kl km kn lg kp kq kr lh kt ku kv li kx ky kz la ij bi translated">N <strong class="kf ir">注意</strong>:第一次执行可能需要更长时间，最多5-10分钟，直到图像下载并启动。下面的运行将重用这些图像，使执行速度更快。</p></blockquote><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oy"><img src="../Images/71d5d4a2012402ac798ff6ee4ba9ac51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f8HBjgLGiaMttMRDXJQLSA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">查看云原生工作流的实时执行</figcaption></figure><p id="3b88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开左上角的hamburger菜单并选择<code class="fe my mz na nb b">Activity</code>,我们将看到工作流执行的视图，该视图通过各种标准进行过滤，如:状态、团队、工作流名称和执行日期。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/9e616aa53de078e0395f51548e072e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTmBeRNyTIxlVYAtI_SHnw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">从工作流执行的角度来看发生了什么</figcaption></figure><p id="bb65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是你笔记本电脑上的云原生工作流程编排器。我在开始时说过，我们已经将执行转移到Tekton的任务运行中。我们甚至可以通过使用Tekton的一部分<code class="fe my mz na nb b">tkn</code> cli来检查任务运行的细节。</p><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oz"><img src="../Images/ca749b65dd5da61a274c0d17b9ea3093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2kOZqtMI00zJHyr49lojA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用<strong class="bd kc"> tkn </strong> cli检查任务运行细节</figcaption></figure><h2 id="064b" class="lq lr iq bd kc ls lt dn lu lv lw dp lx ko ly lz ma ks mb mc md kw me mf mg mh bi translated">清理本地安装</h2><p id="d6a8" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">要从我们的笔记本电脑上完全删除安装，我们只需要删除我们创建的<code class="fe my mz na nb b">kind</code>集群。如果您按照这里的说明操作，集群的名称是<code class="fe my mz na nb b">e2e-flow</code>,或者如果您在安装过程中手动更改了它，可以通过运行以下命令轻松找到它:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="b0eb" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">kind get clusters</strong></span></pre><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/b43b1e4109c48466287146cef7d97c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMfTJG360p7GMfaWwa0MyA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">从我们的笔记本电脑中检索<strong class="bd kc">类</strong>簇</figcaption></figure><p id="78b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要删除本地集群，只需运行:</p><pre class="nw nx ny nz gt oa nb ob oc aw od bi"><span id="5ef2" class="lq lr iq nb b gy oe of l og oh"><strong class="nb ir">kind delete cluster --name=e2e-flow</strong></span></pre><figure class="nw nx ny nz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/944a9bc121cb3c6e18dec4cbbabaa4fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-8mtbpcqbZNDEF0U4jtVKA.png"/></div></div></figure><h1 id="65c1" class="nc lr iq bd kc nd ne nf lu ng nh ni lx nj nk nl ma nm nn no md np nq nr mg ns bi translated">表示你的支持</h1><p id="aa9b" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">如果你喜欢回旋镖流项目，并且觉得它很有帮助:</p><p id="3a7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">——⭐️<a class="ae lc" href="https://github.com/boomerang-io/flow.client.web" rel="noopener ugc nofollow" target="_blank">github知识库</a><br/>—💬关注我们的<a class="ae lc" href="https://twitter.com/useboomerangio" rel="noopener ugc nofollow" target="_blank"> Twitter </a> <br/> - <a class="ae lc" href="https://www.useboomerang.io/docs/boomerang-flow/installing/installing" rel="noopener ugc nofollow" target="_blank">在你自己的Kubernetes集群<br/>上安装项目</a>🙏加入我们并帮助<a class="ae lc" href="https://github.com/boomerang-io/roadmap" rel="noopener ugc nofollow" target="_blank">做出贡献</a></p></div><div class="ab cl lj lk hu ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ij ik il im in"><p id="97de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">大呼出来的同事来自</em> <a class="ae lc" href="https://github.com/boomerang-io" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="lb">回旋镖-io </em> </strong> </a> <em class="lb">团队</em>👏<em class="lb">感谢他们在构建和维护项目中的所有辛勤工作:</em> <a class="ae lc" href="https://github.com/BenjaminRuby" rel="noopener ugc nofollow" target="_blank"> <em class="lb">本</em></a><em class="lb"/><a class="ae lc" href="https://github.com/marcusdroy" rel="noopener ugc nofollow" target="_blank"><em class="lb">马库斯</em> </a> <em class="lb">和</em> <a class="ae lc" href="https://github.com/tlawrie/" rel="noopener ugc nofollow" target="_blank"> <em class="lb">泰森</em> </a> <em class="lb">。</em></p></div></div>    
</body>
</html>