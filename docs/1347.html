<html>
<head>
<title>Increasing the tap area of a UIButton</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">增加UIButton的点击区域</h1>
<blockquote>原文：<a href="https://itnext.io/increasing-the-tap-area-of-a-uibutton-91592003f251?source=collection_archive---------4-----------------------#2018-09-19">https://itnext.io/increasing-the-tap-area-of-a-uibutton-91592003f251?source=collection_archive---------4-----------------------#2018-09-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="cb24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前几天，<a class="ae kl" href="https://twitter.com/khanlou" rel="noopener ugc nofollow" target="_blank"> Soroush </a>写了一篇关于<code class="fe km kn ko kp b">hitTest(_:with:)</code>的很棒的<a class="ae kl" href="http://khanlou.com/2018/09/hacking-hit-tests/" rel="noopener ugc nofollow" target="_blank">帖子</a>(你应该去看看)，这让我想起了我前几周解决的一个问题:我想增加一个<code class="fe km kn ko kp b">UIButton</code>的点击区域，而不增加按钮的框架。</p><p id="a193" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的代码将放在一个按钮的<code class="fe km kn ko kp b">superviews</code>中；例如，您可能有一个<code class="fe km kn ko kp b">mainContainer</code>，它有一个包含按钮的<code class="fe km kn ko kp b">UIStackView</code>——我们将在<code class="fe km kn ko kp b">mainContainer</code>中实现它:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="70e1" class="ky kz iq kp b gy la lb l lc ld">override func hitTest(_ point: CGPoint, with event: UIEvent?) -&gt; UIView? { <br/>    let biggerButtonFrame = theButton.frame.insetBy(dx: -30, dy: -30) // 1 <br/>    if biggerButtonFrame.contains(point) { // 2 <br/>        return theButton // 3 <br/>    } </span><span id="fb1f" class="ky kz iq kp b gy le lb l lc ld">    return super.hitTest(point, with: event) // 4 <br/>}</span></pre><p id="006a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们首先创建一个比我们的按钮大<code class="fe km kn ko kp b">30px</code>的rect，无论水平还是垂直(1)，我们检查它是否包含point (2):如果包含，我们返回按钮(3)，否则我们退回到<code class="fe km kn ko kp b">super</code> (4)。在(1)处，我们可能需要在坐标系之间进行转换，在(2)处，我们可能还希望检查按钮是否启用和可见，它是否可以有不同的状态。</p><p id="72df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你谷歌一下<code class="fe km kn ko kp b">increase uibutton tap area</code>，你会得到相当多的结果，提到要么增加<code class="fe km kn ko kp b">imageEdgeInsets</code> / <code class="fe km kn ko kp b">titleEdgeInsets</code>(不完全是我们想要的)，要么使用<code class="fe km kn ko kp b">pointInside(point:with:)</code>。后者的方法与我们上面看到的基本相同，只是实现是在按钮本身上完成的，而不是在它的<code class="fe km kn ko kp b">superviews</code>之一中:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="038b" class="ky kz iq kp b gy la lb l lc ld">override func point(inside point: CGPoint, with event: UIEvent?) -&gt; Bool { <br/>    let biggerFrame = bounds.insetBy(dx: -30, dy: -30) </span><span id="6ffd" class="ky kz iq kp b gy le lb l lc ld">    return biggerFrame.contains(point) <br/>}</span></pre><p id="832c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有时候，一个按钮可能是视图控制器的<code class="fe km kn ko kp b">view</code>的一部分，或者被用作<code class="fe km kn ko kp b">UIBarButtonItem</code>的<code class="fe km kn ko kp b">customView</code>，在这种情况下，我们无法访问<code class="fe km kn ko kp b">superview</code>的实现，所以我们需要使用这种方法。</p><p id="34e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在某些时候，我真的不想再写这个帖子了，看到这么多关于这个可以追溯到2010年的信息，但是，最终，我认为任何知识分享都比保留好。</p><p id="4844" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我以前是怎么做的？通过创建一个包含所需信息的<code class="fe km kn ko kp b">UILabel</code> / <code class="fe km kn ko kp b">UIImageView</code>并在顶部添加一个更大的按钮🤷🏻‍♂️😳。</p></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><p id="770d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lf">原载于</em><a class="ae kl" href="https://rolandleth.com/increasing-the-tap-area-of-a-uibutton" rel="noopener ugc nofollow" target="_blank"><em class="lf">rolandleth.com</em></a><em class="lf">。</em></p></div></div>    
</body>
</html>