<html>
<head>
<title>Java 10 — migration story</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 10 —迁移故事</h1>
<blockquote>原文：<a href="https://itnext.io/java-10-migration-story-cdc65c05bb5a?source=collection_archive---------4-----------------------#2018-03-26">https://itnext.io/java-10-migration-story-cdc65c05bb5a?source=collection_archive---------4-----------------------#2018-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/21bdf7c2e9a338c6e932760a99611fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IY5IBEVlblI3iFHq72kGCA.jpeg"/></div></div></figure><blockquote class="jy jz ka"><p id="0aab" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fjava-10-migration-story-cdc65c05bb5a%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank">点击这里在LinkedIn上分享这篇文章</a></p></blockquote><p id="4ee9" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">你可能知道<a class="ae la" href="http://jdk.java.net/10/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Java 10 </strong> </a>最近发布了。没有那么多新功能。至少对于<a class="ae la" href="http://kotlinlang.org" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Kotlin </strong> </a>开发者来说是这样……但是对于<strong class="ke ir"> JVM </strong>本身还有<a class="ae la" href="http://www.oracle.com/technetwork/java/javase/10-relnote-issues-4108729.html" rel="noopener ugc nofollow" target="_blank">几个改进</a>。我猜，在即将到来的版本中会有更多。从现在开始我们每年会得到两次！因此，我认为最好花些时间同步您的项目，以便将来更容易以相同的速度迁移。</p><p id="12b3" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">我参与的主要项目是用<strong class="ke ir"> Kotlin </strong>制作的基于<strong class="ke ir"> SpringBoot </strong> 1.5.X的服务，它使用<strong class="ke ir"> Postgres </strong>作为数据库。这时它使用的是Java 8 。这么大的机会跳过<strong class="ke ir"> Java 9 </strong>直接跳到10！受到这个想法的启发，我打开了我的笔记本电脑。</p><p id="f30d" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">我使用SDKman安装Java，但是对于Java 10来说，由于一些未知的原因，它会提供一个不完整的版本。所以这次我只好手动从官方<a class="ae la" href="http://jdk.java.net/10/" rel="noopener ugc nofollow" target="_blank">网站</a>下载bundle。</p><p id="3b9e" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">最大的问题是一些图书馆不再是JDK的一部分。这是个好消息——它变得越来越干净了。但结果是，您需要为您的项目定义额外的依赖项。你也可以在命令行参数中包含它们，因为它们实际上仍然在<strong class="ke ir"> JDK </strong>中，但我认为最好将它们移到依赖项中，因为据我所知，它们将在未来的版本中完全删除。我的情况是:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/d6511ef355626625657ea470569f6884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SQ14w9r73jrD6tHWTt7d-w.png"/></div></div></figure><p id="cbd4" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">第二期是<a class="ae la" href="https://docs.gradle.org/current/userguide/jacoco_plugin.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Jacoco Gradle插件</strong> </a>。如果你用它来衡量代码覆盖率，有一个好消息——<strong class="ke ir">Jacoco</strong>本身支持<strong class="ke ir"> Java 10 </strong>。但是为了让<strong class="ke ir"> Jacoco Gradle插件</strong>工作，我必须在我的Gradle构建文件中指定这样的工具版本:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/d87ae12dd7eb6551bb75e24acb7b10dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njwwVXG6jfxW7NDI3YtQnw.png"/></div></div></figure><p id="0664" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">还有最后被打破的部分— <a class="ae la" href="http://site.mockito.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">莫克托</strong> </a>。这个问题可以通过添加一个新版本的<a class="ae la" href="http://bytebuddy.net/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Bytebuddy </strong> </a>库来解决，如下所示:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/a4b52e37e45363c94c427befc9354afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VCu3z7x3Lm9b0WKn_czzLw.png"/></div></div></figure><p id="f5d1" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">经过这些修改，我能够构建和运行我的项目，所有测试都是绿色的。不要害怕迁移！下一步是准备<strong class="ke ir"> Dockerbuild </strong>文件。但是这是下一篇文章的主题。</p></div></div>    
</body>
</html>