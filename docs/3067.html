<html>
<head>
<title>Create Your First Github Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建您的第一个Github包</h1>
<blockquote>原文：<a href="https://itnext.io/create-your-first-github-package-9b5033d9bdd3?source=collection_archive---------4-----------------------#2019-09-27">https://itnext.io/create-your-first-github-package-9b5033d9bdd3?source=collection_archive---------4-----------------------#2019-09-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0f5ff16f8262dc06baa8cb27c2c62586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c9HBMW0byk5LRouy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源Github.blog</figcaption></figure><p id="0718" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Github从2019年5月开始推出他们的<a class="ae la" href="https://github.com/features/package-registry" rel="noopener ugc nofollow" target="_blank"> Github包注册表</a>——一个包管理服务，就像NPM包一样。这意味着您可以在源代码旁边管理私有或公共包。</p><p id="5438" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我写这篇文章的时候，你仍然需要注册测试版来尝试这项新服务。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/7a5d62a1c2e1e6c9336e7b6cd37a14c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OrWmYGbiL0UnT7McQLVmwg.png"/></div></div></figure><p id="9a61" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面是创建第一个Github包的步骤。</p><p id="c7a0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">步骤1:创建个人访问令牌</strong></p><p id="a5d4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">登录你的<strong class="ke ir"> Github账号&gt;设置&gt;开发者设置</strong></p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/05cbd7d379d824b7eebf5e7bad7348c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_wSRoeVOF35a0_cg6LvStQ.png"/></div></div></figure><p id="f7ac" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第二步:登录npm.pkg.github.com</strong></p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="6b1e" class="lm ln iq li b gy lo lp l lq lr">dnguyen:~ dalenguyen$ npm login --registry=https://npm.pkg.github.com</span><span id="23f1" class="lm ln iq li b gy ls lp l lq lr">Username: GitHub-username<br/>Password: your-personal-access-token<br/>Email: (this IS public) your-email@example.com</span><span id="1bec" class="lm ln iq li b gy ls lp l lq lr">Logged in as dalenguyen on https://npm.pkg.github.com/.</span></pre><p id="d536" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第三步:准备你的源代码</strong></p><p id="a104" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我已经创建了一个<strong class="ke ir">类型脚本包启动器。你可以从Github克隆它。</strong></p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="5bd7" class="lm ln iq li b gy lo lp l lq lr">git clone <a class="ae la" href="https://github.com/dalenguyen/typescript-package-starter.git" rel="noopener ugc nofollow" target="_blank">https://github.com/dalenguyen/typescript-package-starter.git</a></span></pre><p id="ec83" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以下是项目结构:</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="61a4" class="lm ln iq li b gy lo lp l lq lr">dist <br/>--index.js<br/>src<br/>--index.ts<br/>test<br/>--index.spec.ts</span></pre><p id="7611" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这个包只有一个简单的功能:<strong class="ke ir"> helloWorld </strong></p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="f413" class="lm ln iq li b gy lo lp l lq lr">export const helloWorld = () =&gt; 'Howdy!'</span></pre><p id="3b6d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了将您的包发布到Github Package Registery，您需要添加<strong class="ke ir"> publishConfig </strong>。否则，它会将软件包发布到NPM软件包注册中心。</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="f13a" class="lm ln iq li b gy lo lp l lq lr">{<br/>  "name": "typescript-package-starter",<br/>  "version": "1.0.0",<br/>  "description": "TypeScript boilerplate for NPM or Github Packages",<br/>  "main": "dist/index.js",<br/>  "types": "dist/index.d.ts",<br/>  "scripts": {<br/>    "test": "mocha --timeout 60000 --exit -r ts-node/register test/**/*.spec.ts",<br/>    "build": "tsc",<br/>    "deploy": "npm publish"<br/>  },<br/>  "author": "Dale Nguyen",<br/>  "license": "ISC",<br/>  "repository": {<br/>    "type": "git",<br/>    "url": "git+<a class="ae la" href="https://github.com/dalenguyen/typescript-package-starter.git" rel="noopener ugc nofollow" target="_blank">https://github.com/dalenguyen/typescript-package-starter.git</a>"<br/>  },<br/>  .........................<br/>  "<strong class="li ir">publishConfig</strong>": {<br/>    "registry": "<a class="ae la" href="https://npm.pkg.github.com/@dalenguyen" rel="noopener ugc nofollow" target="_blank">https://npm.pkg.github.com/@dalenguyen</a>"<br/>  }<br/>}</span></pre><p id="8c1d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这样最终会创建一个包名:<strong class="ke ir">@ dalen guyen/typescript-package-starter</strong>。当您使用自己的包时，需要替换package.json中的用户名。</p><p id="000f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢Alex——我的同事——通过添加库，您能够<a class="ae la" href="https://help.github.com/en/articles/configuring-npm-for-use-with-github-package-registry#publishing-multiple-packages-to-the-same-github-repository" rel="noopener ugc nofollow" target="_blank">将多个包发布到同一个GitHub库</a>。</p><p id="557c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第四步:把你的项目推给Github repo </strong></p><p id="61ce" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在你准备好代码之后。推到你的github回购上。你必须在Github.com创建你的回购协议。</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="7e12" class="lm ln iq li b gy lo lp l lq lr">git init</span><span id="3eb8" class="lm ln iq li b gy ls lp l lq lr">git add .<br/>git commit -m "Create first github package"<br/>git push origin master</span></pre><p id="04f0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第五步:发布你的第一个Github包</strong></p><p id="1541" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">运行测试，确保一切正常</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="2aa2" class="lm ln iq li b gy lo lp l lq lr">npm test</span></pre><p id="9421" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">部署您的第一个Github包</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="b606" class="lm ln iq li b gy lo lp l lq lr">npm run build &amp;&amp; npm deploy</span></pre><p id="85b5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">瞧</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/89a2600f6d010a75f380dc76cea082d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rQF6NKMv5ewyaNKRO8crlQ.png"/></div></div></figure><p id="392b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第六步:尝试安装你的第一个Github包</strong></p><p id="3e98" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在此之前，你需要创建一个<strong class="ke ir"> <em class="lu">。npmrc</em>T29】文件</strong></p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="627f" class="lm ln iq li b gy lo lp l lq lr">// .npmrc<br/>@your-username:registry=https://npm.pkg.github.com</span></pre><p id="4975" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后安装您的软件包:</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="ba64" class="lm ln iq li b gy lo lp l lq lr">dalenguyen$ npm i <a class="ae la" href="http://twitter.com/dalenguyen/typescript-package-starte" rel="noopener ugc nofollow" target="_blank">@dalenguyen/typescript-package-starte</a>r</span><span id="61d0" class="lm ln iq li b gy ls lp l lq lr">npm notice created a lockfile as package-lock.json. You should commit this file.<br/>npm WARN github-packages@1.0.0 No repository field.</span><span id="2e52" class="lm ln iq li b gy ls lp l lq lr">+ typescript-package-starter@1.0.0 (as <a class="ae la" href="http://twitter.com/dalenguyen/typescript-package-starte" rel="noopener ugc nofollow" target="_blank">@dalenguyen/typescript-package-starte</a>r)<br/>added 1 package from 1 contributor and removed 6 packages in 2.375s</span></pre><p id="7dc4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第7步:测试你新创建的包</strong></p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="9e8b" class="lm ln iq li b gy lo lp l lq lr">// index.js<br/>const starter = require('@dalenguyen/typescript-package-starter')<br/>console.log(starter.helloWorld())</span></pre><p id="7574" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">运行index.js文件</p><pre class="lc ld le lf gt lh li lj lk aw ll bi"><span id="21a8" class="lm ln iq li b gy lo lp l lq lr">dalenguyen$ node index.js<br/>Howdy!</span></pre><p id="d8bc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在你知道如何创建和发布你的第一个Github包了。在下一篇文章中，我将添加<a class="ae la" href="https://medium.com/@dalenguyen/continuous-integration-and-deployment-ci-cd-pipeline-with-github-package-and-github-actions-24547f98c85c" rel="noopener"> CI/CD以便用<a class="ae la" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github动作</a>自动发布包</a>。</p></div></div>    
</body>
</html>