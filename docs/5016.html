<html>
<head>
<title>Deep Learning on Flutter. Initiation.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于颤振的深度学习。入会仪式。</h1>
<blockquote>原文：<a href="https://itnext.io/deep-learning-on-flutter-initiation-ac4723261c73?source=collection_archive---------0-----------------------#2020-11-17">https://itnext.io/deep-learning-on-flutter-initiation-ac4723261c73?source=collection_archive---------0-----------------------#2020-11-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/e8d34bad60bb6c13dc24218adc86ca4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*faRoXKaBbX7fWUs7hB26eg.jpeg"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">图片由来自<a class="ae jy" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1487046" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>的<a class="ae jy" href="https://pixabay.com/users/thedigitalartist-202249/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1487046" rel="noopener ugc nofollow" target="_blank">皮特·林福思</a>拍摄</figcaption></figure><p id="528b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我决定开始一个关于颤振和机器学习(ML)的新系列文章。为什么这是个好主意？因为这是现代IT的两个热门话题。</p><p id="6073" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">如今，所有智能手机都配备了出色的GPU，不仅能够运行视频游戏，还能直接在设备上执行ML计算。</p><p id="7604" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">你可以把这想象成你的智能手机接受了一个人造生物大脑。这听起来可能不太现实，但确实如此！你可以将训练好的神经网络部署到这样的人工大脑中，并将其连接到你的Flutter app上！</p><p id="fdc9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">听起来够好了吧？那我们开始吧。</p><p id="9b48" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">本文将主要介绍将一个<a class="ae jy" href="https://en.wikipedia.org/wiki/Deep_learning#Deep_neural_networks" rel="noopener ugc nofollow" target="_blank">深度神经网络</a> ( <strong class="kb ir"> DNN </strong>)引入我们的Flutter应用程序的“机械”步骤。但是为了让您开始学习ML，我将尝试用一些关于ML如何工作的非常高级的解释来修饰这篇文章。</p><h1 id="6491" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">应用</h1><p id="0b83" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">旅程结束时我们会得到什么？我们将开发Android应用程序“<strong class="kb ir">干净还是凌乱</strong>”。这是一个非常有用的应用程序，尤其是对于合租同一间公寓的人来说。对于什么是干净的，什么是脏乱的，我们通常有非常不同的感觉。例如，我是一个相当懒惰的人，我们和我的妻子就何时开始那些乏味的家庭清洁折磨进行了长时间的讨论。</p><p id="677c" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">但是有了这个新的应用程序，现在一切都清楚了。只需拍下正在讨论的房间的照片，并接受应用程序的结论:</p><ul class=""><li id="e74c" class="ma mb iq kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">干净。懒人赢了。享受你的自由时间！</li><li id="dc84" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">脏乱。完美主义者赢了。折磨开始了。</li></ul><p id="7cba" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">正如你可能猜到的，我们的应用程序将使用DNN来分析你房间的照片，并将分为两类:<strong class="kb ir">干净</strong>或<strong class="kb ir">脏乱</strong>。</p><h1 id="284f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">资料组</h1><p id="a4c4" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">在任何ML项目中，你应该做的第一步是为你的ML模型找到数据集。否则，自己制作数据集可能是一项非常痛苦的任务。</p><p id="deac" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">什么是数据集？在我们的例子中，这是一个不同房间的照片大集合<strong class="kb ir">用“干净”或“凌乱”<strong class="kb ir"> </strong>标签标注</strong>。</p><p id="d6d8" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">幸运的是，有一个地方可以找到现成的数据集。这是Kaggle.com的门户。</p><p id="c693" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">例如，这里是我们正在寻找:<a class="ae jy" href="https://www.kaggle.com/cdawn1/messy-vs-clean-room" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/cdawn1/messy-vs-clean-room</a></p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mo"><img src="../Images/fc072fa62d1e512aed7015b7b1e17413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1EqtVp6pe0un-cyTWkV2gA.png"/></div></div></figure><p id="afa5" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">下载并解压到你电脑上的某个地方。</p><h1 id="4f76" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">美国有线新闻网；卷积神经网络</h1><p id="3da3" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">在继续深入之前，一些读者会对这些dnn的高层次理解感到满意。如果你熟悉CNN的逻辑，可以跳过这个小部分。</p><p id="c4cc" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">作为ANN(人工神经网络)的一部分，最简单的DNN可以直观地表示为多层感知器:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mx"><img src="../Images/aed1d9144e302a336ea11026271b2bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFfu0a_dq0zYlJad2Ht_Bg.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">图片来源:By Sky99 —自己的作品，CC BY-SA 3.0，【https://commons.wikimedia.org/w/index.php?curid=19106639 T2】</figcaption></figure><p id="ed99" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">它模拟了生物大脑的一个非常简单的部分，能够进行一些分类。圆圈代表神经元，箭头代表轴突，轴突将神经元连接成网络。这可能是某种原始生物有机体的神经网络模型，比如<a class="ae jy" href="https://en.wikipedia.org/wiki/Rotifer" rel="noopener ugc nofollow" target="_blank">轮虫</a>，它们需要检测自己的嘴是应该张开还是闭合。想象红圈在轮虫的视觉皮层中扮演神经元的角色。它们通过轴突连接到绿色神经元的中间层，起到分类器的作用。如果轮虫“眼睛”前面的颗粒足够小，它将被归类为“食物”，最后一个神经元(在右侧)将启动打开轮虫的嘴。</p><p id="2317" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在计算机对多层感知器的呈现中，我们将轴突(神经元之间的连接)存储为数字(在数组或矩阵中)，代表给定连接的功率，或其“<strong class="kb ir">权重</strong>”。<strong class="kb ir">当我们执行分类</strong>时，我们将输入值指定为另一个数字数组或矩阵，并对乘以给定层中每个神经元的入站轴突权重的输入进行求和。有一个<strong class="kb ir">激活函数</strong>分配给每个神经元。这个函数应该产生输出值，并传递给下一层(更深的)神经元。</p><p id="772f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><strong class="kb ir">当我们执行这种DNN的训练</strong>时，我们调整与每个轴突相关联的权重，以适合与训练<strong class="kb ir">数据集</strong>的最佳匹配。在数据集中，我们有不同种类的粒子<strong class="kb ir">的各种输入，标记为</strong>为“食物”和“非食物”。在我们输入了整个测试数据集之后，我们还可以<strong class="kb ir">在另一个数据集(也有标签)上验证</strong>这个模型，这个数据集叫做验证数据集。如果模型预测足够正确，我们可以说我们的模型已经为未知样本的分类做好了准备，或者，嗯，现实世界的工作。</p><p id="14f5" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">对于更复杂的生物，比如我和你，我们有一个更复杂的视觉皮层和分类层，以一个大的层来表示分类结果。在与轮虫的区别中，人类的大脑配备了某种扩展版的<strong class="kb ir"> CNN </strong>(卷积神经网络)。</p><p id="a42b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">这是一张CNN的简化图片，用于对数字图像进行分类:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi my"><img src="../Images/67ab376e83e0f079b626a3ae16dfe697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EVjy3RcVx7XJty_-2OqtLQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">图片来源:【https://github.com/Hvass-Labs/TensorFlow-Tutorials T2】</figcaption></figure><p id="8be7" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">CNN有一个非常不同的识别图像的方法。第一层不是完全连接的神经元，而是模拟小过滤器在输入图像上的移动。这些过滤器被重新用于识别一些视觉模式(或图像<strong class="kb ir">特征</strong>)，如整个图像中的线条或线条交叉点。这种层有一个特殊的名字:卷积层。以下是如何将滤镜应用于图像以查找特征的直观说明:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mz"><img src="../Images/ae31d5f039716ef7512d70d898b8f7f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*miF0zwh08T_8f4kSej_riQ.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">图片来源:<a class="ae jy" href="https://github.com/Hvass-Labs/TensorFlow-Tutorials" rel="noopener ugc nofollow" target="_blank">https://github.com/Hvass-Labs/TensorFlow-Tutorials</a></figcaption></figure><p id="9fa7" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">更深的卷积层具有用于更复杂的图像特征的更复杂的过滤器，以及图像分辨率的降低。</p><p id="6014" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">CNN的最终完全连接的神经元层类似于多层感知器，将图像分类到许多已知类别中的一个。</p><p id="4fd2" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">一般来说，CNN的训练原理与简单的ANN相同:我们应该输入带标签的样本(在我们的例子中，是图像)。这种区域训练的输出是滤波器权重以及完全连接的神经元的权重的矩阵。</p><h1 id="7d3b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">训练ML模型</h1><p id="7b27" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">前面的小部分听起来可能很复杂。幸运的是，CNN的发现如此重要，以至于成千上万的研究人员和创业公司生产了许多现成的软件产品。所以你不应该自己开发CNN实现。</p><p id="3305" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们可以找到一个更快捷的解决方案:基于云的CNN实例。我们将使用<a class="ae jy" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">可示教机器门户网站</a>来训练我们的CNN并下载生成的模型。</p><p id="87ae" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在浏览器中打开<a class="ae jy" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">此链接</a>并点击“开始”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi na"><img src="../Images/683c0eacff645bb7a830b7e34bfbd43f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VehJRlF9dFTOs5oLlhp5dQ.png"/></div></div></figure><p id="8e1a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在选择“形象工程”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nb"><img src="../Images/2cf982dd98f62d43009dd524f1ebdf16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bsWbVh_8rMIVz4KPWAK0Yw.png"/></div></div></figure><p id="bbc0" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在这一步，我们应该输入你的分类名称。将“第1类”改为“干净”，将“第2类”改为“凌乱”。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nc"><img src="../Images/b4bf611cc6d9da7b62deeeae6951aade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bH3Y4NFV8d4aoOG7oIlcxQ.png"/></div></div></figure><p id="70db" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在让我们上传“干净”类的图像集。点击“上传”。应该会出现文件选择对话框。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nd"><img src="../Images/5dd4eba7233684f06bf37cf33c5a13ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ejwUvnzAJ3caCOXTe0VQ9w.png"/></div></div></figure><p id="9ecd" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">打开您提取数据集的文件夹。然后转到“图像/训练”。您会在这里找到两个文件夹:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/d9bea23f21cb84cae8a34ece414f05ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*OaWecZLnDB0nUa_XWwXQCA.png"/></div></figure><p id="2f4c" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">很自然地，打开“干净”文件夹，选择其中的所有图像。然后点击“打开”。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nf"><img src="../Images/94a10c40ac9aef138e8d3edbe5a92d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2zFVJUuUs8hKlZWGjDhPQ.png"/></div></div></figure><p id="7985" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">对“凌乱”类的数据集做同样的操作。现在点击“火车模型”按钮。您的CNN现在了解到:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ng"><img src="../Images/8cb0635d26e8361e194a7b29221e0c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXJZbM63r3poAG7hfddHWA.png"/></div></div></figure><p id="8ebf" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">应该需要几分钟。训练后，您可以验证训练好的模型对其训练集之外的样本的识别能力。选择“文件”作为验证源，然后单击按钮“从您的文件中选择图像”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nh"><img src="../Images/210e80bb0c8f0881edd6e763742053ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MMEVZZE7QnUM50nu4I7FfQ.png"/></div></div></figure><p id="255a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在文件选择对话框中，打开提取数据集的文件夹，然后转到“images/val”文件夹。然后挑选一些“干净”的图像。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9f85e19a2cab273d06a196c0836d2476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*quu-XicO_RpaZ5P-FAkaqQ.png"/></div></figure><p id="b01a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">如你所见，你的CNN以100%的准确率将其正确分类:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nj"><img src="../Images/8baa6f3d7b34ecb824e614506ba5d5bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9DzohAdxfhaoEE93at1dg.png"/></div></div></figure><p id="8a4e" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在验证一些“杂乱”的图像:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nk"><img src="../Images/4c499afb109d2b73e1f6a9551d0e3012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZmQ8ivDv2wIbgkykZifeg.png"/></div></div></figure><p id="5ba8" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">哇，这是一个令人印象深刻的结果！您可以选择验证更多图像。</p><p id="0e22" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在是时候下载你训练好的模型了。您将实际下载一个特定于<strong class="kb ir">的</strong>格式的模型。对于Flutter，我们必须选择“Tensorflow Lite”格式。使用默认的“模型转换类型”。点击“下载我的模型”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nl"><img src="../Images/7aa5bf5204308230037430a762cf2e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTenpTrznK1l7Y8MD0ieRw.png"/></div></div></figure><p id="9f01" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">这需要几分钟。最后，您将看到下载的zip存档，其中包含这两个文件:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/30d936f1e063317fab7ed73dd0d462ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*lbQAG6EGrbV5SieGZzJApg.png"/></div></figure><p id="70a7" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">“labels.txt”包含了标签名“干净”和“脏乱”。“model _ un quant”—包含您的已训练模型的表示。</p><h1 id="a052" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">颤振:项目准备</h1><p id="71c8" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">我们将使用<a class="ae jy" href="https://flutlab.io/" rel="noopener ugc nofollow" target="_blank">FlutLab</a>—Flutter online IDE。<a class="ae jy" href="https://flutlab.io/" rel="noopener ugc nofollow" target="_blank">在浏览器中打开</a>。如果你已经注册了——转到你的个人资料，在“无状态Hello World”的基础上创建一个新项目。如果您是FlutLab的新用户，请单击“开始使用”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nn"><img src="../Images/0cadbab6b6f720fd603cc54748e28ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZ_FQdh6H8RYhWw9RHLzhA.png"/></div></div></figure><p id="63a9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">如果你是FlutLab的新成员，我们会考虑这个案例。你应该看到新创建的项目的文件树，在Android、IOS或WEB应用程序的中心打印“Hello World ”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi no"><img src="../Images/557ea819b83c02ff4c28daa6103ed25b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nl133yhjJQZ7CKi0jlNQ5A.png"/></div></div></figure><p id="8574" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">让我们做一些改变。最好先注册，因为这样的改动有一部分需要注册用户。点击屏幕右上角的登录图标:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi np"><img src="../Images/1519d2d69d3b317e09cec266728673f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvHUnDSuTH40gOzelEqWMA.png"/></div></div></figure><p id="f3ca" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">完成注册过程。因此，应该会出现一些附加控件。单击项目名称旁边的笔:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nq"><img src="../Images/51e9eb107903878d05fcd79b3547054b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x5gpH89HnimzYyj0yUsCQQ.png"/></div></div></figure><p id="be4e" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">它允许您重命名项目。让它成为“mlpub1”。你可以选择任何其他适合你的名字。</p><p id="e350" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在我们来简化一下“main.dart”。它应该只是一个返回MaterialApp的StatelessWidget，包装在Home widget周围:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nr"><img src="../Images/56169086de426c5456743a6b0cc75d5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JWmdjB_DxbtS9mS5KoeETw.png"/></div></div></figure><p id="ca64" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">主页小部件暂时不存在。让我们创造它。单击“lib”文件夹级别上的“添加文件”图标:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/b53fd0a1e1092010e85aa2c45f396b81.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*zl5Zg9FJ9MYLnjZvJG25EQ.png"/></div></figure><p id="0233" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">将“home.dart”作为新文件名。让我们用众所周知的StatefullWidget填充它的内容，现在用空容器返回Scaffold。添加带有文本小部件的AppBar。文本应该是“干净的或凌乱的”。现在让我们点击“热预览”按钮:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nt"><img src="../Images/32208777c26a9ad966ddb36f9fc255b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgT8S6QqtzYki225O56G1A.png"/></div></div></figure><p id="34a9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">您应该会看到一个可用的空应用程序:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nu"><img src="../Images/a238edcf1f9d6bb7eaf24fd1e38e21e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7lzwk1DBxgIr85rl2x-E7w.png"/></div></div></figure><p id="b809" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们已经完成了颤振项目的准备工作。现在我们应该换个方式，将Tensorflow Lite的东西添加到我们的项目中。</p><h1 id="5645" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">颤振:添加Tensorflow Lite</h1><p id="ca74" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">首先我们来编辑一下“pubspec.yaml”。</p><p id="db83" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">添加2个新的依赖项:</p><pre class="mp mq mr ms gt nv nw nx ny aw nz bi"><span id="d57f" class="oa ky iq nw b gy ob oc l od oe">image_picker: ^0.6.7+4<br/>tflite: ^1.1.1</span></pre><p id="6d9b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">image_picker是一个用于从相机或图库收集图像的库。<br/> tflite是Tensorflow Lite，具有在设备上托管深度神经网络的超强能力:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi of"><img src="../Images/ff6e6e0db83d253feabe88040dba83bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jXOHMS7ru3o5zYs4nP51yQ.png"/></div></div></figure><p id="0e00" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在允许在资产文件夹中访问资产:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi og"><img src="../Images/2b868f66a2e4d35763872f80f2b819b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z4CDsyOyNy81llgPrW5xmw.png"/></div></div></figure><p id="315b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在让我们添加<strong class="kb ir">资产</strong>文件夹本身:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/6bb297288be84d7baf16f43d72046522.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*MPb48bRTUth3Vs-dcrkDbw.png"/></div></figure><p id="e747" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">上传3个文件到新创建的<strong class="kb ir">资产</strong>文件夹:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/d6cc19404246a0aa1e8a27a111cfbbae.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*0GUBxtiY8MM-p0f3HrMCAA.png"/></div></figure><p id="592a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">“labels.txt”和“model_unquant.tflite”正是我们在模型训练后从可教机器上下载的那两个文件。</p><p id="ce62" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">“room . png”——是一个占位符图像，用于我们应用程序的UI中的任意房间。您可以从验证集或训练集中选择任何图像，并将其重命名为“room.png”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/967d0a13bc5352c7586e213330210381.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*rv_PnbtKnWoRJY4IvF6SqQ.png"/></div></figure><p id="5ced" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在让我们打开“labels.txt”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ok"><img src="../Images/cfd833b6188daf76b8b1f9b7bf8e68f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jua8tmGeGBh-ozCHSNFnyQ.png"/></div></div></figure><p id="9d02" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">去掉前导数字——只有“干净”和“杂乱”的单词。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/d457e41f94eb3f9ecbf4908eac27ec90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*X-nvrhJUtSD2vpQxuJUO5A.png"/></div></figure><p id="0e93" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在让我们添加一些肉来连接所有的东西。用这个新的实现替换类<strong class="kb ir"> _HomeState </strong>:</p><pre class="mp mq mr ms gt nv nw nx ny aw nz bi"><span id="4e52" class="oa ky iq nw b gy ob oc l od oe">class _HomeState extends State&lt;Home&gt; {</span><span id="9cf1" class="oa ky iq nw b gy om oc l od oe">  final picker = ImagePicker();</span><span id="c158" class="oa ky iq nw b gy om oc l od oe">  File _image;</span><span id="3447" class="oa ky iq nw b gy om oc l od oe">  bool _loading = false;</span><span id="8069" class="oa ky iq nw b gy om oc l od oe">  List _output;</span><span id="b5b8" class="oa ky iq nw b gy om oc l od oe"><br/>  @override <br/>  void initState() {</span><span id="9464" class="oa ky iq nw b gy om oc l od oe">    super.initState();</span><span id="4aac" class="oa ky iq nw b gy om oc l od oe">    _loading = true;</span><span id="38e3" class="oa ky iq nw b gy om oc l od oe">    loadModel().then((value) {<br/>      // TODO: add some interactivity<br/>    });</span><span id="1e44" class="oa ky iq nw b gy om oc l od oe">  }<br/></span><span id="1609" class="oa ky iq nw b gy om oc l od oe">  @override void dispose() {</span><span id="66ca" class="oa ky iq nw b gy om oc l od oe">    super.dispose();</span><span id="e361" class="oa ky iq nw b gy om oc l od oe">    Tflite.close();</span><span id="7a34" class="oa ky iq nw b gy om oc l od oe">  }</span><span id="54c6" class="oa ky iq nw b gy om oc l od oe"><br/>  pickImage() async {</span><span id="e3a6" class="oa ky iq nw b gy om oc l od oe">    var image = await picker.getImage(source: ImageSource.camera);</span><span id="e5b8" class="oa ky iq nw b gy om oc l od oe">    if (image == null) return null;</span><span id="7141" class="oa ky iq nw b gy om oc l od oe">    setState(() {<br/>      _image = File(image.path);<br/>    });</span><span id="250c" class="oa ky iq nw b gy om oc l od oe">    classifyImage(_image);</span><span id="5349" class="oa ky iq nw b gy om oc l od oe">  }</span><span id="a663" class="oa ky iq nw b gy om oc l od oe"><br/>  pickGalleryImage() async {</span><span id="22e9" class="oa ky iq nw b gy om oc l od oe">    var image = await picker.getImage(source: ImageSource.gallery);</span><span id="d803" class="oa ky iq nw b gy om oc l od oe">    if (image == null) return null;</span><span id="4775" class="oa ky iq nw b gy om oc l od oe">    setState(() {<br/>      _image = File(image.path);<br/>    });</span><span id="1c42" class="oa ky iq nw b gy om oc l od oe">    classifyImage(_image);</span><span id="79e1" class="oa ky iq nw b gy om oc l od oe">  }</span><span id="49da" class="oa ky iq nw b gy om oc l od oe"><br/>  classifyImage(File image) async {</span><span id="30aa" class="oa ky iq nw b gy om oc l od oe">    var output = await Tflite.runModelOnImage(<br/>      path: image.path,<br/>      numResults: 2,<br/>      threshold: 0.5,<br/>      imageMean: 127.5,<br/>      imageStd: 127.5);</span><span id="3998" class="oa ky iq nw b gy om oc l od oe">    setState(() {<br/>      _loading = false;<br/>      _output = output;<br/>    });</span><span id="f027" class="oa ky iq nw b gy om oc l od oe">  }</span><span id="aa5d" class="oa ky iq nw b gy om oc l od oe">  loadModel() async {</span><span id="eb27" class="oa ky iq nw b gy om oc l od oe">    await Tflite.loadModel(<br/>      model: 'assets/model_unquant.tflite',<br/>      labels: 'assets/labels.txt',<br/>    );</span><span id="5dc1" class="oa ky iq nw b gy om oc l od oe">  }</span><span id="83ae" class="oa ky iq nw b gy om oc l od oe">  @override<br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        title: Text("Clean OR Messy"),<br/>      ),</span><span id="58ad" class="oa ky iq nw b gy om oc l od oe">      body: Container(<br/>        padding: EdgeInsets.only(left: 10, right: 10),<br/>        child: SingleChildScrollView(<br/>          child: Column(<br/>            mainAxisAlignment: MainAxisAlignment.start,<br/>            crossAxisAlignment: CrossAxisAlignment.start,<br/>            children: &lt;Widget&gt;[</span><span id="0f9c" class="oa ky iq nw b gy om oc l od oe">              // Buttons<br/>              Column(<br/>                mainAxisAlignment: MainAxisAlignment.start,<br/>                crossAxisAlignment: CrossAxisAlignment.start,<br/>                children: &lt;Widget&gt;[<br/>                  _GroupText('Choose source:'),<br/>                  ButtonBar(<br/>                    alignment: MainAxisAlignment.center,<br/>                    buttonMinWidth: 150,<br/>                    layoutBehavior: ButtonBarLayoutBehavior.padded,<br/>                    buttonPadding: EdgeInsets.symmetric(vertical: 10),</span><span id="8d2f" class="oa ky iq nw b gy om oc l od oe">                    children: &lt;Widget&gt;[<br/>                      RaisedButton(<br/>                        onPressed: pickImage,<br/>                        child: Text('Cam'),<br/>                      ),</span><span id="b2a6" class="oa ky iq nw b gy om oc l od oe">                      SizedBox(width: 20),</span><span id="b72c" class="oa ky iq nw b gy om oc l od oe">                      RaisedButton(<br/>                        onPressed: pickGalleryImage,<br/>                        child: Text('Gallery'),<br/>                      ),</span><span id="238d" class="oa ky iq nw b gy om oc l od oe">                    ],</span><span id="37e1" class="oa ky iq nw b gy om oc l od oe">                  )</span><span id="6b35" class="oa ky iq nw b gy om oc l od oe">                ],</span><span id="9e94" class="oa ky iq nw b gy om oc l od oe">              ),</span><span id="f982" class="oa ky iq nw b gy om oc l od oe">              _SpaceLine(),</span><span id="877b" class="oa ky iq nw b gy om oc l od oe">              // Image</span><span id="089f" class="oa ky iq nw b gy om oc l od oe">              Center(<br/>                child: _loading ? <br/>                  Container(<br/>                    width: 300,<br/>                    child: Column(<br/>                      children: &lt;Widget&gt;[<br/>                        SizedBox(height: 50),<br/>                        Image.asset('assets/room.png'),<br/>                      ],<br/>                    ),<br/>                  )</span><span id="59de" class="oa ky iq nw b gy om oc l od oe">                  : Container(<br/>                    child: Column(<br/>                      children: &lt;Widget&gt;[<br/>                        _output != null ? <br/>                          Container(<br/>                            padding: EdgeInsets.symmetric(vertical: 10),<br/>                            child: Text('${_output[0]['label']}',<br/>                            style: TextStyle(<br/>                              color: Colors.red, fontSize: 20.0)),<br/>                            )</span><span id="69c6" class="oa ky iq nw b gy om oc l od oe">                          : Container(),</span><span id="36c9" class="oa ky iq nw b gy om oc l od oe">                        SizedBox(height: 20,),</span><span id="7fbd" class="oa ky iq nw b gy om oc l od oe">                        Container(<br/>                          height: 250,<br/>                          child: Image.file(_image),<br/>                        ),<br/>                      ],</span><span id="37bf" class="oa ky iq nw b gy om oc l od oe">                    )),</span><span id="f520" class="oa ky iq nw b gy om oc l od oe">                  ),</span><span id="2a10" class="oa ky iq nw b gy om oc l od oe">                ],</span><span id="68de" class="oa ky iq nw b gy om oc l od oe">              ),</span><span id="3e5e" class="oa ky iq nw b gy om oc l od oe">            ),</span><span id="d7fa" class="oa ky iq nw b gy om oc l od oe">          ),</span><span id="b36c" class="oa ky iq nw b gy om oc l od oe">        );</span><span id="5891" class="oa ky iq nw b gy om oc l od oe">     }</span><span id="3267" class="oa ky iq nw b gy om oc l od oe">}</span></pre><p id="bd6b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">稍后我们将解释它的工作。</p><p id="cbb9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">还要在“home.dart”中添加两个辅助类:</p><pre class="mp mq mr ms gt nv nw nx ny aw nz bi"><span id="22eb" class="oa ky iq nw b gy ob oc l od oe">class _GroupText extends StatelessWidget {<br/>  final String text;<br/>  const _GroupText(this.text);</span><span id="27aa" class="oa ky iq nw b gy om oc l od oe">  @override<br/>  Widget build(BuildContext context) {<br/>    return Padding(<br/>      padding: EdgeInsets.symmetric(vertical: 5, horizontal: 15),<br/>      child: Text(<br/>        text,<br/>        style: TextStyle(fontSize: 25, fontWeight: FontWeight.w500),<br/>      ),<br/>    );<br/>  }<br/>}</span><span id="cfb6" class="oa ky iq nw b gy om oc l od oe">class _SpaceLine extends StatelessWidget {</span><span id="4bf9" class="oa ky iq nw b gy om oc l od oe">  @override<br/>    Widget build(BuildContext context) {<br/>      return SizedBox(<br/>        height: 5,<br/>        child: Container(<br/>        color: Colors.grey,<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="10b4" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">最后，“home.dart”的结构应该是这样的:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi on"><img src="../Images/9109ec742e107c6c5b9649eff2a5f501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ZHFRYrTKdNReHuinarKCg.png"/></div></div></figure><p id="0664" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">让我们向该文件添加2个新的导入行:</p><pre class="mp mq mr ms gt nv nw nx ny aw nz bi"><span id="7248" class="oa ky iq nw b gy ob oc l od oe">import 'package:image_picker/image_picker.dart';</span><span id="d0ff" class="oa ky iq nw b gy om oc l od oe">import 'package:tflite/tflite.dart';</span></pre><p id="acd5" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">一些最后的修改需要在“android/app/build.gradle”文件中完成。</p><p id="676b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">将<strong class="kb ir"> minSdkVersion </strong>设置为<strong class="kb ir"> 19 </strong>:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oo"><img src="../Images/18fe2f96565affff9efa430c34aa294e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpDhx0hWdi_L3aAGUojTnw.png"/></div></div></figure><p id="0788" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在“android”块中输入以下代码片段:</p><pre class="mp mq mr ms gt nv nw nx ny aw nz bi"><span id="8f43" class="oa ky iq nw b gy ob oc l od oe">aaptOptions {<br/>    noCompress 'tflite'<br/>    noCompress 'lite'<br/>}</span></pre><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi op"><img src="../Images/2ef3185925e026f611b0db45c03e622d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*weREIMJEleWkPFqejy9Yvw.png"/></div></div></figure><p id="e31e" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在你可以在Android模拟器上运行这个程序了。</p><h1 id="2f77" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">颤振:运行我们的应用程序</h1><p id="edcb" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">确保在“build”按钮附近的下拉列表中选择“Android-x86”(平台，适用于仿真器)。点击“构建”:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oq"><img src="../Images/1412eb6c628a87a71e379cb3c5cba9e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wa3TBzL2VQWkpk1x-UHPOA.png"/></div></div></figure><p id="3e74" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">您将看到大约1分钟的构建动画:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi op"><img src="../Images/209f72c006d5a5c7929d542e9cf2bb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNhUkLV5BoAor-OiwxLAdQ.png"/></div></div></figure><p id="5b4c" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">构建的结果应该是成功的。您可以在结果框中找到生成的应用程序的链接。点击“获取我的。apk”将应用程序下载到您的电脑:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi or"><img src="../Images/4ecf9cb133b2db1f9668126c5416315f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EoeUMs9_K3Qm7T4mbiOitw.png"/></div></div></figure><p id="8f1f" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在让我们在云Android模拟器上运行这个应用程序。打开<a class="ae jy" href="https://appetize.io/upload" rel="noopener ugc nofollow" target="_blank">Appetize.io/upload</a>:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nf"><img src="../Images/aed69473f959082017e7516dad873424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKAPDU4Swxlr2ZXSon1rsw.png"/></div></div></figure><p id="e941" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在步骤1中，打开下载的应用程序的<strong class="kb ir">。apk </strong>文件。然后把你的电子邮件收到模拟器的链接。您应该很快就会在收件箱中找到该电子邮件:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/37c40431059b62147099b8780c061a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*Vhi6BMQns8gEdtZxtng3dA.png"/></div></figure><p id="0dc3" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">打开第一个链接。你应该可以在那里找到Android模拟器。点击它的屏幕，你会看到你的应用程序加载:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/8057723c3a853c98511d1689a02d1357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*WYO2sXxQKHZVTgdp-tuoUA.png"/></div></figure><p id="b71c" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">点击“图库”并接受打开照片的权限:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/f7aabaa5c1648dd6069815f753714ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*cjITXWeqK9CbB9HbjHW3mA.png"/></div></figure><p id="30f3" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">现在挑选一些干净客厅的照片。如果画廊是空的，你可以在设备上打开Chrome应用程序，搜索“干净的客厅”或“凌乱的客厅”，并下载一些找到的图片。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/d143caa9872d03dc22b8acebfb6ee698.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*CfUxprALH27aiKKPVxg2EQ.png"/></div></figure><p id="4b3d" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">还有哒哒！你可以看到适当分类的<strong class="kb ir">干净的</strong>客厅。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/8ec46f33923116f257d59aa4d431769d.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*mKvBGmNmGLZaNiTox2sFtQ.png"/></div></figure><p id="f8cc" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">凌乱的厨房也是一样！</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/74bdcc66838572d6953203bebafa6bbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*UIWilqzZpiYmtKiNUeG71A.png"/></div></figure><p id="beac" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">不要停下来！尝试不同房间的不同图像。此外，你可以构建“Android-arm64 ”,并使用二维码将应用程序上传到你的物理设备上。用摄像机对图像进行分类会更有趣！</p><h1 id="38e0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">它是如何工作的？</h1><p id="68dc" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">到目前为止，我们已经进行了一些实际旅行。但是，让我们看看引擎盖下，我们的应用程序是如何工作的。</p><p id="7044" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">首先是Tensorflow模型的初始化。这是通过<strong class="kb ir"> initState() </strong>生命周期方法中的<strong class="kb ir"> loadModel() </strong>方法完成的:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ow"><img src="../Images/5eb76dc35efce6c2a11d5f1606350bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PtRJeiz6V4jhV2PUzLcJ1Q.png"/></div></div></figure><p id="6cd9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">其中<strong class="kb ir"> loadModel() </strong>委托给<strong class="kb ir"> Tflite </strong>类中同名的方法。如你所见，它需要我们的两个朋友:训练好的模型和它的标签。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ox"><img src="../Images/2a21c83673c3031bc8a873bab07f3e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9jVw_fkP0oNSgPQbUJj9Og.png"/></div></div></figure><p id="02b7" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">当我们点击“图库”按钮时，它调用<strong class="kb ir"> pickGalleryImage() </strong>方法:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oy"><img src="../Images/37be5c3912798031ee149ca218f7efcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3c2QqLAX5enkc-XXxNgOAQ.png"/></div></div></figure><p id="6e94" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">它做两件事:</p><ul class=""><li id="75e2" class="ma mb iq kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">允许用户从图库中挑选一些图像</li><li id="561d" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">调用calssifyImage()方法，该方法依次将_output字符串设置为已识别的图像类(“干净”或“凌乱”)</li></ul><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oz"><img src="../Images/4e26663374c65ab3702258503f84a108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8OydgxQ6IbdTd4_cX4cLQ.png"/></div></div></figure><p id="0bf7" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">而且，因为在setState()中设置了<strong class="kb ir"> _output </strong>，所以这个代码片段在识别的类字符串从Tensorflow模型返回后立即打印它:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi oz"><img src="../Images/67948fc641551195f037cf7632a755e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dLW567kPcLQbtZCJsAgEPQ.png"/></div></div></figure><p id="f298" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">这都是关于“干净或凌乱”。但是我们在ML中关于颤振的旅程还在继续…</p></div></div>    
</body>
</html>