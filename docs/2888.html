<html>
<head>
<title>Detect JavaScript errors during compile time using TypeScript compiler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript编译器在编译时检测JavaScript错误</h1>
<blockquote>原文：<a href="https://itnext.io/detect-javascript-errors-during-compile-time-using-typescript-compiler-be593b853c13?source=collection_archive---------1-----------------------#2019-08-22">https://itnext.io/detect-javascript-errors-during-compile-time-using-typescript-compiler-be593b853c13?source=collection_archive---------1-----------------------#2019-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2a8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们都知道TypeScript是一种将自身编译成JavaScript语言。在编译时，TypeScript可以向终端发出错误，并且根本不允许编译代码。</p><p id="32bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">即使您正在编写纯JavaScript代码，我们仍然可以使用TypeScript编译器在编译时检测可能的错误，而不是在运行时测试和遇到它们。这可能非常昂贵(<a class="ae ko" href="https://dev.to/joelnet/null-the-billion-dollar-mistake-maybe-just-nothing-1cak" rel="noopener ugc nofollow" target="_blank">十亿美元的错误</a>)。</p><p id="f9fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JavaScript编译期间检测问题最常用的工具是linters。Linters可以以非常严格的方式配置，这可以显著提高代码的质量。</p><p id="f45f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用TypeScript编译器为我们完成这项工作还有其他优点，例如:</p><ul class=""><li id="369c" class="kp kq it js b jt ju jx jy kb kr kf ks kj kt kn ku kv kw kx bi translated">有打字稿(。ts)文件，并使用TypeScript语言中一些非常酷的特性。(慢慢地将项目迁移到TypeScript)</li><li id="15d9" class="kp kq it js b jt ky jx kz kb la kf lb kj lc kn ku kv kw kx bi translated">编译成不同的JavaScript版本。</li></ul><h2 id="dad0" class="ld le it bd lf lg lh dn li lj lk dp ll kb lm ln lo kf lp lq lr kj ls lt lu lv bi translated">配置项目以使用TypeScript编译器</h2><p id="1626" class="pw-post-body-paragraph jq jr it js b jt lw jv jw jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn im bi translated">配置您的JavaScript项目应该非常容易。</p><p id="7c29" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们必须将TypeScript作为依赖项添加到项目中:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="ee8e" class="ld le it mg b gy mk ml l mm mn">npm install typescript --save-dev</span></pre><p id="5662" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">之后，我们必须在一个项目的根目录下创建tsconfig.json。我为这个演示选择了以下配置，但是您可以根据需要进行调整或更改。<br/>您可以在这里找到的所有可能值的列表:<a class="ae ko" href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" rel="noopener ugc nofollow" target="_blank"> TypeScript编译器选项。</a></p><figure class="mb mc md me gt mo"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">tsconfig.json</figcaption></figure><p id="8f8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里最重要的标志是:</p><p id="b9f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> allowJs </strong>和<strong class="js iu"> checkJs </strong>，顾名思义就是允许在项目中使用JavaScript并编译。必须关闭noImplicitAny ，因为我们无法在JavaScript中定义类型。<br/> <strong class="js iu"> dist </strong>是一个文件夹，我们将在其中保存编译后的代码。<br/> <strong class="js iu"> src </strong>文件夹是我们源代码的一个根目录。</p><p id="acd7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将在package.json中注册用于编译的附加脚本:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="d7e8" class="ld le it mg b gy mk ml l mm mn"><strong class="mg iu">"scripts"</strong>: {<br/>  <strong class="mg iu">"compile"</strong>: <strong class="mg iu">"tsc"<br/></strong>},</span></pre><h2 id="6a1f" class="ld le it bd lf lg lh dn li lj lk dp ll kb lm ln lo kf lp lq lr kj ls lt lu lv bi translated">演示时间</h2><p id="68f9" class="pw-post-body-paragraph jq jr it js b jt lw jv jw jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn im bi translated">让我们在<strong class="js iu"> src </strong>文件夹中创建一个名为app.js的简单文件，并在其中放置一些代码:</p><figure class="mb mc md me gt mo"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="bab6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以上代码，Node.js解释器会成功解释。结果将是:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="a309" class="ld le it mg b gy mk ml l mm mn">Car { name: 'BMW' }</span></pre><p id="217c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们试图用定义好的<strong class="js iu"> npm运行编译</strong>脚本来编译它，编译器会发出错误:</p><figure class="mb mc md me gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mv"><img src="../Images/6eeeb3125677f5847d10daa8c205a586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4GMFS5JtpcinzqZ2l2gQQ.png"/></div></div></figure><p id="8ea9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们正在传递一个没有在方法中定义的参数。</p><p id="356b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，如果我们试图在Node.js中运行这个简单的代码</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="fefb" class="ld le it mg b gy mk ml l mm mn"><strong class="mg iu">let <em class="nc">myNumber </em></strong>= 23;<br/><strong class="mg iu"><em class="nc">myNumber </em></strong>= <strong class="mg iu">'23'</strong>;<br/><br/><strong class="mg iu"><em class="nc">console</em></strong>.log(<strong class="mg iu">typeof <em class="nc">myNumber</em></strong>)</span></pre><p id="255c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出将是:<strong class="js iu">字符串</strong></p><p id="d9fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们试图用一个类型脚本来编译它。</p><figure class="mb mc md me gt mo gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/b5e61f1befb2702bb77061dca3471cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*QKZ46336suvvr1ddBdCf0Q.png"/></div></figure><h2 id="5a47" class="ld le it bd lf lg lh dn li lj lk dp ll kb lm ln lo kf lp lq lr kj ls lt lu lv bi translated">写作时间</h2><p id="978c" class="pw-post-body-paragraph jq jr it js b jt lw jv jw jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn im bi translated">如果你使用WebStorm这样的编辑器，编辑器会立即在屏幕上显示错误，甚至在编译之前。</p><figure class="mb mc md me gt mo gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/867bc24ae357e03be119c49635ae2b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*r9EWMiGoSueseOZCGK8iGw.png"/></div></figure><h2 id="ad66" class="ld le it bd lf lg lh dn li lj lk dp ll kb lm ln lo kf lp lq lr kj ls lt lu lv bi translated">抑制错误</h2><p id="1fc3" class="pw-post-body-paragraph jq jr it js b jt lw jv jw jx lx jz ka kb ly kd ke kf lz kh ki kj ma kl km kn im bi translated">如果您出于某种原因想要忽略该行(将其从编译中排除)，您可以在该行上方放置一个注释// @ts-ignore。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="48e4" class="ld le it mg b gy mk ml l mm mn"><strong class="mg iu">class </strong>FactoryClass {<br/><br/>    <em class="nc">// @ts-ignore<br/>    </em>create(name, origin) {<br/><br/>        <strong class="mg iu">return new </strong>Car(name);<br/>    }<br/>}</span></pre></div></div>    
</body>
</html>