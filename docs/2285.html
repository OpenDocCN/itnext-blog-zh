<html>
<head>
<title>Join the Stellar testnet the easy way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以简单的方式加入恒星测试网</h1>
<blockquote>原文：<a href="https://itnext.io/join-the-stellar-testnet-the-easy-way-70ae5f1e753f?source=collection_archive---------4-----------------------#2019-04-30">https://itnext.io/join-the-stellar-testnet-the-easy-way-70ae5f1e753f?source=collection_archive---------4-----------------------#2019-04-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9cec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">了解如何使用Docker Compose通过Stellar开发团队的testnet实现定额。</p></div><div class="ab cl kl km hu kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="ij ik il im in"><h1 id="566e" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">背景</h1><p id="72ff" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">作为研究工作的一部分，我希望建立自己独立的恒星网络。我能够从SatoshiPay GitHub repo中找到一个现有的项目，其中包括一个Docker编写文件，成为Stellar live网络的一部分。我认为这将是一件很酷的事情，看看如何将它应用到Stellar testnet，并最终在未来的某个时候扩展到Stellar独立部署。</p><h1 id="d31d" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">加入测试网络</h1><p id="f14d" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">正如在背景中提到的，最初的Docker Compose配置指向的是活动网络，这不是我在这个概念验证中想要使用的。我做了一些谷歌搜索，发现恒星核心文件<a class="ae lv" href="https://github.com/stellar/stellar-core/blob/master/docs/stellar-core_testnet.cfg" rel="noopener ugc nofollow" target="_blank">测试网络配置</a>。为了便于使用，我在这里包含了这些内容。</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="bc4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来我要做的就是找出如何将这些设置映射到compose，这样我的本地节点就可以成为Stellar testnet的一部分。</p><h1 id="5d22" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">加入网络</h1><p id="8051" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">在查看了现有的配置并比较了撰写文件中定义的实时网络属性后，我觉得我已经很清楚要作为另一个节点加入到星型网络中需要做些什么。我关注的重点领域是现有的对等网络和节点，以及如何检索Stellar testnet上的交易活动历史。结果是一个映射到Stellar testnet的更新的compose yaml文件。</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h1 id="4490" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">朋友机器人</h1><p id="3376" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">testnet包括一项服务，允许开发者快速创建名为<a class="ae lv" href="http://The test https://www.stellar.org/laboratory/#account-creator" rel="noopener ugc nofollow" target="_blank"> Friendbot </a>的明星账户。我将使用这个服务在testnet上创建一个新帐户。这将允许我验证该帐户存在于我的本地节点中，并确保我已经与更大的testnet节点建立了共识。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/a5d2bcc0bd3604c4e24763d3d4a72a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CPbfdpPxJlL1UUOi7w9iSg.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">Friendbot创建并资助了一个测试账户</figcaption></figure><p id="bf4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我可以使用horizon UI验证帐户是否已创建，并检索帐户创建所提交的分类帐。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mt"><img src="../Images/9bbfb1207142d1bdf74573292299b9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sRdHp1FIpc2-5n8W0OqLbA.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">从公共testnet horizon UI获得的帐户</figcaption></figure><h1 id="4fe2" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">建立法定人数</h1><p id="a168" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">为了验证我们的本地节点是否与全球Stellar testnet同步，Stellar提供了一个指标端点，其中包括本地节点知道的最新分类帐。我发现，初始的法定人数需要时间来建立，但是一旦节点被赶上，网络在确保法定人数方面确实响应迅速。当分类帐编号大于包含交易的分类帐时，您将知道分类帐被卡住。使用指标端点<code class="fe mu mv mw mx b"><a class="ae lv" href="http://localhost:80000/metrics" rel="noopener ugc nofollow" target="_blank">http://localhost:80000/metrics</a>,</code>您可以验证该账户是否作为分类账103514的一部分，指标端点表示本地分类账现在为103581。</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h1 id="36db" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">验证帐户</h1><p id="0abf" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">现在我们已经建立了quorum，我们现在可以使用我们的本地Stellar节点检索我们在testnet上创建的帐户。为了检索特定的帐户，http API的格式为<a class="ae lv" href="http://localhost:8000/account/$publickey" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/account/$ public key</a></p><p id="727a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们之前用Friendbot创建的账户的结果。</p><blockquote class="my mz na"><p id="742c" class="jn jo nb jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated"><a class="ae lv" href="http://localhost:8000/accounts/GAAQSHWBQD4Y67WCUSQDSCMOKMYHAIR2UAC7AS6ESZC2XUQVG7T3VHAT" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/accounts/gaaqshwbqd 4y 67 wcusqdsscmokmyhair 2 UAC 7 as 6 eszc 2 xuqvg 7t 3 vhat</a></p></blockquote><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="4a73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您在响应中看到的，本地节点知道最近创建的帐户，我们已经为这个分类帐事务建立了仲裁。</p><h1 id="f038" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">把所有的放在一起</h1><p id="d4cd" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">既然已经验证了我们已经就最新的事务达成了共识，我们可以开始利用Stellar SDK来驱动各种API调用，并验证我们可以使用Stellar的特性。为了演示这一点，我编写了两个示例流，称为simpleFlow和multiSigFlow，它们利用了Stellar SDK的大多数关键特性。</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h1 id="3730" class="ks kt iq bd ku kv lw kx ky kz lx lb lc ld ly lf lg lh lz lj lk ll ma ln lo lp bi translated">结论</h1><p id="d236" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">在本文中，我介绍了如何配置本地testnet节点来充分利用Docker Compose。虽然一开始建立共识需要一些耐心，但是拥有一个用于测试和开发的本地测试网的好处是值得的。要访问本文中使用的全套资源，请查看我的GitHub项目stellar-testnet。</p><div class="nf ng gp gr nh ni"><a href="https://github.com/todkap/stellar-testnet" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">todkap/stellar-testnet</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">部署简单Stellar testnet节点- todkap/stellar-testnet的配置</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw mn ni"/></div></div></a></div></div></div>    
</body>
</html>