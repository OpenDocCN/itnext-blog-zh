<html>
<head>
<title>Set-up React Stack with Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Webpack设置React堆栈</h1>
<blockquote>原文：<a href="https://itnext.io/from-zero-to-deploy-set-up-react-stack-with-webpack-3-20b57d6cb8d7?source=collection_archive---------2-----------------------#2018-01-30">https://itnext.io/from-zero-to-deploy-set-up-react-stack-with-webpack-3-20b57d6cb8d7?source=collection_archive---------2-----------------------#2018-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/aa05512fbcc4e78ced21a08f094c22d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0N4gtR5m2BvrbjJMilkHVw.png"/></div></div></figure><h1 id="d3d8" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">先决条件:</h1><ol class=""><li id="b273" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">安装<a class="ae lo" href="https://yarnpkg.com/lang/en/docs/install/" rel="noopener ugc nofollow" target="_blank">纱线</a></li><li id="ffc1" class="kw kx iq ky b kz lp lb lq ld lr lf ls lh lt lj lk ll lm ln bi translated">在<a class="ae lo" href="http://nodesource.com/blog/installing-node-js-tutorial-using-nvm-on-mac-os-x-and-ubuntu/" rel="noopener ugc nofollow" target="_blank"> ubuntu或mac </a>或<a class="ae lo" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> windows </a>上安装Node v 9.2.0。</li></ol><h1 id="bd49" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置:</h1><ol class=""><li id="4123" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated"><strong class="ky ir">创建项目目录:</strong></li></ol><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="d6dc" class="md jz iq lz b gy me mf l mg mh">mkdir projectName &amp;&amp; cd projectName</span></pre><p id="8d96" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 2。用纱线初始化项目:</strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="120f" class="md jz iq lz b gy me mf l mg mh">yarn init</span></pre><blockquote class="mz na nb"><p id="2fee" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated">系统会提示您一些问题，您可以按<em class="iq">键输入</em>作为默认值，或者输入您对每个问题的答案，直到结束。</p><p id="757c" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated">之后，它会在你的根目录下生成一个文件<strong class="ky ir"> package.json </strong>。</p></blockquote><p id="f600" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 3。使用es6功能。安装babel <em class="nc">(作为devDependencies): </em> </strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="bbe9" class="md jz iq lz b gy me mf l mg mh">yarn add babel-cli babel-loader babel-preset-env babel-preset-react -D</span></pre><p id="d787" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 4。创建并配置</strong> <code class="fe ng nh ni lz b"><strong class="ky ir">.babelrc</strong></code> <strong class="ky ir">文件:</strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="ed21" class="md jz iq lz b gy me mf l mg mh">touch .babelrc</span></pre><blockquote class="mz na nb"><p id="3982" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated">带点(。)在babelrc这个词之前</p></blockquote><p id="fb4d" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">配置我们的<code class="fe ng nh ni lz b">.babelrc</code>把下面的代码放进去。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="8313" class="md jz iq lz b gy me mf l mg mh">// inside .babelrc<br/>{<br/> "presets": ["env", "react"]<br/>}</span></pre><p id="422d" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 5。安装React: </strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="0034" class="md jz iq lz b gy me mf l mg mh">yarn add react react-dom</span></pre><p id="821a" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">6。安装Webpack: </p><blockquote class="mz na nb"><p id="fcdc" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated">用于开发服务器和捆绑生产。我们安装webpack和它的devServer <em class="iq">(作为devDependencies) </em>:</p></blockquote><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="c5de" class="md jz iq lz b gy me mf l mg mh">yarn add webpack webpack-dev-server webpack-cli -D</span></pre><p id="7baa" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 7。将以下结构添加到项目目录中:</strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="c1bc" class="md jz iq lz b gy me mf l mg mh">- build/</span><span id="d185" class="md jz iq lz b gy nj mf l mg mh">   - index.html</span><span id="22ef" class="md jz iq lz b gy nj mf l mg mh">- src/</span><span id="c3a2" class="md jz iq lz b gy nj mf l mg mh">   - index.js</span><span id="c3f2" class="md jz iq lz b gy nj mf l mg mh">- webpack.config.js</span></pre><p id="4a76" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 8。设置webpack: </strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="a314" class="md jz iq lz b gy me mf l mg mh">// inside webpack.config.js</span><span id="ee09" class="md jz iq lz b gy nj mf l mg mh">const path = require('path')<br/>const webpack = require('webpack')</span><span id="56d6" class="md jz iq lz b gy nj mf l mg mh">module.exports = { <br/>  entry: './src/index.js',<br/>  output: {<br/>    path: path.resolve(__dirname, 'build'),<br/>    filename: 'index.bundle.js'<br/>  },  <br/>  mode: 'development',<br/>  devtool: 'inline-source-map',<br/>  devServer: {<br/>    contentBase: './build',<br/>    port: 3000<br/>  },  <br/>  module: {<br/>    rules: [<br/>      {test: /\.js$/, exclude: /node_modules/, use: 'babel-loader'}  <br/>    ]   <br/>  }<br/>}</span></pre><blockquote class="mz na nb"><p id="7897" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir">入口点:</strong>将<strong class="ky ir"> index.js </strong>放在<strong class="ky ir"> /src/ </strong>目录下。</p><p id="6762" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir">输出</strong>:名为i <strong class="ky ir"> ndex.bundle.js </strong>的生成文件，将在<strong class="ky ir"> /build/ </strong>目录下生成。</p></blockquote><p id="36b9" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 9。设置入口点的index.html: </strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="c240" class="md jz iq lz b gy me mf l mg mh">&lt;!-- inside /build/index.html --&gt;</span><span id="d88c" class="md jz iq lz b gy nj mf l mg mh">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;</span><span id="7550" class="md jz iq lz b gy nj mf l mg mh">  &lt;head&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8"&gt;<br/>    &lt;title&gt;Your Project Name&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  <br/>  &lt;body&gt;<br/>    &lt;div id='root'&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>  &lt;script src="./index.bundle.js"&gt;&lt;/script&gt;</span><span id="f679" class="md jz iq lz b gy nj mf l mg mh">&lt;/html&gt;</span></pre><p id="2d1c" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 10。设置入口点(index.js): </strong></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="ab88" class="md jz iq lz b gy me mf l mg mh">// inside src/index.js<br/>import React from 'react'<br/>import {render} from 'react-dom'<br/><br/>const App = () =&gt; {<br/> return &lt;<strong class="lz ir">div</strong>&gt;<br/>  &lt;<strong class="lz ir">h1</strong>&gt;React App Running!&lt;/<strong class="lz ir">h1</strong>&gt;<br/> &lt;/<strong class="lz ir">div</strong>&gt;<br/>}<br/><br/>render(<br/> &lt;<strong class="lz ir">App</strong>/&gt;,<br/> document.getElementById('root')<br/>)</span></pre><p id="0533" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated"><strong class="ky ir"> 11。添加脚本:</strong></p><p id="06e9" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">我们将为启动开发服务器和构建生产文件等任务添加脚本。</p><p id="9fd0" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">当我们之前运行<code class="fe ng nh ni lz b">yarn init</code>时，它生成了一个名为<strong class="ky ir"> <em class="nc"> package.json </em> </strong>的文件。我们将在那个<strong class="ky ir"> <em class="nc"> package.json </em> </strong>里面添加脚本:</p><blockquote class="mz na nb"><p id="c974" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated">我们可以将脚本添加到许可证部分之后，或者您想要的任何位置</p></blockquote><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="a6ac" class="md jz iq lz b gy me mf l mg mh">"license": "MIT",<br/>"scripts": {<br/>  "start": "webpack-dev-server --open",<br/>  "build": "npm run clean &amp;&amp; npm run compile",<br/>  "clean": "rm -rf ./build/index.bundle.js",<br/>  "compile": "NODE_ENV=production webpack --config ./webpack.config.js --progress"<br/>},</span></pre><blockquote class="mz na nb"><p id="f782" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir">启动</strong>:将启动webpack devserver，并在浏览器上自动打开<strong class="ky ir"> localhost:3000 </strong>。</p><p id="4463" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir">清理:</strong>将删除<strong class="ky ir"> /build/ </strong>目录下生成的<strong class="ky ir"> index.bundle.js </strong></p><p id="f4dd" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir">编译</strong> : webpack会在<strong class="ky ir"> /build/ </strong>目录下编译生成<strong class="ky ir"> index.bundle.js </strong></p><p id="e8aa" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir">构建</strong>:将运行脚本<strong class="ky ir">清理</strong>然后<strong class="ky ir">编译</strong></p></blockquote><blockquote class="nk"><p id="acb5" class="nl nm iq bd nn no np nq nr ns nt lj dk translated">设置完成！接下来是开发和生产。</p></blockquote><h1 id="c798" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj nu kl km kn nv kp kq kr nw kt ku kv bi translated">发展</h1><p id="c98c" class="pw-post-body-paragraph mi mj iq ky b kz la ml mm lb lc mo mp ld nx mr ms lf ny mu mv lh nz mx my lj ij bi translated">我们使用webpack作为我们的开发服务器。要启动开发服务器运行:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="cb83" class="md jz iq lz b gy me mf l mg mh">yarn start</span></pre><blockquote class="mz na nb"><p id="7a92" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir"> start </strong>是我们早前在<strong class="ky ir"> package.json </strong>中添加的脚本之一。如果你记得的话</p></blockquote><p id="bd44" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">这将自动打开您的浏览器并导航到<!-- --><strong class="ky ir"><em class="nc">localhost:3000</em></strong><!-- -->。您应该看到您的react页面正在运行。</p><p id="7756" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">这个开发服务器还支持<strong class="ky ir">热重新加载</strong>，所以当我们在源代码中做了一些改变时，我们的开发服务器会自动为我们重新加载页面。</p><h1 id="ee87" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">生产</h1><p id="196f" class="pw-post-body-paragraph mi mj iq ky b kz la ml mm lb lc mo mp ld nx mr ms lf ny mu mv lh nz mx my lj ij bi translated">我们使用webpack将所有的javascript文件捆绑到一个文件中。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/b44fa62b2909357c18a951de91f3f877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SL6RVjoNQaUdii2Qh9XeZg.png"/></div></div></figure><p id="b263" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">要运行webpack捆绑包:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="1d47" class="md jz iq lz b gy me mf l mg mh">yarn build</span></pre><blockquote class="mz na nb"><p id="1b7e" class="mi mj nc ky b kz mk ml mm lb mn mo mp nd mq mr ms ne mt mu mv nf mw mx my lj ij bi translated"><strong class="ky ir"> build </strong>是我们之前在<strong class="ky ir"> package.json </strong>中添加的脚本之一。</p></blockquote><p id="0ac6" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">这将创建一个名为<code class="fe ng nh ni lz b">index.bundle.js</code>的文件，保存在<code class="fe ng nh ni lz b">index.html</code>所在的<code class="fe ng nh ni lz b">/build/</code>目录下。</p><p id="2a37" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">因此，如果我们进入<code class="fe ng nh ni lz b">/build</code>目录，我们应该会看到这样的结构。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="6b17" class="md jz iq lz b gy me mf l mg mh">- build<br/>   <br/>   - index.html<br/>   - index.bundle.js</span></pre><p id="cb1a" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">这两个文件是生产文件。<code class="fe ng nh ni lz b">index.bundle.js</code>包含一切。我们现在只需要在浏览器中打开<code class="fe ng nh ni lz b">index.html</code>，一切都将正常工作。</p><p id="28e4" class="pw-post-body-paragraph mi mj iq ky b kz mk ml mm lb mn mo mp ld mq mr ms lf mt mu mv lh mw mx my lj ij bi translated">我们可以将它部署在一个免费的托管站点上，比如<a class="ae lo" href="https://www.biz.nf/co.nf-domain.php" rel="noopener ugc nofollow" target="_blank"> co.nf </a>。创建一个免费的<code class="fe ng nh ni lz b">co.nf</code>子域，并上传这2个文件。导航到它的url，然后您就有一个react web应用程序部署！</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/9c6ea2d4fc76418637f037229e19c6cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*YdlkQdwMHHHGZWc0uAdQpw.gif"/></div></figure><blockquote class="nk"><p id="387f" class="nl nm iq bd nn no np nq nr ns nt lj dk translated">就是这样！快乐建筑&amp;黑客。谢谢！\m/</p></blockquote><p id="b072" class="pw-post-body-paragraph mi mj iq ky b kz oc ml mm lb od mo mp ld oe mr ms lf of mu mv lh og mx my lj ij bi translated">请点击👏按钮下面几下，以示支持！⬇⬇谢谢！</p></div></div>    
</body>
</html>