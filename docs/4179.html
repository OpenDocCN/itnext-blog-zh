<html>
<head>
<title>Azure DevOps Repos: Branch Policies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure DevOps回购:分支策略</h1>
<blockquote>原文：<a href="https://itnext.io/azure-devops-repos-branch-policies-cbe7aed8df9a?source=collection_archive---------5-----------------------#2020-05-11">https://itnext.io/azure-devops-repos-branch-policies-cbe7aed8df9a?source=collection_archive---------5-----------------------#2020-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1237" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去的几周里，我写了一系列关于Azure DevOps Pipelines 的帖子，我发现我想写的一篇帖子如果不介绍Azure Repos的分支策略功能就没有意义。这篇文章假设你已经有了一个包含一些代码的Azure DevOps项目。如果没有，你可以看看我在<a class="ae kl" href="https://elanderson.net/2020/02/getting-started-with-azure-devops/" rel="noopener ugc nofollow" target="_blank">上发表的关于Azure DevOps </a>入门的帖子。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/8288d1a11a153d7940b3022a8633f07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*t8DscBP6dKQkM1CW.png"/></div></figure><h2 id="9be2" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">回购简介</h2><p id="1bf8" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">这里使用的回购与上面链接的管道帖子中使用的回购相同，包含两个回购。NET Core 3.1 web应用程序。repo还包含三个分支(主版本、版本/1.0和版本/1.1)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/19cc3fea56276af1f8893801f0bf3a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3Iei_dfyva1XIFs9.png"/></div></div></figure><p id="1fcd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">值得注意的是，在分支名称中添加一个正斜杠会在UI中显示为一个文件夹，正如你在上面的截图中看到的<strong class="jp ir">发布</strong>一样。</p><h2 id="e436" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">编辑策略</h2><p id="adf2" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">将鼠标放在特定的分支或文件夹上，它会显示菜单的三个点。点击圆点，然后选择<strong class="jp ir">分支策略</strong>。对于本例，我们将策略放在主分支上。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lx"><img src="../Images/5528a56c46f2aae593e9c17c8198add5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2gSxRNBQPIx63how.png"/></div></div></figure><p id="6ab8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将带您进入允许您查看和编辑所选分支或文件夹上的策略的页面。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ly"><img src="../Images/075e63415c1fab9933dec5b1af057ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AMfV06Dbz5H3d_Fz.png"/></div></div></figure><p id="95d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些描述很好地解释了什么政策做什么，所以我不会重复它们来烦你。关于分支机构政策的<a class="ae kl" href="https://docs.microsoft.com/en-us/azure/devops/repos/git/branch-policies?view=azure-devops" rel="noopener ugc nofollow" target="_blank">官方文件</a>也有更多细节。如果你不合作，我强烈推荐使用<strong class="jp ir">要求最少数量的评论</strong>和<strong class="jp ir">检查评论决议</strong>。<strong class="jp ir">构建验证</strong>无论你的团队规模有多大，我都会推荐，因为它会让你远离拥有一台神奇的机器的可能性，而那是你的构建唯一可以工作的机器。下面的屏幕截图包含前两个建议策略集。为“需要最少数量的审阅”显示的设置是基于我的项目只有一个参与者这一事实。完成后，确认并点击<strong class="jp ir">保存更改</strong>按钮。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lz"><img src="../Images/e3a3e3129b27f383f2c53f42cb4c9189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fdus-11HrxsWm10X.png"/></div></div></figure><h2 id="0a5a" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">构建验证策略</h2><p id="6704" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">关于构建验证策略还有更多内容，这就是为什么我将在不同的章节中讨论它。在<strong class="jp ir">分支策略</strong>屏幕上，点击<strong class="jp ir">添加构建策略</strong>按钮。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/5e9be2e9e1053e45021b3f280c52a319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/0*YJyoh0Qoe_67RGqj.png"/></div></figure><p id="5c21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在edit build policy屏幕中，唯一需要的更改是选择<strong class="jp ir">构建管道</strong>,以便在针对策略所在分支的PR可用时使用。在这里，我们使用自动<strong class="jp ir">触发器</strong>，因此每当我们推送到我们的远程分支时，当它有一个打开的拉请求时，它将运行选择构建管道。<strong class="jp ir">策略需求</strong>控制在拉请求完成之前是否需要一个成功的构建。对于一个自人项目<strong class="jp ir">来说，构建到期</strong>没什么大不了的，但是如果你和一个团队一起工作，它会很有帮助。完成后点击<strong class="jp ir">保存</strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/904c2d0334d50b9974eec11ff03e97b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/0*to7slqR4dWfod606.png"/></div></figure><p id="02c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到branch policies屏幕，您会看到列出了新的要求。您还可以根据需要添加任意数量的构建验证。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mc"><img src="../Images/31cdd8ca56577c1df63ceb0eab19b931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*34oBSM7NI5LRCimx.png"/></div></div></figure><h2 id="7746" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">包扎</h2><p id="11c1" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">希望这个快速进入分支策略将帮助您的团队提高进入您的分支的代码的质量。我知道在你签入之前，要求另外一两个人审查你的代码听起来会让你慢下来，如果你是这个概念的新手，但是实际上，这有助于在问题进入QA和生产之前发现问题，从长远来看，这可以节省时间和金钱。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="d21c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mk">最初发表于</em> <a class="ae kl" href="https://elanderson.net/2020/05/azure-devops-repos-branch-policies/" rel="noopener ugc nofollow" target="_blank"> <em class="mk">埃里克·安德森</em> </a> <em class="mk">。</em></p></div></div>    
</body>
</html>