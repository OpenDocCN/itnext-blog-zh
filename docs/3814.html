<html>
<head>
<title>Pipeline Creation in Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Azure DevOps中创建管道</h1>
<blockquote>原文：<a href="https://itnext.io/pipeline-creation-in-azure-devops-6e9c7a843cfc?source=collection_archive---------6-----------------------#2020-03-02">https://itnext.io/pipeline-creation-in-azure-devops-6e9c7a843cfc?source=collection_archive---------6-----------------------#2020-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8c6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章将介绍如何在Azure DevOps中创建新的构建管道。这篇文章将坚持一个非常简单的例子，我们将在以后的文章中继续讨论。如果你不熟悉这个系列的文章，看看相关的文章。</p><p id="4007" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">【Azure DevOps入门</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/0092bed896762f912099c5292c252bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*bcE2zNU6QyrVr2kd.png"/></div></figure><p id="2528" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章将全部来自<a class="ae kl" href="https://dev.azure.com/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps </a>网站，所以登录你的账户，选择你将参与的项目，然后继续。此示例使用的项目名为Playground。</p><h2 id="b1db" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">管道创建</h2><p id="8aed" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">从网站右边的项目菜单中点击<strong class="jp ir">管道</strong>选项。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/9afb5a7219e83f85425d596a3e5cdc2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/0*AC4vxaZZt9fOLu5T.png"/></div></figure><p id="8c09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于我们的示例项目没有任何管道设置，我们将看到一个登录页面，告诉我们创建一个新的管道。一旦你有了一些管道，这个页面就有用多了。点击<strong class="jp ir">创建管道</strong>按钮继续。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/35d65e23e7f85db9ed6ab121d87e1f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/0*BUeXVDaYerhDzqxT.png"/></div></figure><p id="56ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是选择我们的代码存储在哪里。对于这个示例，代码在一个<strong class="jp ir"> Azure Repo Git </strong>存储库中，但是正如你所看到的，Azure DevOps对于你的代码存储在哪里是相当开放的。正如你从截图中看到的，有一堆基于YAML的选项和一个非常小的使用经典编辑器的选项。经典编辑器更容易上手，但是YAML选项得到了微软的最大关注，并且具有与您的源代码一起存储在Git中的优势，所以我建议使用YAML选项，尽管这需要更多的学习曲线。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/fec8cb32b2905592b11452540544ad66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/0*Xuu4x7iQQTLD70Ap.png"/></div></figure><p id="b79f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，选择此管道用于的回购。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/49fa24e38020d33683b258d0c796436a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/0*4TPd8r2VKr7pPQPO.png"/></div></figure><p id="357a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一个步骤Configure中，您会看到一个模板列表，当您刚接触yaml时，可以从中选择真正有用的模板。我们的示例应用程序是ASP.NET内核，因此单击<strong class="jp ir">显示更多</strong>按钮，然后单击<strong class="jp ir">ASP.NET内核</strong>。正如你从截图中看到的，Azure DevOps可以构建任何东西，并且不限于基于微软的技术。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/f4dd7875fb30755e584da9eaeed14942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/0*oKZWoOppt-8fD2sh.png"/></div></figure><p id="9ab3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果是下面的YAML文件。在这一点上，我们不会深入到YAML正在做的事情的细节中去，而是采用默认设置。继续点击<strong class="jp ir">保存并运行</strong>按钮。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/7e39ec8dd6b2fe628f941b3aefd8b608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/0*Yvcj_k-TU2ePO5Je.png"/></div></figure><p id="39c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于YAML存储在回购中，保存过程实际上是向分支提交。单击提交对话框上的<strong class="jp ir">保存并运行</strong>按钮，它会将YAML文件保存到您的分支并运行管道。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/bd94b851d8d6a2293c37c416972afc86.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/0*eY7-vR8ptm-bSbkF.png"/></div></figure><h2 id="d09e" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">管道结果</h2><p id="abb5" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">以下是管道运行的结果，结果表明管道已经失败。如果您单击突出显示的错误，将会转到管道的详细日志，这些日志通常会很好地说明管道失败的原因。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lz"><img src="../Images/acd11d828cd881f8d1c88ac072d19f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SmGV10lkrPJwxgDP.png"/></div></div></figure><p id="8faa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下截图是点击错误的结果。如您所见，它提供了build命令的输出。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi me"><img src="../Images/f387cc3348c6a4a1b3d9240c67e62981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4vxYLTfsYG2pa_Ql.png"/></div></div></figure><p id="a399" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，第43行向我们提供了构建失败的原因。以下是截图截掉以来的全行。在这种情况下，问题是运行构建的代理没有。安装了NET Core 3.1。</p><blockquote class="mf mg mh"><p id="8b04" class="jn jo mi jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">usr/share/dot net/SDK/3 . 0 . 102/Sdks/Microsoft。NET.Sdk/targets/Microsoft.目标(127，5):错误NETSDK1045:当前。NET SDK不支持目标定位。网芯3.1。任何一个目标。NET Core 3.0或更低版本，或者使用。支持的. NET SDK。网芯3.1。[/home/vsts/work/1/s/src/web app 1/web app 1 . csproj]</p></blockquote><h2 id="7170" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">修理管道</h2><p id="9b31" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">单击浏览器中的后退按钮，返回到管道结果页面。点击结果页面右上角的三个点，并选择<strong class="jp ir">编辑管道</strong>。这将打开一个编辑，并为构建打开YAML。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/49097a704521a947e708b6a07808a196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/0*LZz1-L4y18RfbjX-.png"/></div></figure><p id="fbea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用屏幕右侧的<strong class="jp ir">任务</strong>助手，我们将选择<strong class="jp ir">用途。NET Core </strong>任务，它将允许我们安装。NET核心我们需要建立我们的应用程序。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi mn"><img src="../Images/d7143827ecdde43a74d4695935a99581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zhA_TvSUrcHCd795.png"/></div></div></figure><p id="6488" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入的版本。NET Core，在本例中是3.1，然后点击add。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/8db94e2b5abb709330e7a5382d918ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/0*oB_6WeIl5Irox3NV.png"/></div></figure><p id="722a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是由此产生的YAML。请注意，上面的助手不是必需的，如果您愿意，您可以手动编辑YAML。</p><pre class="kn ko kp kq gt mp mq mr ms aw mt bi"><span id="47e2" class="ku kv iq mq b gy mu mv l mw mx">trigger:<br/>- master<br/><br/>pool:<br/>  vmImage: 'ubuntu-latest'<br/><br/>variables:<br/>  buildConfiguration: 'Release'<br/><br/>steps:<br/>- task: UseDotNet@2<br/>  inputs:<br/>    packageType: 'sdk'<br/>    version: '3.1.x'<br/><br/>- script: dotnet build --configuration $(buildConfiguration)<br/>  displayName: 'dotnet build $(buildConfiguration)'</span></pre><p id="7b2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击页面右上角的<strong class="jp ir">保存</strong>按钮，输入提交消息，然后点击页面右下角的<strong class="jp ir">保存</strong>按钮。这将使您返回到YAML的编辑屏幕。点击页面右上角的<strong class="jp ir">运行</strong>按钮，启动管道。</p><p id="3004" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一轮(对于示例应用程序)管道将会成功。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/6f9990fc37feec684c6f67160a9101e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/0*ZEeeADmRvoRWTTfw.png"/></div></figure><h2 id="d52f" class="ku kv iq bd kw kx ky dn kz la lb dp lc jy ld le lf kc lg lh li kg lj lk ll lm bi translated">包扎</h2><p id="f0b2" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">希望这能给你一个很好的起点来构建你的第一个Azure DevOps管道。我将在以后的文章中深入探讨其中的一些。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="7f53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mi">最初发表于</em> <a class="ae kl" href="https://elanderson.net/2020/03/pipeline-creation-in-azure-devops/" rel="noopener ugc nofollow" target="_blank"> <em class="mi">埃里克·安德森</em> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>