<html>
<head>
<title>Android CodeView: Auto Indentation, Find and replace</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android代码视图:自动缩进，查找和替换</h1>
<blockquote>原文：<a href="https://itnext.io/android-codeview-auto-indentation-find-and-replace-3bc91994e214?source=collection_archive---------1-----------------------#2022-01-07">https://itnext.io/android-codeview-auto-indentation-find-and-replace-3bc91994e214?source=collection_archive---------1-----------------------#2022-01-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/200b219edf01e6a9379556e5ae19eadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ge8E4AuOPgEVeWTo28FTpw.png"/></div></div></figure><p id="ffde" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">大家好，在这篇文章中，我将谈谈最新版本的CodeView库的两个特性，它们支持自动缩进，并增加了对查找匹配和替换关键字的支持。</p><p id="c00f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，你可以在<a class="ae kw" href="https://github.com/AmrDeveloper/codeview" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">AMR developer/CodeView</strong></a>官方资源库中找到关于如何安装和使用code view的完整文档。</p><p id="c3d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先什么是自动缩进？</p><p id="e7bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自动缩进帮助您设置缩进级别。当您键入新文本时，缩进级别将自动增加或减少制表符长度，例如当您在文本的末尾或中间插入新行时增加或减少4。</p><p id="20cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，在现代IDE中，当您编写java时，当您开始用{对于示例4，缩进级别将按制表符长度增加，一旦您用}结束该块，缩进将减少。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/9a37770d0ce5a0dbcbaed1f16a28f427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aaCd389CzO9pJOkj8Ey9cA.png"/></div></div></figure><p id="8011" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要在CodeView中支持此功能，只需3个步骤。</p><p id="b670" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">步骤1:设置缩进的起始字符，这样当用户输入这些字符时，缩进级别应该增加，例如`{`。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="9b8c" class="lh li iq ld b gy lj lk l ll lm">Set&lt;Character&gt; indentationStart = new HashSet&lt;&gt;(); indentationStart.add('{'); codeView.setIndentationStarts(indentationStart);</span></pre><p id="337a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">步骤2:设置缩进结束字符，这样当用户键入这些字符时，缩进级别应该降低，例如“}”。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b5d7" class="lh li iq ld b gy lj lk l ll lm">Set&lt;Character&gt; indentationEnds = new HashSet&lt;&gt;(); indentationEnds.add('}'); codeView.setIndentationEnds(indentationEnds);</span></pre><p id="53fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">步骤3:设置制表符长度并启用自动缩进。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="60d6" class="lh li iq ld b gy lj lk l ll lm">codeView.setTabLength(4);<br/>codeView.setEnableAutoIndentation(true);</span></pre><p id="9245" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以很容易地改变高光颜色</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="28bd" class="lh li iq ld b gy lj lk l ll lm">codeView.setMatchingHighlightColor(color);</span></pre><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/cc15237c7ccd4f84d236556a6d6e0637.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/1*2X8OMlyPhmJ8uqS0DjNx9w.gif"/></div></figure><p id="04fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经完成了:D，享受自动缩进。</p><p id="7026" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二个特性的灵感来自于CodeView用户的一个特性建议，即能够突出显示并获得匹配的子字符串，还可以轻松地用另一个文本替换它，这个特性也可以在现代代码编辑器和IDE中看到，如Vs Code、Android Studio等。</p><p id="040f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以现在CodeView提供了一些方法来帮助你实现查找和替换对话框。</p><p id="6d9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要从文本中获取所有匹配的子字符串，可以使用findMatches。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="ba1f" class="lh li iq ld b gy lj lk l ll lm">List&lt;Token&gt; tokens = codeView.findMatches(regex);</span></pre><p id="1927" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">若要查找并突出显示下一个匹配的标记，如果未找到，则返回null。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="ff3b" class="lh li iq ld b gy lj lk l ll lm">Token token = codeView.findNextMatch();</span></pre><p id="66f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">若要查找并突出显示前一个匹配的标记，如果未找到，则返回null。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f7bd" class="lh li iq ld b gy lj lk l ll lm">Token token = codeView.findPrevMatch();</span></pre><p id="a5cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">清除所有匹配的高亮标记。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="6922" class="lh li iq ld b gy lj lk l ll lm">codeView.clearMatches();</span></pre><p id="6591" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用其他字符串替换与regex匹配的第一个字符串。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="fd3d" class="lh li iq ld b gy lj lk l ll lm">codeView.replaceFirstMatch(regex, replacement);</span></pre><p id="f05a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用其他字符串替换所有与regex匹配的字符串。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="673a" class="lh li iq ld b gy lj lk l ll lm">codeView.replaceAllMatches(regex, replacement);</span></pre><p id="345f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Github上的示例应用程序中，您会发现使用该功能来支持查找和替换的对话框</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/22ac667143401aa905c31554c888d4ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/1*OgqrM4ELr_Pvtpw5dHgIfA.gif"/></div></figure><p id="e58d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在:<a class="ae kw" href="https://github.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> GitHub </strong> </a>，<a class="ae kw" href="https://www.linkedin.com/in/amrdeveloper/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> LinkedIn </strong> </a>，<a class="ae kw" href="https://twitter.com/amrdeveloper" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Twitter </strong> </a>上找到我。</p><p id="7e3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">享受编程😋。</p></div></div>    
</body>
</html>