<html>
<head>
<title>Remote URL Login to Firebase &amp; WordPress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">远程URL登录到Firebase &amp; WordPress</h1>
<blockquote>原文：<a href="https://itnext.io/remote-url-login-to-firebase-wordpress-2027fad7c159?source=collection_archive---------3-----------------------#2021-03-12">https://itnext.io/remote-url-login-to-firebase-wordpress-2027fad7c159?source=collection_archive---------3-----------------------#2021-03-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0394c6ffe4ab083791571dd612e1dbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iOkAfyUxo4cP_aPD.png"/></div></div></figure><blockquote class="jy jz ka"><p id="b5ba" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你对Integrate Firebase PRO版本感兴趣，请阅读完整的更新文档:<a class="ae la" href="https://firebase-wordpress-docs.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"><em class="iq">【https://firebase-wordpress-docs.readthedocs.io/】</em></a></p></blockquote><p id="ac04" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated"><strong class="ke ir">演示:</strong><a class="ae la" href="https://wordpress.dalenguyen.me/" rel="noopener ugc nofollow" target="_blank"><strong class="ke ir">https://wordpress.dalenguyen.me/</strong></a></p><ul class=""><li id="9d40" class="le lf iq ke b kf kg kj kk lb lg lc lh ld li kz lj lk ll lm bi translated">文章1: <a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/how-to-integrate-firebase-and-wordpress-b017ee274687">如何将Firebase整合到WordPress </a></li><li id="a271" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第2篇:<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/how-to-retrieve-data-from-firestore-and-display-on-wordpress-8638854a762e">如何从Firestore检索数据并显示在WordPress上</a></li><li id="67e9" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第3篇:<a class="ae la" href="https://medium.com/@dalenguyen/how-to-work-with-firebase-custom-claims-in-wordpress-aaf83965bd20?sk=85786e3739d42b18c3e2c7344bc5f436" rel="noopener">如何在WordPress中使用Firebase自定义声明</a></li><li id="8cf4" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第4条:<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/how-to-save-data-from-wordpress-to-firebase-realtime-firestore-2eda917d01fb">将数据从WordPress保存到Firebase(实时+ Firestore) </a></li><li id="490f" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第五条:<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/firebase-wordpress-user-integration-c18a28e41cbd"> Firebase WordPress用户集成</a></li><li id="e7b3" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第六篇:<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/firebase-users-management-in-wordpress-dashboard-61b4a1ca066">如何在WordPress仪表盘中管理Firebase用户</a></li><li id="d4a3" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第7篇:<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/sync-data-from-wordpress-to-firebase-d6e5860d3a06">如何将数据从WordPress同步到Firebase </a></li><li id="e6dd" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第8条:<a class="ae la" href="https://medium.com/@dalenguyen/one-click-login-to-wordpress-firebase-or-via-email-link-d7610d71cd23" rel="noopener">一键登录WordPress &amp; Firebase或通过电子邮件链接</a></li><li id="a6c5" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第9条:<a class="ae la" href="https://medium.com/@dalenguyen/upload-files-to-cloud-storage-from-wordpress-e8acc8ce70cd" rel="noopener">从WordPress上传文件到云存储</a></li><li id="e045" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第十条:<a class="ae la" rel="noopener ugc nofollow" target="_blank" href="/remote-url-login-to-firebase-wordpress-2027fad7c159"> <strong class="ke ir">远程URL登录到Firebase&amp;WordPress</strong></a></li><li id="684c" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第11条:<a class="ae la" href="https://dalenguyen.medium.com/2-ways-to-add-firebase-authentication-to-wordpress-woocommerce-df500c3b104e" rel="noopener">添加Firebase认证到WordPress的2种方法&amp; WooCommerce </a></li><li id="fa74" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第12条:<a class="ae la" href="https://dalenguyen.medium.com/how-to-send-woocommerce-purchase-data-to-firebase-8c8b4c8cff39" rel="noopener">如何将WooCommerce购买数据发送到Firebase </a></li><li id="edbd" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">第13条:<a class="ae la" href="https://dalenguyen.medium.com/create-manage-firebase-database-from-wordpress-13347d8ffb2e" rel="noopener">从WordPress </a>创建&amp;管理Firebase数据库</li></ul><p id="3e10" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这个附加组件仍处于测试阶段。有一个POC(概念验证),但我不知道它是否是一个好产品，是否有需要。我们会想出办法的。</p><h1 id="6e66" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">远程认证(通过URL)</h1><p id="0ffe" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">假设你有一个Firebase应用程序，用户可以登录。然而，在他们可以使用你的应用程序之前，用户需要购买一个允许他们使用的包。这个产品将帮助用户从你的Firebase应用程序自动登录到你的WooCommerce / WordPress网站。这个插件并不关心用户是否存在于WP中，它只是用Firebase凭证让用户登录。就是这样。</p><p id="4966" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果你想试一试，请访问:【https://dn-wp-autologin.web.app/ T2】</p><p id="468b" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如有任何问题或讨论，请在<a class="ae la" href="https://github.com/dalenguyen/firebase-wordpress-plugin/discussions" rel="noopener ugc nofollow" target="_blank">https://github . com/dalen guyen/firebase-WordPress-plugin/discussions</a>创建一张票</p><h1 id="74b7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">先决条件</h1><ul class=""><li id="e5da" class="le lf iq ke b kf mq kj mr lb mv lc mw ld mx kz lj lk ll lm bi translated">集成Firebase PRO用户</li><li id="ec5d" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">Firestore服务已启用</li><li id="579f" class="le lf iq ke b kf ln kj lo lb lp lc lq ld lr kz lj lk ll lm bi translated">用于部署云功能的节点12</li></ul><h1 id="8b7a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">入门指南</h1><p id="d9ec" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">确保您已经准备好Firestore数据库。然后将这些安全规则应用到您的收藏中。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="608a" class="nh lt iq nd b gy ni nj l nk nl">match /jwtTokens/{token} {<br/>    allow read, write: <strong class="nd ir">if</strong> false;<br/>}</span></pre><p id="196f" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果你是PRO用户，可以访问<a class="ae la" href="https://firebase.dalenguyen.me/shop/my-account" rel="noopener ugc nofollow" target="_blank">我的账号</a>页面下载试用版。</p><p id="73de" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">然后像往常一样安装附加组件。该插件应该出现在Firebase选项卡下。</p><h1 id="8ba4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">部署云功能</h1><p id="d99c" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">云函数在插件内部，所以您需要提取zip文件来部署它。</p><p id="2ae5" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">确保您正在运行节点v12。如果您的机器上没有节点，请访问<a class="ae la" href="https://github.com/nvm-sh/nvm" rel="noopener ugc nofollow" target="_blank">节点版本管理器</a>。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="90cd" class="nh lt iq nd b gy ni nj l nk nl">cd functions</span><span id="9e26" class="nh lt iq nd b gy nm nj l nk nl">// install the package - you can run yarn or npm (pick one only)<br/>yarn OR npm install</span><span id="6a77" class="nh lt iq nd b gy nm nj l nk nl">// deploy functions<br/>npm run deploy --project your-project-id</span></pre><h1 id="1db8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">创建自动登录页面</h1><p id="b21b" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">用下面的短代码创建一个WordPress页面。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="21c8" class="nh lt iq nd b gy ni nj l nk nl">// you can specify the redirect page after the auto-login process<br/>// default is home page</span><span id="dfdd" class="nh lt iq nd b gy nm nj l nk nl">[firebase_autologin redirect="redirect-link"]</span></pre><h1 id="078a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">创建重定向页面(Firebase应用程序)</h1><p id="d186" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">这个例子使用了JavaScript。但是，你可以在iOS或Android或Webapp上使用相同的原理来实现它。关键是为登录用户调用可调用的函数。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="1adb" class="nh lt iq nd b gy ni nj l nk nl">&lt;button id="auto-login" onclick="wpAutoLogin()"&gt;<br/>...</span><span id="f080" class="nh lt iq nd b gy nm nj l nk nl">&lt;script&gt;</span><span id="0cc5" class="nh lt iq nd b gy nm nj l nk nl">// This is the WP page that you created with the shortcode<br/>// ?jwt= is mandatory<br/>const wpLink = 'https://example.com?jwt='</span><span id="d460" class="nh lt iq nd b gy nm nj l nk nl">const generateToken = () =&gt; {<br/>    // Get the token from firebase<br/>    const token = firebase.functions().httpsCallable('api-token')<br/>    token().then((result) =&gt; {<br/>        <strong class="nd ir">if</strong> (result.data.status) {<br/>            const url = wpLink + result.data.data.token</span><span id="fcd7" class="nh lt iq nd b gy nm nj l nk nl">            // Open auto-login link <strong class="nd ir">for</strong> WP<br/>            // You can also send the URL to user <strong class="nd ir">if</strong> you want to<br/>            // The time limit <strong class="nd ir">for</strong> the link is 1 HOUR<br/>            window.open(url, '_blank')<br/>        } <strong class="nd ir">else</strong> {<br/>            console.error(result.data.message)<br/>        }<br/>    })<br/>}</span><span id="e2b0" class="nh lt iq nd b gy nm nj l nk nl">// Start auto login process<br/>const wpAutoLogin = <strong class="nd ir">function</strong> () {<br/>    firebase.auth().onAuthStateChanged((user) =&gt; {<br/>        <strong class="nd ir">if</strong> (user) {<br/>            generateToken()<br/>        } <strong class="nd ir">else</strong> {<br/>            console.log(`User is not logged <strong class="nd ir">in</strong>...`)<br/>        }<br/>    })<br/>}<br/>&lt;/script&gt;</span></pre><h1 id="63c0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">解决纷争</h1><h2 id="c70e" class="nh lt iq bd lu nn no dn ly np nq dp mc lb nr ns mg lc nt nu mk ld nv nw mo nx bi translated">IAM服务帐户凭据API</h2><p id="abc9" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">IAM服务帐户凭据API尚未在项目中使用…或者已被禁用。通过访问启用它…</p><p id="0a1c" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果您遇到此错误，只需单击链接并启用IAM服务。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/a25dbdac74a5ac5b36620fe39c7f259b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/0*QkVrkz3je5N2B6bN.png"/></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated"><em class="od">启用IAM服务</em></figcaption></figure><h2 id="1579" class="nh lt iq bd lu nn no dn ly np nq dp mc lb nr ns mg lc nt nu mk ld nv nw mo nx bi translated">呼叫者没有权限</h2><p id="3db4" class="pw-post-body-paragraph kb kc iq ke b kf mq kh ki kj mr kl km lb ms kp kq lc mt kt ku ld mu kx ky kz ij bi translated">调用方没有权限；请参考<a class="ae la" href="https://firebase.google.com/docs/auth/admin/create-custom-tokens" rel="noopener ugc nofollow" target="_blank">https://firebase . Google . com/docs/auth/admin/create-custom-tokens</a>了解更多关于如何使用和排除该功能故障的详细信息。</p><p id="d03f" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">对于此错误，您需要使用Google Cloud控制台，并向firebase服务帐户添加服务帐户令牌创建者角色。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/827ea7021b660d124dfc8e57dc920096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/0*Qxbq8wonIxzDDs7z.png"/></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk translated"><em class="od">启用IAM服务</em></figcaption></figure></div></div>    
</body>
</html>