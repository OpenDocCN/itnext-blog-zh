<html>
<head>
<title>Azure B2C: Social Logins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure B2C:社交登录</h1>
<blockquote>原文：<a href="https://itnext.io/azure-b2c-social-logins-3a1b12ed3e62?source=collection_archive---------9-----------------------#2019-05-06">https://itnext.io/azure-b2c-social-logins-3a1b12ed3e62?source=collection_archive---------9-----------------------#2019-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4289" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章将介绍如何为一个使用<a class="ae kl" href="https://azure.microsoft.com/en-us/services/active-directory-b2c/" rel="noopener ugc nofollow" target="_blank"> Azure B2C </a>进行身份验证的站点启用社交登录。如果你是这组帖子的新手，你可以在ASP.NET的<a class="ae kl" href="https://elanderson.net/2019/04/asp-net-core-with-azure-b2c-auth/" rel="noopener ugc nofollow" target="_blank">帖子中找到示例应用程序的初始设置。我还建议查看一下</a><a class="ae kl" href="https://elanderson.net/2019/04/azure-b2c-customize-layouts/" rel="noopener ugc nofollow" target="_blank">Azure B2C:Customize Layouts</a>,了解如何更改所提供的UI，为用户提供与应用程序其余部分相匹配的一致外观。</p><h2 id="7676" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">社交登录提供商设置</h2><p id="f5d3" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">Azure B2C支持你所期望的大多数登录服务，比如谷歌、脸书、Twitter、微软等。以及任何支持<a class="ae kl" href="https://en.wikipedia.org/wiki/OpenID_Connect" rel="noopener ugc nofollow" target="_blank"> OpendID连接</a>的提供者。无论你选择哪个选项，你都必须向提供商注册/注册你的应用程序。不幸的是，Azure B2C不提供它所支持的服务的注册页面的链接，所以这要靠你自己去寻找。</p><p id="d130" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于这个例子，我将使用Google来完成这个过程。你可以在他们的文档中获得谷歌OpenID Connect的所有细节。为了开始，我们需要在<a class="ae kl" href="https://console.developers.google.com/" rel="noopener ugc nofollow" target="_blank">开发者控制台</a>中设置我们的应用程序。该链接会将您带到仪表板，在那里您会看到一条关于选择或创建新项目的消息。点击<strong class="jp ir">创建</strong>链接。在下一页中输入<strong class="jp ir">项目名称</strong>并点击<strong class="jp ir">创建</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/656e3d41d298b49cfad4b3486c915a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Edg4hPLGnrZOgfhN.png"/></div></div></figure><p id="4687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建过程完成后，从左侧导航菜单中单击<strong class="jp ir">凭证</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/2ecdf98d6a062ce75fee85f94d95adcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*FzKKTm-Bh-XaSRgx.png"/></div></figure><p id="86a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在屏幕顶部选择<strong class="jp ir"> OAuth同意屏幕</strong>。在该页面中，您至少需要输入一个<strong class="jp ir">应用名称</strong>和一个<strong class="jp ir">b2clogin.com</strong>的<strong class="jp ir">授权域</strong>(截图中未显示，但仍需输入)，然后点击页面底部的<strong class="jp ir">保存</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/94272962ff2da370c99a6a318cdae21e.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*lL45At-tSPUkCwz8.png"/></div></figure><p id="0625" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，选择<strong class="jp ir">凭证</strong>选项卡，点击<strong class="jp ir">创建凭证</strong>按钮，选择<strong class="jp ir"> OAuth客户端ID </strong>选项。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lx"><img src="../Images/a74d690491e94a42f6a9aa008b8cbba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4talxEBNTcX6kfwe.png"/></div></div></figure><p id="1e05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一页，选择<strong class="jp ir"> Web应用</strong>作为应用类型。输入一个<strong class="jp ir">名字</strong>。对于接下来的两个字段，您将需要来自Azure B2C的租户ID。在截图中，你可以看到我的租户id为<strong class="jp ir"> testingorg3 </strong>的地方。此外，确保输入所有小写的网址，我有使用混合大小写重定向问题。对于<strong class="jp ir">授权的JavaScript源</strong>使用URL<a class="ae kl" href="https://yourtenantid.b2clogin.com" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">https://yourtenantid.b2clogin.com</strong></a>对于<strong class="jp ir">授权的重定向URIs </strong>使用<a class="ae kl" href="https://yourtenantid.b2clogin.com/testingorg3.onmicrosoft.com/oauth2/authresp" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">https://yourtenantid . B2C login . com/testing org 3 . on Microsoft . com/oauth 2/authresp</strong></a></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/f8daaced39e8f92ffd261ebcde4c2914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/0*eqUCiw57SUrU4hcc.png"/></div></figure><p id="9b06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击“创建”后，你会看到一个对话框，显示你的<strong class="jp ir">客户端ID </strong>和<strong class="jp ir">客户端密码</strong>，请记下这些，因为我们在Azure B2C中添加登录提供商时会用到它们。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/12985f87939d703160a0675e562bd335.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*3dxduiA1zeUN1jWh.png"/></div></figure><h2 id="7709" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">Azure B2C变化</h2><p id="307c" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">现在我们有了谷歌端的设置，前往Azure并找到你的Azure B2C资源。从导航菜单中选择<strong class="jp ir">身份提供</strong>，点击<strong class="jp ir">添加</strong>按钮。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/919349df9b18aadeea9b993f6d6520fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/0*dyWU_SvKSfo65Ngj.png"/></div></figure><p id="1fb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入一个<strong class="jp ir">名称</strong>，我只是使用提供者的名称。然后，点击<strong class="jp ir">身份提供者类型</strong>，这将触发<strong class="jp ir">选择社会身份提供者</strong>选项显示。点击<strong class="jp ir">谷歌</strong>然后点击<strong class="jp ir">确定</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/5492699b9096b8762a464fdfc6f791f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/0*5QvKSsJYkEXzpBM4.png"/></div></figure><p id="5dca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，单击<strong class="jp ir">设置该身份提供者</strong>，将显示一个弹出窗口，您需要在其中输入您的<strong class="jp ir">客户端ID </strong>和谷歌提供的<strong class="jp ir">客户端密码</strong>。输入数值后，点击<strong class="jp ir">确定</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/08c5d4833949d7a659ac099055304be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/0*NckVe3tosqlsCLHX.png"/></div></figure><p id="de28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，单击<strong class="jp ir">添加身份提供者</strong>屏幕底部的<strong class="jp ir">创建</strong>按钮。当这个过程完成后，我们将有两个B2C资源电子邮件和谷歌的身份提供者。接下来，我们需要为我们的注册/登录用户流启用新的Google提供商。从菜单中选择<strong class="jp ir">用户流程</strong>，然后点击您为<strong class="jp ir">注册设置的流程并登录</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/4b56803ada94319d351da7d70d669a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/0*ArpzxW7MViYa1Oak.png"/></div></figure><p id="de07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，选择<strong class="jp ir">身份提供者</strong>，这将显示可用于所选流的提供者列表。检查流应该使用的任何其他提供者，在我们的例子中是<strong class="jp ir"> Google </strong>。最后点击<strong class="jp ir">保存</strong>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi md"><img src="../Images/c37b0c5149b8c2e985bcfd1445f54bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/0*_yzx96HGJxWhPuRx.png"/></div></figure><h2 id="8917" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">尝试一下</h2><p id="90ed" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">通过以上所有的改变，尝试用你的应用程序登录，你会看到Google作为一个登录选项。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi me"><img src="../Images/6b3f0086d3731c246525afd064546865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W12yIMAkKnxUd7P8.jpg"/></div></div></figure><h2 id="4dea" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">包扎</h2><p id="88e1" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">希望上面的内容可以帮助你在应用程序中增加对社交登录的支持。从Azure B2C的角度来看，添加其他提供商将非常接近我们为谷歌所做的，当然注册过程将因提供商而异。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="af0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mm">原载于</em><a class="ae kl" href="https://elanderson.net/2019/05/azure-b2c-social-logins/" rel="noopener ugc nofollow" target="_blank"><em class="mm"/></a><em class="mm">。</em></p></div></div>    
</body>
</html>