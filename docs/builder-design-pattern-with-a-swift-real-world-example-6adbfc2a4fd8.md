# 带有 Swift 真实示例的构建器设计模式

> 原文：<https://itnext.io/builder-design-pattern-with-a-swift-real-world-example-6adbfc2a4fd8?source=collection_archive---------2----------------------->

![](img/6ffa39c510db8141be6b88d7016c02cb.png)

何塞·平托在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

当你在谷歌上搜索“Builder Pattern”时，你可以找到许多旧的学校资料，你的思维可能会更加混乱，所以我想给你一个真实世界的例子，并用我的一个项目中的真实代码进行解释，以获得一些实践。

首先，在写代码之前，让我们先看看这个类比。如果我们理解了这个概念，那么编写代码将会很有趣，也不容易出错。

让我们想象一下，你是一个电视频道的制作人，召集了一个节目的所有工作人员，让节目变得生动起来。
你需要制作一个体育节目，制作一个基本的体育节目需要什么？也许我们可以用这些做如下。

*   x 型照相机
*   兴奋的版主
*   体育评论员
*   彩色桌子

那做新闻呢？可能需要相同的材料，但类型不同。

*   y 型照相机
*   扑克脸版主
*   政治评论家
*   灰色表(好像比较严重吧？)

好的，你拿到这些材料，然后坐在你的工作区，一步一步地制作你的电视节目新闻或体育等。

没有人不关心你，你是怎么做到的。

你是一个很酷的制作人，你只是向你的老板(app)和观察者(client)汇报。如果你想改变评论者或桌子的颜色，这又会是新闻，但会是不同概念的不同新闻，或者改变桌子等等。

构建器模式在这个类比中做了类似的事情。 **Builder** 是一个创造性的设计模式，让你构建复杂的对象(体育节目，新闻)。您可以将这种创造性的设计模式用于构造代码。每当您想要更改构造代码的内容时，您将会以不同的样式再次构造一个结构。

请暂时记住这个类比。我猜你已经明白了，让我们回到 Swift world。

Builder 在 Swift world 中非常受欢迎，尤其是如果你想使用 VIP 或 VIPER 设计模式，这种模式会变得非常方便。编程世界中没有灵丹妙药，当它适合您的情况时就使用它。我将以 MVVM 设计模式为例，这是 iOS 项目中更常见的设计模式——至少在过去的 5 年里。

我想建立一个 NewsViewController，这将是用户在应用程序启动时看到的第一个屏幕。NewsViewController 需要知道用户的位置状态来根据用户位置处理新闻。因此，这个视图控制器有 LocationAuthorizationHandler，它有一个视图模型，作为 MVVM 的一个特性，应该在所有业务逻辑中完成。

我们可以制作一个如下的构建器模式。

让我们创建我们的构建器实例，并在 AppDelegate 中调用它的“makeNewsViewController”方法。

这太酷了！由于构建器模式和注入依赖，您的代码非常整洁。你没有重复你自己，你分离了关注点，你也有了更多可测试的复杂对象。

下期帖子再见！