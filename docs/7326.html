<html>
<head>
<title>Kubernetes cheat sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes备忘单</h1>
<blockquote>原文：<a href="https://itnext.io/kubernetes-cheat-sheet-db19117477d0?source=collection_archive---------1-----------------------#2022-08-22">https://itnext.io/kubernetes-cheat-sheet-db19117477d0?source=collection_archive---------1-----------------------#2022-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a638" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">开门见山！</h2></div><p id="2229" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将列出并描述Kubernetes (K8S)的每个常用类别或组件，并使用适当的<code class="fe le lf lg lh b">kubectl</code>命令进行快速参考！</p><p id="139d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些描述直接取自官方文档，网址为<a class="ae li" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> kubernetes.io </a>，如果您需要更多信息或更深入的了解，每个标题都将链接到相应的文档页面。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/adf5960398ad724195b194ba17340f53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H3eA4_jlQJDeaSgpJ9IVGw.jpeg"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae li" href="https://unsplash.com/s/photos/list?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="5fb5" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">索引</h2><ul class=""><li id="ed33" class="ms mt it kk b kl mu ko mv kr mw kv mx kz my ld mz na nb nc bi translated">常见选项</li><li id="56e2" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">配置文件(清单文件)</li><li id="c317" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">集群管理和环境</li><li id="247e" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">达蒙塞特</li><li id="1af2" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">部署</li><li id="9752" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">事件</li><li id="aff3" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">日志</li><li id="8eb3" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">名称空间</li><li id="9066" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">节点</li><li id="596c" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">分离舱</li><li id="31ae" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">复制控制器</li><li id="29bd" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">复制集</li><li id="1633" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">秘密</li><li id="2066" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">服务</li><li id="52d4" class="ms mt it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">服务帐户</li></ul><h1 id="3a60" class="ni ma it bd mb nj nk nl me nm nn no mh jz np ka mk kc nq kd mn kf nr kg mq ns bi translated">Kubernetes对象和Kubectl命令清单</h1><h2 id="9bda" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">常见选项</h2><p id="74bd" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">在Kubectl中，您可以指定可选标志用于各种命令。</p><p id="a096" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">alias</code>为Kubectl设置一个别名。</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="4a70" class="lz ma it lh b gy oa ob l oc od">alias k=kubectl<br/>echo 'alias k=kubectl' &gt;&gt;~/.bashrc</span></pre><p id="1845" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-o=json</code>JSON中的输出格式</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="b10b" class="lz ma it lh b gy oa ob l oc od">kubectl get pods <!-- -->-o=json</span></pre><p id="da67" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-o=yaml</code>YAML输出格式</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="ce25" class="lz ma it lh b gy oa ob l oc od">kubectl get pods <!-- -->-o=yaml</span></pre><p id="af8b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-o=wide</code>以纯文本格式输出任何附加信息，对于pods，包括节点名</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="c637" class="lz ma it lh b gy oa ob l oc od">kubectl get pods <!-- -->-o=wide</span></pre><p id="965e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-n</code>别名为<code class="fe le lf lg lh b">namespace</code></p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="3f87" class="lz ma it lh b gy oa ob l oc od">kubectl get pods -n=&lt;namespace_name&gt;</span></pre><p id="0fab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-f</code>用于创建资源的文件名、目录或文件的URL。</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="7b2b" class="lz ma it lh b gy oa ob l oc od">kubectl create -f ./&lt;file name&gt;</span></pre><p id="7221" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-l</code>使用指定标签过滤</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="25b6" class="lz ma it lh b gy oa ob l oc od">kubectl logs -l name=&lt;label name&gt;</span></pre><p id="61bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">-h</code>对kubectl的帮助</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="5a54" class="lz ma it lh b gy oa ob l oc od">kubectl -h</span></pre><h2 id="64ce" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/declarative-config/" rel="noopener ugc nofollow" target="_blank">配置文件</a>(也称为清单或YAML文件)</h2><blockquote class="oe of og"><p id="b08d" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">通过将多个对象配置文件存储在一个目录中，并根据需要使用<code class="fe le lf lg lh b"><em class="it">kubectl apply</em></code>递归地创建和更新这些对象，可以创建、更新和删除Kubernetes对象。此方法保留对活动对象的写入，而不将更改合并回对象配置文件。<code class="fe le lf lg lh b"><em class="it">kubectl diff</em></code>也给你一个<code class="fe le lf lg lh b"><em class="it">apply</em></code>将会做出什么改变的预览。</p></blockquote><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="fcd5" class="lz ma it lh b gy oa ob l oc od">kubectl apply -f &lt;configuration file&gt;</span></pre><p id="7327" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建对象</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="2154" class="lz ma it lh b gy oa ob l oc od">kubectl create -f &lt;configuration file&gt;</span></pre><p id="a276" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在目录中的所有清单文件中创建对象</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="0605" class="lz ma it lh b gy oa ob l oc od">kubectl create -f &lt;configuration file directory&gt;</span></pre><p id="b8f2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从URL创建对象</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="9580" class="lz ma it lh b gy oa ob l oc od">kubectl create -f &lt;‘url’&gt;</span></pre><p id="c6a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除对象</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="a318" class="lz ma it lh b gy oa ob l oc od">kubectl delete -f &lt;configuration file&gt;</span></pre><h2 id="8c35" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">集群管理和上下文</h2><p id="b7e0" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">集群管理是指查询关于K8S集群本身的信息。</p><p id="da35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示群集中主服务器和服务的端点信息</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="eeae" class="lz ma it lh b gy oa ob l oc od">kubectl cluster-info</span></pre><p id="54d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示在客户机和服务器上运行的Kubernetes版本</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="f74e" class="lz ma it lh b gy oa ob l oc od">kubectl version</span></pre><p id="647f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取集群的配置</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="ee19" class="lz ma it lh b gy oa ob l oc od">kubectl config view</span></pre><p id="ea5d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取用户列表</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="891f" class="lz ma it lh b gy oa ob l oc od">kubectl config view -o jsonpath='{.users[*].name}'</span></pre><p id="e829" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示当前上下文</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="48a5" class="lz ma it lh b gy oa ob l oc od">kubectl config current-context</span></pre><p id="4c58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示上下文列表</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="07b8" class="lz ma it lh b gy oa ob l oc od">kubectl config get-contexts</span></pre><p id="6e30" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置默认上下文</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="d84b" class="lz ma it lh b gy oa ob l oc od">kubectl config use-context &lt;cluster name&gt;</span></pre><p id="b96b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出可用的API资源</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="a034" class="lz ma it lh b gy oa ob l oc od">kubectl api-resources</span></pre><p id="4f5a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出可用的API版本</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="b93d" class="lz ma it lh b gy oa ob l oc od">kubectl api-versions<!-- --> </span></pre><p id="bbd3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出所有名称空间中的pod、服务、daemonsets、部署、副本集、状态集、作业和cronjobs，而不是自定义资源类型。注意<code class="fe le lf lg lh b">--all-namespaces</code>的别名是<code class="fe le lf lg lh b">-A</code></p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="67a5" class="lz ma it lh b gy oa ob l oc od">kubectl get all --all-namespaces</span></pre><h2 id="2759" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" rel="noopener ugc nofollow" target="_blank">达蒙塞特</a></h2><blockquote class="oe of og"><p id="6c83" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">DaemonSet <strong class="kk iu">确保所有(或一些)节点运行Pod </strong>的副本。随着节点添加到集群中，单元也会添加到其中。随着节点从集群中移除，这些pod将被垃圾收集。删除DaemonSet将清理它创建的pod。</p></blockquote><p id="61af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出一个或多个daemonsets</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="a406" class="lz ma it lh b gy oa ob l oc od">kubectl get daemonset</span></pre><p id="ba4e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编辑和更新一个或多个数据集的定义</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="cf63" class="lz ma it lh b gy oa ob l oc od">kubectl edit daemonset &lt;daemonset_name&gt;</span></pre><p id="9f45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除守护集</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="442d" class="lz ma it lh b gy oa ob l oc od">kubectl delete daemonset &lt;daemonset_name&gt;</span></pre><p id="e547" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建新的daemonset</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="b939" class="lz ma it lh b gy oa ob l oc od">kubectl create daemonset &lt;daemonset_name&gt;</span></pre><p id="415d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">管理daemonset的首次展示</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="2fc9" class="lz ma it lh b gy oa ob l oc od">kubectl rollout daemonset</span></pre><p id="d08e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示命名空间内daemonsets的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="afb9" class="lz ma it lh b gy oa ob l oc od">kubectl describe ds &lt;daemonset_name&gt; -n &lt;namespace_name&gt;</span></pre><h2 id="211b" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank">部署</a></h2><blockquote class="oe of og"><p id="b49b" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">部署为<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank">pod</a>和<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/" rel="noopener ugc nofollow" target="_blank">复制集</a>提供声明性更新。</p><p id="e2e0" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">你在展开中描述一个<em class="it">期望状态</em>，展开<a class="ae li" href="https://kubernetes.io/docs/concepts/architecture/controller/" rel="noopener ugc nofollow" target="_blank">控制器</a>以受控的速率将实际状态改变为期望状态。您可以定义部署来创建新的副本集，或者删除现有的部署并在新部署中采用它们的所有资源。</p></blockquote><p id="376f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出一个或多个部署</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="e17c" class="lz ma it lh b gy oa ob l oc od">kubectl get deployment</span></pre><p id="b409" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示一个或多个部署的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="32c2" class="lz ma it lh b gy oa ob l oc od">kubectl describe deployment &lt;deployment_name&gt;</span></pre><p id="42fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编辑和更新服务器上一个或多个部署的定义</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="2d45" class="lz ma it lh b gy oa ob l oc od">kubectl edit deployment &lt;deployment_name&gt;</span></pre><p id="584f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建新部署</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="311e" class="lz ma it lh b gy oa ob l oc od">kubectl create deployment &lt;deployment_name&gt;</span></pre><p id="f5de" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除部署</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="f2f6" class="lz ma it lh b gy oa ob l oc od">kubectl delete deployment &lt;deployment_name&gt;</span></pre><p id="40e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看部署的首次展示状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="0bff" class="lz ma it lh b gy oa ob l oc od">kubectl rollout status deployment &lt;deployment_name&gt;</span></pre><p id="5478" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">执行滚动更新(K8S默认)，将容器的映像设置为特定部署的新版本</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="0f05" class="lz ma it lh b gy oa ob l oc od">kubectl set image deployment/&lt;deployment name&gt; &lt;container name&gt;=image:&lt;new image version&gt;</span></pre><p id="2392" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回滚以前的部署</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="ffa2" class="lz ma it lh b gy oa ob l oc od">kubectl rollout undo deployment/&lt;deployment name&gt;</span></pre><p id="cb52" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">执行替换部署— <em class="oh">强制替换、删除然后重新创建资源。</em></p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="ada0" class="lz ma it lh b gy oa ob l oc od">kubectl replace --force -f &lt;configuration file&gt;</span></pre><h2 id="446f" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">事件</h2><p id="ed0f" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">列出系统中所有资源的最近事件</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="b3b8" class="lz ma it lh b gy oa ob l oc od">kubectl get events</span></pre><p id="47f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">仅列出警告</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="d6cb" class="lz ma it lh b gy oa ob l oc od">kubectl get events --field-selector type=Warning</span></pre><p id="01af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出按时间戳排序的事件</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="1479" class="lz ma it lh b gy oa ob l oc od">kubectl get events --sort-by=.metadata.creationTimestamp</span></pre><p id="fd04" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出事件，但不包括Pod事件</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="85e9" class="lz ma it lh b gy oa ob l oc od">kubectl get events --field-selector involvedObject.kind!=Pod</span></pre><p id="aaed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为具有特定名称的单个节点提取事件</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="1add" class="lz ma it lh b gy oa ob l oc od">kubectl get events --field-selector involvedObject.kind=Node, involvedObject.name=&lt;node_name&gt;</span></pre><p id="5a5a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从事件列表中过滤出正常事件</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="fff6" class="lz ma it lh b gy oa ob l oc od">kubectl get events --field-selector type!=Normal</span></pre><h2 id="8036" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/cluster-administration/system-logs/" rel="noopener ugc nofollow" target="_blank">日志</a></h2><blockquote class="oe of og"><p id="315a" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">系统组件日志记录集群中发生的事件，这对调试非常有用。您可以配置日志详细度来查看更多或更少的详细信息。日志可以是粗粒度的，如显示组件中的错误，也可以是细粒度的，如显示事件的逐步跟踪(如HTTP访问日志、pod状态更改、控制器操作或调度程序决策)。</p></blockquote><p id="9d25" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">打印pod的日志</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="2589" class="lz ma it lh b gy oa ob l oc od">kubectl logs &lt;pod_name&gt;</span></pre><p id="3b1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">打印pod最近6小时的日志</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="d20a" class="lz ma it lh b gy oa ob l oc od">kubectl logs --since=6h &lt;pod_name&gt;</span></pre><p id="32f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取最近的50行日志</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="5f5a" class="lz ma it lh b gy oa ob l oc od">kubectl logs --tail=50 &lt;pod_name&gt;</span></pre><p id="0958" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从服务获取日志，并可以选择哪个容器</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="81a2" class="lz ma it lh b gy oa ob l oc od">kubectl logs -f &lt;service_name&gt; [-c &lt;$container&gt;]</span></pre><p id="19cf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">打印pod的日志并跟踪新日志</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="3d9e" class="lz ma it lh b gy oa ob l oc od">kubectl logs -f &lt;pod_name&gt;</span></pre><p id="9213" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">打印pod中容器的日志</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="1ee0" class="lz ma it lh b gy oa ob l oc od">kubectl logs -c &lt;container_name&gt; &lt;pod_name&gt;</span></pre><p id="aa1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将pod的日志输出到名为“pod.log”的文件中</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="a6a9" class="lz ma it lh b gy oa ob l oc od">kubectl logs &lt;pod_name&gt; pod.log</span></pre><p id="992a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看以前出现故障的pod的日志</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="5ac4" class="lz ma it lh b gy oa ob l oc od">kubectl logs --previous &lt;pod_name&gt;</span></pre><h2 id="d635" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/" rel="noopener ugc nofollow" target="_blank">命名空间</a></h2><blockquote class="oe of og"><p id="e8f8" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">在Kubernetes中，<em class="it">名称空间</em>提供了一种在单个集群中隔离资源组的机制。资源的名称在一个名称空间内需要是唯一的，但在不同的名称空间之间不需要。基于命名空间的作用域仅适用于命名空间对象<em class="it">(例如部署、服务等)</em>，不适用于集群范围的对象<em class="it">(例如存储类、节点、持久卷等)</em>。</p></blockquote><p id="4d49" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建名称空间</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="bfe3" class="lz ma it lh b gy oa ob l oc od">kubectl create namespace &lt;namespace_name&gt;</span></pre><p id="f70c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出一个或多个名称空间</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="1d00" class="lz ma it lh b gy oa ob l oc od">kubectl get namespace &lt;namespace_name&gt;</span></pre><p id="d881" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示一个或多个命名空间的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="0af7" class="lz ma it lh b gy oa ob l oc od">kubectl describe namespace &lt;namespace_name&gt;</span></pre><p id="a97e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除名称空间</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="7799" class="lz ma it lh b gy oa ob l oc od">kubectl delete namespace &lt;namespace_name&gt;</span></pre><p id="e1a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编辑和更新名称空间的定义</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="6a1b" class="lz ma it lh b gy oa ob l oc od">kubectl edit namespace &lt;namespace_name&gt;</span></pre><p id="31dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示节点或单元上命名空间的资源(CPU/内存/存储)使用情况</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="2a14" class="lz ma it lh b gy oa ob l oc od">kubectl top &lt;node / pod&gt; --namespace=&lt;namespace_name&gt;</span></pre><h2 id="1f0f" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/architecture/nodes/" rel="noopener ugc nofollow" target="_blank">节点</a></h2><blockquote class="oe of og"><p id="3c94" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">Kubernetes通过将容器放入Pods中在<em class="it">节点</em>上运行来运行您的工作负载。根据群集的不同，节点可以是虚拟机或物理机。每个节点由<a class="ae li" href="https://kubernetes.io/docs/reference/glossary/?all=true#term-control-plane" rel="noopener ugc nofollow" target="_blank">控制平面</a>管理，并包含运行<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank">pod</a>所需的服务。</p><p id="09af" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">通常，一个群集中有几个节点；在学习或资源有限的环境中，您可能只有一个节点。</p><p id="7898" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">一个节点上的<a class="ae li" href="https://kubernetes.io/docs/concepts/overview/components/#node-components" rel="noopener ugc nofollow" target="_blank">组件</a>包括<a class="ae li" href="https://kubernetes.io/docs/reference/generated/kubelet" rel="noopener ugc nofollow" target="_blank"> kubelet </a>，一个<a class="ae li" href="https://kubernetes.io/docs/setup/production-environment/container-runtimes" rel="noopener ugc nofollow" target="_blank">容器运行时</a>，以及<a class="ae li" href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-proxy/" rel="noopener ugc nofollow" target="_blank"> kube-proxy </a>。</p></blockquote><p id="0b20" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更新一个或多个节点上的污点</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="7e54" class="lz ma it lh b gy oa ob l oc od">kubectl taint node &lt;node_name&gt;</span></pre><p id="62ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出一个或多个节点</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="d7c4" class="lz ma it lh b gy oa ob l oc od">kubectl get node</span></pre><p id="a875" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除一个或多个节点</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="46f0" class="lz ma it lh b gy oa ob l oc od">kubectl delete node &lt;node_name&gt;</span></pre><p id="160e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示节点的资源使用情况(CPU/内存/存储)</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="a7a3" class="lz ma it lh b gy oa ob l oc od">kubectl top node &lt;node_name&gt;</span></pre><p id="6db5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在节点上运行的pod</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="1ff9" class="lz ma it lh b gy oa ob l oc od">kubectl get pods -o wide | grep &lt;node_name&gt;</span></pre><p id="2958" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注释节点</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="21a3" class="lz ma it lh b gy oa ob l oc od">kubectl annotate node &lt;node_name&gt;</span></pre><p id="e68e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将节点标记为不可调度</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="503b" class="lz ma it lh b gy oa ob l oc od">kubectl cordon node &lt;node_name&gt;</span></pre><p id="bf48" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将节点标记为可调度</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="3f04" class="lz ma it lh b gy oa ob l oc od">kubectl uncordon node &lt;node_name&gt;</span></pre><p id="e4f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">排空节点以准备维护</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="bf2e" class="lz ma it lh b gy oa ob l oc od">kubectl drain node &lt;node_name&gt;</span></pre><p id="72fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">添加或更新一个或多个节点的标签</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="8eee" class="lz ma it lh b gy oa ob l oc od">kubectl label node</span></pre><h2 id="e893" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank">豆荚</a></h2><blockquote class="oe of og"><p id="e9a0" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated"><em class="it"> Pods </em>是可以在Kubernetes中创建和管理的最小可部署计算单元。</p><p id="1d8f" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">一个<em class="it"> Pod </em>(如鲸或豌豆荚中的Pod)是一组一个或多个<a class="ae li" href="https://kubernetes.io/docs/concepts/containers/" rel="noopener ugc nofollow" target="_blank">容器</a>，具有共享存储和网络资源，以及如何运行容器的规范。一个Pod的内容总是位于同一位置并被共同调度，并且在一个共享的上下文中运行。Pod模拟一个特定于应用程序的“逻辑主机”:它包含一个或多个相对紧密耦合的应用程序容器。在非云环境中，在同一物理或虚拟机上执行的应用类似于在同一逻辑主机上执行的云应用。</p><p id="cf52" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">和应用程序容器一样，Pod可以包含在Pod启动期间运行的<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" rel="noopener ugc nofollow" target="_blank"> init容器</a>。如果您的集群提供的话，您还可以注入<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/ephemeral-containers/" rel="noopener ugc nofollow" target="_blank">临时容器</a>进行调试。</p></blockquote><p id="eb0b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出一个或多个窗格</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="dd36" class="lz ma it lh b gy oa ob l oc od">kubectl get pod</span></pre><p id="f893" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">按重新启动计数排序的列表窗格</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="1bbd" class="lz ma it lh b gy oa ob l oc od">kubectl get pods --sort-by='.status.containerStatuses[0].restartCount'</span></pre><p id="6960" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取命名空间中所有正在运行的窗格</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="95ef" class="lz ma it lh b gy oa ob l oc od">kubectl get pods --field-selector=status.phase=Running</span></pre><p id="cc47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除窗格</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="078f" class="lz ma it lh b gy oa ob l oc od">kubectl delete pod &lt;pod_name&gt;</span></pre><p id="defa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示窗格的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="0659" class="lz ma it lh b gy oa ob l oc od">kubectl describe pod &lt;pod_name&gt;</span></pre><p id="82bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建一个pod</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="de94" class="lz ma it lh b gy oa ob l oc od">kubectl create pod &lt;pod_name&gt;</span></pre><p id="3acf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对pod中的容器执行命令</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="bfe9" class="lz ma it lh b gy oa ob l oc od">kubectl exec &lt;pod_name&gt; -c &lt;container_name&gt; &lt;command&gt;</span></pre><p id="2fbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在单容器pod上获得交互式外壳</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="670c" class="lz ma it lh b gy oa ob l oc od">kubectl exec -it &lt;pod_name&gt; /bin/sh</span></pre><p id="9605" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示pod的资源使用情况(CPU/内存/存储)</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="2c05" class="lz ma it lh b gy oa ob l oc od">kubectl top pod</span></pre><p id="782b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">添加或更新pod的注释</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="cdff" class="lz ma it lh b gy oa ob l oc od">kubectl annotate pod &lt;pod_name&gt; &lt;annotation&gt;</span></pre><p id="0e7d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">添加或更新pod的标签</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="806b" class="lz ma it lh b gy oa ob l oc od">kubectl label pods &lt;pod_name&gt; new-label=&lt;label name&gt;</span></pre><p id="237d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取窗格并显示标签</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="8893" class="lz ma it lh b gy oa ob l oc od">kubectl get pods --show-labels</span></pre><p id="1934" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">监听本地机器上的端口，并转发到指定pod上的端口</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="4537" class="lz ma it lh b gy oa ob l oc od">kubectl port-forward &lt;pod name&gt; &lt;port number to listen on&gt;:&lt;port number to forward to&gt;</span></pre><h2 id="2d31" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/replicationcontroller/" rel="noopener ugc nofollow" target="_blank">复制控制器</a></h2><blockquote class="oe of og"><p id="8ab7" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated"><strong class="kk iu">注意:</strong>配置<code class="fe le lf lg lh b"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/" rel="noopener ugc nofollow" target="_blank">ReplicaSet</a></code>的<code class="fe le lf lg lh b"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank">Deployment</a></code>现在是设置复制的推荐方式。</p><p id="1dfd" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">一个<em class="it">复制控制器</em>确保指定数量的pod副本在任一时间运行。换句话说，复制控制器确保一个pod或一组同类的pod总是可用的。</p></blockquote><p id="9c27" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出复制控制器</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="cae1" class="lz ma it lh b gy oa ob l oc od">kubectl get rc</span></pre><p id="4add" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">按名称空间列出复制控制器</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="786c" class="lz ma it lh b gy oa ob l oc od">kubectl get rc --namespace=”&lt;namespace_name&gt;”</span></pre><h2 id="4735" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/" rel="noopener ugc nofollow" target="_blank">复制集</a></h2><blockquote class="oe of og"><p id="d54d" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">副本集的目的是在任何给定时间保持一组稳定的副本盒运行。因此，它通常用于保证指定数量的相同pod的可用性。</p></blockquote><p id="7534" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出副本集</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="6bd7" class="lz ma it lh b gy oa ob l oc od">kubectl get replicasets</span></pre><p id="4692" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示一个或多个副本集的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="3ea9" class="lz ma it lh b gy oa ob l oc od">kubectl describe replicasets &lt;replicaset_name&gt;</span></pre><p id="b7a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">缩放副本集</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="f978" class="lz ma it lh b gy oa ob l oc od">kubectl scale --replicas=[x]</span></pre><h2 id="9b55" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/configuration/secret/" rel="noopener ugc nofollow" target="_blank">秘密</a></h2><blockquote class="oe of og"><p id="3cb7" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">机密是包含少量敏感数据(如密码、令牌或密钥)的对象。否则，这些信息可能会放在<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank"> Pod </a>规范或<a class="ae li" href="https://kubernetes.io/docs/reference/glossary/?all=true#term-image" rel="noopener ugc nofollow" target="_blank">容器图像</a>中。使用秘密意味着您不需要在应用程序代码中包含机密数据。</p><p id="27b8" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">因为可以独立于使用它们的窗格创建机密，所以在创建、查看和编辑窗格的工作流程中，机密(及其数据)暴露的风险较小。Kubernetes和在集群中运行的应用程序还可以采取额外的保密措施，比如避免将保密数据写入非易失性存储器。</p><p id="db2f" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">机密与<a class="ae li" href="https://kubernetes.io/docs/concepts/configuration/configmap/" rel="noopener ugc nofollow" target="_blank">配置图</a>相似，但专门用于保存机密数据。</p></blockquote><p id="282c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创造一个秘密</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="c83e" class="lz ma it lh b gy oa ob l oc od">kubectl create secret</span></pre><p id="a5b7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出秘密</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="6191" class="lz ma it lh b gy oa ob l oc od">kubectl get secrets</span></pre><p id="6be4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出秘密的详细信息</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="e6bc" class="lz ma it lh b gy oa ob l oc od">kubectl describe secrets</span></pre><p id="2a4f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除秘密</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="6c59" class="lz ma it lh b gy oa ob l oc od">kubectl delete secret &lt;secret_name&gt;</span></pre><h2 id="eba2" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/services-networking/service/" rel="noopener ugc nofollow" target="_blank">服务</a></h2><blockquote class="oe of og"><p id="975a" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">一种将运行在一组<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank">pod</a>上的应用程序公开为网络服务的抽象方式。</p><p id="1d79" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">使用Kubernetes，您不需要修改应用程序来使用不熟悉的服务发现机制。Kubernetes为一组Pods提供它们自己的IP地址和一个DNS名称，并且可以在它们之间进行负载平衡。</p></blockquote><p id="a5ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出一项或多项服务</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="d788" class="lz ma it lh b gy oa ob l oc od">kubectl get services</span></pre><p id="eed4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示服务的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="268c" class="lz ma it lh b gy oa ob l oc od">kubectl describe services</span></pre><p id="d8a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将复制控制器、服务、部署或pod作为新的Kubernetes服务公开</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="04ad" class="lz ma it lh b gy oa ob l oc od">kubectl expose deployment [deployment_name]</span></pre><p id="3007" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编辑和更新一个或多个服务的定义</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="b4fd" class="lz ma it lh b gy oa ob l oc od">kubectl edit services</span></pre><h2 id="fe4c" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/" rel="noopener ugc nofollow" target="_blank">服务账户</a></h2><blockquote class="oe of og"><p id="add4" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">服务帐户为在Pod中运行的进程提供身份。</p><p id="36d7" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated"><strong class="kk iu">注意:</strong>本文是对服务帐户的用户介绍，描述了服务帐户在Kubernetes项目推荐的集群中的行为。您的集群管理员可能已经自定义了集群中的行为，在这种情况下，本文档可能不适用。</p><p id="f1b2" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">当您(一个人)访问集群时(例如，使用<code class="fe le lf lg lh b">kubectl</code>)，您被apiserver认证为一个特定的用户帐户(目前通常是<code class="fe le lf lg lh b">admin</code>，除非您的集群管理员已经定制了您的集群)。pod内容器中的进程也可以联系apiserver。当他们这样做时，他们被认证为一个特定的服务帐户(例如，<code class="fe le lf lg lh b">default</code>)。</p></blockquote><p id="8a7c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列出服务帐户</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="f8da" class="lz ma it lh b gy oa ob l oc od">kubectl get serviceaccounts</span></pre><p id="0fb6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示一个或多个服务帐户的详细状态</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="bf25" class="lz ma it lh b gy oa ob l oc od">kubectl describe serviceaccounts</span></pre><p id="9045" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">替换服务帐户</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="345c" class="lz ma it lh b gy oa ob l oc od">kubectl replace serviceaccount</span></pre><p id="29b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除服务帐户</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="4f0d" class="lz ma it lh b gy oa ob l oc od">kubectl delete serviceaccount &lt;service_account_name&gt;</span></pre><h2 id="3067" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated"><a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" rel="noopener ugc nofollow" target="_blank">statefullset</a></h2><blockquote class="oe of og"><p id="3ac7" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">StatefulSet是用于管理有状态应用程序的工作负载API对象。</p><p id="508e" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">管理一组<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/pods/" rel="noopener ugc nofollow" target="_blank">pod</a>、<em class="it">的部署和扩展，并提供关于这些pod的排序和唯一性</em>的保证。</p><p id="5ce4" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">像<a class="ae li" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank">部署</a>一样，StatefulSet管理基于相同容器规范的pod。与部署不同，StatefulSet为它们的每个pod维护一个粘性身份。这些pod由相同的规范创建，但不可互换:每个pod都有一个持久标识符，它在任何重新调度中都维护这个标识符。</p><p id="462f" class="ki kj oh kk b kl km ju kn ko kp jx kq oi ks kt ku oj kw kx ky ok la lb lc ld im bi translated">如果您希望使用存储卷为您的工作负载提供持久性，您可以使用StatefulSet作为解决方案的一部分。尽管状态集中的单个Pod容易出现故障，但永久Pod标识符使得将现有卷与替换任何出现故障的Pod的新Pod相匹配变得更加容易。</p></blockquote><p id="996b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">列表状态集</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="33d8" class="lz ma it lh b gy oa ob l oc od">kubectl get statefulset</span></pre><p id="2a1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">仅删除状态集(不删除窗格)</p><pre class="lk ll lm ln gt nw lh nx ny aw nz bi"><span id="3e5b" class="lz ma it lh b gy oa ob l oc od">kubectl delete statefulset/[stateful_set_name] --cascade=false</span></pre><h2 id="4904" class="lz ma it bd mb mc md dn me mf mg dp mh kr mi mj mk kv ml mm mn kz mo mp mq mr bi translated">摘要</h2><p id="e03b" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr nt kt ku kv nu kx ky kz nv lb lc ld im bi translated">使用K8S时，开门见山，用小抄！</p><p id="28a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想要更多Kubernetes内容？查看我的其他K8S文章<a class="ae li" href="https://jackwesleyroper.medium.com/kubernetes-k8s-related-articles-index-54718769e390" rel="noopener">这里</a>！</p><p id="1d93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">干杯！🍻</p><div class="ol om gp gr on oo"><a href="https://www.buymeacoffee.com/jackwesleyroper" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">Jack Roper正在Azure、Azure DevOps、Terraform、Kubernetes和Cloud tech上写博客！</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">希望我的博客能帮到你，你会喜欢它的内容！我真的很喜欢写技术内容和分享…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc lt oo"/></div></div></a></div><p id="bd33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="oh">原载于</em><a class="ae li" href="https://spacelift.io/" rel="noopener ugc nofollow" target="_blank"><em class="oh">space lift . io</em></a><em class="oh">。</em></p></div></div>    
</body>
</html>