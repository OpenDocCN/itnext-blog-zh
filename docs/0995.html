<html>
<head>
<title>[Part 2] How to deploy a Telegram Bot using Now (Building a Bookmark Manager Bot series)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[第2部分]如何使用Now部署电报机器人(构建书签管理器机器人系列)</h1>
<blockquote>原文：<a href="https://itnext.io/part-2-deploying-a-telegram-bot-using-now-building-a-bookmark-manager-bot-series-9304104a64ae?source=collection_archive---------0-----------------------#2018-06-30">https://itnext.io/part-2-deploying-a-telegram-bot-using-now-building-a-bookmark-manager-bot-series-9304104a64ae?source=collection_archive---------0-----------------------#2018-06-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/73fe8e3fd972b8e4621b1cae3c22be53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3UMUyrLF2K56u_BfrwtCLg.png"/></div></div></figure><p id="0fce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这篇文章是一个系列的一部分，在第一部分<a class="ae kz" href="https://medium.com/p/972bb7198def/edit" rel="noopener">中，我们已经构建了自己的书签管理器bot，在这一部分中，我们将看看如何部署我们的bot，以便我们最终可以开始使用它！正如你将看到的，这一步其实很容易！</a></p><p id="7d09" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意:</strong>尽管本文是系列文章的一部分，但是如果您已经自己构建了一个电报机器人(使用Node.js ),并且正在考虑如何部署它，那么您也可以跟着做！</p><h2 id="65bf" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">首先..</h2><p id="ac78" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">我们需要调整我们的<code class="fe ly lz ma mb b">package.json</code>文件。为了使运行我们的脚本更容易，我们需要包含<code class="fe ly lz ma mb b">scripts</code>参数并指定我们的<em class="mc">开始</em>脚本。此外，我们需要指定我们想要使用的节点的版本，为此您还需要包含<code class="fe ly lz ma mb b">engines</code>参数。让我们调整<code class="fe ly lz ma mb b">package.json</code>，使它看起来像这样:</p><pre class="md me mf mg gt mh mb mi mj aw mk bi"><span id="fdae" class="la lb it mb b gy ml mm l mn mo">{<br/>  "name": "bookmark-bot",<br/>  "version": "1.0.0",<br/>  "main": "index.js",<br/>  "license": "MIT",<br/>  "scripts": {<br/>    "start": "node index.js"<br/>  },<br/>  "dependencies": {<br/>    "firebase": "^5.0.4",<br/>    "node-telegram-bot-api": "^0.30.0",<br/>    "open-graph-scraper": "^3.3.0"<br/>  },<br/>  "engines": {<br/>    "node": "10.3.0"<br/>  }<br/>}</span></pre><p id="a7df" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe ly lz ma mb b">start</code>脚本中，我们告诉Node运行<code class="fe ly lz ma mb b">node index.js</code>，这是我们在上一部分中用来测试bot的命令。下次你想测试你的机器人时，你可以简单地使用<code class="fe ly lz ma mb b">yarn start</code>(如果你使用Yarn作为你的包管理器)或者<code class="fe ly lz ma mb b">npm start</code>(如果你使用npm)。</p><p id="43f8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要检查您的节点版本，请运行<code class="fe ly lz ma mb b">node -v</code>(或<code class="fe ly lz ma mb b">node --version</code>)并将其用作您的引擎。</p><p id="b76b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，让我们让机器人运行起来！</p><h1 id="11da" class="mp lb it bd lc mq mr ms lf mt mu mv li mw mx my ll mz na nb lo nc nd ne lr nf bi translated">部署我们的机器人</h1><p id="66ab" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated"><strong class="kd iu">网址:</strong><a class="ae kz" href="https://zeit.co/now" rel="noopener ugc nofollow" target="_blank">https://zeit.co/now</a><br/><strong class="kd iu">价格:</strong>免费，最多3个实例</p><p id="c3dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mc">现在</em>是Zeit提供的一项服务，可以让你轻松部署Node.js应用。<em class="mc">现在</em>是我最喜欢的部署聊天机器人的服务。他们有一个很好的免费层计划，他们的服务非常方便用户。</p><p id="b51a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，前往<a class="ae kz" href="https://zeit.co/signup" rel="noopener ugc nofollow" target="_blank">https://zeit.co/signup</a>创建一个账户。如果您愿意，可以将您的帐户连接到GitHub帐户，但这不是必需的。对于这篇文章，我使用的是一个没有连接的帐户。</p><p id="e308" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在有两种方法可以在你的机器上获得<em class="mc"/>，你可以下载<a class="ae kz" href="https://zeit.co/download" rel="noopener ugc nofollow" target="_blank">桌面app </a>或者只安装命令行界面。使用这两种方式部署都很容易，桌面应用程序会给你一个漂亮的界面，而不是运行命令。</p><h2 id="94c5" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated"><strong class="ak">使用now-cli部署</strong></h2><p id="aa3b" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">要安装<em class="mc"> Now </em>，只需在终端中运行以下命令即可全局安装<em class="mc"> Now </em>包:</p><pre class="md me mf mg gt mh mb mi mj aw mk bi"><span id="aabe" class="la lb it mb b gy ml mm l mn mo">yarn global add now</span><span id="1e8c" class="la lb it mb b gy ng mm l mn mo">// or if you are using npm instead of Yarn<br/>npm install -g now</span></pre><p id="26b5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">超级简单，不是吗？要部署你的机器人，你所要做的就是运行<code class="fe ly lz ma mb b">now</code>。</p><pre class="md me mf mg gt mh mb mi mj aw mk bi"><span id="5357" class="la lb it mb b gy ml mm l mn mo">cd your-project-folder<br/>now</span></pre><p id="8f17" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为这是你第一次使用<em class="mc">现在</em>你将被要求你的电子邮件，然后你将被要求打开一个电子邮件进行验证。确认电子邮件地址后，再次运行<code class="fe ly lz ma mb b">now</code>进行部署。</p><p id="5eb7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你使用的是免费账户，会有一个提示说你的日志将会公开，并询问你是否想继续。为了避免将来出现这种提示，您可以运行<code class="fe ly lz ma mb b">now --public</code>而不是<code class="fe ly lz ma mb b">now</code>。</p><p id="ab03" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mc">现在</em>将生成一个<code class="fe ly lz ma mb b">.now.sh</code> URL，您可以用它来访问您的应用程序，但是在我们的例子中，它什么也不显示，因为没有前端。</p><p id="cc9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">恭喜你！你的机器人现在已经部署好了，你可以随时使用它，而不必在本地运行它。</strong></p><h2 id="3b4a" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">防止冻结状态</h2><p id="bde5" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">如果机器人没有接收到任何流量，它将自动进入<em class="mc">冻结</em>状态。如果发生了这种情况，或者您想防止它发生，您可以运行<code class="fe ly lz ma mb b">now scale your-deployment-url 1</code>，其中<em class="mc"> your-deployment-url </em>是您的部署url，以<code class="fe ly lz ma mb b">.now.sh</code>结尾，您可以从您的zeit.co仪表板中获得。</p><p id="e35b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">如果出了问题..你可以检查你的日志，看看哪里出了问题。你可以在<a class="ae kz" href="https://zeit.co/dashboard/deployments" rel="noopener ugc nofollow" target="_blank">你的仪表盘</a>点击你的应用程序的网址来访问你的日志。</strong></p><h2 id="929d" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">使用Now桌面应用程序</h2><p id="0247" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">桌面会让你更容易部署项目，并给你一些额外的功能。一旦你安装了桌面应用程序，你需要做的就是把你的项目文件夹放到应用程序中！</p><h1 id="ae9c" class="mp lb it bd lc mq mr ms lf mt mu mv li mw mx my ll mz na nb lo nc nd ne lr nf bi translated">那都是乡亲们！</h1><p id="2be3" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">我们的机器人启动并运行，我们现在可以随时保存我们的书签！我们的书签仍然保存在Firebase数据库中，这使得实际查找它们有点不方便。在下一部分，我们将使用Vue.js创建一个漂亮的界面，这样我们就可以轻松地访问和管理我们的书签！</p><p id="18a0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">系列索引</strong> <br/> <a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/part-1-building-a-bookmark-manager-telegram-bot-node-js-vue-js-972bb7198def">【第一部分】如何使用Node.js </a> <br/> <a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/part-2-deploying-a-telegram-bot-using-now-building-a-bookmark-manager-bot-series-9304104a64ae">【第二部分】如何使用Now </a> <br/> <em class="mc">部署电报机器人下一部分即将推出！</em></p></div></div>    
</body>
</html>