<html>
<head>
<title>Deploying an ASP.NET Core Application to Amazon Web Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将ASP.NET核心应用程序部署到Amazon Web Services</h1>
<blockquote>原文：<a href="https://itnext.io/deploying-an-asp-net-core-application-to-amazon-web-services-c0d1be48d44b?source=collection_archive---------4-----------------------#2018-06-24">https://itnext.io/deploying-an-asp-net-core-application-to-amazon-web-services-c0d1be48d44b?source=collection_archive---------4-----------------------#2018-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6cf7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是关于将一个非常简单的ASP.NET核心应用程序部署到主要云提供商的系列文章的第二篇。这篇文章将讨论Amazon Web Services (AWS)的设置和部署。</p><p id="0227" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是这个系列的其他帖子。</p><p id="d809" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://elanderson.net/2018/06/deploying-an-asp-net-core-application-to-google-cloud-platform/" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a> <br/> <a class="ae kl" href="https://elanderson.net/2018/06/deploying-an-asp-net-core-application-to-amazon-web-services/" rel="noopener ugc nofollow" target="_blank">亚马逊网络服务</a>(本帖)<br/> <a class="ae kl" href="https://elanderson.net/2018/07/deploying-an-asp-net-core-application-to-microsoft-azure/" rel="noopener ugc nofollow" target="_blank">微软Azure </a></p><h2 id="e80b" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">示例应用程序</h2><p id="0b68" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">这与该系列的第一篇文章相同，但我把它包括在内，以防你错过了那篇文章。我们将要部署的示例应用程序是使用。NET CLI。以下命令是我用来创建应用程序、创建解决方案以及将项目添加到解决方案中的命令。我在CloudSample目录中运行了所有这些命令。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="2845" class="km kn iq lp b gy lt lu l lv lw">dotnet new razor<br/>dotnet new sln<br/>dotnet sln add CloudSample.csproj</span></pre><h2 id="9ae1" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">亚马逊网络服务</h2><p id="b85d" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">这篇文章的其余部分将基于亚马逊为Visual Studio Toolkit<a class="ae kl" href="https://docs.aws.amazon.com/toolkit-for-visual-studio/latest/user-guide/welcome.html" rel="noopener ugc nofollow" target="_blank">和Beanstalk with</a><a class="ae kl" href="https://docs.aws.amazon.com/toolkit-for-visual-studio/latest/user-guide/deployment-beanstalk-netcore.html" rel="noopener ugc nofollow" target="_blank">提供的一些文档。网芯</a>。我将详细介绍整个过程，但我想确保你能获得这篇文章所基于的相同信息。</p><p id="6175" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用于Visual Studio的AWS工具包</p><p id="55d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Amazon提供了一个Visual Studio扩展来帮助从Visual Studio与他们的平台进行交互。要安装，打开<strong class="jp ir">工具&gt;扩展和更新</strong>菜单。从对话框左侧选择<strong class="jp ir">在线</strong>然后搜索<strong class="jp ir"> AWS </strong>并选择<strong class="jp ir">AWS Toolkit for Visual Studio 2017。</strong></p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lx"><img src="../Images/d9785b021643f2ec93ad94296d692d0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LhXHx-7mDUdN5zyh.png"/></div></div></figure><p id="e8a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击下载，关闭Visual Studio以触发安装，并在扩展安装完成后重新启动Visual Studio。当您打开Visual Studio back up时，您应该会看到AWS入门页面，其中包含了指向AWS控制台中IAM用户页面的链接。这将使你进入下一页，你必须登录你的帐户或注册一个新帐户。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mf"><img src="../Images/4bfda84a548404c17017752eba7d8835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yHNKHqF0V4sTRls8.png"/></div></div></figure><p id="3072" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您完成注册/登录过程后，您将进入IAM控制台，我们将通过点击<strong class="jp ir">添加用户</strong>按钮来添加新用户。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/ae7b49ba0a28d73361462c52ec287068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/0*jOdRL4_TmR0Fx5x6.png"/></div></figure><p id="a6a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一页，填写您想要使用的<strong class="jp ir">用户名</strong>，并勾选<strong class="jp ir">编程访问</strong>复选框，然后点击<strong class="jp ir">下一步:权限</strong>按钮。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mh"><img src="../Images/d29075967ac1007f5f181479d6b4ef8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KUH7plxkzlq8NO4E.png"/></div></div></figure><p id="ffe0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一页是所有关于用户将有什么权限，这是通过组处理。由于我的帐户没有任何群组，我需要使用<strong class="jp ir">创建群组</strong>按钮创建一个群组。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mi"><img src="../Images/b2bac795c692a83d03c010bbce2528d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SL46ABdDJfKwx7De.png"/></div></div></figure><p id="2e50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir">创建组</strong>表单上，输入您想要使用的<strong class="jp ir">组名</strong>。接下来，使用<strong class="jp ir">策略类型</strong>的搜索框来查找与Elastic Beanstalk相关的策略。我已经为这个示例选择了完全访问策略，但是如果它不仅仅是一个测试，这将需要更多的研究来确定这是否是正确的策略。完成后，点击<strong class="jp ir">创建组</strong>按钮。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mj"><img src="../Images/da1a16f19d14c3d70f8417a0e9b6b862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ADYCmlz0dhZBF3z7.png"/></div></div></figure><p id="f956" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将使您从上面返回到组页面。点击<strong class="jp ir">下一步:查看</strong>按钮继续。下一页只是对前几页所选选项的回顾。点击<strong class="jp ir">创建用户</strong>按钮继续。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mk"><img src="../Images/af231ad6c8256f0d632d4f10436868e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h_hTftIhQHPE0gwa.png"/></div></div></figure><p id="d726" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一页有一个按钮<strong class="jp ir">下载。csv </strong>，点击它，下载文件。回到Visual Studio的AWS入门页面，点击<strong class="jp ir">从csv文件导入</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/2914b887bfcd7d3a00e9e72870cb2f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/0*kmb4e_gXwA3Dhka5.png"/></div></figure><p id="98cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">浏览并选择上面的csv下载。然后点击AWS入门页面上的<strong class="jp ir">保存并关闭</strong>按钮。完成后，您应该会看到<strong class="jp ir"> AWS浏览器</strong>窗口。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/1aa44e933ee5259fefec4ebdbb765486.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/0*EgCFEOQi1T-h4JwX.png"/></div></figure><p id="a72b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注册AWS弹性豆茎</p><p id="fcb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你注意到AWS浏览器截图上面的<strong class="jp ir">，请在AWS Elastic Beanstalk下注册这项服务</strong>。双击<strong class="jp ir">请注册此服务</strong>将打开一个新的浏览器窗口。在此窗口中，点击<strong class="jp ir">AWS弹性豆茎入门</strong>按钮。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/a49b1fff2ba364c7d82503b3570e01d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/0*EoyYGm-BxUb8y01x.png"/></div></figure><p id="9248" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一页将提示输入付款信息。输入您的信息后，点击<strong class="jp ir">安全提交</strong>按钮。下一步是一个自动电话，以验证你是谁，你说你是谁。注册的最后一步是选择您的计划。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/4076b833f41b18600e4bf864e62e1baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/0*FLMUo3GwvgOG3bdz.png"/></div></figure><p id="dfaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择<strong class="jp ir">免费</strong>计划，完成注册。</p><p id="d336" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从Visual Studio发布</p><p id="6c9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在注册完成了，希望回到Visual Studio并打开您想要发布的解决方案。在Solution Explorer窗口中右键点击项目，然后点击<strong class="jp ir">发布到AWS弹性豆茎</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4c2b0111c34388bda8b3ed3920e5fe22.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/0*cyy-lA0gbuTEOtjk.png"/></div></figure><p id="68ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将打开<strong class="jp ir">发布到亚马逊网络服务</strong>对话框。我只是采用默认值，因为这是一个新的应用程序，我没有任何现有的环境。点击<strong class="jp ir">下一个</strong>按钮继续。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/41ad0cae22f0341bcc27328e2b9c1f02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HgQTltJ98eMnbQ6t.png"/></div></div></figure><p id="b814" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一个屏幕上，需要一个<strong class="jp ir">应用名称</strong>和<strong class="jp ir">环境名称</strong>。填写它们并点击下一个的<strong class="jp ir">。</strong></p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/574f6c496c56dd8e852e890dffb4514e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*27L6Pl4Go-uW9ER_.png"/></div></div></figure><p id="39ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一个屏幕中，您可以配置支持您的应用程序的EC2实例的类型和大小。我使用了默认值。一如既往，准备好后点击<strong class="jp ir">下一个</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/96d03d1847bdbd9d4c3cfe2466e7984f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NRgFF4O0NR-zLfz9.png"/></div></div></figure><p id="4181" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个屏幕允许您配置权限。你永远也猜不到，但我使用了默认设置，并点击了<strong class="jp ir">下一步</strong>。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/3cf3d12a8e6f86296d98945cfbfa2d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Tb30LWvn7tF3JvGo.png"/></div></div></figure><p id="0558" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个屏幕允许您选择要使用的项目构建配置和框架。默认值是根据您的项目设置的，所以它们应该是正确的。点击<strong class="jp ir">完成</strong>按钮。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/343b5f9e64742f1effcc5d692db187cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uVhIcXQ499wNsLtD.png"/></div></div></figure><p id="756b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一个屏幕是查看所有选项。如果你对一切都满意，点击<strong class="jp ir">部署</strong>按钮。</p><figure class="lk ll lm ln gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/db058f44c8b91cfab5a2b50f56a6ac25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9i2KJxx7GpKsSiK1.png"/></div></div></figure><p id="2044" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在部署过程中，我在输出窗口中看到以下错误。</p><blockquote class="mr ms mt"><p id="566b" class="jn jo mu jp b jq jr js jt ju jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj kk ij bi translated">设置角色时捕获到amazonitymanagementserviceexception:用户:myUser/CloudSampleBlog无权执行:iam:GetInstanceProfile on资源:实例配置文件AWS-elastic beanstalk-ec2-role<br/>设置服务角色时捕获到异常:用户:myUser/CloudSampleBlog无权执行:iam:PutRolePolicy on资源:role AWS-elastic beanstalk-service-role</p></blockquote><p id="d44f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这被证明不是一个真正的问题。我来到我的<a class="ae kl" href="https://console.aws.amazon.com/elasticbeanstalk" rel="noopener ugc nofollow" target="_blank">Elastic Beanstalk Dashboard</a>那里，应用程序已经在部署过程中。整个过程耗时5分钟左右。与谷歌不同，我不得不在仪表板中找到URL，而不是浏览器自动打开该URL。</p><p id="e2cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">包扎</p><p id="1874" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">AWS的初始设置比Google复杂得多。重新部署在两分钟内完成，这比我在谷歌上看到的要快得多。总体看来，Elastic Beanstalk与Google的应用引擎不相上下。</p><p id="1506" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您完成时，不要忘记关闭和/或删除您的测试项目，以确保您不会被收费。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="a593" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mu">原载于</em><a class="ae kl" href="https://elanderson.net/2018/06/deploying-an-asp-net-core-application-to-amazon-web-services/" rel="noopener ugc nofollow" target="_blank"><em class="mu"/></a><em class="mu">。</em></p></div></div>    
</body>
</html>