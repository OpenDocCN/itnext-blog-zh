<html>
<head>
<title>Using Prop-Types everywhere</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">到处使用道具类型</h1>
<blockquote>原文：<a href="https://itnext.io/using-prop-types-everywhere-a27e4fe6b430?source=collection_archive---------4-----------------------#2020-04-28">https://itnext.io/using-prop-types-everywhere-a27e4fe6b430?source=collection_archive---------4-----------------------#2020-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b705ab15c79d2a2cc854cf87da6c0f56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fcVi3ndnFOoqQWRTAd6BKA.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@chrishenryphoto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯·亨利</a>在<a class="ae kf" href="https://unsplash.com/s/photos/high-altitude?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="de4a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我喜欢简单的东西。任何复杂性的增加都是有原因的，就像你的项目中的另一个库一样，它是额外的复杂性，应该有这样做的原因。</p><p id="cc1d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时原因是库降低(封装)了应用程序的复杂性。那很好。</p><p id="b311" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果您在客户端和服务器端有类似的任务要做，并且根据常识假设您需要为此使用不同的工具，该怎么办？有足够的理由在你的应用程序中有两个看起来很像的库，嗯，也许。</p><p id="24ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我会说，当我没有太多时间思考的时候，我会听从互联网上的一些建议。</p><p id="a008" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但这次不是。我突然意识到我其实很喜欢使用“道具类型”库来定义react组件道具中不同的对象形状和所需的值。当我在服务器端遇到一个JSON验证的任务时，我稍微思考了一下，发现实际上没有太多的理由不在生产和服务器端使用这个库，以及用于稍微不同的目的(一点点)。</p><h2 id="de3d" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">在React外部使用PropTypes</h2><p id="2754" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">在我写这篇文章的时候，这个想法可能已经不新鲜了。<code class="fe mc md me mf b">prop-types</code>很久以前就被排除到单独的节点模块里了。</p><p id="9327" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://www.npmjs.com/package/prop-types" rel="noopener ugc nofollow" target="_blank">自述</a>说可以用于和<code class="fe mc md me mf b">propTypes</code>类似的对象。但是，任何javascript对象都是相似的。因此，当这个库用于检查React组件属性类型之外的其他事情时，这是一种正常情况。</p><p id="3b15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是这个库有一个限制。默认情况下，它只在dev env中工作，并在生产中变成空的shim函数。这没关系，这是像这样的客户端库的预期行为。这在许多其他地方可能没问题，但是对于其他情况，我们也需要让它在生产中工作。</p><p id="d72d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您需要编写几行代码来使其在react之外工作，但在展示它们之前，我想分享一下我在代码中留下的注释，当时我第一次使用prop-types来处理React组件props之外的事情:</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mg"><img src="../Images/ebed7b05ca0078c0b8518e0c9afa6f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a_wknAwrPwE0dqUKh8Ux7Q.png"/></div></div></figure><p id="87b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它很好地描述了我当时的感受:对庞大的库感到沮丧，希望使用我已经非常了解的概念，希望避免花太多时间搜索足够好的小库来完成任务。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="ad37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，回到代码，这里有一些文档描述了如何在React的生产和外部运行这个库:<a class="ae kf" href="http://fb.me/prop-types-in-prod" rel="noopener ugc nofollow" target="_blank">http://fb.me/prop-types-in-prod</a></p><p id="c178" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在几行代码中，您需要显式导入<code class="fe mc md me mf b">prop-types/prop-types</code>，它将返回开发和生产中的非填充版本，并像这样手动调用<code class="fe mc md me mf b">checkPropTypes</code>:</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/4dcb76c5d0a59a80fc45775224ff6f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQn8Q7f7nMPjCxTC-REHTw.png"/></div></div></figure><p id="791b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<code class="fe mc md me mf b">location</code>和<code class="fe mc md me mf b">componentName</code>用于错误信息。</p><p id="f5bb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个非常简单的想法，不需要阅读大量的文档或编写大量的代码，但由于最初对库的假设，这种用法可能看起来很奇怪，而事实上，它显示了我最喜欢的库之一的真正力量。</p><h2 id="f3e4" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">结论</h2><p id="a80d" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我没有看到这个库经常在生产中使用，这可能有很多原因。有人可能需要一个非常高性能的库，而“prop-types”可能达不到这个最高分，或者可能期望JSON验证任务将由一个具有特定接口的库来执行。或者用<code class="fe mc md me mf b">prop-types</code>做其他事情看起来很奇怪，这没关系。</p><p id="5f57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有不在生产中使用<code class="fe mc md me mf b">prop-types</code>的理由都很重要，但是为什么不试着做一些不同的事情只是为了好玩呢？有趣的是，如果谈到我的经历:lib的界面很简单，我可以重用为应用程序的不同部分编写的大量代码，我喜欢它。</p></div></div>    
</body>
</html>