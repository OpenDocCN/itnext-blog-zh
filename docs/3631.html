<html>
<head>
<title>Blazor and Native Mobile Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Blazor和原生移动应用</h1>
<blockquote>原文：<a href="https://itnext.io/blazor-and-native-mobile-apps-9177c5a6488b?source=collection_archive---------2-----------------------#2020-01-21">https://itnext.io/blazor-and-native-mobile-apps-9177c5a6488b?source=collection_archive---------2-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dcd2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">实验性移动Blazor绑定</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e03e86d2792264a884897e8803353213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kzeA2k4RPyZV596XkS56Tg.png"/></div></div></figure><p id="9d11" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://devblogs.microsoft.com/aspnet/mobile-blazor-bindings-experiment/" rel="noopener ugc nofollow" target="_blank">开。NET Conf 2020 </a>，微软宣布了一个名为Mobile Blazor Bindings的实验项目，让<strong class="kw iu">开发者用</strong> <a class="ae lq" href="https://docs.microsoft.com/en-us/aspnet/core/blazor/?view=aspnetcore-3.1" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Blazor </strong> </a> <strong class="kw iu">和</strong> <a class="ae lq" href="https://dotnet.microsoft.com/apps/xamarin" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Xamarin </strong> </a>创建原生移动应用。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="ea4c" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">什么是MobileBlazorBinding，什么不是？</h2><p id="10a8" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">Blazor是一个用于构建交互式客户端web UI的框架。NET和，<strong class="kw iu"> Xamarin </strong>是一个应用平台，用于构建Android和iOS应用。NET和C#。</p><p id="c40c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可能会想，有了Razor、HTML和C#你就能构建原生的移动应用，<strong class="kw iu">但事实是:不，你不能。</strong></p><p id="db81" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Mobile Blazor绑定是用<a class="ae lq" href="https://docs.microsoft.com/en-us/aspnet/web-pages/overview/getting-started/introducing-razor-syntax-c" rel="noopener ugc nofollow" target="_blank"> Razor </a>而不是<a class="ae lq" href="https://docs.microsoft.com/en-us/dotnet/desktop-wpf/fundamentals/xaml" rel="noopener ugc nofollow" target="_blank"> XAM </a> L语法创建<a class="ae lq" href="https://dotnet.microsoft.com/apps/xamarin/xamarin-forms" rel="noopener ugc nofollow" target="_blank"> Xamarin表单</a> UI的另一种方式。他们为具有web开发背景的开发人员和不熟悉XAML的人创建了这个实验项目。</p><p id="78c9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是否意味着你可以与Blazor和Xamarin共享-UI？<strong class="kw iu">不！</strong></p><p id="0bb7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当你用BlazorMobileBindings创建一个应用程序时，你实际上是在你的UI中使用了非HTML的原生UI组件！</p><p id="0590" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是Blazor移动绑定的一个简单示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="493b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个例子是关于Blazor Web组件的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3032" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你只是比较这两个源代码，它们在某种程度上是相同的。唯一的区别是一个是使用HTML，另一个是使用Xamarin UI组件。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="54c7" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">如何在MobileBlazorBindings中使用设备传感器？</h2><p id="f9a4" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">说到传感器，开发人员可能会说在不同的平台上使用传感器是不同的。例如，在Android中访问加速度计或地理位置的方式在iOS中完全不同。</p><p id="d593" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Xamarin是一个成熟的平台，它提供了许多库和工具来构建真正的原生跨平台应用程序。其中一个库叫做<a class="ae lq" href="https://docs.microsoft.com/en-us/xamarin/essentials/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Xamarin。</strong> </a> <strong class="kw iu">要领。</strong>它为开发者的移动应用提供跨平台的API。您可以使用独立于平台(Android、iOS、Windows)的API来处理加速度计、电池状态等。</p><p id="843c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> Xamarin。Essentials </strong>可以通过<a class="ae lq" href="https://www.nuget.org/packages/Xamarin.Essentials" rel="noopener ugc nofollow" target="_blank"> NuGet </a>安装。在您的移动应用程序中使用 it非常简单，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="ac28" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">项目结构</h2><p id="6c8d" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">当您创建一个新的MobileBlazorBindings项目时，解决方案结构如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/2853caebc7489dd3cc26cc7a49e9d50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*lpCynBv18WYmwLfpuXt6UA.png"/></div></figure><p id="e6b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">大部分时间你不需要去改变<strong class="kw iu"> Android </strong>或<strong class="kw iu"> iOS </strong>中的任何东西；这些是您可能的应用程序的本机部分。整个魔术发生在共享UI Blazor类型的项目中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/851a243cbcb1205d328fe96ad3480413.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*H6KQfSlOuTiLNpUVaCQ11g.png"/></div></figure><p id="997b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这和你已经知道的Blazor项目是一样的；唯一的区别是Xamarin形式。在<strong class="kw iu"> csproj </strong>文件中，已经包含了<strong class="kw iu"> Xamarin。表单</strong>和<strong class="kw iu">微软。MobileBlazorBindings </strong>套餐。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/65b609e781390c1779f9ce9b4236ff09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JTyrLRJ7Hzd08lx1dFIBUA.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">项目csproj文件的一部分</figcaption></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="42db" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">成分</h2><p id="f219" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">目前，这些内置组件可用于MobileBlazorBindings:</p><p id="1ec2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">页面组件:</strong> ContentPage，MasterDetailPage，Page，TabbedPage，TemplatedPage</p><p id="cbe0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">布局组件:</strong> ContentView，Frame，Grid，ScrollView，StackLayout，</p><p id="b035" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">视图组件:</strong>按钮，活动指示器，图像，条目，标签，步进器，开关</p><p id="a80f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">专门化组件:</strong> Application、BaseMenuItem、FormattedString、GestureElement、MenuItem、Shell(包括ShellContent、ShellGroupItem、ShellItem、FlyoutItem、TabBar、ShellSection、Tab)、Span</p><p id="813e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将会有更多的组件，这是一个控制图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/d715ca6fa940849ae81d2d66afe17274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*859XAREbdxAXCH4wrXAkrA.png"/></div></div></figure><p id="0356" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">除了组件之外，您还可以创建自己的视图和组件，就像您在Blazor中所做的那样:</p><p id="6b6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是一个名为<strong class="kw iu"> Battery.razor </strong>的剃须刀文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="42a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以像这样轻松地使用视图中的组件:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="21b6" class="ly lz it nh b gy nl nm l nn no">&lt;ContentPage&gt;<br/>    &lt;StackLayout Margin="new Thickness(20)"&gt;<br/>        &lt;Battery /&gt;<br/>    &lt;/StackLayout&gt;<br/>&lt;/ContentPage&gt;</span></pre></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="70d0" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">依赖注入</h2><p id="ed0f" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">Blazor是ASP.Net核心的一部分，它提供了内置的依赖注入。就像任何其他ASP.Net核心项目一样，您可以在<strong class="kw iu"> ConfigureServices </strong>方法中定义您的服务。该方法位于<strong class="kw iu"> App.cs </strong>文件中。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="700c" class="ly lz it nh b gy nl nm l nn no">public App()<br/>{<br/> var host = Host.CreateDefaultBuilder()<br/>  .ConfigureServices((hostContext, services) =&gt;<br/>  {<br/>   // Register app-specific services<br/>   //services.AddSingleton&lt;AppState&gt;();<br/>  })<br/>  .Build();</span><span id="ca0d" class="ly lz it nh b gy np nm l nn no">host.AddComponent&lt;HelloWorld&gt;(parent: this);<br/>}</span></pre></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="4d29" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated"><strong class="ak">调试</strong></h2><p id="c43c" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">您可以在Android设备/模拟器或iOS模拟器中运行您的应用程序，并在Visual Studio或Visual Studio for Mac中调试它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bfb02b2266a903199b5a2e2910099e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*inE6maMLIQupJmdw8ms3zQ.gif"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">实际运行和调试</figcaption></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="ea52" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">体系结构</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/4fa125c57f2712a5e1caa2ca77eef9ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAXrCWL-ruiKJerMQXC5hw.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">Eilon Lipton 的Mobile Blazor绑定库架构</figcaption></figure><p id="9e10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">MobileBlazorBindings这只是一个与<strong class="kw iu"> Xamarin之间的绑定。表单</strong> API和<strong class="kw iu"> Blazor。</strong>你用Xamarin Forms组件在Blazor中创建你的共享UI，结果就是一个跨平台的原生应用。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="3035" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">结论</h2><p id="53c3" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">微软移动Blazor Bindings刚刚宣布，它仍然是一个实验项目。尚不清楚它是否会得到官方支持和发布，但它有很大的潜力在短短几分钟内创建具有Blazor和Xamarin表单的UI移动应用程序。我可以在2分钟内轻松创建和运行一些项目(没有任何Xamarin表单的经验)！</p><p id="7f44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">底线是像热重装，更多的原生组件，WinUI，UWP，内联文本等功能目前还不被支持。然而，微软(也许还有社区)的人们正在努力尽快实现这些功能。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="05cd" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">先决条件、文档、链接等</h2><p id="1404" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">您可以在docs.microsoft.com上访问指南和文档<a class="ae lq" href="https://docs.microsoft.com/en-us/mobile-blazor-bindings/get-started" rel="noopener ugc nofollow" target="_blank">。如果你愿意为这个项目做贡献(比如错误报告、想法、代码贡献等等)。)查看</a><a class="ae lq" href="https://github.com/xamarin/MobileBlazorBindings" rel="noopener ugc nofollow" target="_blank"> Xamarin Github </a>上的回购项目。</p><p id="260c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要使用Mobile Blazor绑定进行黑客攻击，您需要以下软件:</p><ol class=""><li id="d4bc" class="nr ns it kw b kx ky la lb ld nt lh nu ll nv lp nw nx ny nz bi translated"><a class="ae lq" href="https://dotnet.microsoft.com/download" rel="noopener ugc nofollow" target="_blank">。NET Core 3.0或3.1 SDK </a></li><li id="0bcc" class="nr ns it kw b kx oa la ob ld oc lh od ll oe lp nw nx ny nz bi translated">安装了以下工作负载的Visual Studio或Visual Studio for Mac:</li></ol><ul class=""><li id="d63d" class="nr ns it kw b kx ky la lb ld nt lh nu ll nv lp of nx ny nz bi translated">移动开发。NET (Xamarin。表单)</li><li id="1c68" class="nr ns it kw b kx oa la ob ld oc lh od ll oe lp of nx ny nz bi translated">ASP。NET和web开发</li></ul></div></div>    
</body>
</html>