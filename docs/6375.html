<html>
<head>
<title>How to inspect overlay components in Angular CDK libs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何检查角度CDK库中的覆盖组件</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-inspect-overlay-components-in-angular-cdk-libs-b45ed06d447e?source=collection_archive---------2-----------------------#2021-10-31">https://itnext.io/how-to-inspect-overlay-components-in-angular-cdk-libs-b45ed06d447e?source=collection_archive---------2-----------------------#2021-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/76eaa0cb9123652ab3d4dc12c083af4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cc8INhju5ysRqdJtpvQKEg.png"/></div></div></figure><h1 id="de7a" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">动机</h1><p id="eeee" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我在其中一个应用程序中使用Ng-zorro库的<a class="ae lu" href="https://ng.ant.design/components/dropdown/en" rel="noopener ugc nofollow" target="_blank">下拉组件</a>,我在想为什么在浏览器开发工具中检查动态添加的组件和应用一些样式会不舒服？例如，当我们将鼠标悬停在下拉菜单上并移动到浏览器检查器时，下拉菜单的内容就会消失。下拉列表的内容是动态创建的，并放置在DOM中。当鼠标悬停在下拉菜单上时，它将从DOM中移除。这种行为在具有角度CDK的库中的工具提示、模态、对话框和其他浮动面板中很常见。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/ddde71eb9870bb9c102cc4abfe8615aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YiDUQTXOWh1dVjJqM04DaA.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">来自Ng-Zorro库的下拉列表</figcaption></figure><p id="5db2" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">在这篇文章中，我想描述我的解决方案，如何使用浏览器开发工具在带有<a class="ae lu" href="https://material.angular.io/cdk/categories" rel="noopener ugc nofollow" target="_blank">角度CDK </a>的库中检查覆盖组件。我将用Ng-zorro库中的一个<a class="ae lu" href="https://ng.ant.design/components/dropdown/en" rel="noopener ugc nofollow" target="_blank">下拉示例来展示这一点，因为我有一个关于它的任务。</a></p><h1 id="e9d5" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">查找覆盖组件</h1><p id="e38d" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">呈现在页面底部的覆盖组件:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/e4e1acd2b31407ad377175cfc05945e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0WC34iLC3cBT43Amr4Sqfw.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">CDK-覆盖-容器</figcaption></figure><p id="2657" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">当我们悬停在下拉菜单上时，我们可以看到在<strong class="ky ir"> cdk-overlay-container </strong>中添加了“一些东西”:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/8882aba9779ca74f5a7006483417c175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ED9cYjSGaEPeQ7tVmZjATg.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">一些东西被添加到覆盖图中</figcaption></figure><p id="2fd5" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">如果我们能够在鼠标悬停在下拉菜单上的瞬间冻结时间，那该有多好。所以我们可以直接在开发工具中检查和修改内容。</p><h1 id="8519" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">调试子树修改</h1><p id="1eee" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们可以在覆盖div中修改DOM的时候运行一个调试器。我们可以通过开发工具的“子树修改”选项来实现。您可以在<strong class="ky ir"> cdk-overlay-container </strong>的上下文菜单中找到该选项:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/07cd3334b51aef487ed0ac7f81309c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TAW8zdQ1XvCBfHP63X5A9A.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">中断&gt;子树修改</figcaption></figure><p id="991a" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">我们将启用此选项，并分析所有在<strong class="ky ir"> cdk-overlay-container，</strong>中发生变化时触发的操作，以便我们可以找到从DOM中分离覆盖内容的操作:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/0e68090e7c6109d3b152d868959fbbba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9CuQz05vfGmEgqOcK-sIJQ.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">为覆盖中的子树修改启用调试器</figcaption></figure><p id="b7f1" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">再次悬停下拉菜单。代码将在调试器中暂停:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/ce954be885ac9da351efa5eab21e5236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnIdqYdN4uYQLWggZ7giJg.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">在调试器中暂停</figcaption></figure><p id="a784" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">按下“美化”,你会看到或多或少可以理解的代码:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/9e05d5028af423273683c756bbae6331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jyrtNQtfcsSOHazvYcFasg.png"/></div></div></figure><p id="5f42" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">我们将看到调用了<strong class="ky ir"> createHostElement </strong>方法。大概这个方法的配合就是动态创建一个下拉列表。现在，我们需要在销毁下拉内容之前找到一些将被调用的方法。然后在其中设置一个断点。我们需要使用调试器检查所有设置的断点，并找到一些类似于“分离”的方法。</p><h1 id="a177" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">分离覆盖组件</h1><p id="9850" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在调查并找到<strong class="ky ir"> detach </strong>事件后，我们可以在这里设置断点:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/a29c44c88431342f86d343cc37cdaf18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y-61_5BUIzD7MQBEYjImKQ.png"/></div></div></figure><p id="bb13" class="pw-post-body-paragraph kw kx iq ky b kz me lb lc ld mf lf lg lh mg lj lk ll mh ln lo lp mi lr ls lt ij bi translated">现在，当你完成断点队列并重复悬停时，当你从下拉菜单移动光标时，屏幕将被冻结。在此帮助下，您可以转到Elements选项卡，检查overlay中的元素，并尝试在浏览器中测试您的样式或其他逻辑。什么也不会消失:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/8a273592fa40cead27c8ec7d67aa5fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wek2PmqawnzWuqvPtpnQMQ.png"/></div></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">您可以检查内容并将鼠标移动到屏幕的任何部分</figcaption></figure><h1 id="4c56" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">摘要</h1><p id="bc8a" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这种方法不仅适用于有角度的CDK库，也适用于其他框架和库。要点是调试您的代码，并为删除覆盖组件的事件设置断点。</p></div></div>    
</body>
</html>