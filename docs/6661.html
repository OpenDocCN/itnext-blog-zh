<html>
<head>
<title>TypeScript Basics: Understanding How Variable Types are Determined</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript基础:了解如何确定变量类型</h1>
<blockquote>原文：<a href="https://itnext.io/typescript-basics-understanding-how-variable-types-are-determined-c109a629dd8d?source=collection_archive---------0-----------------------#2022-01-20">https://itnext.io/typescript-basics-understanding-how-variable-types-are-determined-c109a629dd8d?source=collection_archive---------0-----------------------#2022-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5ea2e24063bf53398dd08c57a6150057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GnJTrv1HODA-h8kW6mvFzQ.png"/></div></div></figure><p id="f447" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当您在TypeScript中声明一个变量时，编译器需要确定将什么类型赋给该变量。在本帖中，我们将介绍TypeScript如何推断变量的类型。了解这一点对于建立对语言的牢固理解是很重要的。</p><p id="8e3a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">TypeScript有三种不同的方式确定类型:类型注释、推断类型和duck类型。</p><p id="6e53" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们更详细地介绍一下它们。</p><h1 id="2479" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">类型注释</h1><p id="29b9" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">类型批注是告诉TypeScript变量应该是什么类型的最明确的方式。在此方法中，在类型名称后使用冒号来指定变量的类型。例如:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="7333" class="ml la it mh b gy mm mn l mo mp">const myNumber: number = 123;</span></pre><p id="c947" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里我们告诉TypeScript】变量应该有一个<code class="fe mq mr ms mh b">number</code>类型。换句话说，它只能存储数字，不能存储字符串或任何其他数据类型。</p><p id="c5fe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们试图给我的号码分配一个字符串会发生什么？TypeScript会给我们以下错误，因为我们不允许在一个数字变量中存储字符串:<br/> <code class="fe mq mr ms mh b">Type 'string' is not assignable to type 'number'</code></p><h1 id="f22e" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">推断分型</h1><p id="0e93" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">推断类型是TypeScript确定变量类型的默认方式。使用这种方法，TypeScript将根据您赋予变量的初始值，尽力找出最适合该变量的类型。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="5a37" class="ml la it mh b gy mm mn l mo mp">const myString = "Hello world!"</span></pre><p id="94a2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的例子中，我们有一个名为<code class="fe mq mr ms mh b">myString</code>的变量，我们试图给它赋值“Hello world！”在这种情况下，TypeScript将推断myString应该是String类型，因为字符串文字“Hello world！”被赋给了myString。我们不需要使用类型注释将类型显式地分配给这个变量。</p><p id="7d48" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">推断类型很灵活，允许TypeScript适应基本代码。当使用推断类型时，TypeScript会尽可能地提供帮助，并减少需要使用的类型批注的数量。</p><p id="46a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，需要注意的是，如果TypeScript不能确定适当的类型，推断类型有时会导致错误。在这些情况下，您总是可以通过手动注释变量类型来帮助TypeScript。</p><h1 id="bf3c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">鸭子打字</h1><p id="3de4" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">TypeScript对除基元以外的值(如对象和数组)使用鸭类型或结构子类型。Duck typing是一种方法，TypeScript通过查看对象的形状来判断其类型。</p><p id="2c9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Duck typing遵循以下原则:如果一个对象“看起来”与另一个对象具有相同的属性和方法，那么TypeScript会将它们视为同一类型。如果它看起来像一只鸭子，叫起来也像一只鸭子，那么它可能就是一只鸭子。</p><p id="73bd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">举以下例子:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="df4c" class="ml la it mh b gy mm mn l mo mp">let lion = { name: "Lion", sound: "roar" };<br/>let dog = { name: "Dog", sound: "bark" };<br/>let bird = { name: "Bird", sound: "chirps", fly: () =&gt; console.log("flying") };<br/>lion = dog;<br/>dog = bird;<br/>bird = lion; // Error: Property 'fly' is missing in type...</span></pre><p id="24e0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的例子中，我们能够将<code class="fe mq mr ms mh b">dog</code>分配给<code class="fe mq mr ms mh b">lion</code>，因为它们都有相同的属性集:<code class="fe mq mr ms mh b">name</code>和<code class="fe mq mr ms mh b">sound</code>。然而，我们不能将<code class="fe mq mr ms mh b">lion</code>赋给<code class="fe mq mr ms mh b">bird</code>，因为<code class="fe mq mr ms mh b">lion</code>缺少<code class="fe mq mr ms mh b">bird</code>对象拥有的<code class="fe mq mr ms mh b">fly</code>属性。也是一件好事；飞狮会是一个可怕的景象。</p><p id="bb6b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Duck类型比类型注释具有更大的灵活性。即使<code class="fe mq mr ms mh b">lion</code>和<code class="fe mq mr ms mh b">dog</code>没有被明确地分配相同的类型，TypeScript仍然认为它们是相同的类型，我们可以互换使用它们。</p><p id="0f2b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如您所见，TypeScript有多种方法来确定变量的类型。默认情况下使用推断类型或鸭类型，但是如果TypeScript卡住了，您总是可以依靠类型注释。</p><h1 id="c422" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论</h1><p id="8383" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">这个帖子到此为止！我们讨论了TypeScript如何推断变量的类型。我们研究了TypeScript确定类型的三种不同方式:类型注释、推断类型和duck类型。</p><p id="da74" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">推断类型是TypeScript确定类型的最常见方式。但是，如果TypeScript不能自动推断出适当的类型，您总是可以通过使用类型批注来帮助它。</p><p id="3e36" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Duck typing是一种TypeScript查看对象的形状以确定其类型的方法，它通常在处理数组或对象时使用。感谢阅读！</p><p id="0396" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你想获得更多的网络开发、反馈和打字技巧，可以考虑<a class="ae mt" href="https://twitter.com/IskanderSamatov" rel="noopener ugc nofollow" target="_blank">在Twitter上关注我，</a>在那里我分享我学到的东西。<br/>快乐编码！</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="f722" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nb">原载于2022年1月20日https://isamatov.com</em><a class="ae mt" href="https://isamatov.com/typescript-type-inference/" rel="noopener ugc nofollow" target="_blank"><em class="nb"/></a><em class="nb">。</em></p></div></div>    
</body>
</html>