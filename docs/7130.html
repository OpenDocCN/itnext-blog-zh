<html>
<head>
<title>Git Reword Commit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git重写提交</h1>
<blockquote>原文：<a href="https://itnext.io/git-reword-commit-82f0773fb22b?source=collection_archive---------3-----------------------#2022-06-20">https://itnext.io/git-reword-commit-82f0773fb22b?source=collection_archive---------3-----------------------#2022-06-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="979e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何更改提交消息？</h2></div><p id="fe5c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时您想要更改提交的消息，例如，更新信息、修复打字错误或修复引用。如果是这样的话，这一块是给你的。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/467b39a44d3bd2b57107c0eb9bd42649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JVC2KclEDXnId0p61RYQYw.png"/></div></div></figure><p id="5baa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通常有两种方法可以改变提交的消息，一种更简单，只适用于最后一次提交，另一种适用于任何提交，但更复杂。</p><blockquote class="lq"><p id="60e9" class="lr ls it bd lt lu lv lw lx ly lz ld dk translated">就像这个行业的其他事情一样，你越早解决它就越容易。</p></blockquote><h1 id="6132" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">更改上次提交的消息</h1><p id="8bc1" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">更改最后一次提交的消息相当容易:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="341f" class="nc mb it my b gy nd ne l nf ng">git commit --amend</span></pre><p id="6ea9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过运行该命令，将打开一个文本编辑器(例如VIM或Nano)，您可以更改提交消息，保存并退出。就是这样。验证提交消息是否已更改:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="dc2f" class="nc mb it my b gy nd ne l nf ng">git log</span></pre><h2 id="4d10" class="nc mb it bd mc nh ni dn mg nj nk dp mk kr nl nm mm kv nn no mo kz np nq mq nr bi translated">注意:确保没有上演任何东西</h2><p id="75fe" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">在运行commit命令之前，请确保没有为提交准备任何内容，否则，其他更改将添加到最后一次提交中。要检查您是否有一些分阶段的更改，请运行:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="fa89" class="nc mb it my b gy nd ne l nf ng">git status</span></pre><p id="ad58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你真的有一些阶段性的改变，先取消它们:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="c9ae" class="nc mb it my b gy nd ne l nf ng">git restore --staged &lt;file&gt;</span></pre><h2 id="cd09" class="nc mb it bd mc nh ni dn mg nj nk dp mk kr nl nm mm kv nn no mo kz np nq mq nr bi translated">注意:用力推配合租赁</h2><p id="5006" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">如果您更改消息的提交已经被推送，您现在必须使用<a class="ae ns" href="https://medium.com/itnext/git-force-vs-force-with-lease-9d0e753e8c41" rel="noopener"> force和lease </a>再次推送，就像您在历史中所做的一些内务处理一样:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="d992" class="nc mb it my b gy nd ne l nf ng">git push --force-with-lease</span></pre><h1 id="6daf" class="ma mb it bd mc md me mf mg mh mi mj mk jz nt ka mm kc nu kd mo kf nv kg mq mr bi translated">更改任何提交的消息</h1><p id="ddbc" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">这个方法适用于任何提交，无论是最后一次提交还是更早的提交。让我们假设您想要更改第三个旧提交的提交消息。做一个日志，以确保它在那里:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="a2b8" class="nc mb it my b gy nd ne l nf ng">git log --oneline -3</span></pre><p id="3884" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个日志命令中:</p><ul class=""><li id="0e0d" class="nw nx it kk b kl km ko kp kr ny kv nz kz oa ld ob oc od oe bi translated"><code class="fe of og oh my b">--online</code>每次提交时使输出联机</li><li id="a012" class="nw nx it kk b kl oi ko oj kr ok kv ol kz om ld ob oc od oe bi translated"><code class="fe of og oh my b">-3</code>使其仅显示最近3次提交</li></ul><p id="180b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输出将类似于以下内容:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="ed88" class="nc mb it my b gy nd ne l nf ng">dd16fac (<strong class="my iu">HEAD -&gt; master</strong>) Add GitHub page <br/>b8473cf Update README<br/>deba6a0 Add REAME</span></pre><p id="61df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里，第一个列表是最后一个提交。第三行显示了第三次提交，我们希望更改它的消息。为此，对最后3次提交进行交互式重新排序:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="0bc0" class="nc mb it my b gy nd ne l nf ng">git rebase -i HEAD~3</span></pre><p id="b24f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe of og oh my b">HEAD~3</code>表明我们想回顾过去改变历史到什么程度。在本例中，是3次提交。通过运行此命令，将打开一个编辑器，其中包含以下内容:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="0290" class="nc mb it my b gy nd ne l nf ng">pick deba6a0 Add README <br/>pick b8473cf Update README<br/>pick dd16fac Add GitHub page</span></pre><p id="360a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，该顺序与git日志中的顺序不同。您想要更改的提交现在显示在第一行。要改变它的信息，你需要改变它前面的动词，从<code class="fe of og oh my b">pick</code>变成<code class="fe of og oh my b">reword</code>。</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="5e06" class="nc mb it my b gy nd ne l nf ng"><strong class="my iu">reword</strong> deba6a0 Add README <br/>pick b8473cf Update README<br/>pick dd16fac Add GitHub page</span></pre><p id="6450" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后保存文件并退出。然后，将打开另一个编辑器，显示提交消息。对提交消息进行更改，保存并退出。答对了。</p><p id="9a1b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要确保提交消息被更改，请执行git日志:</p><pre class="lf lg lh li gt mx my mz na aw nb bi"><span id="321b" class="nc mb it my b gy nd ne l nf ng">git log -3</span></pre><h1 id="efcc" class="ma mb it bd mc md me mf mg mh mi mj mk jz nt ka mm kc nu kd mo kf nv kg mq mr bi translated">遗言</h1><p id="14e8" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">我每周在git、GitHub和GitLab上写文章。</p><ul class=""><li id="e201" class="nw nx it kk b kl km ko kp kr ny kv nz kz oa ld ob oc od oe bi translated"><a class="ae ns" href="https://medium.com/subscribe/@aerabi" rel="noopener">订阅</a>my Medium publishes，以便在新的Git周刊发布时获得通知。</li><li id="8f1b" class="nw nx it kk b kl oi ko oj kr ok kv ol kz om ld ob oc od oe bi translated">关注Twitter 上的<a class="ae ns" href="https://twitter.com/MohammadAliEN" rel="noopener ugc nofollow" target="_blank">我，获取git上的每周文章和每日推文。</a></li></ul></div></div>    
</body>
</html>