<html>
<head>
<title>Automated Unit Testing with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub动作的自动化单元测试</h1>
<blockquote>原文：<a href="https://itnext.io/automated-unit-testing-with-github-actions-1305759fc726?source=collection_archive---------2-----------------------#2021-09-12">https://itnext.io/automated-unit-testing-with-github-actions-1305759fc726?source=collection_archive---------2-----------------------#2021-09-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/475b5274c9f86677b38e63142a507ebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*M7vhE7C59EeIQ31V.jpg"/></div></div></figure><p id="bdfe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天我们将讨论一个非常简单的方法，你可以用GitHub的动作来自动化你的Flutter项目的单元测试。这可以非常方便地防止损坏的代码进入生产环境，甚至可以作为代码评审的健全性检查。</p><h1 id="69ce" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们开始吧</h1><p id="c8fe" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">首先，让我们看看我们的结果会是什么样子…</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1b58" class="mi kx iq me b gy mj mk l ml mm">name: Flutter Testing</span><span id="cf88" class="mi kx iq me b gy mn mk l ml mm">on:<br/>  workflow_dispatch:<br/>  pull_request:<br/>    branches: [main]</span><span id="1182" class="mi kx iq me b gy mn mk l ml mm">jobs:<br/>  test:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>      - uses: actions/checkout@v2.3.4<br/>      - uses: subosito/flutter-action@v1.5.3<br/>      - name: Install packages<br/>        run: flutter pub get<br/>      - name: Run generator<br/>        run: flutter pub run build_runner build<br/>      - name: Run test<br/>        run: flutter test test</span></pre><p id="7791" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们深入了解一下这里发生了什么。</p><p id="da7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们简单地从一个名称和触发器开始，这个动作将触发任何针对主分支和“workflow_dispatch”的拉请求，这是GitHub的手动操作。</p><p id="13fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">工作部分是实际工作发生的地方。</p><p id="391e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GitHub公开了Linux、Windows和macOS环境，供您在其中运行操作，因为单元测试是平台不可知的，我更喜欢在Linux上运行这些，部分原因是它是“最便宜的”选择，而对于开源项目，您有无限的分钟，私人项目集体限制为每月2000分钟，时间乘数基于所使用的平台，您可以在这里阅读有关<a class="ae mo" href="https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="fc5c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些步骤描述了您的操作的流程顺序，几乎总是从<a class="ae mo" href="https://github.com/actions/checkout" rel="noopener ugc nofollow" target="_blank"> actions/checkout@v2.3.4 </a>开始，也就是将代码签出到操作实例中的操作。</p><p id="208a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们试图测试一个flutter项目时，我们需要将Flutter安装到实例中，为此我们调用了<a class="ae mo" href="https://github.com/subosito/flutter-action" rel="noopener ugc nofollow" target="_blank">subosito/Flutter-action @ v 1 . 5 . 3</a>，但默认情况下这将安装最新的稳定版本，但您可以将其配置到另一个版本，甚至将其固定到特定版本。</p><p id="53b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们开始与自己的代码进行交互，首先运行flutter pub get，这样我们就可以将所有的包安装到实例中。</p><p id="77b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我们这些在项目中使用代码生成的人来说,“运行生成器”是一个可选的步骤，如果您还没有在本地运行它，您可以跳过它。</p><p id="a17d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们用<code class="fe mp mq mr me b">flutter test test</code>运行我们的测试，虽然第二个“test”不是必需的，但它实际上是对测试文件夹的路径引用，我需要定义它，以便一些模仿功能在我的一些项目中正确工作。</p><h1 id="19f8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">真的就这么简单</h1><p id="3303" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">是的，真的很简单，这就是你所需要的能够使用GitHub actions运行你的自动化测试，需要多长时间取决于你的项目的大小。我最小的项目是几个文件，只需要一分多钟，我最大的项目之一是几千个文件，在12k LOC上进行1k多一点的测试，80%的覆盖率只需要9分钟。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="b82b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望您对此感兴趣，如果您有任何问题、评论或改进，请随时发表评论。享受你的颤振发展之旅:D</p><p id="246b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢，一颗心会很棒，如果你真的喜欢，一杯<a class="ae mo" href="https://www.buymeacoffee.com/remelehane" rel="noopener ugc nofollow" target="_blank">咖啡</a>会很棒。</p><p id="849c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><div class="lz ma mb mc gt mz"><a rel="noopener  ugc nofollow" target="_blank" href="/learning-by-solving-a-problem-ca99da38180f"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">通过解决“问题”来学习</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">通过解决“问题”来学习</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">通过解决“问题”来学习itnext.io</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn jw mz"/></div></div></a></div><div class="no np gp gr nq mz"><a rel="noopener  ugc nofollow" target="_blank" href="/why-choose-flutter-3bdc9b58f218"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">为什么选择Flutter？</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">因此，您是一名开发人员，正在为您的公司寻找下一个有趣的游乐场或评估可行的技术…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">itnext.io</p></div></div><div class="ni l"><div class="nr l nk nl nm ni nn jw mz"/></div></div></a></div></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="7340" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ns">原载于2021年9月12日</em><a class="ae mo" href="https://remelehane.dev/posts/automated-unit-testing-with-github-actions/" rel="noopener ugc nofollow" target="_blank"><em class="ns">https://remelehane . dev</em></a><em class="ns">。</em></p></div></div>    
</body>
</html>