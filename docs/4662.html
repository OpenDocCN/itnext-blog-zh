<html>
<head>
<title>Simple Splash Screen for your Angular Web Apps and PWAs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的Angular Web应用程序和PWAs提供简单的闪屏</h1>
<blockquote>原文：<a href="https://itnext.io/simple-splash-screen-for-your-angular-web-apps-and-pwas-f4fbf897540b?source=collection_archive---------1-----------------------#2020-08-18">https://itnext.io/simple-splash-screen-for-your-angular-web-apps-and-pwas-f4fbf897540b?source=collection_archive---------1-----------------------#2020-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ddc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在Angular中创建一系列Web组件，避免为其导入整个库。在这篇文章中，我将创建一个简单而时尚的方法来为你的Angular Web应用程序和PWAs(渐进式Web应用程序)添加闪屏，并避免你的用户在你的网站/移动应用程序加载时不得不盯着一个空白屏幕。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/97f9a5d1bf2b7c99dce49eb821984691.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/1*l58GGrNSE5eEJFgOo98tQg.gif"/></div></figure><p id="d337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kt translated">我讨厌盯着一个网页或网络应用一点一点加载。我宁愿通过一个漂亮的闪屏来让页面有一个漂亮优雅的介绍。这种闪屏方式在移动原生应用中更常见，但随着web应用和pwa成为一等公民，其中一些范例也在web上被采用。</p><p id="7e37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几乎在我到目前为止构建的每个Angular web应用程序和基于Angular的PWA中，我都集成了闪屏，因为我的web应用程序更像移动应用程序，而不像网页，因此我整理了这篇文章，只是为了分享我是如何做到的，以及我是如何以一种非常简单的方式做到这一点的，而不必为了一个简单的闪屏而导入外部库。</p><blockquote class="lc ld le"><p id="2662" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">从属关系:角度CLI</p></blockquote><h1 id="2ed2" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">创建项目</h1><p id="b522" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">继续，通过Angular CLI使用命令创建项目</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="7ae4" class="mr lk iq mn b gy ms mt l mu mv">ng new simple-splash-screen</span></pre><p id="64be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在添加角度路由时选择<strong class="jp ir">是</strong>，并在项目创建过程中出现提示时选择<strong class="jp ir"> CSS </strong>作为样式表格式。你可以使用LESS或SASS——在这篇文章中我将使用简单的CSS样式。</p><p id="4f55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想使用一个很酷的字体来加载，所以我将通过从CDN导入来导入和使用谷歌字体。将此链接放在项目的<strong class="jp ir">index.html</strong>的<strong class="jp ir"> <em class="lf"> &lt;头&gt; </em> </strong>标签内。稍后我们将展示如何使用它。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="0c80" class="mr lk iq mn b gy ms mt l mu mv">&lt;link href=”https://fonts.googleapis.com/css2family=Pacifico&amp;display=swap"rel=”stylesheet”/&gt;</span></pre><p id="e8b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你的应用程序的主<strong class="jp ir">index.html</strong>应该是这样的:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5796" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在项目的根目录下，在<strong class="jp ir"> src/app </strong>文件夹中，创建一个名为<strong class="jp ir"> components </strong>的目录。在该文件夹中，我将通过在命令行中发出命令来创建闪屏组件:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="7044" class="mr lk iq mn b gy ms mt l mu mv">ng generate component splash-screen</span></pre><p id="2117" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就生成了有效闪屏组件所需的三个部分:HTML、CSS和Typescript文件。</p><blockquote class="lc ld le"><p id="cbce" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">注意:记住你可以手动创建所有这些组件。通过Angular CLI创建它的好处在于文件创建的自动化，并导入到<strong class="jp ir"> app.module.ts. </strong></p></blockquote><p id="6e63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在splash-screen.component.html文件中，我创建了一个非常简单的结构:外部启动页面容器(<strong class="jp ir"> app-splash-screen </strong>)、将元素放在一起的内部容器(<strong class="jp ir"> app-splash-inner </strong>)、徽标容器(<strong class="jp ir"> app-logo </strong>，为此我将导入一个SVG)、标签和加载器容器(<strong class="jp ir"> app-loader </strong>，也指一个动画SVG加载器)。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3b36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的SVG将被导入到一个名为<strong class="jp ir"> src/assets </strong>的文件夹中，我将从那里引用图像。下面是闪屏的CSS:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="aae5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望在顶层使用CSS动画将闪屏滑动到左侧(注意上面的<strong class="jp ir">app-闪屏</strong>类中的<strong class="jp ir">过渡:左侧0.5s </strong>样式)。这将通过CSS来完成，每当我改变这个类的left属性时，它的改变将使用一个沿x轴的持续时间为0.5秒的过渡动画来发生。这就是我想要的默认动画。</p><p id="8e14" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将它放置在页面上，方法是在页面上拉伸它，并将它的每一侧连接到屏幕的边缘(通过将它定位<strong class="jp ir">固定</strong>，并使用<strong class="jp ir">位置</strong> <strong class="jp ir">左、上、右</strong>和<strong class="jp ir">底</strong>到<strong class="jp ir"> 0 </strong>，以及100%的<strong class="jp ir">宽度</strong>和<strong class="jp ir">高度</strong>以及100%的<strong class="jp ir">z-索引</strong></p><p id="d609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于类型脚本逻辑，以下是该文件:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2ff0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看上面的类型脚本文件。请注意，在上面的HTML文件中，我引用了属性<strong class="jp ir"> windowWidth </strong>，这是激活应用程序闪屏容器上CSS过渡动画的驱动力，因此有了<strong class="jp ir">[ng style]= " { left:window width } "</strong>样式。</p><p id="0511" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还有一个名为<strong class="jp ir"> showSplash </strong>的标志，它将在默认持续时间0.5s(或500毫秒)后删除闪屏。</p><p id="3ed5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir"> ngOnInit() </strong>方法中，我们为要显示的整个闪屏动画设置了3秒(3000毫秒)的超时，我们立即更改<strong class="jp ir">窗口宽度</strong>以触发屏幕左侧的CSS动画，方法是在显示闪屏时拾取屏幕的实际内部宽度，并将测量值转换为负值和像素，并将其分配给<strong class="jp ir">窗口宽度</strong>。这就是为什么闪屏会有向左滑动的效果。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="6e20" class="mr lk iq mn b gy ms mt l mu mv">this.windowWidth = “-” + window.innerWidth + “px”;</span></pre><p id="5245" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">诀窍是在动画结束后闪屏不会保留在屏幕上，而是在动画结束后立即从屏幕上移除CSS转换的0.5秒在内部<strong class="jp ir"> setTimeout </strong>中被考虑在内，我们只需将<strong class="jp ir"> showSplash </strong>的值翻转为false，这样HTML的ngIf结构指令就会选择更改并将其从屏幕上移除:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="88b9" class="mr lk iq mn b gy ms mt l mu mv">*ngIf=”showSplash”</span></pre><p id="0c63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存您的更改。</p><p id="76ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们创建另一个快速简单的页面，为这个项目添加另一部分。通过在项目根目录下发出以下命令，创建一个单独的组件来表示该项目的主页或登录页面:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="b714" class="mr lk iq mn b gy ms mt l mu mv">ng generate component home</span></pre><p id="4c0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个页面没什么特别的，我只是在里面加了几个字符串。我创建这个单独页面的原因是，我们可以在应用程序的根目录下添加路由器出口，在app.component.html的<strong class="jp ir">中，其他页面将通过路由器显示，而闪屏位于顶部。我们马上就到。</strong></p><p id="f39c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，确保SplashScreenComponent和HomeComponent都正确导入到<strong class="jp ir"> app.module.ts </strong>中。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a682" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保Home组件是我们的<strong class="jp ir"> app.routing.module.ts </strong>中的默认组件。这将确保我们编辑app.component.html并在那里添加路由器出口后，我们有一个显示出口的页面。请注意，我们将组件导入到它自己的路径中，并添加为默认路径。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="938d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们确保在正确的地方使用闪屏。</p><h1 id="87e1" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">使用闪屏组件</h1><p id="9f5b" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">确保我们所有的部件都就位后，导航到<strong class="jp ir">app.component.html</strong>。删除该文件中的任何其他内容，只添加以下两行:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="edd9" class="mr lk iq mn b gy ms mt l mu mv">&lt;splash-screen&gt;&lt;/splash-screen&gt;<br/>&lt;router-outlet&gt;&lt;/router-outlet&gt;</span></pre><p id="55d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着闪屏将位于应用程序的最顶端，每隔一页将通过路由器出口的视口显示。这就是为什么我们不把闪屏页面看作一个独立的页面，而是放在导航的路由器出口之上。所有页面都将位于splash下面，一旦动画完成，它将从视图中移除，不会影响任何其他页面。</p><p id="293e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您现在运行项目，您应该在3秒钟后看到闪屏从左侧滑动，一个0.5秒的平滑CSS动画移动到闪屏的左侧。整洁，对不对？</p><h1 id="6198" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">额外收获:给启动画面添加选项</h1><p id="50d6" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">如果你想让这个简单的闪屏更上一层楼，这样你就可以改变滑动动画向左或向右，或者淡出？改变载入的持续时间或者动画的持续时间怎么样？是的，你也可以这样做！</p><p id="3109" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种方法将依赖于添加一个文件来存储动画选项(在一个单独的文件中保存一个名为<strong class="jp ir"> SplashAnimationType </strong>的枚举类型)，该文件保存了左右滑动以及淡出的选项。我创建了名为<strong class="jp ir"> splash-animation-type.ts </strong>的文件，并存储了以下信息:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="181a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些选项将通过<strong class="jp ir">@输入</strong>参数注入闪屏组件。下面是更新后的<strong class="jp ir">闪屏:</strong></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3c4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意两个新的属性<strong class="jp ir"> splashTransition </strong>来保存将通过编程完成的过渡样式，而不是硬编码在CSS中，以及默认值为1的<strong class="jp ir"> opacityChange </strong>来处理淡入淡出效果(也使用CSS)并通过编程进行更改。</p><p id="2eba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意为<strong class="jp ir"><em class="lf">animation duration</em></strong>(默认为0.5秒)、<strong class="jp ir"> <em class="lf"> duration </em> </strong>(默认为3秒)和<strong class="jp ir"><em class="lf">animation type</em></strong>(类型为<strong class="jp ir">splash animation type</strong>enum，之前创建—默认为<strong class="jp ir"> SlideLeft </strong>)添加的三个<strong class="jp ir"> @Input </strong>属性。)</p><blockquote class="lc ld le"><p id="fcaf" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">提供默认值将允许您不必强制用户传递一个值来获得默认的闪屏行为—向左滑动持续3秒，动画持续0.5秒。同时非常方便灵活！</p></blockquote><p id="9c23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看看新引入的switch语句，它处理动画类型的每种情况，以及我们如何处理闪屏持续时间和动画持续时间的可配置时间，而其余的逻辑(几乎)保持不变。</p><p id="ccb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在来看看我们添加到HTML中的最小改动，这些改动只是为了处理新的输入和组件中包含的灵活性:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="6eb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我更新了CSS文件中的<strong class="jp ir"> app-splash-screen </strong>类，因为它不再需要CSS中的过渡选项，因为它们是由Angular通过<strong class="jp ir"> ngStyle </strong>提供的:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="5a1d" class="mr lk iq mn b gy ms mt l mu mv">.app-splash-screen {<br/>   background: #d1367d;<br/>   position: fixed;<br/>   top: 0;<br/>   left: 0;<br/>   right: 0;<br/>   bottom: 0;<br/>   display: flex;<br/>   justify-content: center;<br/>   align-items: center;<br/>   width: 100%;<br/>   height: 100%;<br/>   z-index: 100;<br/>   opacity: 1;<br/>}</span></pre><p id="a2ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，在<strong class="jp ir">app.component.html</strong>文件中，您可以将参数传递给splash组件，如下所示:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="9f30" class="mr lk iq mn b gy ms mt l mu mv">&lt;splash-screen [animationType]=”’<strong class="mn ir">slide-left</strong>’” [duration]=”<strong class="mn ir">2</strong>" [animationDuration]="<strong class="mn ir">0.5</strong>"&gt;&lt;/splash-screen&gt;</span><span id="266a" class="mr lk iq mn b gy my mt l mu mv">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span></pre><p id="2396" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">瞧啊！有了这些改变，你会得到一个更加灵活和可配置的闪屏。你可以更进一步，输入飞溅的背景颜色，图像的路径等等。天空才是极限！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/db0553336d1ebb374b8c16458904ad96.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/1*tq6iJc-Z4HoPl0vfKsgkvQ.gif"/></div></figure><p id="b887" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是它的乡亲，希望你可以实现简单，但灵活的闪屏在一个简单的和有角度的方式，而不必导入额外的库，用最少的CSS和Typescript。</p><p id="24b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看<a class="ae na" href="https://github.com/romanejaquez/simple-splash-angular" rel="noopener ugc nofollow" target="_blank">简单闪屏</a>的Github repo和带有<a class="ae na" href="https://github.com/romanejaquez/simple-splash-angular-with-options" rel="noopener ugc nofollow" target="_blank">附加选项</a>的版本，或者通过<a class="ae na" href="https://codesandbox.io/s/nifty-cookies-ps9lf" rel="noopener ugc nofollow" target="_blank"> CodeSandbox.io </a>查看。</p><p id="bc2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">别忘了鼓掌(疯狂吧——免费的！)如果你觉得这篇帖子有用，就在社交媒体上关注我<a class="ae na" href="https://twitter.com/drcoderz" rel="noopener ugc nofollow" target="_blank"> @drcoderz </a>。</p><p id="6a7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p></div></div>    
</body>
</html>