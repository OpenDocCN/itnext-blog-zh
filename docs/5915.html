<html>
<head>
<title>5 unusual Docker container use cases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5个不寻常的Docker容器用例</h1>
<blockquote>原文：<a href="https://itnext.io/5-unusual-docker-container-use-cases-547804d64c35?source=collection_archive---------0-----------------------#2021-06-29">https://itnext.io/5-unusual-docker-container-use-cases-547804d64c35?source=collection_archive---------0-----------------------#2021-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/08049363606443a113e0b23998c14627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8NKs9ODk9gzzFbvEcivMGQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">安托万·佩蒂特维尔在<a class="ae jd" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><div class=""/><div class=""><h2 id="9e9b" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">介绍</h2></div><p id="1624" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>在2013年左右将集装箱技术引入主流。从那时起，容器化成为云和数字转型的一个组成部分。如今，大多数传统的服务器工作负载，如web APIs、web应用程序(广义的服务器端工作负载)，都是容器化的。见鬼，甚至微软也看到了墙上的字迹，自2016年以来，windows容器也在那里(尽管有点重)。2017年推出了Kubernetes，这是一种容器编排，它进一步巩固了容器作为计算主力的强大地位。</p><h2 id="b602" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">基本使用案例</h2><p id="014f" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我们生活在容器化的黄金时代，以至于容器开始从更传统的服务器工作负载场景转移到更奇特的用例。</p><p id="6600" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们进入这些之前，让我们回答一个问题，为什么容器和相关技术如此受欢迎。在我看来，这可以归结为三个因素:</p><ul class=""><li id="75db" class="mp mq jg kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">可移植性:不再有“但是它可以在我的电脑上运行”的问题。如果它运行，它将在任何符合<a class="ae jd" href="https://opencontainers.org/" rel="noopener ugc nofollow" target="_blank"> OCI的容器运行时</a>上运行。</li><li id="ff86" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx jh">易于配置</strong> : Docker镜像(容器的蓝图)不仅打包了应用/服务二进制文件，还打包了它的所有依赖项。不再需要在开发人员和运营人员之间来回发送更复杂、更容易出错的配置word文档。</li><li id="a1b2" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx jh">标准化工具</strong>:图像和容器是完全标准化的打包和运行时机制，这意味着工具链将在任何地方工作。不再有因公司而异的专有、复杂的部署和开发工具。现在都可以标准化了。</li></ul><h2 id="c20e" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">先决条件</h2><p id="d519" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">如果您想继续，请安装这些先决条件。请注意，我使用的是带有WLS2的Windows，因此一些安装步骤可能会因您的操作系统而异。</p><p id="47e4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>将在我们的机器上安装Docker主机，使我们能够运行工作负载。一旦docker启动并运行，您可能希望确保您运行的是Linux而不是Windows容器(右键单击托盘中的Docker图标)。完成后，继续第二步，安装Portainer。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/9097a1519c361c40168844e88d1dfc6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZlsfD4Mg7fh9wwjG5FRSA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Docker桌面</figcaption></figure><p id="16d3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Portainer，一个用于管理docker主机(以及更多)的轻量级web UI。要在Linux、Windows或Mac上安装portainer，<a class="ae jd" href="https://documentation.portainer.io/v2.0/deploy/ceinstalldocker/" rel="noopener ugc nofollow" target="_blank">请点击此链接</a>。Portainer将帮助我们快速部署docker工作负载。</p><p id="d7c1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要在Windows WSL2上快速安装portainer，请运行以下命令:</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="dc2a" class="lr ls jg nj b gy nn no l np nq">docker volume create portainer_data</span><span id="efa6" class="lr ls jg nj b gy nr no l np nq">docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-c</span></pre><p id="a645" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">导航到<code class="fe ns nt nu nj b">localhost:9000</code>设置用户名和密码，连接到docker主机，然后开始。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nv"><img src="../Images/645f7532e082702029a9d632eea6156e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkkHtNj1ozwFc4tr1lS7mg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">门户用户界面</figcaption></figure><p id="8627" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了部署docker容器，我们不打算使用命令式的<code class="fe ns nt nu nj b">docker CLI</code>，而是使用<code class="fe ns nt nu nj b">docker compose</code>来描述和运行我们的应用程序。Docker compose引入了一种声明式的容器运行方式。</p><blockquote class="nw nx ny"><p id="976c" class="kv kw nz kx b ky kz kh la lb lc kk ld oa lf lg lh ob lj lk ll oc ln lo lp lq ij bi translated">要了解更多关于docker编写的信息，请查看<a class="ae jd" href="https://compose-spec.io/" rel="noopener ugc nofollow" target="_blank"> docker编写规范</a></p></blockquote><h2 id="1dcc" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">#1在容器中运行UI应用程序</h2><p id="10a5" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">对于我们的第一个用例，我们将在一个容器中运行一个UI应用程序，并通过web浏览器连接到它！部署非常容易。我们使用名为<a class="ae jd" href="https://www.digikam.org/" rel="noopener ugc nofollow" target="_blank"> digikam </a>的开源软件作为例子，但这几乎可以是任何东西，比如网络浏览器、Libre Office等。遵循集装箱页面<a class="ae jd" href="https://docs.linuxserver.io/images/docker-digikam" rel="noopener ugc nofollow" target="_blank">https://docs.linuxserver.io/images/docker-digikam</a>上的说明</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/53a24dfe0a9a9073815077e4deb0c3b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAT-0ZhSx6QC0ge4TnPFeg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Portainer部署</figcaption></figure><ol class=""><li id="c458" class="mp mq jg kx b ky kz lb lc le mr li ms lm mt lq oe mv mw mx bi translated">导航到堆栈-&gt;添加堆栈</li><li id="4bca" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq oe mv mw mx bi translated">为您的应用程序(堆栈)命名</li><li id="4b85" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq oe mv mw mx bi translated">调整配置设置</li><li id="7639" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq oe mv mw mx bi translated">PUID和GUID分别是运行docker主机的用户ID和组ID。你可以通过打开WSL控制台并输入<code class="fe ns nt nu nj b">id</code>来检查它</li><li id="2052" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq oe mv mw mx bi translated">根据你的情况调整TZ</li><li id="422d" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq oe mv mw mx bi translated">为配置创建一个文件夹，我用一个快捷命令<code class="fe ns nt nu nj b">mkdir -p /directory/config</code>在我的主目录下创建文件夹</li><li id="46c1" class="mp mq jg kx b ky my lb mz le na li nb lm nc lq oe mv mw mx bi translated">选择一个未被防火墙占用或阻止的端口。记住端口总是从外部进入容器，所以3001(主机上的端口):3000(容器中的端口)</li></ol><h2 id="5207" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">#2在容器中运行Linux桌面环境</h2><p id="65cf" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">什么什么？容器中的Linux？事实上，尽管这种方法的实际应用可能有问题，但它确实很有趣:)。为了“澄清”，<strong class="kx jh">我们在一个容器中运行一个Linux桌面，它在一个程序中运行，在Linux上运行，然后在Windows上运行…我们将通过浏览器访问Linux服务器！唷。</strong></p><p id="12b0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://docs.linuxserver.io/images/docker-webtop" rel="noopener ugc nofollow" target="_blank">https://docs.linuxserver.io/images/docker-webtop</a></p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/7e1f7331cea730979503d153f20fd402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K9On-N9UwhoN8vYeUDJzQQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com/@yogipurnama?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">约吉·普尔纳马</a>在<a class="ae jd" href="https://unsplash.com/s/photos/superman?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="0ef4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将完全成熟的Linux桌面作为容器运行的一个可能的用例是，在您的机器上安装Linux之前，您可以测试各种Linux发行版和桌面环境(DE)。</p><h2 id="1f7a" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">#3在容器中运行CLI工具</h2><p id="6f8b" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">通常需要一个或一组CLI工具来诊断或执行某些任务。Linux提供了一个简单的安装工具的方法，但是如果你想添加一些定制，别名等等，这是很费时间的。集装箱来救援了！</p><p id="5d4b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我已经创建了一个这样的工具，并在博客中介绍了这个工具，它通过在docker容器中运行的<code class="fe ns nt nu nj b">kubectl</code>以高度可定制的方式支持Kubernetes管理。如果你有兴趣的话，可以去看看。</p><h2 id="5030" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">#4在容器中运行您的编程环境</h2><p id="6d73" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">如果你是一个软件开发人员，你肯定知道安装你的项目需要编译或启动的各种依赖项的痛苦。如果你把你的开发转移到一个容器中，情况就不一样了！</p><p id="d572" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">查看<a class="ae jd" href="https://code.visualstudio.com/docs/remote/containers" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码远程容器</a>扩展以及<a class="ae jd" href="https://www.gitpod.io/" rel="noopener ugc nofollow" target="_blank"> GitPod </a>项目。您还可以在容器内部运行测试！</p><h2 id="9536" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">#5在容器中运行Kubernetes</h2><p id="9f66" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">有了KIND项目(Docker中的kubernetes)，您可以在Docker容器中运行整个Kubernetes集群。</p><figure class="ne nf ng nh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi og"><img src="../Images/a673148cfb6d2833cb5138e2d3c6d26b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y8KbXGe_-hhFeJx2jGN02Q.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">种类</figcaption></figure><p id="8571" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这使我们能够快速创建用于开发或运行测试或CI/CD流程的一次性集群。</p><h2 id="bf7c" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">结论</h2><p id="101c" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">容器不仅仅可以用于服务器端的工作负载。有些用例更像是玩容器的一种有趣方式(比如webtop)，但有些非常有用(比如在容器或类中开发)。</p><p id="c6e4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">查看<a class="ae jd" href="https://github.com/veggiemonk/awesome-docker" rel="noopener ugc nofollow" target="_blank">牛逼docker </a>列表，了解更多docker资源。</p><p id="b403" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对Linux服务器容器背后的团队也大声喊出来。很多很棒的内容和想法。</p><p id="eaf9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你是否以不寻常的方式见过/使用过Docker容器？</p></div></div>    
</body>
</html>