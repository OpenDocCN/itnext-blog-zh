<html>
<head>
<title>Quick Tips: Deleting Kubernetes Pods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速提示:删除Kubernetes豆荚</h1>
<blockquote>原文：<a href="https://itnext.io/quick-tips-deleting-kubernetes-pods-52071802446c?source=collection_archive---------2-----------------------#2022-04-18">https://itnext.io/quick-tips-deleting-kubernetes-pods-52071802446c?source=collection_archive---------2-----------------------#2022-04-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/38a314d83038daf0d18dd24d0fa0a5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DDKcH1BCOqD8kUPsjJDxdQ.png"/></div></div></figure><p id="4612" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果使用Kubernetes部署容器化的应用程序，出于各种原因，例如调试节点问题、升级节点或从集群中删除节点，您可能必须从一个或多个工作节点中删除pods。</p><p id="d93f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用kubectl命令，从一个节点中删除一个或多个Kubernetes pods是一个简单的过程。在本文中，我们来看看如何在实践中删除pod。</p><h1 id="4988" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">删除Kubernetes豆荚</h1><h1 id="2f84" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">删除特定的pod</h1><p id="6e03" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">当您想要删除特定的pod时，应该确保在运行pod的节点上进行删除。</p><ol class=""><li id="6e1a" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated">运行以下命令获取节点名称。</li></ol><p id="88e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl get nodes</code></p><p id="d2d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.确认节点名称后，运行以下命令列出该节点上运行的所有pod，以标识要删除的pod。</p><p id="2221" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl get pods -o wide | grep &lt;node name&gt;</code></p><p id="fa80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.确认pod的名称后，运行以下命令将其删除。</p><p id="e2c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl delete pods &lt;pod name&gt;</code></p><p id="75da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.(可选)如果pod卡在<code class="fe mi mj mk ml b">terminating</code>状态，您需要运行以下命令强制删除pod。如果您使用的是kubectl &lt; = 1.4的任何版本，那么您应该省略<code class="fe mi mj mk ml b">--force</code>选项。</p><p id="bc3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl delete pods &lt;pod name&gt; --grace-period=0 --force</code></p><p id="6e55" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mm">注</em></p><p id="4932" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mm">如果pod卡在</em> <code class="fe mi mj mk ml b"><em class="mm">unknown</em></code> <em class="mm">状态，运行命令</em> <code class="fe mi mj mk ml b"><em class="mm">kubectl patch pod &lt;pod&gt; -p '{"metadata":{"finalizers":null}}'</em></code> <em class="mm">将其从集群中移除。当您尝试删除StatefulSet pods时，要小心潜在的风险。更多信息，请查看Kubernetes文档</em>  <em class="mm">。</em></p><h1 id="96af" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">删除节点上的现有窗格</h1><p id="a5b0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">当您想要删除一个节点上的所有现有pod时，您必须确保在适当的时间进行此类删除，以避免对您的服务造成潜在影响。</p><ol class=""><li id="44d0" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated">运行以下命令获取节点名称。</li></ol><p id="0dab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl get nodes</code></p><p id="e593" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.确认节点名称后，运行以下命令以列出该节点上运行的所有pod，并仔细检查是否可以删除所有现有的pod。</p><p id="7f15" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl get pods -o wide | grep &lt;node name&gt;</code></p><p id="ef92" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.运行以下命令停止将pod调度到该节点。</p><p id="9770" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl cordon &lt;node name&gt;</code></p><p id="c5b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.运行以下命令从该节点中退出所有现有的pod。</p><p id="e382" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl drain &lt;node name&gt; --ignore-daemonsets --delete-emptydir-data</code></p><p id="d276" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.一旦您准备好将该节点恢复到pod调度，运行以下命令以继续在该节点上调度新的pod。</p><p id="7e82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">kubectl uncordon &lt;node name&gt;</code></p><h1 id="86ea" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">删除KubeSphere上的Kubernetes豆荚</h1><p id="c74a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">作为一个开源项目，<a class="ae mn" href="https://kubesphere.io/" rel="noopener ugc nofollow" target="_blank"> KubeSphere </a>是一个基于Kubernetes构建的分布式操作系统。它提供了一个用户友好的向导web控制台来提高Kubernetes管理的效率。要删除KubeSphere上的Kubernetes pods，只需要点击几个按钮就搞定了！</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/6c9a2f08ae24e87dcfc69d536c206b2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sdLQvwqumoCwJiC2.png"/></div></div></figure><h1 id="0ba2" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">概述</h1><p id="b588" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">尽管删除Kubernetes pods是一个简单的过程，但我们在实践中实现这种删除时仍然必须小心，以避免对我们的服务产生潜在影响。如果我们熟悉不同的Kubernetes工作负载，比如Deployment和StatefulSet，会比直接处理pod更好。</p></div></div>    
</body>
</html>