<html>
<head>
<title>How to Build a Productivity Application in React: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中构建生产力应用程序:第2部分</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-build-a-productivity-application-in-react-part-2-7a5f9b8fed3?source=collection_archive---------1-----------------------#2019-04-03">https://itnext.io/how-to-build-a-productivity-application-in-react-part-2-7a5f9b8fed3?source=collection_archive---------1-----------------------#2019-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5bc8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">切换道具和从待办事项列表中删除项目</h2></div><p id="6764" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">嘿，伙计们。在我上一篇名为<a class="ae le" href="https://medium.com/@claire.sinozich/how-to-build-a-productivity-application-in-react-part-1-9f0c7ee65772" rel="noopener"> <em class="lf">如何在react:第一部分</em> </a>中构建生产力应用程序的文章中，我展示了如何使用同样名为<a class="ae le" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">的来自脸书的Create React App </a>和用于设置开发服务器的<a class="ae le" href="https://yarnpkg.com/en/" rel="noopener ugc nofollow" target="_blank"> yarn </a>来创建React应用程序。我还演示了如何使用函数和类组件在React中创建待办事项列表，以及如何使用状态向该待办事项列表添加项目。</p><p id="7477" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本系列的第二部分中，我将介绍如何将项目标记为完成并删除已完成的项目。这部分教程的起始代码可以在GitHub库<a class="ae le" href="https://github.com/csinozich/productivity-app/commit/27838935a6db4b76dbeccf88ddbe874c91862df4" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="a446" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一系列文章既是对你的启迪，也是对我的启迪，所以如果我做错了什么，请不要犹豫让我知道，或者提出问题。就这样，让我们开始吧！</p><h2 id="e8bc" class="lg lh it bd li lj lk dn ll lm ln dp lo kr lp lq lr kv ls lt lu kz lv lw lx ly bi translated">将项目标记为完成</h2><p id="f2d9" class="pw-post-body-paragraph ki kj it kk b kl lz ju kn ko ma jx kq kr mb kt ku kv mc kx ky kz md lb lc ld im bi translated">这部分教程的第一步是在true和false之间切换来自我们的<em class="lf"> todos </em>数组的布尔<em class="lf"> complete </em>。因为我在我的<em class="lf"> App.js </em>文件中处理我的所有状态，所以我将在这里放置一个<em class="lf"> toggleComplete() </em>方法。</p><p id="7788" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个<em class="lf"> toggleComplete() </em>方法将一个唯一的标识符(这里称为<em class="lf"> itemID </em>)作为参数，然后映射到我们的<em class="lf"> todos </em>数组，对照<em class="lf"> itemID </em>检查我们的<em class="lf"> todo </em>对象中的每个ID。如果标识符相同，我们将<em class="lf"> todo </em>对象上的<em class="lf"> completed </em>值设置为与其当前状态相反的值，例如，如果<em class="lf"> todo.completed </em>为真，则将<em class="lf"> todo.completed </em>设置为假，反之亦然。这是允许我们切换<em class="lf">完成</em>布尔的原因。</p><p id="63d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，如果标识符不匹配，则返回不变的<em class="lf"> todo </em>对象。现在，我们使用我们的<em class="lf"> this.setState() </em>方法设置在<em class="lf"> toggleComplete() </em>中声明的常量<em class="lf"> todos </em>(第37行)，然后将<em class="lf"> todo </em>对象重置回空字符串。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi me"><img src="../Images/fc42e65757e4b76bb9d82d62e4aa39f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*Ie--PwBNHrIR25Vrn2wKow.png"/></div></figure><p id="f995" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们将<em class="lf"> toggleComplete() </em>函数传递给<em class="lf"> App.js </em>中的TodoList组件:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi me"><img src="../Images/2140e93745bb25b0ad9b8dbe663fc42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*uNPcOj3IyannP-ftVydM0g.png"/></div></figure><p id="de40" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们更进一步，将<em class="lf"> toggleComplete() </em>传递给<em class="lf"> TodoList.js </em>文件中的Todo组件:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/4c343a2276469e45d05610f725babd21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*JkBBNVpo5toyzla5ylFYRQ.png"/></div></figure><p id="6017" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后但同样重要的是，我们将把我们的<em class="lf"> toggleComplete() </em>方法赋予我们的<em class="lf"> Todo.js </em>文件中的每个Todo组件:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/fe7af4a01abdd077fba282bced371736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*RsA6lVCfxUAv40X5J8r7wA.png"/></div></figure><h2 id="18af" class="lg lh it bd li lj lk dn ll lm ln dp lo kr lp lq lr kv ls lt lu kz lv lw lx ly bi translated">使用React开发工具查看您的工作</h2><p id="f679" class="pw-post-body-paragraph ki kj it kk b kl lz ju kn ko ma jx kq kr mb kt ku kv mc kx ky kz md lb lc ld im bi translated">瞧啊。您可以通过点击待办事项列表中的每项任务来切换您的<em class="lf">已完成</em>值。等等，那是什么？没用吗？其实是！不幸的是，我们根本没有给我们的应用程序添加任何样式，所以当你点击一个任务时，你看到的<em class="lf">和</em>没有什么不同。而且，因为我们还没有添加删除功能，所以更难看到。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/19d26827830e7780c934f3ab8dbbdce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*uAs797pqEYmotRUrX-jtXQ.gif"/></div></figure><p id="c7d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想看看这个切换功能的运行，请使用Chrome中的<a class="ae le" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" rel="noopener ugc nofollow" target="_blank"> React开发工具</a>。打开您的应用程序，在您的TodoList组件中，您将找到您添加到屏幕上的Todo组件。如果您在底部的todo选项卡中查看显示<em class="lf"> todo{…} </em>的道具，您将能够看到当您点击您的Todo时，道具<em class="lf">已完成</em>会打开和关闭。当我们稍后开始设计我们的应用程序时，这将更容易看到。</p><h2 id="a40c" class="lg lh it bd li lj lk dn ll lm ln dp lo kr lp lq lr kv ls lt lu kz lv lw lx ly bi translated">移除已完成的项目</h2><p id="84a3" class="pw-post-body-paragraph ki kj it kk b kl lz ju kn ko ma jx kq kr mb kt ku kv mc kx ky kz md lb lc ld im bi translated">让我们跳回我们的<em class="lf"> App.js </em>文件，向我们的App类添加另一个方法。在这里，我调用了方法<em class="lf"> removeItems </em>，它将一个点击事件作为参数。我们很快会将点击事件添加到我们的<em class="lf">移除已完成的</em>按钮中。</p><p id="ffbd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的<em class="lf"> removeItems </em>函数中，我们希望从使用我们的内置方法<em class="lf"> event.preventDefault() </em>开始，这与我们的<em class="lf"> addTask </em>函数一样，将阻止按钮在每次单击时刷新服务器。</p><p id="6742" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">之后，我们将通过使用回调函数来设置<em class="lf">状态</em>。这个回调函数将允许您检查<em class="lf"> prevState </em>，或者<em class="lf">状态</em>的最近迭代(在这里阅读更多关于使用<em class="lf">状态</em>和<em class="lf">先前状态</em> <a class="ae le" href="https://css-tricks.com/understanding-react-setstate/" rel="noopener ugc nofollow" target="_blank">)。<em class="lf"> prevState </em>存在于原始<em class="lf">状态</em>的对立面，在应用的构造函数中声明。</a></p><p id="2c1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基于我们的<em class="lf"> setState() </em>离开我们的<em class="lf"> prevState </em>(第48行)<em class="lf">，</em>，然后我们想要返回(第49行)一个新的数组<em class="lf"> todos </em>(第50行)。这个新的<em class="lf">todo</em>数组将使用我们的<em class="lf">来构建。filter() </em>方法，该函数检查<em class="lf"> todos </em>数组中的每一个<em class="lf"> todo </em>项，看<em class="lf">完成</em>是否为真或假。在第51行，我们看到所有<em class="lf">已完成</em>为<strong class="kk iu">假</strong>(基于<em class="lf">前状态</em>)的项目被返回到<em class="lf"> todos </em>数组。这个<em class="lf"> todos </em>数组随后被设置为<em class="lf">状态</em>(第48行)，为您提供应用程序中尚未完成的任务列表。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b5fec33b9cf82fae8fdcb8cad30f29de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*c8I5lziG11P0MqoN2Gi5bQ.png"/></div></figure><p id="78b7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们把这个<em class="lf"> removeItems() </em>函数交给我们应用程序中的TodoForm组件:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/2c5c5ab4a3f9ffe33d4b3ed1a23ef366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*bk8R69ciUZjQN1NrbGu1SA.png"/></div></figure><p id="7649" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，将<em class="lf"> removeItems </em>作为onClick添加到TodoForm组件中的<em class="lf"> Remove Completed </em>按钮:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/add75e5b81ea52d979fd576c86447279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6aN0TjSLEgL9z6yxvS0RA.png"/></div></div></figure><p id="60d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们走吧！您现在可以从列表中删除已完成的项目。同样，在我们开始应用程序的样式化之前，这一点看起来有点困难。但是，继续尝试吧！您的应用程序现在应该可以顺利运行了。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="56b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是关于如何在React中创建生产力应用程序的教程系列的第2部分。点击这里查看第1部分<a class="ae le" href="https://medium.com/@claire.sinozich/how-to-build-a-productivity-application-in-react-part-1-9f0c7ee65772" rel="noopener">，接下来，前往</a><a class="ae le" href="https://medium.com/@claire.sinozich/how-to-build-a-productivity-application-in-react-part-3-a1c4e212fdcb" rel="noopener">第3部分</a>，在那里我们将很快把数据添加到本地存储中！</p></div></div>    
</body>
</html>