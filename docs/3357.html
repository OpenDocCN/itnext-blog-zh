<html>
<head>
<title>Understanding and using Vuex for the first time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">首次了解和使用Vuex</h1>
<blockquote>原文：<a href="https://itnext.io/understanding-and-using-vuex-for-the-first-time-85054c3f1b8f?source=collection_archive---------2-----------------------#2019-11-27">https://itnext.io/understanding-and-using-vuex-for-the-first-time-85054c3f1b8f?source=collection_archive---------2-----------------------#2019-11-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="25cb" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">Vuex的简短介绍</h1><p id="7c70" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Vuex是一个状态管理库，可以帮助我们管理应用程序的状态。我们可以让Vuex在一个位置为我们管理整个应用程序的状态，而不是多个组件在本地处理状态并将其传递给所需的组件。</p><p id="00e9" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">它最好与Vuejs一起使用，但不限于此。例如，如果我们愿意，我们可以<a class="ae lr" href="https://github.com/dennybiasiolli/react-vuex" rel="noopener ugc nofollow" target="_blank">将它与Reactjs </a>一起使用。Vuex相当强大。</p><p id="c928" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">这个简短的指南解释了在Vuejs应用程序中使用Vuex的基础知识。我假设你已经使用过Vue应用程序。</p><h1 id="fd8f" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">状态管理和商店</h1><p id="fe8e" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">Vuex在一个叫做<em class="ls">存储</em>的中心位置管理状态。也被称为Vuex存储，这个<em class="ls">存储</em>包含<em class="ls">状态</em>以及其他一些非常有用并使Vuex如此强大的东西。为了在我们的应用程序中使用Vuex，我们需要创建一个Vuex存储，在我们的主Vue实例所在的入口文件中注册它，然后我们就可以自由地使用它了。</p><p id="84a2" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">创建商店并注册只需几个步骤:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/d133187cf614e7235709dfa92e67abf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uIAZpTc4TDkoUFAbwv-6gg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">创建Vuex商店</figcaption></figure><p id="24e7" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我们在一个单独的<code class="fe mj mk ml mm b">store.js</code>文件中创建了一个Vuex商店。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mn"><img src="../Images/f7d7e05709bbc5b0d782556a3eea4d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TVgGOsiNYGdvYnFqbWXzRA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">向我们的Vue实例注册商店</figcaption></figure><p id="139c" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">在这里，我们用我们的全局Vue实例注册了它。现在让我们在其中加入一些状态:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/4e6897d2bd55a09f2a8f3c9fd27382a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8cAY00Xu6fEnZt0KMQWGKQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">在我们的存储中添加状态</figcaption></figure><p id="1be4" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">Vuex存储接受一个对象作为参数。这个对象内部将是状态和其他方法。我们可以在Vue组件中使用命令:<code class="fe mj mk ml mm b">this.$store.state</code>来检索状态。我们可以用<code class="fe mj mk ml mm b">this.$store.state.count</code>检索我们的<em class="ls">计数</em>。这里，<code class="fe mj mk ml mm b">this.$store</code>指的是Vuex店。</p><h1 id="ed33" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">吸气剂</h1><p id="3b9a" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果在使用状态之前我们需要对其执行任何计算，我们可以在计算属性中执行。</p><p id="66ca" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">假设我们想在显示之前将状态中的<code class="fe mj mk ml mm b">count</code>变量加倍。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/1b7afac3eba014462dd7ff5867b8fc2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KHZfMr13Mu_EW2uboVH0A.png"/></div></div></figure><p id="06c2" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">虽然在这种情况下这是可行的，但是如果有复杂的计算要执行和/或它们需要在多个组件中执行，那么它就变得低效了。我们将不得不为所有这些组件编写重复的函数，或者在一个单独的函数中提取计算结果，并在任何地方不断导入它。</p><p id="3e3c" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">Vuex提供了更好的选择— <code class="fe mj mk ml mm b">Getters</code>。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/4674389ccb1674f7a0872383ccff61ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9h1JJq4mpxu1WZoj0RYHIA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">向存储区添加getters</figcaption></figure><p id="2545" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><code class="fe mj mk ml mm b">getSqCount</code>是一个充当getter的箭头函数。所有getters从Vuex接收状态作为它们的第一个参数。当我们调用它们时，我们不需要显式地传递它。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/301c5e42bda4ef2e69444b0ee9d55300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ci6loN3W3JbKpqKO2n7gKA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">在Vue组件中使用getters</figcaption></figure><blockquote class="mo mp mq"><p id="f11b" class="ko kp ls kq b kr lm kt ku kv ln kx ky mr lo lb lc ms lp lf lg mt lq lj lk ll im bi translated"><em class="it">注意</em> <code class="fe mj mk ml mm b"><em class="it">state</em></code> <em class="it">和</em> <code class="fe mj mk ml mm b"><em class="it">getters</em></code> <em class="it">是关键字，在Vuex商店中不能使用自己的名字。这也适用于接下来的突变和行动。</em></p></blockquote><h1 id="4f76" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">突变</h1><p id="86e5" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们已经在存储中设置了状态，并且已经检索了它。为了改变我们的状态，我们需要使用一种叫做<code class="fe mj mk ml mm b">Mutation</code>的东西。</p><p id="e66d" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">变异类似于事件处理函数。改变(突变)状态的主要工作将在这个函数内部完成。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/3e943238dd99898aae8fa7718acef161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HfwL7wNB_dzLlhcZ_s4svQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">向存储中添加变异</figcaption></figure><p id="0640" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">变异处理函数也接收状态作为第一个参数。至于为什么我说它类似于事件处理程序，是因为这个突变是如何被调用的。</p><p id="1011" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">即使它看起来像一个常规函数，我们也不直接调用突变。更像是一个事件注册。如果我们想使用我们在存储中定义的<code class="fe mj mk ml mm b">increment</code>变异，我们必须<em class="ls">提交</em>它。我们在Vue组件中这样做。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/279af0d9bafe88ae6e64022a47c4ce8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UuLQaP4XYNyjiY7v-1oK2w.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">利用变异</figcaption></figure><p id="5d30" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">当这个方法被执行时，它将<em class="ls">提交</em>一个叫做<code class="fe mj mk ml mm b">increment</code>的变异。就像一个动作如何触发一个事件，然后执行事件处理函数一样，当我们的Vue组件上的<code class="fe mj mk ml mm b">add()</code>方法被执行时，它提交被调用的<code class="fe mj mk ml mm b">increment</code>变异。</p><p id="3352" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">您还可以在调用变异处理程序的同时传递一些数据。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/a24ff6992c5d4c2a801f208153662725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-_FnZnxI8-XhJ_YxXN7mSg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">将数据/有效载荷传递给变异处理器</figcaption></figure><p id="59c6" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">这个数据或<em class="ls">有效载荷</em>可以像任何其他函数参数一样被我们的变异处理器使用。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/bd608a18f146191b3ea5936223c13569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*22VehRE-GzSYKiRH5xzNcQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">我们的变异使用我们传递的数据</figcaption></figure><p id="1fae" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">突变允许我们更新状态。当此状态更新时，任何依赖于此状态的组件都将自动更新。</p><p id="0a54" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">但是，突变只允许同步操作。但是在<code class="fe mj mk ml mm b">Actions</code>的帮助下仍然可以进行异步操作。</p><h1 id="31dd" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">行动</h1><p id="cacc" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">动作类似于突变，但它们不像突变那样直接改变状态。相反，它们执行异步操作，然后在这些操作完成时提交突变。</p><p id="bd30" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我们可以通过以下方式在我们的Vuex商店上注册操作:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/3d7efae05fc11992a2521c5ba21c1810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDy1Lytp86OdoRUKOoonlw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">在我们的Vuex商店注册行动</figcaption></figure><p id="c384" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">这里我们在<code class="fe mj mk ml mm b">setTimeout</code>的帮助下模拟一个异步操作。</p><p id="5cd4" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">注册一个动作让我们的动作处理程序(<code class="fe mj mk ml mm b">incrementAsync</code>)可以访问一个<code class="fe mj mk ml mm b">context</code>对象。</p><p id="ad66" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><code class="fe mj mk ml mm b">context</code>对象公开了与store实例相同的一组方法和属性(这是我们之前使用的<code class="fe mj mk ml mm b">this.$store</code>)。我们可以调用<code class="fe mj mk ml mm b">context.commit</code>来进行变异，或者甚至使用<code class="fe mj mk ml mm b">context.getters</code>来访问getters。但是，使用上下文对象不同于使用store实例。</p><p id="be67" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">因为我们将最常用到<code class="fe mj mk ml mm b">context.commit</code>方法，我们可以使用<a class="ae lr" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">参数析构</a>来解包它，这样我们就可以很容易地使用它。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/127f321220e2f6688bba85d054f46539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kxsJb-tYXOAoQTpDV-cs4A.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">使用参数析构来解包提交方法</figcaption></figure><p id="3e84" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">就像我们如何在Vue组件中<em class="ls">提交</em>突变一样，我们<em class="ls">分派</em>动作。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/9dbc039831593ba114865c9b5b461008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*68n2r0KLpiRMcb7eKYSaPw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">在Vue组件中使用动作</figcaption></figure><p id="95ec" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">这与我们使用它来提交我们的变异时的工作方式是一样的，除了这一次，我们正在调度一个动作。</p><h1 id="3665" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">包扎</h1><p id="6669" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这对您创建第一个Vuex商店、定义状态、变化和动作应该足够了。如果您需要更多示例或更多信息，您可以阅读<a class="ae lr" href="https://vuex.vuejs.org/guide/" rel="noopener ugc nofollow" target="_blank"> Vuex文档</a>。他们真的很好，不太复杂。我以前也写过一篇关于Vuex的文章，<a class="ae lr" href="https://dev.to/napoleon039/when-why-and-how-to-use-vuex-9fl" rel="noopener ugc nofollow" target="_blank">如果你感兴趣的话，读一读</a>。</p><p id="38ee" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">在我的下一篇文章中，我将解释如何将getters、mutations和actions映射到计算属性。感谢您的阅读！</p><p id="6a8b" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">欢迎在评论中发表你的任何问题和建议😃</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="628c" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><em class="ls">最初发表于</em><a class="ae lr" href="https://dev.to/napoleon039/understanding-and-using-vuex-for-the-first-time-2ngi" rel="noopener ugc nofollow" target="_blank"><em class="ls">dev . to</em></a><em class="ls">。</em></p></div></div>    
</body>
</html>