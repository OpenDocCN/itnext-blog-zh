<html>
<head>
<title>Deploy Jenkins with dynamic slaves on Minikube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Minikube上部署带有动态奴隶的Jenkins</h1>
<blockquote>原文：<a href="https://itnext.io/deploy-jenkins-with-dynamic-slaves-in-minikube-8aef5404e9c1?source=collection_archive---------0-----------------------#2018-04-03">https://itnext.io/deploy-jenkins-with-dynamic-slaves-in-minikube-8aef5404e9c1?source=collection_archive---------0-----------------------#2018-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><blockquote class="jq jr js"><p id="ddb8" class="jt ju jv jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr im bi translated"><em class="it">最近更新时间:2019年11月</em></p></blockquote><p id="e8f2" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">Minikube提供了在本地运行Kubernetes的可能性。Minikube在我们本地机器上的一个VM中运行一个单节点Kubernetes集群。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi kv"><img src="../Images/d8f157149da376a1e8dd3ffacfe2475e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nmLlXo7cJLGg-q4pgJprAw.jpeg"/></div></div></figure><p id="b04c" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">在本教程中，我们将安装minikube和集成头盔。Helm是Kubernetes (minikube)的一个包经理。我们可以和Ubuntu的apt，Centos的yum，macOS的Homebrew进行对比。Helm将帮助我们部署或安装Jenkins环境。我们需要提供一个包含我们想要的值和配置的文件，Helm会完成剩下的工作。在这个文件中，我们将描述，除了别的以外，我们的主人的持久性和Docker套接字的安装，以使Docker可用于我们的动态从属。<br/>最后，我们将编写一个基本的Jenkins管道来展示我们的动态奴隶将如何处理Docker。</p><h2 id="3281" class="lh li it bd lj lk ll dn lm ln lo dp lp ks lq lr ls kt lt lu lv ku lw lx ly lz bi translated"><strong class="ak"> 1。minikube的安装</strong></h2><p id="8fc4" class="pw-post-body-paragraph jt ju it jw b jx ma jz ka kb mb kd ke ks mc kh ki kt md kl km ku me kp kq kr im bi translated">首先我们需要安装VirtualBox。这将为我们提供一个免费的开源管理程序，可用于虚拟化我们的minikube环境。</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="31d3" class="lh li it mg b gy mk ml l mm mn">$ brew cask install virtualbox</span></pre><p id="e30b" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">安装minikube:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="36e1" class="lh li it mg b gy mk ml l mm mn">$ brew install minikube</span></pre><p id="958a" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">启动minikube并使用VirtualBox作为虚拟机驱动程序。这将在VirtualBox中创建一个本地单节点Kubernetes集群。这一步可能需要一些时间。</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="cbce" class="lh li it mg b gy mk ml l mm mn">$ minikube --memory 4096 --cpus 2 start --vm-driver=virtualbox</span></pre><p id="c66f" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们的minikube实例是在VirtualBox中启动的。为了进行验证，我们可以尝试SSH到实例并检查状态。检查minikube IP。</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="a3e4" class="lh li it mg b gy mk ml l mm mn">$ minikube status<br/>minikube: Running<br/>cluster: Running<br/>kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100</span></pre><p id="a50b" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">通过键入以下内容打开minikube控制面板:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="5903" class="lh li it mg b gy mk ml l mm mn">$ minikube dashboard</span></pre><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mo"><img src="../Images/bac5de1105fbc833df0d3ff8fa5ed885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YLtEWOH2orFmhPtUR2dedw.png"/></div></div></figure><h2 id="00ed" class="lh li it bd lj lk ll dn lm ln lo dp lp ks lq lr ls kt lt lu lv ku lw lx ly lz bi translated"><strong class="ak"> 2。安装Kubectl和Helm </strong></h2><p id="9915" class="pw-post-body-paragraph jt ju it jw b jx ma jz ka kb mb kd ke ks mc kh ki kt md kl km ku me kp kq kr im bi translated">要管理我们的minikube，我们可以使用kubectl。这是一个针对Kubernetes集群运行命令的CLI。</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="0a99" class="lh li it mg b gy mk ml l mm mn">$ brew install kubectl</span></pre><p id="e03a" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">要使用我们的Helm软件包管理器，我们需要先安装它:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="ed6a" class="lh li it mg b gy mk ml l mm mn">$ brew install kubernetes-helm</span></pre><p id="de2d" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们所有的工具都安装好了。我们可以开始创建我们的詹金斯环境。</p><h2 id="6e7d" class="lh li it bd lj lk ll dn lm ln lo dp lp ks lq lr ls kt lt lu lv ku lw lx ly lz bi translated"><strong class="ak"> 3。部署Jenkins环境</strong></h2><p id="dfb5" class="pw-post-body-paragraph jt ju it jw b jx ma jz ka kb mb kd ke ks mc kh ki kt md kl km ku me kp kq kr im bi translated"><strong class="jw iu"> 3A。为Jenkins项目创建名称空间<br/> </strong>我们将在一个单独的名称空间中创建我们的Jenkins环境。目前有三个默认的名称空间:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="d46d" class="lh li it mg b gy mk ml l mm mn">$ kubectl get ns</span><span id="49a1" class="lh li it mg b gy mp ml l mm mn">NAME STATUS AGE<br/>default Active 13m<br/>kube-public Active 13m<br/>kube-system Active 13m</span></pre><p id="9170" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们使用一个<code class="fe mq mr ms mg b">.yaml</code>模板创建名称空间。使用模板使得维护我们的集群更加容易。如果您克隆包含必要模板的<a class="ae mt" href="https://github.com/lvthillo/minikube-helm-jenkins" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>，您可以跳过下面的部分步骤。</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="acc8" class="lh li it mg b gy mk ml l mm mn">$ mkdir -p ~/minikube-helm-jenkins/minikube<br/>$ mkdir -p ~/minikube-helm-jenkins/helm<br/>$ cd ~/minikube-helm-jenkins</span></pre><p id="3214" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">创建我们的名称空间的模板:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="457f" class="lh li it mg b gy mk ml l mm mn">$ vi minikube/jenkins-namespace.yaml</span></pre><figure class="kw kx ky kz gt la"><div class="bz fp l di"><div class="mu mv l"/></div><figcaption class="mw mx gj gh gi my mz bd b be z dk translated">jenkins-namespace.yaml的内容</figcaption></figure><p id="7b9d" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">执行模板以创建名称空间:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="9227" class="lh li it mg b gy mk ml l mm mn">$ kubectl create -f minikube/jenkins-namespace.yaml<br/>namespace “jenkins-project” created</span></pre><p id="c1ba" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们可以使用命令:<code class="fe mq mr ms mg b">kubectl get ns</code>或通过检查minikube仪表板来验证。</p><p id="97e0" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated"><strong class="jw iu"> 3B。为Jenkins master <br/>创建持久卷</strong>我们想为我们的Jenkins master pod创建一个持久卷。这将防止我们在重新启动minikube时丢失Jenkins master的整个配置和我们的作业。这个官方minikube文档解释了我们可以使用哪些目录来挂载数据。在一个多节点的Kubernetes集群中，您需要像NFS这样的解决方案来使挂载目录在整个集群中可用。但是因为我们使用minikube，这是一个单节点集群，所以我们不必为此费心。</p><p id="9616" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们选择使用<code class="fe mq mr ms mg b">/data</code>目录。该目录将包含我们的Jenkins主配置。</p><p id="c70f" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们将创建一个名为<code class="fe mq mr ms mg b">jenkins-pv</code>的卷:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="1362" class="lh li it mg b gy mk ml l mm mn">$ vi minikube/jenkins-volume.yaml</span></pre><figure class="kw kx ky kz gt la"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e446" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">创建卷:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="3309" class="lh li it mg b gy mk ml l mm mn">$ kubectl create -f minikube/jenkins-volume.yaml<br/>persistentvolume “jenkins-pv” created</span></pre><p id="5aa8" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">一切准备就绪。是时候使用Helm部署我们的Jenkins环境了。</p><p id="0d1d" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated"><strong class="jw iu"> 3C。使用helm安装Jenkins <br/> </strong>从使用Helm初始化当前目录开始:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="5104" class="lh li it mg b gy mk ml l mm mn">$ cd ~/minikube-helm-jenkins<br/>$ helm init</span></pre><p id="de7c" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们将利用Jenkins Kubernetes插件部署一个Jenkins主从集群。<a class="ae mt" href="https://github.com/kubernetes/charts/tree/master/stable/jenkins" rel="noopener ugc nofollow" target="_blank">这里</a>可以找到官方图表。</p><p id="a9ec" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们使用<code class="fe mq mr ms mg b">jenkins-values.yaml</code>作为模板来提供我们自己的设置所需的值。我们将要求我们的音量，并安装Docker插座，这样我们就可以在我们的从属吊舱中执行Docker命令。</p><p id="ff98" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">因为我们使用minikube，所以我们需要使用NodePort作为服务类型。只有云提供商提供负载平衡器。我们将端口32000定义为端口。</p><p id="70c3" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们也可以定义哪些插件，我们希望安装在我们的詹金斯。我们使用一些默认插件，如<a class="ae mt" href="https://wiki.jenkins.io/display/JENKINS/Git+Plugin" rel="noopener ugc nofollow" target="_blank"> git </a>和<a class="ae mt" href="https://wiki.jenkins.io/display/JENKINS/Pipeline+Plugin" rel="noopener ugc nofollow" target="_blank"> pipeline插件</a>，但我们也添加了<a class="ae mt" href="https://wiki.jenkins.io/display/JENKINS/Green+Balls" rel="noopener ugc nofollow" target="_blank"> greenballs插件</a>，它将在成功构建后显示一个绿色球而不是蓝色球。</p><figure class="kw kx ky kz gt la"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="cabf" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">使用这些值部署您的Jenkins环境:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="37b9" class="lh li it mg b gy mk ml l mm mn">$ helm install --name jenkins -f helm/jenkins-values.yaml stable/jenkins --namespace jenkins-project</span></pre><p id="c7c1" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">输出将显示如何获得您的Jenkins管理员密码。<br/>运行此命令获取并保存您的密码:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="91f5" class="lh li it mg b gy mk ml l mm mn">$ printf $(kubectl get secret --namespace jenkins-project jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo</span><span id="b9cf" class="lh li it mg b gy mp ml l mm mn">2kKCN55MaM</span></pre><p id="02e7" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们终于可以验证舵的安装了:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="7818" class="lh li it mg b gy mk ml l mm mn">$ helm ls<br/>NAME REVISION UPDATED STATUS CHART APP VERSION NAMESPACE<br/>jenkins 1 Tue Nov 12 20:21:31 2019 DEPLOYED jenkins-0.36.2 lts         jenkins-project</span></pre><p id="2895" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">并检查您的仪表板(选择詹金斯项目)。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi na"><img src="../Images/dca49851418fc419df9ee3ef55f714a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1fBotKkK9N6MKp4jDtk53A.png"/></div></div></figure><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi nb"><img src="../Images/21a85a6e9f4f2a14bc884ab71f3ab765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w4izmsXTgkef-Lz3nL2L2w.png"/></div></div></figure><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi nc"><img src="../Images/02e2ccca22768f0f8ae0ae921ee3044d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0goz7hhDVHq2drLm6F6Kw.png"/></div></div></figure><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi nd"><img src="../Images/31e3bad04ed04ffbb466ff69396d54ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GclrT0M-SmMN8VHVVvOI_w.png"/></div></div></figure><p id="9358" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">使用minikube ssh检查卷装载:</p><pre class="kw kx ky kz gt mf mg mh mi aw mj bi"><span id="6209" class="lh li it mg b gy mk ml l mm mn">$ minikube ssh<br/>$ ls /data<br/>jenkins-volume</span></pre><p id="5eb4" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">minikube的所有工作都完成了。现在我们可以开始利用詹金斯了。</p><h2 id="4541" class="lh li it bd lj lk ll dn lm ln lo dp lp ks lq lr ls kt lt lu lv ku lw lx ly lz bi translated"><strong class="ak"> 4。访问并配置詹金斯大师</strong></h2><p id="3576" class="pw-post-body-paragraph jt ju it jw b jx ma jz ka kb mb kd ke ks mc kh ki kt md kl km ku me kp kq kr im bi translated">我们可以在<a class="ae mt" href="http://192.168.99.100:32000" rel="noopener ugc nofollow" target="_blank">http://192 . 168 . 99 . 100:32000</a>上拜访詹金斯大师。(如果您的minikube实例具有不同的IP，则为不同的IP)。<br/>用户是“admin ”,我的密码是2kKCN55MaM。</p><p id="557e" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">这一章的标题有点不对，因为Helm已经为我们配置好了一切。我们可以创建一个作业并运行它。<br/>我们从创造一个非常基本的自由式工作开始。</p><ul class=""><li id="dac0" class="ne nf it jw b jx jy kb kc ks ng kt nh ku ni kr nj nk nl nm bi translated">新项目→自由式项目→名称:freestyle-job-1 <br/>添加构建步骤→执行shell:</li></ul><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi nn"><img src="../Images/2af594a3562cd3f3c7c065fa4920825d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnSNQFrwhN-ZCOgF9tobYg.png"/></div></div></figure><p id="7969" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">单击“立即构建”。开始构建需要一些时间，因为需要获取从属映像(仅在第一次时)。将启动一个从属pod，在其中执行作业。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi no"><img src="../Images/bd332f7c17496ac63ff543a5bdedd8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mDoVLlc8m9VCMiSf75XoiA.png"/></div></div></figure><p id="259b" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">从机启动后，作业在从机上执行。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi np"><img src="../Images/cadda82c12a03dc9c6785da309e818e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cocnEXDeHd7_ypWjWWPOLQ.png"/></div></div></figure><p id="66f8" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">作业成功完成。<br/>我们可以看到该作业是在slave default-q7rsm上执行的。从机的Pod IP为172.17.0.6。我们的greenballs插件也已安装。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi nq"><img src="../Images/ca2e3e64494fe963bb622f63d663b4cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4nx-RStRvyqK2RpmQNXDHA.png"/></div></div></figure><h2 id="255a" class="lh li it bd lj lk ll dn lm ln lo dp lp ks lq lr ls kt lt lu lv ku lw lx ly lz bi translated"><strong class="ak"> 5。创建脚本化的Jenkins管道</strong></h2><p id="34ff" class="pw-post-body-paragraph jt ju it jw b jx ma jz ka kb mb kd ke ks mc kh ki kt md kl km ku me kp kq kr im bi translated">在这最后一章，我们将创建一个基本的脚本詹金斯管道。<br/>我们描述了pod内部的容器模板。我们将使用docker、git和maven容器。这三个容器将在同一个容器中运行。</p><figure class="kw kx ky kz gt la"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e311" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">我们检查节点上正在运行的Docker容器。这只是为了说明当我们安装Docker套接字并使用包含Docker客户端的Docker映像时，我们可以在我们的从机中使用Docker命令。在第二阶段，我们使用git容器来克隆包含基本Java应用程序的存储库。在最后阶段，我们使用maven来构建我们的应用程序！</p><p id="0d03" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated"><code class="fe mq mr ms mg b">docker ps</code>的输出已经显示了我们在containerTemplate中描述的容器正在运行:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi nr"><img src="../Images/5fbbdd243496fba96e360ea4e4f2e865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNioFImBO5kiGGZpr5whVA.png"/></div></div></figure><p id="5ed0" class="pw-post-body-paragraph jt ju it jw b jx jy jz ka kb kc kd ke ks kg kh ki kt kk kl km ku ko kp kq kr im bi translated">下图描述了发生的情况。一个豆荚是用我们的詹金斯奴隶容器制造的。在这个从属容器上执行的管道将在管道中启动我们在containerTemplate中描述的容器。所有的集装箱都在同一个集装箱里。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi ns"><img src="../Images/89633a4714411db241f11b186a3682aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGv4zgLpZoRWdcYHVfgDfQ.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk translated">当管道完成后，分离舱和其中的4个容器都将被销毁。</figcaption></figure><h2 id="c431" class="lh li it bd lj lk ll dn lm ln lo dp lp ks lq lr ls kt lt lu lv ku lw lx ly lz bi translated"><strong class="ak">结论</strong></h2><p id="0894" class="pw-post-body-paragraph jt ju it jw b jx ma jz ka kb mb kd ke ks mc kh ki kt md kl km ku me kp kq kr im bi translated">这篇内容丰富的教程展示了如何使用Helm和minikube。我们已经部署了一个完整的Jenkins环境，其中包含使用Helm的动态从属服务器。安装完成后，我们创建了一个使用Kubernetes插件的Jenkins管道。脚本化管道的例子已经清楚地表明了我们如何从我们的动态从设备内部提升Docker容器。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><a href="https://www.buymeacoffee.com/dZb8fLN"><div class="gh gi nt"><img src="../Images/83dc7212ef8502659c81086ad58b8d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*bk_C8Um34KavCkO2yzMCZg.png"/></div></a><figcaption class="mw mx gj gh gi my mz bd b be z dk translated">如果真的对你有帮助…:)</figcaption></figure></div></div>    
</body>
</html>