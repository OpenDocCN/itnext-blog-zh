<html>
<head>
<title>Create your own Toast without using any packages!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建自己的吐司不使用任何软件包！</h1>
<blockquote>原文：<a href="https://itnext.io/create-your-own-toast-without-using-any-packages-6d3828816f7c?source=collection_archive---------2-----------------------#2022-11-13">https://itnext.io/create-your-own-toast-without-using-any-packages-6d3828816f7c?source=collection_archive---------2-----------------------#2022-11-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4925fb54415fb6de7f99cf0bd1d3c4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXHeFvVqNukmMoRbnzhtKQ.jpeg"/></div></div></figure><h2 id="97d5" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph">魔术背后——覆盖</h2><div class=""/><div class=""><h2 id="7b74" class="pw-subtitle-paragraph kk jn je bd b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dk translated">在Flutter中，创建覆盖小部件非常容易，所以让我向您展示实现覆盖小部件有多容易！</h2></div><h2 id="ef7c" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">动机</h2><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="772b" class="mg ld je mc b be mh mi l mj mk">context.showToast('Flutter is awesome!');</span></pre><figure class="lx ly lz ma gt iv gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/fe95a95680623d48900ac9e7d1c564c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*cQFl0ZyYCMJXsdEyhs6xvw.gif"/></div></figure><p id="d5fe" class="pw-post-body-paragraph mm mn je mo b mp mq ko mr ms mt kr mu ll mv mw mx lp my mz na lt nb nc nd ne im bi translated">首先，要创建浮动小部件，我们需要使用<code class="fe nf ng nh mc b">Overlay</code>小部件。但是，</p><h2 id="6ace" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">什么是<code class="fe nf ng nh mc b">Overlay</code>？</h2><p id="3aa9" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">它只是一个像<code class="fe nf ng nh mc b">Stack</code>一样的有状态窗口小部件，但是<code class="fe nf ng nh mc b">Overlay</code>是用于管理应用程序中页面顶部的窗口小部件。就像一种特殊的<code class="fe nf ng nh mc b">Stack</code>包装了整个应用程序。<br/>(正好在<code class="fe nf ng nh mc b">navigator</code>)</p><figure class="lx ly lz ma gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/0bfa9ca5b665a5878e43105e88f2cae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_3d4HTB1WnCFuExPmQAMHw.jpeg"/></div></div></figure><p id="d237" class="pw-post-body-paragraph mm mn je mo b mp mq ko mr ms mt kr mu ll mv mw mx lp my mz na lt nb nc nd ne im bi translated">所以，基本上，如果我们添加一些东西到<code class="fe nf ng nh mc b">Overlay</code>的堆栈中，它会以叠加的形式出现在UI上，如果我们移除它，它就会消失。<br/>因为每当我们<code class="fe nf ng nh mc b">insert</code>或者<code class="fe nf ng nh mc b">remove</code>一个条目，<code class="fe nf ng nh mc b">OverlayState</code>就会调用<code class="fe nf ng nh mc b">setState</code>方法，即时更新UI！</p><figure class="lx ly lz ma gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/bf687cdc4637e2c4ef221081c8b05a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-O5JpIvh6JSPB8Fg774eMA.jpeg"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">插入</figcaption></figure><figure class="lx ly lz ma gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ns"><img src="../Images/972761d688d8b44abe297a60a7959b67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_mZRq6rD_7tbjd2Hqxi6w.jpeg"/></div></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">去除</figcaption></figure><p id="37c9" class="pw-post-body-paragraph mm mn je mo b mp mq ko mr ms mt kr mu ll mv mw mx lp my mz na lt nb nc nd ne im bi translated">此外，最常见的是通过<code class="fe nf ng nh mc b">Navigator<br/></code>间接使用<code class="fe nf ng nh mc b">Overlay</code>，但直接使用也可以。<em class="nt">(稍后我还会做一篇</em><a class="ae nu" href="https://medium.com/itnext/create-your-own-dialog-without-using-any-packages-7bb303f62471" rel="noopener"><em class="nt"/></a><em class="nt">)</em></p><p id="aa9f" class="pw-post-body-paragraph mm mn je mo b mp mq ko mr ms mt kr mu ll mv mw mx lp my mz na lt nb nc nd ne im bi translated">现在，让我们把逻辑看作一个代码！</p><h2 id="a068" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">1.用你的<code class="fe nf ng nh mc b">CustomWidget</code>创造你的<code class="fe nf ng nh mc b">OverlayEntry</code></h2><p id="3679" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">为了插入到<code class="fe nf ng nh mc b">Overlay’s</code>堆栈中，我们需要首先创建一个<code class="fe nf ng nh mc b">OverlayEntry</code>对象</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="5555" class="mg ld je mc b be mh mi l mj mk">final myEntry = OverlayEntry(builder: (_) =&gt; CustomWidget());</span></pre><h2 id="7e95" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">2.将<code class="fe nf ng nh mc b">OverlayEntry</code>插入<code class="fe nf ng nh mc b">Overlay's</code>堆栈</h2><p id="9dcc" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">当我们插入小部件时，<code class="fe nf ng nh mc b">Overlay</code>将在UI上显示<code class="fe nf ng nh mc b">myEntry</code>。</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="c1b6" class="mg ld je mc b be mh mi l mj mk"> Overlay.of(context)!.insert(myEntry);</span></pre><h2 id="f402" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">3.从<code class="fe nf ng nh mc b">Overlay's</code>栈中移除O <code class="fe nf ng nh mc b">verlayEntry</code>！</h2><p id="bfc1" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">当我们移除<code class="fe nf ng nh mc b">myEntry</code>时，它会立即从用户界面上消失</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="e40d" class="mg ld je mc b be mh mi l mj mk">myEntry.remove;</span></pre><p id="55fb" class="pw-post-body-paragraph mm mn je mo b mp mq ko mr ms mt kr mu ll mv mw mx lp my mz na lt nb nc nd ne im bi translated">如果我们有了主要的想法，现在让我们做一个烤面包的小部件吧！</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="2883" class="oc ld je bd le od oe of lh og oh oi lk kt oj ku lo kw ok kx ls kz ol la lw om bi translated">吐司示例</h1><h2 id="2fc1" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">1-设计祝酒词</h2><p id="04a8" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">我还添加了一些定制的淡入淡出动画</p><figure class="lx ly lz ma gt iv"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="9eba" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">2.为可重用代码创建showToast方法</h2><p id="32a6" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">为了让事情变得更简单，我对它进行了扩展。</p><figure class="lx ly lz ma gt iv"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="aea2" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">3.使用方法显示任何地方的toast消息</h2><figure class="lx ly lz ma gt iv"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="00a3" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">最后</h2><figure class="lx ly lz ma gt iv gh gi paragraph-image"><div class="gh gi op"><img src="../Images/658760420665c11e4c34744667a95d7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*VAHOzYSKNZvV0kqgo96b1Q.png"/></div><figcaption class="no np gj gh gi nq nr bd b be z dk translated">小部件树</figcaption></figure><p id="17bd" class="pw-post-body-paragraph mm mn je mo b mp mq ko mr ms mt kr mu ll mv mw mx lp my mz na lt nb nc nd ne im bi translated">如你所见，<code class="fe nf ng nh mc b">ToastWidget</code>并不依赖于<code class="fe nf ng nh mc b">HomePage</code>或<code class="fe nf ng nh mc b">ElevatedButton</code>。这就是为什么，它不会受到影响，即使他们被处置。</p><h2 id="4ecb" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">GitHub链接</h2><p id="7167" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">您可以在这里获得完整的项目示例</p><div class="is it gp gr iu oq"><a href="https://github.com/rei-codes/overlay_example" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jo gy z fp ov fr fs ow fu fw jn bi translated">GitHub-rei-codes/overlay _ example</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">github.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe ja oq"/></div></div></a></div><h2 id="7cf6" class="lc ld je bd le lf lg dn lh li lj dp lk ll lm ln lo lp lq lr ls lt lu lv lw jk bi translated">本文的第2部分</h2><div class="is it gp gr iu oq"><a rel="noopener  ugc nofollow" target="_blank" href="/create-your-own-dialog-without-using-any-packages-7bb303f62471"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jo gy z fp ov fr fs ow fu fw jn bi translated">创建自己的对话框，不使用任何软件包！</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">在本文中，我们将学习如何创建我们自己的showDialog()函数，并了解在…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">itnext.io</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe ja oq"/></div></div></a></div></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="18b2" class="oc ld je bd le od oe of lh og oh oi lk kt oj ku lo kw ok kx ls kz ol la lw om bi translated">感谢您的阅读！</h1><p id="db22" class="pw-post-body-paragraph mm mn je mo b mp ni ko mr ms nj kr mu ll nk mw mx lp nl mz na lt nm nc nd ne im bi translated">请不要忘记点击👏按钮，并有一个美好的一天！</p></div></div>    
</body>
</html>