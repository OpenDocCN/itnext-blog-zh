<html>
<head>
<title>Continuous integration and deployment for your enterprise hybrid mobile apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的企业混合移动应用提供持续集成和部署</h1>
<blockquote>原文：<a href="https://itnext.io/continuous-integration-and-deployment-for-your-enterprise-hybrid-mobile-apps-51a57501abf0?source=collection_archive---------1-----------------------#2018-03-15">https://itnext.io/continuous-integration-and-deployment-for-your-enterprise-hybrid-mobile-apps-51a57501abf0?source=collection_archive---------1-----------------------#2018-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="053c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最近，我花了一些时间为一个企业客户设置持续集成(CI)和持续交付(CD)。我自动化了构建、签名/签名和分发操作，我们必须每天为我们的混合移动应用程序执行这些操作。无论你使用什么平台来构建你的移动应用程序，ionic ，<strong class="jp ir"> cordova </strong>，<strong class="jp ir"> nativescript，flutter </strong>或者<strong class="jp ir"> react native </strong>，它们在构建和发布阶段都有共同的实践和关注点。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/9931e3e73c0ace57552a21f4d73ab54b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a4sD659tqMtijHu-."/></div></div></figure><p id="979a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想分享我的经验，并希望能激励那些正在建立或维护CI/CD的人。虽然这是一篇相当技术性的文章，但我也将触及商业价值，以吸引企业主和经理。所以，请原谅我。</p><h1 id="1cb3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">为什么您应该开始使用连续交付管道？</strong></h1><p id="0c95" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">您可能有太多的手动过程和软件交付的瓶颈。每天，由于您在上下文切换、手动构建、修复构建和依赖性问题、处理iOS代码签名问题、手动归档、手动部署、手动重新打包、代码重新签名等方面所花费的时间和精力，它会降低您交付特性的效率。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><a href="https://www.linkit.nl/vacatures?utm_source=itnext&amp;utm_campaign=article_banner"><div class="gh gi ma"><img src="../Images/d12b50aee7d6ad5faafed6023b0afc1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMdmIDX7Bi0TfGjj749AtA.png"/></div></a></figure><p id="5d8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过在您的组织中引入CI/CD pipeline，您可以提高混合移动应用的质量，加快交付并实现流程自动化。</p><p id="0316" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在继续之前，我想回顾一下持续集成、持续交付和持续部署术语。我认为澄清它们是什么以及它们之间的联系是很重要的。事实上，我想强调它对您的业务的实际意义。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mb"><img src="../Images/d100bd192327fb4a4a6bfd2a3c149116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WYJ6NyAGPeOgtY85607wkg.png"/></div></div></figure><h2 id="914c" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">持续集成</h2><blockquote class="mo mp mq"><p id="84df" class="jn jo mr jp b jq jr js jt ju jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj kk ij bi translated">持续集成——频繁地将新的或更改的代码与现有的代码存储库进行集成的实践——应该足够频繁地发生，以便在提交和构建之间不留下干预窗口，并且在开发人员没有注意到错误并立即纠正它们的情况下不会出现错误。</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/4a9450e539d7712b656bbefb59341c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MVIQgMmeCjyizlpH-IzqaQ.png"/></div></div></figure><p id="3658" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这对您的应用和团队意味着什么</p><ul class=""><li id="61a0" class="mw mx iq jp b jq jr ju jv jy my kc mz kg na kk nb nc nd ne bi translated">通过测试单元功能确保代码质量</li><li id="e601" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">防止编译错误</li><li id="aea9" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">代码林挺</li><li id="a038" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">早期检测外部依赖关系的可能问题，如npm包和插件</li><li id="60e7" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">增加您的代码覆盖率</li><li id="562d" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">更快的构建时间</li><li id="2af5" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">保护一个稳定的、工作的开发版本</li><li id="d59e" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">向每个人显示构建结果的透明性</li><li id="6121" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">部署自动化</li></ul><h2 id="41ea" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">持续交付/部署(CD)</h2><blockquote class="mo mp mq"><p id="e0ed" class="jn jo mr jp b jq jr js jt ju jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj kk ij bi translated"><strong class="jp ir">持续交付</strong>是持续集成的扩展，以确保您能够以可持续的方式快速向客户发布新的变更。这意味着除了自动化您的测试之外，您还自动化了您的发布过程，并且您可以通过点击一个按钮在任何时间点部署您的应用程序。</p><p id="7ffc" class="jn jo mr jp b jq jr js jt ju jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj kk ij bi translated"><strong class="jp ir">持续部署</strong>是持续交付的下一步:通过自动化测试的每一个变更都被自动部署到生产中。持续部署应该是大多数不受法规或其他要求约束的公司的目标。</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/2c1c9b372c9639b5837c5ec89bf5c269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ws3K3Bk4GIXk7R_nD4qe1w.png"/></div></div></figure><p id="849f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这对你的iOS应用和你的团队意味着什么</p><ul class=""><li id="76c1" class="mw mx iq jp b jq jr ju jv jy my kc mz kg na kk nb nc nd ne bi translated">不再有关于开发和发行证书的xcode代码签名问题，因为你不需要在我们的本地计算机上构建</li><li id="5380" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">开发人员不再需要切换上下文，就可以为测试人员、用户和利益相关者提供QA版本</li><li id="99f5" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">不再有因系统工具和依赖项不匹配而导致的构建错误</li><li id="f603" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">测试人员无需再等待在设备上安装特定的构建/修订版本</li><li id="c6fe" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">不再需要通过重建、重新包装和重新签署生产企业证书来为生产进行手动发布准备</li><li id="84a0" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">我们的客户和利益相关者不再需要为了获得构建/版本而在办公室停下来——这要归功于测试版应用分发</li><li id="6e25" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">任何开发人员或测试人员都能够从一个分支/修订中远程触发一个构建，并为QA或PROD部署它(如果您遵循连续交付方法)</li><li id="926d" class="mw mx iq jp b jq nf ju ng jy nh kc ni kg nj kk nb nc nd ne bi translated">任何开发人员或测试人员都能够通过推送新代码或合并PR来远程触发构建，并为QA或PROD部署它(如果您遵循持续部署方法)</li></ul></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="3a7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从现在开始，我将重点介绍为您的混合应用程序设置CI/CD的技巧和诀窍。为了避免复杂性，在我的例子中，我只提到iOS平台上的<strong class="jp ir"> ionic应用</strong>。</p><h1 id="f859" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">找到瓶颈并自动化手动流程</h1><p id="af59" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">您在设置CI环境时可能遇到的一个障碍可能是您必须实现自动化。它可以是协同设计操作、重新设计操作、重新打包或您需要上传文件或提交表单的网页。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/53bdc725e47f9a0ebbf78e2c2db8461a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*XQc_KZEpxcJSwPKYm5pgiA.png"/></div></figure><h2 id="6aff" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">分析</h2><p id="afc0" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">从分析交付管道上的手动流程开始。这是您必须提交的变更请求吗？是QA的发行版吗？是辞职操作吗？定义它们并思考自动化它们的方法。</p><h2 id="a546" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">使用fastlane实现自动化</h2><p id="338c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">整合<a class="ae nt" href="https://fastlane.tools/" rel="noopener ugc nofollow" target="_blank">快车道</a>！浪子是一个很棒的平台，专注于解决移动开发环境中存在多年的问题。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nu"><img src="../Images/e0427dcfe6d7192a23032c26d7d58fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UchIRfbd6orknkV4FZAwTw.png"/></div></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated"><em class="nz">“fast lane</em>处理繁琐的任务，让您不必如此”——fast lane . tools</figcaption></figure><p id="cf05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它可以帮助您组织和维护代码签名的配置文件和证书，集成测试版部署等等。</p><h2 id="86cf" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">使用您自己的脚本实现自动化</h2><p id="5e96" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">对于不能通过fastlane或任何其他有用的平台或库实现自动化的流程，您可能需要编写自己的脚本。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/92d829967b62a76b282106ffacb7a6c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Cv7F9UtBMhsrcV2_rwqEgA.png"/></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">在编写自己的node.js脚本之前，一定要浏览一下npmjs.com</figcaption></figure><p id="69be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可能需要重新打包应用程序、重新签名应用程序、将应用程序上传到网页或企业MDM提供商。在这种情况下，您应该创建自己的bash可执行文件，以便自动化日常操作。浏览npm包并使用node.js构建您的脚本可能是明智的，因为它是一个大型社区，并且可能已经有了满足您需求的包。</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/78751027f722b4a713bfe79a784d9bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*kk8ovQKB-45FsZ8TZM-vjg.png"/></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">“木偶师是一个节点库，它提供了一个高级API来控制<a class="ae nt" href="https://developers.google.com/web/updates/2017/04/headless-chrome" rel="noopener ugc nofollow" target="_blank">无头</a> Chrome或通过<a class="ae nt" href="https://chromedevtools.github.io/devtools-protocol/" rel="noopener ugc nofollow" target="_blank"> DevTools协议</a>的Chrome。也可以配置成使用全(非无头)铬或铬。”</figcaption></figure><p id="5b5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你需要手动处理网页，Puppeteer是一个非常强大的库，也是一个很好的工具集。它可以是你自动化基于浏览器的过程的最好的朋友。</p><p id="7826" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用puppeteer来自动化一个重签名操作，我必须将重新打包的应用程序上传到一个web表单，并从Nexus服务器下载一个重签名的应用程序。</p><h1 id="df13" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">设置配置项配置</h1><p id="1591" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">编译构建一个iOS平台的应用包，需要一个我们都知道的iOS设备，xcode，代码签名。无论您使用哪种CI解决方案，您都需要为您的构建配置确定并指向正确的代理。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oc"><img src="../Images/fc8027767098eb2811a95cc9de3f7a9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4q0D8PQ18b7MfRdtPDjCA.jpeg"/></div></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">确保您已经为您的自动化流程构建了具有正确功能的代理</figcaption></figure><h2 id="352b" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated"><strong class="ak">构建代理的先决条件</strong></h2><p id="7563" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">定义您的需求，并为CI代理设置先决条件和功能。例如，假设你正在开发一个ionic应用程序，你已经用fastlane和puppeteer自动完成了一些任务。您可能需要为您的代理安装brew、nvm、cordova、xcode、yarn、ionic、ios-deploy、fastlane和google-chrome。</p><p id="629f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要确保这些工具安装在您的CI代理上。作为构建配置的第一步，明智的做法是检查CI系统上是否安装了这些工具，如果没有，就用命令行脚本安装它们！</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">断言并安装脚本所需的工具</figcaption></figure><h2 id="940c" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">管理开发人员和企业分发证书以及CI代理上的代码签名</h2><p id="236f" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">如果你正在为iOS开发移动应用，你可能已经知道代码设计是一项具有挑战性的任务。如果你在一个拥有多个产品团队的大型组织中工作，这很难理解，甚至更难维持。</p><p id="993e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我建议您使用<a class="ae nt" href="https://docs.fastlane.tools/actions/match/" rel="noopener ugc nofollow" target="_blank"> fastlane match </a>来管理您团队的发展证书。您还应该使用<em class="mr"> match </em>在您的CI代理上安装您的分发证书。</p><p id="168c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果使用match，您需要在构建配置中引入一个新步骤，从证书存储库中下载预置描述文件和证书。否则，您可以使用sigh &amp; cert从您的Apple开发者帐户下载它。以下代码片段是如何在macOS构建代理上处理iOS代码签名的示例。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">下载您的预置描述文件和证书，将它们设置到CI上的自定义钥匙串中</figcaption></figure><p id="25fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mr">我想在这里指出一个重要的细节。为了让xcode在构建期间从钥匙串中获取您的证书，您的钥匙串应该被解锁——参见上面代码片段中的第7行。否则，您的构建将被挂在解锁钥匙串提示上。</em></p><h2 id="c799" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">维护您的配置项脚本</h2><p id="c682" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">虽然您可以将命令行脚本添加到CI的构建配置中，但是我建议您将构建脚本保留在源代码控制系统中。这将更容易开发，审查和维护您的脚本，它将使人们有可能看到修订历史。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi of"><img src="../Images/1add418b57cef54a1968d01857d6c2ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*EBpXNkMvZIAulbgjIH-DPg.png"/></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">维护配置项脚本的文件夹结构示例</figcaption></figure><h2 id="1b1f" class="mc ky iq bd kz md me dn ld mf mg dp lh jy mh mi ll kc mj mk lp kg ml mm lt mn bi translated">在构建配置中设置步骤</h2><p id="cba2" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在构建您的定制脚本之后，您需要将它们分配到您的构建步骤配置中。这里有一个创建基于Bamboo的应用程序工件的构建步骤的例子。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi og"><img src="../Images/bdd0f8db990428a73f39a6f916239dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*awoIliDzaJo_YQph-BnEkQ.png"/></div></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="7803" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦您有了您的工件(在我们的例子中是IPA文件),您可能想要将它用于beta部署。为了实现这一点，您可以引入一个新的部署阶段，并设置与上面类似的构建配置，以部署您刚刚构建的工件。</p><h1 id="40a2" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">面向持续部署的测试版应用分发</h1><p id="651d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在将应用发布给生产用户之前，测试版应用分发是将应用分发给QA、关键用户和利益相关者的一种非常好的方式。苹果为商业应用引入了<a class="ae nt" href="https://developer.apple.com/testflight/" rel="noopener ugc nofollow" target="_blank"> TestFlight </a>，不幸的是，企业开发者账户无法使用。</p><p id="8bb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，对于服务于相同目标的企业来说，还有其他很好的选择。有关第三方测试版分发服务，请参见<a class="ae nt" href="https://hockeyapp.net/" rel="noopener ugc nofollow" target="_blank"> HockeyApp </a>、<a class="ae nt" href="https://docs.fabric.io/apple/beta/overview.html" rel="noopener ugc nofollow" target="_blank"> Fabric Beta </a>和<a class="ae nt" href="https://testfairy.com/" rel="noopener ugc nofollow" target="_blank"> TestFairy </a>。</p><p id="f8fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你正在使用<em class="mr"> fastlane </em>，你可以利用每个测试服务的预建脚本——参见<a class="ae nt" href="https://docs.fastlane.tools/getting-started/ios/beta-deployment/" rel="noopener ugc nofollow" target="_blank"> <em class="mr"> fastlane beta </em> </a>。它内置了TestFlight、Fabric Beta、HockeyApp和TestFairy的动作。否则，您也可以轻松地与他们的API通信，以上传您的包并分发它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oh"><img src="../Images/57edd6e5cf65de7dccf4361667d6e204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZ8UY_lOLClrU3tbVg75mA.png"/></div></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">测试版应用版本的分发流程</figcaption></figure><p id="35f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在您的配置项上设置自动分发阶段，作为您的构建的附加步骤，或者使用您的配置项的部署管道。</p><p id="9e80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下面，您会看到一个简单的bash脚本，它将您的应用程序工件上传到HockeyApp。HockeyApp自动将此部署分发到选定的用户组，并相应地发送电子邮件/slack通知，其中包含您的应用程序的安装链接。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">如果您不使用fastlane，编写自己的测试版应用程序部署脚本并不复杂</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="6e5c" class="kx ky iq bd kz la oi lc ld le oj lg lh li ok lk ll lm ol lo lp lq om ls lt lu bi translated">简单地</h1><p id="b41d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">虽然这篇文章比我计划的要长，但它仍然是整个管道的概述，有一些深入的主题，如代码签名、CI配置和自动化流程。</p><p id="54d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望它能帮助您实现流程自动化，并为您的组织启用CI/CD(如果尚未启用的话)。否则，你可能会感觉到人工分娩的情绪循环。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi on"><img src="../Images/88da7bcf86b02f9d5cc9753956b3e498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TD0qBfxErUIndt7q7Nejug.png"/></div></div><figcaption class="nv nw gj gh gi nx ny bd b be z dk translated">我们都掉下了紧急悬崖。我理解你。</figcaption></figure><p id="f9b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如有任何问题或备注，请留言！我很乐意听听你旅途中的经历。如果你觉得我的文章有价值，别忘了鼓掌。干杯！</p></div></div>    
</body>
</html>