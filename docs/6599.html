<html>
<head>
<title>Improving video load performance (JS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高视频加载性能(JS)</h1>
<blockquote>原文：<a href="https://itnext.io/improving-video-load-performance-js-8f24c7d6a85e?source=collection_archive---------0-----------------------#2021-12-30">https://itnext.io/improving-video-load-performance-js-8f24c7d6a85e?source=collection_archive---------0-----------------------#2021-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4670" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">视频元素在网络上经常被使用，以允许存储在s3或任何其他替代设备中的视频流传输到您的网站。虽然我们不是YouTube，也不想为视频创建许多小块以加快播放速度，但我们需要为我们更通用的用例找到一个解决方案。</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="9b03" class="ku kv iq kq b gy kw kx l ky kz">&lt;video&gt;<br/>  &lt;source src="<a class="ae la" href="https://link" rel="noopener ugc nofollow" target="_blank">https://link</a>"&gt; &lt;/source&gt;<br/>&lt;/video</span></pre><p id="4c5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是向我们的网站添加视频的简单方法，基本html。在这种情况下，一旦在我们的源标签中设置了视频的url，视频将开始加载，虽然这样做是可行的，但用户的行为非常缓慢，他们已经看到了视频元素，用户必须等待最长的时间才能观看视频。</p><p id="ac23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么我们能做些什么来改善这种情况呢？使用原生JS(是的，原生)</p><figure class="kl km kn ko gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi lb"><img src="../Images/83997f905a2aaddabf939f0d351827d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1iolCQ0rWNrsibiwElMMNQ.png"/></div></div></figure><p id="1fc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们一步一步来:<br/> 1。createElement('video ')将创建一个视频类型的html元素(拥有其所有属性<br/> 2。createElement('source ')将创建一个源元素。<br/> 3。将源附加到视频中(参考见上面的html片段)。<br/> 4。将视频预加载策略设置为“自动”(它将在获得url后立即开始构建视频缓冲区。<br/> 5。设置视频网址。由于预加载策略，视频将开始获取url it(甚至在附加到我们的HTML之前。<br/> 6。将视频添加到HTML(或任何其他元素)中，使视频播放器在屏幕上可见。</p><p id="59a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">— — — — —</p><p id="0034" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么，为什么会这样呢？</p><p id="0095" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">追加到DOM是一件“昂贵”的事情，需要时间。我们可以利用这些时间来创造一种“感知性能”的感觉。我们想展示我们使用的两件东西。我们的网站加载速度越快越好。一旦某样东西可见，它就是可用的。</p><p id="9c45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">加载视频通常是页面上的第一件事，我们的用户已经知道这一点。但是拥有一个不可操作的界面是用户最糟糕的体验之一。因此，我们延迟了视频在我们的DOM中的设置时间，但至少当它在那里时，它就准备好了(或者在最坏的情况下，在更短的时间内)。</p><p id="3d8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Youtube是一个视频平台，它会尽其所能让加载时间尽可能快，在大多数网站上并非如此。因此，我们可以利用现有的工具，尽最大努力改进我们的网站。</p><p id="e4a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这已经在一个相当大规模的平台上进行了生产测试，运行速度更快(遗憾的是我不能公布数字)</p></div></div>    
</body>
</html>