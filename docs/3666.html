<html>
<head>
<title>Why I Moved My Website From Github Pages to Heroku — with a Cost</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我把我的网站从Github页面转移到Heroku——这是有代价的</h1>
<blockquote>原文：<a href="https://itnext.io/why-i-moved-my-website-from-github-pages-to-heroku-with-a-cost-afdbf8f6f2cb?source=collection_archive---------4-----------------------#2020-01-27">https://itnext.io/why-i-moved-my-website-from-github-pages-to-heroku-with-a-cost-afdbf8f6f2cb?source=collection_archive---------4-----------------------#2020-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/2fc6655e746b8036a02c22de175ff6e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*2xCuMWfky0_OS3ami-fUHA.png"/></div></figure><h1 id="15cc" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">问题是</h1><p id="a4da" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">你可能知道也可能不知道，我用Angular框架把<a class="ae lq" href="http://dalenguyen.me/blog/create-your-website-for-free-with-github-pages-angular" rel="noopener ugc nofollow" target="_blank">我的个人网站建成了一个单页面应用程序(SPA) </a>，托管在Github页面上。一切都很好，直到我在个人网站上集成了博客功能。搜索引擎优化(SEO)和社交媒体预览变得越来越糟糕。</p><p id="5060" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">我的帖子无法被索引或预览，因为Html上除了<strong class="ku ir"><em class="lw">&lt;app-root&gt;&lt;/app-root&gt;</em></strong>标签之外什么都没有。内容和元标签还没有准备好。</p><h1 id="d9bb" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">解决方案</h1><p id="dc81" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">服务器端渲染(SSR)来拯救。它是这样工作的:</p><ol class=""><li id="beb9" class="lx ly iq ku b kv lr kz ls ld lz lh ma ll mb lp mc md me mf bi translated">客户端向服务器发送请求</li><li id="66e7" class="lx ly iq ku b kv mg kz mh ld mi lh mj ll mk lp mc md me mf bi translated">服务器动态生成HTML</li><li id="7bbd" class="lx ly iq ku b kv mg kz mh ld mi lh mj ll mk lp mc md me mf bi translated">客户端获得一个带有meta标签和内容的静态HTML页面</li></ol><p id="3331" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">问题是我需要一个服务器来处理Github页面目前无法支持的请求。所以我必须找到另一个供应商。像Firebase，Heroku，OpenShift Online，Digital Ocean这样的Nodejs主机选择很少</p><p id="bea6" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">目前Heroku对我来说是个不错的选择。</p><h1 id="a438" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">成本</h1><ul class=""><li id="7e12" class="lx ly iq ku b kv kw kz la ld ml lh mm ll mn lp mo md me mf bi translated">我的应用程序将在30分钟不活动后进入睡眠状态。</li><li id="96e0" class="lx ly iq ku b kv mg kz mh ld mi lh mj ll mk lp mo md me mf bi translated">我只有1000小时/月免费(验证帐户)</li><li id="4ab6" class="lx ly iq ku b kv mg kz mh ld mi lh mj ll mk lp mo md me mf bi translated">我没有SSL，除非每月支付7美元(爱好包)</li></ul><h1 id="2c91" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">实施</h1><p id="a395" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><em class="lw">注意:如果你正在使用纱线，你应该切换到npm。</em></p><p id="1611" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">对于Angular，有一个支持SSR的包名为<a class="ae lq" href="https://angular.io/guide/universal" rel="noopener ugc nofollow" target="_blank"> Angular Universal </a>。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="50bc" class="my jv iq mu b gy mz na l nb nc">ng add @nguniversal/express-engine --clientProject your-project-name</span></pre><p id="2118" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">为了更新SEO元标签，我使用了@angular/platform-browser的元和标题服务。你可以从<a class="ae lq" href="https://github.com/dalenguyen/dalenguyen.github.io/blob/dev/src/app/blog/post/post.component.ts" rel="noopener ugc nofollow" target="_blank"> my Github </a>查看实现。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/418d08a874ddfad9179b6bef078ba826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FOQZiBdYvdJYmhH0IqfRDw.png"/></div></div></figure><p id="cbb4" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">在您让它工作之后，是时候部署到Heroku平台了。</p><h1 id="145c" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">创建新的Heroku应用程序</h1><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi ni"><img src="../Images/ba6a1d0cc3e31b7ccf148f8ff61c50d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9iDAPMSucGtoBr1RzykbWw.png"/></div></div></figure><h1 id="d3f3" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">登录Heroku</h1><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b89e" class="my jv iq mu b gy mz na l nb nc">╰─ heroku login</span><span id="b7bf" class="my jv iq mu b gy nj na l nb nc">heroku: Press any key to open up the browser to login or q to exit:</span><span id="b310" class="my jv iq mu b gy nj na l nb nc">Opening browser to https://cli-auth.heroku.com/...</span><span id="ac2d" class="my jv iq mu b gy nj na l nb nc">Logging in... done</span><span id="2500" class="my jv iq mu b gy nj na l nb nc">Logged in as xxx@dalenguyen.me</span></pre><h1 id="ac2f" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">将项目添加到Heroku</h1><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e90e" class="my jv iq mu b gy mz na l nb nc">╰─ heroku git:remote -a dalenguyen-me</span><span id="acb9" class="my jv iq mu b gy nj na l nb nc">set git remote heroku to <a class="ae lq" href="https://git.heroku.com/dalenguyen-me.git" rel="noopener ugc nofollow" target="_blank">https://git.heroku.com/dalenguyen-me.git</a></span></pre><p id="ed72" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated">我把项目从dev推到Heroku。因为我的主分支是针对Github页面的。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b22d" class="my jv iq mu b gy mz na l nb nc">╰─ git push heroku dev:master</span><span id="07ff" class="my jv iq mu b gy nj na l nb nc">Enumerating objects: 704, done.</span><span id="fd95" class="my jv iq mu b gy nj na l nb nc">Counting objects: 100% (704/704), done.</span><span id="9074" class="my jv iq mu b gy nj na l nb nc">Delta compression using up to 8 threads</span><span id="0ae9" class="my jv iq mu b gy nj na l nb nc">Compressing objects: 100% (550/550), done.</span><span id="5f4f" class="my jv iq mu b gy nj na l nb nc">…</span></pre><h1 id="6c2d" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">检查Heroku应用程序上的搜索引擎优化标签</h1><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/6e6d7b6980c668701596d5d0a155c453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*Rph7i5MSS4OuxW8h2_qQaQ.png"/></div></figure><h1 id="ddfb" class="ju jv iq bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">参考文献</h1><p id="0fc2" class="pw-post-body-paragraph ks kt iq ku b kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">以下是检查网站搜索引擎优化标签的链接:</p><p id="1de7" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated"><a class="ae lq" href="https://developers.facebook.com/tools/debug/sharing/" rel="noopener ugc nofollow" target="_blank">https://developers.facebook.com/tools/debug/sharing/</a></p><p id="f6ae" class="pw-post-body-paragraph ks kt iq ku b kv lr kx ky kz ls lb lc ld lt lf lg lh lu lj lk ll lv ln lo lp ij bi translated"><a class="ae lq" href="https://www.linkedin.com/post-inspector/inspect/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/post-inspector/inspect/</a></p></div></div>    
</body>
</html>