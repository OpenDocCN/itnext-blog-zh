<html>
<head>
<title>How to use YouTube APIs and play YouTube videos in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用YouTube APIs并在Flutter中播放YouTube视频</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-use-youtube-apis-and-play-youtube-videos-in-flutter-9956e066ea25?source=collection_archive---------3-----------------------#2020-08-27">https://itnext.io/how-to-use-youtube-apis-and-play-youtube-videos-in-flutter-9956e066ea25?source=collection_archive---------3-----------------------#2020-08-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6f03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我们将讨论如何使用YouTube的API和在Flutter中播放YouTube视频。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/dead09c4a05ab6f061cab8b0e6823eac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*92WyzVXQRTfXLe8Z.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在Flutter中播放Youtube视频</figcaption></figure><h1 id="1afa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">观看视频教程</h1><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lz ma l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在Flutter中播放Youtube视频</figcaption></figure><h1 id="efa6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">添加依赖关系</strong></h1><p id="0d8a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">打开你的Flutter项目中的<strong class="jp ir"> <em class="mg"> pubspec.yaml </em> </strong>文件，添加下面的依赖项</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="de85" class="mm lc iq mi b gy mn mo l mp mq">http: ^0.12.0+2<br/>youtube_player_flutter: ^7.0.0+7<br/>cached_network_image: ^2.2.0+1</span></pre><p id="1731" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们创建两个屏幕</p><ol class=""><li id="9ff4" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">主屏幕</li><li id="0aea" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">视频播放器屏幕</li></ol><p id="cbbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在主屏幕上，我们将显示视频列表。</p><h1 id="d5d8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">API密钥</h1><p id="9bba" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们需要API密钥来访问YouTube APIs。</p><p id="a9ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，我们需要去https://console.developers.google.com/<a class="ae nf" href="https://console.developers.google.com/" rel="noopener ugc nofollow" target="_blank"/></p><p id="c9d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mg">创建一个新项目，</em></p><ol class=""><li id="e467" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><em class="mg">点击创建项目</em></li><li id="6590" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">完成后，点击仪表板、启用的API，找到YouTube API V3 </em></li><li id="e3a1" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">点击启用</em></li><li id="613f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">创建凭证，选择Youtube API V3 </em></li><li id="b849" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">选择平台</em></li><li id="f0f1" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">选择‘公共数据’</em></li><li id="22c9" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">点击“我需要什么凭证？”</em></li><li id="66b5" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">点击完成</em></li><li id="fd80" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mg">复制API密钥。</em></li></ol><p id="491e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们将这个api密钥复制到我们的Flutter项目中。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="315a" class="mm lc iq mi b gy mn mo l mp mq">String API_KEY = 'AIzaSyBGj_Duj__ivCxJ2ya3ilkVfEzX1ZSRlpE';</span></pre><p id="9652" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获取频道信息</strong></p><p id="cca6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要获取频道信息，我们可以使用下面的youtube API</p><div class="ng nh gp gr ni nj"><a href="https://developers.google.com/youtube/v3/docs/channels/list" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">频道:列表| YouTube数据API |谷歌开发者</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">返回与请求条件匹配的零个或多个通道资源的集合。配额影响:对此的呼吁…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">developers.google.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kv nj"/></div></div></a></div><p id="271d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们创建一个服务类来调用这些API。</p><p id="87fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个名为“<em class="mg"> Services.dart </em>的类，调用上面的API。</p><p id="96dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">获取某个YouTube频道的频道ID。</p><p id="9e36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是我的频道ID。</p><p id="0d88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae nf" href="https://www.youtube.com/channel/UC5lbdURzjB0irr-FTbjWN1A" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/channel/<strong class="jp ir">UC 5 lbdurzjb 0 IRR-FTbjWN1A</strong>T37】</a></p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="ece3" class="mm lc iq mi b gy mn mo l mp mq">static const CHANNEL_ID = 'UC5lbdURzjB0irr-FTbjWN1A';<br/>  static const _baseUrl = '<a class="ae nf" href="http://www.googleapis.com%27/" rel="noopener ugc nofollow" target="_blank">www.googleapis.com'</a>;static Future&lt;ChannelInfo&gt; getChannelInfo() async {<br/>    Map&lt;String, String&gt; parameters = {<br/>      'part': 'snippet,contentDetails,statistics',<br/>      'id': CHANNEL_ID,<br/>      'key': Constants.API_KEY,<br/>    };<br/>    Map&lt;String, String&gt; headers = {<br/>      HttpHeaders.contentTypeHeader: 'application/json',<br/>    };<br/>    Uri uri = Uri.https(<br/>      _baseUrl,<br/>      '/youtube/v3/channels',<br/>      parameters,<br/>    );<br/>    Response response = await http.get(uri, headers: headers);<br/>    // print(response.body);<br/>    ChannelInfo channelInfo = channelInfoFromJson(response.body);<br/>    return channelInfo;<br/>}</span></pre><p id="84c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> ChannelInfo </strong>上述API的模型类。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="34b2" class="mm lc iq mi b gy mn mo l mp mq">import 'dart:convert';ChannelInfo channelInfoFromJson(String str) =&gt;<br/>    ChannelInfo.fromJson(json.decode(str));String channelInfoToJson(ChannelInfo data) =&gt; json.encode(data.toJson());class ChannelInfo {<br/>  ChannelInfo({<br/>    this.kind,<br/>    this.etag,<br/>    this.pageInfo,<br/>    this.items,<br/>  });String kind;<br/>  String etag;<br/>  PageInfo pageInfo;<br/>  List&lt;Item&gt; items;factory ChannelInfo.fromJson(Map&lt;String, dynamic&gt; json) =&gt; ChannelInfo(<br/>        kind: json["kind"],<br/>        etag: json["etag"],<br/>        pageInfo: PageInfo.fromJson(json["pageInfo"]),<br/>        items: List&lt;Item&gt;.from(json["items"].map((x) =&gt; Item.fromJson(x))),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "kind": kind,<br/>        "etag": etag,<br/>        "pageInfo": pageInfo.toJson(),<br/>        "items": List&lt;dynamic&gt;.from(items.map((x) =&gt; x.toJson())),<br/>      };<br/>}class Item {<br/>  Item({<br/>    this.kind,<br/>    this.etag,<br/>    this.id,<br/>    this.snippet,<br/>    this.contentDetails,<br/>    this.statistics,<br/>  });String kind;<br/>  String etag;<br/>  String id;<br/>  Snippet snippet;<br/>  ContentDetails contentDetails;<br/>  Statistics statistics;factory Item.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Item(<br/>        kind: json["kind"],<br/>        etag: json["etag"],<br/>        id: json["id"],<br/>        snippet: Snippet.fromJson(json["snippet"]),<br/>        contentDetails: ContentDetails.fromJson(json["contentDetails"]),<br/>        statistics: Statistics.fromJson(json["statistics"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "kind": kind,<br/>        "etag": etag,<br/>        "id": id,<br/>        "snippet": snippet.toJson(),<br/>        "contentDetails": contentDetails.toJson(),<br/>        "statistics": statistics.toJson(),<br/>      };<br/>}class ContentDetails {<br/>  ContentDetails({<br/>    this.relatedPlaylists,<br/>  });RelatedPlaylists relatedPlaylists;factory ContentDetails.fromJson(Map&lt;String, dynamic&gt; json) =&gt; ContentDetails(<br/>        relatedPlaylists: RelatedPlaylists.fromJson(json["relatedPlaylists"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "relatedPlaylists": relatedPlaylists.toJson(),<br/>      };<br/>}class RelatedPlaylists {<br/>  RelatedPlaylists({<br/>    this.likes,<br/>    this.favorites,<br/>    this.uploads,<br/>    this.watchHistory,<br/>    this.watchLater,<br/>  });String likes;<br/>  String favorites;<br/>  String uploads;<br/>  String watchHistory;<br/>  String watchLater;factory RelatedPlaylists.fromJson(Map&lt;String, dynamic&gt; json) =&gt;<br/>      RelatedPlaylists(<br/>        likes: json["likes"],<br/>        favorites: json["favorites"],<br/>        uploads: json["uploads"],<br/>        watchHistory: json["watchHistory"],<br/>        watchLater: json["watchLater"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "likes": likes,<br/>        "favorites": favorites,<br/>        "uploads": uploads,<br/>        "watchHistory": watchHistory,<br/>        "watchLater": watchLater,<br/>      };<br/>}class Snippet {<br/>  Snippet({<br/>    this.title,<br/>    this.description,<br/>    this.publishedAt,<br/>    this.thumbnails,<br/>    this.localized,<br/>    this.country,<br/>  });String title;<br/>  String description;<br/>  DateTime publishedAt;<br/>  Thumbnails thumbnails;<br/>  Localized localized;<br/>  String country;factory Snippet.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Snippet(<br/>        title: json["title"],<br/>        description: json["description"],<br/>        publishedAt: DateTime.parse(json["publishedAt"]),<br/>        thumbnails: Thumbnails.fromJson(json["thumbnails"]),<br/>        localized: Localized.fromJson(json["localized"]),<br/>        country: json["country"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "title": title,<br/>        "description": description,<br/>        "publishedAt": publishedAt.toIso8601String(),<br/>        "thumbnails": thumbnails.toJson(),<br/>        "localized": localized.toJson(),<br/>        "country": country,<br/>      };<br/>}class Localized {<br/>  Localized({<br/>    this.title,<br/>    this.description,<br/>  });String title;<br/>  String description;factory Localized.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Localized(<br/>        title: json["title"],<br/>        description: json["description"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "title": title,<br/>        "description": description,<br/>      };<br/>}class Thumbnails {<br/>  Thumbnails({<br/>    this.thumbnailsDefault,<br/>    this.medium,<br/>    this.high,<br/>  });Default thumbnailsDefault;<br/>  Default medium;<br/>  Default high;factory Thumbnails.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Thumbnails(<br/>        thumbnailsDefault: Default.fromJson(json["default"]),<br/>        medium: Default.fromJson(json["medium"]),<br/>        high: Default.fromJson(json["high"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "default": thumbnailsDefault.toJson(),<br/>        "medium": medium.toJson(),<br/>        "high": high.toJson(),<br/>      };<br/>}class Default {<br/>  Default({<br/>    this.url,<br/>    this.width,<br/>    this.height,<br/>  });String url;<br/>  int width;<br/>  int height;factory Default.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Default(<br/>        url: json["url"],<br/>        width: json["width"],<br/>        height: json["height"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "url": url,<br/>        "width": width,<br/>        "height": height,<br/>      };<br/>}class Statistics {<br/>  Statistics({<br/>    this.viewCount,<br/>    this.commentCount,<br/>    this.subscriberCount,<br/>    this.hiddenSubscriberCount,<br/>    this.videoCount,<br/>  });String viewCount;<br/>  String commentCount;<br/>  String subscriberCount;<br/>  bool hiddenSubscriberCount;<br/>  String videoCount;factory Statistics.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Statistics(<br/>        viewCount: json["viewCount"],<br/>        commentCount: json["commentCount"],<br/>        subscriberCount: json["subscriberCount"],<br/>        hiddenSubscriberCount: json["hiddenSubscriberCount"],<br/>        videoCount: json["videoCount"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "viewCount": viewCount,<br/>        "commentCount": commentCount,<br/>        "subscriberCount": subscriberCount,<br/>        "hiddenSubscriberCount": hiddenSubscriberCount,<br/>        "videoCount": videoCount,<br/>      };<br/>}class PageInfo {<br/>  PageInfo({<br/>    this.resultsPerPage,<br/>  });int resultsPerPage;factory PageInfo.fromJson(Map&lt;String, dynamic&gt; json) =&gt; PageInfo(<br/>        resultsPerPage: json["resultsPerPage"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "resultsPerPage": resultsPerPage,<br/>      };<br/>}</span></pre><p id="9fbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们在主屏幕中使用这个API。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="9e85" class="mm lc iq mi b gy mn mo l mp mq">ChannelInfo _channelInfo;_getChannelInfo() async {<br/>    _channelInfo = await Services.getChannelInfo();<br/>    _item = _channelInfo.items[0];<br/>    _playListId = _item.contentDetails.relatedPlaylists.uploads;<br/>    print('_playListId $_playListId');<br/>    await _loadVideos();<br/>    setState(() {<br/>      _loading = false;<br/>    });<br/> }</span></pre><p id="0f5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">让我们构建渠道信息视图。</strong></p><p id="07a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">_item.snippet.title. —获取频道标题</p><p id="ae53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">_ item . snippet . thumbnails . medium . URL-获取频道缩略图。中等分辨率。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="e322" class="mm lc iq mi b gy mn mo l mp mq">_buildInfoView() {<br/>    return _loading<br/>        ? CircularProgressIndicator()<br/>        : Container(<br/>            padding: EdgeInsets.all(20.0),<br/>            child: Card(<br/>              child: Padding(<br/>                padding: const EdgeInsets.all(10.0),<br/>                child: Row(<br/>                  children: [<br/>                    CircleAvatar(<br/>                      backgroundImage: CachedNetworkImageProvider(<br/>                        _item.snippet.thumbnails.medium.url,<br/>                      ),<br/>                    ),<br/>                    SizedBox(width: 20),<br/>                    Expanded(<br/>                      child: Text(<br/>                        _item.snippet.title,<br/>                        style: TextStyle(<br/>                          fontSize: 20,<br/>                          fontWeight: FontWeight.w400,<br/>                        ),<br/>                      ),<br/>                    ),<br/>                    Text(_item.statistics.videoCount),<br/>                    SizedBox(width: 20),<br/>                  ],<br/>                ),<br/>              ),<br/>            ),<br/>          );<br/>  }</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ny"><img src="../Images/cf935522ed49c8b6ec1398b25c300a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VHxcTkA8azRPXsl7.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">频道信息</figcaption></figure><h1 id="41e9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取视频列表</h1><p id="6e92" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">要获得视频列表，我们需要使用下面的YouTube API</p><div class="ng nh gp gr ni nj"><a href="https://developers.google.com/youtube/v3/docs/playlistItems/list" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">PlaylistItems: list | YouTube数据API | Google开发者</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">string此参数只能在正确授权的请求中使用。注意:此参数专用于…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">developers.google.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx kv nj"/></div></div></a></div><p id="a8ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们编写获取视频列表的服务。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="35cb" class="mm lc iq mi b gy mn mo l mp mq">static Future&lt;VideosList&gt; getVideosList(<br/>      {String playListId, String pageToken}) async {<br/>    Map&lt;String, String&gt; parameters = {<br/>      'part': 'snippet',<br/>      'playlistId': playListId,<br/>      'maxResults': '8',<br/>      'pageToken': pageToken,<br/>      'key': Constants.API_KEY,<br/>    };<br/>    Map&lt;String, String&gt; headers = {<br/>      HttpHeaders.contentTypeHeader: 'application/json',<br/>    };<br/>    Uri uri = Uri.https(<br/>      _baseUrl,<br/>      '/youtube/v3/playlistItems',<br/>      parameters,<br/>    );<br/>    Response response = await http.get(uri, headers: headers);<br/>    // print(response.body);<br/>    VideosList videosList = videosListFromJson(response.body);<br/>    return videosList;<br/>}</span></pre><p id="b548" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上述API的<strong class="jp ir">视频列表</strong>模型</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="89d8" class="mm lc iq mi b gy mn mo l mp mq">import 'dart:convert';VideosList videosListFromJson(String str) =&gt;<br/>    VideosList.fromJson(json.decode(str));String videosListToJson(VideosList data) =&gt; json.encode(data.toJson());class VideosList {<br/>  VideosList({<br/>    this.kind,<br/>    this.etag,<br/>    this.nextPageToken,<br/>    this.videos,<br/>    this.pageInfo,<br/>  });String kind;<br/>  String etag;<br/>  String nextPageToken;<br/>  List&lt;VideoItem&gt; videos;<br/>  PageInfo pageInfo;factory VideosList.fromJson(Map&lt;String, dynamic&gt; json) =&gt; VideosList(<br/>        kind: json["kind"],<br/>        etag: json["etag"],<br/>        nextPageToken: json["nextPageToken"],<br/>        videos: List&lt;VideoItem&gt;.from(<br/>            json["items"].map((x) =&gt; VideoItem.fromJson(x))),<br/>        pageInfo: PageInfo.fromJson(json["pageInfo"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "kind": kind,<br/>        "etag": etag,<br/>        "nextPageToken": nextPageToken,<br/>        "items": List&lt;dynamic&gt;.from(videos.map((x) =&gt; x.toJson())),<br/>        "pageInfo": pageInfo.toJson(),<br/>      };<br/>}class VideoItem {<br/>  VideoItem({<br/>    this.kind,<br/>    this.etag,<br/>    this.id,<br/>    this.video,<br/>  });String kind;<br/>  String etag;<br/>  String id;<br/>  Video video;factory VideoItem.fromJson(Map&lt;String, dynamic&gt; json) =&gt; VideoItem(<br/>        kind: json["kind"],<br/>        etag: json["etag"],<br/>        id: json["id"],<br/>        video: Video.fromJson(json["snippet"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "kind": kind,<br/>        "etag": etag,<br/>        "id": id,<br/>        "snippet": video.toJson(),<br/>      };<br/>}class Video {<br/>  Video({<br/>    this.publishedAt,<br/>    this.channelId,<br/>    this.title,<br/>    this.description,<br/>    this.thumbnails,<br/>    this.channelTitle,<br/>    this.playlistId,<br/>    this.position,<br/>    this.resourceId,<br/>  });DateTime publishedAt;<br/>  String channelId;<br/>  String title;<br/>  String description;<br/>  Thumbnails thumbnails;<br/>  String channelTitle;<br/>  String playlistId;<br/>  int position;<br/>  ResourceId resourceId;factory Video.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Video(<br/>        publishedAt: DateTime.parse(json["publishedAt"]),<br/>        channelId: json["channelId"],<br/>        title: json["title"],<br/>        description: json["description"],<br/>        thumbnails: Thumbnails.fromJson(json["thumbnails"]),<br/>        channelTitle: json["channelTitle"],<br/>        playlistId: json["playlistId"],<br/>        position: json["position"],<br/>        resourceId: ResourceId.fromJson(json["resourceId"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "publishedAt": publishedAt.toIso8601String(),<br/>        "channelId": channelId,<br/>        "title": title,<br/>        "description": description,<br/>        "thumbnails": thumbnails.toJson(),<br/>        "channelTitle": channelTitle,<br/>        "playlistId": playlistId,<br/>        "position": position,<br/>        "resourceId": resourceId.toJson(),<br/>      };<br/>}class ResourceId {<br/>  ResourceId({<br/>    this.kind,<br/>    this.videoId,<br/>  });String kind;<br/>  String videoId;factory ResourceId.fromJson(Map&lt;String, dynamic&gt; json) =&gt; ResourceId(<br/>        kind: json["kind"],<br/>        videoId: json["videoId"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "kind": kind,<br/>        "videoId": videoId,<br/>      };<br/>}class Thumbnails {<br/>  Thumbnails({<br/>    this.thumbnailsDefault,<br/>    this.medium,<br/>    this.high,<br/>    this.standard,<br/>    this.maxres,<br/>  });Default thumbnailsDefault;<br/>  Default medium;<br/>  Default high;<br/>  Default standard;<br/>  Default maxres;factory Thumbnails.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Thumbnails(<br/>        thumbnailsDefault: Default.fromJson(json["default"]),<br/>        medium: Default.fromJson(json["medium"]),<br/>        high: Default.fromJson(json["high"]),<br/>        standard: null == json["standard"]<br/>            ? null<br/>            : Default.fromJson(json["standard"]),<br/>        maxres:<br/>            null == json["maxres"] ? null : Default.fromJson(json["maxres"]),<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "default": thumbnailsDefault.toJson(),<br/>        "medium": medium.toJson(),<br/>        "high": high.toJson(),<br/>        "standard": standard.toJson(),<br/>        "maxres": maxres.toJson(),<br/>      };<br/>}class Default {<br/>  Default({<br/>    this.url,<br/>    this.width,<br/>    this.height,<br/>  });String url;<br/>  int width;<br/>  int height;factory Default.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Default(<br/>        url: json["url"],<br/>        width: json["width"],<br/>        height: json["height"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "url": url,<br/>        "width": width,<br/>        "height": height,<br/>      };<br/>}class PageInfo {<br/>  PageInfo({<br/>    this.totalResults,<br/>    this.resultsPerPage,<br/>  });int totalResults;<br/>  int resultsPerPage;factory PageInfo.fromJson(Map&lt;String, dynamic&gt; json) =&gt; PageInfo(<br/>        totalResults: json["totalResults"],<br/>        resultsPerPage: json["resultsPerPage"],<br/>      );Map&lt;String, dynamic&gt; toJson() =&gt; {<br/>        "totalResults": totalResults,<br/>        "resultsPerPage": resultsPerPage,<br/>      };<br/>}</span></pre><p id="8875" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以让我们称之为API</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="0e0e" class="mm lc iq mi b gy mn mo l mp mq">_loadVideos() async {<br/>    VideosList tempVideosList = await Services.getVideosList(<br/>      playListId: _playListId,<br/>      pageToken: _nextPageToken,<br/>    );<br/>    _nextPageToken = tempVideosList.nextPageToken;<br/>    _videosList.videos.addAll(tempVideosList.videos);<br/>    print('videos: ${_videosList.videos.length}');<br/>    print('_nextPageToken $_nextPageToken');<br/>    setState(() {});<br/>}</span></pre><p id="0026" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在build方法中，我们将在ListView中显示它</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="b160" class="mm lc iq mi b gy mn mo l mp mq">ListView.builder(<br/>  controller: _scrollController,<br/>  itemCount: _videosList.videos.length,<br/>  itemBuilder: (context, index) {<br/>    VideoItem videoItem = _videosList.videos[index];<br/>    return InkWell(<br/>      onTap: () async {<br/>        Navigator.push(context,<br/>            MaterialPageRoute(builder: (context) {<br/>          return VideoPlayerScreen(<br/>            videoItem: videoItem,<br/>          );<br/>        }));<br/>      },<br/>      child: Container(<br/>        padding: EdgeInsets.all(20.0),<br/>        child: Row(<br/>          children: [<br/>            CachedNetworkImage(<br/>              imageUrl: videoItem<br/>                  .video.thumbnails.thumbnailsDefault.url,<br/>            ),<br/>            SizedBox(width: 20),<br/>            Flexible(child: Text(videoItem.video.title)),<br/>          ],<br/>        ),<br/>      ),<br/>    );<br/>  },<br/>),</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/6697611f7980079b00153e94930e0da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0dkNChcCKOGqIVi-.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Youtube API中的视频列表</figcaption></figure><h1 id="62db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">视频播放器屏幕</strong></h1><p id="adf6" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">现在我们有了每个视频项，每个视频项都有一个videoId，可以用来加载视频。</p><p id="e246" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">视频播放器屏幕将从上面接受VideoItem模型并播放视频。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="c718" class="mm lc iq mi b gy mn mo l mp mq">import 'package:flutter/material.dart';<br/>import 'package:flutter_demos/models/viideos_list.dart';<br/>import 'package:youtube_player_flutter/youtube_player_flutter.dart';class VideoPlayerScreen extends StatefulWidget {<br/>  //<br/>  VideoPlayerScreen({this.videoItem});<br/>  final VideoItem videoItem;<a class="ae nf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  _VideoPlayerScreenState createState() =&gt; _VideoPlayerScreenState();<br/>}class _VideoPlayerScreenState extends State&lt;VideoPlayerScreen&gt; {<br/>  //<br/>  YoutubePlayerController _controller;<br/>  bool _isPlayerReady;<a class="ae nf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void initState() {<br/>    super.initState();<br/>    _isPlayerReady = false;<br/>    _controller = YoutubePlayerController(<br/>      initialVideoId: widget.videoItem.video.resourceId.videoId,<br/>      flags: YoutubePlayerFlags(<br/>        mute: false,<br/>        autoPlay: true,<br/>      ),<br/>    )..addListener(_listener);<br/>  }void _listener() {<br/>    if (_isPlayerReady &amp;&amp; mounted &amp;&amp; !_controller.value.isFullScreen) {<br/>      //<br/>    }<br/>  }<a class="ae nf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void deactivate() {<br/>    _controller.pause();<br/>    super.deactivate();<br/>  }<a class="ae nf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  void dispose() {<br/>    _controller.dispose();<br/>    super.dispose();<br/>  }<a class="ae nf" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        title: Text(widget.videoItem.video.title),<br/>      ),<br/>      body: Container(<br/>        child: YoutubePlayer(<br/>          controller: _controller,<br/>          showVideoProgressIndicator: true,<br/>          onReady: () {<br/>            print('Player is ready.');<br/>            _isPlayerReady = true;<br/>          },<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ob"><img src="../Images/37d0a196c8528605b80241c340d0b19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HF7rnoFXQkVYXbfk.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在Flutter中播放YouTube视频</figcaption></figure><h1 id="2332" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">源代码</h1><div class="ng nh gp gr ni nj"><a href="https://bitbucket.org/vipinvijayan1987/tutorialprojects/src/YoutubePlayer/FlutterTutorialProjects/flutter_demos/" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">比特桶</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">编辑描述</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">bitbucket.org</p></div></div></div></a></div><p id="36bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样。</p><p id="7570" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">观看我的YouTube视频教程，了解更详细的解释。</p><p id="03da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读。</p><p id="47df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击查看我的博客<a class="ae nf" href="http://www.coderzheaven.com/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="9f50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你觉得这个教程有用，请鼓掌。</p></div></div>    
</body>
</html>