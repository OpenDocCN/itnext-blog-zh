# 提高 React 应用的 8 个建议

> 原文：<https://itnext.io/8-propositions-that-will-improve-your-react-application-fc22f6a79bd9?source=collection_archive---------0----------------------->

![](img/84815e8ceca31902e3fca2aa0b66ac30.png)

在使用 React 为一系列项目开发 web 和移动应用程序之后，我遇到了许多典型的挑战和处理它们的好方法。在这篇文章中，我总结了 8 个可能对你的 React 项目有用的建议，无论你是 React 新手还是中级 React 开发人员。

# 1.使用创建-反应-应用程序

不要在配置上浪费不必要的时间，破坏你的好心情！
除非您对您的应用程序有非常具体的要求，否则每次您需要启动一个新项目时，花费大量精力一遍又一遍地设置您的环境是没有意义的。
[Create-react-app](https://facebook.github.io/create-react-app/docs/getting-started) 是一个官方支持的样板文件，可以帮你启动你的新项目。您将在几秒钟内准备好编写代码。

你肯定会发现开发者不同意我的观点，但是我仍然坚持我的观点！我 95%的时间都在使用[创建-反应-应用](https://facebook.github.io/create-react-app/docs/getting-started)。

查看脸书的官方页面，了解如何从 [create-react-app](https://facebook.github.io/create-react-app/docs/getting-started) 中获益。

# 2.随时了解 React 生态系统

React 生态系统非常庞大，而且还在不断扩大。
您可以找到一个现成的解决方案来解决各种问题，包括样式、工具、状态管理和预构建组件。

看看这个[令人敬畏的反应](https://github.com/enaqx/awesome-react)列表，看看它是否提供了适合你的项目的解决方案。总的来说，我建议在开始自己解决问题之前，问问自己是否有人已经为你的问题找到了合适的解决方案。谷歌几乎只需点击几下鼠标。

# 3.使用属性类型

随着代码库的增长，通过类型检查可以为您节省大量捕捉 bug 的时间。

对于大规模解决方案，我建议使用 JavaScript 扩展，比如 [TypeScript](https://www.typescriptlang.org/) ，尽管使用 React 的内置类型检查大有帮助。

[PropTypes](https://reactjs.org/docs/typechecking-with-proptypes.html) 真的很好用。
我们来看一个例子。

在这个例子中，我们希望确保道具`blogTitle`和`blogID`分别属于`string`和`number`类型。
此外，我们想要确保`blogTitle`总是通过简单地链接`isRequired`来提供

任何违反上述内容的行为都将导致控制台中出现警告消息。

# 4.使用功能组件

如果你的组件不需要任何内部状态或生命周期挂钩，比如`componentDidMount`，那么就使用功能性组件，而不是常规的类组件。

在这个例子中，我们看到了如何通过用功能组件替换类组件来避免不必要的复杂性和代码行。

这样，您使用了越来越少的可读代码，从而避免了`this`绑定。只要有可能，你应该总是努力使用功能组件。通过这种方式，你也迫使自己重新考虑一个组件是否应该是有状态的，并且避免意外地在一个组件上存储你不应该或者不必存储的状态。

# 5.当心 setState

当使用`setState()`更新状态时，注意对`setState()`的调用可能是异步的。
因为 React 会尝试将多个`setState()`调用批处理成一个更新，所以您不应该依赖于立即更新的 state 的值。

在这个例子中，我们可能会遇到麻烦。因为在将值传递给下一行的`addToTotalViews()`函数之前，我们不能依赖于正在更新的`postViews`状态。

这里有 3 个简单的方法可以解决这个问题。

**1。将包装在回调函数中的后续语句传递给** `**setState()**`

`setState()`将一个回调函数作为第二个参数，一旦状态被有效更新，该函数就会被调用。这使得对`addToTotalViews()`的调用变得可靠。

**2。传递一个函数给** `**setState()**` **而不是一个对象文字。**

在我们想要基于当前状态更新状态的情况下，我们应该使用相同的技术来避免潜在的竞争情况。

**3。创建一个返回承诺的异步包装函数**

就我个人而言，我非常喜欢这个小技巧。
简单地将`setState`包装在一个函数中，该函数返回一个承诺，当状态被有效地更新时，该承诺就会解决。

这里有一个两个版本的包装函数的例子:ES7 使用 async 关键字，ES6 返回一个新的承诺。

您还可以选择使用一个更通用的异步包装函数来设置任何状态并返回一个承诺。

# 6.避免渲染中的箭头函数和绑定

在`render()`方法中使用箭头函数或绑定似乎很简单，这种情况很常见。
以下是这种用法的例子

这两种方法都简单、清晰、易读，但仍应避免。
原因是，在两种情况下**都分配了一个新功能**，这导致了性能影响。
这似乎不是一个大问题，在许多情况下，性能问题不太可能引人注目。

但是想象一下，你正在使用`map()`来呈现一个很大的组件列表，并且为每个组件多次这样做，或者你——随着你的应用程序的增长，最终到处都这样做。这将使垃圾收集器承受额外的压力，因此将匿名函数传递给`blogPost`将导致额外的重新渲染，所有这些都可能导致渲染性能显著下降。

因此，不要去讨论你的底线在哪里，简单地考虑一下这个不好的实践，避免在`render()`方法中使用箭头函数和绑定。

有几种方法可以实现这一点，这取决于你如何组织你的代码。
一个例子可能是

# 7.计算属性名

ES6 中引入的许多很酷的东西之一是计算属性名。
用`[]`包装属性名，JavaScript 将动态评估属性名。

在下面的例子中，我演示了受控组件伸缩时出现的一个典型问题

对于我们希望包含在这样的受控组件中的每个输入，我们引入一个函数来处理它的变化。
这些功能几乎完全相同，最终占用了大量空间。

在这种情况下，我们可以通过用一个通用函数替换所有这些函数来处理使用计算属性名的输入更改，从而减少许多代码行。
然后我们需要做的就是给输入元素一个`name`属性，带有它应该更新的状态值。

# 8.使用 HOC 的

一个特设，或称[高阶组件](https://reactjs.org/docs/higher-order-components.html)，是 React 中更先进的技术之一。
然而，当你使用了一段时间后，你会发现这种方法是多么的强大。

如果您对函数式编程感兴趣，您可能会熟悉高阶函数的概念，即给定一个函数，返回一个新函数。

同样，HOC 是一个接受一个组件并返回一个新组件的函数。

当我们想要在不同类型的组件上重用功能时，这个想法非常有用。
我们可以通过将我们的 ***表示组件*** 包装在一个包含我们希望重用的功能的 ***容器组件*** 中来实现这一点。

假设我们有一个 *blogPosts* 对象的列表，我们有一个基于作者过滤这些 *blogPosts* 的函数，我们有不同的组件来显示过滤后的列表。

除了复制这个过滤功能，我们可以定义一个 HOC，它接受一个表示组件，即 *blogPosts* 和 *authorName，*，并对其应用过滤逻辑

HOC 现在作为一个原型组件，我们可以用它来组成具有相同共享内部逻辑的不同组件。

注意我们返回的类没有名字。这是一个匿名类。
还要注意的是，我们将任何额外的道具传递给包装的组件，因为我们不关心它接受了什么其他的道具。

现在我们可以像这样使用我们的 HOC

**就是这样！如果您有任何问题或反馈，请随时在下面评论。如果你喜欢这篇文章，请鼓掌👏扣几下吧！**