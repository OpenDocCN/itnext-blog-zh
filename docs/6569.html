<html>
<head>
<title>Hacking the Python syntax: Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">破解Python语法:简介</h1>
<blockquote>原文：<a href="https://itnext.io/hacking-the-python-syntax-part-0-introduction-9a1c054ec1e6?source=collection_archive---------7-----------------------#2021-12-19">https://itnext.io/hacking-the-python-syntax-part-0-introduction-9a1c054ec1e6?source=collection_archive---------7-----------------------#2021-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/8f0c321081b43fe881fea5a278a1e2d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1dbYLMHwXT-rzjkGIaeiRA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">图片来自<a class="ae jd" href="https://pixabay.com/illustrations/cubes-wood-tube-squares-2803223/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><div class=""/><div class=""><h2 id="c38b" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">设置您的环境</h2></div><p id="d05d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">简介</strong> | <a class="ae jd" href="https://medium.com/@remykarem/bbcb04aa6ecb" rel="noopener">三元运算符</a> | <a class="ae jd" href="https://remykarem.medium.com/hacking-the-python-syntax-alternate-lambda-syntax-c87c383dd1a3" rel="noopener">交替lambda语法</a> |函数中无返回关键字(即将推出)|列表理解++(即将推出)</p><p id="828b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">变更日志:<br/>2022年2月4日—更新免责声明</em></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="97b8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi lz translated">你是否曾经希望你的酷语法想法存在于你最喜欢的编程语言中？</p><p id="fca6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果人们真的😍这对你有好处。除了你要花大约一年甚至更长的时间来发布这个特性。</p><p id="b05a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是如果没有其他人发现它特别有用，那么这个想法就到此为止了。😞</p><p id="cebe" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不要只是等待，希望它被发布或者抛弃那个想法，让我们创造我们自己的现实🌏—通过修改源代码！</p><p id="c312" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这个<em class="lr">破解Python语法</em>系列中，我们将研究4种语法思想，并在CPython源代码中实现它们。我们将探讨4个想法:</p><ol class=""><li id="e64c" class="mi mj jg kx b ky kz lb lc le mk li ml lm mm lq mn mo mp mq bi translated">三元运算符<code class="fe mr ms mt mu b"><strong class="kx jh">score ≥ 50 ? "good" : "bad"</strong></code>，</li><li id="1114" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated">备选lambda语法<code class="fe mr ms mt mu b"><strong class="kx jh">|x| -&gt; x+1</strong></code>，</li><li id="d757" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated">函数<code class="fe mr ms mt mu b"><strong class="kx jh">def add(a,b): a+b</strong></code>中没有返回关键字，并且</li><li id="60dc" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated">列表理解++ <code class="fe mr ms mt mu b"><strong class="kx jh">[ch ~ ch&lt;-word ~ word&lt;-["hello","world"]]</strong></code>。</li></ol><h2 id="3bcf" class="na nb jg bd nc nd ne dn nf ng nh dp ni le nj nk nl li nm nn no lm np nq nr ns bi translated"><strong class="ak">目标</strong></h2><p id="b3a3" class="pw-post-body-paragraph kv kw jg kx b ky nt kh la lb nu kk ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">本系列的目的是分享我的这些想法的原型之旅，以便您也可以修补解析器，可能将它用于您自己的<a class="ae jd" href="https://en.wikipedia.org/wiki/Domain-specific_language" rel="noopener ugc nofollow" target="_blank"> DSL </a>，为代码库做出贡献，或者有希望被启发学习其他语言。</p><h2 id="5c9e" class="na nb jg bd nc nd ne dn nf ng nh dp ni le nj nk nl li nm nn no lm np nq nr ns bi translated"><strong class="ak">范围</strong></h2><ul class=""><li id="02b3" class="mi mj jg kx b ky nt lb nu le ny li nz lm oa lq ob mo mp mq bi translated">我们所指的Python是CPython实现，它是Python [ <a class="ae jd" href="#5d85" rel="noopener ugc nofollow"> 1 </a> ]的原始实现。</li><li id="6e3b" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">我们将处理解析器和一点AST。语法变化不需要我们处理CPython的内存管理。</li><li id="b106" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">我们要改变的文件是记号和语法文件。</li></ul><h2 id="f490" class="na nb jg bd nc nd ne dn nf ng nh dp ni le nj nk nl li nm nn no lm np nq nr ns bi translated"><strong class="ak">先决条件</strong></h2><p id="fa88" class="pw-post-body-paragraph kv kw jg kx b ky nt kh la lb nu kk ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">你只需要知道一些基本的Python。以下是其他一些不错但可选的东西:</p><ul class=""><li id="d346" class="mi mj jg kx b ky kz lb lc le mk li ml lm mm lq ob mo mp mq bi translated">源代码编译(解析、词法分析、AST等。),</li><li id="028e" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">regex(用于在代码库中搜索文本)，</li><li id="e02a" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">C或C++，</li><li id="a697" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">Makefile(用于构建Python解释器)，以及</li><li id="e6a8" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">熟悉至少一种其他编程语言。</li></ul><h2 id="1d25" class="na nb jg bd nc nd ne dn nf ng nh dp ni le nj nk nl li nm nn no lm np nq nr ns bi translated"><strong class="ak">免责声明</strong></h2><ul class=""><li id="c22d" class="mi mj jg kx b ky nt lb nu le ny li nz lm oa lq ob mo mp mq bi translated">如果您还是初学者，本系列可能不适合您，因为语法原型可能会让您感到困惑。</li><li id="de30" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">本系列并不意味着成为改变Python语法或理解源代码编译的权威指南。</li><li id="e72f" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">开发一种经过充分测试的语法不符合本系列的利益。</li><li id="1b98" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated"><strong class="kx jh">不要在生产中使用这些分叉的PYTHON发行版。</strong></li></ul><h2 id="e0af" class="na nb jg bd nc nd ne dn nf ng nh dp ni le nj nk nl li nm nn no lm np nq nr ns bi translated"><strong class="ak">样式</strong></h2><p id="1fdf" class="pw-post-body-paragraph kv kw jg kx b ky nt kh la lb nu kk ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">需要学习的东西很多，所以本文的风格是及时学习概念，这样我们就可以很快熟悉代码库。概念是带有以下表情符号的迷你部分:</p><ul class=""><li id="be9e" class="mi mj jg kx b ky kz lb lc le mk li ml lm mm lq ob mo mp mq bi translated"><em class="lr">📜</em> <strong class="kx jh"> </strong>源代码编译</li><li id="9012" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq ob mo mp mq bi translated">💡其他供参考的信息包括理解代码库是如何工作的，以及在旅途中学习一些C语言</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="76bb" class="oc nb jg bd nc od oe of nf og oh oi ni km oj kn nl kp ok kq no ks ol kt nr om bi translated">安装</h1><p id="6bcd" class="pw-post-body-paragraph kv kw jg kx b ky nt kh la lb nu kk ld le nv lg lh li nw lk ll lm nx lo lp lq ij bi translated">为了坚持到底，我推荐使用<a class="ae jd" href="https://code.visualstudio.com" rel="noopener ugc nofollow" target="_blank"> VS Code </a>作为你的IDE。有用的扩展包括一个C语法高亮器和<a class="ae jd" href="https://marketplace.visualstudio.com/items?itemName=lysnikolaou.pegen-peg" rel="noopener ugc nofollow" target="_blank">PEG语法高亮</a>。</p><p id="bfeb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有用的快捷键是Cmd+P用于文件搜索，Cmd+Shift+F用于全局文本搜索。和Cmd+F在当前文件视图中进行文本搜索。(Linux和Windows用户，用Ctrl代替Cmd。)</p><p id="36bb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个系列会用一个<a class="ae jd" href="https://github.com/python/cpython/tree/v3.11.0a2" rel="noopener ugc nofollow" target="_blank"> Python v3.11.0a2 </a>的叉子。</p><p id="e5fb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">按照以下步骤从源代码构建Python并运行Python可执行文件:</p><ol class=""><li id="a552" class="mi mj jg kx b ky kz lb lc le mk li ml lm mm lq mn mo mp mq bi translated"><code class="fe mr ms mt mu b">git clone <a class="ae jd" href="https://github.com/python/cpython.git" rel="noopener ugc nofollow" target="_blank">https://github.com/python/cpython.git</a></code></li><li id="4927" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated"><code class="fe mr ms mt mu b">cd cpython &amp;&amp; git checkout v3.11.0a2</code></li><li id="5535" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated"><code class="fe mr ms mt mu b">./configure</code></li><li id="3527" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated"><code class="fe mr ms mt mu b">make -j4</code></li><li id="3a4d" class="mi mj jg kx b ky mv lb mw le mx li my lm mz lq mn mo mp mq bi translated"><code class="fe mr ms mt mu b">./python.exe</code> ( <code class="fe mr ms mt mu b">./python</code>适用于非macOS用户)</li></ol></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="9047" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来:[ <a class="ae jd" href="https://medium.com/@remykarem/bbcb04aa6ecb" rel="noopener">第一部分—三元运算符</a></p></div></div>    
</body>
</html>