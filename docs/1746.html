<html>
<head>
<title>Istio Service Mesh: The Step by Step Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Istio服务网格:逐步指南</h1>
<blockquote>原文：<a href="https://itnext.io/istio-service-mesh-the-step-by-step-guide-adf6da18bb9a?source=collection_archive---------0-----------------------#2019-01-18">https://itnext.io/istio-service-mesh-the-step-by-step-guide-adf6da18bb9a?source=collection_archive---------0-----------------------#2019-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/99997caa5e8abafbcbf732c8a232a00c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnKi7KvgFeZyR8q3z2rcuQ.jpeg"/></div></div></figure><h1 id="1072" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是Istio服务网格？</h1><p id="d067" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Istio服务网格为一组服务提供了流量监控、访问控制、发现、安全性、弹性和其他有用的功能。它提供了所有这些功能，并且不需要对任何这些服务的代码进行任何更改。</p><p id="d930" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">为了实现这一点，Istio在每个服务旁边部署了一个Istio代理(称为Istio sidecar)。所有需要帮助的流量都被定向到代理，代理使用策略来决定如何、何时或是否将流量部署到服务。它还支持复杂的技术，如金丝雀部署、故障注入和断路器。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/acf26265d68b366da39294494303d1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N8w_Gbf7Be5WUxrH.png"/></div></div></figure><h1 id="9abf" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio如何使用容器和Kubernetes</h1><p id="6700" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">正如所建议的，Istio服务网格使用sidecar <a class="ae me" href="https://www.cuelogic.com/blog/scaling-up-with-micro-services-and-containers" rel="noopener ugc nofollow" target="_blank">容器实现</a>主要用于微服务所需的特性和功能。它于2017年开发并宣布，建立在Istio envoy框架基础上，自那时起，它开始涉足监控、跟踪、断路器、路由、故障注入、负载平衡、重试、超时、镜像、访问控制和速率限制程序等领域。</p><ul class=""><li id="d9dc" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">Istio的独特之处在于，所有这些功能都不需要修改代码。</li><li id="7e11" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">Istio在Istio Kubernetes pods的Linux容器中运行，使用Istio sidecar实现，并在需要时根据所需的配置注入和提取功能和信息。</li><li id="4a15" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">它还将运营方面从代码<a class="ae me" href="https://www.cuelogic.com/custom-software-development" rel="noopener ugc nofollow" target="_blank">开发</a>转移到运营的核心和中心。</li></ul><h1 id="6904" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">服务网格化基础</h1><p id="1216" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">服务网格背后的理论是，所有常见的网络相关任务都应该从<a class="ae me" href="https://www.cuelogic.com/outsource-software-development" rel="noopener ugc nofollow" target="_blank">应用</a>和底层系统中推断出来。</p><ul class=""><li id="fd86" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">因此，网格应该只是软件实体的网络，这些软件实体在需要时为不同的服务执行这样的任务。</li><li id="caa1" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">如果没有这样的设置，传统的结构要求用户要么将这些任务作为网络基础设施的一部分嵌入，要么对应用层进行大量的代码更改。</li></ul><p id="a960" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在微服务环境中，这两种选择似乎都不合适。应用覆盖方法是应用认知的，并且可以创建复杂的基于内容的路由。</p><p id="968f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然而，由于大量冗余代码降低了性能，这种做法适得其反。相反，使用L3或L4覆盖层既没有任何多个服务请求的概念，也没有任何多个服务请求的可见性。</p><p id="c56e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">因此，服务网格成为运行和管理微服务环境的一种很好的方式，因为它在L7级运行，但又与应用程序代码分离。</p><p id="ec4a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">它甚至可以通过额外的应用级洞察来实施L3/L4策略。</p><h1 id="7ff7" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio服务网状架构</h1><ul class=""><li id="ea28" class="mf mg iq ky b kz la ld le lh mt ll mu lp mv lt mk ml mm mn bi translated">Istio服务网格是一个有意设计的抽象，它同时具有控制平面和数据平面。</li><li id="1a0c" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">Istio是由IBM、Google和Lyft联合创建的服务网。sidecar模式由特使代理启用，并且基于容器。</li></ul><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/424bb0b79098d1419ed8dc01b82b1281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6hyAg7KlT8ige2QH.png"/></div></div></figure><p id="7b3d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">通过将Envoy中介服务器注入管理之间的系统方式，Istio提供了细化的活动管理控制，例如，堆栈调整和细粒度控制。</p><p id="e82d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这种定向横截面同样使您能够分离关于运动行为的大量测量，这些测量可用于授权安排选择，例如，管理员可以设计的细粒度控制和速率限制。那些等效的度量被额外地发送到检查框架。</p><h1 id="bc32" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio通过以下方式实现这一目标:</h1><ul class=""><li id="e0ee" class="mf mg iq ky b kz la ld le lh mt ll mu lp mv lt mk ml mm mn bi translated">控制平面，控制整个网络基础设施并加强策略和流量规则。</li><li id="1cce" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">一个通过Envoy权宜之计使用sidecars的数据平面，这是一个开源的edge代理。</li></ul><p id="5fe6" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Istio体系结构在一个高级的、安全的活动管理中实现了管理工作想要传达的目标。</p><ul class=""><li id="84df" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">信息层是一种高级中介的安排，它捕获有组织的运动，并将它们与系统层连接起来，以指导未来的活动。</li><li id="6a51" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">控制平面具有第7层理解能力，可以训练信息平面根据安排、安全姿态和连续遥测数据决定一些复杂的转向选择。</li></ul><p id="bfc2" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">行政工程给出的审议提供了很大的协助设计师，开发商和安全工程师。信息编辑平面以这样一种方式工作，它们是应用程序的隐藏系统。</p><p id="6d80" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">控制平面进一步远离任何编辑过的成分，这意味着信息平面可以以高性能运动拦截器为中心，并在没有任何复杂性的情况下转换角色。总之，任何管理工作都可以变得更加智能，并避免构建大型代码支持网关的问题。</p><p id="656c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">服务网格中的另一个关键思想是服务个性化。也就是说，每一届政府都被赋予了一个密码强健的角色。监督行政管理的实质性方面授权一个良好的，基于个性的安排，这在过去似乎是不可能的。</p><h1 id="e6d5" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio服务网格的关键功能和主要用例</h1><p id="47f2" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如今，服务网格工作空间正在大幅扩展。Istio管理工作区的部分关键功能包括:-</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/2fc80bf0981f03c5f5390afeb281941f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sbk8rCa9D5D9fBLh.jpg"/></div></div></figure><p id="890f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">库存和感知能力</p><ul class=""><li id="0bad" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">提供对正在运行的管理、谁在与谁对话以及管理条件的理解和感知。</li></ul><p id="b7c6" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">执行管理</p><ul class=""><li id="80c1" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">在这里，执行意味着反应时间、资产使用，以及应用程序执行和业务度量之间的关系。</li><li id="ab9c" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">通过行政管理工作，协会可以设定某些执行措施，以保证资产在行政管理中以理想的形式进行分配和利用，并满足这些特定的操作措施。</li></ul><p id="924b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">安全策略管理</p><ul class=""><li id="70b6" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">服务网格提供了根据个性来描述和监督策略的能力，例如，谁可以与谁交谈。</li><li id="6273" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">此外，您同样可以应用权威的方法来管理管理之间的关联。</li></ul><p id="56aa" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">运动管理</p><ul class=""><li id="83fa" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">有了一个运转良好的组织，利用服务网格控制管理机构之间的活动真的很简单。</li><li id="0764" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">例如，Istio发现了一种API安排，它使您能够设置细粒度的活动规则。此外，这还包括程序化的指导安排，当系统面临不利条件时，可以使管理部门要求更多的依赖。</li></ul><h1 id="f24e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio服务网格在哪里可以派上用场？</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/147a1db440a171425f3c4c0d330cfa1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TqtI0ugMrqZpopd5.png"/></div></div></figure><p id="248f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">发现和识别服务</strong></p><ul class=""><li id="a42f" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">组织通常不知道哪些服务正在其基础架构中运行，这对于微服务主导的环境来说更糟。Istio service mesh提供服务级别可见性和遥测，帮助任何组织更新服务清单和依赖性分析。</li></ul><p id="d74e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">运行可靠性</strong></p><ul class=""><li id="6bcf" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">遥测<a class="ae me" href="https://www.cuelogic.com/big-data-solution" rel="noopener ugc nofollow" target="_blank">数据服务</a>告诉你服务的表现如何，比如响应服务请求所用的时间、使用的资源以及使用的频率。</li><li id="aab5" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">这有助于开发人员发现问题，并在它们对更广泛的应用程序环境造成任何影响之前纠正它们。</li></ul><p id="d30e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">结构化流量治理</strong></p><ul class=""><li id="0993" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">在任何<a class="ae me" href="https://www.cuelogic.com/" rel="noopener ugc nofollow" target="_blank">组织</a>考虑靠边站或限制特定内容(如URL或子URL)的情况下，Istio服务网格允许对任何范围的流量管理系统进行此类安排。</li><li id="72e7" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">与Istio一样，这可以通过简单地使用Istio的sidecar功能来完成，而不需要重新处理应用程序。这包括特定网格内的服务以及进出网格的入站和出站流量。</li></ul><p id="0f38" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">更安全的服务对服务通信</strong></p><ul class=""><li id="8bbe" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">由于Istio服务网格支持安全的通用服务身份系统，公司可以使用相互集成的TLS进行服务对服务的通信。</li><li id="27cb" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">这也允许用户使用TLS或JSON Web令牌(JWS)来添加服务级别的认证(T2)过程。</li></ul><p id="7246" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">基于信任的访问控制系统</strong></p><ul class=""><li id="1365" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">Istio之类的服务网格允许实时托管以及对数据使用网络遥测，而不是基于常见的静态属性(如用户身份、IP地址或访问控制列表)来配置对大型机系统的访问。</li><li id="bd2a" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">例如，用户可以起草并执行一个安全策略，规定每个服务请求都可以根据请求的目的进行访问，或者甚至可以要求一个<a class="ae me" href="https://en.wikipedia.org/wiki/Certificate_signing_request" rel="noopener ugc nofollow" target="_blank">证书签名请求(CSR) </a>，如果请求者通过一系列确认性检查，该请求将成为有效的id。</li></ul><p id="6022" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">非常时期的措施</strong></p><ul class=""><li id="755e" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">服务网格配备有执行故障注入过程和测试所有服务弹性的特定功能。Istio服务网格可以在服务响应中注入特定的延迟，以查看应用程序如何作为一个整体组件执行和响应请求者。</li><li id="c2ef" class="mf mg iq ky b kz mo ld mp lh mq ll mr lp ms lt mk ml mm mn bi translated">注入延迟也是现代混沌工程技术的一种屡试不爽的方法，用于提高系统的寿命和对故障情况的恢复能力。</li></ul><h1 id="eba2" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio入门</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/79572c5950c13d09993914616613ce1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_69qUePlYonYsLhy.png"/></div></div></figure><ul class=""><li id="7290" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">在Minikube平台上安装Istio</li></ul><p id="75bc" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在Istio Kubernetes上本地测试Istio的最佳方式是通过Istio Minikube。应使用带有<a class="ae me" href="https://www.cuelogic.com/blog/kubernetes-vs-docker-swarm" rel="noopener ugc nofollow" target="_blank"> Kubernetes服务网格和Docker </a>的微服务。要在Minikube上安装Istio，您必须在启动时启用以下插件。</p><p id="e83e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Minikube开始设置—extra-config-device-controller-lokalcube . setup . rg</p><p id="a5cd" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Minikube启动设置-extra-config-cluster sign。</p><ul class=""><li id="209b" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">运行Minikube后，在Minikube的VM上启用Docker。这将帮助你在docker平台上编译和运行命令。通过指定令牌、分隔符和minikube docker为服务网格发送调用函数。</li></ul><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="b903" class="nf jz iq nb b gy ng nh l ni nj">@FOR /f “tokens=* [The star sign reflects that all tokens will be loaded at the run time]</span><span id="c4f2" class="nf jz iq nb b gy nk nh l ni nj">delimiter=^K” %[CallName] IN ([DockerSource]) DO @call %[CallName] [At the callname, the new window will be opened with delimiter K and all the tokens].</span></pre><ul class=""><li id="3a77" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">接下来，通过Minikube安装Istio及其所有核心组件，输入YAML代码后进入插件和附加命令。</li></ul><p id="0696" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe nl nm nn nb b">kubectl apply -f install/kubernetes/istio.yaml</code></p><h1 id="1769" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Istio的核心组件</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/f57fb6cdf99e16d201c87dd4693890c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GmmCYwXuV7QmwJ8y.png"/></div></div></figure><p id="6003" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">使者</p><ul class=""><li id="d978" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">Envoy是一个开源扩展和服务代理提供商，专为云扩展网格而构建。Istio mesh通过Envoy创建了一个可扩展的代理系统。</li></ul><p id="e66e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">搅拌器</p><ul class=""><li id="8fb7" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">混合器是服务网格的一部分，有助于实施安全协议、允许访问控制和实现使用策略，并且独立于网格工作。</li></ul><p id="4bf9" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">飞行员</p><ul class=""><li id="7c03" class="mf mg iq ky b kz lu ld lv lh mh ll mi lp mj lt mk ml mm mn bi translated">Pilot为Istio Envoy边车提供所有服务，并通过高级路由实现更加一致的交通管理系统。</li></ul><p id="bf44" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在检查istio.yaml部署中的配置文件时，您会发现一些可以使用kubectl命令在minikube command central上运行命令来激活的pod和服务。</p><h1 id="2bd4" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">构建示例应用程序</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/f8eea88288d7de3fc3de45958520d43e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*D9e6BM78JIG179r3.png"/></div></div></figure><p id="8978" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在使用Istio配置任何流量规则之前，必须创建示例应用程序以便相互通信。有两种服务可用:呼叫者服务和呼叫我服务。</p><p id="3f86" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">它们都公开了一个端点ping，列出了应用程序的名称和版本。下面是端点GET /callme/ping的实现。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="b2a7" class="nf jz iq nb b gy ng nh l ni nj">@RestController</span><span id="e176" class="nf jz iq nb b gy nk nh l ni nj">@RequestMapping(“/callme”)</span><span id="e60b" class="nf jz iq nb b gy nk nh l ni nj">public class CallmeController {</span><span id="5b28" class="nf jz iq nb b gy nk nh l ni nj">private static final Logger LOGGER = LoggerFactory.getLogger(CallmeController.class);</span><span id="4814" class="nf jz iq nb b gy nk nh l ni nj">@Autowired</span><span id="75a5" class="nf jz iq nb b gy nk nh l ni nj">BuildProperties buildProperties;</span><span id="b7c8" class="nf jz iq nb b gy nk nh l ni nj">@GetMapping(“/ping”)</span><span id="97f3" class="nf jz iq nb b gy nk nh l ni nj">public String ping() {</span><span id="3593" class="nf jz iq nb b gy nk nh l ni nj">LOGGER.info(“Ping: name={}, version={}”, buildProperties.getName(), buildProperties.getVersion());</span><span id="8e39" class="nf jz iq nb b gy nk nh l ni nj">return buildProperties.getName() + “:” + buildProperties.getVersion();</span><span id="a49d" class="nf jz iq nb b gy nk nh l ni nj">}</span><span id="2ea4" class="nf jz iq nb b gy nk nh l ni nj">}</span><span id="d063" class="nf jz iq nb b gy nk nh l ni nj">Below is the code that calls the GET /callme/ping endpoint using Spring RestTemplate. This serviced output will be exposed inside the Minikube node under port 8091.</span><span id="f577" class="nf jz iq nb b gy nk nh l ni nj">@RestController</span><span id="0e33" class="nf jz iq nb b gy nk nh l ni nj">@RequestMapping(“/caller”)</span><span id="6ee6" class="nf jz iq nb b gy nk nh l ni nj">public class CallerController {</span><span id="a948" class="nf jz iq nb b gy nk nh l ni nj">private static final Logger LOGGER = LoggerFactory.getLogger(CallerController.class);</span><span id="d86f" class="nf jz iq nb b gy nk nh l ni nj">@Autowired</span><span id="1c75" class="nf jz iq nb b gy nk nh l ni nj">BuildProperties buildProperties;</span><span id="7eaa" class="nf jz iq nb b gy nk nh l ni nj">@Autowired</span><span id="637d" class="nf jz iq nb b gy nk nh l ni nj">RestTemplate restTemplate;</span><span id="30f7" class="nf jz iq nb b gy nk nh l ni nj">@GetMapping(“/ping”)</span><span id="42e0" class="nf jz iq nb b gy nk nh l ni nj">public String ping() {</span><span id="34e6" class="nf jz iq nb b gy nk nh l ni nj">LOGGER.info(“Ping: name={}, version={}”, buildProperties.getName(), buildProperties.getVersion());</span><span id="5637" class="nf jz iq nb b gy nk nh l ni nj">String response = restTemplate.getForObject(“http://callme-service:8091/callme/ping”, String.class);</span><span id="3fca" class="nf jz iq nb b gy nk nh l ni nj">LOGGER.info(“Calling: response={}”, response);</span><span id="5c38" class="nf jz iq nb b gy nk nh l ni nj">return buildProperties.getName() + “:” + buildProperties.getVersion() + “. Calling… ” + response;</span><span id="1e46" class="nf jz iq nb b gy nk nh l ni nj">}</span><span id="281e" class="nf jz iq nb b gy nk nh l ni nj">}</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="4d27" class="jy jz iq bd ka kb nx kd ke kf ny kh ki kj nz kl km kn oa kp kq kr ob kt ku kv bi translated">处理示例应用程序</h1><p id="144f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">所有示例应用程序都必须在Docker容器上启动。下面是Dockerfile，它负责使用关键的caller-service应用程序构建图像。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="947e" class="nf jz iq nb b gy ng nh l ni nj"><em class="oc">FROM openjdk:8-jre-alpine</em></span><span id="3597" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">ENV APP_FILE caller-service-1.0.0-SNAPSHOT.jar</em></span><span id="8c16" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">ENV APP_HOME /usr/app</em></span><span id="8d1f" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">EXPOSE 8090</em></span><span id="5dd2" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">COPY target/$APP_FILE $APP_HOME/</em></span><span id="9d64" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">WORKDIR $APP_HOME</em></span><span id="182a" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">ENTRYPOINT [“sh”, “-c”]</em></span><span id="6bbd" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">CMD [“exec java -jar $APP_FILE”]</em></span><span id="6ca8" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">The callme-service has a similar Docker file. Now let’s move on to building Docker images.</em></span><span id="b989" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">docker build -t piomin/callme-service:1.0 .</em></span><span id="5bf4" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">docker build -t piomin/caller-service:1.0.</em></span><span id="ec79" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">docker build -t piomin/callme-service:2.0.</em></span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="1460" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在Minikube上部署示例应用程序</p><p id="6549" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">首先部署两个版本的call me-service:1.0和2.0。应用程序caller-service只是调用callme-service。</p><p id="f8c4" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">您可以使用Istio routerule以不同的比例在两个版本的callme-service之间路由流量。还有，Minikube不支持Ingress，最好用Kubernetes服务Mesh。如果目标是将其扩展到Minikube服务之外，则将类型设置为NodePort。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="769c" class="nf jz iq nb b gy ng nh l ni nj"><em class="oc">apiVersion: v1</em></span><span id="d9e8" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">kind: Service</em></span><span id="0bda" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">metadata:</em></span><span id="6a6f" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">name: callme-service</em></span><span id="5f6a" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">labels:</em></span><span id="21f6" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">app: callme-service</em></span><span id="8ba1" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">spec:</em></span><span id="c6ec" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">type: NodePort</em></span><span id="5e76" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">ports:</em></span><span id="81b8" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">– port: 8091</em></span><span id="d9c8" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">name: http</em></span><span id="b82a" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">selector:</em></span><span id="2072" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">app: callme-service</em></span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><pre class="na nb nc nd aw ne bi"><span id="c2ce" class="nf jz iq nb b gy od oe of og oh nh l ni nj">apiVersion: extensions/v1beta1</span><span id="8fa8" class="nf jz iq nb b gy nk nh l ni nj">kind: Deployment</span><span id="b514" class="nf jz iq nb b gy nk nh l ni nj">metadata:</span><span id="974a" class="nf jz iq nb b gy nk nh l ni nj">name: callme-service</span><span id="9c17" class="nf jz iq nb b gy nk nh l ni nj">spec:</span><span id="be5c" class="nf jz iq nb b gy nk nh l ni nj">replicas: 1</span><span id="1b64" class="nf jz iq nb b gy nk nh l ni nj">template:</span><span id="3094" class="nf jz iq nb b gy nk nh l ni nj">metadata:</span><span id="fe7d" class="nf jz iq nb b gy nk nh l ni nj">labels:</span><span id="ce27" class="nf jz iq nb b gy nk nh l ni nj">app: callme-service</span><span id="eff5" class="nf jz iq nb b gy nk nh l ni nj">version: v1</span><span id="ada8" class="nf jz iq nb b gy nk nh l ni nj">spec:</span><span id="cc42" class="nf jz iq nb b gy nk nh l ni nj">containers:</span><span id="7029" class="nf jz iq nb b gy nk nh l ni nj">– name: callme-service</span><span id="d137" class="nf jz iq nb b gy nk nh l ni nj">image: piomin/callme-service:1.0</span><span id="3b69" class="nf jz iq nb b gy nk nh l ni nj">imagePullPolicy: IfNotPresent</span><span id="5101" class="nf jz iq nb b gy nk nh l ni nj">ports:</span><span id="676c" class="nf jz iq nb b gy nk nh l ni nj">– containerPort: 8091</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="817a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">接下来，是时候实现一些Istio属性了。下面的命令打印带有任何Istio配置的部署定义的新版本。</p><p id="e10d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe nl nm nn nb b">istioctl kube-inject -f deployment.yaml</code></p><p id="2a46" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">要将此配置应用于Kubernetes，请键入以下命令。</p><p id="816e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe nl nm nn nb b">kubectl apply -f deployment-with-istio.yaml</code></p><p id="88dd" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">所有YAML配置文件一起提交，可以在每个应用程序模块的根目录中找到。在成功部署所有的<a class="ae me" href="https://www.cuelogic.com/blog/software-component-reusability" rel="noopener ugc nofollow" target="_blank">必需组件</a>后，您应该在Minikube的仪表板中看到以下元素。</p><p id="5201" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">设置Istio路由规则</p><p id="0c54" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Istio使用一种特定于领域的语言(DSL ),它允许您配置有效的规则来控制请求在服务网格中的路由方式。</p><p id="84d0" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">以下代码在不同版本之间以20:80的比例分割流量，同时在10%的请求中添加5秒钟的延迟，并为10%的请求返回HTTP 500错误代码。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="abf1" class="nf jz iq nb b gy ng nh l ni nj"><em class="oc">apiVersion: config.istio.io/v1alpha2</em></span><span id="9257" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">kind: RouteRule</em></span><span id="cc92" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">metadata:</em></span><span id="8642" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">name: callme-service</em></span><span id="1263" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">spec:</em></span><span id="6a03" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">destination:</em></span><span id="efd7" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">name: callme-service</em></span><span id="359e" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">route:</em></span><span id="b9b3" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">– labels:</em></span><span id="b3bc" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">version: v1</em></span><span id="1b19" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">weight: 20</em></span><span id="12c3" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">– labels:</em></span><span id="2fb4" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">version: v2</em></span><span id="4e5d" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">weight: 80</em></span><span id="5572" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">httpFault:</em></span><span id="c484" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">delay:</em></span><span id="7948" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">per cent: 10</em></span><span id="efb3" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">fixedDelay: 5s</em></span><span id="6df0" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">abort:</em></span><span id="7dc3" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">per cent: 10</em></span><span id="d73a" class="nf jz iq nb b gy nk nh l ni nj"><em class="oc">httpStatus: 500</em></span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="5dbe" class="jy jz iq bd ka kb nx kd ke kf ny kh ki kj nz kl km kn oa kp kq kr ob kt ku kv bi translated">应用进一步的规则</h1><p id="fec0" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">使用以下命令向Kubernetes应用新的路由规则。</p><p id="d84f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe nl nm nn nb b">kubectl apply -f routerule.yaml</code></p><p id="b0b9" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">程序员现在可以通过输入命令istioctl get routerule轻松地验证该规则。</p><p id="dd16" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果出现需要Istio入口控制器的情况，应用程序的Kubernetes入口资源可以用kubernetes.io/ingress.class:“Istio”进行注释。这里有一个这样的例子，使用图书馆/商店中书籍的案例研究</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="82e5" class="nf jz iq nb b gy ng nh l ni nj">cat \&lt;\&lt;EOF “` kubectl create -f –</span><span id="80e5" class="nf jz iq nb b gy nk nh l ni nj">apiVersion: extensions/v1beta1</span><span id="5db2" class="nf jz iq nb b gy nk nh l ni nj">kind: Ingress</span><span id="2b46" class="nf jz iq nb b gy nk nh l ni nj">metadata:</span><span id="8dc4" class="nf jz iq nb b gy nk nh l ni nj">name: bookinfo</span><span id="5da1" class="nf jz iq nb b gy nk nh l ni nj">annotations:</span><span id="4131" class="nf jz iq nb b gy nk nh l ni nj">kubernetes.io/ingress.class: “istio.”</span><span id="3a65" class="nf jz iq nb b gy nk nh l ni nj">spec:</span><span id="2a5a" class="nf jz iq nb b gy nk nh l ni nj">rules:</span><span id="712a" class="nf jz iq nb b gy nk nh l ni nj">– http:</span><span id="ca6e" class="nf jz iq nb b gy nk nh l ni nj">paths:</span><span id="a7a2" class="nf jz iq nb b gy nk nh l ni nj">– path: /productpage</span><span id="379b" class="nf jz iq nb b gy nk nh l ni nj">backend:</span><span id="6f48" class="nf jz iq nb b gy nk nh l ni nj">serviceName: productpage</span><span id="bdc0" class="nf jz iq nb b gy nk nh l ni nj">servicePort: 9080</span><span id="1db3" class="nf jz iq nb b gy nk nh l ni nj">– path: /login</span><span id="89b9" class="nf jz iq nb b gy nk nh l ni nj">backend:</span><span id="6d40" class="nf jz iq nb b gy nk nh l ni nj">serviceName: productpage</span><span id="55a4" class="nf jz iq nb b gy nk nh l ni nj">servicePort: 9080</span><span id="2d3e" class="nf jz iq nb b gy nk nh l ni nj">– path: /logout</span><span id="a566" class="nf jz iq nb b gy nk nh l ni nj">backend:</span><span id="0df7" class="nf jz iq nb b gy nk nh l ni nj">serviceName: productpage</span><span id="50f3" class="nf jz iq nb b gy nk nh l ni nj">servicePort: 9080</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="45bf" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">可以使用以下代码访问新应用程序:-</p><pre class="ma mb mc md gt na nb nc nd aw ne bi"><span id="a866" class="nf jz iq nb b gy ng nh l ni nj">export BOOKINFO\_URL=$(kubectl get po -l istio=ingress -o jsonpath={.items[0].status.hostIP}):$(kubectl get svc istio-ingress -o jsonpath={.spec.ports[0].nodePort})</span></pre><h1 id="33c1" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">测试解决方案</h1><p id="8c9c" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在进入<a class="ae me" href="https://www.cuelogic.com/blog/whats-next-in-testing" rel="noopener ugc nofollow" target="_blank">测试阶段</a>之前，在Minikube上部署Zipkin是很有用的。Istio提供了部署定义文件zipkin.yaml，该文件可以在目录$ { ISTIO _ HOME }/install/kubernetes/addons中找到。</p><p id="bfe5" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><code class="fe nl nm nn nb b">kubectl apply -f zipkin.yaml</code></p><p id="d95c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">应用程序调用服务提供的API可以在源代码中提到的端口下查看。</p><p id="17d1" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果您确实想测试服务，请打开web浏览器，调用用地址和调用者ping生成的URL。将打印服务的名称和版本，以及由caller-service调用的callme-service的名称和版本。</p><h1 id="0fb2" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结束语</h1><p id="1d93" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Istio Service Mesh清楚地表明，随着技术的进步，行业不会变老，只会一年比一年好。</p><p id="0d8f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">尽管是软件家族中相对年轻的成员，Istio Service Mesh已经提供了非常棒的新应用程序，正在改变公司处理流程的方式。在Envoy backframe和Google的进一步帮助下，新的添加和包成为其庞大库的一部分，很明显，Istio是微服务的下一个行业标准。</p><p id="c476" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">来源:</strong><a class="ae me" href="https://www.cuelogic.com" rel="noopener ugc nofollow" target="_blank"/><a class="ae me" href="https://www.cuelogic.com/blog/istio-service-mesh" rel="noopener ugc nofollow" target="_blank">博客</a></p></div></div>    
</body>
</html>