<html>
<head>
<title>Using time to our advantage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">充分利用时间</h1>
<blockquote>原文：<a href="https://itnext.io/using-time-to-our-advantage-6d7545887379?source=collection_archive---------5-----------------------#2021-12-15">https://itnext.io/using-time-to-our-advantage-6d7545887379?source=collection_archive---------5-----------------------#2021-12-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="875e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的记忆中，时区总是被视为一个需要解决的难题。随着外部系统的反应和移动应用程序的工作方式不同于传统的Web应用程序，困惑增加了，解决方法变得越来越有创造性。尽管如此，毫不费力地实现您的用例是非常简单和干净的。<br/>本文主要关注OutSystems平台的开发。如果你没用过，你应该用一下。</p><h1 id="e0dc" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">介绍</h1><p id="f91c" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">对于传统的Web应用程序，时区总是在服务器端处理，对于应该显示在客户端时区上的日期时间，这种转换需要显式完成，这可以在forge组件如<a class="ae lp" href="https://www.outsystems.com/forge/component-overview/500/time-zone" rel="noopener ugc nofollow" target="_blank">时区</a>的帮助下完成。</p><p id="e025" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先是移动应用，然后是反应式应用，随着日期时间自动转换为客户端时区，范式发生了变化。这造成了一些混乱，并对如何呈现存储在数据库中的静态时间提出了挑战，而不管客户端的时区。例如，考虑一家餐馆的营业时间，无论用户在哪里，都应该以餐馆的当地时间显示。</p><p id="b0c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们可以将我们的用例一分为二:相对时间和绝对时间。</p><h1 id="54a9" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak">相对时间</strong></h1><p id="aceb" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">时间应该根据用户当时所处的时区显示在客户端设备上。例如，当一条推文一分钟前发布时，它是一分钟前在新西兰或纽约发布的。</p><p id="5ffb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在移动和反应式应用程序中，这是<em class="kl">日期时间</em>属性的默认行为。为了实现这个用例，您应该将时间保存在数据库中作为<em class="kl">日期时间</em>。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/6885af2e8c82bfd6b9d1bb9769e5e797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*knHoBr3V39IF-kdvce6gmQ.png"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">将属性保存为日期时间会将时间自动转换为用户的时区</figcaption></figure><h1 id="bba7" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak">绝对时间</strong></h1><p id="839f" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">无论用户处于哪个时区，时间都应该显示相同。绝对时间的一个很好的例子是为你的下一次旅行寻找一家酒店。如果登机时间是当地时间15点，不管你现在在哪个时区，你都会看到15点。<br/>为了实现这个用例，将时间保存在数据类型为<em class="kl"> Time </em>的属性中。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/dea0beb3670f28c6d6d721d29829b82b.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*gEuErLyHRgfAHCGEgj1fdw.png"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">将属性保存为时间将使时间按原样显示，而不考虑用户的时区</figcaption></figure><h1 id="ecc2" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">例子</h1><p id="3b8e" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">作为展示这两种场景的一个小例子，我们创建了一个具有两个属性的表:一个具有类型<em class="kl"> DateTime </em>，另一个具有类型<em class="kl"> Time </em>。我们在数据库中用17:00:00(GMT时区)填充了它们。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi md"><img src="../Images/f26055c36f0fff294570ddf8d19f7419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVALPuDB3E0qmtxXqipzrg.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">具有日期时间<em class="mi">和时间值</em>的表示例，两者都是数据库中的17:00:00时间</figcaption></figure><p id="0fb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在一个简单的屏幕在浏览器上显示GMT + 1的时间。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/2305b2e7cc80dd885c824884ef8a9456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*T8qko7H1dXQvlUIDt6H3ew.png"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">该示例显示了如何将日期时间调整为客户端的时区(GMT + 1)，这与显示为17:00的时间不同，与时区无关。</figcaption></figure><p id="f934" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们在示例中看到的，<em class="kl"> DateTime </em>属性作为<em class="kl">相对时间，</em>自动调整到浏览器时区GMT + 1，而<em class="kl"> Time </em>属性作为<em class="kl">绝对时间</em>，显示与数据库中相同的值，不进行任何转换。</p><h1 id="9d5e" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">结论</h1><p id="1269" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">当处理时间值时，我们可能希望它相对于客户端时区或独立于时区。在OutSystems Mobile / Reactive应用程序中实现这两种场景的最简单方法是将其相应地保存在数据库中:第一个场景保存为<em class="kl"> DateTime </em>，第二个场景保存为<em class="kl"> Time </em>。</p></div></div>    
</body>
</html>