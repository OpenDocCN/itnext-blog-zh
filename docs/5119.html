<html>
<head>
<title>Amazon EKS Distro (EKS-D): The Kubernetes Distribution Used by Amazon EKS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">亚马逊EKS发行版(EKS-D):亚马逊EKS使用的Kubernetes发行版</h1>
<blockquote>原文：<a href="https://itnext.io/amazon-eks-distro-eks-d-the-kubernetes-distribution-used-by-amazon-eks-fa23b54025fb?source=collection_archive---------0-----------------------#2020-12-16">https://itnext.io/amazon-eks-distro-eks-d-the-kubernetes-distribution-used-by-amazon-eks-fa23b54025fb?source=collection_archive---------0-----------------------#2020-12-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/54bf1c9395477ea084363b0d0be89a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*60OI2RlF6taWNcT9wZLsgQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kubernetes分销为全球弹性Kubernetes服务(EKS)提供支持</figcaption></figure><div class=""/><p id="3a61" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">亚马逊在re:Invent 2020虚拟活动上发布了与容器服务相关的战略公告，公告包括EKS-A (EKS Anywhere)、EKS-C (EKS控制台)、ECS-A (ECS Anywhere)和EKS-D (EKS Distro)。虽然EKS-A、EKS-C、ECS-A预计将于2021年上市，但AWS开源了EKS-D-Kubernetes发行版，为其弹性Kubernetes服务(EKS)提供支持。</p><p id="48c6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Kubernetes发行版是具有选定配置和选定插件集的Kubernetes。有多个Kubernetes发行版，如Rancher Kubernetes、VMware Tanzu Kubernetes Grid、Canonical的Charmed Kubernetes、Red Hat OpenShift等。上游可用。Kubernetes在默认情况下并不安全，其本身也不安全，一个注重安全的Kubernetes发行版将为Kubernetes配置限制性的安全策略，这些策略对于生产环境来说是至关重要的。</p><p id="c4a5" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS发行版(EKS-D)结合了开源(上游)Kubernetes组件— Kubernetes控制平面组件(如kube-controller-manager、etcd和CoreDNS)、Kubernetes工作节点组件(kubelet、Kubernetes CSI和CNI)、命令行客户端(kubectl和etcdctl)、安全补丁和第三方工具，包括集群创建所需的配置数据库、网络和存储组件。它还将包括亚马逊EKS使用的所有上游补丁，包括亚马逊对社区做出的修复。此外，它还将包括AWS认为对操作稳定性和安全修复非常重要的补丁。</p><p id="d390" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通过EKS-D，AWS建立了一个通向其托管的Kubernetes平台的开源桥梁和一个推动其云平台采用的媒介。通过EKS-D，用户可以依赖部署在亚马逊EKS和其他云平台(公共/私有)上的相同版本的Kubernetes及其依赖项。</p><p id="fa4a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS-D通过使用与亚马逊EKS全球部署的Kubernetes及其依赖项相同的经验证版本和配置，减少了在本地和基于云的环境中使用不同的Kubernetes发行版之间的摩擦。由于它是免费的，客户更有可能在考虑其他Kubernetes发行版之前评估它，并使AWS能够有效地与VMware、Red Hat、Rancher等独立软件供应商竞争。利用Amazon EC2来运行他们的托管Kubernetes产品。</p><h1 id="9c9e" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">EKS队对EKS队</h1><p id="23da" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">EKS —在亚马逊EKS的亚马逊EC2上设置托管控制平面—控制平面在由AWS管理的帐户中运行，Kubernetes API通过与您的集群关联的亚马逊EKS端点公开。每个亚马逊EKS集群控制平面都是单租户和唯一的，运行在自己的一组亚马逊EC2实例上。用户可以使用受管节点组选择自我管理的数据平面或AWS管理的数据平面。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi md"><img src="../Images/243a044fc16e0be1593a07964fc900ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j050_Xfw4u5OwjcC"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS集群</figcaption></figure><p id="aaea" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">亚马逊EKS节点在用户AWS帐户中运行，并通过API服务器端点和为集群创建的证书文件连接到集群的控制平面。集群创建(引导)是无缝的，由AWS CloudFormation堆栈创建的多个实体组成。用户可以选择任何受支持的版本来创建集群。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mi"><img src="../Images/a4a7b643b25c8aa8d4378170bae0fceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vr2xroeROUTVeja4"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS集群创建</figcaption></figure><p id="ab00" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户只能访问工作负载组件、部署在节点上的守护设备，而不能访问所有控制平面组件。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/0462356eb62bc5d9427ca06a9672a8cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ev-6xLVoZEOa-I59"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS管理的控制平面</figcaption></figure><p id="cb75" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS-D —所有组件都由客户管理。可以使用任何受支持的安装方法来完成群集的引导。许多合作伙伴已经在提供安装方法以及与EKS发行版的集成。生命周期管理和其他方面(如供应节点、HA控制平面、故障转移等)所需的工具。应由用户小心使用。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ml"><img src="../Images/2dd52c58ece8b53a903950e9a020a67e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OvRiB1Z2vC-9QFVn"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS D</figcaption></figure><p id="b692" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS-D可以被希望标准化和使用完全相同的Kubernetes发行版的组织使用，就像他们在非AWS环境中使用亚马逊EKS一样。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mm"><img src="../Images/cb5d2c49b8c253050085a2137cd5cd0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v-WCAFuWk7EPUj5G"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS对EKS</figcaption></figure><p id="602e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以访问所有组件(控制平面和其他工作负载)，这使用户能够控制核心控制平面组件。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/184b1f42fc9ef6e5606e9198c92efcd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nh5nIgUpzOnDmpP3"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS D</figcaption></figure><h1 id="bab5" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">发布渠道和发布</h1><p id="ac37" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">每个亚马逊EKS发行版都遵循<a class="ae mk" href="https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html#kubernetes-release-calendar" rel="noopener ugc nofollow" target="_blank"> EKS流程</a>(在任何给定时间支持至少四个生产就绪的Kubernetes版本)，验证新Kubernetes版本的兼容性。亚马逊EKS发行版的源代码、开源工具、二进制文件和容器映像以及配置都是通过公共Git和S3存储位置为可复制的构建提供的。</p><p id="8ce8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS发行版发布Kubernetes版本的速度与EKS相同，更新在发布渠道中作为发布发布。一个发布通道跟踪次要版本(<em class="mn"> v &lt;主要版本&gt;)。&lt;小调&gt;。点&lt;&gt;</em>)，并且当EKS停止支持Kubernetes的特定次要版本时，频道将被停用。</p><p id="adc6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">新版本和发布渠道将在发布时通过SNS主题宣布。发行版和发行渠道的结构是Kubernetes定制资源定义(CRD ),模式可以在<a class="ae mk" href="https://github.com/aws/eks-distro-build-tooling/tree/main/release" rel="noopener ugc nofollow" target="_blank">eks-distro-build-tooling</a>GitHub存储库中找到。</p><p id="11a0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">发布渠道和发布-自定义资源定义(CRD)</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/58106cbbeeed601f130ac57e417b7bce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GKQxPvMrYQ8osT3y"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS-D-发布和发布渠道CRD的</figcaption></figure><p id="f5ce" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用snsTopicARN (Amazon资源名称)发布通道规范</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/407cd4e1044eb162172af9eb22e925aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lxEiV8-J3NEg19M6"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">发布频道CRD-EKS-D</figcaption></figure><p id="ecf4" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS发行版的版本与各个组件(CNI插件、核心域名等)的版本同步。)由Amazon EKS使用或推荐与Kubernetes v1.18.9一起使用。发布清单中提供了组成发布的所有组件和资产的列表，包括URIs到所有压缩归档文件、二进制文件和容器映像。</p><p id="12c0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">包含单个组件和相应映像版本列表的发布规范:</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/597741fb774caff983a26edd7534f260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EaD1rLShE8-PGbPz"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">发布CRD-EKS-D</figcaption></figure><p id="ce74" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些组件的所有容器映像都基于Amazon Linux 2，用户可以在用于amd64和arm64架构的ECR公共注册表上获得，或者用户可以使用提供的工具从头开始构建映像。当有更新的组件版本时，将创建新的版本。</p><p id="63f8" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS发行版是使用Kubernetes CI/CD系统<a class="ae mk" href="https://prow.eks.amazonaws.com/" rel="noopener ugc nofollow" target="_blank"> Prow </a>构建的。EKS操作一个Prow装置，它管理所有的建造操作。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/edb8696322e59dc148f60f6d4587b857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qk96E5OPJvOz7jIR"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS号船头</figcaption></figure><h1 id="c17a" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">容器图像</h1><p id="b30a" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">用户可以使用<a class="ae mk" href="https://gallery.ecr.aws/?searchTerm=eks-distro&amp;verified=verified" rel="noopener ugc nofollow" target="_blank">亚马逊的公共ECR库</a>来拉具体发布的图片。该存储库包括所有核心控制平面组件和其他附加组件。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/ddd7aa546a3619e36938db86005d504a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u_XP2g-52k9Z780R"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS——图片来自ECR Public</figcaption></figure><p id="3751" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有图像都标有组件个人版本和Kubernetes发布版本，如下所示:</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/66f2b80faa1cee81354c77a865418255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L96iyh9TUnxxxe0E"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS——图片来自ECR Public</figcaption></figure><p id="bec0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用户可以使用<a class="ae mk" href="https://github.com/aws/eks-distro-build-tooling" rel="noopener ugc nofollow" target="_blank"> EKS发行版构建工具库</a> (amazonlinux:2)中提供的基础映像从头构建所有映像，使用<a class="ae mk" href="https://github.com/aws/eks-distro" rel="noopener ugc nofollow" target="_blank"> EKS发行版</a>库构建所有容器映像。make files的默认目标使用buildkit来构建容器。替代方法是用Docker构建和推送容器。</p><p id="62f3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">可以使用工具repo创建最新的Amazon Linux 2基本映像，并将其推送到ECR。每当基础映像中包含的rpm有任何安全更新时，都会更新此基础。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/53ab27f0611f2aca852506dfcd50a7c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*71MnU3CMBLzViUWe"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS-D-用于构建容器图像的基本图像</figcaption></figure><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/f130cc0b28d015b969dcd77211211eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D69jPClPrGXmfFJU"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS-D-用于构建容器图像的基本图像</figcaption></figure><p id="1b93" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有构建的映像都可以被推送到私有ECR存储库，并且可以通过使用<a class="ae mk" href="https://github.com/awslabs/amazon-ecr-credential-helper" rel="noopener ugc nofollow" target="_blank"> ECR凭证助手</a>与docker一起使用。</p><p id="09f6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ECR中的个人私有存储库(示例):</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/dcb5ff8e0f2dec2610ad93f165482d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pfVG_aMTg3oHdNPF"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">ECR —私有存储库</figcaption></figure><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/d3d595cc0b7cc6edc5829f50132984d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_hkiazUn7ulIQtpx"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">ECR —私有存储库</figcaption></figure><p id="0411" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">该工具标记了发布版本和组件版本:</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/aec7c870e62b4c14bee860853cd63759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g2yitVqMRI-AoWMf"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">ECR —私有存储库</figcaption></figure><p id="6ad6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ECR自动扫描(配置)所有推送的映像，查找容器映像中的任何软件漏洞。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/67a612dbff1ed785ddd07e5fb7f863e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KEZFyIgLy3mNc5Gr"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">ECR —漏洞扫描</figcaption></figure><p id="4f65" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有的映像都是使用amazon-linux作为基础构建的，包括AWS认为对操作稳定性和安全修复很重要的所有补丁，与官方的基于ubuntu的上游Kubernetes映像相比，大多数漏洞都在EKS-D中得到修复。</p><p id="e3e3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了进行测试，下面使用Snyk对来自上游(k8s.gcr.io/kube-proxy)和EKS-D(public . ECR . AWS/eks-distro/kubernetes/kube-proxy)的kube-proxy映像进行了漏洞扫描。</p><p id="6923" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以下扫描显示，基于EKS-D的kube-proxy映像中的大多数漏洞都已修复:</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/9fa77ad1913352469a5864d4bb262128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BB6Gcv0ANoU64xDl"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">容器漏洞扫描</figcaption></figure><p id="872b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mn">k8s.gcr.io/kube-proxy:v1.18.9:</em></p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/360f988efb49130c1688ed2a7eae301c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k2UQ1oNVYpKJqUAk"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">容器漏洞扫描—上游</figcaption></figure><p id="e543" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mn">public . ECR . AWS/eks-distro/kubernetes/kube-proxy:v 1 . 18 . 9-eks-1–18–1:</em></p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/587a14fbbe3a3d852b782e4ba51bbce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WtY-PHUVLObgrGys"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">容器漏洞扫描— ECR</figcaption></figure><h1 id="5fc3" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">试用—用EKS发行版引导集群</h1><p id="46d7" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">EKS发行版可以使用任何一种<a class="ae mk" href="https://distro.eks.amazonaws.com/community/partners/" rel="noopener ugc nofollow" target="_blank">支持的安装方法</a>来安装，比如Rancher、Kubeone、Canonical、Kubestack等等。，合作伙伴还提供监控(datadog，instana)、安全(alicide，aqua security)、GitOps (weaveworks)等服务。</p><p id="4934" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">来自eks-distro库的官方开发指南使用kop来引导集群。从技术上讲，EKS-D可以使用Kubeadm之类的工具进行安装，因为这仅涉及修改所使用的图像(使用来自公共ECR的基于EKS-D的图像)以及在源自上游的清单中添加特定的标志/参数。还有像EKS Snap这样更简单的方法来快速了解EKS-D。Rancher等其他合作伙伴已经在RKE-2 (RKE政府)和其他许多提供安装方法、监控和安全的公司支持生产级EKS-D。</p><h1 id="0f82" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">EKS快照— Ubuntu</h1><p id="79b9" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">有了<a class="ae mk" href="https://snapcraft.io/eks" rel="noopener ugc nofollow" target="_blank"> EKS快照</a>，一个完整的EKS体验现在可以在一个单一的、不可变的包中自动更新，维护成本低，安全性更高。</p><p id="575b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">eks snap打包了亚马逊eks发行版(EKS-D)的所有Kubernetes二进制文件，并将它们与类似MicroK8s的体验相结合，以便在任何地方都能获得自以为是、自我修复、高度可用的EKS兼容的Kubernetes。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/0c9d192df8563afb37456df7192bfd81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ilTPdh5YI8i1kmWK"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS-D快照— Ubuntu</figcaption></figure><p id="bd25" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这个EKS发行版是基于MicroK8s的。所有控制平面组件都作为systemd服务运行。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/9db087fc4258255a8c9d9a1023912246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yZqRsSe9R8D7gj_P"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS快照— EKS-D</figcaption></figure><p id="5807" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">安装方法提供了多个命令来管理节点的添加和删除、管理证书、管理数据库等。如下所示，快照安装会自动安装和初始化多个服务。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mo"><img src="../Images/9b6ef25bc56a8fc8d8d4e850562b0ecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*__TWIkvujLICL-nl"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">EKS-D Snap — Ubuntu — CLI</figcaption></figure><h1 id="8ab3" class="la lb jf bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">科普斯</h1><p id="c673" class="pw-post-body-paragraph kc kd jf ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">Kops是Kubernetes Operations的缩写，是一套在云中安装、操作和删除Kubernetes集群的工具。到今天为止，Kops提供了启动EKS-D集群的官方开发指南。在<a class="ae mk" href="https://github.com/aws/eks-distro/tree/main/development/kops" rel="noopener ugc nofollow" target="_blank"> eks-distro </a>仓库中提供的Kops框架使用EKS-D来引导集群。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/0c64a19520b1cd0c2a2cc1d6f19e3136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Knu7ASh3_7TRPOw_"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">科普斯-EKS-D</figcaption></figure><p id="f514" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Kops创建所需的EC2实例，并使用EKS-D引导Kubernetes集群</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/9bffb8db6436304fdddfb5f9b1a0cfd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vU_iZbMu763lqLAm"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kops — EC2实例(主实例和节点实例)</figcaption></figure><p id="481f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如下所示，用户可以访问所有控制面板组件。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/1ad5dbb5cdcfbcff96f399a8e629232f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JbP9SwNZ8mX1koJz"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">科普斯-EKS-D</figcaption></figure><p id="3a2d" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所有图像都来自eks发行版:</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/326b9c47acfbf2eab794c7329d5aa918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HyHcbl8ttyTHfDlE"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">科普斯-EKS-D</figcaption></figure><p id="9603" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Kops需要一个“状态存储”来存储集群的配置信息，Kops使用S3作为状态存储。在这种情况下，它存储所有信息，如集群规范、清单、pki等。，状态在初始集群创建期间存储。对群集的任何后续更改也将保存到该存储中。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/6a4aa629666a526bc140adad234c7468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rzUYSnemr16frX9c"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kops —国家仓库— S3</figcaption></figure><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mj"><img src="../Images/e905dc374d51869aaf3f5895f19546c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FUm_HTunhtchiT9Y"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Kops —国家仓库— S3</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="e5d2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS-D是亚马逊的一项投资，旨在减少使用商业Kubernetes发行版时采用AWS所带来的摩擦。除了只是一个Kubernetes发行版，EKS-D还为AWS未来的混合云和多云服务奠定了坚实的基础。</p><p id="583b" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随着EKS-A在2021年的到来，EKS-D将在混合云环境中发挥重要作用，用户可以在任何地方使用相同的Kubernetes发行版，并可以选择连接到其他AWS服务。EKS-A最终将成为事实上的计算环境，用于多云、混合云和边缘(如雪球)环境，使AWS能够有效地与市场上已经流行的同类产品竞争，如Google Anthos和Azure Arc。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mw"><img src="../Images/826c5e33948b516a7fef85d267c2329c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nsrVEU_xVxLIy1ud"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">亚马逊EKS任何地方</figcaption></figure><p id="344f" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EKS-D的上游对齐展示了AWS对Kubernetes开源社区的持续承诺，也带来了额外的工程实力和想法。这一声明明确强调了企业将把Kubernetes作为跨内部和公共云的抽象来运行。</p></div></div>    
</body>
</html>