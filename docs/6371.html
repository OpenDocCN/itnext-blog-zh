<html>
<head>
<title>Service Mesh Testing — Tools &amp; Frameworks (Open Source)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">服务网格测试—工具和框架(开源)</h1>
<blockquote>原文：<a href="https://itnext.io/service-mesh-testing-tools-frameworks-open-source-7904ee222298?source=collection_archive---------3-----------------------#2021-10-29">https://itnext.io/service-mesh-testing-tools-frameworks-open-source-7904ee222298?source=collection_archive---------3-----------------------#2021-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5fdf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">服务网格在OSI第4层到第7层之间运行，而Kubernetes容器网络接口(CNI)为第2层和第3层网络提供基础设施。在使用服务网格部署应用程序时，我们需要测试、确保和衡量应用程序不会受到服务网格的负面影响。工具和测试套件在理解部署应用程序的环境的影响方面起着至关重要的作用。随着向微服务的转移，工具集的分布式特性对于跨分布式应用部署(在同一集群内或集群间)使用第3层到第7层流量进行规模测试变得更加重要。</p><p id="342c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有相当多的开源工具集已经接受了测试和测量服务网格性能影响的挑战。使用以下工具探索特性功能的描述和比较:</p><ul class=""><li id="1baf" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">福蒂奥</li><li id="6612" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">夜鹰</li><li id="03aa" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">Wrk2</li><li id="8eb1" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">Httpbin</li><li id="e2ce" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">网状结构</li><li id="79d0" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">同位素</li><li id="c680" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">超油</li><li id="7e28" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">服务网格基准</li><li id="6761" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">蝗虫</li><li id="d31d" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">服务网格性能</li></ul><h1 id="8736" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">理想特征集</h1><p id="5d8b" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">在我们开始测试或测量服务网格影响之前，我们需要清楚应用程序部署的环境。话虽如此，有助于研究基于微服务的应用部署的服务网格的理想功能集是什么？列出了几个项目:</p><ul class=""><li id="fdfb" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">从第3层到第7层提供吞吐量和延迟方面的性能</li><li id="c368" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">能够利用HTTP 1/1.1/2和/或gRPC特性</li><li id="af2c" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">提供调整设置的能力，如加密类型、连接数、同时用户数、套接字规模、内部发送/接收的数据包等。</li><li id="114c" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">能够提供可插拔和可扩展的接口，以添加额外的测试功能</li><li id="e330" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">周围有一个活跃的开源社区</li><li id="3837" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">理想情况下，符合RFC设定的要求，例如针对第3层测试的RC2544。</li><li id="d3bf" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">在各种负载产生条件下具有低噪声基底，因此对测试结果增加最小的抖动/延迟或不增加抖动/延迟</li><li id="3d0c" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">最重要的是，在多次运行中提供一致的可重复结果</li></ul><p id="3750" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里提供的工具集和测试套件基于源代码、社区讨论和提到的每个项目的文档描述了每个工具集和测试套件的亮点。</p><p id="db5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始测试之前，要了解服务网格的基准测试和测试考虑事项的详细信息，请查看<a class="ae mf" href="https://sunkur.medium.com/5-things-to-know-about-service-mesh-performance-a8331765e995" rel="noopener">关于服务网格性能的5件事</a></p><h1 id="b612" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">负载发生器:</h1><p id="bb03" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">图1提供了可用的开源负载生成器的高级描述。对比的负载发电机有<a class="ae mf" href="https://github.com/fortio/fortio" rel="noopener ugc nofollow" target="_blank"> Fortio </a>、<a class="ae mf" href="https://github.com/envoyproxy/nighthawk" rel="noopener ugc nofollow" target="_blank">夜鹰</a>、<a class="ae mf" href="https://github.com/giltene/wrk2" rel="noopener ugc nofollow" target="_blank"> Wrk2 </a>和<a class="ae mf" href="https://github.com/postmanlabs/httpbin" rel="noopener ugc nofollow" target="_blank"> Httpbin </a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mg"><img src="../Images/200ada34544b6fd3ecd0f43d29e2aa7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WtmIy6Ubhh47F_YQVjD97Q.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图1:开源负载生成器的高级描述</figcaption></figure><h1 id="4108" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">利弊</h1><p id="cc29" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">图2和图3从优点和缺点方面提供了特性的高级比较。请注意，这种比较并不是否定开源社区所做的令人难以置信的工作，它仅仅是比较每个工具集的特性/功能/性能属性。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mw"><img src="../Images/a3b6c47c62fbbb17f2ed31f644faf3b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3T1bK1M8d3dsv8lf2FEC2A.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图Fortio和Nightwak的对比</figcaption></figure><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mx"><img src="../Images/10f0b8f4b71447b7994a40fc79c8e5d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Q0jUngWxFsZiFU9WcICsA.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图Wrk2和Httpbin的比较</figcaption></figure><p id="be4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些细节的来源很少:</p><ul class=""><li id="1add" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">Fortio与Wrk2对比:<a class="ae mf" href="https://docs.google.com/document/d/10xeQuEjUjdmfFq36kGrxI6v78GKHspqn_Nb-pohKfOo/edit?ts=5dc9b15a&amp;pli=1#" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/document/d/10 xequejujdmffq 36 kgrxi 6v 78 gkhspqn _ n b-pohKfOo/edit？ts=5dc9b15a &amp; pli=1# </a></li><li id="5ede" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">夜鹰表演框架设计:<a class="ae mf" href="https://docs.google.com/document/d/14Iz8j--Mvb06QFB8RurtYlwmy657YbAVfqDr-jKgtaQ/edit#heading=h.grkfe6onmtgv" rel="noopener ugc nofollow" target="_blank">https://docs.google.com/document/d/14Iz8j-MVB 06 qfb 8 rurtylwmy 657 ybavfqdr-jKgtaQ/edit # heading = h . grkfe 6 onmtgv</a></li><li id="536f" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">特使需求OSS基准测试:<a class="ae mf" href="https://docs.google.com/document/d/1mAma-ksRN0OIBInoZKUdjdaIhK2nTQxFnCujq2fKi4E/edit" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/document/d/1 mama-ksrn 0 oibinozkudjdaihk 2 ntqxfncujq 2 fki 4 e/edit</a></li><li id="88cb" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">Wrk2 vs. Fortio对比:<a class="ae mf" href="https://docs.google.com/document/d/10xeQuEjUjdmfFq36kGrxI6v78GKHspqn_Nb-pohKfOo/edit?ts=5dc9b15a&amp;pli=1#" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/document/d/10 xequejujdmffq 36 kgrxi 6v 78 gkhspqn _ n b-pohKfOo/edit？ts=5dc9b15a &amp; pli=1# </a></li><li id="23fc" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">http bin:<a class="ae mf" href="https://httpbin.org/" rel="noopener ugc nofollow" target="_blank">https://httpbin.org/</a></li></ul><h1 id="c69c" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">持续的社区牵引</h1><p id="59fc" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">Github activity通常为任何项目提供关于开源社区牵引力的见解。图4对这些开源社区的活动提供了很少的见解。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi my"><img src="../Images/34391046bccd8353333d8ce89d045784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qgDBDe99DOHQ2Tsd_J1X6w.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图4:开源社区牵引</figcaption></figure><h1 id="abbe" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">服务网格测试框架</h1><p id="7381" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">虽然开源负载生成器可以用作测试工具，但框架提供了额外的测试功能，如分布式测试、可伸缩性、进一步定制等。同位素、Hyperfoil、网格、蝗虫、服务网格基准和服务网格性能等框架如下所述。</p><h2 id="82e9" class="mz ld it bd le na nb dn li nc nd dp lm kb ne nf lq kf ng nh lu kj ni nj ly nk bi translated">同位素</h2><p id="4b2e" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">同位素GitHub:<a class="ae mf" href="https://github.com/istio/tools/tree/master/isotope" rel="noopener ugc nofollow" target="_blank">https://github.com/istio/tools/tree/master/isotope</a></p><p id="ea60" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要详细查看同位素和服务图表，请检查Istio 的<a class="ae mf" href="https://sunkur.medium.com/isotope-for-istio-41dd3c218996" rel="noopener">同位素</a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nl"><img src="../Images/ceeecf507a04af9b7f0aa18c77d04291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLDdl2-zzQ9DfnkrWx-rRQ.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图5:同位素框架细节</figcaption></figure><h2 id="67b5" class="mz ld it bd le na nb dn li nc nd dp lm kb ne nf lq kf ng nh lu kj ni nj ly nk bi translated">超油</h2><p id="4b8b" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">Hyperfoil是一个面向微服务的分布式基准框架。</p><p id="f854" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更多详情:【https://hyperfoil.io/ T4】</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nm"><img src="../Images/370a4f27b18b96cc69c0bbd66e9ed164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8Q9k4VW82BExAQTcWrsvQ.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图6: Hyperfoil框架细节</figcaption></figure><h2 id="9209" class="mz ld it bd le na nb dn li nc nd dp lm kb ne nf lq kf ng nh lu kj ni nj ly nk bi translated">网状结构</h2><p id="c0cc" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">网格为服务网格提供了一个管理平面。</p><p id="f200" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更多详情:<a class="ae mf" href="https://meshery.io/" rel="noopener ugc nofollow" target="_blank">https://meshery.io/</a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mw"><img src="../Images/55b7f49acc9fc30fee2ddc9d6fdf687d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r10Du2FxQ3wDVmgy1pjD3g.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图7:网格框架细节</figcaption></figure><h2 id="34fb" class="mz ld it bd le na nb dn li nc nd dp lm kb ne nf lq kf ng nh lu kj ni nj ly nk bi translated">蝗虫</h2><p id="ce6e" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">Locust为负载测试等提供了框架。</p><p id="eb59" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更多详情:<a class="ae mf" href="https://locust.io/" rel="noopener ugc nofollow" target="_blank">https://locust.io/</a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mw"><img src="../Images/55b7f49acc9fc30fee2ddc9d6fdf687d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r10Du2FxQ3wDVmgy1pjD3g.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图8:蝗虫框架细节</figcaption></figure><h2 id="ac6a" class="mz ld it bd le na nb dn li nc nd dp lm kb ne nf lq kf ng nh lu kj ni nj ly nk bi translated">服务网格基准</h2><p id="7ac7" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">服务网格基准是一个用于配置和测试服务网格的测试套件</p><p id="3515" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">服务网格基准GitHub:<a class="ae mf" href="https://github.com/kinvolk/service-mesh-benchmark" rel="noopener ugc nofollow" target="_blank">https://github.com/kinvolk/service-mesh-benchmark</a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nn"><img src="../Images/a50a1fdb94741adecfaa1389334d112a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g83qCUSIwJx_PbMw-kcqWw.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图9:服务网格基准详细信息</figcaption></figure><h2 id="202f" class="mz ld it bd le na nb dn li nc nd dp lm kb ne nf lq kf ng nh lu kj ni nj ly nk bi translated">服务网格性能框架</h2><p id="87d7" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">跨各种网格使用模式部署和测试各种服务网格的框架</p><p id="7954" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更多详情:<a class="ae mf" href="https://smp-spec.io/" rel="noopener ugc nofollow" target="_blank">https://smp-spec.io/</a></p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi no"><img src="../Images/9fe55ad49159bec2a3e7d560d5796c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPB5QilTNM4kQPOhlTCyDA.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">图10:服务网格性能框架</figcaption></figure><p id="763a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里还有其他可以添加的工具或者框架吗？是否有过与上述不一致的经历？</p><p id="c733" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">很想听听你对它们的看法。</p><p id="5be0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="np">注:此处表达的观点为个人观点，不代表任何实体。</em></p></div></div>    
</body>
</html>