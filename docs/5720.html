<html>
<head>
<title>How to design DynamoDB tables — Core Concepts &amp; Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设计DynamoDB表——核心概念和最佳实践</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-design-dynamodb-tables-core-concepts-best-practices-62db14167874?source=collection_archive---------4-----------------------#2021-05-10">https://itnext.io/how-to-design-dynamodb-tables-core-concepts-best-practices-62db14167874?source=collection_archive---------4-----------------------#2021-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="109a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您正在寻求对DynamoDB数据库及其重要组件的理解，如表、定价模型、项目、属性、主键和排序键，本文将满足您的需求。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/23e630af63eef19db8b8bc7563ed46c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NOoud9ZDmLmlwuLu"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">亚历山德罗·埃尔贝塔在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9461" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据AWS的官方文档，DynamoDB被定义为无服务器、可伸缩、企业级的数据库。对于无服务器，这意味着数据库可以根据需求自动调整其容量。它允许每天成功执行数万亿次请求。除此之外，DynamoDB数据库还确保了一致且可预测的性能。</p><p id="6e36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于其大规模能力、低延迟和高吞吐量，DynamoDb经常被推荐用于实时场景，如游戏记分牌和聊天应用程序。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/12835acd93ddcdd5110e8c3de8a9cc23.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*r7XC9B8Pj8nKo2tRSBjYOQ.gif"/></div></figure><h1 id="5c91" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">了解基础知识</strong></h1><p id="13fc" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">DynamoDB将数据存储在其<strong class="jp ir">宽列</strong>和<strong class="jp ir">键值</strong>结构中。宽列意味着一个列不需要像在关系数据库中那样跨越所有的行。Key-value表示指定属性的标识id。</p><p id="a8ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你对数据库的复杂性感到困惑，不要担心。参见下面的例子，用简单的术语理解所有这些技术术语。</p><p id="904e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下表显示了DynamoDB数据库。请注意以下方面</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/566f74df3b43bfe5302c128ca89f5679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YIIt25G79hgkuHTx"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">教师示例表</figcaption></figure><ul class=""><li id="87fb" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">最左边的部分是包含行键的键空间，行键代表唯一标识符。行关键字包括学生、教师和管理。</li><li id="5979" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">键值为Teachers和Administration的项不分别包含Department和Name属性，因为每一列都不必像关系数据库那样跨越所有行。</li><li id="5223" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">每一列保存三样东西:名称、属性值和时间戳— <em class="mv">到</em> <em class="mv">允许识别最近更新/插入的数据</em>。</li><li id="20c3" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">具有键值Students的列的名称为:联系号码，值为12345–567，时间戳为1579098574。</li></ul><h1 id="f62b" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak"> DynamoDB提供的吞吐量</strong></h1><p id="0eed" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这是DynamoDB的棘手之处之一，您必须了解并预测应用程序的工作负载，以便通过配置表的容量单位来配置所提供的吞吐量。</p><p id="a803" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">DynamoDB数据库有以下两种容量单位:</p><h2 id="dcd8" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">读取容量单位</strong></h2><p id="686b" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">从表中读取数据的API调用称为读取请求。它们包括:</p><p id="c3d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">强烈一致</strong></p><p id="db32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此请求返回最新的数据以及所有以前成功的写请求。</p><p id="a1fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">最终一致</strong></p><p id="9ebd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该请求可能不会返回最近的数据，并且包含一些旧数据。但是，重复调用可能会允许您访问新数据。</p><p id="79b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">事务性</strong></p><p id="59e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事务性请求允许用户执行复杂的业务操作，包括同时更新、删除或添加一组项目。</p><p id="41c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请参考下表，了解每秒读取高达4KB的每个读取请求所需的容量单位:</p><ul class=""><li id="b1e3" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated"><strong class="jp ir"> 1强烈一致= </strong> 1 RCU</li><li id="fc61" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated"><strong class="jp ir"> 2最终一致= </strong> 1 RCU</li><li id="8bc6" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">1事务性=  2 RCU</li></ul><p id="600e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看一些场景，以便更好地理解如何计算读取容量单位。</p><p id="8981" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">场景1:每秒10次非常一致的读取，每次4kb</strong></p><p id="9483" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mv">我们需要10 * 4 KB / 4 KB = 10个RCU </em></p><p id="21f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">场景2:每秒16次最终一致读取，每次12kb</strong></p><p id="34ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要(16 / 2) * ( 12 / 4 ) = 24 RCU</p><p id="3568" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">场景3:每秒10次非常一致的读取，每次6kb</strong></p><p id="ce80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mv">我们需要10 * 8 KB / 4 = 20 RCU(我们必须将6 KB四舍五入到8 KB) </em></p><blockquote class="ni nj nk"><p id="5375" class="jn jo mv jp b jq jr js jt ju jv jw jx nl jz ka kb nm kd ke kf nn kh ki kj kk ij bi translated">总而言之，最终一致的读取请求是有益的，并且是默认设置。</p></blockquote><h2 id="f9a4" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">写容量单位</strong></h2><p id="14af" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">将数据写入表的API调用称为写请求。它们包括:</p><p id="9c31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">标准写法</strong></p><p id="893f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用标准写入每秒写入1 KB数据会消耗1个写入容量单位。</p><p id="3753" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">事务性写</strong></p><p id="4d04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要每秒进行一次高达1 KB的事务性写入，需要2个写容量单元。</p><p id="c3fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们再看一些场景，但这次是如何计算写容量单位。</p><ul class=""><li id="4244" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">场景1:我们每秒写10个对象，每个2 KB。</li></ul><p id="4d78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要2 * 10 = 20 WCU</p><p id="7b9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">·场景2:我们每秒编写6个对象，每个4.5 KB</strong></p><p id="f6c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mv">我们需要6 * 5 = 30个WCU (4.5被四舍五入到高位KB) </em></p><p id="927d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">·场景3:我们每分钟写120个对象，每个2kb</strong></p><p id="5210" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要120 / 60 * 2 = 4 WCU</p><blockquote class="ni nj nk"><p id="411d" class="jn jo mv jp b jq jr js jt ju jv jw jx nl jz ka kb nm kd ke kf nn kh ki kj kk ij bi translated">放心吧！AWS很棒，它们提供了(一种更昂贵的)方法来避免你必须做这些计算，但无论如何，理解这些概念是很重要的。🤘</p></blockquote><h1 id="bb99" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">dynamo db的定价模型</strong></h1><p id="0ec1" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">既然您已经了解了请求和容量单位，那么就该研究数据库的定价模型了。有两种模式，如下所示:</p><h2 id="1f67" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">按需模式</strong></h2><p id="5e48" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">按需容量模型允许用户根据请求付费。它会根据请求的数量自动调整数据库的容量。</p><p id="a259" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">按需模式的特征</strong></p><p id="a082" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">按需定价模型具有以下特点:</p><ul class=""><li id="07e1" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">读/写函数对空表不收费，而只存储。</li><li id="a935" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">对于新表来说，这是一种有用的方法。</li><li id="9080" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">此型号没有最小容量。</li></ul><p id="a48b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">定价</strong></p><p id="6201" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该模型的定价方面如下:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi no"><img src="../Images/87d41034f3341673123f63e70d998dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z8eTn47vvZPXYIXvpkMouQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><em class="np">按需定价模式</em></figcaption></figure><blockquote class="ni nj nk"><p id="cabe" class="jn jo mv jp b jq jr js jt ju jv jw jx nl jz ka kb nm kd ke kf nn kh ki kj kk ij bi translated">我总是为新表打开按需模型，尤其是新的解决方案，因为我不是一个向导或类似🧙的东西🔮</p></blockquote><h2 id="7ec4" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">供应模型</strong></h2><p id="b576" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">供应模型允许用户按容量单位付费。该模型使用自动缩放，并指定每秒的读写次数。这种模式比按需模式相对便宜。</p><p id="7220" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">供应模型的特性</strong></p><p id="55ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">供应模型的区别包括:</p><ul class=""><li id="6209" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">与按需模式相比，它的成本相对较低。</li><li id="e7d7" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">调配模型允许设置最大容量的选项。</li><li id="8051" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">这个模型具有自动缩放的特性🙇🏻</li></ul><p id="cf36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">定价</strong></p><p id="0574" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该模型的定价方面如下:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nq"><img src="../Images/8a077f914279c76e4cbedcd2b573f646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQZUYLLD5FY3jCKwoT0Osg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">供应定价模型</figcaption></figure><p id="5d0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:在调配的型号中，空闲层包括25GB存储以及每个25个rcu和wcu。</p><h2 id="cf81" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">如何避免供应的吞吐量错误</strong></h2><p id="3922" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">如果我们超过了RCU或WCU，我们会得到<strong class="jp ir"><em class="mv">provisionedthroughputexceedexceptions！</em> </strong></p><p id="da2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">原因</strong></p><p id="586a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">热键(或热分区):</strong>一个分区键被多次读取，例如一个流行项目。</p><p id="5c16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">超大物品:</strong>记住，RCU和WCU取决于物品的大小。</p><p id="6be7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">解决方案</strong>🤩</p><p id="53b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">遇到异常时<strong class="jp ir">指数回退</strong>(已经在SDK中)。</p><p id="0b95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">尽可能分发分区键</strong>。</p><p id="acad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果RCU出现问题，我们可以使用<strong class="jp ir"> DynamoDB加速器(DAX) </strong> — <em class="mv">这可能是我们第一次尝试用最少的代码/表重新设计工作来避免热分区问题。</em></p><p id="934b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，您已经了解了DynamoDB的基础和结构，是时候深入了解更多细节了。</p><h1 id="c8f7" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">有哪些属性和物品？</strong></h1><p id="b139" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">项目是一组属性。为了便于理解，它们是关系数据库中的行和记录。属性是关系数据库中的字段或列。</p><p id="df0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参考教师的示例表，学生、教师和管理是项目。而姓名、联系电话和部门是属性。</p><p id="e238" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一点要记住，属性最多可以有255个字符。然而，这些项目的最大大小可以是400KB。</p><p id="14ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一点要记住，属性最多可以有255个字符。然而，这些项目的最大大小可以是400KB。</p><h2 id="84b3" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">主要API调用</strong></h2><p id="e52f" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">让我们快速看一下DynamoDB中一些已知的和最常用的API调用。</p><p id="bb40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> PutItem </strong></p><p id="7ae2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用户可以使用该调用将单个项目写入表中。如果新项目拥有与现有项目相同的主键，它将替换后者。</p><p id="722a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">更新项目</strong></p><p id="0c1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顾名思义，这个调用允许更新表中的项目。它还在不修改或替换现有项目的情况下添加项目。</p><p id="74fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">删除项目</strong></p><p id="9c00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它允许从表中删除单个项目。如果用户对DeleteItem进行API调用，而该项并不存在，那么它将消耗一个写容量单位。</p><p id="0f3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">查询</strong></p><p id="b7ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用=运算符返回基于分区键(哈希键)值的项目，还使用=、、= &gt;、Between、Begin运算符对键值(范围键)进行排序。对于大量数据(1 MB)，应该对结果集应用分页。</p><p id="ff7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">扫描</strong>🤮</p><p id="1379" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">扫描整个DynamoDB表，然后过滤掉消耗大量RCU的客户端应用程序上的数据，此外可能会导致非常缓慢的操作，这取决于工作负载和用例。</p><blockquote class="ni nj nk"><p id="c1c4" class="jn jo mv jp b jq jr js jt ju jv jw jx nl jz ka kb nm kd ke kf nn kh ki kj kk ij bi translated">通过使用正确的分区和排序键设计表，并在其上添加二级索引，可以很容易地避免扫描。</p></blockquote><p id="17d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">附注:对于PutItem和UpdateItem调用，新项和旧项的差异决定了写容量单位的消耗。</p><h2 id="55c9" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">分区键</strong></h2><p id="bab0" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">DynamoDB数据库中的一个强制属性是分区键。它也被称为哈希键。除此之外，每个分区键必须是唯一的，因为它是项目标识的来源。</p><h2 id="7941" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">分类键</strong></h2><p id="7f43" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">仅具有分区键不允许大范围的聚合功能，因为它仅作为唯一标识符的来源。因此，为了增加聚合的功能，添加了排序键。</p><p id="be37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:如果数据库既有分类键又有分区键，那么两者的组合应该是唯一的。</p><h2 id="832c" class="mw le iq bd lf mx my dn lj mz na dp ln jy nb nc lr kc nd ne lv kg nf ng lz nh bi translated"><strong class="ak">分区和排序键的组合</strong></h2><p id="84ba" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">分区键允许你访问一个项目。但是，如果您想要访问不同功能的项目范围，如<code class="fe nr ns nt nu b">greather than</code>、<code class="fe nr ns nt nu b">less than</code>、<code class="fe nr ns nt nu b">begin with</code>等，您需要将分类键与分区键结合使用。</p><p id="584d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总而言之，我们已经按照承诺解释了DynamoDB的基本概念和结构。我们相信，现在您已经理解了DynamoDB数据库的核心。</p><h1 id="fcc9" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">数据建模最佳实践</strong></h1><p id="16bd" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">关于如何设计表，如何选择索引，如何开始设计过程，有太多的东西需要探索，这可能是一系列文章的主题。但是为了指导你的旅程，我会给你一些很棒的参考资料。</p><p id="f8e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我喜欢这篇文章，因为它深入介绍了一些真实世界的用例，比如如何选择键。</p><div class="nv nw gp gr nx ny"><a href="https://aws.amazon.com/blogs/database/choosing-the-right-dynamodb-partition-key/" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">选择正确的DynamoDB分区键| Amazon Web Services</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">这篇博客文章涵盖了为设计一个应用程序选择正确的分区键的重要考虑因素和策略</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">aws.amazon.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kv ny"/></div></div></a></div><p id="8be3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">DynamoDB数据建模过程的下一步自然是理解什么是<strong class="jp ir">二级索引</strong>，并阅读一些关于它的通用指南。</p><p id="940c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个是完美的，因为它涵盖了基础知识，并为您提供了一个有用的通用指南集。</p><div class="nv nw gp gr nx ny"><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-indexes-general.html" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">DynamoDB中二级索引的一般准则</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">Amazon DynamoDB支持两种类型的二级索引:全局二级索引——一种带有分区键的索引和一个</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><p id="c564" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">理解关于<strong class="jp ir">稀疏索引</strong>的概念以及如何利用它们。</p><div class="nv nw gp gr nx ny"><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-indexes-general-sparse-indexes.html" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">利用稀疏索引</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">对于表中的任何项，DynamoDB只在索引排序键值出现在…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><p id="cbed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">额外收获:关于二级索引的更高级的阅读。</p><div class="nv nw gp gr nx ny"><a href="https://www.trek10.com/blog/best-practices-for-secondary-indexes-with-dynamodb" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">DynamoDB辅助索引的最佳实践</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">DynamoDB已经迅速成为开发人员构建无服务器和云原生应用程序的首选数据库。它…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">www.trek10.com</p></div></div><div class="oh l"><div class="on l oj ok ol oh om kv ny"/></div></div></a></div><h1 id="a5aa" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">下一步是什么？</h1><p id="daa1" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">现在您已经了解了DynamoDB的基础知识，是时候实际使用它来理解它的实际应用了。此外，如果您的内部学习者想要了解更多，请深入了解现有的数据类型和二级索引。</p><p id="c4bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你仍然对DynamoDB感到困惑，也许第二次阅读是关键！<em class="mv">数据库快乐！</em></p></div></div>    
</body>
</html>