<html>
<head>
<title>Laravel and Vue: Creating a Portfolio website with a CRUD admin panel — Chapter 18</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel和Vue:用CRUD管理面板创建作品集网站——第18章</h1>
<blockquote>原文：<a href="https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-18-42a7068fa796?source=collection_archive---------8-----------------------#2020-02-17">https://itnext.io/laravel-and-vue-creating-a-portfolio-website-with-a-crud-admin-panel-chapter-18-42a7068fa796?source=collection_archive---------8-----------------------#2020-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="29ec" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">处理联系表格和电子邮件错误</h2></div><h1 id="2fa9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">联系人表单的Laravel验证</h1><p id="9bde" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了让我们的电子邮件获得成功，我们需要:</p><ol class=""><li id="6ef3" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">发报机</li><li id="79f2" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">有效发件人电子邮件</li><li id="16d7" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">文本内容/html内容</li></ol><p id="c341" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们可以创建一个表单请求，并在规则函数中要求这些。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a5d4" class="my kj it mu b gy mz na l nb nc"><strong class="mu iu">php artisan make:request ContactFormRequest</strong></span></pre><p id="378a" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">让我们将授权功能设置为<code class="fe nd ne nf mu b"><strong class="lc iu">true</strong></code>并考虑规则功能。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="798d" class="my kj it mu b gy mz na l nb nc">public function authorize()<br/>{<br/>    return <strong class="mu iu">true</strong>;<br/>}</span></pre><p id="9d9b" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">从我们的邮件功能中可以看到，发件人由<strong class="lc iu">姓名和</strong>电子邮件组成。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="d5cd" class="my kj it mu b gy mz na l nb nc">$from = [<br/>        'name' =&gt; request('name'),<br/>        'email' =&gt; request('email')<br/>    ];</span><span id="b636" class="my kj it mu b gy ng na l nb nc">'sender' =&gt; new SendSmtpEmailSender($from),</span></pre><p id="9542" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">所以我们在规则中增加了名字和电子邮件的功能。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b0b7" class="my kj it mu b gy mz na l nb nc">public function rules()<br/>{<br/>    return [<br/>        'name' =&gt; 'required',<br/>        'email' =&gt; 'required',<br/>    ];<br/>}</span></pre><ol class=""><li id="6faf" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">发件人✔️</li><li id="56b4" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">有效发件人电子邮件</li><li id="81c9" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">文本内容/html内容</li></ol><p id="7cad" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">电子邮件必须是有效的电子邮件地址。我们需要给邮件规则添加<code class="fe nd ne nf mu b"><strong class="lc iu">| email</strong></code> <strong class="lc iu"> </strong>。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e40d" class="my kj it mu b gy mz na l nb nc">public function rules()<br/>{<br/>    return [<br/>        'name' =&gt; 'required',<br/>        'email' =&gt; 'required | <strong class="mu iu">email</strong>',<br/>    ];<br/>}</span></pre><ol class=""><li id="dd9f" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">发件人✔️</li><li id="d4e8" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">有效发件人电子邮件✔️</li><li id="1b66" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">文本内容/html内容</li></ol><p id="df71" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">对于textContent/htmlContent，请求()必须包含消息数据</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="18fb" class="my kj it mu b gy mz na l nb nc">public function rules()<br/>{<br/>    return [<br/>        'name' =&gt; 'required',<br/>        'email' =&gt; 'required | email',<br/>        <strong class="mu iu">'message' =&gt; 'required'</strong><br/>    ];<br/>}</span></pre><ol class=""><li id="d491" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">发件人✔️</li><li id="9937" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">有效发件人电子邮件✔️</li><li id="a3e2" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">textContent/htmlContent✔️</li></ol><p id="58af" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">一旦规则写好了，我们就可以将请求添加到mail()函数的括号中</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="1d4d" class="my kj it mu b gy mz na l nb nc">public function mail(<strong class="mu iu">ContactFormMailRequest $request</strong>) {<br/>...}</span></pre><p id="c6dc" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">接下来要处理的是错误消息如何出现在Contact部分。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="bf23" class="ki kj it bd kk kl no kn ko kp np kr ks jz nq ka ku kc nr kd kw kf ns kg ky kz bi translated">沿着输入显示服务器端错误</h1><h2 id="25de" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated"><code class="fe nd ne nf mu b">.then()</code>和。catch()</h2><p id="3e57" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们需要添加<code class="fe nd ne nf mu b"><strong class="lc iu">.then()</strong></code>和<code class="fe nd ne nf mu b"><strong class="lc iu">.catch()</strong></code>来分别处理成功和错误。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a940" class="my kj it mu b gy mz na l nb nc">sendmail() {<br/>    let fd = this.appendFormData();<br/>    axios.post('api/mail', fd)<br/><strong class="mu iu">.then(response =&gt; <em class="oe">console</em>.log(response))<br/>.catch(error =&gt; <em class="oe">console</em>.log(error))</strong><br/>},</span></pre><p id="9a5d" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">发送一个空表单会在控制台中显示如下错误:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi of"><img src="../Images/452ab972ab8642cb5dee2f12532367b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*IX7Qfld-0qo5Aad5s5G5-Q.png"/></div></figure><p id="16f0" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果我们阅读axios文档🔍，我们找到一个名为<strong class="lc iu">的处理错误的部分。</strong>显示错误响应数据在<code class="fe nd ne nf mu b"><strong class="lc iu">error.response.data</strong></code></p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div role="button" tabindex="0" class="ok ol di om bf on"><div class="gh gi oj"><img src="../Images/eae84844db223b2babf2e385f40370a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0D5ZBzYylyUWJRN3iSxYw.png"/></div></div></figure><p id="600b" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">让我们记录错误响应数据</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="848a" class="my kj it mu b gy mz na l nb nc">sendmail() {<br/>    let fd = this.appendFormData();<br/>    axios.post('api/mail', fd)<br/>.then(response =&gt; <em class="oe">console</em>.log(response))<br/>.catch(error =&gt; <em class="oe">console</em>.log(<strong class="mu iu">error.response.data</strong>))<br/>},</span></pre><p id="502b" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">在控制台中，我们发现<strong class="lc iu"> error.response.data </strong>有一个名为<strong class="lc iu"> errors </strong>的对象和一个名为<strong class="lc iu"> message的属性。</strong></p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/cc9a9791bd96fd37426608778de3b696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*cWsxQOvbWDektLScl_j8YQ.png"/></div></figure><p id="2398" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们需要的是<strong class="lc iu">错误对象</strong>，我们需要它出现在<strong class="lc iu">数据()</strong>中。</p><h2 id="6877" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">将错误数据放入数据()</h2><p id="be86" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在data()中，我们需要一个对象来存储捕获的错误</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e945" class="my kj it mu b gy mz na l nb nc">data() {<br/>    return {<br/>        form: {<br/>            name: '',<br/>            email: '',<br/>            message: '',<br/>        },<br/>        <strong class="mu iu">LVErrors: {<br/>        }</strong><br/>    }<br/>},</span></pre><p id="138b" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们需要改变。catch()代码，以便错误出现在LVErrors data()返回对象中</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e07e" class="my kj it mu b gy mz na l nb nc">sendmail() {<br/>    let fd = this.appendFormData();<br/>    axios.post('api/mail', fd)<br/>.then(response =&gt; <em class="oe">console</em>.log(response))<br/>.catch(error =&gt; <em class="oe">this.LVErrors = </em><strong class="mu iu">error.response.data</strong>)<br/>},</span></pre><p id="383f" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果我们<strong class="lc iu">提交一个空表单</strong>并使用<strong class="lc iu"> Vue DevTools </strong>，我们可以看到以下内容:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi op"><img src="../Images/363b381826e85b205b646611773e1aee.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*CERizdn1vaEkwRloU8cLYg.png"/></div></figure><p id="c43c" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">错误在<strong class="lc iu">错误对象</strong>中，我们不需要消息属性，所以让我们更改。catch()代码，以便在此。LVErrors</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="1683" class="my kj it mu b gy mz na l nb nc">.catch(error =&gt; <em class="oe">this.LVErrors = </em>error.response.data<strong class="mu iu">.errors</strong>)</span></pre><p id="f948" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在我们提交一个空表单，我们看到一些相似但不同的东西。</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/c3cbc0bc7df20087ea6078e8ecf024ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*Nzj7WBWOQInLpnE0YJXzJw.png"/></div></figure><p id="c318" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们现在可以使用双花括号{{ }}来呈现错误消息。如果我们使用一个span元素，我们的代码将类似于:</p><p id="6c42" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><code class="fe nd ne nf mu b"><strong class="lc iu">&lt;span&gt;{{ LVErrors.name }}&lt;/span&gt;</strong> </code>(渲染<strong class="lc iu">名</strong>错误)。</p><p id="fa96" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">让我们在名称标签下面测试一下。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a2f7" class="my kj it mu b gy mz na l nb nc">&lt;label for="name"&gt;Name&lt;/label&gt;<br/><strong class="mu iu">&lt;span&gt;{{LVErrors.name}}&lt;/span&gt;</strong><br/>&lt;input type="text" placeholder="name" id="name" v-model="form.name"/&gt;</span></pre><p id="13a7" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">提交一个空表单后，我们得到:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi or"><img src="../Images/1f48051d7c4d1bc25f8a61b1d494b2e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*WenZ472pQs01Ktrue_ycAg.png"/></div></figure><p id="c7de" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><code class="fe nd ne nf mu b"><strong class="lc iu">{{LVErrors.name}}</strong></code> <strong class="lc iu"> </strong>渲染<strong class="lc iu"> [“名称字段是必需的。”】</strong>因为<code class="fe nd ne nf mu b"><strong class="lc iu">{{LVErrors.name}}</strong></code> <strong class="lc iu"> </strong>包含一个数组，数组中是<strong class="lc iu">索引0 </strong>处的消息字符串。</p><p id="049d" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们有三种方法来解决这个问题:</p><ol class=""><li id="6464" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv md me mf mg bi translated">花括号中的索引号{{ }}</li><li id="f02b" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">data() return{}的LVErrors对象中的空属性</li><li id="19ea" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv md me mf mg bi translated">Vue.set</li></ol><h2 id="341b" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">1.花括号中的索引号{{ }}</h2><p id="3e03" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了渲染没有数组括号[]的错误，我们可以在<code class="fe nd ne nf mu b"><strong class="lc iu">{{LVErrors.name}}</strong></code> <strong class="lc iu"> </strong>上加上【0】，这样就变成了<code class="fe nd ne nf mu b"><strong class="lc iu">{{LVErrors.name[0]}}</strong></code> <strong class="lc iu">。</strong></p><p id="5fea" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在我们会有这个:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="5ffc" class="my kj it mu b gy mz na l nb nc">&lt;label for="name"&gt;Name&lt;/label&gt;<br/>&lt;span&gt;{{LVErrors.name<strong class="mu iu">[0]</strong>}}&lt;/span&gt;<br/>&lt;input type="text" placeholder="name" id="name" v-model="form.name"/&gt;</span></pre><p id="7411" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们可能会得到以下错误:</p><blockquote class="os"><p id="5fbb" class="ot ou it bd ov ow ox oy oz pa pb lv dk translated">"类型错误:_vm。LVErrors.name未定义"</p></blockquote><p id="2067" class="pw-post-body-paragraph la lb it lc b ld pc ju lf lg pd jx li lj pe ll lm ln pf lp lq lr pg lt lu lv im bi translated">出现此错误是因为我们要求LVErrors.name 的<strong class="lc iu">索引[0]，而在加载页面时LVErrors.name不存在。Vue希望在我们查看对象的索引之前，该对象已经存在。</strong></p><p id="3f41" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">为了解决这个问题，我们可以通过使用<strong class="lc iu"> v-if </strong>使<code class="fe nd ne nf mu b"><strong class="lc iu">{{ LVErrors.name[0] }}</strong></code> <strong class="lc iu"> </strong>的出现有条件:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="8845" class="my kj it mu b gy mz na l nb nc">&lt;span <strong class="mu iu">v-if="LVErrors.name"</strong>&gt;{{LVErrors.name[0]}}&lt;/span&gt;</span></pre><p id="627a" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在在<code class="fe nd ne nf mu b">data() return {}</code>中的LVErrors.name已经存在的情况下，错误信息会出现在<strong class="lc iu">(不带方括号)</strong>页面上。</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi or"><img src="../Images/07470e96b573cf391eeea8f1268bf18e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*AytUKafEo1HOmvGxfvIaSg.png"/></div></figure><h2 id="20e1" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">2.data() return{}的LVErrors对象中的空属性</h2><p id="f11d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">解决消息以<strong class="lc iu"> [ "MESSAGE HERE" ] </strong>方式出现的问题的第二种方法是自己在data() return {}中创建属性，并将其设置为空字符串。</p><p id="20ba" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">因此，不使用v-if，您可以像这样将name放入data() return {}中:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="2b6b" class="my kj it mu b gy mz na l nb nc">LVErrors: {<br/>    'name' : ''<br/>},</span></pre><p id="bf31" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们可以有错误<strong class="lc iu">而没有v-if </strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="57e0" class="my kj it mu b gy mz na l nb nc">&lt;span&gt;{{LVErrors.name[0]}}&lt;/span&gt;</span></pre><p id="a48b" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">当我们<strong class="lc iu">加载页面并且不提交表单</strong>时，我们将在inspect元素中看到一个空的跨度:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/b6c82b2100eed98a4e6cf7aac637a0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*KwoWJerg1dzU4XO-ORVGEA.png"/></div></figure><p id="98d2" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果我们<strong class="lc iu">加载页面并提交表单</strong>:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/95d2643482d551d54532afe1f55e5987.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*AXN4gsHAUC0pvagrpCD2Sw.png"/></div></figure><blockquote class="pj pk pl"><p id="43b7" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">注意:应该在提交表单后使用INSPECT ELEMENT/DEVTOOLS，否则我们看不到SPAN元素中的消息</p></blockquote><p id="cba7" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">第三种方法是使用Vue.set，我们来看看Vue.set</p><h2 id="bb20" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">3.Vue.set</h2><p id="191e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Vue.set是一个内置的Vue函数，允许你用一个键和值填充一个对象。这里有一个例子:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/01f38e507b158b008c5a0c9c7a50fa94.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*4p-ntif40Qzh6szACTWDjw.png"/></div></figure><p id="ba0e" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">你有一个叫香蕉的物体，像这样:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="9448" class="my kj it mu b gy mz na l nb nc">data() {<br/>    return {<br/>        banana: {<br/>            <br/>        }<br/>    }<br/>},</span></pre><p id="c5c7" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">你有这个方法:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="dc81" class="my kj it mu b gy mz na l nb nc">addColor() {<br/>    Vue.set(this.banana, 'color', 'banana');<br/>}</span></pre><p id="0986" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">在页面加载时，Vue Devtools将显示一个名为banana的空对象，如下所示:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/fffc73a160a153b6cc157f3ee8232d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*0FcCBAx9ogSrmSgVi0uv-g.png"/></div></figure><p id="e0cb" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">当您使用Vue.set方法时，您会发现对象banana已经填充了propertyName和值。propertyName是颜色，值是黄色:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/60f0b1a4bdc3d2a869f870c5c93d06dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:396/format:webp/1*DXimOW8nk1HP8rhXUcusPg.png"/></div></figure><blockquote class="pj pk pl"><p id="5cb0" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">注意:您可能需要单击刷新按钮来查看Vue Devtools中的数据更改。</p></blockquote><figure class="mp mq mr ms gt og gh gi paragraph-image"><div role="button" tabindex="0" class="ok ol di om bf on"><div class="gh gi ps"><img src="../Images/14bda4f5dd1c85064d04fe824238011b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uOqCRIbvT7tsieSEXdT0lA.png"/></div></div></figure><p id="c030" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果您想实时查看数据变化，可以在模板元素中使用<code class="fe nd ne nf mu b">{{ banana }}</code>。</p><p id="869f" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在我们已经理解了Vue.set，让我们看看如何使用它来达到我们的目的</p><h2 id="736e" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">我们如何使用Vue.set</h2><p id="d221" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们的目的是<strong class="lc iu">用在<strong class="lc iu">error . response . data . errors</strong>中找到的错误消息填充LVErrors </strong></p><p id="7046" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">要使用Vue.set，我们必须遵循以下语法:</p><p id="b439" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><strong class="lc iu"> Vue.set(目标，属性名，值)</strong></p><ul class=""><li id="0a9d" class="lw lx it lc b ld ly lg lz lj ma ln mb lr mc lv pt me mf mg bi translated">我们的<strong class="lc iu">目标</strong>是<strong class="lc iu"> LVErrors </strong>。</li><li id="7af7" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv pt me mf mg bi translated">我们想要的<strong class="lc iu">属性名</strong>是<strong class="lc iu">错误名</strong>。</li><li id="8d22" class="lw lx it lc b ld mh lg mi lj mj ln mk lr ml lv pt me mf mg bi translated">我们想要的<strong class="lc iu">值</strong>就是<strong class="lc iu">错误信息</strong>。</li></ul><p id="bf81" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在的问题是“我们可以从哪里获得属性名和值？”</p><p id="7c01" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们知道可以在接收到的对象(error.response.data.errors)中找到属性名</p><p id="4aa9" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">和</p><p id="e8af" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们知道这些值在每一项的索引0处。</p><p id="c599" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">由于有多个错误需要设置，我们应该在in循环中使用一个<strong class="lc iu">。catch()像这样:</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="bf36" class="my kj it mu b gy mz na l nb nc">.catch(error =&gt; {<br/>    let errors = error.response.data.errors;<br/>    <strong class="mu iu">for </strong>(const item <strong class="mu iu">in </strong>errors) {<br/>        Vue.set(this.LVErrors, item, errors[item][0])<br/>    }<br/>});</span></pre><p id="7d4d" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在，对于errors对象中的每个项目，将设置项目名称和值。</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/38b2c9eef39d5aea330741ccc2dc23b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*TjBgHvzkYQPDKvh5URZenw.png"/></div></figure><p id="d2a0" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在，我们可以通过如下代码让所有错误出现在我们的输入旁边:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b7ec" class="my kj it mu b gy mz na l nb nc">&lt;label for="name"&gt;Name&lt;/label&gt;<br/><strong class="mu iu">&lt;span&gt;{{LVErrors.name}}&lt;/span&gt;</strong><br/>&lt;input type="text" placeholder="name" id="name" v-model="form.name"/&gt;<br/>&lt;label for="email"&gt;Email&lt;/label&gt;<br/><strong class="mu iu">&lt;span&gt;{{LVErrors.email}}&lt;/span&gt;</strong><br/>&lt;input type="text" placeholder="email" id="email" v-model="form.email"/&gt;<br/>&lt;label for="message"&gt;Message&lt;/label&gt;<br/><strong class="mu iu">&lt;span&gt;{{LVErrors.message}}&lt;/span&gt;</strong><br/>&lt;input type="text" placeholder="message" id="message" v-model="form.message"/&gt;<br/>&lt;input type="submit" @click.prevent="sendmail"/&gt;</span></pre><p id="2871" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在，在提交表单时，您将看到如下所示的内容:</p><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi or"><img src="../Images/2b9c7f8f06810048002d47c454b13d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*a90ZlV7e9GQIzimgIXIC4g.png"/></div></figure><p id="468a" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">现在是时候隐藏错误了，不管它们各自的输入框中是否有文本。</p><p id="b343" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">但在此之前，让我们给错误一些样式</p><p id="7924" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><code class="fe nd ne nf mu b">&lt;span <strong class="lc iu">class="error"</strong>&gt;{{LVErrors.name}}&lt;/span&gt;</code></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="9b63" class="my kj it mu b gy mz na l nb nc">.error {color:red;}</span></pre><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi or"><img src="../Images/a48ff02963d4b0a7fcc630d2ce9f8829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*CiMGoie5iMMzooSCtQ4Kyw.png"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h2 id="9ff4" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">填写输入时隐藏错误</h2><p id="e980" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这里我们要做的是<strong class="lc iu">观察数据变化。</strong></p><p id="2ecc" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">Vue有一个名为<code class="fe nd ne nf mu b"><strong class="lc iu">$watch</strong></code> <strong class="lc iu"> </strong>的内置方法，它允许您检测data()中的值何时发生了变化。一旦值发生变化，您就可以对数据变化进行反应/回调，这是一个函数。</p><p id="0e79" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果我们想观看<strong class="lc iu"> form.name，</strong>我们将添加以下代码:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="2832" class="my kj it mu b gy mz na l nb nc">this.$watch('form.name', function() {console.log('watching data change')})</span></pre><figure class="mp mq mr ms gt og gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/74155fbe8151187bb08e1b917f650e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*OjilWfZe73RrjCl-RJDL0w.gif"/></div></figure><p id="5890" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果你想观察整个表单对象，你必须像这样添加<code class="fe nd ne nf mu b">{deep:true}</code>:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="967a" class="my kj it mu b gy mz na l nb nc"><strong class="mu iu">this.$watch('form', </strong>function() {console.log('watching data change')<strong class="mu iu">, {deep:true});</strong></span></pre><p id="66ac" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">在我们的例子中，我们可以使用<code class="fe nd ne nf mu b"><strong class="lc iu">$watch</strong></code>来检测姓名、电子邮件或消息是否已经改变，并在呈现的页面中隐藏它们各自的错误。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a140" class="my kj it mu b gy mz na l nb nc">sendmail() {<br/>    let fd = this.appendFormData();<br/>    axios.post('api/mail', fd)<br/>        .then(response =&gt; <strong class="mu iu"><em class="oe">console</em></strong>.log(response))<br/>        .catch(error =&gt; {<br/>            let errors = error.response.data.errors;<br/>            for (const item in errors) {<br/>                Vue.set(this.LVErrors, item, errors[item][0])<br/>            }<br/>        });<br/>    <strong class="mu iu">this.$watch('form', this.watchForm, {deep:true});</strong><br/>},</span><span id="aa1d" class="my kj it mu b gy ng na l nb nc">watchForm() {<br/>    let value = <strong class="mu iu"><em class="oe">document</em></strong>.activeElement.value;<br/>    let inputId = <strong class="mu iu"><em class="oe">document</em></strong>.activeElement.id;<br/>    let errorElem = <strong class="mu iu"><em class="oe">document</em></strong>.querySelector(`span[data-id='${inputId}']`);<br/>    if (value !== "") {<br/>        errorElem.classList.add("hide");<br/>    } else {<br/>        errorElem.classList.remove("hide");<br/>    }<br/>},</span></pre><blockquote class="pj pk pl"><p id="acb1" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">代码解释:我们在<code class="fe nd ne nf mu b"><strong class="lc iu">this.$watch</strong></code> <strong class="lc iu">中调用watchForm()函数。</strong></p><p id="1b92" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">watchForm()函数根据表单输入是否被填充来隐藏和显示错误。</p><p id="045c" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">我们正在获取我们正在输入的元素的<code class="fe nd ne nf mu b"><strong class="lc iu">value</strong></code>和<code class="fe nd ne nf mu b"><strong class="lc iu">id</strong></code>(document . active element)。</p><p id="bc30" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">我们使用该id并将其与错误元素(即span) data-id进行匹配(使用document.querySelector())。</p><p id="5d9c" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">如果activeElement有输入的内容，我们添加hide类，否则我们删除hide类。</p><p id="175c" class="la lb oe lc b ld ly ju lf lg lz jx li pm mm ll lm pn mn lp lq po mo lt lu lv im bi translated">hide类是一个css类，位于style元素中</p></blockquote><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="cdb4" class="my kj it mu b gy mz na l nb nc">.hide {<br/>    opacity: 0;<br/>}</span></pre><p id="76f0" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">表单代码应该是:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="50b9" class="my kj it mu b gy mz na l nb nc">&lt;form&gt;<br/>&lt;label for="name"&gt;Name&lt;/label&gt;<br/>&lt;span class="error" <strong class="mu iu">data-id="name"</strong>&gt;{{LVErrors.name}}&lt;/span&gt;<br/>&lt;input type="text" placeholder="name" id="name" v-model="form.name"/&gt;<br/><br/>&lt;label for="email"&gt;Email&lt;/label&gt;<br/>&lt;span class="error" <strong class="mu iu">data-id="email"</strong>&gt;{{LVErrors.email}}&lt;/span&gt;<br/>&lt;input type="text" placeholder="email" id="email" v-model="form.email"/&gt;<br/><br/>&lt;label for="message"&gt;Message&lt;/label&gt;<br/>&lt;span class="error" <strong class="mu iu">data-id="message"</strong>&gt;{{LVErrors.message}}&lt;/span&gt;<br/>&lt;input type="text" placeholder="message" id="message" v-model="form.message"/&gt;<br/><br/>&lt;input type="submit" @click.prevent="sendmail"/&gt;<br/>&lt;/form&gt;</span></pre><p id="5bab" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">我们还可以通过使用三元运算符而不是if语句来重构代码。</p><h2 id="2e77" class="my kj it bd kk nt nu dn ko nv nw dp ks lj nx ny ku ln nz oa kw lr ob oc ky od bi translated">三元运算符</h2><p id="b21d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu">“三元运算符”</strong>类似于<strong class="lc iu">“if else语句”</strong>，两者都查看条件是否为真，然后对此做出响应。</p><p id="676e" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">区别在于语法。</p><p id="42d7" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">if语句的语法是:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="0eee" class="my kj it mu b gy mz na l nb nc">if (condition) {</span><span id="b9b1" class="my kj it mu b gy ng na l nb nc">// do stuff if true</span><span id="34c3" class="my kj it mu b gy ng na l nb nc">} else {</span><span id="1d3d" class="my kj it mu b gy ng na l nb nc">// do stuff if false<br/>}</span></pre><p id="8a6b" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">三元运算符的语法是:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a9bb" class="my kj it mu b gy mz na l nb nc">condition ? DO STUFF IF TRUE : DO STUFF IF FALSE</span></pre><p id="9408" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">在我们的例子中，条件是:<code class="fe nd ne nf mu b"><strong class="lc iu">value !== ""</strong></code></p><p id="8b18" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">在条件之后，我们有一个问号<code class="fe nd ne nf mu b">value !== "" <strong class="lc iu">?</strong></code></p><p id="c841" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">问号后面是条件为真时应该发生的情况。如果条件为真，我们应该添加隐藏类</p><p id="7ab8" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated"><code class="fe nd ne nf mu b">value !== "" ? <strong class="lc iu">errorElem.classList.add("hide")</strong></code></p><p id="45e0" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果为真，do stuff位后面跟一个冒号<code class="fe nd ne nf mu b">value !== "" ? <strong class="lc iu">errorElem.classList.add("hide") :</strong></code></p><p id="b25f" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">如果条件为假，我们删除隐藏类<code class="fe nd ne nf mu b">value !== "" ? errorElem.classList.add("hide") : <strong class="lc iu">errorElem.classList.remove("hide");</strong></code></p><p id="6d27" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">因此，我们的if语句被重构为:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="f11c" class="my kj it mu b gy mz na l nb nc">if (value !== "") {<br/>        errorElem.classList.add("hide");<br/>    } else {<br/>        errorElem.classList.remove("hide");<br/>    }</span></pre><p id="9d7c" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">收件人:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="709d" class="my kj it mu b gy mz na l nb nc">value !== "" ? errorElem.classList.add("hide") : <strong class="mu iu">errorElem.classList.remove("hide");</strong></span></pre><p id="95fc" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">watchform函数现在看起来像这样:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="2912" class="my kj it mu b gy mz na l nb nc">watchForm() {<br/>    let value = <strong class="mu iu"><em class="oe">document</em></strong>.activeElement.value;<br/>    let id = <strong class="mu iu"><em class="oe">document</em></strong>.activeElement.id;<br/>    let errorElem = <strong class="mu iu"><em class="oe">document</em></strong>.querySelector(`span[data-id='${id}']`);<br/>    value !== "" ? errorElem.classList.add("hide") : errorElem.classList.remove("hide");<br/>},</span></pre><p id="0d21" class="pw-post-body-paragraph la lb it lc b ld ly ju lf lg lz jx li lj mm ll lm ln mn lp lq lr mo lt lu lv im bi translated">在第19章中，我们将做联系表单的客户端验证。</p></div></div>    
</body>
</html>