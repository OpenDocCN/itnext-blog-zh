<html>
<head>
<title>Jenkins Tutorial — Part 7 — Interactive Pipelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jenkins教程—第7部分—交互式管道</h1>
<blockquote>原文：<a href="https://itnext.io/jenkins-tutorial-part-7-interactive-pipelines-a739b23ac41c?source=collection_archive---------2-----------------------#2021-10-17">https://itnext.io/jenkins-tutorial-part-7-interactive-pipelines-a739b23ac41c?source=collection_archive---------2-----------------------#2021-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c518273176f996c36d381a98cf53ea9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*isD_dDi7u493JTm4ZudxOw.jpeg"/></div></div></figure><p id="a0a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Jenkins教程的这一部分中，我将讨论一个管道<code class="fe kw kx ky kz b">input</code>指令，它用于在作业执行期间提示输入。输入指令将导致构建过程暂停，等待直接的人工交互。我们通常将此选项用于CD、连续交付、管道。如果你没有看之前的文章，我建议你先看看。除了教程的官方GitHub库中的一些例子，你还可以看到它们。</p><div class="la lb gp gr lc ld"><a href="https://github.com/ssbostan/jenkins-tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd ir gy z fp li fr fs lj fu fw ip bi translated">GitHub-ssbo stan/Jenkins-教程:完整的Jenkins CI教程，参考，牛逼，示例</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">如果你觉得有用，就看星星。Jenkins系列教程的参考和示例库。版权所有2021…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">github.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr jw ld"/></div></div></a></div><p id="f649" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，本教程的所有部分都是在以下定制的Jenkins堆栈上实现的。你也可以用它。</p><div class="la lb gp gr lc ld"><a href="https://github.com/ssbostan/jenkins-stack-kubernetes" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd ir gy z fp li fr fs lj fu fw ip bi translated">GitHub-ssbo stan/jenkins-stack-kubernetes:在Kubernetes上部署Jenkins的脚本和清单</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">如果你觉得有用，就看星星。在Kubernetes上部署Jenkins containers CI/CD堆栈的脚本和清单。的…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">github.com</p></div></div><div class="lm l"><div class="ls l lo lp lq lm lr jw ld"/></div></div></a></div><h1 id="dc6f" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">为什么以及何时使用输入指令:</h1><p id="d3d6" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">正如我前面说过的，输入指令将导致作业暂停，等待直接的人工交互。那么我们为什么需要它呢？在某些情况下，通常在连续交付管道中，我们希望在让它们进入我们的生产环境之前仔细检查一切。在这种情况下，输入指令就是我们需要的东西。input指令的另一个用途是在构建过程中获取用户值。</p><p id="40e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您应该注意这个<strong class="ka ir">重要提示</strong>，暂停构建过程将导致Jenkins作业执行器处于<strong class="ka ir">忙碌</strong>状态！如果作业执行者的数量有限，就不应该使用input指令。我将在以后的文章中解释Jenkins云代理，让我们绕过这个限制。</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f820" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的例子中，显示了输入指令的简单用法。输入指令将在评估工作台的<code class="fe kw kx ky kz b">options</code>块之后和评估工作台的<code class="fe kw kx ky kz b">agent</code>和<code class="fe kw kx ky kz b">when</code>块之前生效。</p><h1 id="8467" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">谁可以提交输入:</h1><p id="542d" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">默认情况下，任何用户都可以提交输入，但是我们可以通过使用input指令的<strong class="ka ir"> submitter </strong>选项来限制提交者。</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9232" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">提交者</strong>:允许提交该输入的用户或组的逗号分隔列表。默认为任何用户。</p><p id="2a6a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> submitterParameter </strong>:如果使用了submitter选项，该选项可用于在环境变量中设置提交者用户名。</p><h1 id="a013" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">与参数结合的输入:</h1><p id="a87e" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">正如我前面说过的，输入指令的另一个用途是在构建过程中获取用户值。通过使用输入框中的<strong class="ka ir">参数</strong>选项，我们可以要求用户提交值。</p><p id="4542" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要获得更多实际参数，请参见<a class="ae nc" rel="noopener ugc nofollow" target="_blank" href="/jenkins-tutorial-part-3-parameterized-pipeline-3898643ac6ad">这篇</a>文章。</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="928e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是一个截图示例:</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/f703706c5a601c7a74d32ffedf3d1df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSggnnMFzJ6USbH0xsBQ0g.png"/></div></div></figure><h1 id="9cbf" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">管道内的输入步骤:</h1><p id="7ff3" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">可以在管道步骤中使用input函数来暂停构建或等待用户输入值。输入函数和上面解释的输入指令之间的重要区别是输入函数在<code class="fe kw kx ky kz b">options</code>、<code class="fe kw kx ky kz b">agent</code>和<code class="fe kw kx ky kz b">when</code>块之后执行。</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="9315" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">最后一句话:</h1><p id="2712" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">input指令对于使用云代理的Jenkins环境非常有用，我将在以后的文章中介绍云代理。借助input指令的强大功能，您可以暂停人工交互的构建过程，或者在构建过程中使用它们来输入值。</p><p id="37cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关注我的LinkedIn<a class="ae nc" href="https://www.linkedin.com/in/ssbostan" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/ssbostan</a></p><p id="be58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您觉得本教程有用，请查看下面的资源库:</p><div class="la lb gp gr lc ld"><a href="https://github.com/ssbostan/jenkins-tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd ir gy z fp li fr fs lj fu fw ip bi translated">GitHub-ssbo stan/Jenkins-教程:完整的Jenkins CI教程，参考，牛逼，示例</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">如果你觉得有用，就看星星。Jenkins系列教程的参考和示例库。版权所有2021…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">github.com</p></div></div><div class="lm l"><div class="ne l lo lp lq lm lr jw ld"/></div></div></a></div></div></div>    
</body>
</html>