<html>
<head>
<title>5 Ways To Loop Over DOM Elements With QuerySelectorAll in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中使用QuerySelectorAll遍历DOM元素的5种方法</h1>
<blockquote>原文：<a href="https://itnext.io/5-ways-to-loop-over-dom-elements-from-queryselectorall-in-javascript-55bd66ca4128?source=collection_archive---------0-----------------------#2018-04-05">https://itnext.io/5-ways-to-loop-over-dom-elements-from-queryselectorall-in-javascript-55bd66ca4128?source=collection_archive---------0-----------------------#2018-04-05</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><h2 id="79a3" class="is it iu bd b dl iv iw ix iy iz ja dk jb translated" aria-label="kicker paragraph">实用指南</h2><div class=""/><div class=""><h2 id="8201" class="pw-subtitle-paragraph ka jd iu bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">用DOM中的JavaScript遍历元素</h2></div><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/da2c0a22dd527202b6f652c7248400c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WT6-5-xdsVAJ99GU"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk translated">由<a class="ae li" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">萨法尔·萨法罗夫</a>在<a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="84ae" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">有很多方法可以循环一个由querySelectorAll方法返回的NodeList对象(DOM元素列表)!在这篇文章中，我想分享5种方法。</p><p id="d11f" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">让我们从定义一段HTML和一个搜索多个元素的常量变量开始。</p><p id="761c" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je"> HTML </strong></p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="08dc" class="mk ml iu mg b gz mm mn l mo mp">&lt;div class="container" id="myContainer"&gt;<br/>		&lt;div class="fake-image"&gt;<br/>		  &lt;h2&gt;Fake image&lt;/h2&gt;<br/>		&lt;/div&gt;<br/>		&lt;div class="fake-image"&gt;<br/>		  &lt;h2&gt;Fake image&lt;/h2&gt;<br/>		&lt;/div&gt;<br/>		&lt;div class="fake-image"&gt;<br/>		  &lt;h2&gt;Fake image&lt;/h2&gt;<br/>		&lt;/div&gt;<br/>		&lt;div class="fake-image"&gt;<br/>		  &lt;h2&gt;Fake image&lt;/h2&gt;<br/>		&lt;/div&gt;<br/>	&lt;/div&gt;</span></pre><p id="573b" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je"> JavaScript </strong></p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="d577" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");</span></pre><p id="8d73" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">所以现在我们准备找出我们可以使用哪5种方法来循环这个由<code class="fe mq mr ms mg b">querySelectorAll</code>方法返回的很酷的NodeList对象。</p><p id="e79f" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果一个方法给出了一个回调选项，那么我将使用“箭头函数”来实现。</p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="324f" class="na ml iu bd nb nc nd ne nf ng nh ni nj kj nk kk nl km nm kn nn kp no kq np nq bi translated">1.For循环</h1><p id="2c52" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">循环遍历所有内容的最著名的函数是老掉牙的For-loop。这可能不是最漂亮的代码，但绝对是高性能的。</p><p id="a88e" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">所以如果你需要支持IE11或更低版本的浏览器，并且你没有使用像<a class="ae li" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank"> Babel </a>这样的编译器，那么这是你最好的武器。</p><p id="041e" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">支持:</strong>每个浏览器！</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="86d4" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	for (var i = 0; i &lt; fakeImages.length; i++) {<br/>	  console.log('fakeImage: ', fakeImages[i]);<br/>	}</span></pre></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="345c" class="na ml iu bd nb nc nd ne nf ng nh ni nj kj nk kk nl km nm kn nn kp no kq np nq bi translated">2.为..关于</h1><p id="cc12" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">我会给<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" rel="noopener ugc nofollow" target="_blank">打电话..在普通For循环的基础上进行扩展。这是因为这个函数可以循环遍历iterable对象(包括String、Array、类似数组的参数、NodeList对象、TypedArray、Map和Set)。</a></p><p id="d2b1" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果你需要支持旧的浏览器，那么你肯定需要一个像Babel这样的编译器。但是如果你只需要支持现代浏览器..会是我的首选武器！</p><p id="057e" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">支持:</strong>所有现代浏览器！IE11或更低版本不支持。</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="87fd" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	for (const fakeImage of fakeImages) {<br/>	  console.log('fakeImage: ', fakeImage);<br/>	}</span></pre></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="c588" class="na ml iu bd nb nc nd ne nf ng nh ni nj kj nk kk nl km nm kn nn kp no kq np nq bi translated">3.为..条目、关键字、值</h1><p id="bd7a" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">在前面的方法中，我们只是使用节点列表在For中循环..循环的。但是NodeList也有更多的方法可以在这个循环中使用。</p><p id="6acc" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList/entries" rel="noopener ugc nofollow" target="_blank">条目()</a>、<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList/keys" rel="noopener ugc nofollow" target="_blank">键()</a>和<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList/values" rel="noopener ugc nofollow" target="_blank">值()</a>方法返回一个<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols" rel="noopener ugc nofollow" target="_blank">迭代器</a>。迭代器是ES2015规范中一种新的可迭代协议。</p><p id="7ef2" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">在JavaScript中，某些类型的数据(数组或映射)具有内置的循环功能。</p><p id="4ef6" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">对象没有内置的循环功能。通过迭代器协议，我们可以遍历不默认支持迭代器的数据类型。</p><h2 id="967a" class="mk ml iu bd nb nw nx dn nf ny nz dp nj ls oa ob nl lw oc od nn ma oe of np ja bi translated">进入</h2><p id="a745" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">这个循环中的每一项都是一个数组，首先是键，然后是元素。这看起来可能有点滑稽，但却是意料之中的行为。</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="d7da" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	for (const fakeImage of fakeImages.entries()) {<br/>	  console.log('fakeImage: ', fakeImage);<br/>	};</span></pre><h2 id="a980" class="mk ml iu bd nb nw nx dn nf ny nz dp nj ls oa ob nl lw oc od nn ma oe of np ja bi translated">价值观念</h2><p id="08f0" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">其中entries方法给出了一个键和值的数组。这个循环中的每一项都是一个元素，换句话说，就是方法名告诉我们的值。</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="0355" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	for (const fakeImage of fakeImages.values()) {<br/>	  console.log('fakeImage: ', fakeImage);<br/>	};</span></pre><h2 id="506b" class="mk ml iu bd nb nw nx dn nf ny nz dp nj ls oa ob nl lw oc od nn ma oe of np ja bi translated">键</h2><p id="3a01" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">就像values方法为我们提供NodeList中每一项的值一样，keys方法为我们提供NodeList对象中的键。</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="ea34" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	for (const fakeImage of fakeImages.keys()) {<br/>	  console.log('fakeImage: ', fakeImage);<br/>	};</span></pre><h1 id="14e3" class="na ml iu bd nb nc og ne nf ng oh ni nj kj oi kk nl km oj kn nn kp ok kq np nq bi translated">4.为每一个</h1><p id="2f73" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">这里有一个我不知道的很酷的方法😁。就像数组方法forEach一样，<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach" rel="noopener ugc nofollow" target="_blank"> NodeList对象也有自己的forEach </a>方法。</p><p id="f154" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">最重要的一点是，它只在现代浏览器中受支持。为了支持旧浏览器，你肯定需要一个编译器。</p><p id="d48f" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">支持:</strong>所有现代浏览器！IE11或更低版本不支持。</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="e702" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	fakeImages.forEach(fakeImage =&gt; {<br/>	  console.log('fakeImage: ', fakeImage);<br/>	});</span></pre><h1 id="3c46" class="na ml iu bd nb nc og ne nf ng oh ni nj kj oi kk nl km oj kn nn kp ok kq np nq bi translated">5.(ES2015)使用forEach扩展语法</h1><p id="7698" class="pw-post-body-paragraph lj lk iu ll b lm nr ke lo lp ns kh lr ls nt lu lv lw nu ly lz ma nv mc md me in bi translated">在ES2015中，我们为阵列提供了<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank">扩展语法</a>。有了这个语法，你可以做很多很酷的事情！其中之一是，将NodeList对象转换为数组，并对其使用Array forEach方法。</p><p id="3680" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">对于老版本浏览器的支持，你肯定需要一个编译器，因为这种支持并没有在所有的现代浏览器中完全实现。</p><p id="5534" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">支持:</strong> <a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Browser_compatibility" rel="noopener ugc nofollow" target="_blank">几乎所有现代浏览器</a>！IE11或更低版本不支持。</p><pre class="kt ku kv kw gu mf mg mh mi aw mj bi"><span id="d462" class="mk ml iu mg b gz mm mn l mo mp">const fakeImages = document.querySelectorAll(".fake-image");<br/>	[...fakeImages].forEach(fakeImage =&gt; {<br/>			console.dir(fakeImage);<br/>	});</span></pre></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="3b86" class="na ml iu bd nb nc nd ne nf ng nh ni nj kj nk kk nl km nm kn nn kp no kq np nq bi translated">谢谢！</h1><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj ol"><img src="../Images/2bd571bb1ce9f466ae279fa98111b086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7pa1RpRxXqdkgYAJ"/></div></figure><p id="6169" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">读完这个故事后，我希望你学到了一些新的东西，或者受到启发去创造一些新的东西！🤗</p><p id="dc24" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果我给你留下了问题或一些要说的话作为回应，向下滚动并给我键入一条消息。如果你想保密，请在Twitter @DevByRayRay 上给我发一条<a class="ae li" href="https://twitter.com/@devbyrayray" rel="noopener ugc nofollow" target="_blank"> DM。我的DM永远是开放的😁</a></p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><p id="2ca9" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><a class="ae li" href="https://byrayray.medium.com/subscribe" rel="noopener"> <strong class="ll je">通过电子邮件获取我的文章点击这里</strong> </a> <strong class="ll je"> | </strong> <a class="ae li" href="https://byrayray.medium.com/membership" rel="noopener"> <strong class="ll je">购买5美元中等会员资格</strong> </a></p></div><div class="ab cl mt mu hy mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="in io ip iq ir"><h1 id="385c" class="na ml iu bd nb nc nd ne nf ng nh ni nj kj nk kk nl km nm kn nn kp no kq np nq bi translated">阅读更多</h1><div class="om on gq gs oo"><div role="button" tabindex="0" class="ab bv gw cb fq op oq bn or lc ex"><div class="os l"><div class="ab q"><div class="l di"><img alt="RayRay" class="l de bw ot ou fe" src="../Images/992af170033696163d6cc0269218aedd.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*1fUwrIRcFq3paK71SLifMw.png"/><div class="fb bw l ot ou fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://byrayray.medium.com/?source=post_page-----55bd66ca4128--------------------------------" rel="noopener follow" target="_top">雷雷</a></p></div></div><div class="ox oy gx l"><h2 class="bd je uc ud fq ue fs ft uf fv fx jd bi translated">荒诞的故事</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi ug au uh ui uj qr uk an eh ei ul um un el em eo de bk ep" href="https://byrayray.medium.com/list/angular-stories-24674407532a?source=post_page-----55bd66ca4128--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="uo l fp"><span class="bd b dl z dk">6 stories</span></div></div></div><div class="pk dh pl fq ab pm fp di"><div class="di pc bv pd pe"><div class="dh l"><img alt="" class="dh" src="../Images/b94f2b7d2929c90566cd2dd6f657a751.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*O_EKcNrJVWS18ZG-bP1FtA.png"/></div></div><div class="di pc bv pf pg ph"><div class="dh l"><img alt="" class="dh" src="../Images/02b73423a62d73b113af9fdf9629c79f.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*HWY53D51pJqJuCKUXFf_9g.jpeg"/></div></div><div class="di bv pi pj ph"><div class="dh l"><img alt="Stacked books" class="dh" src="../Images/b02a2f57c0093e04ab1d11d3a55f35ea.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*QhXyFtl1Xx_ptTw5"/></div></div></div></div></div><div class="om on gq gs oo"><div role="button" tabindex="0" class="ab bv gw cb fq op oq bn or lc ex"><div class="os l"><div class="ab q"><div class="l di"><img alt="RayRay" class="l de bw ot ou fe" src="../Images/992af170033696163d6cc0269218aedd.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*1fUwrIRcFq3paK71SLifMw.png"/><div class="fb bw l ot ou fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://byrayray.medium.com/?source=post_page-----55bd66ca4128--------------------------------" rel="noopener follow" target="_top">雷雷</a></p></div></div><div class="ox oy gx l"><h2 class="bd je uc ud fq ue fs ft uf fv fx jd bi translated">最新的JavaScript和TypeScript故事</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi ug au uh ui uj qr uk an eh ei ul um un el em eo de bk ep" href="https://byrayray.medium.com/list/latest-javascript-typescript-stories-0358ad941491?source=post_page-----55bd66ca4128--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="uo l fp"><span class="bd b dl z dk">14 stories</span></div></div></div><div class="pk dh pl fq ab pm fp di"><div class="di pc bv pd pe"><div class="dh l"><img alt="" class="dh" src="../Images/c93ca03b33796c40dcc47873de2697c2.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*UQtuHklwRW4uxOcO"/></div></div><div class="di pc bv pf pg ph"><div class="dh l"><img alt="" class="dh" src="../Images/86f37efa11855f6f0f0f62984c37f696.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*gHDsISflc1mS_IJIuGZMUQ.png"/></div></div><div class="di bv pi pj ph"><div class="dh l"><img alt="" class="dh" src="../Images/ddbaa6d0bea676316247e82043d60b63.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*KJ9azc_7b1b_8tKn"/></div></div></div></div></div></div></div>    
</body>
</html>