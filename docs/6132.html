<html>
<head>
<title>Easy Front end development with Mockoon</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Mockoon轻松进行前端开发</h1>
<blockquote>原文：<a href="https://itnext.io/easy-front-end-development-with-mockoon-1ff656a7dba6?source=collection_archive---------2-----------------------#2021-08-30">https://itnext.io/easy-front-end-development-with-mockoon-1ff656a7dba6?source=collection_archive---------2-----------------------#2021-08-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="befd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为一个移动开发者(或者前端),我们的主要工作之一就是集成API。与后端团队合作并不容易，有时API没有准备好，有时没有文档。</p><p id="6d4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在开发过程中的一个痛点是测试服务器响应。这里有一个场景，我刚刚开发了一个错误屏幕，但我如何测试它。我们可以在代码中编写一些模拟API来返回一些虚拟响应。尽管已经做到了这一点，但是这种方法是不可伸缩的，并且增加了开发周期。例如，如果我需要更改响应中的某些内容，我必须更改代码并重新编译它，这可能需要很长时间，具体取决于项目的复杂性。当然，我可以告诉我的后端团队暂时改变响应，但我们都知道它是怎么回事。</p><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="kq kr l"/></div></figure><h2 id="f12e" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">模仿软件</h2><p id="7950" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">在搜索了一些嘲讽的解决方案后，发现<a class="ae lq" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">邮差</strong> </a>和<a class="ae lq" href="https://www.charlesproxy.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">查尔斯</strong> </a> <strong class="jp ir">代理</strong>但都是付费解决方案。谢天谢地我的一个学长找到了名为<a class="ae lq" href="https://github.com/mockoon/mockoon" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">mocoon</strong></a>的FOSS软件。它的灵活性、免费性和与构建变体的结合(我将在后面解释)将极大地提高你的开发效率。</p><p id="7e63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">模拟卡通设置</strong></p><p id="b133" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们设置mockoon。从<a class="ae lq" href="https://mockoon.com/" rel="noopener ugc nofollow" target="_blank">这里</a>为您的操作系统下载并安装mockoon。让我们来了解一下mockoon的一些基础知识。有关更深入的信息，您可以参考文档本身。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lr"><img src="../Images/4c0364e8b305382ce9c295618a2edb3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g88cPUy6HsfqbgACOjTzRA.png"/></div></div></figure><ol class=""><li id="5eb4" class="ly lz iq jp b jq jr ju jv jy ma kc mb kg mc kk md me mf mg bi translated">环境:把它想象成你的API，它运行在特定的端口上，包含所有的端点。您可以创建多个环境(稍后我将分享我如何使用它来更改端点而无需重新编译应用程序)。</li><li id="124f" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">路线:您可以在这里创建新路线。指定端点的路径(服务器地址后面的部分)和请求类型(GET、POST)。</li><li id="445f" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">端口:运行服务器的端口。尝试给出一些独特的端口。</li><li id="b711" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">响应:您可以创建许多响应类型，并手动或通过创建一些规则来返回它们。</li><li id="109c" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">回应代码:您可以为创建的每个回应指定回应代码。</li><li id="4a50" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">延迟:如果你想模拟一些加载，这是非常方便的。这些值以毫秒为单位(1秒= 1000毫秒)。</li><li id="cb20" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">响应主体:响应主体。您也可以将文件作为响应正文返回。</li><li id="5919" class="ly lz iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">历史:您可以在此处查看该环境的历史。这在开发过程中非常有用，因为您可以看到整个请求和响应，而不必在应用程序中实现或使用一些日志库来打印网络请求/响应。</li></ol><p id="4bc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我对这些类型的模仿软件的一个担心是需要模仿所有的请求，但是mockoon不是这样。它支持部分模仿。</p><h2 id="e1f5" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">什么是部分模拟？</h2><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mm"><img src="../Images/1d1c6dac562bd473a9df4830d55fa251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNfhRFpcMwDAGPDGDR90gw.jpeg"/></div></div></figure><p id="4e31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顾名思义，部分模拟允许我们只指定我们想要模拟的路由，并通过所有其他路由传递给实际的API。</p><p id="b293" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这个强大的特性，我们可以设置我们的环境来简化开发。</p><h2 id="c74f" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">我的模拟卡通设置</h2><p id="0279" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">对于一个特定的项目，我通常创建如下所示的三个环境。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mn"><img src="../Images/46d5dcaac115f2cd7fcab505d8a0ba5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4LbBNbVWZf6fGdX7CNRsw.png"/></div></div></figure><h2 id="0ae3" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">API模拟</h2><p id="830c" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">这是完全脱机的，包含所有端点的响应(或者只包含您关心的端点)。您可以请求您的后端团队以swagger或postman格式导出端点，然后您可以在这里导入它。如果你的后端团队不够友好，我会告诉你一个方法，在我们设置代理后添加路线。有了它，你可以在没有互联网的情况下工作(但像所有伟大的程序员一样，你可能不会，因为我们最好的朋友<strong class="jp ir">斯塔克伟福</strong>不会在你身边)。我大多是用这种模式做开发。</p><h2 id="40f1" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">API部分</h2><p id="6b31" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">在这个环境中，您设置代理并提供一些您当前正在处理的端点。这种情况的用例是，如果您只想模拟您正在处理的特定功能的某个端点集，并让一切保持原样，这将是保留它的地方。这里没有定义的所有其他端点都将被转发到您实际的API。</p><p id="8984" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是如何设置代理。</p><ol class=""><li id="8f81" class="ly lz iq jp b jq jr ju jv jy ma kc mb kg mc kk md me mf mg bi translated">单击设置图标</li></ol><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mo"><img src="../Images/721a6f1a7b8596d29f2f2d36e22d0066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iz2pYBTnBFToqvYuUjmQTw.png"/></div></div></figure><p id="5c04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.启用代理并输入您的API地址。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mp"><img src="../Images/3466fbc82f03d6689c0f02eb99b2485b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6oJeTFMvv87-x4wHJADgTg.png"/></div></div></figure><p id="1b7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你完了。现在，您在这个环境中定义的任何路由都将被嘲笑，所有其他请求都将被转发到指定的地址。</p><h2 id="344f" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">API传递</h2><p id="d2c3" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">这是空的(不包含端点),我用它将所有请求传递给服务器。你可以通过移除<strong class="jp ir"> API部分</strong>环境中的所有端点来达到同样的效果，但是我发现这种方式很简单。</p><p id="0e8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是如何直接从mockoon向您的环境添加路线。通过环境启动<strong class="jp ir"> API(或者在空环境中配置),然后从你的应用发出请求。您可以通过点击历史图标在mockoon中查看日志。</strong></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mq"><img src="../Images/693685489a5a2bb65e9a3003e4573b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fXkpoj14wzp26WStqEDMGw.png"/></div></div></figure><p id="8a02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后点击路线中的添加按钮。这应该会将路由添加到您当前的环境中，并带有响应。然后你可以通过右击路线并选择<code class="fe mr ms mt mu b">Duplicate to environment</code>将路线移动到其他环境。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mp"><img src="../Images/af7ac8cdd3ca59a4731d6a0fa286f1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TZCyFtDMaazv1faW1vwuMw.png"/></div></div></figure><h2 id="f8d3" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">为什么有这么多环境？</h2><p id="80e2" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">这种方法的主要好处是，您不必更改应用程序代码中的任何内容来更改端点。只要你的应用指向mockoon，你就可以通过使用代理功能来控制你想把它转发到哪里。如果您有用于开发、试运行和生产的API，并且希望在特定的API上测试您的应用程序，这将非常有用。只需创建一个新环境(使用相同的端口)，然后指定代理地址。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/aef14e5b322c636a3464c8e97dbe5a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*qeUkM3b84LWbiZ45liWoLQ.png"/></div></figure><p id="b198" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要注意的一点是，所有这些环境共享同一个端口，一次只能使用一个环境。</p><h2 id="9acf" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">反应</h2><p id="e4e0" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">让我们添加一些端点，并了解如何根据不同的条件返回不同的响应。您可以使用规则根据查询或正文返回不同的响应。我相信你可以创建一个成熟的服务器，但我不推荐这样做。</p><p id="c456" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以创建一组固定的响应，并在它们之间进行切换(您可以通过替换或编辑路由主体来达到相同的效果，但这容易出错且不可维护)。</p><h2 id="ec17" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">添加响应变量</h2><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mw"><img src="../Images/4e16873d29d717b1d800f5cff79bd93a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MlIqIZ-usIgOxRGEj1j4Q.png"/></div></div></figure><p id="1eed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以通过点击添加按钮(<strong class="jp ir"> 1 </strong>)然后选择响应代码(<strong class="jp ir"> 2 </strong>)来添加新的响应变量。您可以提供一些名称以便于识别(<strong class="jp ir"> 3 </strong>)并最终提供响应体(<strong class="jp ir"> 4 </strong>)。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mo"><img src="../Images/57ad00f049f2f0dc1ffade88941f2872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HttcxTXsX2Q-MD6Mln9Zgw.png"/></div></div></figure><p id="61a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以通过将其拖到顶部来切换到新的响应变体(注意，仅单击它不会发送请求，您必须将其拖到顶部，<a class="ae lq" href="https://github.com/mockoon/mockoon/issues/252" rel="noopener ugc nofollow" target="_blank">他们正在努力使其更容易</a>)。</p><p id="85f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您希望基于请求参数返回不同的响应，那么您可以使用规则。以下是如何做到这一点。假设您希望在用户id有效时返回success，当它为-1时返回error。</p><p id="121f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将像这样向服务器发送一个包含id的用户json。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mx"><img src="../Images/08b7dea034d93ee9ee9476346dbc0cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DugBzyVTc-lpXTjTiRCvTQ.png"/></div></div></figure><p id="bc96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后创建两个响应。一个代表成功，另一个代表失败。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi my"><img src="../Images/8664440db5bf0cfc93712a6463414a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VCxRqPoS6EzW6VtjVyMzIQ.png"/></div></div></figure><p id="386d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">若要成功，请转到rules选项卡并添加以下规则。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mz"><img src="../Images/fa7aa159c554a650e7def11bb1a32d4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W6mCJDOIvWOZHWAtvbY3GQ.png"/></div></div></figure><ol class=""><li id="3e90" class="ly lz iq jp b jq jr ju jv jy ma kc mb kg mc kk md me mf mg bi translated">选择查找数据的位置。您可以从<code class="fe mr ms mt mu b">body</code>、<code class="fe mr ms mt mu b">query</code>、<code class="fe mr ms mt mu b">header</code>、<code class="fe mr ms mt mu b">router params</code>或<code class="fe mr ms mt mu b">request number</code>中选择。请求编号是一项功能，允许您针对特定数量的请求发送特定的响应。如果您想发送特定的响应，比如说第三个请求，这很有用。</li></ol><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi na"><img src="../Images/8808be488a9090f5c201c7e001af56cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1KN7sTWQ0a6vt_yBWrNgg.png"/></div></div></figure><p id="fd9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.要检查的值，在我们的例子中是<code class="fe mr ms mt mu b">user.id</code>。</p><p id="88b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.指定参数的值。</p><p id="3a61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于失败，我们也可以这样做。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nb"><img src="../Images/e4a2b06b41d9eb0b7f17524d4dc61e98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kpEK7al5fNSpuupyOz6u9Q.png"/></div></div></figure><p id="b3db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，不要忘记将环境头设置为<code class="fe mr ms mt mu b">Content-Type</code>到<code class="fe mr ms mt mu b">application/json</code>，因为在android中使用改进可能会导致一些问题，所以为了安全起见，请像这样使用环境头。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nc"><img src="../Images/d8176c15b32427fd9f24038280cd8fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7-BecjF0BN5Zo_BVMmgLvw.png"/></div></div></figure><p id="9ea9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可能还有其他我不知道的伟大特性。您可以参考所有特性的文档。</p><h2 id="a569" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">项目设置</h2><h2 id="11b0" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">Android设置</h2><p id="71af" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">为了使开发变得容易，我创建了一个名为<code class="fe mr ms mt mu b">mock</code>的新变体，并且只将其用于开发。下面是模拟变体。</p><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="kq kr l"/></div></figure><p id="1881" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个想法非常简单，使用BuildConfig导出BASE_URL，并在代码中使用它。无论何时你改变变量，端点都会改变。</p><p id="b480" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你们可能想知道为什么我用<code class="fe mr ms mt mu b">localhost</code>而不是<code class="fe mr ms mt mu b">10.0.2.2</code>。<code class="fe mr ms mt mu b">10.0.2.2</code>指向你的开发机器的本地主机，但是只在模拟器上工作。如果你试图在真实设备上运行这个版本，它不会工作。所以我们正在使用<code class="fe mr ms mt mu b">localhost</code>，并将使用端口转发来连接开发机的端口和你的测试设备(仿真器或真实设备)。</p><pre class="kl km kn ko gt nd mu ne nf aw ng bi"><span id="6cf8" class="ks kt iq mu b gy nh ni l nj nk">adb reverse tcp:3000 tcp:3000</span></pre><p id="b427" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您连接了多个设备，那么使用<code class="fe mr ms mt mu b">-s</code>标志来指定设备。</p><pre class="kl km kn ko gt nd mu ne nf aw ng bi"><span id="9455" class="ks kt iq mu b gy nh ni l nj nk">adb -s device_id reverse tcp:3000 tcp:3000</span></pre><h2 id="fe7f" class="ks kt iq bd ku kv kw dn kx ky kz dp la jy lb lc ld kc le lf lg kg lh li lj lk bi translated">IOS</h2><p id="b0f3" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy ln ka kb kc lo ke kf kg lp ki kj kk ij bi translated">对于IOS，您可以创建一个名为<code class="fe mr ms mt mu b">mock</code>的新目标，并在那里设置端点变量。你可以参考这篇关于使用配置生成器创建新目标的文章。</p><p id="ddd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要记住的一点是，IOS模拟器没有自己的网络堆栈。所以你必须指定<code class="fe mr ms mt mu b">localhost</code>作为你的mockoon的地址。我发现使用mockoon进行开发的一个主要好处是日志记录。您可以很容易地看到日志及其请求和响应正文。</p><p id="8bf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还没有在真实设备上测试过。我相信这种方法是行不通的，我也不知道我们是否可以在ios设备上使用端口转发。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mo"><img src="../Images/6666590e0dd67ef07d069eb151da25ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a_U9v_yCNvfZSC8hfkHhsA.png"/></div></div></figure><p id="ee1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文到此为止。希望这篇文章对你有帮助。Moockoon 是一个很棒的软件，去github上支持它吧。</p></div></div>    
</body>
</html>