<html>
<head>
<title>Getting started with Redis on AWS — the easy way!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS上的Redis入门——最简单的方法！</h1>
<blockquote>原文：<a href="https://itnext.io/getting-started-with-redis-on-aws-the-easy-way-11afe9717dc2?source=collection_archive---------0-----------------------#2022-05-12">https://itnext.io/getting-started-with-redis-on-aws-the-easy-way-11afe9717dc2?source=collection_archive---------0-----------------------#2022-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e45d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">该快速入门使用AWS Cloud9 IDE帮助您快速启动和运行Redis的MemoryDB】</em></h2></div><p id="48d8" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">当我最初探索一些AWS服务(如MemoryDB、MSK、Redis的Elasticache等)时。)，我通常按照文档来设置EC2，SSH到实例中，安装/复制东西(语言、运行时、代码、客户机等)。)然后去尝试。大多数情况下，第一步是最难的，对于开发人员来说，尽可能减少摩擦以“开始工作”是很重要的。</p><p id="b60b" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">当我寻找更简单/更快捷的方法时，我发现了<a class="ae lc" href="https://aws.amazon.com/cloud9/" rel="noopener ugc nofollow" target="_blank"> AWS Cloud9 </a>，结果证明它非常有用。它快速、可预测，并且有一堆有用的工具随时可用。在这篇博客中，我将提供一步一步的指导，告诉你如何使用<code class="fe ld le lf lg b">Cloud9</code>轻松快速地开始(并继续试验/构建/开发)Amazon MemoryDB for Redis。</p><blockquote class="lh li lj"><p id="902e" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><a class="ae lc" href="https://docs.aws.amazon.com/memorydb/latest/devguide/what-is-memorydb-for-redis.html" rel="noopener ugc nofollow" target="_blank"><em class="iq">Amazon MemoryDB for Redis</em></a><em class="iq">是一个持久的内存数据库服务，它与Redis兼容，从而使您能够使用他们现在已经使用的灵活友好的Redis数据结构、API和命令来构建应用程序。它与亚马逊VPC完全集成，集群始终在VPC启动。</em></p></blockquote><p id="e677" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="ki ir">你不需要在本地机器上安装任何东西来完成本教程。</strong></p><p id="e70d" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">你唯一需要的就是一个AWS账户(当然！)—所以确保你有一个<a class="ae lc" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank">(甚至免费层也可以)</a></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="5ba9" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">设置Cloud9和MemoryDB</h1><p id="ebb7" class="pw-post-body-paragraph kg kh iq ki b kj mn jr kl km mo ju ko kp mp kr ks kt mq kv kw kx mr kz la lb ij bi translated">如果你是AWS(或memory db/任何其他服务)的新手，我建议你使用AWS控制台手动完成设置(而不是使用<a class="ae lc" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html" rel="noopener ugc nofollow" target="_blank"> CloudFormation </a>或其他工具)。这为您提供了可用选项的概述，并且在您尝试使用AWS CLI、CDK、CloudFormation等实现自动化时会有所帮助。</p><p id="047a" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="ki ir"> Cloud9环境</strong></p><p id="19ca" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这很简单——文档<a class="ae lc" href="https://docs.aws.amazon.com/cloud9/latest/user-guide/tutorial.html" rel="noopener ugc nofollow" target="_blank">像预期的那样工作。</a></p><p id="264b" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">转到AWS控制台&gt; Cloud9:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/2856049709dd97ac88abc97d86651249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kShYqf_XyNAjpaPC.png"/></div></div></figure><p id="c978" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">只需输入您的环境名称:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/fde7908b2e7eee6eaf5d80709343742f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B9oaq2G67V3WTfaU.png"/></div></div></figure><p id="02a1" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">您可以在第二个屏幕上安全地选择默认值:</p><ul class=""><li id="c1a9" class="ne nf iq ki b kj kk km kn kp ng kt nh kx ni lb nj nk nl nm bi translated">Amazon Linux 2将有一个<code class="fe ld le lf lg b">t2.micro</code>节点类型(1 GiB RAM + 1 vCPU ),它将在30分钟后自动休眠(如果不使用)</li><li id="c1b2" class="ne nf iq ki b kj nn km no kp np kt nq kx nr lb nj nk nl nm bi translated">该实例将被放置在<a class="ae lc" href="https://docs.aws.amazon.com/vpc/latest/userguide/default-vpc.html" rel="noopener ugc nofollow" target="_blank">默认VPC </a>(任何AZ中的任何子网)中。—还将创建一个安全组</li></ul><p id="c62d" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">目前这已经足够好了。</p><p id="a508" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在最后一页，检查您的设置，点击<strong class="ki ir">创建环境</strong>，您应该可以开始比赛了！</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/755746275e1c3904e859614849793f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cBkQWRR4WLbB39__.png"/></div></div></figure><p id="314c" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="ki ir">Redis的内存数据库</strong></p><p id="16b2" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">同样，<a class="ae lc" href="https://docs.aws.amazon.com/memorydb/latest/devguide/getting-started.createcluster.html" rel="noopener ugc nofollow" target="_blank">文档</a>按预期工作。有几个配置旋钮，但我会建议你保持简单:</p><ul class=""><li id="3854" class="ne nf iq ki b kj kk km kn kp ng kt nh kx ni lb nj nk nl nm bi translated">单节点集群—选择<code class="fe ld le lf lg b">db.t4g.small</code>节点类型(目前已经足够)</li><li id="9fa0" class="ne nf iq ki b kj nn km no kp np kt nq kx nr lb nj nk nl nm bi translated">放置<strong class="ki ir">默认vpc </strong> —您将在创建子网组(在MemoryDB中)时选择此选项(连同子网)</li><li id="5c59" class="ne nf iq ki b kj nn km no kp np kt nq kx nr lb nj nk nl nm bi translated">确保还设置了ACL和凭证(连接到MemoryDB的用户名和密码)</li></ul><p id="29fc" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">请耐心等待，群集应该在几分钟后准备好:)</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/9ac8ab11b60d21d2cf1508b1f534ebfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IsJaQRwwd72ObrZ3.png"/></div></div></figure><p id="d3a3" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="ki ir">安全配置</strong></p><p id="aac7" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">您需要添加配置，以允许从<code class="fe ld le lf lg b">Cloud9</code>实例访问您的MemoryDB集群。</p><p id="85ae" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">首先，复制您的<code class="fe ld le lf lg b">Cloud9</code>实例的安全组ID:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/923c5c7eed3b55d03b2b0ee7839b4f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oe_HYNrdRDbzadik.png"/></div></div></figure><p id="cffc" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">然后，打开MemoryDB集群的安全组:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/4b503dc05ab558434a3a43725b772c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dgX1eR__zRUK_GxA.png"/></div></div></figure><p id="bad5" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">添加一个<em class="lk">入站</em>安全规则:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/c657ca6d1f3b12a621a70d2a37e72fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r9f0d3MpuTzuHkZ0.png"/></div></div></figure><blockquote class="lh li lj"><p id="30f5" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><em class="iq">规则说:允许与</em>源<em class="iq">安全组(本例中为</em> <code class="fe ld le lf lg b"><em class="iq">Cloud9</em></code> <em class="iq">)关联的实例访问与</em>目标<em class="iq">安全组</em>关联的实例的TCP端口 <code class="fe ld le lf lg b"><em class="iq">6379</em></code> <em class="iq"/></p></blockquote><h1 id="5789" class="lv lw iq bd lx ly ns ma mb mc nt me mf jw nu jx mh jz nv ka mj kc nw kd ml mm bi translated">你都准备好了！</h1><p id="60f2" class="pw-post-body-paragraph kg kh iq ki b kj mn jr kl km mo ju ko kp mp kr ks kt mq kv kw kx mr kz la lb ij bi translated">导航到您的Cloud9 IDE:</p><p id="e2d6" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">转到AWS控制台&gt;云9:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/d259045bf5d7f28231d13546248472ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PZ7ysd0XTzJf0fe9.png"/></div></div></figure><p id="1f2a" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">您的<code class="fe ld le lf lg b">Cloud9</code> env应该打开——您应该看到一个终端。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="8a41" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">连接到MemoryDB —最简单的方法</h1><p id="b438" class="pw-post-body-paragraph kg kh iq ki b kj mn jr kl km mo ju ko kp mp kr ks kt mq kv kw kx mr kz la lb ij bi translated">最简单的方法是使用<a class="ae lc" href="https://redis.io/docs/manual/cli/" rel="noopener ugc nofollow" target="_blank"> redis-cli </a>。您不需要单独安装它——让我们直接使用Docker，因为它已经为我们预装了！</p><p id="3a41" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><code class="fe ld le lf lg b">redis-cli</code>在<code class="fe ld le lf lg b">redis</code>容器本身中是可用的，因此您可以从那里启动并使用它。从<a class="ae lc" href="https://hub.docker.com/_/redis" rel="noopener ugc nofollow" target="_blank"> DockerHub </a> - <code class="fe ld le lf lg b">docker pull redis</code>中提取Redis Docker图像</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="d165" class="ob lw iq lg b gy oc od l oe of">Admin:~/environment $ docker pull redis</span><span id="41ce" class="ob lw iq lg b gy og od l oe of">Using default tag: latest<br/>latest: Pulling from library/redis<br/>214ca5fb9032: Pull complete <br/>9eeabf2ad250: Pull complete <br/>b8eb79a9f3c4: Pull complete <br/>0ba9bf1b547e: Pull complete <br/>2d2e2b28e876: Pull complete <br/>3e45fcdfb831: Pull complete <br/>Digest: sha256:180582894be9a7d5f1201877744b912945a8f9a793a65cd66dc1af5ec3fff0fc<br/>Status: Downloaded newer image for redis:latest<br/>docker.io/library/redis:latest</span></pre><p id="ba5d" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">运行容器:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="e254" class="ob lw iq lg b gy oc od l oe of">Admin:~/environment $ docker run --rm -it redis /bin/bash<br/>root@429f8fabaf09:/data#</span></pre><blockquote class="lh li lj"><p id="797e" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><em class="iq">现在你在一个终端(Cloud9 IDE)的一个终端内部(容器内)；)</em></p></blockquote><p id="fc03" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">复制MemoryDB集群的集群端点，并将其设置为环境变量</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/4421b6ffc0009f76bb4ed8bb39e1c64a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C7hszVK9KpDpFB-P.png"/></div></div></figure><blockquote class="lh li lj"><p id="e0bc" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><em class="iq">确保从集群端点删除端口(</em> <code class="fe ld le lf lg b"><em class="iq">:6379</em></code> <em class="iq">)，因为</em> <code class="fe ld le lf lg b"><em class="iq">redis-cli</em></code> <em class="iq">会自动追加:</em></p></blockquote><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="50fc" class="ob lw iq lg b gy oc od l oe of">export MEMORYDB_CLUSTER_ENDPOINT=&lt;memorydb cluster endpoint without the :6379 part)</span><span id="c0a3" class="ob lw iq lg b gy og od l oe of">redis-cli -c --user &lt;memorydb username&gt; --askpass -h $MEMORYDB_CLUSTER_ENDPOINT --tls --insecure</span></pre><blockquote class="lh li lj"><p id="1de0" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><code class="fe ld le lf lg b"><em class="iq">--askpass</em></code> <em class="iq">会提示你输入密码——输入它。</em></p></blockquote><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/bff8247a290ba64d67686cb24db86ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_LADJeApChHuCIXQ.png"/></div></div></figure><p id="ebb2" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">Wohoo！现在，您从Cloud9实例中的Docker容器内部连接到了MemoryDB集群。</p><p id="13e7" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">传统的<code class="fe ld le lf lg b">hello world</code>舞蹈时间到了！</p><p id="c3ef" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在终端中:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="20c0" class="ob lw iq lg b gy oc od l oe of">SET hello world<br/>SET foo bar</span></pre><blockquote class="lh li lj"><p id="8918" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated">你应该从MemoryDB 得到一个 <code class="fe ld le lf lg b"><em class="iq">OK</em></code> <em class="iq">响应</em></p></blockquote><p id="c944" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">到目前为止一切顺利！您可以使用标准工具(<code class="fe ld le lf lg b">redis-cli</code>)来连接新创建的MemoryDB集群。这有利于健全性/连接性测试，但你也可以做一些“轻量级”开发，运行一些程序来执行MemoryDB上的操作——这是下一个逻辑步骤。</p><p id="2b6b" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">让我们开始吧。下面的例子展示了一个Go程序，但是你也可以使用你自己选择的语言。毕竟，大多数语言运行时(如Java、Python、Node.js、Go等。)来预装在Cloud9环境下！看看这个<a class="ae lc" href="https://docs.aws.amazon.com/cloud9/latest/user-guide/language-support.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/cloud 9/latest/user-guide/language-support . html</a></p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/673a71edbffb3e09a2242e64ceba07d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iZFBJb3aScUaaljH.png"/></div></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="8d09" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">运行程序以连接MemoryDB</h1><p id="4c46" class="pw-post-body-paragraph kg kh iq ki b kj mn jr kl km mo ju ko kp mp kr ks kt mq kv kw kx mr kz la lb ij bi translated">代码在GitHub上，所以只需克隆它并更改到正确的文件夹:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="2946" class="ob lw iq lg b gy oc od l oe of">git clone https://github.com/abhirockzz/memorydb-cloud9-quickstart<br/>cd memorydb-cloud9-quickstart</span></pre><p id="c1e5" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">设置环境变量并运行程序！</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="1de7" class="ob lw iq lg b gy oc od l oe of">export MEMORYDB_CLUSTER_ENDPOINT=&lt;memorydb cluster endpoint (with the port)&gt;<br/>export MEMORYDB_USERNAME=&lt;memorydb username&gt;<br/>export MEMORYDB_PASSWORD=&lt;memorydb password&gt;</span><span id="c9ab" class="ob lw iq lg b gy og od l oe of">go run main.go</span></pre><p id="2435" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">下面是我运行它时的输出:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="20e3" class="ob lw iq lg b gy oc od l oe of">Admin:~/environment/memorydb-cloud9-quickstart (master) $ go run main.go </span><span id="049e" class="ob lw iq lg b gy og od l oe of">go: downloading github.com/go-redis/redis/v8 v8.11.5<br/>go: downloading github.com/gorilla/mux v1.8.0<br/>go: downloading github.com/cespare/xxhash/v2 v2.1.2<br/>go: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f<br/>2022/05/12 04:53:46 connecting to cluster ****************(redacted)<br/>2022/05/12 04:53:46 successfully connected to cluster<br/>2022/05/12 04:53:46 started HTTP server....</span></pre><p id="4ad3" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这将启动一个公开几个端点的HTTP服务器。让我们试用一下。</p><blockquote class="lh li lj"><p id="86ed" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><em class="iq">在Cloud9中打开一个单独的终端，运行下面的命令</em></p></blockquote><p id="a0bb" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">首先，看一下集群信息:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="1151" class="ob lw iq lg b gy oc od l oe of">curl -i http://localhost:8080/</span><span id="32dd" class="ob lw iq lg b gy og od l oe of">HTTP/1.1 200 OK<br/>Date: Thu, 12 May 2022 04:57:03 GMT<br/>Content-Length: 354<br/>Content-Type: text/plain; charset=utf-8</span><span id="e88b" class="ob lw iq lg b gy og od l oe of">[{"Start":0,"End":16383,"Nodes":[{"ID":"3a0ef99406d4165fab450fde6c0a4eac3ee8f215","Addr":"****************.amazonaws.com:6379"},{"ID":"2b5a4663a9183f7921517c6f14195e9d26a6ca79","Addr":"****************.amazonaws.com:6379"}]}]</span></pre><p id="5d09" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们得到了集群中碎片以及单个节点的信息。</p><blockquote class="lh li lj"><p id="4623" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><em class="iq">你的情况会有所不同</em></p></blockquote><p id="6914" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">还记得我们之前用<code class="fe ld le lf lg b">redis-cli</code>执行过<code class="fe ld le lf lg b">SET hello world</code>吗？让我们来看看<code class="fe ld le lf lg b">GET</code>现在的价值:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="3d7a" class="ob lw iq lg b gy oc od l oe of"># get the value for the key "hello"</span><span id="4345" class="ob lw iq lg b gy og od l oe of">Admin:~/environment $ curl -i localhost:8080/hello<br/>HTTP/1.1 200 OK<br/>Date: Thu, 12 May 2022 04:54:45 GMT<br/>Content-Length: 32<br/>Content-Type: text/plain; charset=utf-8</span><span id="0d3d" class="ob lw iq lg b gy og od l oe of">{"Key":"hello","Value":"world"}</span></pre><p id="9137" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">对按键<code class="fe ld le lf lg b">foo</code>进行同样的操作:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="dec3" class="ob lw iq lg b gy oc od l oe of">Admin:~/environment $ curl -i localhost:8080/foo<br/>HTTP/1.1 200 OK<br/>Date: Thu, 12 May 2022 04:55:44 GMT<br/>Content-Length: 28<br/>Content-Type: text/plain; charset=utf-8</span><span id="4346" class="ob lw iq lg b gy og od l oe of">{"Key":"foo","Value":"bar"}</span></pre><p id="4a53" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">像预期的那样工作——不存在的键怎么办？</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="c4db" class="ob lw iq lg b gy oc od l oe of">Admin:~/environment $ curl -i localhost:8080/notthere<br/>HTTP/1.1 404 Not Found<br/>Date: Thu, 12 May 2022 04:56:23 GMT<br/>Content-Length: 0</span></pre><p id="eb2d" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">很公平。最后，您可以设置自己的键值:</p><pre class="mt mu mv mw gt nx lg ny nz aw oa bi"><span id="b28b" class="ob lw iq lg b gy oc od l oe of">Admin:~/environment $ curl -i -X POST -d 'redis' localhost:8080/awsome<br/>HTTP/1.1 200 OK<br/>Date: Thu, 12 May 2022 04:59:25 GMT<br/>Content-Length: 0</span><span id="6a34" class="ob lw iq lg b gy og od l oe of">Admin:~/environment $ curl -i localhost:8080/awsome<br/>HTTP/1.1 200 OK<br/>Date: Thu, 12 May 2022 05:00:51 GMT<br/>Content-Length: 33<br/>Content-Type: text/plain; charset=utf-8</span><span id="74d4" class="ob lw iq lg b gy og od l oe of">{"Key":"awsome","Value":"redis"}</span></pre><p id="6894" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">好了，一切正常！</p><blockquote class="lh li lj"><p id="5fb0" class="kg kh lk ki b kj kk jr kl km kn ju ko ll kq kr ks lm ku kv kw ln ky kz la lb ij bi translated"><em class="iq">示例应用程序的</em> <code class="fe ld le lf lg b"><em class="iq">Dockerfile</em></code> <em class="iq">也存在于Github repo中，以防您想要构建docker映像并运行它。</em></p></blockquote></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="b93d" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">打扫</h1><p id="6e06" class="pw-post-body-paragraph kg kh iq ki b kj mn jr kl km mo ju ko kp mp kr ks kt mq kv kw kx mr kz la lb ij bi translated">完成后，不要忘记:</p><ul class=""><li id="fd1e" class="ne nf iq ki b kj kk km kn kp ng kt nh kx ni lb nj nk nl nm bi translated">删除MemoryDB集群，并</li><li id="b6b8" class="ne nf iq ki b kj nn km no kp np kt nq kx nr lb nj nk nl nm bi translated">云9环境</li></ul><p id="1e55" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这个博客到此为止。我希望您能够跟上——设置一个MemoryDB集群和一个Cloud9环境(以及一个现成的IDE和终端！).在docker中使用<code class="fe ld le lf lg b">redis-cli</code>做了一些初始连接测试之后，您还运行了一个测试程序来做更多的实验。</p><p id="063e" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated"><strong class="ki ir">这一切只需您的浏览器！</strong></p><p id="81c8" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我希望这是有用的，你可以重复使用这种特殊的设置，要求和编程语言。编码快乐！</p></div></div>    
</body>
</html>