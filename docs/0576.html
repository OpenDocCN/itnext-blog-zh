<html>
<head>
<title>Angular CLI &amp; Yarn Workspaces</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度气候和纱线工作空间</h1>
<blockquote>原文：<a href="https://itnext.io/angular-cli-yarn-workspaces-76df0063fd5?source=collection_archive---------6-----------------------#2018-04-03">https://itnext.io/angular-cli-yarn-workspaces-76df0063fd5?source=collection_archive---------6-----------------------#2018-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0f70" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在Angular CLI项目中使用yarn工作空间和git子模块</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0fa0c7b9d4eea00c0b8ae1168a54341e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4LdlqLkH_Y1z-n1mRoaBg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">有角度的CLI +纱线+ GIT</figcaption></figure><blockquote class="ky kz la"><p id="e429" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><a class="ae ly" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fangular-cli-yarn-workspaces-76df0063fd5%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank">点击这里在LinkedIn上分享这篇文章</a></p></blockquote><p id="4203" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">有时我们想要创建私有模块并在项目间共享它们。最好的方法之一是使用git子模块和yarn工作空间。</p><p id="abf0" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">我将展示如何做到这一点，并在Angular CLI项目中使用该模块。首先，让我们创建我们的共享模块。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="9b0c" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">模块最重要的部分之一是package.json，这里我们至少要声明包的<strong class="le iu">名</strong>和<strong class="le iu">版本</strong>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">共享模块的package.json</figcaption></figure><p id="431e" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">模块依赖关系也必须在这里声明。如果你不知道<em class="ld"> peerDependencies、</em>dependencies、<em class="ld"> devDependencies </em>之间的区别，请<a class="ae ly" href="https://yarnpkg.com/en/docs/dependency-types" rel="noopener ugc nofollow" target="_blank">点击此处</a>查看yarn如何处理依赖关系。</p><p id="086a" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">之后，让我们在Angular CLI项目中创建一个名为<strong class="le iu"> <em class="ld"> packages </em> </strong>的文件夹。然后使用GIT子模块命令添加共享模块:</p><blockquote class="ky kz la"><p id="80a1" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">吉特子模块添加<a class="ae ly" href="https://github.com/shared-module" rel="noopener ugc nofollow" target="_blank">https://link-for.the/shared-module</a></p></blockquote><p id="7d59" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">现在我们有了共享模块，让我们启用yarn工作空间。为此，我们必须在package.json中添加下面一行。</p><blockquote class="ky kz la"><p id="6cfa" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">工作区:["packages/*"]</p></blockquote><p id="af28" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">然后，在Angular CLI项目的package.json上添加共享模块依赖项。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Angular CLI项目的package.json</figcaption></figure><p id="5309" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">最后一步是告诉Typescript编译器(<em class="ld"> tsconfig.json </em>)我们有src之外的代码。为此，我们必须添加“include”参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="cdd1" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">由于我们正在更改Angular CLI的默认配置，我们需要在“<strong class="le iu">include”</strong>数组中添加<em class="ld"> src </em>文件夹。</p><p id="47be" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">这就是了。希望这能有所帮助。</p><p id="5e71" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk lz lm ln lo ma lq lr ls mb lu lv lw lx im bi translated">感谢阅读，关注我的<a class="ae ly" href="https://twitter.com/_ttemporin" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae ly" href="https://github.com/tiaguinho" rel="noopener ugc nofollow" target="_blank"> Github </a>。</p></div></div>    
</body>
</html>