<html>
<head>
<title>Generate a Jakarta EE 9 project skeleton from Maven archetype</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Maven原型生成一个Jakarta EE 9项目框架</h1>
<blockquote>原文：<a href="https://itnext.io/generate-a-jakarta-ee-9-project-skeleton-from-maven-archetype-2b9fc9ce9bb8?source=collection_archive---------1-----------------------#2021-03-31">https://itnext.io/generate-a-jakarta-ee-9-project-skeleton-from-maven-archetype-2b9fc9ce9bb8?source=collection_archive---------1-----------------------#2021-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b611" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我已经为开发人员创建了一个<a class="ae kl" href="https://github.com/hantsy/jakartaee9-starter-boilerplate" rel="noopener ugc nofollow" target="_blank">jakartaee9-starter-boilerplate</a>库来构建jakartaee 9项目。你可以阅读我为代码写的<a class="ae kl" href="https://hantsy.github.io/jakartaee9-starter-boilerplate/" rel="noopener ugc nofollow" target="_blank">文章</a>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/9dc6a8198c80965b7b48c9639ca6de79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BkNgp-HHZ-V67odtcC-CaQ.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">图片来自<a class="ae kl" href="https://unsplash.com/photos/RDW22bbsN0Y" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/RDW22bbsN0Y</a></figcaption></figure><p id="b54c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在Jakarta EE社区的官方邮件列表中分享了这个项目，并了解到<a class="ae kl" href="https://github.com/eclipse-ee4j/starter" rel="noopener ugc nofollow" target="_blank"> Eclipse EE4J starter </a>项目计划为Jakarta EE 9提供一个定制的starter模板。有人建议我创建一个Maven原型，作为分享我在starter项目中的工作的起点。为此，我为Jakarta EE 9仓库创建了另一个Maven原型<a class="ae kl" href="https://github.com/hantsy/maven-archetype-jakartaee9" rel="noopener ugc nofollow" target="_blank">。在我写下这篇文章的时候，这个maven原型已经被批准上传到Maven中央存储库。</a></p><blockquote class="lc ld le"><p id="d2f2" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated"><em class="iq">这个maven原型项目的工作正在移植到Eclipse EE4J Starter上，参见:</em><a class="ae kl" href="https://github.com/eclipse-ee4j/starter/pull/63" rel="noopener ugc nofollow" target="_blank"><em class="iq">Eclipse-EE4J/Starter # 63</em></a><em class="iq">。</em></p></blockquote><h1 id="9569" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">先决条件</h1><p id="d79c" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">确保您已经安装了以下软件。</p><ul class=""><li id="f47f" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">Java 8</li><li id="2f2c" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">阿帕奇Maven 3.6 </li><li id="5c90" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><a class="ae kl" href="https://glassfish.org" rel="noopener ugc nofollow" target="_blank"> GlassFish v6.0 </a></li></ul><blockquote class="lc ld le"><p id="f355" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated"><em class="iq"> Java 11正在成为主流版本，但GlassFish v6.0仍然停留在Java 8上，Java 11支持计划在即将发布的v6.1和Jakarta EE 9.1中实现。我会在Jakarta EE 9.1发布的时候更新到Java 11。</em></p></blockquote><h1 id="6e52" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">生成项目框架</h1><p id="4de0" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">打开您的终端，运行以下命令来生成Jakarta EE 9项目框架。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="d95a" class="nf lk iq nb b gy ng nh l ni nj">&gt; mvn -B  archetype:generate \<br/>-DarchetypeGroupId=io.github.hantsy \<br/>-DarchetypeArtifactId=maven-archetype-jakartaee9  \<br/>-DarchetypeVersion=1.0  \<br/>-DgroupId=com.example \<br/>-Dpackage=com.example.demo \<br/>-DartifactId=myapp \<br/>-Dversion=1.0-SNAPSHOT</span></pre><p id="141d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目前我只将发布版本发布到Maven中央存储库。</p><p id="d0e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了体验Github包的特性，我还将下一个<code class="fe nk nl nm nb b">1.1-SNAPSHOT</code>版本部署到了Github包注册中心。如果您想要使用最新的版本，那么在您的<code class="fe nk nl nm nb b">~/.m2/settings.xml</code>中添加下面的存储库配置。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="bef2" class="nf lk iq nb b gy ng nh l ni nj">&lt;repositories&gt;<br/>  &lt;repository&gt;<br/>    &lt;id&gt;github-public&lt;/id&gt;<br/>    &lt;url&gt;https://public:&amp;#48;28d0c8f723084e499eb87a6fe173b3af295d618@maven.pkg.github.com/hantsy/*&lt;/url&gt;<br/>  &lt;/repository&gt;<br/>&lt;/repositories&gt;</span></pre><p id="39a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">项目生成后，切换到项目根。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="e387" class="nf lk iq nb b gy ng nh l ni nj">cd mypp</span></pre><p id="6cd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将源代码导入到您的ide中，如NetBeans、IntelliJ IDEA等。您将看到下面的项目结构。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="9dbd" class="nf lk iq nb b gy ng nh l ni nj">├── pom.xml<br/>└── src<br/>    ├── main<br/>    │   ├── java<br/>    │   │   └── com<br/>    │   │       └── example<br/>    │   │           └── demo<br/>    │   │               ├── GreetingMessage.java<br/>    │   │               ├── GreetingResource.java<br/>    │   │               ├── GreetingService.java<br/>    │   │               └── JaxrsActivator.java<br/>    │   └── resources<br/>    │       └── META-INF<br/>    │           └── beans.xml<br/>    └── test<br/>        ├── java<br/>        │   └── com<br/>        │       └── example<br/>        │           └── demo<br/>        │               ├── GreetingResourceTest.java<br/>        │               └── GreetingServiceTest.java<br/>        └── resources<br/>            └── arquillian.xml</span></pre><ol class=""><li id="4136" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk nn ms mt mu bi translated"><em class="lf"> pom.xml </em>是项目Maven模型文件。</li><li id="2144" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">在<em class="lf"> src/main/java </em>中，有4个类，<code class="fe nk nl nm nb b">GreetingMessage</code>是一个简单的POJO来呈现消息字符串，<code class="fe nk nl nm nb b">GreetingResource</code>是一个Jakarta REST资源，<code class="fe nk nl nm nb b">GreetingService</code>是一个简单的CDI bean来构建<code class="fe nk nl nm nb b">GreetingMessage</code>。<code class="fe nk nl nm nb b">JaxrsActivator</code>用于激活Jakarta REST支持。</li><li id="9ce4" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">在<em class="lf"> src/main/resources </em>文件夹中，有一个空的<code class="fe nk nl nm nb b">beans.xml</code>，它是CDI beans的标准配置文件，但是从Java EE 7开始变成可选的。</li><li id="24ce" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">在<em class="lf"> src/test/java </em>中，有两个测试类，<code class="fe nk nl nm nb b">GreetingServiceTest</code>是测试<code class="fe nk nl nm nb b">GreetingService</code>，<code class="fe nk nl nm nb b">GreetingResourceTest</code>是测试<code class="fe nk nl nm nb b">GreetingResource</code>。</li><li id="c0f7" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">在<em class="lf"> src/test/resources </em>文件夹中，有一个<code class="fe nk nl nm nb b">arquillian.xml</code>是Arquillian测试框架的配置文件。</li></ol><p id="a9f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用下面的命令简单地运行应用程序。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="fe36" class="nf lk iq nb b gy ng nh l ni nj">&gt; mvn clean package cargo:run<br/>[INFO] Scanning for projects...<br/>[INFO]<br/>[INFO] -------------------------&lt; com.example:myapp &gt;--------------------------<br/>[INFO] Building com.example 1.0-SNAPSHOT<br/>[INFO] --------------------------------[ war ]---------------------------------<br/>[INFO]<br/>[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ myapp ---<br/>[INFO] Deleting D:\tmp\myapp\target<br/>[INFO]<br/>[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ myapp ---<br/>[INFO] Using 'UTF-8' encoding to copy filtered resources.<br/>[INFO] Copying 1 resource<br/>[INFO]<br/>[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ myapp ---<br/>[INFO] Changes detected - recompiling the module!<br/>[INFO] Compiling 4 source files to D:\tmp\myapp\target\classes<br/>[INFO]<br/>[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ myapp ---<br/>[INFO] Using 'UTF-8' encoding to copy filtered resources.<br/>[INFO] Copying 1 resource<br/>[INFO]<br/>[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ myapp ---<br/>[INFO] Changes detected - recompiling the module!<br/>[INFO] Compiling 2 source files to D:\tmp\myapp\target\test-classes<br/>[INFO]<br/>[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ myapp ---<br/>[INFO] Tests are skipped.<br/>[INFO]<br/>[INFO] --- maven-war-plugin:3.3.1:war (default-war) @ myapp ---<br/>[INFO] Packaging webapp<br/>[INFO] Assembling webapp [myapp] in [D:\tmp\myapp\target\myapp]<br/>[INFO] Processing war project<br/>[INFO] Building war: D:\tmp\myapp\target\myapp.war<br/>[INFO]<br/>[INFO] --- cargo-maven3-plugin:1.9.0:run (default-cli) @ myapp ---<br/>[INFO] [en3.ContainerRunMojo] Resolved container artifact org.codehaus.cargo:cargo-core-container-glassfish:jar:1.9.0 for container glassfish6x<br/>[INFO] [talledLocalContainer] Parsed GlassFish version = [6.0.0]<br/>[INFO] [talledLocalContainer] GlassFish 6.0.0 starting...<br/>[INFO] [talledLocalContainer] Using port 4848 for Admin.<br/>[INFO] [talledLocalContainer] Using port 8080 for HTTP Instance.<br/>[INFO] [talledLocalContainer] Using port 7676 for JMS.<br/>[INFO] [talledLocalContainer] Using port 3700 for IIOP.<br/>[INFO] [talledLocalContainer] Using port 8181 for HTTP_SSL.<br/>[INFO] [talledLocalContainer] Using port 3820 for IIOP_SSL.<br/>[INFO] [talledLocalContainer] Using port 3920 for IIOP_MUTUALAUTH.<br/>[INFO] [talledLocalContainer] Using port 8686 for JMX_ADMIN.<br/>[INFO] [talledLocalContainer] Using port 6666 for OSGI_SHELL.<br/>[INFO] [talledLocalContainer] Using port 9009 for JAVA_DEBUGGER.<br/>[INFO] [talledLocalContainer] Distinguished Name of the self-signed X.509 Server Certificate is:<br/>[INFO] [talledLocalContainer] [CN=hantsy-t540p,OU=GlassFish,O=Eclipse.org Foundation Inc,L=Ottawa,ST=Ontario,C=CA]<br/>[INFO] [talledLocalContainer] Distinguished Name of the self-signed X.509 Server Certificate is:<br/>[INFO] [talledLocalContainer] [CN=hantsy-t540p-instance,OU=GlassFish,O=Eclipse.org Foundation Inc,L=Ottawa,ST=Ontario,C=CA]<br/>[INFO] [talledLocalContainer] Domain cargo-domain created.<br/>[INFO] [talledLocalContainer] Domain cargo-domain admin port is 4848.<br/>[INFO] [talledLocalContainer] Domain cargo-domain allows admin login as user "admin" with no password.<br/>[INFO] [talledLocalContainer] Command create-domain executed successfully.<br/>[INFO] [talledLocalContainer] Attempting to start cargo-domain.... Please look at the server log for more details.....<br/>[INFO] [talledLocalContainer] Command delete-jdbc-resource failed.<br/>[INFO] [talledLocalContainer] remote failure: The jdbc resource [ jdbc/__default ] cannot be deleted as it is required to be configured in the system.<br/>[INFO] [talledLocalContainer] JDBC Connection pool DerbyPool deleted successfully<br/>[INFO] [talledLocalContainer] Command delete-jdbc-connection-pool executed successfully.<br/>[INFO] [talledLocalContainer] Application deployed with name myapp.<br/>[INFO] [talledLocalContainer] Command deploy executed successfully.<br/>[INFO] [talledLocalContainer] Application deployed with name cargocpc.<br/>[INFO] [talledLocalContainer] Command deploy executed successfully.<br/>[INFO] [talledLocalContainer] GlassFish 6.0.0 started on port [8080]<br/>[INFO] Press Ctrl-C to stop the container...</span></pre><p id="9d4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该命令为您执行一系列任务。</p><ol class=""><li id="2721" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk nn ms mt mu bi translated">首先，它清理并构建项目到一个war包中。</li><li id="6d4e" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">然后使用cargo maven插件下载Glassfish v6.0的副本，并提取项目构建文件夹中的文件。</li><li id="cb53" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">然后为这个项目创建一个新的<code class="fe nk nl nm nb b">cargo-dommain</code>并立即启动它。</li><li id="22ca" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">Glassfish运行后，将打包的应用程序部署到Glassfish。</li></ol><blockquote class="lc ld le"><p id="aa27" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated"><em class="iq">您可以查看</em>myqpp/target/glassfish 6x-home/cargo-domain/logs<em class="iq">中的</em> server.log <em class="iq">文件，查看服务器启动和应用部署的详细信息。</em></p></blockquote><p id="af43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">打开另一个终端窗口，尝试测试sample REST API端点。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="21cd" class="nf lk iq nb b gy ng nh l ni nj">&gt; curl <a class="ae kl" href="http://localhost:8080/myapp/api/greeting/JakartaEE" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/myapp/api/greeting/JakartaEE</a><br/>{"message":"Say Hello to JakartaEE at 2021-03-31T16:32:39.216"}</span></pre><p id="7168" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与我的<a class="ae kl" href="https://github.com/hantsy/jakartaee9-starter-boilerplate" rel="noopener ugc nofollow" target="_blank"> jakartaee 9 starter模板项目</a>相比，maven原型提供了一种体验jakartaee 9堆栈的更快方法。</p><p id="70a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要停止正在运行的应用程序，在原始终端中发送一个<code class="fe nk nl nm nb b">CTRL+C</code>快捷方式。</p><pre class="kn ko kp kq gt na nb nc nd aw ne bi"><span id="e647" class="nf lk iq nb b gy ng nh l ni nj">[INFO] Press Ctrl-C to stop the container...<br/>[INFO] [talledLocalContainer] GlassFish 6.0.0 is stopping...<br/>[INFO] ------------------------------------------------------------------------<br/>[INFO] BUILD SUCCESS<br/>[INFO] ------------------------------------------------------------------------<br/>[INFO] Total time:  18:46 min<br/>[INFO] Finished at: 2021-03-31T16:43:34+08:00<br/>[INFO] ------------------------------------------------------------------------<br/>[INFO] [talledLocalContainer] Waiting for the domain to stop .<br/>[INFO] [talledLocalContainer] Command stop-domain executed successfully.<br/>[INFO] [talledLocalContainer] GlassFish 6.0.0 is stopped<br/>Terminate batch job (Y/N)? y</span></pre><h1 id="cff2" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">运行样本测试</h1><p id="aa75" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">生成的项目包括两个简单的JUnit/Arquilian测试类来演示测试CDI bean和REST API的技术。</p><p id="3c74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行示例测试代码。</p><ol class=""><li id="c6d6" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk nn ms mt mu bi translated">首先确保有一个运行的Glassfish服务器，检查<a class="ae kl" href="https://github.com/hantsy/jakartaee9-starter-boilerplate/blob/master/docs/arq-glassfish.md" rel="noopener ugc nofollow" target="_blank">用GalssFish 6测试Jakarta EE 9应用程序</a>。</li><li id="6b9d" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk nn ms mt mu bi translated">然后运行以下命令。</li></ol><ul class=""><li id="7cc9" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">mvn清除验证-DskipTests=false</li></ul><p id="570b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，您可以开始添加代码来丰富应用程序。</p></div></div>    
</body>
</html>