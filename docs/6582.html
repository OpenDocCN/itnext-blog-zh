<html>
<head>
<title>Modern C++ in Advent of Code: Day24</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代C++代码的出现:第24天</h1>
<blockquote>原文：<a href="https://itnext.io/modern-c-in-advent-of-code-day24-4a7a11000778?source=collection_archive---------0-----------------------#2021-12-24">https://itnext.io/modern-c-in-advent-of-code-day24-4a7a11000778?source=collection_archive---------0-----------------------#2021-12-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c33a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">代码</a>问世的第二十四天。今天将搜索有效的程序输入。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/2501d2b01da625aa63f8bd307a41fd5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YM1ik1VgNIS39mwuopBx0A.png"/></div></div></figure><p id="ec40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一如既往，请先尝试解决问题，然后再看解决方案。对于本系列中的所有文章，<a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">查看这个列表</a>。</p><h1 id="67c1" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第24天</h1><p id="f3c8" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">今天，我们的输入是ALU的机器代码。ALU有四个寄存器(w、x、y、z ),支持六条指令:</p><ul class=""><li id="4e9d" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated"><code class="fe mk ml mm mn b">inp a</code>读取一个数字并将其存储在寄存器<code class="fe mk ml mm mn b">a</code>中</li><li id="88ae" class="mb mc iq jp b jq mo ju mp jy mq kc mr kg ms kk mg mh mi mj bi translated"><code class="fe mk ml mm mn b">add a b</code>执行<code class="fe mk ml mm mn b">a+=b</code>其中a是寄存器，b是寄存器或数字</li><li id="748d" class="mb mc iq jp b jq mo ju mp jy mq kc mr kg ms kk mg mh mi mj bi translated"><code class="fe mk ml mm mn b">mul a b</code>执行<code class="fe mk ml mm mn b">a*=b</code>其中a是寄存器，b是寄存器或数字</li><li id="8969" class="mb mc iq jp b jq mo ju mp jy mq kc mr kg ms kk mg mh mi mj bi translated"><code class="fe mk ml mm mn b">div a b</code>执行<code class="fe mk ml mm mn b">a/=b</code>其中a是寄存器，b是寄存器或数字</li><li id="6d17" class="mb mc iq jp b jq mo ju mp jy mq kc mr kg ms kk mg mh mi mj bi translated"><code class="fe mk ml mm mn b">mod a b</code>执行<code class="fe mk ml mm mn b">a%=b</code>其中a是寄存器，b是寄存器或数字</li><li id="78b2" class="mb mc iq jp b jq mo ju mp jy mq kc mr kg ms kk mg mh mi mj bi translated"><code class="fe mk ml mm mn b">eql a b</code>执行<code class="fe mk ml mm mn b">a=(a==b)</code>其中a是寄存器，b是寄存器或数字</li></ul><p id="e77f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的目标是确定在执行代码后，导致寄存器<code class="fe mk ml mm mn b">z</code>包含零的最高14位输入(没有零)是什么。</p><p id="683d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个任务很有欺骗性。你可能认为我们必须构建一个虚拟机。但是，如果您查看输入，代码是处理一个数字的重复块。此外，只有三个参数:</p><pre class="kn ko kp kq gt mt mn mu mv aw mw bi"><span id="6779" class="mx kz iq mn b gy my mz l na nb">01: inp w<br/>02: mul x 0<br/>03: add x z<br/>04: mod x 26<br/>05: div z <strong class="mn ir">1</strong><br/>06: add x <strong class="mn ir">13</strong><br/>07: eql x w<br/>08: eql x 0<br/>09: mul y 0<br/>10: add y 25<br/>11: mul y x<br/>12: add y 1<br/>13: mul z y<br/>14: mul y 0<br/>15: add y w<br/>16: add y <strong class="mn ir">5</strong><br/>17: mul y x<br/>18: add z y</span></pre><p id="a029" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第5行是除数，第6行是偏移量，第16行是修饰符。除此之外，代码应用以下公式:</p><pre class="kn ko kp kq gt mt mn mu mv aw mw bi"><span id="9936" class="mx kz iq mn b gy my mz l na nb">if (z[i-1] % 26 + offset[i] == digit[i])<br/>  z = z[i-1] / divisor[i];<br/>else<br/>  z = (z[i-1] / divisor[i])*26 + digit[i] + modifier[i];</span></pre><h2 id="db85" class="mx kz iq bd la nc nd dn le ne nf dp li jy ng nh lm kc ni nj lq kg nk nl lu nm bi translated">从语法上分析</h2><p id="3df4" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">由于我们不再关心指令本身，我们可以只提取参数:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="94f0" class="mx kz iq bd la nc nd dn le ne nf dp li jy ng nh lm kc ni nj lq kg nk nl lu nm bi translated">搜索</h2><p id="f4e7" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们可以通过对可达z值进行有效的BFS来搜索最高解:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="33c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个解决方案只是勉强可行，这主要取决于<code class="fe mk ml mm mn b">std::unordered_map</code>，因为在更深的层次上，许多解决方案都失败了。我们执行公式(第10–12行)并记住每个唯一z值的最大数字(第13–15行)。</p><p id="8855" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解决第2部分需要简单切换第15行<code class="fe mk ml mm mn b">std::min</code>上的<code class="fe mk ml mm mn b">std::max</code>:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="d908" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我被迷惑了，直到几个小时前我的头撞在键盘上才注意到这个模式。因此，今天我将留给你这个简单的解决方案。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="d783" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">链接和技术说明</h1><p id="72ba" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">每日解决方案存储库位于:<a class="ae kl" href="https://github.com/HappyCerberus/moderncpp-aoc-2021" rel="noopener ugc nofollow" target="_blank">https://github.com/HappyCerberus/moderncpp-aoc-2021</a>。</p><p id="cd09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://medium.com/@happy.cerberus/list/advent-of-code-2021-using-modern-c-c5814cb6666e" rel="noopener">看看这个列表，里面有关于《代码降临》其他日子的文章</a>。</p><p id="1026" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并且请不要忘记亲自尝试一下<a class="ae kl" href="https://adventofcode.com/2021" rel="noopener ugc nofollow" target="_blank">降临码</a>。</p><h1 id="5e23" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">感谢您的阅读</h1><p id="702c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">感谢您阅读这篇文章。你喜欢吗？</p><p id="7783" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我也在YouTube上发布视频。你有问题吗？在推特<a class="ae kl" href="https://twitter.com/SimonToth83" rel="noopener ugc nofollow" target="_blank">或LinkedIn </a>上联系我。</p></div></div>    
</body>
</html>