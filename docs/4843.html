<html>
<head>
<title>Pragmatic Code Review driven by MoSCoW and FECE techniques</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">由莫斯科和FECE技术驱动的实用代码评审</h1>
<blockquote>原文：<a href="https://itnext.io/pragmatic-code-review-driven-by-moscow-and-fece-techniques-cdf50eb7cc0b?source=collection_archive---------1-----------------------#2020-10-04">https://itnext.io/pragmatic-code-review-driven-by-moscow-and-fece-techniques-cdf50eb7cc0b?source=collection_archive---------1-----------------------#2020-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7cc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如何让你团队中的代码评审有用？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/6e98ef4b5fa9b24e367df0a4227048e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*seqZyFx2KSSiCDx-MQLC9g.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">新加坡海湾花园，私人收藏</figcaption></figure><p id="4c08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去的十年里，我总是很高兴与每天都进行代码审查的开发团队一起工作。如果当我加入的时候，项目中没有代码审查，我只是尝试将这个过程引入实践。一直以来，我收集了很多经验、想法和构想，希望与大家分享。</p><h1 id="a147" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">让我们介绍一下代码审查</h1><blockquote class="lz"><p id="82f6" class="ma mb iq bd mc md me mf mg mh mi kk dk translated">让我们尽快建立代码审查过程，因为这是一种众所周知的固执己见的技术。</p></blockquote><p id="3902" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">当我们开始一个新项目时，这样的想法经常伴随着我们。成千上万的人将代码审查描述为良好的实践，数百本书证实了这一点。什么会出错？经验表明一切，因为最大的问题是我们自己和我们相互不理解的程度。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b656e5a322365eacf066743a80bec417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*7cuM0okgmTREidA9iD4lIg.jpeg"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">乔恩·泰森在<a class="ae mp" href="https://unsplash.com/s/photos/confusion?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h2 id="3851" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">首先是知识，然后是行动</h2><p id="8c19" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">我们，软件开发人员通常是知识渊博和技术熟练的人，但是我注意到一件事:程序员通常不具备给予和接受反馈的技能。无意冒犯，这并不意味着我们是不同的，特定的或坏的。我们只是对它没有足够的了解。很简单，但是不用担心。在编程时间之外，我指导人们，不仅是技术方面的，还有软件方面的，我可以自信地说，提供反馈的技能差的问题是所有人都讨厌的。不幸的是。</p><h2 id="0ec7" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">首要和共同的问题</h2><p id="6099" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">良好的代码审查意图和糟糕的反馈技能的结合与此无关。不幸的是，当我们在知识上有差距时，良好的意愿将无济于事。有许多反馈技术，我真的不能说哪一个是最好的，但可以肯定的是，列出的这些都非常好，你可以开始使用它们，并自己尝试。我过去用过的固执己见的技巧有:<a class="ae mp" href="https://www.ccl.org/articles/leading-effectively-articles/closing-the-gap-between-intent-and-impact/" rel="noopener ugc nofollow" target="_blank"> SBI </a>，FECE，<a class="ae mp" href="https://en.wikipedia.org/wiki/Nonviolent_Communication" rel="noopener ugc nofollow" target="_blank"> NVC </a>。还有一种更“自以为是”的技巧所谓的<em class="nh">三明治反馈法</em>，但在我看来并没有带来多少价值。此外，它有时甚至是有害的。</p><h2 id="75e2" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">FECE技术</h2><p id="7025" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">正如我提到的，技巧有很多，但最重要的是至少学会一种，并开始在实践中应用知识。在代码审查的情况下，我真的相信FECE技术可以带来长期的结果。</p><p id="bacd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">FECE是来自<em class="nh">事实、情感、后果和期望</em>的首字母缩写。每个单词都涵盖了关于主题的典型问题:</p><ul class=""><li id="6ebf" class="ni nj iq jp b jq jr ju jv jy nk kc nl kg nm kk nn no np nq bi translated"><strong class="jp ir">事实</strong> : <em class="nh">你的代码中发生了什么？我能在你的代码中观察到什么？在你的代码评审里我能读到什么？我能在你的代码审查中看到什么？我指的是什么事实？</em></li><li id="a100" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated"><strong class="jp ir">情绪</strong> : <em class="nh">我是什么感觉？我对这个观察的态度是什么？是什么样的气息让我注意到它？</em></li><li id="450c" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated"><strong class="jp ir">后果</strong> : <em class="nh">特定事实的后果是什么？它对项目有什么影响？会对项目产生怎样的影响？它会打破什么？</em></li><li id="b342" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated"><strong class="jp ir">期望</strong> : <em class="nh">有什么解决办法，我可以接受？你怎么纠正它，让我不再有异议？</em></li></ul><p id="0e7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这四个简单的基于事实的要点可以使任何代码评审成为交付质量和改进的过程。真正的质量和真正的改进。因为如果我们写的是某个东西需要改进，那就和质量没关系了。</p><h2 id="8fdc" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">例子</h2><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="0026" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">糟糕的代码审查实践:</strong></p><blockquote class="ny nz oa"><p id="95ff" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated">不要订阅组件！</p></blockquote><p id="4a20" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">良好的代码评审实践:</strong></p><blockquote class="ny nz oa"><p id="3fe8" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated">您以命令的方式使用<code class="fe oe of og oh b">name</code>字段，并尝试在<code class="fe oe of og oh b">subscribe</code>函数(事实)中将<code class="fe oe of og oh b">value</code>分配给它。我不喜欢在Angular组件(情感)中混合命令式和声明式方法，因为事实是:它产生了有意取消订阅的必要性(结果)，有状态组件更难维护(结果)，它增加了不必要的代码库(结果)，混合声明式和命令式方法妨碍了rxjs流的可测试性和可维护性(结果)。我的建议是在相关模板中使用<code class="fe oe of og oh b">async</code>管道，不要在组件中存储状态(期望)。我还看到你订阅的流从来没有退订(事实)。即使流来自http客户端，你也不能假设流总是会被完成(感觉)。因此，这段代码会导致两个问题:超出组件生命周期的副作用或内存泄漏(后果)。遵循<code class="fe oe of og oh b">async</code>管道最佳实践也解决了这个问题(期望)。而且，你用<code class="fe oe of og oh b">getName</code>函数作为数据源(事实)。我很乐意在数据来源(期望)中与芬兰符号保持一致(情感)。它可以帮助提高代码的可读性(后果)。</p></blockquote><p id="4b0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">你能看出区别和价值吗？</strong>正是。</p><p id="150c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">FESE技术不解决关于技术方面的问题(这是另一篇大文章中令人兴奋的话题),也不验证我们应该和不应该在代码评审中包含什么。然而，它教会我们如何作为人和团队伙伴相互沟通。它还教会我们相互尊重，并促使我们离开一个比我们发现的更好的地方。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/8d9ddb3cc8c2f98ec861d8ab606c220c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*vOWuRmxhUQVO500ido5BmA.jpeg"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">由<a class="ae mp" href="https://unsplash.com/@storybyphil?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">菲尔·德福斯</a>在<a class="ae mp" href="https://unsplash.com/s/photos/priority?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="6a1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mp" href="https://twitter.com/marcin_milewicz" rel="noopener ugc nofollow" target="_blank"> <em class="nh">在Twitter上关注我</em> </a> <em class="nh">如果你想更新关于新的伟大的角度和前端的东西！</em>😃</p><h1 id="d090" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">莫斯科在进攻</h1><p id="080a" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">一旦我们知道如何大致构建关于我们工作的反馈，我们就可以思考我们评论的优先级。有些程序员更热情或更有洞察力，有些则不然。因此，大量好的见解和建议可能会有所不同。</p><blockquote class="ny nz oa"><p id="b0df" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated">越多不一定越好。越少越好。</p></blockquote><p id="e116" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请记住，代码审查只是帮助我们交付有价值软件的众多过程中的一个。然而，软件交付是SDLC的主要价值，代码审查不应该以任何方式抑制或损害它。</p><h2 id="6104" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">建议优先排序</h2><p id="73ef" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">我相信我们在代码审查期间给出的每一个建议都有很大的价值，我们希望作者能考虑到它，但是让我们成长起来，并意识到不可能在生活和业务中拥有一切。凡事都有轻重缓急，我们的责任是正确地确定它们。</p><p id="0206" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我曾经工作过的一个项目中，我听说过一个有趣的技术，<a class="ae mp" href="https://en.wikipedia.org/wiki/MoSCoW_method" rel="noopener ugc nofollow" target="_blank">莫斯科</a>。这种方法在项目管理和商业分析中得到了广泛而成功的应用。事实证明，它也可以用于编程代码审查。</p><h2 id="a593" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">要求的四个支柱</h2><p id="1754" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">正如我在上面提到的，我们假设所有来自代码评审的评论和需求都是重要的，但是事实可能证明它们的重要性并不比快速产品交付更大。莫斯科出手相救，并设定了四个优先级别:</p><ul class=""><li id="2a44" class="ni nj iq jp b jq jr ju jv jy nk kc nl kg nm kk nn no np nq bi translated"><strong class="jp ir">必须有</strong> —需要采取行动，如果没有行动，我们知道我们产品的新版本将会以更低的质量交付，或者会引入错误。</li><li id="0ecd" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated"><strong class="jp ir">应该有</strong> —行动是必需的，也是重要的，但在当前时间范围内不会影响我们的产品。没有这种变化的产品能够正常工作，但是整体质量可能会下降。“必须”和“应该”之间的区别因素通常是时间框架。“应该”的事情没有时间限制，不会破坏客户的价值。</li><li id="5bc4" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated"><strong class="jp ir">可能有</strong>——这些变化肯定会在未来帮助我们，并使代码库处于更好的状态，但从业务角度来看，它们根本不是至关重要的。它们可以在任何其他时间被修复，并且不会在将来带来任何冲突</li><li id="1bcf" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated"><strong class="jp ir">不会有(会)</strong> —当我们意识到某件事本来可以做得更好，但也知道这需要很长时间，并不能带来任何附加值。您可以在这里输入许多相关的内容，例如我们没有时间改进的技术债务，但在代码审查中值得一提的是关于教育新成员或只是为了提高认识。</li></ul><h2 id="3b33" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">实践中的莫斯科</h2><p id="6510" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">让我们寻找我们的例子</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="7231" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，好的注释可能看起来</p><blockquote class="ny nz oa"><p id="2792" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated"><strong class="jp ir"> should </strong>:您以命令的方式使用<code class="fe oe of og oh b"><em class="iq">name</em></code>字段，并尝试在<code class="fe oe of og oh b"><em class="iq">subscribe</em></code>函数(事实)中将<code class="fe oe of og oh b"><em class="iq">value</em></code>赋值给它。我不喜欢在Angular组件(情感)中混合命令式和声明式方法，因为事实是:它产生了有意取消订阅的必要性(结果)，有状态组件更难维护(结果)，它增加了不必要的代码库(结果)，混合声明式和命令式方法妨碍了rxjs流的可测试性和可维护性(结果)。我的建议是在相关模板中使用<code class="fe oe of og oh b"><em class="iq">async</em></code>管道，不要在组件中存储状态(期望)。</p><p id="00b4" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated"><strong class="jp ir">应该:</strong>我还看到您订阅的流从未被取消订阅(事实)。即使流来自http客户端，你也不能假设流总是会被完成(感觉)。因此，这段代码会导致两个问题:超出组件生命周期的副作用或内存泄漏(后果)。遵循<code class="fe oe of og oh b"><em class="iq">async</em></code>管道最佳实践也解决了这个问题(期望)。</p><p id="ecb2" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated"><strong class="jp ir">可能</strong>:组件类名(事实)后的文件末尾和空格处没有新的空行。我知道这不是程序员的责任，但是保持代码的一种风格对于分布式工作(结果和情绪)是很重要的。如果你能添加一些自动工具来处理它就好了，比如漂亮的哈士奇(期望)。</p><p id="976f" class="jn jo nh jp b jq jr js jt ju jv jw jx ob jz ka kb oc kd ke kf od kh ki kj kk ij bi translated"><strong class="jp ir">愿意/不愿意</strong>:此外，你使用<code class="fe oe of og oh b"><em class="iq">getName</em></code>函数作为数据源(事实)。我很乐意在数据来源(期望)中与芬兰符号保持一致(情感)。它可以帮助提高代码的可读性(后果)。无论如何，我知道整个应用程序都是这样写的，所以我们可以跳过它。</p></blockquote><p id="742a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，注释具备了影响成功和有效工作的所有预期品质:</p><ul class=""><li id="9b60" class="ni nj iq jp b jq jr ju jv jy nk kc nl kg nm kk nn no np nq bi translated">这是清晰和明确的</li><li id="911e" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">它不需要额外的澄清</li><li id="07d7" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">它具有具体的、可衡量的价值</li><li id="d26a" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">它决定了下一步行动的优先顺序</li><li id="0d15" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">不可否认，它与代码有关，与人无关。它没有离开个人思想的方面。</li></ul><p id="8924" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mp" href="https://twitter.com/marcin_milewicz" rel="noopener ugc nofollow" target="_blank"> <em class="nh">如果你想更新新的伟大的棱角和前端的东西，请在Twitter上关注我</em> </a> <em class="nh">！</em>😃</p><h1 id="e090" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">摘要📕</h1><ul class=""><li id="0ba4" class="ni nj iq jp b jq nc ju nd jy oi kc oj kg ok kk nn no np nq bi translated">代码评审不仅仅是关于代码，而是关于交流和提供价值。</li><li id="5483" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">给予反馈是一套值得学习的具体技能和技巧</li><li id="1b84" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">各种各样的技术可以将代码审查带入生活，一些有效的技术是FECE和MoSCoW。</li><li id="c2b5" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">包括关于事实、感受、结果和期望的信息是一个完整的反馈，它是FECE技术的基石。</li><li id="1eb1" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">如果代码评审中给出的所有建议都带来了价值，那么就值得优先考虑期望。</li><li id="2ab9" class="ni nj iq jp b jq nr ju ns jy nt kc nu kg nv kk nn no np nq bi translated">莫斯科是一种非常适合商业分析和项目管理的技术。它也适用于代码审查过程。</li></ul><blockquote class="lz"><p id="9a31" class="ma mb iq bd mc md ol om on oo op kk dk translated"><a class="ae mp" href="https://twitter.com/marcin_milewicz" rel="noopener ugc nofollow" target="_blank"> <em class="oq">在Twitter上关注我</em> </a> <em class="oq">如果你想更新关于新的伟大的角度和前端的东西！</em>😃</p></blockquote></div></div>    
</body>
</html>