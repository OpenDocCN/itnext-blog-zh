<html>
<head>
<title>Managing Local State In Vue.js Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">管理Vue.js组件中的本地状态</h1>
<blockquote>原文：<a href="https://itnext.io/managing-local-state-in-vue-js-components-d5d92fb432?source=collection_archive---------3-----------------------#2018-04-05">https://itnext.io/managing-local-state-in-vue-js-components-d5d92fb432?source=collection_archive---------3-----------------------#2018-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/920ca2ea1c0bba253b58f6ef865a4673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5BefaNBsqn3zSInnOcNleg.jpeg"/></div></div></figure><div class=""/><blockquote class="jy jz ka"><p id="78c0" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://www.linkedin.com/cws/share?url=https%3A%2F%2Fitnext.io%2Fmanaging-local-state-in-vue-js-components-d5d92fb432%3Futm_source%3Dmedium_sharelink%26utm_medium%3Dsocial%26utm_campaign%3Dbuffer" rel="noopener ugc nofollow" target="_blank"> <em class="jb">点击</em> k在LinkedIn上分享这篇文章</a></p></blockquote><p id="177f" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">通常，当我们听到Vue.js和状态管理时，我们会立即想到Vuex或其他强大的状态管理解决方案。然而，我们大多数的国家管理并没有在如此大的规模上发生。相反，它隐藏在我们的Vue组件中。</p><p id="13d7" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果您仍然对我所说的内容感到困惑，那么让我们来看一个地方政府的例子。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5ad9" class="ln lo jb lj b gy lp lq l lr ls">&lt;template&gt;<br/>    &lt;div&gt;<br/>        &lt;div v-if="state === 'default'"&gt;<br/>            &lt;h1&gt;Default State&lt;/h1&gt;<br/>        &lt;/div&gt;<br/>        &lt;div v-else&gt;<br/>            &lt;h1&gt;Every Other State&lt;/h1&gt;        <br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="e662" class="ln lo jb lj b gy lt lq l lr ls">&lt;script&gt;<br/>    export default {<br/>        data: function () {<br/>            return {<br/>                state: 'default'<br/>            }<br/>        }<br/>    }        <br/>&lt;/script&gt;</span></pre><p id="88b2" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">在我们的<code class="fe lu lv lw lj b">data</code>中，我们有一个<code class="fe lu lv lw lj b">state</code>属性，我们用它来跟踪组件的不同状态。很简单，对吧？</p><p id="b3be" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">我注意到，在Vue社区中，我们通常用两种不同的模式来管理本地状态。第一个，像上面的例子一样，依赖于一个描述性的字符串。另一种模式依赖于嵌套对象和布尔值，如下所示:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="a94d" class="ln lo jb lj b gy lp lq l lr ls">&lt;template&gt;<br/>    &lt;div&gt;<br/>        &lt;div v-if="state.visbility"&gt;<br/>            &lt;h1&gt;Default State&lt;/h1&gt;<br/>        &lt;/div&gt;<br/>        &lt;div v-else&gt;<br/>            &lt;h1&gt;Every Other State&lt;/h1&gt;        <br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="58e2" class="ln lo jb lj b gy lt lq l lr ls">&lt;script&gt;<br/>    export default {<br/>        data: function () {<br/>            return {<br/>                state: {<br/>                    visiblity: true<br/>                }<br/>            }<br/>        }<br/>    }        <br/>&lt;/script&gt;</span></pre><p id="9e8a" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这两种方法都工作得很好，但是让我们更仔细地看看它们，并检查它们的优缺点。</p><h1 id="737e" class="lx lo jb bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">该设置</h1><p id="236d" class="pw-post-body-paragraph kb kc jb ke b kf mu kh ki kj mv kl km lb mw kp kq lc mx kt ku ld my kx ky kz ij bi translated">在我们开始之前，让我们为自己设置一个加载通知组件。为了让一切尽可能快地启动和运行，我们将使用Vue CDN而不是完整版。</p><p id="8b84" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">让我们从一个包含我们的Vue CDN的空白<code class="fe lu lv lw lj b">index.html</code>文件开始。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="7dd4" class="ln lo jb lj b gy lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;Local State Management&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5d3c" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">现在，让我们添加Tailwind CSS和Font Awesome CDNs，这样我们就有了一个更好看的例子。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="b2f3" class="ln lo jb lj b gy lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;Local State Management&lt;/title&gt;<br/>    &lt;link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="171c" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">太好了！现在，我们可以搭建一些HTML。对于这个例子，我们需要一个简单的UI卡，在标题中有一个小小的loader组件。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="51a3" class="ln lo jb lj b gy lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;Local State Management&lt;/title&gt;<br/>    &lt;link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;div&gt;<br/>        &lt;div&gt;<br/>          &lt;h1&gt;A Cool Card&lt;/h1&gt;<br/>          &lt;h4 id="loader"&gt;<br/>            &lt;i class="fas fa-circle-notch fa-spin"&gt;&lt;/i&gt; Loading...<br/>          &lt;/h4&gt;<br/>        &lt;/div&gt;<br/>        &lt;div&gt;<br/>          &lt;p&gt;Lorem Khaled Ipsum is a major key to success. They will try to close the door on you, just open it. Give thanks to the most high. Eliptical talk. Celebrate success right, the only way, apple. Another one. The weather is amazing, walk with me through the pathway of more success. Take this journey with me, Lion! Watch your back, but more importantly when you get out the shower, dry your back, it’s a cold world out there.&lt;/p&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    <br/>    &lt;script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="456c" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果我们在浏览器中看一下，我们可以看到所有的部分都在那里，但看起来不太好。</p><figure class="le lf lg lh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/422265dacdb11d9661373c9c51f63b91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y7lzGsg_LpcoeHTv.png"/></div></div></figure><p id="ab6e" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">让我们添加一些顺风类来使我们的卡片居中，使它更突出，并更好地设计字体。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="13a7" class="ln lo jb lj b gy lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;Local State Management&lt;/title&gt;<br/>    &lt;link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet"&gt;<br/>&lt;/head&gt;<br/>&lt;body class="flex item-center justify-center h-screen bg-blue-lightest font-sans"&gt;<br/>    &lt;div class="p-6 bg-white rounded shadow max-w-md m-auto"&gt;<br/>        &lt;div class="flex justify-between items-center mb-4"&gt;<br/>          &lt;h1 class="text-black"&gt;A Cool Card&lt;/h1&gt;<br/>          &lt;h4 id="loader" class="font-light text-blue"&gt;<br/>            &lt;i class="fas fa-circle-notch fa-spin mr-1"&gt;&lt;/i&gt; Loading...<br/>          &lt;/h4&gt;<br/>        &lt;/div&gt;<br/>        &lt;div class="text-grey-dark leading-normal"&gt;<br/>          &lt;p&gt;Lorem Khaled Ipsum is a major key to success. They will try to close the door on you, just open it. Give thanks to the most high. Eliptical talk. Celebrate success right, the only way, apple. Another one. The weather is amazing, walk with me through the pathway of more success. Take this journey with me, Lion! Watch your back, but more importantly when you get out the shower, dry your back, it’s a cold world out there.&lt;/p&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="053c" class="ln lo jb lj b gy lt lq l lr ls">    &lt;script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f56f" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">一点点CSS能为一个UI做的事情是惊人的。</p><figure class="le lf lg lh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/34d56d3bbb0a8b223e4c651bc3268848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s7WOH7EfsiDDxMHm.png"/></div></div></figure><p id="8b68" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">最后，让我们搭建出可以在字符串和布尔状态方法之间共享的Vue.js代码。</p><p id="dd07" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">我们将首先初始化一个Vue实例，设置<code class="fe lu lv lw lj b">el</code>，将模板转换为数据驱动，并清除我们需要的<code class="fe lu lv lw lj b">data</code>和计算属性。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="2526" class="ln lo jb lj b gy lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;title&gt;Local State Management&lt;/title&gt;<br/>    &lt;link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet"&gt;<br/>&lt;/head&gt;<br/>&lt;body class="flex item-center justify-center h-screen bg-blue-lightest font-sans"&gt;<br/>    &lt;div class="p-6 bg-white rounded shadow max-w-md m-auto"&gt;<br/>        &lt;div class="flex justify-between items-center mb-4"&gt;<br/>          &lt;h1 class="text-black"&gt;A Cool Card&lt;/h1&gt;<br/>          &lt;h4 v-if="state'" id="loader" class="font-light text-blue"&gt;<br/>            &lt;i v-show="state" class="fas fa-circle-notch fa-spin mr-1"&gt;&lt;/i&gt;<br/>            &lt;i v-show="state" class="far fa-check-circle mr-1"&gt;&lt;/i&gt;<br/>            {{ header }}<br/>          &lt;/h4&gt;<br/>        &lt;/div&gt;<br/>        &lt;div class="text-grey-dark leading-normal"&gt;<br/>          &lt;p&gt;Lorem Khaled Ipsum is a major key to success. They will try to close the door on you, just open it. Give thanks to the most high. Eliptical talk. Celebrate success right, the only way, apple. Another one. The weather is amazing, walk with me through the pathway of more success. Take this journey with me, Lion! Watch your back, but more importantly when you get out the shower, dry your back, it’s a cold world out there.&lt;/p&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="d2bd" class="ln lo jb lj b gy lt lq l lr ls">    &lt;script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"&gt;&lt;/script&gt;<br/>    &lt;script&gt;<br/>      var shoppingList = new Vue({<br/>        el: '#loader',<br/>        data: {<br/>          state: null<br/>        },<br/>        computed: {<br/>          header() {</span><span id="094f" class="ln lo jb lj b gy lt lq l lr ls">            return '';<br/>          }<br/>        }<br/>      })<br/>    &lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b08e" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">嘭嘭嘭，我们找到了一个很好的组件。现在让我们看看管理我们国家的不同方式。</p><h1 id="3a9a" class="lx lo jb bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">布尔方法</h1><p id="50a2" class="pw-post-body-paragraph kb kc jb ke b kf mu kh ki kj mv kl km lb mw kp kq lc mx kt ku ld my kx ky kz ij bi translated">首先，布尔方法。这是我发现的第一种管理状态的方法，而且很有意义。我发现我通常使用状态来处理Vue的条件指令，所以我会经常看到自己切换状态布尔值。</p><p id="6144" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这有点抽象，所以让我们在组件中将它付诸实践。我们首先将<code class="fe lu lv lw lj b">state</code>属性设置为一个对象，然后为不同的状态添加一些布尔属性。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="9928" class="ln lo jb lj b gy lp lq l lr ls">data: {<br/>    state: {<br/>        default: true,<br/>        loading: false,<br/>        done: false<br/>    }<br/>}</span></pre><p id="a8d8" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如您所见，我们明确了想要管理的状态。我认为这是这种方法最大的好处——通过查看状态对象，您可以看到所有可能的组件状态。</p><p id="8a83" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">如果您正在处理一个大型的复杂组件，这可能会非常有用。但是，如果您发现自己管理了太多的状态属性或嵌套的状态对象，那么这可能是重构为更小的组件的一种代码味道。</p><p id="2ca3" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">让我们完成组件的其余部分，以便它能够响应我们的新状态数据。我们可以向我们的header computed属性添加一些逻辑，以便根据状态返回适当的字符串。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="14b3" class="ln lo jb lj b gy lp lq l lr ls">computed: {<br/>  header() {<br/>       if(this.state.loading) {<br/>      return 'Loading...';<br/>    }</span><span id="bf57" class="ln lo jb lj b gy lt lq l lr ls">    if(this.state.done) {<br/>      return 'Done!';<br/>    }</span><span id="be13" class="ln lo jb lj b gy lt lq l lr ls">    return '';<br/>  }<br/>}</span></pre><p id="6097" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">然后我们可以更新我们的模板来显示相应的图标。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="f70f" class="ln lo jb lj b gy lp lq l lr ls">&lt;h4 v-if="!state.default" id="loader" class="font-light text-blue"&gt;<br/>    &lt;i v-show="state.loading" class="fas fa-circle-notch fa-spin mr-1"&gt;&lt;/i&gt;<br/>    &lt;i v-show="state.done" class="far fa-check-circle mr-1"&gt;&lt;/i&gt;<br/>    {{ header }}<br/>&lt;/h4&gt;</span></pre><p id="5636" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">正如你所看到的，通过这个方法，我们非常清楚地知道模板和计算属性应该如何对我们的状态做出反应。正如我前面提到的，这就是使用对象方法的好处。然而，这种方法的缺点是更新我们的状态可能很繁琐。</p><p id="de17" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">现在，如果我们想切换一个状态，我们必须重置所有其他状态。想象一下，如果我们希望状态的某些部分被切换，而其他部分应该被重置。突然间，这变得非常棘手，因为我们需要明确我们想要转换到什么状态。</p><p id="dd51" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">现在，让我们看看字符串方法与对象方法的比较。</p><h1 id="8b02" class="lx lo jb bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">字符串方法</h1><p id="ce52" class="pw-post-body-paragraph kb kc jb ke b kf mu kh ki kj mv kl km lb mw kp kq lc mx kt ku ld my kx ky kz ij bi translated">对于String方法，我们不会使用一个对象来维护所有可能状态组合的列表。相反，我们只是将状态设置为一个字符串来跟踪当前状态。</p><p id="02e7" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">让我们看看如何使用我们的组件来实现这一点。我们首先将数据更新为一个字符串。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="cf57" class="ln lo jb lj b gy lp lq l lr ls">data: {<br/>    state: 'default',<br/>}</span></pre><p id="6a30" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">使用这种方法，我们可以快速判断组件的当前状态。当我们调试一个问题或者测试我们组件的不同排列时，这是非常有用的。</p><p id="50e1" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">通过完成我们的组件，让我们更深入地了解一下这一点。同样，我们将从更新我们的计算属性开始。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="0268" class="ln lo jb lj b gy lp lq l lr ls">computed: {<br/>  header() {<br/>       if(this.state === 'loading') {<br/>      return 'Loading...';<br/>    }</span><span id="3616" class="ln lo jb lj b gy lt lq l lr ls">    if(this.state === 'done') {<br/>      return 'Done!';<br/>    }</span><span id="10b5" class="ln lo jb lj b gy lt lq l lr ls">    return '';<br/>  }<br/>}</span></pre><p id="1a1d" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">现在我们可以更新模板了。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="58dd" class="ln lo jb lj b gy lp lq l lr ls">&lt;h4 v-if="state !== 'default'" id="loader" class="font-light text-blue"&gt;<br/>    &lt;i v-show="state === 'loading'" class="fas fa-circle-notch fa-spin mr-1"&gt;&lt;/i&gt;<br/>    &lt;i v-show="state === 'done'" class="far fa-check-circle mr-1"&gt;&lt;/i&gt;<br/>    {{ header }}<br/>&lt;/h4&gt;</span></pre><p id="76ce" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">我相信您已经发现，与对象方法相比，字符串方法有相反的优点和缺点。它非常擅长显示组件的当前状态，但是很难看到所有可能的状态。</p><p id="39d8" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">这可以通过添加一个列出所有状态的注释来缓解，但这也不是最好的解决方案。此外，使用String方法意味着您只需要担心组件中的一个“活动”状态。</p><p id="7804" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">虽然对于像我们的加载器这样的简单组件来说这可能是真的，但情况并不总是这样。如果您想到一个表单组件，我们可能必须独立地跟踪提交和错误状态。这可能很难只用一个字符串来管理。</p><h1 id="5413" class="lx lo jb bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">总结</h1><p id="dc66" class="pw-post-body-paragraph kb kc jb ke b kf mu kh ki kj mv kl km lb mw kp kq lc mx kt ku ld my kx ky kz ij bi translated">对象和字符串方法都是管理本地状态的可行选项。虽然对象方法很好地为我们提供了很多灵活性和对所有可能状态的可见性，但它可能很难管理和查看任何给定时刻的当前状态。</p><p id="ac31" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">同时，字符串方法呈现出相反的优点和缺点。它在显示当前状态方面非常出色，并且非常容易更新，但是很难跟踪所有可能的排列。</p><p id="5022" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">在我的项目中，我目前的经验是总是从字符串方法开始。这样我就可以快速遍历组件需要的状态。如果我发现自己依赖于许多不同的状态，那么我会考虑对Object方法进行重构，或者看看能否将我的组件分成更小的部分。</p><p id="f2fc" class="pw-post-body-paragraph kb kc jb ke b kf kg kh ki kj kk kl km lb ko kp kq lc ks kt ku ld kw kx ky kz ij bi translated">当你熟悉这些方法时，我相信你会有自己的心流。也许你会想出一个更好的方法！和往常一样，有任何问题可以在Twitter上问我。下次再见，祝你研究愉快！</p></div></div>    
</body>
</html>