<html>
<head>
<title>How to Create a SVG Gallery with Color Picker in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中使用颜色选择器创建SVG图库</h1>
<blockquote>原文：<a href="https://itnext.io/how-to-create-a-svg-gallery-with-color-picker-in-react-aab1b70d8982?source=collection_archive---------1-----------------------#2019-03-29">https://itnext.io/how-to-create-a-svg-gallery-with-color-picker-in-react-aab1b70d8982?source=collection_archive---------1-----------------------#2019-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4653ffbe94f4932d976e123bf10ed193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ehj8LRaqJROEuO5hQvYVNw.gif"/></div></div></figure><p id="ed94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我最近制作了一个展示SVG插图的多像素图库，可以帮助人们完成他们的项目，有点类似于T2的Undraw T3。</p><p id="d87b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用它非常简单:你浏览图库，选择与你的品牌相匹配的颜色，点击它，下载成PNG或SVG格式(更新颜色！)然后瞧！</p><p id="37c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么我是怎么做到的呢？</p><p id="a8fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是开发者和插图画家的作品。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="1b01" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">设计正确的方式</h1><p id="c3a5" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">为了制作我们所有的插图，我们使用了<strong class="ka ir"> Adobe Illustrator </strong>。</p><h2 id="95ad" class="mh lf iq bd lg mi mj dn lk mk ml dp lo kj mm mn ls kn mo mp lw kr mq mr ma ms bi translated">这都是关于一种颜色</h2><p id="fb00" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">首先你需要选择一种颜色作为你的“动态颜色”，对于我们的图库，我们使用了hexcolor <strong class="ka ir"> #68E1FD </strong>来匹配我们的品牌。每个插图都必须使用这种颜色，否则javascript代码在选择颜色时将无法工作。</p><p id="6377" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你当然可以用其他颜色作为“静态色”。</p><p id="316d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了达到渐变效果，<strong class="ka ir">千万不要使用</strong>渐变。你必须创建蒙版层，渐变白色或黑色，并玩不透明。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/2a99dfb5fccbac35fd3b928f658db95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNRy11oMujaksGMDw6iaYA.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">如何渐变</figcaption></figure><h2 id="8f74" class="mh lf iq bd lg mi mj dn lk mk ml dp lo kj mm mn ls kn mo mp lw kr mq mr ma ms bi translated">导出您的SVG</h2><p id="ed8f" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">当导出时，您必须选择<strong class="ka ir">表示属性，</strong>我们有我们的SVG代码，带有类似<strong class="ka ir"> fill="#68e1fd" </strong>的属性，这些属性将很容易用代码更改。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/0e59da1b21f5925ba2628710b8c61023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MUcG0BNyNywsJJ4XbVZFmQ.png"/></div></div></figure></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="d314" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">编码部分</h1><h2 id="f8c9" class="mh lf iq bd lg mi mj dn lk mk ml dp lo kj mm mn ls kn mo mp lw kr mq mr ma ms bi translated">颜色选择器</h2><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="7ed0" class="mh lf iq ne b gy ni nj l nk nl"><strong class="ne ir">import </strong>React <strong class="ne ir">from </strong>'react';<br/><strong class="ne ir">import </strong>{ ChromePicker } <strong class="ne ir">from </strong>'react-color';<br/><strong class="ne ir">import </strong>{ dynamicColor } <strong class="ne ir">from </strong>'../constants/colors';<br/><br/><strong class="ne ir">class </strong>Magic <strong class="ne ir">extends </strong>React.PureComponent {<br/>  state = {<br/>    color: dynamicColor<br/>  };<br/><br/>  onChangeColor = color =&gt; <strong class="ne ir">this</strong>.setState({ color: color.hex });<br/>  render() {<br/>    <strong class="ne ir">const </strong>{ color } = <strong class="ne ir">this</strong>.state;<br/>    <strong class="ne ir">return </strong>(<br/>      &lt;div&gt;<br/>        &lt;ChromePicker<br/>          color={color}<br/>          onChangeComplete={<strong class="ne ir">this</strong>.onChangeColor}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/><br/><strong class="ne ir">export default </strong>Magic;</span></pre><p id="ab2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">目标是获得动态颜色的十六进制数<strong class="ka ir">和</strong>,稍后您将在插图中更改该颜色。</p><p id="9215" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我的例子，我使用了<em class="nm">反应颜色</em>，它提供了几种易于使用的颜色选择器。</p><h2 id="beb9" class="mh lf iq bd lg mi mj dn lk mk ml dp lo kj mm mn ls kn mo mp lw kr mq mr ma ms bi translated">如何改变SVG的颜色</h2><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="fa9a" class="mh lf iq ne b gy ni nj l nk nl"><strong class="ne ir">import </strong>Svg <strong class="ne ir">from </strong>'react-inlinesvg';<br/><strong class="ne ir">import </strong>styled <strong class="ne ir">from </strong>'styled-components';<br/><strong class="ne ir">import </strong>{ dynamicColor } <strong class="ne ir">from </strong>'../constants/colors';</span><span id="97a6" class="mh lf iq ne b gy nn nj l nk nl"><strong class="ne ir">const </strong>ContainerSvg = styled.div`<br/>  *[fill='${dynamicColor}'] {<br/>    fill: ${p =&gt; p.color};<br/>  }<br/>  *[stroke='${dynamicColor}'] {<br/>    fill: ${p =&gt; p.color};<br/>  }<br/>`;</span><span id="083c" class="mh lf iq ne b gy nn nj l nk nl">&lt;ContainerSvg color={color}&gt;<br/>  &lt;Svg src={url}&gt;Can't load image&lt;/Svg&gt;<br/>&lt;/ContainerSvg&gt;</span></pre><p id="778b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我使用样式组件来完成画廊中的所有样式。</p><p id="10cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过给我的动态颜色作为道具，我用新的十六进制颜色替换SVG中的fill=" <strong class="ka ir"> #68E1FD" </strong>。插图即时更新。</p><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="8665" class="mh lf iq ne b gy ni nj l nk nl"><strong class="ne ir">import </strong>React <strong class="ne ir">from </strong>'react';<br/><strong class="ne ir">import </strong>{ ChromePicker } <strong class="ne ir">from </strong>'react-color';<br/><strong class="ne ir">import </strong>{ dynamicColor } <strong class="ne ir">from </strong>'../constants/colors';<br/><strong class="ne ir">import </strong>{ ContainerSvg } <strong class="ne ir">from </strong>'./toto.style';<br/><strong class="ne ir">import </strong>Svg <strong class="ne ir">from </strong>'react-inlinesvg';<br/><br/><strong class="ne ir">const </strong>url = "https://media.graphcms.com//ztnygNBMTHuPDarh6hxH";<br/><br/><strong class="ne ir">class </strong>Magic <strong class="ne ir">extends </strong>React.PureComponent {<br/>  state = {<br/>    color: dynamicColor<br/>  };<br/><br/>  onChangeColor = color =&gt; <strong class="ne ir">this</strong>.setState({ color: color.hex });<br/>  render() {<br/>    <strong class="ne ir">const </strong>{ color } = <strong class="ne ir">this</strong>.state;<br/>    <strong class="ne ir">return </strong>(<br/>      &lt;div&gt;<br/>        &lt;ChromePicker<br/>          color={color}<br/>          onChangeComplete={<strong class="ne ir">this</strong>.onChangeColor}<br/>        /&gt;<br/>        &lt;ContainerSvg color={color}&gt;<br/>          &lt;Svg src={url}&gt;Can't load image&lt;/Svg&gt;<br/>        &lt;/ContainerSvg&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/><br/><strong class="ne ir">export default </strong>Magic;</span></pre><h2 id="00f3" class="mh lf iq bd lg mi mj dn lk mk ml dp lo kj mm mn ls kn mo mp lw kr mq mr ma ms bi translated">使用更新的颜色另存为PNG或SVG</h2><p id="2ad5" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">你必须首先从你的内嵌SVG中获取<strong class="ka ir"> ref </strong>。</p><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="c7d5" class="mh lf iq ne b gy ni nj l nk nl">&lt;Svg<br/>  src={url}<br/>  ref={ref =&gt; <strong class="ne ir">this</strong>.svg = ref}<br/>&gt;<br/>  Can't load image<br/>&lt;/Svg&gt;</span></pre><p id="531e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另存为SVG真的很简单，你从<strong class="ka ir">内联svg </strong>引用中获取<strong class="ka ir"> svg字符串</strong>并替换所有颜色。</p><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="6a18" class="mh lf iq ne b gy ni nj l nk nl">handleOnClickSaveSVG = () =&gt; {<br/>  <strong class="ne ir">const </strong>{ color } = this.state;<br/>  <strong class="ne ir">let </strong>svgToSave = <strong class="ne ir">this</strong>.svg.state.loadedText;<br/>  svgToSave = svgToSave.split(`fill="${dynamicColor}"`).join(`fill="${color}"`);<br/>  svgToSave = svgToSave.split(`stroke="${dynamicColor}"`).join(`stroke="${color}"`);<br/>  <strong class="ne ir">const </strong>blob = <strong class="ne ir">new </strong>Blob([svgToSave], { type: 'image/svg+xml' });<br/>  <strong class="ne ir">const </strong>url = URL.createObjectURL(blob);<br/>  downloadElement(url, 'illustration.svg');<br/>};</span></pre><p id="ae69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下载那个<strong class="ka ir"> blob </strong>！</p><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="d970" class="mh lf iq ne b gy ni nj l nk nl">downloadElement = (url, name) =&gt; {<br/>  <strong class="ne ir">const </strong>tempLink = document.createElement('a');<br/>  tempLink.href = url;<br/>  tempLink.setAttribute('download', name);<br/>  document.body.appendChild(tempLink);<br/>  tempLink.click();<br/>  setTimeout(() =&gt; {<br/>    document.body.removeChild(tempLink);<br/>    window.URL.revokeObjectURL(url);<br/>  }, 100);<br/>};</span></pre><p id="fd1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保存为PNG开始像SVG通过替换颜色。我创建一个画布并绘制一个新的<strong class="ka ir">图像</strong>，然后使用我之前的函数<strong class="ka ir"> downloadElement </strong>()来获得它。</p><pre class="mu mv mw mx gt nd ne nf ng aw nh bi"><span id="1354" class="mh lf iq ne b gy ni nj l nk nl">handleOnClickSavePNG = () =&gt; {<br/>  <strong class="ne ir">const </strong>{ color } = <strong class="ne ir">this</strong>.props;<br/>  <strong class="ne ir">const </strong>DOMURL = window.URL || window.webkitURL || window;<br/><br/>  <strong class="ne ir">if </strong>(!DOMURL) {<br/>    <strong class="ne ir">this</strong>.setState({ error: 'Your browser doesn\'t support download' });<br/>  }<br/><br/>  <strong class="ne ir">let </strong>svgToSave = <strong class="ne ir">this</strong>.svg.state.loadedText;<br/>  svgToSave = svgToSave.split(`fill="${dynamicColor}"`).join(`fill="${color}"`);<br/>  svgToSave = svgToSave.split(`stroke="${dynamicColor}"`).join(`stroke="${color}"`);<br/>  <strong class="ne ir">const </strong>blob = <strong class="ne ir">new </strong>Blob([svgToSave], { type: 'image/svg+xml' });<br/>  <strong class="ne ir">const </strong>url = DOMURL.createObjectURL(blob);<br/>  <strong class="ne ir">let </strong>match = svgToSave.match(/viewBox="0 0 (\d+\.?\d*) (\d+\.?\d*)"/m);<br/>  <strong class="ne ir">const </strong>width = match &amp;&amp; match[1] ? parseInt(match[1], 10) : 500;<br/>  <strong class="ne ir">const </strong>height = match &amp;&amp; match[2] ? parseInt(match[2], 10) : 500;<br/>  <strong class="ne ir">const </strong>tempCanvas = document.createElement('canvas');<br/>  tempCanvas.width = width;<br/>  tempCanvas.height = height;<br/>  <strong class="ne ir">const </strong>ctx = tempCanvas.getContext('2d');<br/>  <strong class="ne ir">const </strong>pngImage = <strong class="ne ir">new </strong>Image();<br/>  pngImage.onload = () =&gt; {<br/>    ctx.drawImage(pngImage, 0, 0);<br/>    DOMURL.revokeObjectURL(url);<br/>    <strong class="ne ir">const </strong>imgURI = tempCanvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');<br/>    downloadElement(imgURI, 'illustration.png');<br/>  };<br/>  pngImage.src = url;<br/>};</span></pre></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="e9a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，你就拥有了创建svg图库所需的所有工具！那是我的第一个媒介和教程，我会非常感谢反馈来提高我自己。</p><p id="14b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望它是清楚的，如果你想要更多的信息，请随时询问。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/dc01945da1661fdfeb1942571b271be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*Ukh7DYekkpqlPDuO7LEG0w.png"/></div></figure></div></div>    
</body>
</html>